dialog's corner radius and position have been changed when resume again
the corner radius does not affect the top dialog corners for the datepicker (only works on the bottom ones).
it actually works on a "classic" dialog, just broken on the datepicker.
<img width="288" alt="capture dcran a 17 00 25" src=" phofurl
filechooser shows "0" as parent name if parent is external storage.
after opening for example downloads and then some random folder, the parent folder "downloads" is correct, also the "0" is only shown when parent is external storage.
i'm setting phofhyperlink a custom font (raleway) for material dialogs here phofhyperlink and here phofhyperlink .
once opened i see a cursor (?
)/graphical glitch at the end of the title for a few seconds.
set to false to click on exterior disappear
when invoking a materialdialog with date selection, if the config has `maxdate` set, the dialog crashes if the user didn't select any date before hitting the positive button.
i can't scroll up when have a long layout with edittext, watch gif phofimage
i've a simple input dialog with one `edittext`, phofcode and when i click the outside the dialog, the dialog got dismissed.
a clear description of what is the bug is.
a clear description of what is the bug is.
html tags work only when you set your text as int (@stringres), but when you do this: `message(text = "<b>text</b>") { html() }` they just stop working
by reading window docs and stackoverflow, objective 1 seem to be achievable by acquiring window reference and setting its soft input mode as below: phofcode however, the above line does not work, as the soft keyboard still shows upon dialog showing.
additionally, objective 2 seems achievable by the same method call, just including another flag.
is this behavior correct, and if so, how else can i achieve my objectives?
the top of the dialog does not have the correct radii image phofimage
adding custom view with flags `scrollable = true, noverticalpadding = true` adds bottom padding of `24dp`.
this is especially noticeable if you don't add positive/negative buttons.
custom views do not apply correct padding around them (any more since v3?
not sure about this currently) + is marked as private although i need this dimension for custom views.
when i long press an empty materialdialog input (edittext), the paste button is not shown.
theme attribute `md_corner_radius` doesn 't work when app theme is inherited from
can 't modify a property of an element inside a customview (showing a fragment inside a dialog/bottomsheet)
android 4.3: when i'm opening standard materialdialog, background is translucent (which is correct in my opinion): ss phofimage but if i'm opening bottomsheetdialog, background is fully transparent: phofimage android >= 5.0: when i'm opening standard materialdialog, status bar is translucent: material phofimage but if i'm opening bottomsheetdialog, status bar turns to white color: bottom phofimage (i don't change background and statusbar color in my code)
i'm using a custom view with a bottomsheet because i need to hide things later.
i'm saving the bottomsheet in a var to show it, however it shows only once.
if i remove the bottomsheet behavior, the (now) dialog shows always.
the new wrapcontent-option of layout of datepicker causes datepicker to be not centered vertically.
when showing a date picker dialog in landscape, the width is too constrained for the datepicker view inside it, causing everything to be squished horizontally (see below).
when the default time is set, time picker always showing it as am, i.e.
if i set the time 15:45 (or 3:45 pm), it'll be shown as 3:45 am.
the bottom side of the action button is cut off, so it appears unsymmetrical.
a clear description of what is the bug is.
if showing a dialog that only contains a message, the text does not appear to have the correct top margin - it seems too small.
example: <img width="401" alt="screenshot at 11 39 17" src=" phofurl same example in older library version (0.9.6.x): <img width="401" alt="screenshot at 11 38 51" src=" phofurl
on a dialog with long button text, buttons are stacked, and the text gravity on the buttons should be `end`, but it's not.
is there any way to avoid positive button changing color when color is selected?
when using listitemsmultichoice and selecting only one choice the dialog closes { title(text = "lil") listitemsmultichoice( r.array.socialnetworks, initialselection = intarrayof(1, 3) ) { _, indices, text -> toast("selected items ${text.jointostring()} at indices } debugmode() }
changing the value of a button text in the ondismiss() callback crashes with a npe on the button.
when dialog opens there is no default button that has focus.
you can use the dpad to get focus but if you can easily lose focus by clicking away from a button
no matter weexplayground or our own app, using wxc-swipe-action component on ios mobile phone, left swipe did not respond
absolute layout element cover priority not match with element order.
my app is using weex sdk in source integration.
we have used for half of year when the version is 0.21.0, but now we update weex sdk version to 0.26.2. and when i want to monitor the memory and cpu in android studio's profiler.
ios13 [wxcomponent dealloc] crash in 0.20.1.
while upgrading to weex sdk version 0.26, pages rendering speed has become very slow.
this is also impacting events also.
in 0.24 version everything was working fine.
**android q** when i set ** targetsdkversion=29 ** weex can not work well but ** targetsdkversion=28 ** weex works ok
invalid class setting when style has `:active` pseudo-class after.
1. when i click element its class "flickers" (all except first one) 2. also `v-bind:class` sets invalid class for first element in `list`
* * * when i enter app with arr version 0.26.0 * i suggest developers user 0.24.0 to develop
style for :active on <text> element is not being reset ( like in #2657 )
style for `:active` on `<text>` element is not being reset
win10 git bash$ weex create my-project
i can't use weex-toolkit to create or build a project
some day other team web developer told me a custom weex plugin can 't work.
i notice the method ``get:``works, but method ``get:callback:`` do not work, when web js call this method, weex sdk print log like this: pic phofimage that means weex not find the method in this plugin.
so i review the code and found the plugin code as follows: phofcode
just look the code: <img width="496" alt="image" src=" phofurl <img width="672" alt="image" src=" phofurl <img width="446" alt="image" src=" phofurl when the ** data ** back from network, **both params** are changing from ** visiable ** to gone ,which named && issubscribewx for controlling ui in my opinion, only the image && **the second div** will disappearnd weex always work like this to my surprise, `<text this text will disappear, too !!!
i know both use v-if && v-else will reuse the layout without a key in vue .but i remind vue will not reuse layout when i only use v-if i have found two ways to solve / avoid this problem: 1. set a key for disappear text.tell vue not reuse this text.and text not be gone .
but don not know why weex/vue thought text should be reuse !??
2. not change both params at time.set one param at front of another.
for example, `settimeout(()=> = ..., 3000) settimeout(()=> this.issubscribewx = ...., 3000) `
currently, android weex sdk doesnt support armeabi-v7a, arm64-v8a and x86_64 architectures.
from august 2019 onwards google will not allow apps on playstore which does not have support for these architectures.
so we need these architectures to support in weex sdk.
in weex playground app, the websocket demo is connecting all the time, without any error or succes prompts.
native crash on android when starting app
ios scroller component scrollend event return wrong contentoffset (0, 0).
the return of method "getrealview" in wxscroller should be 'mrealview ', which is mscrollerview now.
when i reduce the children of scroller view, it has no effect now.
i use typescript to write weex vue,the compiled code is like: phofcode there is a js error `_super.call is undefined` here is the compiled file: < phofurl i also see the pre-build vue version 2.5.16,but the package.json weex-vue-framwork 2.5.13-weex.5" phofcode so,where are the vue source?
**callback of storage.getallkeys not be called when storage is empty.
a clear and concise description of what the bug is.
there is a build error while building * grpc_plugin_support * .
when i keep switching setup mode from dreamview, multiple traffic lights are spawned in the display as shown at screenshot section.
when running the open space planner with sim control and selecting a parking spot using the sunnyvale map with two offices it stalls hash:
`cyber::reader` should wait for all callbacks to return before returning from the destructor or shutdown method.
without doing so there is a risk that the callback will access deallocated data.
this bug is more obvious when using member variables in longer callbacks and shutting down.
a workaround is to wrap the readers in a class.
then, in the wrapper class 's destructor call all readers shutdown method and sleep for about 10 milliseconds for short callbacks or however long slowest callback will take with some small extra buffer time.
for "sky" class the class_id to train_id in your description is 17 : 0, however, i did not find the annotation of sky 's class id when i actually processed the image
it is not possible to use udp_stream.cc with broadcast udp, as the receiving port is defined in the broadcast packet and not dynamically assigned.
i am implementing a visualizer of sensor& fusion object.
so i created a component to listen on two channles , 1st receive prefused_frame from radar componet 2nd receive fusion_frame frome fusion component so the data flow is like this: radar -> fusion -> visualizer | |-----------------> visualizer the radar componet is continuing sending frames and fusion component can receive all the frames.
but, the visualizer can only receive very few radar frames .
(while frames are all received exactly) it seems many radar frames droped or the queue overflowed?
when a publisher sending messages to a receiver in a high frequency, message, especially the first message, may be lost.
using --gtest_filger, it cannot pass some tests
repeated python calls of `cyber_time.time.now()` results in a segmentation fault.
the error occurs after a finite number of calls determinable at runtime.
the fault creates a core dump in data/core/.
the cause may be a deallocation error in the python cyber_time wrapper.
a bag file (`csc.bag`) is recorded using the `rosbag` command and it can be displayed in dreamview for apollo 3.0 based on ros.
the bag file is converted to a record file (`csc.record`) using the command `rosbag_to_record csc.bag csc.record`.
however, it can't be displayed in dreamview for apollo master branch (april 11, 2019, commit id based on cyberrt.
all topics in the `csc.record` file can be displayed properly through the `cyber_monitor` tool.
the nvidia driver does not support 3d graphic acceleration while co-exist with apollo rt kernel.
apollo version: 3.5 till code: in , max_x, max_y are initialized as following: double max_x_ = double max_y_ = in box2d.cc, they are calculated in function box2d::initcorners() : for (auto &corner : corners_) { max_x_ = std::fmax(corner.x(), max_x_); max_y_ = std::fmax(corner.y(), max_y_); } actually ,for foating-point types with denormalization, returns the minimum positive normalized value,i.e., ~0.0 , so when the corner_x() or corner_y() is negative, the max_x_ or max_y_ will get wrong result.
the perception module has an offline tool for obstacle detection in phofcode building and running this file gives the following error: e0226 15844 [] get instance yoloobstacledetector failed.
f0226 15844 check failed: != nullptr
a clear and concise description of what the bug is.
in the file the code tries to call push_back on a non-vector object, i.e.,
apollo's canbus module updates the can_sender when it receives control data.
in this case, it fails to handle the use case when a can tx message has an alive counter and its message trasmit rate is lower than control data update rate.
this will probably cause a can bus communication issue for certain type of vehicles.
i am using canbus module to send a can message whose last data byte needs to increment every time when it is sent out successfully.
in this case, the expected can output sequence is: canid: 123 candata: 00 00 00 00 f1 canid: 123 candata: f2 canid: 123 candata: f3 canid: 123 candata: f4 ... however, the output is: f1 f3 ... and discontinued alivecounter triggers an error in vehicle.
then, i noticed that can_sender.update() is called by oncontrolcommand which runs at a faster rate than my target can message rate.
if i comment out can_sender.update() in oncontrolcommand() function and add message.update() inside for loop within powersendthread, issue will be resolved..
build fails when following the kiwi: phofurl phofcode
when building apollo on a locally built dev container, bazel fails with the error: phofcode
when building apollo on a locally built dev container, bazel fails with the error: phofcode
the script downloads a number of artifacts to `/home/tmp` but is missing the civetweb v1.11 release.
running `bash apollo.sh build` on a fresh locally built dev container fails with the error message: phofcode
a freshly built dev container is missing the qt 5.1 library and gcc_64 binary required by bazel.
the bazel build of the math common module is expecting the `osqp` dependency under `/usr/local/include`.
the script places it `/usr/include`
the script downloads a number of artifacts to `/home/tmp` but is missing the grpc v1.14.2 release.
the build_dev.sh container build script uses a number of install scripts.
the script install_supervisor.sh phofhyperlink fails with: `unable to locate package supervisor ` this can be fixed with an `apt-get -y update` before the `apt-get -y install`
the build_dev.sh script uses a number of install scripts.
the script phofhyperlink fails with: fatal error: leveldb/db.h: no such file or directory it needs to install the package `libleveldb-dev`
the build_dev.sh script uses a number of install scripts.
the script phofhyperlink fails with `unable to locate apt packages`.
it needs an `apt-get -y update` before the `apt-get -y install`
the build_dev.sh script uses a number of install scripts.
the script install_ipopt.sh phofhyperlink attempts to install `gfortan` using apt-get but the container is missing the universe repository phofhyperlink
the build_dev.sh script uses a number of install scripts.
the script install_bosfs.sh phofhyperlink downloads the bosfs-1.0.0.8.tar.gz and runs its `build.sh` but fails in two places: 1) the `autogen.sh` script calls `aclocal` which had not yet been installed in the container 2) undefined reference to uuid-dev phofcode
a clear and concise description of what the bug is.
conf folder is missing in the perception module.
the equation for coordinate transform in third party perception is not correct.
`e1203 22823 transform_input.cc:69] cannot transform frame: odom to frame base_link , err: lookup would require extrapolation into the past.
requested time but the earliest data is at time when looking up transform from frame [base_link] to frame [odom].
cantransform returned after timeout was 0.9.. frames: frame base_link exists with parent ` referring to the above error, it happens when it tries to retrieve transformation (: localization frame velodyne16 ) inside the
here, phofurl code is commented out for some reason which can't understand why did it that way.
i guess it should be enabled when we dont use navigation mode
when setting the camera transformation with respect to the world or static transformation with respect to the car, here ( phofurl it was assigned the wrong transformation matrix because this transformation is used in visualization_subnode.cc as well.
let 's say we have two camera subnodes where it is required to instantiate two separate camera submodules.
but independent of the camera, intrinsic parameters of the front camera or defined camera parameters in here are loaded in phofhyperlink .
thus, i would suggest improving this by proving the
i am based in the usa and don't speak or read chinese characters.
the page below does not have option of english.
glfwinit() phofhyperlink should be move from glfw_fusion_viewer.cc phofhyperlink to main thread where the corresponding main module is being intializing because if there are more than two subnodes are trying to initialize glfwinit() phofhyperlink it will lead to a segmentation fault.
weakness in instruction "how to debug the dreamview start problem".
in phofurl `axios` started passing `agents` to `follow-redirects`; however, the documentation for `follow-redirects` shows the shape of `agents` differently than what `axios` is passing.
it means that an alternative agent is not correctly resolved by `follow-redirects`.
nested `params` option not works as expected.
on edge and firefox i want to upload a file to google cloud.
when i follow their instructions in order to put the file by chunks, it works fine on chrome latest version, but fails silently on edge and firefox.
### on edge the following happens : - we prepare a put request with the correct headers `content-type` and `content-range` - the request is send with the first chunk of bytes as payload - when request should be valid and we then proceed to next chunk of data, request silently errored (no catch triggered) - because we use axios-retry, is send again, still failing silently.
### on firefox following happens : we prepare a put with correct headers `content-type` `content-range` the is send with first chunk of bytes as payload when should be valid we then proceed next chunk of data, silently errored (no catch triggered)
can 't override content-type on headers when send get requests
when i uploaded files using fromdata, axios0.19.0 gave me this error message:data after transformation must be a string, an arraybuffer, a buffer, or a stream.
but this problem does not arise in axios 0.18.1,it works normally.
when using axios to get a local file (`file://...`) i get status code 0 as if there 's a cors issue.
this didn 't happen using version 0.18.0 so i assume that this is a bug?
since i upgrade axios from 0.18.0 to 0.19.0, the requests made to fetch a local file (`file:///`) with a relative path return an error: phofcode .
however the web browser will always return a status code 0 when the request success because there is no http server involved.
the xhr readystate is also 4, if there was a network error, i believe this one would probably be 0 as well.
response.data always undefined on ie9, because xmlhttprequest object not have property response
i 've implemented the solution from the here tutorial phofhyperlink and it worked well on
error on run travis ci build "can \'t open /etc/init.d/xvfb"
i want to authenticate against a server using a client certificate (mutual tls).
this works when using native `https.request`.
when trying it with axios, i consistently get `error: socket hang up`.
i also tested this with `request` and `superagent`, which makes me quite confident that this is a bug in axios.
a clear and concise description of what the bug is.
when i try to configure the
`axios.post` randomly sends duplicate post request and ignores the first response.
the code is below: phofcode the submit function above is only called once, while the `axios.post()` is called twice.
i know it when i check the `ts`, `um`, `ctop`, and `lastsent` parameter are same with the previous record.
also, cpanel visitor record show that request sent twice in short timespan.
is it because connection issues, or there are some configurations i missed?
i already read documentation, search google and stack overflow, but still no clues about it.
a clear and concise description of what the bug is.
`axios.post()` stopped detecting the default os proxy on windows in version 0.19.0. works ok in previous version 0.18.0.
we use some custom parameters via axios configuration.
they are used in the response interceptor.
sometimes there may be a lot of information there, so the option to pass it through the `headers` or `params` is not suitable for us because of the length limit
a clear and concise description of what the bug is.
the bug appeared when i upgraded from version 0.18 to 0.19. response data now comes back as a string even though responsetype: 'json ' and content-type: 'application/json ' i believe the problem is this changed line in core/axios.js: 0.18: config = utils.merge(defaults, {method: 'get '}, this.defaults, config); 0.19: config = config); i could not find any reference to the "defaults" import in the new merged config and the transformresponse function is part of default config.
as a result a json payload is not transformed anymore.
i can 't set `content-type` to headers when data is `formdata`.
the `geturi` method only returns the supplied `url` parameter and not the full request url.
however, using this method in a response interceptor seems to work correctly this might be a duplicate or related to #2190 but i'm not sure so just throwing this out there anyway.
the version 0.18.1 remove xdmainrequest support by this commit phofurl i need to support it.
and i want to know why remove it ?
do i have another way to fix it or i have to lock the 0.18.0 version?
we are using axios in a docker that running node in vm and make post request to proccess that run in the vm.
after update axios to 0.19.0, the post request start to recieve 401 unauthorized.
downgrade back to 0.18.0 solve the issue.
when using the `request()` method on an instance, the request throws an error if the instance 's config has `url` specified, but not `baseurl`.
error indicates a missing `url` arg: phofcode this contradicts the documentation, which states that > only `url` is required.
and > `baseurl` will be prepended to `url` unless is absolute.
since axios 0.19.0, the default authorization header is no longer set in query.
when axios client gets its response as 401, it does not throw error with statuscode in ie10.
ie11 and chrome, other browsers works fine.
specific request params do not get merged with the instance default params.
the results of the console are inconsistent with those of the request.
fetch module request is correct, axios is wrong.
`foo.bar.domain.com` would still be proxied if `no_proxy` env has `.domain.com` item.
related code is here: phofurl `foo.bar.domain.com` has 3 dots.
on the contrary, `.domain.com` has 2 dots.
so it will not match.
request phofhyperlink uses `indexof`, which supports this.
phofcode wondering that is this a but or it 's a original designing.
if it 's a bug, i 'm willing to make a pr.
according to rfc 8259 - the javascript object notation (json) data interchange format phofhyperlink content-type `application/json` does not have any charset defined, as it must be utf-8 encoded.
older specifications allowed other unicode encodings, and parsers were detecting exact encoding used by first four bytes, still not by charset param.
axios defaults to header `content-type: for some types of sent data.
this breaks some http servers and applications, who are not recognizing the content-type.
this is in a project where i am slowly moving old react.jsx code to typescript .tsx.
the bug is in a tsx file imported into a js file that uses react.
this seems very close to phofurl however i am doing import axios from 'axios '; and it still doesn 't work*
on nodejs the timeout mechanism does not work correctly.
it is only concerned with the time to receive the first byte.
if the server sends a few bytes across socket, but leaves it open request will never timeout.
this only happens with node, not in browser.
i was writing bad code.
in my `get` request, for `config` i was giving a string to it.
it made me look a lot for problem and double-check my variables the only error i was given was `name.touppercase is not a function`
the response data object "goods.goodsid" undefined when change the key "goods" to others,that is ok.
axios is a promise based http client with browser and node.js support.
as an http client, axios wants to make sure the sent message contains a proper content-length header as well.
so it includes a number type content-length header by default.
this behavior can be observed in at line 45. if request already has a lowercase "content-length" header, since they have different casing, the header included by axios does not overwrite the one included by the request.
so were sending two ontent-length headers to server (same values and different types).
i believe this is not expected behavior we want.
a clear and concise description of what the bug is.
i want to send a post request to back-end service with custom 'content-type': text/plain.
but i find something strange.
if i wasn't in logged-in state, the post request without a authorization header, it worked as expected.
if i logged in the application, every request had a authorization header and the content-type would always be even if set header 'content-type: text/plain' explicitly.
phofcode and the addtokenifexists method: phofcode this is full request header with authorization header.
in this situation, 'content-type' header will always be even if set 'content-type: text/plain' explicitly.
i 'm working on a project with ie11 support and axios.
as i also need some advanced urlsearchparams support, so i 'm using @ungap/url-search-params phofhyperlink to implement it.
i work on a form to send via the api using the post method.
but through the chrome browser tab network, the method changes to get even though it 's clearly written in code.
a clear and concise description of what the bug is.
onuploadprogress event is not cancelled when the network request is cancelled.
it succeeded the first time, and i was able to start the app by running `./src/qt/bitcoin-qt`, but after i did `ctrl+c` to quit the process and ran `make deploy` again, it failed and it keeps failing.
i looked at the suggested solutions in phofurl i tried running `make deploy` after doing `git clean -dxf`, after restarting my machine, and after deleting it still failed.
core crashes and when started again the url has not been saved.
i 'm getting prompted with a conftest.exe application error (see below for screenshot) during the make of the depends.
this blocks further progress of make until i click the prompt.
it doesn 't seem to impact the ultimate build result, but it wastes time, blocking remaining process while waiting for user input.
i assume wsl is incorrectly trying to run this executable in windows.
the error occurs during "checking for clock_gettime monotonic clock..." step, or shortly thereafter.
i verified that no extraneous paths have been added to my $path variable.
openssl termio header not found: phofcode zeromq patch won't apply: make zeromq preprocessing zeromq... patching file src/windows.hpp possibly reversed hunk 1 at 105 hunk 1 failed 58/58.
#include <winsock2.h> #include <windows.h> #include <mswsock.h> + +#if defined __mingw64_version_major && __mingw64_version_major < 4 +// workaround for mingw-w64 < v4.0 which did not include ws2ipdef.h in iphlpapi.h.
+// fixed in mingw-w64 by +#include <ws2def.h> +#include <ws2ipdef.h> +#endif #include <iphlpapi.h> #if !defined __mingw32__ make:
estimatesmartfee gives a result, but it doesn't seem linked to reality.
perhaps from before blocksonly was enabled?
when running the following query: `select * from t1 where unique_value is null and notnull_value = 2000 limit 1;` two rows are returned instead of one.
please describe the issue you observed, and any steps we can take to reproduce it: phofcode
when adding a column and creating an inverted index for that column within the same transaction this fails.
i run the following migration script - using phofurl - phofcode which fails with the following error: phofcode as a workaround i can disable the migration script to use a transaction with `-- +goose no transaction`, then it runs fine.
i wonder if this is intended behavior or something that should actually be possible.
a customer observed the following behavior in a cte query.
when casting a type to two different variables with the same type but different precision/width, it will always assume the first width/precision specified.
sql panic in 19.1.5, client is restarted and node crashes.
does not occur in 19.2.
cockroach data node crash due to oom when a replica running gc.
postgres `create table` statement/syntax allows for the use of `with (fillfactor=100)`.
cockroach does not allow this and immediately throws an error.
would it be possible to support this syntax or "noop" it if not relevant?
this would increase compatibility with existing tooling such as `pgbench`.
when user runs `show jobs` there are two schema change jobs that are `drop database <database> cascade` that show up as "waiting for gc ttl".
the schema change was started on 11/07.
using the following dataset to repro: getting the following messages when importing the file: phofcode the file ranges in number of fields, either 7 or 8.
inline foreign key creation bails with the following error when a user attempts to create a redundant foreign key reference.
> pq: column "a" cannot be used by multiple foreign key constraints it is still possible to create a redundant (or partially redundant) reference using a workaround as noted here: phofurl however, examining the ddl state using `show create table` after using such workaround returns command that cannot be executed to create the table.
the syntax `alter index if exists` does not seem to work.
it seems its implementation was forgotten in phofurl
when using qualified column references in `update .. set`, cockroachdb reports a misleading error message.
i have cluster consist of 3 nodes.
on one of the node, i cant run any query (not even "show database").
but weirdly though, the health endpoint showing that the node itself is healthly, so my alerting and loadbalancer doesnt catch that problematic node.
digging deeper into the logs, i found following: phofcode
i hit a problem with too many files open after a `workload init tpcc`.
it was a bit surprising that `cocroach` opens that many files and that they stay open after the workload initialization is done.
@ajkr seems to think too that this should not happen.
on the cockroach cloud management console, when you are viewing the connect options, the following text box: phofcode links to the wrong url when you click "our docs".
currently it links to ` phofurl it should link to ` phofurl
on 19.1.5 and 19.2 rc2 the following error gets spammed to the logs in this scenario: 877 web session error: http: named cookie not present` this occurs on a secure cluster when trying to access the admin ui but have not logged in yet with my sql user.
once i login with my sql user it does not spam the logs.
the spamming is 2-3 times per second.
enerprise database backup and restore doesn't honor table partitioning
currently, our enterprise backup will backup an empty database to an s3 bucket, but will run into an error when trying to restore.
for example if you backup defaultdb: phofcode this presents a problem for those running a script that runs a show databases command and then backs up all of them, and at a certain point in time then restores all of those backed up.
as we are aware, the backup/restore works on database level so one can cherry-pick those that they know are not empty, but this is not strong solution.
setting up exclusions for `defaultdb` and `postgres` databases will also not suffice as we've seen use case from one of our customers where there are multiple other user-created databases that are just left empty.
because user permissions are attached to table descriptors, whenever a user is granted or revoked a permission it triggers a schema change.
because of this, applying or removing permissions for a user in bulk can take an extremely long time.
i tried to add an index to a very large table with the following query: phofcode the `build_logs` table has a size of 25.6 gib, 905 ranges and 71909 rows.
i could see the job still at 99% after half an hour, when i decided to cancel the job, mostly because the nodes where constantly restarting.
the job looked as follows before canceling: phofcode and after canceling: phofcode however after canceling it creation of index still seems to run.
when i try add index again it errors with phofcode and if try drop it fails with
attempting to set up a changefeed on `laughing-ladybug`, a cockroachcloud cluster that we use internally to extract data from our roadmap in airtable.
creating the changefeed succeeded despite some reasons that it shouldn 't have: - the `kv.rangefeed.enabled` setting was not set to `true` - i was accessing the database as a user (`psingh`) without `admin` privileges
phofurl introduces a bug where the count of the total replicas after adding a new one is incorrect as it only takes into account the live replicas.
this is different than 19.1 where all the replicas are counted.
the bug leads to a situation where we would decide to add a new replica to range with 1 dead and 2 live replicas and end up with 4 total replicas.
in 19.1 `willhave := + 1` in 19.2 `willhave := len(existingreplicas) + 1` however `existingreplicas := livevoterreplicas` there is comment there that says `only include live replicas, since dead replicas should soon be removed` but this isn't generally true as range may be under-replicated and there may not be enough live nodes to rebalance.
in cockroachdb 19.1.4 (and 19.2), if you start a changefeed without enabling the `kv.rangefeed.enabled` cluster setting, a job will get created successfully, but will immediately fail and log an error message in the jobs table.
i am using `go-pg/migrations` ( phofurl to do my database migrations.
however, my blog migration fails with error level=fatal msg="could not migrate db: could not migrate: error #42p01 relation "blog_posts " does not exist"`.
this is strange, this i can perfectly create tables and insert in the same table for my users in a previous migration.
every migration is ran in a separate transaction.
i am evaluating cockroach as a potential replacement for aws postgres aurora and im having a bit of bad luck.
it seems i am running out of memory after running my loader scripts for 10-20 minutes.
while reading the documentation i saw: > if go allocated memory is larger than a few hundred megabytes, you might have encountered a memory leak.
phofurl and im seeing that go allocated is several gigs, per the below screenshot.
screenshot at 16 38 53 phofimage on top of that ive also seen warnings about disk stalls in the logs: phofcode
trying to backup a table to a local drive results in an error `the process cannot access the file because it is being used by another process` as shown below.
an internal error was encountered by a user.
from their spring boot logs it shows the following: (sql has been anonymized) phofcode it's not clear if the internal error was due to an issue on our end, or if it was caused by the query having placeholders instead of actual values and we did not know how to handle this.
we do see that that node 6 was fairly unhappy: 417 [n6,hb] slow heartbeat took 38.3s`
our test suite automatically fetches the "latest" tag from phofurl this ended up downloading 2.1.9 instead of 19.1.4
"cockroach user set ...." requires the defaultdb database, but the documentation says "the postgres and defaultdb databases can be deleted if they are not needed."
when following the steps to install cockroachdb on k8s phofhyperlink , under
please describe the issue you observed, and any steps we can take to reproduce it: there have been flakes in several tests that require the test to wait up to 5 seconds for a restored/imported table to be no longer seen as offline.
shutting down a node with `cockroach quit` doesn't work when the server is running on windows.
the server stops responding but doesn't exist and the only way to terminate it is with task manager.
i tried reproducing the issue described in #37315.
`delete from system.jobs where id in (x_1, x_2, ..., x_n)` only deletes 1 row even if all the `x_i` are in the table.
always only the last element (`x_n`) is deleted.
interestingly, the faulty behavior only holds for `system.jobs`.
i was not able to reproduce it for user defined tables or for other system tables (tested with `system.zones`).
i get an index violation on a non-unique index which is part of the composite primary when upserting entries of the same timestamp.
i have the following table: phofcode the following entry is in the database: phofcode now i try to upsert following entry: phofcode phofcode based on primary key, there should not be a conflict -> (id, market, timestamp), index is non-unique on (timestamp).
however i get following index violation: now when i query for timestamp i get old entry: indication of cluster inconsistencies....
it is not possible to drop a column `test` and then rename a column `test2` to `test` in the same transaction.
when start cockroach using flag "log-dir-max-size", it works for mail logger but not for secondary logger
crash node on parse incorrect alias name in sub-query
hot loop in rocksdb is creating billions of compactions, may be related to: phofurl hot loop may be causing slow range which is causing point queries to a key in this range to take > 60s.
compaction count is which is fairly close to the -231 (min int) of this expected to overflow if rocksdb stuck in infinite compaction loop.
looks like integer overflow crdb version 2.0.7 we have advised user connect suspicious node and run: `select
roko noted that we had a customer with unexpected latencies in their admin ui.
the customers ' latencies were different when measured from their client compared to the latencies in the ui.
roko and i did a simple experiment to determine whether wrapping statements in txns was impacting timings for the statements.
it seems that we are inaccurately reporting latencies in the below situation.
`roachprod run` in a separate shell with long-running command 3.
`roachprod stop` the `stop` in step 3 also stops the command in step 2. i could not find a way to ask roachprod to start/stop crdb nodes without also impacting asynchronous commands that i wish to remain running.
i tried to create more than tables in a single database by some scripts, but seems the cluster crashed.
i am noticing that `roachprod stop` and `wipe` do not reliably stop clusters.
nor does `roachprod status` reliably find whether the processes are running.
i narrowed this down to a bug in the way these commands discover the pids of the roachprod-launched cockroach processes: they run `ps axeww`, then grep things in environment as emitted by `ps`.
in a six node cluster, in one region, a node was terminated by aws, and the asg spawned a new instance which correctly joined the cockroach cluster.
the previous node was in the 'dead ' state for a few days (it was test cluster), and the surviving nodes, correctly, kept trying to contact terminated node.
i then decommissioned node, yet remaining nodes are still trying to contact decommissioned node.
i can tell this via logs: phofcode
sentry is not filing github issues for new events since june approximately.
yet the sentry-zapier interface seems configured properly: a manual check at phofurl will correctly cause a github issue.
it 's possible that the webhook api is not used by sentry any more?
when an error is generated from another error with e.g.
`errors.newf("woo %v", othererr)`, the details from `othererr` are not systematically captured and reported to sentry.
see an example here: phofurl phofimage the stack trace is where the outer error is constructed but the details from the original error are lost.
- folk have noticed that the link process gets killed when using the builder image (because most docker installs limit the container to 2gb ram) - @timveil tmeasured memory usage and saw it spike to
executing upsert causes unique constraint violation on primary key: phofcode
when a user performs a rolling upgrade while schema changes are ongoing, or if a schema change is issued during a rolling upgrade, it is possible to incur non-recoverable state in the cluster.
this means that online schema changes are currently unsafe to use in combination with online upgrades.
trying to drop a database but it fails with: phofcode
hi, i'm trying to decommision one of the node in one of our cluster, but at the last replica, the process doesn't seem to be able to finish.
i waited for more than 24h and the process still hasn't finished.
here's what output from `cockroach decommision` command: phofcode i tried to enable verbose logs by specifying and heres what i got: phofcode logs above seems repeated many times.
i have developed a test for an application library which uses cockroachdb.
the test runs in about 1 second when using transaction retries without savepoints, yet runs in about 45-60 seconds when using transaction retries with savepoints.
we found a regression from cockroachdb v2.0.7 to v2.1.8 in how the cockroach sql client handles a permission error on the `node.key` file if it is present in the specified `--certs-dir`.
we use a single `--certs-dir` directory with our cockroachdb v2.1.8 deployment which contains the `node.crt/key` as well as our `client.root.crt/key`.
the problem here is that, when using `--certs-dir` flag with cockroachdb v2.1.8 sql client implementation directory is scanned for any `.crt` files and corresponding `.key` files are being read despite not required for client connection.
our `client.root.crt/key` files are only readable by sql client linux user while `node.crt/key` files are only readable by a dedicated cockroachdb linux user.
this leads to following problem: when we invoke cockroach sql with aforementioned `--certs-dir` setup we see this error: phofcode
i am using docker swarm network aliases for a load balancer in overlay driver.
i have 3 instances of cockroachdb running with the following names: - `cockroach_1` - `cockroach_2` - `cockroach_3` and an alias for all of them named `cockroach` (that will act as a load balancer).
i wanted to benchmark the cluster using `workload` subcommand but with some of the workloads, it works and with others, it won 't.
these phofhyperlink two phofhyperlink assignments in method `sha512` in look like they have no effect, since the fields are not read in the same method, and `kv` is a local variable which does not escape.
the same goes for this assignment phofhyperlink in function `snapshot`
using the enterprise feature restore runs into an error on the rust postgres client.
errors we have seen thus far include: phofcode and phofcode the same restore command successfully restored the database into cockroachdb in python 's psycopg2.
dropping an index and a table within the same transaction produces the following error: phofcode the table is still deleted.
this used to work at least in v2.1.2, v2.1.6 and v2.1.8.
the error occurred with v19.1.0 and persists in v19.1.3.
the following lines are continually logged across three nodes in a cluster: phofcode
when trying to create a database using create database syntax as any user other than the root or a user with the admin role, the following error is thrown: `pq: only superusers are allowed to create database` superuser is not a concept in crdb
more of a syntax question... ran the following statement without a from... select count(*) usertable; got the following.
select count(*) usertable; usertable +-----------+ 1 seems rather liberal, but perhaps this is valid sql...
please describe the issue you observed, and any steps we can take to reproduce it: django performs a large number of dml statements when settings up the database to run its test suite.
this runs successfully the first time but if you let django drop the database and recreated it you get following: `split failed while applying backpressure to [txn: 97a88a2b], put put on range [(n1,s1):1, (n2,s2):2, (n3,s3):3, next=4, gen=1]: could not find valid split key`
i'm trying to reliably run multiple cockroachdb processes in automated tests (the same task led to #38758).
this is harder than i expected, in part because `cockroach --quit` doesn't block until the server actually shuts down.
this leads to a race: the server is shutting down, but my tests are already trying to start a new server using the same data directory.
often, the new process fails start because old process hasn't relinquished its locks: phofcode it's easy work around this by sleeping and giving first process a chance shut down cleanly, but it takes a * very * long sleep (~10s) make tests acceptably reliable.
it'd be much nicer if `quit` blocked until shutdown completes.
we could change default behavior or introduce `--block` flag.
we got krb5 errors when using `build/builder.sh mkrelease arm64-linux-gnueabi` for arm64, and this can be reproduced in release v19.1.1 and v19.1.2, maybe all v19.x.x versions.
error log: checking for ns_initparse... yes checking for ns_name_uncompress... yes checking for dn_skipname... yes checking res_search... yes whether pragma weak references are supported... constructor/destructor attribute support... configure: error: cannot test constructor/destructor support when cross compiling makefile:556: recipe target failed make:
i attempted to specify the order of aggregations ( phofurl movr data ( phofurl and killed a node.
doing the same insert again as in phofurl on the same setup, but now with different result.
queries don't time out (yet?)
as in the other issue, there are no logs about slow latch acquisitions, but one node eats up all cpu it can, causing the cluster to perform poorly.
so far it seems to be a different issue, hence opening a separate ticket for it.
it's different in given node consumes more and more memory and it uses not just one cpu core, but all of them.
i could've observed this once a day ago, where it went to 30+ gib until brought machine to its knees.
after i registered a new cluster setting, for example: phofcode error occur at build time: phofcode
after ingesting some sample data, one of the cockroachdb nodes starts eating cpu and while some sql queries can succeed, others hang forever.
when running cockroachdb with the `--background` and `--listening-url-file` flags, the listening url file isn't written until * after * control is returned to the shell.
this makes it awkward to actually read the url from file, which makes `--background` less useful (especially in tests, where i'm starting databases on ephemeral ports).
it's easy to work around this by retrying until file appears, but that's a bit distasteful.
when adding rows using default values to tables with `int[] not null` and `string[] not null` columns (default=empty array) the insert fails.
the error message is either: - `pq: type of array contents int doesn't match column type string` - or `pq: type of array contents string doesn't match column type int`.
depending which column is defined first.
so the second column will produce the error for some reason.
if there are two array columns of same this issue doesn't seem to occur.
during a recent debugging session with a customer, the managed team was attempting to load the data distribution page to check zone configurations in the admin ui.
the data distribution page would consistently time out because fetching the required information was taking longer than 30s timeout for page.
@robert-s-lee recently, separately encountered this problem with a different customer.
there is a regression in cockroachdb 2.1.x: tls artifacts (certificate and key files) that worked with 2.0.7 and stopped working with 2.1.7. we 're deploying cockroachdb with a custom `client.root.crt` certificate signed by an intermediate ca certificate.
to create a valid certificate chain for authentication the `client.root.crt` file contains the end entity certificate with `cn=root` followed by the intermediate ca certificates their own cn 's.
this tls artifact configuration for cockroachdb worked for us 2.0 but stopped working 2.1. we see the following error cockroachdb 2.1.7: phofcode we 've figured out that reason our configuration stopped working was introduced pr #24687. cockroachdb 's own sql client now checks for cn field each certificate in chain in `client.root.crt` file to match user name `root`.
notably, this error does not seem to happen as part of a tls handshake, but merely as part of well-intended configuration validation check.
once we removed validation 2.1 works just as well as 2.0 did our configuration.
phofcode details of any intermediate should not be validated these fields there is no way to know in advance what cn (and other details) should be.
the expected behavior would be to only check cn field of first chain (`end entity certificate`), if anything.
in case using root and no intermediate certificates sign client 2.1.7 behaves correctly.
in that case `client.root.crt` only contains single `cn` set `root`.
1tb data to a table, the cluster stalls.
data can 't be accessed or manipulated anymore.
the log files say that ranges are lost.
during the test of cockroach, the raft appeared panic problem, the error log is as follows phofcode after careful investigation, i found that raft logs from other cluster were sent to the localhost:28253 process.
there is a disorder in sending messages between different clusters.
if you have some cluster, and a "faulty" node that is able to connect to the cluster, but no node is able to connect to the faulty node (e.g.
due a misconfigured `--advertise-addr`, in my case it happened because of a dns issue) then that faulty node will still be reported as ready even though it is unable serve any queries.
there have been multiple instances of users seeing this error.
we know the cause of this error is due to a single range having so many mvcc versions that it takes up more than 128 mb (twice the max range size).
the cause of why mvcc values on the system config span range are growing so rapidly is not yet fully known, but we think it may be due to schema changes.
usually this error can be resolved by changing a cluster setting (`set cluster setting as well as adjusting the mvcc ttl to a much lower number (by default this is 25 hours), however as of recent, issue has been happening on a particular range, system config span range that houses cluster settings and zone configurations and so any attempt made at changing these results in split failed error.
as now, we have not been able to reproduce but there have been several instances users reporting issue.
engineering has come up with few ideas on how get root cause issue: * improve error message so that issue can be debugged easier * turn off back pressure on that holds cluster settings and zone configurations
testing whether an element appears in an array column using `'foo' = any array_column` works, but testing for the opposite with `'foo' != any array_column` does not.
after running workload tpcc for a while it crashes due to a missing row.
i 'm running a pod in kubernetes which basically is having a go client spawning 32 go routines each of which is firing a batch (size=4096) write only workload (multi-row inserts) to a secured clustered cockroachdb.
over the period of time, i could see that the write throughput as seen by the go client is gradually degrading.
over an hour of run on an empty table, i could see peak write throughput of ~25k which gradually reduced to ~17k towards the end first hour.
i 've also re-tested scenario by reducing to 16 go routines in client side but results were still similar.
why there is such drastic degradation throughput?
refer to below screenshot [ops/sec (cum) column] - image phofimage
when using json built-ins (e.g.
to_json, json_agg), it seems that column names are discarded as property names and replaced with "f1"..."fn" instead, which doesn 't match postgresql behavior.
please describe the issue you observed, and any steps we can take to reproduce it: working on s390x , built from source as documented here phofurl observed some failures.
need help in fixing them.
i'm experiencing a consistent crash when executing a left join query with a sub-select query.
please describe the issue you observed, and any steps we can take to reproduce it: i try to do any changes to schema in the table (including truncating tables) and receive the error: phofcode running workarounds mentioned in other issues (namely, `alter range default configure zone using gc.ttlseconds = 10` and `set cluster setting also fail with the same error (which is why i 'm creating this as a new issue: i don 't see other issues mentioning this scenario).
* * error: reported as error * 145 failed to update store after merging range: io error: failed to remove dir: 0xxxx 22: goroutine 145 [running]: 0x1b) +0xdb 0x54cd41d, 0x1b, 0x2a7, 0xe8) +0x961
a common cause of node deaths when running an overloaded cluster is unsuppressed panics due to context cancellation which occur during query execution.
the following stack trace is an example of such a panic: phofcode
please describe the issue you observed, and any steps we can take to reproduce it: check constraints on tables are being lost when upgrading from v2.1.5/6 to v19.1.0
user is importing json blobs under a uuid key (trying to migrate an hbase workload) and the import never completes, just hangs.
unable to init secure cluster on gke.
please describe the issue you observed, and any steps we can take to reproduce it:
working on docs for cbo index selection in the face of zone configs and lease preferences ( phofurl as part of that, ran a query on a basically empty table (see below), which led to the wrong index being selected.
quoth andy kimball: > i suspect it's due to problems with costing when stats say we have 0 rows in the table.
once that gets fixed, we should see the right index being selected
add any value to column jsonb type that have column family consist only from this column , and after that select * from this row will crash
i ran a schema change on a partitioned tpc-c 10k cluster and it killed two nodes: phofcode here 's the error: phofcode here is the full logstostderr for the first node: phofurl
paused job fails after being successfully paused.
i setup a 3 node cluster.
2 of the nodes joined the first node successfully and showed up green.
i had an issue with port forwarding that prevented the ability for any of the grpc or sql protocols to work on those 2 nodes.
they still remained to show up green although there were lots of errors in their logs about not being able to connect to each other.
the cluster showed under replicated ranges.
it wasn't easily visible understand why because all nodes looked healthy.
as a new person this wasn't intuitive.
please describe issue you observed, and any steps we can take reproduce it:
i was driving `cockroach sql` from emacs as a comint process to use sql mode phofhyperlink and crashed the sql shell process with the message in the title of this issue.
i 'm not sure how to reproduce the process-to-process communication between emacs and cockroachdb processes, but i 'll share steps i performed.
even though i 'm not sure what was sent to `cockroach sql` i definitely didn 't expect it to crash :-).
however this may be a subtle form of "user error".
while testing out the new index backfill i `set cluster setting = '1mb '`.
once the schema change started it dropped qps to zero on the cluster: image phofimage image phofimage image phofimage
importing csv files that were about 100 gb in size, nodes on users cluster experienced a fatal error: 59667 util/log/clog.go:1275 disk stall detected: unable to sync log files within 30s goroutine 59667 [running]: 0x10) +0xd4 0x10, 0x4fb, 0x38) +0x95a 0x2, 0x0, 0x0, 0x1, 0x1) +0x2d8 0x1, 0x4, 0x0, 0x0, 0x1, 0x1) +0x8c 0x4, 0x1, 0x1) +0xa5 +0x122 created by time.gofunc +0x44
while running tpc-c 3k on a 9 node geo cluster, i created a schema change and then pkilled a node 5 minutes after creating the job.
this cluster configuration can tolerate 4000+warehouses and is the one i 've been using to test decommissioning and pkilling nodes.
with this setup, the schema change spikes latency for the duration of it 's run and drops qps: image phofimage image phofimage image phofimage
user was upgrading from to v19.1.0-rc.2 when node crashed.
below is the stack trace from node 20: phofcode
i was dropping some foreign key constraints and indexes from a table when i encountered this message: phofcode please describe the issue you observed, and any steps we can take to reproduce it:
when i do `delete from db.foo` on a large table, i see memory usage of cockroach spike.
in psql if you give an alias to a column it will pass that name along: phofcode in crdb, with a single column, we do not pass the name correctly: phofcode
index creation job ran for ~ 7 days before failing with error: `result is ambiguous (error=unable to dial n18: break open [exhausted])`
node had been dead for a few days, was re-added to the cluster, node crashed leading to a drop in queries and an increase in 99th percentile latency.
sql queries graph phofimage the log files show there was a fatal error and unstable cluster: phofcode
after killing a node, i saw a sustained 10s latency spike when re-starting the same node: image phofimage the first qps dip is where i killed the node.
the giant latency spike is when i started the node backup again.
user ran into oom while creating an index, also experiencing some slight load from tests.
phofcode here are the top sources of memory allocation from the node: phofcode debug zip phofhyperlink
when creating a new index the job failed after some time with the following error: `the batch experienced mixed success and failure`
@vilterp @mberhault @nstewart the managed console has a model that shows a `cockroach` command that lets the user connect securely to their cluster.
here is an example command, with a fake password: > cockroach sql --url if your password has special characters in it (e.g.
i used a password manager to generate my password, and so it had five or so different special characters in it.
the error message looks like this: > error: invalid argument for "--url" flag: parse net/url: invalid userinfo failed running "sql" it works with psql tho: > psql `cockroach` works if you don 't put the password in the url; `cockroach` then prompts you for password and there seems to be no issue even with special characters.
on managed side, we are gonna work around this issue by not including in `cockroach` command we display to users.
perhaps we should fix broader issue tho.
nate found following issue on stackoverflow: phofurl the looks relevant.
i set up a 6 node cluster running tpc-c with 5k warehouses (under 4k active load) and see large latency spikes.
latency was ~500ms before i began decommissioning.
image phofimage note that the gap in the middle was because i didn 't run with `--tolerate-errors` (which i 'm now running with).
also, note that the rebalancing was more or less horizontal for 40 minutes.
i have a piece of rust code that runs two sql statements.
these two statements, when executed, cause cockroachdb to crash.
i partitioned a table, created replication zones for the partition, viewed one of the replication zones with the `show zone configuration for partition <partition_name> of table <table_name>` syntax (this worked), and then tried to do the same thing with `show zone configuration for table <table_name> partition <partition_name>` syntax (didn't work).
cockroach source code(version: 2.1.6) compile failed on step "go install"
when running tpc-h no results are returning for this query: phofcode image phofimage results phofcode
@timveil pointed out that we are mixing and matching unit sizes (in this case ms and microsecond) which makes it difficult to easily scan the tooltip and see which series has the largest or smallest value.
hit a fatal that killed a node while importing tpc-c 10k on a 7 node 72 cpu machine.
when running tpc-h i received the following error: phofcode but when i reproduce on a new cluster with the exact same setup: phofcode
import table results in a failed node with oom
please describe the issue you observed, and any steps we can take to reproduce it: i 'm running a complex view with underlying views.
it usually works with a limit of about 5, but any more than that, and it crashses out
while decommissioning one node on a six-node cluster under load i hit this error: phofcode this resulted in this error on the cluster: phofcode
stats look hung in the webui: image phofimage `show jobs` phofcode
automatic stats are creating `unknown event types` in the web ui event log image phofimage
came across this while trying to union two selects that contained a json column, and narrowed it down to the json column.
phofcode according to the comment, ` if both inputs still have rows, the hashjoiner will default to storing the right side.` i think this comment is not comprehensive.
consider this situation, = 64mib (default) = true (default) , then i run a query (with distributed hashjoin) which would use memory far beyond 64mib .
the hashjoiner will be initialized in newhashjoiner(): phofcode we can fount that `h.initialbuffersize ` was initialized to 64mib/2 = 32mib (is no longer 4mib).
in `hjbuilding` state, i have try many times in different situations (with = true), it always go to phofcode the storeside will be set side that is executing addrow() function which throw an "hashjoiner-limited: memory budget..." error fist (maybe is left side), and then jump hjconsumingstoredside state.
but it would not go phofcode so i am thinking about whether this comment content needs be modified.
i hit an error when running tpc-c on a 7 node 36 cpu cluster resulting from a panic.
a fatal crash killed a node during tpc-c import on a 6 node 4 cpu test.
the cluster shows zero latency on some nodes but all nodes are serving traffic.
image phofimage image phofimage image phofimage
i 'm attempting to partiton a cluster using roachprod and running into timeout and sqlstate errors.
here is normal pointing at node 1: phofcode i then tried pointing it at node 2. phofcode
the following sequence crashes cockroachdb: phofcode backtrace: phofcode please describe the issue you observed, and any steps we can take to reproduce it:
based on the documentation for postgres json phofhyperlink the following should be true: phofcode
using kubernetes on a server with 64 virtual cpus and resource limits as below phofcode admin ui reports 64 cpus instead of 4 cpus.
i have 3 nodes cluster, but after one of the nodes reboot, it was struggling to come back.
the whole log was as below.
what catches my eye is: "0 of 1 are within the offset".
it seems it recognize itself as the only one node in the cluster.
any project vendorizing without a vendor directory will fall into this issue.
can 't create computed column - memory budget of 0 reported.
two dead nodes during tpc-c import on 60 node 4 cpu cluster with this failure in the cli: phofcode
i have several views which are combined to a master view.
when i run the combined view, i get the error pq: invalid column ordinal: @12 please describe the issue you observed, and any steps we can take to reproduce it: phofcode
a fatal crash killed a node during tpc-c import on a 30 node 8 cpu test.
new index backfill schema change causes a spike in latency when running on tpc-c 1k.
i'm accessing cockroachdb in a rust program using the `diesel` crate with the standard postgres driver.
when i try to read tables using int2 or int4 (mapped to `i16` or `i32` respectively), the driver raises an error `received more than 2 bytes decoding i16.
was an integer expression accidentally identified as smallint?`.
if i map those fields to a `i64` in my code, then it works properly.
this also seems to have happened nocduro as mentioned in this comment: phofurl
a user encountered a query that resulted in unexpectedly high cpu utilization; issuing `cancel query` did not kill it.
please describe the issue you observed, and any steps we can take to reproduce it: a customer experienced a failure of all time series in the admin ui.
all time series values were not updated after a fixed point in time with no instability in the cluster or issues with the admin ui.
image phofimage image phofimage image phofimage image phofimage note: nodes 1-6 are not expected to be available - this cluster is healthy.
i'm running a three node cluster locally on my machine and executing two transactions at the same time.
one transaction performs a read and then an update while the other performs two reads, one before the update occurs and then another afterward.
sometimes the transaction is successful and other times a is returned.
@bdarnell asked me to open this issue for further investigation.
node died while importing tpc-c 10k on a 15 node cluster with load based splitting turned off.
in the shell i saw phofcode
when running grafana 's migrations (with the postgres database type against crdb) a string concatenation which works on postgres fails on crdb.
the part that breaks is concatenating ` ' '` and an integer column.
i am testing cockroach in ubuntu v18.
"jdb2/sda2-8" consumes too much i/o when more than one cockroach instances are running.
i run a local cluster for testing with 2 instances.
before any instances is running, jdb2/sda2-8 occupies about 0.3%.
when the first one instance is running, it stays normal.
then start 2nd one, it ranges from 6% to 14%.
when i close them them, eventually it goes down to the normal level.
the io of cockroach stays 0.01% - 0.02% through out the test.
node died while running tpc-c on a six node cluster with range merging turned off.
in the shell i saw: phofcode
node died while running tpc-c on a six node cluster with range merging and loadbased splitting turned off.
in the shell i saw: phofcode
node died while running tpc-c on a six node cluster with range merging turned off.
in the shell i saw phofcode
in the face of a large number of flows today's distsqlrun.flowschedule begins queuing requests for processing.
this queueing leads to delays in processing incoming flow requests.
at a certain point these requests will be delayed long enough that the upstream node expecting a connection will time out (default 10s) which results in the client receiving an inscrutable `no inboud stream connection` error.
see #27746. while some amount of queuing might be acceptable, today there is no limit on queuing or on how long requests might be delayed.
rather than work through exactly what the queuing behavior ought to be, this issue suggests we should reject incoming requests which today might be queued.
this will lead to faster failure with a more reasonable error.
while running tpc-c on six node clusters, i see repeated failures of: phofcode note, i 've observed this on multiple separate nodes.
@andreimatei discovered in his analysis of phofurl determined that the gc queue is not making progress which is problematic.
the proximate cause of the lack of progress is a timeout while attempting to push transactions associated with intents which need to be resolved.
the current behavior is that all of the transactions needing to be resolved are put into a single, potentially quite large batch.
node died while running tpc-c on a six node cluster.
in the shell i saw phofcode
i set up a six node tpc-c cluster with load based splitting turned off and it resulted in a dead node during import.
cluster settings not settable as per documentation phofhyperlink for keys:
i 'm testing cockroachdb v2.1.4 work with xorm phofhyperlink which tests pass with postgres.
i found some tests failed because the returned serial id should be 1 but not.
executing the following command does not seem to work as expected however a similar command does work as expected.. does not work: `alter table example6.central_west configure zone using +datacenter=west]';` does work: `alter table configure zone using 2, +datacenter=west: 1}';`
database dump started failing some time ago.
i'm sorry i'm not sure if it was around the time of an upgrade or not.
dump call fails with the message >error: type 4 is not a valid cockroachdb type >failed running ump
please describe the issue you observed, and any steps we can take to reproduce it: cockroachdb v2.0.6 (and v2.1 with cost-based optimizer turned off) do not select index that seems to be obviously (well, to me :) ) better for the query.
please describe the issue you observed, and any steps we can take to reproduce it: i am trying to migrate some closed-source software to cockroachdb.
as part of a database upgrade, it attempts to add a few columns an existing table.
on a certain step, i reliably get an sql panic from cockroachdb.
user's reproduction steps are below.
tl;dr: following a successful backup, restore results in a `could not rewrite key` error.
please describe the issue you observed, and any steps we can take to reproduce it: on a ppc64le machine, build from source as documented here phofurl upon `make build`, the process will fail.
please describe the issue you observed, and any steps we can take to reproduce it: in v2.1.2, i 'm unable to use an incremental backup after a restore.
after backing up, dropping my database, and restoring it, i 'm not able to use incremental backup on the same db.
instead, i receive a `pq: previous backup does not contain table` error.
@rolandcrosby - assigning you for triage and s-3 for now since afaik this has not impacted more than one user.
creating a new database with uppercase characters gets normalized to lowercase, then attempting to connect to that database (using the original uppercase name) fails
when i create an index on the timestamp type column , but the plan display is not used and this index will not be used with any date function.
#### async connect and query got error: phofcode
when executing `cockroach debug zip` the resulting archive contains files whose `date created` and `date modified` equal `november 30, 1979 at 12:00 am` instead of the day/time the file was generated.
on cockroachdb console, select count return correct result, on laravel console, it return wrong (i guess i should report to laravel, but they don 't officially support cockroachdb atm).
i 'm seeing a panic when aggregate functions (e.g., sum, avg) are used with a window.
for example, if i set up a table like this: phofcode then the following statement causes a panic: phofcode this was on cockroachdb v2.1.1, and i tried upgrading to v2.1.3 and am seeing the same problem.
here is dump of the logs: > 16082 sql/conn_executor.go:636 sql panic has occurred while executing "select avg(b) over (order by a) from test_table3": runtime error: index out of range > 16082 panic has occurred!
> 16082 reported as error > panic: runtime error: index out of range [recovered] tpanic: panic while executing 1 statements: select avg(_) over (order by _) from _; caused by runtime error: index out of range goroutine 16082 [running]: +0x36f +0x61 +0x229 0x2, 0x2, 0x1, 0x1, ...) +0x355 0x2, 0x2, +0x189 0x0, 0x2) +0x8bc 0x0, 0x2) +0x83 0x0, +0x191 0x303cde0, +0x5c 0x0) +0x98 +0x191 0x0) +0x879 +0x24c 0x3, 0x1, 0x1) +0x2d8 0x1, 0x30, ...) +0xa8a 0x30, ...) +0xb3b 0x30, ...) +0x341 0x5400, 0x0, 0x0) +0x1400 0x5400, 0x0) +0xce 0x5400, +0x81 created by +0x107c
when opening the ui on localhost:8080 i got a blank page.
the devtools showed this error: screenshot phofimage and there was also this exception: phofcode
when (trying to) inspecting the inspection fails and pgweb returns an internal error 500 instead, with the following stack trace: phofcode
inconsistent reporting of nodes inactive nodes.
please describe the issue you observed, and any steps we can take to reproduce it: the ui is showing inconsistent information for inactive nodes.
one version shows the inactive nodes as _dead_ while the other shows them as _decommissioned_.
the user had decommissioned the nodes in past.
currently they are on version 2.1.2, but this was happening before upgrade.
the difference in reporting of inactive nodes is happening from two different machines.
1. create an insert request.
2. cancel context when the request is executing.
the request will be terminated exactly in 2 minutes.
please describe the issue you observed, and any steps we can take to reproduce it:
when running ycsb workload a, the usertable table has around 10k records, however the table looks completely empty based on the size listed on the /databases page.
i have a 3-node cluster running 2.1.1 that reports "invalid leases" for r1 and r2 on the problem range page.
image phofimage image phofimage in both cases, node 2 has not yet been updated with the current lease information.
node 2 believes itself to still be the raft leader of r1.
despite the error message of "invalid lease", lease appears to be valid on nodes 1 and 3, but n2 remembers old invalid state.
when using spring batch with the default job repository using cockroach as the backend, sql error happens.
in my understanding, when cockroach receives a prepared statement, it will decode the arguments by in #28951, the handling of string types is improved.
however, in switch case statement inside `decodeoiddatum`, `oid.t_bpchar` is not processed, leading to error `unsupported oid %v with format code %s`.
cockroachdb has a compatibility issue with jdbc driver.
cockroachdb claims to be postgresql 9.5, however, in jdbc driver assumes column `amcanorder` to exist on table `pg_am`.
we have a database that is globally distributed and we just tried dropping a database and it seems to hang forever (1 hour so far).
the database has a few hundred thousand rows of data (i didn't actually check before executing the drop).
we have dropped a similar database (it was probably bigger) that was not globally distributed and it worked fine.
i'd expect that show sessions; would show all active sessions, including those initiated over jdbc or any other postgres:// string.
however, this appears not to be the case.
locally, while running tests with dbeaver and running queries with python, i'm only able to see my dbeaver connections.
a client reports that they're unable to see their jdbc connections with the attached script.
we have a 3 node (version 2.1.0) cluster.
one of the nodes (n1) crashed running goroutine 97. the only databases on the cluster are the system database and the startrek database.
the crash appeared to occur around 5:00 am during some maintenance routine.
i keep seeing warnings about a node that was decommissioned and taken offline.
the node is showing as decommissioned in admin ui (correctly).
if the connection needs to be retried periodically, logging info rather than warning would make sense for decommissioned nodes.
the cockroachdb source repos embeds the lato font files in woff format as-is.
this may violate their license.
from @couchand: > looking at that license faq does raise questions.
for instance, conversion to woff must be done according to some specific criteria they lay out.
we have our fonts in woff, and there's no indication in the commit that added them about the provenance.
dumping the schema from a v2.1.0 database generates invalid syntax for alter statements which include set null please describe the issue you observed, and any steps we can take to reproduce it: dump a table with on delete set null in the defintion
we currently use flyway to maintain our database schema and to date this has (generally) been working well.
today we are testing using a cockroach cluster that spans several regions, including us, australia, and asia.
when flyway tries to create the schema, we get this error: phofcode if we run exactly the same script in a console it works fine.
and it works fine on a 3 node local cluster.
also, absolutely nothing else is happening in the cluster.
note: it is just the first flyway script that fails, which creates most of tables, indexes and foreign keys.
subsequent scripts (which are smaller), seem to work.
running 2.1.0, bulk csv import fails to create an inverted index for this payload (cockroachlabs only) phofhyperlink .
the index can be created successfully on the same table as long as its done after the import.
on a one-node cluster running on master i added an enterprise license and tried adding my user to the `admin` role.
however, when i did so, the command never completed in my sql shell, it just hung there for minutes on end: phofcode the node 's logs were full of the following log spam, where it just kept repeating the same message every couple hundred milliseconds ad infinitum: phofcode the command had successfully taken effect -- user `alex` was able to do things that required admin role, but statement never finished.
when i ctrl+c 'ed shell, log spam stopped with this final message: phofcode
please describe the issue you observed, and any steps we can take to reproduce it:
please describe the issue you observed, and any steps we can take to reproduce it: i use import to import mysqldump data import mysqldump " phofurl pq: using skip requires all nodes to be upgraded to 2.0-4
please describe the issue you observed, and any steps we can take to reproduce it: we exported our database and reimported it into a different cluster.
the import worked up to the point where it attempted to validate the foreign key constraints.
the validation ran for several hours and then our console died (unrelated to this issue).
the database is not that big but some tables have about 300k rows.
in the end it turned out data had been loaded but foreign key validation caused import take an extremely long time and make cluster unusable.
my schema has several interleaved tables that are joined together in a select query.
when filtering results using a `where` clause the results come back as expected.
when i instead try to filter on the same column in an `on` clause referencing a boolean column that comes back `null` in a left join when i'm checking for the value `false` (yes, it's mouthful and pretty convoluted) the query fails with `error: detected badly ordered input.` example queries: success (filter on `deleted` in `where`) phofcode success (filter on `deleted=true` `on`) phofcode fail (filter on `deleted=false` `on`) phofcode
node crashed during tpc-c fixtures import on aws.
image phofimage phofcode note that there is plenty of space but at least one of the other nodes is very close to full: image phofimage
i am using hikaricp and stumbled on this issue and on digging further figured that the special constants supported by postgres phofhyperlink is not implemented in cockroachdb, causing error with keeping the connection state active in hikaricp.
please describe the issue you observed, and any steps we can take to reproduce it: this is the stacktrace which keeps appearing in application log: phofcode
node died during restore on tpc-c 10k on 9 node 64 cpu cluster.
delete on a table completes in seconds for rows, but hangs (or perhaps completes in minutes) for 8000.
@bdarnell suggests perhaps `max_refresh_span_bytes` is involved, but no investigation has shown this yet.
after completing the restore and setting up the data set, tpc-c did not produce any results on a 21 node 16 cpu cluster with increased ramp.
i see setting up the dataset: `[ 710] setting up dataset then no results: phofcode then, the cluster is stuck fetching logs.
i observed non-linear scaling on restoring tpc-c 10k by the number of nodes.
note that while cpu varies we expect it to not be a factor in restore speed.
9 node 64 cpu cluster took 4hrs11m to finish restoring tpc-c 10k image phofimage 11 node 32 cpu cluster took 2h46m image phofimage i observe that 22% more nodes did roughly the same amount of work 34% faster.
i expected this trend of increased performance with an increasing number of nodes to continue, however, a 21 node 16 cpu cluster took almost exactly the same time as the 11 node 32 cpu cluster (no screenshot).
this suggests to me that maximum performance for tpc-c restore 10k is greater than 9 and less than or equal 11 nodes.
i initially see suspicious performance result when running tpc-c with an increased ramp time.
then, the test is killed due to extending beyond 12 hours ( phofurl i also see lots of gossip errors.
go's pq driver makes a request with a particular version in order to cancel a request: phofurl this ends up causing: phofcode
running cockroachdb in systemd with: phofcode results in: phofcode this means that cockroachdb reports that it has 7.3gb available when it really only has 6.2gb available.
`systemctl status cockroachdb` reports the limit: phofcode
dead node on 11 node 32 cpu cluster image phofimage
node unresponsive when attempting to update many bool rows at once.
sort of crashes, but not always, or not really.
i ran the following query: phofcode and it hung the all nodes that had ranges in that index.
the nodes stopped responding to queries.
i was dropping the index because i created it incorrectly.
once i ctrl+c 'd the `cockroach sql` client it seems index was then deleted and things returned to normal.
that might 've been a coincidence though.
it said drop index took 32 minutes if look at "jobs" page.
this page didn 't load while nodes were hanging but after things returned to normal could see page and see that it took that long.
while conducting a routine migration, customer encountered the following: 1. context canceled / aborted transactions in the logs, for example: failure aborting transaction: transactionabortederror: txn aborted "sql txn" id=581b6de4 rw=true iso=serializable stat=pending epo=0 wto=false rop=false seq=2; abort caused by: failed to send rpc: sending to all 3 replicas failed; last error: {<nil> context canceled} 181 gossip/gossip.go:488 [n2] gossip status (ok, 3 nodes)` 2. upstream sqlstate(08006) errors in hikaricp: `warn - roach - connection marked as broken because of sqlstate(08006), errorcode(0)` 3. http 500 errors in their application due to the broken connection & 08006 error.
looking in our code, i see code 08006 is the result of a these are called only twice: schema_changer.go and [inbound.go:99 phofhyperlink the comment above that line does seem to describe condition described log warning.
however, it 's not clear why result of this race is a 08006 error since that would usually indicate a problem with connection while (at least as far as i can see) underlying issue is just context cancellation.
functions that should be constant are not resolved early enough to be used in the spans.
i have a table with: phofcode but if i do: phofcode the explain shows: phofcode
i ran tpccbench for tpcc 10k on a 9 node 64 cpu cluster on the 10/08 beta and the 10/15 beta.
i couldnt record any values for tpcc as i ran into workload problems.
i ran tpcc 10k on a 9 node 64 cpu cluster on the 10/08 beta and the 10/15 beta.
the 10/15 beta used an additional 100gb.
after dropping a table and the underlying data has been deleted by the `clearrange` command, queries with a transaction timestamp before the table has been dropped serve empty, invalid results.
it should error because by the time `clearrange` has been issued, gc ttl should have already been passed.
this also affects `drop index` when index truncation uses `clearrange`, where if a transaction uses an older version of a table descriptor with index then incorrect results are returned if index is used.
when a user tries to login from an ip that is not whitelisted, they get the following error `unable to log in: invalid username or password` this error message suggests its due to the wrong password / username even though thats not the issue.
this came up when we tested a managed cluster created for jesse and he tried to log in from his home ip which was not whitelisted.
i noticed that the number of sql queries drop repeatedly when running a simple workload.
it happens reliably and can be reproduced easily.
it might be because if followers are far behind in processing their raft logs, then theres an awkward delay between when the leader processes a split and when the followers do, and during that time the followers wont be able to acknowledge new commands from leader, stalling new writes.
cc @a-robinson here 's a reproduction using master from and on admin ui i see following: <img width="1435" alt="image" src=" phofurl please describe issue you observed, any steps we can take to reproduce it:
i saw some unexpected tpc-c results: 600.0s 77.1% 5329.6 4026.5 9663.7 --- fail: tpcc 1871 resulted in tpmc (78.6% of max tpmc)` this should be ~6000 warehouses then i went to check on the cluster and i can 't connect to the adminui of my 12 node cluster that ran tpcc
`$ cockroach start --insecure` > cockroach: error while loading shared libraries: libncurses.so.5: cannot open shared object file: no such file or directory
in the middle of finishing the restore for tpcc, i lost connection to my nodes: image phofimage `--- fail: pq: setting updated but timed out waiting to read new value fail`
dead node with 9k underreplicated ranges when running tpcc
i'm reproing phofurl on 10/08 beta.
it was taking a while so i went to the adminui and saw the screenshot below.
i then went to the sql shell and ran show jobs.
phofcode it took a long time for show jobs to finish.
once it finished, the admin ui functioned again.
i'm observing problems on my cluster.
went to the webui to investigate and it disappeared.
tpcc bench failed without partitioning on 30 nodes
i ran a 9 node tpc-c multi-region deployment using tpc-c bench and roachprod.
the restore of tpc-c 5k took 12+ hrs (still in progress).
using tpcc-bench and roachprod to test tpc-c 10k with 30 nodes without using partitioning.
my cluster has 1 dead node and 28 suspect nodes.
i followed the movr instructions ( phofurl
when troubleshooting a user's cluster, @vilterp and i observed that service latency appears to exclude distsql latency.
problem: secondary index performance overhead is higher than expected with sysbench.
qps is more than 1/2 for a prolonged tests > 600s.
when trying to set a zone config on a secondary index without an enterprise license, the error that you get says that "use of partitions requires an enterprise license" even though you weren 't trying to use partitions.
for some reason the select2 componentes are not displayed correctly.
when you hover over a sidebar navigation item the colour changes to blue.
i thought that this would change depending on the accent colour i was using but this is not the case.
i tried to integrate adminlte v3.0 into my application.
i 'm trying to integrate adminlte v3 into my angular project.
nevertheless all of the routerlink attributes are getting lowercased and then do not work (i 'm not pretty sure it is because of this, but the only thing i found right now).
sidebar bug found on sidebar accordion click but css classes havent been changed from sidebar-collapse to sidebar-open
on the demo page phofurl the cards using outlines with color variations don't have any color styles applied to the outlines.
i run gui and extract faces then run train but error happened.
a clear and concise description of what the bug is.
system has 2x amd vega 64 cards, each with 8gb vram and 16gb system ram.
crossfire is enabled and when training a model with ping pong then every time it switches sides more and more memory is stored in gpu2 under shared gpu memory (for gpu1).
gpu2 is not actually doing anything.
when memory in gpu2 is full the trainer crashes the first 100 iterations will run with, 1-100 iterations 7.5gb gpu1, 1.8gb gpu2, 13gb/16gb ram, gpu1 compute 25-50% load and gpu1 copy 49% load.
iterations 7.5gb gpu1, 1.5-3.5gb gpu2, 11.6gb ram, compute 80%-90% 's, copy 30% iterations 4gb gpu2, 15.5gb ram, 96% compute, 0% copy usage when switching at 301 gpu2 memory increases to 6gb, 7.5gb once it maxes out to 8gb, training crashes with "[winerror 2] the system cannot find the file specified".
phofurl screenshot has task manager gpu vram usage during crash.
when reloading training continues again normally usage 7.5gb gpu1, 13gb ram, 1.8gb gpu2, compute 25-50% copy 49% load.
this only happens with ping pong enabled, without ping pong shared gpu stays at 0.5gb-0.9gb does something... but it will run fine for 10,000+ iterations.
info extracting: info starting, this may take a while...
i have created a new model (villain) under july 15 version: phofurl settings: "config": { "mask_type": "extended", "icnr_init": true, "subpixel_upscaling": false, "reflect_padding": true, "dssim_loss": true, "penalized_mask_loss": true, "lowmem": false, "coverage": 62.5 }
microsoft antivirus find a malware in your files.
virustotal find via heuristic a malware, too.
hi, i 'm try to install the repo follow general-install-guide phofhyperlink but when i run `python setup.py`, it throw the error `attributeerror: 'nonetype ' object has no attribute 'split '`.
how should i fit it?
the problem is the original duration video is shorter than the generated one.
original is 35 seconds but generated is 41 seconds.
image frames captured and converted are same, 1037 frames.
at first, i cannot even train the model.
as soon as i start training, it crashes and reports an nonetype error (see crash reports at the end).
then i traced from the log, quickly viewed the sourcecode and looked up in cv2 documentation.
i learned that cv2.imread() will not throw anything if failed to read image.
( see here phofhyperlink ) instead, it just returns none, hence nonetype error.
invalid characters in file names or paths can easily cause this problem.
in my case, that were chinese characters.
it seems python is not very good at dealing with coding issues.
if problem cannot be solved, would you please add a check below?
i'm not sure if `except typeerror:` works.
but `if image is none:` works for sure.
some python dll import error something something
after training a dfaker model with mask facehull for 3 days, the model doesn 't swap faces, i.e.
the input image and the "swapped" image look exactly the same.
also, using `--swap-model` flag did not help.
windows install exe will have installation failure if chocolatey is not manually installed before hand
when i run the it tall me that: > execute: && conda create -y python=3.6 -n "faceswap" && conda deactivate > error creating conda virtual environment > install aborted
setup.py file: cudnn was not detected if `cuda_check` success in first check using "nvcc -v" because of `self.env.cuda_path` not set
a clear and concise description of what the bug is.
traceback (most recent call last): file line 109, in execute_script process = script(arguments) file line 43, in __init__ self.disk_io = diskio(self.alignments, self.images, arguments) file line 175, in __init__ self.load_extractor() file line 246, in load_extractor self.extractor = extractor(none, extract_args) 274, __init__ self.add_queues() 313, add_queues maxsize=size) 49, add_queue raise valueerror("queue '{} ' already exists.
".format(name)) valueerror: queue 'save ' already exists.
multiple gpus training speeds are slower than 1 gpu.
multiple gpus training speeds are slower than 1 gpu training
cudnn library version info cannot be update
i am running a training, using the docker image and master `python3 faceswap.py train -a data/... -b data/... -m model... -bs 16` after a while i press enter: phofcode a clear and concise description of what the bug is.
extracting seems to be stuck at "initialising face alignment network"
a clear and concise description of what the bug is.
when running the windows installer, it tries to clone the git repo and failed with this message: phofcode however, 1. the git program is not installed on the path above, it is installed on a different drive.
2. when running "d: program in powershell, it only echo same path string, not calling actual executable.
one possible way to quote path is d: "program
tools.py alignments -j manual -a alignmentpath -fr framespath
a clear and concise description of what the bug is.
the docker gpu image build file is running `/run_jupyter.sh` at the end, but there is no such file in the repo or in the image.
a clear and concise description of what the bug is.
building docz fails with the following error, after moving the button component into a sub-directory of /src/components.
failing to compile with just a basic library generated.
i am working on a lerna monorepo project that holds an existing gatsby project (called`website`) and a library style project called `design-system`.
in the file system this looks like: * note * the project is set up using `gatsby-theme-docz`.
but some quick test using the cli yielded the same results.
phofcode the page-header uses the button component (via a library style import in subcomponent called `subnavigation.tsx`, i.e.
`mport { button } from both page-header and button define a markdown file using mdx format (including`playground` and `props` helper from `docz`) whever i start gatsby application (website) build gets stuck on `in progress` i get following error: phofcode the `website` gatsby server starts as expected, if i
when after running npm run docz: dev see error in browser screenshot_25 phofimage phofcode doczrc.js file phofcode config-overrides.js file phofcode
props works wrong when component is written in `index.tsx`.
when `mdx` content is being converted to a react component, it 's wrapped in the layout phofhyperlink components.
this is fine for pages, where page context is required, but turns out it happens for imported md content too, and therefore when trying to embed another mdx file in existing content, it tries to build the whole layout inside the imported mdx component
running docz failed with a lot of can't resolve & unexpected token errors for library
when importing svg elements into docz mdx files, rendering those svgs returns an error like so: phofcode _just a note: i am unsure if it's my setup is wrong, but from reading other issues here i assuming you can import svg's into considering svgr is included in the core?_
when importing a component from a `index.tsx` file in a `index.mdx` at the same location, it crashes with: > element type is invalid: expected a string (for built-in components) or class/function (for composite components) but got: undefined.
you likely forgot to export your component from the file it 's defined in, or you might have mixed up default and named imports.
running `$ docz dev --help` shows that i can pass `--port` or `-p` to dictate which port the server starts on.
however, whenever i pass it something, it isn't honored.
when overriding the theme, it no longer uses the themes 'background color'
empty lines in a react component defined in `<playground>` fails to build.
attempting to use the props builtin component.
it simple just never works.
if i use the link from react-router-dom there is an error like the screanshoot below, but if i use a normal href, *a clear and concise description of what the bug is.
* please help, the solution is how can you use link from react-router-dom?
after `docz build` when you serve the files and open the application, you have runtime error, which makes js fail and the page not interactive
i am able to work and run the site locally, but when i go to build, i am getting a webpack error for all 3 files on my site 1 .js and 2 .mdx files.
when running the docz build command, i am getting webpack errors for all files (js and mdx).
for example: phofcode am not using emotion.
the only dependencies in my package.json are docz, react, and react-dom
playground styling of live preview breaks after build
after upgrading to the new documentation system i 'm no longer able to add functions that returns a child node on the playground component.
when starting or trying to build the documentation this is what i get: _unhandled rejection unknown: adjacent jsx elements must be wrapped in an enclosing tag.
did you want a jsx fragment <>...</>?
if you're on a docz page and scroll down, then click a menu item, the new loaded screen doesn't scroll to top; it instead loads in the same position you were at in the previous page.
on start of development server `yarn gatsby develop`, i get the following error: `cannot read property 'find ' of undefined` in my console log.
as soon as i go into any of my `mdx` files and edit/save one of them, the issue resolves itself on refresh.
*a clear and concise description what the bug is.
* i 've added docz (latest version - 2.0.0-rc.1) to my react component library using gatsby-theme-docz following the instructions here phofhyperlink .
i get errors when starting gatsby development server until i go in and re-save one my docs (any .mdx file in project).
when development server comes up, terminal displays following error (not sure if related) phofcode
there is no more doc to v1 for creating theme
the typescript example project crashes when it tries to load `.tsx` files.
found a similar issue #422 but that solution is already provided in `doczrc.js` so it should work properly.
if you run `docz build` on a fresh project (one that doesn 't have the `.docz` folder created), it fails: phofcode if you first run `docz dev`, the `.docz` folder is created and the `docz build` command now succeeds
when using the v2 of docz with cra v3 's `browserslist`.
cra 's `browserslist` setup is for `development` and `production`.
phofcode but docz v2 is expecting something like: phofcode
i followed the guidance in the documentation around creating a custom theme, and the routing doesn't seem to be working as intended.
when the route changes, page doesn't re-render.
browser refreshes are only thing that will cause a re-render.
this is code i'm using in my custom theme.
i followed the instructions of phofurl phofhyperlink *a clear and concise description of what the bug is.
* when i lunch my `gatsby develop`.
`props` component includes `ref` and `key` props in props table when passed a component created with `react.forwardref`.
i would argue these props should not be exposed because they cannot be documented in our code.
they are also part of react 's api in that they are documented elsewhere and considered assumed knowledge in our docs.
lose props when change the page by click menu item.
when i use string template as props and the multiline texts contains empty line, it will cause compile errors.
when trying to use template literals with styled-components the playground breaks.
*a clear and concise description of what the bug is.
* when doing this: phofcode i receive this: <img width="847" alt="screenshot at 08 15 14" src=" phofurl
docz is unable to render svg files brought in using "reactcomponent"
according to the doc, when running `docz dev`, the browser should only open if the user supplies the `-o/--open` flag
in v0 when you navigated through the app it would scroll to top automatically on route change.
it doesn't do that anymore.
docz required files to be absolutely imported, relative imports does not works
*a clear and concise description of what the bug is.
*the usedocs() hook returns an empty array within a gatsby project even though docz is able to successfully import mdx files*
running `gatsby build` when using standard markdown anchor tag syntax throws an error:
the docgen props parser properly picks up types found in ts source files, but it does not pick up types that declared in d.ts files next to .js files.
i have some custom build settings that would be difficult to replicate in webpack and want to build my packages first, and then have docz find the related mdx files that import the build .js and d.ts packages.
docz is failing to compile when it encounters a module that default exports an object that contains an attribute that is a javascript reserved word (e.g.
it looks like the title link referring back to the root does not inherit the same `base` property that the side menu nav items gets.
this causes title link to refer to wrong page.
for example: let's say i'm hosting my documentation on example.com/foo.
i set `base` property in `doczrc.js` to `/foo/`.
this causes every item in side menu correctly prepend `/foo/`, including my getting started page which has a `route: '/'` property in its frontmatter.
the getting started link simply refers `example.com/foo`, but if i hover over title, it's pointing `example.com` instead.
error occurred as below: phofcode
~~i 've configured my docz (0.13, but tried 1.0.0-rc8 as well) project for typescript.
when running in development mode i started getting warnings about re-exported types not existing, despite everything working seemingly fine.
i 'm fine ignoring these warnings, but ci breaks because it treats warnings as failures, and i can 't find any documentation for disabling this behavior (leaving warnings as is)...~~ ~~the warnings:~~ phofcode
phofcode works fine phofcode property `__filemeta` is not added, consequently, `<props>` component does not work (shows no properties).
the usage of chokidar to watch all files in the project (except for dotfiles and node_modules by default) can lead to issues if it encounters strangely defined file or folder names.
this can be easily demonstrated when using docz in a laravel project due to it 's dependency on the symfony/finder component which contains a test fixture folder named `r+e.gex[c]a(r)s` (see phofurl
no error is thrown when i use random string as `indexhtml`
i was able to write documentation in dev environment using `yarn docz:dev` but when i tried to generate a build to host this on a static file server, the rendered didn't have any components.
*a clear and concise description of what the bug is.
* it looks like this in dev: image phofimage compared to this (after creating the production build): image phofimage
following the example described in #320, i added `htmlcontext` to my `doczrc.js` file but i don 't see the stylesheet imported.
(i am trying to get some google webfonts used by my project to show up in the style guide.)
i am on docz version 0.13.7.
phofurl doesn't load in firefox 66 (possibly others too) on windows 10 *a clear and concise description of what the bug is.
the open in codesandbox button adds `parameters` to the url.
with large projects, this causes a 414 error as the url ends up being too long.
codesandbox supports posting this parameter, which gets around the problem.
if i'm viewing my docs and i open the chrome dev tools pinned to the right side of the screen, it reduces the viewport size to less than 1120px, so hamburger menu shows up, but clicking it doesn't do anything.
the table from `docz-theme-default`, doesn't render correctly on some breakpoints:
using computed values inside `<playground />` throws a `syntaxerror: unexpected token` error.
when using docz with typescript, open playground in sandbox, the component cannot be rendered.
installing `docz` with pnpm phofhyperlink de-duplicates packages system-wide while adhering to the node module loading spec.
when attempting to run docz, this error is thrown: <details> <summary>stack trace</summary> <br> phofcode </details> <br/>
i have a basic react + styled-components setup.
everything is working great until i use the `withtheme` hoc from styled-components.
if i use any hoc 's in my components the `<propstable>` no longer renders... is there a solution to this?
i created a brand new create-react-app, and installed docz according to the docs.
but i'm just getting a blank screen on `localhost:3000`.
when running `build`, there are two issues: - the `src` paths generated in the html file can't be found (but i can fix it manually inserting a `./` before each path.
- when opening the html file in the browser, i got an error as the screen bellow shows.
when updating the packages in my repo that uses docz i also updated `webpack`.
it went from `4.28.3` to `4.29.0`.
making this change causes a "failed to compile."
`docz dev` results in a "successful" build, but in browser the page is blank and the below error is logged to the console.
after running `docz dev`, i am seeing a lot of `could not find dependency version for ...` in my console.
however, after the build process, the app still runs fine.
before upgrading from docz 0.11 to 0.13, stdout in build logs was pretty concise: screenshot at 15 51 46 phofimage and now they are nearly endless, because a new line is appended to stdout every fraction of a second screenshot at 15 48 11 phofimage
*a clear and concise description of what the bug is.
after upgrading my project and components to use the newest version of emotion, i get the following error when i try to run docz module not found: can't resolve 'emotion' in that file doesn't try to import anything from `emotion`.
its emotion imports look like this: phofcode
the "getting started" process is super clunky and buggy.
the main issues is that you have to install a lot of dependencies by yourself (`docz-theme-default` and `@emotion/core`, for example), just to get it to run.
this is not a pure case of `peerdependencies`.
if `docz` requires these packages in order to run the
the build results run with many warnings and errors *a clear and concise description of what the bug is.
shared proptypes are not rendered into the propstable
proptable won't render for a styled-component like the following: phofcode phofcode
when `.babelrc` looks like this: phofcode running `docz dev` produces an error: >*> docz dev there was an error loading your config: syntaxerror: /app/.babelrc: unexpected token p in json at position 4 at json.parse (<anonymous>)* if you change `.babelrc` to be in json format like this: phofcode (notice the quotes around the key `"presets"`) then the command works.
the github corner badge is obstructing the button.
when i add `docz` to a `create-react-app` and start the server, it shows a blank page and it gives me this error.
currently installing the docz package does not bring the default theme with it, which will lead to the following error: module not found: can't resolve 'docz-theme-default' *a clear and concise description of what the bug is.
* docz-theme-default is no dependency of docz.
`propstable` won 't render if a component returns `null` by default from a `switch` statement.
the use case here is to stop certain components from rendering if the prop doesn 't match a specific value.
when upgrading `docz-theme-default` to the most recent version ( `v0.12.16` phofhyperlink ), the error `cannot read property 'mq' of undefined` is being thrown.
i wanted to contribute but following contributing.md phofhyperlink does not work.
the project is not compiling.
i tried it on `master` and `dev`.
i am trying out the package with a nextjs project, this is a project which has express with next js with it.
it was an ongoing project which has been working for long, and we decided to try out the docz to document the components.
image phofimage *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
it would appear that each mdx file is parsed twice: 1. in a happy pack thread to generate the doc for runtime 2. in main thread to extract metadata and headings info i am interested in using some remark plugins to generate meta for the document.
my first attempt was to use remark-metadata phofhyperlink generate a last changed timestamp and insert it into the frontmatter that would then be used at runtime.
i would expect that the newly generated key would then be available as part of structure returned from `<docs>` but sadly it is not present.
in reading through build code, i think its because of my above assertion that mdx files are processed twice, with only number 1 using configured plugins.
please correct my ignorance if i am incorrectly understanding current flow.
crashes on certain code snippets in `<playground />` component but i 'm not entirely sure why.
i 've been trying to wrap my head around the issue.
i 'm basically porting a component library from styleguidist to docz.
the examples work in styleguidist so i 'm certain that it 's not the code snippets inside of `<playground />`.
snippet</summary> phofcode </details> phofcode </details>
`yarn docz:dev` on a fresh create-react-app fails with the error: > assertionerror [err_assertion]: mount path must begin with "/"
we 're using an external model and array of instances of this model in our examples.
but we get an error when doing so.
using version 0.12.5, the code worked.
but it no longer does on 0.12.13.
- the docz dev is failed, docz build also failed too.
by using examples at i had a error phofurl image phofimage i just install and run `npm run dev`
i use babel-plugin-emotion to use `emotion` via the `css` prop (which the plugin dynamically transforms into `classname=css({ styles })`).
when i attempt to use the `css` prop in mdx outside the playground, it works correctly, but when i copy/paste same code inside `playground`, it doesn 't work.
given the following `htmlcontext`: phofcode the value supplied to `htmlcontext.head.raw` is aded to the document 's `body`.
similar to #248, however the change to phofurl does not seem be relevant.
both an array and a string used for `htmlcontext.head.raw` produce the same result.
*a clear and concise description of what bug is.
* i tried adding a svg `head` of document using `htmlcontext` and found it is applied body.
### it shows nothing phofcode screenshot from phofimage ### it works fine when changing `app` to `bar` phofcode screenshot from phofimage ### it also work fine when not wrap with `playground` phofcode screenshot from phofimage
`order` field is ignored when `menu` is specified
in `docz-theme-default` some global styles are applied which are reaching components and breaking the styles on some scenarios: phofcode all my components will receive `box-sizing: border-box;`.
these global rules could be easily avoided by using the `box-sizing` properties on the necessary elements directly.
*a clear and concise description of what the bug is.
* `docz-theme-default` global styles are leaking to consumer components.
on a clean project, the documentation does not load and an error appears in the debugger console when docz is installed via npm instead of yarn.
*a clear and concise description of what the bug is.
when compiling docz for the first time i get phofcode
this may be hard to solve and something that the all contribs table makes happen easier but it breaks in a really ugly way.
<img width="985" alt="screen shot at 9 53 10 am" src=" phofurl
propstable popover gets cut off by the top of the component
using es6 classes with phofcode does not work with propstable.
i use static proptypes on every component i have that's not stateless.
image phofimage *a clear and concise description of what the bug is.
### problem - my massive list of components will not fit under one module group you the list needs to be designed to handle that.
- reopening and using the list is extremely slow so make sure you 're at least using unique key for the "key" prop (the array index will be fine here since the size of list never changes).
loading shit tons of components with .mdx is too slow.
- scroll page with lots of items is extremely janky too which should not matter at all once page loads so i 'm think there 's a issue or some re-renders going on.
it 's pretty much unusable.
update: i find that page is only janky when scrolling page scrolls and not inner divs i create within playground).
are you using some kind react scroll component that 's causing re-renders instead just overflow: scroll?
removing playground fixes a lot but i simple have to create my own with styles to get no lag.
react tools listing two apps loaded: image phofimage ### improving performance: use a react virtualized list.
only get header information .mdx file generate sidebar etc.
and implement lazy loading via using <universal-component />.
look into fuse-box if above improvements do nothing, although, lazy process will fix it most likely.
image phofimage *a clear and concise description what bug is.
unable to use the page after selecting a component from the sidebar.
*a clear and concise description of what the bug is.
* clicking a nav link renders the page but there is some kind of modal of it that keeps page from scrolling.
the only way to get rid of it is to click same nav link sidebar again.
re-clicking same sidebar link toggle modal.
i think this has to do with sidebar.
when you go to a url like phofurl it will not go to the section as intended.
instead it just starts at the top.
when installing via `npm`, the toc / submenu items don't appear in the docz output, but when installing via `yarn`, they do appear.
i'm sure this is related to issues such as #206. i'm using version 0.10.3 but during my debugging i've also seen it on older versions.
i've been able to reliably reproduce it using the steps below.
decide to have some prop types inside an object that will be shared across different components.
the application is fine and no warnings whatsoever.
although when using the `propstable` component, nothing is shown.
*a clear and concise description of what the bug is.
if code inside the playground component contains an async arrow function, a syntax error overlay is shown on top the rendered component, but the component renders normally.
## renders error overlay when phofcode <img width="767" alt="screen shot at 10 51 52 am" src=" phofurl ## works as expected when phofcode <img width="795" alt="screen shot at 10 52 18 am" src=" phofurl
if you import like this: `import { h1 } from './h1'` and try to render `<h1>title</h1>`, it won't render anything and won't show any error.
if you remove the number like this `import { h1 as hh } from './hh'` and try to render `<hh>title</hh>`, it renders correctly.
maybe it's a bug in mdx itself?
the build fails with `cannot destructure property `themeconfig` of 'undefined ' or 'null '.`.
it works fine on the local dev server.
if you have `docz` running the newly created `.mdx` file appears nicely in the sidebar and navigating to it works fine but if you reload the page after that it gives you a 404 and you have to restart `docz` to have it appear again.
docz 0.9.5 fails on build and dev.
when rollback to docz 0.7.1 i still have same error the closed ticket with same error phofurl
i added the `indexhtml` property in the `doczrc.js` config to provide a html file.
my src property is ` './src '` and i have a `template.html` (content below) in the src folder to override the `index.html`.
i tried multiple values for `indexhtml` like: - `./template.html` - `./template` - `template.html` - `template` `/template.html` `/template` all variations cause script to crash.
after upgrade docz to 0.9.3, the `docz dev` is failed, `docz build` also failed too.
when i 'm trying to use a docz with a typescript component, it just hangs the whole tab without any errors and shows an empty screen <img width="1680" alt="screen shot at 10 21 44 am" src=" phofurl
when using themeconfig on config, can 't give function to theme.
i 'm using a library (react-tippy) which requires to load a css file in order to look as expected.
when i load the component which imports that css file, i get an error of unexpected token .
* *a clear and concise description of what the bug is.
* i get the following error on the console which stops server from starting .. phofcode
when there are a lot of items in a menu, it seems that the menu order is being messed up.
for example, i created this repo: phofurl there are 26 menu items under the "components" menu.
i didn 't modify the order in any of the files, yes, 2 of files are out of position.
i think since this phofurl node_env is always production no matter what i set.
i believe because no matter what command is run, this files gets included and overwrite any previously set node_env.
when i define a prop type as an array of objects, where we define a shape, all i can see is just a tooltip saying "shape" *a clear and concise description of what the bug is.
* array of object should be shown inside a nested table, or in another way in order to, but not with tooltip that provides poor information.
i see 404 error then refresh page at github pages.
search on default template is not work.
i use latest docz version.
*a clear and concise description of what the bug is.
* i upgraded my project 's webpack and babel versions to 4 and 7, respectively and tried to run docz.
my app starts as expected the migration to the new versions of webpack babel, docz compiles successfully.
after startup, however, i see a blank white page the console error shown below.
i don 't use typescript in my app... is there something i 'm missing for babel compilation that is failing to render docz theme components?
i 've tried not having a doczrc.js file, adding every type of config i could think of with no success, including: phofcode my babelrc: phofcode
when `doczrc.js` or anything imported within it contains an error, it stops loading custom config and falls back to the defaults.
*a clear and concise description of what the bug is.
hi, when i try to install docz, everything 's fine but when i try to launch it, i got this error : phofcode
if i make a mdx file i am getting this wierd missing dep error.
i am using the typescript setup
when try to run dev project it return an error about wrong imports from components without the slash bar, probably something with windows path.
compile error after runing dva new myapp
error when using a plugin
testcase 'should load app.js ' in fails.
the error message is 'can 't find string:"app is ready" ... '.
when use yarn run cov on windows will fail.
but npm run cov is work.
same as #2258 ggjsgg-websocketstcprst gg phofimage image phofimage image phofimage nodenetsocket.close phofurl phofhyperlink
object 'this' became an empty object in the model instance function if the function was an arrow function.
but in another way, define the model instance function via 'function' works fine.
for example: add an instance function for the user model: phofcode create a user with username 'hello' and call user.getusername(), it should return string 'hello' but not undefined.
phofcode when i upload files with zh-cn namesi get a null value from parts().
but i can upload files with en names
if a workpad has an empty page, pdfs will fail to generate.
when using the add filter in kibana to create a filter for ip address (or any data) using the is between it applies a gte to the start but a lt to the end.
this creates unexpected results especially when doing network blocks because you still see all of broadcast or don't see them depending on how you applied filter.
the menu sidebar cant be rendered.
calling method `prepend` is not supported.
users are experiencing a popup that can occur randomly and also frequently at times.
tends to come and go.
two animated gifs for lens in the documentation have a size of 42 and 28 megabyte.
this is not feasible for some internet connections.
it'd be great if the size could be either reduced or loaded on demand.
in using the new platform (client side), i have noticed that when using the methods (ex.
against an api that is non-existent, the response returned to the client-side code is a `http 200` along with `index.html` source as payload.
cannot delete snapshots through kibana ui.
i get an error: error deleting snapshot and i get this error with all the snapshots.
upon uploading a geojson file in the maps app, a preview layer showing the file's data is shown.
on hovering over a polygon feature, a tooltip is shown for the first feature hovered over, but it doesn't clear & update as expected when moving to another feature.
when moving outside of any of the features, tooltip clears as expected.
when we moved telemetry to oss phofhyperlink , the yml configuration prefix changed from `xpack.telemetry.` to `telemetry.`, but we didn't introduce any sort of deprecation behavior, so for any installs that previously specified kibana will fail to start up due to an unknown configuration.
trying to remove a dimension that is disabled causes kibana to work improperly.
when creating pie charts that are sliced multiple times it appears the counts and percentages no longer get calculated correctly.
when slicing a chart twice, as seen below, everything works as intended.
the counts in the outer rings all add up to the inner ring.
once you add another slice operation to the chart, however, sums are thrown off.
telemetry opt-in or opt-out is cluster wide.
but right now we are displaying the telemetry notice along with splash screen per space.
this needs to be removed so its status is clear.
if you set a filter in the "group by: filter " option for a tsvb chart and then you change your mind and switch to " group by: terms", the filter from the "group by: filter" will remain active unless you delete it manually.
i cannot manage to drag the process name to the timeline.
the drag seems to start but after a second or so it's just gone.
weirdly, other fields from the renderers work fine, i only have this issue with `process.name`.
kibana doesn 't disable plugins with invalid version, but crashes.
when adding a choropleth layer and choosing a `custom color ramp`, the legend is not shown (see screenshot below).
when an oss user upgrades from 7.4 (really anything prior to 7.5) to 7.5.0 telemetry becomes enabled and we don't show them a banner or message about how to opt out.
the image preview for the assets on a workpad are not showing any images.
the ui for the position argument of the `axisconfig` function updates the expression with the translated version of position string and causes an error in element.
with telemetry changing disabled from the yml file, when you search in the advanced settings for "telemetry" you get blank space.
if you search for something that doesn 't return a result you get a "no settings found (clear search)" prompt.
when exporting saved search as csv some fields are empty (it seems non primary date fields)
user cannot save a filter if she tries to use ip value with cidr notation value.
after cloning a rollup job and changing the index pattern, then clicking next, the user cannot proceed from the second step of the wizard by clicking "next" because, despite `@timestamp` being selected in dropdown and being part of index pattern, it displays "date field is required" under "date field" field and "fix errors before continuing" next to next button.
kibana doesn 't allow the creation (or amendment) of an ilm policy without specifying a min_age greater than 0 for each phase.
it should be possible to create an ilm policy with phases that have min_age=0 by either not setting a value, or explicitly setting it to 0. neither of these is currently possible.
when i config kiban to install open distro for elasticsearch plugin in chart 's values.yml, kibana will never be ready , and the kibana pod keeps restarting.
when i install the plugin after kibana pod get started(not config to install plugin in values.yml), the plugin is not work.
i have already installed the for es.
using a basepath with uptime ui's integration links in v. 7.4.x seems to result in broken integration links for the uptime ui.
after installing kibana from rpm package provided it doesn't start.
logs complain about offending lines on file after editing the file with problem and comenting lines
when starting up kibana 7.4.2 (and almost certainly previous versions, too), the below dialog appears.
screenshot at 15 12 47 phofimage clicking "cancel" triggers the below stack trace within the terminal and causes kibana to fail starting up.
the default mapping of a map using "upload geojson vector file" does not permit a join field in the "vector shapes" layer.
indeed to do a join we need to keywords field, one from the map the other from the data(logs etc) but with current auto mapping this keyword field is in field_name.keyword, in query we use "include" term but include does not work on field_name.keyword field (does not return field).
if you start an report , that takes a long time , the reporting view in management will hang with a "loading reports" until report either completes or times out.
this can last for minutes.
if dashboard contains a visualization, that contains an error then report generation will not work.
it will just time out.
it will not like the online dashboard view , display an error message about the problem.
when the user has a very long string without spaces, the logout button gets pushed out of view and horizontal scroll is disabled, which prevents the user from logging out.
edit a visualization like an area chart, map, anything that needs to perform some action when the visualization is resized.
add a filter to this visualization from the filter bar.
the resize event for this visualization occurs because the filter bar changes its height when a filter is added to it.
panel settings on some of my views, horizontal bar charts, does not work and come with an error in the browser console.
see stack trace at the bottom of this issue.
vertical bar chart does work.
i exported my dashboards views etc from my production environment and
on a multi line chart with kibana, the scale of y-axis does not mach the count shown for a line.
winlogbeat + kibana siem ml jobs related to anomalies do not work unless sysmon is being used on windows and this prerequisite is not documented anywhere.
it looks like most of the jobs could be configured using non-sysmon rules.
when we implemented a saved objects client in the uptime app we created our own custom client, rather than utilizing the provided getter method available on http requests.
this can lead to things like ignoring spaces when making requests, among other pitfalls.
the group-by dropdown allows duplicate entries for custom fields.
the group-by dropdown allows duplicate entries for custom fields.
saving a visualization created in tsvb doesn't save correctly it's configuration.
it saves always an default chart.
in the transforms wizard, the table to display index source data only displays a certain amount of fields by default and offers a dropdown menu to choose additional columns.
the transform preview table is missing this feature.
for configuration with a lot of columns, this may results in quite unreadable and messed up table layouts, for example:
when using the setup wizard in stack monitoring, the final step is supposed to detect metricbeat data.
no data is detected and the wizard does not indicate success despite the fact that data is present and rest of app sees it.
when switching away from inventory view (or even changing types), the error in the screen shot below appears in the console.
it doesn't happen from metrics explorer to metrics detail page or vice versa.
the query bar completion in the metrics app goes behind the thing below it
the contextual menu in the table view appears too much on the right side of the cell where the click originated.
if timelion tab was opened the first time, tips for timelion is appeared.
'collapse' button for tips doesn't work (disabled).
unexpected character in autoplay dialog (only in the shared canvas, not within kibana).
i exported the canvas sharing zip for ecommerce sample data workpad.
it renders ok in chrome but doesn 't render anything in ie11.
on the monitoring page, under pipelines, all pipelines are duplicated n amount times.
on my test environment i see 4 times duplication, and on my production environment i see 3 duplicate pipelines.
when you have a field that has values that are the same string in different case, user is not able to create "is one of" filter to include all these values.
the code responsible for generating the app's breadcrumbs is creating links that can lead to a bad browsing experience.
they should link to the app's _overview_ page, which is found at `/app/uptime/...`, but they're still using the `#` hash navigation that we moved away from when we removed our angular bootstrapping code.
if user clicks on filter settings and executes any possible actions without any filters - maps app tries to fetch data.
you can see this in network requests.
the filters selected by the user are not being supplied to the query responsible for providing the monitor list.
the columns in the app are mostly good, but the monitor history table should have its ip addresses right-aligned, per phofurl
when the user sets the data to something other then the default, the index pattern fields (behind picker div) show through.
looks like a `z-index` issue.
in phofurl we added some responsiveness to snapshot bar series in the app.
an unwanted side effect was that this chart is reused elsewhere (on the monitor page), and the responsive features we added are unfortunately breaking that view (see screenshots).
phofurl increased `server.maxpayloadbytes` to (25mb), but i 'm unable to save a markdown visualization w/ a >1mb payload unless i explicitly set `server.maxpayloadbytes: in the `kibana.yml`
if lucene query syntax write in kql mode, lucene query syntax warning can 't show up, console show `uncaught typeerror` as below phofcode cause query can 't be update.
you should be able to have sparse indexes and sparse data sets with at worst case the ui not showing data with a double dash but it should not crash with errors.
warning bang for `no cached mapping for this field.
refresh field list from the management > index patterns` is misleading when the `mapped field` contains `dynamic: false`.
when scrolling through the log stream and hitting the edge of the loaded data, the `loading additional entries...` indicator appears, but then doesn't append additional entries after it's done loading.
the button on a saved search window: share -> csv -> 'copy post url' generates a url that will always have an absolute date range even if you have a relative range specified.
this is an issue because these urls are often used in watcher to run scheduled reports or, in this case, a scheduled csv export of data.
the generated url will cause the watch to always return the same data set regardless of when the watch was ran.
this is the resultant url when exporting saved search in csv format using 'copy post url' : ` phofurl
the first part of the negative bars is drawn correctly, however then there's a small bump, incorrectly drawn, only on the negative bars.
the displayed value is correct, and doesn't correspond with the bar.
btw, tried changing the bucket size and it doesn't make any difference.
when configuring a timezone in kibana, different from the local time or from utc, the ticks of the x axis are not displayed in discover chart.
when a user makes certain api calls, the user 's session gets extended due to user activity (e.g., "sliding session" expiration), but the session idle timeout notification does not get rescheduled.
the notification displays anyway, and the logout event gets triggered, and the user is redirected to login page.
kibana doesn 't show the session idle timeout warning notification while on the space selector page.
if you remain on that page, your session will expire with no notification or redirect to the logout page.
i deploy es and kibana with ha mode, when i kill es main node, es chose a new main node, but kibana still visit old main es node to do search.
util all node ready, kibana can do search.
it's a shards failed message when starting es and kibana.
looks to be a race condition where the task manager tries to access the index before the cluster is out of red.
when building a control visualization, the multiselect drop down does not change when a filter is applied to the visualization.
transition links from uptime ui to logs/infra ui 's contains `host.ip:null` instead of `host.ip:<ip_value>` and looks like: phofcode when last monitor.status: down
using a custom field formatter on date field that is not the time field name of the index pattern can lead to apply an incorrect time range filter.
anomaly explorer swimlane and smv anomalies table data don 't get updated on the "refresh" button click.
circle colors on line graphs are black instead of the matching line color when you have two or more metrics applied and have a split series with two or more entries associated to it.
i am using the apm-server 7.3.0 and 7.4.0 with the java apm-agent.
there is this issue that the index mapping does not get updated when hitting the refresh index pattern for `apm-*`.
partitioning field value selection on single metric view is flaky.
occasionally it doesn't apply a selected value to anomaly table.
monitoring ui not changing `total events` and `bytes sent` when using the search bar.
when clicking on a specific time in the mini-chart (6am and 9am) as a user, i suppose the stream would show me log lines from this time.
but the timestamp of the log lines that show up is a different one.
additionally, minichart also moves, which i haven't expected.
when filtering out fields in discover i found a bunch of these errors in the browser console.
i didn't notice any problems in kibana from it.
the newly-added donut chart does not display anything if there are 0/0 monitors up.
the "group other values in a separate bucket" option doesn 't work for scripted fields.
i can 't add a workpad page if autoplay is enabled
when we load the index patterns using the saved objects api, the response includes index patterns that have been deleted.
this endpoint `saved_objects/_find` with the following params: * fields: id * fields: title * fields: type * fields: fields per_page: 10000 type: index-pattern returns 9 indices - 7 legit ones and 2 and ) which no longer exist.
they were destination indices for regression jobs created and then deleted.
the error is coming from `indexpattern` class's `refreshfields` method ( phofurl the class sends fetched indices to `createfieldsfetcher` (`_fields_fetcher.ts`) which then tries to fetch fields for each index and, when trying to fetch for missing indices, throws error.
you can see another example of this happening in `kibana / management / index patterns` and are in list.
when i click on them i get same error message toasts.
you can create a new lens visualization with a date histogram by dragging a field like @timestamp into the view.
if your timepicker is set to a small range such as `last 15 minutes` then the date histogram interval will default to something small like 30 seconds.
but if you try to adjust that interval, it instantly switches to large interval like `d` (it should initially be on the currently auto interval value), and there's no choices less than `h` (hour).
since i'm looking at last 15 minutes, i'd really prefer intervals smaller than an hour.
setting a filter via the range control slider sets the upper range value as `lte` but the filter edit only looks for the `lt` param.
cryptic error message when wildcard search is disable and end user try to search with a wildcard
after enabling filebeats on my nats servers, the kibana discover search bar cannot work any more.
in csv generation, either from discover or from a dashboard panel, the event that the scroll context times out in elasticsearch needs to be properly handled.
- when kibana is iterating through searches to build the csv result, if the scroll context times out in between searches, elasticsearch response will not have a `_scroll_id` field in body.
- that causes kibana to throw an unnecessary error about format being invalid.
in response to error being thrown, kibana tries clear scroll id.
- a request clear a scroll for a context that timed out results in elasticsearch returning `404` status, with data body including `num_freed: 0`.
- kibana encounters 404 response and fails job for that reason.
changing the kql query in the input field and clicking "refresh" does not work, nothing seems to happen.
the browser 's javascript console shows an error: phofcode
if an index pattern exists for an index or indices that have since been deleted, there is no way to delete the index pattern.
the reason is that the only "delete" button for index patterns is on the pattern details page, which will not load if there are no matching indices.
under cross-cluster search, the siem network map ignores all non-local index patterns, and appears to ignore remote indexes configured in siem.defaultindex.
this only applies to the map, and not any other portion of the siem ui.
as an example, the following siem.defaultindex will render an error of "you much configure a default index..." in place of network map (as per my config below) phofcode if you add or use a local index like so phofcode the map will render, although map will be blank because there is no data, and layers will only allow you to select from local indexes, and not remote ones.
after searching the logs and entries are loaded, focusing an entry causes an unnecessary reload.
when there is a parent and a child control with both having values and being currently synced to the filter pills, clearing them only clears the child control.
in kibana when editing a range control visualization you can break the visualization by providing a "bad" step/decimal combination.
in discover, the index pattern selection list is not hidden when collapsing the left hand panel.
i have multiple kibana index patterns that share the same root to their name.
i cannot see which index pattern to pick on my laptop.
although i can see if i plug into my wide screen hd monitor and widen the window, or can select each one in turn until pick the right one.
the ecommerce kibana demo shows "percentages" that do not make sense such as 522% and 478%.
after looking at the expression, i believe this is related to the update to esdocs default number of documents returned (see update: phofurl
the dashboard background color is different than the rest of the theme.
console is missing the `track_total_hits` phofhyperlink autocompletion option.
when using a metric visualization with a top hits metric, es will log the following warning: phofcode
the labels on all the elastic-charts are using the `id` instead of the `name` for the tooltips.
when kibana can 't update `.kibana_task_manager`, it will flood logs with relatively high frequency, with same message.
in the case i was dealing with, kibana was running in the container (`ece`), and it logged message i am sharing below, around 1 million times: phofcode container 's quota was exhausted and kibana started endlessly boot looping.
when selecting an aggregation first, the list is populated with all the available fields.
non-compatible fields are greyed-out, but still can be clicked, which throws a console error.
ideally, these fields wouldn 't be selectable at all.
when i remove index setting (json line) and click "save" kibana shows "successfully updated settings for index ..." but no actual update request was sent to the server, so setting wasn 't actually removed.
if i change value to `null` then kibana properly sends request to
kibana 7.4 renders index patterns unusable after importing them as saved objects.
loading a saved query in discover does not automatically apply the query from a saved query.
however, filters and the timefilter are automatically applied.
only the first 20 saved queries are available to use from the saved query management popover, even though there are more than 20 saved.
from the management -> saved objects page, filtering for a query type shows all saved queries.
in kibana > canvas, we tried to format a number and change the color according to value.
changing the color works until we add the code to format.
there is a discussion phofhyperlink on this topic, so at one time it worked.
a click on the 'recently viewed ' button in kibana 's sidebar should open a flyout containing recent viewed entries.
tested in 7.4, no problems there.
navigating to discover when the default or the last index viewed is hybrid index pattern (a comma separated list of both a live and a rollup index), causes 2 errors which are seen in the browser console (and output of ftr); phofcode
when you have more than 200 system indices (i.e.
indices with names starting with `.`), then you won 't be able to create an index pattern via the kibana ui.
when you first install kibana from rpm package (you have to install packages as the root user) there is no `data` directory created.
if you try to install a kibana-plugin (as the kibana user as root isn't allowed), it tries to write to the `data` dir and fails because the kibana user doesn't have permission.
phofcode note the `location:` response, which is `/qgv/status`.
this should be `/qgv/api/status`, in keeping with the original request.
i've seen multiple instances when running kibana in ie11 browser where a click on an element doesn't produce the expected results until the mouse is moved.
(see phofurl but the problem seems to move around from place to place.
this morning, the delete index pattern button is failing to display confirm dialog until mouse is moved.
@chandlerprall looked at it with me and noticed that a bunch of actions get repeated over and over, but stops without rendering modal.
image phofimage image phofimage image phofimage the thrashing seems to continue all way up point where i moved mouse and dialog appeared; image phofimage we saw similar thrashing on chrome, but its fewer or faster, and confirm delete modal appears quickly without having move mouse.
the unit tests begin to run and karma starts at phofurl the browser window opens and says it 's connected, then closes and an error occurs in the console.
- the non-canvas functions eg.
`tsvb` are apparently available for canvas pipeline execution - the non-canvas functions come up as autocomplete, prompting users to try things that aren't in our documentation
when saving a query, whatever you see is what gets persisted, regardless of whether the search bar is in a dirty state (hasn't been submitted since changes were made).
on save, the correct info gets persisted but the dirty state gets cleared from the search bar.
if you open saved query management popover it looks like query you just saved is selected, but if you click it again it will actually load up query with changes wanted.
what should happen on save is: no changes to search bar occur.
current query gets submitted and persisted.
coordinate maps can 't seem to use the in-visual wms options unless you 've successfully loaded a default basemap.
this creates a broken experience for users in air gapped environments that haven 't configured a custom `tilemap.url` endpoint.
clicking a bar in a bar chart of a histogram visualization with interval set to a non-integer value (e.g.
0.25 or 1.5) filters for the incorrect data range.
it looks like it is picking ``floor(lower bound)`` and ``floor(lower bound) + interval``, which leads to incorrect results.
for example, with data bounds 0-8 and interval 0.25: |tooltip label | filter applied | expected filter | | -------------- ---------------- ------------------ 4 4.0 - 4.25 4.0 - 4.25 4.25 4.0 - 4.25 - 4.5 4.5 4.0 4.5 4.75 4.75 4.75 with data bounds 0-8 and interval 1.5: tooltip label filter applied expected filter -------------- ---------------- ------------------ 3 3 4.5 3 4 5.5 6 6 6 7.5 6 7.5 also, the input validation for the interval shows red underline, though the value is still accepted.
non-integer intervals are reasonable thing to support with small numbers and have worked fine in kibana 6.x.
using react hooks phofhyperlink results in an error.
kibana can 't login when enable xpack security and set server.basepath at the same time
on error group detail page, the "view n occurrences in discover" is not properly pluralized for n=1
`csp14312` errors prevent kibana from loading in microsoft edge
if user zooms in on map when the "draw shape to filter data is enabled", kibana logs phofcode
my working dashboard with visualisations returns only error "kibana [esaggs] > aggs is undefined"
for some reason when i create 7.3.2 tsvb timeseries chart and select order by "max of the legend is not sorted at all:
in chrome, i tried to create a transform with insufficient privileges.
this caused a variety of error messages depending upon the missing privilege.
the lengthy error message does not fit inside the toast notification.
i cannot easily see which privilege i am missing.
the toast notification can also overlay the "previous" button, in which case i cannot read the message properly or easily navigate back.
saved queries are not loading when clicked from the management -> saved objects page.
* a kibana user with dashboard read (or none) dashboard privileges cannot login to kibana.
an error is continually displayed in the browser.
* a kibana native user with a readonly dashboard privileges role is being directed to `app/kibana#/dashboard`.
given the user is configured with readonly dashboard privileges they should really be directed to "app/kibana#/dashboard
only on the "filter out value" magnifying glass icon on the far right in discover the tooltip and icon itself flicker or flash.
at times is even makes it very difficult to select the icon.
with a fresh install of kibana and elasticsearch, enabling monitoring causes the screen to correctly shows the `success!
getting data...` page but then the `no data` page appears for about ten seconds.
after that, the monitoring overview page is displayed as it would normally be.
the node listing incorrectly calculates the number of shards per node.
the total number of shards is accurate.
it _also_ occurs on the node page's summary bar.
this is probably happening because the `shards` data type used to by this lookup is writing data, from the metricbeat input, without an `_id` being specified and thus never rewriting older shard documents for exact same cluster `state_uuid`.
as such, this number increases until cluster state changes.
while this is sort of a bug in implementation of metricbeat `shards` subprocessor, it probably should be accounted for in ui -- if possible -- given number versions impacted.
the _best_ solution would be for someone on team to add `shards` data to `_nodes/stats` and `_stats` responses so that there no extra document to store for indices / nodes.
new users have sufficient custom role indices privileges and space features to access indices, but is unable to create dashboards or visualizations against said indices.
it's possible for the meta data of migration to become stale if the indices are changed later on
setting in environment doesn't enable code ui.
when you are an ml admin and open the ml anomaly detection button and then click on the hyper link to a job it will take you to the ml job page of: phofcode which lists all of the jobs.
<img width="1405" alt="screen shot at 11 22 08 am" src=" phofurl if you have a lot of jobs to sort through this non-optimal.
as an ml admin, you will want to go directly job clicked on by having search populated.
that is possible by changing link and adding ml job: here is an example of a url which will populate search: phofcode
opening a workpad in a new tab doesn 't load the desired workpad.
it just loads the "my workpads" page.
in the uptime app, we allow the user to specify a date range to visualize their data.
we've discovered an issue where, even after the user specifies a date range, the app continues providing default range as domain for our charts, which causes warped sizing.
discover table keeps columns from different index patterns, this is wrong.
we have implemented a script that fetches saved objects via "/api/saved_objects".
the script fetches kibana dashboards, visualizations, index patterns and canvas workpads.
this works fine, there are no problems and we get a list of json files representing the fetched saved objects.
for populating an empty kibana instance, these json files are then again posted to the saved-objects api.
this works perfectly fine for all the saved objects except for the canvas workpads: the post request for workpads succeeds and they are then shown in canvas workpad list.
however, when clicking a workpad, kibana displays that an internal server error occurred and does not open workpad.
canvas does not close scroll cursor after calling _sql api inside resulting in error message > unexpected error from elasticsearch: [exception] > trying to create too many scroll contexts.
must be less than or equal to: [500].
this limit can be set by changing the setting.
deprecation logs constantly raised on any activity performed on with date histogram.
_[interval] on [date_histogram] is deprecated, use [fixed_interval] or [calendar_interval] in the future._ note: in kibana gui only
when you push the timeline tab up or you push content down by having a message at the top of your kibana page the timeline tab ends up behind the sticky search header which means its z order is below that and it looks wrong.
if you delete a siem job from the backend and then re-click on the "anomaly detection" button, we have to re-install the job from the template but template detects some of jobs are already installed and throws errors for duplicate id 's.
this can hide other legitimate issues of a job not being able to be installed due to a bug or other method and confuses user.
the user might end up reporting this bug back to us and only this bug when really we are interested in other errors that would be returned more than this particular error.
on upgrades where we add new jobs templates this error will end up showing up as a false on first click of anomaly detection button as well which will be annoying users.
the `new` button in discover doesn't immediately work.
it should return to a new search and set back to the default index.
it seems like it eventually does do that, but it might take 10 seconds and/or moving the mouse around the discover tab may be triggering it.
an error can occur when generating a pdf report with a map if network access to the maps/tile service is blocked from the kibana server.
the issue can be resolved if network access is provided to: phofcode could this dependency and any others like it be documented?
discover view does not properly sort when 2 index patterns contain same `timestamp` field, even though one index has another time field designated as the 'time filter field name '.
index creation from a geojson upload hangs after processing the file in the browser.
i indexed a document with nested fields and when i go to the logs page, i receive an error (look at 'any additional context ').
visualise and searching works fine.
example of a document: phofcode `
sending a `sighup` signal to kibana reloads the logging configuration.
this is particularly useful to re-open the file descriptor after logrotate switched up the log file.
however in 7.3.1, after receiving a `sighup`, kibana keeps writing to both the current log and rotated files.
while trying to test the addition of ie driver for running functional tests on ie11 i've noticed several cases now where the ui doesn't change after a link is clicked until the mouse is moved.
we should an error on cannot install jobs that require more ml node memory on page load whenever we have only 1 gig of ram dedicated for a ml node.
some jobs within the template require more than 1 gig of ram to run.
when you select 6 months for the time range when creating a tsvb graph within kibana it will use "23 hours" for the graph.
if you select 5 months or 7 months it will use 24 hours for the time range.
when you click a ml job to go to the ml page it always converts and uses the absolute date range rather than trying to use the relative date range.
i have dasboards, that use "winlogbeat-*" index-pattern and than i delete that index-pattern (during trying fixing a problem).
and that create it again.
now all my dashboards and visualisations are broken.
"could not locate that index-pattern (id: winlogbeat-*), [click here to re-create it]" but this index-pattern exist!
when dark mode is enabled in advanced settings the time scale for the mini map still has a white background.
user has 3 node cluster with 3500 indicies and 11k shards.
clicking 'create pattern ' in the index pattern management page hangs for over a minute while all the index data is queried.
if i navigate to infraestructure -> metrics explorer i always get this error: image phofimage (it looks like the request failed with "request failed with status code 500") looking into the browser logs, the request that fails is this one: post http/1.1 host: xxx connection: keep-alive content-length: 219 accept: application/json origin: ccc kbn-xsrf: user-agent: mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) safari/537.36 content-type: application/json referer: xxx/kibana/app/infra accept-encoding: gzip, deflate accept-language: es,en;q=0.9 cookie: sid=
with the new routes we have to update to use the new url so we can redirect directly to the anomalies table within the application.
on host details page the anomalies should be able to filter down to the specific host name.
if an index exists with a version number that does not match the semver format, the upgrade assistant status check will when trying to identify outdated apm indices.
user can save a query without a name and this lists it as empty query in the list.
loading the maps app, or network page of siem app which contains an embedded map, results in the map tiles not loading, and an error in the dev console.
if ml is not available due to the license level, the anomalies tab still shows up but it 's completely empty.
we should probably hide the tab if ml is not enabled.
custom notification banners are not working anymore.
if a value has spaces like "test value", it is not possible to edit the value in kibana / index pattern.
error code in toast :"index" indextpattern doesn 't have a scripted field called "test%20value"
the default server name for a kibana deployment using docker is always "kibana", this requires additional configuration when you run multiple instances of kibana and want to easily identify the instances in x-pack monitoring.
on canvas workpad: when set refresh element time to xmin, cycle to xsec and run full screen mode, elements/data wont be refreshed (tested over 24h)
the "logs" panel is stuck in error even after re-login.
screen shot at 1 09 52 am phofimage ` ba@ phofurl x@ phofurl bf@ phofurl p@ phofurl v@ cf/<@ s@ tg@ bi@ ci@ di@ yh@ xh@ qf@ enqueuesetstate@ onstatechange@ notify@ notifynestedsubs@ onstatechange@ dispatch@ epicmiddleware/</<@ dispatch@
when i navigated to siem app, it throws a 'create job failure', but then it keeps sending network requests in the thousands, which eventually causes the browser to hang (net::err insufficient resources).
i had to kill the browser.
when you have filters applied in discover and navigate back from and back to discover it is showing an abort error.
in discover, when clicking to view surrounding document, the page throws typeerror: cannot read property 'get' of undefined.
selecting the "now" date as either start or end date in the logs analysis page 's date picker and clicking "update" turns the "now" into the current timestamp.
reloading page or clicking "refresh" button causes same time interval to be loaded repeatedly without "now" adjusting to current time.
grafik phofimage grafik phofimage grafik phofimage
the monitoring tab is only showing the master node details (but indicates there are more nodes in the cluster).
creating controls visualization fails as the menu where you change control label, index pattern, field other settings disappears after clicking the `add` button.
after migration from 7.2.0 to 7.3.1, on visualization widgets (from editing or dashboard) it is no more possible to filter data.
when disabling metrics for filters in a logstash pipeline the monitoring information disappears, while the input/output are still expected.
unable to manually add filter on date fields with custom format.
neither does it accept epoch seconds/milliseconds.
http security header not detected x-xss-protection x-content-type-options x-frame-options content-security-policy
any process capturing requests from browser to kibana can capture the session cookie and use it to submit authenticated requests to kibana even if the user has logged out.
i am using apm-server with default config, elasticsearch and kibana (all 7.3 version) deployed into a a kubernetes cluster.
when i am trying to load the new apm ui screen i receive the following error: phofcode it can be solved by introducing a mapping for the `service.name` field and set `fielddata: true`, but as the message suggest, this might cause an inconvenient side effect.
as a fix i suggest to use `.keyword` fields instead for aggregations (e.g.
the same goes for agent.name, processor.event, transaction.name fields.
when initially loading the discover tab, 4 requests are made in the following order: 1.
- pulls all mappings for all fields for index patterns 2.
- pulls just ids/titles of the patterns 3.
`_bulk_get` - requesting fields for the selected/default index it appears 4.
`_msearch` - fetching data in selected period for pattern 1 & 2 appear to be redundant; 1 includes 2's information, yet kibana fetches mappings selected index afterwards anyway.
step 2 is all that is required it appears kibana to work anyhow.
we have an nginx proxy that sits in front of kibana and we've rewritten 1's query args to inject `fields=title`, kibana has no issue with it and functions effectively same.
unquoted strings in an element 's expression are highlighted the same as arguments.
aggregations query gives possible aggregation suggestions for name field instead of agg_type field
i have events where a field is null.
image phofimage image phofimage i expect the filter on a table to recognize, if the value is null.
if so it should filter for exist instead of an empty value when clicking on + / - in table: image phofimage if clicking on "+", this error is thrown by kibana: phofcode when i edit the created filter, it looks like this: image phofimage
7.4 is an improvement over 7.3 in that the data regions from a map on a dashboard do print, but the country outlines, or borders, boundaries, don't print.
reporting detects problems on the kibana page by looking for `euitoastheader` elements, which are unexpected when kibana is rendering a visualization for export.
this helps the situation when a post url has been saved for a reporting job, but the underlying visualization or saved object in kibana has been deleted.
however, this is not working in canvas, because canvas doesn 't always use `euitoastheader`
buckets_path must reference either a number value or a single value numeric metric aggregation, got: this happens while designing a gauge in the visual builder using two tophit aggregations as a source for two bucket script variables.
the bucket script shall only do simple thing "params.var1 / params.var2" but produces the above error.
when creating a line visualization, setting the y-axis custom extents option
when trying to load an old saved search, visualization, or dashboard whose `_id` contains a colon (for example) results in kibana returning an error: > saved object is missing > > could not locate that search
when we use scripted fields in kibana elastic search is getting crashed
i added the `[ecommerce] average sales per region` visualization, and i 'm getting this error when i click on a country in the map.
it looks like it 's trying to add a filter but can 't.
~~not sure if it 's related to this pr or if i should file a separate issue.~~ confirmed this is an issue in master and filed an issue #
if i do not set any field in my saved search, i expect all fields to be exported to csv, which are used in my result set.
that way it is done by discovery csv export where it is whitelisting all used fields in the report object in kibana index.
but on dashboard level only the timestamp is exported to csv if no fields are selected.
logstash configuration management api accepts adding a pipeline containing `@` on it 's name, but kibana ui does not accept this.
when you are searching multiple indices and they are using a mix of `date` and `date_nanos`, the sort order is not correct.
the reason is that the internal representation is a long since the start of the epoche for both, but because of different precision this doesn 't sort correctly.
elasticsearch has added a workaround for that in 7.2 with an option `"numeric_type": "date_nanos"` phofhyperlink to cast everything to nanosecond precision.
visualize -> tsvb -> top n -> count is inaccurate
the size on split series doesn 't work as expected when there 's bucket x-axis.
kibana is fast yet saving an object (like a search) can take upwards of 45-60 seconds.
creation of a new space takes a similar amount of time.
however, if we create the space manually via es (not through kibana), (post etc), the space is created very quickly.
why is doing the same thing in kibana much slower than doing it directly to es?
is there anyway we can speed up space creation and object saving in kibana?
when adding two or more filter fields the filter list and timestamp goes crazy.
if i refresh the page with the filters the search never finishes loading.
as soon as we open the timelion view we get: error: in cell #1: : error: in cell #1: at throwwithcell at at arrayeach at function.<anonymous> trycatcher promise._settlepromise promise._settlepromise0 promise._settlepromises promise._fulfill promise._settlepromise promise._settlepromise0 i cannot find more in any other logs.
for my point of view this seems to bubble up from elasticsearch up to kibana.
what we tried without any success so far: * directly connect to port 5601 (port forward) to exclude apache from the equation.
* delete all non system indices (same result) * use .es(index=myindex-*) instead of .es(*) what makes a difference seems be providing a metric and an index like .es(index=myindex-*, metric=avg:size) this works with no error.
.es(index=myindex-*, metric=count) gives the exception again.
kibana basic authentication page is not accessible when oidc authentication is enabled.
documentation phofhyperlink clearly mentions that : > this configuration disables all other realms and only allows users to authenticate with openid connect.
if you wish to allow your native realm users to authenticate, you need to also enable the basic authprovider by setting [oidc, basic] in the configuration of kibana.
when having a color criteria for a bubble chart with numbers, it automatically sorts the color radient according to the numbers, by alphabetically, not in an ascending or descending way.
kibana view (line view) with data from metricbeats shows on latest 24 hours only a tenth of the values from metricbeat.
in the maps app there is a 10k limit to the number of features on a layer that will render.
this downsampling is working as expected, however, it is not "geospatially random".
downsampled points are selected in geographically correlated regions.
beats central management( doesn 't work.
after opening the central management application for a short moment the enrolled beats view comes up and disappears again.
after this just a white page is shown.
returns 500 internal server error if a related saved object cannot be found.
<img width="955" alt="screenshot at 10 03 03" src=" phofurl
entering a wms results in no change to either region or coordinate maps.
entering the same wms info for the maps app working fine
when creating a timelion query incorrectly, the error returned is: phofcode
export formatted button not working
if there are multiple date/time filters or dropdown filters in a single kibana canvas workpad, the filters do not function when in full-screen mode
when updating the refresh length in the datepicker, the value is updated but the datepicker gets reset to `off` state.
* update kibana to 7.3.0 * create a filter search * click on "share" -> permalink -> snapshot -> short url -> copy link * kibana stuck at "redirecting" bildschirmfoto vom phofimage phofcode
sending the `sighup` signal to the kibana process should reload the logging configuration and start logging to the new location.
the logging configuration is not reloaded on macos, but kibana monitoring reloads properly.
the information about the advabced setting in the management settings still refers to kql as experimental.
and disabling support for leading wildcards for kql results in inconsistent behavior (for `?` and `*`) with no user-friendly error messages.
gradiant color() function does not work anymore on version 7.3 gradiant does not work , color function is ignored and return timelion request error error: in cell #1: tinycolor is not a function
i receive an error message when creating or editing a space in kibana and when a custom color is chosen via the color picker.
ui error: `error saving space:` (i 'm able to create or edit spaces when no color value is chosen)
if user has saturated tiles - maps reporting fails.
a link from apm into the logs ui includes a trace id and a unix timestamp, like so: which used to be redirected to the logs ui with the timestamp centered, and the trace id applied in filter bar (screenshot from 7.3): <img width="1364" alt="screen shot at 10 29 22 am" src=" phofurl but in master, this link is redirected here: i.e.
time is re-calculated and trace id is not pulled into query bar filter.
this is a regression we need to fix.
when a filter pill is created on dashboard, it references the index pattern it was created for by id.
when either all visualizations on this dashboard referencing the index pattern are removed form the dashboard or when the index pattern is deleted, clicking edit on filter throws an error and crashes kibana
if a user doesn 't have permissions on the index or isn 't using the `admin` role, it 's not immediately clear that they don 't have sufficient privileges to use apm agent configuration.
the page just hangs in a constant "loading" state.
when creating a new data frame, the "source index" table does not show all fields in the "select fields" drop down.
image phofimage you can see the list of fields in the image.
however, if i look at index in discover app, then i see many more fields.
image phofimage i want to choose some of fields for my transform, such as
we should see many more logs for browser console messages: generated by the browser, and/or generated by the web app running in the browser.
appears that the data model for saved search objects changed in 7.4.0. exporting csv from a saved search id had to be fixed in phofurl but if we use a saved search that came from an upgrade, or has the older data model, a similar still incompatibility exists as the original bug.
when running stack monitoring for multi-cluster monitoring with a dedicated monitoring cluster, if the user is in setup mode and views the monitoring cluster's elasticsearch node listing page, she will see the _monitored_ cluster's nodes as well!
when running stack monitoring for multi-cluster monitoring, user cannot navigate back to cluster listing page after selecting a specific cluster in the ui.
the stack monitoring ui is triggering a bunch of deprecation warnings in the logs: phofcode
in the infrastructure inventory page, there are several text strings that are not in sentence case.
@gchaps and i think they probably should be.
this affects: * map view (should be "map view") * table view (should be "table view") * most of the items listed in the
the user role management screen does not allow you to add specific cluster privileges, even if they exist within elasticsearch, such as
following the instructions in phofurl i enabled true` in the config.
the `download csv...` button now appears.
for saved searches on index patterns with no time column defined the csv is generated fine.
however for saved searches on index patterns with a time column the csv files are generated empty (the headers are there but no records, even though i do see rows in dashboard).
change in mapping are not reflected during import csv (machine learning feature)
we use apache2 basic auth with ldap to protect the access to kibana.
the apache is acting as a reverse proxy to local kibana, which connects to aws elasticsearch.
it was working fine until we added new index in elasticsearch for cloudwatch logs (`cwl-*`).
after that the default index did not persist (`filebeat-*`) between users and browser sessions, and users had manually chose the default index for each session.
after thorough investigation we found out that all requests from kibana elasticsearch contained the authorization header (because it was set by apache basic auth).
the endpoint retrieve indices was failing, because it expected additional tokens in authorization header, which were not provided by apache2 by default.
the solution was unset authorization header after basic auth authentication and before is sent kibana and elasticsearch, using apache2 directive `requestheader unset authorization`.
when using stack monitoring to monitor beats, the items in the top nav are not vertically aligned.
<img width="1514" alt="screen shot at 21 56 00" src=" phofurl
if i create more than one filter on "discover" panel, their placement order starts to change 2/3 times per second, making it impossible to aim mouse pointer on particular filter.
kibana doesn't load in ie11.
just get the `loading kibana` spinning k circle.
the browser console shows; phofcode
as the documentation states phofhyperlink the rollup api has the feature to "merge" both historical rolled up data and live data.
this could prove very useful for a time-series data analysis like our case, where we have daily indices for a barrage of client events and then various rollups that syntethize the live data, before ilm triggers deletion (after a backup of raw data) of index.
when experimenting with kibana and data tables (not sure if other visualizations have same problem, but could imagine they have) i noticed that when you have a mixed up date span that covers both live and historical data, rolled up data is simply not loaded, allowing only live data to be fetched in group.
i made drawing (...sorry...) to explain better what happens when using different time ranges what i would expect to happen.
phofimage to make sure that this was happening, here 's my actual cluster status.
ingested: >400mil docs live data: 24 july -> today rolled up data: 15 may -> yesterday (rollup job have 1d delay on data) made 3 different index patterns run tests againsts: - a live-only index pattern - a live+rollup index pattern (that should merge two datasets) - a rollup-only index pattern i put simple table visualization, splitting on simple metric which has only 2 cardinality, set table show event count for two categories.
adding a second filter to the list of filters causes both to quickly and continously swap position.
also the time indicator starts running quickly.
visualize misbehaves in a similar manner.
clicking on a bar or selecting a time period in the in the discover histogram does not result in a refresh to the period.
if spaces is disabled in kibana.yml, machine learning fails to load and a javascript error is thrown.
create a new or edit existing space within the "manage spaces" click the "roles"
sorting the pipeline configs in central pipeline management and it seems like the list is sorting by the numbers given just fine, but it 's not taking into account the time span (days, months, minutes, etc).
monitoring application, all pages seem to call `get /clusters`, which has the effect of invoking potentially expensive queries, such as queries for logstash pipelines.
happens regardless of whether or not one.
is view a page with logstash data on it.
graph doesn't detect available index patterns.
links generated for uptime integration are protocol-relative without hostname.
for example "show host logs" is `//kibana/app/infra`.
if you have more than 7 "saved objects" you can 't delete them.
after pressing delete the browser window is stucked on an endless kibana logo jumping animation.
kibana mistakenly warns me that i am using lucene syntax when i 'm trying to use kql.
kibana displays fatal error when user deletes a scripted field
i have a visual builder chart that aggregates (sums) a count value and then groups the top 10 terms.
usually i can click on one of the terms in the legend and it will gray out the other values and only show one line.
however, there is a case where this does not work.
if i click on other legends are grayed out, but chart displays two lines.
the green line overwrites blue which is all that is supposed to be displayed.
apparently this is because also at beginning of requested term value.
the same issue happens if i select this not correct behavior.
if click in legend, it only displays green line.
if you go from metrics explorer to logs, then back to infrastructure, the page claims to still be "logs"
the line visualization in kibana 7.2.1 is messed up.
i compared the line visualization between kibana 7.1.1 and 7.2.1. based on the same elasticsearch data and the same "saved objects" used in 7.1.1. and in 7.2.1, the 7.2.1 line visualization is totaly wrong according to shown chart / values.
additionally if you zoom more into chart in kibana 7.2.1 then values change and come more closer to correct values.
it seems 7.2.1 real correct values (e.g.
1167 screenshot example) are divided by current date interval (in screenshot example 30 min) then shown as chart value (38.9).
so at moment kibana is unusable regarding line visualizations.
pinned filters are saved as part of saved searches and dashboards, but are not saved as part of visualizations.
when you type into the search box in the infrastructure tab to select a filter, you get offered auto-complete entries.
you cannot select your chosen entry with a mouse click, only by using the down arrow and the enter key.
if you use the search box to specify host names to filter by, the auto-completed values bear no relationship to the actual host names available, as far as i can see.
while running kibana on the master branch, i am unable to add elements to a workpad.
the csv file generated from the kibana web interface has very different timestamp, for example:"aug 2, 2607 @ instead of the actual one : feb 14, 2012 @
when setting the following keys in the `kibana.yml` configuration file; phofcode ... to anything other than false, the `elasticsearch.username` and `elasticsearch.password` seem to be ignored and revert to anonymous connections; phofcode i also found that putting a typo in the `elasticsearch.password` to force a 403 would fail as expected however.
when i click on "apm" tab, several xhr requests raise a http error (code 429).
it looks like a direct elasticsearch answer: phofcode i get this error on the following xhr requests: /api/security/v1/me /api/spaces/space /api/xpack/v1/info i precise that i have very few data.
it is a fresh new install, if count all indices, have about 1 mo data.
trying to upload and ingest an specific csv file stops without any error (in frontend) javascript console shows following error: refused to execute inline script because it violates the following content security policy directive: "script-src 'unsafe-eval ' either the 'unsafe-inline ' keyword, a hash or a nonce ( 'nonce-... ') is required to enable inline execution.
started kibana with bin kibana.bat.
in browser, i see kibana server not ready yet.
in cmd line the output is image phofimage image phofimage
central management only return 10 tag to filebeat, although the result is returned correctly, if a filebeat is associated with more than 10 tags,another tag are missing.
elasticsearch was installed successfully and localhost on default port 9200 works fine.
however, kibana always throws a timeout exception when it tries to install the .kibana_task_manager index template version:
the canvas breadcrumb link doesn't navigate back to the workpad list on ie11.
in one case i got this error in the browser; image phofimage
when trying to pass an array in the `elasticsearch_hosts` env variable i 'm getting a validation error.
this behavior was working in 7.0. tsvb should be able to display the overall max, sum, avg, etc of any metric across all of the buckets, but fails to render in 7.2 and master: <img width="996" alt="screenshot 15 14 50" src=" phofurl it still succeeds when you apply a group by: <img width="992" alt="screenshot 15 14 40" src=" phofurl
count metrics in visual builder table always 0 with filter phofurl
advanced watch creation fails with `email body is required.` error for the form, and `invalid watch actions` below the textarea input.
the json was copied from kibana documentation.
tooltip not loading from data present in the index for phofurl
when trying to write a mapping in the dev tools console, the `doc_values` keyword isn 't present in the list of autocomplete items for a field 's properties.
we seem to have lost the ability to click on things in the autocomplete search bar which worked in 7.2 - note that cursor/enter still works
logs ui refreshes when not needed (and didn 't use to)
if you try to bulk delete items in the saved objects and that list contains the advanced settings object, it will fail with "uncaught (in promise) error: conflict" error in the browser console.
maps app needs to handle user permissions for fileupload better.
right now if the user doesn 't have permissions - it displays *no indices match pattern...* instead of telling the user that they don 't have enough permissions.
if a filter is edited in the filter bar, it loses attached meta information (disabled and inverted state).
on the tag cloud visualization, when unchecking the "show label" button on the option page, and clicking apply changes, the "show label" button automatically gets checked again, and label is still present.
this came only after upgrading to 7.2 (from 7.1.1)
when creating a tag cloud visualization, using the significant terms aggregation, an error message comes: `json.stringify(...) is undefined`, and no relevant data is displayed i've tested with data table visualization too, and that works.
this came only after upgrading to 7.2 (from 7.1.1)
kibana optimization is taking a long time to complete.
i decided to start it from the command line with the --optimize flag to see what happens.
nothing happens, seriously for more than 24hrs.
this all started when i tried to install the sentinl plugin, which is now removed because of obvious reasons.
now kibana is optimizing the core plugins for past 28 hrs.
canvas can not export a workpad to pdf in 7.2.0. this appears to be a resurfacing of phofurl
the attributions layer is on top of the exit full screen button.
the endpoint `{indexname}/_update` is not in the pop-up code-completion list in the dev tools console
when you hover over an item in the waffle map in the infrastructure inventory pane, you see a black info box showing the name of the item.
when you click on an item in infrastructure waffle map, a menu is shown, but black item info box obscures some of menu options.
this could be confusing for an inexperienced user, as they may not be able to see what they are looking for.
you have to move cursor away from item to lose hover information and retain menu.
is it possible to show info box somewhere else so it doesn 't hide menu?
or perhaps show menu somewhere else, so it 's not hidden by info box?
2 tests in the integration-test repo create an interval watch to email a kibana dashboard pdf and png report (2 separate tests).
on 7.3.0 bc4 and earlier both tests pass.
but on 7.3.0 bc5 the second test always fails.
i can switch the pdf and png reports and it 's always the second test that fails.
these watches are sending reports as email attachments but i don 't think that is relevant to problem based on error message; an example of .watcher-history doc for one of these failures; error response when trying to trigger reporting generation host[localhost], port[5601] method[post], error response when trying to trigger reporting generation host[localhost], port[5601] method[post], with important part being; `error response when trying trigger reporting generation host[localhost], port[5601] method[post], status[408]"` on a local install, i kept elasticsearch 7.3.0 bc5 changed kibana back bc4 tests pass.
change it back bc5 they fail again so it really seems like this is caused by a change between those 2 bcs.
the upgrade assistant correctly identifies the need to upgrade an index created in 5.6.16, despite this index being closed, and offers to reindex it.
however the reindex process fails because the index is closed
while using the default vis editor there is an agg group `metrics`, which should always has at least one enabled metric.
but there is a `disable` button when we have more than one metric in a group and we have a possibility to disable both -> in that case the request will fail: metric_disabled phofimage
creating a user with a colon (`:`) in the username causes the user to be unable to log in.
pdf reports up to the most recent 6.8 builds include the timespan in a report header, but i don't see that png reports ever did, and pdf reports from 7.0 on don't have it.
i'm basing this on reports of a metricbeat dashboard across versions.
pdf reports include the title and description of the saved object in the report but png reports don 't.
pdf reports include the elastic logo and name but png reports don't.
both pdf and png reports in 6.8 are showing the pink progress bar at the top.
this makes me think that they were captured before the last response from elasticsearch was received and therefor are showing incomplete data.
i don't see this problem on the latest 7.3.0 release.
in this case these reports were triggered by a watch and emailed to me.
when i get a 6.8 build running locally again i could verify that reports manually triggered from kibana ui also contain progress bar.
this issue may only appear when generating reports for a dashboard with multiple visualizations and it could be just one of those visualizations hasn't received all of it's data.
as seen in the screenshot below, the png contains a tooltip which appears to be from the timepicker.
i haven 't seen this happen since 7.0 so probably not worth addressing at this point.
i 've only seen it when using a watch to email a png dashboard.
if i spin up a 6.8 kibana again soon i 'll see if it 's there on png generated in the ui.
i don 't have tooltip on pdf report of same dashboard.
markdown section does not render after the set variable name.
as a result, you can see that issue(see screen below) image phofimage the dom does not appear, it seems some of the condition return `null`
if user disables cookies and website data on safari - kibana doesn 't work and displays: phofcode
when using kql expressions such as` * keyword * `, no results are displayed if the text field contains an slash ( '/ ') and the "keyword" is located afterwards the slash.
for example with the following text field value: process '848 ' hidden from /proc.
with query ` * hidden * ` it works, but with ` rootkit ` no results are displayed .
reporting code looks for any `euitoastheader` element on the page to capture the message in a toast and fail a report for that reason.
because when things are working, there shouldn 't be a toast on the page.
if we try to test this today, we would find it not working.
when we should see a failure containing what message was in toast, we instead see timeout error for the reporting job.
if you use a date_nanos field as a timefield for your index, the log context view shows the following error and it doesn 't even work: phofcode
i have a large amount of data about various domains; each document is associated with a domain.
some domains have multiple documents associated with them, and i want a visualization that displays them by count (so the domains that are in my index pattern 7 times show up first, then the domains that are in my index pattern 6 times, then 5, and so on).
when i do this, it looks like it's only aggregating domains from the beginning of the alphabet.
it is ordering that show up in visualization by count, but in visualization only begin with `.` and `0`.
unfortunately, i know there are high-count my visualization is missing later parts of alphabet, which display if filter some of data out visualization.
this happens with all types visualizations (pie charts, bar graphs, line charts, etc.)
if user tries to import metric viz with filters aggregation from 6.8.1 to 7.2.0 - kibana fails to do so and logs: phofcode
the "loading kibana" throbber appears and stays for a long time during visits to kibana.
i tracked some of this down to a single file, vendors.bundle.dll.js, taking a very long time to download.
on cloud ess, this file is 4.67mb and takes 6-10 seconds to download.
it does not appear ever serve from cache.
further, when navigating between kibana apps (panels?
the left-hand navigation), the "loading kibana" throbber will appear again sometimes.
network panel in firefox shows it again is downloading this several-megabyte file.
the uptime ui should have at max one request in flight per component, and should block additional requests (i.e.
from the app's refresh button or an autorefresh call), and drop intermediary ones if the requests start to overflow.
filter popover dialog on dashboard lists the same index pattern multiple times
the bar graph is not showing correct data.
attached examples in this link below.
loaded the apache template from filebeat to kibana (unique ips map) if i open the map the map does not show up and an errors "parameter url must be string, not defined" appears.
i have install elasrticsearch and kibana in the same machine.
whenever i stop or restart kibana with systemd, elasticsearch is disappeared.
when using a very long field name (50 characters +), the popup tooltip that appears when you mouse over a point on a visualization is truncated and the value for the field is not shown.
while running functional ui tests the browser console is periodically checked for errors and i 'm finding this (i added some debg log lines from just before the error but note that the polling of the browser console is async to test so they may not correlate exactly); phofcode i 'm not noticing any failures in tests caused by this.
configuration dialog on infrastructure tab should scroll but it doesn't.
the apm ui is storing the sampling rate as "sample_rate".
to simplify their implementation, agents are expecting to find config attributes with the same name as used in environment variables, minus the "elastic_apm_" prefix, and lower cased.
the equivalent environment variable in this case is so the setting should be
titles are not truncating properly since ie11 layout fixes.
when investigating phofurl we determined that when automatic request xhrs fail, while they don't necessarily break the page, they still don't tell the user what's going on.
we should add some kind of a notification to inform the user when polling requests are failing,
unable to install a plugin generated by
i'm trying to update elasticsearch & kibana from v.6.5.0 to 7.2.0. i'm deploying them using docker-compose.
i have changed elasticsearch_url to elasticsearch_hosts as it stated in phofurl then i'm getting an error.
adding elasticsearch_url back doesn't help.
since upgrading to kibana 7, when manually adding a new filter, kibana hangs for 1-2 minutes before the results are displayed unless it times out.
when clicking on a field/value with the magnifying glass in the results table, this does not happen and the filter is applied immediately.
after running the command "yarn start --oss" in my specific plugin folder, i get _error extra serve options "--oss" must have a value_
error "unable to find usable node.js executable" after "yarn start --oss" is used to launch kibana
i got a long pause and eventually a timeout error when trying to access the `pitch` workpad template on a cloud instance.
it 's possible the workpad is too large.
this workpad is 10.4mb, and we should be able to handle up to 25mb.
note: i also tried uploading the pitch template json file and that caused the same timeout issue as well.
kibana doesn 't load at all in ie11.
the logo just keeps spinning
installing java lang server plugin causes error on kibana startup.
keyboard shortcuts for workpads to navigate back and forth are broken on canvas in presentation mode
time series visual builder reports are not working.
non visual builder visualizations are working correctly.
you can see the number of hosts and histrogram by cpu usage in the screenshot are working correctly.
i've verified the data exists and i can see the data from metrics screens but not in dashboards.
as this is a test cluster, i've re-installed from scratch several times, thinking it was a configuration or installation issue but i think i've narrowed it down to visual builder.
i started test cluster with version 6.x and i know dashboards worked then.
think issue started with version 7.0
i see that kibana is showing wrong value it should be 1/20 so 5%.
- copy phofimage i have excatly 20 items, and only one is zero.
2) when going to visualization: phofimage 3) but when changing date to 5 years it 's showing ok : phofimage 4) the logs are only from last 24 hours.
in the developer tools console, the auto-complete for the "aggs" object is broken as of 7.2.0. the auto-complete is focused on the wrong tag (it picks name tag rather than agg_type tag).
the headlines indicating the section are not within the panel they are related to.
this is also not consistent with others views.
the text and numbers in the monitors table is not correctly aligned.
this makes it hard to read.
furthermore the units within the duration column are missing.
currently the expandable rows in the uptime ui are not used as described in eui phofurl
long urls on small screens are hard to read/differentiate.
when elasticsearch and kibana at 6.x, some indices were ever frozen/unfrozen, so the index settings is added following private settings: phofcode after upgrading elasticsearch and kibana from 6.x to 7.2, running 8.0 upgrade assistant, it prompts to convert the index created before 7.0 should be reindexed.
however, the step `creating new index` failed with following error: phofcode looks like, when creating index, the index private settings are also used, which is not allowed.
i have a `string` field formatter defined for a url field to format that field as a hyperlink.
the hyperlink displays properly in discover, but the maps tooltip shows url-encoded text
tooltip does not resize to fit content when map is in a kibana dashboard
the "view metrics for host" dropdown item in the actions dropdown for graphs in metrics explorer is not always shown.
depending on what is selected in the "graph per" input field, e.g.
if `host.name` is selected, then the user can see the action, if `host.hostname` is selected, then it 's not visible.
the data frame transform list fails to load and triggers an error message in a toast.
the apm setup instructions for cloud include a link to `the ess console` that does not redirect the user to cloud but instead opens a new kibana tab.
adding a tag without defining a color fails with http 400: grafik phofimage phofcode as soon as you select a color, the request succeeds and the tag is added: grafik phofimage
kibana is not starting after upgrade to 7.2.0-1
if i have rank_feature data type in index, i cannot create visualize dashboard
typeerror when trying to add a visualisation to a new dashboard,
the transactions breakdown component is not rendering all the flex layout options, so it 's all mangled together in the top area.
unreadable kpi and chart components.
when creating a visualization with multiple split series and the last one has `group other values in separate bucket` enabled, an error message will appear.
when `i18n.locale: "ja-jp"` is set in the kibana.yml, tile maps are not properly shown.
starting kibana 7 , with a configuration that used to work on kibana 6, i get the error: fatal error: [elasticsearch.url]: definition for this key is missing the field 'elasticsearch.url' is defined in the configuration.
at the same time, the fields 'elasticsearch.hosts' was not.
renaming field elasticsearch.url to elasticsearch.hosts made kibana able to start.
it would be have been much easier if error message mentioned name of field 'hosts' instead of url
i use the uri query with time range, with it 's end with "}", the dev tools play button can not work correctly.
get and year:[2002 to 2018} { t"profile":"true" } this query should be valid and can be executed by curl.
this was discovered while testing phofurl * log data is present * index template for log data is missing, so `terms` aggregations fail on text fields that should be mapped `keyword` but aren't.
on the hosts tab, selecting `log rate` shows a log rate of `0.1/s` even if the corresponding `graphql` query returns an error and no data: image phofimage
i created a line graph with x-axis aggregation on date histogram with auto interval its working fine as you can see value in a attached screen shot but when i use interval other than that value become 1.5 which seems unusual as it should not be like that with such a difference.
and if i see the response in inspect value if right but on visualize seems to be wrong.
the slack action throws a not useful error when the webhook url is invalid.
charts in stack monitoring do not honor kibana's time zone setting.
the slack action throws a not useful error when the webhook url is invalid.
the `server.cors` settings () are missing from the kibana documentation (for multiple versions: 6.2 phofhyperlink , 6.7 phofhyperlink , 7.2 phofhyperlink ) even though they are referenced in this discussion topic phofhyperlink and github issues ( kibana/#17574 and kibana/#16714 ).
there is a scrollbar on the apm page wrapper even when the content fits inside the viewport.
when creating a space via kibana space api, if `disabledfeatures` is not defined, the space is created properly, but ml and stack monitoring tabs wont work according to the doc, `disabledfeatures` is not required so it should not have any impact on the behavior: phofcode
when i delete filters from filter field and switch mouse focus (basically by mouse-clicking somewhere else) the empty query is not propagated.
in order to reset filters one should should also hit enter to "submit" an empty filter.
applies to both, inventory and metric explorer pages.
when clicking the log minimap or using the datepicker to jump to a time target outside the range of loaded logs, the ui ends up jumping to a very inaccurate (usually too early) timestamp.
this happens even when there's a high density of log entries at exact target timestamp you're trying to jump to.
jumping a target within range of currently loaded entries doesn't exhibit this behavior.
tested using `node scripts/makelogs` data, but seems be present on observability test cluster as well.
with a visual builder graph, no data is displayed, even if there is data available to be displayed.
instead, a "no data to display for the selected metrics" message is displayed.
some custom metrics when added to the group by drop-down exceed the dropdown margins.
metrics explorer, when opening a graph in visualise doesn 't wrap the "graph per" filter in quotes.
in some cases this leads to empty graphs in visualise, e.g.
when the filter value contains :.
we are using sematext logagent for collecting logs from docker.
when we added it's index to log indices in infrastructure ui configuration, container metrics detail page stopped working.
after creating a new space, then attempting to navigate to that space (either via the intro space-selector screen or via the top-navigation dropdown menu for selecting a different space), kibana enters an infinite "loading... error" loop.
clicking on download report link from anywhere gives unable to parse url error.
name input on add remote clusters form should be validated before user clicks on save.
in kibana 7.2.0, the tooltip over a pie slice shows "level 1" as field, no matter what the field is named or labeled.
pretty sure that this worked fine in 7.1.1.
when i try to add new visualization to dashboard doesn 't work
macos add data tutorial for metricbeat instructs the user to run the process using `sudo`.
our documentation stipulates this will only work if the user previously runs a `chown` command on a few files.
however, our instructions do not reflect that.
users are left to debug on their own or to fall back to docs.
apm ui doesn 't load with kibana ml enabled.
elasticsearch does have ml enabled and is using a valid trial license.
uptime column header is id but should be name
steps 3 and 5 of the "add data / cloudwatch logs" tutorial recommend using the name `fn_cloudwatch_logs` for the function name.
however, this name is invalid and results in an error from functionbeat: `function: fn_cloudwatch_logs, could not deploy, error: invalid name: name must match [a-za-z0-9-] and be at most 140 characters accessing executing the steps using and name with dashes instead of resolves issue.
starting kibana after installing via brew causes kibana to not discover x-pack, leading to an optimization which strips it from the bundles.
there 's a new npm package, `ists`, that causes an syntax error in ie11
the search bar doesn't work (no filter is applied on searches) after an in-place migration from kibana 5.6 (using the migration assistant) to 6.6 (not upgrading first to version 6.0).
if you use the react/eui dropdown with autocomplete to search for matching index patterns, the autocomplete returns no results if there are too many matches in your index patterns.
this is specifically visible in the controls visualization when adding an `option`, or when creating a new visualization using a vis type that requires selecting an index pattern first, such as data table.
places in kibana using an old angular implementation to search index patterns from a dropdown -- such as discover -- still work as expected.
and when you have `<100` matching patterns, things still work as expected.
when creating a rollup index pattern in kibana, it initiates a request like which throws a 404 and causes the entire index pattern creation to fail
if user tries to create a chart with scripted field for date histogram kibana keeps logging errors
remove lifecycle policy from "100 [object object]" is displayed in a popup on the index management page.
when creating a split data table, selecting what to split on (`rows` or `columns`) doesn't display a state to the user (though it does correctly render the table).
an `infinity` number in document data results in no document being listed by the discover kibana section.
once a policy is created with min_age for warm phase, the subsequent change to enable move to warm phase on rollover are not taking into account.
unable to open the list of clusters
default view of saved search is no longer usable.
each entry in the `_source` column used to be formatted and fully visible, but this is no longer the case.
when creating a new index on the production version of kibana i am met with this error(url removed) and the index does not properly create, however, an object stays and must be deleted using saved objects rather than the index patterns screen.
kibana fails to create metricbeat-* index pattern with a
when following the link from a metrics explorer panel to visualize without any index pattern being defined in the currently active space, the user is redirected to the index pattern creation screen.
horizontal bar y-axis custom labeling doesn 't work well in the tooltip when we use "split series" int the buckets as sub aggs.
y-axis cutom label is overwritten by the sub aggs key value.
so the customer may not be able to see y-axis value if sub aggs key value has very long value like system.process.cmdline.
this behavior doesn 't happen in 6.5.4. so i think this issue may be bug..
when creating an index pattern, there is no longer an option to select a time field.
when starting kibana for functional tests - we get an exception / warning on stats collection.
i tried on latest snapshot artifact and it does not appear to happen there.
style controls (bold, italics, underline) and alignment controls do not work correctly.
clicking on them appears to do nothing most of the time, but repeated clicks will sometimes toggle correctly.
when i create a data frame transform that generates a date field in the destination index, the date is interpreted incorrectly in the discover page.
ie 11 won 't load.
shows errors in browser console
some generated short urls result in 500 errors.
it seems like it is related to full query length.
when installing a plugin with a dependency that is not present on kibana root, kibana crashes with a "module_not_found" error.
in my case, i 'm trying to install a plugin that has dependency with `ldapjs-client`.
the plugin is correctly compiled and the zip file has the `ldapjs-client` dependency correctly copied to the `node_modules` folder.
when installing, the module exists under but kibana doens 't find it and throws this error: phofcode as additional info, i 've downloaded kibana source, added `ldapjs-client` dependency to kibana 's `package.json`, compiled it and, with that modification, it loads plugin and boots flawlessly.
kibana is not running in `master` in ie11.
`tinymath` is throwing a syntax error originating in canvas.
the text color on the element rotation tooltip appears to be black and is hard to see
if there 's some bug that prevents kibana from starting properly or if kibana crashes, the file causes it to attempt to restart.
but apparently a setting has changed between version of systemd where our settings are not valid on this version.
heatmap tooltip doesn 't display full y-axis value for the y-axis label
when filters are applied to a heatmap, the map itself updates with new numbers and color ranges.
however, the legend bucket ranges remain the same until you manually refresh the browser page.
on a single-bucket pie chart, you can click a certain slice and auto-filter on the slice criteria when you include it in a dashboard.
the inner ring/slice of multi-bucket pie charts appear to lose this functionality when inserted into a dashboard
the popover says that a user can set another time range by click the clock icon.
is there any clock icon around?
i see only calendar icon and "last 15 minutes" though.
only 100 transforms are visible in the data frame list.
if user tries to drag and drop on time series chart on tsvb - she sees all shards failed message at one point.
in visualizations, request fails when `parent pipeline aggregation` is applied without a bucket selected.
i am seeing some timezone errors on the browser when loading sample data into dashboard.
this is a bug that affects both sql and docs data sources for canvas.
i have chosen formatters for `agent` and `bytes` in my index pattern: <img width="1175" alt="screenshot 16 02 39" src=" phofurl but in canvas, the format is always the raw value: <img width="1313" alt="screenshot 16 00 33" src=" phofurl this is the same behavior with the sql query `select agent, bytes from
any user with the privilege to override the advanced settings (through direct manipulation of the `.kibana` index or via saved object api) can inject fake advanced custom settings.
these "custom settings" doesn 't harm the security of kibana but can be considered as "vandalism".
hitting the _refresh_ button in the apm/services page makes all services vanish.
a document with a keyword field that has a value of in elasticsearch is rendered as in kibana 's discover pane.
i got a basic geoserver install.
the standard layers and my own layers show up in the coordinate map visualization but they do not show up in the maps app wms layer using the same settings.
the docs do not have any information regarding wms & maps so i do not know if some special settings are required on the geoserver to make it work with maps.
when creating an aggregation of median in a line chart on kibana 7.x, it is no longer possible to get the lines to display (even with "show line" checked in the metrics & axes editor tab)... only the dots are visible.
this issue was not present in 6.x, and appears to be isolated to median aggregations only.
there is an issue with `min_doc_count` when the metric is one of `parent pipeline` aggregation and the last bucket is `date histogram` or `histogram` aggregation: - in kibana <v`7.1.0` a checkbox `show empty buckets` is not clickable -> checkbox phofimage - in kibana >v`7.1.0` a switch `show empty buckets` clickable, but there an error in console -> switch phofimage error phofimage
minor cosmetic issue that the confirm dialog for deleting saved objects is very narrow and causes wrapping of both the id and the title columns (see screenshots)
when using a search query in the metrics explorer, it doesn 't take effect when the metric is ungrouped (i.e.
when using the "open in visualize" action of the individual charts in the metrics explorer, the query bar content and chart grouping criterion are passed as a kql conjunction to tsvb, even though tsvb panel filters use lucene query language.
the effect is, that any filter which is represented differently in kql and lucene will lead to incorrect data (usually none) being displaying tsvb.
when trying to view several charts on a page (e.g.
process cpu usage split by process name), the layout breaks in several ways: 1. the tab bar at the top partly vanishes.
2. the charts are only displayed in two columns.
3. there is no scroll bar and the page doesn 't react to scroll wheel events either.
the visualization landing page shows this; listing limit exceeded you have 472 visualizations, but your listinglimit setting prevents the table below from displaying more than 100. you can change this setting under advanced settings.
but that listinglimit is actually set to 1000 (the default i think).
and i do see 48 pages with up to 10 visualizations per page.
so all 472 appear to be listed.
in order to fulfill the requirements in #25873, the "set filter" icon in the log entry flyout tries to do three things: * mark the log entry in stream * center log entry in stream * set filter to current field name and value sometimes centering doesn 't happen reliably, especially when machine load is high.
this suggests a race condition.
user reported that the temporary files from reports are not being automatically cleaned up, as expected, and the temporary directory (`/tmp`) is being filled up.
logs don't show any error related to the clean up.
i tried the same procedure in my laptop (macos) and temporary directory is also not being cleaned up.
discussion with @joelgriffith showed same behavior.
tested with 6.6.1 and 6.7.0 (mine) and 6.7.2 (user).
haven't had chance to test in other versions.
tooltip display is getting overlapped and overwritten.
not sure what happened here but default selection of world map under vector maps got removed in 7.2.0. this is very confusing to the user because no results will be shown unless otherwise he goes and selects it.
if the any of the routes is loaded with an `ip_address` that doesn't show up in the metricbeat indices, an appropriate errors is shown.
if the user now updates url with an `ip_address` that exists in data, error message updates, but user is not redirected.
after the upgrade to eleastic stack 7.1.1 from 6.7.0 ~~the color rules behavior from the visualbuild metric changes for panel filter with a "+"-filter.
now it change the colores depending on the second value or total count.~~ ~~when i use a "-"-filter it still change color on first value.
what was right behavior for both before.~~ sorry not filter is issue.
it happens wenn first value is 0. the color rules behavior from visualbuild metric changes for zero values.
when first value is 0, colors depending on second value or total count.
see definition and behavior in attached screen shots.
when editing a painless script on the discover tab filter bar, an error is displayed.
visualize falsely claiming it can't show all visualizations
unable to get past the discover "you need index patterns screen" despite index patterns existing.
maybe important - none are starred.
if i select several saved objects to delete and one of those is the advanced settings (is that the 'config' doc?
), then the ui hangs with the bouncing k.
uptime doesn 't filter correctly on `name` when there is a space in the name.
chatted with justin - not sure if it is an uptime thing, or eui.
error occurs on query submit
when i attempt to create an index pattern, it appears to process for several seconds before i receive a message at the top that says "typeerror: failed to fetch".
further, after this error occurs, i am unable to go into the page create an index pattern until i go into saved objects and manually delete it.
it then begins showing me a window in the lower right that the referenced object does not exist, and asks me recreate it.
through this entire process, at no point am able use incoming data.
upgrade assistant docs still indicate users must upgrade to latest 6.7.x before upgrading to 7.x
when you add an additional columns, the current time range is loaded with the columns.
when you start scrolling to load new log lines, the new column is blank for the newly loaded log lines.
logs flyout doesn't scroll properly
when selecting the `today` from the commonly used options, the `to` value of the time range is not using `roundup` option on `datemath.parse()`.
this works in metric explorer for reference.
infrastructure ui waffle map doesn't wrap properly in ie11
the help `?` icon is in the middle of the wrapped text `index patterns` like; index ?
.condition/if doesn 't appear to work as expected when using split
in data visualizer i try to override auto-detected grok pattern.
if i give a pattern not matching any entry i get an error (good) but my custom pattern is not retained -- see screenshot phofcode phofimage
in the default build of kibana, with no settings changed, cloning the elasticsearch repo (the repo shown in the example) causes kibana to crash.
restarting kibana results in a quick crash.
before the crash, kibana logs many errors.
below is a small snippet from beginning of errors: phofcode the `index symbols or references error.
skip to file indexing.` and `error: language server java not installed` errors repeat 10 's of thousands of time (once per file in repo?)
here is a snippet from end log as it crashes: phofcode
the docs link in the upper-right corner in kibana says `7.2.0` but the link takes you to 7.x docs instead of 7.2 docs.
the tooltip box isn't big enough to display the data so it overflows
saving a map changes line string colours from whatever they were manually set to, back to white.
it doesn't seem to always happen, can't work out how to reliably reproduce.
if it helps, i was on a train when it happened with temperamental internet connection.
this bug occurs when a user created an index with field names that contain spaces at the start/end of the name, for example ` hello_world` or `hello_world `.
the uptime team has added integration links between the other observability apps, but these links will be displayed even if the target app has been disabled in the current space.
improper representation of letters in languages written from right to left
unable to resolve, custom plugin assets(img) path from scss file.
regardless of the browser setting, reports are unable to be generated on rhel6.
chromium fails to launch due to an out-of-date lib.
setting elasticsearch memory using official docker image with docker compose is unclear.
in the java arguments logged by the es server using the docker-compose.yml listed below, there are both -xmx3g and -xmx1g.
expected would be only one such value, so that the elasticsearch operator or developer can confirm configured heap size.
it is actually currently totally unclear how to configure es heap size when running it with docker or docker-compose since this is documented at phofurl but apparently it does not work, at least log suggests this ambiguous existence of two settings.
there is one more side question here.
you would also want to override -xms1g to set it so that it equals -xmx value, and unclear how to achieve that, because otherwise you do get a warning as follows: phofcode
unable to use kibana after fresh install
selecting the colour picker crashes kibana
spotted in the data frame page in kibana while creating, running and deleting data frames using the es `_data_frame` apis.
refresh rate was set to 1 second in the ui.
no errors or failed requests have shown up in the developer console at time toast notification showed.
i tried with and without `csp.strict: false` in kibana.yml but ie 11 fails to load kibana.
when adding a group to a filter in a workpad, sometimes the sidebar ui makes it appear that the group was not added: phofimage the group is, in fact, added to the expression though: screenshot 16 38 10 phofimage the problem is that the available groups are only extracted from filter expressions, not actual expression on an element.
so if filter element does produce a filter, and nothing is consuming that group, group effectively does not exist (as far as sidebar control is concerned).
when the stats api is called like so... phofcode ... it returns a 500 response.
the kibana server log shows this error: phofcode
kibana rollup job panel won 't allow you to stop a running job: but you can do that via an api request to post if the cluster is under pressure and the job is big, it will take some time to get from "indexing" to "stopped" status, and the apis will report a "stopping" job_state field.
in kibana, if any job has the "stopping" state, it will break and report an empty page, and in console there will be a logged minifed react error (posted in correct section)
the default value in the layers select box in a new coordinate map does not match the currently used basemap layer (e.g.
as originally noted in phofurl and fixed in phofurl it seems this functionality is now broken again in 7.1.0. it was supposed to be fixed in 7.0.0 but i'll go back and test that because it seems unlikely that the few changes from 7.0.0 to 7.1.0 would have broken this.
setting up index policies with `min_age`, `max_age` or `max_size` using small time units or byte size units as described in the docs phofhyperlink leads to unexpected behavior, when navigating to _index lifecycle policies_ in kibana.
it shows the configured values, but with different units, as the configured units are not available in the ui.
console autocompletes `fullname` instead of `full_name`.
if you are grouping by `system.network.name` but have applied a filter, when you click on "open in visualize" it only setting the filter for the grouping but not the filter.
maybe this is obvious to others, but it appears only certain aggregations will draw a line between points.
basic ones seem fine (avg, min, max), but others likes 'percentiles' and 'median' do not.
in visualizations, the workflow of "select aggregation, then select field" is fine.
however, if i then want to browse various aggregations, the field gets reset.
the timelion legend shows the value from the next interval instead the value from the actual via mouse hover selected interval for non auto interval lines graph as step.
since version 7.x the lines between the table cells are not visible anymore.
this makes things much harder to read.
new platform accepts react components for toast notifications.
in the kibana ui (6.7 and prior), when you go to the discover pane, and add a filter, the ui dynamically expands to fit the field names.
for some reason, in 7.0, dropdown has been adjusted to a fixed size with no way to expand.
this makes it impossible see full names for fields with longer names.
the page title for "inventory" still displays "snapshot".
setting the environment is not propagated to kibana, only similarly, `elasticsearch_url` was missing in docker image for 6.7.0, but added again in 6.7.2 ( phofurl ( phofurl contains both `elasticsearch.url` as well as `elasticsearch.hosts`, but only and not
shortcut phofcode + phofcode that takes you directly to the reference documentation does not work for keyboard layouts which do require a support/modifier key for typing phofcode (such as the phofcode -key)
when opening a link e.g.
to da dashboard when not logged in kibana returns to the landing page after sso instead of the original link.
when clicking the link a second time you get to the desired location.
browser tab freezes in what appears to be an infinite loop any time a histogram visualization is rendered with interval set to less than 1 (e.g.
eventually the tab runs out of memory.
this includes dashboards with existing visualizations that worked in 6.7 and the visualization editor.
what seems to be happening is at some point ordered.interval has been incorrectly converted to "0.5 milliseconds", which causes orderxvalues() incorrectly fall into the dateinterval code path and goes into an infinite or very large loop comparing a time interval against numeric data.
enroll a beat but don't put a label, then try to delete throws a typeerror.
navigating away from beats central management is throwing a typeerror.
i sometimes am traveling for work and need to access kibana over a cell connection for a long period of time.
i have always just left a tab open to the kibana dev tools tab in 5.x and it worked great.
we recently upgraded to 6.x and suddenly i am noticing that like 5mb are being downloaded every minute anytime i have have kibana open.
so fired up the a network analyzer and it looks like the culprit is the new autocomplete downloading mappings very frequently.
our mappings are large (~4.5mb).
the bug here is that there is no way (at least that can find) to change behavior of downloading autocomplete stuff every 60 seconds, even if it 's unchanged.
would like set it back once per session, or at least dial it back from redownloading mostly static file once minute eating thru all my mobile data.
if you leave kibana window open overnight, pulled down 2gb of identical data.
even with "unlimited" data plans today i 've found this bug has caused me run out of "high speed" data put me back shitty 2g speeds.
here is stack trace offending call that 's happening once minute: phofcode
visualisation 's queries ' time filter misses documents
when creating a fresh tsvb visualization, the default index pattern is used.
the first data query is then issued with that default index-pattern against what should be the default `date` field.
i said "should be" because if i 'm not currently seeing this behavior if i 'm using the that has the `order_date` as default date field instead of standard `@timestamp`.
sometimes when i backspace in the devtools console i get this typeerror: uncaught error: uncaught typeerror: cannot read property 'value' of null ( phofurl at window.onerror (commons.bundle.js:3) window.onerror @ commons.bundle.js:3 error (async) (anonymous) @ commons.bundle.js:3 __webpack_require__ @ kibana.bundle.js:2 (anonymous) @ commons.bundle.js:3 __webpack_require__ kibana.bundle.js:2 (anonymous) commons.bundle.js:3 __webpack_require__ kibana.bundle.js:2 (anonymous) __webpack_require__ kibana.bundle.js:2 coresystem.start promise.then (async) checkdeferredmodules
if user is on kibana with an expired trial license base layer displays unable to find ems tile configuration id: road map error.
i created a monitor on the alerts tab.
i linked it to slack.
but when i try navigating to the monitors tab, i see just a white space with an error in the console.
if user with a disabled role logs into kibana - kibana just displays also if another user needs to log in - user has to clear the cookies.
after yarn start in github repository, i had this error below when accessing to kibana.
i realized that maybe the path `#code - check out` was maybe problematic and moved the whole kibana folder to `/users/user/documents/` where it worked successfully.
opening a saved region map visualization always displays "iso 3166-2 code" in the join field, even when configured to use a different join field.
the changes in `src/legacy` folder are not watched.
after a short research, seems the problem appeared after phofurl not sure about the whole folder, noticed while working in and folder under windows 10 os
the new watcher gui allows to edit cluster alerts but when clicking it, the user gets an error page with stack trace
kibana's sample web logs field `utc_time` isn't based on when user added the sample data.
duration data formatter does not work for non-english language
a custom role that mimics the system `superuser` role, and should have access to all aspects of kibana, cannot generate a pdf report for a dashboard by default.
depending on the version, an error in the lower right ui appears as`cannot reach the server.
please try again` or `forbidden` when user tries to generate pdf report for a dashboard.
the workaround to this is to add role following kibana.yml setting, however this is inconvenient because each explicit role must be listed here: e.g for a custom superuser role called `superuser2`: [ "superuser2" ]` working with @joelgriffith on this, we may have discovered this is not an issue as of 6.7.2, but perhaps it should be looked at for other versions.
after rebooting the server i see the... > kibana server is not ready yet ...message endlessly in the kibana ui.
logs show... phofcode ...but there are no other kibana instances.
re-restarting kibana seemed to resolve.
other reported instances of this warning seem to be related to upgrades, but this was seen on a fresh install of 7,0.
if a user filters by status, it's possible that not all of the matching monitors will be displayed in the uptime ui's monitors list.
depending on browser, when clicking on `view details` for a component fo the profile analysis, if the resulting text for the detail is long enough to go off the visible screen area then you cannot see `close` button for that panel and also cannot scroll or even "select drag scroll" to get down to `close` button to be able close that detail panel.
euitable has different sorting in chrome/firefox across kibana
user cannot save an advanced watch with index action.
had to delete everythin up to latest 1 week, this worked fine in kibana6.7.0
the pop-up in the infrastructure ui table view for pods gets cut off for short pod names.
time series visualisation is loaded on other tabs in case of quick navigation
tooltips with large amounts of text make a very long tooltip that doesn 't fit on the screen
when running 6.7.1 of logstash, kibana, and elasticsearch the logstash node pipelines page in the logstash monitoring ui shows `n/a`s for all metrics in the summary bar at the top: <img width="2012" alt="screen shot at 11 29 59 am" src=" phofurl
if you hover over the type indicator ('t', '#', etc) in discover (tabular view), the name of the field pops up.
that isn't very useful, because you can already see the name of field right next to it.
for a new user who doesn't understand what those symbols mean, it's more useful of name of type itself pops up instead.
the first link you navigate to from a plugin will stay active in the navbar.
if you navigate to another (navbar) link from the same plugin the navbar does not update and the first link remains active even though you're on another page now.
when the user is logged in to a custom space and does not have access to the default space, the node details page shows a graphql error.
it is triggered by the `metricsquery`, response is phofcode error on kibana server console: phofcode no error on elasticsearch console.
in kibana 6.5.4, i can set a url field formatter on an ip field using a relative hyperlink (no phofurl at the beginning) and it will render the hyperlink properly.
in kibana 7.0.0 and higher, the same relative hyperlink on an ip field does not render properly.
further testing reveals that relative hyperlinks on string fields do render properly.
showing failed to load remote clusters occasionally when going to the index pattern creation page.
upgraded from kibana/elasticsearch 6.5.1 to 6.7.1 using a rolling upgrade.
after the update all seemed fine but after a user went to create a new index patterns they were unable use the <remote-cluster>:<index name> syntax.
the data is present in the cluster and can be matched against without remote cluster component.
when adding a *: or sf-prod: in front of an index pattern i know exists on all remote clusters page churns for moment then says "the index pattern you 've entered doesn 't match any indices."
for moment, immediately after adding <remote-cluster>:, if i am sufficiently quick i can click "next step" button and create pattern anyway.
i can also import patterns with <remote-cluster>: syntax from saved objects tab of management page.
testing in kibana dev tools pane shows that can see and search against those remote clusters/indices and see results that am expecting.
screen shot at 11 19 55 am phofimage screen shot at 11 40 59 am phofimage remote cluster config: phofcode querying cluster: phofcode
the window to edit filters seems to positioned at the middle of the filter string.
when the filter string is too long, the window is pushed to top left and is not usable.
timelion does not see any data
infrastructure map view works but view metrics doesn't work.
i encountered this in 6.x as well but managed to solve it by making sure all the metricbeat are the same version but that solution doesn't work anymore.
the aggregation dropdowns (and most dropdowns, i suppose) automatically choose whether to go up (small height) or down (larger heights) when opening.
in this situation, going "up" means the first values (e.g., 'average ') aren 't accessible, as it isn 't possible to scroll upwards in the data frame.
repro steps are below, but it seems that resizing chrome to under 700px (per the js console 's "window.outerheight") causes it to go upwards.
set it about 600px make sure happens.
when when attempting to reach the kibana app it shows "kibana did not load properly" and in the chrome developer console i can see: get phofurl net::err_aborted 404 and in the network tab i see same, but also see many other similar files being returned successfully with 200s.
it appears to be just this ml-related index.css file that is causing all the problems.
coordinate/region maps in 5.6.16 cannot connect to the elastic tile service and as a result, fail to load the tile service manifest resulting in an error when trying to load/create one of these visualizations.
documents with arrays of objects containing geo points are not rendered.
the logstash nodes list page shows 0 events for every node in the list: <img width="1622" alt="screen shot at 4 30 59 pm" src=" phofurl
create an index lifecycle policy, edit the warm phase "number of replicas (optional)", and set it to 0 - it will fail with "version: 6.7.1 build: 20266 error: uncaught typeerror: cannot convert undefined or null to object ( phofurl at window.onerror ( phofurl
updated both from 6.7.1 to 7.0.0. cluster is green, but when browsing kibana on browser, i get: > {"message":"mapping set to strict, dynamic introduction of [references] within [doc] is not allowed: mapping set to strict, dynamic introduction of [references] within [doc] is not request"}
shrink index does not persist in the ui, see video
an odd error is sometimes shown when using "term joins" with seemingly valid (and functioning) values... > join error: elasticsearch request failed, error "field" is a required parameter
under "term joins" clearing the "left field" value improperly clears the "right field" value.
these two fields, though defining a relationship, are independent values that should not impact each other.
setting the "borders" property to "0" should show shapes without borders it instead shows 2px thick grey borders.
these borders also no longer align with the selected border color.
a few deprecated code / security warnings output with every page load (though it seems at least one is expected)... phofcode phofcode phofcode
notice annotation in isn't reflected in notice.txt
certain plugins ("only undefined for oss plugins, x-pack plugins are working fine") appear to have `undefined` as their version.
when using percentile with band mode, there is no relative element displayed in the legend.
adding an index in the `create a new threshold alert` form causes the time field to expand pushing `run watch every` fields outside the boundary.
when choosing elasticsearch raw documents as the datasource, you see an error that the fields can 't be retrieved.
i can 't connect to elasticsearch if no port is specified.
i configured around 350 servers in heartbeat however in kibana uptime i am only able to see 50 servers.
i am able to see that around 40 servers are "down" but when i filter with "down", only see 4 servers.
it seems like these 4 servers are among first 50 servers and that is why can see them.
double clicking on `history` in devtools leads to js error.
in some cases i could reproduce this every time but upon clearing history/session, it would only happen sporadically with only `get /` in my history.
my kibana was configured to use browser's default timezone, and i created a few visualizations.
later i change my timezone to utc.
it didn't reflect on the existing visualization.
i got a query from my team, that data is not exactly valid.
later when debugging i verified from the network call, that timezone being sent is the one which was browser's tz at the time of creating visualization.
phofurl basis on this it looks like a bug.
when having a rollup index with an average aggregation, if we split the aggregation by some term and sort by that average value, it fails.
currently cpu and memory usage charts are shown for the rum services in the metrics page.
however, the rum agent doesn't send these metrics since they are not supported across browsers.
when you open the maps application and load the `[ecommerce] orders by country` and navigate back to the maps application, i saw an error on the console captured here.
console error: phofcode when accessing pipeline menu from: `stack monitoring` > `logstash overview` > `nodes` > `node` > `pipelines` this prevents the stats card from loading: screen shot at 11 15 09 am phofimage
this is a rabbit hole of a bug.
i was trying to test license management and setting up licenses.
in the end i ended up with a kibana which is not accessible at all to the user and with the message and unauthorized to get default space
alerting alway returns the first metric
filters created from brushing a histogram attempt to update an existing filter for that field phofurl as a result, a filter generated via histogram selection can collide with a pre-existing filter on the same field.
in case that pre-existing field had been disabled, thew new filter is also disabled.
exclude filters applied in dashboards which are in dark mode are rendered in green highlight color.
but the highlight color should be red instead, as is the case with light theme.
the green highlight for exclude filters can be misleading to long-time kibana users.
1) selecting 'static value' aggregation causes exception in console static_value_1 phofimage 3) when user remove the value for this aggregation we show '0' in field but chart doesn't contain any data.
the favicon is not showing up and no errors are thrown.
link is reachable when opening it directly.
when using group-by, large groups may flow above their frame and under the search bar
the configuration block (part of a tag) of type metricbeat module (apache) does not seem to work properly with the "hosts" field.
values that are inserted in the hosts section of the edit configuration block dialog do not seem to do anything: from > error [centralmgmt] cfgfile/list.go:96 error creating runner from config: 1 error: missing required field accessing 'hosts ' if you try to instead insert the hosts into "other config" section, it seems to just get eaten (when you click back edit configuration block dialog after hitting "save", hosts you entered will completely disappear)
the visualization 'metric ' doesn 't handle the configured timezone correctly.
canvas usage-data query to elasticsearch returns assets.
if the asset is large, say a 10mb image, the query is slow and response is huge.
this is very similar to phofurl but is in fact a different issue.
when creating a new workpad, the element stats still show whatever values used to exist.
entering a `0` in the number of replicas field results in error: hi, are you aware of a 6.7.1 issue creating a new ilm policy?
i got this as soon as i typed a `0` into the replicas field in cold phase: phofcode
if i follow maps tutorial ( phofurl i don 't see any tiles/shapes, as they are unavailable.
so i don 't see any map in the background, nor any shape.
if the last existing page of a workbook is not empty, and is deleted, the app throws and the page has to be reloaded
activating grouping (`g` key) while previously not having released the mouse button (eg.
it was held down to keep adding elements, and i hit `g` without releasing the left button) might mess up the element and it'll become next to impossible to select
"add layer" ignores field level security (fls)
- tried to create report from canvas.
when workpad name is saved with non-english (korean), when i clicked download button on report page, it shows next error.
phofcode - once i changed workpad name to english, report created correctly.
- still pdf reports korean text is broken.
deleting all of the text out of the `max size` text box causes kibana to crash.
after upgrading from basic -> trial, then downgrading back to basic, the kibana license management ui shows what looks like inconsistent/incorrect messaging: <img width="1662" alt="screen shot at 9 26 46 am" src=" phofurl restarting elasticsearch and kibana did not help.
here 's what local storage looks like: <img width="1662" alt="screen shot at 9 33 15 am" src=" phofurl
in kibana 6.5.4, dashboards with saved searches with dark theme render properly.
in kibana 6.7.0, dashboards with saved searches with dark theme do not render properly.
the expanded detail displays in light theme rather than dark theme.
the kibana mapview is constantly visually shaking when viewing docker overview.
autorefresh on or off does not matter.
both have the same issue.
issue is in cpu, memory inbound and outbound traffic might be related to screen resolution:
can not create index pattern.
infra logs describes auth events with an undefined program name, when using the default logstash pipeline, describing events as `[system][auth] undefined`
search filters under index management do not return consistent results when there is a high number of indices.
index names still appear with bogus search terms.
there 's a common problem where changing things in the sidebar changes the data in an element.
i believe this is caused by an outdated resolved value cache, and can be triggers a couple different ways.
the easiest way is to apply a filter before changing arguments via the sidebar.
after deleting the last element in the workpad, the stats in the sidebar still report 1 element exists.
while creating a visualization against a rollup index pattern, if there is an error when querying, instead of seeing a meaningful error message in the ui, we just see "internal server error."
this is in contrast to regular index patterns where the error messages from elasticsearch are shown in the ui.
to reproduce, set the time interval to a small limit say `1000ms` and use rollup index pattern or hybrid index pattern( rolled up indices+regular).
set time range to something broad (like 3 months).
this creates too many buckets and elasticsearch throws an error.
when querying normal pattern, error message "too many buckets" is shown in ui, but when querying rollup patterns, only "internal server error" is shown.
if a cell is selected from the overall swimlane, and then a filter is added - on a browser refresh, the swimlanes load correctly but the other parts of the view show 'no results'.
when creating a threshold alert in watcher, the scale on the graph in the gui does not match the actual events from same query against elasticsearch.
both examples below are 5 second buckets.
when opening the timepicker with a relative or now date, the focus is always set to the "absolute" tab header.
phofimage i 'm not sure what is the best practice here, but it 's a bit confusing because background light blue tab is much more visible than blue bottom border of visualized tab and seems like selected tab is one on "background light blue tab" and not one with bottom border.
some node module have empty content after optimization
if i import a set of managed objects that includes a replacement for the index_pattern that is currently my default, then the index pattern gets replaced, but the default index pattern becomes undefined.
this leads to a 'no default index pattern' error if i try and open the visualizations or dashboards tab.
further more error is quite misleading, as screen presented has a big 'create index' button visible on it, prompting some of my development team to conclude that error was caused by missing index pattern (rather than by their default idnex pattern having been forgotten).
if user exports and imports beats dashboards from 6.7.0 to 7.0.0 - some of the visualizations are not getting displayed.
our company stops chrome from updating so we have a few people with old versions of chrome.
these people get a 401 error shown in the attached image after kibana loads for about a second.
this issue does not occur on newer versions of chrome or other browsers.
clearing the cache or restarting the browser have no effect.
this issue never came up with previous versions of elasticsearch
in 6.5 (i don 't have a 6.6 handy), fullscreen mode in canvas would stretch the workpad to fill as much of the screen as it could - now it only shows at its native size.
the ability to create table using visual builder with offsets per day to show a 7 day trend over time doesn't work.
the values appear to be the same consistent each day as the previous day.
however, if i create a table visualization without visual builder this works.
the objective is to have a chart that trends call java methods over a 7 day see patterns.
when this is on dashboard this means that the dashboard has be over 8 days vs 24 hours as desired
in 7.0.0 the plugin generator creates a template that references a `.scss` file, but `kbn-plugin-helpers`'s build step compiles the sass file into a `.css` file.
so after building the plugin, kibana can no longer find the plugin's `scss` dependency.
horizontal visualization legends are oriented the wrong way when dark theme is enabled.
user supplied wms urls may contain additional query parameters phofhyperlink to refine the data they want to display.
if a user enters a wms url with a query parameter (ex.
phofurl in the maps application the `getmap` url for requesting the tiles is not constructed properly (e.g.
the fetch requests for: - /translations/en.json (on firefox) - (on chrome) are not passing credentials when using kibana with apache 's authz module, thereby returning error 401. this is the default behavior of a fetch phofurl for firefox < 61.0b13; because 60 is esr ( phofurl this behavior should be fixed.
also, it affects the current google chrome stable version.
when enrolling a filebeat when trying to finish step two nothing happens.
checking the debug console revealed the following message: phofcode the step looks like this: grafik phofimage the "filebeat input" configuration block: grafik phofimage
when you change an element 's expression, the handlers object is not rebuilt.
as a result, one of the functions, `getfilter()`, is not recreated, so the value it produces will now be incorrect.
an ml job with an existing annotation does not get deleted when the job is deleted.
if a new job is created with the same name, then old annotation reappears!
using a trial license, ccr monitoring tab appears on all views except jobs image phofimage
kibana returns empty response after 120 seconds for a long-running query
exporting dashboards via this api endpoint: phofcode dashboards dont appear to reference visualizations properly.
if a dashboard/visualization refresh happens while looking at different tabs in the requests section of the inspector, it will change your tab to the default one.
es report unknown type for collapse field `cluster_uuid` when enabling stack monitoring
the color pickers are missing from container style for the element background color and the border color.
one of the graphql queries uptime is using returns a timeseries value as an `int`; timeseries values need to be represented by > 32 bits, and graphql natively supports a maximum of 32.
anytime a logstash pipeline viewer window is resized, a `invalid dimensions for plot, width = 0, height = 0` error is thrown: lspv-resize-error phofimage
using the kibana create space rest api phofhyperlink , it is possible to create a space whose id is invalid (is not lower case).
this causes the space to be created, but impossible to access it.
this is a usability nit.
long index patterns, when viewed in management > index patterns get truncated.
it is not easy to tell which one is which unless you select it.
starting up kibana and elasticsearch simultaneously causes kibana to exit with fatal error.
this is almost identical to #25027 except that i faced this issue in 6.6.0. i ran into this bug when our infrastructure was restarted after a power shutdown.
elasticsearch and kibana are hosted on different machines.
es went into "red" (unallocated primary shards) on startup and took a while to complete recovery.
meanwhile, kibana started and crashed with the logs given below.
my guess is that `.kibana` shards were unalloocated the index was unusable.
when testing stack upgrade from 6.x to 7.0.0-rc1, configuration files required for legacy ml modules are removed as part of the upgrade however the directories remain on disk in the kibana installation.
this causes the data recognizer to fail with a 500 server error because it cannot find a manifest file.
this causes all ml modules to fail and none are loaded.
there is no visible impact to end user.
the create new job page still displays regular ml job wizards, but no ml modules will be offered if there is relevant data present.
a 500 error can be found in kibana stdout log.
derivative aggregation (parent pipeline aggregation) cannot be selected for percentile rank aggregation
using bucket crashes kibana if index not present.
in case of kibana 7-beta1, it 's just a error toast rather than app crashing: image phofimage
the uptime ui has several failures related to `simple_query_string` queries that are generated by the `euisearchbar`.
monitor chart for check status is not displaying the correct values in its screenshot.
after upgrading from 5.x to 6.6.1, i 've noticed that the monitoring panel, especially 'nodes ' page, looks terrible.
it has to do with the minimum browser width the page was designed to be viewed at.
with ~1050 pixels, even with the left nav panel collapsed, it looks terrible.
it starts to look sane at around 1425 pixels.
obviously this is very specific my definition of "readable" and several other variables, but as you can see in screenshots character-wrapping of cells looks really terrible.
i 've taken a quick tour of a few browsers and it appears be a problem everywhere (on desktop browsers, i mean).
i would expect a panel like this force minimum width (e.g., adding horizontal scroll bar), drop columns, add ellipsis, basically anything other than this style of wrapping.
perhaps parameters like `overflow-wrap` and `word-break` could use some tuning.
if you have an element that does not use a time filter function, and you change the expression to one that does, the filter value will be wrong.
sometimes it seems to remain empty, and can result in the same behavior as phofurl screenshot 12 31 19 phofimage screenshot 12 31 47 phofimage other times it ends up being invalid: screenshot 12 21 09 phofimage screenshot 12 21 15 phofimage
same query in timelion and in canvas using timelion datasource, doesn 't provide the same results
kapture at 9 21 20 phofimage
[embed mode] filter bar "click to apply" tooltip shows, up, and references an unclickable element.
on the transaction sample screen, there 's a "labels" tab: image phofimage likewise on the transaction details flyout: image phofimage but on the span details, there 's "tags": image phofimage
fetching data on discover and visualize editor fails.
vega visualizations in kibana create a tooltip with a 400px wide table ($euisize * 10 + $euisizel * 10) , but an eui tooltip expects a maximum width of 256px.
displayed time range shows differently than the user selection.
plugins used to be able to supply an `icon` in the `uiexports.app` object and the side nav would correctly render it using an `<img>` tag.
the new nav accepts a `euiicontype` from `uiexports.app` and adds it to an `euiicon` which is currently not extensible with custom svgs.
the latest nav update allows for accepting the `icon` image location if a `euiicontype` is not supplied.
the image path url is correctly being passed to an `euiimage` as the `src`, however it keeps ending up with a 404 without any manipulations current path in `uiexports.app.icon`.
when having a user with roles kibana_user and monitoring_user, one can go to management and get the screenshot below, instead of getting a warning view - you don't have permissions
user without sufficient permissions get stuck on loading ilm
when i tried to display gauge with result count empty, it 's not showing count as "0"
search in the search bar does not work - until the option is turned on/off _options: "turn on query features"._
kibana shows only part of correct hints.
upgraded beats, upgraded kibana, both from 6.6.1 to 6.6.2. infra view/hosts is not working anymore
if es cluster status is red - kibana is exiting with a fatal error.
multiple restarts of kibana and es are not fixing the error.
please note this bug is an accidental catch.
file data visualizer reads field with a dot for thousand separator as a string, not a number.
when i explicitly state that it should be mapped as long under advanced import, complete row is skipped, while providing this message: some documents could not be imported 534 out of 534 documents could not be imported.
this could be due to lines not matching the grok pattern.
the timepicker in visualize, dashboard, discovery is not shown.
or better is there, but the size is zero and is not visible.
field display for long field names overflows when using a metric on a geo aggregation.
creating a separate issue per my comment in phofurl i was tracking a change in kibana behavior that started in 6.6.0 that i * thought * was phofurl and to be fixed in 6.6.2 by phofurl however, that change behavior still exists 6.6.2. in previous versions of kibana (up to and including 6.5.4), when i hover over a value the legend, i can then click anywhere the dark grey area to then show the magnifiers (meaning * don't * have to click directly on the value itself).
starting 6.6.0 (and including 6.6.2), now have click directly on value itself, otherwise magnifiers never show.
is this change behavior intended or is this a bug?
thanks advance for any information you can provide!
when opening the index pattern creation page as a user without proper permissions, i see two warnings: screenshot 10 27 20 phofimage somewhat expected, i don 't have access to that information.
however, in the dev console, i see the following: screenshot 10 26 53 phofimage phofcode looks like the warnings are not being keyed correctly.
i 'm not sure if this is a problem in this app, or if it 's an eui issue though, i haven 't dug into it at all.
in visual builder, percentile ranks do not return results if `value` is an integer
accessing the 7.0 upgrade assistant as a user with only role `kibana_user` results in 500 error.
filter buttons missing for bar/area/line charts after upgrading kibana to 6.6.1 from 6.4.2
with the move away from websockets, and moving the interpreter to the browser, there was code introduced that changes how server functions work phofhyperlink , which creates a copy of the function for use in browser that actually sends work to server.
the problem is that if you have same function defined in both registries, browser one gets clobbered and that function will always just run on server instead.
the `to` function in canvas is a great example of this.
it 's a common which canvas registers in both browser and server registries, but it only ever gets run on server because browser definition is overwritten.
some guide links (such as 'learn more') still links to x-pack documentation page which is not exist anymore, so it links to 404 page.
contents of visualization appear to refresh when a panel from a dashboard is maximized.
ideally, the contents would not refresh and show the same data as they were prior to the maximize.
canvas fails to load properly on cluster nodes >3.
when cluster size is at 3, we get a single retry, and then it loads in 1.1 min.
when cluster size is larger (ie 50 nodes), it endlessly loops.
this is on aws ece, so websockets don 't work, but http appears to assume it has to connect to the original server.
since it doesn 't, is getting an error and retrying again.
on a smaller cluster (say 6 nodes), this can get 'lucky ' and eventually connect the same node and then load.
that typically can take as fast as 17 mins, but i 've also seen go 53 mins.
but anything larger then i typically just give up watching.
when attempting to create a watch from advanced option with json, if the actions include a webhook the save button does nothing.
it isn't grayed out, but it doesn't save the watch.
you can apply the same watch via dev tools without issue.
for new and existing dashboards, there is no option to use dark color theme.
when editing an ilm policy in kibana, in the `hot`, `warm`, and `cold` phases, the option for setting `index.priority` is presented: screenshot from phofimage however, leaving this at the default value (100 in hot, 50 in warm, 1 cold) does not remove the setting from existing policy.
additionally, clearing field of its default value generates a policy with: phofcode instead of removing this action entirely.
when you delete a page from a workpad, the existing resolvedarg values stick around.
similar to #32512, but caused by a different action.
this causes the elements stats to get out of whack: screenshot 10 40 40 phofimage here, i delete a page with couple of elements on it.
older kibana 6.4.0 contained list of shards and their assignments to nodes on index detail page in "monitoring" section.
kibana_640_shards phofimage new kibana 6.6.1 has that section empty: kibana_661_no_shards phofimage
node detail page in monitoring section of kibana shows wrong node name on "overview" page, correct name on "advanced" page.
when accessing kibana, css files are reporting err_connection_reset
adding a query param with a value that typically requires url encoding (e.g.
"/") will cause the url to update twice, once for the initial change, and then again with the entire hash + all query params url encoded.
example: phofurl becomes phofurl this appears to happen throughout kibana.
confirmed in: * discover * visualize * dashboard * canvas maps machine learning infrastructure logs apm uptime graph dev tools stack monitoring management ng-kibana-route-mangling phofimage
while trying to reindex indicees that hasn't stored _source, kibana ui gives me error, that is not clear.
in elastisearch logs, the error is more clear.
in the apm dashboard when selecting a transaction name (route) ending in a `/` (for example `post /)`.
the resulting detail screen will show "no transactions were found."
a combination of pinned filters and non pinned filters with the same name on a dashboard cause issues when jumping between visualize <-> dashbaord or dashboard <-> dashboard when using a markdown viz.
these issues prevent adding new filters until that pinned filter is modified or removed, then all filters added in the meantime will appear and take effect.
we have set logalias to include a large set of indices to be displayed in logs ui.
if i click on stream live in logs ui, the ui is not refreshing and the "last updated" indicator on the bottom of the page is only incrementing.
i can see in network console that a new graphql request is started even if previous request did not finish.
when previous request is finished payload contains valid messages but they are not added to logs ui.
it looks like messages are not added to logs ui if request graphql finished before a new one started.
to test this, i set logalias a single index for faster responses and streaming worked, requests finished before new one was created.
when `math` (and really, tinymath) fail, they just return null, so you don 't really have a lot of context about why it failed.
in canvas, we just check for a `nan` value and show a message telling users to check the columns they are using.
this isn 't helpful when the issue isn 't the column names though.
as a simple example, using `csv` and piping to `math` fails because the values are all strings by default.
but only thing users see is "failed to execute math expression.
check your column names" screenshot 16 59 29 phofimage
when doing any casting with the `to` function, nothing works because the function tries to grab types from handlers, which is wrong.
types need to be accessed from `@kbn/interpreter` now.
so the value of types is undefined, and you end up with this error: screenshot 15 58 51 phofimage
kibana visualize or dashboard page.
when "show tooltip" (pie visualization options) is on and this field and/or value is little bit longer name (value more than 30 char), then it will not show whole word, nor the count or percentages.
truncate option seems like does not control this also.
trying to remove created tags from the configuration tags list, but getting a permission failure: phofcode
when using undo, canvas ends up reloading the entire workpad you have open.
this means if you undo twice, you end up loading all the elements twice.
the app ends up throwing the first set of work away, but it has to complete before the second set can run.
this happens every time you use undo, and can easily result in timeout errors: image phofimage
when trying to save an advanced watcher with an index action, nothing happens when clicking the save button.
console has an error: "attempted to create unknown action type index"
when we change workpads, the resolveargs values are never flushed.
it didn't matter before phofurl but now that we use those values to calculate progress, it does.
as-is, you end up with weird element stats: screenshot 13 34 33 phofimage
adding a time filter to a workpad crashes the kibana interface.
this also happens when you duplicate a time picker element.
i think it's related to phofurl screenshot 12 17 03 phofimage
if a configured remote cluster is not available, the monitoring page will take 30s to load until it displays any data.
looks like it 's waiting for 3x 10s requests to `, this slowing down the whole loading of the page.
tooltip of the monitor history getting trimmed image phofimage
when you put an invalid query in the `essql` function, like querying an non-existent index or try to use a field that doesn 't exist, all you see is this: screenshot 17 22 11 phofimage *[essql] > see server logs for details.
* but i 'm a user, i can 't see the logs, which are actually super helpful: phofcode we should surface the error message in the app, otherwise it 's nearly impossible to figure out what you did wrong.
this is also a regression, in 6.6 we did show error we got from elasticsearch.
kibana starts up and the task manager tries to poll for tasks to execute.
for some reason, elasticsearch consistently returns `503` for these search queries.
searches to other indices work ok. the numerous `503` responses cause kibana to crash.
using kibana to search through log data stored in production elasticsearch cluster.
default search from "discover" view takes too long to provide the results.
this is caused by the fact that generated search query contains `date_histogram` aggregation which slows the search multiple times.
making default "last 15 minutes" at discover view results in `query duration: 12623ms`.
4h takes approx 120s and makes whole cluster unresponsive.
searches for 8h time ranges and more fail with "502 bad gateway" error message.
running default query generated by kibana w o `date_histogram` aggregation section makes all above-mentioned searches almost instant.
according to kibana documentation phofhyperlink `elasticsearch.hosts` is an array of strings.
when passing array, it fails validation.
if you use ` * :indexname * ` when you have a remote cluster connected to your cluster it will only find indices from the remote cluster and not from the local one.
the default behavior from ccs was that ` * :indexname * ` would find indices on all clusters
if a date histogram aggregation is configured in the editor (e.g.
for vertical bar chart), several filter related errors are logged into the console (everything seems to work though)
navbar is missing icons when viewing `/status` page.
particularly troublesome if navbar is collapsed :)
on a date histogram with one year intervals, the x-axis is off by 1 year.
if you hover over the dot representation of the bucket on the graph, correct year is displayed.
the underlying agg also pulls correct data.
if `.watches` is a concrete index, rather than an alias, the `reindex` button will never finish loading.
this is due to the fact that trying to `get .watches` returns an error.
this can happen if a cluster that uses watches was created as a 5.x cluster, then upgraded to 6.x without running the reindex helper (or migration upgrade api phofhyperlink ) in 5.x before upgrading.
while investigating phofurl ran into issues importing only data table visualizations into a new 7.0.0 install.
the data table was originally created in 6.x, then stack was upgraded to 7.0, then the data table was exported.
the import problem does not occur on a stack that is upgraded from 6.x - these steps do not produce the issue: 1. install 6.6 2. load 6.x version of viz 3. upgrade stack to 7.0 4. delete visualization 5. import 7.x version of viz (succeeds)
* `get _stats` says that the primary storage size of one index is b`.
* index management pages says that the primary storage size on the same index is `104.8gb` where it should be `104.8 gib`.
this greatly impacts users who are relying on the displayed values to write sizing guides.
when loading a workpad, the action that loads all the elements in the workpad is fired twice, creating a bunch of needless extra work, thrashing from react as they all render twice, extra data processing... all things contributing to phofurl
in the sub aggregation (split series) the items that do not appear in the first range are not sorted correctly below you can see that the "priority" "2", is not sorted.
image phofimage note that issue appears only when sort is ascending.
strange "0" appears on the uptime app when heartbeat is not defined
cannot filter indices by name when using the upgrade assistant.
i can filter on the details, but not the index name.
elements can be resizes until they disappear.
if you deselect the element
loading discover or monitoring in chrome 72 can cause the browser tab to spin for several seconds to a few minutes which then leads to the tab locking up.
it eventually comes back if you let it sit.
this issue occurs when using boolean property in "controls" visualization type.
when i select a value, nothing happens.
there is a stacktrace in browser console.
this issue occurs when numerical time-series data is processed using sibling pipeline aggregation, e.g.
for creating a line chart.
a sibling pipeline aggregation consists of two aggregation steps.
to give an example, first aggregation step is to find the maximum value out of all buckets available for a time window defined by time-range picker.
second aggregation step is summing of time series (e.g.
within buckets of the original time series).
a constraint for using sum in order to get comparable and correct results for different time ranges is that the interval aggregating must be constant.
this can be achieved by setting this interval to a constant value.
the bug that setting custom interval achieving a constant value not applied when interval selected by range picker gets larger.
a warning occurs stating that too many buckets are created.
limiting amount buckets leads to incorrect results time-depending aggregations like sum or average as described above.
i have already described the problem in elastic's discussion forum, c.f.
the suggested solution was increase `max_bucket` value something huge.
however, increasing this value by orders magnitude does not solve or mitigate bug.
the amount does not increase.
new layers are appended on every keypress in the layers or style field when adding a wms layer to the maps app.
these layers appear to be otherwise empty.
6.5 data should work in with the 6.7 version of the infra/logging ui.
dragging and dropping and image asset into a workpad seemed to have worked originally.
when i closed, switched spaces and came back to open the same workpad there were errors.
when you create a new visualization, and save it using a special unicode character (i.e.
co) in the name of the visualization, then the visualization can not be searched.
on browser, when i open timepicker on discover app (and some times on dashboard app), the timepicker editor top is hidden by kibana top bar.
i 'm calculating a field against a known value.
in this example i have a number of units that when calculated against 7500, it shows a value of 600%.
when adding another 0 to make it 75,000 (the actual number i need to use) it doesn 't give value at all (it should be 60%).
additionally, i 've changed the format default from number to percentage without any results.
alternatively, i 've also noticed that if you don 't have leading zero when multiplying, the script errors out.
so, what i wonder is if kibana is making the calculation, totaling my result with decimal point but without leading 0. kibana-custom-field phofimage my kibana metric field is selected via "max" aggregation and then the name of field.
no buckets are selected and under options.
in addition, i 've tried all variations under options to try obtain different result with not luck.
kibana-metric-options phofimage if anyone else has ran into this, i 'd love hear how you worked around it.
when you select an element and change the page, the element is still selected when you go back to the original page.
the sidebar is also the workpad sidebar, i think because aeroelastic state is getting out of sync with application's state.
the advanced setting for custom quick ranges is not picked up by the uptime monitoring ui.
it's possible this may be a result of using the new time picker, i'm not sure if it was built to support it.
alert regarding no matching indices has buttons that are the same color as background
the monitor page's status bar component is displaying incorrect `ms`
if you try to search for a saved object that contains a hyphen it doesn 't find it if you use the exact name.
it doesn 't matter if you try and escape it with a ` ` or with `"` around the whole string.
the query that gets to to the _find endpoint of the saved_object_api is same every time.
if user makes one of the maps go full screen and uses the browser back button and opens another map from the listing page - the app retains the full screen mode.
maps app logs a fatal error of cannoy read property of getid sometimes when user tries to add heat map for grid aggregations.
please note i cannot reproduce it consistently.
this is a weird one.
the elasticsearch.hosts environment variable, when set in docker-compose is not overriding default elasticsearch.url declaration (defined in resulting run string: --no-warnings --elastics earch.hosts= \'[" phofurl with this run string, although the elasticsearch.hosts var is passed in correctly, elasticsearch.url is passed in through the yaml, presumably ignoring the above setting.
is this behavior due to kibana checking for elasticsearch.url before elasticsearch.hosts, and therefore not reading the config?
if you add wrong parameters to wms parameters, maps logs errors but in console.
user doesn 't really know what is wrong.
if user clears the value for geospatial field - maps still adds that layer to the ui and then user is stuck without being to able to edit the values or layer for it.
it seems to be like maps is actually using that cleared value
when the legend is on the bottom of a visualization, clicking the color to filter/chnage color doesnt always work.
mostly it flickers and refuses to open, but some it works
when tracking an icmp monitor in heartbeat, the corresponding monitor type does not appear as an option in the filter dropdown.
if the cloud plugin is disabled, the upgrade assistant throws an error and prevents kibana from starting up.
adding documents containing geo_shape linestring to an elasticsearch index.
using the "add layers from an elasticsearch index feature".
on further inspection it appears the error is that the geo_bounds aggregation does not work with geo_shape.
`onchange` is a required prop for `euisearchbar`.
we define a loading state component that looks similar to the actual search bar we use for our app, but we don't define this handler.
as such, a `warning` message is displayed in our plugin's console log.
using firefox, if a small visualization has a legend filter, the filter popup will close automatically.
if the visualization is made larger, the popup stays and the filters can be applied.
it seems to be styling popup incorrectly because you can see x-axis temporarily disappear when legend popup first appears.
this does not happen when you edit visualization because size is large enough.
it works properly in chrome.
seems to have some relation to #29593 phofhyperlink
if user uses the browser back button on a canvas work pad in fullscreen mode - kibana retains the mode for all the other workpads.
also the workpad listing page doesn 't have any navigation menu
kibana crash when mouse over `null` values.
the ilm policy management page in kibana allows one to adjust the number of replicas in the warm and cold phases, through an optional input box (`number of replicas (optional)`) for each of these phases.
the text under the box notes that `by default, the number of replicas remains same.`.
however, once any number is filled in that box, after saving, it is impossible to reset it to default value doing nothing.
instead, clearing box will return setting to previously saved value.
the only workaround is adjust policy through api, or delete and recreate it through ui.
if user sets the time in advanced settings
kibana doesn't start - internal error during optimizing phase: error in module not found: error: can't resolve in ode_attrs_details'
if you have a csv file and there are fields with crlfs in a quote-escaped field, it thinks that the crlf is a new record.
the ccr tab disappears when you click on monitoring jobs tab.
a lot of logs like this one are appearing: phofcode
according to phofurl i can now customize kibana to use the logs ui reading from my ingested data.
i added the following parameters to kibana config: phofcode the log ui screen does not show neither the log message nor the host, container or pod names from my logs: <img width="521" alt="image" src=" phofurl for this case, some of messages in discover use fields i specified on configs: <img width="1157" alt="image" src=" phofurl
when starting kibana 7.0.0-beta1 against es 7.0.0-beta1, kibana issues a warning message
when starting kibana 7.0.0-beta1 against es 7.0.0-beta1, kibana complains that the es server it 's contacting doesn 't have the correct version.
the empty prompt for the uptime ui displays a `0` when there's no data, this should not be happening.
it's likely due to a logic defect in the component that determines what to display here.
when a filter is created based on a scripted field it won't update (probably due to the dsl query remaining static) after this field's script is changed and commited and the view is refreshed.
it will still filter based on the original script.
when adding multiple filters to the filter bar by the kql bar in discover and dashboards, the items disappear.
it looks like there's a content resize when using the filters toggle (see example 2), but it's not in effect upon regular window resize (dragging window smaller).
discover doesn't show a timepicker on ie11 (does show it on chrome and firefox)
the field value filter selector in discover appears to only show a single possible value for cross cluster search index patterns.
selecting "visualize" will show there are multiple values to choose from.
for the new maps app in kibana the data loads but the map images don't.
we may not even support edge browser (it isn't listed on our support matrix page phofurl and another change to improve security is probably going to block edge users completely.
when viewing the grouped index level issues in the upgrade assistant, the pagination is cut off when originally expending the title.
this appears related to height set here: phofurl
on the `gc count` graph that exists on an elasticsearch node page inside stack monitoring, it appears that the metric is either being calculated incorrectly or the metric explanation and label needs to be changed.
what it appears that this metric is describing is the number of garbage collection events which have occurred during a thirty second period.
however, in graph linked below, you 'll see that number is listed as hovering between 0.1 and 0.05 events.
you can 't have a tenth of an event.
:) it does not appear this problem on elasticsearch side as a brief sanity check reveals metric appears to be a counter which increments upward correctly.
when you are trying to change the index pattern and timefield in tsvb - kibana displays two error messages and they are both not formatted.
when data first begins to flow into the stack monitoring application, hovering over graphs can produce a value of `[object object]` in the legend.
csv reports are not printing the timezone set by the user.
kiban left navbar icons disappear when i click my plugin icon.
screenshot from phofimage and they are back again when i click on any of the kibana plugins screenshot from phofimage
if you have a lot of columns and you want to pick things like `time field` in `override settings`, you may not able to pick the field you want as the toaster list doesn't have a scroller.
column numbers aren't ordered correctly, with it showing; column1 column10 column11 .... column19 column2 column20 etc etc
two issues although i haven't seen this first one yet; 1. if you run the upgrade assistant in kibana while doing a rolling upgrade (some nodes at 6.7 and some at 7.0) which node will it get?
will it be consistent if you refresh the page or something else?
1. after you upgrade your elasticsearch to 7.0, when you run the upgrade assistant it shows critical messages about every index!
this is because it's considering the upgrade to 8.0 even though 6.7 kibana ui still says `7.0 upgrade assistant`
within the stack monitoring application, repeatedly selecting an area on a graph to get more granular selections of time eventually produces a 404 error.
this happened to me within 5 sub selections but it seems to vary somewhat.
the kibana grok debugger only tests the pattern against the first line of sample data.
i can put in as many lines of sample data as i want, but only the first one gets tested against the patterns i am testing.
i don't think we can currently aggregate the telementry data on; because they are array type fields.
the filter/color picker overlays are rendered inline and push the chart down
timeout creating index pattern with large(over 1000) field count.
it looks like the index is created as it has a uuid created but none of the fields are populated.
it looks like it timesout after 2 min
when reindexing certain ml indices the migration assistant pauses ml jobs before starting the reindex and resumes them afterwards.
however, in version 7 the pattern used to detect these ml indices doesn't detect them if they were already reindexed prior to upgrading to version 7. so this issue only affects people who decide to get their version
`something went wrong` message displayed in error page when clicking to the left of the `view by` swimlane in the anomaly explorer.
all fields are not visible in the kibana.
for example from 1. from jan 2 2019 to jan 2 2019 --> here totally 19 fields are visible 2. from jan 1 2019 to jan 3 2019 --> here totally 12 fields are visible remaining 7 fields are missing
async chunks that are loaded by webpack are blocked because they do not include the nonce necessary for csp.
we 're setting the global `__webpack_nonce__` variable but that 's not sufficient to use webpack 's csp support.
we need to actually set the nonce in the bundle and include `__webpack_nonce__` variable in bundled file.
in an attempt to work around #30739, i created a field alias pointing to a field containing a dot.
when creating a new elasticsearch documents datasource layer, the ui correctly gave the option to select the alias field as location field.
when trying to view the layer, no data was displayed.
the inspect ui showed right request, and response had right number of hits, but each hit was missing aliased field: phofcode
no results are visible in maps using the elasticsearch documents data source when the location field name contains a dot (`.`)
if user adds global flights sample data from add home screen and deletes that index through index management and re-adds the sample data again - kibana doesn 't handle it.
when user clicks on view data, kibana shows no embeddable factory found for panel type on dashboard
when creating a heatmap based on a date (bucketed as a date histogram) and a classification (bucketed as terms) the grid ends up misaligned.
task manager is logging errors in kibana log on a fresh install of kibana
when i launch functional tests it use `logstash` index.
in a markdown tab some variables are already defined(e.g.
[0] }}`) but it not visible for variables table
an error is returned when hovering over "number of nodes" in pipeline monitoring.
- a task instance can stay in `state: running` forever - task manager continuously logs a warning about a task that can not be cancelled.
example: `log [warning][task_manager] the task maps_telemetry "maps-maps_telemetry" is not cancellable.`
exported visualization with referenced saved search, could not be imported in another space, silent error.
no way of saving the edited dsl
monitoring > elasticsearch > indices > "any_index" shows nothing under the "shard legend".
more specifically, it only shows the legend, it no longer shows the location and state of the index 's shards.
in visual builder, i setted date's offet to '1d' or '2d', but tooltip's date is not updated (graphs are shown properly)
i have found a few places (rollup jobs, and ilm) where the links to documentation are broken and result in a 404. see screenshots below.
an error occurred on an idle page of canvas workpad
while in a mixed version upgrade scenario (elasticsearch is upgraded from 6.7 to 7.0 but kibana is still at 6.7) i tried to add one of the sample data sets.
but i think i might have tried it before kibana realized the elasticsearch node was at 7.0.0 and turned the elasticsearch plugin status red (see phofurl
kibana status page shows this message; this version of kibana requires elasticsearch v6.7.0-snapshot on all nodes.
i found the following incompatible nodes in your cluster: v7.0.0 @
after running through the kibana plugin development setup guide: phofurl the command `yarn test:server` command fails with saying that is missing.
adding a filter on a field of datatype `long` via the loupe, then editing it leads to an exception.
coordinate map visualisations can use a custom wms server.
when the "wms attribution" for a custom wms server is changed, the new attribution is appended to the existing attribution in the map.
the existing attribution should be replaced with new attribution.
kibana 6.5.4 was running without any issue.
updated elasticsearch and kibana to 6.6.0. when accessing kibana at phofurl (or behind nginx reverse proxy), i have the `kibana did not load properly.
check the server output for more information` message.
the browser console shows phofcode logs at startup are: phofcode logs when trying to access kibana are here phofhyperlink .
when i set the interval to monthly or yearly on a date histogram (vertical bar) visualization, the x-axis seems to ignore limits set in the timepicker and the labels behave erratically (labels don 't respect "filter labels" option, labels repeat if not enough buckets are present).
took suggestion to post it as an issue as per: phofurl phofhyperlink
the notifications section under advanced settings recommends setting the notification lifetime to "infinity" to disable notifications.
however, the text box only accepts numeric entries.
at least one of the errors output by the panel_error.tsx phofhyperlink file outputs a raw markdown-style link.
<img width="361" alt="screen shot at 11 21 40 am" src=" phofurl
getting errors on some visualizations on beats dashboard
when a date field on an index pattern is set to "relative date", csv exports fail with `typeerror: fieldformat is not a constructor`.
the waffle map and table switcher is rendered on top of the filter autocompletion suggestions: image phofimage
error loading dashboard in non-default space
when starting kibana before elasticsearch, the task_manager produces an phofcode
when creating a new region map visualization, the "vector map" select box changes from "world countries" to blank after a couple of seconds.
the same thing happens to the "layers" select box under "base layer settings"
long data cannot be scrolled
creating ml jobs from integration context menu for the same service fails for different transaction types.
creation of second ml job fails with message: > your current license may not allow for creating machine learning jobs, or this job may already exist.
using any text field (to search or filter) generates the following error as soon as the first char is written: phofcode figured out that it happens only when `polyglot safari extension` phofhyperlink is enabled.
but this behavior happens only with kibana, i'm using `polyglot` since several months.
i can't say if the extension or if kibana is doing wrong.
but since it happens only with kibana in my case, i open a bug report here.
visualizing rollup index patterns from rollup jobs configured with date histogram that has any other timezone than `utc` results in an error like: `field [utc_time] in [range] query was found in rollup indices, but requested timezone is not compatible.
when i add sample data "sample ecommerce orders" and open canvas "[ecommerce] revenue tracking" then is canvas loaded without metrics, but error message contains: whoops!
expression failed expression failed with the message: phofcode elasticsearch sql query is phofcode and it works well <img width="1062" alt="snimek obrazovky v 14 42 10" src=" phofurl
using the field formatter, i set a field to be a truncated string.
setting a value of "1.2" caused _full_ truncation - the only value to appear in the data-table was "..." originally this was mentioned here: phofurl i was asked to create a separate issue for this problem.
when the user clicks on the x for removing the grouping in the infra ui.
instead of removing grouping it expands contextual menu.
the user can then unselect grouping in contextual menu as a work around.
the metricbeat golang dashboard is throwing an internal error, i don't have it configured but seems like it should handle that and show no results instead.
having on-premise kubernetes cluster (v.1.12.3) instantiated with kubeadm.
1. infra ui doesn 't show master nodes in "hosts" screen, only worker nodes 2. looking in kubernetes metrics on each node - cpu/memory/pod capacity shown only for node where metricbeat installed, other nodes shown zero capacity.
disk capacity shown correctly on all nodes.
if you change a config setting, install a plugin, or do anything that causes the optimizer to run, the following message shows up: > browserslist: caniuse-lite is outdated.
please run next command `npm update caniuse-lite browserslist` users can't (and shouldn't) do anything about it, we just need to upgrade these packages.
sometimes when trying to save a new map that has been zoomed-in it throws a typeerror.
it appears to save the map, so not sure there is impact to functionality, could be just a web browser console error.
i have only seen so far on firefox.
i noticed that the heartbeat dashboard for the visualization 'http monitors status' does not show 'down' servers because of the settings of the visualization.
since all other related visualizations in that dashboard do show 'down' servers maybe this one should also?
currently split slices is set to terms aggregation on field but this sub aggregation only allows missing values on strings and response status code is an integer.
would it be better to use histogram ?
mouse selection on the pipeline table throws an uncaught error
changing the date range in monitoring is throwing an invariant violation error i
on initial page load, anomaly explorer swimlanes are both blank until resize/reload, or other action
creating the index pattern by rollup index is not working.
when you chose a stacked line graph, the line for one of the terms is drawn correctly, while the other is drawn incorrectly as 100%.
usability issue: after deleting a saved object, the user is shown a confirmation dialog which displays the object id, but does not display the human-readable object name.
for the development of plugins, all yarn commands starting with plugin-helpers failed under the plugin folder e.g.
it is neither linked under the global node executable path e.g.
building a filter on a `text` field generates a deprecated `match` query that specifies `"type": "phrase"`
`run watch every` field in is misplaced
went into kibana -> management -> advanced and changed by timezone from browser to utc.
subsequently a number of visualizations failed with a 'error in visualization, format.getconverterfor is not a function' popups.
closing the tab containing kibana and reloading it seems to have fixed the problem.
any xpack keys in the corresponding yml config files will throw an error causing the site to not run.
border thickness is inconsistent between chrome/firefox/safari and ie11.
note: it looks like ie11 doesn't support which is supported in svg 1.2, but ie11 only supports svg 1.1 (see phofurl
when holding down `shift` and clicking to select multiple elements, the screen highlights all text on the page when clicking on an element.
can we disable select complete while in edit mode?
within a few minutes of switching between sample data canvas workpads ie11 locks up for me.
i typically don't see any browser console errors or errors in the kibana log.
and when it locks up, other browsers can still go through the same canvas workpads.
so it doesn't seem to impact the kibana server.
just a bad experience for anyone stuck using ie11.
cannot use large integers as static value, eg comes up with the error: invalid int constant if you want a long constant then change it to however cannot enter the l as the static value field is `type=number`.
using the browser developer tools to change type to `type=text` is a hacky work around, you can then enter l, and static value displays correctly
enabling should prevent visualizations on a dashboard from being filtered if the index pattern they 're based on does not contained the filtered field.
this isn 't happening, even with the setting enabled all visualizations are getting filtered.
if user hovers over text that too small to display on visualizations, the graph of kibana flickers.
also the option to select the slice to give it another color or to exclude/include, is gone
this is probably related to phofurl i'm getting the same time_filter error: phofcode undo/redo seems to be setting and clearing filters.
the error appears when the interpreter is trying to run an empty expression and expects a filter expression.
the error pops up every other step back/forward.
refreshing while in the error state will not resolve the error, but navigating back/forward may return it to a working state.
we need track down why filter is getting cleared.
undo/redo shouldn't be clearing filter.
when opening a workpad in canvas, the "updated" time is also modified, so you lose track of when the last *real change* was made.
on management > reporting, each report now has an info `i` icon which opens a side panel with info about the reporting job.
i think this is new in 6.6. on ie11, every row has the subject on one row and the value is wrapped around to the next row.
ie11: image phofimage chrome looks correct: image phofimage
using ie 11 i can't select the index pattern when creating a new input control.
in this gif, i try clicking on several different index patterns but they don't get selected.
then i put focus in the control label input field, tab to the index pattern field, and do the selection successfully with keyboard.
the following paths have wrong user/group because are overwritten by the spec file itself in the post section /var/lib/kibana phofcode
with an active kibana session and after changing account credentials in ldap backend, basic auth comes up in the kibana webinterface, instead of the expected kibana login interface.
i don 't know if there is a ldap sync or something similar, to be sure the old credentials are not cached, wait 24h after changing the password in backend.
maybe someone knows correct behavior or can give a link to code/ documentation.
i 'm just using ldap auth.
maybe someone can check if ad auth is also affected.
<details> <summary>ldap config:</summary> phofcode </details>
infra structure flicker when group by mahcien type
nginx section should show up if the nginx data is available for a node.
the kibana server doesn 't properly apply the deprecation transformations defined by x-pack plugins when determining the unused config keys, leading to an erroneous server crash.
auto-follow silently refuses to follow the leader if the leader does not have
when adding a remote cluster in the new ui, if you give port 9200 for the remote cluster, it fails.
there is no error message explaining why it failed to add the remote cluster.
there is also no explanatory text in the ui telling you to use transport port 9300 instead of http port 9200. this is a confusing process for user.
kibana "clusters / <<cluster_name>> / elasticsearch / indices / <<index_name>>" graph "disk (mb)" "store (primaries)" toggle 'ing does not work.
sometimes the infrastructure ui components (waffle map view) continuously resize at high rates..see video.
i can stop it by changing my zoom size but to what depends on what's on the screen.
meaning the zoom level i have to go to up or down depends on what is currently being displayed on the screen.
- average sales price under visualize - when you click on the side menu a event.datum is undefined error.
when attempting to enroll a beat while running the basic license, the error message returned contains `[object object] in it.
when creating a filter on a boolean scripted field matching the value `false` the filter pill displays the full script instead of a human readable display name.
the problem is that we 're returning `params.value` here phofhyperlink which incorrectly tells the phrase mapper that this is not a scripted field.
at moment i 'm not sure why we 're returning `params.value` so we need to look into that bit before we 'll know what appropriate fix is.
when placed in a dashboard vega visualizations ignore the filters that were defined, when the visualization was created.
the agent marks shown on the transaction waterfall should all have the same units as the unit used for the transaction.
currently some marks could have a different unit in tooltip.
in following screenshot `timetofirstbyte` is in microsecond while reset of waterfall is in milliseconds.
the layer panel in the maps plugin does not scroll when using firefox.
logged events that occurred in local timezone after utc appear in logs ui as though they occurred on (note year).
i have a follower index on my cluster.
when the leader cluster stops, the gui on the local kibana stops showing the ccr screens
you create a short url except for default space and share as a perment link but this link doesn't work well.
by the way, it works well if you create a short url in default space.
for every angular based page in ml, we replace `window.promise` with `$q`, this allows us to share `promise` based util functions between angular and react code without needing to explicitly call `$applyasync` when a resolving promise has to update the page.
this happens in a resolver, added to the routing stage of each page, and so happens before the page has fully loaded.
a recent change in core kibana undoes this change, reverting `promise` back a non-angular version after these resolvers have been run.
phofurl this causes angular based pages not update correctly when actions are performed or data has been loaded via a `promise`
this is really an "across the board" set of things that keep happening with two of our canvas demos in the sa demo environment.
general performance issues, errors, 404 's, websocket retries, slow/not loading workpads-- even just getting the _list_ of workpads.
the issues of things not loading _at all_ is intermittent, but the slowness persists - in middle writing this ticket it started working again, then started failing again (failing, meaning it never finished loading workpad or list workpads).
i have tried several different workpads.
often, just "canvas is loading" thing shows up, or it gets stuck on a workpad with clocks and never finishes loading.
as i was typing this, it started working, then got back into another stall: image phofimage
the 2 magnifying glasses used to toggle filters on legend items in area/bar/line charts are missing from the ui.
the buttons are still there on other types of charts, just missing from this one.
searching with a daily index pattern over multiple days time range, results with missing visualization gaps, data, and errors in console.
the response keys(timestamp) are in desc order, thus nextdatum can be lower than current datum.
datumwidth should provide an absolute value for width.
when posting to `/api/canvas/workpad`, the response is always 200, because the error handler resolves instead of rejecting.
reporting fails and logs `caught error spawning chromium`.
while investigating phofurl i had slightly different results.
when opening/hiding the labels on a visualization an _msearch request for the visualization occurs.
this request doesn't match the time range for the other visualizations on dashboard so it's now out of sync from rest of dashboard.
it really doesn't need to make this request in first place as it already knows all data it displayed
kibana will not load - goes straight to error page (screenshot shown below).
if malformed json exists in a manifest.json file for a module, then all modules will fail to load.
on kibana watcher ui, when i edit a watcher and go to "simulate" tab, a "ignore condition (condition is always true)" label is missing is "condition overrides"
when a user is authorized to write in a kibana space, he can write in other spaces, using dev tools.
that is a big security problem.
creating a simple tsvb visualization doesn't work anymore.
the attached error appear on the console.
the visualization cannot be created from scratch.
only starting from a saved visualization will work.
the dropdowns are behaving weird on ie, when trying to select anything from them.
no selection can be made and the list seems to move around the screen.
one of the options when defining index aliases in an index template uses the `{index}` placeholder, allowing for creating specific aliases for each index.
ex: for index `test`, the `{index}-alias` would get you the `test-alias` index as an alias.
if you specify alias as `{index}-alias` when assigning a lifecycle policy to an template, it will normalize value and use it as a string, hence it will fail when trying to rollover.
the current index name allows you to enter "?"
the policy name is allowed when saving (as opposed to starting underscores and spaces) and works fine in the index policy table.
but if you assign that specific policy to an index and then click on the "view indices linked to the policy" it will throw an error redirect you a blank screen in the index management page.
vega visualizations are broken in web logs sample data dashboard.
the loading screen seems to have a blurry font.
gis app not working, if kibana runs behind proxy.
i created a role - have it all cluster privileges and all on logstash index and all access to space b( non-default space) when i login with that user - my expectation is that user will be able to manage that index through index management.
but kibana gives me index not found exception this is our doc link: phofurl
when converting from a string to a number, it simply passes the string through number phofhyperlink .
this mostly works, except when the resulting value is `nan`, in which case it just returns `nan`, which is a number, but isn 't valid.
when you setup a multi-metric gauge you cannot have the gauges running vertical, only horizontal.
if user creates a map and unchecks
once the user uploads the beats dashboards - kibana doesn't save them automatically.
when user tries to print a report - kibana asks the user to save the dashboard.
after a watch has been executed once, it seems that the state icon in watcher ui remains in firing state forever.
if you cancel the action of adding a tms layer, it will crash kibana client.
when clicking the color picker to select a static color for fill or line of a point layer the color picker will shows at the bottom of the page, partially hidden.
since 6.6 got workpad-level styles, when loading a workpad created before 6.6, the styles don't exist and it causes canvas to crash kibana when loading the page manager.
the easiest way to see this is with workpads provided by sample data.
in the console, you will see the following error: phofcode the issue, i believe, is that `workpadcss` value passed to `style.it` is undefined, because in container it's just pulling that property off workpad object in state, which didn't exist before 6.6.
after creating a plugin with the plugin generator, any files that are renamed to .ts/.tsx will fail to resolve modules from parent kibana directory, e.g: /some/folder/kibana
on the dashboard, if there are any _msearch requests in flight and the visualization hasn't loaded for any reason; if the window/visualizations are resized, the _msearch requests are retried.
similarly, if an _msearch request times out and error message is dismissed, all inflight _msearch requests will be retried.
plugin generator is not working.yarn bootstrap on the custom plugin folder fails.
i'm hitting `filename too long` errors (typically when using the backport utility) on these files; phofcode
when moving elements, we round their positional values so that we only deal with integers.
with the grouping added in phofurl the resulting positions are being stored as floating point values again, which can cause weird rendering side effects.
intermittent issue when test automation is trying to create an index pattern.
can tell about where it 's at from this logging; phofcode
i followed following instructions to setup metricbeat phofurl under infrastructure section, boxes are not showing pod name.
if i hover the box, i'm getting the name of a pod.
please check more details on : phofurl
when narrowing down the screen size to less than 768px, the inspector data table shows too much whitespaces.
seems caused by the filters buttons that on narrow screens are wrapped vertically adding too much space.
typo in the confirmation box - after the remote cluster has been deleted.
when loading canvas (or kibana in general, thanks to #27175) and the socket is started, there 's a lone 400 response related to a "tags" registry.
not sure if this was introduced as part of #26068 or if the issue existed before it.
i also couldn 't tell at a quick glance why it 's trying to load tags.
the dev tools ide will shows me code snippets from sessions of other users
control options are not updating with latest values when a new document is indexed.
the visualization in phofurl fails to be rendered (the visualization states version `v3` for the schema, changing it to `v2` so kibana accepts it fails as well).
in the online linked demo, it works fine as `v2` as well.
in kibana, it does not show any visualization and instead the message `it should never reach here`.
if we change that visualization and remove the initial `bar` mark, works.
when the optimizer is run on a previously cleaned repo it runs twice for some reason
if user is in a space other than default space - canvas page says loading and is not accessible for the user to do anything else.
user cannot create or view visualizations of she is in any other space than default.
the actions work fine in default space.
clicking in the a heatmap visualization to apply filter nothing happens and a javascript error is thrown
the `index management` breadcrumb from the same page points to while the page actually is:
an error is displayed when opening the history in the kibana dev tools.
moving the mouse over the list doesn 't provide any visible feedback of hovered item.
error page : "something went wrong"
some of our users reported that if they have blocked third party cookie and site data, the dashboard/visualization embedded via iframe would show such error message: > version: 6.3.2 > build: 17307 > error: uncaught securityerror: failed to read the 'sessionstorage ' property from 'window ': access is denied for this document.
a user with kibana_user role and roles that allow reading test data (including read_cross_cluster) gets an error when they click the `create index pattern` button that says "failed to load remote clusters".
image phofimage the browser console shows a 403 returned from this request ` phofurl
when i create a horizontal bar chart using filters as the x-axis aggregation and then add a split series aggregation, all empty buckets disappear.
this is potentially a duplicate of phofurl but it seemed different enough to be worth reporting.
creating a scripted field for an index that contains a for loop causes a null pointer exception when used for filtering.
the `other_bucket_key` isn 't creating another bucket in kibana.
error appears on the canvas workpads that ship with these sample datasets
i 'm noting that rendercomplete seems to fire far too frequently for discover saved searches.
it seems to fire as each row is rendered, rather than when rendering completes.
create index pattern button and list does not display when trial is expired.
kibana tsvb doesnt obey min y-axis scale when using log scale.
the axis alwas starts from 0
if you delete `.kibana*` while kibana is running, kibana will create a new `.kibana` index and place the `config:6.5.2` document into this index.
the `space:default` document is never recreated, which will then return a 400 when you try to visit timelion, canvas, machine learning, infrastructure, logs, apm, graph, or monitoring.
these pages seem to try to load the base domain (` phofurl discover, visualize, dashboard, dev tools, and management are not impacted, as they seem to load the domain + uri (ex.
` phofurl you must restart .kibana fix this issue (or manually create the `space:default` document)
the socket is failing for the following error: `typeerror: cannot read property 'emit' of null` it seems to happen when the socket connection dies and reconnects.
the error is coming from kbn-interpreter phofhyperlink .
i think it just needs to tear down the error listeners once the connect event happens.
users without direct access to the `.kibana` index do not see the custom reporting logo.
instead, these users are falling back to the default reporting logo.
root cause: we retrieve the custom logo using ui settings service, which requires an instance of saved objects client.
when constructing saved objects client, security wrapper checks to see if rbac authorization mode should be used, or if legacy authorization mode should be used.
this check relies on auth mode being initialized.
since "request" used to retrieve custom logo is fake phofhyperlink , it never has a chance initialize, so authorization mode is always set legacy phofhyperlink .
since user does not have direct access `.kibana` index, legacy auth fails when we try retrieve custom logo.
in the dev tools tab, after kicking off a _search query, the chrome tab hangs.
i updated my server with the new rpm package from version 6.3.0 to 6.5.1. no error occured through to this point, but when i start the kibana server it goes to the optimize-point, aftter them there are many lines that getconnections has been called (for around 3 minutes).
when i try to open kibana in browser it says me that is not ready yet or it shows me a blank page.
when going to monitoring -> logstash nodes, the top bar which is supposed to summarize the basic stats like number of nodes, memory usage, events received and emitted is not being displayed correctly.
this happens only for logstash, and only after we've upgraded from elastic stack 6.4.2 to 6.5.1 see attached screenshot of how logstash node monitoring page looks, and compared to the elasticsearch nodes page.
group other values in separate bucket is an option on region maps.
but it doesn 't work.
kibana doesn 't know what to do when user selects it and displays
incorrect authorization header passed to elasticsearch for some requests.
when navigating in the dashboard through ie11 i got this fatal error: not enough storage is available to complete this operation.
( phofurl version: 6.1.4 build: 16380
if i define a canvas, with a time filter based on another field than "@timestamp", then filter does not work : no data is never retrieved and displayed.
in the management of rollup job we see a job that is currently `indexing` the drop down in both the job details (after clicking it) and in the dropdown once selecting the checkbox offers `delete job` (which throws 500) but not `stop job` which is needed first.
creating shorten url in kibana does not seem to work.
i created a dashboard named `tomo` for testing.
the same for curl works on the other hand.
use the mouse to select a time range on discover tab
page preview/selector only shows the first page
when monitoring has not been enabled and a user who doesn 't have the privileges to enable navigates to the monitoring page, they get some errors and message "we couldn 't activate monitoring".
but the user didn 't even try to activate it.
`this is essentially a cosmetic issue` it does tell the user they don 't have privs and which ones they would need.
it 's just a bit ugly and slightly wrong message.
an improvement would be to have "enable monitoring" button disabled if they don 't have required privs a message telling them what privs need.
as reported by @bvader, the apm ui onboarding guide does not correctly detect whether an agent has connected successfully - just a server connection satisfies the check.
this is because we added phofurl and never told anyone.
`/api/status` redirect does not respect base path
* kibana fails to start correctly after upgrading, claiming "unable to fetch data from kql collector" * we have several kibana nodes, each with a different `kibana.index` directive, for multi-tenancy.
* nodes exhibiting the problem seem to be attempting to read even though the `kibana.index` directive in kibana.yml is (e.g.,) `.kibana-tenant4`
date histogram visuals do not work without editing after upgrading from 6.1.2 to 6.3.4 with error: request to elasticsearch failed: or negative time interval not supported},
the in app documentation for tinymath points to the dead old canvas site, which now redirects to an unrelated guide page.
we observed it with @timroes but then we couldn't reproduce, have to look into it, likely to do with the z-order of elements
visualization mouse-over highlights on split series don 't work for blank values.
rather than highlighting bar segments related to a blank value nothing gets highlighted,
i am unable to run yarn kbn bootstrap on windows
when trying to create a pie chart or donut chart (didn 't test all), and using a field name that contains a dot for the slicing, it generates a single `undefined` slice.
post installation the kibana systemd file(s) being updated in-place require a post install via rpm / other to trigger a systemd daemon-reload before start/restart.
if an expanded aggregation in the visualization editor is dragged, the dragging position is offset from the cursor position
the error symbol next to the "apply changes" button in the viz editor which pops up if there are errors in the configuration is clickable even though it has no (visible) function
-on the saved objects screen, objects having the same name and underlying id will be selected together.
-normally objects would not have the same underlying id.
however customers may clone objects in large numbers and may impose their own naming conventions which may result in the objects having same underlying id.
when trying to use an index alias that points to two indices that have a field that has the same name but different mappings as data source for a canvas visualization, canvas refuses to show anything and instead just displays this error: grafik phofimage this was not the case in previous versions of canvas (e.g.
it does not matter which fields we query, the error also persists if we do not query the conflicted fields.
also, since 6.5.0 visualizations in canvas fail when a field is queried that does not yet exist in index.
i think it would make more sense to display visualization just without data from existing field, which my knowledge was also way handled this previously.
when field names begin with $, using them in a filter with 'is ' causes an error.
the new visualization selector has an overflow that makes it look wrong.
when using filebeat and kafka output, monitoring shows the "events rates" but doesn 't show "output bytes".
also, the "throughput (/s)" is not incremented in the beat overview as well.
when metricbeat dashboard is loaded the disk io(bytes) is showing a java error.
our dashboard with a pie vizualisation and a heatmap visualisation is throwing errors when clicking the visualistions to apply filters.
i have been demoing infrastructure ui with a simple app (mysql, python, nginx) deployed on google kubernetes engine.
i typically scale the nginx pods up to demonstrate that we monitor the new pods through auto-discovery.
on several occasions, i've noticed old pods that are no longer running, appear in the infrastructure ui kubernetes view while in auto-refresh mode.
when i query the index for old pods in current time period they do not show up.
when i expend time period to say, 30 days, documents are there.
short permalink urls generated from spaces don 't work correctly.
interval scaling warning does not show on pipeline agg metrics since 6.4
if you create a table vis with a metric that 's a sibling pipeline aggregation, include multiple bucket aggregations, and then have metrics calculated at each level (by clicking showpartialrows or showmetricsatalllevels), you will see an es error `buckets_path aggregation does not exist for aggregation...` i 've been able to reproduce this all the way back to 5.6.13 (i stopped there but suspect it existed earlier).
kapture at 14 41 50 phofimage
into my ece deployment with last 6.5.1 version of the stack, i created a dashboards with 3 different visualizations and one of them was a split gauge.
when i tried to create a pdf report, the gauge visualziation 2 chart was cut off from the report.
currently, if we run a 6.5.0 cluster, we will see a series of warning messages on the elasticsearch logs, i.e.
in the below page, hyperlink for `source code` is broken.
the 'view metrics' of docker contaiers with the same name, but on different hosts, always shows the same.
the url also seems to be the same.
if the grouping per host is not active, containers show up only once, not as many as there are on different hosts.
the use profile link in the user popdown in the k7 header does not work with basepath image phofimage
clicking on elements displays something went wrong fatal error on canvas
if you switch to full screen mode in canvas in ie - work pad gets displayed aligned towards bottom left of the browser.
links with _g parameter for timepicker are not getting right in markdown
it takes more than 3 minutes to load the page.
installing kibana plugins in docker cloud fails i guess i can tell nodejs in the container to limit it 's heap?
this just started happening with 6.5 though?
the viewport for workpads scrolls out of view in ie when the toolbar at the bottom is open.
in the management console, saved objects, when filtering for names with special characters ("dirias") the screen seems to crash, it doesn 't show the items (though they do exist) and it not even the visual components (an empty grid, search box and buttons for trying again).
this doesn 't happen in other similar screens (visualizations, for example).
when i go to advanced settings in management i see
i 'm trying to import a dashboard (including saved objects) via the api as documented here: phofurl this however fails, following error is returned: "bad request", "message": " "value " must be an object", "statuscode": 400
in kibana 6.5.0, the "run multiple api calls when selected" functionality is broken, and was working in 6.4.x
the `kibana` user, who has `kibana_system` role doesn 't have the privileges to do some steps required in the upgrade process.
on cloud instances that were upgraded to 6.5, timelion functions on canvas don't work
kibana not starting if reporting plugin is disabled
there are various functional test cases which are failing while running kibana rt 6.4.2 and their failure reason is "error: expected <value1> to equal <value2>"
there are various functional test cases which are failing while running kibana rt 6.4.2 and all of them having reason as button not clickable at particular point
space privileges not working, users can still login to space they don't have permissions.
i would consider it a critical bug, if you released this feature already.
searching the empty value: ``""`` for a field by clicking the "filter for value" icon beside the value.
bar chart sorting of the x-axis is incorrect when using both "x-axis" and "split series" bucket options at the same time.
related to phofurl and phofurl there is a new manage_follow_index index-level privilege for cross-cluster replication in 6.5. it doesn't appear in the kibana role management ui yet.
i have an apm transaction with the name "get /".
in the timeline, it shows up as "/ get".
meanwhile, the transaction details show the correct name.
when installing kibana-oss from using `apt install kibana-oss`, version 6.3.0 is installed.
as described in the documentation phofhyperlink , version 6.4.3 is available.
per phofurl there are new read_ccr and manage_ccr cluster privileges.
i can successfully add those privileges to a role in the console in kibana, but i don't see them in the drop-down in the management > roles ui:
a new visualization shows timestamps in my local browser timezone instead of the utc dateformat:tz setting.
but if i refresh the visualization it corrects itself to show the utc timestamps.
while it 's showing the wrong timestamps, i can look at request sent to elasticsearch and it correctly shows utc.
the responses from elasticsearch appear to show utc times.
get index/_search does not apply pretty format automatically in kibana dev tools when data uses trailing
i am getting a timeout error on report generation: unable to generate report timeouterror: waiting for selector ".application" failed: timeout 30000ms exceeded is there a way to increase the time out ?
when using an image repeat with an sql count parameter, there are way too many dynamic choices to select in the "measure" dropdown
the input controls panel is not responsive on small screens.
the dashboard panel borders are overlapping on control elements.
user cannot create role if she adds and deletes space while creating it.
kibana displays application privilege error.
please note i cannot reproduce this with consistent steps
i 'm using elasticsearch and kibana in v6.4.3 and i 'm testing to migrate to v6.5.0.
when i start kibana for the fist time un v6.5.0 i stop the process during the migration and i have an empty browser page for kibana
we let users go to advanced settings and enter without any indication that it 's deprecated, and then we log (only after it 's used?)
that it 's deprecated in the the kibana log file.
seems we should tell the user the setting is deprecated before they set it.
when creating a rollup job, if the metric fields are long (as in the case of metricbeat) the gui clip them using ellipsis.
there is no tooltip on the table cell and no way to expand column width by dragging.
as a result user can't tell which field metrics to select are for
kibana is unable to access to ssl files from configuration when files are symlinks
when switching from the dashboard to a visualize (only when in visualize you previously edited/created a visualization) there is a small flash of unstyled content of the dashboard.
navigating directly to management prevents the beats section from rendering until the page is re-rendered somehow without reloading the page, like by navigating to discover and back to management
after enabling reporting in kibana.yml file, the reporting option shows up in discover tab, but the dashboard tab does not have the reporting option.
when uploading an image using the sidebar ui, the following shows in the console: screenshot 14 42 38 phofimage the first error we might be able to ignore, but the second one: phofcode that 's going to crash kibana, as warning points out.
infra ui needs to display access denied message if an user without access permissions logs in and tries to access the ui.
current implementation makes it look like user can set up and use infraops logs.
if user adds non valid characters while creating the rollup index - kibana warns only at the final stage.
which means user needs to navigate back multiple screens to change it.
when loading the `[flights] global flight dashboard` demo dashboard, the first change on the input control range slider will display a warning/error message on the console: phofcode the problem seems related to fact that inputrange components configure min and max values rounding but to nearest fraction (ceil or floor).
on my dashbaord, for example these are values: `max: min: they are rounded on inputrange to: `min: 101, max: 999` <img width="432" alt="screen shot at 10 31 57" src=" phofurl when i move range slider, slider values are configured with a different rounding: `{min: 100, max: 130}` where max is value of current handle of range slider, and min is minor than actual min value.
kibana is configured to support both authentication methods: saml and basic phofcode always redirects to saml idp even if a user explicitly goes to `/login` page.
shorten api generated url yields an "unable to parse url" error in kibana
why vega view container with hidden scrollbar
when exporting deep data to csv, like phofcode where the columns id and names are selected, the exported csv turns out empty with just headers.
on a line visualization, if you graph more than one metric and split series on a term, dots get black (or sometimes a completely different color) instead of the line color.
this can be accentuated by adding a dot size metric.
when my local cluster doesn't have indices (except for system indices) but i do have a remote cluster defined for ccs, i can't define an index pattern
dates selected on an multi-selection option list are shown in milisencods.
this makes impossible to know wich date you selected.
when doing a csv report of the web log data, i get errors.
if user deletes saved objects from a page on saved objects ui - kibana keeps the user in the same empty page.
kibana needs to navigate the user to the next page with contents.
when changing the "color schema" for markers on the tilemap, it often (though not always) will result in all the markers disappearing and a single marker the size of entire map showing up.
also, i believe "color schema" should be "color scheme"
- similar and possibly more general than phofurl
when landing on the ccr monitoring page directly (by going to or refreshing while on the page), the `jobs` link in the menu under breadcrumbs is not listed.
/cc @joegallo the issue can be reproduced regardless of whether kibana is hosted on-prem or in elastic cloud.
import workpad diaglog box is getting announced as choose file button in screenreader.
this doesn 't give context to non-sighted user.
if you have sample data in multiple spaces and remove it from one of the spaces - the es indexpattern gets removed from all of kibana.
so the sample dashboards in other space show up without displaying data.
in management, deleting scripted field results in `something went wrong` page.
the field is deleted though.
timelion data show the value of the following hour/date/week... if the corresponding interval is 1h/1d/1w...
it's not necessarily a bug, but there is a long bar on top of the tray that blocks some of the sidebar content.
the only interactive part of this element is the down arrow icon, the rest of containing bar is just taking up space.
i created a hidden plugin (there is no icon in the left navbar).
but i can 't access a ui route.
when i put this url in browser phofurl i get app alert"} though, see my app server log among kibana logs server log [info][alert] starting... and the ui route is accessible if `hidden: false` in
if you have date histogram where date is scripted field, visualization fails when you try to select date range twice.
my company has a lot of old urls that reference pre-uuid index patterns, e.g.
phofurl that no longer work in the latest versions of kibana.
in fairness we jumped from version 4 to version 6, but i think it would be reasonable to expect something like this not to break.
i would have expected the code in this case to first do a lookup on index pattern uuid, and then fallback comparing index pattern name, but the current code does not do that.
it is debatable whether this is truly a bug or a feature request (to improve backwards compatibility), so feel free reclassify if you see fit.
visualization "cpu usage by node" from default dashboard "[metricbeat kubernetes]" is not correct.
seeing call stack error + d3 error when multiple cells are clicked in a row in anomaly explorer: screen shot at 1 14 49 pm phofimage
when in the dashboard, selecting a map visualization and trying to see the request body, it overrides other visualizations in the dashboard.
the date picker in the time filter bounces up and down as you change months.
when using visual builder under visualize tab i receive a flash error when trying to calculate a percentile of a math equation that i have composed.
the position of the labels on gauge charts is cut off in safari (see screenshot below)
the query behavior and functionality changes when searching all fields, compared to searching one specific field when using kql.
full screen mode of canvas renders with an initially misaligned (right-shifted), partly visible page.
it might be a safari css bug (see comments on the bottom)
when creating a vega visualization, the following error appear on the console: phofcode if i remember correctly, the vis object for a vega visualization doesn't have any `indexpatterns` object on it.
when creating a horizontal bar chart, the label for the "other" bucket does not appear in the final result
when using safari for canvas, fullscreen mode isn 't adjusted right design mode: image phofimage when in fullscreen mode (hit the little `[ ]` at the top of canvas): image phofimage
when on the discover page, clicking the search button, works as expected, the top pink status bar animates and the search is submitted.
under dashboard page this does not work.
only if query is entered search bar.
further more subsequent clicks do not work unless query is updated.
the alert for license expiry usually says this (possibly not 100% accurate): `this cluster's license is going to expire in 9days 22 mintutes at november 3rd (...)` after applying the new license to the cluster, the alert is shown as resolved but now says: `this cluster's license is going to expire in at
this is probably two separate bugs, but i 'm not sure.
when in the "saved objects" section of the management app, if you select a single saved object type it fails to request objects from elasticsearch and also does not show an error.
unable to create canvas element that uses elasticsearch data source.
fatal error is thrown when switching between home page, sample data page, and home page
trying to select index names (for copy paste purposes) doesn't work in firefox on the index management page.
selecting index names does work fine in safari, leading me to suspect this isn't intended behavior.
elements using raw documents datasource don't list all columns
doesn 't seem to impact rendering as element size is zero anyway, merely a console warning is issued.
this error message printed in the console: error [fatal][root] typeerror: class extends value undefined is not a constructor or null at object.<anonymous> at module._compile (module.js:652:30) at loader ode.js:144:5) at function) [as .js] ode.js:154:7) module.load (module.js:565:32) trymoduleload (module.js:505:12) function.module._load (module.js:497:3) module.require (module.js:596:17) require object.<anonymous> module._compile (module.js:652:30) loader ode.js:144:5) function) [as .js] ode.js:154:7) module.load (module.js:565:32) trymoduleload (module.js:505:12) function.module._load (module.js:497:3) module.require (module.js:596:17) require object.<anonymous> module._compile (module.js:652:30) loader ode.js:144:5) function) [as .js] ode.js:154:7) fatal typeerror: class extends value undefined is not a constructor or null
if the page zoom is 80% and only one job is selected, then the actions cog icon scrolls to next line.
this made is surprisingly difficult to find.
image phofimage if more than one job is selected, then the "view single series" icon not shown and there no wrap.
if zoom >80% then no wrap.
on the config tab, the link to the configuration (for example, output) drops me in the add data page.
on firefox quantum, the drop-down lists for beat type and platform are blank.
the text appears as expected on chrome.
when metricbeat dashboard is loaded the network traffic is showing a java error.
the existing functional tests do not run on regular build and they use to, this impacts cloud too.
so it appears to running esarchiver.load function, these steps: | info [visualize] deleted existing index ".kibana_2" info [visualize] deleted existing index ".kibana_1" info [visualize] created index ".kibana" debg [visualize] ".kibana" settings info indexed 3 docs into ".kibana" [migrations] creating index .kibana_2.
[migrations] reindexing .kibana to .kibana_1 [migrations] migrating .kibana_1 saved objects to .kibana_2 debg [migrations] migrating saved objects index-pattern:logstash*, pointing alias .kibana to .kibana_2.
kibana discover for some reasons keeps in memory the running query while you switch the index pattern and submit a new query, then it will provide you with results for the previous query (which should be discarded) but for the switched (new) index pattern.
this won't be noticed for queries which return results (end) immediately, however long running queries it can be bothersome.
overview title shows "overview" twice for docker container metrics detail page.
when using `{{rawvalue}}` in a url string scripted field, the `&` symbol shows up as & in the url even though it looks clean in the script.
job validation reports and error like cannot be used as the time-field because it 's not a valid field of type \'date \'."
the list of metrics fields selected for the rollup job get cut off in the table.
if you open at least once the job details flyover on the rollup list page, it will be opened again on any change on that rollup list (sort, results per page), even if it was closed.
the list of types of metrics selected for the rollup job is not sorted.
in the day of the week selector for the schedule, the list starts with sunday, regardless of setting done in advanced settings which sets what day should weeks start on.
the box that allows you to enable monitoring is not centered on ie.
it is properly place on firefox, chrome and edge.
phofurl describes the query parameter dashboard as optional.
using index management 's sorting by size when there is closed index .
when you open the expression editor panel, it opens partially off the screen also pushing the toolbar out of view.
canvas element css editor (_element style_) doesn't correctly parse css styles if the last one in a ruleset doesn't end with a semicolon.
when cloning an already cloned element, the original clone jumps back to its original position, and the newly cloned element is positioned relative to that original position.
missing icons when using region maps in kibana.
when a non-sighted user navigates to a space - user doesn 't know that he is in that space.
see indexing threads chart and corresponding `node_index_threads` field in response json in screenshot below: <img width="1538" alt="screen shot at 10 01 36 pm" src=" phofurl
browser memory keeps growing when kibana dashboard with multiple visualizations is kept open with auto refresh enabled ( 5 seconds ) and the time period is 15 mins.
the same memory growth is observed when only a single visualization (pie chart) is kept open with auto-refresh.
the more visualization present in the dashboard the faster the memory growth.
in discover and visualization views, i have no way to get "inspect feature (previously spy).
this is a regression, given that it was a feature available in kibana 6.3.
recently viewed items are not space aware.
when measuring the color selection button it shows the color #6d1f62.
so i guess the wrong color gets applied to the bar chart.
apm-integration ml jobs have all "failed"
kibana plugin install is getting stuck
i executed <code>yarn es snapshot --license oss</code><br> and got the following error: <pre><code>yarn run v1.10.1 $ node scripts/es snapshot --license oss info installing from snapshot info version: 6.3.2 info install path: info license: oss downloading from phofurl error unhandled error error error: not found at promise at new promise (<anonymous>) at fetch.then.res at <anonymous> process._tickcallback error command failed with exit code 1. visit phofurl for documentation about this command.
</code></pre> how to run elasticsearch from the repository?
there appears to be a bug where searching a field by a range of values fails when the autocomplete search option is enabled.
this was encountered during the kibana data analysis training class and reproduced by several users and elasticians.
when switching between selection of a swim-lane cell that has chartable jobs and one that does not - the charts shown for the first selection persist when they should no longer be appearing.
workpad shows up with invalid expressions on ie11.
the console output formats a `keyword` field as if it were a number.
for example if it contains `10.0` it prints `10`.
pdf reporting fails with `error: chromium exited with code: undefined.
kuery does not seem to work when enabled.
canvas landing page on ie is all scrunched-up; image phofimage compared to edge which looks ok; image phofimage
this is an extension of what i mentioned in phofurl where exporting dashboards and reimporting them was not setting a default index pattern.
however, it looks like the export is not finding the pattern anymore which is likely causing the reimport issues (see below).
when using the rest api phofhyperlink to pull down dashboards to save into a file i 'm seeing index-pattern section as having a `404` not found (in previous versions, at least in 6.2.4, this was not case).
using default settings (`server.host: "localhost"`) should make the daemon listen on both ipv4 and ipv6 addresses for localhost.
it does not, the `node` process only binds to and not to `::1:5601`.
this causes errors when `localhost` resolves to ipv6, as is normally the case when ipv6 is fully implemented.
the parameter defines the timeout of the queries sent to elasticsearch from kibana ( kibana settings phofhyperlink ) : > default: 30000 time in milliseconds for elasticsearch to wait for responses from shards.
set to 0 to disable.
this parameter started be considered in timelion in 6.4 - phofurl when it is set 0, the same timelion query, in same interval of data (static) returns different graphs.
when setting value large enough so query completes, results are consistent.
some log messages must be sending 0 for the timestamp to log?
i ran our 6.4 integration-test against 6.x and the reporting_watcher test failed with an error like; ` "reporting generation cannot read property 'id ' of undefined "}]"}}]},` comparing the 6.4 pdf report generation url to one from 6.5 i see this only in 6.5; so i think the error about id means that `layout` is not defined in the 6.4 url.
we 're getting tons of this in the log and it seems like it 's not running the tests in this group because of it.
we think it 's related to canvas that was just merged.
dev tools key shortcuts that worked in kibana 6.3.2 no longer seem to function in version 6.4.0. i tried several as listed here: phofurl and was unable to get any of them to work.
however, when testing on 6.3.2, the key shortcuts worked.
the baseline pdf report we're comparing to in the functional test shows the problem; phofurl the first page is ok. it has 2 visualizations on it.
but the second page has one whole visualization plus the title of next one (the data table).
then third page has data table visualization with no title.
when i run reporting tests on master, `'print layout', it('matches baseline report'` test passes because session pdf has same problem as baseline pdf.
and again for next test which uses same baseline to compare to; ` it('matches same report with margins turned on'`
when viewing the kibana 'welcome ' page in ie11, the background svg graphics display with darker colors.
default ordering of dashboards in list is random.
when there is more than 1 replica per shard, the "shard legend" panel in monitoring -> indices -> [some index] shows only 1 of the replicas.
the decision on which replicas get omitted is consistent between refreshes.
note: this may be a "feature" designed to support more than a single right-side y-axis, but the result is odd-looking (see screenshot).
when creating more than one series assigned to the right y-axis, several right-side y-axis are drawn, even if the scale is the same.
after upgrading from 6.2.4 to 6.4, any tsvb chart that has more than one data series, where one of the data series is on a secondary y-axis, gets mis-classified with all of the series assigned to the primary y-axis.
to resolve, the user needs to manually reset applicable data series back to secondary y-axis
the get_objects api endpoint returns 500 on a kibana instance running 6.4.0 when i try to use the kibana api to get an index pattern i now get a 500 response.
tested against a server running 6.3.2 and it still works correctly.
we have control type visualisation to control filters on dashboard.
when user selects a value for a boolean field filter is not added to the filters.
filter could be added manually to the filter panel.
the "edit rule" panel closes after deleting one rule, giving a poor user experience when trying to delete multiple rules.
mousing over the tooltip icons in ie 11 will generate the following kibana error:
if you change the index pattern in tsvb, the time field selector doesn't show any fields unless you refresh it by changing the time picker, even if there is data in the time interval already set.
if you don't change index pattern, there is no problem in populating time field selector.
on first load and on every de-selection of cells in the swimlanes of anomaly explorer, the influencer list in the left columns fails to update.
the reporting "please save your work" message is not consistent with the actions that the user takes.
if you take a saved dashboard (where reporting works) and click on "edit" to go in dashboard edit mode, you 'll get the `please save your work before generating a report.
` error, even if you did no change.
if you change the timepicker now, it resets whole dirty status for visualizations and you can generate a report again, while in edit mode.
one or both of these behaviors are wrong.
when i start kibana in dev mode, regularly (maybe every 30 minutes), kibana considers wrongly that all source files have changed and continuously restart.
once it arrives, i have to stop kibana, delete "src" dir, then execute `git reset --hard`, and finally start kibana.
this is quite annoying and painful to develop on kibana.
i would say i get this behavior since kibana 6.2.
in dashboard full screen mode on chrome we see a little arrow next to "kibana" and hovering over it expands to say "exit full screen".
but on ie, you don 't see the arrow and moving mouse all around that kibana has no affect.
clicking on that kibana does exit full screen mode, but you wouldn 't know that until you tried.
was previously broken and fixed here; phofurl
when derivative aggregation gets in an erroneous state, it can 't be fixed by fixing the error.
when i try to create a visualization with a top hit metric on the _source field i get the "something went wrong" page
phofurl phofhyperlink in line 144, the comma character makes nodes monitoring screen broken, especially at shards field.
as per phofurl setting a filter causes typeerror: option.label is undefined ( phofurl
table in the time series visual builder doesn't show up any data when queried
elasticsearch fails to come up if you accidentally forget that es and kibana of 5.6.11 stack is up and running
since upgrading from elk 6.3 to 6.4 the surrounding documents feature is broken (see screenshot).
the in the kibana advanced settings will set the `size` setting for the search request sent to elasticsearch.
this is used to load dashboards and visualizations.
if this is set to a value larger than elasticsearch 's (default: 10k), it results in kibana displaying a blank page for dashboards or visualizations.
it seems like if you can customize in kibana, it should gracefully handle any error that might result from misconfiguration.
that, or switch to an elasticsearch scroll request or page through the search results.
phofurl > note that from + size can not be more than index setting which defaults 10,000 #### error in kibana log phofcode
request failed with status code 503 image phofimage
if you scroll the main content of a page, and then move the mouse over the nav bar, it can trigger a fatal error, seemingly because the target element of an event is undefined:
vertical scroll bar scrolls the entire visualization instead of just the legend.
i have just setup curator to help close/delete indices after a certain amount of time.
now in kibana "management">"index management", the interface crashes when i click "sort by storage size".
the size value for closed indices is nothing so i
when going into saved objects, doing a search, and then clicking on export xx items, it still exports all items.
timeseries visual builder fails to list available index fields when a non-default index pattern name is specified on the "panel options" tab.
dev-tools breaks hard, when invalid json is supplied and tried to be edited.
every time i upgrade kibana (which runs in docker for me), i have to re-set the default index.
all my other kibana settings (index pattern definitions, visualizations, dashboards, etc.)
i run several kibana instances on the same cluster, so i set kibana_index (differently) for each instance `kibana_index=.kibana-1`
accessing kibana gives fatalerror: typeerror: e.data.split is not a function ( phofurl
since `6.4.0`, doc value phofhyperlink fields have an optional `format` parameter and omitting the format in a query outputs the following deprecation warning for each `docvalue_fields`: phofcode as `_msearch` queries generated by the
when enabling autorefresh with a very low period (e.g.
5s) in a tab, then tabbing away, wait some time, and tabbing back, some times the timeout screen is triggered
kibana doesn 't start when host is ipv6.
works as expected with ipv4 addresses.
we observed behavior when user opens existing visualisation and left it open until his session time outs.
user gets redirected to login page when he log in again is not redirected to visualisation he had opened before session time outs.
this differ form behavior on other sections like dashboards or monitoring etc.
kibana sometimes receives an `http 409 conflict` response from elasticsearch while adding fields to the main table from the "available fields" panel in the discover app.
this results in an "unable to write index pattern" error being displayed.
logs from the load balancer that proxies requests to elasticsearch show that post requests to `/<kibana normally take from 500 1000ms complete.
this error did not occur in older versions of kibana and elasticsearch: there are no instances of http 409 in logs before upgrade 6.4.0. creating a new kibana index and reindexing old one it did not produce any results.
kibana index mappings: phofurl index settings: phofurl stats: phofurl
when dealing with a large amount of data, the loading indicator sometimes persists until rendering is complete (desired) but sometimes disappears long before rendering is complete (undesired).
i thought it was due to the loading indicator only appearing while network requests were happening, but it seems the behavior of the indicator changed at some point, otherwise it would never work properly instead of working inconsistently.
it might not be specific to visualize, but so far that 's only place i can reproduce problem.
in prior versions, when using the color field formatter, it was possible to leave the background color blank.
<img width="716" alt="screen shot at 23 52 49" src=" phofurl this allowed the field to display properly on both light and dark themes.
<img width="705" alt="screen shot at 23 56 42" src=" phofurl <img width="694" alt="screen shot at 23 57 40" src=" phofurl in version 6.3.2 (perhaps other 6.3 and 6.4 releases) it is no longer possible to remove the value for background color.
<img width="726" alt="screen shot at 00 05 40" src=" phofurl the result is field cannot be properly displayed in both light and dark themed dashboards.
i tried to use dashboard_page waitforrendercomplete method in the `async switchtoeditmode()` method so we would know when we could safely proceed to the next step of the test; phofurl but in the case of this test, we see that only 29 of 30 visualizations set the one that doesn 't is tag cloud.
setting a large number like a month for actually gives an almost instant session timeout message in kibana: `you will soon be logged out due to inactivity.
click ok to resume.` there seems to be no maximum defined in the documentation: phofurl
if you create and add a "controls" visualisation to a dashboard then it is shown with a horizontal scroll bar even though there is nothing to scroll to.
dashboards before 6.4.0 did not have this issue but the latest style changes seem to have introducted this.
when viewing a kibana instance within monitoring, a full page exception is thrown.
this appears to only happen ~20% of the time for me.
visualization not render "no results found" message.
going to packetbeat web transactions dashboard is causing the debugger to pause
eui notifications are not being read by the screenreader.
the sankey visualization example from this phofhyperlink page is visualized incorrectly with certain values that contain parts of other values
saved objects table doesn't stretch to the right width
kibana doesn 't seem to be importing all the saved objects when user imports the json.
the complete import happens if and only if the user imports the json again.
please note - i did it as part of get 5.6.11 going - reindex saved objects and then import them in 6.4.0 bc6.
try to fetch the history of a watcher for the last 24 hours or 7 days and kibana crashed.
adding a terms aggregation sub-bucket (by split series) in a line chart seems to break the original orderby of x-axis.
see screenshot 1 where y-axis is the count metrics, x-axis (score-rank) is ordered by desc.
and it 's working: [screenshot 1] pic1 phofimage however, after adding a terms aggregration sub-bucket (with "literature.keyword" as shown in the screenshot), the order doesn 't work any more: [screenshot 2] pic2 phofimage
a watch action that has once failed in the past, can be forever marked as a failure/error in the ui, unless that error goes away.
the reason for this is the fields that are being checked to mark sth as a failure.
incorrect bar ordering in vertical chart when using "terms" aggregation ordered by "custom metric" based on timefield and combined with split series sub-aggregation using another term.
as you make the width of the management page narrower, some multi-word items wrap to two lines, and others don't.
"start trial" feature is unavailable.
if user tries to create an area chart with split chart on "shakespeare" data set - the display of the chart doesn 't look correct.
please note this looked ok for makelogs ( or the logstash data) with count on y -axis and histogram on x-axis and machine.os term (sub aggregation) and then split chart with response.
"current time marker" not working for line chart
when i try to create a line graph, i got the following error.
surprisingly, the error sometime goes away!
the metic is simply an average of some data.
seeing a console error in the discover app .
when using "reporting" to generate pdfs, the edges of whatever visualizations or dashboards we try to use are truncated.
in other words, only about 95% of the visualization or dashboard are visible on the pdf.
this is most visual when we 're using some slightly longer texts in the legend on right edge of a chart.
the texts are truncated and nothing we do seems to have any effect on that.
we 've tried changing dimensions of report, but that only makes pdf larger (or smaller), but actual chart is sized accordingly, so edges are still truncated.
this is a new feature in 6.4.0 that allows you to format a field as a audio url.
that shows a play/progress element in discover in chrome and firefox, but not in ie 11.
long field names can cause the `add` and `remove` buttons that appear when you mouse over a field in the field list pane in discover to be clipped off.
you can tell what the button says by mousing over a field with a shorter name to see the full button text.
and if you zoom out in your browser you can get to a point where full button text appears (if it's not too small to read).
or you can use chrome or firefox which don't have this problem.
when i try to create an index pattern with a large number of fields (10,000 in my test case) it fails with the following error: <img width="1440" alt="screen shot at 5 13 26 pm" src=" phofurl it appears to error out when trying to create the new index pattern via the saved objects api.
the http response only contains the following: phofcode this seems to put kibana in a bad state which, as far as i could tell, can 't be recovered from without deleting index pattern from .kibana manually.
i know this used work back in 5.5.0 because i was trying reproduce an old issue worked on back then.
not sure what version it stopped working in though.
this bug is found during my debugging on my own base visualization plugin.
i use the default tabify as the response handler there.
in the code, i use status.data to judge if it's a must to re-generate the formatted data to fill chart, if there's no data changed, then i will skip re-generate data but reuse previous existing formatted data.
here i just reformat raw response converted table data, e.g reformat raw field data[number] to new format [string].
what found is: - the first time changed on params on options tab will always trigger stats.data changed, and this is a real change[ field data changed from string back number].
- the save visualization action[which is a resize event too] will always trigger status.data after completion of your visualization, and this time it's a fake trigger.
because raw data response filed format is still 'string' but not number.
so now if still reformat string string data.
it will break your code, then here have judge if format changed or not.
installing a `kibana_calendar_vis` plugin by `./bin/kibana-plugin install` failed with javascript heap out of memory
when a huge integer number is indexed into elasticsearch, getting this document via dev-tools will actually
clicking the "add" button in the "this dashboard is empty" dialog does nothing
an error briefly is seen in ie when adding a new visualization to a dashboard.
the functionality of adding a new visualization seems to work ok.
multiple ui problems in search profiler
currently kibana doesn't prevent the user from adding a step bigger than the value for range slider in input controls.
this blocks user from moving the slider on the range.
when uploading a gold license from my current basic default license i get this confirm dialog which says i will lose field and document level access control.
but those are platinum features.
i don't think i lose anything when going from basic to gold.
in fact gain features like security (not not field and document level).
when importing plugin paths, the resolver errors.
horizontal scroll bar is persistent on the input control viz, regardless of how wide the box is made on a dashboard.
it's the same situation in the viz app when creating it.
the discover tab does not properly refresh when switching between index patterns.
the reporting table seems mis aligned.
has been the case from 6.3.2 as well .
its just not applying any styles to the table.
on visualize page, the time picker does not function as expected.
choosing quick, relative and absolute time ranges didn't record on recent.
and a spurious bug was logged to console when click on `recent`: typeerror: cannot read property 'humanize' of undefined at p.ln.from at p.ln.fromnow at formattimestring at cantlookup prettyduration array.map (<anonymous>) controller object.invoke $controllerinit nodelinkfn compositelinkfn publiclinkfn boundtranscludefn [as transclude]
generated the pdf,the label which use chinese is can not be display on the chart
if you select a saved object and then switch the search filter type - kibana retains the selection and this selection remains valid for delete and export
keyboard navigation allows you to access parts of the ml app which should be inaccessible while a modal is opened.
the total count of saved objects is shown wrapped like this even though there is plenty of room to show the text in one line; phofcode
when navigating to discover, with no search criteria, it results in a "something went wrong" error, with a trace: `uncaught invariant violation: objects are not valid as a react child (found: object with keys {type, reason, script_stack, script, lang, caused_by}).
if you meant to render a collection of children, use an array instead.
in code (created by euicodeblockimpl) in pre (created by euicodeblockimpl) in div (created by euicodeblockimpl) euicodeblockimpl (created by euicodeblock) euicodeblock discovernoresults) div discovernoresults) div euitext) euitext discovernoresults) div euiflexitem) euiflexitem discovernoresults) euiflexgroup) euiflexgroup discovernoresults ( phofurl phofcode
error "typeerror: is not a function" by setting "date range" as an aggregation on the x-axis for a line visualization.
if user clicks on cancel after pressing delete while trying to delete saved objects - the action goes through.
but saved objects are still deleted.
if you delete index patterns through the new saved objects ui in kibana and import them again - kibana doesn 't set the default index pattern.
and displays an inaccurate message to the user.
reporting failure - errors out with the following message phofcode
if user tries to turn off refresh interval for using the off button on auto-refresh panel - kibana doesn't handle it till you refresh the browser.
only way to stop the auto-refresh is to change the time interval and click on pause.
as soon as you create an advanced watch from the ui , there is a console error which states phofcode doesn 't prevent me from creating a watch though.
when user generates reports on visualizations - only side panels(only visualization editor) are being printed.
this is on default phantom.
when loading kibana discover, the page freezes the browser entirely once it loads the rows and before loading the histogram.
this has happened on several versions of kibana now.
the kibana 6.2.x versions work fine.
it seems to just get frozen on loading graph.
in data table views i 'm seeing wrong value
reporting doesn't seem to work right.
there's a bunch of ui widgets appearing in my reports that weren't there on previous versions.
the option to apply changes is sometimes disabled even when changes have not been applied
when we have two y axis (for example one as left axis, one as right axis), if the left y axis is in the percentage format (%), the second y axis in the right, shows label in percentage a well, while it is not in percentage format.
kibana gets stuck at the status dashboard even though everything appears to be green.
attempting to navigate to any kibana page, when this situation happens, only shows me the status page with all plugins green.
different outcomes under different browsers when i tried to set "fontsize" under "visstate".
when i run `yarn build` i get this error: phofcode
ml jobs can be built on the back of a saved search in kibana.
however, if that saved search is created with keury (instead of lucene syntax), the ml job 's datafeed configuration ignores that logic.
geo.coordinates.lat and geo.coordinates.lon in sample data logs.jsonl from phofurl not recognized by kibana "no compatible fields: the "logstash*" index pattern does not contain any of the following field types: geo_point"
people often use geolite2 dataset to convert ip addresses to geological locations through elasticsearch 's geoip igest node processor and geoip filter of logstash, however subdivision names geolite2 returns for prefectures in japan are different from elastic maps service phofhyperlink .
as a cause, region map visualization of kibana is not able to paint regions properly.
i 've extracted below prefecture names from here phofhyperlink .
phofcode it seems geolite2 database doesn 't follow any rule.
it doesn 't comply with iso-3166 phofhyperlink subdivision names.
it also give `-ken` which means `prefecture` for fukushima as the other prefectures don 't have it.
since japanese words are flexible when using alphabets, `kyoto` could be `kyto`.
using the iso subdivision code to map prefectures is considerable.
in that case, it must be fixed by elasticsearch and logstash while maxmind describes such method here phofhyperlink
from a dashboard including a coordinate map, trying to get a pdf report, if you choose the option "optimize pdf for printing" lead to a pdf with the coordinate map visualization with only the map and with no "hits" (points, heatmap, or other map type have same wrong visualization behavior).
instead, choosing the option "preserve existing layout in pdf" lead to perfect pdf report.
as i supply regionmap layers settings from kibana.yml, kibana properly shows the region map layer settings.
however, those settings seem not to be supplied from docker-compose.yml.
the table can 't have an order by column when use the serial diff aggregation .
and if i sort the serial diff table by clicking the column title, it doesn 't work, and this table will be disappear when the page refresh.
when use the bottom legend, the length of y-axis is too long.
it cause the start point of x-axis and y-axis are not in the same location.
and in 6.1.0 version, if page refresh dashboard data by auto-refresh.
(or just hide legend of one graph in dashboard, other graph will be fixed).
if turn to 6.3.0 version, i can 't find a way to fix this.
issue with search function if the result is empty
cannot use the "validate job" functionality if ml job uses categorization
i 've initially observed the issue with the following scenario.
i 've been trying to search all entries where the field "session" begins with a specific uuid, using filters such as the following: phofcode occasionally, with some uuid in regular expression, i get following error : discover: unable to parse/serialize body error: unable to parse/serialize body errorabstract@ phofurl errors.serialization@ phofurl respond@ phofurl checkrespforfailure@ phofurl processqueue@ scheduleprocessqueue/<@ $digest@ $apply@ done@ completerequest@ inspecting json response in web console shows me that it is truncated after 21799 characters.
responses get also truncated when doing query with same parameters in dev console, but answer is not truncated when using curl.
the stack trace points to angularjs in bundle, it can be that issue is due it, but it can also be that angularjs only catch issue.
since then, i observed it a couple of times searches dependant on another context.
in firefox, if the vertical height of an option list with a child list is set too small (fewer than 9 rows), values are cleared from the parent list as soon as they are selected.
this issue does not occur in chrome (ubuntu 18.04).
imo, the option list takes up way too much vertical space and it's very tempting to try and squash it up as much as possible.
if the vertical size is set to fewer than 9 grid positions, bottom portion of vis renders outside grid position allocated to it, although vis appears normal.
the only indication things are wrong is drag handle is further up right side than normal.
in this configuration, when a value selected from option list, vis will redraw (as it updates child list ?
), which resets selection in parent.
this test has failed twice on master in the last 3 days `fail: "monitoring app elasticsearch shard legends shard allocation per node "before all" hook"` @tsullivan says these tests were marked `skip` on some other branches but not on master.
this test failed on jenkins with `error: expected true to equal false` which is from the expect right after this line; phofurl we can see from the failure screenshot that the notification "sample flight data uninstalled" is visible, but it also still shows "sample flight data" is installed.
is it just a timing problem and has to keep checking for a bit to see if it changes state?
the previous expect in this test is within a retry.try() loop, and maybe this check should also be?
within kibana monitoring in the nodes section sorting by name no longer appears to work correctly since upgrading to 6.3 (from 6.2.4) with autorefresh enabled it changes the ordering on every refresh, almost as if it's ordering by something that fluctuates (cpu, disk space etc.)
but those aren't being ordered either.
if a module has ngmaterial as a dependency, from the angular-material package, the search bar will disappear after visiting a page without the search bar.
when for aggregation you chose long field (or field on long nested path) left panel overflow visualisation (`pie chart` in my case).
i am trying to install a custom plugin but am having varying degrees of success depending on what installation method i use.
first i installed kibana through the .deb package.
then i tried to install the plugin through the file system.
phofcode because that didn 't work, with the same kibana instance, tried installing through a url.
phofcode which seemed to get a bit further.
lastly, install kibana through a .tar.gz, and installed plugin filesystem.
downloaded csv file contains unexpected newline characters within a document entry.
each document should be reported as a single line in the csv export.
the bug leads to multiple lines however.
in this case the problem occurs at "geo_point" attributes like { "position": { "lat": "lon": }.
i've built kibana dashboards and shared the url in my web application.
when i try to maximize the dashboard in my webapp the error comes up.
importing saved objects with saved search conflicts does not provide error message
url bar doesn't show up on the vega visualization page.
in table visualization (the bug is not restricted to table vis), a disabled split rows bucket cause errors: 1. if there are enabled bucket after the disabled bucket - kibana fails to parse elastic response, nothing indicate a failure to the user, appears as exception in browser dev console.
if all disable buccket are ordered after enabled buckets - no errors.
2. regardless the order in split rows buckets, only the first metric is parsed and display in table.
rest metrics ignored and appear as they have null value.
setting up a dev env the `yarn es snapshot` fails phofcode
if user clicks on beats imported dashboards in dashboards listing page with missing visualizations - kibana does nothing.
the action is failing but there are no alerts/messages to let the user know that something is not working.
i am also logging associated beats bug to talk to them about missing visualizations.
the problem i 'm experiencing is that apparently scripted fields cannot be aggregated within different patterns.
i have 3 index patterns (that group indices of the same type of logs) that contain a field called "severity_label".
however, in one of them "severity_label" is a scripted field whereas in the other 2 is just a normal field.
when i try to write a timelion expression for splitting these 3 index patterns based on the field "severity_label", i 'm getting the aggregation but only for first two, ones where field is not scripted.
the one that contains "severity_label" as scripted does not appear in visualization.
this expression i 'm using in timelion: .es(index= 'index1-* , index2-* , index3-* ', split=severity_label:5) i tried running same expression only under first two index patterns and it worked.
i even tried running it only for third index pattern (the one that has scripted field) alone and it also worked.
it fails when you combine patterns of different types indices where some them have as and rest do not.
pie labels settings - show value doesn 't work when used "alone"
the `filter` block in a bool query has a different syntax when comparing it to `should`, `must` or `must_not`.
it completes with `{}` while it should be an array `[]` to be more flexible.
both work with elasticsearch but `[]` is required when adding more than one filter statement.
if the curlys are manually changed to the square brackets then the autocomplete stops working.
if you create a watcher in json with a slack action and don 't supply the `text` field but provide an attachment ... the watcher will work and fire the slack message but will never let you back into the watcher screens because it errors on the missing `text` field.
you have delete watcher to regain access to that part of kibana ui.
when viewing the index management table at 90% zoom the row separators are wonky.
this occurs when the cell contains something other than text.
elements of vega visualizations that worked prior to 6.2.4, no longer work in 6.2.4 or 6.3.0.
adding a filter using `add a filter+` does not is not pinned when the kibana advanced setting is set to true.
not sure if this is an issue, but i could be persuaded that it is.
we have the main kibana server that runs on and a proxy server that makes kibana accessible on `localhost:5601`, which redirects to (which then internally is redirected to the main kibana server.)
should kibana still be accessible on it currently is.
when i want to manually create the kibana index in my elasticsearch instance (since it does not create it automatically) i get an error that the json (as taken from ) is invalid:
create calendar button is getting announced as
if you create a area chart with at least two buckets on it - save it and reopen it - the area chart doesn't have a arrow to collapse side panel
on the index management page, the column sorting feature works on all columns but the last two ones showing the storage size.
when starting the distributed build, it takes a good 15 seconds of more before you get any kind of output from the server.
the time will vary based on system specs i'm sure, but it's considerably longer than it's ever been in the past.
_sometimes_, when elasticsearch goes away and then comes back, all x-pack plugins get stuck in a red status and never return to green.
when disabling a split series bucket in a line visualization, the aggt query still includes the definition rendering the response incorrect for the ui result in a flat line on graph
upgrading from an earlier version of kibana to 6.3 without removing the older x-pack plugin will prevent kibana from starting, but the kibana-plugin tool will not allow you to remove the older x-pack plugin.
manually removing the x-pack plugin folder is required.
new telemetry banner has auto-focus on action buttons and not screenreader accessible.
only yes or no or readmore are getting announced.
also once the option is selected - the output of that action is silent and not getting announced.
when selecting an index pattern for an index with a date field of format `epoch_millis`, an error message is shown and no data is loaded (see screenshot of error message below).
conversation is here phofurl but ecentially the visualization changed from a metric to a gauge during the upgrade.
es 5.6.8 image phofimage phofcode phofcode es 6.2 image phofimage phofcode phofcode
when you navigate to advanced settings and either type in something int he search bar or change the category , the page crashes with the error message phofcode
when creating visualisations of index patterns, splitting the values by a field with values which are quite long, the values do not appear in the table.
an error pops up on creating an index pattern stating `obj.get(...) is undefined`.
array type configurations passed as command line args are treated as strings and not arrays.
example: results in kibana attempting to whitelist a single header with a value of
when saving a visualization with the same name as an existing visualization, it throws the warning "are you sure you want to overwrite....".
however, after confirming, the visualization is not overwritten; you are left with two visualizations with the same name.
no data after filter ( way1:(+) icon , way2: "add a filter" ), pictures in below at screenshot
i executed the install command here about
kibana fails to start, due to missing babel dependencies
an unexpected error occurred: "reduce of empty array with no initial value".
if you try to save a with the same name as one of the existing searches - kibana warns the user.
but this isn't announced to a non-sighted user.
upon generating a region map visualization using country names in world map, the following error appears: region map: could not show 3 results on the map.
to avoid this, ensure that each term can be matched to a corresponding shape on that shape's join field.
could not match following terms: ivory coast,south korea,tanzania
after enabling a trial, clicking the "revert to basic" button on license management causes a full page fatal error, and the license does not change to basic.
the error message is: phofcode
when security is implicitly disabled due to something like insufficient license, you get redirected to a login page with a warning: screen shot at 11 10 56 am phofimage
on discover if you add a filter based on a date type field, you have to format the `from` and `to` date values a specific way which might not be obvious.
there is a link `accepted date formats` which points to phofurl but that page doesn 't seem to show the required format which is like it 's the `t` separator that i always forget and i don 't see it described in the linked doc.
there is reference to that format here; phofurl the example looks like; phofcode
when you click on an index on index management page - the page which opens up to manage that particular index is not announced in screenreader.
if you change or reset panel titles - screenreader doesn't announce that action completion to non-sighted user.
if non-sighted user clicks on full screen-mode, there is no alert announcing that dashboard is in full screen mode.
when you want to import a dashboard and you click on `no, prompt for each object ` dialog in the modal, a `409 conflict message is seen in the console `
eui toast notifications in kibana are missing aria-live(dave's video on accessibility covers it).
so whenever they are appearing on the screen - they are silent.
consequently screenreader doesn't announce that a viz is added, report generation is queued or ready to download ..etc etc.
i am logging a generic bug here and tagging sharing/visualizations.
please let me know if you want me to split it up.
after maximizing a view that is below an input-control and minimizing it, at clicking on the input-control the preview underwrite the input-control dropdown.
if you have more than 6-10 indices in your es node, the shard legend table will not wrap around the list of indices and only show the ones that fit in the screen.
on top of that, there is not even a horizontal scroll bar to allow user to work around this issue.
phofcode i had rewrite the default value above, but what i got still the default values.
when installing kibana & x-pack through yum and the elasticsearch repos as root.
see "steps to reproduce" below.
the issue is it seems the default installation packages end up with a few ownership issues.
for example, phofcode the x-pack folder is owned by root:root.
and our secure config for rhel has a default umask of 0027. additionally, the `optimize` folder has several files that are owned by root:root instead of kibana.
pasted a snippet of the directory listing here: phofcode so what happens is x-pack plugin does not load correctly in kibana, and additionally several options become unavailable in kibana menu.
kibana still seems to work with no issues, and i did not even realize it was silently failing somewhat until i discovered this was occurring when i set up an additional monitoring cluster and kept noticing these errors in logs.
after completely changing ownership of those 2 directories (plugins optimize), then kibana suddenly had a whole lot more options for monitoring, machine learning, etc, login screen.
it worked , but with much more limited options previously.
if user has tsvb, markdown, input control, and vega vizs only on a dashboard( and they are not on default kibana index pattern) and shares the iframe - the add filter on them becomes useless(?
- not sure if i am using the correct word here).
because its populated with fields from default index pattern in kibana.
input controls are not fully visible in iframes.
long field names don't wrap - so currently they break the layout.
viz editor expands too much to display the full name and takes a lot of screen space.
really long field names need to wrap in filters
if you update your license - cluster license alert isn't getting updated
adding filters on iframes on visualizations is not working.
clicking the "edit settings" tab in the flyover for an index in the index management page causes a fatal error `cannot read property 'setcompleters ' of undefined`
loading of a dashboard causes kibana to try and modify an index pattern saved object.
if the kibana user is readonly, this results in 403 which inturn fails the entire dashboard e.g.
if you add a filter like `@timestamp is not between <date1> <date2>` it isn't applied to the visualization.
the example code from phofurl doesn't work in ie 11. the only thing it renders is the error text `object doesn't support property or method 'parsefloat'`
`request timeout after 3000ms` when trying to connect to a elasticsearch url which port is not specified.
sample of `kibana.yml` file: phofcode
image phofimage put into body is working: image phofimage
opening the spy panel in visualizations marks appstatus as dirty.
when using ie 11 browser (and have true`), prior to pr #19184 (6.3.0 bc6 for example) when on dashboard and navigating to a previously opened visualization which has a long url, the navigation would fail (user stays on dashboard) and an error is in the browser console.
after that pr, navigation is successful but the error is still in the browser console (typical user is unaware).
the layout of the input controls visualization is not maintained when a dashboard is rendered as a pdf.
if i open a visualization with long url, then navigate to dashboard, i can 't get back to visualize.
i see a little attempt at loading but then it just stays on dashboard with no indication to the user what happened.
include system indices checkbox is missing the label.
so when user is using the screenreader to access kibana - it announces "checkbox not checked" without giving the context of include or exclude system indices.
i used the export dashboard api and although it exported dashboard, all the visualizations, saved search, and index pattern, it didn 't complete the last closing `} ] }`.
so it won 't import now.
when user tries to use screenreader on management screen - it doesn't announce the section headings.
so, when we are tabbing - we just hear the list items being announced under security, elasticsearch, kibana and logstash.
so, user doesn't know under which section - he is on.
in visualization tab, visualization type: (gauge and goal) , options > auto extend range (check/uncheck), this feature is not working.
the range is not updating according to any type of data.
the page which gives you the details about your license is not screenreader accessible.
screenreader doesn't announce any details about the kind of license you have - the only announcements are about buttons.
the code used for describing solutions on home page is missing aria level.
when user uses screenreader - once the pass through apm solution description goes through - only
if you have two failed reports and click on the failure button to figure out why they failed -
if es is returning an empty bucket , kibana logs an svg error in the console if the viz is bar chart.
histogram hide/show legend throws error
starting as far back as 4.6.4 timelion doesn't use the timespan set in other kibana apps.
so if you're in discover or visualize and carefully select the exact timespan you want by using the timepicker and/or selecting in a date histogram, when you go to timelion you have to redo that selection.
color rules in visual builder/gauge not working as expected
if user changes the value for
the visualisation custom label for median is applied differently to the custom labels for mean etc
the first radio option is automatically checked (ignoring the checked:false property)
renderer crashes with following, phofurl -> interesting frame starts from 33
javascript error dialog will be displayed.
electron instead sees that the response is not a 2xx response from the server and instead throws a which is most likely due to there not being a specific exception for the 407 proxy authentication header.
the menu is still there.
i cannot access microphone in my electron app.
i embedded a url in my index.html(this is loaded in browser window) , which requires microphone .
the web url is working fine in browser and voice is being recorded correctly by microphone , but this isnt happening for electron window .
child.html iframe is able to read the localstorage values that index.html set.
can see toolbar with file, edit, view etc.
i 'm building an electron application on gh actions for this project phofurl recently the built environment of gh actions for mac os was upgraded to macos 10.15. downloading the built from the server and executing it gives me the dreaded message: **"you can 't use this version of application with this version of macos"** image phofimage i made sure that my application is **signed correctly** and **notarized correctly**.
image phofimage when i try to open application in a terminal, i get a `lsopenurlswithrole() failed with error -10825` which is according to docs image phofimage i made sure that all of my `info.plist` files do not restrict to versions >= 10.15 image phofimage i 'm out ideas...!!
if you access document.cookie in the preload script then cookies will work for the initial page load but after subsequent navigations to a new url then cookies become broken.
the seems to have no effect anymore in electron@7.
`electron.d.ts` declares `getprinters` as phofcode
all ffmpeg.dll properties are empty.
i got this error : phofcode
when i make a build with electron-builder the context menu doesn't wor
the request does not contain a body.
when returning from another workbench, the shadow of the previous text continues as a shadow
when a second web-session begins, after having called we don 't get the (...) => ...)` callback but the previously selected certificate gets simply reused, just as if there was no call to at all.
this has not been the case with electron 6 and prior.
the extension is no longer added.
throws odd exception error: missing required channel argument at at object.event.reply at eval at fs.js:1186:7 fsreqcallback.oncomplete (fs.js:153:23
results in error `uncaught typeerror: setinterval(...).unref`
the dialog opens in the `recent` tab of ubuntu file explorer, and any folder can then be opened from there, by clicking on `open` (top-right corner) after selecting the folder.
when printing `result` (see above), we get : phofcode
unhandled `error processing argument at index 0, conversion failure error` error is occurring.
on electron >= 7, trying to set the `host` header throws an error.
it is impossible to read the reponse's body, as the response object emits a error and stops.
won't install electron, it hangs phofcode image phofimage
`will-navigate` does not get triggered.
the docs phofhyperlink make no mention of `"about:blank"` being an exception, and so i expect that `will-navigate` should get emitted when navigating to it.
either this is a documentation error, or it 's a bug with `will-navigate`.
window is often shown ~1s after window.show() call.
this issue doesn 't happen every time.
nothing can be clicked, including system widgets (taskbar etc.)
there is no excessive cpu usage and processes appear to be working - opening start menu or console using keyboard works.
closing the modal using escape key helps.
when a frameless, transparent window is being dragged out of the screen, the out-of-bounds transparent background turns to black when coming back to the viewport.
worth mentioning that it does not happen every time.
it does nothing with the touchba
if you set a `content-length`, the request fails with
its throwing below error when i try to connect to the `box`
npm install fails with: _(node:5627) httperror: response code 404 (not found)_
as soon as the main electron file gets read, the following error occurs and the application won 't start: image phofimage
window background color is shown for a short while before the content is
clicking the tray icon does nothing, unless a context menu is set using `tray.setcontextmenu`, in which case the menu opens.
browserwindow dimensions are cropped by dimensions from the primary screen,
window is restored to its previous size and location.
requests ignore the proxy set with `session.setproxy`
when opening the app drag works perfectly but once manually resize the window or call size changing electron api func the drag stop working directly.
app crashes when uploading files
starting with electron 7.0.0-beta.4 it looks like the request sometimes randomly never completes on the renderer side.
this can be seen in the network tab as well as by inspecting ajax calls at runtime.
the read stream seems to be created successfully, and the response starts to be sent back to renderer, but final state change never happens.
form fields render differently in v7.1.0
it is treated as any custom name would
but when i build the app with ** electron-builder ** , **yarn dist**, the request fails because the header is only "text/plain" that the flask server couldn 't parse data.
minimized window's `settimeout `is throttled, despite disabling it.
ismaximised() and isfullscreen() return false if browserwindow transparent mode is set to true.
electron `7.0.0-beta.4`: silent crash electron `7.0.0-beta.5 c7.0.0`: `login` event not emitted, network non-functional
seems to have no effect, logs are always created in
[error: cannot set cookie for current scheme]
the `browserwindow` keeps focus when being launched but after changing properties on the window and losing focus, the window goes behind the focused window.
electron when trying to load js bundles generated by `webpack-dev-server` from a custom http protocol, throws weird and completely random errors in devtools like: phofcode however it worked normally in previous electron versions.
perhaps the migration to `networkservice` has to do something with it?
notice, if you uncomment this line phofhyperlink and comment above, it loads normally.
when the react app is first loaded, it works.
when browserview is changed, html parts with `-webkit-app-region: drag` are no longer draggable.
clicking the components won 't fix the problem but try to perform dragging operation on these components would then fix it.
the response of the cors post request is empty.
[4/4] building fresh packages... [2/2] electron [-/2] waiting...
when building my angular project and running electron i am missing the path mentioned above and instead have paths to "./lib" and "webpack" which does not contain the angular app .ts files.
this prevents me from being about to debug the app using the developer tools.
- open react devtools profiler - click "reload and start profiling" - await reload - do actions click "stop profling" does not work because there are errors in console (actually thrown immediately after reload): phofcode phofcode
when i pull up a page such as phofurl i get the message > hmm.
while your browser seems to support webgl, it's disabled or unavailable.
if possible, please ensure that you are running the latest drivers for your video card.
also when i open `chrome://gpu` i see > webgl: disabled > webgl2: disabled
react dev tools are not available and following error is logged on command "uncaught error: connect to unknown extension [object object]", source: (2153)`
`backdrop-filter` only has effect on certain area.
window always stays on top until it is hidden and then shown again.
running setalwaysontop method again after showing window fixes it.
main content appears blank / white.
opening dev tools results in "devtools was disconnected from the page...." (reloading only re-triggers the problem) phofcode
` seems not to work, code after this line is not executed.
sending back to renderer fails.
the labels are erroneously switched.
the handler is not invoked.
- calling first returns `false` - calling second does not show a prompt
with electron 7, i got the following error message printed in the main console: phofcode the `i 'm a preload` message is printed as well, which is really misleading.
the issues does not arise if i use the `webpreferences.preload` parameter instead of `session.setpreloads`.
** screen.getalldisplays() ** delivers an identical id for display model samsung dm55.
we have this model in different meeting rooms and i'm always getting the same id.
this post: phofurl states that the id is derived from the model name an is just a hash.
but i don't know whether that's still correct (the post is quite old) because we also have other display types (two identical models) which deliver different ids).
so there must be another factor which influences the hash creation.
so question is how this id calculated, and whether this can somehow be improved to make sure that ids are distinct in any case.
the patch is not applied and the subsequent build fails.
delayed, choppy rendering to the point where the shape of the `webview` content ghosts the actual content that 's rendered (see gif below).
multiple webgl errors appear in logs about texture and invalid mailbox name?
also occasionally saw an error like "unable to create webgl, using native gl instead.
note: i 'm not directly interacting with webgl or `canvas`, but rather manipulating scale/position of a `div` containing multiple `webview` elements with css transforms.
when i run electron appname.js, i get: phofcode
apparently, the mouse events are not being captured.
nether the mouse hover, nor the click works
additional headers removed and not sent to server.
the renderer process crashes while executing phofcode statement.
the electron app window is blanked out, and if the developer tools is open, the following pop-up message is displayed: "devtools was disconnected from the page".
no developer tools console messages.
no messages in the os console, either.
they do not fire when closing the window.
notably, if i don 't use `browserview` and just navigate the `browserwindow` to the page, those handlers will execute.
an error "get phofurl appears: annotazione phofimage
phofcode but, successful installation 6.1.2. phofcode
1) using electron-download we have downloaded the required binary in 2) we have set electron_cache @ environment variable to electron packager creates random temp files in which is not pointing to
cors requests don 't work for custom protocols with electron v7.
no `origin` header set ...
return type is defined as phofcode
let mainwindow; mainwindow = new browserwindow({ width: 500, height: 500, resizable: false, fullscreenable: false, show: false, webpreferences: { nodeintegration: true, devtools: false } }); mainwindow.on('closed', () => mainwindow = null); //==> expectation: true, result: false //==> expectation: false, result: false
chrome still enforces cors with websecurity set to false
i can only get this to compile by adding the following in my file attempting to use `removelistener` phofcode
nothing is shown, and the element does not have `loadurl`, `opendevtools` etc.
missing "+" button, when if available somehow, creates window in new full-screen space or creates black full-screen space
for some reason the `callback` is expecting the same argument as the callback of ]listener)` phofhyperlink
`npx electron .` prints `(electron) 'ismenubarautohide function ' is deprecated and will be removed.` to console even though this api is not being called in user code.
when setting the window title, the native window chrome flashes through the window.
see this longstanding vs code issue for a demo: phofurl
error when installing native module, network error, cannot contact the domain redirected to this url phofhyperlink which is not reachable
non-resizable windows have bounds that are off by the ratio of the display scale of the secondary monitor to the primary monitor.
if primary monitor is 200% scaled and secondary is 100%, windows are = twice width and height.
`webview.audiomuted = true` does nothing but triggers the following warning: phofcode
in electron 7.x, devtools extensions are listed correctly when calling but they don 't show up in the devtools.
additionally, the following errors are sent to stout: phofcode the last line is repeated many times.
this seems similar to the errors seen in #13008, which seems to indicate the path actually resolves to an online endpoint.
in that case that hash might refer a not-yet-available m78 version of devtools?
i wouldn 't expect electron be dependent on that.
the 'focus ' instance event doesn 't trigger every time the window comes into focu
when using menu role `zoomin` `zoomout` or `resetzoom` together with webviews it aways targets the last created webview.
when moving a program window (not electron created window) over to a retina screen (macbook pro), it doesn 't receive a new renderer output to resize too and doesn 't appear high dpi aware when we run our node addon separately, moving the window reconfigures the texture each time as soon as we move the screen enough to a different dpi screen.
charpoint does not honor composition, forwards splitted charpoint string
indeed the document gets printed, but very slowly.
the print job gets fired in time, and printing begins almost immediately, but it takes a long time to print the document.
quick fact: i have been using electron 3.x for months, because silent printing when specifying a printer was constantly getting fixed and then broken version by version.
i thought that the slowness was due to electron 3.x using a very old version of chromium, so i thought about solving the issue upgrading to 7.0.0-beta7 (after following all prs and open issues in terms of silent printing).
after upgrading, slowness is still there.
the same document gets printed at printer 's normal speed (less than 1 second), on same machine, with same printer: - using chrome 77 (latest) - using same version of chromium that electron is (i have got it by console logging process.versions, 78.0) - firefox (latest) - microsoft edge (latest)
as soon as you click the far bottom far right corner and drag, it jumps shrinks by 100px.
it doesn't happen on the bottom centre point (very beginning of the gif attached shows it)
the window size doesn't increase until you move the window.
caps lock - arrow buttons do nothing while voiceover is on.
the window is blurred when navigating to `<button>`s, links (`<a>`), `<input>`s and possibly other types of elements.
seems to be fine with `span`s, `h1`s etc..
on some verify specific conditions, it happens that calling can freeze the whole app.
we are yet unsuccessful to reproduce the issue in electron fiddle.
we haven't found all the parameters that triggers the issues.
**i created this issue mainly to help us debug and be able to provide more information afterwards** additionnal information: - `found-in-page` event is not received when it crashes - ~**the crash only happens in first ~2seconds after webcontents in created**.
run this in renderer: phofcode this is fixed in later versions of node.js: phofurl //cc @deepak1556
the background color of all element in the page is not rendered(white color background with border, just act like chrome with include background checked off
is calling the callback repeatedly when the user keeps pressing the keys matching the shortcut e.g.
on `spotify` keeping pressing `next` is changing songs repeatedly to point it will actually crash
when full screen, as i move the cursor to the far top, nothing happens and controlls don't appear.
the main window doesn't display at all.
electron continues to allocate memory till system have no more free ram.
clicking on the button, there is no apparent execution of the button objects click() function, so no console.log output in the example code
when i used `web workers` i ran into a threads creation limit.
i can create max threads, but when i add 1 more thread - it crash.
i have free 7 gb ram, but it crush anyway.
btw, in activity monitor it 'll show x2 threads count, than i created.
if i created 240 threads - it 'll show 480+ threads in activity monitor
fatal error: exc_bad_access / kern_invalid_address
the window isn 't maximized and appears to be restored to the normal bounds from before the maximized/minimized state change.
same thing with minimizing the window.
this doesn 't occur if the window isn 't set up as a child window main window.
api only returns after several seconds after user clicked on a dialog option.
minheight/minwidth are much larger in size on lower dpi monitors
- electron 6.0.0, shipped by vscode, did not open the kde/qt dialog.
- i also was asked to test with electron fiddle.
on electron fiddle, using electron 6, 7 and 8, it did not open the kde/qt dialog instead either.
about once a day, our app crashes.
systemd reports always with status=5/trap, for both ubuntu and arch.
below is an example stacktrace (keybase is the name of the electron application).
react typescript component source code is displayed without any coloring
the files are missing from the `recentdocuments` menu (the files, however, show up correctly when right-clicking on the dock icon--assuming that `addrecentdocument` works fine).
* `recentdocuments` seems like it is still broken in 6.0.12. the menu items work (are now enabled) but the `recentdocuments` menu does not populate with files.
while starting the electron app the application window opens with black and blank screen.
window reports being focused, but it's not.
strangely, if i call the exact same method i used to create the demo video below via a global hotkey, the window is properly focused.
another indication that focus truly isn't being transferred to the window is that windows aero darkens glass effect on focused window, and whatever previous window was focused does not lighten as it should when losing focus.
a zombie renderer process is left behind after the crash.
should handle "lock-screen" / handles uncaughtexception.
download fails with permission denied error.
mediastream throws exception if video = true
loading app with error message.
the problem: if `app.quit()` gets called while `waitforsingleobject()` is still waiting inside the native module, main electron process keeps running.
similar stuff when i try `sleep()` inside `napi::asyncworker`
uploading to application loader results in an error: 1 package(s) were not uploaded because they had problems: - error messages: t terror itms-90296: "app sandbox not enabled.
the following executables must include the entitlement with a boolean value of true in the entitlements property list: [( helper helper (gpu)", helper helper (plugin)", (renderer)", )] refer to app sandbox page at phofurl for more information on sandboxing your app."
if i uncomment the codesign lines for the new apps (gpu) (plugin) and (renderer), app no longer runs, and instead errors how can i ensure these new helper apps have entitlements?
is there something i can add to my script or files to my build?
in step 3, should have returned the correct `webcontents` object (which is `wc`)
the application becomes very slow when i add it in system preferences -> security & privacy -> accessibility
requiring the addon gives: `uncaught error: a dynamic link library (dll) initialization routine failed.` i have tried with different addons, none of them work.
electron main process can only send messages, but not receive
the text is not selected
debugging innocuous and functional code that was debuggable in electron 4 can lead to freezes that require destroying the browserwindow or restarting electron entirely.
we are having users reporting that signal sets itself as the default application for opening `text/html` files, both on installation and again while re-launching, but we did not set this up.
the versions weren 't displayed, and i had an error in the console saying that `process` is not defined.
the file open dialog shows up, but the app crashes as soon as i click on one of the directories in the left side bar, or when i right-click inside the window.
sometimes, app crashes immediately upon opening dialog.
something is wrong css wise on packaged version.
some elements are squashed as if having zero height.
app crash without any manipulate.
if i restart the mac system, it will be ok for a moment, but the crash will still happen after that.
terminating workers when is true eventually results in a crash (happens randomly - sometimes after a single termination, sometimes after 20).
`open recent` menu item is disabled without a submenu.
- in 4.2.11 the error event fires but unhandledrejection does not - in 6.0.10 neither do
shows a white background after navigation
no notification is displayed at all on elementary os
report the macos appearance setting that is currently applied to the application.
window created with `show:false` is immediately shown anyways
position is respected and the window moves to the correct place, but the window size is actually clamped to the size of initial monitor that window was about to be launched on.
when using affinity and sandbox together closing any window in code causes the render process to crash making the rest of the windows sharing that affinity to become unusable.
crashed with "error: invalid url pattern * ://localhost:88/ * :invalid port.
when i manually call `process.hang()` or `process.crash()`, the app goes unresponsive or crashes, but the events are not triggered.
invoking such method with simple arguments like a string or a simple object works, but invoking it with a complex nested object ( ** no ** circular dependency and ** low ** in size) causes the renderer process to crash.
currently it is only possible to abort a scan by calling the callback provided by the webcontents event (in the main process).
however, if there are no scan results the callback is never called and there is no callback to use.
window flickers when resized and repositioned, seems to be related to mouse move events.
to speed up development i 'm running a webpack-dev-server at ` phofurl it all works fine in the browser.
however when running in electron with `mainwindow.loadurl( ' phofurl the page loads fine and displays for about 4 seconds.
then something initiates a load to `/app/index.html` with the file protocol instead of http.
i have inspected the sockjs requests and payloads of webpack-dev-server but nothing states a reload or redirect of page.
if you open the dev tools and in console type "navigator.plugins" you will be able to see the flash, but for some reason game isn 't working.
intermittent segfault and crash stack trace below phofcode
window moves to previous position after reload
after loading a page with a `sharedworker` and a preload script that requires the `remote` module, when electron closes, it leaves a leaked/orphaned chromium renderer process running after all other electron processes exit.
the callback is never called
capturepage callback not called in offscreen mode
* no toolbar is visible.
user can 't close child window * main window is black
on first startup either via npm start or starting the build app on windows and/or macos whatsapp web is working fine.
after restarting the app or reloading the url it asks me to update to google chrome 49+.
after removing and starting the app everything works flawless.
after restarting mentioned 'update to google chrome 49+' screen pops up again.
the build crashes saying that checksums for win-x64/node.lib do not match == phofcode
i get the following error: `rangeerror attempt to write outside buffer bounds`
checkbox and radio "active" (checked) color is set on first render according to the system accent color.
when the accent color is later changed in the system preferences, the checkbox/radio button active color is not updated.
getting a compiler error: `node.lib(node.exe) : fatal error lnk1112: module machine type 'arm64' conflicts with target machine type 'x64'` (this file comes from phofurl
the minimum window width is 48px
doesn 't work with content-type charset headers
the `open-url`-event phofhyperlink doesn't fire, but the application instance gains focus.
prerequisites: * 1. smoothly dragging a window from left to right (or right to left) will occasionally trigger aero-shake, which minimizes all other windows on the user's desktop.
2. dragging a window into an aero-snap zone still triggers aero-snap.
a frameless window with its body styled with `-webkit-app-region: drag;` is not draggable.
let session fired on product
when i press ctrl+(any key) the first time doesn 't do nothing, at the second time it does.
but if wait some seconds it happens the same thing again.
doesn 't recognise doctype with native node steams
- create a browserwindow, setting `{resizable: false, maximizable: true}` - the maximize button on the window is * disabled * - when programmatically calling - the window becomes almost as big as the screen but *does not* become maximized; i.e., it is not fixed in place, and can still be dragged around the ` 'maximize '` event *does not* trigger after being maximized, calling returns `false`
current page flashing while navigating to another page with relative path in `href` when `will-navigate` event handler exists.
`getloginitemsettings` will report it is enabled even though it is disabled on the os level.
the app will not launch on login
on windows on arm, the test `browserwindow module browserwindow.movetop() should not steal focus` fails with: phofcode above error from test on woa hardware here: phofurl
crashes, whites out and disconnects the dev tool when mojo crashes due to lack of memory.
cursor style is ignored for the top ~24px of a frameless `browserwindow`
the test `shell module shell.openexternal() opens an external link asynchronously` fails with phofcode
when you open the app from the finder/launch pad, the `second-instance` event will fire when using the protocol link.
main window hangs after closing child window.
any attempt to change it is ignored
dev console does not open.
minimum and maximum window sizes do not apply.
height of browserwindow get changed after moving to second screen
electron looks like a night at the disco.
the problem happens when the dialog is opened the second time.
it will show a popup, that "dialog.title" is ready and the dialog will be placed behind the main window.
on windows on arm, the test `webcontents module loadurl() promise api rejects when loading fails due to dns not resolved` fails with: phofcode above error from test on woa hardware here: phofurl
parent window is maximizing from the windows program bar instead of staying minimized
application hung-up at when loading any chrome extensions.
when called the alert('xxx') and close the message box, the input-box on the page has lost focus and can't enter any text into it.
then, i focus to any other window, and focus back to my window(the page), focus is back.
on electron v4.2.9, however, font rendering is much too thin: <img width="912" alt="screen shot at 20 24 10" src=" phofurl yikes!
application seems to break completely, clicking in the client either reloads the app, crashes it, or it stays broken, components in things like react no longer work properly, hitting enter in text boxes create a new line instead of sending, signaling that javascript and other functionality is no longer working.
modal freezes and shows stuck cursor.
closing is only possible by pressing esc.
the maximize() function "maximizes" the window, but doesn 't give it the maximized property.
the window is still resizable via the edges of the app.
the app should keep the same window size after those exact operations: 1. window not maximized // for example let's say the window is currently (minimum window size is set to in the middle of the screen 2. window maximize // now window takes all screen space 3. window minimize // now is hidden 4. window reopen clicking icon on taskbar // now is like in step 2 5. unmaximize size at it's minimum and not at size at step 1
the application freezes for a few seconds and crashes
window is not moved to front.
the schemes from earlier checks bleed into all the following switches checked.
this happens due to the "splitted" variable in being reused for each switch without being cleared first.
it does not do any thing,
error message followed by electron app crash -[__nscfconstantstring objectatindex:]: unrecognized selector sent to instance
`app.setname('foo')` has no effect on application name.
i tested this running in dev mode and a pre-packaged signed app.
'microphone '})` returns `{state: 'granted '}` it doesn 't actually have this perm as true})` correctly throws "permission denied"
dock icon doesn't bounce and an id of `-1` is returned.
dll initialization error at runtime
the window gets resized when i drag it down from the title bar.
white screen appears quickly when the app focus from background, ensure that the app is in the background for a while.
`<webview>` support is not enabled
the code below did not generate any errors in electron v5 ipcmain.once( ongetbuildinfo ); function ongetbuildinfo( event : event ) { if( _loadedbuildinfo ) { event.returnvalue = _loadedbuildinfo; } else { const payload : = { builddate: 'unknown', buildnumber: 'unknown' }; event.returnvalue = payload; } } this code in electron v6 now generates an error saying: type 'getbuildinfopayload' is not assignable to type 'boolean'
1. app is not maximized 2. click minimize 3. click on taskbar icon 4.
**screen flickers as the app returns from _minimum allowed window size_ to the original (not maximized) size.
can 't show file chooser dialog when clicking input type="file" after canceled the dialog.
when i try to access data stored in parent window, i got security error: phofcode no matter both windows origin is 'file: '.
selecting is disabled (greyed out).
calling webframe.setzoomlevel inside preload script block 'ready-to-show' event on browserwindow
instead of displaying the src image, it gives me the following error: failed to load resource: the server responded with a status of 503 ()
button is pressed and highlights with an orange border but it doesn 't process that it is clicked so the new window doesn 't open
a certificate chain does _not always_ contain a root ca.
sometimes there is no last `issuercert` property with the root ca.
i use electron v6.0.2 and electron-builder package an linux app,but it can't run, but when x08i use electron v5.0.8, run the same shell it run normal i use this shell to package `electron-builder build --linux`
the accelerator for key n is still handled by global shortcut handlers.
even when trying to catch errors using the `certificate-error` events, the web socket is unable to connect.
without putting any `certificate-error` event handlers on the `browserwindow` or on the `app` i receive following error in console output: > websocket connection to failed: error in connection establishment: if i add `certificate-error` event handlers i receive: > websocket connection to failed: websocket opening handshake was canceled
on mac, globalshortcuts seem to default to either qwerty or the keyboards layout (i think?
i don't have a dvorak keyboard) rather than the chosen keyboard layout.
`electron_run_as_node` is set in the electron main `process.env` after calling `child_process.fork()`, passing in `process.env` directly as `options.env`.
this can cause a number of problems, the main symptom is that reloading the browser window will no longer work.
it is likely that creating additional browser windows will also no longer work after this point.
message: uncaught typeerror: error processing argument at index 0, conversion failure from ...
but actually, it can't load
opening an electron application (e.g.
visual studio code v1.37.0) causes high cpu usage of firefox processes that temporarily freezes all opened tabs.
this lasts for just under a minute, but the issue repeats itself intermittently while both programs have been running for some time.
i have not been able to determine what triggers these additional cpu spikes (e.g.
opening a new tab in either program, or it just happening after a fixed time period).
when a browser window is opened as a modal to the primary renderer window, a screen reader, such as nvda, says something like "title" with no other context or indication of the window 's content.
first focus is unknown (maybe the window itself?
the icon is not appearing in the browser window 's title bar
`getbounds` and `newbounds` provided to `will-resize` do not have the same scale when the screen's dip scale is not 100%.
whenever i use the vue-devtools plugin in the developer tool window it goes full grey and the console gives this error: phofcode
click webview's button twice can trigger the touchend event(webview must get the focus first)
when sending a https referrer to any http site, the referrer is empty referrer is empty [bad] urloptions = { httpreferrer: " phofurl } win.loadurl ( ' phofurl urloptions) // http url` referrer is phofurl [good] urloptions = { httpreferrer: " phofurl } win.loadurl ( ' urloptions) // https url referrer is [good] urloptions = { httpreferrer: " } win.loadurl ( ' urloptions) // http url
electron application mutes speakers, however, it also freezes macos for about a minute.
call back is not called, behavoir is not prevented, depending on project blank html document is sometimes loaded.
modules other than `electron` cannot be included/required
on mac (and only mac) it provides some very bizarre values.
it seems that the `y` and `x` are actually calculated from the bottom-right corner of the display bounds to the bottom-right of window bounds.
instead of usual (by that i mean what you get from `getbounds`) `x` and `y` that is calculated from top-left of display to top-left window.
in other words imagine this: my display is and i have a window at 10, 20 with width: 30, and height 40 `getbounds` function gives me (10, 20, 30, 40) all good.
when i resize from top, up for 1 pixel, new bounds would be: (10, 19, 10, 41) because height is increased by one, while `y` is reduced by one.
however `will-resize` event on mac gives me: (60, 40, 10, 41) 60 `display.width - bounds.width - bounds.x`.
40 `display.height - bounds.height - bounds.y`.
there no way to transform these, because not only `x` `y` are wrong, they never reflect what going on, that means, even if i resize bottom in up direction, it still gives me same wrong newbounds.
this means, there absolutely no way to even work around this issue.
have no way knowing whether user dragged top edge down or bottom edge down.
data so bizarre spent a whole day trying figure out what values meant how could fix them.
it has be fixed here
no callbacks are called if the protocol is implemented using callbacks only fire when navigation is to some type of `http:` uri.
the window becomes white and the renderer process dies.
print job sends to printer, but electron crashes and window disappears.
when project sources located in the network mapped folder devtols don't open (nor from code, nor from menu).
only folder is getting created without any files in it.
getting "page was saved successfully."
electron applications throw what looks like a bootstrap error when a user double-clicks on their desktop shortcut when they 're already running.
not opening on double click
they take no action whatsoever.
no zooming in or out.
however, zoom is still properly affected by manually running
as of electron 6.0 (compared to 5.0.8), setting the bounds of a ``browserview`` to its current ``x``, ``y``, ``width``, and ``height`` prevents the ``browserview`` from changing its bounds on a subsequent call.
the phofcode is completely ignored.
immediate crash on a call to some c++ code on invocation to `workerimpl`.
as mentioned here phofurl phofhyperlink , electron shouldn't create new window when event.preventdefault() but it isn't when set sandbox=true in webpreferences.
returns immediately if called repeatedly and no events have been emitted during a previous call.
webview not change to redirected url, and stop in latest preview althought src attribute already changed
crash information on windows is barely useful.
here are first lines of symbolicated crashes on different platforms from app center phofhyperlink .
s &#35; | actual behavior ------ | --------------- 1 | :white_check_mark: as expected 2 | :white_check_mark: as expected 3 :white_check_mark: as expected 4 :x: nothing will happen, callback is never called 5 :x: nothing will happen, callback is never called unfortunately when providing a devicename, nothing is send to the printer and the callback will never be called (see image of terminal logs below).
if windows is in dark mode, then electron will hang on launch if any devtools extension is installed.
this behavior only occurs if a devtools extension has been installed on a * previous * run.
everything is fine if windows is in light mode when the app launched.
the first parameter for both of these events is `undefined`.
(the second parameter is a `browserwindow` and `webcontents`, respectively, as documented.
i experience the opposite of above: when calling my `always-on-top-changed` handler is called with `false`, and vice versa.
the app preview is only visible when initiating mission control from the workspace that contains the app.
in some instances, the preview is available; however, hovering your mouse over the preview causes it to go blank.
deaktivating fullscreen mode results in a visible menu
the window is shown in the smallest size
passed callback is never called.
there is no error, immediate object is created.
-webkit-app-region: no-drag is not triggered if -webkit-app-region: drag is set although its under the element.
when i import addon into electron app everything works fine until the statement of arrives.
after which electron gets crashed ( blank white screen) with developer tools option disconnected.
webpack generated this 2 files: phofcode it compiled successfully.
i use node 12.6.0 so i have worker_threads and vscode detect it fine.
but when i launch electron i get this: phofcode
so when i try to install github for windows i get an error this laptop does have some funny security settings on it.
does anyone know a way around this?
i also get this issue with: atom, slack & gitkraken
i noticed when using nedb in my electron app in renderer process after the update to 6.0.0-beta.15, the databases just don't load (they load properly very rare).
but when reloading my renderer process using `ctrl + r` everything works fine.
also it's worth to mention that requests using `http` or `https` modules behave in the same way, they just sometimes don't work.
the problem doesn't occur in electron 5.0.7. the problem seems to be very random and for me it's hard to describe what causes it.
push notifications doesn 't work.
the text is looking extra bold
the following error is thrown phofcode
electon (or chromium) does not encode simple quote in https requests and encodes it in http requests.
typescript error when using for example `recentdocuments`-role for menuitem
app crashes with the following error report: phofurl
getting following error while phofcode
fails to load map under error message is "failed to initialize webgl"
for the above codes, i just want to redirect a request that contains the '*.sobot.com ' domain, but i received a url from the local path of `/users/oliver/desktop` in the callback of `onbeforerequest`.
when i add "file:// * .sobot.com/ * " a rule in array, for rule, i actually expected it only to match request that domain is '.sobot.com ', but it appears to listen to all requests.
render process doesn't recover after the second crash
font fall back tests fail with this in the log: not ok 1191 font fallback should fall back to japanese font for sans-serif japanese script", assertionerror: expected 'yu gothic ' to equal \'meiryo \'", at context.<anonymous> the meiryo font does not appear to be installed on any of the windows 10 machine that i have access to, and microsoft 's typography page indicates that it 's no longer shipped.
there is a 4 second delay compiling socket.io.js in a second running instance of electron if the first instance is still running.
the method return type is single object `desktopcapturersource` like below.
argv "/usr/bin/node" "/usr/bin/npm" "start" npm err!
v3.5.2 code elifecycle electron-test-sdk@1.0.0 start: `electron .` exit status 1 failed at the electron-test-sdk@1.0.0 start script 'electron .
make sure you have the latest version of node.js and installed.
if you do, this is most likely a problem with the electron-test-sdk package, not with itself.
tell the author that this fails on your system: electron .
you can get information on how to open an issue for this project with: bugs electron-test-sdk or if that isn 't available, you can get their info via: owner ls electron-test-sdk there is likely additional logging output above.
please include following file with any support request:
when sending an ipc message _to_ the `<webview>`, things work as expected and the `preload` for the `<webview>` receives the event.
however, when sending an event to `<webview>` on host ( ** with ** context isolation enabled on parent window) via `sendtohost`, event is empty (a generic javascript event) and has none of usual attributes like `channel` or `args`.
starting in electron 5.0.0-beta.1 and to latest 5.x, the pe timestamp embedded in the electron.exe final build output seems to be some kind of pre-generated number, possibly based on my checkout date (when doing custom builds)?
it seems that the latest 4.x build (4.2.6) might work correctly, so this maybe was introduced in 5.x.
i have no idea if it 's due to chrome or electron build system specifically?
here is a partial list of some historical builds i had on my machine (some also come from official electron builds).
pay special attention to the more recent builds ' timestamps: phofcode strangely, all electron 5 builds have a "time" of exactly (except outside dst where it has the dates vary from build build.
however, if i check out a build, it, then a week later make changes and rebuild same checkout, date stays same.
for example, all e500 and e502 builds above have same date.
this is despite: phofcode the actual compile time being very different (over couple weeks).
it seems that when i update exe, it reuses some old pre-generated timestamp.
additionally, if delete electron.exe and rebuild, still get old timestamp (not sure if incremental linking would be thing there, but at very least, deleting just .exe was not enough produce new timestamp).
after upgrading to electron v5, `webview` element only has the native htmlelement methods, without electron methods.
no more sync callback, async promise instead
in macos when i set the title to an empty string it kind of resets itself to the application name.
in linux (lubuntu 18) instead my windows have "unnamed window" as their title.
in macos when i set the title to an empty string it kind of resets itself to the application name.
in linux (lubuntu 18) instead my windows have "unnamed window" as title.
when the keyboard is closed, a white bar remains instead of the keyboard.
the popover closes and no character is input
when i build my native (c++) addon for electron, using the latest node-gyp, i get the following (and a few other) deprecation warnings.
i have a minimal repro (which just does an `#include <node.h>` and nothing else).
the page is loaded with the background color specified by the color set in the initial creation options.
if no page is loaded, the color from last call to setbackgroundcolor is correctly displayed.
a keyup event is fired on the parent browser window
when the notification is dismissed, the app crashes intermittently.
the cursor change is delayed.
returns a 64-bit value (on a 64-bit system) that is not a valid x window id.
the value looks like a memory pointer to the value rather than the actual `window` value: phofcode (notice the constant stride between values, indicating successive members of an array in memory)
everything works with the app under win-unpacked folder, but portable app won't fork the child.
after i have referred the document of electron and any issue of `stackoverflow`.
it looks like to communicate `rendererprocess` only way is to use `send` function to send messages to it.
but the send function is asynchronous form, however, i need the order of invoking.
so i need a kind of `ipcmain.sendsync` function.
see screenshots section for a working example of what visually appears when using `command shift /` on firefox 67.0.4 (64-bit) on macos 10.14.5.
the app isn 't loaded and `openitem` return false i could be wrong but it could the spaces that are the source of the issue.
resolves before user click "don \'t allow" or "ok" on the system dialog.
is always reporting to be false.
when i click on a ** button ** who uses the `print()` method the print dialog opens then i click on "cancel" button i can not click on another link, i have to quit the application and open it again
firstly i don 't have the issue when i package for osx and i have tried electron-packager and electron-builder and get the same result.
if i add google fonts to my index file i.e phofcode and use those fonts anywhere in my app it crashes straight away with a blank white screen.
also if make a http post request the same thing happens so assume it 's related, http get works ok
icon is about 50% transparent in dark mode, unless clicked.
when active, its at full opacity
renderer failed, main process works
types are setup to return a single even though the implementation correctly returns an array.
move window triggers resize event
vs code gives me problem: `property 'querysystemidletime' does not exist on type 'powermonitor'.ts(2339)`
when launching our video player in order to play a recorded video the player crashes with an error message "something went wrong" with a session id.
when i updated ` on `new-window` event.
ever since then `preload` not execute.
error while executing child_process: phofcode
: if i have a packaged electron app running and i shutdown the machine, i see a breakpoint error that prevents the machine from shutting down.
it doesn 't have scroll bar and it can only show limited items.
only electron 5.0.4 is published to npm and running `npm i electron` install it
this value doesn 't return any value, meaning that the window retains its current state and thus doesn 't comply with the rest of the system.
my app is a menu-bar app that uses a tray icon and triggers a `browserwindow` instance when clicked.
here is the `browserwindow` setup: phofcode the window is positioned using `electron-positioner` package and everything works seamlessly most of the time.
after running the app for some time, something makes the window become invisible.
when checking logs, no error is presented and everything seems to be working normally, but window itself becomes invisible.
by removing `titlebarstyle: i can see that window still present (thanks to a small edge caused by titlebar style, visible on gif images below).
when problem occurs, i can still right click on it and trigger context menu (see screenshots section).
i 've been trying to identify root cause of this for over week.
webcontents.print() will work without parameters.
but it doesn 't respond when adding parameters, no errors, and no callback.
if the window is closed at this time, a "false" callback will be made.
// may work` true}, (e) => console.log(e)) // no respond` i 'm not sure if this is a bug, and i still want to find a solution.
nothing happens when using a local path to html file with ?q=somequery at the end.
if i remove the query from the uri string, it will load the web page correctly.
however, point of what i am trying to achieve is to have search term automatically filled in.
we have received one (but so far only one) report from a user for whom slack 's context menu looks "too small".
we asked for display and high-dpi details and found nothing but default stuff: it 's a 1920 x 1080 display at 100% scaling, no advanced scaling settings have been found.
fullscreening embedded content makes the browser window go fullscreen, the embedded content stays the same size and the whole app freezes.
i experience long (~10s) and frequent moments (every 5s) when the ui of the developer tools is totally unresponsive (scrolling in console, scrolling in indexeddb, buttons, etc), although the cpu is perfectly calm.
i don't have any issue whatsoever in electron 4. this is not fixed in electron 6 beta.
**interestingly, everything runs fine if i detach the developer tools from window and minimize app window to dock**.
tests throws the following error when executed.
i/launcher - running 1 instances of webdriver i/hosted - using the selenium server at phofurl e/launcher - unknown error: failed to create a chrome process.
(driver info: nt x86_64) e/launcher - webdrivererror: unknown error: failed to create a chrome process.
(driver info: nt x86_64) at at parsehttpresponse at dosend.then.response process._tickcallback from: task: function.createsession createdriver builder.build hosted.getnewdriver runner.createbrowser unner.js:195:43) q.then.then unner.js:339:29) _fulfilled e/launcher process exited with error code 199`
* using an accelerator without a modifier to activate a menu item (e.g.
pressing key 'b ') results in `triggeredbyaccelerator: false`.
* clicking on a menu item while holding down a modifier key (e.g.
it doesn't throw, in fact it even returns `true`.
when i remove one `<iframe>` from the dom tree, the whole `<webview>` crashes.
i didn't use js to remove iframe node, instead, i just delete one `<iframe>` from the dom inspector, and the `<webview>` crashes.
`node-gyp` / `node-pre-gyp` build fails with 404 on phofurl
electron crashes when `ipc.send` is called with a large arg (~134mb)
the url printed in the console for the iframe is incorrect.
its giving us the url of the parent window and not contents window:
calling `shell.openexternal` api opens by default the url in the default browser and the opened application is behind the electron application
selecting these options from the menubar using the mouse seems to have no effect.
using keyboard shortcuts does work ok. both mouse & keyboard works ok for all functions in macos 10.14.5.
i get an error: phofcode
files that have not been downloaded will be deleted when exiting the electron app.
directory "locales" filed with tens of approx.
100 kb files with unknown content.
i cannot find any relevant documents about contents of electron package and "locales" directory.
there is a big jump between version 3 and 4 and i cannot find why.
1. change system language to japanese.
clicking lower triangular arrow on <input type="date">, nothing happens.
2. change system language to english.
then clicking lower triangular arrow on <input type="date">, show english calendar as date chooser.
i have also tested this in node 12.0.0 itself (the version of node included in electron 5.0.3) and did not experience any crashes.
`-webkit-app-region: drag` force an element to show contextmenu when right-clicked and cant be ignored with javascript.
wont even fire any functions bounded to it also.
- accesisbility tab is empty error in console: "empty response arrived for script source: (24) "uncaught (in promise) error: could not instantiate: source: (109)`
when creating a ``browserview`` with ``addbrowserview``, during creation the ``browserview`` has an id of "1", and it can be accessed correctly via events fired from the ``browserview`` have two forms of id, the ``event.sender.id`` and the in this fired event, both ``event.sender.id`` and are same value of "3", when it is expected that ``event.sender.id`` should be same id as ``browserview.id`` with a value of "1".
the `product` contains `isdownloadable` key (which isn't documented).
symbols are not accessible via ipc.
i get an error: phofcode
the notifications are sent well, i use the close() function to avoid persistence in notification center.
by doing this every time i quit the application i have a message that warns me that the application did not stop properly.
when running electron application on hyundai d405mli, touch events are not recognized.
(both touches inside app and in dev tools window).
tested on other 2 touch screens and it works fine.
the values returns are the values of the theme in which the browserwindow was created
the main renderer process crashes and disconnects from devtools.
the crash log in macos shows: phofcode
when using cmd+~ on a mas build the application does nothing.
native node modules are not built with correct build settings, leading to bloated binaries
window is not rendered correctly, it is displayed blank
vue js devtools cannot detect the dom.
this is intermittent and reloading the dev tools over and over will cause the tools to work / then cease to work.
<img width="989" alt="screenshot at 11 13 14" src=" phofurl
after popping up an message, all input text control is broken.
after clicking, i can 't see the cursor flickering.
i can only delete the characters that have been written on it, and i can 't enter new characters.
if make the window lose focus and regain focus, input text control belong to this window can return to normal.
e.movementx / e.movementy reports nonsense in the first callback.
that differ, because i tried 2 options: 1. defaultpath: "~/desktop": it behaves as the path is invalid.
2. defaultpath: "/home/$user/desktop" it opens up at "/home", which to my understanding the dialog stopped at "/home/" because it couldn 't neutralize the meaning of "$user".
however i need to mention that both ways works on my terminal.
and i 'm not sure if the path specified for windows, which is
electron crashes (main process) when started with hardware acceleration disabled.
setting new src in electron v6 takes
as you can see, regardless of the dock size the system returns a constant `701` number <img width="1280" alt="screen shot at 1 14 44 pm" src=" phofurl <img width="1280" alt="screen shot at 1 15 00 pm" src=" phofurl
a white background apear instead
running electron as root fails silently, unless the user sets the environment variable when the console displays the message: phofcode this behavior is really confusing as causes people to think electron doesn't work on their platform (eg see #18350) we should provide more context here.
the index.html is loaded instead of the actual routed file
app crash immediately after run
the webpage should focus properly in the placeholder text box.
window is still blinking after calling `win.flashtoggle(false)`
when click edit menu is application lose focus and click on any menu item didn't lead to some interaction with text.
ppapi process don't inheret --no-sandbox switch when browserwindow have sandbox: false property.
i am able to drag the window, but if i drag quickly enough for the cursor to leave the drag region, the drag seems to be canceled until cursor goes back into region, resulting in a choppy experience (see gif below).
this doesn't happen when using other values for titlebarstyle or when not using a browserview.
`w.focus()` doesn 't focus the window and `w.close()` doesn 't close the window if it 's cross-domain.
when i package it with electron-forge, everything in the app works, except the one `<webview>` that i have simply doesn 't load content, just a white rectangle, and opening devtools on it shows that nothing in the webview is even loaded.
running anything in console simply doesn 't work (disappears) because the context isn 't even loaded.
the only styling that webview has is `width: 100%; height: 100%;`
creating browerwindow crashes electron if done wrong.
can be worked around with wrapping everything in a `settimeout`
accelerators are reveled when clicking on any menu in the menu bar and away without alt being held.the letters stay underlined after interacting with the menu bar.
a menuitem with `role: services` always displays a menu like that used in the main application menu, with icons and headings.
screenshot from electron (actual behavior): <img width="636" alt="screenshot at 21 16 28" src=" phofurl
window doesn 't open, throws error to console (screenshot provided).
update electron 4.0 to 5.0.2, when running the build version, got "failed to read the 'sessionstorage ' property from 'window ': access is denied for this document.
but it 's ok when running in "npm run electron:serve".
auto updating fails with "an ssl error has occurred and a secure connection to the server cannot be made."
the window start with white color
the `did-fail-load` event is not emitted.
when a shortcut is pressed for a menuitem that belongs to a disabled submenu, the code get's executed, but only in windows and linux.
the spellchecker is now only called with the parts of the contractions.
a strange 'is ready' notification is shown first.
browserwindow 's cursor also becomes the touch version.
i can not find process from nodejs.
from console in dev tools, when i tried to access "process", it reported "process is not defined"
app crashes without any error message.
when i build my native (c++) addon for electron, using the latest node-gyp and the latest nan release, i get the following (and a few other) deprecation warnings: phofcode
the preload script appears to run multiple times
the app loads a blank screen / is unresponsive
creating a `promise` is allowed because the version of `mksnapshot` released with electron 3.x uses the `mksnapshot` binary inside of the `ffmpeg` folder in libchromiumcontent.
the static library and `ffmpeg` have a different set of flags, and specifically the latter doesn 't use which is known to cause issues in node (see phofurl and phofurl creating a snapshot without such flag causes electron to segfault under certain circumstances (see below).
this was being surfaced in atom with process randomly crashing when calling back into javascript after event loop woke up.
when update is done, application will be replaced to new version.
at this time, when executing the dependency cannot found as it has been deleted in the new version.
main window flickers when the app is maximized/restored or if fullscreen is toggled/exited.
the current d.ts typings for these do not support returning errors: phofcode
can select local file using <input type="file">.
when typing a letter with the accented character picker, if the letter that follows the accented character is typed too soon, both the accented and unaccented version of letter will appear.
if the user selects a directory via showopendialog that is remote (i.e in icloud) and not downloaded locally to their computer, then showopendialog returns the parent directory instead of the selected one
working fine under electron3.1.9 .
successful execution under electron4.2.2 but unexpectedly exited immediately.
successful execution under electron5.0.1 but unexpectedly exited after a while.
unexpected exit message sometimes for `errno sometimes for`errno 3`.
( both electron 4.2.2 and 5.0.1 ) image phofimage **errno log:** phofcode **errno 3 log:** phofcode
if you attach a debugger, enable network protocol, and start listening to network events, it never finish requests that return a status 304.
(keep the request pending, which lead to many network events to not fire) if you don't attach a debugger and inspect the requests in the devtools, you will notice that the request still return a status 304, but it actually finishes.
i am receiving the following error: phofcode
for all frames belonging to a domain different from the top domain of the page these two commands return null.
when `titlebarstyle` is set to `custombuttonsonhover`, the semaphore buttons appear on hover regardless if the `maximizable` and `minimizable` options are set to `false`.
process exits destroying/closing a browserwindow.
even delaying the destroying/closing of the window does not affect behavior.
app crashing after file upload window appears
2 seconds after executing, app just stop (gdb not showing any issue or crash).
even if i just execute `electron --version`, same behavior
clicked download link in renderer process, then electron app creshed.
clicked button <input type="file"> in renderer process, then crash electron app.
link opened in the browser, but the browser is not brought to the foreground.
crashed while the app was on a page, and the user was not doing much except moving the mouse around.
when creating a new browserwindow with `fullscreen: false`, the window ends up with `isfullscreenable` also being false.
link opened in the browser, but the browser is not brought to the foreground.
the resident size keeps increasing and in a sufficiently memory constrained environment, the os kills the app eventually.
this ins't an app specific memory leak as the heap size remains stable while the resident size keeps increasing.
the app crashed with no crash log
electron apps have no icon in systray settings of kde plasma desktop environment.
instead of selecting cancel by default it is selecting delete, as if the `defaultid` option was ignored
tray context menu stops working after a few context menu clicks (3-6).
when typing, i got this: phofimage following the source, i went to `electron.d.ts`: phofimage it seems the new line breaks the interpretation of the documentation.
i got the window capture but the audio capture is from the whole pc and not specific to the program.
i only want to capture audio thats coming from a window (just like discords screenshare)
the parts of the icon that are colored in white disappear in light mode, and the other colors lose some of their opacity.
when dragging a dom element who is above a webview, `dragstart` event phofhyperlink is fired but not `drag` event phofhyperlink .
this breaks libraries like `react-dnd` phofhyperlink .
a crash on app quit happens in the main process in the browserwindow destructor.
it happened a couple of times but unfortunately i cannot reproduce it reliably.
i cannot set or remove a cookie
5. signal desktop has cursor blinking in message composition box, message is marked read, and application from 2 has focus.
signal desktop mistakenly believes that it has focus and is acting like it.
when a new browserwindow is opened with embedded iframe (for example youtube video), it keeps reloading.
video size shrinks, but screen stays black , see phofurl
when i click a link, it just process visit the link inside application.
modules that use `package.json`'s `main` field will fail to load from within the context of an asar packaged app.
it appears, to me, that `internalmodulereadjson` from within `readpackage` in the commonjs loader isn't referencing asar-aware `fs` methods.
sometimes when loading the above url, nothing is visible.
always when reloading the webview with the above url, the webview will no longer render page.
e.g., signing into things like gmail, isn 't really working because it signs you in, but you end up with a non-rendering webview.
electron.screen doesn't exist in render process
`process.windowsstore` returns undefined, even when running in an appx package
the focus goes to the menubar.
the build fails with the following error: phofcode
this is the specific error i am seeing in electron 4 and up: phofcode
there doesn't seem to be a way to load a preload script into a window opened via `window.open('')` in electron 5.0.0. i'd like some way to get that to work, whether that is by setting the preload script on the main window as worked in previous versions, or making it work when setting it in the `new-window` event.
the renderer crashes on start.
the `window.opener` is null after cross-site navigation.
obj param in filepouch.js is an empty object
the old iframe is still existed in memory and still working (e.g, still playing videos)
exit with an error: the suid sandbox helper binary was found, but is not configured correctly.
rather than run without sandboxing i 'm aborting now.
you need to make sure that is owned by root and has mode 4755.
failed to load .node files.
it show the error: the specified module could not be found.
the code no longer compiles and has error ts2322.
qutting while a debugger is still attached results in the application crashing and macos showing its crash report dialog.
impossible to load a http url on localhost, even though this is like this: phofcode
regretfully, once i changed electron version on my mac to 5.0.0, i started getting "uncaught referenceerror: require is not defined" errors in the devtools console and ipcrenderer functionality stopped working, because it relied on node.js require functionality in its ' script.
nothing is logged for these requests.
http requests for static resources are logged just fine.
i am using bluetooth.selectdevice() with electron 5.0.0-beta9 and mac os 10.14.4 following a menu item selection, displaying a homebrew dialog.
sometimes, it works the first time, but subsequent selects always end up in an error saying that the action was not initiated by a user gesture.
not tested on other platforms.
the error message is: domexception: must be handling a user gesture to show permission request tested with electron 1.7.4: even confirm box (a bootstrap dialog) does not count as user gesture.
during mission control transitions or workspace transitions, the whole window flickers white.
see the left window in the screenshot
calling { types: [ 'screen '] })` causes the binoculars icon to be shown to the user when he locks the pc, even when the screen is not being recorded in any other way.
the icon isn 't shown when pc is unlocked, only when pc is locked, until users closes electron app that made call.
this doesn 't happen types: 'window ' })` is called.
the package build fails at the final linking step.
the app is not able to use node modules.
the webview content will freeze (the gif will stop working) once the iframe is removed from it and in some cases, you will be unable to close the app.
when a webview is focused, it's impossible to focus back the embedder frame.
compiling the same app with 3.0.0, 4.0.0 and 4.14, there's a significant delay (5 seconds on a i7 @ 4ghz) before the browser window is created.
the delay happens before the main.js starts executing.
before trying to create an example, i want to know if it's a known issue
file download dialog is not modal.
user can click the active page and go on operating.
`tray.getbounds()` got wrong bounds of tray.
when i print it to a pdf file, it looks ok (it fills the entire document and 100% of the photo is shown), but when i send it to the printer, the photo seems to be centered in a bigger document, with white margins around it.
so i get as a result only part of photo at bottom right of 6x4 paper and blank all over rest.
if i set silent:true, printing dialog pops up and i'm able to choose 6x4 paper size (an other options like fill entire paper).
but i'm not able set paper size without showing this dialog (which is what need).
start time is 5 seconds.
during these 5 seconds, the original static html is loaded, but none of the js is ran.
also the chromedevtools (which i programatically open do not show for 5 seconds).
i cannot investigate further because chromedevtools does not open until the app starts.
listening to the event before-input-event on the webcontents of a webview is causing strange behaviors: - reloading the webview, with is no longer working.
- in webview's devtools, the inspector is no longer working (when you click on it, nothing works)
the low-resolution version of the image is always used when specifying the filename without a suffix.
only show the windows and screens that are windowed but not the full screen ones.
instead of receiving the filelist object above, i get an empty object that looks like this on the main process side: phofcode is there something preventing me from sending this filelist to ipcmain?
is there a way i can get around this?
on some cases when quitting the app on macos it crashes.
no file name is shown: <img width="797" src=" phofurl (also, the dialog is attached to the window in electron 5 but not 4, i 'm not sure whether that 's expected or not).
opaque warning with no stack trace
when adding extra parameters to crash reporter, the corresponding values are limited to 63 characters only on windows and seem to have no limit on mac
there is no padding on the left of dialog titles.
developer tools keyboard shortcuts are hijacked by electron app
error: cannot read property of send of undefined it is undefined in the javascript file rclient.js but works in my index.html inside the script tags as below when i manually send test data to below ** index.html ** phofcode
a newly created window that is not shown and has not been shown affects the display anyway on system startup.
after showing the window, this doesn't occur again, even if you restart the app.
restarting the machine produces issue once again though.
**[see figure 1 below]** allowing display to turn off produces issue too.
this is a slightly different manifestation of same issue; window has shown before, then was hidden.
after that screen went to sleep and came back, leaving these artifacts.
prevents page from loading, disconnects webtools from page
only every second notification click fires the onclick handler when the notifications share the same tag.
nothing happens it doesn 't eve print the console.log("in the app"); it just jumps the second like after few seconds without throwing any error and without opening the app.
first call: no response, no callback, no results returned call again: callback returns error, console output: `false`
when rendering a webview inside a browserview and calling app.quit then electron will crash.
when running it throws an exception typeerror: is not a function.
when the list of available commands on process are printed out, it is not present.
the other functions listed as allowed on the api are present and work when run.
when sandbox mode is disabled, getprocessmemoryinfo() is present and returns the expected promise.
right-clicking and left-click-drag behaviors are either extremely slow (10 or more seconds to fire) or never fire at all.
when touch is turned on, touch event work just fine, this issue only occurs in conjunction with pen use.
gpu rasterization blacklisted (via the chromium software rendering list phofhyperlink ) on recent hardware and os versions.
here is a table of the current rules affecting macs: rule id | description -- | -- 1 | ati radeon x1900 is not compatible with webgl on the mac 10 | nvidia geforce 7300 gt on mac does not support webgl 111 apple software renderer used under vmware experiences synchronization issues with gpu raster 112 intel hd 3000 driver crashes frequently on mac 113 some gpus mac can perform poorly with gpu rasterization.
disable all known intel gpus other than intel 6th and 7th generation cards, which have been tested.
114 some gpus can perform poorly with gpu rasterization.
disable all known nvidia gpus other than the geforce 6xx and 7xx series, which have been tested.
115 some can perform poorly rasterization.
disable all known amd other than r200, r300, and d series, which have been tested.
116 some can perform poorly rasterization.
119 there are display issues raster osx 10.9 126 disallow use of opengl core profile < 4.1 130 older nvidia macos render incorrectly 150 macs nvidia experience rendering issues high sierra until 10.13.4 151 rendering artifacts older macos releases intel 159 disallow opengl use old nvidia 160 disallow opengl use old amd to call out some particular issues: * rules 113, 114, 115 - include various used as recent as 2015, not because of any known problem, but because they haven 't been tested.
* rule 151 (new for electron 4 from chromium 61) - all disabled when using el capitan (originally released 2015) or older.
this is due to an actual issue phofhyperlink .
many above devices have retina screens, up to 7.5x as many pixels as a single screen.
so they don 't well at without rasterization, especially when going full screen it causes high cpu usage.
electron app crashes when `alt` key is pressed
1 test failure phofhyperlink : phofcode
the window role is ignored and no menu appears as a result.
changing my code to use (windowmenu as any) works as before.
it would seem the implementation is out of step with the typescript definitions and documentation.
i've a project with a dependency on spark-js-sdk phofhyperlink .
when i use a browserified version of the sdk (built from source) it works.
when i switch over to using the officially npm module, ciscospark, it partially works but ultimately crashes.
the app turns white and a renderprocess dies.
if i've the dev tools open after the crash they state > devtools was disconnected from page.
> once page is reloaded, devtools will automatically reconnect.
when i export i see following in console received signal 11 segv_maperr
- eg1: in animated charts (using chart-js / react), animations are smooth in 2.0.9, choppy in 4.1.3.
- eg2: navigating in the app is also lagging while some operations are being done, like having a submit button showing a loading animation.
the webview's window never receives the mouseup event.
this breaks any library that relies on receiving the mouseup (such as d3) if the user accidentally overshoots the edge of webview before releasing mouse.
this behavior does not occur with an oopif as far as i can tell using chrome, and it did not happen with electron 3 and before.
the application crash with the following: malloc: * * * error for object pointer being freed was not allocated malloc: * set a breakpoint in malloc_error_break to debug
* open electron window * display "we are using node.js , chromium , and electron ."
there is about a 20 second delay from application start up before the express rest server that is started in the main process to be able to receive and process rest messages.
after about 20 seconds after app start up, the rest server responds normally.
in chrome recent versions, and in electron recent versions (observed in v3.0.6), in the case of text inside a contenteditable div, using css3 multi-columnn mode, i am finding the following behavior: if a <p> element starts in one column and continues to the following column, the cursor will only be visible part of <p> displayed second column.
the cursor part of <p> first column is invisible.
any <p> element wholly contained first column is ok. demo: phofurl note: electron v1.8.4 displays caret correctly all columns as expected.
i suspect this is a chromium bug which occurred sometime after electron v1.8.4
download electron.app as one user, and get a crash when attempting to run it as another
browserwindow.getsize() phofhyperlink when fullscreened reports a slightly taller height and wider width than it actually is.
so a div in my application is being placed incorrectly and has contents that are not being seen due to this.
when a navigation occurs _during_ a preloads scripts execution the same process is re-used as chromium does not think the navigation has been committed yet.
this causes a memory leak and all native node modules to break.
but uncaught error: module did not self-register.
i noticed when running the electron quick start phofhyperlink that `isvisible` returned true when minimizing the window.
when using the `browserwindow` option `baseurlfordataurl` the first load works as expected, but performing a reload, either from the browser window itself or from the main process with `win.reload()`, base url is lost and replace with data url itself.
before reload `window.location.href === 'file://test '`, after reload it is something like `window.location.href ===
ll the post request seems like that lost the body parameter.
the executejavascript part is completely ignored.
i tried to simplify it to a simple console.log thing : nothing.
i tried to run with a disabled sandbox mode : nothing.
edit : added some try/catch in my javascript, and i see referenceerror: require is not defined.
inspecting the background color shows that's correctly set to #2e3440
memory increase always,last out of memory
click the element, without any response.
* the _hello_world_ example says thtat module did not self-register.
* the _context_aware_ example crashes.
on local drive - ajax call successfully completes.
when transferred to a shared network drive for the company with a unc path, the ajax call crashes electron.
even if i delete the whole project and clone it again, i have to explicitly use otherwise the extensions are still available in the devtools.
the promise is rejected with an error: `error: gpu access not allowed.
reason: gpu process crashed too many times with swiftshader.` the gpu process does in fact crash (only once); the `gpu-process-crashed` event is raised.
the hardware gpu is the only one reported, and it has `active:false`.
in `basic` mode, the information is for the intel hardware gpu - which is not the one doing the rendering: phofcode in `complete` mode, information is extended with `devicestring` and `vendorstring` belonging to swiftshader.
it's also now reported as `active: true`: phofcode
electron_asar.js:166 return old.apply(this, arguments) error: the network name cannot be found.
at function) [as dlopen] at (module.js:671:18) at object.module.
(anonymous function) [as .node] at module.load (module.js:561:32) trymoduleload (module.js:504:12) function.module._load (module.js:496:3) module.require (module.js:586:17)
network performance, via `xmlhttprequest`, is highly degraded when app is minimized.
`getlastcrashreport` returns `null`, even though a crash was triggered with `process.crash()` and crash reports are present in the `crashdirectory`
when electron window is closed before the program was loaded an extra background proccess (probably renderer) will be started.
the video is detached to be played in a pip, and a window is created with dimensions of 0x0px.
you can play it, and the audio will work, but the video is not presented to the user.
electron blocked the `beforeunload` messege and throw an error, but the window was still there
the electron-app starts and the driver does not connect but fails with the general error "devtoolsactiveport file doesn 't exist"
findinpage doesn't work after reload page.
found callback receive event with no matches
when creating an n-pi dll it is linked against node.exe.
this will fail to load with electron.
when a is created with a control that just has an icon and the segments are replaced with one that just has a label both the initial icon and the new label are show.
the same happens when going from label to icon.
while electron does do that, electron 5 throws an error and exits: phofcode launching with --no-sandbox opens up a window and after a second crashes: phofcode
electron app with accessibility permissions hangs or freezes macos for a few seconds before opening
when performing a get request to an arbitrary host, the app crashes after **a few seconds after completing the request**.
usually ranges between 5 and 20 seconds.
if i right-click in a flash application, the flash contextmenu opens, but if you wait ~1 minute, the menu is closed and the flash application becomes unresponsive.
using cmd + backtick toggles windows using the "british" keyboard layout, but _not_ the "british - pc" layout.
the callback is called after (during?)
the local html file doesn 't show in webview.
all of the event handlers except for `onerror` are null.
therefore, i cannot attach the necessary handlers.
shortcut is not registered, for no key combinations as far as i can tell.
return value is always false.
electron helper crashes and one has to reload to get webview up and running again
changing the devtools theme, doesn't reload the ui, it only worked when i closed and reopened the app.
and when i opened the app again, whole application were black themed.
error electron.d.ts parsing failed: c:/python27/python.exe --silent -- npm script failed with code '1': - parsing electron documentation
calling `menu.insert(pos, item)` with an integer outside the range `[0, menu.items.length]` (for `insert*` methods) or `[0, menu.items.length)` (for `get*at` and `is*at` methods) causes electron to crash.
non-integer values throw as expected.
large integers `>= 2**31` also throw, rather than crashing.
window is set successfully twice, but upon the last time it will not set window size.
after leaving the electron running for a day i realized that my pc was using around 2gb.
when popup is hide it should removed from the memory.
voiceover only sees close, minimize, full screen buttons.
main process sends an object with multiple `float64array` instances, renderer gets all of them converted byte-wise to `uint8array`.
with electron 1.7.16 it was converted to `array` with correct values.
may be related to #13055 or #657
it appears in the dock menu (example: `raven` in phofurl
the promise often never settles.
not even after several minutes.
my code in electron.prod.js file (which is responsible for the main process) looks like this: phofcode after build was created, the app was installed and running error appears: electron_error phofimage
upon the print request from the renderer using await everything freezes
from `.getsources`: phofcode from `.getalldisplays`: phofcode
texts are getting blurry when the app loses focus or being resized, and sometimes just randomly.
the texts are not sharp, makes the app unusable.
app crash when using `offscreen: true` on some websites.
in electron 4.0, it will trigger whatever it is download success or not even after `destory`
just an improvement, maybe we can define it as a bug.
i find build script output gzip file size without difference, then i read source code.
i find return gzip size, so printfilesizesafterbuild can't find any difference.
that means build mode can only show the result after gzip, but never show how much file size reduced by gzip.
finally , i fix it without much effort.
you can look at phofurl
we use css modules and async import.
in our production build we have many css chunks with duplication of css selectors.
for example, we have component `page` and his css module class `.page`.
after production build we have many chunks with equal class `.page_page__14anb` and styles...
i know that technically web workers aren 't _officially_ supported in react-scripts yet, however given that we have issues like #7741 supported, and the discussion in #5886 i would have expected this to work.
currently `workerize-loader` works within react-scripts by using the webpack syntax.
this works perfectly well in development, however when it comes to a build, this seems to break the build.
instead of the expected file chunks being output, it results in no files being output, like below: phofcode note empty section after `file sizes after gzip`.
after this, `build` directly only contains files copied from `public`, no build artefacts.
when trying to create a react app in mac, the command `create-react-app` is stuck in loading fsevents.
react-app-polyfill has pinned dependencies (no '~' or '') which makes it difficult for consumers to minimize package duplication.
it is not possible to reference a scoped package with the `--template` switch, e.g.
after running `npx create-react-app <app_name>` yarn audit fails because of `handlebars` vulnerability (which has been already fixed).
path: react-scripts > jest > jest-cli > @jest/core > @jest/reporters istanbul-reports handlebars
using a percentage value for the `opacity` css value will work fine in development with hmr, but the minified bundle will incorrectly set all opacity values to 1%.
for some reason my create-react-app cant seem to find the dependencies i added through yarn.
i have tried the following: * re-installed yarn * re-installed node + yarn * re-created the project * removed node_modules removed node_modules and yarn.lock ran 'yarn '
i have a switch that compares a variable of with an enum type against that (global) enum, and eslint (the one contained in cra) is complaining that the enum is used before it was defined.
if instead global enums should not be used, then that ought to be the warning.
as already described in other tickets ( phofurl ) cra does not support changing the webpack config parameter `output.webpackjsonp` ( phofurl ).
this makes cra generated apps not being able to coexist on a single page.
both apps will try to set window.webpackjsonp and thus override the webpack chunk registry.
following up with the documentation (as stated here phofurl and trying to import an svg, will yield the following error phofcode
target directory is not cleaned up when running `create-react-app` with option and aborting installation when warning about typescript package is being deprecated showed.
after creating the build, i run the command to validate if my production build is running properly or not.
for that, i use serve -s build/.
that gives me an error, which is not making any sense to me.
first off, i really like the new documentation theme.
this is a minor complaint, although it probably affects some users more than others.
the link color `var(--ifm-link-color)` has a contrast ratio of ** 1.92 ** .
this does not meet phofhyperlink aa contrast requirements.
when enabling dark theme via the navigation bar, the site darkens completely, except the **get started in seconds** section on the home page ( phofurl
running npm start from the cli results in an error.
when using css modules, if you compose a class from a `.module.scss` file, the dependency (that is, the module you import to compose from) does not have its scss transformed correctly.
while the compose will work correctly, and scss is not preprocessed away down to recular css.
last version of react-dev-utils requires the library open@6.4.0 that has an high level arbitrary command injection vulnerability phofurl
i translate an existing project from raw webpack into create-react-app because webpact made me headache.
i used "react": "16.11.0" in dependencies and "react-scripts": "3.2.0" in devdependencies.
when i use "npm start", all is ok, but when i use "npm run build" and deploy my production into tomcat, found all svg cannot be shown when window.location changed.
just import svg like (baseurl given in jsconfig.json): `import machineerror from and use it like: `<img src={machineerror}/>` when a svg shown in root path " phofurl it 's ok. but when my page jump to " phofurl the above svg is missing.
because the image url is " phofurl don 't know why "management" is added into img path.
just tried to create a project by `yarn create react-app app`, but got an error: phofcode
getting failed to compile error during build process on `$ react-scripts build creating an optimized production build... failed to compile.
postcss-svgo: typeerror: cannot set property 'multipasscount ' of undefined error command failed with exit code 1.`
creating a new app in a folder with an existing .gitignore fails with error `error: dest already exists.`.
this is using the master branch (i discovered it while forking it to customize cra), but it will happen on tagged releases as well.
the reason is checks for: phofcode in order to decide whether to append cra 's gitignore to the existing file.
but `fs-extra/movesync v8` instead of throwing an error with code `eexist` seems be throwing an error with message `dest already exists.` and undefined code.
before v8: phofurl after v8: phofurl
the typescript template serviceworker.ts phofhyperlink has a dead link on line 11 ( phofurl which i believe should be directing to phofurl
i have the following `.env.development` file: phofcode running `npm start` launches two chrome windows.
one is incognito, the other is not.
the react app is loaded into the non-incognito window.
there are two problems: 1. two windows are being opened.
2. the app is launched in the wrong window.
i can run phofcode and it only opens one window.
utilizing create-react-app, when running tests,
given a project where homepage is set to "./" and an mp3 asset in src/sounds/foobar.mp3, when we use import with the mp3 we found this: in local mode (yarn start) the generated url will be which is only right when localhost is serving from the root, but not when it is being served from another path (e.g.
it should be in build mode (yarn build) the generated url which just plainly doesn 't work.
i'd like to assume that invoking `react-scripts test` with the `--ci` or `--ci=true` option should run just like `cross-env ci=true react-scripts test`, but it doesn't seem like so.
`cross-env ci=true` works & exits from the test suite once finished, but `--ci` does not.
i 'm using in my `package.json` file like so: `"build": react-scripts build",` and from some advice on my so post phofhyperlink i 've added a `static.json` file in the root folder of my project with the following text: phofcode
i am following this phofhyperlink on how to test components in isolation from the child components they render, but i am getting the following error: phofcode i haven't ejected and i have created `src/setuptests.js` with the following in it phofcode from what can tell it * should * work, but it's not.
also tried ejecting to see if that would fix it, but then my entire application stops working because of #7753
using an scss mixin (located in another file) that uses the `url` function makes the file unable to be found.
example: phofcode phofcode this should try to lookup and but it instead tries to look for and respectively.
this was working prior to 3.1.x.
compilation fails with `typeerror: cannot read property 'foreach' of undefined` if object destructing with rest props is used in `npx` created app.
__versions of react-scripts affected__: 3.1.0, 3.1.1 (with different error messages), 3.1.2 __most recent react-scripts version that works__: 3.0.1
i upgraded from react 16.8.0 to 16.9.0 and upgraded from react-scripts 2.0.3 to 3.1.2. afterwards, my font icons aren 't found anymore, and when i checked the build output, they aren 't even placed in the build.
when build or start the app, `react-scripts` would validite the code by eslint, that's great.
and sometimes, we may using `// eslint-disable-line some-rules` to disabled validite for some lines, that's works well too.
however, sometimes, the rule of the `eslint-disable` comments was missing, for me, it happend when i **moved a package out of a `monorepo`**.
all eslint configurations, presets and pulgins ware set by workspace, not in package itself.
as rule was missing, i'll expected comments has no effect and package could still works (or maybe we can got a warning), but infact it will interrupt our build and throw an error like `definition for rule 'xxx' was not found `.
it cause that we have to configured eslint for each package of monorepo so that we can easlier singled out a child-package to build and test.
running e2e:docker tests fails on master when i clone the repo on my machine
false positives from eslint due to version bug.
i updated from react-scripts 3.0.0 to 3.1.1 and my manual mocks stopped working.
after running a blame on phofhyperlink i found #7480 where the roots specification was added to fix a performance issue.
per the jest docs phofhyperlink , the (verified) migration step is to move `__mocks__` into `src` which should be documented in the changelog and test setup docs.
in 3.1.0 the `resolve-url-loader` lib was added that breaks sass modules composition.
either removing the lib from the webpack config or downgrading to 3.0.1 fixes the issue.
setting up projects with `create-react-app` within subfolders do not lint.
however, **when opening the project subfolder as root in vscode** (pictured below) **or setting up a new create-react-app project as root, linting will work as expected**.
the change introduced in pr #7480, adding `roots: '<rootdir>/src']` to the jest config, changes jests default behavior of mocking node modules, which is a breaking change if you were using the default setup before the `roots` config was added.
the [jest documentation phofhyperlink says: > if the module you are mocking is a node module (e.g.
: lodash), mock should be placed in `__mocks__` directory adjacent to `node_modules` (unless you configured `roots` to point to a folder other than project root) and will be automatically mocked.
so after updating react-scripts my auto-mocking broke because i keep mocks in `<project root dir>/__mocks__`, just as jest docs said i should.
this new requirement use for node modules is also not documented in create react app filename conventions docs phofhyperlink , it only mentions that test files need be `src`, and it doesn't mention that `roots` has been configured, so together with what jest docs says it's confusing.
and change was also not mentioned 3.1.0 release notes.
it ought have been breaking changes section since it limits where jest is looking for tests.
even though docs already said that tests should be `src` someone might have placed tests outside of it, and node mocks documented by that they should placed outside of `src`.
and create react app doesn't allow us override `roots` config so i can't add a new root so only way fix this as it move `__mocks__` into `src/__mocks__`, which i don't want do.
suggest two changes improve upon this, whilst still keeping performance improvements: 1. update default create react app config for `roots: ['<rootdir>/src', '<rootdir>/__mocks__']` 2. allow option overridden can submit pr for these changes if you agree they're way go.
css hot module replacing is refreshing the whole app when using sass modules with sass functions.
i don't know if this is related to webpack, node-sass or sass-loader, but it seems weird because we have 2 projects that use the same config, one using a custom getin function to get colors from a sass map and other doesn't.
the first one refreshes all app when a sass file is modified and the other one doesn't.
editing my css code on a project bootstrapped with the latest version of create-react-app (v 3.1.1) causes the whole app to reload on the browser as opposed to the former behavior of just applying styles without reloading whole application.
for example, editing css code of another project of mine bootstrapped with cra v2.1.8 doesn't reload entire app.
it might be worth noting that i use css modules in both projects.
when one of the directories in your location is prefixed with a `.` the `react-scripts test` isn't working.
you can see it when running `npm test` and then choose to run all.
the glob expression used seems to be invalid: phofcode
passing a custom `setupfilesafterenv` as a cli arg to `react-scripts test` command ignores the `setupfilesafterenv` generated by cra.
using the ie9 polyfill throws an error when using it inside a webworker since the windows object does not exist.
usually, the polyfills do check whether the window object exists or not.
same applies for ie11 polyfills.
(using ie11 for testing) _requires window object:_ `ie9.js:` `ie11.js:` `window.promise = _does not polyfill fetch if window object is undefined:_ `ie11.js:` phofcode
trying to build cra result in the error phofcode
`npm start` ends with a cryptic error due to exceeding the amount of files the system can watch: phofcode
like suggested in webpack's doc here phofhyperlink allows to override publicpath.
so i put it at the entry of my app, but only imported images url are working.
js and css files url are still on static url.
after building my bundle then running `source-map-explorer` on my app 's chunk i found that there were `*.test.tsx` files included in the analysed results.
sure enough, when i searched the chunked file 's contents, i found test code referenced and included in there.
using an scss mixin (located in another file) that uses the `url` function makes the file unable to be found.
example: phofcode phofcode this should try to lookup and but it instead tries to look for and respectively.
this was working prior to 3.1.x.
scss + css modules problem.
during production build only, composing from one scss + css modules stylesheet into another results in invalid css in the final main.hash.chunk.css stylesheet.
this problem does not occur when doing a development build.
in the final css file, there are basically two copies of the composed stylesheet, one of which has not been processed by sass, the other of which has missing properties (only properties that had sass variables?)
this results in invalid syntax in file, and invalid styles.
webpack throws 2 types of errors when prettier's `parser-glimmer` is required.
create a basic app via 'yarn create react-app my-app --typescript ' generates two warnings during initial installation: warning "react-scripts > has incorrect peer dependency "eslint@5.0.0".
warning "react-scripts > has incorrect peer dependency "eslint@5.0.0".
eslint shows a no-unused-vars false positive with for-in loops.
looks very similar to phofurl this issue didn 't exist in react-scripts@3.0.0
hot reload is not working with css modules, after upgrading react-scripts to 3.1.0 or 3.1.1 it works fine with react-scripts 3.0.1
when a project has an invalid `.eslintrc.js` and is started with `extend_eslint=true` create-react-app will fail to compile.
after upgrading to 3.1.1 (and 3.1.0) it 's no longer possible to configure eslint rules that are part of the editor configuration.
`yarn start` will fail with an error about an eslint rule it doesn 't know about.
phofcode this makes sense since starting with eslint@6 it will raise errors when attempting to configure unknown rules.
however i do not expect existing projects to break because they 've decided setup editor only eslint configuration.
i guess eventually this could be solved with the experimental eslint extension, but that 's still experimental unfortunately and still seems have issues of it 's own.
when upgrading from react-scripts@3.0.1 to latest the mocks are no longer picked up from directory
updating from cra v3.0.1 to v3.1.0, created some naming collisions in my built app.
i'm getting errors like phofcode with `c` being defined twice as an object and function.
the original code itself is something like phofcode and both `that` and `getvalue` end up resolving to `c`, creating the collision.
when `_updateproperty` tries to call `getvalue` it ends up trying to call `that` instead.
"react-scripts" needs eslint 5 and eslint 6 at the same time due to "typescript-eslint" \'s "eslint-plugin" and "parser" need explicitly eslint 5
`domparser` in test returns `htmlelement` values with unexpectedly `undefined` `innertext` properties where the same code run in firefox 's console returns the expected `innertext`.
when running `create-react-app client` i get the error below (--version 1.5.2)
i am polyfilling `promise.allsettled` via `core-js` and everything is working fine on chrome and firefox.
however, when i open my webapp on microsoft edge, i get an error stating that `allsettled` is not defined: phofcode honestly i am not even sure if this should be filed here or under the `core-js` repository, in case it does not belong here will move the issue there.
`yarn start` results in the following error phofcode
`react-scripts build` seems to be removing inline javascript code from index.html that should not be removed.
it happens to code paths that are conditional and the condition contains a build-time '%variable% '.
workaround: move the build-time variable outside of the condition.
environment variables with dollar sign ( '$ ') are overwritten.
**owasp top10** a10-unvalidated redirects and forwards ** sub-category ** unvalidated redirects **vuln impact** malicious users can borrow url redirection vulnerabilities to deceive security conscious users to achieve fraud, phishing and so on **vuln description** url redirection/jump (url redirection) **vulnerability detail** for example browsing to phofurl will automatically redirect you to this ** url ** .
specific example: browsing phofurl will redirect haveibeenpwned.com.
from node-10-16 lts, impossible to run nm start after npx create-react-app my_app errors are: events.js:174 throw er; // unhandled 'error' event error: spawn /usr/bin/palemoon enoent at at onerrornt at process._tickcallback emitted 'error' event at: at onerrornt process._tickcallback npm err!
memory@0.1.0 start: `react-scripts start` npm err!
exit status 1 failed the memory@0.1.0 start script.
this is probably not a problem with npm.
there is likely additional logging output above.
a complete log of this run can be found in: after installed package-lock.json, as suggested above, the server doesn't start and no error message.... yarn.lock installed but node_modules can not with many error again: code etarget notarget no matching version found for undefined@node_modules notarget in most cases you or one of your dependencies are requesting notarget a package version that doesn't exist.
a complete log of this run can be found in: version is 6.10.2 i don't want to remove my official repos packages (it is a very bad practice) ad i hope it possible to just use react with lts node application,if not, it housld be impossible ofr me to learn and use react due miss-respect version lts concept and unmaintainable applications from this crucial point.
when setting a `proxy` setting in `package.json`, as expected this tunnels traffic to the proxy location, however it also seems to tunnel traffic like this: as expected, auto refresh on updating my app no longer works.
thanks for the great work!
i 'm deploying the app to dokku with .env looking like this .env node_path=src .buildpacks phofurl package.json "scripts": { "dokku": { "predeploy": "", "postdeploy": "" }, "start": "react-scripts start", error response phofcode
the package.json for react-scripts pulls in version 3.2.1 of webpack-dev-server.
in the /client directory of webpack-dev-server (in the node_modules under react-scripts) there is a file called live.bundle.js that includes v3.3.1 of jquery.
owasp dependency checker flags this version of jquery with because versions before 3.4.0 jquery have a vulnerability.
as per #7164, running `npm react-scripts test` ignores the `--coverage` option for jest - that is, jest will pass even if coverage thresholds are not reached.
note that this is almost certainly not an issue with jest - it is an issue with `create-react-app` 's configuration of jest.
i use the source-map-explorer to analyze the production bundle.
event though, redux-logger shouldn't be in the bundle (because of the check against node_env), it is!
this is code i'm using: phofcode
`react-scripts` is using `@babel/core 7.4.3` which uses `lodash < 4.17.13` and is subject to phofhyperlink .
please upgrade to `@babel/core 7.5.0`, which uses `lodash 4.17.13` and is not subject to the vulnerability.
i 'm using react-create-app for my application.
i 've used npm run eject to get control over all the configuration files.
i 'm trying to write unit-tests to some of my services in my application.
i 'm importing modules inside the spec file using es6 import syntax as follows: phofcode i 'm getting the following error while running npm test: phofcode my jest is configured to run babel-jest compiles the spec files since i 've ejected from react-create-app and this is default behavior.
here 's my jest config taken from package.json: phofcode as can be seen babel-jest is configured for any kind of extension file so it should work: phofcode not sure what 's going wrong in here, would appreciate if someone could pinpoint problem.i wish unit test some services in react app.
my service is written with es6 and when i run npm test it fails with: i also tried adding babel plugins inside `webpack.dev.config` file (i 've used npm eject)
i have installed "create-react-app" globally on my pc using "npm install create-react-app -g".
and it worked just fine for months.
i had previously created a lot of react app using the "create-react-app app-name" command.
until a few days ago when it sudden stopped working and started giving errors.
i have tried various things suggested but with no luck.
so after days of trying to solve the issue i am asking this question.
have tried doing the following things with no luck: 1> using the "npm cache clean --force" and then "npm cache verify".
2> also unabled my antivirus (norton) and then ran commands.
3> installed latest node version 4> intalled latest npm version and updated it using command "npm install npm@latest -g" 5> followed instructions on this stackoverflow link phofurl to change registry.
and a few other things.
creating a websocket instance interferes with socketjs used for hmr, causing both sockets to behave unpredictably, hmr refuses to work all the time and sometimes both socket connections gets dropped.
we have a lerna monorepo setup with cra project, typescript node.js server and javascript projects for shared codes.
react script has jest dependacy with 24.7.1 and i installed jest as a devdependancy for one of shared package.
it installed jest 28.x.x version and cra preflight check fails.
i have forked from master in order to test/use the environment variable to disable inline images (added in #6060).
what i have found is that setting in `.env` does not disable inline images (as suggested by the docs phofhyperlink ) - but instead sets no limit, meaning _all_ images are inlined, regardless of size.
i tested by building a project with 2 images - one larger than 10,000 bytes and one smaller: * with no config, the `build/static/media` folder contained the large image.
* with folder contained no images.
* with folder contained both images.
i'm writing a reactjs app example, but i can't connect it with another running process through the use of the libraby node-ipc
when running `yarn start`, the eslint errors are shown from files i have ignored with `.eslintignore` and the app won't start.
the raw project isn 't running after the creation: ` events.js:170 throw er; // unhandled 'error ' event error: spawn /usr/bin/chromium enoent at at onerrornt at emitted 'error ' event at: at onerrornt npm err!
dfm-front@0.1.0 start: `react-scripts start` npm err!
exit status 1 failed the dfm-front@0.1.0 start script.
this is probably not a problem with npm.
there is likely additional logging output above.
23 this is probably not a problem with npm.
there is likely additional logging output above.
24 exit [ 1, true ] `
tested in both css and scss, it is removed either way.
testcase: phofcode you will see that the above rule is stripped from output.
i am looking for a workaround other than inserting the above into the index file (write your answer here.)
running-tests.md is showing the installation commands as `npm install --save xxxx` and `yarn add xxxx`.
> note: this bug first appeared on july 4. re-export of modules doesn 't work correctly with a typescript based project.
by re-exports i mean the following statements: phofcode when trying to import from such files, i get: - `{}` if it is `import foo from './path '` - `undefined` if it is `import { foo } from './path` what is already investigated about this problem: 1. it works correctly for javascript files, but not typescript (regardless of whether a project was created using `--typescript` flag).
2. it 's not a typescript issue (i tested it in isolation from the create-react-app project).
3. it 's reproduced on different operating systems.
4. it 's reproduced with different versions of react-scripts (2.x, 3.x) and typescript (2.x, 3.x).
5. it worked once when we created a new project on the system that has `yarn` as default package manager.
but we are not sure why.
after removing `node_modules` and `yarn.lock` and installing dependencies again using `npm install` exports won 't work as expected.
6. it never works when dependencies are installed using `npm`.
7. when project contains old package-lock.json (created week ago), it works, but after removing `node_modules` and `yarn.lock` installing dependencies again using `npm install` exports won 't work as expected.
in one of my components (my `todolist` component), i 'm trying to set a breakpoint on a line where two variables are destructured from `this.state` in a form submit callback.
the relevant code for the component is below: phofcode my vscode launch config is the following (`launch.json`): <details> phofcode </details> here is a video illustrating what happens with my breakpoints: phofurl (the video may not be visible initially because it 's being processed, but it should be downloadable).
the websocket request for hot reloading is forwarded to the proxy phofhyperlink target.
for example, when using `"proxy": " phofurl in my `package.json`, i end up getting a request for in the server running on 5000. and of course hot reloading doesn 't work anymore.
you might think "no shit, sherlock."
let me preface this a bit.
i 'm creating a single page application that talks to wordpress rest api.
i 've made some changes to it, so i can get gutenberg block data as json, which is about 100 times nicer to deal with than html.
wordpress core blocks in the data are still mostly html, and most components can be rendered with the same component, but i don 't want to maintain a map of which block uses which component, because that map would be out of date when a new block is added the wordpress core.
so i 've done this.
phofcode if there 's list block in content, this code will try import list component, but if it doesn 't exist, it will return default component.
this allows me only create components for blocks i want handle differently, and all i need do is create file in directory, no need add any code anywhere else.
it works, in production build.
the development build crashes with error "failed execute 'removechild ' on 'node ': the node be removed is not child of this node.".
afaik, this error usually appears when you 've code that swallows errors, but case, need swallow error, and don 't give fuck about file not existing.
guess that error: cannot find module './list ' error that 's caused by failing dynamic import causing this, but how do avoid it?
an app that literally consists of `<div>hello</div>` doesn 't work in ie11 in development, but does work when built.
the documentation link in the serviceworkers.js file generated by create-react-app is out of date: phofurl the link redirects to: phofurl this page does not contain any information about service workers / progressive web apps.
it seems like the new correct page should be: phofurl
i have .env file with some variables defined ( api paths ) at project start.
now i try to update these variables, but nothing change when i run my app, on devel or production it is the same.
but i can add new values which are read without problem, but can't update/delete previously added vars.
tried to : - delete .env file or use .env.local and others .env.xxxx - delete node_modules and reinstall - delete build directory and build again - clear yarn cache clear navigator cache each time, variables defined at project start do not change/disappear, while these just created are updated.
it seems that they are in cache somewhere or looks like hardcoded
the environment variables defined in `.env` file can only be accessed in the `public/index.html` by using `%react_app_env_name%`.
if i add another html file let say `public/callback.html`, the `%react_app_env_name%` work as a normal text.
i wanted to create a new react app but installation failed.
i have made several react apps before and it never failed like this.
- tried running `npx create-react-app my-app` according to phofurl but fails - tried clearing cache `npm clear cache --force` like everyone suggested but has no effect - tried deleting `package-lock.json` but has no effect - tried `npm install -g npm@latest` and `npm install` still getting the same error
adding a colon (`:`) to `title` and/or `sidebar_label` content in a markdown document causes an error in v2 - works fine on v1.
toc generated in side navbar doesn 't honor escaping of angular brackets.
instead all content within angular brackets gets stripped.
dev server crashes on file copy of files that contain `pages` in their path.
phofcode `server.js` grabs an incorrect path: phofcode
if `h3` has escaped angle brackets, the hash link generated is incorrect.
i noticed a strange bug when switching pages (home -> docs -> blog) css styles are ** duplicated ** (re-injected as i understand it correctly).
when using backtick within a table, the `pipe` `|` wont be espace by the `backslash` ` `
* (tested on 1.9 til 1.14; might have missed a few in-between) has highlight.js as `9.15.8`, which accepts `>9.16.1`.
from my tests, docusaurus only works with highlight.js `<=9.15.10`
custom prism theme configured in `docusaurus.config.js `will be overridden by theme-live-codeblock.
note, this is for v2.
currently, the array requires that the `"docs"` refer to an individual document.
while this works there are 2 problems: 1. users navigating to just `/docs` get a 404.
2. the `"docs"` navbar item does not remain highlighted if the user navigates around to other pages with in the docs section.
when viewing a docusaurs (v2) site via google translate it ultimately routes to 'page not found' after a brief flash of translated page.
example using the docusaurus v2 docs phofhyperlink
given the breaking change `withbaseurl` being renamed to `usebaseurl` phofhyperlink , it is not possible anymore to use with the latest package 2.0.0-alpha.23` which rely on old naming `withbaseurl`
the right toc for documentation pages does not include headings that were generated outside of the markdown syntax.
there's no line break between 2 block quotes.
(a clear and concise description of what the bug is) the sidebar nav links in the dark mode have bad contrast ratio.
this is a ** tiny ** bug.
the color of the menu link arrows in dark mode is black.
if a doc page with a `<h1>` tag that contains, for example, a `&` character, the hash link (`href`) is not properly generated in the right-side bar.
the styling for algolia search seems to be broken in some cases when using docusarus v2.
currently in v1 of docusaurus, when the site is generated, it uses the `title` metadata of each markdown files (default/out of the box behavior).
however, this title does not have any id or anchor links unlike all other headings found in the markdown files.
this is causing a very weird behavior when title of page matches search results (if algolia search is integrated).
clicking on link from algolia search result, takes us to correct page but header/title page is tucked under site navigation header.
i believe this happening because title page does not have an "id".
when search query matches title, it tries to generate a permanent link to that particular "heading".
so, algolia result generates a permanent link using closest parent that has an `id`, which `docsnav`.
the issue easier to see with an illustration.
when the site is built with the option `--skip-next-release`, relative links from one doc to another in the * versioned * docs are broken.
when a file is moved from one directory to another in all past versions the links to that file are broken
i am part of the team from algolia/docsearch phofhyperlink which features search for docusaurus.
we rely on meta tags to pick up the right version from the pages generated phofhyperlink by docusaurus.
the v2 does not include these meta tags anymore.
the algolia search experience will be broken due to duplicates for every websites we crawl
v2: phofcode crashes after 92%
when `cleanurl` phofhyperlink is `true`, relatively links in both `page.html` and `page/index.html` have the same target, whereas the former should e.g.
be `target.html` and the latter `../target.html`.
when adding new documents to the documentation, the sidebar does not show up if the id of the new document isn 't `doc1`, `doc2`, ..., `doc*`.
error while creating project inside existing directory.
i 'm starting a fresh install, but it does not use the port specified with `--port`
in my custom docusaurus page, a simple button event handler does not execute upon click.
when using algolia search, and enabling cleanurl, most results show up twice in matches.
the publish-gh-pages phofhyperlink script doesn't run at a windows command prompt, with or without `use_ssh=true`.
the script runs in git bash.
why won't it run at a windows command prompt?
when navigating between two pages in the same group, the entire nav pane flickers blank.
and the chevron in the group header of two pages flashed back to closed position and reanimates open.
`yarn version` doesn't run in git bash or at the windows command prompt.
(i don't know whether it runs on mac.)
by contrast, `npm run version` runs fine.
the `og:description` meta tag will contain raw markdown if the sentence it 's derived from contains any.
the css bundle, `main.css`, seems to include all css files from the static folder.
it should only include css from the css folder.
my use case is that i would like to put a complete static site into a folder within the `static` folder, and then render it into an iframe on a custom page.
the problem is that the css is getting bundled into main css file and causing docusaurus site to render incorrectly.
when i write this on docs markdown markdown
phofurl tag list do not support cjk image phofimage
* the translation for doc title is not working in the versioned (v1.0.0) doc.
* with `yarn start`, if the title in the translated doc is not the same with title in source doc, chrome can 't access translation doc, firefox fallback to use title in latest doc, doc is accessible.
(a clear and concise description of what the bug is)
footer is missing from docs pages in v2
screen shot at 6 06 44 pm phofimage the sidebars on the docs pages dont stick in desktop safari (safari version 12.1, macos version 10.14.4 mojave).
i change doc1 md file with some accents but the are not rendered.
this is what i see: lrem ipsum dolor sit met, consectetur adipiscing elit.
fusce rhoncus ipsum tempor eros aliquam consequat.
lorem ipsum dolor sit amet, consectetur adipiscing elit.
vivamus elementum massa eget nulla aliquet sagittis.
proin odio tortor, vulputate ut odio in, ultrices ultricies augue.
cras ornare ultrices lorem malesuada iaculis.
etiam sit amet libero tempor, pulvinar mauris sed, sollicitudin sapien.
the following markdown will throw an error in the docs because the <code > component seems to expect a string for children.
phofcode throws this error: phofcode
new scrollspy script fails to highlight any link in toc if it does contain non-latin characters
first off, thanks to the maintainers for this tool.
i am in the process of trying to migrate an existing jekyll site to docusaurus and was following the installation instructions phofhyperlink in the getting started section of site.
when yarn is installed, it all works as described by instructions.
however, if yarn isn 't present (and i only use npm), `docusaurus-init` correctly works, but npm script `examples` in `website/package.json` seems to be a no op.
manually running `npm run examples` exhibits same behavior.
running `npx docusaurus-examples` or * does * work, however, and is workaround i 'm using.
this may be a bug in `npm` rather than docusaurus (looking at code, i don 't see why it wouldn 't work), but i thought should report it case others are running into it as well.
node version: v12.3.1 npm version: 6.9.0
when i run wpm start (or even yarn start) the live reload server start but when i try to modify something inside the website folder, the page reloads but nothing is update.
it seems like chnages on the files triggered live reload but nothing is rebuilt.
cannot register a custom page in the sidebar and cannot display the sidebar on a custom page.
i have some headers that has special characters ( '< ', '> ').
although the headers are rendered fine, the table of content does not render anything in between those characters.
when a heading contains an anchor tag (for specifying a custom hash), the anchor link generated by docusaurus (in this module phofhyperlink ) doesn 't inherit the hash from the anchor tag.
instead, the generated hash includes anchor tag 's content (attributes included).
(a clear and concise description of what the bug is)
docusaurus generates a 404 link in redux docs.
the generated page of en-us phofhyperlink has content, but the generated page of zh-cn phofhyperlink doesn't.
and the source code of this document is here phofhyperlink
(a clear and concise description of what the bug is) running `docusaurus-init` command gives only a single file i.e.
example website files are not found.
when an underscore character (`_`) is included in an anchor link, docusaurus converts the underscore to a hyphen (e.g.
this behavior is different from github's one, so it's very confusing.
i am creating a new page in a docusaurus repository where versioning is enabled.
i added a new page for the "next" release docs and want to include it in the sidebar.
the new page does appear with proper content but the sidebar label is incorrect.
i currently running on version 1.7.3.
this bug is in association with #1271 and pr #1281. this bug exists in the docusaurus 1.7.2 as well as it exists after the fix in pr #1281. let us say we have a markdown document `a` in version 1.0.0 and there are links to this document another markdown file `b` version 1.0.0. now the current or as we call it docusaurus the next version, we remove document `a` and link to document `a` `b`.
if we now start website with `yarn run start` and go to `b` version 1.0.0, link to `a` is broken.
i cannot currently nest the code tabs inside a numbered list.
normally, to nest something like a code block in a numbered list, you insert about three spaces in the markdown.
it shows up as an unnumbered paragraph in the html.
unfortunately, this does not work with docusaurus and prevents use of the code tabs inside a numbered list.
in addition, unindented code tabs break autonumbered list.
when referencing other docs using `.md` extension, docusaurus is failing to generate a proper link.
language-specific code tabs creates a new tab for html comments within code blocks.
related to: - phofurl - phofurl - phofurl
i have multiple directories with markdown documents.
after creating the initial version by running `yarn run version 1.0.0`, the very first page/doc has incorrect title and sidebar label.
i have a document which need to display some images, which are put under 'docs/assets ' folder, and reference in the .md file like ` sample phofimage `.
just followed the guide phofimage next, i want to create a new version of the document and need to use an updated version of the image.
i executed `docusaurus-version` and old version .md files are backed up, but 'docs/assets` folder isn 't backed up to 'versioned_docs '.
so two versions of md files reference same one 'docs/assets ' folder.
i can 't replace image in folder directly, since it impacts old document.
think static assets of each version also need be backed up by `docusaurus-version`.
current behavior looks like be a bug.
found this while investigating a jest issue: phofurl when navigating a "topics" (?)
menu on a mobile screen size, clicking an h3 header that has markdown formatting does not closes the menu.
`npm install` within a `website` directory throws an error around `highlight.js`.
(a clear and concise description of what the bug is)
the default css (i guess this is the reason) is making navigating between documentation sections pretty annoying, because the whole layout jumps around (example in "actual behavior").
og:url still has trailing /index.html even when cleanurl is true in site cofnig
when you have a large table of contents with many items, some of them get cut off at the bottom of the page.
a user visiting the site might not know there are additional items in the table of contents.
hi, i'm using some referenced links and i've had a problem, to use the new feature coding blocks.
referenced markdown links: markdown-links-issue phofimage i've tried to use the language-specific code tabs markdown-code-issue phofimage after that, my links have been broken.
the chevron (dropdown icon) on the collapsible sidebar is rendering differently on different systems.
in my `siteconfig.js`, i configured `docsurl: ''` so that when docs are served, i don't have the `.../docs/...` in the url.
this seems to break the image links/rendering.
after merging a change in md that fixed the link from github's standpoint, the deployed website lost most translations from crowdin.
when a gridblock component is defined and an image is specified, the default value for `imagealign` is not used (see `gridblock.js`)
(not sure if this should be a proposal instead).
when using both subfolders and versioning, document ids become quite confusing.
when the `docsurl` setting is configured to put all docs in the root, i.e.
`docsurl=""`, images that are linked to in documents using ` example phofimage ` are broken.
whereas this works fine when built/published; images are linked to correctly.
the `/versions` page shows a list of versions, but "documentation" and "release notes" links are not working.
on the browser, they are linking back to the same page (`/versions`).
also, the documentation does not have any reference to where "release notes" are stored.
are they expected to be a tag in github or can we have an actual doc published elsewhere or another static page/doc within docusaurus.
`markdownblock` works for simple markdown, e.g.
phofcode but it does not work for complex markdown, e.g.
phofcode in this case, all markdown is output as text.
some site users have reported a 1px gap between the header sections on mobile devices, especially iphones with ios 12 and safari / chrome.
this gap appears on multiple sites, including phofurl phofurl , and phofurl , so it appears to be something about the default docusaurus mobile theme.
> note: i have not observed this myself - i'm filing this for other users who have.
i'm unable to add docusaurus package using yarn on mac
recently @yangshun fixed an issue in the generation of the sidebar.json (see #1124) however, i am now facing an issue when trying to compile a project with multiple version.
when compiling, it complains about the document id: phofcode
summary: in-page links such as ` some link text phofhyperlink ` are not getting turned into actual links to the final html page.
the sidebar title and doc title don 't change after updating it in file, specifically after creating a new version.
similar to issue to phofurl and phofurl
(a clear and concise description of what the bug is)
running `npm run version <x>` generates broken sidebars on version ** 1.5.1 ** .
when the docs have a structure like this: * foo * doc1.md (id: "baz", title: "foo baz") * bar * doc1.md (id: "baz", title: "bar baz") and versioning is enabled, then `npm run version ...` will copy those files despite no changes made.
this causes the build pipeline to fail.
if id 's are made unique, (e-g- `id: "foo-baz" and `id: "bar-baz"`) this does not appear to be an issue.
the translated documentation pages do not show the left toc (table of contents).
linking to other documents by their id or filename results in a relative link which doesn't work in built bundle, but works with `docusaurus-start`.
this is because our hosting (firebase) and locally hosting seems to add a trailing slash, which may mean this is thus expected behavior?
the local server does not livereload anymore after the first livereload.
using the latest `1.5.0` release, previous/next pagination doesn 't use the page title as the label.
it always default to ` previous` or `next ` instead of `page title `.
i tried other releases such as `1.3.2` and it 's working, so something must have broke in newer releases.
currently, after my pull request #1054 phofhyperlink i realized that maybe it 's not best option to render raw html into the og:description meta tag.
i think that it just doesn 't look nice or at least it doesn 't help a readability at all.
maybe we could stick to the option of rendering a pure "text-like" output into the og:description.
i tried initializing a project and publishing it to github pages and the page has no css.
i am trying to publish my site on windows and `yarn run publish-gh-pages` and `npm run publish-gh-pages` fail in the same place i have push access to the repository and can push from the command line.
(a clear and concise description of what the bug is)
the docsearch logo has slightly too much padding around it, especially by the bottom.
the sumo-challenge folks want to update their current website.
but they are having problems.
their latest site is in `master`, but they cannot publish it.
phofurl is still the old site.
running the new, updated docusaurus site for it locally works fine.
when published as-is, it breaks with a continuous redirect.
yes (a clear and concise description of what the bug is) sidebar title and doc title don't change after updating it in file
error: cannot find module at at function.resolve at at layer.handle [as handle_request] next route.dispatch layer.handle [as handle_request] function.process_params
in several of my docs, docusaurus is inserting a `<span>` on render that makes the element overflow onto the right-hand navigation - see screenshots: <img width="1920" alt="screen shot at 1 55 02 pm 2" src=" phofurl <img width="1920" alt="screen shot at 1 55 07 pm 2" src=" phofurl <img width="1920" alt="screen shot at 1 58 38 pm 2" src=" phofurl
yarn run build and publish-gh-pages do not copy *.css files from our website/static/api directory that contains doxygen-generated api docs into website/build.
all the other files, hundreds of them in a deep directory structure, are copied fine, but these two css files are ignored.
adding more complex "folder content" to static breaks the build.
docusaurus uses the same object to have localized strings of both `title` and `sidebar_label` of a page, using `id` as key that maps to `title` of that page.
this is fine in most cases, but if the `id` and `sidebar_label` of a page are the same then the keys conflict, causing both them to mix up.
this leads to behavior like #324. this gets even weirder when same values are used across different versions docs, where `sidebar_label` versioned doc gets mixed up with `title` latest doc.
hello, i was about to file a pr to fix an issue with the docsearch documentation on phofurl (replacing `lang` with `language`).
then i realized that this change had already been fixed phofhyperlink in the repo, but is not visible on the live website.
screenshot of the website: image phofimage current code: image phofimage
console error thrown due to missing element.
according to the documentation phofhyperlink : > for github.io type urls, you would combine the url and baseurl like: > url: ' phofurl > baseurl: '/reason-react/', so we should set `url` as ` phofurl even though the root of the docs is ` phofurl but if we set it like that, urls in sitemaps would be: - phofurl while it should be: -
when using the cleanurl: true setting, docusaurus generates new sub folders for each site.
for example, if you want clean url `/docs/connectivity`, what docusaurus generates is a sub folder called `connectivity` with an `index.html` file in it instead of the original `connectivity.html`.
i really like the idea of this, but when the `index.html` within a cleanurl subfolder references an image from `docs/assets` folder, link is broken because it's still relative to original `docs/` folder.
(a clear and concise description of what the bug is)
language syntax specified in markdown code blocks is ignored, eg ` phofcode text ` render the same output.
today 's (27th july) revision in master was supposed to contain the fix for the language highlighting.
in fact the css bug of `language- <lang>` is fixed and now css attribute is `language-<lang>` without space.
this was fixed by phofurl
document image links are broken when the site has a baseurl.
instructions for linking to images within documents are here phofurl however, this does not work when the site has baseurl other than "/".
i work in a github enterprise environment.
publishing, as implemented by #689 , works well.
files are pushed to the repo with the same folder structure as in local.
the site loads well in localhost:3000. the problem is that the static pages reference '/css/main.css' instead of '../css/main.css'.
this happens with custom css and images, too.
if i manually tweak the path to '../css/', site renders as intended.
i troubleshooted this with @endiliey on discourse, but we couldn't find root cause.
this may be similar to #448 .
i get an error when loading scripts from a cdn because there is no hash set to the cdn url.
this could be fixed by giving more options to the `scripts`-array in the config: > additionally this would add support for `async` and `defer`attributes phofcode
renaming a doc file in the `docs` folder seems to break links of the form ` inner link phofhyperlink ` in the `versioned_docs` folder.
throws exception: undefined is not a constructor
jest fails to close the express server in the afterall hook and leaves an open handle.
after running into this issue with both supertest and axiosist, and then trying to roll my own solution, i'm starting to think this is actually an issue with jest.
- relevant supertest github issue phofhyperlink - relevant axiosist github issue phofhyperlink - relevant stackoverflow question phofhyperlink
when a heading includes an equal sign, the link in the table of content differs from the id on the heading, breaking link.
this is an issue with documentation generator, however, i was not able to figure out which tool is used.
after uplifting to react 16.12.0 all of my jest tests that do a shallow rendering and user snapshots started to fail because the name of the component is now rendered as <undefined> if the component is a memo component.
an example is a component that with react 16.11 rendered in the snapshot like this: /> after uplifting to v16.12 it renders like this: <undefined /> these components are using react-redux v7.1.1
when using es modules the `import.meta` variable is not supported correctly: - inside a test file; - inside an external files being imported into a test file.
error occurs such as `syntaxerror: cannot use 'import.meta' outside a module`.
when jest fails a test for what it thinks - wrongly - is an unhandled rejection, it does not indicate this at all.
i 'd like to use `expect` with other test runner like mocha in typescript project.
however i 'm not able to import `expect` types without `jest` while `@types/jest` is conflicting with `@types/mocha`.
the test fails whenever an error is being asserted, throwing `failed: undefined` at `it(`.
the test proceeds normally if the the assertion is commented out.
i am using node-tree-sitter phofhyperlink in one of my projects.
this library is in essence a thin layer wrapped around the tree-sitter phofhyperlink binary (tree sitter is an incremental parser for multiple programming languages).
this library works fine, until i write tests for our program using.
if two tests (indirectly) import the `tree-sitter` library, the second import _sometimes_ fails with `typeerror: illegal invocation`.
running each test separately doesn't exhibit this behavior.
running `jest --clearcache` fixes this issue _sometimes_.
however, i am unable to reproduce this bug outside jest.
when using ava phofhyperlink i am able to re-import this library over 100 times without issues.
have already submitted a bug report phofhyperlink with the folks of `node-tree-sitter`.
but because am only encountering bug with jest, i'm thinking there could be going something wrong at jest's side.
when there is no 'verbose' property defined in jest.config.js, it defaults to `true` and not `false` as per phofurl
as i considered, only file that names `<something>.test.js` should be considered as a jest testing file, but not `test.js`, so this maybe is a bug.
in a project where we've setup both `babel` and `jest` there is a problem where the `.matchall()` method is not found in a string instance only in the tests.
when running the code normally via `babel-node` everything is fine.
when the same code is ran through a test it fails with: > typeerror: str.matchall not function
i am trying to mock a settimeout inside of a setinterval with jest, but am seeing confusing behavior with async/await and i do not know whether it is a bug, or if i am doing something wrong.
awaiting inside the async function passed to setinterval causes settimeout to never run.
if i remove the await in the function below, the settimeout is successfully set.
installs old jsdom 11.12.0 that includes left-pad@1.3.0 in github seems to be fixed, but in practice the version installed is still the one above, not the one in the package.json on github
jest resetmodules set to true is causing troubles with mock function call hits
when using the configuration option `setupfilesafterenv` in a monorepo setup jest is unable to locate files in child packages of the repository:
there seems to be a parity between `jest-jasmine` and `jest-circus` on dealing with `test.concurrent` for the below example `jest-jasmine` throws phofcode whereas `jest-circus` passes the examples i 've found for `test.concurrent` mention that the test should return a promise phofurl
when using the builtin `assert` library, a call to `assert.fail` causes jest to render the test failure as if `strictequal` were called, showing an expected value of `undefined` and an actual value of `undefined`.
this is confusing because it seems like a `strictequal` check is failing when it shouldn 't be, as the expected and actual values are the same.
in reality no equality check is being performed.
further, method signature that test reporter defaults to (`assert.fail(received, expected)`) has been deprecated phofhyperlink .
i ran into this issue on jest@24.9.0.
mocking spy return does nothing i'm about to lose my mind here; it seems the entire mock system is b0rked.
i copy-paste the examples from the docs, and they don't work.
if `modulenamemapper` jest config is used to provide default mock for specific extension then `jest.mock()` can 't be used to mock individual file.
attempt to do `jest.mock()` changes mock for all files with that extension.
a number of paragraphs in the brazilian portuguese react tutorial page phofhyperlink are in english while the rest of the page is in portuguese.
according to the docs, jest uses half of the available cores by default when in `watch mode` to ensure that it is unobtrusive and does not grind the machine to a halt.
this is true for the `--watch` mode, but it is still using all availables cores - 1 in `--watchall` mode.
documentation for `clearmocks` configuration option is misleading.
here 's a link phofhyperlink to the documentation.
it states that the `clearmocks` will call `jest.clearallmocks()` ** between ** tests, however it 's called ** before ** each test.
the same is for `resetmocks` and `restoremocks`, while `resetmodules` has correct description.
should report the wrong declaration of step definitions
whenever i use `tomatchsnapshot ()` as in `expect (val).tomatchsnapshot ()` and that it fails, no exception is being thrown as this is done for other matchers.
not sure if it matters, but i always use async calls.
reusing the same objects with property matchers results in unsuccessful validation of the object towards it.
when using `test.each` and 1 or more testing scenarios is failing, jest doesn 't provide any information about the test data provided.
given a test with a large test data, it might be quite difficult to track down and isolate the one responsible for the failure
there is an issue with when using virtual drive mappings.
suppose the root of the watchman project is c: foo bar and you create a virtual drive mapping of c: foo bar to r: and then try to use the crawler from the r: drive things won't work correctly.
this exhibits itself when trying to build a bundle using metro from virtual drive.
hello, i am facing the issue that an unexpected token error happened when run tests with jest in a react app.
phofcode this is my package.json.
having a `modulenamemapper` alias of `static` causes tests to fail.
error message: phofcode the unit test will randomly fail because of top exception.
and it not just occurring in a specific unit test.
it can be anywhere a cross of different test case.
some of test even not using dom object.
example: phofcode and i 'm using: jest: `24.9.0` also was tried change to same happens.
any idea about this case?
when you mock a module like and that module calls out to `fetch` there's often times where you'll get `typeerror: network request failed` from your `fetch` lib (in my case `whatwg-fetch`)
mocking static methods on default exported es6 classes does not work.
the `test.todo` function doesn't work for angular 7.x projects.
it gives the following error: > typeerror: cannot read property 'apply' of undefined 60 | 61 | }); > 62 | test.todo('getlatpadding should return padding'); | 63 });
i am using jest to run my tests, but i have found an issue when i try to get the coverage report in a ci environment.
in my local machine is working ok running `node_modules/.bin/jest --coverage --watchall=false`: phofcode meanwhile, the same command in other machine (in a jenkins environment): phofcode
when i use jest to test data retieval from google-cloud firestore i get the error : > typeerror: setinterval(...).unref is not a function at new unref at object.<anonymous> at object.require at object.require object.require object.require function.require clientpool.v1 [as clientfactory] clientpool.clientfactory [as acquire] clientpool.acquire [as run] firestore.run [as request] request
on my vdi machine the user folder is a volume and so it is a path like when runing jest test in a project located in the user folder **it failed founding no tests**.
mocking module import slows down tests execution a lot.
running a jest test results in a test build failure: phofcode when console logging `dupmap` at the source location, `dupmap` is undefined.
i don 't see a control flow where this is possible because when dupmap is declared, it is set to empty_map if it 's value would be undefined.
the error also bound to a material-ui style object, which doesn 't make much sense.
currently, when run in watch mode, i got the "contain no test" error for empty spec files.
adding `--passwithnotests` in the cli has no effect.
i just wanted to contribute.
followed the guide, and got: phofcode to make sure that it is not my fault, i repeated the same with other system, and got: phofcode so, as we can see, errors occur in different files, but in both cases they are linked to eslint.
maybe need to use specific version?
again - i did not made any changes in both cases, strictly following the given scenario.
in a `describe`, i have a bunch of tests that should be executed only when a certain condition is fulfilled.
one official solution phofhyperlink is to use `test.only`.
the problem is that if the condition is truthy, no other test *in the entire test file*, that is, in * different * `describe`s, gets executed.
instead, i see `pending test 'xxx'` for every single test in all describes.
using chai.js 's `.deep.eql` makes the test hang indefinitely when checking against an object with a getter that throws an exception.
i cant spy on any of my components phofcode or phofcode both are not working wrapper.instance() show error => **cannot read property 'instance ' of undefined** component.prototype show error => **cannot spyon on a primitive value; undefined given**
when an error is thrown in a test, it is hidden by a subsequent async error.
ideally jest would print both and as either of them could be root cause.
got this message when running cli command with a bad parameter: phofcode i seems to me that the message (`"$0"`) is wrong (looks like a misinterpreted regular expression replacement).
when i run a js function that does cryptographic operations on node.js is takes around 400 milliseconds.
when i run the exact same js code in a jest test, it takes a minute.
below statement works in reactjs runtime: `import { actiontypes } from however test execution fails with message that `at not found of undefined` for below block.
(basically, actiontypes is not getting imported) ` export const getdata = () => { return { type: actiontypes.at.get } } ` it gets fixed if we use below import: `import { actiontypes } from
i have an `input type='file']` on a page and i want to be able to remove files (one at a time) from it.
nowadays it's supported by using [a neat trick phofhyperlink through the `datatransfer` object (normaly used for drag'n drop operations).
phofcode it ** does ** work in the browser... ...but not in jest tests where i get a nasty `error: uncaught referenceerror: datatransfer is not defined]`.
following [this advice phofhyperlink i tried to mock `datatransfer` as a global in my `jest.config.js` file.
like this: phofcode but it doesn't work because `input.files` is `filelist` (readonly, no constructor) and `set` is not.
`datatransfer.files` is `filelist` which why the trick works!
why `datatransfer` not available in jest testing?
can somebody clarify ** if ** this is a bug?.
this basically is my coverage report file | % stmts | % branch | % funcs | % lines uncovered line #s all files 100 100 83.33 100 sblendid.ts 100 83.33 as you can see i have covered `100%` of the `statements`, `branches` and `lines`.
yet only `83.33%` of the `functions` have been covered.
i am wondering how this is possible.
if i have covered all the lines i would think that implies that have also covered all the functions.
invalid hook call when using `jest.resetmodules` or with dynamic `require` in test
i was trying to mock redis module using `jest.mock('redis')`.
the test failed with following error phofcode
when i set jest config in package.json like this phofcode when i run `yarn run jest`, i get this
currently we have configuration for `aliases` in `webpack` and `package.json` for `jest`.
phofcode one of the new files has `configuration` in the name, because of that `jest --watch` is failing, when normal `jest` runs perfectly fine.
phofcode i think that it 's an issue with regex behavior.
currently an ejected cra is slow when we use `@material-ui/icons`, especially when importing from `@material-ui/icons/esm` instead of importing the icons separately.
it takes about 120 seconds with a cold / empty cache and 5-6 seconds with a hot / filled cache.
according to #2593 a .only on a test should remove the other tests from the test output.
no tests found when running from webstorm in linked folder(linux)
using jest 24.9.0 and ts-jest 24.0.2, we are getting non-deterministic build failures with this stacktrace: phofcode the chance of any individual jest run failing this way is small, but due to the large number of projects in our repo, we are seeing it frequently in our ci builds.
the following bit of code phofhyperlink is where the error happens: phofcode the `fromsource` call results in an exception being thrown.
based on some added logging, convertsourcemap is trying to convert a comment with some base-64-encoded json into that json, but the comment is just cut off in the middle, resulting json that fails to parse.
i suspect root cause here some concurrency issue resulting transformed.code containing an incomplete copy of file that cut off early.
however, i 'm interested whether you 'd accept a pr to address this at a shallower level meantime by catching exceptions thrown by `fromsource` and treating them same as if it had returned undefined or an empty string.
the code already handles case where that happens, and worst would happen (afaict) absence source mappings rather than an incorrect test failure.
when using `module-resolver` in our babelrc, the jest.requireactual does not get effected.
other calls like `jest.mock` do however.
the visual diff between two objects shows a wrong diff when the objects contain a differing function on one field and identical typed arrays on another field.
in that case, the visual diff indicates a mismatch of the typed array field but not of the two functions.
when using named imports the documentation for providing a manual mock isn't super clear.
given a setup like: phofcode and usage similar to: phofcode one would need to define their mock in tests like so: phofcode this isn't very clear from the documentation, and i spent quite some time attempting different workarounds to be able to create custom mocks for named exports.
of course the setup to just get a default empty mock works perfectly fine.
i have just updated to jest 24. a `sinon.stub` i was using is now failing.
something internal to jest transforms functions to getters, it is not the case with jest 23. console output jest 23: <img width="519" alt="screenshot at 19 06 20" src=" phofurl console output 24: <img width="542" alt="screenshot at 19 07 00" src=" phofurl
when i have two tests that use snapshots, if the first timeouts, the content of the first test will be in the snapshot of second test
`timeout.unref()` in node tells node not to let the timeout block process shutdown.
that means that these timeouts are never going to stop jest from shutting down, but `--detectopenhandles` still reports them as such.
any intervals or timeouts that has been unref'd should not be reported by jest as an open handle.
i'm not actually a jest user myself - i'm reporting this as i received a bug report phofhyperlink on a testing library i maintain, because jest is complaining about an unref'd interval used here.
phofcode writing code like this, jest will throw rangeerror, here is the error message: phofcode the array `expect` function got has an item that is an about 3mb string (base64 image), and `tobe` got the same base64 string.
when running tests which invoke typescript classes having static property initialization under class declaration, jest report this error: phofcode
the code with private class fields is crashing when executing with jest with error: phofcode but direct run of the file under test works fine: phofcode
i have two methods in a file that return a new array by reducing the one that is passed in.
on one of the methods, the coverage detects that it 's been tested, however on the second method with exact same ode (just accessing different properties), coverage is reporting lines are untested, even though method is being used in multiple tests.
`jest --only-changed` does not take mocks into consideration when choosing the tests to run.
running `jest --findrelatedtests <filepath>` with upper-cased part of path does not find any test.
jest cannot recognise async function type.
node version: v12.8.1 jest version: 24.9.0
transform isn't ran on matched modules of modulenamemapper.
jest.runcli returns a promise, if the tests are successful the promise is resolved with detailed information about the tests ran.
if a test fails, the process exits before promise is resolved/rejected
i saw #4117 and #7496, which said that it should be fixed in #7498 (released in jest 24.8.0), but apparently not in my use case where `projects` is set in root 's jest.config.js.
i bumped minor versions of @babel/core and @babel/preset-env and my react-components tests becomes mysteriously failing
memory heap continues to grow when importing mathjs library.
i noticed that when running the jest phofhyperlink , my cpu usage soon went up to 90%, due to multiple instances of `node-notifier` hanging around.
there are a couple of other people with the same issue over on in the jest repo phofhyperlink .
here 's an example process that was spinning: -actions run again,exit tests -closelabel "close" -message "-&m-t 1 of 29 tests failed" -title "4% failed" -ap` here 's is a log of a single iteration the repeated system calls it seems to be unable to unlock a semaphore: system-calls.log phofhyperlink i experimented around with `node-notifier` library 's api and noticed that if i passed same configuration options `node-notifier` as `jest` does, program never ends.
to see what i mean, run following in stand-alone program.
you 'll notice it displays notification but program keeps running indefinitely.
phofcode however, when removed `actions` attribute, program ends after notification is shown.
could also get program end, even with actions, by adding an explicit `timeout` attribute: phofcode brought up this issue with maintainer `node-notifier` and both us think it would be best if `jest` team considered adding timeout here phofurl
the `notifymode` is ignored when specified at `jest.config.js`, but not when used via cli.
tested on macos mojave 10.14.5.
jest throws a type error phofcode similar to reported here: phofurl
my tests are not capturing my html class names when using css modules, this is despite using `modulenamemapper` and `identity-obj-proxy` for my `.scss` files in my `jest.config.js`.
if `aftereach` uses a `done` callback, `afterall` runs before it is called if one of the tests fails inside a callback
promise.all behaves weirdly in jest tests when `testenvironment` is set to `node`: phofcode
if one of the directories/paths do not exist in the `roots` array of the config file, jest spits out a generic misleading error of - phofcode this will lead one to believe that it cannot detect any test file, or any file in the folder for that matter.
additionally, docs do not specify that all directories in `roots` array must exist.
i expected this to just skip non-existent roots instead of failing whole thing.
not sure if it 's a bug or by design, but i cannot provide the `collectcoveragefrom`, `coveragethreshold` in a project level config i.e.
[winston logger] filename and linenumber displayed in stdout when using winston logger is wrong is displayed instead of filename:line_number where the winston logger is called.
this message is display with `5000ms` even when it is not accurate.
follow up to phofurl tracking for jest 25. cc @pedrottimark
if an asynchronous test throws something other than an error, the resulting error report is useless
when creating an object and passing it to a jest.fn mock function, and after the function invocation the object is modified, the object the function was called with also gets modified.
jest coverage didn't ignore some of `!
** /node_modules/ ** ` as mentioned in `collectcoveragefrom` screenshot from phofimage
i've got 2 test files.
in the test, a webassembly object gets instantiated.
this instantiation seems to stall for some reason when running the test in ci.
locally running jest passes the tests fine.
in ci they fail with this error: phofcode when `-i` is used however, they pass as well in ci.
jest: 24.8.0 node: 10.15.0 local env: macos, 10.14.6 (18g84)) ci env: circleci, docker linux #37-ubuntu smp mon mar 18 utc 2019 x86_64 gnu/linux
jest v24.8.0 on windows, when project located in the network mapped folder, this line phofhyperlink cause issue with resolving location and throw this error: phofcode if i change this line to `prefix = ' ';` all work correctly.
i cannot understand what this line do (in current version), can someone explain purpose of it?
or it can be changed without any problems?
when using the `projects` option, `testpathignorepatterns` that is defined on the root of the config does not take effect.
it needs to be defined per project to take effect.
after running watcher programmatically and killing it with sigterm (which seems like an appropriate way of killing jest in such scenario) my terminal is broken with - its lflags are are different than normal.
`stty` gives such result before running the script: phofcode and such result after running it: phofcode notice how i.e.
`-echo` gets added to lflags.
i 've seen many similar reports (e.g.
#6229 #2920) but i 've not seen any with the solution i found.
jest lite phofhyperlink is using v22.1.4 because the latest version of `jest-circus` (v24.8.0) doesn 't work in the browser.
i haven 't tracked back where browser support stopped exactly but the compilation errors are pretty clear on why the latest version doesn 't work in a browser env.
<img width="924" alt="screen shot at 11 48 33 am" src=" phofurl
in the json output generated by --json flag, when source maps are used: location of assertion in test file does not resolve correctly in the the test file specified by #/testresults/n/name source map maps _source_ to _build_ file.
the location specified is already mapped to the _source_ file, but name is of _build_ file.
filed as a bug instead of a feature as this fails principle of least surprise.
a lot of undefined typeerrors are happening in files imported in jest.
does not set the length of the returned stub, unlike jest.fn(<function>) this breaks methods like ramda's curry phofhyperlink function as it expects the length to be correctly set.
if you have a mocked module where you want to change the implementation of a stub function between tests rather than statically setting it when you run jest.mock(...) use of mockimplementation is imperative.
collectcoverage do nothing when using projects configs.
global jest.config.js phofcode client jest.config.js phofcode
modulenamemapper cannot work when i use "util" as the path alias
if the package.json changes, a dependency change like enzyme or jest itself might cause test failures.
our ci process runs tests changed since master (as a full run is nearly 10 minutes on our build servers) and we miss test failures.
jsdom integration with custom resource loader doesn 't work in parallel mode.
jsdom resourceloader: phofurl `testenvironmentoptions` is serialized to simple json to pass to the worker thus causing custom resource loader to be jsonified.
tests do not work as expected in parallel mode and are producing cryptic error: phofcode related phofurl
i have a tool for asynchronously loading scripts, using jest for asynchronous testing, but jest has timed out and can't respond to scripts.
how do i implement this feature?
after updating my `jest` version to `21.x.x` from `20.x.x`, my tests are unable to run due to an error: > configuration error: > > could not locate module ./data/rules.json (mapped as ules.json) this file is requried by `psl` like this: internals.rules = (rule) { which conflicts with my configured `modulenamemapper`
while debugging in vs code per the instructions here phofhyperlink , i quickly noticed that when stepping through logic, the indicated active line would keep showing as the last one in any given file, which was incorrect.
after stepping through it in the browser, i found that all names were jumbled because of all cobertura markup in source map.
once i disabled code coverage build, debugging worked like a charm again.
npm audit failing for jest 24.8.0 with severity high on 26k+ dependencies
test suite failed to run $ from 'jquery '; syntax error: unexpected identifier
jest-haste-map is finding duplicate modules despite being the directory it 's finding modules in having been blacklisted.
i am trying to run test but always got an error said that phofcode
if i have a test failure with `tobecalledwith`, it shows what was actually passed in vs what was expected.
it appears that printing this out causes an issue when there is a `buffer`.
when using `fs.readfilesync` to read out a long public pem file for example, it seems to hang forever.
i was able to replicate with an arbitrary string in a buffer of similar length.
it seems at about 200 lines it starts to take long time, and at the real length of 400, it fails for an indefinite period of time.
`console.log` inside test makes output after test ending.
phofcode the actual result: phofcode
calling throws with a range error (maximum call stack size exceeded) when the expected and actual objects both contain circular references.
setting `jest.settimeout(value)` is ineffective when set in one of setup files
currently, when cloning straight from the current version `master` phofhyperlink the test for getting changed files in `hg` is failing phofhyperlink .
i'm running the latest version of `hg` (5.0.1) in an old mac i have but the same happens in any of other machines i've cloned jest into.
the error i get is due to pattern we use to specify a `revset` returning an empty revision range.
phofcode related prs: * phofurl * phofurl * phofurl
create a new jest project.
encounter a "typeerror: expected a string" error.
the generated table for the `--coverage` flag is not aligned properly on the terminus terminal.
i'm not sure if this is a terminus issue or a jest issue.
here is a picture of the problem: tablenotalignedterminus phofimage
jest depends on a version of jsdom with a bug in which form elements defined with `form='form-id'` outside of the form hierarchy are not detected using `form.elements`.
jest's jsdom dependency specifies version 11.x.x phofhyperlink , of which the latest version came out in july 2018 and is no longer being updated.
version 12.1.0 of jsdom, released in september 2018, fixes this bug ( see pull request phofhyperlink ).
this version jsdom has breaking changes including requiring node v8; i am not familiar enough with jest to know if the changes will break jest.
note that jsdom frequently updates its major number and introduces breaking changes; 15.1.1 is the current release as july 2019.
currently, the `tsconfig.json` and `tsconfig.tsbuildinfo` files are being distributed in some (maybe all) jest packages in npm.
if my bash command isn 't wrong, this files are summing up to 6.5m after installing jest.
since this files aren 't used when running jest, they can be removed without side effects.
es modules that are objects (not functions) are bypassed/ignored by coverage tests, even with written tests for the module.
confirmed in following versions: 24.6, 24.7.
*, 24.8 (23.6 is working normally)
libxmljs package doesn't work properly when used in jest test
i have a jest project using a directory structure that looks like this phofcode `card.jsx` imports some values from `user.js` which uses es6 modules.
`card.jsx` imports using a relative import path `import { settings } from when i run jest, i get the following error when `user.js` attempts to import from another file: import { membershipstatuses } from './orgs '; syntaxerror: unexpected token { 3 | 4 | > 5 | import { settings } | at at at object.<anonymous> it seems to me that jest is not transpiling files in other directories outside of the root of the jest project.
how do i configure jest to make this work?
when spying on an object or class, it is possible to mock a method that 's defined higher up on the prototype chain.
but when the original implementation is restored, the parent object 's method is assigned to the child 's.
if there are multiple pending promises (async / await) and one fails that has potential side effects that are supposed to be dealt with inside a `beforeeach`, subsequent tests can fail.
i am not sure how / if this can be resolved, but an issue here would have saved me a lot of troubleshooting.
when i 'm trying to use `modulenamemapper` to resolve import from `constants` local folder, it does not work.
it works fine, when i use singular form: `constant`.
i think it might happen because `constants` is sort of reserved module in node.js.
however, plural form (`constants`) works fine with web pack `aliases`, so they find a workaround somehow.
i was in develop branch.
i added one line for one file, and only two files import this file.
but when i run `npm run test --changedsince=develop`.
there are 273 test suites running.
this flag could work a few months ago.
but we couldn't remember when it started to run too many cases
require of path with trailing slash results in an error.
i follow the docs phofurl to test projects that import css files however i get this error: phofcode jest.config.js: phofcode
hi, i'm new to unit test.
i tried to create unit test in an angular application.
i have one suite with 5 tests.
3 of them used the `usefaketimers` function.
when i run every test individually i have a successfull message.
when run the suite only the first that use `usefaketimers` pass, the other return following message: > error: timeout - async callback was not invoked within 5000ms timeout specified by jest.settimeout.
new snapshots cause existing multi-line snapshots to indent too far.
when jest runs but there are no tests to execute, by default it exits with code 1 (error) and prints the following message phofcode when running with `--passwithnotests`, jest exits with code 0 but the same message gets printed.
when calling `toequal` on an object, where one of the values is `undefined` does not compare that key.
importing _react_ using: phofcode results in an inability to use `object#values` in a _jest_ test.
the code example in the documentation's custom-matchers-api (this.utils) phofhyperlink section referenced a non-existent variable `diffstring`.
trying to use the `expect` assertion library on a mocha project causes typescript errors, even though there should not be any incompatibility.
both `@types/mocha` and `@jest/types` try to declare incompatible global ts declarations for `it`, `describe`, etc, which causes ts compiler errors.
obviously users should not try to load both of these at once.
* however * , the `expect` type declarations refer to `@jest/types`.
this means it 's impossible use the `expect` assertion library in a project that uses mocha as its test runner.
i think the solution is straightforward: 1. refactor `@jest/types` so it 's possible import `@jest/types/no-global` which will not augment global interfaces.
2. refactor `expect` import types from `@jest/types/no-global` instead of `@jest/types` this can be fully backwards compatible.
setting "coveragereporters" : ["json"] in the package.json file causes the code coverage to partially run.
1) no code coverage output will be generated in the console.
2) the coverage directory is created successfully with the coverage_report.json inside it, however, this report contains a blank object {}.
running jest with code coverage enabled does not fail if the code coverage is 0% image showing code cover running phofimage
giving `--maxworkers` a `%` instead of a fixed core number does not seem to work.
i looked into it, i found that it seems to expect a number and parsing it sets it to `nan` phofcode in `jest-cli` it checks the args only for a number phofurl phofcode i quickly tried setting to string and works as expected.
i am not sure of all the ramifications of this change but might be the correct type for it.
jest runs out of memory when producing coverage for a test file that is supposed to exercise the typescript compiler, which is 7.2 mb.
background: i'm experimenting with switching typescript to jest in order to get coverage-based testing.
my first attempt is to create a small prototype that imitates our current tests in mocha.
but it fails when i request a coverage report.
i 'm trying to generate test data for tests in `beforeall()` block and then run tests over that data, but jest does not see new data during the test
the code executed by jest with `--coverage` is incorrect when using ts private arguments.
it seems to be transpiled as such, which isn 't valid because `this` can only be used after the `super` call: phofcode without `--coverage` it gets transpiled as such: phofcode interestingly, it works if i "transpile" the construct myself.
the generated code becomes: phofcode
jest 's `--onlychanged` option does not consider the module in the `import 'xxx ';` statement as dependencies.
so i can not get the advantage of `--onlychanged` or `--changedsince`
passing a folder on a different directory on windows to the `roots` phofhyperlink configuration option fails as jest-haste-map is trying to resolve all paths relative to the rootdir, but this is not possible on windows where a relative path from one drive to another will produce an absolute path.
this bug was introduced in phofurl
i use try/finally to perform test-specific cleanup that's not suitable for aftereach()/afterall().
the problem is that if an expect() in `finally` fails, that clobbers any expect() failure in the `try` block.
the code coverage settings are used from the first project when jest is run with `--project`.
the configuration option `passwithnotests` is missing in the section configuration of the docs.
because it is documented in the cli options i tried using it as a configuration option and it works.
so i guess it is missing in the documentation.
jest cannot find testmatch files in directories starting with dot (root directory).
`test.each` usage with `done` gives types errors.
it should be addressed on definitelytyped ( phofurl but a typescript feature is missing ( phofurl maybe there is another way, but that's the more straightforward i guess.
this issue is only meant to bring your attention on the problem.
in some special case, tomatchinlinesnapshot will not work
a clear and concise description of what the bug is.
when specifying a list of paths in `testmatch`, the glob matcher can return directories that it shouldn't.
given an async test that declares a promise, when that promise rejects after that test finished, then the currently running test will be marked as failed instead of the one from which the rejecting promise originated.
i understand this is due to how node handles uncaught promise rejections, but there is no warning either.
furthermore, if this would be an issue with node instead of jest, it would at least be preferable to be warned about this behavior possibly letting the wrong test fail, so user doesn 't lose time.
i 'm testing calls to a mongodb server which runs in a docker container.
i 'm using mongoose to make the calls and use jest as a testrunner.
in a jest setup file i make sure that i delete all records from the db before each test.
when i run my tests one-by-one (using test.only()) all my tests work.
however, when i run my tests in sequence (--runinband) only some of my tests succeeds while others fail.
this differs from what expect as expect all to pass if they pass using `test.only()`.
is this bug or am doing something wrong?
the flowing code is failing with "syntaxerror: unexpected token =".
i use babel with flowing config: phofcode and jest.config.js phofcode
when expecting a mock/spy to have been called with a specific mock, the mock name isn't used in the resulting output.
instead we get the generic description `[function mockconstructor]`.
this image show is only the number 1 in different positon image phofimage
hello, i'm using jest for react testing and ava for server-side.
after generating snapshots in ava jest shows me the error: phofcode i couldn't find a way to exclude the `server` directory.
setting `testpathignorepatterns` has no effect.
jest is crashing when running a single test file.
example failing ci log can be found here phofhyperlink .
issue seems to be related to the following function being called many times: phofcode
when files changes in watch mode, coverage info doesn't update.
package has an optional dependency of fsevents 1.2.7 for macos only, and it's incompatible with node 12 (version 1.2.9 is compatible)
jest creates custom test environments for test files that should have been filtered out from test execution using tags.
it makes sense (to me at least) that jest only creates a test environment for the files that are actually going to have tests executed, thereby avoiding any unnecessary setup/teardown.
if an uncaughtexception is detected while an aftereach block is executing, the next beforeeach block can start executing before it should.
when the beforeeach and aftereach blocks are used to setup database contents, this can lead to very surprising results as the both the aftereach and beforeeach code will be executing in parallel
i think this is similar to #5164. in my jest config i have a custom "testenvironment" that 's written in typescript that i want transformed by ts-jest.
using `.tomatchobject()` returns failing test with message ` received: serializes to the same string` image phofimage
prettier is used by jest for `tomatchinlinesnapshot`, but since it's not a dependency of `jest`, `tomatchinlinesnapshot` only works if some other package depends on prettier (or it's in the user's `package.json`).
i 'm using material-ui 's `makestyles` css-in-js styling solution within my app.
it adds all the css classes within `<style>` tags in the header.
when i run tests in jest for my app, it doesn 't follow the css rules of cascading.
rather than cascading the styles and using ** last ** defined `<style>` class, it uses ** first ** defined <style> class.
i 'm using visual regression (jest-image-snapshot) and running tests using `getcomputedstyle()` and they all fail due to styling within jest/jsdom being different to what browser actually renders.
i have setup a typescript project following the directions in the docs phofhyperlink .
in my `setuptests.ts`, i am importing and each one of these imports throws a referenceerror: 1. for the first import, i get "referenceerror: aftereach is not defined" 2. for the second import, i get "referenceerror: expect is not defined".
it is as though jest is not recognizing its own globals.
after installing jest via `npm install --save-dev jest`, `npm start` breaks with the following message: phofcode
`instanceof` doesn't work as expected in jest when being used on an object returned from rewire.
please check out codes below.
i thought it was the problem of rewire.
however this issue can't be reproduced under pure node.js with rewire.
i checked the `prototype` of the remote object.
it just looks like a normal object.
don't understand what made it unrecognizable by `instanceof`.
`test.each` doesn 't use test case `tostring` for tests titles generation on node.js v12 and produces titles like this: phofcode
when a beforeeach times out, the succeeding tests in the describe are still being executed.
this causes confusion as it is not very clear that the beforeeach has timed out and not the actual test.
we can't figure out why this is happening on this pr phofurl running the unit tests fails because it says there are 7 obsolete snapshot files.
however, when you try to use the -u flag on jest, we get failure messages complaining that jest could not delete some .snap files, which don't exist.
i don't know how it is determining that there are obsolete snapshots.
confusingly, it also tried to delete more than seven files.
this has happened on at least four different machines checking out the branch of the below repo sorry i don't have a more minimal example, but since i don't know what is causing it i can't make another example.
hopefully we are just missing something simple, but doesn't seem jest is working as intended example output: phofcode
in the v12 of nodejs phofhyperlink , they changed the list of enumerable globals.
most notably `process` and `buffer` are no longer enumerable phofhyperlink .
so this makes tests fail if global mock implementations use any of them.
because there's no documented way to abort tests if setup in `beforeall` fails (#6695), i tried to `process.exit()`.
this works, but it turns out it's impossible to log any errors (which had lead to the setup failing).
snapshots are not properly handling incomplete surrogate pairs.
if the snapshot includes an incomplete surrogate pair, then jest fails to re-use the snapshot properly.
_i don 't know exactly if it should be considered as a real bug as incomplete surrogate pairs can be considered as being invalid strings._
overriding virtual console for `jsdom` isn 't possible for parallel execution.
when mocking a function which takes parameters, if one of the parameter 's value is `undefined`, `tohavebeencalledwith` can be called with or without that same parameter as an expected parameter, and the assertion will pass.
i get the following message when trying to run tests.
phofcode this is the same issue as here phofhyperlink the comment by @simenb says: > if people have (babel) issues with babel 7 whilst: > > not using create-react-app > using jest@23 or older uses babel-core@bridge and @babel/core@7 have both jest and babel-jest in package.json feel free to open a new issue.
which is the case here.
edit: only happens when defining custom snapshot matchers such as `tomatchtrimmedsnapshot` from the docs.
as listed in documentation, i tried to use jest -u -t <pattern> to only run and update the snapshot of a particular test.
it did run and updated the snapshot for that test, however, all snapshot files for other (skipped) tests were deleted.
please see log below: pass (7.224s) snapshot summary 6 files removed from 6 test suites.
test suites: 10 skipped, 1 passed, 1 of 11 total tests: 72 skipped, 1 passed, 73 total snapshots: 6 files removed, 1 passed, total time: 10.072s ran all test suites with tests matching "pattern.
i am using vue tsx syntax.
i have no problem compiling and running the code using webpack ts-loader and babel-loader.
however, when using ts-jest with babel-jest to test the codes, i get `h is not defined`.
also, i was able to reproduce the same error using @vue/cli setup.
when writing a test for a project using rollbar, one test requires it to be mocked, and another requires it not to be mocked.
the return value from the rollbar constructor behaves differently when using than it does without mocking it at all.
running `jest --watch` in a vue project with `collectcoverage: true` and `collectcoveragefrom: ['src/ ** / * .
it works as expected when running just `jest`, but problem arises when running `jest --watch`
phofurl manual says execution order of describe and test blocks should be phofcode while this is true for jest-jasmine2 in jest-circus, it is not work as expected phofcode
when running inside `electron_run_as_node=1` with `--watch`, produces error: enotdir: not a directory, watch at fswatcher.start at object.watch at nodewatcher.watchdir at walker.<anonymous> walker.emit (events.js:182:13) go$readdir$cb process.nexttick (electron_asar.js:21:28) process._tickcallback
this could be a result of me misusing mocks in a manner that shouldn 't be done, but basically the order that `mock<x>once` calls resolve in seems to be first-in, first-out.
this to me doesn 't make sense, as i 'd expect them to to be first-in, last-out, as that would match the order that they 're registered in code, so "deeper" mock implementations would override "shallower" ones (which is the behavior of the `mock<x>` methods).
this is particularly nasty as it means if you have a test fails * before * a `mock<x>once` call would happen, it can cause cascade of test failures, due off-by-1 error.
jest returns an error when babel ignore some directory and --coverage mode is enabled: > babel-jest: babel ignores server/init/index.js - make sure to include the file in jest 's transformignorepatterns as well.
adding this directory in `transformignorepatterns ` - do not help.
when we disable coverage all is working properly.
when i import and use ** jest-environment-jsdom ** in my project, using typescript to build will receive a message error: phofcode it's an error when build to publish right?
when we have more than one await statement in beforeall, it waits for first one and returns to execute the test cases.
getting started documentation contains wrong instructions for typescript
if you run a specific test (such as using `--testnamepattern` - there could be other ways, but this is how i found the bug), jest will eat any errors thrown outside of that test, skipping the test and sometimes complaining about a describe callback not returning a value.
i did do a very minor dive into this while ago, before i determined the cause (as when i first started jest was getting these strange "a describe callback must not return value", despite never returning value) - somewhere internally something returns `null` instead of `undefined`, which `jest` doesn 't know it 's doing and hence complains to the developer.
there is a method which can return entity or array of entities.
when i try to mock returned value of this method i just can pass array, but need one entity.
i am running a very simple test that is not async .. i'm getting the following error... phofcode
i recently setup codecov, and then setup jest to generate coverage reports for it.
initially, it was setup to collect coverage from _all_ files via the jest config (see below).
later, i wanted to have a separate jest command minus the coverage report, so i moved the collect coverage command from the jest options to cli (see below).
after doing this, no longer gives for entire src folder, but only for files tested.
okay, no problem, i 'll just undo this change.
here 's where i am getting frustrated - no attempts revert this seem work.
can revert previous config, and it no longer works for _all_ files, only ones being tested.
i 've tried running it with `--clearcache` or `--no-cache` and neither work.
i 've tried creating a whole new config, one with and one without, then just running base command, that doesn 't work either.
when running, it takes much longer than used, displays 'generating untested files ' message, then still only returns tested files only.
this is not an actual bug.
it has got to do with how jest decides about the number of workers when `--maxworkers` argument is not passed.
apparently `getmaxworkers`( phofurl tries to figure out the number of cores and then chooses the number of workers based on that.
when i run react tests on circleci, the container in which test is executed, is a shared vm with 36 cores and 64gb of ram.
as most resources are already used, when running tests, jest tries to fork 35 child-processes and this either leads to tests complaining ` enomem: not enough memory, read`.
`expect.hasassertions()` and `expect.assertions()` incorrectly count assertions as part of a test when they should not be.
depending on how a custom matcher is used, `this.equals` might not be defined:
in some cases, test arguments are skipped during title parameter injection.
when a `beforeall` takes longer than its default timeout, the resulting error message looks hard to distinguish from the test itself timing out.
i was debugging a failing test and kept increasing its timeout, when in fact what was causing the failure was the `beforeall` function occasionally taking longer than 5 seconds to setup.
testing iterable objects with isequal() ignores other properties on the iterable
i 'm reporting a potential bug with using `.tothrow` and `.tothrowerror` against custom error classes that only happens in typescript environment.
both assertions fail to validate custom error classes unlike in the babel environment.
please see the #to reproduce section for more detail.
on my way to improving the size of our bundle, i am now using @material-ui/core/es instead of @material-ui/core.
when i run the tests, i am getting the following error : phofcode i get that this is a transformignorepatterns issue, so i added a jest.config.js file in which i add the module to transform.
when i remove test file, i get following error: phofcode
the following test fails because a rejected promise is set as return value: phofcode
so i 'm trying to use code coverage in jest.
when i run `jest` with `--coverage`, i expect a text summary to be shown in the console since according to the docs phofhyperlink : > note: setting this option overwrites the default values.
add "text" or "text-summary" to see a coverage summary in the console output.
as `text` is part of defaults, i would expect a text summary at end of output.
however, this is not case.
listening to process `warning` events does not work inside test files.
i 'm using jest with `.mjs` files and in a monorepo with several projects: `backend`, `client` etc.
the projects share a common `lib` folder.
in test files located in `backend`, importing modules from `backend` or a subdirectory of it works fine.
importing from the `../lib/` directory however, causes jest to fail with `jest encountered an unexpected token / syntaxerror: unexpected token export`.
re-opening #8155 i 've been unsuccessful at following the documentation phofhyperlink for running jest 24 with babel 6. specifically, i 'm seeing this error: phofcode if using yarn, one possible workaround is adding `"resolutions": {"babel-jest": "23.6.0"}` to package.json.
my jest tests started to crash with "javascript heap out of memory".
enabling `--detectleaks` i narrowed that to every test that uses sequelize.
furthermore, i found out that the problem is a "sqlite" dialect, because if i add `return` before any of the following lines, the jest 's "your test suite is leaking memory."
is gone and repro succeeds.
don 't know if this is either sequelize or jest bug, so i posted at both * phofurl * phofurl
when running tests with `--testpathpattern` it should match only the relative path to the project root.
currently, it matches the full path.
it's not usefull to match the full path because all tests have a common prefix.
we are using jest.retrytimes(3) with the following versions: "jest": "24.5.0", "jest-circus": "24.5.0", "jest-junit": "6.3.0", it seems when a failure in beforeall happens, it just continues to the `it` part of the test.
if the `it` depends on anything in `beforeall` to happen, we see a stack trace which is unrelated to what actually failed.. undefined errors, etc.
if a failure occurs in beforeall it should be thrown and tests should fail at that point.
when using a string template in my code, and trying to validate it in jest, the expected and received do not match up bc of line breaks in the template string.
i receive a 404 for @jest/fake-timers when i try to upgrade jest to 24.3.0 or higher (including up to the most recent build 24.5.0)
i have observed that recently, using multiple workers is slower than only one.
these numbers are from the second test execution of a synthetic that i have uploaded to github phofhyperlink : phofcode phofcode phofcode my impressions: i had the impression that it is the cache system of compiled files that add a significant overhead.
it looked like there is some contention when multiple workers are trying to compile the same file.
however, i was wrong, by tweaking `gen.sh` made each test completely independent, there are no shared files but execution times are similar (this change is not present in repository).
i 'm running a jest test, which is erroring out when i set state due to react-dom not finding document.
i put a log statement in react-dom and i see that document is populated initially console.log !!!!
document { location: [getter/setter], 0 } but later in the test execution it 's null and that 's the error i encounter in my jest test.
null this is has been encountered by another person who commented in phofurl
i am using async function in the describe block.
if i run the tests then the async tests are failing with error saying that "timeout - async callback was not invoked within the 5000ms timeout specified by jest.settimeout."
if i run tests outside descibe block then they are working fine; here is my sample code ` describe("",() => { beforeeach(() => { jest.resetmodules(); }); const user1id = () => { return { fetchalladdress: jest.fn(async id => addresses.filter(x x.userid == id)) }; }); it("should return array of items of user when called", async () const expectedlength = addresses.filter(x x.userid == user1id).length; const result = await getalladress(<any>{ user: id: user1id } }); }); }) `
my first bug report, i remain at your demand to provide further details.
i didn 't find any other reports showing the same characteristics.
on react native, automatic mocking of a `node_module` (by adding a file of the same name in does not work.
jest tests import the original, unmocked module.
i 'm using `react-native` as a jest preset.
toequal assertion does not work with objects where the values are anonymous functions, like this: const foo = {a:_in=>_in} const bar = {a:_in=>_in} it really surprised me.
using --runtestsbypath causes jest to not find tests when using a symlinked directory.
to be thorough, the symlinked directory is linked to a mounted network drive that is mounted by autofs: symbolic link: `/home/david/source -> /mnt/network1/source` autofs: `/mnt/network1 --timeout 60` autofs map: `source -rw,soft,intr network1:/source`
jest fails to resolve modules in a "setupfile" when using `yarn pnp` error output: phofcode relevant files: * phofurl --> phofurl * `app/utils/theme` is within this `modulepath`: phofurl
when snapshot testing, there is a behavioral difference between property matcher objects nested within other objects, and property matcher objects nested within arrays.
property matcher objects nested within arrays seem to be expecting an exact match of the property objects, while property matcher objects nested within other expect a "subset" match.
i am trying to upgrade our repos to jest 24 and encountered a compilation issue with spying on a mocked getter which worked in jest 23. the invocation is: phofcode ... and the error is: phofcode i can rectify the situation by explicitly setting the return type of the mock function, but it doesn 't seem like that should be necessary.
the module name config not used in module file .
i 've updated jest to the latest version because of the bug with nodejs version 11.11.0. all tests do success but it prompts the following message: "jest did not exit one second after the test run has completed"
`yarn check` prints out two warnings when installing the latest jest 24.4.0 packages.
running jest with the --coverage flag causes it to fail when the test suite has swagger docs being generated
all my suites fail using node 11.11.0 with the following phofcode
i got the following report from jest: phofcode this is very confusing as both texts are exactly the same.
based on this comment phofhyperlink , it 's possible to return a custom value from an object by overwriting `tojson` and indeed it works!
but when tojson returns a promise, jest doesn 't seem to resolve it.
sorry if this is the wrong place to put this report.
this is not a bug with jest, but with the documentation.
when i view the documentation i am seeing multiple languages.
chrome will open a dialog offering to translate the text.
<img width="1579" alt="screen shot at 8 58 39 am" src=" phofurl i have checked my language settings in chrome <img width="727" alt="screen shot at 9 00 01 am" src=" phofurl and on macos <img width="657" alt="screen shot at 9 00 33 am" src=" phofurl all i have is english selected
i am using babel 7 and jest 24. after upgrading to v24.3.0 i have issues with command: phofcode the error i get is this: phofcode if i don 't use the `--changedsince` flag at all then tests run smoothly.
in order to tackle this now i am using `resolutions` in `package.json`: phofcode
when destructured imports are used, jest mocks do not work properly.
my jest tests works in all node versions but not node 11.11 typeerror: cannot assign to read only property of object '#<process>' at _default
we have a bunch of tests that load a big amount of data.
when that data exceeds the maximum heap size configured in node, the worker fails and jest hangs.
i'm pretty sure we'd have the same behavior with any other fatal error in the worker.
(i'll look into this after.
i just wanted to have an issue i could link ).
i have a project that works using parcel to build and babel to transpile.
when i try to run jest, i get phofcode the plugin is found successfully when running normally through parcel, and is listed in my package.json 's dependencies & installed.
i'm having problems using jest in unison with vscode (1.28.2) on a windows 7 vdi machine provided by my employers.
we are asked to clone git repos onto our `i:` drives (as these are much faster).
these `i:` drives actually appear to be created via the subst command from this folder though this is supposed to be abstracted from everyone.
when i open a repo in vscode, i do so from the `i:` drive location.
when i then try to add breakpoints & debug, none of the breakpoints become verified.
in addition this, when running the tests in terminal from `i:` drive location, file paths in coverage report are pointing location.
after a bit of a play i can see immediately that rootdir is being set location.
i've tried override this by setting it location jest.config.js, but it doesn't seem like me setting anything drive other than `c:` if then close vscode and re-open repo `c:` location, debugging works.
there 's a strange and subtle change in the way snapshots are handled, showing some counter-intuitive displays when there is a difference.
the issue manifests with string values in `.tomatchsnapshot()` when a snapshot name is passed as an argument.
it feels as if strings, are sometimes being incorrectly turned into arrays.
the issue was not observed in jest 23.
a test like this phofcode
running jest with the `--changedsince=branch` flag together with the `--passwithnotests` will return a non-zero exit code (unwanted) if no tests are found related to changes since the specified branch.
tests are running fine running the from the command line, but when they are invoked by a pre commit hook added by husky, then a strange error occures: phofcode at the test file i have an import to a local file, if i comment it out, then no error occurs.
i often use the keyboard shortcuts `a` and `u` when writing tests.
i made the mistake of pressing `caps lock` when typing `a`, and suddenly all shortcuts stopped working!
i understand that shortcuts are case sensitive, but making them insensitive would improve the developer experience.
i'm testing code that generates code that is run in a node context with `vm.runincontext` when running jest with `--coverage` generated code contains istanbul variables: actual : phofcode expected : phofcode
jest fails on start with error `error: eisdir: illegal operation on a directory, realpath 'b: temp'` when windows temp dir is set on a ram drive
i've created a simple test with no configuration.
you can find it here phofhyperlink .
it takes 7.6 seconds just to start jest, and then, on file change, it takes 5 seconds to re-run.
there's clearly something wrong here.
mocha and chai, for example, start in around 4 seconds, but afterward, the re-run is almost instant.
it's weird that jest reports that the test takes 14ms but shows me the result in 5 seconds.
image phofimage on top of this, if you add more basic tests, the time just seems to go up.
code coverage fails to evaluate code that is evaluated in another environment.
we have a puzzling issue here.
why does jest mockresolvedvalue not work on mocking a resolved value of array.
where the same value works in mockimplementation.
when executing a `tomatchobject` expectation, any properties of that object with an `expect.any` or `expect.arraycontaining` are reported as not matching in the diff output.
while trying to automate the detection of bugs and regressions in jest (see my previous pr #7938), i found a very strange failing case in `tostrictequal`: phofcode
i would expect `settimeout` and `setinterval` to be treated as open handles, preventing jest from exiting normally and causing an error but timeouts are ignored, the process exists without waiting for them.
this results in inability to detect that tested code is potentially buggy.
when the globalteardown script takes more than a second jest reports a potential open handle.
when creating a dom element from a string (by setting innerhtml), an invalid property in style should be ignored, but it is not.
i have been noticing phofurl warnings since yesterday.
it looks like braces project had an update ( phofurl to fix the redos issue as well.
is there any chance jest will update `micromatch/braces` to fix these warnings?
a clear and concise description of what the bug is.
running `jest --runinband --watch --onlychanged` always runs all tests
when validating input using `jest-validate` 's `opts.exampleconfig`, the validation distinguishes between sync and async functions which creates three issues.
first: - if `opts.exampleconfig` uses an `async` function, functions returning a promise will make the validation fail, but `async` functions will pass.
however one might expect that those two are functionally equivalent.
- if `opts.exampleconfig` uses a non-`async` function, functions returning a promise will make the validation pass, but `async` will fail.
- `multiplevalidoptions()` can be used to work around this problem, but i expect very few users do so.
second: when using babel `async` function are transpiled to non-`async` function, changing the behavior of `jest-validate`.
also this means `jest-validate` always validate against async when code is using babel.
third: error message is not descriptive enough as it says `function` for both sync and async functions.
note that current type checking is using phofhyperlink , which returns either ` '[object function] '` or ` '[object asyncfunction] '`.
i have updated recently to __jest@24.1.0__ and using my old config file appears the following error: `jest did not exit one second after the test run has completed.` `this usually means that there are asynchronous operations that weren 't stopped in your tests.
consider running jest with to troubleshoot this issue.` this error disappears when removing the `notify` option from the configuration file.
project folder structure like this: phofcode jest complain: phofcode phofcode
when a snapshot of a shallow rendered component is created, if the component renders some other component created with `react.memo` then it shows up as `<undefined>`.
i'm not able to run the tests from javascript tests using intellij idea interface.
on a work project we discovered a memory leak choking our ci machines.
going down the rabbit hole, i was able to recreate the memory leak using `jest` alone.
running many test files causes a memory leak.
i created a stupid simple repo with only `jest` installed and 40 tautological test files.
<img width="375" alt="jest-memory-leak" src=" phofurl i tried number of solutions from phofurl but to no avail.
i couldn 't find any solutions in the other memory related issues, and this seems like the most trivial repro could find.
i 've updated one of my projects from babel 6 to babel 7. as part of this, i 've also * updated from jest/babel-jest 23 to jest/babel-jest 24.
* updated my custom js transformer to use babel 7 stuff.
when i run my tests, i get the following error: phofcode i can "fix" this error and get my tests running again if i hack as follows: phofcode with this, tests run fine, however don 't really understand under what circumstances `config` could be undefined.
i can 't get the coverage anymore with jest 24.
see reproduction repo phofhyperlink for better understanding when trying to generate a coverage with jest, the tests run as they should, but no coverage data is collected and there's a 'cannot read property 'coveragedata' of null' error in the console.
this is likely because jest right now can't work with the unique folder structure that we have on our project (see the reproduction repo).
the folder where package.json and node_modules are right next to folder where all source files are.
when file to test and test itself is in same folder as node_modules coverage data is collected perfectly, however when it in next to with node_modules, it display error mentioned in first paragraph.
feel free close this if it's not a bug with jest, but at this point i cannot think of anything else that could be wrong here (other than our legacy structure).
when using jest projects with multiple runners, eg: phofcode ` it 's expected that runners would run in order.
in this particular case i expect that runners will run in strict order to assure that eslint fixes will be applied before prettier 's.
after few hours of debugging i found problem in phofurl order of projects in `contexts` is correct, but shuffles it sometimes.
as a solution i suggest to use `map` instead of `object` here.
i would love to add pr if it is a right way to go.
the bug is on `api` section page at least.
after choosing and clicking a method on mobile menu it doesnt close, staying in front of the documentation even after the url has changed.
i'm not an expert and this could very much be a false positive.
i see you guys are using snyk and have 0 vulnerable dependencies right now on it, but i wanted to share in case this can be fixed.
i tried to find myself where loadash sortby was being used, with no luck.
** vulnerabilities ** depshield reports that this application's usage of lodash.sortby:4.7.0 phofhyperlink results in the following vulnerability(s): - (cvss ** 7.4 ** ) cwe-471: modification of assumed-immutable data (maid) phofhyperlink <hr /> occurrences lodash.sortby:4.7.0 is a transitive dependency introduced by the following direct dependency(s): jest:24.1.0 phofhyperlink jest-cli:24.1.0 phofhyperlink jsdom:11.12.0 data-urls:1.1.0 whatwg-url:7.0.0 lodash.sortby:4.7.0 whatwg-url:6.5.0 lodash.sortby:4.7.0 <sub>this is an automated github issue created by sonatype depshield.
details on managing github apps, including depshield, are available for personal and organization accounts.
please submit questions or feedback about depshield to the sonatype depshield community .</sub>
when working with rxjs, assertions inside a `subscribe()` block are ignored even though **the code is synchronous**.
`jest-circus` runs all `it`s inside a `describe.only` block regardless of `it.only`: image phofimage this differs from `jest-jasmine2`, which only runs the `it` marked with `it.only`.
i am wanting to test a component, but its child components would bring in a lot of unnecessary code and complexity.
also, these components are pretty high on the hierarchy, so when they are used they will bring a big chunk of the application with it.
so, i mock that file.
one reason i mock it is to ignore its functionality and just check if it exists, because its test file can test its logic.
the second reason is so i 'm not importing the whole application into my test file.
but, jest.mock doesn 't seem to get rid of the imports.. even though i have mocked file, jest is still pulling in all of imported files from mocked file, even though they are no longer being used.
this results in my file taking 10-15 seconds, in comparison to when remove those imports manually it takes about 1-2 seconds.
is there a reason jest does not remove imports mocked file, as they are not needed anymore?
i am attempting to run a test that checks after all test files have ran if there were any documents left over in our mongo database.
the issue i am running into is that the teardown function is not waiting for my promises to finish like i would expect it to.
my function is reporting missing branching coverage for the following line and is pointing to this line.
happened ever since i've updated jest.
my function is reporting missing branching coverage for the following line and is pointing to this line.
happened ever since i've updated jest.
`jest.settimeout` doesn't respect ridiculously large numbers.
when running `npm t` on this repository phofhyperlink i sometimes get the message `timeout - async callback was not invoked within the 5000ms timeout specified by jest.settimeout.`.
the first time this happened i played around with `only` on some of the tests, and did not change any code, and all of a sudden it started working ... so life was good.
now it 's happening again, and it 's also random.
we use jest with an un-ejected cra 2.0 configuration and have noticed extremely slow test speeds when component dependencies are not manually mocked with jest.mock using a factory method.
we added manual mocks with factory methods into a single domain of our code and saw drastic speed improvements.
attempts to use _ _mock _ _ directories made no impact.
below are the results for only that test domain before (unmocked): phofcode after (mocked with factory methods): phofcode our current hypothesis is this is due to slow module resolution as tests for components deeper dependency trees see a more drastic improvement when mocked a factory method, whereas components shallower dependencies see only marginal improvements.
filing bug per #7732 phofurl jest v24 takes 38 seconds vs v23 28 seconds to run 50 suites (296 tests).
we upgrade from jest@23 to jest@24 phofhyperlink and update related transform tools phofhyperlink use for transform instead of `ts-jest`.
get wrong coverage of typescript.
i'm not sure if it's a jest / babel-jest bug or just miss config in new version.
until jest 23, shallow rendering any component, generated a detailed snapshot (see: phofurl due to the changes done in #7448, this use case is now broken and returns an empty snapshot, without even the props(see: phofurl
treats typescript keywords (`partial` or `pick`) as out-of-scope variable names phofcode
when running tests with `"testenvironment": "node"` and `expect` determines via duck typing that it has dom nodes to compare it throws `referenceerror: element is not defined` since `element` isn 't available in node.
`babel-jest` is erroring out every time i try to transform some of my typescript files.
the specific error is: phofcode the specific failure seems to be that in `babel-jest` expects to see an `overrides` property in when this is not found, it throws.
babel config is not loaded correctly for --projects, e.g.
phofcode `jest --projects packages/pkg1` <-- fails `cd packages/pkg1 && jest` <-- passes
using node@8.15, the `.resolves` or `.rejects` property on `expect()` is an await-able promise.
using node@10.15, it seems that the promise will run asynchronously and will not be awaited even if `await` or `return` keywords are used.
the `.resolves` / `.rejects` docs phofhyperlink give the following examples: phofcode phofcode using node@8.15, these also work in a similar way: phofcode phofcode
running jest `--runinband` or `--maxworkers=1` ** and ** `--no-cache` invokes `typeerror: cannot read property 'some' of undefined in removing ** either ** of them solves the issue.
running yarn or npx jest --no-cache --maxworkers=2 no issue.
running yarn or npx jest --runinband no issue .
running yarn or npx jest --no-cache no issue .
`yarn` `npx jest --runinband --no-cache` invokes the error .
important notice: i work on windows 10 (1803) and i have seen a lot of issues with file races etc.
not sure if this is related to #4444 other tickets.
when i attempt to run jest --coverage.
i get the error above for paths to all my js files.
for example as shown below.
having said that when i don't use the coverage flag and just run jest my test does run successfully.
i took the react template from visual studio (it uses create-react-app v1) and upgraded jest to version 24.0.0 from 20.0.4. suspect this has something to do with it.
in watch mode, or using cli with `-t`, jest will parse and run the `beforeall` hooks for all test suites, but doesn't run `afterall` for the skipped test suites.
my use case is spinning up a puppeteer browser in the `beforeall` hook and closing it in an `afterall` hook.
since `afterall` doesn't run for skipped test suites, running watch mode with a test name regex filter results in an orphaned chromium instance for every skipped suite, eating up memory and forcing me to manually kill all the dangling processes.
after watch mode re-runs suites dozens of times, i have hundreds of instances of chromium left over.
filtering by name wastes more of my time than it saves.
when you have a `globalsetup` script, this error shows up when trying to start jest with watch mode: phofcode
after upgrading to jest 24.0.0 and running "npm test" on my moderate-sized projects no longer show file-level metrics in the coverage summary and the "all files" aggregates are all 0 (% stmts, % branch, % funcs, %lines), even though the tests cover the files at 100% for all files.
if i simply downgrade to jest 23.6.0 (and change nothing else) then coverage details show up.
thanks for your hard work releasing jest 24!
a clear and concise description of what the bug is.
on jest 23.6.0 my test collection that totals 49 test suites and 700 tests took on average 11.9 seconds to run.
now in jest 24.0.0 it takes 19.9 seconds to run, with no changes of any kind to my code, tests or environment other than upgrading to jest 24. i'm not doing anything fancy.
this is a serious performance regression.
i want use 24 take advantage of `test.todo` but i can't afford have my tests take 67% longer run - that's a real drop in my productivity.
any suggestions how diagnose this further or fix this issue?
i can't post source code because this is proprietary code i'm working on.
how can we fix this performance regression?
hey there after upgrading to jest 24, i've explored that both `setupfilesafterenv` and are ignored then defined in a preset.
`jest --showconfig` is not showing them either.
other properties like `setupfiles` works as expected.
the homepage phofhyperlink has links to major frameworks.
the link to angular points to the angularjs website ( phofurl which is outdated rather than to the latest version: phofurl
when using jest with the request lib phofhyperlink (i also tried node-fetch phofhyperlink and saw the same issue) to test a server response with multiple cookies returned, jest will join the cookies into one string in the response object.
i am getting the following error every time after installing packages and running `yarn test` in every example.
it seems like last changes in `tothrow` ( phofurl broke a behavior uses were relying on in jest 23. we can expect `tothrow` to behave like `toequal` on the thrown error, but that's not the case anymore.
tests fail when a component relies on a library loaded via a cdn (jquery, stripe, facebook pixel etc) and the documentation does not provide instruction on how to handle this in js or ts #1310
when requiring a module using both `require/import` at the top of a file, and `require` dynamically in the body of a function, the imported module with be referentially unequal if `resetmodules=true`.
this behavior does not occur if `resetmodules=false`, and does not represent the behavior of imports like this in node environments.
from the documentation in phofurl the test environment should be sandboxed: phofcode but in our tests we 're mocking some prototype methods and it looks like that they 're shared, and this produces intermittents.
when running jest locally, all tests finish in 12 seconds.
when running in travis ci, they finish in 448 seconds.
here's the local output: phofcode and the ci output.
phofcode notice in the ci that `boostreporter.test.ts` takes `nyanreporter.test.ts` takes and `console.test.ts` takes 90.95s, while the local testing does not even hit slow timing threshold.
the heap usage is relatively same between both.
the one common denominator between reporters is that they use chalk and have many tests that compare chalk output.
for example: - phofurl - phofurl however, i've tried disabling chalk using `chalk.enabled = false`, but timings did not change.
another possible culprit is console mocking that i do here: - phofurl but still at a loss at why would cause these issues.
* and 24-alpha.12 phofcode with the above watch plugins, the last one `jest-watch-exec` is still get executed even thou the first one will return false to `shouldruntestsuite()`.
several languages docs are not found.
phofcode jest is trying to "stat" a test file that does not exist, and it doesn 't try to catch in case of failure.
for example, let 's say you have a test file containing tests that take snapshots.
if you rename the test file (but not its snapshot file), jest later assumes that the snapshot file is legitimate and resolves the associated test based off the snapshot path, but only if `--no-cache` and `--watch` are used together (which is common when debugging tests).
also, i cannot get stack traces to show (for uncaught jest errors).
is there a cli flag for that?
mock factories do not support explicit typescript typing using imported types in mock factories because hoisting happens before types are stripped.
jest is slow on windows machines.
i just noticed something weird, if you try to create an object with 'inspect' key and a function as a value.
when using the jest.mock('module'); feature to deep auto-mock an entire module, an error is thrown if the module contains any objects that contain functions with a numeric name.
jest cannot find unit tests in file when using supertest inside.
example from the jest for web frameworks phofhyperlink example.
i am trying to add jest compatibility to my test helper package fetch-mock phofhyperlink .
fetch-mock requires the module it mocks, node-fetch phofhyperlink in order to access some utility classes to construct responses.
in order get around jest's application of manual mocks globally, i'm trying use `requestactual` (which i believe is the idiomatic jest way).
when doing this i experience some strange behavior: 1.
`requestactual` is invoked within `fetch-mock` when `jest` is present as a global, but the module is nevertheless resolved the mock for `node-fetch`, which defined in project root.
2. as a side issue, when attempting create a repo demonstrate problem, i.e.
an example mocking local modules working ok, vs one using installed packages that doesn't, i found that mocking resolver got confused, and told me that (intended mock npm package `node-fetch`) conflicted with (intended mock `./local/node-fetch.js`, emitting following warning: phofcode
this is a contrite example of the problem i am experiencing.
this test passes but it should not: phofcode
the `testpath` passed to `resolvesnapshotpath` as well as the `snapshotfilepath` passed to `resolvetestpath` are absolute which implies that for the same test files across different computers their paths are going to be different and that leading to multiple snapshots for each.
project uses babel-jest and has a .babelrc with configuration.
while attempting to upgrade babel to 7 i messed up some of the babel configs which resulted in broken test (due to broken complied jsx files).
i reverted by babel upgrade and tried to run the tests again.
adding --no-cache fixed the broken tests.
version used: "babel-jest": "23.6.0", "jest": "23.6.0",
in my jest config, i have the following: phofcode and in my test file, i have this: phofcode and i get this error: phofcode
i use something like this in my test file: phofcode i also use the configuration variable `resetmocks`.
it looks like that the mocks seem to be reseted _after_ the module factory has been called, while it should be reseted _before_ so that any created mock inside the factory isn't reset.
as a result when we use mocked functions inside a test, they return undefined instead of expected return value, and code fails.
when jest-resolver attempts to load a dependency that uses a relative 'require', it fails to resolve.
here is the code in : phofcode package.js exists at
--findrelatedtests failed to resolve typescript modules declared in declaration files.
circular structure comparison is wrong.
the algorithm for determining object equality is asymmetric and causes problems.
pretty sure that the following lines create the problem: phofurl
when using the react alpha release hooks in functional components jest throws an invariant violation.
i am hoping this is a 'good first issue'.
i know i am running react 16.7.0-alpha.2 but this will at some time go mainstream.
i am just attempting to write a simple unit test for the example given at the react conference by dan abramov.
the assert module in nodejs will throw error when assertion fail.
it will throw a assertionerror if the second parameter is a string.
but if the second parameter is an instance of error, it will throw it instead of assertionerror.
i've tried this code and got the expected error.
phofcode but in my test case, i got an assertionerror.
jest in `--watch` mode opens watches on all files in the project, even those blacklisted by this is a problem in linux where there is a limit on the number of concurrent watches.
this was first raised in #3254; current solution is a workaround, increasing the limit itself, which requires `sudo` permissions.
it is not a true solution as reasonable (increased) limits are nevertheless reached when ~3-4 moderately-sized projects are open due to the sheer number of files `node_modules`.
while trying to test a class that uses `xmlserializer`, i get the error 'xmlserializer is not a constructor' or 'xmlserializer is undefined'.
i have `testenvironment` set to `jsdom` just in case.
if a symbol is used as an argument to an asymmetric matcher expect will fail when it tries to `.join(', ')` the arguments while printing the error report.
invocationcallorder counter doesn't / can't be reset between tests
phofcode more details here phofhyperlink .
when trying to run platform specific tests on a react-native project tests fail with **cannot find module 'setupdevtools ' from 'setup.js '** when configuring jest with the haste option.
when i run my tests i get the following error $> yarn test yarn run v1.10.1 $ jest fail test/magic.unit.spec.ts test suite failed to run typeerror: cannot read property 'tostring' of undefined at object.<anonymous> .... i'm testing the following import { readjsonsync } from 'fs-extra'; export function doit(input: string): string { return readjsonsync(input); } as follows import * as fs from 'fs'; import { doit } from '../magic'; jest.mock('fs', () => ({ readdirsync: })); describe('doit', () => { it('should work', () => const output = doit('in'); }); });
when running require within a block of code that contains a template string (e.g.
`babel-jest` fails to resolve the template string properly when running `jest --watch`.
it works fine without the `--watch` flag.
maybe i'm missing something obvious here but shouldn't the alpha versions of jest be installable ?
the `build` folder is missing when installing `jest@24.0.0-alpha.x`.
this feels related to #4305, but it 's a different function.
jest appears unable to catch the rejected promise thrown by the function.
after installing react-native-gps-state, half of my test cases are failing in my project with the same error message `invariant violation: native module cannot be null.` i checking linking of library manually and other workarounds,but unable to fix.can someone suggest on the issue or provide appropriate mock for the same.
cannot run jest tests because of the img required without `@3x `.
jest attempts to run all js, json, and snapshot files as tests (ignoring the test config in the project folder) when only one project is specified in the `projects` array in the root project config.
interestingly, it works as expected if `projects` array includes any other project, even if that project has no jest config and no tests.
see linked repo 's readme phofhyperlink for an example.
this is a real use case for us, as we have several packages that are not required in all builds, but have _lots_ of dependencies and/or take a long time to build.
to avoid wasting time and money during build, our build process for any `<package>` (starting with a copy of structure inside a docker container) goes like this: 1. determine which workspace packages are required to build `<package>` 1.
`rm -rf` all other packages 1.
`yarn build` (which builds all packages order of dependencies) `yarn test` (which runs jest for packages, configured with `"projects": [ "packages/*" ]`) if `package` is library or app with no dependencies on other workspace packages, we end up with exactly one package left `packages/`, so `packages/*` resolves to exactly one package, which turn triggers this bug.
messages from custom `assymetricmatchers` are ignored, while according to the following illustration, they were meant to be taken into account phofhyperlink .
we are facing issue with jest as it is not reading ifdef-loader commented code in modules.
i have a simple react form.
i'm testing it with jest and reactdom render, and `expect()` that after submitting the form a certain success `span` message shows up in the rendered dom: it does not.
i can load a native module in a regular script just fine, but i cannot do the same in a spec being executed by jest.
> edge.flow.js: unexpected token, expected : (63:5) phofcode i suspect that this should be an integration problem with flow.
they produce too many errors, when you fully brace flow.js this works fine under babel (webpack) compiler and flow complier i have already jest libraries installed by using `flow-typed`.
phofcode jest will throw errors "undefined property..." on alpha.
this works fine under babel (webpack) compiler and flow complier
my app has a function `foo` that returns a promise and it's not declared with `async` (because it's not needed to do that).
unable to find preset es2015.
when running jest (v23.6.0) with coverage enabled "for the first time" (i.e.
w/o a `/coverage` folder existing), near empty coverage results are produced.
when running again a second time (with the `/coverage` folder existing), coverage results are correct.
a clear and concise description of what the bug is.
when jest configured with `"babel-jest": "23.6.0"` , it 's not working.
i 'm getting unexpected token import when i use `scrollview` from react-navigation .
have gone through all the solutions for the opened issue related to unexpected token import.
jest snapshots different from local to circleci.
when upgrading from mobx 4.3.0 to 5.6.0, new snapshot information is created using jest this information is largely extraneous, and when added typically triples the size of the snapshot file (best case) and sometimes grows file by 10x (worst case) phofcode
tests are not executed on windows
when choose languages except english, sidebar is not shown.
the `changedsince` command is not identifying tests to run as expected.
if a file is deleted locally and the command is run, files that explicitly `require` the deleted file are not run.
although this issue has been filed explicitly against `changedsince`, i have seen the same behavior in the `watch` and `onlychanged` commands.
i believe that issue lies in default resolver.
more information as to how i reached this conclusion can be found in attached repo's readme phofhyperlink .
describe doesn 't start a test suite, bail doesn 't stop the tests after a fail, each doesn 't format names correctly, and jest output is so verbose that it overflows my terminal.
yarn install produces a warning about jest: > warning jest > jest-cli > prompts > kleur@2.0.2: please upgrade to kleur@3 or migrate to 'ansi-colors' if you prefer the old syntax.
visit < phofurl for migration path(s).
class throwing error does not work with `tothrow()`
a clear and concise description of what the bug is.
the current documentation about is missing important details about `transform` and `modulenamemapper` which would be crucial for understanding how to configure jest.
when passing serialized json for the `--config` option that contains projects, i get the following error: phofcode the parsed json looks like: phofcode
i gather from responses to other issues that buffering is supposed to be disabled when running single tests or when '--verbose ' option is used.
however, when i run a single test that triggers an infinite loop with verbose option, log messages get buffered and don 't show on output.
it seems that the official guide about doesn 't show the latest doc updates.
- the example code in the official guide phofhyperlink show this code now, which is weired.
<img width="803" 1 14 40" src=" phofurl - in your repo, the latest docs phofhyperlink shows proper example.
<img width="911" 1 16 55" src=" phofurl - anyway, they don 't match together.
the official guide should be updated like docs in your repo.
when specifying the `prettierpath` option in a config file or json object, it is ignored.
jest prints the warning: phofcode by putting a `console.log` in the module at the specified `prettierpath`, it is apparent that jest never even attempts to import supplied path.
the value that eventually makes it to `getprettier()` in `jest-jasmine2` package is `null`.
using same value with `--prettierpath` via cli works.
i have a test repository that i am testing different mocking scenarios in.
one of the test suites i overrule the default mock implementation with mockimplementationonce.
in the next test i check if the default implementation has been restored and test fails.
if run tests individually they pass, when run all tests in suite they fail.
these are relevant snippets from suite phofhyperlink in repository phofhyperlink .
phofcode test that uses mockimplementationonce and that checks if default mock is restored.
promise-based test (maybe not only promise-based) fails with wrong stack trace (jest points to wrong line number).
maybe this issue somehow related to phofurl or phofurl or phofurl but i can reproduce this bug with and without watch mode.
when running jest tests with coverage enabled in a create-react-app react project (v2.1, which uses babel 7 i believe) that contains typescript classes using inheritance (extends), this error is thrown: phofcode running the tests without the --coverage option works fine.
the `regenerator-runtime` setupfile does not source from the same location as `<rootdir>` for example my config looks like: phofcode but when l run jest with the debug option, l get the following setupfiles output: phofcode `c: developer` is a symlink to our network h drive now this issue doesn 't cause tests to fail, but does cause code coverage to include everything twice, since it sources from `c: developer` and then from `h: `, so every file appears twice, and those sourced from `h: ` all have a 0 test coverage score.
node runs out of heap space and aborts with stack trace from v8 if you pass a large enough object to `pretty-format`, for example via i suppose this ties in with #4645, although that was closed by forcing `pretty-format` to not serialise the object type in question as a regular object.
looks like the emoji in the repo description is broken.
i guess it's not really a _bug_, but i think it's the closest category chrome, safari, and (some old version of) firefox on macos sierra (10.12.6) all render it as (replacement character): image phofimage it's the same in latest chrome on my pixel 1.
`not.toequal` throws assertion error for 2 not equal blob 's instances.
the jest don 't support mixin as subclass
custom test environment runs setup/teardown once.
also using jest with mongodb should set up a new instance for every suite, otherwise there can be read/write conflicts as test suites run concurrently.
more info about my problem at this question phofhyperlink
we are moving to a monorepo structure, and we'd like to use jest multi-project-runner structure.
we are using yarn workspaces and lerna to manage dependencies.
here is a repro phofurl where you can reproduce some of the issues.
i have configured `.babelrc` (as `babel.config.js` seems to be ignored) and `webpack` to build correctly the app.
it gets built with no problem but tests are failing with some errors due to misconfiguration of babel 7. phofcode
after updating from 23.5.0 23.6.0, running jest produce this error log.
running all tests while in watch mode is ~twice as slow as running all tests outside of watch mode.
this is with the same _forced_ number of workers.
the cli docs phofhyperlink state that the default is the number of cores the host machine has, however, in my case im noticing that it will actually run by default with `n-1` workers, presumably to allow for parent process and some headroom for other processes (?).
additionally, when running in watch mode it will run by default with `n-2` workers; which is less clear to me why that isnt also `n-1`, as naively i think master process has to do roughly same amount of work as when not running in watch mode.
there are other reports elsewhere related to running tests mode: * phofurl * phofurl however, trying out older versions did not yield any results for me.
i tried back far `21.2.1`.
testing components in which settimeout is set cause node to freeze after few seconds.
it happens in watch mode, and when timeout is less than about 1000 ms.
jest coverage reports less than 100% but doesn't give line numbers, this may be an issue with istanbul.
i will also be filing a bug report with them.
when i run jest --watch, i see unknown coverage.
i 'm seeing a memory leak while trying to run a basic autogenerated ( with "ng g c my-test" and "ng g c "my-test-2") angular component.
if i run jest with --detectleak , i get messages saying that there are leaks.
if i run jest with --runinband , i see heap size going up ... when add enough of those "blank" tests or reduce the size with --max_old_space_size= , i run out of memory.
from what was able to see the teardown (between tests) is not happening properly until it finishes the very last test.
any suggestions on what to do?
versions: jest: 23.6.0, jest-preset-angular: 6.0.1, jest-leak-detector: 23.6.0, zone.js: 0.8.26
i am trying to test a function which uses rest parameters destructuring phofhyperlink .
this throws an **unexpected token exception** which points to the line where the function is declared: phofcode the project isn't **transpiled or transformed**.
according to node.green phofhyperlink , **rest destructuring** support is supported by my node runtime (8.10.0) and testing it in the repl confirms so.
when a file is not covered by any unit tests, jest consider it as a untested file and generate empty coverage phofhyperlink for it.
however, these files are instrumented by babel without using `babel-plugin-istanbul` phofhyperlink .
therefore, if they use es6.
the coverage data is not correct.
the snapshot in `tomatchinlinesnapshot` is not updated after i used `--updatesnapshot` to update snapshot.
jest did not exit one second after the test run has completed.
this usually means that there are asynchronous operations that weren 't stopped in your tests.
consider running jest with `--detectopenhandles` to troubleshoot this issue.
i am running the following versions: jest 23.6.0 node.js 11.0.0 react 16.4.2 react scripts 2.0.4 i have a test (see code below) that mocks an asynchronous method and then calls a different async method that is in turn calling the mocked method.
i am wanting to test that another mocked function is being called based on the result of the mocked method.
using version 8.12.0 of node.js tests passed and ran as expected.
since upgrading to latest version of node.js tests fail.
i believe this to be due to nested async methods.
i have normal quite big test file that work fine in node 10 but is freezing in 11 after printing: phofcode from what i've checked all my settimeouts return a promises or have async `done()` call.
found this in travis here is link to broken build: phofurl
the cli option to update snapshot option interactively i dont see when i run jest --watch
when jest generates a mock of a module like this: phofcode the global environment is polluted as a side effect, such that the global string constructor is switched to a mock function.
this breaks object type comparisons.
this is the line where the pollution happens: phofurl
this is a regression of the bug reported in #3111 that was fixed in #3006 and broke again sometime in the v23 branch.
when a test is inside a folder that has a name starting with period, `.`, they are ignored by `testmatch` and by `testregex`.
it 's even more obscure if the entire project is checked out below dot-folder, in which case all tests are ignored.
i just upgrade my project from react 0.53.3 to 0.57.3. after the upgrade, my jest tests no longer passed because my coverage thresholds were no longer achieved.
it 's definitely a configuration error on my part, but i just can 't figure out what i have to tweak in order to fix the issue.
for this issue i am presenting the simplest file can to expose the problem.
the problem happens across entire project but can 't really share whole thing.
any help is greatly appreciated.
i am currently creating a snapshot test for an object where one of the properties is a string that has a new line ( ' ').
like this: phofcode upon generating a snapshot for testing one of these objects, the generated snapshot shows this: phofcode the next line characters are lost and the generated snapshot does not include them.
i was not able to find any issue related to this to see if there is something i am doing wrong, or if it is not supported :)
when using the new snapshot resolver feature: phofurl the "obsolete" snapshot checker is deciding that all my snapshots are obsolete after a test run.
i use jest for some of my projects in the monorepo phofurl the configuration below is used to run jest tests of the `webparser` package.
as soon as i attach a new breakpoint the test output isn 't visible.
sometimes breakpoint works sometimes not.
sometimes it works, sometimes not.
phofurl broke node.js 4 support as array.prototype.includes is only in node.js 6.5+ available.
when i run jest on a set of tests, it will fail with phofcode if i disable the code coverage then it works properly.
do you have any recommendation on how i could debug the problem.
jest seems to modify the `process` object in such a way that breaks the ability to run code inside a domain - i.e., `process.domain` does not change to be the current domain set by calling the `enter()` method of a domain or running an arbitrary code through `run()` method.
* i know this feature is deprecated in node, yet we still have some production-code using it heavily - so suggestions to stop using this modules are unfortunately invaluable at moment.
`jest@24.0.0-alpha.1` fails to generate coverage when using the `testregex` config param.
this issue has been introduced recently by phofurl
my set up is babel 7 with typescript and the jest.config's transform property is set to `babel-jest`.
the reason why i'm not using `ts-jest` is because i want to transpile the code with babel so i can use the preval plugin phofhyperlink .
this works great when i when i manually runs `yarn test`, it'll transpile the code according to .babelrc config and run tests without any errors or failures.
the problem arrived when `yarn test` isn't runed by me directly.
have a git hook with husky phofhyperlink to have it run `yarn test` with `pre-commit` hook.
what happens is whenever a commit happends, it'll run `yarn test` and jest will fail transpile code.
the output logs will be filled `jest encountered an unexpected token`, and it seems like jest ignores babel config entirely when command isn't executed directly by me.
it also seems be a connection this errors get vs code extention vscode-jest phofhyperlink being runed in background.
they do not interfere each other, tried without plugin same issue still present.
when using the `--testnamepattern` option and named snapshots, snapshots not matching the pattern are listed as "obsoleted" instead of "skipped" (as they are without using a snapshot name)
jest-workers default for numworkers is the number of cpus minus 1 phofhyperlink .
when there is only one cpu this results in a default numworkers of 0 and no workers will be started.
babel-jest doesn't transform es6 files when the babelrc contains only the `extends` property.
set variables in `beforeall` hook, get `undefined` value in `describe` block; i am not sure it's a bug or is there any purpose for designing `jest` like this?
the documentation for the `setupfile` configuration option is misleading.
here's a link phofhyperlink to the documentation.
it states that the setupfile will be run `once per test`, however it appears that the setupfile runs once per test * file * .
`npx envinfo --preset jest` fails on windows with a stack trace.
upgrading jsdom causes a `yarn check` error with jest-environment-jsdom.
coverage becomes unknown after adding an exclusion patter to the `testmatch` config option.
using typescript with rewire( phofurl and jest for testing ended up with the following error: cannot find module from 'rules.js ' at resolver.resolvemodule at object.<anonymous> this occurs because rewire requires eslint as a dependency and jest tries to do something with all imported modules, but seemingly can 't handle .json files it can be 'solved ' by adding the .json extension in eslint 's `rules.js` rulereplacements import const rulereplacements = and the following in a typescript project 's package.json: phofcode i hope this might help some people in the future
use the native promise implementation breaks usefaketimers
jest.clearallmocks(); does not remove mock implementation within `aftereach`
when running `jest --watch`, changing a file's access time triggers a test re-run.
the snapshot testing seem to render different snapshot for two different ways that would produce the same wrapper: - for '}` - for{ ' '}` in both cases, you would expect whitespace before and after `for`.
however the snapshot for the above cases are different: - the first one produces: phofcode - the second one produces: phofcode the difference is whether the whitespace after first `for` will start on a new line.
the below code does not work, with the error.
`cannot set property bar of [object object] which has only a getter` ` import * as foo from './foo'; foo.bar = jest.fn(); ` edit: after further investigation i've isolated it to the use case - importing and then re-exporting objects/modules within a single object causes these objects/modules to become immutable which means i cannot stub them.
is this a known issue/is there a known work around?
i built a front end app with no back end.
hence the data source i used is local .csv file.
in order to import the .csv file correctly without the involvement of the webpack in test environment, a js file is wrote to convert these csv files to .json files and a modulenamemapper is set to redirect imports.
however, problem is that globalsetup ran asynchronously which means import of testing files are processed before they are transformed.
the `expect` npm package is not usable in browser, although it has a `browser: build-es5/index.js` field.
i feel jest documentation is lacking in helping people to configure it in an environment where multiple decoupled, local module dependencies are at play -- especially when they are es6 modules.
it would be extremely helpful and valuable to document a working example (an example repo) of this use-case.
you cannot pass a variable set in the `beforeall` block as a parameter to a parameterized test, as `.each` is run before `beforeall`.
i have configured my project with all the needed jest + babel settings to transpile es6 modules but when i attempt to run jest, it does not transpile.
i have followed all the set up steps outlined on this page: phofurl and nothing works.
all my finer details can be found on this so post.
when updating an inline snapshot on a typescript jest file that contains async calls, jest generates wrong syntax for async tests.
snapshots can't be found on ci even when snapshots are checked in the source control.
when using typescript 3.1.1 with jest 23.6.0, i get an error when trying to expand jest's `expect` with a custom method.
following the docs for using with babel 7 did not work.
the babel config was ignored so it barfed on `import`.
utilizing both `haste` and `modulenamemapper` config options causes jest 's module resolution to fail.
`resetallmocks` does not reset mocks created with `generatefrommetadata` method
encoded text is not recognized as unit8array in testenvironment "node".
when encoding a text using the node util.textencoder the resulting text is not uint8array.
this does not happens using jsdom environment or directly in node.
jest just hangs in when i do not include the `--coverage` flag
custom async matchers are throwing with an error message prefixed with `error` and not showing the source code of where the error originated from.
the asymmetric string matching throws an error on non-string values, which leads to tests that throw and fail before they can succeed.
coverage functions with typeorm entity is always 0. please see attached screenshot.
i have relations decorator phofcode and coverage for **type => group** arrow function is 0
calling `done()` multiple times in one test should be a failure, but it succeeds
interactive snapshot mode runs endlessly if ** multiple ** snapshots with `snapshotname` in a test file break.
even if i update the failing snapshots, the interactive shell goes back to the same diff error with this error printed : phofcode
jest@23.6.0 ts-jest@23.10.1 when there are changes, even though `jest-watch-suspend` returns `false` in `shouldruntestsuite()` callback, tests are still executed.
jest crawls the file system even an exact test file path is specified.
thus, the test run is slower than it could be.
when using `changedsince`, the message is `no tests found related to files changed since last commit.`
upgrading jest to v22 or later breaks my test.
(i 've tried every version up to and including v23.6.0)
jest.resetmodules() iterates over the global object and checks if any properties are mocks by evaluating if is truthy for each property on the global.
( phofurl if using `identity-obj-proxy`to mock a property on the global object anywhere in the test setup, jest.resetmodules will break.
`identity-obj-proxy` is a proxy that returns key as value for any attemps to index object ( phofurl which means value of `_ismockfunction` will be string `_ismockfunction` which is truthy, and value of `mockclear` will be string `mockclear` which is not a function, ergo error `typeerror: globalmock.mockclear not a function`.
jest doesn't mock the properties in the last component of the prototype chain (even if it's not `object`).
jest doesn't mock the properties in the last component of the prototype chain (even if it's not `object`).
a clear and concise description of what the bug is.
i have a simple project where i 'm using babel 7.0.0 instead of 6. jest fails to work with it, saying that it can 't find the "env" preset, even thought it is installed and indicated in the package-based config.
a clear and concise description of what the bug is.
using jest-leak-detector inside a test to detect app level leaks while running the test with jest --detectleaks will cause jest to report that "your test suite is leaking memory"
jest or babel-jest doesn 't seem to work under ci environment (be it ** travis ** or ** appveyor ** ) when using node 6. with **node 8 it works fine in both cis**.
i 'm using **babel 7**.
when tested **locally with the same node 6 version it works**.
when i try and use `<> ... </>` coverage reporting breaks phofcode
the contribution guide did not tell that you need python 2 to run `yarn install` on windows.
jest is making a snapshot with `null` in it for react native `statusbar`.
i have googled and searched everywhere and found nothing related to this.
i was trying to test if the bar is changing the theme when i change configurations.
consistently called async functions do not work well with fake timers.
i have a react project which i recently migrated to bable7.
everything works fine but when i tried to run my test cases it started failing.
all of the other issue i was able to resolve except this one.
it seems like `object destructuring` seems to be failing when running `jest` here is my component that fails.
phofcode here is my `.babelrc` phofcode here is my jest.config.js phofcode here is package.json phofcode the jest test runner fail output
when trying to run tests with jest in a react app, i get a `jest encountered an unexpected token` error.
i copied the `link` component and test directly from here phofhyperlink .
this is the error: phofcode here 's my `package.json` phofcode here 's my `.babelrc` file (located in the root directory): phofcode
in my `jest.config.js`, i config `transform` like this: phofcode and run `babel_env=test jest --ci --coverage`.
while when i tried to use config like this: phofcode error throws: phofcode i don't know what is the difference, because my spec file are all with `.js` extension.
automock doesn't work when the is set to ` ]`.
an empty array as [doc says phofhyperlink should be a default value.
setting to non empty array or removing this param from config start automocking working again.
i have a custom test environment that sets some variables in the node environment.
these variables are not available in the environment in the test.
debug jest with current test file doesn 't stop at correct breakpoint in vscode
babel 7 added support for dynamic configuration, however, because `babel-jest` is dependant on `babel-core`, it 's using the wrong version of babel for loading options and running transformations.
babel 7 uses `@babel/core@7.0.0` which is an entirely different module.
as such, it doesn 't load the user 's `@babel/core` but instead loads the one provided by `jest-config` transiently which does not pick up the new `babel.config.js` format introduced in 7. dynamic configuration docs phofhyperlink
after setting up jest, i am unable to hide this warning about duplicate errorutils found in phofcode
i get the following message when trying to run tests.
none of the solutions in the documentation or other issues work.
using arrow functions in mockimplementation function the class instantiation does not work.
works if the function keyword is used.
starting an http server results in an open handle despite closing the server down after tests ran.
after migrating from `mocha` to `jest`.
i got the following error for naming the `beforeeach` function: phofcode
"bound" function does not pass for example if i use then it is not considered an instance of `function` according to jest
tests don't run if there is a `test.each(table, fn)` where `table` is a global state which is populated in `beforeall`.
but since `jest` analysis sees it as **no tests** it doesn't run `beforeall` either.
jest does not honor `browser` fields field in concurrent tests correctly if nested in `projects` field.
this makes it very difficult to run node and jsdom tests concurrently.
unable to redefine properties of the `window` object, using 'property', ..)`.
note: an issue was created with jsdom directly, however it seems to work fine when using jsdom outside jest, cf.
installing jest first time in cra application fails and then succeeds when attempted after running npm install
however i think its incorrect for `jest-config` to specify `babel-jest` in `dependencies`.
especially if user is not using babel.
also, the docs for `babel-jest` indicate the user should install `babel-jest`.
if this is the case, then that removes the need for `jest-config` to depend on `babel-jest`.
when a test fails, it will show the file name of the test with some wrong extension, i don't know if the error is actually from the filename value or maybe some terminal visual artefacts.
screenshot from phofimage as you can see, there is correct file ``toto.test.js`` but it's also showing ``toto.test.jss`` and sometimes it's showing ``toto.test.jsjs``.
``toto.test.jss`` doesn't exist and correct file ``toto.test.js`` is just an empty file.
cannot run `jest` with `babel v7`.
here 's the error message: phofcode inspecting the stack trace and after some debugging, i found out that babel 6.26 is required because of `jest-config` and `jest-runtime`.
both are on the latest version `"version": "23.5.0"`.
but have an explicit v6 in their dependencies which gets propagated to my test and produces the error.
**custom properties on objects** constructed from a **`class` that extends `error`** are not evaluated when matched with either `.tothrow` or `.tothrowerror`.
a function that writes to files throws an error when the filename is wrong which gets the following assertion to pass: phofcode where `writetofile` is: phofcode
this bug is likely the same as #6258. in some cases, when i run `jest --coverage --watch`, i get the following error: phofcode
it is impossible to mock a `localstorage` method
cannot find module 'sourse-map ' from
when i run my tests and i render my component (using the shallow function of enzyme) it fails because it can 't find the render function.
i think the render function is not inherited from the react.component prototype phofcode
the test fails with an incorrect failure message when asserting the number of html elements a function/method returns.
instead of getting an error message about the actual problem (incorrect length) - i get a message saying `securityerror: localstorage is not available for opaque origins`.
i do have `testurl` set in my jest config, however that doesn't have any effect
testing that an async function resolves/rejects with a value prints errors showing reasons why the tests failed, but then shows they passed in the summary.
i found that when testing async functions and following tdd, my initially empty `async` function would pass most of my rejects/resolves tests, whilst throwing up a lot of reasons why the tests should have failed above the summary.
when using the incorrect amount of arguments for `describe` i receive an error that doesn 't match whats actually happening
recently i 'm working on migrating my project to monorepo.
but after i set up the monorepo, all the tests failed.
the first issue it that the test files in packages will not be transpiled by `babel-jest`.
so i will get this error: <details> <summary> <b>click here to see the output log.</b> </summary> phofcode </details> <br> <br> after some investigation, and checked out related issues: #2081, #3202, etc, i found my issue should be caused by `monorepo`.
if `tohavebeencalledwith` is used with an iterable, `rangeerror: maximum call stack size exceeded` will be thrown.
when using coverage with jest, the tostring method of the child class is lost.
jest delightful javascript testing phofhyperlink link is 404.
running an empty test gives an error message `jest has detected the following 1 open handle potentially keeping jest from exiting`
we are running into a issue in jest 23.4.2 where jest leaks and runs out of memory when running a moderately hefty test suite (~500 to 1000 test files).
i believe i have isolated this to the `require` system in jest and it is not the fault of other packages.
even with the most minimal recreation it leaks around 2-6mb per test.
this is very similar to phofurl but i opted to make a new issue as i think it 's not specific packages or the node environment.
think it 's also source or related following issues as well but didn 't want sidetrack potentially different issues and conversations.
phofurl phofurl phofurl this is my first time digging into memory issues, so please forgive me if am focusing on wrong things!
i tried to use `create-react-app`, but install dependencies using pnpm.
when running `npm test` i get error: `cannot find module 'slash '`.
the `jest-runtime` package seems to be missing a `slash` dependency in `package.json`.
my jest version is v22.4.3, i found a issue possibly that if i put coveragethreshold inside projects node, it seem to no work correctly, but if i put it outside projects node, it will work correctly.
- below is work for me when it acheive the threshold.
phofcode - below is no work for me when acheive the threshold.
namely, it will not throw a error of threshold.
gives an unhelpful error message when matching object values.
setting an element's `style.background` to `grey` does not change the property.
rewire throws a type error when overriding a const variable while running jest tests.
jest.spyon(localstorage, "setitem"); doesn 't work; `jest-environment-jsdom` has caret dependency on jsdom -> `11.5.1`, `jsdom` latest version is `11.12.0` and it includes localstorage and sessionstorage.
previously we could mock localstorage easily but now we don 't have that option and we need to use the default `localstorage` implementation.
so our option is to spy on it which doesn 't work because it throws `typeerror: is not a function` what i have discovered is that in the issue with the `set` method of the `proxy` currently code below on line 278. phofcode if we remove * receiver * from `return reflect.set(parent, p, v, receiver);` will be able to spy on it.
but i guess that 's coming from `webidl` converter
the error trace generated when a method reference is ** not ** passed as expected to aftereach is cryptic and hard to debug.
the heap usage keeps increasing when using mongoose
jest config in root: phofcode `projecta/jest.js`: phofcode `projectb/jest.js`: phofcode `ourtoolspackage`: phofcode i run `jest --verbose --debug` in root of monorepo and config is: as you can see, in projectb 's `transform` field, we have by config itself only one "transform" (it is set by jest-preset-angular phofhyperlink ).
but if i run it from monorepo root, another (from `projecta`) transform field is added.
i've made setup without create-react-app and when i try to run tests i got error: image phofimage test is very simple : **it('first test', () => { })**
we have two different classes but with the same name `client`.
a clear and concise description of what the bug is.
jsdom just recently upgraded to version 11.12, which includes support for `window.localstorage` and other features.
see phofurl a fresh yarn install deduces that jest uses this latest version, but this causes all existing jest test cases to fail with: `securityerror: localstorage is not available for opaque origins`
`window.postmessage` do not trigger message event listener.
but this works in jsdom: phofcode and it here is the result in jsdom: phofcode
jest reports an error seemingly due to an import loop, although the code is importing types for the tested file.
running flow from the command line shows no errors.
the typescript example within the linked project has no errors with similar code.
`beforeall` inside skipped describes are executed regardless.
this was already reported in #6166 and closed with #6234, but from what i've seen the problem remains when using the default `jasmine2` runner.
i wasn't able to reproduce the bug when using the `jest-circus` runner.
when the test function returns a promise and you use `assert` to make the assertion, the output doesn't show the diff.
when mocking a high order function with `mockimplementation`, the mock returns `undefined` instead of the inner function.
phofcode phofcode this is the result of executing this test suite: phofcode the problem is that inside `module.js` when calling `iskey()`, instead of returning the inner function `() => false` it returns `undefined`, and `anypass` is trying to execute it as a function.
the weird thing is that if you transform function `isvalidkey` to a non-point-free style, it works as expected.
`iskey(...)` evaluates to expected function inside scope of that function: phofcode
debugger keyword or breakpoints does not work anymore in watch mode.
it stops on first line but not in other breakpoints
`expect.tomatchobject` throws a typeerror when an object a is expected to match an object b, where a has been created with `object.create(null)` and b has properties that aren't in a.
jest.retrytimes() phofhyperlink does not retry.
test run of several test files with workers (i.e., not in band) sometimes hangs indefinitely if the code under test calls `process#exit`.
demo note: `y` is an alias for `yarn`, and the code is found at phofurl run that hangs phofimage here's the output with the diff from #6714 applied: run with output regarding `process#exit` call from #6714 phofimage
`require.cache` phofhyperlink is broken in modules tested by `jest`.
this is a public, documented feature, while rarely, it 's occasionally used by some modules (e.g.
when using projects, the resolver caches between those projects even if different resolver's are specified.
firstly... love jest thanks for all the awesome work you guys are doing there!
secondly... it appears that when using the test runner in the cli with `--watch` and `--coverage` when having filtered tests using the `p` option coverage seems to run before test suite sometimes resulting in empty coverage output.
if i run it again with `a` option it resets and runs all coverage and then allows me to filter by `p` again and runs coverage correctly.
i think this might be to do with persistence of `p` filter between runs, which i love by way...
data streamed to `process.stdout` and `process.stderr` does not appear in sync.
it makes debugging in some cases difficult and very confusing e.g.
i work with application where some parts, rely on `console.log` (so propagate debug logs to `stdout`) while some app dependencies output debug logs via popular debug phofhyperlink library (which propagates logs to `stderr`) logs from both sources appear out of sync, which makes reliable debugging quite difficult.
in node.js v8+ `console.trace()` output always starts with ` [object object]` message
when i run jest tests, i have the following error: phofcode my info: os: windows 10 pro node: v8.11.3 yarn: v1.3.2 the problem seems to appear only on windows.
when testing `.ts` files, they don't appear in the coverage report
when the shell has a different casing of the drive (probably directory too) then coverage is added twice.
it appears to be the root cause that a) resolving of files is done differently to working out uncovered files to cover b) the check for whether a file is already covered is case sensitive: phofurl
using jest for coverage report for typescript seems to be highly inconsistent.
most files fail to be detected when exported or tests are added for them.
i've been trying to make this work since friday, the only way to make it do something was use `jest` with `nyc` but that solution opens another can of worms, as coverage report is incorrect either for sourcemaps or imports, phofurl as you can see here (based on the same repository but master branch) it is not reliable.
it appears an `nth-child` selector inside another `nth-child` selector returns `null`.
a clear and concise description of what the bug is.
babel-jest's getcachekey phofhyperlink uses a variety of factors to generate the hash used for the cache, however currently doesn't include the list of options that were passed to the `createtransformer` constructor.
this means there are incorrect cache hits even when underlying options have changed.
i'm looking for the best practice for aborting a `describe` block if the test setup fails.
for example, when testing an api, if authenticating fails, it's pointless to run any other tests.
as suggested in the issue template, i searched stackoverflow first, where i found this incomplete answer phofhyperlink , advising to place the initialization code in a `beforeall` block.
hence, raising issue here because 1) i haven't seen anything documenting practice of returning failure from `beforeall` 2) if a `beforeall` block fails, tests in that `describe` block are still run, and they fail, even if otherwise they would pass!
we've been using jest alongside jasmine for the same test suite for about a year now.
we love jest because it's developer experience is superb, however, on our very large monorepo with ~7000+ test specs, jest runs about 7 times slower than jasmine.
this problem has been getting worse and worse as the test suite grows and as a result, we always run our test suite via jasmine and only use jest for development --watch mode.
we would to use as our only runner, but its poor performance is preventing us from doing so.
having to run both and jasmine runners requires painful ci setup constant upkeep of the jasmine environment setup (which is much more complex than jest's).
i'd like to better understand why the performance difference is so significant if there's anything that can be done to optimize it.
errors thrown in `afterall` inside a `describe` can cause a test suite to fail silently.
this bug was previously reported under phofurl and fixed under phofurl - but the fix addresses errors in an `afterall` at the top level, not inside a `describe`.
as noted in issue #1047, jest ignores all tests if testpathignorepatterns matches the path to the repo.
this seems like a bug but the jest devs seem to treat this behavior as intentional, so i am just here to complain that there seems to be a bug in the way jest reports what it is doing users.
in particular, it tells users that `testpathignorepatterns` has `0 matches`.
not sure if this is necessarily a bug, but definitely a footgun/confusing message.
when expecting a function `tothrow`, jest outputs the `error` name in the test failure message, but does not actually match on the name.
i am unable to run test files using jest while node v.6.9.1 is installed.
when i update to node v.8.11.3 there error goes away and the test files run just fine.
i am using the latest version of jest and rn 0.56.0. error: phofcode
when using property matchers in snapshots ( phofurl the matcher mutates the object.
`node --inspect-brk jest --runinband --watch` doesn 't stop on breakpoints or debugger statement whereas `node --inspect-brk jest --runinband` will (no --watch flag) noe: it is using ts-jest 23.0.0 ** jest.config.js ** phofcode
i can run tests with a local install... npm install --save-dev jest ts-jest typescript but a global install causes this error when `jest` is executed: validation error: module ts-jest in the transform option was not found.
(this occurs even if ts-jest, but not jest, is installed locally in the project.)
nesting promise.then() blocks causes module mock to reset this code was causing the `cross-fetch` mock we use to reset which was causing test to fail with `cannot read property 'then ' of undefined` error.
this is because we mock `fetch()` (default `cross-fetch` export) in our test to return a fake network request.
** broke ** phofcode however, if we flatten out the promises like below the mock doesn 't reset and nothing blows up.
** works ** phofcode **how do i know that the is resetting?
** to validate this i added some logging code phofcode and output shows `fetch.mock.calls` getting reset be empty after a few calls as shown below.
when i run the tests on the local machine my tests coverage 85%, but when the tests pass to my ci testing coverage there is 83% and the reason for this difference is that on local machine in calculation of coverage tests take part in test (`*.test.js`, `__test__/*`) files.
i have asked about the problem on stackoverflow for a week ago without any answer question phofhyperlink (( i have configured jest as described jest for puppeteer but suddenly i've got the errot on usual test with document event listeners # to reproduce steps to reproduce the behavior: - configure jest to work with puppeteer - write test for react app which is using event listeners
the setup suggested in the documentation doesn 't seem to work and triggers the following error message: phofcode (inline): requires babel "7.0.0-0", but was loaded with "6.26.3".
if you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version.
inspect the stack trace of this error to look for first entry that doesn 't mention "@babel/core" or "babel-core" to see what is calling babel.
i was using promise resolution with `settimeout` in one of my test cases and seems like promise are not resolving at all.
jest ignores obsolete file snapshots if there are inline snapshots in this test.
configuring jest `collectcoveragefrom` with curly braces syntax for file type displays a coverage of 0% with unknown status.
with jest & node 10.5+ (experimental) workers, any output in the worker to stdout/stderr makes the test fails.
to clarify, the test itself passes, but the overall execution fails.
node cannot find stream to write to at end of execution, possibly due to jest bufferring?
when worker has no writes stderr/stdout output, everything works as expected.
`mockresolvedvalue` and `mockrejectedvalue` should return a real promise testable with `tobeinstanceof` but they don't.
something about lodash causes jest to detect "open handles"
i am attempting to write a test that asserts that an error thrown conforms to a particular format.
ive noticed that the .rejects.toequals approach works assuming the assertions pulls through.
however, if it fails the test runner crashes.
ive tried putting try catch blocks over the assertion but to no avail.
i also did some light reading into issue and found that this phofhyperlink has been a known issue so i 'm looking for potential mitigation strategies or guidance.
when updating jest from 23.2.0 to 23.3.0 the previously successful test fails with these errors: phofcode nothing else changed.
going down to jest 23.2.0 everything works again.
the error message does not even highlight some non babel package where the error comes from - so i figure it 's really some internal issue of jest.
when calling the error thrown is somehow caused by `myclassinstance` being undefined, not the error that the method should throw.
the test itself will be green (because an error is thrown by jest), but the message created in snapshot is not message contained in thrown error object.
phofcode calling `new directly results in correct being thrown.
link on jestjs.io index for "mocking library" leads to a 404.
an async test that fails because of a timeout will still assert the expectation in the next block.
if this occurs during another test, the assertion will be treated as part of that test, leading to errors if the number of assertions to be expected is set.
when used with objects or classes for parameters expectations, tohavebeennthcalledwith error messages report the wrong call argument.
it reports the last call arguments as received arguments.
test.each() doesn 't exist in tests using jest 23.2 and angular 6 with jest-preset-angular phofhyperlink .
phofcode i promise you, i write unit tests!
on angular 6, importing file from outside project and using `interface` to define type of `@input()` parameter cause `cannot find module 'ts-jest' from '<file.ts>'` when running `jest`.
when spying on a method that is called throughout multiple parts of the running application the expect method `tohavebeencalledtimes` does not accurately track the spied on method.
links that are in the "browse the docs" category on the help webpage redirect to a 404 error.
`expect.assertions` should work when using `test` and `describe` in one file.
when snapshotname)` has `null` as the first argument, jest prints a confusing error: phofcode
windows 10 jest version 23.1.0 when i run jest in react source code, it always consoles like this image phofimage jest cannot find any test file.
it seems that something went wrong with replaceposixsep function in jest-config build ormalize.js.
phofcode when i change the regex expression to / /g, it went well and test file can be matched.
is there anything to do with path.sep?
because path.sep is ' ' on my computer.
`toequal` does not deep equal check custom error objects correctly.
latest nanomatch version was broken, which in turn broke the jest latest version for me.
i 'm in the process of upgrading to `@babel/core` version `7.0.0-beta.51` from `babel-core` version `6.x.x`.
as part of this upgrade, i 've run into a ton of issues with jest failing to process tests.
it took me nearly 48 hours but i 've been able to isolate the issue to a tiny reproducible test case.
see "to reproduce" below for details.
tldr: when using `babel-jest@23.0.1` and you cannot have any subdirectories in your project that have a `package.json` file.
if you do -- `babel-jest` will fail process files.
the start() method of the runner spawns the jest process, waiting for the tests to complete.
it relies on the phrase 'test results written to' to be first text of text-chunk received from stdout.
for different reasons, jest writes this information to stderr instead of stdout, which causes runner to never interpret test-results
this is going to be somewhat of a difficult bug report since there's many moving parts and i'm not sure which causes it, but since upgrading jest from 23.1.0 to 23.2.0 phofhyperlink , i'm currently running into phofhyperlink the following error on one of my projects: coverage summary statements : unknown% ( 0/0 ) branches : unknown% ( 0/0 ) functions : unknown% ( 0/0 ) lines : unknown% ( 0/0 ) jest: coverage data for global was not found.
apart from the upgrade (which did encompass quite a few packages to be upgraded along with `jest` proper), nothing changed in my setup.
i'm using typescript with ts-jest, if relevant.
whenever using `.toequal` matcher, if the object doesn't match completely and has, for example, an anonymous function as a property, the diff is confusing.
i haven't tested with any other generic `expect`, but i'd guess it's also an issue.
in the documentation phofhyperlink is described as a simple sugar function for => but i noticed a different behavior when using es2018 promise `finally()`.
the tests pass with `mockimplementation()` but fail with `mockresolvedvalue()` and return this error: `finally is not a function`.
jest cant find any test with 23.2.0 .
if revert back to 23.1.0 - it find all test phofcode
when a capitalization error is made in a module path with `jest.mock`, jest does not report an error, and runs the test without mocking the module.
this is certainly os specific as macos has a non-case-sensitive file system.
i am not sure what the correct behavior is, but it should either fail, or load the mock.
my preference would be to fail, since we would never purposely ignore case to ensure that everything is cross-platform compatible.
normally, when you make an error in a module path, jest will report an error.
: mock: phofcode in test: phofcode jest: phofcode if you make capitalization error, however, jest carries on without reporting an error, but loads real module instead of mock.
phofcode so it cares about casing when resolving mock, but not when resolving actual module.
a clear and concise description of what the bug is.
running test with jest configured with setupfiles passes on linux and macos but fails on windows.
single line functions (both arrow and regular functions) are not shown as uncovered (nor partially uncovered) in the coverage report.
i am not sure this is bug or behavior but when jest runs with file that is incompatible with `strict mode`and custom trnasformer is used.
jest passes test without `--coverage` but fails with `--coverage` .
i'm not sure if this is a bug report or feature request currently jest throws the following error if the return value from a test is not either a `promise` or `undefined`: phofcode i'm not sure what value this behavior adds to jest - while it does seem weird to return from inside a test (as what would you be returning to?)
i don't think that it should fail the test by throwing an error.
in `jest-chain` i've had the following issue phofurl raised for when using arrow functions without body i.e.
phofcode this causes error because `jest-chain` binds all of available matchers together to be chainable, so expect statement is no longer returning `undefined` but rather itself (the expect object).
it appears this behavior was added while back when adding support for promises in phofhyperlink and is not something that supported in `jasmine` itself - nor `jest-circus` from what i could see.
following jests troubleshooting guide phofhyperlink debug a jest test fails with: > vm88 unrecognized cli > > following options were not > x1b[1m["inspect-brk", x1b[1mcli options phofurl a clear and concise description of what the bug is.
due to phofurl i decided to go with two different configuration files, one for my main and one for my renderer process in electron.
sadly this is causing issues aswell.
there seems to be a problem with jest & rxjs 6 as failing expect-statements inside an observable's subscribe-block do not mark the test as failed.
this worked with rxjs 5.
basically i got a bunch of files for my electron app, some of them require a node environment, and some of them jsdom, because i need to test out some features of my react components, e.g `componentdidmount` methods, but i can 't define different `jest` configs for my folders, as shown per documentation in jest phofhyperlink as it resolves to no tests found.
google is returning a link to phofurl for this repository but it 's results in a 404. the "code" tab (at phofurl still links to that url as well.
we recently found, after migrating multiple projects to a monorepo, that code coverage reporting can miss projects under test when lerna is used and jest is invoked with specific combinations of cli flags.
a clear and concise description of what the bug is.
using the object this.result in tests causes test suite to fail.
hi, i'm trying to create a new app with create-react-app.
i am immediately getting a jest error on the default included test that jest runs after i create the app with create-react-app and run yarn install -- before i have edited any files in the app.
i have used nvm to switch between versions of node 9 and 10, and have created multiple apps.
keep getting the same jest error (screenshot link below).
i would like to manual mock a json file i'm using: phofcode when i try to run my testsuite, i get the `syntaxerror: unexpected token :` on the first key-pair value when the json is imported.
passing `--onlyfailures` doesn 't run failed tests only.
can't test projects which use ant design components by importing them as es6 modules.
i was recently attempting to integrate chai's `should` assertion syntax into a jest test suite, and discovered something a little odd.
for some reason, tests that work fine in mocha and in jest with `jest-mocha-runner` crash in jest, with errors indicating that the `should` methods are no longer defined at various points in the language chain.
i've seen the issue with built-in objects like `url`... phofcode ...as well as custom constructors... phofcode ...and objects from libraries like jsdom... phofcode ...but it doesn't affect _all_ `should` assertions---some work just fine, and i haven't figured out the pattern yet.
`should` works by manipulating `object.prototype` phofhyperlink , so it seems likely to me that jest's environment is making that difficult or unpredictable.
however, i don't know jest's internals well enough to guess what conflict might be, and i was hoping you might have some insight.
thanks advance for any thoughts you have!
let me know if can provide any more color.
when using property matchers for snapshot testing, if a property matcher is defined within a nested object, then remaining properties are excluded from the generated snapshot.
similar to previous issue phofurl was working until space being inserted in classname definitions as displayed below (see rt-rh and rt-resizeable-header ' snapshot formatting between local (macosx) and circleci build slightly different causing test failure ` received value does not match stored snapshot 1.
- snapshot + received @@ -172,11 +172,11 @@ classname="rt-tr" role="row" style={undefined} > <div - classname="rt-th rt-resizable-header -cursor-pointer" + classname="rt-th rt-resizable-header -cursor-pointer" onclick={[function]} role="columnheader" style={ object { "flex": "100 0 auto", @@ -196,11 +196,11 @@ onmousedown={[function]} /> </div> <div - classname="rt-th rt-resizable-header -cursor-pointer" + classname="rt-th rt-resizable-header -cursor-pointer" onclick={[function]} role="columnheader" style={ object { "flex": "100 0 auto", -220,11 +220,11 onmousedown={[function]} /> </div> <div - + onclick={[function]} role="columnheader" style={ object { "flex": "100 0 auto", 32 | expect.assertions(1); 33 | const tree = component.tojson(); > 34 | 35 | }); 36 at object.<anonymous>
just starting to work on some node app using jest for testing.
on first test i get following error: `jest has detected the following 3 open handles potentially keeping jest from exiting`.
in our ts project we don't use flag or `--esmoduleinterop` so instead: phofcode we have to import packages without proper defined default export typing like this: phofcode the problem is that `each` variable will be `{ bind: ..., default: ... }` instead of function, but typings will not warn us.
why typings for `jest-each` are exported using `export = jesteach` instead of just `export default jesteach`?
`process.on("exit")` does not seem to be called in the jest environment.
splitting this from this issue: phofurl in scenarios involving running multiple tests, console output is buffered and can be intercepted by a test reporter.
when only a single test runs, the output is never buffered.
this behavior is mentioned here: phofurl
the documentation for the `testmatch` option indicates that any micromatch patterns are valid, however negation does not appear to work.
> see the micromatch package for details of the patterns you can specify.
when an object passed in parameter of a mocked function is updated, the reference is used, and the test with `tohavebeencalledwith` simply fails
i have several components that use `settimeout` and `setinterval` for changing their state.
if component fires function after time passed it can be easily tested.
like it's shown in docs.
but if it changes state it doesn't seen by jest.
i have timer that renders `<span>{n, n - 1, ..., 0}</span>` and changes every second.
when reach 0 it can call function passed by props; if i use fake timers `n` doesn't change, but function is fired when time reaches 0
error stacks for source mapped files are not always correctly reported in watch mode.
the feed urls on phofurl are wrong.
the test coverage dropped for the files that were not changed.
changed only 1 'reducer' file in the project and coverage dropped for the other 'reducer' files from 100% to somewhere between 70-80%.
looks like jest suddenly started marking particular line 'return state;' as not covered.
might that be somehow related to new jest version available?
this issue was noticed this monday, june the 4th.
i took inspiration from this: phofurl in order to run my mongodb+mongoose in memory.
when i run the test command on for a specific file: phofcode everything works fine and the globals are properly assigned.
when i run the test command for all my files: phofcode the globals are always `undefined` in my custom environment `setup()` method.
i 've got an es6+ project, using jest for testing.
due to client-side requirements, i needed to add babel to the project to compile es5.
after setting up babel (and doing nothing else), my project 's tests no longer pass.
i have attempted add a `"transform": {}` section the jest config in my `package.json`, but this doesn 't solve the issue either.
i discovered some inconsistent behavior in the `toequal` matcher in jest; when comparing to objects, it ignores non-enumerable properties, but only if they are not symbols.
this leads to quite inconsistent behavior: this test passes: phofcode but this one doesn 't: phofcode where one would expect both to behave the same.
the cause of the issue can be found here phofhyperlink .
to find the string properties `for..in` loop is used which ignores non-enumerable properties, but for symbolic properties getownpropertysymbols phofhyperlink is used, which will include non-enumerable properties.
i am trying to test that a function is called and has a function as parameter.
trying to test it with a react component that is dispatching an action.
<details> <summary>here is the code of the component</summary> phofcode </details> <details> <summary>and here is my test</summary> phofcode </details> and i get this message from the test: imagem phofimage
jest fails when a second test file requires (directly or indirectly) the `ffi` module.
this happens when jest is executed without the `--no-cache` flag.
it happens with and without the `--no-cache` flag when running with `--runinband`.
as of `23.0.0` and above, a test that contains a description without an assertion body `test('should skip')` throws an error when running jest.
we 're having a typescript project that stores intermediate js files on disk as they 're being used by multiple tools.
(inline) source maps in general work fine with jest, but it doesn 't pick up file changes when i save a `.ts` file which then gets transpiled to its respective `.js` file.
i have a similar issue (i think) here: phofurl but this issue is quite old, and i have followed the solutions there, but none worked for me.
at first, i encountered this error for running `jest`: phofcode so i went ahead and added `react-native-onesignal` to `package.json` as such: phofcode so that solved my problem.
but here comes another problem: phofcode tried mocking `onesignal`, but this is what happens when i do that: phofcode
** versions jest 23.1.0 types/jest 22.2.23 jest-preset-angular 5.2.2 jest-zone-patch 0.0.8 angular application windows 10 computer vs code 1.23.1 typescript 2.7.2 ** context: ** typescript allows the use of paths in the tsconfig.json file such as "baseurl": "./src", "paths": { "@app/*": ["app/*"] } so the imports can be done this way: import { component } from "at app/component" _(note: at is the at sign that i can 't insert here)_ instead of import { franchisee } from "../../../component" which makes for a more readable, easier to maintain code.
** _bug:_ jest fails any test using paths with this message: cannot find module 'at app/component ' from 'component.spec.ts ' at resolver.resolvemodule at object.<anonymous> _(note: at is at sign that i can 't insert here)_
when used with angular if there are multiple test suites where each component contains a @hostlistener only tests for the fist component run, in the others the event handlers defined with the @hostlistener will not be triggered.
if i run tests in different order or one test suite at a time, tests that were failing before run, because there is no other @hostlistener registered before them.
a clear and concise description of what the bug is.
when i clicked the left top icon, which was just near the version number, it jumped to phofurl and redirect to phofurl with err_connection_reset.
if i tried to switch languages, it also jumped to an error page.
on windows, file paths in tests reports on the cli are reported using backslashes (likely from the default `path.join`): phofcode that's inconvenient because you can't run `jest <path-to-file>` to run just that file.
* works: `jest * no matches: `jest
i use to different babel configs for babel-node + webpack & react.
so i try to transform for jest with custom babel config for react but it fails
i have an "autobuild" task in my package.json which automatically rebuilds the typescript i have into a `dist` folder when said typescript changes.
i 'm running jest with the `ts-jest` transform, so the stuff in `dist` is _only_ dist code.
as such, i 've added the following to `/dist/`.
however, when running jest in watch mode and also having autobuild process running, an autobuild will often cause jest to crash with an enoent, referencing a file under dist (because part of build process is to destroy existing build artifacts -- clean build).
when i import a styled component and extend it my snapshot tests fail with an error message: _typeerror: cannot read property 'extend' of undefined_
jest notifies me as follows that 100% of 0 tests passed when i save any file in my watched directories, even if there are no tests associated with it.
what is the utility of this?
**tl;dr: use of the `--projects` cli option is somehow making jest ignore my multi-project config.
** i 've added jest-pytest phofhyperlink to my jest setup.
to keep my existing js tests running, i 've created `jest-pytest.json`: phofcode here 's what happens when i run `jest` with the default config: phofcode when pointing to the above config file, the right tests are included & excluded: phofcode however, when specifying a particular project display name to use, **it ignores given config**: phofcode and when specifying two projects, *it goes bang*: i tried running `jest --clearcache`, didn 't help.
also ran with `--debug` and found that `globalconfig.projects` object goes missing when `--projects` is specified.
( see this gist with outputs.
i'm trying to run the tests, but in the files that i have the dependency with node-jt400 i'm getting the error,
having meteor edgee:slingshot breaks tests on windows (even tests which are not related to edgee:slingshot).
because cache files contain following pattern `edgee:slingshot`.
i run with `jest --runinband --no-cache` and with a filename limit longer than 260 characters on windows; to exclude most common issues.
note: i also use `"jest-meteor-stubs": "1.5.1",`.
i get following error: phofcode
`jest-circus` happily passes a test which times out.
the example from the documentation for phofhyperlink works when the substring isn 't contained, but it gives a `val.toasymmetricmatcher is not a function` error when the substring is contained.
it 's expected that the test should fail, but this does not seem like expected error in this scenario.
i 'm not really sure if this is a bug, or perhaps something that we need to work around.
somehow the coverage generator is trying to parse the package.json and outputs this error.
the latest version of jest (23) now throws errors on test statements without a callback.
when attempting to match against a rejected promise exception, the test passes regardless of the matcher matching output is generated indicating the issue, but the test still passes.
this is bound to confuse a ci system.
updating to node version 10.0.0 caused a failure in our tests which boiled down to an `instanceof arraybuffer` check failing.
here's the reduced test: phofcode
when running `--coverage`, babel transforms on components ' `displayname`s aren 't found, leading to failing tests.
i 'm using this babel plugin to change all display names of components created with `react-fela`: phofurl example test failure: phofcode my understanding is that babel jest should be making the transformation (before being instrumented?)
specified in my configuration: phofcode and in my `jestconfig.json`: phofcode but that doesn 't seem to be the case.
when navigating to phofurl phofhyperlink , i get a 404 error.
the react-native site) load fine.
running `yarn test --coverage` fails with an error: phofcode error is thrown in in method phofcode `node` variable points to line 3 and position, drawn by arrow
`@jest-environment node` doesn 't correctly set `document`, which we are using to determine the environment: phofcode
i started getting the dreaded `syntaxerror: unexpected token import` error again for `lodash-es`.
and i spent hours debugging it, because i already had .babelrc and package.json:jest configured properly (`"modules": "commonjs"`, a `jest.transform` for `babel-jest`, and set to not ignore after a lot of debugging and a little searching, it appears that babel 7 has stopped using the project 's `.babelrc` code in `node_modules`.
this means that all the previous suggestions to just tell to transpile certain packages in node_modules and set `"modules": "commonjs"` in the test env to make webpack `import` work with jest no longer work.
var current.constants = { test1:"test1", test2:"test2" } function bugrepro(){ }
when `projects` is set to a single project, the configuration for the project will not load.
however, when `projects` is set to multiple projects, the configuration will load.
after committing changes without updating snapshots it is no longer possible to update those snapshots in watch mode.
it is an easy enough problem to work around by cancelling the watch and running `jest -u`, but i find i still bump into it every now and again.
jest scripttransform is throwing a syntax error for a valid async function.
globalsetup does not work with modulenamemappers.
in most setups this would be ok, but there are situations such as ssr where you want to setup a server once, you can run into issues with this.
domock is not work after require once.
when `modulefileextensions` is provided with extensions start with `.`, jest will exit with code 1 without obvious error.
`--projects` flag uses process.env from top level dir, not each project.
as a result, expected paths in process.env will not match runtime behavior of projects.
after running watch mode for approximately an hour, i got an out of memory from node.
could this be related to jest?
when you run `jest` with `--coverage` but there are no tests, it shows error "jest: coverage data for global was not found."
`set` as an object and `map` with an object key does not ignore sort order.
relevant issues and pr: phofurl phofurl
the example given on the read.me differs from the same example given in the file.
phofurl phofcode phofurl phofcode i don't know which one is correct, otherwise i'd make the correction.
app crashing often with http2 related issue: phofurl phofcode
`fastifyerror` inherits from `error` (javascript type), but it can hold other properties as `nodejs.errnoexception` (node.js error type) defined.
`errnoexception` in: node.js v6: phofurl node.js v8: phofurl phofcode error: phofcode
fastify works fine for the first 10 minutes, then doesn 't "see" incoming requests, resulting in a 100% timeout rate.
the project is a pretty basic json api, previously running on php (slim 3), that has been rewritten in typescript using fastify.
after some time, the fastify server does not respond to requests anymore, because requests are sent into a black hole.
this only happens after some time (it varies between 5-20 minutes with a stable load of ~300 rps).
it can be fixed by restarting frequently, but is an annoying solution.
with the graceful shutdown plugin, reloading does not result in downtime.
don 't know what to do about this issue.
running the ibm apm it 's clearly visible that incoming requests aren 't "seen" (requests to api are sent at stable rate) phofimage i reloaded server shortly after 15:30 on client end, this is observed as response time reaching client timeout: phofimage these long response times are not recorded on server however: phofimage node clinic reports indicate no memory or resource leak.
we have lived with this limitation for weeks now, reloading api in 10 minute interval production.
using only handful of packages this app: phofcode
if i send a wrong path parameter without appling an `encodeduri` i get a 404 response and a warn: phofcode
when i try to launch the server, the program finishes immediately with no output.
it seems i cannot define a schema with an object type with a loose definition of the properties on sed object.
the serializer strips out the non-specified properties
m calling data in that is in object format but when i return that is not returning anything but after using : `json.stringify` it works
when using a custom ajv instance as described in the documentation ( phofurl one cannot provide a schema with references as a response schema.
using a non-default ajv instance throws a `fst_err_sch_build` error when using a $ref-way shared schema.
types are not being passed to request using http2
i 've created a simple "hello world" `fastify` example with a errorhandler, and it always throws a 404. why?
this is not a bug of fastify itself, but many fastify plugin packages maintained by this orgnization.
in most situation plugin packages are installed together with fastify itself, and works well when they're installed by npm.
however, when used inside [pnpm] workspace, plugin packages cannot require fastify pacakge.
to properly fix this bug, these plugin packages, including but not limited to fastify-cors, fastify-websocket, fastify-multipart, need to add to their peer dependencies.
when calling `reply.send` within an async prevalidation hook, this does not abort the request and thus emits a `response has already been sent` error.
related: #677 according to the linked issue and pr, it should have been fixed, however it doesn 't seem to be (at least for me):
calling `fastify.ready()` causes errors to be thrown if you attempt to add routes after it finishes.
specifically, it will throw `cannot add route when fastify instance is already started!` which seems like undesired behavior.
this seems to be caused by avvio emitting the `start` event when calling ready, since ready comes from avvio.
when `start` is emitted fastify appears to no longer allow route registration which seems not be the correct behavior.
from looking at the documentation on ready it appears this should not be a side effect and only the plugins should loaded.
the server swallows error logs in a case of async function.
when an instance `onsend` hook executes asynchronously, responding from a route hook does not always prevent the route handler from being called.
cannot create child loggers without circumventing typescript due to missing `child` method in the logger interface.
the method is there, it's just not typed.
seems there is the option to mark a property in a schema (i tried body schema) as nullable like this: phofcode but if the property defines a format or a pattern the nullable option is ignored.
hello everyone, thanks for reading this issue.
i have the following `schema`: phofcode so, when sending just one element: `{ url }/?hello=1` they not parse to `[1]`, throw a error of validation: `"querystring.hello should be array"`.
if it 's, really a bug, i can try to fix it.
when defining a route, it 's easier to `schema.query` be automatically copied into `schema.querystring`, mainly because `request.query` is what we use to access the querystring, and simmetry here would be good.
moreover, we should look into doing some stricter validation of those properties to catch this type of errors.
hello, i cannot see the request body in my logs when i do post requests to my test server.
setting `ignoretrailingslash: true` on main fastify instance and registering a plugin with tralingslash prefixed path (`prefix: '/attendances/'`), prevents avvio from crashing on startup with `assertionerror err_assertion]: method 'get' already declared for route '/v1/attendances/'` error.
as you can see on [repro repo phofhyperlink , in this case fastify registers two routes on the inner plugin and starts the server: * get t/v1/attendances/ * get t/v1/attendances// after the server is ready, calling `/v1/attendances//` route will result in `typeerror: cannot read property 'length' of undefined` in `/lib/hooks.js:65:32` phofhyperlink .
this happens because `/lib/route.js#l246` phofhyperlink is never reached for `/v1/attendances//` and therefore some pre* hooks (preparsing, prevalidation preserialization) are never set to `null`.
there is only a default for prehandler hook lib/context.js#l16 phofhyperlink .
the others are supposed to be set in afterrouteadded function, but for `/v1/attendances//` the execution goes lib/route.js#l228 (as already pointed out with an`assertionerror err_assertion]: method 'get' already declared route '/v1/attendances/'`).
the `done` callback is located avvio [plugin.js#l98 and when called `/v1/attendances//` it finds `completed===true` because of `/v1/attendances/`.
the bug generated lib/route.js#l144 since it calls `afterrouteadded.call` two times a row.
in fact, using a non default value `prefixtrailingslash` (so `slash` or `no-slash`) it works as expected.
working with routes definition i found that `routeoptions` interface hasn 't default generics declared.
( phofurl as opposed to `routeshorthandoptions`( phofurl that it extends from.
is this a wanted behavior?
i think this is too verbose since it forces to pass every time a route is declared a full set of same generics: `routeoptions<server, incomingmessage, serverresponse>`.
in aws lambda / serverless framework it not works as excepted ** note ** : _the reason of use serverless framework it's ecosystem, flexibility and support for many providers, not only aws lambda, what works in aws lambda or in localhost, works on almost every serverless provider (azure, gcloud)_
just like in the title - when you use a schema object, i.e: `fastify.get( '/ ', { schema: { body: someobj } }, () => {})` the `someobj` is not cloned and directly mutated (the `$id` property is being deleted).
my schemas for every routes worked, then i decided to use $ref + make cleaner code by using `fastify.addschema`, but it shows error
a clear and concise description of what the bug is.
`throw`ing an error from non-async route handler crashes the whole app.
when using an async prevalidation hook the handler will be called multiple times.
the remoteaddress is undefined if you try to access it with ``request.ip`` in a request handler.
using some named schema as `items` in other schema cause exception when using first schema
i don 't seem to have an issue with other async handlers, just prehandler.
it seems to function fine if i call reply.send( 'abc ') or throw new error( 'abc '), but if i simply return 'abc ', do not return at all, or return undefined, the request just hangs.
the request never makes it beyond prehandler from what i can tell.
if `.addschema` is called within decorated function (using `fastify.decorate`) it throws an error that such schema already exists, however it is called only once
following err logged when controller function is declared as async.
but if i remove async keyword no problem: may not be fulfilled with 'undefined ' when statuscode is not promise may not be fulfilled with 'undefined ' when statuscode is not promise may be fulfilled with 'undefined ' when statuscode is 204 at c: source at process._tickcallback
currently the fastify package on npm is including `test`, `docs`, `examples`, `tools`, `.github`.
these files are not needed by a package consumer, is it okay to exclude them from npm publish?
params validation with pattern do not fire !
i have a server that is exposed to quote a bit of bot traffic, scanning for some known vulnerabilities in common web apps.
just saw this message from fastify requesting me to report the error.
in my case, the browser is not able to parse response cookies correctly.
when i set multiple cookies, following line of 'reply.header ' function is combining the cookies into one header ( 'set-cookie ') with comma separated cookies.
phofcode ` chrome browser is not able to parse all cookies except the first one.
i 'm working on issue 1329 phofhyperlink and so i 'm trying the docs i 'm writing, but i got this error when using the following schema: phofcode
if response validation fails, `reply.send()` will thrown an error (as expected), but the error is not handled by fastify and it breaks the response lifecycle.
this is the code of `reply.send`.
i commented the 2 important lines.
phofcode when `serialize(this.context, payload, this.res.statuscode);` throws an error, `onsendhook` is never called, but `this.sent` remains `true`.
this is not * really * true, because to client not sent any response.
in my route i can catch error and would treat it as server error: phofcode but it throws reply already sent, due to `sent` flag set to true.
in this case, to client isn 't sent anything and connection still opened until timeout.
a clear and concise description of what the bug is.
when i use fontawesome with npm, "fas fa-fan" is not rendering properly
we understand there are a few other tickets that are similar in a way, but we haven 't found any of those tickets to be closed with a solution that works for us.
the bug we am experiencing is 2-fold, meaning that some icons aren 't appearing, and some icons appear but are inconsistent when viewing them in macoc or ios and safari.
how did you arrive here?
until now i was always using the file .npmrc to get packages with fontawesome pr and it worked perfectly fine.
but since last friday, all our build fails because the packages cannot be found in npm registry.
when i try to npm install i 'm getting a 404 not found.
this was working last week but not this week.
this isn 't just happening with pro-regular-svg-icons but some of the other fontawesome packages as well.
my .npmrc is correctly pointing towards @fortawesome:registry= phofurl
although most duotone icons are great, some duotone icons do not make sense or are even misleading in some cases.
a good example is the mathematic section phofhyperlink .
in my opinion, it makes no sense to split greek letters or (mathematic) symbols into parts with different colors.
would you do it with letters from latin alphabet?
- equals phofhyperlink : one of the best examples.
looks like a underlined minus?
- plus phofhyperlink : looks like minus, striked out.
even next to a proper minus icon, it looks like minus with different opacity.
at least, it is misleading to the eye - times phofhyperlink : looks like divide "/", striked out.
or difference " " (set theory), striked out?
another non-mathematic example: - check : i think you get it.
it makes simply no sense to have two colors here greek letter example: lambda it is a letter, should not be bicolored.
other mathematic icons divide or percentage are a bit less misleading, but only because the are not that easily confounded with other symbols.
if you argue that duotone must be duotoned, then let 's look at these icons: wave-square no duotone square root no
how did you arrive here?
svg sprites are sized differently than their font counterpart.
when we install font awesome packages on our ci we get a 401 for free packages: we install with phofcode our `.npmrc`: phofcode error: > error an unexpected error occurred: " phofurl request failed "401 unauthorized "".
how did you arrive here?
otf font is replace _words_ in my buttons.... - "notifications" == "notifi[ cat icon ]ions" - "add" == "[ ad icon ]d" - "device paring" == "device pa[ ring icon ]" ttf works as expected, however the "g" and "y" get cut off.
this is what the ttf files do ( phofurl however it is not resolved.
their fix does not work.
the example below is a "fa-question-circle" icon.
the structure of the font awesome generated elements will be as follows: phofcode however, when running this in internet explorer it does not show a tool tip when hovering over the icon.
but when using the structure given here (title being the first child of path-element): phofcode it works in internet explorer.
i found support for this markup here: phofurl phofurl so it should be a preferable way to go, given all browsers are ok with it.
leverage browser caching for the following cacheable resources: phofurl (1 minute) phofurl (1 minute) phofurl (1 minute) phofurl (1 minute)
the icon is showing the back of the hand instead of the palm, which our users reported can be interpreted as a insulting gesture.
the typescript definition of the `layer` function misses the `params` argument, causing the compiler to raise an error: phofurl
the ip address for the kit is blacklisted in several places, font awesome cannot be loaded and any site using font awesome cannot be loaded correctly.
the npm package phofhyperlink in its latest version (0.2.25) has a `package.json` that declares `"license": "mit"`, but the `license.txt` file in the package contains the "font awesome pro license".
at least one of this must be wrong.
i am not sure why this happens because phofurl was last changed 10 months ago and contains the "fontawesome free license" (which is still not ideal, but at least refers to mit for code), although npm package was published just one month ago.
i 've added all.js and example code with changed background phofcode
the typescript definition of `dom.insertcss` doesn't allow the css parameter.
brands showing as a squares, all other types of icons works as expected
when using a duotone icon with a pull-left or a pull-right, there are no margins.
some dutone icons have wrong viewboxes.
the "fa-calculator" icon does not have the same svg viewbox in solid and duotone sets.
i haven 't listed all the icons that have this issue, but i observed it for the following icons: anchor, blind, calculator, directions...
how did you arrive here?
first of all, i am not sure it is a bug.
i get error in page speed insight "leverage the font-display css feature to ensure text is user-visible while webfonts are loading."
with a list of awesome font i am using.
since i do not have access to your css, may ask you to change in css font-display: auto to font-display: swap?
or you may know other solutions resolve that issue.
when using the svg core `icon` function to produce an icon inside the shadow dom of a custom element, the icon has no size.
when using: phofcode the browser throws an error box in the place where the icon should be.
bug only appears to be with the new duotone icons
the duotone version of the phone-icon is not duotone.
`arrow-alt-to-top` (duotone) arrow points to the bottom like `arrow-alt-to-bottom`.
i have no idea how to use fa kit scripts in amp pages to display icons.
how did you arrive here?
i included the "<i class="fab fa-facebook"></i>" icon on my webpage but the class displays as the square version of the facebook icon and not round version as expected.
cannot use the icon phone-laptop in desktop font.
in firefox (at least as of 67.0.4, possibly earlier), inspecting an `i.fa` element won 't show any styles, neither on the `<i>`, neither on the pseudo `::before`: image phofimage *notice how the styles area is empty.
* this occurs when font awesome pro is loaded with subresource integrity check (i.e.
: `integrity="sha384-`) and another resource (e.g.
: a javascript file) is also loaded with integrity check.
i reported the bug here on bugzilla phofhyperlink , but i haven 't seen it documented anywhere, so i think it makes sense to have information here too.
in my project i am using fontawesome with the npm function.
but when i import the css files into my own css file i can only use the brand icons.
when i import fontawesome with a cdn it works fine, but don't want to use it that way so can reduce html requests.
there is a misspelling of awesome on the plans page
i created a new fa kit and put it in my site.
however, when i look at the network tab of devtools (with cache disabled), i get bombarded with requests for font files.
in my kit, i 've set the version to "latest" but i tried with a specific version too.
aside from slowing down the site, think it 's pointless.
at least it could load specified version first.
as reported in phofurl certain scripts (those in client/src/client at least) are not getting cache-invalidation hashes.
unclear error message for embedding test suite to front end projects
image phofimage the input text on the darkmode version of the donate page ( phofurl are not readable so you cannot see what you are typing.
i am unable to submit projects to fcc and have them counted as complete.
when viewing any challenge in firefox, i can scroll in the instructions/theory part of the window, but the scrolling does not work in the code editor.
i have tried with an external mouse as well as with trackpad in my mac.
in same computer and with same devices it works perfectly using chrome.
when we accept the academic honesty policy and hover over the text, it feels like a button.
the cursor should be auto.
when we hover over the github icon in profile page.
the background color is not covering the entire icon on hover.
when trying to exit the multi cursor function (ctrl + d) with the escape key, the editor loses focus.
before the update, it worked fine.
(happens also when trying to deselect a selected text, but can be deselected using arrow keys instead)
when on the profile page in development, the site footer shows twice at the bottom of the page.
somewhat related to issue #37373. when error state or warning state is triggered by client validation, it is displayed with label color change and an error or warning message.
but on success state, there is only label color change without success message.
for `new email` field in `email settings`, error state can not be triggered.
warning state will be triggered when an email address with incorrect domain is entered (for example: `email@example.com.a`).
for all fields in `your internet presence`, both error and success state can not be triggered.
the 'show other ways to donate' button looks like a link until you click on it, when it looks like a button.
some of the input boxes (email settings and your internet presence at least) get the old green border when valid inputs are entered.
the code blocks in the test output (below the editor) do not match the test suite (below the instructions)
in the create a controlled form challenge, a new window with the challenge is rendered upon clicking on the submit button.
i can not scroll challenge description with keyboard navigation (up and down keys).
entering 'n' or 'p' in the solution url of projects takes me back to the previous('p') or next('n') challenge.
a long description of a portfolio item doesn't wrap at the boundary.
when submitting a challenge using ctrl+enter it automatically completes also the following challenge.
guide.freecodecamp.org contributing url pointed to the old repo (freecodecamp/guide)
if you complete a challenge, navigate back (taking you to the curriculum), then open a new challenge the success modal will still be open.
when attempting to fetch the public profile data for a user using the endpoint ` phofurl results in a cors error on firefox.
this is when trying to fetch my own data for a personal project, both on localhost and on a hosted https url.
it is working on chrome or if using cors pass-through such as phofurl
a clear and concise description of what the bug is.
a bug is in contributors.md file in which i give my url as all the contributors had added but it creates trouble in pushing the code .
markdown in challenge description and instruction sections is parsed differently if it does or does not follow an empty line.
because the log calls and that returns `undefined`, `console.log(undefined)` just outputs an empty line.
this is in contrast to `console.log(null)` which outputs `null`.
when i click on the link in the email next to > if these emails arent worth your time, you can turn them off: i get the following: image phofimage there are no issues in the dev console.
`send me quincys weekly email` is toggled off in settings.
when you go to a challenge and the donation modal appears a stack overflow error occurs
when i'm logged in at www.freecodecamp.org and click on the button, 'go to the coding curriculum', i encounter a 404 error page with the browser url containing ` phofurl
the signin page doesn 't have the new theme applied.
i also noticed that the link to forum on its navbar hasn 't been updated (still pointing to `forum.freecodecamp.org` instead of
when submitting code to move on to the next challenge, previous code is wiped from local storage/cache making it impossible to check previous work without downloading json in a roundabout terrible user experience.
it is still possible to reach the page title "we will build software for your nonprofit.
cannot access my existing account after changing my github username.
the platform automatically registers me as a new user.
when typing into the search bar on any lesson page, typing "e" triggers a focus hotkey that transfers focus to the code editor, such that what the user then types will go to the code editor instead of search bar.
in development certificates are unavailable unless you are logged in.
(sorry if repeat) any arbitrary link is accepted as a solution for the responsive web design projects (and thus i am assuming for all other project pages).
links like phofurl and phofurl are accepted as solutions.
curriculum is checked off only if user selects 'submit and go to next project '.
on the curriculum page, there is empty white space between the navbar and main content when viewed in dark theme.
background color of the dark-theme on the forums is not loading.
i am greeted with light gray text on white background.
at 100% zoom, the heatmap does not show the most recent progress.
i noticed there 's a few other issues about the search bar on the main site ( phofurl but haven 't seen this particular issue mentioned before.
apologies if it 's been addressed already.
clicking on the magnifying glass icon clears the text in search bar instead of searching for text entered.
the icon even says "submit search query."
i believe it 's ui standard to have clicking icon as an alternative to hitting enter on a keyboard, so that 's unexpected behavior.
this issue is similar to this one: phofurl but i wanted to point out that clicking icon has a bug too.
once is clicked on, then search results and text clear completely.
a clear and concise description of what the bug is.
the ctrl+enter shortcut doesn't quite work in the non-editor challenges
based on #34222 , bullet 1: please give the code editor an element with a role on the page.
i would suggest an input role of some kind or a role="application".
do whatever looks good, but there is currently no editor actually on the page for screen reader users and the only way we can get to it is by tabbing and most screen reader users use arrow keys rather than tabbing when browsing webpages like this.
docker:develop: `docker-compose up client api-server` npm err!
exit status 1 failed at the docker:develop script.
this is probably not a problem with npm.
there is likely additional logging output above.`
whenever a class component renders itself crashes the website
- submitting the solution link as " phofurl produces an error.
- submitting " phofurl does not.
whenever we submit a solution link " phofurl it is appended with "/_api/" so resultant solution gives "not found/timeout error" and the same link submitted without "/" like " phofurl gives solution as accepted.
i found a white space under the learning platform
if the codemirror in a lightbox, when the lightbox show, the codemirror linenumber display not correct: image phofimage but when i scroll the scrollbar, line number will display well: image phofimage if i focus on it, then type "enter" key, new line number will display well, original still has display issue: image phofimage i have set "autorefresh" property and reference "autorefresh" plugin: phofcode another issue is text area connot get codemirror value, i have to get value via handle "change" event to archived it.
phofcode and if want to select some codes vai mouse in code mirror, ui not make sense and select behavor not comfortable.
image phofimage try to use "refresh()" fix it, but still failed: the first two columns will not well.
`editor.refresh();` btw, if codemirror in a normal page, it works fine.
when navigating away from the guide, the menu state persists.
if the side nav is visible on the guide when viewport is narrow, then main nav will be expanded on new page.
the fcc logo on the top left of the nav doesn't show up.
images on main page are not centered, they are too much on the left side.
so i clonned the project on my local machine , i have all the modules from npm and nodejs installed after running npm ci a lot of tests pass just fine but after that its stuck on "populate tests" i cant see the bug
search results are not placed correctly for mini search bar.
profile progress heat map not showing the progress, kindly check the sreenshot
this happened here and there during the curriculum but last occurrence that i cannot fix it myself is at the react portion of it.
just adding a new component, empty at the moment, freezes the whole browser.
restarting it lose any code added and then it is impossible to proceed with challenge
in development the curriculum files are watched.
any changes to them should should cause the browser to reload with those changes.
the problem is that this does not always happen, only sometimes.
when i run freecodecamp on windows 10 after following the set up freecodecamp locally phofhyperlink guide, only the frontend shows (localhost:8000), while the backend never loads (localhost:3000).
this only solves after installing babel-node: `npm install --save-dev @babel/core @babel/node`
whenever i progress to a new challenge, the page loads scrolled down about two lines.
it's annoying, as the first line or two of the task is hidden, and so i have to scroll up to see it.
even if i maximize the page, scrollbar to right never goes away.
if i reload page, there is no scrollbar.
when typing a search for a new query in the main learn site learn.freecodecamp.org, it redirects to a new tab.
this new tab phofurl has the same query but if you type any query on it and press enter, it completely deletes the query and returns a blank result.
there is no typehead on the search bar on the site: learn.freecodecamp.org
when you go to the main site: learn.freecodecamp.org and type a query on the search bar, there is an odd trailing quotation mark after you hit enter.
when accessing freecodecamp.rocks phofhyperlink via mobile, the 'start coding(it's free)' button does not expand with respect to text.
as a result, the text overflows the button area.
`getuserinput` is not defined in `test-evaluator`
in thelocal setup of fcc, the navbar buttons for curriculum, forum and news have a small white dash popping out of the white box.
on retina displays, this is what learn 's search navbar looks like on retina displays (2012 and beyond macbooks): <img width="1064" src=" phofurl note that the guide 's navbar looks fine on retina displays: <img width="1222" alt="freecodecamp_guide" src=" phofurl
if you clear your cached images and files on google chrome, you are never signed in when on the curriculum page, hence all progress appears to be lost, despite it telling you that you have progressed in the settings and on the homepage.
sign in functionality seems to work as usual on all routes except curriculum.
i've made a constant monthly donation via paypal which was activated yesterday when was the first time i did it.
the donation was made with paypal account that doesn't share the same e-mail address as my fcc account.
so now, even though the donation has been proceeded i'm still receiving the pop-ups when using fcc page for learning.
this challenge phofhyperlink on latest master fails locally with the correct solution.
the live challenge phofhyperlink passes ok. came to light in this pr #26531. valera 's comment phofhyperlink > this is a problem with the used babel presets in the client application
i have been testing the fcc platform to see how it works.
i started by responsive web design.
i did take and pass 2 projects.
while the unit test runs well in each project, i was estonished to see that when submitting the solution that app accept any link without any verification i.e you can copy paste the link for project 1 in project 2 input solution and it passes.
also you can even past a non fcc url and it passes.
in short, one can just come and paste a non-existing url get certified in just 5 min or less.
for a certain implementation of the smallest common multiple the editor and console don't work as expected.
when you change your username, save it, and then switch on night mode, the theme doesn 't change to dark.
except that, both states of night mode switch are active (there should be only currently active state).
but when you are already using night mode and try to reproduce this bug, night mode switch doesn 't work at all.
i was reproducing this bug on every device within my reach, and every time with positive results.
if you use the single sign-in as github or google will create multiple accounts or multiple users.
we shouldn't have two different accounts with the same email address.
even though we use babel to transform code that the student enters, it doesn 't support `async` and `await`.
this is also true of code added to the `head` or `tail` sections of the curriculum.
when connecting to localhost:3000 to test the redirect to localhost:8000 an error is thrown in the node console: phofcode
received is misspelled as recieved
a clear and concise description of what the bug is.
js interpreter crashes on attempting to modify string.
it would be more helpful to show error message in the console.
in the challenge pages, console.log of an array logged without brackets.
it avoids to understand if array is nested or not: phofcode
it is hard to catch the splitter between panels to drag it.
scrolling controls on the splitter makes a bad user experience if one tries to drag it.
the honesty policy page has paragraphs with open quotation marks without corresponding ending ones.
pr builds for freecodecamp / freecodecamp are failing in travis ci with the following:
the `npm run bootstrap` step is failing, leading to failed travis builds phofhyperlink across several recent prs.
this is due to "certificate expired" issue with `pm2` - phofurl phofcode
in managing packages with npm phofhyperlink , basic node and express phofhyperlink and mongodb and mongoose phofhyperlink challenges the site width is unnecessarily increased, also you can see a horizontal scroll bar which shouldnt be there.
auto-complete dropdown in quick search in top navigation bar is out of screen.
the "save" button is truncated next to the "username" input field.
after resetting the progress on my profile, my heat map section would no longer work.
more specifically, the squares will not become colored, even if the tool tip for individual squares works correctly.
when trying to read this forum post, phofurl , it gets auto scrolled to phofurl .
i am unable to read that forum post because because web page auto scrolled upto a fixed position.
its a little difficult to find faq page which is very useful and includes many helpful links.
some dependencies not found, after repeat installs of project and following the guide here phofhyperlink .
phofcode i did install them and i get the same error.
i've noticed several oddities with the search feature: - first, there is no typeahead on the main site: learn.freecodecamp.org - then, when you type in a search query, you are redirected to a new page with results (many of them are dead links, but that's another issue (#18856).
here, you get your search query in the bar, with an odd trailing quotation mark.
- now, when you perform another search (in this same new window), do have typeahead.
but when press enter (which was mandatory to see results when searching from learn.freecodecamp.org), your result set disappears.
- lastly, if happen to follow one of the dead links are shown a 404, with a bar up top.
since you're back at learn platform, this cycle starts over: typeahead doesn't work, so have to hit enter be redirected platform your results, if click on another dead one, etc.
you end up several learn, search, and 404 tabs open pretty quickly!
when searching for coding interview prep challenges in the search bar, it returns results linked to urls that 404. from what i can tell so far, the issue is mainly for interview practice challenges.
the project euler challenge filenames are larger than the limits specified by windows 10 on filename lengths.
i came across this while trying to get my local repo up to date with `master`, and it threw an error - err phofimage
a clear and concise description of what the bug is.
the monaco editor contains features for accessibility, specifically a mode for screen reader users which helps in navigating and using the editor effectively.
this feature, as of now, must be enabled at the start of each lesson, even after enabling it once at the beginning of session.
when a pull request is created and "<>" is used within the pull request title an internal server error occures.
the preview of image attachments is empty, and when i click on one i get a 500 error.
when you add a deploy key to a repo and then delete it again, it stays in the `.ssh/authorized_keys` file.
every time i log into my gogs server, i am redirected to a 404 web page.
this is caused by the fact that i don't have a `custom.css`.
when ever i load the login page, the browser tries to load the `custom.css` which does not exists, thus server responds with an 404 web page (setting `redirect_to`), which because am not logged, is redirected to login page.
so every time load login page, `redirect_to` cookie gets value security concerns: since `redirect_to` cookie can take any value, someone might find a way to exploit it, and redirect a logged in user any get request.
attempting to create a pull request on a repository without a branch named "master" results in a 404 error.
the url indicates that the pull request is being initiated against the non-existent master branch.
changing "master" in the url to real branch name resolves the issue.
the arm architecture allow gogs to run on smaller systems, such as routers with custom firmware.
openwrt, ddwrt and nas firmware commonly rely on entware for extensibility, but rc / init is very different from full-fledged linux distributions to keep things small & fast for the weaker hardware.
there is no init scripts available for users attempting to run gogs on entware supported systems.
when creating a webhook and testing the delivery, i get a 500 internal server error.
this is the case on `try.gogs.io` and a custom install.
folowing official upgrade doc doesnt work and gogs wont start, no error logs
i saw the issue in a `readme.md` rendered markdown file.
the following markdown image that is encapsulated by a markdown link creates a broken image link: phofcode this creates html of the form: phofcode
i have gogs running in docker and recently i started having issues being able to push or pull any content over ssh: phofcode i turned on debug logging and in `log/gogs.log`, i see the following: phofcode but am not sure what it means.
did create a new user and tried to push using my key and it still fails with the same message.
also removed my keys via the web ui re-added them but still the same issue.
on fresh new server installation i get error 500 page after create new repo when i check initialize repository, otherwise repo is created but cant push any data.
i tried to set full permissions for all users on root folders including repo dir, use mssql and sqlite3 as database, run as windows service with hostname in run_user option and resychronizing hooks too.
when performing a project update with multiple repositories using pycharm 2019.1, the ide attempts to update the projects in parallel.
in one scenario, i have 3 repositories currently open in pycharm, and it tries to pull from all 3 of them simultaneously.
the first one succeeds, the other two result in a go stack track and errors.
these 3 git commands were run simultaneously from their respective working directories: phofcode
when i remove the gogs docker container but keep the volume on the host and recreate a gogs container and run it with the volume exist already, gogs works very abnormal.the cpu is too high and log is all same
installed, changed port, and tried to set to https only, both failed once installed.
the markdown formatting bugs described in #1415 and #1416 are happening again.
a clear and concise description of what the bug is.
when i create a new pr, gogs shows 500 error page.
a clear and concise description of what the bug is.
we had a power failure in our server room due a psu blowing up, this caused our switches to go offline and internet/network connectivity to be lost.
when power was restored and the network ran again, gogs didn't pick up on the signal that there was a network assigned again and lost it's port binding.
i had to `sudo service gogs restart` to get it working again.
i had working gogs on macos, then i moved the `app.ini` to another location (in order to share gogs binary between macs), with all path in `app.ini` being corrected (including those from the `embedded app.ini`, see
docker build installation page - setting sql fields - response is connect: connection refused"
after 1st successful login / creation of active directory user, all is working fine.
but when, this user have logged out, and try to login again it fails with a 500 error page
when creating a transitive fork (i. e. a fork of a repository that is already a fork) on an user account, listing that user 's repositories via api (i. e. calling results in http 500 error.
our organisation has private gogs instance running, but our operator couldn 't find anything relating to the error in the log, but that might be due to our local logging set-up.
i didn 't try yet to set up gogs instance from scratch and find out the log message.
my suspicion is that it 's in but i 'm not entirely sure.
on a k8s with podsecuritypolicy enable with runasnonroot, a securitycontext need to be set to define the uid of the user.
but when you put it, the command from docker/finalize.sh failed: ''' groupmod: cannot determine your user name.
usermod: no changes mkdir: can't create directory '/data/gogs/data': permission denied mkdir: can't create directory '/data/gogs/log': permission denied init:socat | will not try to create socat links as requested touch: permission denied s6-svscan: fatal: unable to mkfifo .s6-svscan/control: permission denied '''
cannot set auth source to local via api
trying to create a new repo or organization produces error code 500. create repo error text: an error has occurred : initrepository: initrepository: chdir no such file or directory application version: create organization error text: an has occurred : create directory: mkdir read-only file system application version: file system is not mounted read only, git user (where gogs is installed) has full read/write access and can create files and folders from a terminal in the gogs-repositories directory without any issue.
however, doing so produces a 'file or folder already exists error' if you try to manually create the organization/repo from a terminal and then again in the web interface.
pr in a forked repository redirect to the original repository
i have installed gogs as a service on windows 2012 server r2 using openssh as an external ssh server.
sshd is configured to use powershell as shell.
after registering the public ssh key, i get an error checking out any repository via ssh with: phofcode connecting directly with ssh shows me the error: phofcode i tracked it down to the entries inside authorized_keys which are not compatible on windows.
this entry is generated and does * not * work: serv key-3 ...`
when creating a new repo in gogs, there is a little help icon next to the readme field.
click that icon goes to a broken page that a couple of months ago contained content but now contains only few chinese characters: phofurl google translate says, "xinghan autonomous system".
the commit that removed all of the content that was on the wiki page has commit message of "clean".
on a server deep behind a firewall, i 've installed gogs.
this server runs its own postfix instance that only sends mail to other users on the same system.
the following is a valid email address format: no .com, .net, .org or whatever.
unfortunately, gogs does not appear to accept perfectly valid email addresses in the above format when creating user accounts.
the host is specifically configured to not have the ability to send email the outbound internet either, so non-local email addresses won 't work.
many external programs i 've written send same addresses just fine, so it 's probably a problem with what gogs considers valid address.
using your personal access token to clone a repo e.g.
`git clone phofurl doesn't update the tokens last used timestamp.
highlighting and coloration won 't work properly with "service" keyword in *.proto file: no coloration or highilighting for some strings after combination of "syntax", "package" and "service" keywords in protobuf file
it 's possible to upload a release attachment file without having a valid repository/release and without a valid user account, even if disable_registration is set to true in the app.ini configuration file.
the bug/vulnerability is not present if require_signin_view is set to true since all the requests will reply with a 302 redirect to the login page.
in locale ru-ru incorrect translate "issues" - "".
all other "issues" translated correct by "".
after upgrade to new version, gogs api doesn 't work.
this worked for previous version.
i tried both password and token
i found in gogs log attempt (ended with error) to parse an issue id which is written for an external issue tracker (youtrack in my case).
the issue id is the composition of a project name "dash" id (eg.
gogs expect only integer identifier of an issue (we have configured external tracker with aplhanumeric naming style in gogs).
phofcode first, thank you @unknwon & all contributors for making a great piece of software!
i currently use gogs in both a personal & professional capacity.
phofcode in all honesty, i screwed up my git repo by pushing a large file to a development branch and merging it into the phofcode branch :man_facepalming:.
after deleting the file, cleaning up the phofcode , removing all references, etc., the repo was restored back to its original size ( ).
repo size with large file: appropriate size: this was large file in question: ~~~ git rev-list master | while read rev; do git ls-tree -lr $rev | cut -c54- | sed -r 's/ +//g; '; done | sort -u perl -e 'while (<>) { chomp; += $stuff[0];} print "$sums{$_} $_ " for (keys %sums); ' sort -rn head -n 20 releases/somefile.iso ~~~ however, after doing all of this, repo in gogs still reports size being , as if large file is still there.
i force pushed my rewrites to branch.
that is where i 'm confused.
same issue as #2457 #685 #1785 packager.io uses heroku buildpacks to compile the application.
when the buildpack runs, the tag set "heroku" is used in place of "sqlite cert pam"
i only found an update collaborator api in document.
phofcode howevet list collaborator api is truely exist in the source code .when i try to call itthe result it returned only contained user information,and does not contained permission information.this is may a josn marshal promblem.
phofcode phofcode when golang marshal this struct to json ,resutl does not contained permissions information.
when using the gouped table view in ios 13 modal.
the textfield will move above little and the cell get clipped.
a clear and concise description of what the bug is.
i am getting the following error message from apple when submitting my app to the app store: itms-90809: deprecated api usage i believe apple is scanning the code for the string: uiwebview i dont believe i saw use of uiwebview in your code, but string does appear in comments, so believe that is still causing error.
would it be possible to change your comments to something like "ui_webview" or webview to remove that string totally from your code.
this hope will correct issue.
do not see any other references "uiwebview" in my code or any other libraries being used so believe your code is reason for alert/warning from apple.
a clear and concise description of what the bug is.
setting `enableautotoolbar = true` and tapping a text field causes my app to crash 100% of the time.
it does not happen with a `uitextview`.
getting a layout constraint error now that i have upgraded to xcode 11 and ios 13 on a real device.
selecting a uitextfield that has "secure text entry" enabled causes the following error: [layoutconstraints] unable to simultaneously satisfy constraints.
tprobably at least one of the constraints in the following list is one you don 't want.
ttry this: t t(1) look at each constraint and try to figure out which you don 't expect; t t(2) find the code that added unwanted constraint or constraints and fix it.
( == (active)>", 'assistantheight ' == 45 (active)>", == (active)>", 'assistantview.top ' (active)>" ) will attempt to recover by breaking constraint 'assistantview.top ' (active)> make a symbolic breakpoint at catch this in debugger.
the methods in category on uiview listed in <uikitcore/uiview.h> may also be helpful.
i 'm following this guide phofhyperlink , i 've linked iqlayoutguideconstraint to bottomlayout guide like this <img width="472" alt="screen shot at 14 28 53" src=" phofurl however, when i try to build project i 'm receiving this error: phofcode
i have a stackview with textfields for my register form.
each textfield is under previous one except for two cases when i want to have 2 textfields in 1 one (house & apartment, postal code & city) so i add these 2 pair into next stackview.
my xib looks like this - email - street - house | apartment - postal | city province phone when i start on email, next button will go to street -> province -> phone when start on house, next button will go to -> apartment -> postal ->city so there are two cycles of next/previous movement
switch(next) between uitextview with tab key
when archiving the project via xcode 10.3, 10.2.1, they are working perfectly fine.
however, when archiving build using xcodebuild command, it fails badly.
needing to use xcodebuild command as i am running ci/cd jobs on jenkins.
error: no such module import iqkeyboardmanagerswift
a clear and concise description of what the bug is.
the `bottom` part of `adjustedcontentinset` of last scrollview not taken into account, which leads in the odd additional gap between scrollview content and keyboard.
the problematic layout provided in the demo project below.
the issue occur with objective-c and swift version.
it happened in swift 5 when you dismiss numpad keyboard with
a clear and concise description of what the bug is.
a clear and concise description of what the bug is.
a clear and concise description of what the bug is.
when i tapped on textfield keyboard showed up, but when it hide collectionviewcell don 't move down in proper place
i have two textfields that have a different superview and their superview are subviews of iqpreviousnextview,when the two textfields's superview are next to each other,next/previous button work good.but when their superview are't next to each other,it can't work good.
after using keyboard with uitextfield in uialertcontroller ui doesn't revert to its old position, so it stays on the top of the screen.
the accessibility labels for the toolbar are not setup according to apple 's recommendations for accessibility.
currently the accessibility labels are set to "toolbar previous button", "toolbar next button", "toolbar title button", "toolbar done button".
when voice over is used to read the buttons it also appends the accessibility trait for buttons.
so when read aloud you hear something like done button button"
our app is being written in swift 4.2, and run on ios 12. when iqkeyboardmanager is enabled in the app delegate, if we go to a view controller with a search bar above a table view, as soon as a user taps in the search field and the keyboard appears, it shifts the uitableview down, showing black bar.
this black bar is coming from uiwindow view being exposed.
extra white space is shown when pop a view controller that embed uitableview, no effect when i use uitableviewcontroller directly.
a clear and concise description of what the bug is.
navigation bar overlap with status bar when keyboard is opened.
a clear and concise description of what the bug is.
spacing between text views/fields and keyboard are incorrect.
i have returned to using 5.0.8, which has perfect spacing.
5.0.8: kb still showing after rotating to landscape, text field no longer active, kb buttons appear responsive but do nothing.
by rotating back to portrait or navigating to any viewcontroller, the kb is still displayed but the kb buttons are still unresponsive.
the can only be dismissed by selecting a text field (on any viewcontroller) and activating another kb.
this unexpected behavior is on the iphone only.
with the ipad behavior is consistent (the is hidden and text field no longer active).
behavior different when rotating from landscape to portrait.
with iphone, a selected text field remains active and remains displayed when rotating from landscape portrait.
with ipad, selected becomes inactive and dismissed.
search bar animation doesn't animate correctly up to top of view when selected.
instead its position leaves a white space between the top of the search bar and the top of the view.
the view controller setup is a view controller with a navigation bar with a search bar controller above tableview.
when navigationbar preferslargetitles set true, the scrollview will show redundant empty area after keyboard dismiss.
converting a pointer value of type 'nsnumber *' to a primitive boolean value; instead, either compare the pointer to nil or call -boolvalue nil assigned to a pointer which is expected to have non-null value value stored 'invocation' during its initialization is never read value stored 'invocation' is never read value stored 'invocation' during its initialization is never read value stored 'invocation' never read during its initialization
on ios 12 iqkeyboardmanager adds wrong "empty spaces" (insets) for scrollview.
however on ios 11.4 it works ok.
when using extension of uialertcontroller, the screen freezes, it becomes unable to operate, and no error message is issued
the iphone xr in simulator doesn 't show the iqkeyboard, only the "done" bar.
i tried the iphone x, xs and xs max and all work fine, just the xr will not populate keyboard.
done button in the toolbar is not showing.
in landscape on iphone x or similar devices, safe area is not respected when the keyboard appears on a managed text field.
please see the demo project.
keyboard showing slower than textfield repositioning and leaving a blank screen (uiwindow) behind.
keyboard dismissing faster than textfield repositioning and leaving a blank screen (uiwindow) behind.
within a view controller composed by masonry.
while "becomefirstresponder" of a uitextfield is called in viewdidload, the iqkeyboardmanager looks fine.
but after clicking "done" and the uitextfield resigned first responder, the whole view would be pushed up and under navigation bar and cannot be restored.
found navigation bar behave strangely on showing and hiding the keyboard from iqkeyboardmanager.
- first time status bar and navbar got mix up simulator screen shot - iphone x - at 15 26 26 phofimage - second time white small stripe bar get appear simulator screen shot iphone x at 15 26 30 phofimage third time white stripe bar get bigger to safe area size simulator screen shot iphone x at 15 26 38 phofimage
i set the return key for the last textfield in view to "done" because i want to have the blue done button at the last textfield.
but after implementing iqkeyboardreturnhandler last one are always default return button.
while using a uicollectionview and having horizontal scrolling, the cells relayout to next page or disappear to make room for the keyboard instead of being offset vertically.
f the component has a text input with autofocus, the keyboard accessory does not appear on that field (until navigating off it and back to it).
i have a configuration where a uitextview is located near the bottom of a view.
using iqkeyboardmanager, i have been unable to get it to display correctly when editing.
[note: this is an unusual layout, but one which accurately simulates the requirements of my actual project.]
the view with textfield will restored when application enter foreground.
when using the api-explorer, " " get deleted in the curl output field.
because of this it is not possible to copy the content of the curl field and rerun it in any shell.
i would have expected that `-ca-cert` and `vault_cacert` behave the same.
however, if the certificate does not exists `-ca-cert` simply ignores it while `vault_cacert` returns with an error.
when trying to start `vault` with the raft storage backend for the first time it panics with: phofcode
the vault autocomplete does not seem to be able to autocomplete when `secrets` are mounted with a `/` in the path, but is not an actual "path".
i 'm not fluent enough to make any changes in what seems to be the source here phofhyperlink .
i 'm trying to monitor vault with prometheus-operator.
when i make a request to the endpoint i get `err="server returned http status 400 bad request"` according to the documentation phofurl i 'm specifying the format parameter in my servicemonitor.yaml like this phofcode
when trying to select an authentication method in the web interface using nvda in the latest firefox, nvda is not announcing the currently select auth method.
vault agent template fails to recognize the `-ca-cert` option for vault.
this causes template to fail with an `x509: certificate signed by unknown authority` _warning_.
using aws iam for auth, a successfully authenticated token lacks the policy attached to the identity that the the token is an alias for.
vault agent template is not rendering all templates before exiting when `exit_after_auth = true`.
usage of vault container version 1.2.4 breaks communication, because the identified region is `us-east-1`.
on freebsd vault is compiled from source, using build instructions from hashicorp repo.
currently this fails during `static-assets` step due to missing `pkg/web_ui` dir $ git clean -fdx && git reset --hard head is now at release: stage v1.2.4 $ go version go version go1.13.4 freebsd/amd64 $ env gopath=${pwd} path=${pwd}/bin:${path} gmake bootstrap static-assets static-dist installing/updating installing/updating installing/updating installing/updating github.com/mitchellh/gox --> generating static assets bindata: failed to stat input path 'pkg/web_ui': lstat pkg/web_ui: no such file or directory error: go-bindata: exit status 1 gmake:
when trying to authenticate with google oidc while having the stylus phofhyperlink extension installed, the popup window stays frozen for a couple of seconds (like in the image) then redirects to the `/ui/vault/auth` page again (second image), while original one keeps waiting for callback.
frozen phofimage done phofimage judging by url of popup, it tried to redirect correctly, but in wrong window.
when using the cli or curl to establish a new set of root database credentials, the remote authorization fails when there is an exclamation point in the password.
the character cannot be escaped or url-encoded successfully.
an identical password without the exclamation point works without issues.
if you look at template runner logs using new vault agent template feature, you 'll notice all the [debug] info that should not be there when you start vault agent with flag `-log-level=info`.
it seems that what consul template did to init its logger is missing here (in particular log filter stuff found at phofurl
i previously used vault agent+consul template to connect and fetch secrets from a vault server.
i am trying to leverage new vault agent template feature (beta) to only have to deal with one sidecar container and achieve same result.
using basic configuration and template that worked with consul template i notice infinite stop and restart of vault agent container due a crash in the new template server (see provided logs below).
somehow we have a secret path that contains a tab (%09) character.
i have no idea how or when this particular secret was created, but it is there and causing some errors.
listing the area shows: vault kv list secret/mypath/ - - - - keys < - - - - tab character is on this line before the / keys the item is visible in the ui and hovering over it shows the %09 character in url.
however clicking on /" entry results in this error: ember data request get returned a 400 payload (empty content-type) bad request [object object] any attempt to delete secret at any level via cli or http api just does nothing.
i 've enabled trace for server, but don 't see anything when navigating to item or attempting to delete it.
i 'm trying to test feature introduced in jwt-71 and use different callback host then `localhost` but the `callbackhost` flag is ignored.
when creating a new approle role through the [`post endpoint, the resulting token policies list is always `["default"]`, no matter what policies are actually submitted to the creation request.
when using `"policies": [...]` instead of [`"token_policies": [...]`][field], the request works as intended, though.
when writing to vault 's database engine the plugin exists with code 400.
mongo version 4.0+ returns a
i accidentally created an auth backend with a leading whitespace and i am not able to disable it.
in consul connect we use `sign-self-issued` to cross-sign another ca root when transitioning between cas.
if the vault root is using a different key type to the new ca root it 's cross signing, this endpoint will not allow the signing to take place.
example response body: phofcode i _think_ this is a bug in that it makes this legitimate operation impossible as far as i can see from the code and testing, but there are some subtleties.
it seems to stem from slightly confusing api of `x509.createcertificate` where you pass it a populated `x509.certificate` as a "template".
in case of this endpoint, certificate be signed is presumably self-consistent already (i.e.
it 's `signaturealgorithm` will match algorithm _it used_ sign itself with it 's own key).
but by passing cert as `template` when signing it with vault key, we are actually attempting force `x509.createcertificate` use same signature algorithm which will fail if signing key type is not compatible.
i 've considered passing an invalidly doctored certificate that has `signaturealgorithm` set target vault key type but actually hard without re-implementing bunch of asn1 encoding details from x509 lib.
my feeling that even if it worked it 's horrible hack because would result in passing certificate pem that totally invalid and unable be verified itself (since its signaturealgorithm field wouldn 't match actual signature).
i _think_ correct behavior here would be explicitly zero `signaturealgorithm` field from certificate "template" passed in here: phofurl if field zero, `x509` will pick correct algorithm based on _private key used sign_.
in built-in consul ca we explicitly override `signaturealgorithm` coming cross-signed cas or csrs match signing key type although zeroing should have same effect.
ldap queries that return a large number of results are still erroring with the fix for #4162 .
when an ldap server is setup to only return 1000 results a group query which returns more than that will fail.
i try to build vault 1.2.3 for the official arch linux repositories.
doing this results to an error while generating static assets
in 'table of contents on page phofurl the broken hyperlinks end with hyphen (-) and they are 'second level' hyperlinks for example phofurl instead of phofurl the list of broken ones below: single region deployment (enterprise) multiple region deployment (enterprise) ... deployment of vault in one availability zone (all) deployment vault in two availability zones (oss) vault in two availability zones (enterprise) vault in three availability zones (oss) replication (enterprise only)
unable to auth with ldap after setting up auth backend.
error states ldap the bindpass is wrong.
unable to run vault agent as a windows service using builtin mechanism (sc.exe).
vault agent run in background, perform authentication using approle and fetch token into the file, but service return error: phofcode vault agent can be also started manually using the same command as specified in service definition.
phofcode probably vault 's windows exe doesn 't report status required by windows service control manager like i.e.
i have enabled and configured the rabbitmq secrets engine with a role which should grant access to the '/ ' vhosts as per the example in the documentation but somehow vault isn 't actually picking up '/ ' in role so correct permissions do not get assigned when creating a dynamic user.
i was experiencing this in production so i spun up a local dev server in dev mode to test and still see same behavior.
vault server output log: phofcode
etcd 3.3.15 cluster has 3 nodes vault in ha mode, has 3 nodes
when using acl template policies, both the vault cli and web ui are showing different behaviors.
i am trying to establish a secret shared environment that allows users to create their own secrets but not see any other users secrets or pathing.
the vault cli correctly illustrates this but the web ui throws a permission denied statement indicating the user does not have the right credentials.
the ssh secret engine generates postdated certificates from both api and web ui from 1 hour after the date system.
example: ubuntu@vault:~$ date tue 01 oct 2019 am bst ubuntu@vault:~$ ssh-keygen -lf signed-cert.pub signed-cert.pub: type: user certificate public key:
the sys/leases page documents the `/sys/leases/revoke` api endpoint to revoke using a `payload.json` with the lease id in there.
( phofurl the cli makes use of a variant of the above where the `lease_id` is specified as a prefix: this is undocumented and should be specified in docs.
this allows us to use policies to lock down users to revoke specific lease paths.
i'm running vault server with vault configured in ha mode.
if returns a non-nil error after vault obtains leadership, then vault seals itself but the server continues to run.
i'd hope/expect that in this case the server command would exit with an error instead.
note that if core.performkeyupgrades does return an error then core.shutdown() is called.
the api docs for this function describe that it should be used to gracefully quit, which seems consistent with my above expectation.
database static role does not rotate credential after ttl expires.
attempting to redirect the output of `vault kv get -field <key>` to a file.
this causes the entire key to be written to the file and not the sole field selected.
index out of range when rekeying with zero keys
using azure key vault to autounseal vault fails to find the unseal key.
it seems that `token_policies` on the github team mapping phofhyperlink is not working.
the issued token only have the default policy.
if the github team to policy mapping is done with the deprecated `policy` instead it works fine and issued token has right policies.
when running vault in agent mode - the informational log messages are sent to `stderr` stream instead of `stdout`.
then shipping these logs from vault containers into sumologic creates a mess when trying to filter/capture errors of vault agent and other services in a pod.
i don 't understand why informational logs are sent to stderr.
[info] - is not an error.
following these instructions: phofurl i have a policy that says: phofcode however, in this i see that the key i read from works.
yet does not work and gives permissions error: phofcode
we use a script that configures vault during bootup.
one of the things configured, are static db roles.
with many (but not all) of these, there is a slowdown, after which the request is cancelled.
during my uts am trying to use testcoreunsealed test vault server to test my apis.
looks like kubernetes plugin is not supported & it gives following error.
terror: texpected nil, but got: url:" phofurl statuscode:400, rawerror:false, errors:[]string{"plugin not found in the catalog: kubernetes"}} if i point my client code to vault server running in dev mode it works.
high-level issue - vault restart to the sealed mode after 10-15 minutes that it was unsealed.
in the vault logs i see the errors: `sep 11 vault-0-4dvt vault[25580]: [error] expiration: failed to revoke lease: error="failed to revoke entry: resp: (*logical.response)(nil) err: error encountered during crl building: error storing crl: unexpected response code: 413 (value exceeds byte limit)" sep 11 vault-0-4dvt vault[25580]: [error] expiration: failed to revoke lease: error="failed revoke entry: resp: (*logical.response)(nil) err: error encountered during crl building: error storing crl: unexpected response code: 413 (value exceeds byte limit)"`
if the aws auth client has a regional sts endpoint configured then resolving iam role arns fails with a region scoping error.
i think this must be related to this code: phofurl as the error reports a different invalid region if you repeat the command, until eventually by luck it matches and the role can be created.
note if you disable `resolve_aws_unique_ids` role will * create * fine, but any attempt to login against that role shows same behavior, repeated region scoping failures with different region names until by luck there 's a match and client logs in.
approle names cannot contain `..` or begin or end with either `-` or `.` the `-` and `.` characters are accepted in the middle of strings just fine.
i posted this in the google group, but it didn 't get any responses.
i have vault up and running, but there is a constant stream of warnings that seem concerning enough to investigate.
here are the logs from one of the vault servers: phofcode first is the tls handshake errors.
notice that ip address on all of them are actually reserved addresses - either ending in x.x.0.0 or in one case x.x.0.1.
from what i understand, this is "network" address and "gateway" address of subnet.
those ips don 't belong to any application or endpoint.
i 'm wondering if this is a kubernetes specific issue.
maybe kubernetes doing some type polling?
or maybe an aws vpc issue?
has anybody else has run into it?
we 're running in aws using kops.
i 'm happy to provide more details there.
the other error alpn issue.
it looks like its originating from `core.cluster-listener` which makes me wonder if something off about my high availability setup?
again, vault seems to be running fine.
but i 'm finding it hard actually check status.
does each vault instance know about other 2?
have they elected a leader?
i 'm finding it hard check status that.
i posted this in the google group but didn 't get any responses.
i 'm just trying to run a simple vault status command, but i keep getting: phofcode
a clear and concise description of what the bug is.
root token not completely output in dev mode due to logging overwriting line
we have a setup with two instances of vault and three instances of consul running on two nodes to achieve ha.
when these nodes came up from reboot, active vault instance hits an error scenario while collecting acl policy keys and gets hung, none of the requests are responded to, and are timing out.
but the standby instance of vault on another node, seems to be performing basic operations such as read, write & list without any issues.
below logs were observed during this erroneous scenario.
root or any other entity with the same permissions as the creator of a policy cannot see a new or deleted policy under the policies tab when the other entity is logged in at same time using web ui.
unless they refresh manually or via settings in browser.
when running `vault operator migrate` with a s3 source, no keys are actually copied.
vault binary doesn 't use https_proxy while connecting gcp
in the scope of vault with an audit device enabled, it is expected that all vault api actions are logged.
that is the case, with 1 exception: the the `vault operator unseal` successful command.
this in unrelated to enabled audit device.
the `vault operator unseal` should also generate an audit event, for compliance reasons.
token renewal with oidc auth does not work properly in webui.
after token renewal, page reload returns blank page because of invalid data in browser local storage.
according to the cli help, i should be able to get the vault prom metrics from prometheus phofcode however, the vault cli returns an error.
/v1/sys/health endpoint does not check if the standbyok (and perfstandbyok) parameter is set to true - it merely checks if it is present.
this can cause the unexpected case of `?standbyok=false` leading to the behavior as if it was set to true.
the assumption that explicitly setting it to "false" would result in, effectively, a more api-change-safe no-op taken from the api docs saying default is `bool: false`
when trying to run command: curl -v -l -h x-vault-token:
when invoking sys/leases/renew with a root token i 'm getting a permission denied.
when executing a command against vault cli inside the jvm (which is inside a docker container) we experience odd line-wrapping when trying to consume the string output of stdout.
phofcode we had a chat about it here: phofurl testcontainers also experienced it here: phofurl can also be experienced in this pr phofurl on this commit: phofurl
the documentation phofhyperlink for the vault agent states that `auto_auth` is an optional configuration option, but when running the vault cli application i go the error message `error loading configuration from config.hcl: error parsing 'auto_auth ': one and only one "auto_auth" block is required`.
specifically this line gives the impression that that `auto_auth` config option is optional: - auto-auth (auto-auth: <optional >) - specifies method and other options used for auto-auth functionality.
hi, i am trying to use a vault token stored in a tmp file: phofcode
after upgrade to 1.2.1 vault is crashing when trying to authenticate with radius server.
after upgrading to vault 1.2.1, we can no longer login (or even read the configuration of) one of our approle roles.
we receive the following error: error reading error making api request.
phofcode we 've tried to re-write the approle with a valid configuration, but get: phofcode
when we have tls enabled on a listener with a self signed cert, we are unable to join raft node due to cert signed by unknown authority error.
it seems to be ignoring the -skip-tls-verify flag.
vault after started, initialisation is successful and the root token, unseal keys are provided, but when acquiring active role, it fails with an error and vault gets sealed.
from version 1.2.0 it is impossible to retrieve the vault secret using `approle` and `hashi_vault` (hvac) in ansible.
using the following gives the following errors on both side: phofcode on ansible side: phofcode on vault side: phofcode
attempting to hit the endpoint with audit logging enabled results in a 500 response, and the following error being logged: phofcode
after upgrading to v.1.2.0, i can 't seem to unseal the vault; the first two keys submitted seem to work, but the third fails with `unseal failed, invalid key`.
i also tried v1.1.5, same issue.
when rotation_period is expired run "vault write -f" & "vault delete" have error.
i am running a vault-ha setup (3 consul nodes as storage, 3 vault servers on each node).
when i set up a fresh vault installation, at the beginning all looks fine.
each node is in a correct state, consul is working fine and a "consul monitor" does not throw any errors.
i can unseal the cluster and also log in with the root token.
when i create user and assign that user it 's policies, will be able to log in with that user and do whatever it is supposed to do.
but once perform "vault operate step-down" on the active instance try to log in with same user again, run into problems.
was under impression that my consul wasn 't working fine, so reset whole setup started from scratch with fresh installation, but same occurred again after first "fail-over" from an active standby instance.
can fact use root token log everything work, can even overwrite acls will work again, but as soon as fail over again, it will stop working.
assume this is some kind of bug as this happens even freshly set up new instance.
when proxy protocol is used by a load balancer (haproxy in this case) and proxy_protocol_behavior is set to "use_always".
vault show the following error `[info] http: tls handshake error from client_ip:50214: tls: oversized record received with length 22617` this error can also be reproduced consistently by sending the following curl request `curl -v --haproxy-protocol phofurl
the form to configure an ldap auth method has a field that takes a pem-encoded cert, but does not support multi-line input.
this causes the error "failed to decode pem block in the certificate" as it seems to strip newlines from the input.
documentation linked below talks about high availability and that only certain backends support this by means of a lock file.
but it does not indicate what the purpose of said lockfile is, or what active/standby means in terms of vault.
from an ops perspective multiple vault nodes behind a load balancer pointing to a single database can be considered highly available but this doesn't seem to match the documentation.
phofurl is it possible this is simply unclear to try and encourage the usage of consul?
when logging in using the oidc auth method, using the ui is fine and works as intended, however logging in through the cli, the client is unable to authenticate and receives a callback/redirect to localhost, this is obviously not good, as client is not intended redirect.
performing a login as a client, they receive "_complete login via your oidc provider.
launching browser to:_" following provided link they authenticate to azure ad, and are redirected back to localhost.
the intended behavior that they are redirected vault server.
vault asserts unexpected response code: 503 service not available , after failed to read lease entry
when configuring s3 as a backend storage, vault cannot be unsealed.
when configuring s3 as a storage and consul as a ha_storage in vault config, aws kms seal option is not working properly and vault operator init command returns an error and is not able to initialise vault.
i am using vault 1.1.1 in server mode and when i do "vault secret list" i don 't see the secret path enabled by default.
when i run the same version on dev mode can see the secret path.
i want to use the vault api in a go program that i am writing.
i am using go modules.
when i attempt to use go get in module it fails with two exceptions.
the first is with autorest: phofcode this can be fixed by updating go.mod in vault repo to v12.2.0.
manually go get with and got the past that error.
however, the next error i am not sure how to get past.
suspect the issue has do with doing multiple modules in same repo where depending on what git revision a go.mod may exist for parent module but not sub module.
though that 's just a guess.
when using the read entities by name phofhyperlink api call for an entity that has as space in the name i get a 404 with he following payload `{"errors":["1 error occurred: t* unsupported path "]} `
vault does not allow dash/hyphen as first and/or last character in key.
according to documentation it allows a string: phofurl
in phofurl the example of login via tls cert auth is incomplete.
and, if i follow the example i don 't get authenticated.
we use vault 's approle auth mechanism to communicate through our application.
at midnight there are scheduled sync calls that trigger a large number of requests to vault.
around this time vault fails to restore leases and seals itself, rendering vault unserviceable.
attaching vault and cosul logs for reference.
this happens in a both single vault deployments as well as multi-vault deployments.
this error has also occured at other times randomly and rarely.
when vault is configured to audit to a file, the throughput of every vault instance is severely impacted.
i am using the azure secrets engine, just following the basic example provided on the website, however after writing the configuration (and getting successful feedback) client_secret field is not available: phofcode
i have a vault server (`vaultvm01`) where etcd is used as the backend.
there are a total of 3 etcd (`etcdvm01, etcdvm02, etcdvm03`) nodes.
an azure app gateway (layer 4 load balancer) is in front of the 3 etcd nodes.
the vault server works fine when the backend servers are set as `etcdvm01, etcdvm02, etcdvm03` so that vault can communicate with the etcd nodes directly.
but when vault server uses azure app gateway endpoint, `etcdgw.example.com`, it fails.
- vault v1.0.1 two instances - consul v0.9.2 three instances we 're facing a issue when vault master instance is killed and after some seconds the consul leader is killed too.
after that any request to the alive vault goes in timeout.
when using the okta auth method, policies attached to a group are not listed on entities.
in vault ui, ttl config in ssh engine is not working.
url in response error is malformed `%!f(missing)`.
start fresh vault process with mysql backend and ha_enabled set to true.
vault commands returns error: "sql: no rows in result set".
running a ha cluster using mysql(alicloud rds) as storage backend, the standby node won 't become active when the active node got shutdown/killed with sigint.
the api documentation ( phofurl states that a `post` to has a response similar to phofcode the actual response is null
the documentation for signed ssh certificates phofurl is unclear about when the certificate will automatically be detected by openssh.
under "client ssh authentication," step 3 says, "if you are saving the certificate directly beside your ssh keypair, suffix the name with -cert.pub with this naming scheme, openssh will automatically use it during authentication."
but then step 5 says, "you must supply both the signed public key from vault and corresponding private key as authentication to ssh call."
the apparent contradiction: step 3 says if you use a certain name, certificate will be used automatically.
step 5 says you need to pass certificate explicitly.
is it automatic or isn 't it?
it appears openssh will not automatically use a with `-cert.pub` suffix if key is specified with `-i` option; in that case you need to explicitly pass as an argument.
`ssh-add` pick up automatically when give it private key filename, and be used if it 's next to one of default keys `ssh` looks for in absence of `-i` option (e.g., clarifying that in docs would be helpful.
trying to enable a self-written auth method results in vault on windows results in the following error code: - via cli: c: vault>vault auth enable -path=example plugin error enabling example-auth-plugin auth: error making api request.
url: post phofurl code: 400. errors: * exec: file does not exist (edit: these should be double " ".
it seems github escapes them... see the provided screenshots) response via http api: { "errors": [ "exec: file does not exist" ] } bug phofimage bug2 phofimage it seems there is an escaping issue
during rekey procedure with backup option i met unexpected behavior.
after "vault operator rekey -target=recovery" command i got output like: > the encrypted unseal keys are backed up to "
duplicate of #3949 vault will not start using a postgresql 11 backend.
both are clean install on a clean os installation.
the documentation does not detail what version of postgresql (or any storage backend) are required or supported.
i do not know go and as such cannot do a pr, but this is a bug and so the issue shouldn't get closed until resolved.
after enabling the database secrets engine, or userpass auth engine they are greyed out in the web ui.
you have to drop back to the cli to manage users or configure a connection for a specific database plugin.
i am sure other options are missing but these were the two most obvious issues.
vault name with 0..0/1..3 gives error url: put phofurl code: 500. errors:
`vault write --format=json auth/approle/login role_id=<role_id> secret_id=<secret_id>` does not return `auth.entity_id` whereas `curl -x post ... does.
vault does not give a consistent answer if a folder does or does not exist
standby servers in a vault cluster are forwarding the "/sys/metrics" call to the active server.
in module-aware repos other than this one, it is not possible to import several of the subpackages in this rep .
for example, will produce an error.
vault api documentation phofhyperlink claims that using `list` method or `?list=true` query string are interchangeable and produce the same result.
that is true but when using a vault agent in between the client and the server it doesn 't work.
using the `list` method works as expected while query string `list=true` returns a 404.
`vault` command uses only query string `list=true`, so it doesn 't work when pointing to an agent: phofcode while using curl with list method does work: phofcode
the curl command for `vault kv patch -output-curl-string` is not correct.
the command phofcode does not consistently return a valid json object; if there are no audits enabled, the returned result is simply a string.
when trying to automate certain steps, always receiving a json object is mandatory.
creation of roles with oracle-plugin needs database name, with previous vault version (v1.0.2) works without it.
with new version (v1.1.2) the role is not valid for all my database configured under database/config/*
this is the concise bug description after a lot of investigation - see additional context for detailed story.
special cases can cause a duplication of pki mounts at same path.
the pki secret engine is used by clients with active certs and leases.
the secret engine will be deleted with terraform destroy.
the destroy takes up to 1 min for cleanup tasks and succeeds.
afterwards, the pki secret engine is recreated with terraform apply.
a vault server restart will now fail with error for duplicated mount: phofcode this is a dangerous bug, because the problem not discovered during runtime.
only a vault restart discovers the issue.
the delayed occurrence of error can cause massive data loss, because backup required before duplicated mount has been created.
trying to setup postgres backend from official guide phofurl and getting an pg error.
my password contains symbol `#` and that seems an error for parsing (or validation) of my config.
when using the consul secrets engine back end issuing a token fails with a 500 error max ttl must be greater than zero phofurl role info from consul secret backend phofcode
when issuing a request to /v1/sys/health with query parameters (such as standbyok), those parameters are not proxied to vault.
this means we can't set up a health check in kubernetes as it expects 200.
when using `proxy_protocol_behavior = "deny_unauthorized"`, after vault receives a request from a non-whitelisted ip, the http server dies and it no longer accepts http requests even from whitelisted ips.
though vault continues running, and no logs are produced.
there appears to be a bug when using the ldap auth method when the user does not belong to any groups created via the `/auth/ldap/groups/...` path.
these users can log in using this method however when they go to renew, they get an empty 204 response and the token is not renewed.
this could also be conflicting somehow with identity entities/groups as we also have those configured for our ldap users.
the web ui does not trim leading/trailing whitespaces in a secret's key.
consequently, there might be issues when accessing the key.
these leading/trailing whitespaces are hard to detect in the ui, especially since the input fields have a custom style and padding.
`go get fails to build without go module.
approle logins are blocked while dangling accessors are being tidied up.
see also #6252 where i was advised to open this issue to continue the discussion.
in the pull request i also went into a lot of technical code level details (also in the review comments) about where i believe the source of issue is coming from and how to potentially fix it.
an alternative approach would be to fix race condition phofhyperlink that current code works around and then remove locking altogether.
the root cause of problem appears be that background process for tidying up dangling accessors will lock write access all approle backends phofhyperlink .
this causes approle logins timeout in any situation where time it takes list all of secretidhmacs from all rolenamehmacs phofhyperlink exceeds timeout client trying login (default is 60 seconds for vault client).
when cleaning up more than a single dangling accessor this is now multiplied.
this occurred for us when deleting an approle which caused a large amount dangling accessors appear (~8000 in total).
at time writing we have exactly 50 approles being listed as being checked for `listing secret id hmacs`.
it was taking around 2 minutes per accessor list all secretidhamcs rolenamehmacs.
considering we are using gcs backend it doesn 't sound unreasonable expect list operation each backend take around 2 seconds.
so even with a single accessor it means we can expect failed approle logins 2 minute period.
when trying to login to vault 1.1.2, while having a token created with an older or newer vault version in `~/.vault-token`, login fails with phofcode same happens the other way around.
(trying to log into an older vault while having a valid token for a new one)
passing a vault_cacert with dots in the path issues an error, no matter what the permissions on the actual file are.
when i try to use rekey operator and give the flag `-key-shares=5 -key-threshold=3`, the screen show `new shares` and `new threshold` always show `1`, and after i give it unseal key, the screen didn 't show up the new key
we are running vault on gke using seth vargo 's `vault-on-gke` repo.
our settings for both the cluster and vault itself are identical to what 's given in the repo (except of course for things like allowed source ips for the kubernetes api, etc.).
upgrading to latest posgresql version 11.2 we are now receiving the following error trying to start the vault server.
when running vault in ha with 3 nodes using dynamodb as the leader election store, it is possible to enter a state where leadership will continuously rotate across all three vault nodes.
this behavior continues until manual action is taken to disrupt the loop.
rotation is consistently ordered across the nodes a c b a c
using the docker version and following the steps in the guide, i did a vault login and it worked, yet when i run the command `vault kv put secret/hello foo=world` exactly like in tutorial, it resulted in following error: phofcode
configured the vault agent and when try accessing data thru it, the error is phofcode executing the query with curl works, so it 's clearly not a problem of permissions
this is occurring on a 3 node cluster with vault and etcd running on each node.
etcd is configured to run in ha, however, the vault servers do not have ha enabled.
each vault server is configured to talk with the etcd instance on its node only on the localhost.
the vault api endpoint /v1/auth/cert/login returns http 500 internal server error during a failover.
this endpoint is reachable (http 200 ok) before the failover occurs and awhile (~20min) after failover.
other api endpoints such as /v1/sys/health are available during failover.
etcd endpoints such as /health are also reachable (http 200 ok).
requests to this endpoint will hang for ~5 seconds before returning 500 error.
vault log contains errors with context deadline exceeded and attached below.
by default, using the userpass auth method, a user cannot update their own password
i 've set up a new vault cluster with three nodes using kms for auto-unseal and dynamodb for the backing store.
watching `vault status` on a node shows that leadership is changing nearly every second between all three nodes.
role with wildcard policy randomly can 't "read" approle secret-id-accessor phofcode
when i try to crate a pki role in the ui all of the options are not filled out.
i can create roles via the cli no problem, but the ui somehow does not show inputs.
we're using vault to generate client authentication certificates where clients are identified by a distinguished name-style common name (e.g.
vault seems to reject such names even when allow_any_name is set to true.
if so, is there a best-practice for cn's in client certs?
when using the new acl wildcard paths like `secret/data/foo/+/baz`, the preflight check will fail, at least in the cli using `vault kv get`, even though the `vault read` command succeeds
there is still a deprecated 'initialize()' method in the database plugin interface: phofurl (link is to a specific commit, which is the latest commit in `master` at this moment) unless i don't understand vault version numbers, we are already way past v0.13 and thus, this method should be removed.
and, maybe more important, as the method is not mentioned in the documentation, this a bit confusing: phofurl
on v1.1.0, when using _vault login_ command in an environment set with $vault_token, the vault instance still asks for a token to be provided inline.
if the value provided is different from the one set in $vault_token, the vault instance opens a session with identify of token provided inline despite warning of: phofcode
under the jwt auth method i can create external groups and they are populated with users as they login.
switching to oidc auth method, with same idp, and as similar a setup as possible, groups are not populated when user login
assume the following vault agent config: phofcode with this config, vault agent can be used in caching mode without providing a token directly, as seen in phofurl agent writes a raw token to the sink file /tmp/agent/file-foo.
now add wrap_ttl to the auto_auth method config, e.g.
phofcode the vault-agent-approle.sh script now fails.
the sink file /tmp/agent/file-foo now contains a json structure instead of a raw token - this is expected behavior with wrapping enabled, but i mention it because the underlying agent error is "failed to get response: configured vault token contains non-printable characters and cannot be used".
note that error is not shown to user, i had write patch expose it.
will file pr with that patch and link it.
after implementing vault 's consul secret engine in our environment we noticed vault is revoking consul acl tokens leases way before the lease expires and even when it is being renewed constantly.
when starting `vault agent` from a systemd unit for auto-auth - the `vault.address` stanza in a provided config file is not respected.
this is similar to #618. when using `api/client` it will honor env vars like `vault_addr` and `vault_token` but not `vault_namespace`.
this must be set manually with the call.
i have vault running in a kubernetes cluster in aws, and use the aws kms auto unseal feature.
i pass in `vault_seal_type=awskms` and via env variables in the statefulset yaml.
this works as expected with vault 1.0.3, but 1.1.0 fails with a `unable to read storage migration status` message.
value set in consul tags should been stricly the same that defined in `service_tags` consul storage config.
when vault attempts to pre-validate the key secret, it passes the decode operation along to the golang method.
this method is strict, and requires all base32 values to be upper cased apparently.
vault fails and refuses to set the secret key.
error: phofcode error thrown when a non-"zero address" role is deleted from vault, after the last zero-address role has previously been deleted
i enabled alibaba auth and try to login with cli cmd on guide phofurl , but failed to login both with vault login -method=alicloud access_key=... secret_key=... security_token=... region= or the way of generating the signed request and write into auth/alicloud/login
when following the tutorial phofurl users are told to enter `$ vault operator init -key-shares=1 -key-threshold=1`: screenshot from phofimage in my experience, those values are ignored.
vault initializes with 5 key shares and a key threshold of 3.
*note that auto-unseal is still working; this appears to be only bad ux.
somehow, there was a file with an empty name in some key in s3.
for example: phofcode and during `vault operator migrate` it had attempted to run list() on this prefix.
i added a simple fmt.println of what prefix it was listing inside the list() function in physical/s3/s3.go and when it reached this key it looped forever.
this 40-byte file halted our migration operation for more than a week while we were on support with hashicorp trying to figure out why our migrate command stopped in its tracks without any helpful output.
since phofurl mlock should be supported on freebsd, however trying to run this fails with `error initializing core: failed to lock memory: cannot allocate memory`
unable to ssh from a windows 10 client with ca mode
i created an _admin_ policy with rights to access and edit policies and attached it to a group.
everyone in this group can access policies via cli, but the menu is hidden in the ui.
when i try to use the syntax `2>&1` to redirect stderr to stdout on pwsh 6.1.2 there are no error messages in stdout.
when i use the syntax `*> text.txt` there is no content in the file.
we have a lot of entities in our vault : 4 pages in the user interface.
we also enabled the syslog audit system.
today, by connecting to the interface, i 've discovered a 500 error when going into the entities menu, coming from rest api : image phofimage i 've checked vault logs to see if something more specific was there : here log corresponding to request : phofcode so i 've disabled syslog audit `vault audit disable syslog` no more issues.
when using the ui to set up ldap auth as opposed to the cli, the binddn account is not used, and instead it attempts to bind using the user 's account.
when it is configured via cli, it works as expected.
when trying to generate alicloud ram credentials using sts assumerole method, the api returns this error: phofcode on alicloud side, i 've configured these things: 1. ram user to be used by vault user: vaulttest 2. policies attached to the ram user custom policy config: phofcode 3. ram roles to be assumed arn: acs: trust policy config: phofcode it only has one system policy attached (aliyunossfullaccess): phofcode vault side configuration: 1.
`vault read -format=json alicloud/role/test` 2.
`vault read -format=json alicloud/config` i 've tried using the credentials of `vaulttest` user directly on `aliyun-cli` and it returned the dynamic credentials without problem.
`vault kv list` fails to retrieve metadata when a trailing white space is found in a component of the path
i 'm using the go apis in the vault 0.11.5 docker image on ubuntu 16.04 with the file backend, and i 'm noticing this error come up.
everything is setup, the backend is mounted, secrets engine (v2) is enabled, entities are created, go client is logged in with token (user pass authentication) and able to make requests.
for some reason, when saving a secret, i get this error: "failed to run existence check ... file name too long".
i 've attached trace below for additional context (some logs are my application).
v1.0.2 ui kv - v2 permanent delete doesn't do anything even with root token.
(x-ref: phofurl when using the vault cli client, kv2 secrets are correctly written (and read, etc.).
however, this does not represent phofhyperlink the documentation phofhyperlink .
when debugging what i thought was an hvac phofhyperlink bug, i discovered that hvac conforms to the api docs ' request method (`post`) - but the vault client does not (`put`).
hvac: phofcode vault: phofcode docs: phofcode as a result, api-compliant call fails with a permission error (as according to a policy), etc.
when i create a new secrets backend in the ui (tested with aws, database, azure) and open the "method options" menu the fields for "default lease ttl" and "max lease ttl" are already filled with a value of 30 minutes.
when i then click "enable engine" and check the configuration of engine both values are actually set to 0 and not 1800.
cors headers duplicates every time on update sys/config/cors
the `refresh_interval` is not displayed in the cli output, even though it should be according to phofurl
ha information missing for `vault status --format=json (or yaml)`
when okta authentication phofhyperlink is enabled with mfa and a user it logged into the vault ui, it continually sends mfa pushes to the okta verify app phofhyperlink in an attempt to renew the token.
optionalparamregex by definition should be an optional named parameter from the url however the parameter becomes mandatory if preceded by sample pattern: "a/b/" + genericnameregex("val") +
i want to manage my active directory passwords with ad secrets engine.all is working fine with insecure_tls mode but when i configure my ad secrets engine with ldaps , i face an issue as below
on the sample response for generating root phofhyperlink , sign intermediate phofhyperlink , sign certificate phofhyperlink , and sign verbatim phofhyperlink it shows "serial" - not "serial_number".
note that "generating a certificate" shows the correct `serial_number`.
using the transit http api, when you encrypt an empty string using batch encryption (i.e.
by sending it in the format `"batch_results": [{"plaintext": ""}]`) then decrypt it again, you get a response like: phofcode the `batch_results` field contains an empty object - i would expect this object to look like `{"plaintext": ""}` instead.
when configuring an auth/aws role with auth_type=iam, and auth requsts from ec2 instances are failing with the error `failed to verify as a valid ec2 instance in region eu-central-1 `
when using auto-unseal and initializing via the web ui there are no recovery keys or root tokens returned.
groups information can not be retrieved form the google secure ldap service
when attempting to use an azure mssql database, vault fails with the following error on startup: phofcode
create a postgres database with username: vaulttest, password: containing special characters '{ ' or '} ' for example vault version: vault v0.11.0+pro vault throws an error "error creating database object: unable to parse connection url" when username or password has special character '{ ' or '} ' phofurl
when using `vault agent`, auto-auth fails to create the `aws` auth method due to a missing `type`, even though the `type` was either inferred from the hcl or provided explicitly.
reading certain endpoints produces a `success!
data deleted (if it existed) at: <path>` when nothing was deleted or intended to be deleted
vault user authenticated by using ldap auth method does not have assigned templated policy.
the vault web ui console presents a table of javascript and malformed array content when an array field is discretely read.
when using tag `1.0.1` (currently, the highest semver tag) of the official vault docker image phofhyperlink , users can use the container to retrieve a client token.
if the user takes advantage of container 's documented ability to... >look for vault subcommands and run vault with that subcommand ... * and * user bind mounts phofhyperlink a file from their host to `/root/.vault-token`, container 's writes to that file can be lost when container exits before write syncs to disk.
note that docker is likely exacerbating this bug, but it is not root cause.
when rotating root password fails to be stored in the storage backend the database connection config is broken.
the used storage backend is mysql.
it appears vault is rotating the root credentials even though the new credentials are never persisted.
i created the following config.
phofcode vault failed to start up with the following error: phofcode if i use the hcl variant, then vault parses the config correctly.
the `region` parameter for the `awskms` seal type is documented as follow: > the aws region where the encryption key lives.
may also be specified by the aws_region or aws_default_region environment variable or as part of the aws profile from aws cli or instance profile.
phofurl this suggests that _not_ configuring aws region is possible and vault should detect region from instance profile, like it is able to do with secret/access key.
in reality, vault (v1.0.1) does not do this and must be configured using config parameter or an environment variable.
(when i did specify `region` parameter things worked).
i think vault should be updated to use region from instance profile/metadata documentation should be changed.
this seems to relevant code: phofurl
using the `hvac` python lib, i can get hold of the keys dictionary contained in a secret using the method: but i was expecting this to be available through as well.
however, the latter throws up a `permission denied` error
when applying a policy, the specific path that grants access is not respected
token created as `renewable: true`, after some period become `renewable: false` and have ttl=0 on it.
clients can currently submit a csr where various fields are specified in either the csr blob or in the json payload.
however, the `othername` field is inconsistent.
if there is an `othername` value in the csr blob, it gets ignored.
clients are relegated to only using json blob.
when a token is associated with multiple policies, it would be expected that those policies each add more permissions, not take them away.
however, the actual behavior is that additional policies might be able to remove permissions.
suppose that a policy grants the capability to access the path `/foo/*` but denies access to `/bar/*`.
a separate policy grants access to `/bar/*` but denies access `/foo/*`.
combining these policies leads a token that has fewer permissions than a token doesn 't have those policies.
when policies are combined, it 's expected the permissions are cumulative.
that 's because that 's security model seems be supported.
when parent token creates child token, it is allowed selectively pass down child.
if some were meant for denying permissions, then parent would be able circumvent those restrictions when creating child token.
or alternatively, security model should clarify it is supported use remove permissions.
to go route, it would make sense for parent tokens only allowed create child tokens had exactly their same policies.
it would unsafe allow parents specify subset of if are indeed supposed able restrict permissions.
when using mssql as the backend storage for vault, there is no way to specify the port number as an option if instance is not specified.
vault does not consume the aws_session_token environmental variable used to pass credentials to the awskms autounseal logic.
when using temporary aws credentials provided in the environment to perform awskms unsealing, vault fails with: phofcode phofurl describes the three variables that may need to be consumed: phofcode phofurl shows it is only consuming access and secret key, instead of additionally checking for session token.
i 'm able utilize awscli with same set of variables so i am confident my credentials are correctly set.
when using postgresql backend with cubbyhole, the entries in postgresql are not getting removed once the token expires, causing db size to increase with each cubbyhole operation.
vault cli reports incorrectly that the entry no longer exists.
i 'm trying to run vault using etcd v3 as a backend, and i want to use grpc-proxy between vault and the etcd cluster.
vault relies on the etcd endpoint to provide a `/version` http get api.
grpc-proxy does not offer this and vault refuses to start.
grpc-proxy is the etcd v3 way provide a layer between the cluster and its clients: phofurl original issue: phofurl
the documentation for the approle auto-auth method for vault agent does not appear in the navigation panel on the left hand side of the website among other methods.
i see there's documentation written here phofhyperlink and i was able to navigate directly to method's docs phofhyperlink so it's being rendered and deployed, but navigation menu isn't being update it seems.
if a dynamic database role is not allowed on a database connection, there is no useful error message or indication of the issue in the vault server logs, audit logs, or to the end user; just a permission denied error.
when attempting to upgrade from 0.10.4 to 1.0.0 in a configuration that has always used manual unseal vault will not start in server mode.
more details are in this thread, including the error message in the log file: phofurl
the github authentication method in the ui always shows the following error: phofcode
vault returns http 200 instead of 204 when root ca exists.
according to the docs ( phofurl it should return http 204 if the root ca already exists.
i 've been testing using a read only administrative api token to pull group memberships.
vault configures the okta client with an api token when it creates it.
the client sends the api token (authorization header) with every request.
if you use a read only admin api token to call >post phofurl >authorization: ssws xxxxyyyyzzzz > >{ >"statetoken": "xxxxyyyyzzzz" >} it fails with >http 403 >{ >"errorcode": >"errorsummary": "you do not have permission to perform the requested action", >"errorlink": >"errorid": "xxxxxxxx", >"errorcauses": [] >} but it succeeds if the authorization header is not sent.
i have filed a bug in underlying provider to track if this is addressed on their end.
phofurl otherwise i have asked okta treat this as s bug.
if neither of those gain any traction can vault make it possible use a read only token?
we noticed that vault was throwing many errors related to ` [error] expiration: failed to revoke lease: with our cassandra backend.
we tracked this down to missing roles, and then added those missing roles back so that the creds could be revoked properly.
we also needed to update the revocation_statements be ["drop role '{{username}} if exists;"].
this has calmed the logs, but we are still getting periodic cpu spikes that bring down vault.
cannot delete policies with dots (".")
in their names from the web interface (tested in latest chrome and firefox versions)
phofurl describes a sample custom revocation statement for rds mssql as the built-in default is not compatible.
the sample script fails if the user is logged in: `* failed to revoke entry: resp: (*logical.response)(nil) err: mssql: could not drop login as the user is currently logged in.` since the entire custom revocation script is run in a single transaction, failure of `drop login` also rolls back `drop user`, plus any attempts to add `alter user ... disable`.
adding logic to kill any outstanding user sessions fails as custom revocation statements are run in a transaction, and `kill` results in `* failed to revoke entry: resp: (*logical.response)(nil) err: mssql: kill command cannot be used inside user transactions.` there's no mechanism in plugin skip transactions for custom revocation script.
note that built-in mechanism skips transactions order revoke as much access possible, so perhaps that should be used this scenario well.
a clear and concise description of what the bug is.
web ui cli full screen not working.
cli disapears after command fullscreen.
tested on both chrome version (official build) (64-bit) and firefox 63.0.3 (64-bit)
when using the web ui one can access the "revoke" menu even when the certificate is already revoked.
after using the aws secrets backend in vault i am getting below error after using the correct credentials stored in vault.
tf]# vault read aws/creds/my-role error reading aws/creds/my-role: get phofurl net/http: request canceled (client.timeout exceeded while awaiting headers)
observed vault process left a lot of sockets in close_wait state.
socket in close_wait state are supposed to be released by the process owning the socket by issuing a close() system call.
for any reason, vault is not releasing the sockets and reach the max open file limit leading to a service failure.
i 'm generating a csr via windows security api to be signed by the pki service but i get the following error if the singing process is requested via sign-verbatim rest endpoint: > "1 error occurred: t* unable to create certificate: asn1: cannot marshal nil value " this error doesn 't appear if the certificate
i have a 2 node ha vault setup running in kubernetes backed by etcd, clustering is disabled i handle redirection to the active node with kubernetes services.
if no groups exist, instead of returning an empty list, the api returns a `404` error.
when a policy which grants the `create`, `read`, `update`, and `delete` capabilities, but also includes a * required_parameters * constraint is applied for a path.
all requests, including `read` and `delete` must include the *required parameters*.
i was reviewing the code for the dynamodb backend and noticed an improper use of the batchwriteitem operation.
the code in question is in batchwriterequests: phofurl the problem is that batchwriteitem can return success but not process all the items in request.
the remaining items are returned in unprocesseditems response parameter.
the batchwriteitem api documentation phofhyperlink gives an example of this happening.
notice their example that that http status code returned is 200 (success) but response contains unprocesseditems.
unfortunately, vault dynamodb backend discards response and only looks at error.
in this case it would skip writing some items.
in the latest beta2 (as well as in beta1) the web ui does show an empty dropdown menu in the "list"-action.
in case of more than one redirect `302`, the following function returns a tuple of `nil`: phofcode the command line `vault write ...` does nothing and returns zero.
`vault operator migrate` appears to not use the tls settings of the storage configuration(s).
when trying to create a kv2 secret from the ui, the operation silently fails in the ui.
there is a `400 bad request` response from the server: parameter required for this call"]}`
i 've created approle auth mount with custom name.
next i am getting secret id and role id from logical().
next i am trying to login and get token but response is empty (apart from request id).
same action via curl works.
phofcode <img width="852" alt="screen shot at 10 21 49" src=" phofurl via curl: <img width="1640" alt="screen shot at 10 23 26" src=" phofurl
`/pki/ca_chain` endpoints returns an empty line + ca_chain.
file that starts with an empty is not a valid certificate according to android :( (works perfectly fine if we remove an empty line).
place in a code: phofurl easy test case: phofurl
sys/plugins/catalog$ should be accepting list, and currently only accept read
attempting to `vault login` using this particular iam profile setup in `~/.aws/credentials` fails with the following error: phofcode the same setup works ok with the official `aws` cli (`aws_profile=admin aws sts get-caller-identity` works), as well as with basic usage of the go sdk.
example of `~/.aws/credentials`: phofcode note: account ids above may be the same account, though for this case it likely doesn 't matter because vault fails during credential-load stage.
there 's likely two potential issues here, one with credential loading and one enabling an mfa token provider for aws sdk.
a gcp secrets backend engine is enabled.
several rolesets and policies have been created and keys issued.
after removing the rolesets, the secrets engine cannot be removed, as vault tries do disable keys for non existent google service accounts.
in readme.md, where it says "for more information, see the introduction section of the vault website", the link points to phofurl which returns a "page not found" error.
but when i tried implement tests using vault.newtestcluster - i got this error: phofcode here the place where getting error (this works fine when running with vault binary, only tests are failing): phofcode this how it looks in debugger: phofhyperlink importlockentry nil but checking before usage so should be fine as i understand.
however getting panic right on the - the line where trying set variable.
why i run my plugin with vault binary it 's working fine and trying run i vault.newtestcluster panics?
we are calling the transit 's backends encrypt method (i.e.
`encrypt/<key>`) in batch mode with a large amount of keys (millions).
the memory consumption of vault just increases monotonically and never decreases again.
(see attached picture from our monitoring) <img width="721" alt="cpu and memory graph" src=" phofurl
if you try to `/auth/token/renew-self` with some `increment` value, it will replace actual `ttl`, no increase happens.
it's totally unexpected behavior, not just because of docs, but because of api method signature (`increment` parameter name).
using the go api, the secret tokenmetadata phofhyperlink method errors when the metadata has values that are either boolean or integers.
for example, this affects the metadata that comes back when reading a secret from kv secrets engine v2.
client 0.11.4 with server 0.11.3 with aws auth causes a crash
i am trying to use totp for two-factor authentication.
i would like usernames to be the user's e-mail address and put them in .
but trying to use %40 (the url-safe replacement for @) in the url results in an unsupported path exception.
when a typo or a wrong name of policy occurs on a role, vault doesn 't log any errors and or check policy 's existence.
new versions of the secret created through the vault ui with the json toggle appear to create a version identical to the previous version.
my team uses vault behind a firewall which requires vpn.
up until recently we have been able to install vault using `brew install vault --with-dynamic` to enable cgo which results in successful private dns lookups when connected using a vpn.
it appears this flag is no longer supported by the vault formula.
vault v0.11.3 is behaving very strange when trying to read/write paths accessed by an approle
vault is consuming a large amount of memory when reading entities with a relatively large number of inherited_group_ids (25 was enough to consume ~2gb on my host).
based on experimentation the memory usage appears to roughly exponential with respect to the number of inherited groups.
the aws auth method will create a new entity in the identity subsystem for each new host authenticating.
these are never reaped and will eventually hit the limits of the storage engine.
when this happens vault tend to crash and become unusable.
the wildcard matching in policy is inconsistent with list and read(or write etc.
in consul_test.go # 576 ha, ha) i believe this to be incorrect.
the call expects two separate backends.
this error is replicated among alot of backends.
in consule case it will create two shallow backend clones sharing the same consulclient.
i believe it woiuld be better to construct two backends instead.
when correcting this one notice an error in the test.
physical/testing.go # 355 theld, val, err = lock.value() it should be theld, val, err = lock2.value() the lock should not be held after just beeing unlocked as is asserted now.
pki backend `sign-verbatim` ignores requested `ttl` value.
http/1.1 rfc2616 phofhyperlink specify that host header should be set as the original input from the user so that virtual servers can be handled when the hostname you pass in api's client (affect cli and golang projects) responds to srv records, it will replace the host header with any srv record that is answered.
if i create a user (`vault write the user doesn't show up in the list of entities until he/she logins at least once.
after upgrading to 0.11.2 certificates generated from vault have invalid "not before" field set to `jan 1 1 gmt`.
when i attempt to disable the userpass auth backend, i get the message: phofcode after i receive this error, i see that the backend is still listed: phofcode however, am no longer able to login using this method: phofcode
cannot remove a member group from an identity group
attempting to revoke-self a token produced by authenticating with a username containing a period fails with the following error, phofcode this appears to have been introduced in 0.11.2.
0.11.1 does not display the issue.
`sighup` does not reload certificates in `vault v0.10.3
i had an old vault 0.8.3 server setup which i recently upgraded to 0.11.1. no problems there.
now we want to implement kv versioning at our `secret/` path which is currently like so: phofcode so i ran the command `vault kv enable-versioning secret/`.
tuned the secrets engine at: secret/`; however, turns out vault had actually panic 'ed: phofcode restarted vault, but as soon as unsealed it it panic 'ed again: phofcode so as far as can tell my vault is hosed.
thankfully, actually ran this command on a test vault instance based off of a consul backup, so the production instance is still fine.
when using the gcs backend we noticed a high latency for vault authentication and reads when doing operations in parallel from several clients (sometime the clients even receive errors).
we first suspected throttling on the gcs api but accessing the same bucket and keys using gsutil cli remained fast during these higher latency events.
average latency reported by telemetry endpoint goes up to dozens of seconds during these events for most operations.
we looked at vault logs and saw that when this was happening we were getting a lot of errors in vault logs: > [error] core: error checking health: error="failed to check for initialization: failed to read object: get phofurl stream error: stream id 68481; refused_stream" > error closing connection: post phofurl http2: transport: cannot retry err [stream error: stream id 68483; refused_stream] after request.body was written; define request.getbody to avoid this error" `refused_stream` seems indicate that gcs client is trying open too many streams on http2 connection.
i had a quick look at code and gcs backend seems be using standard gcs go library so i wonder if issue could actually be there.
we will try work around this by decreasing `max_parallel` option of backend (i will update issue after our tests), but i was wondering if you had other ideas.
when configuring okta auth backend using using the `token` key to store the api token, as described in the web documentation[1], the backend is not successfully configured.
reviewing path-help output[2] for config path, it seems `token` parameter has been deprecated which suggests it should still work even if it 's deprecated.
using `api_token` value instead along with updating remaining keys (ie.
`organization` -> `org_name`) resolves issue.
go panic at vault startup, when passing invalid json as gcp credentials for `seal "gcpckms"`
periodic approle tokens can be considered expired by the ui while still able to renew themselves and access secrets.
we are using vault 0.9.5, and his has been stable for us, until this week.
now the vault docker image runs for only about 36 seconds, before it triggers a shutdown.
when creating group aliases, if one is to use a canonical_id already associated with another group alias an orphaned group alias is created.
this orphaned alias is not updatable (to change canonical_id) nor deletable.
the * etcd * storage backends tries to create * https * connection regardless of the address specified , to make things even more interesting, it appears that access is performed from other nodes as well, not using the loopback address that was specified, my guess is that it queries etcd for the client url and then uses it, is that correct ?
in the doc phofhyperlink , with a kv v2 secrets engine, we should get a 204 with some data returned, but i get a 200 with no data returned.
the secret is successfully created/updated though.
general issue: vault is importing rarely used modules that do complex package level initialization.
this makes securing and auditing the code harder, as one needs to carefully review and understand imported packages that are not used.
specific issue: the place i noticed the issue was where the alibaba sdk invokes the external `uname` program 3 times even when doing an operation as simple as `vault version`.
in 0.11.0 generating aws credentials from the ui ie phofurl reverted to requiring update permission in addition to the normal read permission.
when identitystore is initialized (post-unseal, leadership taken) it does not properly fill the group_alias memdb table.
since all aliases content are stored in the identity group as well, any update on the group, will correctly save the alias in memdb.
login page redirect to "other" method when you enable "list method when unauthenticated" option
restarted vault (docker) v0.11.0 and unsealed vault.
right after i get a panic about interfaces being nil.
when the policy write is unsuccessful, vault logs "invalid request" and throws away the real error.
also "invalid request" message is incorrect because the problem is in storage.
`vault status` shows version of local tool rather than server
we followed the standard upgrade path for our non-ha environment described here: phofurl
nomad panics on vault api code.
i 'm using jwt vault auth method phofurl .
if i want to map my oidc groups to vault policies, i need to use identity groups and identity group aliases.
in order to create a new identity group alias, i have know mount_accessor (given path `jwt/`).
i wanted use curl/vault command line utility get them, but it sometimes doesn 't give me any info for jwt/ mount point.
can not unseal vault 0.10.4
when we were looking at our cloudtrail logs, we noticed a large amount of errors being generated by the vault user.
it seems that vault tries to revoke an iam user that doesn 't exist every minute, here is the log from cloudtrail: phofcode we think this happens when vault fails to create the iam user in the first place (although i suppose it can also happen if someone removes iam user manually).
because we only use sts tokens, we never gave vault rights to create iam users.
however when using interface, clicking on a role immediately creates an user.
vault then tries to revoke this, but fails.
when launching an external plugin binary, the vault process environment is not passed into the plugin command execution.
this is important for things like the oracle vault plugin that leverages an external client library that is by default installed in a non-standard library path when passing an ld_library_path variable to the vault process that includes this path, it is not passed on to plugin execution environment.
the token is allowed to list a sub-path while at the same time a restriction is in place which does not allow it to do so.
when using the vault ui, i can create secrets.
i select the `json` option, and paste raw json into the text box.
vault replaces my array with objects.
when when logged in with a approle policy on a fresh vault server (docker image) you can create tokens with root policy.
vault ui displays an unsorted list of secrets for generic/kv v1 secret store.
the s3 backend should work with `minio` cloud storage.
there are currently some missing features on minio side which prevents this.
see this related pr #4931.
a clear and concise description of what the bug is.
when trying to config a postgresql database engine, it reports following error.
<pre> vault write allowed_roles="test" username="root-user" password="root-passwd" error writing data to error making api request.
url: put phofurl code: 400. errors: * error creating database object: error verifying connection: stat permission denied </pre> while my vault is running by "vault" user in server <pre> ps -ef | grep vault vault xxxx xxxx 0 aug09 ?
/usr/local/bin/vault server --config /etc/vault/vault.conf </pre> from phofurl it should require client cert from " <user home >/.postgresql".
<pre> // sslclientcertificates adds the certificate specified in the "sslcert" and // "sslkey" settings, or if they aren 't set, from the .postgresql directory // in the user 's home directory.
the configured files must exist and have // correct permissions.
func *tls.config, o values) error { t// user.current() might fail when cross-compiling.
we have to ignore t// error and continue without home directory defaults, since we wouldn 't t// know from where to load them.
tuser, _ := user.current() t// in libpq, client certificate is only loaded if setting is not blank.
phofurl tsslcert := o["sslcert"] tif len(sslcert) == 0 && user != nil { t tsslcert = ".postgresql", "postgresql.crt") t} phofurl tif len(sslcert) == 0 { t treturn nil t} tif _, err := os.stat(sslcert); os.isnotexist(err) { t treturn nil t} else if err != nil t treturn err t} ... </pre> why it try loads client cert from root home?
when using lookup for groups, vault doesn 't enrich the group 's alias with mount_path and mount_type
dead vault nodes remain as vault services in the consul catalog.
this becomes problematic when i run a `terraform apply` that recreates machines.
other machines may get the vault server 's old ip addresses, and they retain the vault service definition.
i now have 4 "nodes" in my catalog that aren 't actually nodes.
this includes 3 consul servers, which i really don 't want to force-leave from the cluster (if that would even fix it - doesn 't seem to do anything for other misrepresented node).
none of these machines has their own service definition.
when using the api, i get 404 errors when trying to list at `/auth/cert/certs/` with a tls auth backend enabled at `cert`.
it should work according to the doc phofhyperlink .
after setting for the ldap method, the user cannot log in using the new lowercase ldap method via the ui.
selecting other and then ldap still works.
i 've had a ha vault setup running (2 nodes) for around 10 days.
suddenly, unexpectedly, every request (token requests, token refreshes, even `/sys/leader`) was failing for several minutes with: phofcode i first thought it could be related to the aws user role i have for vault for the `/aws` secret backend, i rotated those keys, but no luck.
i then restarted both vault nodes, unsealed one, and operation continued as normal.
then noticed couldn 't restart one of the vault nodes: phofcode for communication with dynamo the vault backend, use instance roles, and it looks like stopped being able to communicate with dynamo: phofcode the big issue here is that when couldn 't communicate with backend it didn 't die or go into standby mode.
the other instance was still capable of communicating with dynamo, but don 't think it was promoted to leader.
this prevented any other service from communicating vault, even though a standby was still available.
can 't write into kv path containing certain combinations of ad*
in an integration test, i started noticing about a month ago that repeated requests would occasionally return an error.
after much digging, i found that the api.response.body contained no data, while the content-length was correctly set.
after much more digging, i discovered the problem.
using the postgres db backend - when a role is defined without `revocation_statements`, the server panics when trying to revoke a credential due to a nil interface where a string is expected.
see `revocationsql` var here: phofurl there seems to be some more explicit conversion here: phofurl
when vault is deployed in a cluster, using etcd for ha management, losing the first etcd unit in the 'address ' list results in vault returning 500s
when using a custom vault plugin and sending a payload greater than bytes, the operation ends in failure due to the grpc default max receive message size of `1024 * 1024 * 4`.
this option does not appear to be configurable, so servicing larger requests is not possible.
when our vault instance has been up for some time (by now about a day), it starts to fail to look up (some) approle secret ids.
applications that try to log in using an affected secret id get the message "invalid secret id".
if someone tries to look up the secret id metadata using the corresponding id accessor, the response status is 500 with error message "failed find accessor entry for secret_id_accessor".
this also affects ids that were issued moments before.
after a restart of vault server, freshly issued ids can be accessed again.
this issue _might_ be related #4396.
i am unable to get the client authenticated with the host server and get the following error message.
jul 18 precise64 sshd[1850]: error: certificate invalid: name is not a listed principal jul 18 precise64 sshd[1850]: error: certificate invalid: name is not a listed principal jul 18 precise64 sshd[1850]: accepted password for vagrant from 10.0.2.2 port 65275 ssh2 jul 18 precise64 sshd[1850]: pam_unix(sshd:session): session opened for user vagrant by (uid=0) sudo: vagrant : tty=pts/0 ; pwd=/home/vagrant ; user=root ; command=/usr/bin/apt-get install yum
when trying the active directory secret backend, i get a 404 when attempting to read a password via curl or a `no value found at ad/creds/my.application` when using `vault read
first thing you want to do with the cli is add a secret but "write" doesn 't work and the documentation the starts talking about "kv put": phofurl similarly "read" examples use "kv get"
the vault pki secret backend allows you to revoke its own root ca with a call to `pki/revoke`.
once done, your root ca is added to the crl, and it 's impossible to undo.
because the crl is signed by the now-revoked ca certificate, the crl is now paradoxically invalid.
i don 't know what correct behavior here is supposed be in pki terms, but revoking root ca seems permanently invalidate either (if crl treated as valid) or crl itself (since it surely can 't be trusted invalidate its own signing certificate).
i looked online for opinions: - phofurl - phofurl my un-informed opinion that it should be impossible add root ca 's serial number signed by that very root ca.
there appears to be a bug in `command/base_flags.go` when establishing the default value for a boolean flag from an environment variable.
line 47 of that file currently reads: phofcode i would have expected the block to instead be conditional on `err == nil`.
commit reintroduced issue #2334 namely, that attempting to rekey a sealed or uninitialized vault results in a 500 and a complaint about not being in ha mode instead of a 503.
i was developing the identity resources in the vault terraform provider and found a problem when creating aliases to entities.
if (like terraform does) several aliases are created at the same time, the entity alias is created correctly but entity object doesn 't reference all of aliases (it doesn 't get updated accordingly).
i don 't know if this translate into future problems, but i thought it was worth noticing.
when using the go client api, `newclient` doesn 't let you specify a config without `defaultconfig` being called first.
this prevents you from making a client for local dev work if you don 't have a client key/cert.
this change happened in phofurl
i have setup an etcd cluster with version 3.2.18 which uses tsl/ssl encrypted communication.
accessing the cluster via etcdctl works without problems, however, when trying to start the vault server with the etcd as storage backend defined i just get: phofcode for the etcd authentication is enabled and client certificate admin.pem uses same dn as user configured in etcd: phofcode when i 'm trying to change etcd endpoints to their dns names, vault already failes with message bad gateway on all endpoints.
the same goes when using dns discovery srv domain entry.
which works perfectly fine for etcd itself.
with a standard vault high availability installation (with consul), the standby instance can 't forward requests to transit secret engine if the message size is larger than 4mb.
it switches automatically to the older/fallback redirection behavior (307 temporary redirect), which creates ssl verification issue
i 'm trying to get read secret version working, following phofurl however it appears to be ignoring the "version" statement i 'm sending it, requesting an older version?
when using the "userpass" authentication backend with identity and groups it seems that the token renewal breaks when the equivalence of policy is checked with the following error ` failed to renew entry: policies have changed, not renewing ` i am sure i did not apply any change to any policy or any group/entity policy membership.
see below this works fine when user is not part of any group and has policies applied directly to userpass identity when it gets created this can be reproduced with script linked below , process i am following does 1. create a user 2. create an identity entity 3. create an identity entity alias 4. create a group with associated policy 5. login as user 6. try to renew token so i
vault ui displays an unsorted list of secrets for generic v2 secret store.
can 't get secret/foo via curl
i 'm writing a custom auth backend for vault, and i accidentally called `req.storage.put()` with a `nil` value.
this caused vault itself (not my plugin) to segfault: phofcode
when navigating directly via pasting a url into the address bar to a list view of a secret path in the vault ui or refreshing the browser while in the list view, any folder names become mangled and can't be navigated.
new authentication methods cannot be properly edited once created.
since gh-4216 when sensitive fields were removed from config reads, the api documentation has not been updated and still shows that sensitive fields are returned in the api reponses.
i have a cluster of 3 vault instances: one is sealed, another is active, another in standby.
i 'm learning the rekeying process.
what happened was that i connected to the active instance and executed the rekey init command.
in this process, i changed the number of shared keys and threshold.
take note: i had key-shares=3 and key-threshold=2; and changed to key-shares=1 key-threshold=1.
after that, when checked status of each instance, noticed sealed standby instances still had old status information about number of keys threshold.
first question: should run some command to update status?
or is it a bug?
continuing... even with this outdated information, decided to unseal that instance which was sealed.
however, was not able unseal instance, because it was still waiting 2 keys!
second question: did do something wrong?
am expecting for something that will/should not happen?
so, decided reset unseal process tried unseal using 2 old keys.
the first old key accepted (strange, isn 't it?
), but after entering second old key, result was: phofcode take note: have 3 keys threshold 2. it doesn 't matter which key enter first.
the second key always produced same error above.
of course, must ask you believe in me when say used right keys in right way - other collegues mine also tried failed.
third question: did really lose that instance?
restarted instance machine status updated!
then, ran process again it worked as expected.
fourth question: do really need restart each other vault machine every time in a scenario like that?
vault gets stuck in a hot-loop attempting to expire leases (issued by pki backend).
the hot loop appears to be "leadership lost --> abort active operation --> retry operation" forever.
the result is a 100% loaded backend with http 500 error codes for client requests.
perhaps leadership was flip-flopping back and forth?
more details at the bottom of this issue.
recovering vault was achieved by destroying and recreating both the leader and standby vault server vms.
we 're running vault in a ha setup with consul 0.7.5 as the storage backend.
starting with 0.10.0, we 're unable to stop vault in a clean way.
the vault cli unwrap command doesn 't support the new kv secret engine, hitting secret/<path> instead of secret/data/<path>.
using firefox (60.0.1 on ubuntu linux), the "checked" status of checkboxes in vault ui is barely visible: only the box itself changes from grey to blue, there is no mark inside it.
on chrome, there is a "checked" mark inside the box.
vault unwrap error: invalid path for a versioned k/v secrets engine.
the error generated by w.close() is ignored here: phofurl
when using `vault ssh` certain command line flags phofhyperlink such as `-o userknownhostsfile` are always appended to the ssh command and are not optional.
phofcode the problem with this is that it takes precedence over the value that has been set per host in the users ssh config.
phofcode for this particular command line flag it is possible to specify it with the vault flag however this needs to be hardcoded in vault ssh command and won 't work for user cases where you have separate known_hosts files per host/group.
our usecase is that we are using `vault ssh` with ansible and maintain a `.known_hosts` file that is checked into git.
when your browser(chrome/ff) open an url, it does trim the last '/ ' which leave the list page in a weird state, the filter being likely filled by the last part of url, it prepend last directory to items in list, and thus make link to them invalid not sure how it 's done in vault, but browsers seem to accept that js modify uri to something that ends with /
when you pass tidy a safety_buffer that is higher than int64 when converted to nanoseconds, the tidy job will delete every certificate in the cert store.
i am developing a custom auth plugin for vault 0.10.1 to address a lacking space that is most likely a domain-specific need.
i have followed the code concepts at phofurl and at this early stage, the code does only 1 additional field from the example code + renamed the super-secret-password to simply 'password '; so updates simply accept two fields, log them to stdout, then return a valid response object.
building with golang 1.10.1, new plugin builds successfully, is registerable successfully within vault (however, there are warnings; see below), but fails when executed by vault client with client "* plugin exited before we could connect" error; and see below for output of server debug logs:
when running any `vault` cli operation (like `read`, `write`, `secrets enable` etc.)
on a 3-node vault cluster with consul backend, sometimes the operation freezes for (more or less exactly) 5 seconds before completing.
unable to write secret via `vault kv put web/foo value="bar"` even with correct capabilities.
`vault` returns an http 403 error.
attempting to write a role mongodb via vault-cli phofcode
this came up in irc, but it seems that creating a kv pair like `test=` and `foo` isn 't possible with the cli.
the http api underneath works, but the cli 's split logic doesn 't support this.
default for a pki role seems to be rsa/2048.
i want to allow a csr sign to work for ec and rsa.
trying to set `key_type=any` (which seems what the code phofhyperlink cares about) results in phofcode
model i am using (bert, xlnet....): bert language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: i 'm just loading the pre-trained bert-base-uncased model the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: document classification
model i am using (bert, xlnet....): language i am using the model on (english, chinese....): english the problem arise when using: * [x] the official example scripts: phofurl * [ ] my own modified scripts: (give details) the tasks i am working on is: * [x] an official glue/squad task: sequence classification * [ ] my own task or dataset: (give details)
cc @keskarnitish i am using the transformers ctrl re-implementation to fine-tune the original pre-trained model released by salesforce phofurl when the input text consists of newline characters, the tokenization of transformers tokenizer differs from one used by salesforce ctrl.
the model i am using is bart: the problem arises when using: * [ ] `tokenizer.encode` * [ ] `tokenizer.decode` the tasks i am working on is: * [ ] encode a string, then decode it back.
model i am using (bert, xlnet....): `tfgpt2lmheadmodel` language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x ] my own modified scripts: (give details) phofcode the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [ x ] my own task or dataset: (give details) trying to work out a stripped-down version of `run_generation.py` using `tfgpt2lmheadmodel` only.
model i am using (bert, xlnet....): gpt2 tokenizer the problem arise when using: my own modified script: the problem arises when i try to add special tokens to the gpt2 tokenizer, specifically a pad token and a sep token.
the tasks i am working on is: * [ ] my own task or dataset: summarization on the xsum dataset, however, the current bug does not actually affect the model, but pre-processing.
tensorflow2.0 does not has a mean function but only a reduce_mean().
phofcode should be: phofcode model i am using: with summary_type == 'mean ' language i am using the model on (english, chinese....): any the problem arise when using: when loading the model, due to the lazy initialisation of tf2.0 you have to run the model with dummy input.
phofcode the tasks i am working on is: * [ x] my own task or dataset: i want to finetune model on a custom english dataset and transfer it to multiple language
model i am using bert: language i am using the model on (english, chinese....): the problem arise when using: * [ ] the official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [ ] my own task or dataset: (give details)
model i am using (bert, xlnet....): roberta-large language i am using the model on (english, chinese....): english the problem arise when using: * the official example scripts: run_lm_finetuning.py and run_glue.py the tasks i am working on is: * my own task or dataset: my own dataset which i have put into the correct format for `run_lm_finetuning` and the `sst-2` task for `run_glue.py`
model i am using (bert, xlnet....): gpt2 language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details) i am using `run_generation.py` to generate text from gpt2, but with the code slightly changed to make use of `past` to cache hidden states.
it crashes in some cases.
model i am using : ** bertformaskedlm ** language i am using the model on (english, chinese....): ** multilingual ** the problem arise when using: * [x] the official example scripts: bertformaskedlm the tasks i am working on is: * [x] my own task or dataset: **finetuning with newly added tokens**.
model i am using (bert, xlnet....): ** bert ** bert_model = language i am using the model on (english, chinese....): ** english ** the problem arise when using: phofurl for mnli the tasks i am working on is: * [ ] an official glue/squad task: mnli
model i am using (bert, xlnet....): xlnet language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [ ] my own task or dataset: xlnet used as encoder for seq2seq generation
i am unable to get tfroberta working on the glue benchmark.
model i am using (bert, xlnet....): tfroberta language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [x] an official glue/squad task: * mrpc [ ] my own task or dataset: (give details)
tfxlnet fails to run due to incompatible shapes when computing relative attention.
model i am using (bert, xlnet....): tfxlnet language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [x] an official glue/squad task: * mrpc [ ] my own task or dataset: (give details)
using tfxlnet on glue datasets results in a typeerror when computing the input_mask because the attention_mask is represented as an int32 and is not automatically cast or promoted to a float.
model i am using (bert, xlnet....): tfxlnet language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [x] an official glue/squad task: (give name) * [ ] my own task or dataset: (give details)
model i am using (bert, xlnet....): gpt2 language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: i cannot load the gpt2 small pretrained model.
the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: am trying to instantiate a gpt2 pretrained model.
model i am using (bert, xlnet....): distilroberta language i am using the model on (english, chinese....): en the problem arise when using the official example scripts: phofurl
model i am using (bert): language i am using the model on (english, chinese....): the problem arise when using: * [ ] the official example scripts: the tasks i am working on is: * [ ] my own task or dataset: squad format, chinese, drcd
model i am using: bert language i am using the model on: polish (irrelevant for the error) the problem arise when using: * [x] the official example scripts: run_ner.py the tasks i am working on is: * [x] my own task or dataset: token classification (aka ner)
i can 't seem to get ctrl generation working.
this is with a pull of the repo from master, and pip3 install as recommended during installation: the problem arise when using: * [ x ] the official example scripts: phofcode phofcode
model i am using (bert, xlnet....): gpt-2 language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: run_lm_finetuning.py the tasks i am working on is: * [ ] my own task or dataset: language model finetuning on custom dataset from human resources domain
model i am using (bert, xlnet....): language i am using the model on (english, chinese....): chinese the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details)
66 scaled_attention_logits += (mask * -1e4) 67 68 if attention_mask is not none: runtimeerror: the size of tensor a (13) must match the size of tensor b (7) at non-singleton dimension 3 the tasks i am working on is: generating text with ctrl
when using the old pytorch_pretrained_bert library, i could point the model with `from_pretrained` to the scibert weights.tar.gz file, and it would load this just.
however, if i try this with the pytorch transformers, i get this error.
phofcode model i am using: bert language am using model on (english, chinese....): english the problem arise when using: * [ x] my own modified scripts: (give details) have a colab notebook that loads scibert weights using old pytorch_pretrained_bert library, and new transformers library.
model i am using language i am using the model on (english): the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details)
model i am using (bert, xlnet....): language i am using the model on (english, chinese....): the problem arise when using: * [ ] the official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [ ] my own task or dataset: (give details)
i am running bert, gpt, gpt2, xlnet.
i got very high cpu usage (e.g.
16 cores) with xlnet while the others (bert, gpt, gpt2) dont.
for bert, gpt, gpt2: cpu 1 cores, 100%gpu for xlnet: cpu 16 cores, 50 to 60% gpu is there any hidden implementation which requires cpu?
model i am using (xlnet....): xlnet language i am using the model on: english the problem arise when using: * [ ] the official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks am working on is: * [ ] an official glue/squad task: (give the name) * [ ] my own task or dataset: (give details)
error message when fine-tuning bert or xlnet on squad1.1 or 2.0 with dual 1080ti gpus: _"runtimeerror: module must have its parameters and buffers on device cuda:0 (device_ids[0]) but found one of them on device: cuda:1"_ model i am using: bert & xlnet language i am using the model on: english the problem arise when using: * [x] my own modified scripts: example script file below which ran successfully under previous pytorch, pytorch-transformers, & transformers versions.
the tasks i am working on is: * [x] an official glue/squad task: (give the name) squad 1.1 & 2.0
model i am using gpt2: language i am using the model on english: the problem arise when using: * [ ] the official example scripts: i run the run_lm_finetuning.py script from the examples folder the tasks i am working on is: * [ ] my own task or dataset: the writingprompts dataset.
i 'm trying to convert a custom roberta model (from fairseq checkpoints) to a tensorflow model.
the problem arise when using: * [x] the official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details)
model i am using (bert, xlnet....): gpt-2 language i am using the model on (english, chinese....): russian the problem arise when using: * [ ] the official example scripts: (give details) * [ x] my own modified scripts: (give details) i do inference with a bit modified run_generation.py the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [ x] my own task or dataset: (give details) i'm training russian gpt-2
model i am using bert: language i am using the model on english: the tasks i am working on is: * [ ] finetuned bert model with my own dataset.
model i am using (bert, xlnet....): retrained bert language i am using the model on (english, chinese....): multilingual - vietnamese the tasks i am working on is: * an official glue/squad task: squad * my own task or dataset: same format as squad
roberta throws repeated warnings about the absence of special tokens in masked lm fine-tuning with `run_lm_finetuning.py`: phofcode this made it look like there was a preprocessing problem, but it appears as though the random masking of tokens applies to the special tokens as well, both for bert and roberta training with that script.
it 's not clear from the original papers if that 's meant to happen, but i assumed it 's not.
the wording in section 3.3.1 of bert paper suggests they might not: they "mask 15% of all _wordpiece_ tokens at random".
their implementation would probably shed light but i just wanted to check with you, since masking special will affect representation [cls].
is this masking meant to happen?
note that bert does not throw such a warning, but masking special also applies that model.
model i am using (bert, xlnet....): bert and roberta language i am using model on (english, chinese....): english wikitext 2 data.
the problem arise when using: * [x] official example scripts: run_lm_finetuning.py * [ ] my own modified scripts: (give details) the tasks am working on is: * [x] an official glue/squad task: language model fine-tuning with run_lm_finetuning.py * [] my own task or dataset: (give details)
model i am using (bert, xlnet....): gpt-2 language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details)
the current transfoxlcorpus code requires pytorch, and fails if it is not installed.
model i am using (bert, xlnet....): transformer-xl language i am using the model on (english, chinese....): other the problem arise when using: * [ x ] my own modified scripts: i 'm using a very simple script to read in text files, see code below the tasks i am working on is: * [ x ] my own task or dataset: i am attempting to build a corpus from my own dataset of long text sentences.
model i am using language i am using the model on (english): the problem arise when using: model.fit() * [ ] the official example scripts: * [x] my own modified scripts: the tasks i am working on is: * [ ] an official glue/squad task: * [x] my own task or dataset:
model i am using (distilbert): language i am using the model on (english): the problem arise when using: distiller.prepare_batch( ) error when token_ids is masked by mask lm matrix * the official example scripts: _token_ids_real = token_ids[pred_mask] * my own modified scripts: pred_mask) the tasks i am working on is: * [glue ] an official glue/squad task: (give the name) * [ ] my own task or dataset: (give details)
- run_tf_glue.py breaks when changing to a glue dataset different from mrpc run_tf_glue.py phofhyperlink breaks when changing to a glue dataset different from `mrpc`, where the features are not called `'sentence1'` and `'sentence2'`.
that happens because of the hard coded accesses in the tensor_dict phofurl the tasks i am working on is: * [x] an official glue/squad task: sst-2 * [ ] my own task or dataset: (give details)
model i am using (roberta): language i am using the model on (english): the problem arise when using: * [ ] the official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (rte)
model i am using (bert, xlnet....): roberta language i am using the model on (english, chinese....): na the problem arise when using: * [ ] the official example scripts: the tasks i am working on is: na
model i am using (bert, xlnet....): bert-large-uncased language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) i am using a modified version of the run_lm_finetuning.py and amp at optimization level o1.
level o2 runs without issue.
the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details) finetuning on a dataset of sentences, with a min length of 10 tokens, using padding and mask_tokens function given by repo.
input and labels are padded per specs and of type=longtensor (torch.size([4, 200]) torch.size([4, 200])) with batch size 4.
model i am using (bert, xlnet....): bert language i am using the model on (english, chinese....): english the problem arise when using: * [ ] my own modified scripts: i need to add some special tokens that will not been split during tokenizing.
and my special tokens contain punc, like [e1].
this will be split in _run_split_on_punc() if omit parameter never_split in this function.
model i am using (bert, xlnet....): roberta language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) run_lm_finetuning * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [ ] my own task or dataset: (give details) .
model i am using (bert, xlnet....): bert language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details): bertforquestionanswering * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name): squad * [ ] my own task or dataset: (give details)
model i am using (bert, xlnet....): xlnet language i am using the model on (english, chinese....): english the problem arise when using: * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] my own task or dataset: (give details)
i get an error whenever i try to trace any model from pytorch-transformers 1.2.0. when i roll back to 1.1 everything is fine.
model i am using (bert, xlnet....): distilbertmodel language i am using the model on (english, chinese....): english the problem arise when using: * x] the official example scripts: i am trying to run the sample in the given examples within a notebook.
specifically example in [distilbert 's example readme phofhyperlink
model i am using (xlnet): language i am using the model on (english): the problem arise when using: * [ ] the official example scripts gpu=3 seed=1 task=mrpc bsz=32 learning_rate=5e-5 max_steps=800 warmup_steps=200 save_steps=400 export export python3 ./examples/run_glue.py --model_type xlnet --model_name_or_path xlnet-large-cased --do_train --do_eval --task_name=${task} --max_seq_length=128 --max_steps=${max_steps} --overwrite_output_dir --overwrite_cache --save_steps ${save_steps} --learning_rate ${learning_rate} the tasks i am working on is: * [ ] an official glue/squad task: (give the name)
after adding a new token that contains a space to the gpt2 tokenizer, the tokenizer produces an error at decoding time (see example code below).
my current workaround is to preprocess that token to remove spaces before adding it and to postprocess the token after decoding.
but i thought i 'd share this in case this is something that the library can warn against (e.g.
added tokens should not include spaces) or even support.
model i am using (bert, xlnet....): gpt2 language i am using model on (english, chinese....): english the problem arise when using: * [ ] official example scripts: (give details) * [x] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give name) * [x] my own task or dataset: (give details)
phofcode when using vocab file generated by phofcode .
specifically, i created an instance of the phofcode by calling phofcode then saved the vocab and merges file for that instance to a local directory.
when creating a new from the saved files i encounter a when reading from the vocab file.
model i am using (bert, xlnet....): gpt2 tokenizer language i am using model on (english, chinese....): n/a the problem arise when using: * [x] official example scripts: (give details) * [ ] my own modified scripts: (give details) the tasks am working on is: * [ ] an official glue/squad task: (give name) * [ ] my own task or dataset: (give details)
model i am using (gpt-2....): language i am using the model on (english): the problem arise when using: * [ ] the official example scripts: (give details) the tasks i am working on is: * [ ] my own task or dataset: (give details) -> just simple next sentence prediction.
my actual text 'saw her in the park yesterday'
model i am using (bert, xlnet....): `automodel` language i am using the model on (english, chinese....): english the problem arise when using: * [ ] the official example scripts: (give details) * [x] my own modified scripts: (give details) i tried to load a downloaded copy of `roberta-base` with `autotokenizer` and i get the following error: phofcode the tasks am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: (give details)
model i am using (bert, xlnet....): roberta, xlm, xlnet language i am using the model on (english, chinese....): english the problem arise when using: * [x] the official example scripts: run_glue.py the tasks i am working on is: * [x] my own task or dataset: binary classification on my own dataset
model i am using (bert, xlnet....): gpt2 language i am using the model on (english, chinese....): english i am having saving gpt2tokenizer when custom new tokens are added to it.
tried out two specific methods.
1. using special_mapping dictionary and save_vocabulary and save_pretrained method 2. using special_mapping list and save_vocabulary and save_pretrained method
model i am using (bert, xlnet....): gpt2 language i am using the model on (english, chinese....): english the problem arise when using: * [x] the official example scripts: run_generation.py, * [ ] my own modified scripts: (give details) the tasks i am working on is: * [ ] an official glue/squad task: (give the name) * [x] my own task or dataset: text generation.
i finetuned a gpt2 model using tensorflow and converted the checkpoint using script to pytorch.
running `run_generation.py` from examples folder results in an error.
it seems like tokenizer is not loaded from converted model.
(maybe it is not saved?)
model i am using (bert, xlnet....): bert language i am using the model on (english, chinese....): english the problem arise when using: * [x] the official example scripts: (give details) `run_squad.py` with cased models * [ ] my own modified scripts: (give details) the tasks i am working on is: * [x] an official glue/squad task: (give the name) squad * [ ] my own task or dataset: (give details)
model i am using (bert, xlnet....): bert base uncased language i am using the model on (english, chinese....): english the problem arise when using: * [x] the official example scripts: (give details) the glue distributed example from readme
model i am using (bert, xlnet....): gpt2doubleheadsmodel language i am using the model on (english, chinese....): english the problem arise when using: * [x] the official example scripts: trying out documentation * [ ] my own modified scripts:
when i query the datapoints with `select mean("srssi") from "2" where time >= now() - 30m group by time(1s) fill(none)` some of the latest datapoints are missing.
the add member button has disappeared.
question: was this removed intentionally?
there is a check in nightly selenium tests that this control exists
ui throws an exception on missing orgid
an error asking to report the issue
i got an error message on the webui.
nothing in the logs on the server.
`failed to create influxdb 2.0 oss metrics dashboard` `failed to configure influxdb scraper` subsequent login attempts fail completely.
the `_variable` field shows the key of the variable (`a.10 seconds`)
cloned cell is the default cell size
instead of receiving 4 tables, i am receiving 6 tables.
data for some tags are split into two separate tables.
first, i have that error: error updating meta: updating metadata on influxd service failed: err=read tcp read: connection reset by peer, n=16 restore: updating metadata on influxd service failed: err=read tcp read: connection reset by peer, n=16 then, if i execute the same restore command, i have this message: error updating meta: db metadata not changed.
database may already exist restore: db metadata not changed.
database may already exist but the db doesn 't exist: connected to phofurl version 1.7.9 influxdb shell version: 1.7.9 auth username: xxxx password: show databases name: databases name core capacity-planning test
there is a problem with the scrolling where i can't see the bottom of the list
the task creation hangs for the given sleep duration because the script is evaluated on creation
auto selection is too aggressive, making it difficult for user to input single digit bin sizes.
strange errors and it told me that i was writing invalid line protocol that isn 't present in the file.
there is an error about an incorrect node version phofcode followed by errors that look more go related phofcode
`stats()` switches over its known set of instantiated cursors in a arbitrary order: - float - int - uint - boolean string going down the list it adds the first non-nil of these cursor types.
it does this for both acending and descending and its sums the two stats (one for asc and one for desc).
"failed to save configurations" the console log shows phofcode which is also shown in the network log phofcode payload sent looked like phofcode note that when creating labels directly there is no tokenid in the properties.
also can click to another area of the ui and then return to load data > telegrafs and the configuration is present.
influxdb returns: "mixing aggregate and non-aggregate queries is not supported" this error seems like it should only apply to aggregation and selection functions, not transformations.
in an attempt to get around the problem, i also tried two transformations functions: `select abs(myvalue), difference(myvalue) from mymeasurement` which returns the same error.
i got back a empty result set
cpu usage is higher at point 6 than at point 4.
the two insert statements create different measurements.
no data is written and no error is returned.
when i am writing data from the same place as earlier it is not working but when i change it to my localhost it works fine.
they both give the following logs when i do ` sudo journalctl -u influxdb.service -f`.
the first one being the one from the same ec2 server and second one is from my localhost environment.
i believe it could be some cache issue and has frustrated me to core.
i have rebooted, stopped and re-launched, uninstalled influx reinstalled still no effect.
the form was filled with the old variable values and not passing validation
task error due to missing dependencies.
an error message appeared "failed to add label to template".
the console log threw a typeerror.
about one in six times the newly uploaded template fails to appear in the list of user templates.
clicking the browser refresh button seems to work to solve this manually, however in the automated tests "refresh()" has not proven a reliable solution.
however, the result of the query provided above is `empty`.
after clicking submit the view switched to the list of static templates.
i did not immediately see the template card in the list.
i had to then click "user templates" again to view new template card.
whatever the flux script, influxdb throw a runtime error : phofcode
clicking the "done" button did nothing.
had to dismiss the wizard.
the database crashes temporarily (too busy to accept connections) and the data recovery is not ingested.
* first value is 0 for count() and null for mean() * a timestamp before the requested time is returned
a lot of messages like these: phofcode
no option to perform it in the ui.
a color swatch sample appears on top of the input to the leftt.
it covers first two to three characters of the input value.
ui buttons will render off the edge of the window.
no way to access w/o increasing window width.
first query returns the expected value, second one returns empty resultset.
the date is displayed with an "undefined" suffix.
screenshot at 14 23 03 phofimage when selecting "utc" as timezone, it shows "utc".
screenshot at 14 23 14 phofimage
i am able to query the data if i write the query in the script editor and through the repl
the logic behind the initial sort is unclear.
for example i have buckets named "qa" and "duchamp" but the order is {qa, duchamp, qa, duchamp, qa}.
additional clicks trigger no further changes in the sort order.
after typing the second letter all cards disappeared.
contents disappear until a page refresh is executed.
missing min and max values
data explorer controls became stuck at a smaller dimension when enlarging the size of the browser.
mouse over the navigation menu triggered the redraw to continue.
failed create check: invalid options; error calling function "check": error calling function "write": error calling fanaction "to": function "to" is not implemented
the `notificationrule` isn 't validate when is created.
data is dropped by retention policy
it appears the sort is alphanumeric: e.g.
actual sort of current example: 1.
1 days 12 hours 1.
12 hours 28 days 3 days
the form _1 units_ appears for hours and days.
got an error message "failed to create bucket: unknown error"
all the text fields and their labels disappeared.
influx continues to hold connections open until open file handle limits are reached
all data from database (3 months worth) was deleted!
i needed to run the above queries from the code and consolidate the data for the given window of window in code.
it will be great if i can pass desired quantile values in a list and get result as a part of single i/0.
when a check or notification is created the task is created at the bottom layer of the stack: phofurl phofurl by doing it this we are ensuring the scheduler never find's out about task and in oss task will not be scheduled to run until after influxdb is restarted.
as stated above, the first rule fails to match any metric that is supplied, which is not expected behavior.
using double quotes fails to exclude the entry.
the runtime error is return
you get `failed to create new task: failed to authorize`.
this appears to be because tasks now do the pre authorization check on the the session.
this involved parsing the ast to ensure tasks targets buckets will be within token permissions.
at which point token fails check because of reasons like above.
however, messaging suppresses this useful information.
the generated function contains two errors.
the parameter 'quantile ' should be 'q ' and the type of the `compression` parameter should be `float`
the immediate error on running is that `--org-id` flag does not have the shorthand `-o` as described in the documentation, which results in this output `error: unknown shorthand flag: 'o ' in -o`.
changing `-o` to `--org-id` prevents that error, but exposes an issue with the `-r` flag.
the documentation describes the retention period as a unit of nanoseconds, but using `-r returns `error: invalid argument for "-r, --retention" flag: time: missing unit in duration changing retention period to `-r 10s` prevents error.
however, this exposes yet another issue.
the documentation describes `--org-id` as "the name or id of organization to which it belongs", but only attempts to use flag as an orgid, resulting message `error: failed decode org id "my-org": <invalid> id must have a length of 16 bytes.`.
changing `--org-id` flag a valid org influxdb.id will finally allow you create a bucket, however, described here: phofurl new bucket is never assigned an orgid.
all 3 measurements have index data: phofcode
screen shot at 10 52 15 am phofimage screen shot at 11 19 00 am phofimage
data is still there and none of the above commands seems to be working
a panic is thrown which results in an influxdb restart.
memory usage spikes to see #7826.
returns all the points from the series.
a json response is returned.
response is an empty string "".
does anyone have a hint for me what is going wrong ?
rapid increase in memory usage requiring container restart.
logs have a repeating error despite the task running successfully.
sometimes, every few minutes, the query processes only see data that is at least ms old.
clearly there is some sort of "locking" that prevents the new data to be returned.
(can this be a disk speed issue?)
i get a new authorization with the userid associated with `admintoken` (the token used for the request).
the userid is overwritten here phofhyperlink
screen shot at 1 57 37 pm phofimage
i got no output, making me wonder if the where clause was wrong.
since i had no where clause, that wasn't the case (:-)) i eventually realized i'd pluralized two of the five column names, but having two make all the columns break was unexpected, and more than a little mysterious.
the literal does not get pushed down because the planner does not recognize that it is equivalent to a string literal
screen shot at 1 32 02 pm phofimage
parsing the query returns an error or, if the rp is left off of the statement, the measurement and its data is deleted from all retention policies.
the left side of the frame for the datepicker popup is off the screen.
note -- in preparing the cypress test effect is more severe and left arrow for start month is not visible (cypress uses a default viewport of 1000 x 660).
behavior in v.17.6: influxdb tries to create data from time=0 to latest time grouped by 1 day.
the points aren't saved and no errors are logged whatsoever.
below is the http api i use.
i tried to change the name of the rp in the query to a rp that doesn't exist and it raised an error however no errors are raised if rp name is correct.
`curl -i -xpost ' phofurl --data-binary value=0.64' ` i also tried to remove rp param altogether and it worked.
there's something wrong with that influx does internally with rp.
i also tried influx python driver and tried to do above query using library same thing happened.
also checked make sure that rps aren't quickly deleting data after its being inserted therefore leading me believe that data isn't being inserted, however isn't case either.
the rp have has a duration of 72 hours.
it seems to do a full page reload.
first description sort followed order of strings in name field.
attempt to sort in opposite direction resulted in no change to the sort order.
create label request was sent to the backend server which responded with http 400 (bad request) which lead to an error message "failed to create label".
received the error message "an influxdb error has occurred.
please report the issue " n.b.
first attempts to filter seemed to work.
at some point the ui entered a state where further attempts ended in error.
no error and failed to run.
when refreshing grafana it shows 502 errors on 99 in 100 tries, sometimes i am able to see graphs.
the same is with command "influx" in terminal.
sometimes i am able to enter it, but then "show databases" doesn 't work, shows "connection refused".
domoticz log regularly shows error on write to influx, but some data manages to get through.
both `feature requests` (should be `request a feature` or `bug reports` for consistency) and `report a bug` point to ` phofurl image phofimage
yum verify reports ownership errors with two directories (/var/lib/influxdb, /var/log/influxdb).
influxdb won 't start: phofcode
screen shot at 1 36 40 pm phofimage
the ui puts a pipe-forward on non-pipeforwardable functions.
most of these are for transforming single values and should therefore be used inside of a row function (functions that operate on one row at a time such as filter, map, or reduce).
here's the list of current functions that are non-pipe-forwardable: - bool - csv.from - duration - from int intervals join math.nan math.abs math.acos math.acosh math.asin math.asinh math.atan math.atan2 math.atanh math.cbrt math.ceil math.copysign math.cos math.cosh math.dim math.erf math.erfc math.erfcinv math.erfinv math.exp math.exp2 math.expm1 math.float64bits math.floor math.frexp math.gamma math.hypot math.ilogb math.isinf math.isnan math.j0 math.j1 math.jn math.ldexp math.lgamma math.log math.log10 math.log1p math.log2 math.logb math.m_inf math.m_max math.m_min math.mod math.modf math.nextafter math.pow math.pow10 math.remainder math.round math.roundtoeven math.signbit math.sin math.sincos math.sinh math.sqrt math.tan math.tanh math.trunc math.y0 math.y1 math.yn string strings.title strings.tolower strings.toupper strings.trim strings.trimprefix strings.trimspace strings.trimsuffix systemtime time uint union v1.measurementtagkeys v1.measurementtagvalues v1.measurements v1.tagkeys v1.tagvalue
bucket column returns "failed to load"
in above query it deletes all records other than '11 '.
this is same for >, >=, < and <= operators.
the second one is horribly slow (a few ms vs 30s)
influxdb fails to start up with a "cannot allocate memory" error; the system does not appear to run out of memory
return 404 response phofcode this is caused by the commit phofhyperlink and a problem is that the lookup_service phofhyperlink didn 't found a bucket.
@desa please, could you look at this problem?
the filter statements are applied separately, e.g.
the tag `t1=1` exists in `cpu` and so does tag `t2=1`.
it's counter-intuitive that `show measurements` does not work like a `select` statement.
a related, but slightly different, issue that concludes a change the logic would be breaking: phofurl
time is set to epoch 0
[what actually happened] system becomes unresponsive with 90% cpu usage, then influx crashes.
after the crash the system works normally but the influxdb is gone, grafana blocked and openhab panel shows null values.
curl -o profiles.tar.gz " phofurl ` % total % received % xferd average speed time time time current dload upload total spent left speed 0 0 0 0 --:--:-- 0:00:12 --:--:-- 100 66444 66444 2142 --:--:-- 0:00:31 --:--:-- 17615 ` i can not do this command when the error occurs as either process is gone or it is not responsive.
1. grafana shows an error: `server returned http status 500 internal server error` 2. the following trace is generated: phofcode
[allocated memory is not freed]
[what actually happened] expect side load to complete in a reasonable amount of time without running out of memory are there any recommendations on tweaking configuration to make this faster ?
[what actually happened] seeing the following error in the influxdb logs, logged every 10 seconds: tcp.mux: handler not registered: 71. connection from closed the ip in the error is my kapacitor server.
influxdb config: phofurl kapacitor config: phofurl
** db size is increasing day by day **
[what actually happened] - insert become slowly when excute select operation.
- cpu up to 700%
[what actually happened] the system prints out a seemingly random selection of characters at startup and whenever i attempt to type or simple click on the window as shown within the screenshot.
we are seeing full compactions every few hours (more below) that i thought would only happen after a shard got cold.
the shard duration is 1 week and we are not backfilling old data.
[what actually happened] memory usage too high to be oom killed by os
file fails to import with following error.
> error writing batch: {"error":"unable to parse value=0 ': bad timestamp ... converting the file to unix style line endings ( ) fixes the issue, but it 's not entirely clear this is the problem from the error message
now it could end up rebuilding all series indexes for periods outside the delete time interval
the series index is rebuilt if it only exist in cache.
using double quotes fails to exclude the entry.
[what actually happened] phofcode the noa database is still there
> select mean(count) from channel_site_count where site and time > time group by time(2m), site fill(previous) name: channel_site_count tags: phofcode name: channel_site_count tags: site=sip%%730 phofcode
compaction seem to run indefinitely.
is there a way to make influxdb stop hugging the cpu while doing this without loosing data?
i will keep in mind to never delete any data since it seems to be causing problems.
i hope that this will go away once the shard expires (it seem have some problems although `influx_inspect verify` reports no issues), but it would be nice if influxdb would not consume cpu for months until this happens.
besides uselessly consuming cpu it 's more annoying that restarts are much slower in this state.
<img width="1342" alt="compaction-process" src=" phofurl
[what actually happened] also the string `enter an influxql query` is reported.
time max 20671 20671 20671 0** same behavior for max(), last(), mean(), ... i also tried various combinations of time frame and group by time() values.
this makes it impossible to do a monitoring based on actual value of time series!
a type error occurs: phofcode
success status with a response body of phofcode
the following error occurs: phofcode
for some time, points are written, after xx points / xx time, no more added points te database
it will scan all shard and in my case do an oom killed
influxdb query engine try to group metrics since 1 january 1970 without any warn (sometimes crash/panic influxdb cause all memory heap consumed)
[what actually happened] influxdb does not crash but it does not give back the tag values of the measurement for that particular tag.
when i change the tag filter it returns the tag values correctly.
only the 2nd query returns the correct results.
i 'm not exactly sure what value the first query is counting.
[what actually happened] `influxdb` fails repeatedly with no error information, _possibly_ reporting a permissions error opening the certificate.
[what actually happened] not a crash, but influxdb returned the `panic: runtime error: index out of range` for the query.
any other query on any other measurement would work correctly.
unclear, but makes no sense: a mix of multiple points on same timestamp, 0 and negative values.
for example: time | integral ---- | -------- | | 0 0
[what actually happened] image pull fails with error: `no matching manifest for unknown in the manifest list entries` this appears to be specific to this tag; `latest` works fine
"tag values" are different in one case checked: influx execute 'show tag values with key=hostname ' -database=<db-name>|wc -l -> 377 values influx execute 'show tag values with key=hostname ' -l -> 269 values
the first interval is one interval past the start time (or more if the `n` value is larger).
if the value is 2, you likely won't run into the bug.
if value is 1, it'll likely read one extra interval.
after step 7 the screen show ts121 has data i wrote in step 1&3 not data in step 5 using dataframeclient.query also could query the data in step 1&3
an error is thrown `error authorizing query: sampletestadmin not authorized to execute statement 'create retention policy one_day_only on sampletest duration 1d replication 1 ', requires admin privilege`
the number of points reported by dumptsm is actually 3 times the number of points reported by the query.
the dumptsm tool is not using "points" consistently with the influxdb documentation, which states that a "point" includes the entire field set.
instead, it is reporting number of single time-stamped values indexed by tsm.
in addition to showing wrong number of points, bytes/point calculation is also misleading because it reporting bytes per time-stamped value, not bytes per time-stamped field set (i.e., a "point")
`http status 400 bad request: {"error":"proto: wont wiretype = 2 for field starttimestampsms"}`
doesn 't work for integer, but works for float !
deletes takes maybe 5-10 seconds in some cases.
crashes on startup: phofcode the crash doesn 't seem to always happen at the same file.
[what actually happened] the http service never starts and port 8086 never listens.
[what actually happened] allows you to set the password, then fails auth when you try to use it.
increase to ~3k constant disk read ops, ~50% cpu wait, memory usage increases (~15gb) up until oom.
returns proper values, but datetime is off.
(data is on 1st august, returned datetime is 17 july my background is that i'm trying to set up a graphic to show datas per day, months and year.
other functions works fine ; i'm using the same logic as days and months (days group by 1h, month group by 24h).
when trying to access data and group by 720h or 30d, which are equals, returned datetime wrong.
i confirmed that there no data on 17july, but still getting this date in return.
nb : when i was trying with group by date (4w), i had different result and date.
my guesses are that 4w equals to 28 days, different from 30 days of course, that the returned date actually kind of averaging the date with the actual of data, reached with 30 days (reminder : i have data 1st august, returned 17 july, so 1st august minus 15 days 17 july...) maybe i misunderstood some of influxdb functionalities as i'm beginning with this tech, but can't find a way make it work properly.
i think full datas every day would display correctly, but i'm not even sure.
also excuse my english if it's not perfect, a foreigner ;
i have been running the script since 18 hours and the migration is still going on.
if i check the physical location where influxdb stores the data, it shows that it has transferred only 4gb till now.
i know there should not be a correlation between size of csv file and data stored in physical location of influxdb server but i have no other way to gauge progress.
[edit] the physical location of influx looks like this after 19 hours (asup_metrics being db name and historical_data is retention policy name): 17m t./_internal 4.6g t./asup_metrics 4.6g t. could anyone kindly point out where might be going wrong?
influx is still running on tsm, logs are showing engine=tsm1 tsm files are getting created inside data directory _ screen shot at 11 25 07 phofimage
i got the error message shown above.
i get a list which looks like i got the desired result, but the list is wrong!
an example time series from the result: phofcode but if i now run the following query phofcode i get that result: phofcode so there definitely is a value after within that measurement such that it shouldn 't have been reported in my queryresult.
can you explain to me if this is kind of a desired behavior and i don 't get workflow of subqueries or is this a bug?
if this desired, please detail how subqueries work in more detail and tell me how to achieve my original result: getting all timeseries which didn 't receive value since one week.
(right now, run via bash `show measurements` and for each line, run influx cli from batch and query explicitly that measurement for it 's last value which obviously results in rather long runtimes for big databases with lots of measurements
throwing error `panic:runtime error: index out of range`, the same query was giving result in 1.3 version
`"partial": true` flag in json response, although the response is complete.
the write-ahead-log is not being compressed to tsm files and just keeps growing.
currently there are 2 .wal files.
one with the size of 24 mb and a newer one that is actively being written to, currently 4mb.
the new values generated by the cq are reseted to zero and sums the actual value, instead of sum to the previous value (as cumulative_sum should work and how it works if i run the `select ... into` directly).
example output: phofcode i 'm not sure if i 'm doing it in correct order, but tried creating first cq and then doing manual `select .. into` and same results happened when cq got executed again.
on linux, we get `influxdb shell version: 1.6.0`.
on mac os x we get `influxdb shell version: v1.6.0` there is a `v` prepended to `1.6.0
[what actually happened] javascript code worked.
at around 9:00am this morning, i checked a server metrics dashboard, and went back 30 days.
there were no gaps in the data.
at around 11:30, i noticed a large gap from july 8th at 6:00pm all the way to july 15 at 6:00pm, so exactly 1 week of data was lost.
[what actually happened] panic in the server: [httpd] ::1 - - -0500] "post /write?db=metrics http/1.1" 200 0 "-" "curl/7.54.0" 67 [panic:runtime error: slice bounds out of range] goroutine [running]: +0xa7 0x1ebe700, +0xcd 0x1ea9c00) +0x229 0x1, 0x239, +0x1e7 0x24, 0x248, 0xed2deac41, 0x0, 0x0, 0x0, ...) +0x1bf 0x24, 0x248, 0xed2deac41, 0x0, ...) +0x305 0x77ace28, 0x0) +0x8c6 0x0) +0x5c +0x790 0x77ace28, +0x44 +0xab 0x1a48ec0, +0x44 +0x29e 0x1a48ec0, +0x44 +0x102 0x1a48ec0, +0x44 +0x179 0x1a48ec0, +0xe1 +0x14c +0x152 +0x24d +0xbc 0x1a4cd40, +0x651 created by net/http.
however, this final command instead returns an error when attempting to invoke it: `restore: -metadir or -destinationdatabase are required to restore`
no data shown in grafana, influxdb cli reports a panic since upgrading to influxdb 1.6.0, it fails, and a panic can be see in the `influx` cli tool: phofcode
there is no result at the third step.
[what actually happened] phofcode what 's wrong is that the entries in the output of select do not fill in the "host" column of the table like initial table seeding does however if i do: select * from tablea where time = then all of columns are correct.
the range of the outer query is used for the inner query, so we have nulls until the first value in the outer query 's range.
query response time becomes 1200 to 1600 seconds after running above mentioned queries repeatedly.
[what actually happened] only returns measurements with fields that have a specific type; if there are numeric types present, only numeric types are returned.
if only booleans and strings are present, only strings are returned.
no data is being returned
the database is in a inoperational state, where also writes are no longer possible.
the measurement is is forgotten when the influxd process is killed/machine is hard reset
deleting series at point 4 and 6 does not work as expected.
there 's still contents after running 5 and 7. i suspect the problem is from the hostname (tag value) using "-" (dash).
restoring the database fails (most of the time...) with the message `error updating meta: db metadata not changed.
database may already exist`, even if `test_bak` does not exist.
i wasn 't able to understand to resulting log line, where `retentionpolicyinfo` isn 't always the same: phofcode
no errors in the influx log after restarting.
very slow on "huge" databases and this affects adhoc filters greatly.
i have a measurement that has data going into it via a continuous query, this has been working fine for over a year.
a couple of days ago i could no longer query data using the one tag that is on the data.
the cq is: `create continuous query samples_stats_max_86400 on gnocchi begin select max(value) as value into from group by time(1d), metric_id end` sample data in phofcode however the data in the measurement that cq is putting into is: phofcode as you can see it's renamed tag from `metric_id` to `metric_id_1` the was all under `metric_id` and existing has somehow moved to have tag name `metric_id_1` all new seems to be going in under metric_id_1 tag.
there are less than 1% of points that do still have `metric_id` tag phofcode
old tsm data from `_internal` is not shown.
points from latest wal and from other databases seem to be fine.
there is no note about this in the log either.
returns empty values --- _**example using the noaa sample data:**_ phofcode
`err: select 100 - mean(value) from db.autogen.cpu_value where test_id = '4234 ' and value > 0 and type_instance = 'idle ' and host =~ /ahostname/ and time > [panic:runtime error: invalid memory address or nil pointer dereference]`
the error message indicates that the regex didn 't match any field keys
`top()` returns the greatest field values, but the results are ordered by timestamp.
almost all use of this function requires clients to sort the data themselves.
[what actually happened] getting phofcode
[what actually happened] writing into _internal database
for case 1 i get ( ** expected ** ): http/1.1 204 no content content-type: application/json request-id: x-influxdb-build: oss x-influxdb-version: 1.5.1 x-request-id: date: wed, 02 may 2018 gmt for case 2 i get (**not expected**): http/1.1 100 continue http/1.1 204 no content content-type: application/json request-id: x-influxdb-build: oss x-influxdb-version: 1.5.1 x-request-id: date: wed, 02 may 2018 gmt
[what actually happened] when the query: show series from /hugepages/ where host =~ /jtcl.
*/ limit 10 is run the influxdb can 't find any series and instead of reporting "no records" it crashes.
the where-clause of the newly created continuous query is "where utcoffsettag = ' 0400 \'" (the '+ ' was substituted by a blank space).
actual influx just drops second field and returns ` {time , price} 9447 9448 ` how can i group multiple fields to one and return /ask.
*.price/ as one field with all prices instead on muliple fields?
the math on the two fields from subqueries was not performed.
[what actually happened] apt show: synchronizing state of influxdb.service with sysv service script with executing: enable influxdb update-rc.d: error: cannot find a lsb script for influxdb dpkg: error processing package influxdb (--configure): subprocess installed post-installation script returned error exit status 1 ``
the result is empty, meaning no rows are returned at all.
after step 5: phofcode note: `(2 + 1) x 16 = 48` after step 6: phofcode note: `(6 + 1) * 16 = 112`
user is not, grants are not.
only metastore is backed up.
**note: `influxd backup -portable <path>` does all databases ' backup*
[what actually happened] upgrade failed with errors below, influxdb is now non-functional sudo systemctl status influxdb influxdb.service - lsb: influxdb is an open-source, distributed, time series database loaded: loaded (/etc/init.d/influxdb; bad; vendor preset: enabled) active: inactive (dead) docs: apr 10 dfwpinfluxdb01 systemd[1]: stopped lsb: influxdb is an open-source, distributed, time series database.
apr 11 dfwpinfluxdb01 systemd[1]: stopped lsb: influxdb is an open-source, distributed, time series database.
apr 11 dfwpinfluxdb01 systemd[1]: stopped lsb: an open-source, distributed, time series database.
[what actually happened] - 404 page not found
all cores go to 100% and ram usage also starts increasing and after 100% ram usage, influx crashes -with error "fatal error: runtime: out of memory"
heap memory consumption increased from 30 gb to 55 gb after using tsi.
i turned off influx at 20:00, ran buildtsi, and started influx.
[what actually happened] in the second calculation, the integral for that timestamp is actually abnormally large:
gets filled with thousands of files of about 2730kb each.
even if no data is sent anymore to the server, the tsm files keep being created until full exhaustion of the disk space.
the connection is not being established and fails with a `connection reset by peer` error message.
influxdb crashes due to unable to allocate memory when initializing sketches for hll: phofcode
no open port, no http service
we 're getting `err: database not found: _internal`.
after re-executing the above statements, everything works.
do we have to wait some time until `_internal` is ready?
or do we have to switch databases with `use`?
[what actually happened] release | total startup time | one shard open time -- | -- | -- 1.3.5 17s 1.4.2 19s 1.5.0 11min we made a test in 1.5.0 with tsi1 enabled (after influx_inspect buildtsi command) and we have the same result.
error while creating the corresponding shard directory with the below mentioned error: phofcode
all possible values for the tag key "uniq" are returned.
the result is always the same if the tag key after where begins with an underscore, eg.
`where "_asdfa" = ...` name: testseries key value --- ----- uniq aaa uniq bbb uniq ccc uniq ddd ``
a segfault is noticed and daemon exits stacktrace info finished compacting files {"log_id": "engine": "tsm1", "tsm1_strategy": "full", "tsm1_optimize": false, "trace_id": "06flyhdl000", "op_name": "tsm1_compact_group", "groups": 2, "files": 1, "duration": "13.259ms"} info tsm compaction (end) {"log_id": "engine": "tsm1", "tsm1_strategy": "full", "tsm1_optimize": false, "trace_id": "06flyhdl000", "op_name": "tsm1_compact_group", "op_event": "end", "op_elapsed": "13.291ms"} panic: runtime error: invalid memory address or nil pointer dereference [signal sigsegv: segmentation violation code=0x1 addr=0x4 goroutine 59 [running]: 0x0, 0x0, 0x5, +0x4c 0x7, 0x1) +0x1f4 0x7, 0x1, 0x1, 0x0, 0x0, ...) +0x90 +0x3c4 created by +0x2e4 ``
`select nummeasurements, numseries from "_internal".."database" where "database" = "test"` --> 0 measurements, 1 series which is clearly wrong!
[i get a row count of
[what actually happened] one (the "fast") answers in 12 seconds, the slow uses 16 minutes.
i get the result without null values: phofcode
one point for every week is returned and 2 points for the weeks including dst changes are returned.
[what actually happened] backing up db=test-database-example since +0000 utc backup failed: invalid character 'h' looking for beginning of value backup: invalid character 'h' looking for beginning of value ``
the release date (in the changelog) for v1.4.3 in the 1.4 branch is set to
only data added since the retention policy has been added is shown.
observe that the query looks correct parsed in the error message.
[what actually happened] randomly loss data point.
for example, first may produce a data point, but not max and min in the same time interval.
some serieses are created but others are not
start_time is four years in the past, wasting full shard duration.
for now when i use `difference` it is messed up: phofcode i've seen #8214 but not sure it is related.
[what actually happened] message:"error parsing query: found select, expected identifier, string, number, bool at line 1, char 30"
`/var/log/influxdb` remains empty, even after `logrotate` runs i don 't know if there 's a reason that contains `copytruncate`, but if there 's no logfile (yet) it 's not going to be created.
if you create the file yourself (`install --owner syslog --group adm --mode 0640 /dev/null or change to something like this: phofcode it works just fine.
therefor two possible solutions i see are: * create during installation ( maybe here phofhyperlink ) * adjust i don 't mind making a pull request, but before i do would like to know what 's the preferred solution
every line protocol has been inserted into the second database db1 phofcode
from time to time i get error messages like: phofcode
the cpu load skyrockets, the consumed ram jump from 1.6gb to 126gb, then pumps the whole 1gb swap, and then a go memory related message is issued (either unable to allocate memory, or out of memory).
iostat shows intense disk activity (between 15 and 45% on ssd drives).
i used the following snippet to gather debug data.
will send it to influxdb team in pm as needed : for i in block goroutine heap profile; do curl -sl -o influxdb-debug-$i.txt " phofurl done && for i in $(seq 6); do curl -sl -o " phofurl sleep 10; done && tar -cvzf +%s).tar.gz influxdb-debug-*.txt && rm influxdb-debug-*.txt the same query with influxdb 1.2.4 returns a result but the used memory jumps 106gb and keeps at that value even though query finished
the file contains "unknown profile: all"
the more fields are in the select clause, the slower the query is.
apt-get returns with an error stating "writing more data than expected"
new hosts are getting this answer from influxdb : phofcode and host is not present in influxdb database.
the expression is refused by the parser.
with `err: cannot perform a binary expression on two literals`, or respectively `err: invalid expression: 'a ' = 'a '`
a group is returned with an empty tag value (in the above example): phofcode
cryptic error message `err: %!s(<nil>)` about 33 seconds after issuing the query image phofimage
influxdb returns after long delay with incorrect value
the index starts on 1 in the index section, and on 1 in the block section
[what actually happened] some number around 400 trillion is returned (not always the same number)
out of memory, uses all my 128 gb of ram.
each query takes around 3-4 seconds.
the reason for the crash is that influx first reads the first block which is 6 days long, and then reads **each block that is overlapping the min/max of the first block**, and then merges each block with first block (one by one).
in last iteration of (~609), a 6 * 24 * 60*60 (~8 mb) samples will be merged with a 5000 sample block.
the total amount allocations here will be 2-5 gb, and if garbage collector cannot work fast enough, you will get an oom!
the latency of the query request is longer, and rate of success write request is reduced
[it seems to be hard coded]
phofcode quick fix is to change the restart from on-failure to always.
step 2 shows inconsistent data phofcode step 3 took ~20 minutes (i didnt set a time) then responded with `timeout`.
there are no log events, no error output from influxd-ctl, no information at all why things aren 't working.
the meta server just starts up and says it 's running okay as a follower and running for example "influxd-ctl show" just hangs without any output
influxdb returns a response code of `500`
some of the queries get an http-200 result but in the response there is the following json string: "error":"query interrupted"}]}` see the following packet-numbers in attached wirehark-file: - 204 - 430 - 1797
got this exception: `{"error":"partial write: points beyond retention policy dropped=1"}
[what actually happened] override path with e.g.
`err: invalid time dimension offset: now()`
"show tag keys from measurement" takes around 10 minutes to execute.
tried other lower cardinality measurements on the same database and the performance looks similar to 1.3.7
[what actually happened] the 2nd query takes around 30-60s whereas the first returns almost instantly
the following errors show up in the log: phofcode
have weird tag values from separate db
but influxdb didn 't put in 5min to result set phofcode
influxd returns with the following message: t .d888 888 t 888 d88p" 888 888 "y88b "88b t .88p t 88888b.
"88b y8bd8p ' "y88b x88k y88b .d8""8b.
.d88p d88p "y88888 t[i] influxdb starting, version 1.3.2, branch 1.3, commit t[i] go version go1.8.3, gomaxprocs set to 2 t[i] using configuration at: trun: create server: proto: required field "{unknown}" not set
errors writing snapshots, unbounded disk consumption
the query fails to parse unless there is a space following the regex operator
after influxdb instance crashes data integrity is compromised - querying the db results in less data points than before the crash.
influxdb crashes after nfs issue
instread, the where clause is applied to the sub query, and the result includes all up-to-date series and the last value is 30 days old.
in fact, this is same result as when i move where clause to sub query: phofcode
nothing is added on influxdb.
phofcode unlike > select usage_user as idk, usage_idle as idk from cpu where time > now() - 10s name: cpu time idk idk ---- --- --- 0.4 99.4 9.2 83.6 7.2 89 ``
the time returned seems to be a multiple of the aggregated time.
that is, if my aggregation is `group by time(7m)` then the points seem to a multiple of 7 apart.
see this: phofcode in comparison to: > select last(value) as value from "measurement" where time >= and time <= group by time(23m) fill(none) limit 5; name: measurement time value ---- ----- 61.111 200 66.667 97.959 ``
error regarding json decoding"invalid character \'< \'"
generated configuration file fails parsing with errors.
log message suggests to set your license via either config file or environment variables ** license_key ** or ** license_path ** , which actually do not work and are not what documentation says.
crash and restart (by system)
server started using all ram until it was oom killed by os
* 50% of the series from a shard (`378 default autogen are no longer queryable (there is a 3 month hole in all the data) * writes continue to succeed (for the other 50% of time series) * the shard itself was not empty (300mb vs. 550mb before) * in the client code there were no "drop shard" commands used, `delete from` is used with specific time series (but never for exactly shard period)
[what actually happened] subscriber receives points on multiple connections in random order.
output: failed to connect to phofurl get phofurl dial tcp xxx:8086: getsockopt: operation timed out please check your connection settings and ensure 'influxd' is running.
high load, all memory allocated, poor performances
i get all measurement without the one having string fields: phofcode
the query runs indefinitely (at least 5 hours) and the shell locks up requiring me to ctrl-z to exit and then kill the query.
query returned nothing (neither error nor results) * * * i tried this using the http api too.
following is an example: **i tried:** curl -g ' phofurl --data-urlencode "db=telegraf" --data-urlencode "q=select "host " from "ntpq " limit 1" **and i got:** { "results": [ { "statement_id": 0 } ]
outputed to ** stderr ** phofcode
failed to authenticate with message: `{"error":"error authorizing query: no user provided"}`
the duration returned by show retention policies is not in all cases a valid formated duratio
influxdb just mentions mismatch in types, e.g: unable to convert values according to typesdb: len(args) = 3, want 4 what would be good is to see something like this: unable to convert values from server.example.com according typesdb entry df_value/sda/gauge: len(args) = 3, want 4
query runs and returns no results.
database "with space" created > use "with space" could not parse database name from "use "with space "".
lots of errors started showing up a minute or so later.
here's what they look like: [i] error adding new tsm files from snapshot: sync invalid argument engine=tsm1 [i] snapshot for path written in engine=tsm1 [i] error writing snapshot: sync invalid argument engine=tsm1 [i] error adding new tsm files from snapshot: sync invalid argument engine=tsm1 snapshot for path written in error writing snapshot: sync invalid argument
influxdb 1.3.4 needed almost 30gb of memory to fit a dataset that used less than 3gb under version 1.2.4
if a float-field value is zero, it 's returned as '0 ' instead of '0.0 '.
re-importing this data to influxdb leads to a field type conflict: e.g.
`400: {"error":"partial write: field type conflict: input field "usage_user " on measurement "cpu " is type integer, already exists as type float dropped=1"}` * test `select usage_user::integer from telegraf.raw.cpu`: all results arrive as integers * test `select usage_user::float from telegraf.raw.cpu`: some results arrive as ints, some floats * test `select usage_user + 0.0 from telegraf.raw.cpu`: some results arrive ints, some floats * test `select usage_user + 0.5 from telegraf.raw.cpu`: all results arrive floats usage_user + 1.0 ints, floats at least python 's json package can differ between int and float zero: "ble":0} \')`
however, when i try to select (and make a table of aggregates with multiple columns) in the outer select, i receive and error `err: cannot select fields when selecting multiple aggregates`.
structurally and pragmatically what i'm trying to accomplish makes sense, and ideally it should be able to display something as it would just be an additional column from the inner aggregated select.
only the cqs of the first database i created seems to have run as the downsampling retentions of all databases but the first one have no data.
what actually happened] if you now go to [localhost:8083 phofhyperlink , choose the `fping` db and fire up this query: phofcode somehow, the p95 is a distinct result in this query, even though the host/producer group has a row already.
screen shot at 11 10 55 phofimage ## cute pic of an animal !
the export fails with `writing out tsm file data for open no such file or directory` or `writing out wal file data for open no such file or directory
grafana shows `no data points` `max-select-buckets = 0` <img width="1279" alt="screen shot at 12 51 55 pm" src=" phofurl `max-select-buckets = <img width="1271" alt="screen shot at 12 51 35 pm" src=" phofurl
the values were added and then the derivative was taken
`err: authorization failed` `invoke-webrequest : {"error":"authorization failed"}` cli phofcode
the 12:00 am interval goes from 12:00 am to 1:00 am and the 2:00 am interval goes from 1:00 to 3:00
it sets the start and end time to be a day in utc, but the query still properly accounts for the time zone so it only selects part of the day.
additionally, start and end time should accomodate when time zone changes same way that query engine does
influxdb fails to back up databases starting with an underscore character.
[what actually happened] measurement named `a=b` was created
based on a quick look at the debug vars output.
influxdb was able to write ok (pointswrittenok: but failed to write: (pointswrittenfail: see snapshot of the debug/vars output (truncated): phofcode also, below is the output of phofcode for the influxdb container: phofcode
some (but not all) datapoints are missing (or un-query-able).
_when new index is turned off in favor of default original and repro steps are run, this problem goes away._
[what actually happened] the time period for the continuous query runs monday to monday so it only delivers 4 days worth of data
[what actually happened] see errors in the log.
[what actually happened] increased disk usage
output messages indicated that it was restoring but nothing actually restored
[what actually happened] receive incomplete points with some fields null.
throwning error 500 's on every request
the query returns the result for a different "serial" tag of " ** ** " returned result: > "results": [ { "statement_id": 0, "series": [ { "name": "profile", "columns": [ "time", "measure", "rate", "serial", "type", "value" ], "values": [ "forwardactiveenergy", null, 0, 769 ] ] } ] }
duplicate points found in the select results; their number increases with each subsequent select call
export runs forever, will consume all disk space where the dumpfile is being written.
i even mounted an additional 100gb partition under /dump, and it had written a 92gb file before i killed it.
last few lines of the 50gb dump look like: ``
influxdb responded with http code 200 (ok) but produced an invalid json.
when the influxdb.kapacitor and also its admin ui tried to parse the result, the following error was observed.
step 1 returns parseable json.
step 2 returns a string that has to be split with "/n".
while this example coerces the behavior of the response, similar scenarios can happen with any data<chunk_size compared to data>chunk_size.
results for 1: light","4","pool lights","4","path medium","-1","wtrfall results for 2: light","4","pool lights","4","path medium","-1","wtrfall blower","-1","air /n high","-1","wtrfall this make is very unfriendly to try to programmatically deal with responses because we need first test see if the response is a string or a json (and this precludes the use of $.getjson if a string is being returned).
then additional logic is needed split string and then parse those into json.
> select mean(load) from (select load, host_name as host from example) group by host name: example tags: host= time mean ---- ---- 0 could this issue be related to #7972 ?
it 's the nearest thing i could find when searching for similar reports
phofcode and, as a result grafana is failing to generate proper query due the should-be-escaped $ character for influxdb
the system reports the `telegraf` package cannot be found.
the `bottom()` queries in steps two and three return nothing.
build error go clean go install # undefined: syscall.mmap undefined: syscall.munmap makefile:8: recipe for target 'bin/influxdb' failed make: * * * [bin/influxdb] error
there is no error/exception when inserting a measurement with # character, but it is not shown when checking measurements
two separate measurements `df_used`, `df_free` created
errors start appearing on the logs disk space utilization skyrockets
point is still in the database
[what actually happened] influxdb starts allocating all the available memory, if i set to 0 or 2 it crashes with the out of memory error
i get error messages about missing .tsm.tmp files during compactions.
in total i get 34 such messages for the last 7 days.
[what actually happened] data are missing only with some query, which create gaps on our graph from time to time.
this system currently has 3t of ssd storage available to influxdb.
since i 've been unable to keep this online, i 've moved all but 6 telegraf agents to a new system.
after restarting influxdb, about 1.3t of space is free, but in just 14 hours of running with just the 6 telegraf agents writing, all 3t of disk space has been used.
this drops back down to 1.3t free again when restarting.
this all seems be a result compaction and it seems that the number "*.tsm.tmp" files never drops.
json format gives the expected results, but csv does not * from example` gives: phofcode
select doesn 't return data but chunked return does
[what actually happened] series from _internal database appear in user database as well as in the _internal database phofurl
[what actually happened] one value remains that shouldn't.
* influxdb crashed with oom error phofcode
influxdb groups time ranges * extending * the queried time, in this example meaning as soon as passes, it will group - with data only being inserted at the last result will be `null` (until passes), although data is inserted with the same interval as used in the query.
it appears additional data is being caught in the 'sum' calculation, which i did not ever see prior to 1.2.x.
results are only returned from the first measurement listed (measurementa in the example query): > select * from (select from name: measurementa time max min ---- --- --- 0 1 0 ``
[what actually happened] duplicated timestamp data
the sigtstp signal is ignored, the influx shell is still in the foreground.
* ** orange ** was associated with **a foo** tag * ** bar ** should be associated with apple tag ## issue the issue lies in the [tags.hashkey][] method, which is currently [sorting][] the keys after they have been escaped, however as it [reconstructs the key][] it pulls the [escaped][] values here in order of original tags array.
note: an invariant of `tags`, assuming it is constructed from [newtags][] function, is tags are always sorted by keys.
as such, if there are no escaped keys, this would not be an issue.
also, this issue does not surface when using line protocol, as it requires tags already be escaped and during parsing, [sorts tags][] if they are not already.
### tests the following unit test can be added to [points_test.go][] to demonstrate specific issue ~~~go func testtags_hashkey(t *testing.t) { ttags = foo": "bar", "apple": "orange", "host": "servera", "region": "uswest"}) tgot := tags.hashkey() tif exp := ",a string(got) != exp { t tt.log("got: ", string(got)) t tt.log("exp: ", exp) t tt.error("invalid match") t} } ~~~ [points_test.go]: phofurl [sorting]: phofurl [tags.hashkey]: phofurl [reconstructs key]: phofurl [escaped]: [newtags]: [sorts tags]:
[what actually happened] no data is stored, and the following error message is printed to `/var/log/messages` any time collectd sends data: `<timestamp> <hostname> influxd: [i] collectd parse error: invalid data service=collectd`
data from is ** between ** and looks like incorrect bucketing.
this error is printed: err: error parsing query: found -1m, expected ; at line 1, char 46
err: error parsing query: expected field argument in cumulative_sum()
[what actually happened] report: no tsm files at
select with wildcard return processcpuload mean = 0 using wildcard select in continuous queries for data downsampling destroy float data precision, eg: > > show continuous queries >name: middleware >name query >---- ----- >archive create continuous query archive on middleware begin select mean(value) as value into from middleware.autogen./.
*/ group by time(5m), * end result in "archive" rp is always 0: > > select * from where host = 'server1 ' and time > >name: processcpuload >time agent appname envtype host mbean metric_type service value >---- ----- ------- ------- ---- ----- ----------- ------- ----- jmxtransagents demo1000 test server1 operatingsystem gauge demo 0 jmxtransagents demo1000 test server1 operatingsystem gauge demo 0 jmxtransagents demo1000 test server1 operatingsystem gauge demo 0 jmxtransagents demo1000 test server1 operatingsystem gauge demo
- influxd automatically enables itself - this is potentially dangerous as it will start a daemon on the next reboot without any manual cfg actions, potentially leading to backdoors, dos, resource exhaustion,... - at least it's a surprising behavior as all other tools i'm aware of don't self-enable.
- it's further surprising as the next reboot could happen in weeks from now.
privs are granted without issue
[what actually happened] if the user name is different than "admin" authentication fails, even if the user has permission to create database.
only 3 sets of data come back, 1 of them has invalid name.
`panic:runtime error: invalid memory address or nil pointer dereference]` it seems like the above select query breaks the influxdb 1.2 around 12th or nearby addend in the sum math formula.
any ideas where might be the problem?
i 'm stuck on v.1.0 due to fact that 40% of properly working queries started failing after 1.2 upgrade.
[what actually happened] 1st query returns correct data 2nd query returns no data
difference(my_value) actually yields [10, 0, 0 ** 11 ** ]
400 (bad request), error: unable to parse ...error= "error111 connection ': unbalanced quotes" (note: pls.
note the single and double quotes in the reported error message) 2.
[second step] the same statement works without problems if the string between single quotes doesn 't contain a space, i.e.
proper microseconds syntax differs for writes, queries, setting the cli precision, and setting durations in the configuration file.
i got the http status 204 response, but no data is written.
if the measurement does not exists before the request, it is not created as expected
the query in step 4 returns no results.
influxdb does not start and the attach stack trace can be found in the logs
all points (>10000) are returned but `"partial":true` is set anyway
[what actually happened] phofcode note that the time of the first group is before our specified `where time >=`.
this results in influx having an incomplete group, and thus incorrect results.
the second query shows the really bad effects of this in that the derivative value is obscenely high.
this is causing problems in our graphs as first point destroys scale of graph, and all other points are just a flat line at bottom.
the time order seems to be inconsistent, hence the difference values are wrong phofcode
last value timestamp in cq generated retention is one hour before than actual last value timestamp: > select last(entsensorvalue) from name: telegraf time last ---- ---- 65 ``
[what actually happened] rows fail to render in results for tables and graphs show not values (nothing) for points in time past 3 hours.
[what actually happened] $ influx phofcode regards, claudi
[what actually happened] $ wget phofurl phofurl resolving dl.influxdata.com (dl.influxdata.com)... ... connecting to dl.influxdata.com connected.
http request sent, awaiting response... 404 not found error 404: not found.
the query in step two returns no results.
query errors with `err: unknown system source: _m1`
the request is denied with error _"authorization failed"_ although the http basic credentials which are unknown to influxdb should be ignored.
old shards are converted synchronously at startup
varying: sometimes, all data can be seen.
in other cases, the "since" - parameter was interpreted, but i was able to see all data of a specific shard, not just the data starting from the time, specified with "since".
influxdb starts compacting databases and panics with the following trace: phofcode
the results are not sorted if you need more data form me let me know
calculations are off by two orders of magnitude.
i actually have no idea.
i think right now it adds all query offsets and applies them to the innermost query.
i'm almost 100% certain that will produce the wrong behavior in most places.
the query timeout seems to be applied to the query for each measurement captured by the regex.
for example: phofcode a portion of the query succeeded, however it was killed when it reaches a measurement that takes longer than `0.01s` to complete.
the number of series differs depending on the interval size when compared to the complete queried time frame.
i guess the relation between interval size and queried time frame is important here, but i don 't know how exactly
[it appears that regex in field expressions triggers parsing regex in measurement expression]
it returns data that should not be in the subquery.
the system created the new rp and made it the default rp.
[what actually happened] > failed to execute operation: too many levels of symbolic links
i get different results depending on if i `group by *` or `group by color` in the main query.
when i `group by *` influxdb can 't find any tags to group by because all tags have been converted to fields in the subquery (i think).
but, when i `group by color`, influxdb applies that clause to both the subquery and the main query so end up with `color` being treated as a tag.
don 't love that tags get turned into fields but besides that, don 't find behavior described above to be consistent.
i 'm also just getting acquainted with subqueries so there could be an easy explanation for this
[what actually happened] i actually see no results.
i had to add an offset like `where time > now() - 2455w` to start seeing results.
is there an easy way to format or pad the time in some way
in my case, the first query responds in 200ms (over http).
the second query, however, responds in 13932ms with exactly the same result
deleted the entire /influxdb/data directory.
the drop database with no name was a bug in my code where a null name got through but the consequences are pretty bad since all the data files are gone.
the system worked ok for a couple days until influxdb was restarted of course.
errors about missing files started appearing only in the logs a few seconds after drop
slice out of bounds panic and process shutdown because of it
error about not expecting an insert statement.
the command works when influx cli is run interactively.
[what actually happened] err: error parsing query: mixing multiple selector functions with tags or fields is not supported
there is a "collectd parse error: unsupported packet" message in influxdb 's log.
what i actually get is: phofcode when i run the same thing without ordering by time descending (either with no ordering, or ordering ascending), then everything is fine.
**alternatively, i can set "and org= \'3 \'" and the result will also be fine.
[what actually happened] it returns data up until the 28th of the month, when current date is between 28 and 31 of the month
_err: partial success, node 4 may be down (error code 1: remove device or resource busy)_
(the usual `localhost refused to connect` from chrome)
[what actually happened] influxdb crashed during startup
if i set configuration via env variable only one graphite listeners is started (from configuration `influxdb_graphite_0`)
err: {"error":"unable to parse 'measure,purpose=test invalid number"}
[tsm1] error adding new tsm files from snapshot: fsync: invalid argument [tsm1] snapshot for path written in [tsm1] error writing snapshot: fsync: invalid argument this error is also referenced here: phofurl [tsm1] error replacing new tsm files: fsync: invalid argument - or this one adding new tsm files from snapshot: fsync: invalid argument also more often than not, the cacheloader and tsm1 will report errors trying to read non existing files, and get stuck since it will not continue past the non-existing files
influx is taking up all available disk space these files available at this gist phofhyperlink phofcode
[what actually happened] some points not inside that range gets deleted
the timestamp of turns to for the start time of the created shard
influx cli reported error: phofcode and `influxd` logs shows: phofcode
database is not imported, because the path seperator is wrong, i.e. "
[what actually happened] instead i get min = now() - 2h and max = now() - 1h
averages are only calculated for about 70 or 80% of series, rest isn 't handled at all.
[what actually happened] the string field is ignored in the results.
authorization failed error appears [me@localhost ~]$ influx -username me -password '' -database _internal -execute 'show measurements' password: name: measurements ------------------ name cluster cq database hh hh_processor httpd queryexecutor runtime shard subscriber tsm1_cache tsm1_engine tsm1_filestore tsm1_wal write [me@localhost ~]$ influx -username me -password '' -database _internal -execute 'show measurements' > ~/internal_measurements authorization failed ``
navigated to 404 page phofhyperlink seemingly due to package version issue screen shot at 8 19 31 am phofimage !
[screen shot at 8 23 35 am]( phofurl
error message stating "403 forbidden - could not connect to ..."
only the count of one measurement is returned.
on the console i get the following error: `error: failed to connect to phofurl the logfile contains the following entries: phofcode
1) a database of 300 mb consumes more than 15 gb of ram when using limit without where clause 2) all available memory is consumed when querying the last two minutes of data periodically and using last
[what actually happened] the query in step 2 returns nothing.
the query in step 3 also returns nothing - i'm guessing this has something to do with phofurl
[what actually happened] i can't really explain the results in step 2.
the expected behavior is observed on step 3. the expected behavior is not observed on step 5, influxdb container logs complain about an empty `q` parameter.
[what actually happened] but in 1.0.2: `{ "results": [ { "series": [ { "name": "xx", "tags": { "host": "host1" }, "columns": [ "time", "value" ], "values": [ "timexxxxxxxx", 24 ] ] } ] } ] }` as you can see, "host2" is not in result and alert will not be triggered for "host2".
when i included `slimit 1` in the query without `group by *` i got results for two series.
when i use the `dog` database and run `show tag values on pluto with key=tagtag`, i still see the value of `tagtag` that's specific to the `dog` database.
elapsed times are given in nanoseconds or other units, but marked as microseconds.
i have a parent component with the following template: phofcode and, inside i 've got the following code: phofcode in the parent component, i subscribe to a store and update the property `graphrecords` whenever a new value triggers subscription.
the problem is that when i 'm in a computer browser, this works perfectly, and will return `true`.
however, when i use app in mobile web browser, or compiled into native app (physical phone or emulator) this code will run outside `ngzone` and i 'm forced to use `ngzone.run()`.
this happens involuntarily and i haven 't found anything in docs related to this issue, so in my opinion, it is bug.
ionic/vue - the event of ioninfinite in ion-infinite-scroll is never called
in the documents, ion-item border color can be styled by setting phofcode css variable.
it works in case of debug android apk but when we run play store release apk, the border color shows as black instead of the custom color.
animations, transitions, navigation in safari (macos / ios) are not smooth at all, in fact they are very rough.
in chrome everything work as expected without do anything so it 's not a problem of my code because in chrome it just works.
it didn 't happened in ionic 3, and based on the tests i have been done it only happens with the `ios` mode with safari.
the `md` mode works as expected both browsers.
there is no data being passed through the componentprops using the popover controller
using routerlink on for example ioncard with does not unmount the origin component, thus not allowing clean up effect to take place.
when using routerdirection= "none" the page is not set as the root page.
while pressing the back button it goes back to the previous page.
i 'm using ionic react sidemenu app.
when you navigate to a tabs page and try to navigate back, it briefly show the child tab page before navigating back.
ionic throws warning "no ionpage was found to render.
make sure you wrap your page with an ionpage component."
out-of-the-box error : phofcode after adding an svg loader : bash referenceerror: window is not defined at object.<anonymous> (/home/
ion-back-button, when clicked, triggers ion-nav pop (as expected) and, simultaneously, triggers router navigation one step back, to previous route.
when doing a build with phofcode the generated `apk` is
view on ios: phofurl elements on ios: phofurl
with a set of absolute divs overlaid on top of a canvas, when a popover or alert is presented, then the absolute divs are being immediately hidden behind the canvas, even though the divs have a much higher z-index value (e.g.
1000 - 1001) than the underlying canvas (100).
when i use iontab _select_ method (iontab.select( 'tab)) to change from a tab to another the previous selected tab and the newly selected tab are both marked active.
i later tried this on higher android version(8) it worked perfectly fine
control `this.navctr.pop` by button; to go back to the page, if you click too fast it will be executed multiple times phofimage
selected options are truncated with ellipsis - no option to enforce selected options to be wrapped (i.e.
when used with bugsnag integration, `ion-select` (tested with multiple choice) using default `ion-alert` accepts only first change, no reaction for subsequent clicks on option checkboxes.
when i use ion-button with the combination of attributes expand with value full and fill with value outline it results in a button with the left and right border of width 0 due to this css lines that apply to the ion-button shadow element: ` .button-native { border-right-width: 0px; border-left-width: 0px; border-radius: 0px; } ` the button-outline class should also be excluded from this selection.
when using ion-select inside and ion-item, the ion-label (with floating attribute) is displayed on top of the selected value of the ion-select image phofimage
`getselected is not a function`
create a new ionic angular app.
for any of the component types created with or the typing is such that you cannot pass them a ref.
as an example, the following code: phofcode produces an error like this when compiled by typescript: phofcode
the docs for ionmodal phofhyperlink list four events it supports.
of these, the only one that 's actually available based on the types is `ondiddismiss`.
modal not working in nexus 5x [android < 8], example: android 5.1.1 the modal is invisible, but when i use ldplayer android 5.1.1 the apk works fine.
example apk hosted: phofurl important note: if you "choose" android 8 or later (in nexus 5x) the apk will works (example above appetize) example code: any code that contains "modal".
device tested: nexus 5x version android: 4.4 - 7.1
no changes to the html attributes for ion-select, shadow elements does not have the 'parts ' attribute and new variables image phofimage
phofcode can be invoked from phofcode when type attribute is not set or is set to 'overlay'.
when it is set to 'reveal' or 'push' the menu does not appear when phofcode is used.
furthermore, setting the ionic mode configuration to 'ios' also results in a non-functioning phofcode and .
switching between two pages causing alot of rerenders, which have negative impact on the performance for heavy projects, because of unnecessary work.
going from tab1 to tab3, is rendering a total of 10 times (6 times on tab1, 4 times on tab3).
this is potentially really expensive and might degrade the ux if you switch quickly between pages.
i think this was a problem before with angular but angular fixed it with the emitevent:false option, which is now not working in ionic.
i have a reactive form when i want to reset the form with reset even with {emitevent: false} option it emits an event and by that it run ionchange which is not correct behaver if the option emitevent:false.
the text of the button doesn't appear until i click it when it's inside in an `ion-slide`.
this happens only in ios, iphone or emulator.
in the md style, ion-select label & value are misaligned vertically.
when setting an `ion-input` 's value to a trimmed version of its previous value, the input does not recognize the value change.
therefore, there is no way to enforce input value trimming while typing inside an `ion-input` or after leaving an `ion-input`.
it is throwing validation error even though i am still on ion-select popup.
video link : phofurl screenshot: image phofimage
press enter(key) again and again picker will open and override existing picker with that it is creating bunch of picker.
<img src=" phofurl width="100%" height="350" />
by default it is selecting without adding color primary.
i want to load ionicons in alertcontroller
--background-focused custom css property of ion-fab-button is not working.
if you use an ionbackbutton, it won 't display unless you give it a default href.
but if you try to go back, it will always go to the default.
we can change height and width of a ion-toggle but toggle-inner does not adapt the respective height and width here is the styling that i am using: phofcode image phofimage
reordering an item down with ionreorder provides different "to" values based on how fast the item is dragged.
if you drag too quickly, the value is 1 higher than it should be, presumably because it hasn 't had time to fully "remove" the item from its original position.
i wish i had a more accurate reproduction scenario, but what 's happening is that in my app if i use the back button to move between pages and the page i am moving _to_ causes the loader to appear it will never go away.
really don 't think this is particular to the back button but rather to how loading states in my app interact with it.
in my app, can verify that loader is correctly rendered with isopen set false though.
when using a collapsible header on the leaving view in combination with an ion-back-button on the entering view which is not used at the default ios position (start slot) but e.g.
in the primary slot as a "done" button, it is animated, which looks a bit odd because it scales into position out of nowhere.
when using a collapsible header with a large title on a page that's not high enough to scroll only the ios overscroll functionality takes effect.
when the page is scrolled until the point where the opacity of main and scroll header is toggled scroll position is reset which causes a quit ugly and janky behavior.
when sliding the ion-range slider with the document zoom (css property) scaled to a value different to 1.0 (i.e.
0.4) the slider dosen't follow the finger
attempting to do: `<ionactionsheet ... classname="dark" />` throws a typescript error: phofcode
if the developer forgets to wrap the contents of a tab in `<ionpage>`, switching to the tab fails silently.
app is working fine but i am getting this error in console when i inspect the app in google chrome.
in www/index,html i can see cordova hash file added so it should not throw this error phofcode
setting the isopen attribute on an <iontoast> element to true shows the toast.
but once it is dismissed, setting the attribute to true again does not cause the toast element to reappear.
virtual scroll displays white colored vertical scroll bar on ios13 (on ios12 it works as expected - gray vertical scroll)
exceptions occur on android 5.1 as well as on android 6.0 since @ionic/core 4.6.0 android 5.1: "uncaught typeerror: undefined is not a function", source: (496) android 6.0: "uncaught typeerror: array.from is not a function", source: (496)
when i open ionic-4 web app on windows-10 platform having touchscreen laptops the ionic pages getting freeze, it is not allowing me to key in any input and choose anything from drop-down.
the side menu works fine.
not sure what is bothering here, is this issue with ionic-4 or windows-10 or am i missing something here..
the menu 's hamburger button becomes unusable (can 't open menu) until menu is re-opened with a swipe gesture.
i have a mobile app.
when you enter the application if you are not registered you are redirected to the login screen.
there i have the side menu disabled (so you can 't pull to the side and access what aren 't meant to access).
this only is _supposed_ to affect login screen.
however, after successfully logging into application side menu(burger menu) is still disabled and won 't allow any navigation/swiping finger from left right open up menu.
when i refresh application issue is resolved and works normally.
tag <ion-img> does show image from url only in browser, but not on a real device,
when you navigate from a tab page to another tab page and then go back with the ion-back-button, you will always end up at tab index 0 of the first tab page.
if i have several components wrapped in `withionlifecycle` hoc on one page, `ionviewdidenter` event gets fired only on the first component, but not others.
navigating to a page that has been loaded before breaks the app 100% of the time.
setting the `<ionlist lines>` property does nothing regardless of the value.
when running phofcode i got the following error phofcode and looking at network in chrome dev tools i saw phofcode
do we need to add something for root page in app-routing.module.ts or app.component.ts?
.hardware back button is not closing the application as it was in ionic3.
right now i am using this in my root page to exit the application.
phofcode how can i handle like we used to in ionic 3. suppose there is slidepage of walk-in which will be root page for new users, after that auth page will be root then tab will be page.
ionic 3, we used setroot to handle that we never used this kind of hax handle closing application.
please provide proper way handle hardware back button.
if you tap the current tab on the root page of the tab, the page transition
we 've had a few different problems with the loading indicator being dismissed.
the first is that if you synchronously set it to be open and then immediately set it to not be open, it won 't go away.
the second is related to switching browser tabs while it is being created.
if you switch tabs while your code is causing the overlay to come and go, you may find that when switching back the tab where displayed will still be showing.
the query parameters of a page are cleared after pushing another page.
this bug seems to be caused by `ionreactrouter` and it has the previous page re-rendered with no query parameters.
going from page a -> page b -> page c -> ion-back-button to page b causes the ion-back-button on b to disappear.
it will show a blank page at step 7.
on ios, if an action sheet is presented and you try to swipe the page up or down from exactly the sheet's visible area, the backgrounded content scrolls and doesn't respect the overlay backdrop.
<ion-radio> displayed not an icon on android, but on ios the icon is displayed.
so the user doesn 't know, the element on android is checked.
html canvas content is shown correct in develop mode (ionic serve).
after build --prod and deploy as pwa, html canvas content changes.
i have a multi-page application with one page having a search bar above ioncontent.
i basically reproduced example on this page of ionic docs: phofurl but probably because `iontoolbar` that is holding the searchbar is outside of `ioncontent`, it doesn't participate in the page transition like the rest of components do.
it just pops in when i navigate to the page with searchbar.
here's how it looks: bandicam phofimage
somehow `ionviewdidenter` event does not fire when the page first enters the screen.
to overcome this, i add `componentdidmount` with the same logic that i need for `ionviewdidenter`, to handle the first appearance of page.
all consecutive page appearances are handled just fine.
although this works, it seems like unnecessary duplication of code, and also counter-intuitive to what `ionviewdidenter` event is representing
populating an ion-select from a method that does an async call (for example api) to get all options does not work as expected.
i can properly set the actual form value, but the div.select-text is empty until i open the select.
in the moment select is opened, div.select-text is filled with expected value.
when you use ion-split-pane with ion-menu inside can 't click on elements and click on next layer instead ion-menu layer.
breaking change (ion-tabs) - @ionic/core is fetching tabs list using the 'ion-tab ' selector which does not exist in ionic/angular
on the app i 'm building i need to fetch a picture through a rest service which is returned to me as a base64 image that needs to be shown over an image tag inside an ion-avatar.
this works just fine on several devices, both android and ios.
despite this i 've noticed that on certain android device the image doesn 't work.
there 's a small frame of time where the image is shown but after that it disappears.
there 's no error on the console log when this happens
the `toastcontroller` gives the user the ability to customize the button that gets rendered.
one of these options is `cssclass`.
the user is unable to adjust the styling of this button through this css class as button rendered is inside of shadow-dom of `ion-toast` element.
user has an app with a series of ion-slides, each one containing an audio player.
the first slide shows a normal audio player with controls and a time bar.
subsequent slides do not have the time bar.
this is seen on multiple devices running ios 13 (works in ios 12 and android).
in ionic3 and ionic4, they work differently in svg gradient urls.
i use ion-router component in stenciljs.
here is ion-router config: phofcode i need to open /home page with query params (/home?p=1) navigation to /home?p=1 does not work.
i tried to navigate using ion-router-link component: `<ion-router-link href={"/home?p=1"}>home page</a>` and using ion-router component phofcode in both cases there is an error console: route not found.
a blank page is shown when pushing a page after popping a page by using `history.goback()` when routes are nested with `ionrouteroutlet`.
*it worked well with `ionbackbutton`, though.
using `setfocus()` is not setting focus on the input on my usb connected device in *ios 13.1.3*.
however it does work in the iphone simulator.
both in the native safari browser and in my app.
the simulator is using * 13.1 * not * 13.1.3 * .
following the ionic react documentation and staring with the tabs template.
first off it 's not entirely clear where i should place the ionmenu: phofurl i placed it as a sibling of a `<ionpage` for the examples tab1 page.
copy and pasting code from example, menu item does not appear.
custom sound doesn't work for v26+.
* plays the normal sound.
on ios 13 loading more entries with infinite scroll causes the page to jump to the top.
when you scroll down, new entries get loaded and added to the list and the page jumps to top.
the user has then scroll down all way again load even more entries and experience same jump top.
it only stops happening once end of infinite scroll data is reached and no more entries get added.
the tabs created through cli have not been changed when the android platform uses the ios style, a splash screen will appear on the return page
according to ionicons documentation, icons should be able to set up by providing `name` property.
some of icons shows up by using this technique, most of them does not work (they don 't show up)
if access page using `collapsible large titles`: <img width="376" alt="` 0 38 40" src=" phofurl if access another page(or tab), and move page using `collapsible large titles`: <img width="376" alt="` 0 38 30" src=" phofurl
when using the generated tab layouts, then setting the `slot` to top (to have the tabs at the top), any addition of a `ionheader` causes it to overlap tabs
after the fullscreen mode and use the platform backbutton instead of going back to main page the app will exit, and it only happen on api 28 and up..
when releasing the picker column while holding still it selects the next picker option.
when i select one of the items in the ion radio group, ion content scroll to down and i can 't scroll up.
kindly find the attached video for the reference.
pages can be hidden after navigating to them from clicking the tab bar.
when creating a modal screen and invoking it from a button enabled on the homepage, when i press on the home menu, instead of loading the homepage, the popuppage is loaded directly.
after back from child page and scroll any horizontal stack (div with overflow-x: scroll), ion-content jump to top.
the similar scrolltop() event i found after swipe child page quickly - from left to right.
possible to remove this scroll jump after back to parent page ?
`<ionslides>` does not slide correctly inside `<ionmodal>` phofurl
the "condense" header is only working on the first loaded tab.
ion-slides now behaves strangely when placed in modals after v4.11.0, touch events aren't correctly handled and scrolling is not working, as well as layout is stretched with incorrect dimensions calculation.
`ion-sliding-item` buttons can be triggered even when the item appears to be "closed".
additionally, when "closing" a sliding item, you can tap in the area where an `ion-item-option` was previously visible to trigger that option.
it seems that the buttons are enabled immediately as the slide transition * begins * .
these `ion-item-option` components should be disabled until slide open transition is 100% * completed * .
when navigating from a page with a list view to a detail view (which contains a footer) part of the list 's contents remain visible behind the footer.
they do not remain visible for very long--maybe half second--but it 's long enough to be noticeable.
we use `raf` in each iteration of a foreach which is kind of overkill.
investigate writetask usage here instead.
ionic animations will still create a timeout fallback for css animations even if `iterations = infinity`.
there is no need to do this as the animation will never end.
`history.push` does not change pages.
i believe `<ionrouteroutlet>` is not working, because the kitchen sink react ionic demo works with previous versions of ionic, but upgrading to the latest version breaks it.
whenever typing an input in ion-textarea on edge or windows cordova, for the first time it types in reverse.
when the input is erased and typed again, it works as expected
the app is crashing in ios 13 when a youtube video is played.
it was working fine in ios 12 or earlier versions.
i notice with the release of ios 13, the rate at which you can trigger `(click)` events is reduced.
for instance, setup a simple click handler: phofcode phofcode just run it, and try tapping the `<div>`.
can 't launch app i get a pop up saying phofcode ` the application launches shortly after the popup shows up.
like there is some massive delay somewhere.
what 's strange is that this happened out of no where, there hasn 't been any changes to the app that would merit this.
on some android devices (as far as we tested it seems to be a problem of android 6, with android 5 and above 6 there 's no such problem, didn 't test on ios yet) when selecting an ion-segment-button within an ion-segment such as: phofcode controlling an ion-content with segments managed with *ngif statements such as: phofcode there 's a severe lag of some seconds before the variable 'activesegment ' updates its value.
on the ui the tapped segment gets highlighted immediately but it takes a very long time before the actual content associated with selected segment is displayed.
we couldn 't find a valid explanation for that because on many devices it works just fine (content is updated as soon as segment is selected) but on others (running android 6, no matter which webview version they are running) we experienced such problem.
as far as we can see this has nothing to do our app (memory leaks, heavy components or so on) because we experienced lag on much more powerful devices than those which didn 't experience it and other ui components run just fine (and fast) any device well
since version 4.9 scrollassist stoppend working for my input fields on ios.
on version 4.8.1 everything is fine.
tested on both ios 12 and 13, device and emulator.
having iontabbutton component and not passing an `href` prop, it 's always returning undefined.
this makes the page reload even if an onclick is passed.
on documentation it says that href can be `string | undefined`.
ion-checkbox is blank only appear if checked (only in tablet ) android version 6.0.1 sm-t705m 800 x 1280 phofimage
when clicking on a `ion-router-link` whose `href` attribute contains a hash (e.g.
`/catalog#pens`) the app doesn 't navigate to the `/catalog` url, and an error is printed to the console : image phofimage
i have problem related to the router and the hardware/browser back button in a ionic-stencil app.
the bug is also reproducible in your sample stencil conference app.
1. clone and run (ionic stencil conference app)[ phofurl 2. scroll schedule list click on one item 3. click the browser back button 4. back transition to the list (to same list position) 5. click one item another time 6. click browser back button 7.
i have an ion-list with sliding items in it and crate these with a for loop.
you can click on the item itself and the router navigates to another page.
when you slide an item, a button is revealed.
and this button needs to be clicked twice (at 90% of the time) to fire.
having `ionrange` component and it 's prop `disabled` to which i pass variable that can be `type boolean | undefined`, -> when the variable is equal to `false` ionrange is
ios: `ion-alert` is partially hidden by the keyboard.
when an input field within a slide is focused, text can be entered but no cursor is visible.
when navigation back, the previous page briefly flashes over the destination page after animation ended.
after updating to all my text inputs and textareas now render `undefined` as text, when their value is undefined.
`ionsearchbar` has the same issue.
when deploy my ionic 4 app on the browser to be used as a normal website, on mobile the browser can 't recognize the scroll of the content.
seems like page is not scrolling, so for example on ios navigation footer and status bar of safari are not hidden.
also, pinch to zoom doest work
site showing error "cannot get /" and in the console i can see: phofcode
collapsing large title does not show smaller title when used with a split pane app
the code executed in response to platform pause and resume subject emitting is not executed in the angular zone.
this causes angular not to pick up any changes made.
so if the code updates something that is for example shown on a page it will not be updated until something else causes the change detection to pick it up.
we are building a component library with stencil and we are using ionic components within this component library.
when we integrate our components into an ionic/vue app, the styles for our custom components will get wiped out by ionic component styles (firefox/safari only).
it looks like the back button does not show up in some cases when it should.
this happens if one page gets opened a second time.
possibly pages get initialized without 'can-go-back ' and this does not get updated.
some component properties (settings) need to be given as constants and can not be given as variables.
as far as my investigation goes, this happens only on an ios device, not in the web or on android.
add the disabled attribute to a ion-radio-group, and some child ion-radio components
running a new sidemenu app on android 5.1 starts ok, but clicking generates errors: - uncaught typeerror: undefined is not a function in - uncaugh typeerror: undefined is not a function in ion-menu 4-md.entry.js:147 the latter occurs on each click.
the first input has no underline <img width="50%" alt="captura de tela as 17 25 40" src=" phofurl
when i click the "next" button on the keyboard, the focus goes to the next "ion-input" field, even though i previously had an "ion-select" field.
add an `ion-buttons` next to an `ion-searchbar` component within a toolbar.
on ios they no longer align in v4.10.0.
unless there is a different way to align buttons next to a ion-searchbar that i am unaware of i believe this is a bug?
when you open ion-menu and navigate to a page and then go back the menu is no longer visible but if you click anywhere on the screen it then reappears and closes immediately.
this only occurs on ios.
deprecation warning for css attributes generates false positive when using: `<ion-textarea
navigating to different routes using ion-router-link does not unload the previous component as route updates.
if i load the routes backwards it changes.
i've uploaded a video demonstrating the issue on google drive phofhyperlink .
open popup with a header or footer.
<ion-content> does not scroll with mousewheel on chrome.
in 4.10.0-rc.3 the emitted event types were changed.
however, the ionpopover prop 'event' is still typed as 'event', making it incompatible with any emitted event from ionic components (missing properties from event).
when i want to set initialslide, but it 's still shows default value first, then change to value that i set
when assigning a variable to position the tab bar to top or bottom, the tab bar does not position correctly
on ios, when there 's menu and the large title is still visible, you can see the menu content when the menu is closed for a moment.
when placing an `ion-content` as a direct child of `ion-menu` on ios, the content area is pushed up into the statusbar area.
the property `mode` is not working for the ion-segment html tag.
it somehow edits only the color instead of the layout.
setting mode="ios" does not show the ios segment in a browser.
setting mode="android" does not show android segment on an ios device.
scrollassist don't work at page moved by navigateforward.
( worked in root page ) this is movie.
when using ion-slides, the shadow transition effect (ios only, added in #18661) of the slide with index `i+1` covers the slide with index `i`.
this is because the transition-effect has a css of `left: -100%` phofurl
the whole component that contains `<ion-tab>` gets displayed as a white space.
when the `<ion-tab>` are commented out the component renders fine.
a progress bar (ion-progress-bar) stops moving (indeterminate) when navigating to another page and going back to the previous page (the one with the progress bar).
this happens only on android - it works on android and in the web.
if you tap twice on a tab in a tabbar and then open a new page from within this tabpage (like from a list or from button) the opened page has no back button.
this behavior can be seen even when you open page twice from side-menu.
see previous issue that was closed: phofurl i 'm trying to use `ion-reorder-group`.
previously i was iterating with `ion-item-sliding` for my child elements and everything worked fine.
i refactored my code so that the `ion-item-sliding` and all descendant nodes are part of a new component `cg-layer-select-item`.
when i click and drag the `ion-reorder` component, i do not see my custom element "lift" itself out of the collection and begin the reordering process.
if drag my finger * try * to move item anyway, it tends to end up at end of `ion-reorder-group`, with reorder event `detail` looking like ` { from: 1, to: 10 } ` where `10` is last slot in group.
only build is happening, no archive process
the type of the `ion-range` value is always `rangevalue` (`{ lower: number; upper: number; }`).
the screenshot is from the built file in www/common-es2015... image phofimage phofurl
i 'm using ion-datetime with pickeroptions.
i want to add custom 'cancel ' button, but when i select 'cancel ', the ion-datetime doesn 't display the original value.
params don 't propagate to child routes in `ion-route`: phofcode
using a @prop in an component with name `mode` results in the property having a `nan` or `"md"` value.
in case of setting it to a numeric value it results in `nan` and in case of a string it 's `"md"`.
with the dev build it 's working fine and once i change the variable name to something else it 's also working with the production build.
as i am using ionic v4 for web and mobile platforms, so it suppose to handle it for desktop browser and mobile web view.
i am using platform phofhyperlink to detect the list of platform.
based on list of platform app having different behavior.
but ionic platform does not detect the difference between device like ( 'ipad ' || 'ios ' || 'iphone ' || 'android ' || 'tablet ') and browser in device and producing same behavior for both.
for desktop browser, list of platform are (4)["tablet", screenshot at 12 44 59 pm phofimage
when using ion-slides within a modal (created with modalcontroller), there is an issue with vertical scrolling.
if user scrolls and then pauses for a moment, when trying to resume scrolling the screen freezes for several moments and does not allow scrolling.
this is happening on ios, not on browser.
ionic does not support android 10
the toast bar is appearing without text and i see an error in the console - referenceerror: documentfragmentchildren is not defined
the application reads a barcode from an external device.
the barcode code is correctly displayed on the screen but the form is not bound.
the same binnding problem occurs even if an array is modified and displayed in an ion-list.
the problem only occurs on a hardware device (blackview 5500) while everything works correctly from google chrome.
i have the following scenario in which i have a tab module as child of a side menu module.
this is because i hae certain modules where i want to display a tab bar and the side menu should be displayed everywhere.
also need the tab bar shown on some pages that are not shown on the tab bar as button.
: bar has button for page 1, 2 and 3 but there is also a page 4 which is child in order to show bar.
the image here provides diagram of situation phofhyperlink .
when page 4 is selected in side menu page changes but no transition animation played.
also change not correctly picked up by router history stack because ion-back-button does not appear on 4. only when hardcoded 'defaulthref ' set will button appear and will always navigate to value of defaulthref not actual previous page.
when using `<ion-slides>` within an angular project, sometimes slide contents will not be rendered.
especially when they are composed out of more complex components and changing changing based on bound variables.
the component will not render itself until a touch event happens.
changes go undetected by angular and there are also no events (mutation observer) fired by the swiper api (if observers and observers for children are enabled).
once i manually trigger a touch event, the components within `<ion-slide>` elements will properly render.
i have a customer who has a primarily tabs based app.
however one of the pages also has a side menu with some other stuff.
i have created a sample that shows the issue where tab1 and tab3 are "normal" and tab2 has side menu with the `contentid` set to the `ion-content` of tab2 page.
if tab2 page has been visited and user goes to either tab1 or tab3 and swipes from left menu does not open (good, it should not), but when you then go to tab2 menu is open.
somehow swipe on tab1 or tab3 opened on tab2...
i scaffolded the side menu template project with ionic cli, installed capacitor and run the app in a real device (iphone 8 plus).
the side menu transition works if i tap on the menu icon on the top left.
but if i tried to swipe from left to right, transition doesn 't work, which makes it difficult to know when menu is activated or not.
sometimes side is invisible even i swipe from left to right, so frustrating.
the os version is 11.4.1. see video recording below: phofurl
with the more recent releases of ionic, ion datetime now always converts the date to the system's timezone.
this is not backwards compatible with previous behavior and there is no option for configurability.
css variables are applied on all browsers on windows with the exception of ie 11.
when assembling routes, if multiple routes match the url, they are all rendered to the page simultaneously.
virtual scroll style height become 0 after full screen mode video 1. load a list using virtual scroll 2. click item in a list direct to a page with a video and click full screen and the parent page virtual scroll style height will change to 0 3. exit fullscreen video 4. back into parent page and virtual scroll height still 0
ionic menu has no backdrop when opened on ios since version 4.9.0
this bug appears only on android.
when you have focused on an input field (e.g.
`ion-input`) and the keyboard is open, if an alert is presented (or other presentables) the keyboard closes, but the window/app content does not resize, leaving a big blank space under the content.
this also affects `ion-virtual-scroll` element on previous page if alert pops up through a router angular guard when clicking back button (let 's say a "discard changes alert" scenario).
when adding ion-image inside virtual scroll and scrolling it is showing old image for some time until the new image is loaded.
` 10 13 08 phofimage ` 10 13 17 phofimage
when a modal is closed via the parent, the content of the modal is removed but the modal stays on page as a white screen overlaying everything.
trying to open the side menu by swiping throws an error and the apps becomes unresponsive, so does clicking on the backdrop once it's open.
phofcode this error only happens on my phone, not on desktop.
mainly on android (cordova and web) first create a classic `ion-alert` with input text inside and open it.
phofcode phofimage > you can see that the `ion-app` has a height of 568px when you focus the input, the keyboard appear, but the `ion-app` is not resize, so you can not see what you write.
phofimage >the `ion-app` has always a height of 568px
when scrolling within a modal page, the view of the page beneath will also scroll
`ionbuttons` created with `type="submit"` do not submit the forms when a user presses the "enter" key in an input field.
you can see that the generated shadow dom input does not contain the `type="submit"` attribute.
<img width="471" alt="ionbutton submit" src=" phofurl
the `ionlabel` component does not accept the `htmlfor` property in react apps.
lack of support for this property prevents the user from clicking on a label to focus an input field.
this is a significant accessibility deficiency.
angular has options to enable anchor handling using the following router config: phofcode these options do not work when ionic is used.
gif: phofurl when trying to use the ionfab 's / ionfablist 's activated property as a condition to any element on the template it doesn 't update as expected.
the property actually updates to true/false but the template acts strangely.
i have an html video player in my app, `<video controls> <source [src]="videourl" type="video/mp4"> </video>` which loads video from device gallery and show in screen.
video controls have option to open video in full screen.
when the video is in full screen, the app closes instead of go back on click on device hardware back button.
when `ion-refresher` is used to slow down, the distance of 10px or so bounces back to the top, before it is normal to continue
it does not dismiss with setshowloading(false) after http fetch.
it only work when wrapping inside a timeout :(
changing the back-button icon to a different icon than the default `arrow-back`, makes the searchbar back icon inconsistent in design with the rest of app, since it uses a hard coded value of `md-arrow-back`.
you can set button in each searchbar explicitly as a workaround, but i think it makes sense for searchbar back to follow rest of app design (i might be wrong)
if we try to use ion-select with interface="popover" the performance is very slow.
however when we use other interface type such as default one the performance is better for the same set of data.
in our ionic/angular application we are seeing a quite strange behavior and are not able to solve it.
when we navigate in our app to e.g.
this route: ` phofurl and wether if we route in our html like or in the component over { relativeto: this.route});` then it adds 'add-report ' to the route, so the route looks like this: ` phofurl but the component is not loaded and not displayed.
when rendering more than 500 entries on a ion-item-group, the app presents heavy performance and rendering issues on the items ' rendering and transitions to other pages.
this problems are present only on web/android.
the ios navigation animation does not behave as expected when clicking an `<ion-back-button>` on a tab page.
imagine an application that has a side menu at startup (or nothing), then navigates to a new page that contains several tabs.
the navigation animation (slide left) to this tab page is working as expected, but when navigating back to the first page, there is no animation (slide right) on ios.
instead, the page seems to be freezing for a second and then simply drops back without animation.
if ion-select-options are passed with a delay, the selected property is not respected.
if you get the options via http request.
if an <ion-range> is dragged down in <ion-list>, it is possible to slide range item, but not possible to slide any of the range items it passed.
if the item is initially dragged up in the list, sliding of that range item is no longer possible.
screen recording at 09 41 01 mov phofimage
cannot use the google autocomplete places with <ion-input>.
it gives the error as [invalidvalueerror: not an instance of htmlinputelement] when used <ion-input>.
i have a simple app that displays an ion-fab with the horizontal property set to "start" and the overall app set to rtl (dir="rtl" in app.component.html).
on android devices and in chrome the ion-fab appears on the right hand side of screen which i believe is correct behavior.
on ios devices, it appears on left.
when a fixed element in present on a page and you change the phone orientation, the layout shown is the one in the other orientation.
so: landscape shows portrait and portrait shows landscape.
in a release build, the compiled code references a non-existent name for a (click) handler.
imagine most house hunting applications.
you have a map in the background, when you select a marker, a slide appears that shows detailed information.
i am using sliders for this purpose.
if you touch the map a variable is changed that causes css to change and make the slides move down.
sadly the variable changes but css does not change.
if i then try to swip to another slide, css changes (like another change needed to happen for css take effect).
this works on ionic cordova run web but not my android (old and running lollipop which is still ~9% of user base).
this also happens with marker click listeners that involve changing sliders css.
a note on this is that all map stuff is working, its just slider css.
the strangest thing i can change "on" map.on listener be just be "one", map.once and it works.
sadly my working code for this just reattaching listeners every time listener used.. which i imagine awful lol i am guessing this has do with changing it from subscribe then.
last thing i wanted add, exact code works if i change using agm where dont need use listeners like this.
when using `ion-searchbar`, `ion-tab-bar` moves to the middle of the screen when the keyboard is opened and doesn 't return to the bottom, when keyboard is closed.
when an input field selected and ion-select selected key leaves an overlay, a white background is shown after the keyboard closes.
the recorded video link is below: phofurl image: phofurl
when the page is rendered for the first time, everything is ok. but, when the keyboard is toggled (opened and then closed), the layout gets completely broken.
seems like `ion-content` element starts to fill entire page (including space that was reserved for `ion-tabs`).
image phofimage no button display on the screen
install an application on android 4.4.4 and several console errors appear, i don 't know if one of them causes me to not display the button css correctly
app freeze when we try to open popover twice
i have session timeout functionality in my app so after x minute or second if the app is idle, the user will be logged out from the app and redirected to the login page.
when session is expired while app is in background, then all text/labels are showing blank on-screen until user tap on screen.
<br>this is how it looks before-tap phofimage <br>this after a tap on screen after tap phofimage
touch events respond less effectively on ios 13.1, immediately after finishing scrolling, something that did not happen with previous versions of ios.
the user must wait between 0.5-1 seconds after scrolling for a touch event to emit.
when i upgrade to `@ionic/core`
router navigation with the swipe back gesture is broken on ios.
when swiping back, there will be no transition - once the gesture ends, the screen will flash and rebuild - finally the previous page will appear - or navigation will just skip n number of sites!
this may also be related to #18455
segment button is not checked initially when attribute "checked" is set
on the latest version of ionic v4.9.0, create a modal with the config option `animated: false`.
the modal will not display on ios safari / wkwebview / capacitor, but will in other browsers.
on google chrome my ionic app no longer resizes when the window size changes.
it only does this when there is an element with position:fixed on the same page.
i have no idea why it all of the sudden started doing this.
i have a left side menu(menu 1).
when i click on one of the buttons in the menu, it brings me to another page with a different menu (menu 2).
i can navigate in this menu (menu 2)(what it suppose to do.)
in this menu, i 'm having a 'back ' button to return to the last page (which contains menu 1).
when i click on this button, we back the page of menu 1,
since @ionic/angular 4.9.0 end up in an infinite loop when reused (e.g.
navigating to the same page a second time).
the ripple effect does not work on ion-item with click-event.
please see the demo below in
ion menu with slot="end" does not close as expected on ios but does close when using web or android.
on android, if a user sets the font size to a fairly large size the display of the values in the datetime picker changes to ellipses.
an ion-virtual-scroll existing on a cached route doesn't react to screen resizes and it collapses when navigating back to its page.
long pressing ion-tab-button set the button color to active but doesn 't navigate once released.
the tab before the long press is still opened and also have the active color, that means there are two tabs with active color..
animating a root navigation in the back-direction, does not work.
when a modal is opened from a menu inside ionsplitpane, the ionsplitpane component breaks if you manipulate the window size.
essentially the content in the left pane seems to be offset by width of menu.
difficult to explain, so see stackblitz below.
when i navigate from page to page, for example: home page (root) -> details page -> account page and i click the back button 2 times, it will return like this: account page -> details -> home (root) that works fine, but if i do the above multiple times and i click the back button when i 'm on the home page, it will repeat whole route history again!
this only happens while using hardware back-button.
it does not dismiss with setshowloading(false) after http fetch.
it only work when wrapping inside a timeout :(
when setting a position absolute to the `ion-spinner` won 't hold in place as it used to but is now moving slowly to the right.
if you define a gesture (such as press or tap) on an item within virtual scroll, scrolling stops working on touch devices.
it still works on devices with a scroll wheel.
navigating between pages leaks dom nodes.
`ionitems` that have `href` properties are supposed to automatically route to that `href`.
for "internal" links, this is behaving properly.
however, "external" links do not open.
instead, they just pollute the url with the external link
i 'm seeing very inconsistent behavior displaying ionic web components that are pulled down with the <script> and <link> tags.
sometimes the components will display as expected.
refresh the browser and sometimes they won 't show up at all.
some background, i 'm using a web service written in go.
that service has a template file that pulls in components (custom and other 3rd party components as well) and lays them down inside a css grid.
when the picker is opened the individual column items all stack on top of each other.
navigation animations do not load correctly, ie: modals don't render and some navigations have choppy or non-existent animations.
ion-segment (ionchange) trigger is not consistent when opening multiple pages containing ion-segment.
imagine 2 tab pages, named tab2 and tab3 for convenience, both with ion-segment.
if you open the first one tab2 the ionchange of the ion-segment is not triggered (as expected), if you afterwards (without restarting the app) open tab3 page its ionchange is fired (unexpected).
restarting app and opening first tab3 will not fire ionchange of ion-segment, afterwards opening tab2 will fire ionchange which is unexpected.
while toggling between ``icon-only`` and ``start`` slot of an ``ion-button`` in runtime, element classes won 't change to represent to the current state of the button.
when using an `<ion-input>` of type "date" or "time" inside an `<ion-content>` i cannot edit it on an ipad pro.
it works fine on other apple devices like iphones.
when inspecting it with safari i can see that there briefly is a second input tag and also a style "pointer-events:none;" on the `<ion-input>` in the dom on an ipad pro and not iphones.
the color property of `ion-card` only affects the text color.
phofcode results to: image phofimage
ionic textarea with autogrow, scrolls to top on input, when user 's input excedes screen height.
we are using < ion - select > and < ion - select - option > as
on <ion-input> click keyboard overlays the input.
behavior is different on android and ios.
it is working fine on portrait mode but broken on landscape.
bug_desc phofimage i tried also 'keyboarddidshow ' of plugin spec="2.1.3".
when using the gesture right slide back to half, then swiping left to return to the current page will report an error:
ion-fab[edge] is display half when pop in ios.
the clear button color remains gray
if you changed the hour up one and the current time is say 9am, the am/pm switch automatically switches to pm, so the result is 10pm.
likewise, if you change hour one down and current time is in pm, am/pm switch goes to am.
ios only, after update to ionic 4.8, page will flash when navigate back.
btw, i use md mode to navigate.
degrade to 4.7.4, it works well.
the background for the ion-toggle does not pick up the --background color variable on ios (via ionic lab).
this value is properly applied for android.
when trying to use one of my stencil web component 'jeep-colorpicker ' in ionic/react i got this error at compilation time phofcode
when transitioning between pages using ionreactrouter, there is no transition animation.
when starting a pull to refresh on ios, the content makes a little "jump" before the refresher is activated [see video: phofurl
unhandled promise rejection: c "htmlelement is not a constructor (evaluating 'new animationc() \')" c "; zone:" c "<root>" c "; task:" "promise.then" "; value:"
title in toolbar is blurred during page transition.
topic: `ion-slides` if you display multiple `ion-slide` at the same time using the setting `slidesperview: 3,` the method phofcode does not activate / execute the `slideto`
after updating `@ionic/react` to latest version, all page transition animations are missing, and pages change instantly with a noticeable flicker.
the issues also occurs when creating a fresh app with `sidemenu` template.
changing `animated` prop on `ionrouteroutlet` or setting it with `setupconfig()` doesn't change anything.
after updating to latest version of @ionic/core and @ionic/react, `ionfooter` on all of my pages got pushed down by `ioncontent`, which doesn't account for footer below it.
the issue is present on both ios and md styles, desktop and mobile.
adding `display: flex; flex-direction: column` to `<ionrouteroutlet>` component fixes this.
on the left: current behavior.
on the right: expected behavior.
k12 admin phofimage video for issue description: phofurl phofhyperlink
when i first open the app the card has the correct background color and the svg image is visible.
when i go to list page and go back to home page, card has wrong background and svg is not displayed.
(check out video) after going back to home page, if open and close menu 3 times card svg are displayed correctly.
phofurl edit: i also tried conference starter this is a video with problem phofurl the problem appears in speakers tab where we have cards.
also going back to schedule tab, fab button has bad background as well.
the modal frame element (`<ion-modal>` in the root of the app) is not dismissed if the `ionmodal` react component is not present in the component tree anymore due to navigation or just rerender.
when running `ionic serve --lab` cli doesn 't respect `--lab` argument but does respect any other (tested with `--port`).
i 'm having scss file imported to the `app.tsx` that produce warnings (because if scss files that i imported into it).
no message about lab is displayed.
phofcode by removing this import lab start to work.
as `toastcontroller` doesn't seem to be working in react package yet, i had to implement a simple module to display all of my notifications from one place.
i simply map my global `notifications` with `iontoast` component.
i expected the toasts to render in one container, but they're actually render a separate overlay for each one.
moreover, if i wrap them in any container, they get ejected out of it and up into `ionapp` component.
iontoast also ignores `style` prop, so can't style it's position dinamically.
passing false to ion-reorder-group 's complete doesn 't reset the position of the dragged ion-reorder component.
when i use the loadingcontroller in my project, i see the following error: "unresolved function or method present()"
when using ion-nav-push the animation lags on ios devices only!
this was used using stenciljs app framework.
the react wrappers are not passing extra props along.
i found out because the `ionlabel` component doesn 't work with the `text-wrap` attribute.
it 's supposed to, at least according to the docs phofhyperlink phofcode i have been able to narrow this down to this line phofhyperlink for anyone else with the same issue, i 've been able to work around it by using raw custom-element.
the popover is vertically off screen, because it has the wrong top position.
when trying to use `isplatform` i get an error saying that ` 'isplatform' is not exported from '@ionic/react`.
i read in the docs at phofurl that the function is should be available.
parent component styles are not incorporated into web components correctly.
image phofimage here only 3 styles have been added.
ion-toolbar component inside router-outlet overlaps with iphone x status bar
the main readme.md file ( phofurl has a link to the readme files of all major frameworks.
the readme file for react ( phofurl does not exist and returns a 404.
here 's a stackblitz that has the react release candidate and there are no view transitions when you click the login button: phofurl
'class ' is a valid prop on ionic/react components, but seems to do nothing.
i 'm not sure if this is intentional, but if it is, the prop should be removed so it 's clear.
i want to lock specific screen in landscape orientation, and others screen to be allowed in both orientation.
if i lock orientation to landscape and device is in portrait, and when this screen loads, it remains in the left half of the device screen half-screen phofimage
scrolling doesn 't work, only the first "page" is displayed: 25 elements
app crashing after try open the device camera
ionimg (used together with ionvirtualscroll) does not work with src values that have been sanitized using `safeurl = it throws and error like must use [property]=binding: (see phofurl phofcode this probably happens because `ionimg` outputs img.src without using `[src]=binding`.
alertcontroller is not allowing different types of inputs at the same time.
android only: in situations where the keyboard is dismissed, and a loading controller is displayed, the page does not resize until the loading controller is dismissed.
ion-slides starts at index 0 then swaps to initialslide slide
when scrolling in a mobile device's browser, the address bar and bottom tab bar remain visible.
this is because we are scrolling the `ion-content` and not the `body`.
i 'm creating a new app using the blank template.
i add the android platform via `ionic cordova platform add android` and finally run the app via `ionic cordova run android` the app compiles and installs fine, however will be stuck with a white screen after the splash screen.
when i call in appcomponentndroid studio prompt native: tried calling splashscreen.hide, but the splashscreen plugin is not installed.
"install the splashscreen plugin: 'ionic cordova plugin add then i install but still the same waring
most icons throughout the project will not display.
only search and back-arrow appear to be working.
when i slide the ion-rage, the visibility of the elements ion-icon and ion-row change to 'visibility none ' and disappear from screen.
it only happens in ios,
`ionic cordova build --release --prod ` gets an apk that will be rejected from google.
`the following apks or app bundles are available to 64-bit devices, but they only have 32-bit native code: 10101.` before today the 64bit check was just a warning, but today it turns into a error.
so apk cannot be published.
i have tried using the latest cordova-android git repo code, to build a bundle, but it didn 't work.
i have tried like, phofcode but the aab file cannot pass google play check for 64 bit either.
the floating action button is mostly hidden below the screen edge.
viewport doesn't get resized on closing & opening of keyboard.
this causes issues focusing on input fields & button as it hides behind the keyboard.
the issue came ever since the new update of chrome/webview 76.x screenshot below current phofimage
an `<ionloading isopen={true} />` that gets its `isopen` attribute switched to `false` dismisses correctly on the browser (google chrome) as well as in ios (tested with ionic devapp) but does not dismiss (still visible) on android with ionic devapp.
strangely, it works well on android when using samsung browser or google chrome for android.
iphone x/xs....: the footer inside of a toolbar has following line css: `padding-bottom: sadly this padding is applied even there is a tab-bar under footer.
in my example the calculated padding-bottom equals 34px.
example image: bildschirmfoto um 15 01 26 phofimage
angular cdk drag & drop doesn't work with latest ionic 4 (angular core 8.2.0)
ios 13 ipad runs md/android/desktop ui elements
on android 5, 5.1 and 6 (api 21, 22 and 23) the application doesn 't start.
it only displays a blank screen after the splashscreen.
console output : bug1 phofimage main.js (line 694) : bug2 phofimage bug3 phofimage
on ios when opening a modal it works fine, closing the modal with modalctrl.dismiss closes the modal as expected.
however after that no other modal panel will open untill the app is restarted.
page navigation still work fine.
on android the same happens when using a actionsheet
electron is not recognized as a platform in my ionic v4 app inside electron.
an app using `ionicvuerouter` will correctly follow android transitions, but will ignore ios transitions.
navigating in ios sometimes leaves a "ghost" of the previous page 's components as they are kept around for the transition animation that never happens.
if you use the slides component with `scrollbar="true"` and `options="{scrollbar: {...} }"`, a scrollbar element appears but is non-functional.
building my webpage normally with `ng build` and have a strict csp installed.
now every time i refresh the web page there is a different sha value the browser want 's to see added to the csp policy: screenshot at 19 06 33 phofimage here are some values that the browser already requested: phofcode could someone shed some light why there is a new sha value with every page refresh?
getting warnings in ide because "icon" is not a known property.
please see: mentioned in the docs: phofurl
i use my app, the url now reflects my current page.
i refresh or load that full url: - the dev "ionic serve" works properly - the prod and release builds can 't start
sample app from phofurl does work fine on desktop.
when i deploy it and open it on an ios device (iphone 7, ios 12.4), it just shows a blank white screen.
unfortunately, can't debug, since i don't have a mac.
on safari or ios - i've got a spinner on page 1 - i navigate to page 2 with the `routerlink` attribute or using the `navcontroller` - on page 2, i go back to page 1, the spinner isn't animated anymore
apologies, this is quite hard to describe.
we've made a slow motion video of the bug: phofurl 9 to 11 seconds in you can see the effect this is causing.
the scroll isn't very smooth when it gets towards the end of the content.
this happened after chrome updated to version 76.x image phofimage
changing tab while the virtual scroll is still scrolling will hide all the items when we go back to the previous tab.
watch this to better understand the bug: screen recording at 16 50 34 phofimage this seems to be same issue as phofurl but on ionic 4
if i touch an ion-range while doing a vertical swipe (.e.g.
to scroll down the page), the knob of the ion-range changes position
when sliding an `<ion-item>` within `<ion-item-sliding>`, all of the items slide a bit when i 'm only sliding a single element.
app attempts to boot and quits during boot with exception phofcode ion-router-outlet isn't offering any advisory action within the runtime does order matter when loading modules and structuring the router if so where is this documented
after opening an external link (target="_blank") in my ionic pwa on my ipad (safari), and subsequently closing the resulting new tab, i can 't click on any buttons/links in my pwa to activate them; i have to click * below * the buttons/links to activate them.
to restore the expected behavior, i have several possibilites: (1) opening the tab overview and selecting tab with pwa again, (2) zooming in and out, (3) reloading page.
this behavior shows only if my pwa is only open tab - if there are two tabs open, everything works as expected.
if you create and run a new project and inspect the code with the developer tool console on chrome, you will see this error: phofcode
appflow deploy manual updater will work on most wifi networks, however some 2g wifi networks the appflow will pend an update and never follow through.
we 've launched our software across 100 tablets and know its wifi network based.
when using a ion-label with position="stacked" the text on the label gets "blurry" like it 's an image.
if i type in a `ion-textarea` on windows (cordova) a text, the input is displayed and saved reversed.
this means if itype in `this is a test` the output is `tset a si siht`.
i tried to force the direction with css to `ltr` but this has no effect.
this bug only appears on windows.
when using ion-slides on android (simulator and device) only the first slide is displayed and no pager is shown.
if you lock and wake the device, its behaving correctly.
application was running correctly with ionic 4.6.
* and is not compiling anymore after upgrading to ionic 4.7.1. the upgrade went well without a problem.
see phofurl | | const aniroot = baseel.shadowroot || overlay.el; const animation = await => aniroot, opts)); | overlay.animation = animation; | if (!overlay.animated || true)) { 65:11 module parse failed: unexpected token (65:11) you may need an appropriate loader to handle this file type, currently no loaders are configured process this file.
see phofurl return module[exportname]; } return import( /* webpackinclude: / .entry .js$/ */ /* webpackexclude: */ 7:18 module parse failed: unexpected token (7:18) you may need an appropriate loader handle file type, currently no loaders are configured process file.
see phofurl if (!win.customelements || (win.element && || { } 8:40 module parse failed: unexpected token (8:40) file was processed with these loaders: * you may need an additional loader handle result of these loaders.
const routes = [ { path: ' ', redirectto: 'login ', pathmatch: 'full ' }, { path: 'home ', loadchildren: () => => m.homepagemodule) }, path: 'login ', loadchildren: () => m.loginpagemodule) /*, canactivate: [loginactivate]*/ }, i wdm: failed compile.
when importing ionreactrouter component, the following error message results: phofcode
when i subscribe to the "hardware back button"-event i can do stuff, like showing a toast with an increasing counter, but the property-binding to the view does not refresh the value.
when you add to an ion-row, i 'd expect that the _content_ of each ion-col is centred, but that doesn 't happen.
the col itself is centred in the row, but not the col contents.
when setting the `mode` attribute on `ion-datetime` after it has already rendered, the wrong `mode` is used.
when using `<ionselect>` with `multiple` attribute as a controlled component in ionic react, i get into an infinite `setstate()` loop whenever i change the value of the select.
1) the target page needs a content with fullscreen enabled and a footer.
2) when navigating to the target page while the transition to source page is not finished the content 's height gets calculated wrong.
the content will not expand behind the footer.
- create new out of the box sidemenu app.
- app works in local browser on port 8100.
- type error when compile with cordova and run on android (4.4.4) device.
a page inside `ion-tabs` doesn 't re-render as a bound variable value changes.
i have an ion-select component bound to a form field.
phofcode when i run the code in the browser with `ionic serve`, nothing happens when i click on the ion-select element, apart from the control being momentarily highlighted.
but when i run app in android emulator, ion-select opens and presents an alert containing options as expected.
when i start the app and then immediately swipe right to open the side menu; the app crashes.
the menu does not open, none of the nav work anymore.
it appears app has frozen.
if, first time i open side menu is with ion-menu-button in my header; then i can no longer get app to crash by swiping right.
it only occurs if swipe is first time i open side menu.
i used to (ionic 1) use gapdebug to test code running on real device; but that tool is no longer available and have had no luck finding something that replaces this ability.
am not able re-create this issue in chrome.
when there 's a two ion-toolbar, the first ion-img inside a ion-card doesn 't show.
(this is only happening on a sidemenu template)
when i run yarn serve on a new vue cli i get the following typescript errors: phofcode phofcode phofcode
i followed the migrate step from ionic 4.5/angular 7 to ionic 4.7/angular 8. the migration was strait forward and the app runs fine in the browser when i run "ionic serve".
but when i copy www content to my capacitor electron app and run the project i get an white screen with following error: phofcode image phofimage
when no `ion-` components are present in an ionic application, the `body` element is hidden.
running the described command results in error.
i can 't update to angular 8 correctly.
when you use the min property and switch between am / pm it does not show the corresponding hours
calling a function on `iontabswillchange` event emission.
adding a breakpoint on that function is hit after the tab is changed.
from the code it seams that `iontabswillchange` and `iontabsdidchange` are fired together: phofcode phofurl
when the page loads it looks like my ion-slides are using a default config, and after that it loads my custom config causing a weird animation.
the angular change detection is not working as expected.
a full page reload occurs when navigating to an internal link using the `href` property of the `ionbutton` component.
the screen goes white and shows the splash screen for a short amount of time.
the navigation does work and ends up showing the right page.
this problem does not occurs when navigating using iontabbutton.
my current workaround is to navigate programmatically (i use `use-react-router` npm package for this).
when importing ionic inside a react project (not ionic react), ionicons are working but jsx is not included in exported namespace
image is flickering after transition
1. run the conference app using version `4.5.0`: phofurl 2. open the schedule page in chrome (on desktop) and in safari on ios and try to swipe the menu open this is the correct behavior, repeat steps using `latest` (`4.6.2` at time of writing) and notice that it swipes back to tutorial page.
i was able to reproduce this in chrome.
if i inject the `platform` from `@ionic/angular` in my `app_initializer` factory, i get following error: `"could not find cordova.js script tag.
"` i need to setup some code before routing in my ionic 4 app.
these initializing snippets have to access `cordova` plugins.
therefore i need to wait for the `platform.ready()` event.
it looks like this is not possible because `app_initializer` does not support the injection of `platform` and get various side effects (e.g.
splashscreen hiding immediately, even if `autohidesplashscreen` setting is set to `false` in my `config.xml`)
i have a rather simple toast controller and when putting in the options for where the toast will be displayed it goes red and gives the error: > argument of type '{ header: string; message: string; duration: number; position: string; cssclass: string; } ' is not assignable to parameter of type 'toastoptions '.
types of property 'position ' are incompatible.
type 'string ' is not assignable to type \'"top" | "bottom" | "middle" \'.ts(2345)
when i use dot inside number type ion-input this input is empty.
ex: i can 't enter "32.5" inside ion-input.
reloading pages and navigating directly to routes result in 404. urls for images and other pages exclude the sub directory (base-href) resulting in 404s.
i have a multiple tabs appp.
when i first visit a tab with a full screen iframe inside, at fist visit content falls below ion-tabs.
then i change bar, return back to the iframe tab and now height is correct.
when sliding the item-sliding, the slider stays open far from the options, when options layout is modified to grid (display:grid) image phofimage
in my application i wanna show the tabs all the time also on sub pages.
to react this case i have to list my subpages inside the `tabs.router.module.ts` file.
if i navigate now from tab1 to page1, there will be no router transition animation and the back button usage is not that intuitive anymore.
routerlink stops working after navigating to and subsequently deactivating a named/secondary outlet route.
i type: `ionic start appname sidemenu` a permission erro occur when npm try to deleting something
open page use routerlink="/page" if open too many pages will slow.
i think is too many pages stacked.
on an ipad pro 12.9'' or an ipad air 2 emulators, `platform.platforms()` returns : also, as expected then, `platform.is('ipad')` returns false.
ion-item with a tap or click event adds the ripple-effect implicitly.
if i touch/press and hold the item, move the mouse out of the ion-item and release anywhere, ripple-effect element (rendered in shadow-dom) is not removed.
if i do this several time, more and more ripple-effect div 's are attached to this element.
i wanted to have a button inside an ion-list-header, ut it doesn 't seem to work since is not visible
related to phofurl i just had the same issue today, and imho this is definitely a bug related to `ionic` with `angular`, since `platform` comes from: phofcode
when you focus the input on the dom and keyboard opens the scroll behaves incorrectly.
after reaching the bottom of `ion-content` you can still scroll down and entire document is shifted up.
please see video for better understanding.
this happens for both native inputs and ion inputs.
if you add a normal ion-range component with the (ionblur)="log()" function.
the log function only gets called, if you drag and then click somewhere else.
ios cannot type non-english input, it will fire on every type, even backspace will fire non-finished typing in ionic input.
when using ion-textareawith ionic platform windows and ionic cordova run windows -- --arch="x84" the cursor stays at position 0. so by just writing or tipping the newest key is always placed at the start of the ion-textarea.
if you type numbers 1 to 0 on your keyboard instead of textarea holds string when you hit backspace or reenter textarea textarea behavior is correct.
so its just placing key by key on correct position without moving cursor to its start.
please note: this might be a very edge use case.
i understand if this issue is closed.
i have a component that has a dynamic `ion-range`.
this component is nested in a another component that is google map control.
it holds lot of things, basically its the menu for the page phofcode everything else that the menu does is working, its just the `ion-range`.
to be more specific it just `ion-range` when user drops into street view, `ion-range` not draggable anymore.
the values are in correct positions.
so if i change range value to 2 then when in street view range value 2 but it doesn 't work, i cant change value.
navigation by url does not work.
it seems to only match the "/" url on first load.
sem ttulo phofimage this way, popover-content is shown off-screen.
the clicked dot is at the top right of the screen.
in browser (mobile & desktop) when a modal/alert/bottomsheet is open and user navigates back using back button on browser, the modal stays open and background page is navigated anyway.
there 's no official way to handle the back button event programatically.
the form-state css classes are not copied to the parent `ion-item` item when an `ion-item` appears as part of a formgroup, with a form control (such as `ion-input`).
this seems to have been introduced in 4.6.1, since it isn 't a problem in 4.6.0, i believe specifically related to this commit phofhyperlink .
by form state classes, i mean the following list: - `ion-valid` - `ion-invalid` - `ion-clean` - `ion-dirty` `ion-pristine` `ion-touched` if you update the control (adjust or delete the contents), classes _are_ then copied.
it 's just a problem with initialisation state.
appconfig does not respect backbuttontext property empty: ' '.
this has to be set to each using phofcode same for android and ios.
the spellcheck of ios device on ion-textarea is visible behind the real keyboard.
the android back button reboots doom when it is in the last component gif
cards in a virtual scroll have a massive gap screen shot at 8 19 52 pm phofimage
when slides are being added dynamically, the layout of the slides component breaks and newly added slides sit outside of the swiper-wrapper.
issue persists even after calling component 's `update()` method.
when trying to remove a slide to dynamically generated slides, the following uncaught exception occurs: phofcode
when building a form with ion-select, the select box is pushed to the bottom of the ion-item when using a floating label.
when using ion-item-sliding with a red, "danger"-colored ion-item-option, after un-sliding a list item, a red outline remains (temporarily) where the ion-item-option was at.
when using `<ion-select the margin takes up full width of screen, while elements inside a `<ion-item>` are consistent.
you can 't just place it inside of an `<ion-item>` as then the css get 's all messed up and kinda breaks.
when setting an `ion-select` without an `ion-label`, the select does not take the whole space and therefore looks very odd.
ion footer not showing in ios 10.3, but it work on ios 11.0.x or above.
in @capacitor/ios, ion-input is enter duplicate characters.
input `abc` is changed to `aababc`.
it is same as #11566 this bug was fixed on 3.x, but it can reproduce on 4.6.1 or 4.6.2 it can not be reproduced before 4.6.0. it can be reproduced on ios device or ios emulator.
it can not be reproduced on desktop browsers.
mutation observer can 't find dom nodes of the v4 ionic elements.
value of `ion-datetime` is not algined with other input values
activatedroute cangoback() always return false
when defining the tab routes, if using an empty `path` as root of the tabs, no error is thrown but the tab navigation does not work
when the ion-select-options are updated, the popover radio options aren 't updated to reflect that.
when using a custom reuse strategy on a page, navigating in the same component (with url changes) then navigating forward another page then backward to the same page causes a reload of the 1st page.
here 's an example of the routes: 1.
(viewpage (reused and updates handled in component)) 3.
/edit/123 (nav forward to editpage) 4.
(nav backward to viewpage) since stackcontroller haven 't been notified that url has changed for that view, ionic router outlet thinks it must create new view.
create an `ion-textarea` with `autogrow` set to `true`.
then on submit or another action set the value to an empty string.
the textarea does not revert to its original height.
the back button dissapears when i change between tabs and then enter a new page (from a tab) and go back.
icons (ion-icon) are not not shown anymore if the application is not installed in the root directory of the web server.
reason is, that since version 4.6.0, the icons use a wrong url: /svg/icon_name.svg instead of ./svg/icon_name.svg the base href is set to "./" in our applications.
ioninfinite in ion-infinite-scroll is never called.
with the cli you have the option to run the ionic app in a sub path: `ionic build -- --base-href "/subpath/"` js files are correctly fetched with prefixed path, but icons are not.
example log from server: phofcode as you can see in the log js file `9.js` is resolved correctly, but icon `md-arrow-dropdown.svg` is not resolvable.
currently, the `<ion-img>` tags do not load when they are initially loaded in the viewport.
they also do not reliably load when they are scrolled into the viewport from offscreen.
i'm assuming something is broken with the load trigger in 4.6.x/stencil one.
the strange part is that it works fine in electron / capacitor, but does not load on chrome.
it seems to work a little better on safari, but i do still see issue occasionally with random images.
which images fail to seems random, but same images fail each time on refresh, so that makes me think there's something pseudorandom going on.
unable to inspect ionic 4 app on ios 12.3.1 device via chrome - i see only empty devtools screen.
i can't type in ion-input and input fields in safari and on ios simulator (tried both virtual and hardware keyboard), however when i type in chrome or firefox (mobile/desktop) text is showing up perfectly.
when using a param in [tab] of an ion-tab-button, the ion-tab-button is not recognized as selected when navigating to the tab.
example: `<ion-tab-button when clicking this button, 'patient/0' route is called and the tab patient/0 is shown.
but the ion-tab-button is not recognized as selected.
i just installed the ionic example following the docs using "ionic start tabs" and the image in the "get started" section is not displayed.
`ion-item` with `(click)` attribute doesn 't have pointer cursor and no hover/focus style
when navigating between tabs and one of the views of the tabs has query params in its url ( phofurl the query params are lost when navigating back to that particular tab.
when you use a custom svg for `ion-icon` and this svg is a little more complex than usual, it does not appear in safari / ios.
the same svg works fine on both safari and chrome if you use it as `background-image` css property of an element.
switching from an app with the keyboard open to an ionic app causes a brief white blank space to appear.
`ion-refresher` is not visible when `content` has `fullscreen` attribute.
in 4.5 i could change the `ion-icon` based on a property set in the component.
it is no longer working in 4.6 phofcode image phofimage
scrolling on pages where the content does not leave the page overscroll tanto en menu como en historial phofimage overscroll phofimage
while inside the `headerfn` function it appears to run before instructed variables within the scope and also public/private variables are never instatiated before the function attempts to use them
using per the documentation results in a build error.
if the _disabled_ attribute is set on a _ion-fab-button_, the opacity of the fab-button is no longer set to _0.5_.
awesome to be using the new ionic react.
i was hoping to use ionloading in a component where i make an action call via redux to an api http request in the componentdidmount() hook.
the ionloading simply responds to isloading prop coming back from the subscribed redux store in the component.
i am specifying ionloading as follows in my component <ionloading tisopen={ this.props.isloading } tmessage={ 'loading' } tondiddismiss={ () => console.log('dismiss') } /> i am getting following error on console: chunk-3db74fda.js:63 uncaught (in promise) typeerror: element.componentonready is not a function somewhere ionic core it leads this line return } if wrap action call a timeout say 3 seconds things work.
also, if don't specify ondiddismiss prop get following error too: index.js:102 uncaught typeerror: cannot read property 'call' of undefined also after trying fix above with a settimeout, every now and then ionloading doesnt dismiss when prop being passed isopen switches back false.
let 's pretend a `ion-item` have some input childs like `ion-checkbox` or `ion-input`.
if one of the child input is `[disabled]="true"`, the whole `ion-item` is disabled too.
the app crash on http request.
ion-menu-button is not hidden when using splitpane.
the icon is not displayed like the image, but the width(48px) for the icon has been present.
screen shot at 13 26 12 phofimage
alert overlay background uses for the background but does not fallback to the step color in *material design* only.
<img width="568" alt="screen shot at 11 35 21 am" src=" phofurl
the loop works to the left but not to the right, it adds 2 slides to the right after the last one and stop to scroll.
building ionic app with `ionic build --prod` and publish it in prod environment.
load the app then icons are not displayed.
ion-searchbar style crashed when reopen the page
when page loads, get an error in the console (and the app doesn 't load): typeerror: can 't convert undefined to object app.js addicons chunk-ea2b3dce.js:13 if i click on that chunk, it has this code: phofcode
when dynamically pushing new slides to ion-slides it adds the new slide one place before the last slide and leaves the previous last one on the last slide even thought printed array is in correct order.
any overlaycontroller instance created using default .create() with no options passed now will not compile.
when tapping a reorder item on ios a rendering bug occurs hiding most of the items.
this only occurs with items wrapped in a reorder.
clicking back button navigates to previously active tab
i am trying to create a ionic react app, using my custom cordova plugin.
i use phofurl to create the app.
after adding cordova plugin and running ionic build/cordova prepare for ios the www folder is empty.
compared to ionic react app, if i create app for target angular it fills www folder correctly.
i made a pwa build in ionic v4.
however, the platform does not recognize it as pwa.
when navigating to a page via the root outlet and then going back rather quick any page that will be navigated to via the router-outlet of ion-tabs will break (angular template expressions, structural directives, etc.
when repeating the process nice and slow everything works as expected.
add an `href` attribute to the `ion-card` or `ion-item` component and when clicking you see the entire app navigate and reload.
`this.modalctrl.dismiss` closes a modal instance most recently opened, not a parent one ( phofurl ) and we found the modal instance is passed in addition to componentprops phofhyperlink it seems that using modal instance passed through `@input` or `navparams` is correct way to close the parent modal.
an aktiv indicator is shown at the top of an active segment button
the ionic conference app crashes after being installed on an iphone 8 plus (ios version: 12.3.2).
app runs fine for one week before the crash happens.
when i call navctrl.pop from a nested outlet which is not in a tab, it redirects back to the right tab which has some nav stack, but then navctrl.pop doesn 't work.
with ion-back-button it works fine.
aapt: error: resource not found.
aapt: error: resource android:attr/ttcindex not found.
error: resource android:attr/ttcindex not found.
failed to execute aapt failed to execute aapt at at at at method) failed 33 actionable tasks: 12 executed, 21 up-to-date caused by: aapt2 check logs for details ... 48 more caused by: aapt2 check logs for details source) ... 1 more caused by: aapt2 check logs for details failure: build failed with an exception.
* what went wrong: execution failed for task > failed to execute aapt * try: run with --stacktrace option to get the stack trace.
run with --info or --debug option get more log output.
* get more help phofurl build failed in 1m 46s cmd: command failed with exit code 1 error output: note: some input files use or override a deprecated api.
aapt: aapt: android:attr/ttcindex android:attr/ttcindex linking references.
failed execute aapt method) caused by: aapt2 check logs details ... 48 source) ... 1 failure: build an exception.
* what went wrong: execution task >
my modal is appearing with a solid background/overlay
cannot change am/pm input in ion-datetime element.
my split-pane menu break when viewing on devapp on ios (devapp and using "inspect element").
screenshots : ionic small screen bug phofimage
svg file is not found
<ion-content> <ion-item style="--background: red; background: red;"> <ion-label class="label-form" color="light" <ion-input [debounce]="500" </ion-item> </ion-content> in android 6+ the ion-input gets the background color of the ion-item.
in android 5- the ion-input background color is white;
in a fresh ionic tabs project, when navigating forward in the app using routerlink.. once the same router is visited, for the second time, the back button will only see first occurrence in navigation stack ex: tab1 > page1 > page2>page3>page2 now when user click hardware back button or <ion-back-button> it will go to page1 instead of page3
the back button is animating forward when it doen't have a history (defaultback) and is called from an ion-tab sub page.
my project offers android, web services as ionic.
i used v3 and i recently migrated to v4.
the web service uses firebase hosting, and the following error is displayed on the console.
could not find cordova.js script tag.
this does not occur in the development environment (local deployment).
to past 12 to 20 the padding left in ion title, being wrong/out of square
if the ``disabled`` attribute on the ``icon-only ion-button`` is set programatically or via html, there is no styling to reflect this.
the button cannot be clicked, but there is no indicator to show the disabled status.
i have ion-fab with horizonal="start".
in web - it appearsin the start of my app (rtl).
in android - its appearsin the end of my app.
it appears in different position in web and android.
hi, i want to use a fab button type submit inside a form but it doesn 't trigger ngsubmit.
the `hasvalue()` method on `ion-datetime` always returns `true`, due to the way the underlying value is stored - the check determines if `object.keys(...)` has a length, which is always true in the case for ion-datetime since underlying value is always an object.
this results in various behavior occurring as if `ion-datetime` has a value, even if it doesn 't.
for example, `item-has-value` is added to wrapping `ion-item` which affects floating labels, and additional styling around this class.
content scrolling not available with keyboardresize=false because webview is full-size
when a floating ion-label is used together with ion-input and the color property is set, the color changes to primary when input element gets focused.
when app is opened using "in app browser", header and footer hides.
when clicking the backdrop area of an overlay menu, the menu is not closed in ms edge.
other browsers like chrome, firefox or safari are working properly.
after putting in `ion-tabs` into the project and running on android the page doesn 't scroll
when needing to navigate to pages declared in routes of different tabs even if bug #18311 is fixed, leads to a different behavior than ionic v3 as pressing back will land the user to a different page than the one the navigation started from.
this issue appears to be similar to: phofurl after pulling down an ion-refresher in a page that have also fixed elements (e.g.
: a fixed button bar on the bottom), the position: fixed on the other elements stops to follow the page scroll (see this gif: phofurl ).
this issue have also effect if - during refresh - you hide other elements with ngif
chrome (mac os x 10.14.5) myapp component should be created first failed error: staticinjectorerror(e)[e -> n]: core)[e -> n]: nullinjectorerror: no provider for n!
error properties: object({ ngtemptokenpath: null, ngtokenpath: [ 'e ', function ], ngdebugcontext: e({ view: object({ def: object({ factory: function, nodeflags: rootnodeflags: nodematchedqueries: 0, flags: 0, nodes: [ object({ nodeindex: 0, parent: null, renderparent: null, bindingindex: 0, outputindex: checkindex: flags: childflags: directchildflags: childmatchedqueries: matchedqueries: }), matchedqueryids: references: }), ngcontentindex: null, childcount: 1, bindings: [ ], bindingflags: outputs: [ ], element: ns: ' ', name: 'ng-component ', attrs: ], template: componentprovider: nodeindex: 1, parent: <circular reference: object>, renderparent: <circular reference: object>, bindingindex: outputindex: checkindex: 1, flags: childflags: directchildflags: childmatchedqueries: matchedqueries: object, matchedqueryids: references: object, ngcontentindex: -1, childcount: ...
the header is not translucent.
the toolbar has a border.
i use ion-col inside a virtual scroll in order to generate a list with 3 columns but instead of doing that it just resizes the component and show it in a descending list.
failed unit tests when returning <redirect> from <route> 's render prop when using <ionrouteroutlet>.
if i used a component instead of <redirect> it works fine.
for element `<ion-item-divider>` when i set `--padding-inline-end: 0;` in the styles it doesn't not work for ios because no variable exists for the _padding-inline-end_ that now has 8px hard coded (no issues for android): image phofimage
app reloads webview after too many `ngdocheck()` calls at once
with "fullscreen" attribute <ion-content> doesn 't take full height.
there 's still an empty space beneath <ion-header>.
at real android device with android 6.0.1 , it emit like this "uncaught typeerror: (intermediate value).fill is not a function" from vendor.js.
in ios mode the css variable border-width in the elemet ion-toolbar is not work
when navigateforward or navigateback is called with url as string or urltree, navigation options are not passed to angular router.
when url is an array, options are passed properly.
when i add text to a back button, the button itself get 's pushed out of the page, only the text is shown.
on ios, the button is still visible.
when text is removed, back button is visible on both platforms.
the stencil script loader try to load a
on windows laptop computers that have a touchscreen monitor, `platform.is('mobile')` returns true.
show this only if "show" is true, show not working slide
when the ion-picker gets dismissed the ondiddismiss() data and role properties are both undefined.
`<ioninput />`'s onchange is not fired.
`<ioninput />`'s value is set to state from `oninput`, but the state is not set to `value={}`.
the `<ioninput />`-component's state is not really being controlled.
when following along with an example like our dark mode blog post ( phofurl the active state of list items looks off putting as it is way too light, almost text colored.
trying to use ionic with elm-lang may lead to `"cannot read property 'childnodes ' of undefined"` for some elements like `ion-header` due to the fact that underlying vdom changes which makes elm-lang unable to track the reference.
the wrong tab is marked as active
the <ion-segment scrollable> component works great on mobile, but on desktop it does not scrolling on mouse slide.
i tried the new feature "auto-grow" of ion-textarea and all is working fine on win10/ubuntu/linux with chrome or opera.
but when i tried it on ios 12 or on my mac, it just raises the textarea to 2 rows and thats it.
more rows are not possible currently.
while running the application on mobile (debug mode), http calls return error as if they are not even called.
error: status: 0 unknown error.
@ionic/vue can not work due to undefined behavior in iontabs.
trying to run a blank project on android 8 with "ionic cordova run android", during deployment i get the following error: no suitable api installation found.
[error] an error occurred while running subprocess native-run.
native-run.cmd android --app exited with exit code 1. re-running this command with the --verbose flag may provide more information.
it runs fine with ionic cordova build android
when i installed ionic 4 app in android 4.4.4 device and emulator, it is showing the value as
when using ionic on a "normal" web page, html scroll corrupts a modal (see this screenshot): image phofimage that 's caused when the user have the body scrolled down a bit and a modal is opened.
alert doesn 't have this behavior (i.e.
: it works fine, even we are on page where body is scrollable).
unable to create modal service that handles opening and closing modals depending on what i try the errors are different but the result is the same.
>compiler.js:2430 uncaught error: can 't resolve all parameters for profilecomponent: ([object object], ?)
above changes to chatcomponent, if i have the modal service in constructor.
cannot set `animated={true}` to `<ionskeletontext />`.
the property `width` works fine though.
when activating ivy compiler ionic fails to compile with the following message: error in changedetection must be a member of changedetectionstrategy enum from @angular/core
when i navigate back to my home page, the previous page stays on the dom; it is hidden but has a `z-index` bigger than the visible page.
therefore, i cannot interact with the visible page.
on screenshot below, "home-screen" is current, visible page but "agenda" has a bigger `z-index`.
i use the ionic project as a web and mobile app, so i have to handle big screens and desktop version using `platforms` when i open the website in some devices, especially remotely, i get everything messed up, because it is got the mobile version running on the desktop one, after 3 days of troubleshooting, found that issues related to ionic, as first thought it could be cleint-side only issues.
currently, get classes `plt-mobile plt-mobileweb` applied to `<html>` tag, and calling `window.ionic.platfroms` returns with `mobile` and `mobileweb`: image phofimage
i created logic to limit the number of concurent observables using the mergemap rxjs operator (with the concurency limit): phofurl this is working fine on browsers (event mobile browsers), however, when build as an apk, the concurency limit is not respected.
both `@ionic/lab@1.0.24` and fail to show ios styles for a react build, whether it is done as a "custom" type project with `ionic@4.12.0` cli, or done as a "react" type project with `ionic@5.0.0-beta.3` cli.
any combination of @ionic/lab with ionic stable and beta fail to properly apply ios styles.
this has been tried with `@ionic/core@4.4.2` and (dev).
i don 't have an ios device at hand at the moment, so i 'm unable to know whether it would work while actually running on ios, or this is a more general issue platform detection.
i have an error in httpclient after compiling the application.
when entering the apk it works perfect, but i give login or register does not progress.
i was able to extract the error back and the following comes out: {"header": {"normalizednames": {}, "lazyupdate": null, "headers": {}}}, "status": 0, "statustext": "unknown error", "url": "my_url_api" , "ok": false, "name": httperrorresponse "," message ":" http failure response for my_url_api: 0 unknown error "," error ": {" istrusted ": true}} it should be noted that running ionic serve everything works perfect.
the ion-content is incorrectly being resized for the hardware keyboard leading to blank area above the keyboard when an ion-searchbar is in focus.
however, focusing on an ion-input is fine and the resizing is correct.
it appears the --keyboard-offset being applied twice.
below are screenshots - red area just a div inside ion-content.
you will note input field correctly adjusts content while searchbar adds more offset.
initial state: initial state phofimage search bar in focus: search bar in focus phofimage input in focus: input focus phofimage it seems ion-searchbar applies a "--keyboard-offset" to style attribute of ion-content which may be causing issue while ion-input does not .
these tests and experience were done on an ios iphone xr 12.2 emulator and iphone device.
--keyboard-offset style being applied to ion-content by ion-searchbar (if i clear this value then ion-content correctly sized): phofimage --keyboard-offset style being not applied to by ion-input field: input-keyboard-offset
when you change the hour field, the minute field does not get updated(cannot select before/after now).
a `<div contenteditable="true">` can 't be edited in ios mobile view when inside `<ion-app>`.
tapping on the div does not make the editor caret appear.
open the camera in pwa mode will change innerheight.
the title goes beyond the screen and the whole tabs page becomes scrollable.
this behavior is found on iphone 6 ios 12.3. going into background mode and back to the app will readjust to correct height.
works fine in desktop browser, safari browser and pwa mode in iphone x ios 12.3.
in an ionic tabs starter the tabs are irresponsive to the enter and spacebar keys of the desktop 's physical keyboard.
i tested this in chrome and firefox.
back button stopped to work for deep-linked pages if `defaulthref` includes query parameters.
in 4.4.1 this works: phofcode and this does not: phofcode in 4.4.0 both are working fine.
using itemreorder, if we drag an element around and, without droping it, move it back to the original position and drop it, the element will move to any other last position it was moved.
cannot css on conditional readonly ion-input
the icon is not visible.
only the button text is shown.
when the `<ion-card button>` element has a button attribute it adds a `<button>` element around the cards contents.
on chrome (and possibly other browsers) buttons are displayed inline and this causes the `<button>` element to not fill the `<ion-card>` element as it honours white space between `<button>` and closing `</ion-card>` tag.
this is most noticeable when we place an image as cards contents as we 'll see a blank line before end of card (see below for an example) <img width="332" alt="screenshot at 22 30 54" src=" phofurl
im working on a new ionic 4 app that is based on the sidemenu starter template.
we have members on the team that specialize in ux and accessibility, and my app was recently tested and i got some feedback.
it was pointed out that the component used for the left pane (ion-menu) has an aria landmark role of omplementary, and that this would mislead users of screen-readers.
they would likely assume section of app is informative, yet non-essential content about current page, which it is not - its function is navigation critical for usage of app as a whole.
i was asked to change aria role from omplementary to navigation which accurately reflects functionality.
as you can see from my repo phofhyperlink on stackblitz, i was unable to do so.
when adding role=navigation to ion-menu, it simply gets overwritten role=omplementary.
if you try to navigate to a page/route that belongs to another tab and you have no default href for the ion-back-button, the back button does not appear.
however, browser's back button works fine.
i have an ionic 4 application where i have a service where i intercept the angular routers navigationstart events as follows.. phofcode i want to do this as have an application wide side menu with shortcuts to each of my feature pages.
if a user goes to a feature page from this menu, then want the back button to then goto the home page, and not the previous feature page where it may have navigated from.
do this my keeping track of each route forward, and then in handlepagerouting following code phofcode this all seems work fine, however, find that as soon (or soon after) had an instance where above code executes android hardware button stops working.
if go another feature page from home page,
i discovered inconsistent behavior while using `swipebackenabled: true` on an ios native ionic build.
video of the issue here: phofurl things to notice in the video: 1. sometimes, swiping back will cause the animation to trigger twice (seen near the beginning of video).
2. at 0:06 second mark, app transitions to details page but i can no longer swipe back.
when i try to swipe nothing happens (you can see screen sorta go up and down because my swipes aren 't perfectly horizontal).
3. you 're able see home page beneath details page when swiping down on details page which uses `ion-refresher`.
3. tapping back-button in toolbar doesn 't do anything 4. tapping tabs at bottom doesn 't do anything either
navigating to pages not within the tabs group causes issues such as the transition is not smooth, the back button is either missing or will skip and intermediary page to go back to the main tabs page
ion-select text color doesn't change in v4
when pressing the back button too quickly through the navigation stack, this causes the parent tab 's view to stop updating when bound properties change.
this seems to happen when the previous back animation hasn 't fully finished before pressing back button again.
an example of expected behavior when not navigating too quickly: phofimage as you can see after navigating back to parent tab page text is still updated when changing segment.
an example of page text not being updated after navigating too quickly: phofimage i 've been able to reproduce this issue in browser as well as on ios and android devices.
simple tabs structure in vue project with ionic vue router.
when i switch tab previous component is removed from dom and after that it needs to be fully re-rendered when i go back to that tab.
it 's reproducible also on ionic-vue-conference app.
but working correctly on ionic-conference-app.
given a component that 2 ion-datetime fields, binded to different values, both values being `null` when you try and set the value for the first date-time field at time x, it will propose time x as initial value.
when you then try and set the value for the second date-time field at time y, it will propose time x as initial value.
building the `<ion-select-option>` list from an (async) observable makes the `<ion-select>` component not pick up the selected option.
i am currently in timezone `+02:00`.
my app uses the `moment-timezone` package to have a global timezone setting which is set to `+12:00` by default.
i use `moment().format()`, which prints the current time e. g. as to set the value of an `ion-datetime`: phofcode the `ion-datetime` now displays that date converted to the timezone i 'm currently in: > 16 may 19 02:25
(text explanation is a bit confusing, i added a video demonstrating the issue below) while on ios, if i route to a page, swipe to go back to the home page, but cancel my gesture halfway and try to swipe down refresh the content on the page, page underneath my current content is shown.
here 's a quick video displaying problem.
looking for ionic:build npm script.
found ionic:build, but it is the default.
+7ms ionic-app-scripts build --prod --target cordova --platform android ionic-app-scripts 3.2.1 build prod started ... clean started ... clean finished in 3 ms copy started ... deeplinks started ... deeplinks finished in 270 ms ngc typescript error unexpected value 'null ' declared by module 'appmodule when running same command using --release flag, it works and it generates .apk file.
behaviour now: -> i deploy using: ionic cordova run android --target -> im watching the terminal -> i see app building logs -> i see app deployment logs app opens up on my phone app works perfectly going to settings installed apps, is there when i go to my home menu, is no where to be found, go and even search for it by name, nothing, apparently it is installed but something is going on and not creating the launcher
some components are rarely not rendered when scrolling down on android device.
these components are rendered when device orientation is changed.
we confirmed that elements exists in dom tree (and should be visible) by using inspector.
so i have this footer image phofimage through the chrome dev tools i can play around with its style and i can totally see how setting its color to anything works perfectly image phofimage image phofimage but setting it to transparent doesnt work, it stays white image phofimage
getting this error in browser j9sczdb9.entry.js:1 icon was not resolved
the ionic.core.js files, as well as ionicons.core.js files use the line new function("w","return class extends w.htmlelement{}") which causes evalerror: refused to evaluate a string as javascript because 'unsafe-eval ' is not an allowed source of script in the following content security policy directive: "script-src" this looks like it comes from es5 backwards compatibility.
there should be an option to not include es5 if needed.
there is the option in the angular.json, but that doesn 't seem to work to remove this `"es5browsersupport": false`
if ion-input has no value, the default height is too small.
it "grows" if you enter a value which makes the ui look bad.
there is no animation when i navigate forward
label with position float disappears when get focused to ion-input
the ionimg in android version 7.0 is not taking effects.
the same issue as reported in #16136: when setting autofocus on an ion-input element in a modal in ios, the modal content disappears.
when using a ion-label with position="stacked" the text on the label gets "blurry" like it 's an image.
long words in `ion-col` do not `word-break: break-word` on default.
this might be desired, default behavior (i am not sure), but it threw me off.
it needs a tweak the button of the card isn't inheriting the card styling.
if you have any sort of height changes, background image, etc on the ion-card, button portion maintains original ion-card styling, overlapping ion-card.
nested checkboxes inside a radio group influences the radio group selection.
when an ion-input is defined with either min or max values specified
'hardwarebackbutton' option described here phofhyperlink is not working.
1. when cards are in an infinite scroll, all cards in the view have corders flicker from rounded to square.
2. within an ion card, i have observables with async pipe that are presenting the wrong information for the given card.
they show data from another card previously shown in the list.
the ion-select component when it has
in `@ionic/core`, the `ion-router-outlet` contains an `animation` property that allows users to customize the animations used for that outlet ( phofurl this has not been exported via the corresponding `@ionic/angular` directive ( phofurl
when an notification receive and clicked, the .on("notification") is not triggering, my code is phofcode notification payload is phofcode
rendering of component does not trigger if the redux-action is dispatched inside callback of in app browser phofhyperlink .
the ion-img component does not having working cache functionality - giving the following error: can 't bind to 'cache ' since it isn 't a known property of 'ion-img '.
demo app confirgured with { mode: 'ios' } and has 2 &lt;ion-tabs&gt; pages.
navigating forward from tabs a to tabs b pages animates as expected.
navigating back from tabs b to tabs a does not animate.
removing the { mode: 'ios' } config line shows android style animations working correctly forwards and back.
when the popover.present() method is bound to a 'press' event, then there is a problem when the user presses the button long enough to open the popover but if press is released a little bit to early, popover gets directly closed again because backdrop tap is triggered as well.
in an `ion-toolbar`, when placing an `ion-back-button` in the `end` slot, the button has no spacing applied to it.
it is squeezed all the way to the right, and size is larger than expected.
the same applies to `primary` slot.
`toastcontroller` can call with but cannot access from external javascript.
the (click) event is only triggered after the second tap.
someone suggested to use (focus) event but i need to trigger the click on a
when i browse to a page that has previously been loaded, the load/update events are not firing, nor is the component being re-rendered.
when i use an ion-button, the ion-router 's `push` method or even the back button a previously loaded component/page is loaded from navigation stack by looks of it but no events are fired and page displays out of date data (so it 's not been re-rendered).
`typescript error: property 'buttons' does not exist on type 'intrinsicattributes & element: htmliontoastelement; ...`
1. display a page that has an `ion-nav` inside.
2. open a modal that has an `ion-nav` inside.
3. call `push(someview)` on the `ion-nav` that 's inside the modal.
5. the `ion-nav` that was behind (not inside a modal) shows the last page displayed by modal i just closed.
the application does not start, and the following exception occurs: diskcookiestorage changing policy from 2 to 0, cookie file: apache cordova native platform version 4.5.5 is starting.
multi-tasking -> device: yes, app: yes cdvwkwebviewengine: trying to inject xhr polyfill -[wkwebviewconfiguration unrecognized selector sent to instance
this bug is basically the same as issue:15408 phofhyperlink , but my issue applies to when you use custom pickeroptions.
i need to be able to clear an ion-datetime because it isn 't required, so i would add this option by using pickeroptions.
but when i use picker options, the date isn 't in the format of iso-8601 anymore, but rather the weird object form.
i tried the following code in docs: <ion-virtual-scroll [items]="items" [headerfn]="myheaderfn"> <ion-item-divider *virtualheader="let header"> {{ header }} </ion-item-divider> <ion-item *virtualitem="let item"> item: {{ item }} </ion-item> </ion-virtual-scroll> but divider cant sticky , i try <ion-item-divider sticky *virtualheader="let header"> but not work ~!
for the react ionic app, adding a `classname` to a component may work on initial load but after any interaction it does not gain the needed classes provided by ionic.
for example if you use `styled-components` or simply set a classname to a component (say toolbar): phofcode or phofcode this results in: phofcode but after interaction the `ios` and `hydrated` classes are lost: phofcode the color will apply on initial render but fail after any sort of change to the app, like navigating to next screen.
when using react hooks a secondary window is not unmounted and cleanup effects are not triggered.
after clicking an ion-button to present ion-modal, the modal trigger button remains focused in the background and pressing enter/return/space will continue to open duplicate modals.
if property `autofocus` is set to `true` for an `<ion-input>` element, the behavior for the `<ion-input>` element does not change when executing an `ionic serve`.
having an ionic 4 app with angular, and navigating to different pages by the use of angular 's router causes a strange flickering in which you can see the previous page you were at while the new page is coming into the view.
all pages have a matching module for lazy loading, and one module may render more than one page component, resulting on a nested structure of ion-router-outlets
if i set the `translucent` property for a toast, there is no visual difference
according to phofurl i can change the background colour and the button colour, as well as a number of other attributes.
using custom css i can configure the border radius, width, height and colour as described in phofurl and i can additionally change the text colour using `--border-color`, and background using `--background`, however, if i try change button colour using `--button-color` it seems to be ignored button remains default blue.
available days are limited from `min` value day to last day of the month.
this is an ionic 3 project migrated to 4. i have an item group that should be able to be reordered.
the group can be dragged, however it stops the dragging at a certain point and stuck there.
while running the app on the device it will not connect to express server
i am using the `loadingcontroller` in `@ionic/angular` to show a loading animation with spinner: phofcode it's quite small on the screen, so i'm trying to increase the size of it using css.
sadly there don't appear to be any good ways to increase the size of `<ion-spinner>` with ionic v4.
using css `transform: scale(5);` * will * scale it up.
however, because of css animations, it ends up looking blurry on ios.
(android is fine though) from what i understand, this is a long standing bug in mobile safari, that occurs when scale is applied a css animation.
(if you google for this, you'll get a tonne of links) note that in ionic v1, sizing an `<ion-spinner>` wasn't an issue, since it was possible size by just doing this: phofcode which avoids `transform: scale` safari bug.
unfortunately this method doesn't work in ionic v4, and results `<ion-spinner>` looking very odd if tried.
end result is that there's no good way increase size `<ion-spinner>`, and i'm kind forced use `transform: scale` approach and just have look all blurry on ios.
when show content and hide skeleton and vice versa switching between tabs refresher stops working
by using any starter project (e.g.
`ionic start photo-gallery tabs --type=angular`), after building it and running it in browser, app wont ' start successfully.
this issue is a blocker for projects that want to use ionic v4 only as browser web apps (on desktop, or wrapped by electron).
the issue is not seen during running the app via 'npm run start ' (serve).
i have an empty tabs template project and i 've added a settings page outside of tabs.
when i navigate between tabs, lifecycle methods ionviewwillenter and ionviewwillleave are called appropriately on each specific tab page (e.g.
'/tabs/tab1 ', '/tabs/tab2 ', ...).
but when i move to external page (e.g.
'/settings ') lifecycle methods are not called on the specific tab page, only on the parent tabspage.
not possible to combine attributes `shape` and `size` `border-radius` is overwritten by `.button-small` / `.button-large` class
on loading a complex ionic app on a slow phone and swiping from left to right while the page loads, the following error is printed (on the animation of the menu): phofcode the code where error happens is this code: phofcode after this exception it is no longer possible to tap anything.
any following input will get console message phofcode
pass `null` value to `datetime` breaks component.
example: previous url is url is click then `ion-back-button` navigates back previous url,but the url become the url query param is disappear.why?
as extracted apk using zip7, found images in this directory: apk/ assets/ www/ assets/ imgs/ mandara.jpg the source location of images is: src/ assets/ imgs/ mandara.jpg
using the markup at phofurl 1. the drag icon is displayed only when slot="start|end" is omitted 2. dragging the drag icon the ion-item is not dragged at all, no event fired
this code: phofcode generates the following output.
the buttons don 't size the same.
my current setup involves a stencil lib/component that uses chart.js, which has a dependency listed for moment.js.
i have managed to configure stencil (via rollup plugin, see link below to slack) to disregard moment.js as part of its own rollup, checking the stencil `dist/*` files shows that indeed moment.js is not part of any chunks.
however, when i now run `ionic serve`, i see this: image phofimage somehow ionic adds the `node_modules/moment` (blue highlight) into the final product, which it shouldn 't - a bug?
who can shed some light on this?
how do i properly configure ionic/angular to disregard certain packages no-matter-what?
when using infinite scroll: * if you initially load not enough items to fill the page and to enable scrolling, ioninfinite will never fire.
you have to resize the browser window.
* if you scroll down quickly, ioninfinite does not always fire, especially when you load only few additional items and/or the threshold is set to a high value.
you have scroll up and back down.
this is an issue because: * you might want load as few items as possible, especially if the load time is high or because of bandwidth/costs.
* you never now how many items are enough fill page, because of screen size, font size, etc..
if a modal is shown, and the user navigates back using the browser back button, the browser goes to the previous page but modal remains visible and is not dismissed.
when trying to focus ion-searchbar in ionviewdidenter nothing happens.
then, if you switch to another app and then return to the ionic app, the searchbar gets focused and the keyboard is shown.
in ios 12.1 the same code works fine.
<img width="830" alt="screen shot at 12 06 18 pm" src=" phofurl
when an ion-select with interface="popover" or interface="action-sheet" is visited and nothing was chosen from options and the field is required, then it is not showing the error message as soon as ion-select is dismissed, requires one more click (anywhere) for the error to be visible, works fine on "ios" platform but not on "md".
item sliding blocking menu slides event phofimage
my app direction is rtl and back button position is top left in header then set arrow-forward(<-) to icon in ion-back-button.
in android 5 or above direction icon is correctly(<-).
but in android 4.4 direction icon is not correctly(->)
i set up a component with `ion-tabs` and when it showed up, there is no `ion-tab-button` is actived and there is no interactive when i click on item.
when using a number input in combination with a floating label the label overlaps with the input when typing in a value such as phofcode it 's pretty much this: phofurl
ion-back-button is shown on page even after navigating to page with navigateroot.
when the img in ion-slide, double click the picture,the picture will be scaled,img will be added with a style attribute.
when using ion-icon inside a button or label, text and icon are not aligned correctly.
when click on icon menu only darking page not show side menu in android 4.4. in another android version this work correctly.
ion-content properties fullscreen is no work,
i have created the app in ionic3 its working perfectly in android but after generating the ios build i have scrolling issue in the in iphone7 device but the another ios devices scrolling working properly but iphone7 scroll not working and screen is freezed idont understand what problem behind that.
when mutating data in the handler of an alert button using a timeout, angular is not picking up the changes and running change detection accordingly.
mutating the data in the handler without a timeout works fine.
when i interact with app first time and focus on input keyboard open but view not scroll to top then again close app and reopen then its work fine
we create with stenciljs a web component which we use in ionic.
this wc contains an ion-img component phofcode the problem is, this image is "draggable" by default in the browser.
but the problem is you can not set any style on shadow dom element for `img`, as you know `::shadow` pseudo-selector is removed in chrome.
so the only way we are able to set this css styles is from component class using selectors, this your workaround phofcode we have also to use `settimeout` because `shadowroot` of `ion-img` not present when component `this.el`" fires stencil 's `componentdidload` hook.
(not sure if this a bug or as expected)
having many ionic 4 components on a page slows down the initial display significantly.
having investigated the performance profile, it was found that custom element callbacks such as attributechangedcallback were triggered many many times and angular 's change detection (ngzone#onmicrotaskempty -> applicationref#tick) gets triggered every time.
i 've got a modal page that contains the following template: phofcode note that my `ion-searchbar` has `slot="fixed"`.
my virtual scroll has enough items to allow scrolling of `ion-content`.
1. focus on the searchbar input.
2. scroll the list to the bottom.
3. when you reach bottom, list continues to scroll until almost all items are completely obscured from view.
with a sufficiently tall `ion-header`, you can get into a state where all items are hidden.
this issue occurs only on a real device, as it 's height of on-screen keyboard that dictates size of resulting padding-bottom on ion-content.
when using clearinput on a ion-input a button appears to clear the input field.
when clicking this button the focus is lost from the field.
when app is targeting `"target": "es2015"`, `@ionic/core` is loaded from for which browsers with only es2015 support throws a syntaxerror.
for instance, crosswalk 23, which we still use for supporting old android devices, is chromium 53 equivalent and es2015 is supported but not es2017.
this issue is only reproducible in ios, so android platform works correctly.
when i tap the input as expected behavior the keyboard slide up from the bottom of the screen.
the issue appears few seconds after because
i open userlistpage and ngoninit get's called, then i navigate forward(userlistpage is cached) to userpage and its ngoninit is also called, then i navigate back from userpage to userlistpage and userlistpage ngoninit gets called again.
application does not exit on root page
colors don 't change when changing css variables
the app is broken in microsoft edge.
the console show the following script errors: bug1 phofimage there are some missing css files: bug2 phofimage actually it should look like this: bug3 phofimage
when in a formgroup, label always floats on an ion-datetime field when no value
on initialization of ion-segment , we can set the value property of ion-segment using component property and also set value property of ion-segment-button.
> segment buttons are groups of related buttons inside a segment.
they are displayed in a horizontal row.
a segment button can be checked by default by adding the checked attribute or by
ion-refresher is disabled even if disabled property value is changed to 'false ' from 'true '.
gallery is not opening captured image is not returning.
application crashes after taking picture
using the `ion-tabs` `select` method on load will alternate between selecting the first tab and the one specified.
on chrome in iphone x, safe area is added as a padding on toolbar.
following the conference react app structure nested routes sometimes throw this error randomly.
could be multiple things since both props don 't seem to work at all on the ionbackbutton component (defaulthref and goback).
when i trigger a pulldown refresh, ionic adds 'transform ' to '.inner-scroll ', which is correct.
but when i finish the pull-down refresh, 'transform ' is not removed, which leads to the formation of stacking content.
when a footer is being pushed up by the keyboard, the animation is very clunky and laggy.
see gif below: keyboard phofimage
showing a material sidenav phofhyperlink in an ionic app is not displayed correctly when placed inside `<ion-content />` (see screenshot below).
whenever running the application it skips the home screen and goes _directly_ to the modal.
when clicking the back button it throws that error in console.
_this error happens on device following `$ ionic cordova run android --device --livereload` and `$ ionic serve`, however, if device is a larger device this issue isn 't there for example if you set chrome console to imitate an ipad or just on a regular browser then issue isn 't there_ > core.js:15723 error error: uncaught (in promise): overlay does not exist > at resolvepromise (zone.js:831) > at zone.js:741 > at rejected (tslib.es6.js:69) at (zone.js:391) object.oninvoke (core.js:17298) (zone.js:390) (zone.js:150) zone.js:889 (zone.js:423) object.oninvoketask (core.js:17289)
i have a component ion-slides and inside multiple ion-slide with different sizes.
the vertical scroll is not working.
i have created 3 different simulators all base on nexus 5x density 420dpi) but got different platforms message output.
to clarify, it 's a mobile phone, not tablet not desktop.
i log the the platforms as command below: with result: [android 4.4] platforms=> ["android", "phablet", "cordova", "desktop", "hybrid"] [android 5.1] platforms=> [android 8] platforms=> (5)["android", "phablet", "cordova", "mobile", "hybrid"]
with ionic tabs and ionrouteroutlet when route changes component fire `componentdidmount` only the first time
when user taps on ion-searchbar, page scrollable area increase height to fit operating system keyboard.
it's ok. but, on ios, seems page become twice bigger then needed, and large empty area appears with operating system keyboard.
when i am using `<ion-back-button it 's loading *.svg file dynamically.
whom path is related to "base-href" tag or hosted domain.
the safe-area-inset-top is not respected on android devices so even with a notch at the top, there is no padding added.
tabs is not working on ios10, the :host style is disappeared on the ion-tab-bar elements.
the aim is to confirm in a form a password/answer (same value in two inputs).
user scenario : edit field2 (confirm) answer (ex: aa) => we do have a normal error edit field1 (origin) answer (ex: aa) => we still have an error on field 2 which is not expected.
the bug comes from the field2 ion-input classes found when the form is valid but we still have the field2 underline in red : -
the initial size of a component placed inside is `0 x 0` (`offsetwidth = 0`, `offsetheight = 0`) when read in `ngafterviewinit`.
this happens when the component is configured to fill up its container (e.g.
: `style="width: 100%; height: 100%"`).
this is particularly problematic for elements that need to know their actual size for initializing a drawing context (e.g.
: a `<canvas />` element).
in angular components `ngafterviewinit` seems the right place for initializing a canvas element that fills its parent with the proper size.
but in ionic projects this doesn 't work and the element size is initially reported as 0.
`ion-content` with `fullscreen` attribute causes a flicker in text/elements in the `ion-header` 's `ion-toolbar` when navigating back from another view (on device iphone 6s, and iphone x).
if the componentprops are passed like below phofcode i need to access the props by phofcode
i m trying to set tabs routing with react package via @ionic/react@0.0.5 and i some routing animation.
but i want to get read of the animation.
but ionrouteroutlet component cannot receive animated prop value like in angular.
please answer me quickly thank you very match
when i create a label inside an ionic item the text automatically wraps.
even when specifyinh no wrap on the item and or label and/or assinging class ion-text-nowrap
after upgrading ios to 12.2 the unchanged ionic v4 app does not show icons anymore on the device.
before ios 12.2 icons placed in html with "ion-icon" were displayed.
now there is empty space.
they are not completely gone because they are still allocating their spaces but they are not rendered anymore.
the `disabled` attribute seems to be ineffective for `ion-item-option`.
i have tried a couple of different ways to set it (both the property binding, and attribute value), neither of which had any effect.
the button remains enabled, and it can still be clicked.
typescript is telling me that children is required for `ionactionsheet`.
on ios, you can swipe back from a page that has a candeactivate guard that should prevent navigating away from it.
after swiping back, the resulting page does not take any input (e.g.
if an `<ion-item-sliding>` is dragged down in `<ion-list>`, it is possible to slide `<ion-item-options>`.
but if the item is dragged up in the list, sliding is no longer possible.
when i run in ios simulator the app crashes after the splash.
i get the error react is not defined.
removing `<ionapp>` and `<ioncontent>` resolves the issue (but obviously i need to be able to use these components).
when trying to scroll (and start on the bottom of the page, where the tab-bar is, instead of the content area) app freezes (not being able to scroll or navigate) until you let it rest for 1 or 2 seconds.
datetime picker is set to current time instead of 0 when value is 0.
i'm trying to fetch new data based on a global resolved value when a specific page reloads.
my resolver fires fine but the activatedroute.data doesn't receive new data from resolver.
would be cool if datetime will be updated when i change a year - the component should show then show all months.
today is 22 march so it means that if the user changes year to 2000 then he can use to use all months (in my case for maxdate = adult date [now - 18 years]).
ion-toast is showing on position left: 8px, right: 8px.
ionic router run oninit only first time
when i run ionic cordova build ios --release --prod i receive this message error: phofcode
clicking a menu item causes flickering
when you tap an `ion-textarea` and the keyboard appears it remains behind the keyboard.
happens on both capacitor and cordova when running on ios.
cannot get the the radio button inside ion-select to be themed using the given variable --color-checked
i put ion-checkbox & some other ionic components inside an ion-item, when pressing in padding spaces around other components, the checkbox event is called
on android, when tapping instead of clicking or dragging, an ionfocus and ionblur event is emitted, but not an ionchange.
longer drags do emit this event.
we try to to a normal multiple router outlet use case with auxilary routes.
what we try to do is reach lazy loaded modal pages.
but it seems there is a bug on multiple router outlets or with named router outlets not sure.
i saw there are some closed bugs for the same or similar issue on beta releases.
we try to do this on 4.1.2. there are also opened and not resolved threads in stack overflow and in the ionic forum we created a github repository where you can try the behavior phofurl
cannot use plugins in device built apps
adding an ion-item-sliding to an ion-item with ion-item-options both sides, when sliding the item from left to right (or vise versa) to the end of the item, the right icons shown up while it should not.
so now both options from both sides will be shown in any swiping direction
isssue is similar to #11532 on first user connect i download a collection of items from a database, i created an observable that next each item once response is given by database and push it to the data array.
if i use a simple *ngfor, when the list is updated by the subscriber, item is drawn immediately.
with virtual-scroll, it works if the data array given already with some element, but not if it empty.
i use tabs to change data given to virtual-scroll, if switch data using those tabs, virtual scroll do update.
stuck at white page after splash screen in adnroid
ion-checkbox 's button does not have an accessible name.
modal have not shown on top of another modal
i have ion-datetime with max set to now.
when i change year from 2019 to 2018, it is not possible to select month to all months in 2018. the months are restricted maxdate month.
also, the current month (mar) for 2018 has restricted days 15 (today) and it is not possible set hh:mm later than now for 2018. workaround is click "done", then pick date again.
it is then possible select all months for 2018.
having a class attribute on `ion-content` of the initial loaded page prevents it from getting the "hydrated" class.
means that the content inherits `visibility: hidden` and stays invisible.
phofcode changing `class` to `[ngclass]` seems to help: phofcode
cant change the text-indent for any ion-input
an `ion-select` with multiple values (attribute `multiple` set to `true`) is initialized with a list of values (comma-separated) to select by default.
no value is selected at all.
after i upgrade ionic4 latest version, there is a routing issuse: when i have more than one page using tabs, and navigate from one tab to another, then clicking on the tab buttons changes the url but does not change the displayed page, always the default page is displayed .
when i click browser refresh button with changed url, correct page will be displayed, but clicking tab still as previous.
when changing the value from variable.scss, it only works on android 7 and 8. android 5 and 6 do not respect the changes.
you cannot access global mixins imported into the `global.scss` file, without having to manually import their relative path into the component you want to use them in.
when wrapping and ionic-slides component in another custom component different instances of that component do not behave the same.
when screen is resized only one of these instances will resize and maintain number of slides per view property.
other slides also do not maintain centering on the screen.
when adding only one instance of slides custom component the slides behaves as expected.
if you try to parse a 3rd argument in the create method.
click on menu item never dismiss current subpage and never show root page.
started an app via template using ionic start and choosing the blank starter template.
when trying to test the app via ionic serve it does not work and several errors appear in the terminal: `> ng run app:serve --host=0.0.0.0 --port=8100 [ng] warning: this is a simple server for use in testing or debugging angular applications [ng] locally.
it hasn 't been reviewed for security issues.
[ng] binding this server to an open connection can result in compromising your application or [ng] computer.
using a different host than the one passed to "--host" flag might result in websocket connection issues.
you might need to use "--disablehostcheck" if that 's case.
[info] waiting for connectivity with ng... [info] development server running!
local: phofurl external: phofurl use ctrl+c quit this process [info] browser window opened phofurl i wdm: wait until bundle finished: / date: hash: time: 10150ms error module build failed (from browserslisterror: unknown browser query `basedir=$(dirname "$(echo "$0" | sed -e 's`.
maybe you are using old browserslist or made typo query.
at unknownquery (f: lavori www at f: lavori www at array.reduce (<anonymous>) at resolve (f: lavori www browserslist (f: lavori www browsers.parse (f: lavori www new browsers loadprefixes plugin lazyresult.run lazyresult.asynctick lazyresult.asynctick f: lavori www error ./src/global.scss module build failed (from browserslisterror: unknown browser query `basedir=$(dirname "$(echo "$0" | sed -e 's`.
maybe you are using old browserslist or made typo query.
unknownquery f: lavori www array.reduce (<anonymous>) resolve browserslist browsers.parse new browsers loadprefixes plugin lazyresult.run lazyresult.asynctick lazyresult.asynctick f: lavori www error module build failed (from browserslisterror: unknown browser query `basedir=$(dirname "$(echo "$0" | sed -e 's`.
maybe you are using old browserslist made typo query.
unknownquery array.reduce (<anonymous>) resolve browserslist browsers.parse new browsers loadprefixes plugin lazyresult.run process._tickcallback error ./ansi-html 1:0 module parse failed: unexpected character '# ' (1:0) you may need an appropriate loader handle this file type.
> #!/bin/sh | basedir=$(dirname "$(echo "$0" sed -e chunk {common} common.js, common.js.map (common) 18.5 kb [rendered] chunk {es2015-polyfills} es2015-polyfills.js, es2015-polyfills.js.map (es2015-polyfills) 284 kb [initial] [rendered] chunk {home-home-module} home-home-module.js, home-home-module.js.map (home-home-module) 6.27 kb [rendered] chunk {main} main.js, main.js.map (main) 32.1 kb [initial] [rendered] {polyfills} polyfills.js, polyfills.js.map (polyfills) 237 [initial] {runtime} runtime.js, runtime.js.map (runtime) 8.79 [entry] {styles} styles.js, styles.js.map (styles) 21.6 [initial] {vendor} vendor.js, vendor.js.map (vendor) 4.35 mb i wdm: failed compile.
if i add a `ion-slides` with `pager=true` on devices with safe areas the pagination items are inside the safe area
using `slot="fixed"` makes all my text to disappear `except` the texts inside the buttons.
highlighting text selection component is not staying on the selected region
component properties e.g color="primary" not working.
i can see the classes applied using chrome dev-tools.
however they are not rendered.
able to replicate with a fresh boilerplate project with tabs option.
`ion-reorder-group` / `ion-reorder` doesn 't function if located within a shadow dom component.
i am unable to grab & move `ion-item`s.
console.log logs twice (this.ltuser, this.loans) api is called twice (createloan(val)) such that 2 loan instances are created
slotted items in an item option are not styling properly.
in an app with two basic route areas: /login and /tabs, the `ionviewdidenter()` does not fire upon logging out and back in if the first page to load is the /tabs/tab1 route.
basically, the `ion-router-outlet` makes it such that lifecycle hooks are not always called properly and application behavior is inconsistent depending upon which page is loaded first.
the exact same application has no such problems when standard angular router outlet is used.
see below for an example app based on what a community member i am working with doing (greatly simplified).
calls to methods (`@method`) from components authored in stencil _always_ error when called in angular component `oninit` and `afterviewinit` lifecycle hooks.
using `async`, `await`, or checking `componentonready()`, make no difference.
calls to `componentonready` throw the following error: phofcode attempting to call the method directly (through an elementref) also throws an error: phofcode
in firefox, when navigating back to a previous page, the scroll position is at the top instead of at the position it was before.
instead if displaying the menu on android 4.4.4 only the "gray" overlay is vissible.
`<ion-toolbar>` only selectively animates content, not allowing additional `<ion-toolbar>` elements to be properly animated during page transition.
the below code currently looks like this: 2-ion-toolbars phofimage note: 2nd ion-toolbar not animated,
i 'm using the setting for the custom ion-router-outlet animation and it is working well when using page transition in pwa.
however, when using the browser back/forward buttons the animation is skipped.
(seems like angular router 's "imperative" trigger property of navigationstart is inherited but "popstate" is not)
i 'm using `ion-datetime` to let the user select a specific date in the future.
android users were telling me about strange behavior of the app if they were selecting the last possible date of a given date range (the user can only select day, month and year).
after some time of debugging i noticed this strange behavior: on ios and web `ion-datetime` returns a date object with time value at which component itself was created.
on android `ion-datetime` returns time value at which actual change did happen.
user navigates to page x at now he waits exactly 2 minutes until he selects a with an `ion-datetime`.
on ios and web returned value is: on android value is :
on initial load of an angular ionic app, the initial view containing a link that defines an `{animated: false}` option will still animiate on first click / tap.
when i put a page in a named outlet, only the header shows, and the content has no height.
when i check the component associated with outlet, it shows "emptyoutletcomponent" console phofcode
when i use the ionselect element the back button is unreliable.
the forward button of the browser is disabled.
when i use a html select element i have _no problems_, which is why think this is an ionic bug.
my project use ion-tabs and some ionic-native.
it build ok untill i build with flag prod: ionic cordova build android --prod.
i run in my android device and it log bug error error: staticinjectorerror[t -> o]: core)[t -> o]: nullinjectorerror: no provider for o!
when tapping an ion-item that links to another route the built in ion-ripple-effect flickers twice or sometimes not at all and is not a complete smooth animation.
it 's hard to explain but as of right now i only experience this bug when running my app in an emulator or on my device.
when i call pop() promise on a ion router outlet, and i attach a callback to it, the callback is executed before end of pop.
the fab button sits between the footer and the bottom of the screen
setting translucent effect doesn 't work on ion-tab-bar.
on my iphone xs, incorrect bottom padding is applied in action sheets and when the keyboard is expanded and a footer is used.
as described in #15688. when implementing a custom `routereusestrategy` that tries to store and reuse specific routes, ionrouteroutlet bails out with the error: incompatible reuse strategy (see
for ion-datetime when a datetime value such as the time is displayed as the utc timezone.
if i install `ionic@latest` and try to execute the command `ionic serve -c` or `ionic serve --devapp` it seems that it has served the application, however, if i go to ionic devapp on my phone, i wait minutes... and no application shows up.
but when i uninstall that version and install an earlier one like for example, 4.0.0, it does serves it correctly, and can see in ionic devapp.
i am getting the following error when adding inappbrowser.
`error error: uncaught (in promise): error: staticinjectorerror[l -> n]: core)[l -> n]: nullinjectorerror: no provider for n!
error: staticinjectorerror[l -> n]: core)[l -> n]: nullinjectorerror: no provider for n!
at e.get at at e at e.get e e.get ra e.get ra p p e.invoketask object.oninvoketask e.invoketask t.runtask g t.invoketask [as invoke] m it is working fine natively on my phone but not in any browser in * production * .
i also could add the inappbrowser to the providers in appmodule since it is says the following: `ts2322: due to this, page where inappmodule is injected doesn 't even load in browsers.
fyi: i am just following latest ionic documentation for inappbrowser.
i want to display a placeholder image while the ion-img is loading using ion-img component and binding to the ionimgdidload event.
the event would fire as soon as the image start loading.
page transition is breaking on ios.
in ie11 (only browser as far / edge works) when an ionic component is used inside an ng-content and the content can be toggled the component losses its style.
in ie style are added to head, when the component is first rendered (visible) the styles are inside head.
when its toggled(hidden) styles are removed and never added again, only if its complete destroyed.
angular does parse what 's inside an ng-content even if its not shown (templates are different).
so i think problem may be component thinks still in dom and therefore does not load styles again, also in ie style special generated with a class something like `.sc-ion-button-md-64-h` why is it different in edge?
_tested only on android_ i see a delay in almost 2 seconds when navigating to the page, containing a select with 250 options (countries list).
i made a short performance research through chrome performance tab.
1.58 s took rendering this list.
_snapshot from performance test:_ phofcode
navigate to next page failed!
router navigate with 'relativeto ' parameters will only success once, after back, you can never enter target page you want.
set minimum value for example to 27 february 2019, then trying to select march 2 2019 it 's impossible.
the days of month lower than 27 are not selectable for month higher the minimum
navigation to child of data-parameterised route succeeds at first, but then fails after navigating back and forth several times between sibling routes: (home.page -> usage.page -> payments.page -> usage.page ->payments.page fails: page is stuck on usage.page, except that the back-button still works)
ion-item-sliding stop responding to touches and click events if the user closes the page using back-button or clicking two times on an ion-tab-button to go back to home if one of the list items is open (slided left or right).
when trying to add a ripple effect inside ion-item for a click event, the ion-ripple-effect is not working as expected.
when trying to load the ionic plugin in a vue project, i get the following error during the build process: phofcode
while doing the build for an ionic app using `ionic cordova prepare android` as for example, the build failed with the following error: phofcode
in 4.0.1. ionviewwillleave does trigger, but is too late when using swipe to go back.
in ionic 3 ionviewwillleave will trigger before the page transition animation.
now in ionic 4 it is triggered after the page transition is started.
so the user can drag away the current page and then it will stay that way (leaving translatex at 100%).
i am using this in conjunction with a candeactivateguard to prevent a user from leaving a page that is being edited.
when i click a fab-button in a fab-list to navigate to another page and i programmatically do `this.fab.activated = false;` or `this.fab.close();` and then i go back to the previous page, the fab-list shows opened.
floating ion label is blocking ion select from triggering when tapped on ios only.
i have tried out ionic v4 with cra and it works well but i want to use it with nextjs and i get alot of errors similar to this : phofcode
a longer subtitle in an action sheet on android will overlay the buttons, multiple buttons if long enough ion-actionsheet-1 phofimage
ion-datetime currently defaults to todays date if none is selected but does not give an option to apply an offset.
because of this, the time is not local.
a random input box appears in an input field when clicking it.
same for ios on phone and in chrome.
the application runs fine but when i run through the instructions to create an ionic project using _create-react-app_, i end up with jest tests that fail with a 'syntaxerror: unexpected token export' around one of the @ionic/react imports.
i click on different view and it 's firing different view event.
after a list update the sliding items don 't stay open so it 's impossible to use the item options, the sliding do show the option but releasing touch makes sliding automatically close.
works perfectly in non-production build.
when building for production a mixin is ignored (looks like, it 's chopped out by scss transform)
it used to be possible to have both floating labels and placeholder text, over the same ion-input, like this: phofcode but now setting placeholder text breaks floating labels.
as soon as the placeholder text is set, floating labels no longer animate.
even if you remove the placeholder text, the floating labels stay broken.
`<ion-range min="0" max="10" value="5"></ion-range>` if i set the value on this range component to be `-1`, `ionchange` fires and the component 's value is set to be -1.
using `ng-model` binding, a single knob `ion-range` control works correctly.
using the dual knob config fails to move the sliders or emit `ionchange()` events when the bound variable is changed.
note: this bug has been partially detailed in issue #17475 phofhyperlink but this write up is more complete.
i would suggest closing that issue.
padding in footer toolbar added beneath buttons, that should not be added with tab-bar visible.
if i set the color attribute on an ion-item, the ion-icon with slot="start" does not apply the contrast color of my set color on android.
when a default value is present for an ion-textarea, the ion-label does not float properly.
ion-item css styles shows the css class `item-input` instead of `item-has-value`.
this behavior is observed using latest `beta.16` of ionic/angular image phofimage the behavior corrects when focus has been applied to the ion-textarea.
when an ion-range is disabled, its knob seems to be rendered with no style applied.
this is not so much noticeable with ionic 's default light theme, but it is when the background color contrast with it.
this image illustrates this issue: image phofimage
we try to send an api post request to our server using the httpclient library while appending the api parameters using ionic formdata, the request works correctly on the browser but it fails on real android device.
when i use router of angular and navigate to another page with `queryparams`, the application hangs, and url keep adding right parenthesis infinitely, this issue happens
if i put a `ion-img` in a red `div`, i have a red space under the `img` element.
when i am clinking on different button and it firing a different button click events
we 've a scenario in our app.
we load the cached data from the local store and when we receive the latest data from server, we will update the list.
so when we 're doing this, page is flickering when update happens.
i understand that when we set data it may flicker, but `trackby` option should solve this, which is not happening.
using the angular router to forward navigate after a `candeactivate` route guard has stopped a `navcontroller.back` from taking place results in the wrong navigation animation direction and a reset ionic push/pop stack.
i created the slider with fixed images when is open in ios the slider rush to last slide by itself.
it work properly in android
after adding ion-textarea in ion-list with other ion-items width of the ion-textarea is not aligning properly.
also the bottom border of the last item should not be enabled i suppose.
ion-checkbox and ion-spinner styles are broken on chrome (the version which is shipped with crosswalk).
most probably also other chrome versions are affected.
ion-item doesn 't have `ripple-color` css variable
on second opening of modal view with ion-slides and ion-button inside of modal template ion-slides becomes unresponsive, without ion-button everything is working correctly
ion-select-option excludes everything except text
when attempting to create a new `loadingcontroller`, and when attempting to call any method on it, i receive the below error in my browser console: `typeerror: cannot read property 'present' of undefined`' i am using ionic with capacitor.
i'm not sure if the issue should be filed with them or ionic.
i figured i would start here, since the issue is with ionic's `loadingcontroller` feature.
i can scroll while changing page which is not "natural" for ios users.
`ion-select` with `interface="popover"` does not display anything in the popover when using ionic with stencil because `ion-select-popover` is not rendered.
extra white space is added above and below `<ion-list />` in `md` mode.
in the ion-datetime user can choose dates that do not exist, for example, february 31. only after selecting february, closing ion-datetime and clicking again on the ion-datetime, the number of days is updated to 28.
`<ionic-item text-center>this is some centered text</ion-item> ` text is still left aligned
label is aligned incorrectly (missing margin?)
the spinner that appears in the loader (among other places, including the spinner tag itself) follows a path which is not correct.
see the gif hosted on imgur below for exactly what is happening.
this occurs on only one of the devices we've tested phofurl - recorded from chrome dev tools screencasting tool, but occurs on device itself
creating a floating label ion-input and adding this style phofcode or this one phofcode will results in changing only the "start" side.
date picker scrolling is really slow and imprecise on android emulators and android devices it also causes warnings in developent mode and errors in production builds.
those errors are probably causing the performance problem.
i have experienced this issue in a real project using ion-datetime and using the picker controller but it occurs also in a blank project adding only an ion-datetime its home.page.html.
the warnings/errors are: development mode (emulator): ignored attempt to cancel a touchstart event with cancelable=false, for example because scrolling is progress cannot be interrupted.
ignored attempt to cancel a touchmove event with cancelable=false, for example because scrolling is progress cannot be interrupted.
image phofimage production mode an android phone i am getting erros not warnings (in emulator they are still warnings): image phofimage
if a page has background image set to `ion-content`, then while navigating to that page is flickering.
when creating a button using --color and --border-color cannot be set to linear-gradient.
the only variable that displays a gradient is --background for solid fill buttons.
ionic-datetime does not support clearing the value once it is set
use tabs example project, runs on android device, while tab1 is active, press&hold tab2 for seconds then release, you will see tab1 and tab2 are both in active state/color
if i declare a class in global.scss as: phofcode and then try to extend that class in the style sheet of any page, e.g.
und phofcode the compiler complains with: > ".page-sample-class" failed to @extend ".sample-class".
> [ng] the selector ".sample-class" was not found.
so the selectors defined in global.scss can be used in a page 's template, however they are not visible a page 's style sheet.
dynamically update values (upper, lower) of dual knobs and the position of knobs will not change.
they will stuck at the same place, although the values show that they should be somewhere else.
when i go navigate from a tabbed page to another page and then use the ion-back-button from there, the tabbed page 's `ionviewdidenter` method is not triggered.
video showing the bug live on a different code base: video showing the bug live on a different code base: phofimage phofhyperlink
&lt;ion-header> overlays content, when it is placed on tabs page globally, instead of specific tabs.
changing the keyboard resize mode in the config.xml with `<preference value="body" />` results in the alert dialog box staying stationary when keyboard is opened.
on ios, text input inside an `<iframe>` won 't receive any text value when typing using device keyboard.
immediately after tapping on the text input, the device keyboard popup then typing on keyboard, text input won 't receive any value.
when focussing an ion-input element in ios, the keyboard opens and scroll up so that the input is properly in view.
if you focus another input just below it, keeping the keyboard active, the view scrolls down so that input is halfway covered by header.
after installing app on android v4.4+ phones, after loading splash screen content doesn 't appear.white screen only appear.
but in above v5.1 android phones, this problem not occurs.
the side menu bar trigger not working on startup in some android versions.
i have a form with ion-select using interface popover.
i assign a custom class using interface options.
my custom styles are not applied to the select popover unless i turn off view encapsulation.
when one navigates multiple times using the same route but with different queryparams to a particular page then that page no longer receives activatedroute events for those queryparams.
when running app on android, it 's stuck on white screen forever.
but works great when running ionic serve or ionic lab.
toast or alert controllers cannot be used when there is not connectivity.
i want to display a toast message when the user goes offline: public async showoffline() { const toast: any = await this.toastctrl.create({ message: "you are offline", duration: 5000 }); await toast.present(); } this works fine online but as soon as i got offline i get an error.
this happens in the browser.
when opening a date time picker in for example february.
the day cannot go past 28 whatever month it is.
this also occurs when a minimum date has been set.
so let's say you mark today as minimum then it can never go before the 8th untill the date is saved and reopened later.
there is no css property that makes it possible to change the opacity of the placeholder of an `ion-select`
i have a sidebar application.
in the side menu i have router links like this phofcode i have pages like this - home page order list page order detail page if i go from my orders list page to order detail page by clicking an order it shows back button in order detail page.
now, if i am in order list page and from side menu i again clicked on order list page(/myorders), after that when click on an order, am navigated to detail page but ion back button is not appearing in the detail now.
tabs are shown when keyboard is shown and because of that the content is moved with the height of the tabbar.
tapping on an ion-button (ios 12.1) with color attribute doesn 't show its tinted color highlight.
currently the ion-popover and popover controller positions overlays over the triggering / target element.
try to override a card using the following: phofcode see that nothing changes
i trying to get local notifications to work, are there issues ??
i have almost try everyting, emulator, real phone and more.
please do not submit support requests or "how to" questions here.
instead, please use one of these channels: phofurl or phofurl
started a blank "starter" project (tabs).
everything works fine, i can run the starter project with "ionic serve".
as soon as i import: import { file } from in the class and add a file via dep.
injection to the constructor, e.g.
: constructor(private file: file) { .. } without doing anything with the file, just added -> project breaks.
when trying to run with "ionic serve" it compiles like a charme, but browser window stays blank and there are javascript errors in browser console (typeerror: object(...) is not function) i also tried to install rxjs-compat package because i thought it would probably be version/dependency conflict of rxjs (ionic-native/file requires rxjs4, ionic4 angular projects come with rxjs 6....) - but that didn 't change anything.
using the angular reactive forms api, when `markastouched()` function is called over a formcontrol, `ng-touched` class is applied to the `ion-item` element but the `ion-touched` class is not applied.
this problem occurs with each of the angular forms `markas
when loading the app in the browser the following error occurs.
i just updated my app to ionic/core@4.0.1 and also updated to the newest angular is this an angular problem or ionic?
`typeerror: failed to construct 'htmlelement ': please use 'new ' operator, this dom object constructor cannot be called as a function.`
ionic navigates to a 404 when using `ion-back-button` with a `[defaulthref]` of a relative url such as `../`.
an ion-input element with its clear button enabled (`clearinput `) will lose its input focus once the clear button is being pressed - which results in the keyboard hiding again
when using tabs together with a tab bar, the tab bar properly hides when the keyboard openes for input.
when switching to another input element while the keyboard is still open, the tab bar appears on top keyboard
using any ionic controller (e.g.
alertcontroller, toastcontroller) and creating htmlionelements, e.g.
htmlionalertelement or htmliontoastelement, there is no intellisense in webstorm.
the icon misaligns and is displayed too low when an ion-item-option is used with a routerlink
when running `$ ionic cordova run android --verbose`, build fails with output: phofcode (displayed path android_home is not the one set in path in
on setting up max param in datepicker months are not getting changed even if you change year ionic_datepicker_issue phofimage
ion-img in a horizontal scroll div does not lazy load.
instead everything is loaded eagerly
on some pages some icons are not loaded even though correctly defined.
sometimes all the icons are shown, sometimes only a subset.
this image for example misses the arrow-back icon in the top left and the "images" icon next to 'galerie ' image phofimage this is dom-tree that is created, as you can see it is showing svg for camera icon but not for images icon.
i have not idea whats going on.
when changing the root page the lifecycle events of the previous and next page seem to fire out of order.
so, lets say page a is currently displayed.
navigating to page b fires the lifecycle events in following order: 1. page b: ngoninit 2. page b: ionviewwillenter 3. page b: ionviewdidenter 4. page a: ngondestroy (ionviewwillleave and ionviewdidleave do not fire at all)
according to docs, we can enable infinite scroll event once it 's disabled by toggling as specified here phofurl ( this part of code:- = ) but when i am trying to enable it again, it 's not happening, tried printing and `this.infinitescroll` to console, the "disabled" property 's value is differing once it has been made true.
tried making it false, but it 's not happening.
when removing an element from the array associated with the [items] property of an ion-virtual-scroll, the item is not removed from the view.
referencing this because i 'm assuming it is a webview bug but i don 't know that for sure.
i 'm wondering if by some reason this is by design.
the problem occurs when executing the command "ionic cordova build android " with the flag --prod, if it runs without the flag, no error occurs.
lots of ionicons are not loading.
`arrow-up`, `log-out`, `people`, `alarm`, `paper-plane`...
$event.relatedtarget is null upon an _ionblur_ event
i used the sidemenu starter and moved the split-pane from the appcomponent to a separate component so i can have a login page at root level and make all the stuff with side menu available to authenticated users only.
this seems to work so far, but there is a page transition animation only in first click on any side menu link.
it does not matter which link i click first.
see this video phofhyperlink .
the browser (tested with firefox and chrome) as well as platform (ios or md) does not matter, issue stays same.
producing duplicated images in the --prod build.
using a named ion-router-outlet causes animation and layout to break.
named outlets appear to be essentially very difficult to use at this point for any built-in functionality.
header and footer collapse together at the bottom of the outlet viewport, and content is not displayed.
this layout bug be fixed with css, but animations do not function at all.
screen shot at 8 56 45 am phofimage
when setting up the color the a custom svg, part of the image does not get the color.
i 'm working on a page that has a contenteditable div.
i want the keyboard to be hidden, when the user scrolls down while editing the div.
to do that, i called this.keyboard.hide() in onscroll event of ion-content.
the keyboard is hidden successfully, but it leaves a blank space behind for 0.5s or until the scrolling is completely finished.
ion-segment does not work on browser, it cannot be scrolled.
in a corporate theme i 'm required to add a gradient to all buttons.
the gradient is derived from the color property that is set to a component.
in the betas and as far as i know also in the rcs of ionic i could override the background like this: phofcode unfortunately this approach has now also stopped working.
it would be great if i could just do something like this: phofcode
for now i can 't use params in routes - only queryparams.
button will not be selected if ill use: phofcode it will only be selected with queryparams phofcode my button in tab component looks like that: phofcode
as is the title oninit is only executed once.
maybe it 's related to the outlet but it is annoying because every other pages behave differently.
on the first ever slides page, the sliding does not always work.
it is very late sometimes.
or does not even work.
but all other sequential pages are fine.
after a research i found that the slides are not loaded from web.
i use <ion-content> methods -> scrolltopoint to scroll to my list position.
if this is as start page ( i visit it directly with url), it works as expected.
but if i router to it from other page, it will not work.
i can't type in ion-input and input fields in safari and on ios simulator (tried both virtual and hardware keyboard), however when i type in chrome or firefox (mobile/desktop) text is showing up perfectly.
component does not load.. web page empty when referring ionic.js from local copy screen shot at 10 17 31 am phofimage
css class given to action sheet controller is not applied here is a image phofurl
ionblur is triggered once the user click outside the range
when implementing virtual scroll with any content in the containing tag the page renders on start up.
as soon as the only thing inside the container is custom component it stays on init process, elements are given correct positions but class virtual loading is still appended to element.
this only gets removed when i scroll on page and then content shows.
when i return from a page, the header of the previous page appears for some milliseconds and disappears.
ionbutton component onclick event is being called twice with ionic 4 with react
when using ion-input, ion-datetime, and ion-select on the same page and using placeholder (not floating), the opacity of the fields prior to selecting a value are different.
this becomes more apparent when changing the font color to white for field input/selection
how you can see below it goes to wrong tab.
i 've tried to figure it out with outlet and later with child routes but i failed twice.
screen recording at 20 20 07 phofimage
long ion-select-option won 't be displayed properly in the pop-up compared to ionic 3
executing `ng build --base-href /some/path/` with this code: `<ion-img src="./assets/some.svg" />` outputs the image with the path `/assets/some.svg`.
routerdirection not setting the page as root page.
cancel button is appearing behind search icon
when creating an alert window with some checkboxes and the property `disabled` is set to true the behavior is correct (doesn 't let you select it) but it shows exactly the same as the other checkable options.
compiling app takes a long time (1 min+) when referencing '@ionic/react'
when zooming in on a slide and sliding to a different slide.
the old slide pops back up and disappears again.
when reordering the items on a list, the click event fires as soon as an item is moved down on a list.
but if the item was moved to up , it works as expected.
the icons do not display
when installing @ionic/vue version 0.0.1, the typescript build complains about multiple inheritance issues (typescript version 3.2.4).
setting the [(ngmodel)] on an <ion-select> component fails when there is a ~55 ms or more delay between oninit and the population of the various <ion-select-options> elements.
this typically occurs when populating the values via an api call but it can be demonstrated with a simple delay.
the correct option is selected but not shown.
if you click on drop down caret, value instantly displays.
when an alert is dismissed via click on backdrop and there is an element with a click handler the alert closes and triggers that elements click event.
when there are two controls, ion-select and ion-button inside ion-item clicking on ion-button will always open ion-select control.
in the new rc, upon clicking the hardware back button in a tab, it does not go to the previous tab as before
on ios only, whenever the user tries to scroll the dropdownlist, it closes immediately.
when creating and presenting a modal view via modalcontroller, it is not possible to navigate within that modal, e.g.
like navigating to another view within that modal.
when using the router to navigate by url, it will open that url behind the modal instead of the modal itself.
on 4.x docs site, the calendar day select is not updating with number of days in selected month, after changing month.
if i open the calendar when a day in february is already selected and change to any other month, the max day value i can select is 28. higher day numbers are visible, even when february is selected, which a bit counter-intuitive.
in safari (both on ios and mac) spinner stops spinning when data are loaded.
data are loaded from firebase + angular fire + observable.
it looks like it is related with change detection in angular.
very likely it also affects other components, that are animated.
i 've made a video ( phofurl that shows what is happening and you can reproduce it with the repo below.
what you can 't see in the video is that when safari loaded the app (spinner stopped) and you open new tab and go back the previous tab (with app loaded) spinner spins again.
it was working properly in rc0, i 'm not sure about rc1.
my safari version is 12.0.2
back from page3 to page 2 using ion ion-back-button, now i use hardware back button then it go to page page3 and ion-back-button is hide.
working well if use only hardware back button or ion-back-button, if used both together then not working.
after navigating to a page with navigateforward, if i immediately go back using navigateback (for example, in ionviewdidenter or in the constructor) the child page will be invisible but in front of the previous screen, which blocks the ui interaction.
it seems to be a bug over the ion-button whenever the disable property changes.
this seems to be happening only when you have a ion-button that you mark as disabled based on a property on your component and this ion-button is inside a ion-buttons component (if the ion-button is not wrapped up inside ion-buttons then it works just fine).
once the button is disabled it remains this way under hood action gets triggered because button is actually enabled but style of button remains as disabled.
ive review generated html and css classes and once button enabled theres no reference to utton-disabled class.
another thing that from enabled to disabled it works, you can see difference.
by triggering detectchanges whenever you switch from disable state doesnt work either
implementing a virtual scroll with virtualtrackby does not effect.
but beta docs shows virtualtrackby implementation.
when forcing the `<ion-toolbar>` to `mode="ios"`, on android devices and ionic serve in chrome, the toolbar elements are not displayed properly.
but when forcing the mode ios in `app.module.ts` with the there is no problem
since rc0 my ion-back-buttons stopped showing up.
i 've created a new project and added a back button, but there it doesn 't show up either.
the color attribute of the ion-searchbar component no longer works in ios mode if ion-searchbar is child of ion-toolbar and ion-toolbar has also set the color attribute.
- if scrolling on a ion-list with ion-item-group the groups scroll properly, but the content of the ion-items doesn 't scroll together with their group headers and the list flickers - this only occured on android devices opening web app with firefox browser ionic conference scrolling issue phofimage phofhyperlink phofurl
ion-toggle is not working with reactive forms.
even defining a formcontrolname in the ion-toggle does not seem to respond to any event and thus the formcontrol is not updated (invalid, dirty, touched, etc).
cannot modify the border-radius of the fab-button and it has been tried in many ways to customise the border-radius property
cannot modify the border-radius of the fab-button and it has been tried in many ways to customise the border-radius property
ion-slides loop options is not working correctly.
the second time loop options is struck for first image
when focussing an `ion-searchbar`, the search icon disappears.
[4.0.0-rc.2] ion-slides do not resize after screen orientation changes in ios
navigating to a new page and then directly either swipe or click on the ion-back-button sends you back to the previous page, but the application freezes.
the ion-back-button also seems to be stuck in the header as only thing you can still click at.
when using an infinite scroll with a screen able to show more than the initialization row number, doinfinite is never called
when you create a new project "sidemenu" with the ionic-cli and replace ion-router-outlet with router-outlet, the layout breaks
when navigating away from a page that is scrolled to the bottom (or near it), and the data is cleared, navigating to another route without animation will cause click events to be blocked.
toast buttons don't trigger handlers in rc2.
when a `ion-list` is nested in a `ion-list` and they have conflicting `lines` property values the outer one is overriding the inner one due to a lack of css specificity.
i want to make both ion-select and ion-input in a row, which allow user to select phone number prefix in ion-select and insert their phone number in ion-input.
i am using ion-col size="6" for both ion-select and ion-input, however the ion-select doesn 't render correctly
the fab button sits between the footer and the bottom of the screen
when navigating with phofcode the query parameters are lost.
they cannot be retrieve by the phofcode and they are not reflected on the url.
but when navigating directly with angular's phofcode they are retrive and reflected in the url as expected.
please see screenshot simulator screen shot - iphone 5s - at 22 03 47 phofimage simulator screen shot - iphone 5s - at 22 03 52 phofimage everything works from ios 11. tested both on devices and emulators :)
after opening a modal and either pressing tabs on keyboard on desktop, or navigating using voice over through phone accessibility tools, the navigation goes over the elements in the underlying parent page, and not in the active modal.
icons are not appearing on a physical android device (android 6.0) but appear correctly on an emulator (android 5.x)
when executing ionic serve --lab the lab does not display the windows view nor does it display the titles above the different platform views.
the scroll of simple content in ion-content lags, doesn 't show the scroll bar indicator when scrolling, and jumps.
when building platform and then deploying, several assets are net::err_file_not_found by building i mean `ionic cordova build (platform)` running/live reload works fine.
this happens on starter tabs app with the below ionic info.
occurs for atleast ios and browser platforms.
the methods phofcode and phofcode of the phofcode returns void instead of returning the value returned by phofcode .
see commit phofurl this is a breaking change not listed in the release notes.
modal page shows up even when not presented.
ion icons not visible if npm audit fix
when you use the split pane layout (ion-split-pane), and you scroll the right pane, you can't tap buttons/menu items in the left pane while scrolling (and vice versa).
this mainly manifests when running on a tablet device (tested with ios) and scrolling through long content.
you have to wait for the scroll animation to end before allowed to tap a button in left pane.
virtual scroll throws an error "typeerror: cannot read property 'context ' of undefined" and does not render anything when trying to repeat table rows and data
ionfocus event not fired when focus on ion-date time component.
when nesting a heading (`h1`, `h2`, ...) inside an `ion-label`, the `overflow: hidden` and `text-overflow: ellipsis` attributes don't get inherited (anymore?
`ion-chip` used in shadowed component don 't inherit the css4 variables values.
for example, if i set an `ion-chip` color to `primary`, it will remains not styled
loading pages using `@angular/router` `params` appears to cause a hitch in the page transition animation (only have tested native ios), see below:
ion-grid doesn 't render grid layout - all columns are centered wrongbehavior phofimage
after navigating back to a previous page, an ugly shadow appears in the middle of the header during the animation.
this problem occurs only under safari in ios mode.
here's a video of the problem: phofurl
forms using ion-inputs always say go on mobile browsers.
while i 'm running an app on an android device (pixel 2 xl) and using chrome 's inspector on mac os mojave), occasionally the app content won 't be rendered properly (for example, text will be very blurry/pixelated).
see the following screenshots: blurry image: blurry phofimage good: good phofimage
the selected date on the datetime picker does not update while choosing a date, this has a few issues with the min and max properties:
when switching between false and true for the disabled property on ion-segment-button, the opacity of the tab remains low, and only returns to 1 after selecting the tab.
giving impression tab is disabled while it is not.
upon clicking a tab button, iontabbar.selectedtab returns the original tab rather than the tab clicked
specifically, i 'm attempting to modify `--padding-bottom` on `ion-content` so that the `ion-fab` does not cover my list items when the user scrolls to the bottom of the list.
doing so sets `--padding-bottom` of content and fab.
if you open a page from a page, there is a "can-go-back" class added to the app.
if you open from a link, and the page has back button, with default href to go back, it doesn 't add that class.
the end of content is under the scrollable zone limit.
i had to insert an empty div with a height of 60px before the </ion-content> tag.
rc.1 isn 't working in production mode ( `ng build --prod` / `ionic build --prod` ).
if you run without --prod , everything is working there are already some issues about (see for there console logs): `unhandled promise rejection: c.data is not a function ; zone: <root> ; task: promise.then ; value: typeerror: c.data is not a function` (#17032 / #17033 ) #17029 other errors are: - menu: must have a "content" element to listen for drag events on.
i will close them so we just have one issue about this topic.
it 's not only related to `@viewchild()`, ion button disabled is also not working and slides only shows the first side i did some resarch and the issue must be related in #16966. if i build with this pr, production isn 't working anymore.
i can be wrong, so everyone can do tests too :)
- in dev mode, no issue.
- in prod mode, the `ion-slides` is populated, but is not functional (swiping, pagination...).
the following error can be seen in the console:
when serving the app with the command `ionic serve --prod` ion-slides show only the first of n slides and the browser get an error in console: schermata alle 09 36 07 phofimage
can not retrieve `ionrouteroutlet` (always undefined) with the code below in a *linux built apk*
phofcode after updateoptions runs, i hope the select overlay shows only "gg".
trying to implement the swipe or drag event for vertical swipe up or down.
while using tabs routed, css animations doesn 't works if you go to a route outside the tabs module using `nav.navigateroot()` img_5714trim phofimage
when i close a modal while editing an input (positioned from a certain distance of the top) before closing virtual keyboard, it became impossible to interract with all thing that can be "interracted" in the screen (button, input, etc).
the toolbar icon is flashing once after navigating with back-button.
icons are missing with the following new configuration: { "glob": "
if statusbar is hidden then the application content will not resize when the keyboard is shown.
this leads to input elements being covered by the keyboard.
not tested on ios or windows.
right margin for ion-avatar with slot="start" in ion-item has right margin = 32px
ok, so this is a really weird bug.
i have a number of projects on my system, and whenever i run my ionic app onto my ios emulator with live reload enabled, everything works fine.
however, when i run the app without live reload i then get a completely different app loading.
this isn 't even just a different app, but it isn 't even an ionic app.
the app that shows up after the expected splash page is an elm 0.19 single page that have been developing.
phofurl the above video clip is taken directly from the simulator.
you can see that when the is opened, one brand shown as splash page, but then after splash page goes away we are left with an with completely different branding.
the with different branding elm application am referring to, and you can clearly see elm reactor running on bottom right of simulator.
i just copy paste the default tab code provided in 4.0.0-rc.0 docs phofurl and it gives me the error error error: uncaught (in promise): error: template parse errors: 'ion-tab ' is not a known element:
this issue manifests on mobile devices (video of this process further below): 1. attempt to swipe back to previous page 2. while swiping, let go so the current page you are on stays on screen 3. now fully swipe to go back a page 4. attempting to click on a button or item no longer works
the placeholder for an `ion-select` has a lighter color than the placeholder for `ion-input` or `ion-textarea`.
i have attempt to declare .inner-scroll { background: transparent none !important } and also i have set --ion-background-color { background: transparent none !important; } however i dont get the expected result to display the camera.. i only get to view camera display when i manually remove it on the inspect tools.
ionic lists a `@angular/router` peerdependency locked to a specific minor version.
adding the ion-checkbox to an ion-item behaves different than with an ion-input or other interactive components.
the ion-item does not get the class .item-interactive applied, so the styling get a bit different from the other components.
swiping from left side towards right while app is starting blocks all touch input.
this situation occurs if the project has a side menu.
when inspecting the issue via chrome devtools, body has if app isn 't swiped while starting, body doesn 't have that class, and input works as it should.
a regular list with items does not show its bottom line correctly which is too short.
a regular list with items does not show its bottom line correctly which is too short.
a brand new angular project has a compile time < 1 second.
when i add `@ionic/angular` , the compile time becomes on average > 5 seconds when using it with `ng serve` any idea why this happens?
is this an ionic issue?
ion-input in narrow ion-item does not display correctly in firefox firefox: screen shot at 17 10 40 phofimage
text only buttons in toolbars are misaligned w.r.t.
creating & presenting a modal does nothing.
no modal is shown on screen.
the `ion-icon` is not aligned correctly on edge.
i 'm experimenting with ionic v4 using @ionic/core and @ionic/vue.
`npm run build` is failing due to a typescript error, similar to what 's documented in #15810, here 's a snippet: phofcode this is because specifies @ionic/core v4.0.0-beta.12, which is the release exactly prior to when #15810 was fixed.
bumping @ionic/vue 's core dependency to v4.0.0-rc.0 fixes this issue and results in successful vue-based builds.
getting correct activated route using angular activatedroute service only works the first time when "ion-router-outlet" is used and router navigationend event occurs.
using the `ion-tabs` component, clicking on `ion-tab-button`s redirect to wrong url when trying to remove `/tabs` from `tabs.router.module.ts`.
clicking the different tabs throws error; see error logs section below: error logs indicate the router outlet portion of the url is dropped.
but if i specifically copy and paste the correct url for each tab, it renders ok; but seems every content on page is disabled.
while using an android device (untested in ios), navigating between inputs fields is not possible (i.e there 's no "next" button in the keyboard, just "go").
slidesdidload does not called after first time load.
it opens fine first time and autoplays but after its cached its not called at all.
see below attached code home.page.html and home.page.ts, what happens here is first time it works fine but as soon as i click any of the <a routerlink="/mainpage"> links and get back to this page from main page slidesdidload never fires.
iontabs 'ionchange ', 'getselected() ' does not work in rc.0
i use a shared header component across several pages which displays a profile picture, name, and followers.
when i click on the profile picture, i am sent to the artist page as expected, but when i click the back button am routed to the tab root page instead of previous page.
using `ion-back-button` from a tab other than first tab takes you to first tab, not tab that launched the child.
when using ionic tabs and tapping on a page element, and i am routed to the correct page with a back button.
to reset or go back to the home page, i can tap the tab icon at the bottom of screen.
this works as expected, however, if i tap tab bar icon twice (or more) it seems to mess up router navigation, so when i click on an element to go another screen, back button does not present itself and (on ios) animation slides in from left hand side of screen.
ionic 4 datetime picker shows three dots (like this: ...) instead of am/pm when using the picker-format="hh mm a".
similarly for picker-format="hh mm a" it displays pm correctly but still has the three dots instead of am
i have a long list in my root component (homecomponent) which each has a button to open a popover to choose a category.
problem is, if i use ion-content for the popovercomponent (categorypicker), the popover can 't be scrolled anymore.
if i don 't wrap the popovercomponents html code in ion-content, i can scroll the popover, but if try to overscroll in popover, background gets scrolled.
ionic-webview plugin requires ios 11, whilst ionic as a platform claims ios 10 support
run on device of ios 12.1 when tap on an editable block with html child content, you will find that, when tap, keyboard open, then tap, keyboard hide, and so on..
ion-item line="none" has bottom border
`ion-router-outlet` is being forced to fullscreen size even when it is used with a sub-page.
there is now css variable to add custom shadow dom for toolbar-background.
opens up in-app itself with no close button although code says to open in a safari browser image phofimage
an `ion-button` within a header toolbar is initially rendered as disabled.
when removing the `disabled` attribute from that button (e. g. by clicking another button), the button still appears disabled, until it is hovered.
ion-anchor tag is showing parsing error in ionic v4 release candidate.
but, when i import custom_elements_schema in my signin module, it is working fine.
ion-refresher works for the first time visiting the page.
once we go to some other pages and come back, the ion-refresher doesn't work anymore on ios.
works as intended on android.
adding the following code to my app global stylings / theme: changes the color of ion-cards as well.
when you tap on android back button, it can unexpectedly switch tabs
running basic blank app on android 5.1.1(api 22),throws vendor.js: line 47032 : uncaught typeerror: undefined is not a function.
clicks on ion-toggle do not activate the component, sliding it does.
please note that this only happen in browser, mobile is fine.
it 's also working if you enable the 'device mode ' in chrome dev tools ( ie, simulating a mobile device with chrome), which i suspect means the touch event is working.
using button "ion-back-button" does not trigger history go back, e.g.
: * switch between some tabs.
* open subpage * go back using ion-back-button * click back button of android device (the one at bottom) subpage is opened, which was closed using ion-back-button bug gif phofimage
i have 3 lists wrapped in swiper slides.
on changing orientation from portrait to landscape font-size of ion-item in ion-list is increased.
but on changing the orientation back to portrait still large font size is used.
using swiper module phofurl instead of ion-slide
when scrolling and pressing tab buttons, navigation is blocked.
when creating ion-segments with mode="md" when i run the app and i navigate to the page with the ion-segment, the buttons are not shown and working.
the text is above each other.
generation of millions of icons in the root folder (www).
clicking on the item frodo baggins or sam in the documentation of the modal component causes an error.
after the error occurred examples freeze and page must be reloaded.
an `ion-tab-button` without a `tab` attribute but only a `(click)` attribute will throw an exception on load that tab is required.
on click it will try to navigate to which again will lead to an exception which also prevents `(click)` to be executed.
the code sample below does not allow deselection of radios - at least not simply by clicking on a selected radio.
i have some items/cards on my tab pages and navigate to other pages when i click on them.
when i go back to the tabs pages from those views, my lifecycle events like `ionviewdidenter()` do not fire.
they fire when i'm changing tabs, but when i am coming from a non-tab view, they never fire.
when using the routerlink directive in a fab-button, it became huge in the screen.
without the directive, it 's ok.
i 'm having this trouble, since i upgraded to ionic 4 beta.
first, when this problem has occured, i tried set "max load files in linux" [/proc/sys/fs/file-max] to and then i tried to install the newest versions of all dependencies (angular, ionic, nodejs, npm, cordova).
it helped for some time, till i didn 't restart my computer.
then had to update all dependencies again and it worked again.
but actually on ionic 4.6.0 nothing helps.
if start ionic serve, localhost starts in my browser, but after hitting ctrl + s nothing happens.
recompilling in my console doesn 't start and don 't know why.
is there anyone who has some idea fix this issue?
after adding angular 's service worker with `ng add @angular/pwa` then building a cordova build (tested on android only) with the serviceworker flag in `angular.json` removed (or set to false) the cordova build still outputs in the console how the service worker failed to install (which it should) but it shouldn 't be trying to install service worker in first place.
same bug as reported earlier phofhyperlink but that does not fix the core issue but rather uses a workaround.
the modal controller phofhyperlink has a link to the modal page, but it doesn't link to the correct endpoint.
a disabled ion-checkbox can still be tabbed to and activated with space bar
i 've juste updated from beta 17 to 19 and drop shadow effect around modal not appear anymore on "ionic serve".
while reviewing the css, it seem --box-shadow var is present in the css inspector but have no effect.
the border between the split pane menu & content appears grey.
clicking an action sheet button shrinks it.
when i choose a tab, it highlights the text/icon, and the other unselected tabs are grayed out.
however, when i press the back button and navigate to a previous tab, the selected tab gets highlighted, but previous tab stays highlighted
side menu disappear when i navigate between 2 pages with side menu who contains 2 subpages each.
ionic beta 19 sidemenu starter project does not work on android devices with webview version < 54 (versions with no css vars, and no shadow dom).
i 'm getting blank screen on webview version 33 and 44 with all the polyfills uncommented.
both devcat & chrome developer console reports error: > uncaught syntaxerror: use of const in strict mode.
vendor.js on the line that declares icon_paths `const icon_paths = {....` screenshot here phofhyperlink tested on samsung galaxy nexus i9250 android kitkat 4.4.4 webview (33.0.0.0) android x86 emulator android marshmallow 6.0 webview
for navigating purpose, `[routerlink]` works fine if use in a page but doesn 't if use in a component.
for example: phofcode works fine if use in a page but doesn 't if use in a component
jitter phofimage jitterdesktop2 phofimage jitter on desktop and on android device when deployed.
click on contacts click on home and the problem is seem
when i have more than one page using tabs, and navigate from one to another, then clicking on the tab buttons changes the url but does not change the displayed page (router-outlet does not update).
if you create a modal and put it inside the entrycomponents and inside is `<ion-progress-bar>` it will show you an error if you want to open the modal: `error: cannot find module the modal will not be opened.
if i remove `<ion-progress-bar>` everything is working again.
i have a tab based app.
inside it i open, upon clicking a button, another page that contains tabs.
everything works fine before i open it, and inside that page it works fine.
the problem is when i navigate from that page back to the main app, navigation in the app stops working.
hovering over the tab button shows button in "primary" color rather than the color of the selected tab.
you need to change the color attribute of tab bar to something like "dark" or "primary" to really see effect since with default starter theme "primary" and selected tab are same color.
since phofurl its impossible to get a reference to the names of the lifecycle hooks (like `lifecycle_did_enter`) as they are no longer exported.
i had to import them directly via `from and had to add ".js" otherwise jest didn 't find the file...
using the updated lazy loading tabs method specified by manu in the beta.18 release notes, transitioning from one page to the next within a lazy loaded tab produces a popover animation (with the tab bar at bottom).
when i try to call the select method in the iontabs, the following error is shown: `property 'select' does not exist on type 'iontabs'.`
`platform.resume` emit currently `void` (see phofurl i think that this isn 't correct.
for example, cordova will emit an event when resume is triggered.
this is notably useful when an app is stopped and restarted after the camera would have been use, see: cordova documentation -> phofurl particulary: phofcode camera quirks on the forum -> phofurl old related repo -> phofurl
considering the following code: * home.page.ts (line 3) phofcode * login.page.ts (line 2) phofcode * network-home.page.ts (line 7) phofcode and running the build command: phofcode i get the following error message:
query parameters are not preserved when using back button.
i want to copy some styles to assets folder.
for this, i used the copy.config.js in version 3. i created a file copy.config.js and add a code: js var copy = copy.copystylesheets = { src:
extra space under the toolbar of the footer
i am using ionic4 + vue many times i am seeing that search bar does not render styles at all.
i have seen this in previous version of ionic also but in beta-18 it is occuring more frequently.
building doesn't work beacause 'slides' was not found in '@ionic/angular'.
you can select a non-existing date: ion-datetime-wrongdate phofimage ion-datetime_wrongdate 2 phofimage
ion-segment-buttons edges out on both side of tool bar when you have more than 4 ion-segment-buttons.
this dose not happen on 4.0.0-beta15
after upgrading to beta-18, the `ion-refresher` component is behaving really strangely.
basically, when i go to pull down my refresher on a tab page, the content that was on the screen when the app initially loaded is still there.
kind of hard to explain entirely through text so i'll provide a gif and a gist of my html tab pages as well.
after upgrading from beta 17 to beta 18, `<ion-virtual-scroll>` elements error out and do not render.
in chrome debugger, i see: phofcode
error in console: error: template for virtual item was not provided.
no items or headers are shown.
i set whole app in ios mode, and set mode="md" in pickeroptions of ion-datetime but only buttons have md 's style, columns still have ios 's style like image: ion-picker_bug phofimage
currently the `ion-slides` component allows the ability to pass in any valid swiper options, one of which is the `autoheight` option.
when set to true this will nicely adjust the height of slides to match height of active slide.
the issue is that if your slides contain data that could change, like waiting for a network request before loading items, height of active slide can change but swiper will not update height.
there is a method available on swiper instance `updateautoheight()` that will update height correctly after fact.
when the document is rtl, the `offset-*`, `push-*` and `pull-*` directives do not render as expected.
the selected value is not displayed in ion-select.
it gets displayed after clicking the field.
when angular form reset is called with {emitevent:false} the control pristine status is changed to dirty and valuechanges is fired.
this behavior occurs when ion-input is used.
and reset event on select box works as expected.
i tried replacing the ion-input with angular material input and html5 input field.and they work as expected.
this issue exists if i use ion-input.
this is basically a duplicate of #15345 but the problem is still around.
creating a loading and then
installing the native fcm plugin phofurl causes android build to fail.
it started happening 4 days ago.
* note * : i have been able to replicate the issue with the latest cordova and ionic versions also
field has disabled attribute set to true in the form, when i call enable() on that field it does nothing.
scrolling is slow especially on year.
during the animation of page transitions, the full screen background is not animated, instead painted at once.
on clicking on any input field on the iphone landscape page shift is wrong.
input field goes out of view and even on some screens keyboard is hidden behind a keyboard.
phofurl <img width="512" alt="screenshot at 3 03 45 pm" src=" phofurl
when using `slides.isend()` in a template, this causes the browser tab to crash.
cannot add a border or change the border-radius of `fab-button`
buttons in the normal flow or fabs at the top of the screen work as expected with regard to click events.
buttons in the footer or fabs positioned at bottom do not have their click events fired.
when using a dark theme, based on results from here ( phofurl phofcode the ion-card-header gets a md text color equal to the step-150 color.
in this case, the color is too dark and doesn 't read against the background.
should it be using the step-850?
the shadow of the overyling content is missing when `ion-split-pane` is used inside a stencil component that has `shadow: true` set.
looks without `shadow: true` (correct): bildschirmfoto um 20 31 36 phofimage looks with `shadow` not present (broken): bildschirmfoto um 20 31 09 phofimage
when modal (pop up) is displayed and then dismissed, it leaved detached htmlelement (memory leaks) behind.
when using background image, the whole background blinks upon tapping on a link (navigation) and there is a delay on the response.
the code i'm using the setup the background is on .scss file referent to page that i want background to be displayed.
`:host { ion-content { --background: } }` i have also a video to better demonstrate issue: phofurl _this only happens on
if you have a button inside ion-slides and press it, all is working.
but if you scroll on the page and then go to the button again and press it, it 's not working anymore.
see the following gif: press button working, now i scroll go back and click again - not working.
we have to find out if this is an issue of swiper.js or ion-slides / ion-button.
if i lock the swipes ( button is working.
maybe it 's scrolling of ion-slides, that is blocking clicking?
use ngx-translate translate key to html, then the innerhtml can not apply styles setting.
ion-menu is not displayed on ios (`ionic serve --platform ios`).
the dom is modified after clicking on the menu button, but the menu is not visible.
a list of `<ion-item-sliding>` refuses to reorder when `<ion-reorder>` element is placed within the required `<ion-item>` element of an `<ion-item-sliding>`, with an `<ion-item-options>` element present within the same `<ion-item-sliding>`.
<img width="365" alt="screen shot at 11 17 23 am" src=" phofurl
an app with a deeper tabs page does not route to auxiliary paths when the parent path is dynamic.
for example, instead of the generic `path: 'tabs '`, if the parent path is `path: 'list/:item '`then the error thrown is `core.js:1673 error error: uncaught (in promise): error: cannot match any routes.
url segment: 'members ' error: cannot match any routes.
url segment: 'members ' at (router.js:1382) at catchsubscriber.selector (router.js:1376) at (catcherror.js:33) at (subscriber.js:80) (subscriber.js:60) (subscriber.js:80) (subscriber.js:60) (subscriber.js:80) (subscriber.js:60) (tap.js:61) (router.js:1382) catchsubscriber.selector (router.js:1376) (catcherror.js:33) (subscriber.js:80) (subscriber.js:60) (tap.js:61) resolvepromise (zone.js:814) resolvepromise (zone.js:771) zone.js:873 (zone.js:421) object.oninvoketask (core.js:3815) (zone.js:420) (zone.js:188) drainmicrotaskqueue (zone.js:595) [as invoke] (zone.js:500) invoketask (zone.js:1540)`
i have a slide that could change the ion-segment below.
the segment button can 't be activated.
i have created a plunker below.
i have a form embedded in a column in `<ion-grid>`, which is directly placed under `<ion-content>`.
when a user focuses on an input in this form, the keyboard height is calculated double.
example screenshot from simulator phofhyperlink
the tabbar is not reacting while overscrolling the ion-content.
you need to wait till the overscroll-animation has finished to switch the current tab.
this feels very slow and not native-like.
i am trying to create a form using ionic 3.9.2. when i submit the form and trying to access the form value it looses the type of all the inputs which are edited.
in nested ion-slides, the first-level slider pager is not showing (not even generated) when i specify the pager option, whereas the second-level slider pager is.
use datetime in an angular form (either with `ngmodel` or through reactive forms) and the value after selecting a date/time is always an object (`datetimedata`?
the 'demo source ' links provided on phofurl all seem to resolve to a 404 page on github.
it appears that there are duplicate '/component ' paths in the url that are causing the issue
i have a component called contactslistcomponent, it is imported within the app.module.ts like so: phofcode and i can call it using anywhere in my app without any issue.
problem is, when i add it within a modal which is called from home.ts page, i get an error message saying it is not a known element > template parse errors: 'contacts-list ' is not a known element: > 1. if 'contacts-list ' an angular component, then verify that part of this module.
> 2. if 'contacts-list ' web component then add to the @ngmodule.schemas ' of this component to suppress this message.
my home.ts phofcode contacts-list-modal.html phofcode contacts-list-modal.ts phofcode
popover's content does not appear: ionic-popover-issue phofimage
ionic 's loading element doesn 't play well with protractor.
namely, with most promises/other async stuff (http requests, timeouts, ...), you can be sure that protractor will wait for everything to finish and settle before any further actions or assertions.
but protractor seems to sometimes try following assertions too early when the loading controller is used.
it 's a bit intermittent, so to exaggerate it and tease it out predictably, my test case loads and dismisses 8 times.
overlayindex isn 't included in the toastoptions interface but is called out in the documentation: phofurl
when i use to close a modal,it happened in the terminal: "ionicerror error: uncaught (in promise): overlay does not exist at resolvepromise (zone.js:814) "
i am just trying to serve my application and it throws this: namespace 'nodejs ' has no exported member 'writestream '.
namespace 'nodejs ' has no exported member 'readstream '._
sliding items are not working correctly.
calling slides update does not recalculate swiper-wrapper 's translate3d values.
sometimes the icons in lists are not loaded/rendered when selecting another tab, this only happens the first time when you click another tab (root page).
after that the icons are loaded for other pages.. so it happens only the first time you enter another tab.
please see forum conversation here phofhyperlink .
the documentation states that the `lines` attribute must be placed on the `ion-item` component.
however, that didn 't work.
instead, the `lines` attribute needs to be placed on the `ion-list` component.
in my application i have a setinterval service running on the first page, and it increments a counter every second so i can verify its operation.
the second page has buttons to try inappbrowser with _blank and _self.
another button shows the counter.
it keeps incrementing when using _blank but it does not increment while using _self.
once i exit the inappbrowser the counter resumes incrementing.
in an ionic 4 application, i 'm forcing uiwebview usage by following the steps described in phofurl i added the preference to config.xml and uninstalled the ionic webview plugin.
now, when i start the application on an iphone (real device or simulator) i only get a white screen, and following output: phofcode the application did load normally before i forced usage of uiwebview.
also, when create an identical app in ionic 3 and force usage of uiwebview using same steps, application works as expected.
do need uiwebview for my app instead of wkwebview, because wkwebview needs cors-headers and don 't control server i 'm talking to.
--inner-padding-end does not affect .item-inner padding-right
if you use the ion-slides component with autoheight option set to true, it doesn 't adjust the ion-slides height to the active slide 's content height as it supposed to.
ion-range does not show knobs in firefox and safari.
calling the in index.html loads all the css well, but loading from phofurl makes look to not show correctly.
ngmodel binding in <ion-datetime [( ngmodel)]="data"> is undefined
when navigating past the root level of the tab, the history of that tab is lost when switching between tabs.
alertcontroller gives me the following error: phofcode
currently childs of ion-content cannot use the height of the ion-content.
when navigating from page a -> b and back to a using using lazy loading and preloadmodules set to true, the application goes back to the root of the navcontroller.
this only happens when going from a -> b and back to a. when going: a -> b -> c ->a, all is fine.
this only occurs when running my capacitor/electron (all latest versions) and not when running as pwa.
when using a virtual scroll list, randomly the styles of elements stop updating.
in an ionic app (e.g.
a tabs starter) hitting the enter key doesn 't activate tabs or buttons until the user has clicked at least once anywhere in the window.
the keyboard interface doesn 't work until at least one click has been registered.
focusing a ion-input with text-right attribute let the input value jump to the right.
this happens for the first ion-input after a different element than ion-input.
it also happens for every ion-input while focused and scrolling.
ionic serve reverts to a previous version of my app randomly, causing me to have to restart it.
let 's say we have 3 slides.
on android, the slides move to the left and repeat the same way.
but on ios, when reaching the 3rd slide, 1st slide will be displayed by moving all 3 slides all way to the right.
i 'm getting a blank screen when i try to use the http-native.
on ios devices running 11.3.1, the `ion-popover` component does not display.
the component does, however, work fine in chrome browser and android devices.
connected to github from ionic pro.
- we can know google sends out a robot to scan the page using by fetch as google.
- fetch as google can 't read `ion-router-outlet` (ionic v4 routing element).
- fetch as google can read `router-outlet` (angular native routing element) .
- if it keeps like this ionic 's pwa will be weak against seo.
ion-content phofhyperlink is not displaying the components within.
so while might work doesn 't display.
inspecting the components reveals that the components inside ion-content does render but maybe due to a css issue they don 't display on screen.
_here are some examples of the current behavior_: phofurl phofurl locally: phofcode
i am not able to see live reloading of application pages.
i have freshly installed nodejs and npm on my system and created helloworld application which is being provided by ionic team.
the bug appears on the tabs starter template when created with the latest version of the ionic cli.
the navigation between tabs is broken, the path changes in url but i am still looking at same page.
the issue was not present a couple of weeks ago since i was trying to reproduce nother bug and it worked fine.
when using the released angular 6 and running `ionic build --prod` an error is returned `error in error during template compile of 'appmodule ' function calls are not supported in decorators but 'ionicmodule ' was called` this does not happen on `serve` or when running build without `--prod` flag
the checkbox in my app works well when i set the rootpage like this phofcode phofcode however i am setting the root page dynamically and it seems the best way to do it is to use this phofcode because using the first method leads to a white screen.
but using phofcode causes my checkbox to begin malfunctioning.
( it gets check randomly).
display an extra space at bottom of tabs inside content, only in iphone x image phofimage
i have a div styled with `overflow-x: auto;`.
it worked well when i used normal `*ngfor`, but it 's failed after i upgrade to virtualscroll.
it seems the horizontal scroll behavior in the item of virtualscroll is failed.
white screen showing up after opening the apk, for like 3-6 seconds
input field is unable to fully display the inputted value if length exceeds the visible area on the application form, and there is currently no way to move to the end of input field.
this behavior has been seen on ios builds.
my application works when deploying to the device.
it also works when i use `ionic cordova build --minifyjs --minifycss --optimizejs` however, when trying to run ` ionic cordova build --prod --release` it gets stuck at "copy finished in..." apps markerl4>ionic cordova build android --prod --release running app-scripts build: --prod --platform android --target cordova build prod started ... clean started ... clean finished in 4 ms copy started ... deeplinks started ... deeplinks finished in 42 ms ngc ngc finished in 4.70 s preprocess preprocess in 1 ms webpack copy 4.90 s ` i could let it run for hours it nothing changes.
the process thakes 15% of my i7-8700k cpu.
i couldn 't find any solution anywhere.
changing the min/max values of an ion-range component doesn 't trigger the ion-range to reset the trickers ( all other behaviors works fine ).
img_4181 phofimage i very same like the bug here: phofurl but the issue closed seems hard to reproduce, now i finally reproduced.
after the `ngmodal` data is changed, the floating label does not float, then both label and input are on the same line.
current implementation of ion-modal positions the modal based on a fixed with and height.
if i want to change the width/height of the modal, it requires a lot of css overrides.
if there is a popup (eg.
alert) ion-slides continue to play, however if we navigate temporarily to a page the slider stops.
this is not the expected default behavior.
ionslidedidchange event stops firing i have sound attached to this event which will not execute either.
on a page using and setting `<ion-item-group [reorder]="canreorder$ | async">` from a behaviorsubject, changing the `canreorder$` state adds margin to fit the reorder handles, but the handles never appear and drag functionality is not enabled.
reverting the `canreorder$` state causes further mayhen, as it only sporadically clear margin again.
on ios, if the content is already scrolling because of an user interaction (because of the inertia), if we try to programmatically scroll to another position, with content.scrollto or content.scrolltotop, the scroll is doing crazy stuff, and we will back to the original position (actually, to position where it should have stopped with first "scrolling inertia").
this is working well on android.
on ios 11.2 (and perhaps on other versions too), the popover cannot be scrolled
when i run ionic cordova emulate android, the command stops and exits without a warning or error.
its stops at different points during execution, its never the same point.
it seems to be random.
this wasnt always the case, it started today.
it works okay for ionic serve
ion inputs with a two-way binding ( `[(ngmodel)] = "someproperty"` ) are not getting cleared or reset when their model is unfedined.
: phofcode the same thing happens when binding to properties of an object that later become undefined: phofcode however, regular inputs using angular `[(ngmodel])` do get cleared in identical scenarios.
error: template parse errors: can 't bind to 'name ' since it isn 't a known property of 'ion-router-outlet '.
1. if 'ion-router-outlet ' is an angular component and it has 'name ' input, then verify that it is part of this module.
2. if 'ion-router-outlet ' is a web component then add to the '@ngmodule.schemas ' of this component to suppress this message.
3. to allow any property add 'no_errors_schema ' to the '@ngmodule.schemas ' of this component.
("r="let tab tabs" [label]="tab.title" [icon]="tab.icon" [href]="tab.href"> <ion-router-outlet [error </ion-tab>
misalignment of icons difficult to select at top half hidden at top scrolls with page capture292 phofimage capture291 phofimage capture290 phofimage capture289 phofimage
when running phofcode the error phofcode is thrown.
passing {animate: false} to ion-router-outlet via navctrl.setroot(page, null , {animate: false}) doesn 't work.
the code is setting the animation boolean from the ion-router-outlet component and doesn 't update it because its using this.animated.
it stops animation if you pass in 0 duration navctrl.setroot(page, null , {duration: 0}) the code however has an || checking both.
at the moment it seems, `pause` and `resume` are not implemented on angular 's `platform`.
while using chrome with ublock or firebase without any plugin the deviceready is never fired and i can 't access to the storage
when typescript `strict` option is enabled in `tsconfig.json`, i have this compilation error: phofcode this used to works, but i don 't know exactly which version of `ionic-angular` caused the regression.
when i data bind a variable to the ion-input maxlength attribute, and i change it in the background it does not update itself.
more than 72 scss $colors map entries causes strange css issues; overridden class not displaying correctly.
building the application for production breaks the ui interaction (inputs, buttons, forms elements, keyboard) in ios 11.3.
label is covering values that are inserted into the input field.
i have an application with tabs page.
tabs page: phofcode homepage: phofcode newspage: phofcode when a tab is opened then url is changed to: phofurl after page reload then url is changed to: phofurl and there is no tabs
i have design app like this image image phofimage in detail page i wrote code phofcode then i call stack from tab 2 use function `gotostack()` phofcode but active tab is tab 2 i want active tab in tab 1 enter image description here
when an ionic page has many `<input>` fields around 250 or more, the page becomes sluggish to scroll, click/tap.
the issue exists only in ios devices.
it is more pronounced in older ios devices.
however, the same page is much faster when opened in a browser(ios safari / ios chrome) or even a through embedded in-app-browser.
a runtime exception is being thrown when webpack tries to load ionic-angular module: phofcode this exception originates from the auto-generated code below in main.js: phofcode ps: got the code above after switching the target into es2017 in `tsconfig.json` just to make it readable and better analyze the error.
the exception occurs whenever i run my application using any cordova platform (browser/android/ios) plus `--aot` option (or `--prod`).
yet `ionic serve --aot` works fine, as well as all dev builds.
thank you for developing nice framework ionic.
as ionic 4 alpha release, i am considering to managing ionic project with multiple other angular apps in one repository.
phofcode it means that we want to manage ionic project on ./projects/ionic-app/ folder (not ./src/ folder) however, current state of ionic serve/build only support root folder & src folder access.
when rtl (css rule `direction: rtl`) is applied on the page, `<ion-item-options>` buttons are correctly placed on the left when `side` is set to `"end"` (default) and right for `"start"`.
however, the child `<ion-item-option>` item is not allowed to swipe to the correct direction: - on `"end"` (i.e.
placed on left), item can still swipe only from right to left, like in ltr.
placed right), item can still swipe only from left right, like in ltr.
you have swipe entire item length be able see buttons (which is impossible achieve a real device).
background plugin not compatible with imagepicker plugin
slides indicator moves into the picture on resize
error typeerror: actionsheet.present is not a function
i have tried to build my ionic app but it is not progressing after showing in console i.e.
the building process continue forever.
i wait to see any result for about 5-10 min but the building process are still in that line.
when you have `shadow: true` set in stencil, this code fails always.
when you have it set to false, it works as expected.
phofurl i believe this does not work because you cannot query into a host element that has shadow dom enabled.
this is just a theory.
`ionic cordova run ios --prod` the app works correctly but i see a mistake when i want to get info about a view, for example : `issamepage(page: any){ return this.currentpage.name === page.name; }` this case ` ionic cordova run ios --prod (does not work) this.current.name returns 'n ' and page.name returns 'n ' ionic cordova run ios (it works!
the `ion-fab` remains inline, even when the `horizontal` and `vertical` props are provided.
when i select lazy page----homepage,the url bar display phofurl but the browser refresh and the url bar change to phofurl ,the tabs displays none.
when i push() some page from side-menu and the actual page is one that have menu-tabs, the ionviewwillleave & ionviewdidleave events are not fired
setup an `<ion-menu>` with a mechanism to open it (like `<ion-menu-button>` or explicitly calling the menu 's `open()` phofhyperlink method).
- on android / `"md"` mode, the menu appears as "overlay" type as expected.
- on ios / `"ios"` mode, nothing happens.
the `<ion-item-options side="left">` buttons appear when swiping from right to left, as if the `side` attribute was ignored.
if another `<ion-item-options>` is present in the same `<ion-item-sliding>` element, all buttons are stacked on the right side.
`<ion-refresher>` is not responding in windows surface while dragging with touch.
see the attached gif, capture phofimage
when i try `ionic cordova run android` and then i see this "panic: missing emulator engine program for 'x86 ' cpu."
there is no interfaces for life cycles in ionic.
ionic cordova build android --prod --release this command will not copy all fonts to so when you execute the apk in the phone you will get a blank screen
1. updated ionic cli to 3.20.0 from 3.19.1 2.
`import {translateservice} from ngx-translate/core package went missing, `npm install` fixed this package issue 3.
`ionic serve` worked 4. got a run time error: ` error runtime error object(...) is not a function `
adding simply `oninit` livecycle to `homepage` component does not work, it seems no one of angulars livecycles are called.
trying to follow this guide to build an android production app.
ionic cordova build android --prod --release got this this.
running app-scripts build: --prod --platform android --target cordova build prod started ... clean started ... clean finished in 6 ms copy started ... deeplinks started ... deeplinks finished in 103 ms ngc error: error encountered resolving symbol values statically.
calling function 'makedecorator ', function calls are not supported.
consider replacing the function or lambdawith a reference to an exported function, resolving symbol injectable in angular/core/core.d.ts, resolving symbol e in angular/core/core.d.ts, resolving symbol e angular/core/core.d.ts at error (native) at syntaxerror at simplifyincontext at staticreflector.simplify ngmoduleresolver.resolve addngmodule array.foreach (native)
1) (click) is inconsistent on ios sometimes taking multiple times to register.
2) (tap) fires the event on parent elements before child elements giving no chance to do an `$event.stoppropagation` 3) `tappable (click)` causes an issue where if you scroll to short a distance (less than an inch) it causes the click event to trigger.
appreciate any workaround or suggestions deal with this.
when using an iframe with a youtube video clicking the fullscreen button opens in fullscreen, glitches for some milliseconds and immediately closes the fullscreen view.
this happens even if the iframe tag has the 'allowfullscreen ' parameter.
i tested this both in browser (_ionic serve_) and on android (_ionic cordova build android_).
video in html5 video tag eventually fails to play once the page containing the video tag has been visited 17 times.
i am using firebase to save and update the data.
when firebase data save/update is complete i expect the navcontroller to pop the view and return back to the previous screen.
however when firebase operation is complete new view of page gets created and view is never popped.
ion-input type password is clearing password when you type once and then again come back to this field and type something.
it will clear password field
i use <ion-slides> with fixed height in the middle of the page.
when i start sliding left/right say in chrome then vertical page scroll is disabled.
in ios safari however while sliding left/right vertical scrolling happens as well.
i am trying to display a datetime picker like this 12h30m.
the display format should be something like "hh[h]mm[m]".
but apparently the [h] and [m] are including the hours and minutes.
the result is something like
i do not sure to get guidelines like "comment a block" "comment a function" on ionic and also i have checked some things from this i have learned some of best practices.
still i think this guidelines is relation with javascript or typescript.
my app is working perfectly with
after upgdrading from ionic3.5.0 to ionic3.19.0 ionic cordova build android --prod stops with the following error message: phofcode
in a component app-news-display, i push a new component app-new-items with some data phofcode where this._comps.navcmpt is the htmlionnavelement and in the component app-news-item i read the navdata by phofcode
if the first list item is selected (either month, day or year) this item is not rendered or written to the value.
the month selector prevents non-valid day of month inputs but uses an old month to determine day of month range.
when i click on searchbar my navigation bar disappear and appear again with overlap ion-content.
and when i push to my navigation controller, there are no nav bar in other controllers.
i define dayvalues as arabic, persian numbers to display the days as arabic or perisan as follows: dayvalues =
when running a "ionic serve" command cli asks to upgrade.
after enter y it seems to upgrade but next time you run "ionic serve" (or any other ionic command) upgrade question appears again.
during build android i get: phofcode
receiving a `origin is not allowed by error when trying to download files from firebase.
this is happening in a compiled app (`ionic cordova build ios`) and running it from xcode.
setting the min date as current date time in 12 hr formate mm/dd/yyyy hh:mm:ss a. when the time is pm hours and minutes are coming blank for the current date.
for future dates hours and minutes are displaying and able to select.
not able to build platform android using
when we set step]="1" and [snaps]="true", we will see the ticks on range of <ion-range> control.
but when we update [min], [max] of range, these ticks are not updated (not render again).
[initial ticks and after updated phofhyperlink
i have a created a custom component to display comments and their answers.
as each answer also could have answers i made that component recursive.
as there may be many comments, i use infinite scroll for loading more comments from the server when needed.
for the first comments loaded from server everything is fine.
the comments are displayed as expected and when clicking on "answers" the answers get loaded from server and are displayed below comment they belong to.
after infinite scroll the custom component gets rendered without its recursive self.
we have swipe to go back turned off in the conf app, but i can still swipe to go back
(note: this only happens on ios) while opening a sliding item i can still scroll
- open phofurl on a device - slide an item on the schedule list and click on it - notice the outline on the button this does not seem to happen with other buttons, but just the sliding item buttons
value is hardcoded to `0.08` within the animation functions located at: phofurl
if you push `pagea` then `pageb`, which both contain an `ion-menu` on the same side (`right` for example), and using `menutoggle="right"` in `pageb` will try to open the menu on `pagea`, resulting in the menu in `pageb` not to show
on a desktop device: - add a favorite in the ionic-stencil conf app - remove that favorite - notice the confirmation alert has a scrollbar scrollbar phofimage
the back button should be white in md mode and black in ios mode.
currently, the back button is black in both modes.
this is happening because the back button is not using the same color as regular bar buttons.
if an `ion-label` is enclosed within an `ng-container`, either with an `ngif` expression that evaluates `true` or no structural directive, it and the other elements inside the `ion-item` are not visible and do not appear in the dom.
when using 12 hours format date picker and min value for time, the date picker logic doesn 't handle am/pm change when updating the view for valid selected values.
`clearinput` doesn 't output "x" to clear the text in the textarea, like `ion-input` does.
`<ion-range>` is not sliding with screen touch on microsoft surface( windows 10 uwp app ).
but it is slid-able/drag-able with touch-pad.
when building for production: image phofimage on ionic view you can see the text, but in production cordova build either manually or ionic pro cloud build, text does not seem to exist.
it seems like the last `ion-toggle` element in wp design mode has no toggle-icon.
it doesn 't matter if `ion-toggle` is child of `<button ion-item>` or `<ion-item>`
input pops up the keyboard, and the page moves up causing the header to be half behind the status bar.
i 've two different lazy loaded pages, both containing `ion-tabs` with two tabs inside it.
since this morning i can 't run my app in a device doing `ionic cordova run android` phofcode
misplaced or empty properties on new file object creation
when running `ionic serve` only main.js files is getting compiled, pages are not getting compiled into 0main.js and so on.
using latest canary cli, create new blank project.
then `ionic serve` and get this: phofcode
i use the cordova inappbrowser to open an external url for an authentication process.
after successful login, the browser will be closed and the user will be pushed to a view containing ion-segment buttons.
the problem is that the segment buttons respond very slowly when i restart app, segment buttons are working normally again.
this problem also appears on ionic tabs.
my suggestion is that webview from inappbrowser isnt closed correctly (
here is the declaration: @ionicpage({ name: 'authc ', segment: 'authc ', defaulthistory: [ 'home '] }) works but <a href=" phofurl does not work the page displays momentarily and then throws the following error: error error: uncaught (in promise): error: cannot match any routes.
url segment: 'authc ' error: cannot match any routes.
url segment: 'authc ' at (router.js:1698) at catchsubscriber.selector (router.js:1663) at catchsubscriber.error (catcherror.js:104) at (subscriber.js:128) (subscriber.js:102) (subscriber.js:128) (subscriber.js:102) (subscriber.js:128) (subscriber.js:102) (subscriber.js:128) (router.js:1698) catchsubscriber.selector (router.js:1663) catchsubscriber.error (catcherror.js:104) (subscriber.js:102) c (polyfills.js:3) c (polyfills.js:3) polyfills.js:3 t.invoketask (polyfills.js:3) object.oninvoketask (core.js:4620) t.invoketask (polyfills.js:3) r.runtask o e.invoketask
right now we keep the generated readmes for each component alongside the components themselves in the core repo.
but we don 't distribute them on npm.
sometimes, when i change and save a layout, component, page or class, the version of the application showing in the browser is an older version that the one showning a minute ago.
sometimes i need to save other file related to file failing or need to restart ionic server so that i get most recent version of page.
sometimes it just dont get updated during so much time that it is making my work impossible.
i tried to reinstall visual studio code, ionic cli, nodejs and npm but it dont solved problem.
the version of nodejs dont affects it.
to me, error appears just after start live reload server and still appears after restart server.
sometimes it shows a of code modified days ago.
months ago was not a so frequent problem the problem dont happens only form me.
here where work, other people are facing same problem in projects created from ground.
im not sure about that, but its like if ionic projects keeps cache older versions code and, sometimes, loses itself show correct version.
how can get ionic app update at every change?
on android the disabled range knob has a white square outline.
normally this square creates the illusion of a gap between the knob and the slide, but when using a non-white background white square is visible - and ugly.
i can't display banner ads and interstitial are always test ads.
sometimes it just works but after another build it stops working
ionic build ios and then go in xcode start simulate will got this "[error] failed binding ipv4 listening socket: address already in use (48)".
cause my mac run jenkins at port 8080 the error seem to be correct, but before may be in ionic cli : 3.17.x i can run on simulator without error.
the home page on the v4 blank starter is blank even though the content in the html is not.
repo: phofurl i have a blank v4 project with the following modifications: 1. inject platform service in `app.component.ts` 1. provide a mock platform in `app.components.spec.ts` with the latest version of `@ionic/angular`, i get the following with `npm test`: phofcode rolling back to version `0.0.2-28` (npm i @ionic/angular@0.0.2-28) results in a properly working test.
`npm test` - broken `npm i @ionic/angular@0.0.2-28` test` - works `git checkout -- .` i` ls @ionic/angular` - shows 0.0.2-29 test` - broken again
reproducible timing issue on ios (device or simulator) using ionviewcanleave().
if you tap the back button as well as sliding to left or right slightly it breaks navigation and app is stuck on that page.
this has been going on for some time with many users saying app gets stuck, but now we finally have a way to reproduce.
when i use this mark-up, it looks weird on ios.
this is with the `next` release of `@ionic/core`, no custom css.
screen shot at 4 47 02 pm phofimage phofcode
the app fail to run on moto g (5th gen) (cedric), moto g (5s) (montana), moto g plus (5th gen) (potter_nt) and moto g(4) plus (athene_f) on android 7.0 and 7.1. when trying to open, the app abort right away and the play store captures the following error: phofcode
let 's say i have a ion-tabs with four ion-tab.
when the tabs are loaded and are showing the first index : - is defined -
i have a block of html for an ionic page which checks in an amount of people, input by the user using an ion-input form field.
this field also has a (keypress) event which triggers a popup 'prompt ' div in the same html.
when this pop up is enabled, the ion-input field should then be disabled and prevent the user from editing input value.
the above prompt has a (keyup) event to proceed, however this is never called when [disabled]=true.
if you change this to [readonly] property it works as expected.
in my chat application i am using scrolltobottom to scroll the chat content to the bottom.
i am using google chrome browser for output of my application but its showing me " error typeerror: cannot read property 'scrolltobottom ' of undefined at (chat.ts:45)" in the console.
setting disabled to true does not disable the input in an alert controller.
inside i call nav.push but dont`t loaded the page correctly.
models(vars) of pages return blank... the models (vars) is populated by rest api.
obs : the page is called but only load static html, don 't load the models (vars) of type script
when the component is disabled and the value attribute is changed it responds with visually and fires the `ionchange` event.
when you focus a `ion-range` component using the tab key and then hit the right arrow key `ionchange` is not fired.
when opening a pwa in inappbrowser in another cordova app, the toolbar is cut off behind the ios statusbar.
it 's even worse on iphone x where the toolbar is completely hidden behind the "notch".
iphone6 phofimage iphonex phofimage i could fix it by setting config option `statusbarpadding` in app.module.ts: phofcode but then extra padding is always added, even on browsers and platforms that don 't need such padding, and it looks silly.
when using an ion-segment in an ion-toolbar inside an ion-header, if you are using android (or the chrome emulator) and you tap on the bottom border of the segment, the button animation will play (the bottom border and text color change briefly) but value does not set, and selected segment does not change.
this does not happen on ios, browser without using emulation, nor on android if you place ion-toolbar inside of ion-navbar, ion-content or ion-footer.
of note, if you tap just below bottom border when ion-toolbar is in an ion-content it still changes tabs.
it does not do this in ion-footer, but it is doing same as when in ion-header.
so behavior is different all 3 places.
appears 2 of the same tab button
the generated button element does not display the passed `primary-text-md-light` color but instead looks to prefer the regular `primary` color when inspecting the generated css: phofcode additionally, neither of the components in `@ionic/core` seems to respond to using color literals, eg.
`#fff`, `#ffffff`, `rgb(255, 255, 255)` or `rgba(255, 255, 255, 1)`, as arguments for `color` property, is this a bug or by design?
this is a bug in the documentation.
see "lists in cards": phofurl the docs say "add an `ion-list` component inside of the `ion-card-content` to display a list".
however, the sample markup immediately below this sentence does * not * include an `ion-card-content` element c the `ion-list` is nested directly inside of `ion-card`.
should `ion-list` be wrapped inside of an `ion-card-content`, or shouldn 't it?
experimentation suggests that a `ion-card-content` should * not * be used, but i 'm not certain what 's intended.
this look happening only on mobile device with compiled version with prod flag.
using slide with loop setted to true, when you swipe to next, it swipe as carousel as expected.
but when you add previous and next button, when it arrive to the first-1/last+1 element, the following move to the previous/next one with a "fastrewind".
look the video too see difference.
when running in android (via cordova) scrollbars are never shown while scrolling
running an ionic application using 3.9.2 and it the app where there are tabs and a login page where there are no tabs.
when i logout, i navigate to the login page using but the tabs still show on the login page.
the ion-spit pane is not working properly.
in browser mode when the screen is big , the split pane is working good.
when the screen size is reduced , i am not able to see the menu itself or menu toggle button.
in ionic serve --lab mode , screen blank white screen.
my ionic pwa runs without error on ionic serve, however after a build, the app throws the error
no data appears in popup, options are displayed in label and not hidded
when starting a new project from boostrap template, e.g.
the cli tools download files from ionicframework.com.
this is slow and even impossible under restricted network (e.g.
failed 5/5 times in mainland china) there is ionic-cli-proxy but it may not solve the problem of mainland users.
when talkback is activated on the mobile device, the tts reads the tabsbar component name twice, but.... i.e.
being on the "home" site of app and tabsbar component is being named "home", it first says old name, which was "contact" (beforei renamed it home) and then current tabs component name, which is "home" (right now).
html ngfor array 's value not updated when the array is updated inside until view is pressed, its view updated correctly if array was updated inside (click)="updatearray()"
if you have an ion-card with a nested ion-list with nested ion-item-slidings generated using an ngfor and nested checkbox then the checkbox and label disappear on android when the checkbox is checked.
even stranger - it works if you remove the ion-card-header.
on ios i set `<preference value="false" />` and using with `<preference name="keyboardresize" value="true" />` and resize method set to `native`.
when keyboard opens, statusbar becomes overlaid.
i can fix it by manually calling phofcode
most time after ion-input trigger blur event, ion-content take about 1s to stretch to origin size, obviously and annoyingly.
in short, the content view update lagging.
from config documentation phofhyperlink : > the last way we could configure is through url query strings.
this is useful for testing while in the browser.
simply add to the url.
> ` phofurl this is problematic for pwas because someone could craft a special url changing the behavior of the app and share that link.
for example: this could be even worse if you use custom config properties in your app.
in a slide whose swipes are locked the ionitemsliding options do not show (or intermittently show) when a user swipes the ionitem.
when using the virtual scroll in mid page (e.g.
below another component), during scrolling down items are disappearing on top, where the above component was located.
scrolling up seems to work properly though.
inputs and alert inputs do not have callbacks on the default device keypad 's return button.
(the button simply dismisses the alert)
active ion-slide inside ion-slides doesn 't get any class to differentiate it from other slides.
text entered in input form isn 't showing correctly
the `ion-slides` control 's gesture recognition is always relative to device 's screen, regardless of the element 's current orientation.
i am building an app with multiple "player spaces" with the intention that players sit at opposite ends of a single device.
each player 's space is rotated so that it appears "right side up" to them.
the `ion-slides` input gestures misbehave in this use case.
as i use the storage with ng5, i got a exception, all the code is same as phofurl described.
using stenciljs, `<ion-item-options/>` are not correctly displayed.
the right-side options are displayed on both sides.
if we develop ionic 3+ based progressive web app (pwa) it is natural that we want to ensure push notifications are also available (subject to browser comptatibility of course.
the current leading solution is to leverage fcm - firebase cloud messaging.
as of now there is no documentation or a guide that explains recommended generic way of adding web notifications to ionic 3+ based pwas.
there are articles/guide for angular such as this one: phofurl but since ionic has its default service worker it is unclear what recommended implementation path specifically in ionic 3 and going forward.
when the view has tabs at the bottom and the keyboard is opened and then the device rotated, layout is updated to put tabs above keyboard and when keyboard is dismissed tabs are still in same position with lots of whitespace underneath.
using the arrow keys to move the value on a range does not update `value` or show the pin
when using a prompt type `alertcontroller` on ios (specifically 11.1.2 but haven 't tested any others) you can not scroll past the end of the input using touch-hold.
the application have one _ion-tabs_ for some sections, two sections have _ion-slides_ for sub-sections.
when open other page and change the orientation and back to last page, the slide not change the width and slide position is bad.
after use ionicpage, if enter the page which contains iframe, then use navpop to go back, the navcontroller will get wrong.
this only appear after add ionicpage to these pages contains iframe, only appear on wkwebview of ios, uiwebview and android works fine.
this only appear at prod build on ios, debug build works fine.
if there 's an open modalcontroller modal and the user presses the back button (either the hardware back button on android or the history back button in pwa), modal stays open and page navigates back.
if i push my segment page to the nav stack within a nfclistener the page is not responding and i 'm unable to switch segments if i push the same page after platform ready (not in the nfclistener) all works fine.
also tried without lazy loading and tabs instead of segments -> same
if i 'll select full screen suggestions of iphone keyboard, the conversion candidate window falls instantly.
so user don 't select full screen suggestions.
<img src=" phofurl width="60%"> <img src=" phofurl width="60%"> i researched.
default & use plugin of `ionic-native/keyboard` is falls.
i confirmed it in japanese environment.
(i know this phenomenon last year) but when use ipad & is not falls.
when go back to page with `<object>` (and svg as source) it 's scrolled to other place then it was before.
when you focus on an input for a slide that is not in view, the slide for the input will be put into view.
it does this with no animation and no corresponding slide updates/animations.
use case: i have a form that uses slides to step a user through the questions.
i don 't want the keyboard to close between slides so when a user clicks submit button on one slide, i want it to immediately focus on next slides input.
however, doing is makes that slide pop into view (and if submit triggers "nextslide" it actually skips with input).
i am developing an e-commerce application.
i have (horizontal-scroll followed by ion-slides) * 8. when i scroll down and come all the way to top, the components hide and show with some delay.
sometimes it does 'nt even show up.
scrolling slow does not cause the issue.
removing or using wkwebview solves the issue, but due to cors i cant use wkwebview.
when some components doent show up, clicking somewhere else on screen brings it up.
on checking on net using -webkit-transform: translate3d(0,0,0) to all elements is said to work, but it didnt.
this issue is caused only in ios not android.
is thrown when adding an empty provider (testprovider) to a blank ionic project, and injecting it into the home page component.
everything appears set up correctly, i.e., app.module imports testprovider and puts it in the provider list, and the home page imports testprovider and injects it into the constructor.
note that, in one round of testing, three unique providers were created with identical code.
one of them consistently worked, while other two consistently produced error.
at any given time, only one of providers was being injected in home page component; however, all three were being imported.
all of providers were generated with `ionic generate provider <classnameprovider>` all paths to provider are correct.
basicly i have a to navigate between pages.
this app i have many pages , but just for a specific page, when i go in there, navigate to another and come back, it gives me this error.
i found a way to reproduce in my repo, now its easy to debug if you can point me where i should look go over this bug.
npm run dev in the stencil app throws these 2 errors (2 files are missing in the build/npm repo): phofcode adding empty files is enough to make it "work".
after npm installing @ionic/core in my stencil app i get a list of erros telling me that "component xyz is defined in a bundle but not found": phofcode
1. open a page with an ion-input field.
2. tap on the input field to open keyboard 3. press enter on keyboard 4. page immediately transitions to the previous page (goes back).
6. form submit handler is not triggered.
my buttons are not responsive on the ios emulator or simulator.
i have created a separate app, and kept it super simple to test this, and the problem is still there.
it works fine on browser (chrome) with "$ ionic serve".
but the button does not do anything at all (and no error message) with "$ ionic cordova emulate ios" on emulator or using xcode simulator, livereload or not.
emulator loads fine as far as i can tell, but clicking the button does nothing.
one clue: on "some" reloads, i get an error: "can \'t find variable: webpack jsonp".
when i search google for this error, get a few suggestions (stuff like adding "browser module" in app.module.ts), but they don 't seem to apply here as my system is up to date.
but then this error goes away just by saving ts file again.
that in itself is an issue--i get error messages that go away just by pressing save again (some kind of reload problem guess)--but believe there already a separate issue opened that.
as far as can tell, this a bug that just started "happening".
the buttons were working fine both browser and emulator, and then just "stopped" working, without any change in code or settings that can detect.
perhaps then it problem with ionic 3 loading?
or maybe its problem with new wkwebview implementation?
using `ionic cordova build ios` sets `ionchannelname` of the `app-info.plist` always to `master`.
the `config.xml` and `package.json` both link another channel.
swipebackenabled is not working when outside tabs push ( a inside tabs )
ion-select with interface action-sheet ignores the mode attribute fixed on selectoptions attribute
ion-select with interface popover when it's close to the bottom of a page pop down towards the bottom and shows very small.
when i run `ionic cordova run android --device`, it runs the app, but also application switcher dialog opens.
you can view it using `adb shell input keyevent keycode_app_switch` command on terminal.
we try to limit the number of selection in the checkbox, so when a user select 2 options box, they can 't select more.
the script permit the selection for 2 box only , when we click the 3rd
ionic proxy does not allow requests to be sent to a cors protected server.
after building two ionic apps for companies that both wanted a custom look and feel on mobile, attempting to override the ionic styles for ios and android is tedious and brittle.
back button text is 'back ', and it just can be config to plain text phofcode
ion-scroll component doesn 't fire scroll events, this affects functionality which is dependent on them (e.g.
ion-infinite-scroll inside ion-scroll doesn 't work).
when using ion-slides with direction="vertical" slidesperview="2" the height of ion-slide will be set to the half of the device height not to the half of ion-slides.
example: the device height is 700px and ion-slides is height as 600px.
the ion-slide will be set now to a of 350px (50% device height) and not 300px (50& ion-slides height).
i have three pages in my application.
with this configurations: pagea: phofcode pageb: phofcode pagec: phofcode everytime i access the `[host]/#/all`, it 's load the pagec, ok!
everytime i access the `[host]/#/someid`, it 's load the pageb, ok!
everytime i access it 's load pageb, error!
obs: when it 's happen, someid (of pageb) gets value someid_2.
i could not get cors working with wkwebview.
ended up switch over to uiwebview.
was able to build an ios app.
in testing the app, noticed that multiselect was selecting items just from me just swiping/scrolling.
i was able to record the screen, and make it gif.
phofurl the hard part is you can 't see where i 'm clicking.
seems like there is a sweet spot in the scrolling, not to fast and not slow it works pretty well.
when used in uiwebview and/or environments with unclear content dimensions the virtualscroll sometimes can't figure out how many entries it should display because the content height is not known.
this results in the virtuallist displaying
when navigating to a page and hiding the statusbar.
rotating the device from portrait to landscape and then leaving that page and turning the statusbar back on, the header has no padding for status bar so statusbar runs through header
select statement popup only show the last options, for any select box
dynamicbullets is not supported in ionic-slides?
ionic-slides adopted from swiper.js and swiper.js support dynamicbullets: boolean.
how can i use dynamicbullets in ionic-slides?
i even tried to inject swiper.js into the ionic project and it 's not working well.
i believe there is a conflict error somewhere in ionic since it was adopted from swiper.js
when i do scroll on a dynamic form, floating labels of existing inputs out of bounds of screen are lost.
when i say dynamic form i mean forms that are filled by using methods.
when i say out of bounds screen mean content hidden by scrolling, when all content cannot be shown due to screen size.
when say are lost, mean cannot see it.
it seems a render bug.
itemreorder is working with &lt;ion-item> and &lt;a ion-item> but is not working with a list of &lt;button ion-item>.
`ion-list` with `[inset]` is only applied to `ion-item` that contains `ion-input` but is not applied to other `ion-item` with `ion-select` and `ion-datetime` when material design is active.
when ios is active, the inset applied correctly.
unexpected error at make a new project
url in pwa gets changed but the view is not updated
when closing a popover (dismiss) there is a delay of 500ms which is visibly for the users.
it makes the application unusable for this amount of time.
any <ion-input> element is not clickable on ios only (device and emulator), it is clickable on android (device and emulator) and ionic serve btw, i have put an <ion-searchbar> element on the same page and it works fine
when i run ionic serve the errors in the image above appear.
app crashed when launched at android 5.1 device.
i remember from ionic v1.x that you could toggle a bulk delete ui in an `<ion-list>` and it was very handy since it mirrored similar functionality to the native mail app in ios for example.
after looking through the documentation for ionic v3.x i could not find anything like this.
when i have cover image in element (div with 100%) it resizes background image when overscroll top and breaks dimensions (disappears) when overscroll down in ios.
not able to workaround that because it seems currently overscroll cannot be disabled.
after resized window from small (416px) to larger (1280px), some items in virtual list will be disappeared.
whenever i run this cmd "ionic cordova build ios --prod --aot" command in terminal.
i get bunch of ionic components error.
screen shot at 6 28 14 pm phofimage
the build fails to complete.
first item is displayed at the last position in <ion-select><ion-option> tags.
- app crash and restart
the transpiler sees an at-decorator in a comment and tries to process it.
when navigating to a tab page we use to set different default tabs for different users, i.e.
some users need to start in tab 1, some need to start in tab 3. however using this.tabref.select() causes a back button appear (only on the selected tab) pressing it keeps reloading itself.
on android this behavior when pressing the hardware back button and on both ios and android swiping right left also triggers a navigate back the same tab.
this leads me believe the tab is put on a nav stack as some weird bug.
after upgrading one app to angular5 ionic 3.9.0 it show the error: uncaught syntaxerror: unexpected token illegal pointing to a line in main.js: /* component * /])({template:/ * <ion-tab [root]="tab1root" t.......... i initiated a clean tabs app and the issue is actually the same.
failed to get absolute path to installed module when running: phofcode
when pushing a page on the root, the back button is added to the header bar.
unfortunately the back button pushes ion-title to right.
therefore placement of title is different on subpage than when on root.
it 's +- 20px more to right.
this is because when there are no buttons, or in my case, when there are ion-buttons (start and end) in header bar on root page, title is still taking full width (100%).
when back button added title only taking space it has (minus space back button taking).
because of this title placed more to right subpages.
i have a form with an input field, and a floating action button labelled "save" which sits at the bottom of the page.
on android, when the focus is in the input field and keyboard pops up, fab moves up to sit above keyboard.
on ios, however, fab does not move up and disappears behind keyboard.
note i am testing on an iphone 6 using ionic view app.
"failed to deploy to device, no devices found" appears randomly when device is connected correctly.
note: i can access my device 's files normally from computer when error occurs.
while i scroll an ion-content with some elements inside (div, ion-grid, canvas, custom objs), randomely one or more items disappear.. with safari 's debugger i can see the html structure and css right, but they remain invisible on the display...
currently translations for default components (for example `canceltext` and `oktext` in the select component phofhyperlink ) have to be provided on each use.
in a sidemenu, a button open the page to a new view.
the navigation function used is "push": the next page appears after a short delay, it feels like reload (feeling of blink).
when push is replaced by "setroot", the behavior is smooth and the next page is rendered without blink effect.
when the app launches the launch image in splash screen is appearing twice in iphone x.
hi, since i upgraded from ionic 2.2.1 to the latest 3.9.2 i have an issue with the virtualscroll.
here is the start page (there is a toolbar in header): github logo phofimage when i start scroll to the bottom (everything is fine): github logo phofimage when i scroll a bit more, first element of list disappear to early and we can see a huge blank space which is awful.
it should disappear when first element almost visible on top.
: github logo phofimage when i delete toolbar in header it fixes issue so i think virtual scroll doesn 't understand that there this gap between top of screen and start of virtual scroll.
how can i tell him that this gap exists?
github logo phofimage it happens on both serve and devices.
it happens not only on first element of list but on all elements.
trying to build or run an app natively, yields the web-version, without the ability to use cordova plugins.
phofcode you see errors about the config.xml file, because the path it 's trying to access is incorrect.
the actual path is: phofcode it 's not entering the "app/src/main" directories
check ionic app conference about, click on datetime selector, the middle value won 't have the "highlight" (in browser on other than ios platform)
the error plugin_not_installed is given for the health kit plugin which is installed which has at that point been used around 3 times.
if we build a new app using your blank starter or any other template building the android app we are running into this error phofcode
i checked out the ionic tabs starter (ionic-angular 3.9.2) and ran it on my ipad (ios 10.3.3).
when selecting another tab and then switching the orientation from portrait to landscape, the tabs are placed above the header bar.
the tabs are also overlapping statusbar when this happens.
(.tabbar.show-tabbar is getting a top 0 which should be 64px) after this, if you do another interaction on screen, tabbing on a different tab for example, tabs are placed under header bar again and top is set to 64px.
(still in landscape mode) when switching orientation mode back to portrait a top of 0 is applied to tabbar again, resulting in overlapping statusbar.
when running cordova commands through ionic whose resulting calls issue a git command, prompted credentials cannot be entered using the shell.
shell input is not being redirected to the credential helper.
the cursor at the input field stays blinking, but input is not possible, nor is it possible to sigterm or close the command line windows without killing wrapped npm process.
url in pwa gets changed even if ionviewcanleave returns false
- (ioninput) of searchbar never triggers on prod build on both android and web.
- works great on both platforms in debug build.
simply trying to add meta tags dynamically using the angular meta service.
meta tags are not added.
new ionic + new cordova no longer work for debugging (with livereload)
on a side menu and tab app, navigating from a page of tabs to a newly set root page causes a flickering effect when back button is pressed.
i adopted lazy loading but i dont want to specify segments in each page file through @ionicpage() decorator over component.
i would prefer to centralize them in a single file like in app.module.ts as before with: phofcode but by doing that i have this error: uncaught (in promise): error: no component factory found for homepage.
did you add it to do you know if its possible?
when i do `ionic cordova build android`, the generated `vendor.js` file has typescript syntax in some methods, which generates javascript syntax errors on the device 's browser.
after receiving a push notification i want to push a tabspage.
phofimage phofcode the tabs get unresponsive and laggy.
.when i click the second tab, the page will be entered, but the icon of the tab will not be updated...
i input xxx.com/yyy?zzz=123 on locationbar, hit enter, locationbar shows xxx.com/yyy, zzz=123 is disappear.
i am using a element ion-grid within a ion-list and the grid system is not respected ion-grid phofimage
i 'm using deeplinking in my ionic v3 app.
i 've given all my pages a defaulthistory of the home page, configured in my app.module.ts: phofcode if i navigate to a page within the app, it has a back button as normal with the app 's nav stack.
if i load a page from url, or refresh page, it gives me back button with the home page only on stack, as expected.
however, if i navigate to page and then navigate back to previous (or forward again) using browser 's back/forward buttons, pages do not have back button.
when building using the production flag: "ionic cordova build android --prod" or "ionic cordova build ios --prod", the ion-searchbar does not trigger searches and cannot be closed either once open (cancel button has no effect).
if a modal opens with a textfield with the autofocus attribute, the text field gains focus, then immediately loses focus.
this only occurs on android.
ios appears to be ok, as does desktop.
i 've followed the proper documentation regarding opening a modal on another page, but i 'm still getting an error: `uncaught (in promise): error: no component factory found for [object object[.
did you add it to .... etc etc `
scrolling creates a large memory leak.
most noticeable on ios and on ipads
interaction of tabs&keyboard&header causes ion-content to have view error.
1. on a tabbed page 2. keyboard appears 3. navctrl.pop() is executed (if keyboard is closed manually, either by tapping outside the keyboard or back button) 4. ion-header on previous page cuts into ion-content
popover works great on browser but in device is unstable.
frequently it opens partially or totally outside the screen (i can confirm that is opened through the log and the screen that stay freezed).
even setting no event (to show the popover on center) it is same.
currently, if you want to select 59minutes, you need to start at 0 and slowly increase to 59... same for the dates, if you want to go 28th day of the month, you need go from 1 28th... (in most case...)
`ionic cordova run android --device` return an error: "error: failed to find 'android_home ' environment variable.
try setting setting it manually.
failed to find 'android ' command in your 'path '.
try update your 'path ' to include path to valid sdk directory."
will never capture the event, but works fine.
funny enough, this only affects toast, alert and actionsheet work fine.
brief black screen when using lazy loading.
reloading window in google chrome using iphone layout.
also when closing app and reopening it in ios.
currently the alert dialog already supports a wide variety of input methods.
one important one is missing though: the ability to create multi line text input fields
doing heavy calculations during view initialization does block the closing of the ionic sidebar menu.
neither using `ionviewdidload` nor when using `ionviewdidenter` (which should _runs when the page has fully entered and is now the active page._ ) makes sidebar close until calculation is finished.
i have created a new blank ionic app, and then served it through browser.
the app showed in browser correctly, however when i perform any code change, the live reload stops working triggering an error, and the app stops working, forcing me to reserving it again.
phofcode option does not get disabled.
alert/popover interfaces look at the disabled attribute (eg phofurl but `ion-option` disabled attribute is not inspected for action-sheet interface.
if there are tabs at the top position with no header for each tab : - on iphonex (ios 11.0), the tabs appears on overlay on the statsubar.
image phofimage - if i use : the result is : image phofimage the red background color is just to show better borders.
- on iphone 7, with ios 10.3, problem is : image phofimage
when running the app on an ios device (run, emulate and build --prod) after some seconds i get the following error cioc5 phofimage i don 't know how to debug this in order to provide more details.
however, once this error occurs i notice that ionic events don 't work anymore.
actionsheetcontroller displays action sheet at the bottom of the screen in full width.
app developer cannot specify buttons in alercontroller to have destructive role.
actionsheetcontroller accepts the role already.
my ionic app build success on windows while failed on mac.
if loading any chunk when using lazy loading failed for any reason (ex: lost connection for seconds) the app will not try to load it again and the page or modal will not open till the user refresh the app
when an ion-button is embedded in an ion-navbar, it picks up several bar-button style classes (`bar-button`, `bar-button-{platform}`, `bar-button-default`, and however, if the button is defined in a custom component, or if a custom component that includes an ion-navbar embeds a button using `<ng-content>`, the classes and corresponding style rules are not applied to the button.
i have a `<video>` tag controlled by code for play/stop user actions.
when user asks to play, the following code is executed (as per google chrome hint: phofhyperlink ) phofcode when i run the code using `ionic serve` everything goes fine, but when i compile for platform using `ionic cordova build ios --prod` the following error occurs: phofcode
we have an app with "dynamic" tabs (the tabs displayed can change depending on some data retrieved some the server), so we 're using *ngfor in the ion-tab components.
i noticed that if i remove an element from the array, the tab is still displayed.
also, if i add a new element at start of array, tab is displayed last.
i looked at code of ion-tabs phofhyperlink and i 've seen that only thing it does is: this._tabs.push(tab);
if i have an app with a segment like /foo/:id and i change from say /foo/1 to /foo/2 in the browser bar (or via window.location), ionic doesn 't detect and change this appropriately.
hitting f5 to reload the app then loads id 2 correctly.
i believe this is due to the loop in deeplinker 's `_loadviewforsegment` which calls `done()` only when comparing the viewcontroller/segment ids rather than data that has been passed.
using the open method on an ion-select ignores the interface type, it will default to alert, even if popover is selected.
get the viewchild of the element, call open on it, it will always use alert interface.
it is possible to get it to show without view child using an id and .click event on element.
also is there an event that i can hook into for when underlying value has actually changed, since its a popover i assume there is a dismiss callback?
the on ionchange gives me changed value but it hasn 't updated underlying value yet.
so when i show second select box in this event will bring up old data not newly changed data.
in example you 'll see virtualscroll list with detail page for each item.
on item page current item value is displayed and present button for incrementing this value.
on some details pages value is not updated by clicking button.
when i added logging, i saw, that value is actually incrementing, but not updated on view.
see screenshot screenshow showing a border in the middle of a list phofimage this is fixed for `:last-child` by adding an extra last item in virtual-scroll.ts#l585 phofhyperlink .
why is the same not done for the `:first-child`?
getting the following error in the console after selecting an item from an `ion-select`: phofcode the code at `ion-select.md.js` around line 233 looks like this: phofcode
when using the native media-capture plugin within a modal page, if another page is pushed after a photo is captured, that page is not correctly positioned to fit the status bar.
if you have a footer toolbar and bottom tabs, both will account for `safe-area-inset-bottom` on the iphone x, when only the tabs should.
the following css rule is currently applied: phofcode and it looks like this: phofimage
attempting to change the data via core datetime component results in: phofcode
hello, i have a page which containts alot of items - this page has a pull to
using tsconfig `"nounusedlocals": true` gives phofcode when used with the @ionicpage decorator
on some devices, after selecting a text input field, filling it with text, and then proceeding to the next input field, i can't type anymore in the first field, it wont even let me select the field by tapping on it
the images in any list are not displayed correctly on ios only.
the images look distorted, color seems off and any random one image from the list is overriding the wholes list images.
on android its ' working fine, its ' just the issue with after ios 11 updates.
ios 11 list bug_1 phofimage ios 11 bug_2 phofimage ios11_bug_1 phofimage
when using `<input type="file" accept="image/*"/>` on ios11 (emulator or real device) the native file/image browser ui is shown when the element is clicked.
upon picking an image, any page headers and footers (nav bar/toolbar) are repositioned so the header is beneath the status bar and footer is partially off screen.
in ionic/core this syntax phofcode throws this type error phofcode after talking to brandy about this its because `bottom` and `right` are css attributes, not jsx attributes.
i try to build ionic project under jenkings on windows and from time to time my build failed with: phofcode
it wont use the div with class bg-parallax as a background that slowly parallaxes to the side as each slide is slided.
the documentation is quite unclear about that, it just mentions to go to swiper/api page which does not tell me how to setup the background-parallax feature for ionic.
i can write some text in the textarea, after touch outside the keyboard is hiding as expected.
but if i make this two times again i cant write more text into the textarea.
it feels like it is blocked or diabled.
the label is not activated.
if i open the sidebar and close it, i can write again.
if remove <ion-item> it works.
if i use `<ion-input [autofocus]="isnew" [(ngmodel)]="item.name" ></ion-input>` i get the error message from angular: "can \'t bind to autofocus since it isn 't a know property of ion-input".
cards with a background image and text overlay could vertically center much better (i.e.
2 lines of text is not vertically centered)
if you are on a page that has a control such as a ion-select or datepicker open, and you navigate away using setroot(), the page navigates but the controls remain open and active on the screen.
currently, popovercontroller api options cannot be applied to ion-select.
alertcontroller and actionsheetcontroller are supported by passing `selectoptions`, but options like `mode` are not supported when the `interface` is set to `"popover"`.
i download ionic conference app demo, remove the crosswalk plugin, and run it on android virtual device(x86 image, android 5.1.1), the app throws following error: runtime error unexpected token illegal if i close the error page by clicking the close button, app enters into a white screen of death.
my function calls my rest api service provider to get data from my server.
was in phofurl and had the web animations api types installed.
this then threw an error with the latest ionic/core: phofcode
on chrome, navigating back using the browser back/previous button does not work, url is updated but not the active page.
take this example: user is on tab1.
user decides to navigate to tab2, clicks tab2.
user wants to navigate back to tab1, clicks previous button on chrome.
when running phofcode or phofcode and a change is made the app is reset to the initial page.
even if you increase the buffer ratio, problem happens.
when using this on an ios device and i 'm scrolling in really small steps, it checks the checkboxes even though i 'm not tapping them.
there is no problem when doing this on android or when i run `ionic serve` and view the app on an ios device.
it doesn 't happen when doing long scrolls though.
i have a "tabs" with 2 "tab".
on tab1 i have an img with [srcset]="img_url" (load)="load_func()".
when i go on tab2 and resize the window, "onload" is triggered and the load handler called.
this wrong behavior happens when [srcset] of img is bound.
if i put one of these elements in my html pages phofcode or phofcode the content of the <ion-label> tab doesn 't display on internet explorer 11, it does with firefox and google chrome, strangely, the label on an <ion-input> tag is displayed on these 3 browsers.
using in android we have the desired behavior in statusbar, but now the app is not scrolling to input when i focus it, and keyboard overlaps the input
demo phofhyperlink * after rotating portrait > landscape > portrait status bar overlays the header and/or content of the ionic app.
i can see, that margin-top property in html is set with the wrong values on these html elements: `<div class="fixed-content" style="margin-top: 44px;"></div>` `<div class="scroll-content" style="margin-top: 44px;"></div>` * after rotating portrait > landscape there is a huge margin between screen and header - also, the same properties are set with wrong values
ionic cli doesn 't set the key in `*-info.plist` file when adding an ios platform.
this will cause malfunction of the call of the method returns neither resolve nor reject (tested with simulator target ipad-air ios 11.1 and ipad mini device ios10.3).
when passing a `timeout` option (for example 15000})`) the method provides a timeout error.
as per - platform.ts, line 814 phofurl - swiper-events.ts, line 840 phofurl
(cilck) event fires many times (14 times in my situation) in ios fullscreen-mode
we have noticed this issue on iphone5 using ion-slides component, but also elsewhere.. (not specific to ion-slides).
when you drag slide to half of a screen and let it autoscroll, there is about 1 sec delay until animation starts.
also similar delayed reactions on tap controlled changes.
after app boot click and other callbacks aren 't called.
(notification: ilocalnotification) => { ... });`
the statusbar of my app works not as my expectations in ios 11.1+,the header has extra 20px height and doesn 't work in ios 11.1+(iphone6s plus) but it all works well in ios 10.3.2.
i have a page called 'settings ' where the user can disconnect by clicking a button.
when he clicks on the button i call the clearstorage() method of my storage provider but an error is thrown: phofcode
seems similar to #11873 and #11374, which are marked as resolved.
i 'm using the latest `ionic-angular@3.9.2` with `angular@5.0.3` and `rxjs@5.5.2`.
i have to specific issue when navigating through the app, except when i start using the `back` and `next` buttons of the navigation, i get this error in console: phofcode
on orientation change virtual scroll not rendered correctly, header has incorrect margin
css transform and box-shadow does not render correctly on mac os.
popover is not consistent the errors make black screen effect in several occasion.
when you repeat the following steps twice the ion-input stops working: - click on the input to focus - click anywhere else to unfocus after doing this i'm unable to focus on the input and use it.
modal view popup and the header is shown but not <ion-scroll> content.
i run ionic lab and run on the device
1. create two providers with the same class name (if using the ionic super starter it would be the items provider and the items mock provider) 2. import one of providers in app.module.ts 3. depending on which one (maybe order they were created?)
you will either have no problems, or you will get phofcode
if the app has the following situation: 1) `app.html` has a `nav` and `app.ts` sets `rootpage` as one page with side menu (homepage); 2) homepage has a popover menu that changes the root nav to another page with side menu ( or even the same homepage class); 3) after using popover menu new page is shown, but side or `menutoggle` are not shown.
if you have a view that contains tabs and one tab page has a button that pushes a page to the stack using you can use the swipe back gesture to go back to the previous page in the stack if however, button uses this, so that tabs are not visible when new page is pushed, then swipe back gesture does not work.
when an alert input, that ain 't a radio button or a checkbox, have the "disabled" attribute, the input is still editable.
while using a `ionviewcanenter` returning a falsy promise, and setting a new nav root, segments are not added anymore in app url.
at seemingly random times, images in the --prod application (only on ios) will become corrupt and display incorrectly.
sometimes the images simply repeat improperly, other times they become jagged and distorted.
scrolling the page up and down rapidly seems to clear them up most of the time.
i have not been able to catch this occurring in a dev build, or in a state that would allow me to attach a debugger, but nothing in code changes these image urls, and "shaking" scrollbar seems to clear it up sometimes, so doesn 't seem like a code issue on my end.
i 'm at about my limit for trying different ways display images prevent this from happening.
i 've tried background images, ion-img (can 't use for various other buggy reasons), regular imgs, etc.
phofimage 1 phofimage 2 phofimage
when i create android release with `ionic cordova build android --prod --release` the ngc compiler breaks with: phofcode
when initializing tabs dynamically, assumingly something goes wrong during initialization.
tabs are generated using `*ngfor` from a simple array in the .ts file.
- the tab bar/tabs are not visible, but a click in the bottom of the window suddenly makes it appear and switch to another tab.
- tab content is not initialized correctly, leading to unexpected behavior; layout issues and other problems - if dynamic and "static" tabs are mixed (hardcoded/non-dynamic ion-tab), the order will be mixed up.
- after initialization (or populating dynamic tabs property) a call to `select(0)` does nothing (ionic probably assumes first tab was already initialized while it was not due to dynamic loading with ngfor).
the provided minimal example should demonstrate problem.
last month (octorber) i used to browse to some interactive 360 content using iframe and control it using the gyroscope, but sudently it stopped working also i noticed in the console the following warning: > the devicemotion event is deprecated on insecure origins, and support will be removed in the future.
you should consider switching your application to a secure origin, such as https.
see phofurl for more details.
so it 's possibly related to #11030
* make sure `ionic ssh setup` is currently
when running `ionic serve` on the browser if i do a right click, i get the following : phofcode
my english is not very good, so may have some mistakes.
when i have two `ion-content` in the page and place them horizontally inside an `ion-content`, there is a problem when i `navpush` the page.
`ion-header` and `ion-footer` 's transition are working correctly (slide in from right to left) except the inner `ion-content`.
but this problem doesn 't show in the last `ion-content`.
why i use `ion-content` instead of `ion-scroll` because `ion-refresher` and `ion-infinite-scroll` must be placed in `ion-content`.
i don 't want to use `ion-tab` because it will change my url.
it also happen when i remove `ion-sliders`
when using an `<ion-input>` with `(ngmodelchange)` and angular 5.0.x, `ionic build --prod` and `ionic build --aot` are failing with: phofcode
i am trying to get the screen height and width of the platform object, but evidently the screen orientation confuses these values.
(see the code snippet below)
1) rotating phone on virtual list which is inside a popup does not calculate the height of items correctly - it 's slipping onto each other when you rotate back to portrait mode from landscape - (the first page, when you scroll to down it displays correctly from the second page) 2) item header inside the list disappears (non-popup version also), when you scroll (appears first without scrolling)
the documentation for the slides component tells us to call `update()` when child slides are added or removed.
the problem is that the app has no way of knowing when this process has completed.
`this` is undefined when running a callback (`handler`) in the event subscription which is trying to reference another class function.
for example, consider the following, a simple class: phofcode when the `user:updated` handler runs, you receive the error: uncaught typeerror: cannot read property 'persist ' of undefined the `handler` reference is required when you want to unsubscribe from a particular instance of an event, as you need same reference to pass in, hence set up in this manner, and call in ngondestroy.
otherwise, a lambda function would have sufficed.
when i build my ios app i 'm getting the following error: `
the server side receives the binary data but the first byte of the real data is missing, for example, a jpg image taken by ios, the file starts like this(hex): ff d8 ff e0-00 10 4a..... however server receives data like this: d8 ff e0-00 10 4a..... i manually added ff as prefix on server side, image can be opened without any problem.
no any operations on file from client side, simply call server side is java server, rest
running npm run ionic:serve the app loads as expected but any changes to ts classes cannot be seen unless serve is stopped and started again.
any updates to html files are seen immediately without a restart.
i am not receiving any error messages in the console and the app will compile for ios successfully and i have deployed to real devices without issue.
after `ionic cordova build ios --prod`, the built `main.css` does not include the `constant()` properties for some ios 11+ properties which leads to some issues including footer tabs not having the necessary padding on iphone x.
on device, you can swipe back, at the same time pulling down at a diagonal area and see the small "white" bar in the top ( phofurl this basically means you swipe back and down in a diagonal way, you can see a small sliver of the background, because it 's being pushed down (via scrolling).
this only happens when using ionrefresher.
if refresher is not there, no bug.
this is evident in our production version of untappd, if you want to see in a production app.
you can also see this repo: phofurl
stacked page pushed by the push function of ionic navcontroller, is being deleted.
therefore bringing the user back to the previous page.
same issue when page is set as root with setroot from ionic navcontroller.
this happens whenever a field is being updated either from the firestore database manually or updated from code (since i subscribed to any change from a document).
under certain condition as mentioned in steps to reproduce, ion-datetime picker selects invalid dates like nov 31. also, it selects dates which are out of bound i.e.
greater than max and lesser than min.
when i try to animate gestures like "swipe to remove" on list items, i want the item itself to slide out, which is quite common for this gesture.
to do this i use an `ion-item-sliding` with a `ion-item-options` that has an `expandable` button.
until i recently updated my ionic version, could animate this via `movesliding` (see below).
now can 't animate this behavior and the slide always closes: phofimage *behavior with current ionic version*
when a search bar is located at the bottom of a page when we try to focus it is hidden by the keyboard (needs to click on a key to retrieve the focus)
`npm run build --prod` errors out with: phofcode
very long startup time (90!!!!
seconds) after first installation of the app (android&ios).
after this long process, the app works normally.
this just appears after first install or update of the app.
virtualscroll will render properly when the view initiates.
after the view is resized by switching to landscape view on a device, the virtualscroll will re-render its view port size.
then by rotating the device back to its initial portrait mode virtualscroll will inherit same bottom-padding as used in landscape mode.
1. scroll to top like phofcode then infinite scroll not working
combination of scrolling and filtering results in empty nodes when using the virtual scroll component.
the close button on the fab-list is a 'ion-close ' fixed and not possible handle a click.
if i try to put a dollar sign $ in front of {{somevar}} like this: ${{somevar}} i get error: somevar is not defined or: runtime error unexpected token .
putting a space in between is fine though $ {{somevar}} this was not a problem prior to 3.9.2
the quality of splash screen is not optimized for high resolution devices.
for example the samsung s8 has a native resolution of however, the default splash screen png file in `/resources` is set to thus, it leads to a low quality splash screen on such device.
i have implemented a simple page with google maps v3 (not the plugin).
this is working fine on both android, and in the browser, but not on ios
after setting `ngmodel` in `ion-datetime` to a valid date.
if the `ngmodel` is then changed to `undefined`, `ion-datetime` view still shows the last date.
after diligently following all the upgrade instructions for going from 3.7.1 to 3.9.2, i 'm no longer able to run the app because of the following error: phofcode
when running ionic cordova run ios the simulator opens and loads the app, if i stop the process and then run it again, after build the simulator closes and opens.
the header and footer are showing safe area even after doing the checklist instruction.
i even itryied removing status bar plugin.
also added the viewport-fit=cover in meta tag, screen shot at 12 29 20 pm phofimage
i 'm having a problem with ionic 3 and more precisely ion-item and ion-input.
when you click on the fourth input, you leave and go to the fifth you can 't go back to the fourth (input-has-focus class doesn 't appear on ion-item).
seems to be related to a certain height
crashes when using `--prod` flag when i try to use the momentjs library.
it worked before updating something, i 'm not sure what.
`<ion-refresher>` supports an `enabled` attribute.
if we set it to be false, the refresher is disabled.
this is very useful when you need to display other scrollable/pan-able items (like a map) in the page without causing `ion-refresher` to kick in.
however, if `enabled` is set to false while the `ion-refresher` is in progress of being displayed, it stops working completely.
with the standard `<select>` html element, if the element has keyboard focus a user can either use the arrow keys to change between options or type the value that they desire, and if that value is present it will be selected.
`<ion-select>` does not have this functionality.
when resizing the window, virtualscroll does not recalculate positions.
module not found: error: can 't resolve using description file: e: working (relative path: ./src/app) field 'browser ' doesn 't contain a valid alias configuration after using description file: e: working (relative path: ./src/app) using description file: e: working (relative path: no extension field 'browser ' doesn 't contain a valid alias configuration e: working doesn 't exist .ts field 'browser ' doesn 't contain a valid alias configuration exist .js
while sliding a side menu, it 's still possible to scroll the current page.
this feels and looks wiered sometimes.
this behavior occured for me on devices (android/ios) only.
on upgrade from ionic-angular after `ionic cordova run android` the app builds and deploys to device.
the splash screen shows followed by a blank white screen.
using the chrome developer tools i am unable to view anything, no elements, no source files.
after looking at the android monitor log output i can see that the providers are being created as console log output from their constructor is show in log.
the only numeric keyboard type available currently is 'tel ', which does not include a decimal point.
this makes it extremely limited.
if we have two tab sets with links to each other 's tabs, when clicking from set1, tab1 to navigate to set 2, tab 1, then from there back to set1, tab 1, the tabs in the footer change set 1, but the content remains from set 2, tab 1 and the url is mixed up as well.
i have a pwa running in a browser.
it works fine in emulators and on android (using chrome).
sometimes scrolling stops working on ios (tested on iphone se, iphone 6, ipad).
it happens on normal ion-content or lists.
it seems to happen if i randomly tap around the app - especially the header.
scrolling then stops working for i 'd say around 15-20 seconds and then returns.
while scrolling isn 't working all the buttons still work, so if it 's a list with buttons and scrolling isn 't working - click one of the buttons still works.
i do not have any kind of special settings/functionality etc.
also, there 's no events/functions attached to headers, so no events are triggered - at leat not by me.
i have got a new ubuntu machine.
than i have installed all packages and dependences, node, java, android studio... i had create a new project using `ionic start blank blank` and ran `ionic serve`, up here all right ... the error comes when i try to build the project.
`ionic build` don 't have any error but the cordova yes.
the error is produced by one gradle script.
`ionic cordova build android` show an error and not compile
unable to use a component declared within a lazily-loaded module with modalcontroller
a dependency error is shown when trying to add a platform even though the current version matches the wanted version for ionic-angular.
i am upgrading an existing app and believe i have the latest versions of everything.
in an `ion-list` with `reorder="true"` i have enough elements that the list must be scrolled to see all elements.
i drag an element in the list below the bottom-most visible element.
the element jumps back to the starting position.
in ios, ion-fab stays behind the elements during page transition.
in this case, part of the ion-fab is behind the header.
but if you place the ion-fab in center of screen, it will only appear after some time from end of transition animation.
on ionic serve, this page is loaded: 1.
/#/root/home-t/home 2. then u click on an item to navigate to 3. then u click on 2nd nested tab to navigate to 4. all good and expected till this step.
5. press `back` button in your browser.
you correctly navigate back but the `back` button is not shown, the nested tab bar itself gets hidden.
so can 't navigate back via in app ui.
6. again press `back` button in your browser.
you are navigated back home listing page /#/root/home-t/home 7. now if u tap on any item in list, its working properly as expected.
but if u click `forward` button your browser, it loads the correct url but the page is broken as mention is point 5.
import componentsmodule in multiple ionicpage module like it suggested in this doc phofhyperlink generate duplicate components code source (in each lazy-loading module).
the navbar changes places with the tabs when rotate, when it returns to position a few times back normal others disappear if you click on another tab the bar will return to the place, when rotate, place change again, these errors started in this last versions
in my application i have three options for login aws cognito identity provider , google , facebook.
after successful login authentication when user moves to the drivesetup page, i set the drivesetup page as a root page (setroot) but i'm facing a problem that user can easily go back again on login screen using mobile back button.
as seen in screenshot, i have a navigation bar (attached code below) in my ion-footer element and the home bar is obscuring the menu button in the center.
i am using the updated cordova-statusbar plugin which hides statusbar on ipx landscape mode, but this bug occurs with old statusbar plugin and no statusbar plugin as well.
text inside ion-grid cells have more padding on the right side than the left (see screenshots)
i putted 4 inputs in one item, when i try to focus a single input, the last input is always focused.
this behavior only appears in android.
in safari (tested on mac and ipad, as built app and in browser) the activeindex of the `<ion-slide>` component will be incorrect in the `(swipe)` event.
it 's as if the activeindex is set before swipe event instead of afterwards.
this leads to `isend` firing as `true` when swiping to last slide, but `isend` should only be true when swiping right on last slide, or at least consistent with chrome?
the same issue occurs when swiping left/isbeginning.
well it shows the image in the background and the text above and that 's all fine so far.
when am clicking the back option on the top left corner in android, it 's not working.
when using ionicpages with urls and lazyloading, the app mode does not stay in android/"md" on page transition.
also the back button is no longer an icon, but the word "back".
i have set the mode to 'md ' in my app.module, so even on ios we will use material design.
`ionicmodule.forroot` allows for config options, but `ionicpage.forchild` does not, and it doesn 't seem to respect options i 've put in root module.
when a component is using onpush as a change detection strategy, the default value of the datetime component is not showing until the user chooses another date
i generate the app using the ionic super template but the ionicons on the all app appear as square blank when previewed on browser.
never had this issue before when i created a new project in past.
i 'm trying to upload the latest version of my app on my iphone.
first, i build it with the prod flags and generate an .ipa file that i put on my server.
then, i download the app from my iphone and install it.
when i open the app for first time get expected behavior with last features and design.
then, if kill app and reopen it, get an old version of app.
the status bar overlaps with the header on an iphone se with ios 11. image phofimage
when datetime component is initialized, the initial value is not being set until you open the drop-down of dates.
virtual scroll not rendering list items in dom
in the ionchange event, if one wants to change ngmodel back to the value it was before the change occurred, the value itself is changed back but selectedtext is not.
in my case, it 's changing it back to null in which case i would want selectedtext to be cleared.
if you have an `<object>` in an ion-slide, you can 't swipe over the object to change slides.
can scroll content behind the overlay menu in ios safari.
when on a click the popup having radio button opens up there 's a delay between popup shown and checkmark shown.
i 'm using ionic deeplinks (or "dynamic links") in my application.
when browsing a page, the url is changed.
but when leaving this page (with a push or a setroot), the old urls stays forever.
_co.scrolltotop not found on virtual scroll
i add popover in my homepage.
the popover contains a button, and click it will create a modal page(contains a input).
in browser and android deviceit works fine butin ios emulate and devicethe modal page has error behavior(nothing happen when click anywhere in modal page) this is my code: ## home.ts phofcode ## popover.ts phofcode ## modal.ts phofcode
on the iphone x simulator, `ion-tabs` with `top` tabs placement looks like this: simulator screen shot - iphone x - at 14 14 31 phofimage note that the tabs height it 's wrong.
i am using a single code base for browser (pwa) and android platforms.
when deploying a pwa using browser platform the platform.platforms() method is showing "cordova mobile android".
same output when running the android apk.
when i try to create dynamic tabs: phofcode my page shows nothing, tabs are not appeared.
if i add one static page before dynamic pages: phofcode all tabs are shown.
incorrect perspective applied to transforms on slide elements becoming more pronounced as you move to later slides when using coverflow effect
after the upgrade to ionic-angular `3.8.0`, when i test my app on the same iphone 6s and same app, no other code change, when action sheets are displayed, their texts are presented with a delay of 1 or 2 seconds.
action sheets appears -> 1/2 seconds delay -> action sheets text appears
in 1.15.0 and prior when i click save in my editor, the changes would be detected and my app would recompile.
after upgrading to 1.15.1 its no longer compiling automatically.
terminal window does not sure the build start or anything.
only way to compile is to kill ionic serve and re-execute ionic serve.
when i use ionic serve it is reloading all the time without making changes in code.
after it launch browser automatically starts to build again.
i have tried "ionic serve --nolivereload" and i have tried to change ionic.project to select files to watch but nothing works.
status bar rotate when app is set portrait mode.
when clicking between ion-inputs, there is a significant delay between selecting the input and the input becoming usable.
specifically, there is a 300ms delay.
clicking on the tabs and rotating the screen would hide the toolbar or content.
if we don 't click on the tabs then everything works fine.
in my app i have articles with multiple images.
what i want is to tap on the image to view it full screen with a modal.
the problem is that my app content is created dynamic and i had to sanitize the content.
the content is displayed perfectly but the (click) event which was sent into a json and sanitized not working.
inside the source i can see (click) function but nothing happening.
tab bar not appearing, and it 's css-style set opacity to 0.
i have a list of cards which are swipable.
when all the cards are swiped it shows a load more div.
i have an animation after each swipe so i have to wait 300ms to wait before i remove card from view.
this works fine in browser.
but it doesnt work well on my phone on app startup.the load more div doesnt show up even all the cards are swiped.
it does work as indented without settimeout.
have tested only on android.
wrapping the phofcode function in phofcode does trigger change detection.
since upgrading to `ionic-angular 3.7.1`, i 've been experiencing a weird top padding issues with `ion-content`.
initially the view loads fine, however after interacting with the view like rebinding data or refreshing using the `ion-refresher`, the top of `ion-content` gets shifted down with extra top padding, which appears same height as status bar.
oddly enough, text that has `user-select: text` enabled in css to allow copy & paste, is being highlighted where input is _suppose to be_ rather than where it is.
on android opening an article in our app with an anvato video embed (iframe) and playing the video works fine.
attempting to go fullscreen does nothing, it doesn 't open the native fullscreen player you usually get when watching an kind of video fullscreen.
my app has header with different color and main page with transparent header.
when closing any page it is leaving a trail of header which stays on page for a second or so and then goes away.
this is happening only on ios.
this is an unexpected behavior and poor for user experience.
with ionic 3.7.1. the error of reloading the wrong subtabs while loading tabs-page does not occur anymore.
but now the browser back button does not work anymore.
this means that when i click on back/forward button the url changes but content stays same.
when adding to a `<ion-select>` element in a page, the page does not display anymore: - if i try to access the page from a classic push, the redirection does not occur.
- if i try to access the page from a deeplink, i got blank page displayed (even if when i 'm looking at chrome inspector, i can see that everything seems to be loaded).
as soon as remove everything works normally again.
there is no error in console.
after installing apk on an android v7.0 device, breaklines on ion-textarea are not working.
meanwhile, it works properly when running on debug mode.
<ion-textarea rows="3" disabled="true" {{user.postalcode}} {{user.city}} this is shown as {{user.address}} {{user.postalcode}} {{user.city}} {{user.province}}
in case you remove wkwebview you are able to scroll the whole app.
the navigationbar and the tabbar moves up and down.
like the docs says you can still remove wkwebview.
in our case we remove wkwebview because we need to test more before we switch over to wkwebview.
the last input on a form inside a `<ion-list>` shows at longer boder-bottom than the previous ones in android.
ion-tabs move to the bottom after cordova camera open to take picture: img_1652 phofimage
when a page is generated, the generated code contains unnecessary trailing commas in almost all the generated files
safari displays a runtime error when starting the app: phofcode
in ios: when using an external keyboard to navigate in an ionic app with tabs on the bottom - the navigation starts at the bottom of the page on tabs, and only after goes back to top page to go over page in order.
the following issue occurs when using an external keyboard to navigate in an ionic app (for accessibility).
when a modal is displayed - the navigation also goes over the elements in the parent page
app crashes when after start, when using fcm as proposed in phofurl only ios, android is ok. the cause is that the generated ".ipa" installer for ios, contains a
i got an error if i 'm execute `ionic cordova build android` because of plugin restore try.
i have these deep links configured ~~(btw.
how can i add line breaks to my code?
)~~: phofcode when i navigate from homepage to placespage, the url changes as expected.
now, when navigating back and forward using the browsers navigation buttons, the app switches from placespage to homepage and forward again to placespage but the navigation toolbar does not show a back button in placespage but hamburger menu that should only be shown in my home page.
the navbar button is not aligned to the navbar title when on a --prod build.
screenshot phofhyperlink this is how it looks when deploying without --prod flag screenshot phofhyperlink the behavior is only happening on ionic-angular 3.7.x, downgrading to ionic-angular 3.6.x properly builds a --prod build.
i am able to run
running `npm install -g ionic@latest` returns: `+ ionic@3.13.2 removed 1 package and updated 11 packages in 23.97s` but when running `ionic info`, the old version is still there: `ionic (ionic cli) : 3.9.2` the new version is not installed.
if i use ion-slides in the content, then ionscroll event is not firing.
but if i don 't use ion-slides in content, then ionscroll is firing correctly.
in "src/manifest.json", the icons image is linked to "assets/imgs/logo.png".
but this image is not provided in demo project.
when i use "git push ionic master" to push my linked application, it fails during the build process.
when it is doing npm install, it attempts retrieve another private git repository listed in the package.json via npn.
it fails with a host key verification failed message.
lifecycle hooks are not called when navigating outside of a tab nor when popping back to it.
to make it work i had to place my code in the parent tabs.
updated the angular and ionic packages to the latest version and whenever i use the keyboard on android and go back to he previous view using the phone back button, `fixed-content` and `scroll-content` divs loses `margin-top` attribute, making content shifts below header.
when i start the app by calling an inner page (url: root/inner-page) its controller starts before app.components.ts ends, in the app component i do some basic things like fetching the configuration from the server by an api call, these infos are not available in controller page at runtime and, of course, it generates an error.
android 4.4.2 doesn 't support the url object ( phofurl to parse an url.
ionic 3 ion-select doesn 't show placeholder when programatically the ngmodel value is set to null.
only setting it to [] shows placeholder.
the toggle component is easily triggered in scrolling up and down
if navigating back after rotating device back and forth, topmost content on the previous page is hidden under the navigation bar.
problem evident on both ios and android.
i have updated to all latest ionic-angular, plugins etc in the ios 11 checklist.
in my app module i have: phofcode the fixes for the ios11 safe-area-inset-top don 't seem to have taken this fully into account.
'http: response with status: 0 for url: null ' on every request.
depending on the type of navigation used (each of the 10 buttons in demo project implement one way of navigation): * multiple tabs elements are shown.
* navigation to tabs2page succeeds but tabs1tab1page is shown instead of tabs2tab1page.
build fails when trying to import something outside ionic source folder.
the project is a normal ionic project with meteor api.
project runs fine using `ionic cordova run android --prod --release --aot --livereload`.
however, it fails when `livereload` flag is not given.
with ionic serve, project runs without any problem.
the only way to run the project right now is by using `cordova run android` command.
i asked about this in the @urigo repo for his tutorial whatsapp clone using ionic cli phofhyperlink and they confirmed that this issue is not related to their implementation.
when ionic app is build is --prod, some properties differ
the footer is missing margin / padding when is set to false ios ko phofimage
i am trying to run an ionic app on ios 9.3.5 (simulator).
the app is stuck at splashscreen and xcode console displays no significant messages, but in safari developer console i can see the following: phofcode
when using git bash on windows, when the ionic cli prompts for the user to make a selection, ionic will choose the wrong item from the one i actually selected.
- my app is opened on an android device in fullscreen mode (available on samsung s8 for example) - i have a home page with a list of items - i have a child page with an `ion-input` 1. when opening the child page from the home page using `navctrl.push()`, then clicking on the input, the keyboard and android action bar appear.
2. when i have finished writing, keyboard and android action bar disappear.
=> this action makes it so home view is pushed up, and i cannot not scroll at top of this page anymore.
documentation says, that by applying `align-items-center` the rows will turn into columns.
see phofurl there is no test case connected to the code there.
it looks like this is not the case.
after resized window, the item position in virtual scroll list is not rendered properly.
when app is release in production mode.. the ui get distorted.
the ion-content sometimes randomly get overlap in ion-header.
some components doesnt get recognized .
keyboard start to behave in weird way, it doesnt allow scroll when open header get pushed up.
when showing an alert on top of a modal (for example to notify the user of a (network) error), pressing escape results in both the alert and the modal being dismissed.
when running app on android `5.0.0` i get an error when tapping on a list item and navigating to some page: phofcode
virtual scroll shows flickering effect if list have images and that list is updated.
the ion-img component, besides being fairly hamstrung by it 's limited use cases (within virtual scroll linear list only), doesn 't appear to be using the new httpclient for requests.
in a mobile context, where token based auth is increasingly the norm, i can 't send an http authorize header with normal image requests.
this is currently a big hole in ionic/cordova that doesn 't have a clean solution in apps that use images in a variety of places.
we have a ion-list with different buttons and different ion-icons for our main menu, something like that phofcode the problem is in this case the text for one button we the `cloud-download` icon is not aligned vertically with the other buttons, see the screenshot image phofimage having a look to icons cloud-download icon is 26,25px width but most of other are only 24px and some are 24.5px.
i created a repository where you can reproduce this issue phofurl
having an iframe which loads a webpage using lazy load (it is a list of articles), the view is refreshed every time new articles is supposed to be loaded, view goes to to the top of the page and new articles aren 't shown.
ionic cordova platform add ios > cordova platform add ios --save running command - done!
> ionic cordova resources ios --force collecting resource configuration and source images - done!
filtering out image resources that do not need regeneration - done!
uploading source images to prepare for transformations - failed!
http error 503: post phofurl <!doctype html> t<html> t <head> t t<meta name="viewport" initial-scale=1"> t t<meta charset="utf-8"> t t<title>application error</title> t t<style media="screen"> t t html,body,iframe { t t tmargin: 0; t t tpadding: 0; t t } t t html,body { t t theight: 100%; t t toverflow: hidden; t t } iframe { t t twidth: 100%; t t theight: 100%; t t tborder: 0; } t t</style> t </head> t <body> t t<iframe t </body> t</html>
`ion-footer` and `ion-toolbar` inherit style class `-md` in safari
when i try to build for android i run into this cryptic error message listed below.
i have a list of videos.
the first 16 videos play as expected.
but starting from 17th, the video keeps loading but it never played.
i find this bug only on ios device.
on android it works fine
android show footer tabs when focus on search input.
when i have an input in a list item in a form, the angular form validation classes for the list item and the input are different.
e. g., clicking into an empty required input and not entering anything sets `ng-touched` for the input but not list-item.
clicking into it again updates it for list-item as well.
this behavior is different in `ionic-angular@3.5.2` and `ionic-angular@3.7.1`.
in `3.5.2` field stays untouched/pristine until something is entered, so it only becomes touched/dirty and invalid, if you enter something delete it again (and leave field).
in `3.7.1` after entering leaving field (without typing anything), becomes touched but list-item stays untouched (the form is touched as well though).
clicking in out again finally makes list-item untouched as well.
(it gets highlighted as invalid though, also see #13077).
i have been successfully developing with the imagepicker plugin up until recently, with what i believe to be the ios11 update.
android is still working fine.
from what i can gather the .getpictures() function is not firing and no errors are shown in the console.
the native ios image picker is not launched at all nor is request for access.
i am happy to explain further, just wanted to initially check if this was an ios11 issue or if others are not experiencing this, its probably something in my code.
after registering the hardware back then if ads are displayed, pressing the hardware back exits the app and does not bind to the normal behavior
on ios, when focusing and scrolling to the top element that is half hidden, cloning and rendering breaks in a way that looks like duplicate element see image 1st image before focusing fullsizeoutput_3 phofimage and second in the middle of scrolling to focus fullsizeoutput_4 phofimage the end state: fullsizeoutput_5 phofimage
back button icon in the header showing as an square box
i have a sorted array being displayed using virtual-scroll.
when the position of an item within the sorted array changes the virtual-scroll does not render the data.
adding a new row and removing a row updates list though.
navigation bar icons are vertically misaligned in ios 10 <img width="650" alt="screen shot at 3 27 03 pm" src=" phofurl
when i infinite scroll up, it infinite scroll many times if the user scrolls too fast upwards.
if i disable infinite scroll, the ion-scroll-content will be set the enabled instead of disabled and this leaves a margin of height 84px.
when using file plugin from ionicnative.
the "plugin_not_installed" error occurs on real device, even though it works as expected on ios simulator.
the button in the footer is misplaced on iphone < x and hidden on iphone x iphone 6 bad phofimage iphone x bad phofimage
hold down a key on your keyboard in the input area for ion-input and then it, and any other ion-inputs with type="text" on the same page become unresponsive
when using a split pane, both the side pane and the main pane both have the class `split-pane-side`, therefore they are both the same width, rather than main area covering rest of browser window.
the .activated class is kept on a activable element when the finger or mouse is released on an non-activable element
i have a leaflet map in my app.
i use componentfactory to create custom page content (=unique component) to the leaflet popup.
now i tried to refactor my code to use lazy loaded pages.
everything works fine, but i can 't use the componentfactory with the component 's name: phofcode for temporarly solution, now import this page as normal page, and the other ones are used as lazy loaded pages.
but have a problem... have a link in popup window, which navigates next
with ionic 3.6.0 the content had no extra padding.
after upgrading to 3.7.1 it seems safe-area-padding is added?
i 've added the meta view port setup as per the ios11 blog post.
i have an issue using an `ion-datetime` into a custom component called `picker-input` on my ionic 2 project.
if i use `ion-datetime` component inside an other component it does not "bind" value changed to parent page.
if i put directly the in my page template, both components (ion-datetime and picker-input) will work....
there appears to be no available property for the breakpoints phofhyperlink parameter, which is available in swiper js
color of switch uses the primary color by default on android
when you navigate to another page, open and dismiss the keyboard and go back to the previous page the ion-content will be hidden behind the ion-header.
the ion-datetime picker shows a scroll on the bottom where you can select the date.
i choose to pick it with day, month and year.
the days and months are oredered ascending from low to high.
but the years roll is ordered descending from high to low.
i have `` { event: event });`` when my event object has a property that has more than 2048 characters, the app crashes on ios (closes)
when do the swipe "ion-button" element stay selected: phofimage
in android popover that was presented in the center of the screen doesn't adapt to changed size of keyboard-free part of the screen after keyboard was opened.
when i click on an ion-search bar, the cursor appears to float above and is not inline with the input area.
on a page with multiple ion-inputs, when the keyboard is displayed with the accessory bar navigation arrows, the focus is not moved when the down arrow is selected resulting in cursor moving to next input but focus not moving to next input on ios 11.
my homepage (hometabspage) consists of a side menu and tabs, one of the pages accessible by the menu (competitiontabspage) is itself composed of tabs.
the worry is that when i try to access this second page (competitiontabspage) via the menu, ionic loads the first view of previous page (homepage) instead first page tabs (competitionpage)
failed to fetch a plugin (specifically a native plugin) or problem in adding a cordova plugin below is the error message in the terminal: `> cordova plugin add --save running command - failed!
[error] an error occurred while running cordova plugin add --save (exit code 1): error: failed to fetch via registry.
probably this is either a connection problem, or spec is incorrect.
check your connection and name/version/url.
error: npm: command failed with exit code 194 error output: npm err!
path joint latest npm err!
syscall open eloop: too many symbolic links encountered, open joint latest update check failed try running with sudo or get access to the local update config store via sudo chown -r $user:$(id -gn $user) a complete log of this run can be found in:
header height changed and come more bigger on ios 11, but on browser or ionic view is okay.
please check the following image.
on browser or ionic view image phofhyperlink vs on real device or simulator image phofhyperlink
setting sass variables, such as $tabs-md-tab-text-color, in /theme/variables.scss file are not being used if "color" attribute is used when declaring <ion-tabs>.
when you use an `ion-checkbox` outside of an `ion-item` but inside a `label` it is still possible to click the checkbox because the click event on the `label` is propagated to the button.
when using <ion-label floating> in the most vanilla way with ios 11 on iphone 6 the cursor when the keyboard appears is a bad location.
this did not appear in ios 10. img_0950 phofimage
build failing with ld: framework not found iosurface for architecture arm64
in `view 1` i have the map, when i push `view 1` to `view 2` then when i try to go from `view 2` to 1` by doing `.setroot()` i get a blank view !
when using the hook "ionviewcanenter" and returning a promise, the navigation can freeze sometimes when a back navigation is performed.
in that case, it is not possible to navigate back or forward.
i suppose that there is a timing problem when the promise takes too long?
this bug cannot be reproduced in every case.
unfortunately it occurs often enough to be considered a blocker in our productive app.
by some debugging i could see the following: when naviagtion is stuck for first time, promise returned by method _transitionstart in navcontrollerbase never fulfilled.
the call does not call given resolve callback.
i am using ionic to build a webapp with the `browser` platform.
due to my web hosting configuration, i must host my webapp from a subfolder and therefore i must add the following to my index.html phofcode this configuration works fine when using ionic with `locationstrategy` set to `hash`, but breakdown when switching use the `path` strategy.
when generating the url, base href ends up being removed from url.
the app can still be navigated, however, reloading browser causes app fail load due wrong url.
when i try to run ionic serve, i have an error message but when i try it on private page, it works.
when a user accidentally picks a date he is unable to undo/remove the date via the date picker.
after following everything outlined in this blog post phofurl , the status-bar does return to normal (pre ios11) and allows the header to be fixed to the top of the viewport again (get 's rid of set 20px height with a white background on status-bar).
bug: when accessing a view with navpop or ion-tabs, after page resolves 20px height of status-bar returns and causes page to jump down, and all content be pushed down by 20px.
ionic tabs doesn 't update view while changing from tab to tab, unless a pop appears, here is tab1 image phofimage and here it 's the second tab files that 's supposed to be highlighted in the tabs bar and zeros should be the numbers of files image phofimage and here is how it updated when the alert showed image phofimage ..
the last action of an `actionsheet` is displayed to close from the home button on iphonex (see screenshot)
after updating wkwebview and the pr for my app fits better the iphone x but it looks like the content of the toolbar inside a footer would need more bottom spaces to avoid to display content/buttons above home button this occurs in case of "tabs buttons" or button or segment inside a footer toolbar (see screenshots)
after updating wkwebview and the pr for my app fits better the iphone x but the toolbar/navbar height doesn 't match.
i compared then my app with the native app like `photos` and noticed that on this device navbar/toolbar height should be bigger.
ion-spinner paused="{{ispaused}}" attribute is no longer pausing / resuming the spinner animation.
i do not see the issue in chrome but only when i build for ios.
after adding viewport-fit=cover to the meta tags the white bar moved from the status bar to the bottom.
when the ipad pro(ios 10.3.3) is linked with smart keyboard , the ion-input is focused and the screen is scrolled to top a little
the picker component 's `.dismiss` and `.present` methods both take a `navoptions` object.
however, `easing` and `duration` values in that `navoptions` have no effect.
after an undefined period of time, my app can 't build for ios devices anymore.
ion-list reorder - doesn't allow an item to be put back in the same position immediately.
when i drag the top item and decide i didnt want to reorder that one, i have to put it in any other spot first, before i can put it back.
i need a long descriptive placeholder.
if ion-textarea is empty, the whole placeholder appears.
i put some text inside ion-textarea, the placeholder diseappear.
i remove all the ion-textarea content, only one truncated line of the placeholder reappears.
currently swiping very quickly to the left and right is pretty choppy.
i 've created a new app using the cli and choosing the * conference * template.
i 've pushed it to my ionic dashboard to test it in my phone using
i have a custom provider definition and injector class in my app.module.ts, so this way i can mock the provider to work in browser.
but when i execute the command _ionic cordova run android --prod_, i don 't get a instance of this provider.
running as dev mode, the provider is instantiate normally and the code works fine.
i 'm trying to create an `item-control` component which renders an `ion-item` and an `ion-label`.
it also transcludes content ( * e.g.
* , an `ion-input`) immediately after the `ion-label`.
the idea is to ensure that form labels, error messages, field hints, etc.
are rendered consistently throughout my app.
however, ionic doesn 't seem to be transcluding the `ion-input` correctly (or maybe i 'm doing something wrong).
this example usage demonstrates how i want to use this component: <item-control label="email address" [required]="true"> <ion-input </item-control> this * almost * works c i don 't get any errors, and the `ion-input` appears and can be edited.
but the rendering/layout is off c input should be right next label, but instead it 's far off right.
if i add `floating` attribute `ion-label`, then `ion-input` appears behind `ion-label`.
scroll not working on list with elements containing gestures (press, swipe...).
`ion-row` is finally rendered as `<ion-row class="row" ></div>` .
when using dynamic attribute value for `class` attribute, the final value of the `class` attribute loses the class `row` which makes the `ion-row` to act differently.
there is a workaround, which is to add `row` class to value of dynamic attribute as following phofcode
install version 1.0.0 of app on ios.
update app with ionic deploy snapshot.
snapshot versions set to min and max 1.0.0 install version 1.0.1 - download from .plist link on remote server (enterprise program) launch version 1.0.1 - most recent snapshot from version 1.0.0 is applied.
appversion plugin is showing 1.0.1, but all other files are from the latest snapshot that shouldn 't apply to 1.0.1 close and relaunch 1.0.1 - app now loads correct files for v (ignores any snapshots from 1.0.0)
when ever i try to run the app with --prod flag.
it give me an error saying the deeplinks didnt return proper value and it get terminate
hello, i 'm having some troubles when hiding/showing elemens inside the div tag that holds the map.
when i change the variables that should trigger the hiding/showing of element.
element wont hide or show until i force a refresh by changing pages or pressing back.
at the moment, when you set focus on an `ion-input` and remove focus, `ng-touched` is not set.
it appears to only be set when you type however, this is the same desired behavior for setting `ng-dirty`.
- `ng-touched` should be set as soon as the user blurs an `ion-input`.
- `ng-dirty` should be set when the user updates control.
there is no way to `ng-touched` alone, since typing triggers `ng-dirty` alongside `ng-touched`.
_screenshot illustrating said issue:_ ng-touched example phofimage if i change this form to use `input` only controls, not `ion-input` controls, correct behavior is adhered to.
which makes me think this something `ion-input` related.
ng-touched input example phofimage the underlying formcontrol also reflects incorrect behavior, and shows `touched = false` after blurring.
android ion-content never bounces even when config ha disallowoverscroll to false.
i have a `<ion-datetime>` component with date set to and display format set to `hh:mm`, which displays `21:00`.
date (ion-picker-cmp), toast (ion-toast) etc.
show at the center of the screen and not at the center of the main content.
when using and selecting an item from the list of suggested completions, the input field is not filled with the new value.
also, the "place_changed" event is never triggered.
autocomplete works just fine when using ionic-angular v3.3.0, but is broken on v3.4.0 and newer.
threshold value for infinite scroll does not work when the value is a percentage.
but when it 's a pixel value, it works properly.
using for example a "50%" value, the event is not fired when reaching 50% of the content but is fired when reaching 100px distance from the bottom i guess.
that same value i found searching for 'threshold ' in source code.
after update version, i didnt see any log when lonic cordova run ios -l -c. ionic info phofcode after run command.
there are 2 problems, actually 1 problem and the second i don 't know if it 's suposed to be that way: the first is that after using a popover to push a page into the nav stack it doesn 't adds the padding for the statusbar even having `statusbar-padding` class present.
this is is a page where i 've pushed into stack from a button on my home page, without using popover: without_popover phofimage as you can see there 's space from navbar to statusbar content.
and here is image from page whose i 've pushed from popover: with_popover phofimage there 's no space and statusbar overlays header content.
the second problem tied to first one.
when doing same page pushed popover doesn 't enters inside `<ion-nav>` tag "over" home page.
here when i push my home page: code_without_popover phofimage as you can see there 's 2 page, one after another as it should be.
here shown code after i push with popover: code_with_popover phofimage the pushed off `<ion-nav>` and `<ng-component>` page.
when using modal instead of pushing pages they act as exected, at least in first problem, but it stacks all way down next pages, so it 's not just one page.
this first problem occurs only with ios and i 've tested with iphone 7 (ios 10 10.3.1), ipad pro (ios 10) ipad 5th generation.
since i haven 't dove deep in popover don 't know if second problem is really or it 's suposed behave that way.
adding multiple ion-toggles makes loading of the pages slow (at least on android).
the svg images are visible on devices (both android+ios) / working fine on devices and emulators the svg images are hidden in ionic view / not working in ionic view
when using a popover inside of a popover, onwilldismiss fires correctly on the first popover but onwilldismiss does not fire on the second popover.
in the ionic docs, while creating a modal, we can submit modaloptions.
one of these options is a boolean "showbackdrop" ( phofurl if i put "showbackdrop" to false, it still shows the backdrop.
when a page containing an ion-select is first loaded, choosing a value for that ion-select will cause it to display a double bottom border line, as pictured in the example below.
this only occurs for the first ion-select the user interacts with on a given page, and seems to disappear after the content containing ion-select is scrolled by user.
i haven 't been able to reproduce this on android or in chrome on desktop, and it does not occur when running app in ios safari via local server.
if the options are based on boolean ok wont dismis the modal when youve selected no/false.
when push the new child view clicking the navigation menu push the child-view inside the tabs view it appear only child view and tabs view automatically will disappearing.
i have an input text when i click the keyboard comes out and the entire screen is resized.
how can i prevent the screen from being changed?
build ios on ionic pro
currently in ios11 beta 10 or 9, using wkwebview plugin via ionic ( phofurl - also tried the cordova plugin), there is a white status bar at the bottom of the screen (similar to this issue): phofurl per cordova 's guidelines ( phofurl the fit is to add ` viewport-fit=cover` to your `viewport`, which does fix problem on uiwebview, but not wkwebview.
this plugin ( phofurl fixes issue here, but scroll is all messed up in ionic 3.x apps per this screenshot below - a quick scroll of content area fixes it but all pages are not subject to this are about 10px off in terms of intiial loading.
img_0151 phofimage i 'm not sure if this is a cordova issue or ionic, but second plugin fixes issue, then ionic 's scroll placement off - so i 'm looking for guidance here.
it doesn 't appear that inset status bar issue here.
in my case, i have a messaging page, having ion-footer at the bottom.
footer have an ion-textarea and a send button inside.
when we focus inside textarea, the keyboard comes up ,the footer float above the keyboard , also the header goes up out of screen .
but if i set " , keyboard comes up hiding footer beneath, that 's prevent header goes up out of screen.
when user presses escape key, the currently opened select is dismissed, but also modal page from which select was opened is dismisses.
when using ngx-color-picker and ng-pick-datetime module, the drag and drop cursor is working fine with "ionic serve".
but it is broken with "ionic cordova run browser" and "ionic cordova build browser".
tabs doesn 't hide when i refresh browser on a subpage, despite setting {tabshideonsubpages: "true"}
i am using deep linking and have come across an issue where two segments with matching page names causes the wrong page to load and updates the url to the wrong page.
post().map is not a function.... shown in console.
when sqlite updating create method adding new column to a table, some mobiles can not identify the change returning the error "table x has no column named y", being necessary change the widget id on config.xml to solve the problem.
method next() doesn 't work inside a provider.
there is no `saas` variable for changing the typing area line 's color (please see the image below).
define scss variable $navbar-ios-height, but navbar only take into accout with $toolbar-ios-height.
ionviewdidenter should fire after the page becomes active, but after the implementation of lazy load this does not happen anymore.
ionviewdidenter is firing before the page becomes active.
i got the following errors bellow when updated typescript to version greater than 2.5.1. ps: version 2.5.0 work's fine.
when i change app direction to rtl, the menu is in the same side
i have lazy loaded all my tabs and page components.
now when i go from a tab, to a page, when hitting back the tab re-instantiates losing the information.
just flipping between tabs is ok, but navigating away and coming back causes the issue.
i 've highlighted the issue in this video youtube phofimage phofhyperlink
updating the data in an ion-list that contains an ion-slides causes a console error.
when adding a simple split-pane to a new project sidemenu project the sidemenu and ion-nav component have the same size.
any ionic app crashes after switching to another app and then locking the screen.
after that, when i unlock the screen and try to open my ionic app from the recent apps list, it makes a clean start (with splashscreen), as if it weren 't running before.
alert prompt input lost focus (and keyboard glitch) after transition complete
on adding a cordova plugin to my app from local folder i get below error: ` > cordova plugin add ../local-cordova-plugin --save running command - failed!
[error] an error occurred while running cordova plugin add ../local-cordova-plugin --save (exit code 1): error: failed to get absolute path to installed module `
i have an issue while running under android emulator 5: when i click/tap on a button or other tappable element i 've got an error in a logcat console: phofcode after some investigation i found that a reason is in there is a using of `math.hypot()` function which was introduced in es2015 (as i see), but system webview of android 5 does not support it.
at the same time, documentation of ionic polyfills ( phofurl states that `polyfills.modern.js` supports android 5.0+ devices.
as workaround had to switch to using more common `polyfills.js` instead of `polyfills.modern.js`.
using profiling tools from edge and chrome leads to the major issue about ionic performance.
the are just too much (unnecessary) "layout trashing" for many click events in ionic.
browsing the ionic conference app phofhyperlink in google chrome with active performance tracking there are some warnings like " forced reflow phofhyperlink is a likely performance bottleneck".
(see attachment) using microsoft edge developer tools, the performance diagnostics (see attachments) shows layout events even before the button click is fired.
(probably triggered by some mouseover, mousedown animations) these layout or reflow events are painful because even simple ionic items adds a lot of dom elements.
additionally egde does not support shadow dom phofhyperlink yet.
i think with some code optimization most of these full page refreshes can be eliminated.
if we have `pagea` and `pageb`, `pagea` have a button to trigger if `pageb` with content longer than `view height`, there will be a weird transition behavior (the whole screen will slide to right by total white screen, then only display `pageb`.)
if `pageb` with the content shorter than `view height`, the transition is fine.
i found an issue when i navigate from normal page to tabbed page and vice versa.
i tried to use both push method and setroot but i have the same problem.
the following sass compilation error is shown.
when i refresh a page that has a param in the url using segment/:id i get uncaught (in promise): invalid link:
ion-datetime does not work when displayformat="m" and initial value is null.
when the user selects a different value the model is not changed see phofurl note that everything works if you set: 1) displayformat to smth else, for example "yyyy" or 2) set initial value to a valid datetime iso string
animated transitions for slides component phofhyperlink looks really well when user swipes.
however, when transition is invoked manually via `slidenext()`, images being transitioned are very often flickering.
it does no matter if you use the same speed as for those swiped or even smaller speed for manually invoked transitions - flickering is still visible.
it 's hard to describe this behavior in words, so i recorded two movies.
one for swipe gestures: phofurl and another with transitions fired by `slides.slidenext()`: phofurl for the latter, transitions are done by `slides.slidenext()` that is called as a result of tap gesture.
observe the red color that appears on the right side of a screen - this is a background of a page.
the image loading gradually and process of rendering image slower than transition - that 's why background visible.
you can 't see background when transition result swipe gesture - an image fully rendered from very beginning and it covers screen.
these examples use same speed in both cases.
also, images are always fully fetched.
when launching ionic serve with the following command: ionic serve --platform android --browser chrome platform reports that app is running on a desktop instead of a mobile... returns true returns false returns false returns false this makes testing in browser difficult...
icon does not display in "ion-option"
when performing unit testing using karma + jasmin + testbed, "error: no provider for elementref!"
appears even though i have no direct usage of elementref in my code.
output from `ng test --sourcemap=false`: phofcode
ionic info doesn 't report global package cordova
validation css classes for inputs inside list items are not properly applied (delayed by one input event) to their containging item.
using ionic-angular 3.6.0 using ionic 3.9.2 with ios; use ion-item-sliding with 10 items in the list, it works great.
use ion-item-sliding with 100+ items in the list, it doesn 't work at all.
with android; use ion-item-sliding with 10 items in the list, it works great.
use ion-item-sliding with 100+ items in the list, it still works.
on a uwp app using a the menu, there seems to be a hover effect that causes the lines in the list to disappear.
strange thing is, it only seems to happen when you move your mouse pointer from the bottom to top of list.
moving from top bottom doesn 't do same thing, in that case there 's only a momentary disappearing of line.
when using an fab in the bottom, in a page where we have enabled in the foot an admob pro banner and in that same page, when we enter it (in event ngoninit) we load an interstitial of admob pro, when closing the interstitial, the fab is hidden under banner.
android works properly and fab is above banner.
in ios, addition to hiding fab, bottom of page is also covered by banner.
it is as if after showing interstitial, size of page happens to occupy entire screen space of mobile, without realizing that at bottom it has been loaded a banner.
when i open page with tabs subpages again from menu (splitpane) i got next order of navcontroller events for active subpage: > subpage ionviewdidload() > subpage ionviewwillunload() events `ionviewdidleave` and `ionviewwillleave` not fired.
they fired only when i change current tab to another.
when on menu item added (tap) listener, directive menuclose not close menu
the menu starts to open when you drag it from 5-10% of the left edge.
using ion-nav with an ltr language, when navigating, the 'left arrow ' icon (<-) appears in the upper left corner to navigate to the previous page.
however, when an rtl language (this.platform.setdir ("rtl", true);) is used, the 'left-arrow ' icon (<- ), which is incorrect.
as described here,, the interface attribute on an ion-select elemen cant takes the following values: action-sheet, popover and alert.
action-sheet works as expect when there is three elements but shows an alert when there are more items.
scrolling a list is really slow (3 to 5 seconds response time of freeze), especially on ios / ipad 2. so app is unusable on ipad 2, very slow on ios i can see the latency in safari with remote debugging.
i have a warning: phofcode but after this warning app crashes.
can i remove this warning?
on: `<ion-menu side="right" [content]="content" type="push"> </ion-menu> <ion-nav [root]="rootpage" #content swipebackenabled="false" ></ion-nav> ` when open the ion-menu i can 't interact with ion-nav content .
in maps apps i need to interact with the map.
ios app builds but hits this error in config.xml not found in the main bundle!
install latest ionic cli on windows 10 and run commands like: $ ionic start cutepuppypics $ ionic start mytabsionicproject tabs $ ionic start mysuperionicproject super get the following start cutepuppypics ?
what starter would you like to use: tabs creating directory .
[info] fetching app base ( phofurl downloading - done!
[info] fetching starter template tabs ( phofurl downloading - done!
updating package.json with app details - done!
creating configuration file ionic.config.json [info] installing dependencies may take several minutes!
> npm install running command > git init > git add -a [error] an error occurred while running git add -a (exit code 128): fatal: lf would be replaced by crlf in .editorconfig
if we include ion-infinite-scroll in a page, then i scroll the list quickly, and the list auto slide to the end.a blank white space is added at bottom of the page, and domore() function can 't be trigered.
typescript 2.5.1 (perhaps some earlier versions as well) seems to be stricter about certain things, throwing fatal build errors such as the one described in this forum thread phofhyperlink .
there is no sass variable acting on alert titles ' color property, which has no particular value set.
the ion-range control 's thumb slider 's position in response to input events is always relative to the left-side of the element on the page, regardless of the element 's current orientation.
i am building an app with multiple "player spaces" with intention that players sit at opposite ends of a single device.
each player 's space is rotated so that it appears "right side up" to them.
the ion-range control misbehaves in this use case.
file encryption with "cordova-safe" plugin, not working well.
on mobile safari input element does not float above keyboard
if you pushing a (lazy loaded) page on the nav stack and go back (back-button of the navbar) then the url isn 't set back.
example: 1. app starts with the following url: phofcode 2. press nav!
- button and test page is shown with url: phofcode 3. press back-button (in app, not browser!
), app shows homepage and url is: phofcode
when running `ionic serve`, it gives me error *cannot find namespace 'nodejs '.
i have a single app (starting a new project) with an "<ion-searchbar>" control in the top, this searchbar has the "cancel" button active.
when you type something in the searchbar and then you tap on "cancel" button, the keyboard hides a second and then shows again, this seems to be an infinite loop (you need yo tap in "<ion-content>" or another control to hide keyboard).
i 've tried to hide keyboard manually triggering "ioncancel" event and calling ionic native keyboard method to hide -> "this.keyboard.close()" but nothing happens.
i 'm experiencing this issue with no apparently solution in forum, it 's getting very annoying achieve this "simple" behavior.
when using an `ion-item-group`-based list with virtual scroll, the width of the items is inconsistent.
in particular, text truncation no longer works properly as the items become potentially wider than the viewport (but on browser they instead end up being too short).
when setting the root page from a method inside of tabs.ts, the tabs disappear completely on app load.
after upgrade from 3.3.0 to 3.4.1, click event is not fired for &lt;ion-input&gt; and &lt;ion-icon&gt;
when switching between 2 lazy-loaded pages with tabs the page from the tab that was selected in the source tabs page is displayed in the target tabs page.
trying to compile the code, `ionic serve` or `ionic build` will end in exit code
i 'm noticing that ion `input`s inside a `card` don 't have the normal underline beneath them unless they 're active.
i have the current directory structure: - src - app - app.module.ts - common auth index.ts authmodule.ts i added in `tsconfig`, under `compileroptions`, `"baseurl": "src","` in `app.module.ts` i have: phofcode when testing my app with `ionic serve`, the compilation is succesful but i have an error page saying: phofcode when looking in the generated javascript, i found in `main.js`: phofcode so it seems that the problem is not in compilation but webpack (i would say its configuration as i have exactly same code an angular app and its working wonderfully)
ionicpage is not working for multiple urls after a space (please let me know if following feature exist in any other form) , for example: phofcode for navigation if i do phofcode i am getting redirection in web browser as below if usercity is undefined phofcode if usercity is defined phofcode
when push the new child view in menu navigation inside the tabs view it will appearing only child view the tabs view automatically will disappearing.
when landing directly on a tab page its 's ionviewdidload is called twice (as apposed to navigation to the tab from within the app, where it works as expected)
whenever i try to navigate via url, i get redirected to the root page.
when a ion-toggle must show a page, the new page is bugged when the ion-toggle has been switched, but it works if we only "click" on it.
things like [class.activated], or conditional angular in html, does not work.
when using an `alert` with `alertcontroller`, the `handler` function of a button does not accept async functions because of a type definition.
im having an issue with using ionic inputs inside of angular structural directives.
it seems that when some ionic components are placed inside 2 levels of structural directives (`ngif`, `ngswitch`, `ngfor`, etc), they disappear from the dom tree entirely.
ion-slide within ion-slides works as expected in ios 9.3, but is flickering when on auto-play and invisible when not auto-playing in ios10.3
when running 'ionic start my-app ' it errors on not finding npm and quitting.
1. open app which implements `ion-searchbar` or any input field 2. focus input field 3. click and drag header 4. header (and whole body content) scrolls 4b.
this issue can also be seen when focusing on an input field within `ion-content`, and attempting to scroll the header
have a 'tabs ' page.
inside one of the page, i try to push a page 'on top of ' the tabs page (so it 's outside the tabs/doesn 't show tabbar and 'back ' goes back to the tabs).
this works, but url isn 't changed like it 's normally done when there are just two pages in root navctrl stack.
i am trying to implement google maps inside ionic.
i am implementing a js script not using the cordova plugin.
everything work well but i and not able to close the info window directly on ios.
able to normally close it in the browser.
add an `ion-searchbar` component to a page, when tapping the searchbar observe a noticeable delay until the component has focus.
if adding `performance.now()` in `searchbar.js` tap and focus events, the delay is measured to about 400 ms between the two.
a similar issue was once reported but closed as performance was "pretty fast": phofurl - 400 ms is indeed not fast and far from close-to-native experience expected.
if you have async fat arrow function in your btn in your actionsheet & you decide to add an icon to 1 random btn - you will get an error(only about types, all works).
if you add icons to all buttons in that actionsheet error will gone.
async () => {} in actionsheet btn => ok!
async () => {} + icon actionsheet btn => not ok ( must now add icons to every or delete async ()=>)
type into field, and see that maxlength is ignored.
text is truncated to maxlength.
an `ion-note` within a card is smaller than one outside.
my url is like ' phofurl
opening alert modal and then menu, causes strange app rendering bugs.
i 'm using `$app-direction: rtl;` when using phofcode the text is being converted into: `ion-icon` & `ion-label`, but the css it receive is: phofcode so there 's no space between the icon and the text ... i also tried to use `margin-horizontal` on `ion-icon` tag - but that didn 't do anything.
when building my project using `ionic cordova build android --prod` i get the following error: phofcode
currently there is no way to know when the user taps on the clear button on ioninput components with the clearinput attribute.
when using an `ion-datetime` component, i need to use dynamic `min` and `max` params, but the component expect strings, so i have to convert my `date` objects to strings, which causes more un-necessary work.
opening a tabs page by setting it as the root page
i have a lalyloaded modal a opened.
from this modal, i open another lazyloaded modal b, and then close the a modal while the b is opened.
when i try to close the b one with `dismiss()`, it 's not closing.
the base 64 images are not displayed on any views with ios 10.3.2 this is currently working with android devices and web.
i saw that people have issues with ionic view but here i am testing on real device (iphone se) i tried with phofcode phofcode
i have to deploy an app on ios, android and windows devices.
on ios and android i have nothing to say excepted 'wow, fantastic job'.
the documentation for the two attributes: `` and `` are incorrectly labelled: `@input {string} instructional text that shows before the input has a value.`
an ionicpage a contains buttons, which - when clicked - update a property in the component.
this property itself is used in an `*ngif` in the template of the page.
long story short: clicking a button should change something in the view.
bug: when user navigates from this page a to an ionicpage b via navcontroller push method, and then uses
using a ion-input of type number allows to type non-numeric values on ios.
modal with ion-textarea and close button.
close button does a dismiss of the modal.
ion-textarea has an ionblur event which calls updatefield() and should do a database update.
ionblur event is not triggered on ios, it is only called on "ionic serve"
when setting a tab programmatically via tabs.select(idx), receive error "cannot read property 'length ' of null" at at tabs.select if change tabs by tapping the tab it works fine.
difficulty: it only happens on first open of the app after clean install.
if i close the app and reopen it works fine.
happens on both ios and android.
not encountering any other errors prior to it.
while triggering a pan event over a <div> present inside a <ion-content> that allows scrolling, the events (panstart) and (pan) are triggered and it gets hooked by the <ion-content> that makes the view scroll.
tha behavior is perfectly normal, except that the (panend) event is never triggered for <div> element.
ionic serve -l after upgrading cli to 3.7.0, the above command suddenly stops and doesn 't complete to show the app on the lab view
created ionpages with following segments: segment: 'account ' // fix segments segment: 'account/addresses ' // fix segments segment: ':a ' // whitelist fallback segment: ':a/:b ' // whitelist fallback ':a/:b/:c ' whitelist fallback open url: ionic does load the content of segment 'account '.
$ ionic state restore [error] unable to find command: state restore * snip * $
when using the new deeplink and ionicpage decorator, when i reload a "page" it 's loaded 2 time, first at 1-2 seconds after the browser has been refreshed, the 2nd time when the platform.ready finished.
this cause page to return an error since my variable are not ready.
while page is loaded first time by itself, app.component.ts init function are still running, after platform.ready end, page load a 2nd time.
in local i still see error, online page is loaded fine but i can se error on console.
i know i can improve my code significally, but for now my main issue is that can 't init my user information, because load before platform ready, making every attempt on loading user information and redirecting him to right useless...
nodes always seem to increase with modal open and dismiss even after garbage collection..
i open a page which is not on my home page tab bar and then i get this error.
when you create custom component (or attribute directive - phofurl eg.
`navbar-buttons` with template: phofcode and place it to `ion-buttons` inside `ion-navbar` of `ion-header` component: phofcode it breaks `<button ion-button>` styles.
there is no public way to retrieve the current active component instance on a tab.
when using virtualscroll in a element that renders on condition (among others *ngif) and the element is completely empty (besides the virtual scroll elements) the list will not render.
putting in anything inside the div will make it appear (even a &nbsp; will do)
this is the native & the ionic date pickers both shown: image phofimage
currently working on an application and was trying to increase the "speed" of the app for a smoother experience.
while trying to find what is causing the ui to delay i attached the safari time line debugger to ipad (4th gen) and i am noticing a device motion event dispatched every 60ms +- <img width="962" alt="screen shot at 11 38 49" src=" phofurl the application i built does nothing with device orientation on its own so i am going guess this is from ionic core itself.
when i click on the related field, it opens slow, while scrolling down there the icons instant disappear and come back after some time.
when i click to select the value, it reacts but slow.
the screen looks like this while scrolling: phofurl the screen looks like this while after scroolling: phofurl the screen looks like this while finishing scrolling: phofurl
now, generating components in 3.6.0 is excellent and easy.
however, shared module for all lazy-loaded components doesn 't import
on scrolling popover it scrolls background list.
if we create an ion-item which contains an ion-label and ion-range with labels and we enable the disabled attribute on the ion-range, the first ion-label (the one outside the ion-range component) doesn 't reflect disabled styling.
item-range-disabled does get set on top ion-item though.
if multiple toasts are created on top of each other, only the lowest one wil dismiss.
i have an app (in development) that uses tabs that are lazy loaded.
everything worked until i changed the locationstrategy to 'path ', which resulted in a 404 when navigating to lazy-loaded tabs phofcode
when focusing an `<input>` field in an `<iframe>`, view is not scrolled to the focused `<input>`.
when scrolling in an embedded `<iframe>`, no character can be added inside the already focused `<input>` field, the only way to put extra characters is to blur the field and focus it again afterwards.
user is able to select non existing date for example or
tabs are not generated when using a firebaselistobservable containing tab data, that is unwrapped by the async pipe.
it seems like the tab rendering is prioritised over other components and then not refreshed when the async pipe unwraps data.
so if i 'm correct, the tabs render with an empty array, and when observable is updated with data from firebase, nothing happens to re-render tabs.
tested in 3.6 with below code with below code ionswipe event is not being triggered phofcode while without content, ionswipe does trigger phofcode
when you try to do drag and drop to reorder a list in rtl the list cannot reorder.
the issue is with browser back button.
while navigating from sub pages using browser back button we are getting the following error.
have toggled the attribute [tabshideonsubpages] on all the tabs in the tabs page.
core.es5.js:1084 error typeerror: cannot read property 'match ' of undefined at (tabs.js:604) at (deep-linker.js:420) at deep-linker.js:110 at array.foreach (<anonymous>) deeplinker._urlchange (deep-linker.js:109) object.next (deep-linker.js:40) [as _next] (core.es5.js:3851) (subscriber.js:238) safesubscriber.next (subscriber.js:185) subscriber._next (subscriber.js:125)
datetime [displayformat] input properties haschange but the datetime text didn 't update.
i using ngzone run the code datetime view didn 't update too.
when creating a new app using ionic start the app name <name></name> is always myapp <name>myapp</name>.
an ionicpage a contains buttons, which - when clicked - update a property in the component.
this property itself is used in an `*ngif` in the template of the page.
long story short: clicking a button should change something in the view.
bug: when user navigates from this page a to an ionicpage b via navcontroller push method, and then uses
i don 't see anything happen after i run command ionic serve
i have created a page with multiple sliders on the same page.
i am only able to apply slides property on first slider.
1. second slider is acting independently.for the first slider i have handled the responsive behavior in the following manner.
but its not working for second slider.
2. also for first slider i have to define responsive behavior in typescript, as there is no way to do it in css or anywhere else.
and it isnt handled propely by ion-slides phofcode
thanks to ionic team for adding back the functionality of generating lazy loaded pages.
however, the generated page component file doesn't contain `@ionicpage() `
a list of cards with input components inside do not properly handle the readonly directive.
when a user touches an input that is marked as readony the app scrolls so that the input is close to the center of screen.
in worse situations that i could not replicate in another project placeholder text will bounce to right then back to it 's original spot.
here is a repository demonstrating scrolling issue.
phofurl look at homepage and try tapping inputs that should be disabled.
when using the itemreorder on list items, the order is not correctly maintained when dragging an item from it 's original position, to a new position, and back to it 's original position.
i am in two minds as to whether to raise this as a bug, or a feature request, but there is an argument to say `ionviewcanleave` is currently operating as it should be (which it is).
as it stands, `ionviewcanleave` is triggering for page x, whenever you are pushing another page onto the navcontroller within page x (or a modal), or when you are popping this page.
what would be handy is to control how `ionviewcanleave` operates, depending on whether you are pushing or popping the nav stack.
you cannot bind to the focusout event
if we have 2 pages using `@ionicpage` annotation for deep linking, we navigate from page 1 to page 2 and click the browser back button, it throws an error.
phofcode edit: it also happens with the android device back button.
radio-group doesnt 's show the checked radio after the radio list changed
i upgraded a 3.5.3 project to 3.6.0 using the steps on the releases page phofurl after i upgraded, running `ionic serve` prompted me to upgrade a number of cli packages which i did phofcode
multiple instances of old/previous pages/components running in background.
all ionic page events phofhyperlink are working correctly.
the `ion-datetime` component is difficult to use when in the browser as it requires dragging the values to scroll through the list.
npm install -g ionic@latest should install 3.6.0 but it is installing 3.2.0.
our app has a toggle button in header that switches reorder input of the list in content window.
pressing this button 3x switches reordering first on, then off and finally on again.
if you do this sequence quickly slowly, then everything works fine.
however if you execute it quickly enough, then reorder handles don 't appear after 3 press.
using dev tools we can observe that third switch changes toggle state correctly.
we can see this behavior on both android and ios.
the ionviewcanleave works on back button but not on tabs, you still can navigate freely without any issue.
and simply because of the current view is a pushed stack onto one of the tab page.
i have a set of pages designed to fit a specific hierarchy.
for instance i have the following root pages: - applicant phofcode - business phofcode each of those pages has a tabs component with a `profile` and `settings` tab.
the page for each of those tabs is shown below along with the url that should load that page.
- applicant/profile phofcode - applicant/settings phofcode business/profile business/settings when the browser is at `applicant/profile` and the page is reloaded, ionic is detecting current pages to be `applicant.root` and `business.profile`.
`ion-select` within `*ngfor` updates the wrong item
i 've been trying to add the full-swipe action to a sliding item in a list.
when placed on the `<ion-item-sliding>` element as per the itemsliding docs phofhyperlink the ionswipe event didn 't seem to fire properly for me.
> home.component.ts has a @ionicpage decorator, but it does not have a corresponding "ngmodule" at home.component.module.ts
phofcode in chrome (version (official build) (64-bit)), i inspected `$ ionic serve` and enabled the device toolbar through devtools with ipad mini selected.
the modal appears, but clicking on the backdrop, the modal closes.
i have made below changes in cutepuppypics template event flow 1)home on 4th step none of the life cycle event codes executing.
on 5th step its shows correct view which should appear on 4th step i have tried to use pop at different pages & lifecycle function but can 't fix this cache issue
open popover, then swipe on aria outside of popover content.
result: page scrolling, popover present
after upgrade from 3.5.0 to 3.5.3 and running `ionic lab` i get the error listed below.
i created a blank project using `ionic start app blank`.
when i load the project using `ionic lab` or `ionic serve` i am getting an` 404` for `main.css` in the console phofcode
every change in page changes url, no matter what, only option to change it is to pass updateurl: false to navigation options
code like phofcode lead to `"beheaded" , , ,` i.e.
reason: in the generated css you will find phofcode
today i updated from ionic 3.3.0 to ionic 3.5.3 and followed the changelog-tutorial (steps to upgrade).
and after that i tried to create a new lazy-loading component page called 'chatpage ' via ` ionic g page chat ` there is nothing unusual about it but when i try to open my chatpage via i get the following error in the <promise> catch-callback of the navctrl.push: phofcode when try build a debug version of my project it works fine build it and error above appears in app.
but when try run my app with `ionic cordova run ios --prod` error above is displayed in terminal
i want to use phone call and import phonecall plugin.
but this plugin click call button , push the phone call screen.
i have a problem with ion-item-sliding, the ion-item-options don 't want slide out when i slide ion-item out..
i would like to set custom colors for my ranges, based on dynamic server config.
creating a new ionic 2 app does not include the angular/common/http module
ionic infinite-scroll is not fired when the device (real android one but also within chrome) is in landscape mode.
many new users don 't know they should be using `--prod` to get an app with a faster startup time.
when calling `remove()`, future navigation methods no longer work.
this is because the `istransitioning()` method returns true on subsequent calls.
when using tab, ion slides height stays at 100vh
`ion-select` shown as `alert` when specifying `multiple="true"` and `interface="popover"`
in ionic datetime component when setting time with 12-hour format with am/pm the time a comes as 1:00 am in the picker menu but correct in display mode.
i was earlier working on ionic1, now i want to build a new project in ionic2.
i uninstalled the previous version using commnads: npm uninstall -g ionic npm uninstall -g cordova cleaned the npm cache also.
but still the on windows command prompt, the ionic cli version is still 2.1.18 and ionic start is creating ionic1 starter files.
i have a problem with the status bar on ios device, ion-title and ion-buttons arent vertically aligned.
i saw that this problem is bound to the statusbaroverlayswebview plugin but i dont know how to fix it.
i 'm using two level on lazy loaded modules in my virtualscroll component with about 300 items in the virtualscroll.
on browser, android & ios simulator it 's working fine.
on iphone 5s, it makes the page feel very slow: when i click on a button inside one of the components, it wait for 1 to 2 seconds to be activated and open an alert ; when i click on the alert dismiss button, this button is only activated after 1 or 2 seconds.
the scroll is very smooth, so there doesn 't seem to be a cpu kind of bug.
when trying to build --prod i get memory heap error
at this moment where pull to refresh can be triggered from anywhere on the screen.
sometimes i want to mix * material * styles with * ios * styles.
for example, when the app mode is set to `md` *material design*, phofcode and the `alert` component's mode is set to `ios`: the ripple effect of material design is not aligned correctly on the items in the list
i add two dollar signs (`$$`) somewhere in the content page, but when running `ionic serve`, it only shows one.
if i use three or four signs, it shows two.
if i use five or six, it shows three, and so on.
i think that one `$` sign is shown as one but if have two subsequent `$` signs, they are "escaped" to only one or whatever.
using `&#36;` instead works as expected.
when clicking and dragging an ion-item the item goes dark but does not move.
when generating a page via cli it doesn 't set the `@ionicpage()` decorator inside the generated .ts of the component.
at the moment, when you select an item on an `ion-select` you are locked into that answer and cannot _clear_ it.
at the moment, when you use an `ion-select`, you tap on it, tap the option and tap "ok" to dismiss and confirm the selected the `ion-option`.
android hardware back button closes the app.
ionic version 3.5.2 doesn 't contains method app.getactivenav() anymore
following the introduction of ionic 3.5.0, getrootnav was marked as deprecated.
i would like to use then getrootnavbyid but i 've got no idea what 's the id of the root nav or how i could set my own id.
(getrootnav) is deprecated and will be removed in the next major release.
the debug console ) displays : "failed to load resource: net::err_file_not_found after system start-up
ion-items with text text inputs gets the class "item-input" and a validation border (e.g.
if it is invalid (for example required).
ion-items with select inputs does not get this validation border if they are required (css class item-select on ion-item).
ionic is automatically validating the input fields, but it misses to update the parent ion-item if a control is marked as touched (markastouched() method on control) from code.
i 'm trying to use a parameter in one method.
when i show the object with a console.log, the object is correctly displayed with its various properties.
when i tried to get value of one property of this object, i realize that it shows me :
strange behavior of the range sliders on the desktop version running with `ionic run browser` as you can see in the screen capture here phofhyperlink .
however, when running with `ionic serve` this problem doesn 't appear at all as you can see here phofhyperlink .
ionictabshideonsubpages doesn 't work in ionic 3
i have a row with ion-checkbox and two ion-inputs on the same line.
when i tap on the checkbox, ion-input steals focus and checkbox state does not changing.
this happens on android and ios devices.
in browser all works correctly.
you can check the screencast from galaxy s4 here phofhyperlink
when scrolling down a list of items with infinite scroll the app gets slower and slower till it eventually freezes.
to quote an experia user of our app "i use a xperia z5 and for normal use it takes me about two minutes to reach the freezing point and less then a minute until larger slowdowns"
application boots and serves me with this issue phofurl saying `all declarations of weakmap must have identical type parameters` in multiple places.
there have been several reports on the ionic support forum about variables within a ble observable not updating the display variables on a template... phofurl phofurl basically, when a declared variable is assigned a value within ble observable the screen doesn 't get updated until there is some interaction with the screen - e.g.
when clicking on the back button on the top left corner in android, nothing happens.
the hardware back button does work - the back button in the navigation bar does not.
i found other people experiencing same problem but no solution provided: phofurl phofurl
i am trying to present a loader while making http request from service and calling from controller.
i place my request through service once loder.present() promise becomes suceessful/true.
but at the view level it comes just like a flash after a long time.
during the duration my http call has returned and displays a toast as well.
1. place a datetime component on a page with a minimum (or maximum) date in the middle of a month/year, for example 2. in the model set the initial date that will be shown in the datetime to minimum date 3. open date picker and make exactly one change that makes valid values in picker columns to change.
for example, change year to 2014 4. the picker columns don 't update, many valid dates are missing 5. make one more change in same column.
for example, change year to 2015 6. everything updates and picker is now correct state
i know if i want to bind a object to the ngmodel property of ion-select, i need to use a input property named "comparewith".
it works fine if i place the process of the model list initialization in the ionviewdidload event.
but commonly data comes from web apis, so use promise like this: phofcode here is html code: phofcode and comparewith method: phofcode the items of ion-select are rendered correctly, but no item is selected.
i recently created a new ionic project and now i cannot remove a page from the nav controller using code that worked in previous projects.
when i remove a page lower in the stack, the menu back arrow (in a toolbar) on the current page (top-most) page no longer works.
clicking it has no effect.
having infinite scroll, calling `content.scrolltotop()` before last `content.scrolltotop()` resolves, throws an un-catchable error, and breaks the app.
> error typeerror: cannot read property 'timestamp ' of null > at infinitescroll._onscroll (infinite-scroll.ts:233) > at [as _next] (event_emitter.ts:121) > at (subscriber.ts:254) at safesubscriber.next (subscriber.ts:204) subscriber._next (subscriber.ts:135) subscriber.next (subscriber.ts:95) (subject.ts:61) (event_emitter.ts:80) (content.ts:437) scrollview.setscrolling (scroll-view.ts:74)
i've wrapp all my pages component into distinct modules to get the lazy load power !
in my application, i have a page component that i display as modal: phofcode phofcode 1. before i present the modal my url is something like that ` phofurl 2. after the modal has been present the url is: ` phofurl 3. when modal is dismiss url returns as before ` phofurl
using ionic2 and angular2 we build almost 13-14 small features/module.
i dont understand why my app takes too much time to hide splashscreen/load app.
hello everyone, after frustrating too much to find solutions how to decrease time to load app
i have a home page with three tabs.
i do not set the attribute `selectedindex` so the first tab is selected as default.
my three pages are lazy loaded, i set the decorator `@ionicpage` for each of them, with a custom segment.
when i press `f5` to reload the page, even if was on third tab, first will be always selected.
the lazy load don 't care about url segment.
ionic --version outputs non readable characters along with the version number making it hard to parse with other tools.
at the moment, when running `ionic cordova prepare` you get a detailed overview of the ionic build steps which is great!
however, cordova states `running command`, which contains a lack of information if you have many and/or large plugins to install.
the current output is as follows: ionic cordova prepare phofimage
if you have an `ionslidedidchange` event attached to `ion-slides` and in this method you call `getactiveindex()`, on the last slide in `ion-slides` if you continue swiping at the end of the slides, the index will sometimes move to next item.
so for example, if you have 4 slides and keep on swiping at end of slides, `getactiveindex()` can return 4 when 3 should be very last index.
this can break bindings when looping through arrays.
when i use lazy loading and invoke in app browser to launch, i get the error below phofcode phofurl i removed lazy loading from the entire project, and calling in app browser works again (see related code)
when calling `nav.popto`, the intellisense leads me to believe that the signature is this: `popto(page: page | string | viewcontroller, params?
: function)`, which is found in `nav-controller.ts` on line 477 (master branch), but the actual implementation is in `nav-controller-base.ts` on line 116 as `popto(indexorviewctrl: any, opts?
calling popto and passing animation parameters like `popto(mypage, null, { animate: false })` results in errors, of course.
the quick fix is to ignore intellisense and call it like `popto(mypage, { animate: false })`
when a list of cards is followed by a list with a header, the last card in the preceding list loses its bottom padding and drop shadow.
the issue is in md, ios looks fine.
using package `ionic-angular@3.5.0`, there is a problematic duplicate inclusion of `ionicons`: - `ionicons` are included in `ionic-angular`, which is a non-sense since it is available as a separate package (and ionic starters use the `ionicons` package) - at the end of the file this forces the inclusion of `ionicons` version built-in `ionic-angular`: phofcode but referenced file does not compile properly outside `ionic-cli` builds, since it references other files assuming their paths are within sass include paths: phofcode if i comment offending line in and properly include `ionicons` using `@import it works as expected.
when i used ion-datetime,if i don 't set property 'max ',the max would be december 31st of this year,which means i can 't pick any date in next year,not to mention decades later.of course,the max need to be set.
even though, when i open datetime 's picker, the default choice is january 1st of this year or of the max.year .this is really unfriendly to users.
the (ionselect) callback is fired before the ngmodel is updated, so from the callback i read the previous value unless i introduce a delay.
hello, i have a page with tabs, the first tab has links, by clicking one on them i change the page by using nav.push() (the tabs bar remains visible) when i click on the first tab 's icon, the first time ionic reloads exactly same page (the one i opened with push), second time it finally goes to original tab.
the datetime component does not recognize iso8601 conform datetime string.
the iso8601 allows the fraction of seconds to be 1 or more digits longer however ionic is only allowing 3 digits!
> s = one or more digits representing a decimal fraction of a second
after register a new user using auth.signup the object user is not filled.
inserting or removing a view other than the active view does not require a transition and navcontroller incorrectly sets itself to istransitioning() true.
$event.target is undefined since i have changed the (blur) deprecated event by (ionblur) event in my template
the material design styling for form is not adhering to the specification.
the guidelines say that inputs are expacted to have a
when i 'm using an ion-toggle inside ion-slides, and clicking on the toggle, then the slide event also fired.
so its just sliding to the next or the previous screen.
ive runned the `ionic cordova build ios` and use the xcode to install the app on ipad , but after runing 10 days , it flashed back and when i open it again , it flashed once again.
but after i reinstall this app , this problem doesn 't exist
i have a list of responsive items, so that on a narrow screen we have a single list, and on a wider, (e.g.
landscape) we have 2 or more.
i now wish to make this list virtual however i find when i switch from portrait to landscape, the items to not fresh to now show two columns (or sometimes one of two rows will show 2 columns).
if you load the app while in landscape, and change portrait, it will adjust correctly, though sometimes you need scroll refresh it see the items.
if you open the app on portrait, and change landscape, it normally just shows single column of items.
when using `selectedindex` as described in the documentation phofhyperlink with an assigned variable, the tabs do not change.
for example, with a variable named `index`: phofcode when the `index` variable changes from `0` to `1`, the tabs are not updated.
toggle and checkbox can be used even when disabled by pressing tab...
while switching pages 3 or more layers deeper then click back button of android or browser, can not go back to the page previous visited.
i have a component that will render (among others) a true fab button.
but being in component will always make it scroll with the content.
i narrowed it down to the ion-fab element no being a direct child of ion-content.
after upgrading to ionic-angular 3.5.0 navcontroller insert method is not working and breaks navigation.
i have a ion-list with buttons and (click) and an ion-refresher.
pulling down to refresh just a little and pulling back up results in the list item being tapped.
releasing the tap the click event is fired.
the keyboard hides the tabs (located at the bottom) on ios when the keyboard is opened (e.g.
when you click on an input to enter text).
after the user triggers the action sheet, and selects "change quantity" the alert pops up.
once the user clicks "update" or "cancel" on alert, alert does not close.
while loading the lazyloadtabs demo phofhyperlink in chrome, there is a brief black screen before the whole page loaded
the toastcontroller only accepts strings as a message.
when trying to install native push, i get the following: ionic cordova plugin add phonegap-plugin-push > cordova plugin add phonegap-plugin-push --save running command - failed!
[error] cordova encountered an error.
you may get more insight by running the cordova command above directly.
[error] an error occurred while running cordova plugin add phonegap-plugin-push --save (exit code 1): installing "phonegap-plugin-push" for android plugin doesn 't support this project 's cordova version.
cordova: 6.3.0, failed version requirement: >=6.4.0 skipping for android plugin "phonegap-plugin-push" already installed on browser.
installing "phonegap-plugin-push" for ios plugin doesn 't support this project 's version.
cordova: 6.3.0, failed version requirement: >=6.4.0 skipping for ios saved plugin info "phonegap-plugin-push" to config.xml error: cannot find plugin.xml "com.googlemaps.ios".
please try adding it again.
there 's currently no event for ion-option deselection in multiple-option ion-selects.
the ion-select 's ionchange event is not sufficient enough because it only gets called when the ok button is pressed, and the ion-option 's ionselect is only fired when the option is selected.
an application using ionic v3, when the state of the platform is switched to pause (the application is minimized or the camera is activated), the application is destroyed.
android studio log (the camera activated): phofcode
android hardware back button doesn 't seem to work when creating a prod build (--prod flag) it works when building without the prod flag however
we have a form with selects and then inputs.
the user can use the form and fill the fields.
but if the user fill a input text the app shows keyboard with go key.
then user type your data and push go, app jumps to first ion-select and show options.
trying to just copy and paste documentation example of how to add buttons to a navbar (from here: phofurl the example contains two `ion-buttons` component, with `start` and `end` directives each.
the `end` directive runs fine.
urls now have at least two additional segments 'nav/n4 '.
eg: phofurl has become phofurl when a notification sends a user to a url, the exact url must match or the addtionaldata in the notification is not retrieved.
with 3.5.0, the url sent to is passed to new one with 'nav/n4 ' within it thus causing addtionaldata to not be retrieved.
i am using onesignal 's 'additionaldata ' as example.
i am not sure how others work.
i have a select with an object containing an id and a name.
the id is a number and the name is a string.
the option value is the id and the display value the name.
setting select model to an existing id which is number works and correct preselected name displayed.
however, chosing different option rwill return of newly select object but not as number.
instead it will be string.
i manually need to convert it back....
when i run ionic cordova build android --prod it fails with error
when an `ion-option` is selected by default using `[selected] = true`, the model doesn 't reflect the value.
when the selection is updated, the model gets updated though
first input element in alert prompt created with alertcontroller is not focused automatically anymore since ionic-angular 3.4.2
in an ionic 3.5.0 app with lazy loading, the back button is missing after following a subpage deeplink or reloading.
reproducible in the `simple-tabs` navigation test.
currently it 's height is 2x height of normal standard header navbar simulator screen shot jun 30 2017 3 38 32 am phofimage
having a layout page, with a tabs component, whose root page uses the layout page causes a the stack to exceed maximum support
i get error when trying to install ionic to global packages npm err!
registry error parsing json fetchmetadata: err!
an ion-select element is activated when hitting the enter key while in an ion-input field on the same page.
it seems to be the same issue as this that was fixed but has appeared again: phofurl
when using <ion-input clearinput> without a wrapping <ion-item> the clear-input button does not appear when typing.
currently it 's not possible to disable the url when using lazy loading.
as deeplinking does not work well with complex navigation structures (yes i already tested v3.5.0) we need to be able to at least hide the url.
i made a new project, then ran: `ionic g page login`.
i got: phofcode note that i got this error with `ionic info` as well.
our app is using v3.5.0, lazy loading and tab navigation for both mobile/pwa.
when a subpage is reloaded, the back button is missing and the tabs are shown even though `tabshideonsubpages` was set to `true`.
check the steps for more info.
i have called the api ` phofurl ( phofurl after that i call ` phofurl ( phofurl the response from this api was: phofcode and then if i call ` ( i have this response: phofcode why no messages has been sent even if: > "status": "locked","state": "enqueued" and there are 2 tokens associated?
in the docs i can read : > state --> possible values: > > ... enqueued : notification successfully processed.
messages should now be generated.
... and status --> possible values: ... locked : no modifications can be made as the notification has already generated messages.
... i cannot see errors.
maybe i have to refresh tokens?
if so what exception could catch to do it?
we are testing your nightly lazy loading implementation which by the way works much better, a big thx to dan.
:+1: on our `ionpage 's` we use the `ionviewcanenter` livecycle to check if user can access the page, if not we will redirect them to a `forbidden page`.
this is our simple example, nothing magically phofcode anytime we get into `pageforwardtopage4` we will redirect user to `page4` which should be our `forbiddenpage` (this are only dummy names) :smile:
*ionic package build android* build fails with error:
i have an app with `ion-content` and `ion-footer`.
if i run using serve, everything is fine, however, if i run on ios device, i get sometimes with and sometimes without padding bottom: padding phofimage (image taken from the same app, force closed a couple of times to get different results)
when a modal is being closed (by viewctrl.dismiss()), there is a noticeable delay between the callback modal.ondismiss() being invoked and the modal "disappear" visually.
if i put the ion-refresher in individual segment, it will not work or applied to whole page or not scrolling.
in short pull to refresh is not working inside the ion-segments.
when i set max length on an ion-input type="text" it do not work correct on android (i have not tried it on ios).
if i set the max length to 75 i can write more than 75 characters, but the exstra characters disappear when i hide the virtual keyboard.
when i use type="tel" with max length i cannot write the exstra characters.
in uwp app (phone or tablet) the app takes 1-6 seconds after clicking on an item until it navigates to the next page.
the delay is not so bad if the list is small (20 items/ 1-2 second delay), but in my project i have over 14k items.
by clicking on a button i have to wait 1-2 seconds on my developer pc (16gb ram, intel i7-6700hq 2,6 ghz) on the test device (that our employees use/ 4gb ram, intel atom z3795 1,6 ghz) it has a delay of 2-6 seconds, and that is a big problem.
list item reorder don 't work with push mode.
filtered items are updated only when keyboard is dismissed.
the virtual scroll list does not refresh the displayed elements when the array of datas is emptied.
when doing "ionic start [project name] blank" attempt to download from phofurl fails to download.
i have a ion-searchbar component with cancel button set to true in navbar.
when i click cancel button, keyboard closes and searchbar loses focus, then immediately sets focus to searchbar again and keyboard pops up.
this happens every time you click cancel button.
if you click anywhere on the page searchbar blures.
when changing dynamically the selected option no option is selected.
tested in 3.4.2 and 3.4.0 with below code phofcode with above code ionswipe event is not being triggered same thing if i remove the content inside `ion-item-options` i.e as shown below, then ionswipe event is triggered phofcode plunker for 3.4.2 -> feature completely broke i.e doesn 't work no matter how far you swipe - phofurl plunker for 3.4.0 -> feature works -> phofurl
pages like: phofurl have no documentation about the attributes/directives that can be added to components to control their behavior.
for instance, the linked page has no documentation for the no-border attribute.
the ion-content page has no documentation for the padding attribute.
i have multiple videos in my app.
when i play more than 16 videos, ionic stops playing the videos.
i have a login button with a click event that calls a aws cognito function to perform authentication.
phofcode and two buttons in my template that should be displayed depending on the isloading variable: phofcode when the button is clicked, the entire dologin() method is run and the gui updates to second button then dologin() method has completed.
searchbar animation in rtl mode causes visual glitches.
currently if both the toast and fab button at present at the bottom of the screen the fab button gets covered by toast.
so lets, say a user saved something and wants to add a new item he has to wait for toast to go away.
cannot set rootpage using page 's name (as string), only if i reference to the component itself.
when switching page with `navctrl.push(page)` and then using browser or android 's back button, browser goes back to last website visited.
when using [virtualscroll] and virtualtrackby on an ion-list with many ion-items with checkboxes, if some checkboxes are checked and then you scroll to the bottom of the list(about 1000 items), and scroll back up, it seems as if all the items are still checked, but their state is actually unchecked, because an ionchange event does not set it back to checked.
when i run "ionic build android --prod" in the windows,the time it cost is very large.
i have a footer i want to appear on all pages, with some navigation and a custom component in it.
to achieve this i placed it in the app.html, below the ion-nav.
in my page templates i place a ion-content element.
problem: the content height is not adjusted to correct for the footer.
(i looked in content-component code, and it expects them to be sibblings).
when adding the ios platform, the resulting .plist file is missing strings for nsmainnibfile & nsmainnibfile~ipad $ ionic cordova platform add ios the result is missing <string/> tags in the .plist file.
phofcode i expected this to look like: phofcode running the app results in error:
i have a tabbed page, on the first tab there are two segments.
on the first segment there is no problem.
the second segment is a large html content, and when i scroll down to the bottom of the page, there is a copy of current ion-item.
i have recorded bug: phofurl
$ ionic cordova build android --prod generates the following error: phofcode
`ionviewdidload` is called every time a page is navigated to, it doesn 't look like the page is cached.
this is the case when `setroot` or `push` are used.
in other testing i 've only seen pages cached when changing between tabs.
function is triggered twice on ng-click event when nvda/jaws(screen-reader) is on
currently, toast shows only plain text even if you pass an url or image link
layout error with multiple slider in the same page
ng-touched is being applied to ion-input fields on keyup
the datetime component does not offer a way to add picker labels for hours, minutes, and seconds.
currently there are 3 menu-types: - reveal - push - overlay
when i try to get my current position, the device just takes a really long time (2-3 minutes) to get it, while my browser does it perfectly.
also, native geolocation works good with other apps at my phone, so it 's not a device issue, but software 's.
when ion-textarea being focused and the container is scrolled, you can see that ion-text is duplicated rendering 2 textarea
all caracteristic in motorola moto g tx1040 works fine, but in other device motorola tx1032, some sass styles don 't works, audio record, and play audio recorded don 't work.
on the site dualknobs example is not working, knobs are not moving
the input type doesn 't updated in ui.
it was workable in previous version (4.1.2), my input type change either password/text(for example password to show in cleartext), will change input.type and password able show in cleartext but it doesn 't show password cleartext version 4.1.3 even try inspect element to check input type already updated to 'text '
error: failed to execute 'animate ' on 'element ': partial keyframes are not supported.
at ( phofurl at webanimationsplayer.init ( phofurl at ( phofurl at ( phofurl setelementproperty checkandupdatenodeinline ionic framework: 3.3.0 ionic native: 2.5.1 ionic app scripts: 1.3.7 angular core: 4.1.2 angular compiler cli: 4.1.2 node: 6.11.0 os platform: windows 10 navigator platform: win32 user agent: mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) safari/537.36
using the datetime plugin, when the date time selector is open, the user cannot use the hardware back button to close date time modal.
i have use ion-slide tabs to slide subtitle ,so it can control the ion-content 's content , but there is a problem, when to scroll the first page ,it will load data, but other pages will also loading data too; because there are just one page with the same function, how to solve this issue?
there are so many page with same construction, so i want to click one slide tabs just load his own data, not influence others , thank you
binding to an input of type="number" casts the variable to a string.
guys, it occurs in the display of the date picker: i set hardcoded to an specific date like and it always show the current day of operating system ignoring what i had set.
month and year shows okay but the day always appears wrong.
after the user completes his choice, the floating label returns back over the user 's input.
espaol: al ejecutar el comando ionic cordova run android sobre un dispositivo con api 21 (5.0.1) cualquier aplicacion de ionic muestra en consola este mensaje: 06-15 i/chromium: [info:console(1223)] "deviceready has not fired after 5 seconds.
", source: (1223) 06-15 i/chromium: "ionic native: deviceready did not fire within 5000ms.
this can happen when plugins are in an inconsistent state.
try removing plugins from plugins/ and reinstalling them.
", source: 06-15 i/chromium: "ionic native: deviceready event fired after 18011 ms", source: la aplicacion se abre (ya que he modificado el tiempo en el que aparece el mensaje de error) despues de 20 segundos.
en api 23 (5.1.1, emulador) funciona todo ok when running the ionic cordova run android command on a device with api 21 (5.0.1) any application of ionic displays this message in console: the application opens (since i modified the time in which the error message appears) after 20 seconds.
error on serve/build/... after updating to 3.4.0: phofcode
< ion-icon> current only using iconfont.
when i click the component ion-datetime, it opens the picker with the value set to the first day of current year if max is not set.
or first day of year of value set to max.
cannot read property 'btn ' of null exception occurs randomly
the new css rules introduced in 3.4.0 for ltr/rtl are prefixed with the attribute selector `[dir="ltr"]` or `[dir="rtl"]` (from the root `<html>` tag), but these rules always having a higher specificity than the ones you would normally write inside a page break the custom styles of our app.
the only solutions we came up with are adding specificity to our current selectors (would require to top 4 classes/attributes), using `!important` on every conflicting rule (not recommended for so many reasons) or prefixing page selectors in every scss file, like `[dir] page-home {...}`.
on ios, when pushing a new page inside a modal, the status bar padding is lost.
a virtualscroll list will flash "wrong" items (and in inverse order) - before showing correctly.
this is especially obvious on (slower) devices (iphone 5s - not really slow but..)
using javascript 's date type causes build to fail and give a "*.ts module parse failed" error
rendered component output event emitters stop working after virtual scroll data is changed, since components are destroyed.
have a list of item rendered by a virtual scroll component.
filtering the list using a search box causes flickering and unnecessary component destruction.
virtual scroll destroys rendered elements and recreates them when rendered list is altered resulting in a lot of flicker.
also this is trivial example, in real life components have initialization and cleanup logic that make this whole lot worse in an actual application causing an overall performance degradation.
add some items to a list and render them in a virtual scroll component.
clear the list or filter the items so that the list is zero length.
virtual scroll throws error: phofcode and virtual scroll does not remove previously rendered elements
running _ionic start_ to create a new project fails because this file: phofurl is not found.
this is not an issue with my internet connection, you can see for yourself that the file is not there.
when i add admobpro ionic native plugin and i build or run to device its give me error multiple dex files define
looks like i am not able to target api 17. if i run my app in emulator on a different virtual device with api level 23 and up , everything works fine, but from api level 16, 17 (i tested) just showing a blank screen.
i checked my android manifest file also .
it says minimum sdk version as 16. so running on api level 16 or 17 should not be an issue.
moreover, i also didn 't start code yet just create a new starter ionic project and start running to check if everything work fine, unfortunately it just didn 't work as well on level 16 or 17 beside on the file config.xml it saiys minimum version as 16.
changing the value of the sass variable `$toast-wp-button-color` affects all modes.
i wish for the keyboard to overlay the `ion-footer` when an input in `ion-content` is active.
i can listen to keyboard events, so i did this: `<ion-footer however, that seems to not work, because after the keyboard has been shown, certain ui elements within the `ion-footer` become somewhat unresponsive.
as if they are no longer being updated as part of normal change detection.
specifically, having this within `ion-footer` stops being responsive: `<img [src]="somecondition ?
after keyboard has been shown and hidden again and footer has been removed and added again by `ngif`, image will no longer switch when `somecondition` toggles between `true` and `false`.
my application has a simple list within the main page content, where each i want to show another page based on which list item is clicked.
the elements are just a `div` so i use the `tappable` attribute to get rid of the delay.
a simplified example is at this plunk phofhyperlink the problem is if i flick scroll, and then tap the list to stop, click event fires, instead of allowing me to just stop scroll.
to get around this, i subscribe `ionscrollend()` and wait a set time after this is called before allow click.
this seems almost do what am after except for two things.
1. more noticeable on ios, but `ionscrollend()` seems be called just before scroll finishes 2. if click a list element just as scroll stopping (but not quite stopped), incorrect data passed click handler.
these problems only seem occur when use either button (instead of div) or when use `tappable`.
if remove `tappable`, clicks then feel laggy when clicking one after another (there too much delay).
again, seems worse on ios.
ionic 3 app on ios 11.0 beta (version (simulator) shows additional unneccesary white area under status bar: a1 phofimage this can be fixed by adding "viewport-fit=cover" to the viewport meta tag, but introduces new problem at bottom of screen: a2 phofimage
cannot run `ionic cordova resources`.
`ionic cordova resources android` successfully runs.
on an `<ion-content>` clicking an ` <input>` that brings up a device 's keyboard turns an `<ion-footer>` 's background transparent if the keyboard causes the `<ion-content>` to scroll.
can 't print the entire page when i have a scrollable content with many items.
i am using the native browser print function: window.print()
tapping the active tab does nothing
when selecting a date with `ion-datetime` it is not possible to see the weekday, thus users need to check a calendar (which shows the weekdays) and select the right date.
the phofcode event is *not fired* after phofcode is initialized and @input phofcode is not set or equals to phofcode .
when i type data in input box and going to click to another element on page or suppose to go to touch for another input box .
my whole page elements gets hide (i.e.
infinite scroll works fine in broswer, but does not fire (ioninfinte) event when compiled to ios app
building with --prod option fails if project uses an
sliding ion-options sometimes does not show buttons but empty space.
sliding the item back and forth a bit shows the buttons.
<img width="362" alt="screenshot 10 17 51" src=" phofurl
using the ios-transition with the back direction in android, the ion-header has a delay to appear.
already with forward direction is ok.
i want to communicate between tab (container) and tabs (individual pages) by using @output() binding provided by angular (with eventemitter).
from tabs page, i am able to fire an event using eventemitter.
and i want this event to be caught by the tab (container).
however, this fired event is not caught by the tab (container) page.
cant ' make the ion-slide fade effect working, images in the slides are always visibile
mouse scroll is working.but touch scroll/swipe is not working for windows surface.
addprofile.html &lt;p&gt; &lt;ion-item no-lines&gt; &lt;ion-avatar item-left&gt; &lt;img id="changepic" src=" phofurl &lt;/ion-avatar&gt; &lt;button ion-button item-right &lt;ion-icon &lt;/button&gt; &lt;/ion-item&gt; &lt;/p&gt; addprofile.ts import { component } from '@angular/core '; import { imagepicker } from @component({ templateurl: 'addprofile.html ' }) export class addprofile{ constructor(public imagepicker : imagepicker) { } onpickupimage(){ var changepic = tmaximumimagescount: 1, twidth: 2048, theight: 2048, tquality: 30 }).then((results) => { for (var i = 0; i < results.length; i++) changepic.src = results[i]; } }, (err) => });
my list items with a various content only show now as a label.
in the root view i have a google maps (js sdk) and i have a button, when clicked it pushes to the next view.
when hitting back button, it hides the map !
i 've tried the same using
ionic-datetime does not support clearing the value once it is set
does not display a message in example below if in same ion-item block.
if clearinput property is set to true then it works fine in android but in ios by clicking on clear button nothing happens.
i am using a web api to search and it 's working fine in android.
but in iphone 6 ios 10.x the app crashes and in xocde i 'm getting "terminated due to memory issue".
i have debugged the app and i can see i have 4000 objects in my array.
think it is crashing the app.
how should handle large array ?
have already implemented virtual scroll.
1. open datepicker 2. select february 28th 3. save by pressing done button 4. open datepicker 5. change month to march 6. showing only 28 days: phofimage
when using any type of video player in full screen mode (html5 video, vimeo player, etc.
), the video controls are not accessible and hidden behind the tab bar.
so when you try to tap a video control, the tab bar is tapped instead.
video controls are available if the video is in a modal window.
the apps just didn't work on android jellybean or kitkat and work fine on marshmallow
ionic start release blank creating directory ./release - done!
[info] fetching app base ( phofurl downloading - done!
[info] fetching starter template blank ( phofurl downloading - done!
updating package.json with app details - done!
creating configuration file ionic.config.json [info] installing dependencies may take several minutes!
> npm install running command failed!
[error] an error occurred while running npm install (exit code 1): npm warn deprecated object-keys@0.2.0: please update to the latest object-keys npm err!
cannot read property 'find ' of undefined err!
cannot read property 'find ' of undefined err!
a complete log of this run can be found in: err!
currently, when running `ionic generate page [page name], the automatically generated .module.ts file imports `ionicmodule`, which throws the error `property 'forchild ' does not exist on type 'typeof ionicmodule`.
when navigating back upon entering view i tap on an item which is ignored when done within the first 1-1.5 seconds.
tapping the item again after 1.5 seconds works.
this happens only when i have navigated backwards.
i create a new project: phofcode when changing to dir `foo` and executing `ionic serve`, the following error is seen: phofcode indeed, this module is missing from the `node_modules` dir: phofcode executing `npm install` in the project dir fails: phofcode
i have code which works perfectly but not in `--prod`.
when a user navigates to a page, i highlight which page they are currently on the the menu.
this is what is meant to happen: ngc issue phofimage this is what happens when running with a `--prod` build on a device: ngc issue 2 phofimage
1) when changing the date to a day in the future, the hours and seconds columns do not update until a user clicks interacts with them.
this is terribly confusing for a user.
see the gif below slow date phofimage
the ion-segment stays at the top and suddenly disappears while the page (on which "back" is clicked) slides away as expected.
ion-select with no-padding attribute in rtl mode are not reset the padding.
it is overrided by the css class: phofcode
i previously used framework7, but decided to make the application on ionic, i rewrote it for ionic v1 and i also had a problem with loading the pages, after which i decided to try ionicpage, and updated to v3.
the transition to other pages takes a very long time, but this is only the first time.
tried the application ionicpage priority, but it 's unsuccessful.
this can be seen well on android device.
demonstration: phofurl without ionicpage: phofurl posted my project.
- the split pane is displayed in large screens, but the toggle-menu button is not displayed in small screens.
- in small screens, the screen is blank white.
- when swiping, the menu shows.
when the slider is initialized in the browser touch events are emulated.
especially an event listener for `mousemove` is registered on the `document` which fires events all the time while there might even be no interaction with slider.
i cloned the code using "ionic start myprojectname tutorial", and changed the project according to ionic 3 , now , there is a file list.html , it has a button at header which opens side menu.
i wanted to have a back button over there ,and removed the code for side menu opening.
expected that back button would automatically show up , but it did not happen, instead it shows header without any button with just title written
i control the status of the segmentbutton by a variable.when the type of the variable is number,default check state cannot be set.
when i force(3d) press on tabs in ios, ios treats it as a link and shows preview.
using lazy loading in conjunction with a tabs component requires each tab to also be lazy loaded.
in ie11 ion-inputs and ion-labels are not visible unless the user clicks where the ion-labels and ion-inputs are supposed to be.
once the user clicks where the inputs/labels are supposed to be ion-labels and inputs appear, but they still aren 't fully visible as they appear in other browsers.
$ "ionic cordova resources android -i " command could not generate rounded icon.but just a square icon.
currently it is only possible to set a single "description" metatag for the entire web app.
this is set in the `index.html` file.
i have used deep-linking in my app.
when i run the app on web browser and then use browser navigation keys for back and forth with fast click, i get the runtime error uncaught (in promise): invalid views to insert
i created a new app, installed my platforms, linked the app, ran resources, then tried to do 'ionic upload '.
it 's giving me an error of switch (state.pipescount) { typeerror: cannot read property 'pipescount ' of undefined ....
-> page a -> nav.push( 'b ') -> nav.push( 'c ') -> browser back = now page b back on navbar = now page c
when the init , it works well in a tab ,i mean autoplay well.
but as soon as i shift from tabs it not work .
when tabshideonsubpages is set to true in the app configure or/and as ion-tab attribute and a child component pushed to the current tab nav stack the tabs header is shown/duplicated
i have a modal with content that is supposed to persist while the app is alive.
in ionic v1 this worked fine since you could show/hide the modal.
in ionic v2 when you want to close the modal, the dismiss function destroys modal.
when using slides.slideto(5.0) gives me 5th slides after a list of steps while slides.getactiveindex = 5 after calling the slideto method.
when i bind the selected ion-option property to a model property, inside a multiple ion-select, and then change it dynamically (like with an exclusive option in a checkbox list) it won 't change.
using a `<ion-toolbar>` element with `*ngif` does
non selectable icons on phofurl for designers to be able to copy and paste the icons.
the scrolling behavior is as expected until some elements are added to the source array.
afterwards rapidly scrolling the list results in visible flickering of items or even empty item slots, which are filled after a short timeout or sometimes only triggered by an additional small scrolling push.
this seems to occur with or without using headerfn and/or virtualtrackby.
(loading the complete list content within a virtualscroll without altering the source array results in smooth and solid scrolling without mentioned issue..)
when settings a value for it 's working well with ios and wp but not with md.
the color stays the default one.
slides are not working as expected.
swiping to a slide for example does not work properly, the transition stops mid way when you take the finger off the screen.
also the sliding is not "limited", so you can swipe into infinity after you have swiped over all slides(it works as expected in non-prod build).
also pager is not showing.
` ionviewcanleave() { if (this.showalertmessage) { let alertpopup = this.popup.create({ title: ' ', message: 'su perfil no ha sido guardado desea salir?
', buttons: [{ text: 'ok ', handler: () => { => { this.exitpage(); }); } }, text: 'cancelar ', handler: () => // need to do something if the user stays? }
}] }); // show the alert alertpopup.present(); // return false to avoid the page to be popped up return false; } }` the function is executing but the tab still changes.
when i return to tab, i can see alert.
when i use the ios10 native chinese input method enter to searchbar the letter will show in the searchbar,such as when i typing "",i need typing "nihao" on input method ,but on the searchbar i get "nnini hni hani hao",and i choose word on input method get "nnini hni hani hao".
no error message on ui or in console however the app is broken and not functional
when having a bad or no network, the platforn.ready() takes a serious long time on ios and android if you have externals scripts (facebook pixel, google maps), even with the "async" attributes to compare, the deviceready event of cordova will always fire after couple of seconds (with wifi, or no network).
but the platform ready of ionic will not... and if you are waiting for it to change your rootpage or some others codes (like splashscreen.hide(), set language of ngx-translate,..., it can take a really really long time (30-60seconds sometimes.., especially if you have not network at all)
after creating a new app with cli ionic start xyz sidemenu --id xyz.com.app, move to app folder with cli cd xyz, run cli ionic cordova build android --prod, i get below error in red (typeerror: platform.trim is not a function) ?
what platform would you like to build: ios, android:
after creating a new app with cli ionic start xyz sidemenu --id xyz.com.app, move to app folder with cli cd xyz, run cli ionic cordova build android --prod, i get below error in red ([object object]) ?
the plugin is not installed.
would you like to install it and continue?
yes > npm install --save-dev --save-exact running command - done!
adding colors to the src/theme/variables.scss file greatly inflates the size of the produced main.css file.
i put some code to check permission before entering views.
the code display an alert when permission are not enough and then reject in the ionviewcanenter() to not push the page.
this works fine when the page is push from another page but when the page is push from a popover message is not display.
its a run-time error where which gets thrown at an unexpected place (see code below).
could you expose the event ionslidetouchend in slides.ts?
that would be really useful for me... ionslidetouchend: eventemitter<touchevent> = new eventemitter();
as i have found the culprit, i would like to share with you.
1, i have used virtuallscroll with infinitescroll which worked fine, but after some attempt the virtualscroll leaves empty area.
2, the list hasn 't got the right height, so it 's cutting off from the screen.
i have realized that virtualscroll height is not filling up whole area.
i tried to introduce some sort of "manual resize", but it didn 't help.
scrollref: virtualscroll; scrollref.resize(); 3, i have noticed that dom has been correctly rendered.
4, when i introduced large treshold, it was working better, but after 1000 element or so, it stopped working again.
approxitemheight does not really respond, as does not matter whether i set to '100px ' or '170px '.
(new version does not need that, had problem previously with it, but it 's solved with upgrade) 5, ioninfinite has been called several times.
(probably because item has been in dom, infinitescroll tag, even if it has been disappeared was shown up hidden after last really visible item in list) 6, there is one tiny note what to mention, virtualscroll is scrolling a little bit faster downwards, then upwards.
(as complex tags, and used canvas initially by mistake, rendering was too slow, was able notice)
toolbar with multiple buttons breaks the buttons into a new line on android 4.4.2. phofimage
it seems to appear when scrolling to the bottom of an ion-list on ios
i 'm currently trying to define the useragent used on my app, and for that i 'm using the attribute overrideuseragent phofhyperlink on cordova 's config.xml.
but it 's causing me a problem while using the platform module phofhyperlink .
whenever i use it will return me false even though i 'm on the device that i 'm sending by argument.
in an ionic 's tabs based app, if we click in a tab button it breaks the behavior of ion-segment.
`height` is not properly animated in some cases when using `ion-item` or `ion-item-sliding`.
`ion-item` seems to require a wrapper for `height` animations to work properly.
`ion-item-sliding` will not animate this properly at all if it is not a child of `ion-list` or if it has a child that wraps its `ion-item`.
in the latter case, its contents will not display although the documentation does specify the parent/child requirements phofhyperlink .
however, this prevents you from creating a component that either contains an `ion-item-sliding` or its intended contents since there is no way to remove component elements in angular.
this means that if you want to get the correct height animation behavior for ion-item-sliding, you have have all of intended contents directly in template.
_sorry in advance if this bug has been already reported.
i 'm aware there are many other related issues and that a rewrite is being done.
i haven 't seen any issue for this use case._ pwa deeplink navigation with tabs is currently broken on 3.3.0. the use case is simple: select a tab, push a view with a page with deeplink and reload the page.
the url is rewriten to the current tab root.
this behavior easily reproducible in the latest `ionic-conference-app`.
so i have a simple modal that is created from a page using lazy-loading: phofcode i am testing my application through "ionic serve".
when my modal is visible i want to just dismiss it by pressing escape on my keyboard.
everything is working fine when i press esc button once, but when fast double click escape get this error: phofcode
if you have an `ion-item` that contains an `ion-checkbox` (and probably some other controls), you cannot use any events on elements inside of the same `ion-item`.
no way to subscribe to `window`s `online` event through `events` service.
the code which should provide this kind of logic exists but `events` service provided incorrectly in `ionicmodule`
ionic 's native spinnerdialog plugin does not work on windows 10 uwp platform, and there is no official alternative.
`events` service doesn 't use `rxjs` and developer is forced to manage subscriptions imperatively / manually.
it 's also increases amount of boilerplate code in an app
`<ion-fab hidewhen="landscape" bottom right> <button ion-fab> <ion-icon name="add"></ion-icon> </button> </ion-fab>` the button still shows in landscape orientation
changing value of ion-select inside the form does not trigger form change event.
pages - tabpage -> url is "tab" and taburlpath is "tab-a".
- pagea -> url is "a".
- pageb -> url is "b" first app url "xxx.com/tab/tab-a/a".
when switching between tabs in `ion-tabs` ionic emits value on `viewwillenter` observable on `app` instance only once (when component is created and doesn 't emit for subsequent navigations)
`ionic cordova resources` asks every time for credentials to ionic cloud
there are three versions of polyfills: * * * all of them contain prebuilt "core-js" and "zone.js" polyfills with pinned version on ionic 's build time.
in android working fine eg.
but in ios do not get the notification, but in alert i see the generated token.
phofcode `ion-option value` will parse the boolean value to string even if the model is of type boolean
i 'm creating a custom component that has a special handling for ion-range, but when nested inside a component it won 't display unless i include the ion-item to surround the ion-range.
when image is loaded from custom component it does not render
i receive the error this.slides is undefined following the api documentation: phofurl the reference using `@viewchild(slides) slides: slides;` doesn 't seem to work with ionic 3.2.1. it was working with ionic 2 and stopped working after an upgrade to ionic 3.
`ion-segment-button` doesnt work properly with `*ngif`.
if `*ngif` statement changes over time the button is shown but cant be activated.
presenting a popover shows a short flicker in edge browser.
(creation of empty popover container is shortly visible)
i tested this behavior on a real iphone, am i see the same problem like see on my local ionic lab phofimage phofimage
setting a new min or max doesn 't update the ui until the value is updated.
if the value of the segment button is `number` the visual activation of the segment is not being applied.
again, only visual activation is not working, segment change is working.
for record, if you click on segment button visual activation works, bug just happens if you change value of model via code.
*important: value being `string` working fine.
inside slider moves to the right as new slides show up.main and sub sliders are both dynamic from json.
hi guys, i 'm seeing a bug only on ios where i am able to scroll the content of a page in the background of a modal when this latter is opened and when i try scrolling inside the modal.
is there a way to prevent this ?
once again thanks for your effort to try making ionic great framework
error: could not find an installed version of gradle either in android studio, or on your system to install the gradle wrapper.
please include gradle in your path, or install android studio
when i launch the camera even though i am using `sourcetype : it launches the gallery (albeit the "_camera_" folder)
receive an undefined error when presenting a modal that has its own .ts file and .html file as templateurl
ion-label is automatically added to the contents of an ion-item if a non-ionic control is used inside ion-item causing unwanted spacing (margin + padding) around that control.
if a modal is presented from another modal, dismissing the top-most modal will not trigger the `onwilldismiss` handler.
the `ondiddismiss` handler is triggered as expected.
while running `ionic serve` or `ionic run <platform> -l` no file changes trigger a reload or have any effect.
are there any dependencies i need to make sure are installed myself or any way of outputting any logs on the files that should be being watched or running the watch command on it 's own with a verbose output?
i have a list of items like you see in below picture (it is just a demonstration of the real app).
each item has 4 buttons that, when clicked, should change their state.
the state change is visualized by changing the color of the button.
i have one component that renders the list, another component that holds item structure, and a third component that renders 4 buttons.
the list uses virtualscroll and has an approxitemheight set.
phofurl when this app runs on an ipad 2 (or some other "older" ios devices) time taken for any button to change it 's state from moment it was clicked could be between 1 and 4 seconds.
below is what i get from timeline tab on safari when i click on a button and wait for it to change: phofurl here you can see that lot of "styles recalculated" events show up.
the whole process took 1 second, although in our real app (which has bindings, more styling, etc.)
this could take 3 or more seconds.
also, scrolling is laggy slow.
when using ion-select with interface="popover" and trying to add a cssclass via the "selectoptions" property, no class is added.
however, when changing the interface to alert, the class is added.
clicking tab buttons in the tabs component does not trigger app#viewwillenter and other lifecycle events, except the first time the page is being loaded.
with any other native library i 've been using, it was just enough to include it and inject it in the constructor.
with nativestorage, however, i keep getting the error `error: no provider for nativestorage!`.
the usage i 'm doing in my service is this (just the relevant part): phofcode if i try to inject it as a "provider" in the module, says that "cordova is not ready".
i have a build where i get a clean copy of the npm modules each time i build.
[symbol.replace] (native) string.replace (native) formatstringfromargs 21) checkexpressionworker checkexpression @ 61:0-25 ./src/app/app.module.ts ./src/app/main.ts ` if remove c3 (graph library) and jszip (as indicated are problems in above), then errors goes away.
if use c3 and/or jszip in newly created blank application, do not get errors (hence this stage can 't provide small example.
have done many many builds, and have not seen this before.
a forum suggestion was to report it as an app scripts issue, as am doing here.
it is only when building with --prod flag
if you you pan a zoomed image the slider also slides to the next/previous page.
if you have multiple slides and you swipe to a page with a zoomable image and you double tap the image and than tap the zoomed image once again.
the image would be rescaled to fit the page.
if i try to pan a zoomed image on an android device i got the following error on the console.
`unable to preventdefault inside passive event listener` and i 'm unable to pan the image.
there is 25 to 35 seconds delay in playing any audio from remote api with html5 audio, issue is occurring only on ios physical devices, tested on iphone 6+ and 6s.
working fine on the web, android and ios simulator.
i think the issue is not with html 5 audio because i also used third-party audio players like howler.js and jplayer but same issue on those too,
when i am on current tab, and scrolled a bit down, pressing on that tab again it goes to top by using this piece of code: ` tionselected() { t} ` but, if scroll is still moving, (if you start scroll and release your finger of the screen, like making it stops naturally), if you tap on that tab while scrolling it goes to top, but after that, it continues to scroll.
currently there is no way to show/hide a column in a grid depending on the screen size.
close button in toolbar on android renders on a separate line from the ion-title <img width="345" alt="screen shot at 1 05 51 am" src=" phofurl
using ion-textarea with ios is presenting some odd issues.
the first character appears, but then the rest of the changes do not show up, though the cursor moves.
adding characters or deleting does not update unless the keyboard is hidden or scrollbar comes up.
unable to select `ion-checkbox` components in ios 10. the selected state does not change, and there is no feedback of any kind, or any console logs that may help.
ionic does not currently support serving locally over https when targeting the browser platform.
after 'ionic upload ' when you programically check for update using 'ionic deploy plugin ' you have this error: ./build/sw-toolbox.js: open failed: enotdir (not a directory) and installation stops.
after build command, generated apk works fine, but uploaded to cload can 't intall.
i 'm facing a click delay problem while test my app on real device (ios/android).
while testing on browser, clicks are very fast responsive but when i test the app on iphone 5c or android devices (or emulator) there is to much delay (like 2s).
you can see the difference: on browser phofhyperlink on iphone 5c phofhyperlink
i was using the ionic 3 beta cli, and tried to install the connectivityservice.
it couldn 't work in that version, so i performed a clean uninstall of ionic, and then, a new install aiming to ionic@latest.
it gave a dependency error on app-scripts, so i used the following command: npm install --save @ionic/app-scripts@1.3.1 then, i used again "npm install -g ionic@latest".
after that, everything stopped working.
can 't do anything with ionic anymore; just keep having the same error with whatever do: "typeerrpr: cannot read property 'includes ' of undefined".
it doesn 't matter if uninstall it and it again; just can 't get it working.
when using `<ion-datetime>`, if a time between 12:00 am and 12:59 am is chosen within the picker, when the picker is reopened the hour will default to 1 instead of 12.
the current alertcontroller does not have an option to add an ion-textarea as input, it has only the option to add an ion-input.
i wrote a very simple function to watch the event object like this: phofcode when i click slowly, i can see an event being emitted only once per operation.
but twice if i click quickly, one is
i have the following prop in my data provider/service... phofcode here is the html phofcode if i enable the console.log i will see a zillion calls to the comparisons property while i try to move slider (range) and it responds very very slowly and range pin won 't even display, rendering this user control not usable.
would like 2-way binding between ranges and some corresponding model in my data provider class (an array of integers representing latest values).
i have multiple icons on the root page that push new pages onto the root page when tapped.
when icon that is taped is on the same spot (for example, top: 150px, left: 120px) as the range component on newly loaded page, that same click that initiated opening page also changes value of range (slider).
animations do not work when adding a component to the dom _(to a page, via *ngif)._
geolocation plugin not working in custom event with custom zone.
images on the slides component demo not showing.
i built with the latest 3.2 ionic code, with angular 4.1.0, cordova 7.0.0 on ubuntu 16.04 with android 25 sdk, when i switch app on my android 7.0 galaxy note 5 phone, then switch back to my app, the fab button just stop working.
it doesn 't show fab list after click fab button, no response.
haven 't tested on ios yet.
if you specify custom buttons for an `<ion-datetime>` component, those buttons will be rendered, but clicking them will not do anything.
when i put an `<ion-input>` inside an `<ion-card>` the bottom border that acts as an underline is being overwritten with some core css found here phofhyperlink
you should be able to specify the side that you want an `ion-reorder` to appear.
currently it is hard-coded to be on the rhs.
even moving the reorder icon does not work as the logic is hard coded: phofurl
lets say an app has 2 pages, page1, and page2.
both apps have custom components.
when navigating using nav.push there 's no destroy method for the component, nor any way for it to get to know that it 's not active.
even implementing `ngondestroy` (and extending from ondestroy), ondestroy is never called, the component never knows it 's not active anymore.
if the navigation is changed to use `nav.setroot` , the destroy event is triggered and can be captured inside component.
ionscroll event not update changes on view.
when running `ionic serve -l` using the ionic cli v3 in an ionic 1 project, the ios preview overlaps the statusbar.
playing audio from local filesystem using cordova-plugin-media 3.0.1 doesn 't work on android/ios, with no error messages logged.
i found tapping the tab will make the tab page reload after i update my project to v3,but no problem in v2.maybe this is something to do with new config?i checked the components and api doc, but found nothing helped.
i need to tap twice(fast) to trigger the event(to open menu, any button in my screen, etc...).
i am experiencing a significant delay in app startup for a live update delivered through `ionic upload` compared to the same snapshot build using `ionic cordova build --prod --release`
on ios, when the ion-searchbar element blurs, the keyboard leaves a white square at the bottom of the screen.
when popover or alert opens we can pass updateurl: false to prevent url change in browser, but when dismiss called url updates to #/ always
when we type a search term in searchbar and press search button on keyboard, it should hide the keyboard and blur event should fire.
in current release, pressing search button once doesn 't work, whereas if we press search button twice it closes the keyboard.
typeerror: converting circular structure to json at json.stringify (<anonymous>) at deepequal (...) at (...)
here is a screenshot of the issue image phofimage as you can see, the bottom bank of `tab`s has the highlight on the top, where it belongs.
the top bank of `tab`s also has highlight on top, instead of on bottom.
it appears this is caused by inner `tab` set inheriting css intended for outer set.
if i disable this rule: phofcode then highlight for both `tab` sets
ion-refresher doesn 't work with virtualscroll, when we pull down to refresh, and call complete, it clears the screen and doesn 't show anything.
aot build fails with a message: phofcode
when using the ionic blank app on platform browser, the ionic page goes into a inconsistent state after a user clicks on back, followed by forward button.
on my project, this causes components not to work properly and variables not to be initialised properly on the template.
whenever a view enters, if that view contains a `navbar` (`<ion-navbar>`) then the `app` 's title is updated to the `navbar` 's `toolbartitle` (`<ion-title>`).
disabled `ion-datetime` label 's color differs from disbaled `ion-input` ' label 's color.
`ion-datetime` label 's color has `opacity` that other inputs dont
last friday i had my last internship day in office.
on that day my app has worked fine.
i have pushed the app to gitlab and builded an apk file.
yesterday i have installed ionic on my home pc and cloned the gitlab repo.
when i start the app now on the same phone, it is not working as expected and as last day in office.
even when install apk which have builded when everything was working it does not work anymore.
have described problem already in ionic forum: phofurl phofhyperlink on top of that created a test function which has same functionality as my normal function.
show you this function and output in this video: phofurl phofhyperlink the code of test function is below.
on top of that created a new ionic app with ionic start pasted all code added all plugins installed all modules with hand.
but it is still not working there are no errors console.
when using infinitescroll with position top it 's firing two times.
this happens only on wkwebview.
on uiwebview it works quite ok. on android, desktop chrome etc.
probably the problem is with new scroll position not being set after new items are added on top of previous.
interesting thing is, that the problem happens only when user scrolls.
when scrolling by scrolltotop everything works fine.
scroll bounce effect is still visible on ios emulator and device (should be disabled).
it works as expected on android (no bounce effect)
the _maxlength_ attribute is not working on
i 'm starting a simple app using requirejs to load the libraries, everything went most ok, but gives: phofcode i know i supposed to change angular.elemente to queryselector, but i use a bunch of libs, how do i supposed to change the libs?
if you enable voiceover on ios you can use the two-finger scrub gesture to go back hierarchical.
going back while navigating with the navcontroller doesn 't work.
scrolling creates a terrible memory leak.
1. the older version of webkit does not support requestanimationframe, in the android (<4.4) version of the below complains: phofcode i replaced my requestanimationframe, then app can run.
this problem will cause ionic2+ project won 't run, on low version of the android.
2. in the old version of webkit, style will disorder.
i think may be does not support flex layout.
you can experiments in android (<4.4) emulator.
i will put two pictures here.
pictures 1 phofhyperlink pictures 2 phofhyperlink oh, there 're running on 4.1.2 effect
replication environment: mac os x (for pwa) different behaviors in chrome and safari version 10.1 (see videos) currently i have replicated the bug on the ionic-preview-app on ionic versions 3.1.1, 3.1.0, 3.2.0 the bug does not happen on 3.0.1. description: the key up on the ion-searchbar seems to be broken since 3.1.0 onwards for non latin keyboards.
for example i am using a chinese hanyu pin yin keyboard to type "" (qingshan).
however safari, the ion-searchbar goes like "qqqiqiqingqinqingqing sqing sqing shqing... ".
on chrome, ion-searchbar seems to dismiss language bar intended to popup.
when you have a [`tabs`][tabs] component as your primary element on an otherwise poppable child page, the [`tab`][tab] components create sub navs that a [`navbar`][navbar] can't pop automatically.
it happens in 50% of the times i serve ionic.
in my ui i have an ion-input labeled participant name, with and a button labeled add to list with the user types a value for the input field and clicks the button to add the value to a list.
the button 's click event calls addparticipant().
the addparticipant() function adds the value to list and then sets participant.name=null in order clear ion-input field.
the problem is that no matter what value i set for participant.name input field will not refresh with new value, event after i make a call see code and plunker example below.
app crashes with error message as described above.
`ionic build ios` completely rewrites my `config.xml` and `package.json` files with trivial whitespace and other changes.
there could be breaking changes, but it 's very hard to tell because everything is completely rearranged.
platform always contains `mobile` instead of `mobileweb` when you build your app using `ionic build browser`, no matter if the app is actually running in an app or in the browser.
reason is that currently the existence of cordova is taken as an indicator for `mobile`: phofurl see more discussion on this here: phofurl
a floating label on `<ion-datetime>` always floats above the input, even if no date is selected.
this happens if the ion-datetime has `ngmodel` or is in a `formgroup`.
if it 's neither, then it only floats when a date is selected (but then it becomes useless, as you can 't actually get the value).
when manually resizing a `textarea` within an `ion-item` and along with a `ion-label`, if the textarea is resized horizontally the label will disappear.
virtualscroll does not support items of variable height and seems to have issues rendering data that is delayed in transport.
segment::value is typed as a string, even though it can be other types, such as a number.
when use 'ionic-app-scripts serve --prod ' to serve, the select component option value is not shown at all.
looks like this: screen shot at 10 02 59 phofimage
when initializing a virtual scroll list with empty values, to be filled with values later, the virtual scroll seems to disable and never show items.
currently ionic auth service : phofurl allows us to save user data including login details to ionic cloud.
it only allows us to view details for each user but has no way to bulk export this data out of the cloud.
i could not find any export link or any related api for this.
currently for each page we have to create a new ngmodule for that page where we have to add to imports.
when running a production build on the browser, checking returns `true`.
that is not the case when running in development mode (for example, in `ionic serve`)
currently all components of the framework are available in ionicmodule.
angular 2 material was also using the same approach until 2.0.0-beta.2 but in 2.0.0-beta.3 they removed the aggregate ngmodule (materialmodule).
since it doesn 't result in better tree shaking.
have a look at their explanation phofurl
i have an app with about 35 pages which i lazy load.
i set `preloadmodules` to `true` in `app.module.ts` which will preload about 20-25 pages when the app starts up.
the app startup time is getting better using this pattern but now the app is unsusalbe for the first few seconds because the preloading process freezes whole app.
once process is done everything works fine.
i think this bug is even worse than a slow startuptime...
<button ion-button item-right using this code, and when running as ionic run android --device, i got error below: phofcode
i should add all native packages one by one on import statement.
i am trying to implement filepicker functionality using this library on ionic 2 app but after importing this library i am getting blank and white screen.
this doesn 't happen with any other 3rd party library i am using in my app.
in main page, it has its own ion-nav and a child page dashboard will be pushed into it.
when i trying the push another page in main page through the navcontroller, the url does not change.
but it does changed when using setroot method.
in both case, the page is changed correctly.
ionic documentation does not give a clue about how one can distinguish between user initiated closing (click on close button) and automatic closing (after delay) of toasts.
the primary entry point for handling dismissal of a toast is attaching an event handler to the toast via phofcode as described in the current documentation found here: phofurl only with trial and error and looking into the source code it was possible for me to discover the difference: if toast is closed automatically second parameter of callback function will receive "backdrop" as its value and "close" if user clicked on close button.
importing alertinputoptions gives .../ionic-angular-index has no exported member alertinputoptions
when i generate a provider/page via the console i can 't create one in a subfolder.
issue occured in android, ios, ionic view i 'm using ionic package to upload and build.
the `<img unable to display correctly, the error show "failed to load resource: the requested url was not found on this server."
the weird things is it can load for first <img> tag, but it can show in other <img>.
example eg1: at login screen, the logo able to show, but the <img> in the next page (register screen) show blank.
eg2: after login, restart app, the dashboard first <img> able show, then second <img> show blank again both example come out with error: "failed load resource: requested url was not found on this server."
i try debug using gapdebug, first image will load through (android) then second one will just go "assets/img/user.png" find for image.
issue same with ios as ios will go
if we make the swipe to go back in a view with <ion-input> it stays stopped as soon as you release and the transition from one view to another does not end.
this only happens when we start the gesture from the <ion-input>, if we swipe from same view but from a point that we do not touch <ion-input> works correctly.
using an `<ion-select>` with object that has circular references fails: phofcode the error: phofcode the function that causes this seems to be (which makes sense): phofcode
image is not appearing in gallery.
reported an error error typeerror: cannot read property '_getportal ' of undefined
it seems that the validation classs on ion-datetime are not being applied properly.
for example i have below formgroup: phofcode and below template: phofcode since the date field is required, when the form is submitted its expected that it would apply the appropriate classes to ion-item as it does in case of ion-input: `item item-block item-md item-label-stacked item-input ng-invalid ng-touched ng-dirty`
we have a model that is intended to be immutable, so it freezes the arrays returned by getter methods.
passing this frozen object as the data for a popover fails: let data = let popover = this.popoverctrl.create( this.popoverpage, data ); the second line fails with exception "typeerror: can 't add property component, object is not extensible"
an undefinied value inside a template does not trigger the exception handler.
angular detection stop working, i.e.
i had to rollback to ionic2/angular2 to discover that the problem was the undefined value!
i 've got a button styled with the `ion-item` attribute to make it look like an item.
i want to show the detail push arrow on all platforms but the `detail-push` attribute doesn 't work in this case.
floating input shows strangely on slides with coverflow, flip or cube animation while the slide is not on their side
a toggle inside a toolbar, doesn 't show properly on ios.
it appears too low and is unclickable : <img width="349" alt="capture d ecran a 10 59 49" src=" phofurl
first, at root page "rootpagea" , user navigate to another root page "rootpageb" (using nav.setroot method), then he press browser 's back button to go back to the previous root page (rootpagea ).
but now, the screen is displayed as it was a pushed page, not a root page (judged by the back button is shown, instead of menu button).
please see this screenshot: backbug phofimage
when scrolling through items in a `<ion-scroll>` element, items are clicked far too easily.
the threshold to click an item is significantly more sensitive than on other scrollable elements, such as elements inside a scrollable `<ion-content>`.
this results in unwanted clicks when attempting to scroll.
i tried to upgrade a project from ionic 2 to ionic 3. testing the app with "ionic serve" results in the error "runtime error - cannot redefine property: oncreateelementsnsready" in the generated polyfill.js.
i 'm using lazy loading.
if i set rootpage in ngoninit, i 'm getting following error.
if i set rootpage at class level, it works.
i have to close ionicerrorhandler screen every time because of this error.
using setfocus() on searchbar property inside ionviewdidenter does not set the focus.
one tab is empty, the other instantiates the media and file plugins.
switching between tabs causes increasing memory usage that is never released.
this practically makes ionic un-usable for deploying a real world application.
we have tried with @ionicpage decorators / modules / lazy loading and also without and eagerly loading the pages instead... same result for both although eagerly loading seems worse.
when running an ionic 2 app in kitkat version 4.4.2 performance is terrible.
pretty much not usable, is this normal?
i have had an ionic 1.3 app built in ionic and on kit kat and was much more responsive.
for example - i can 't even swipe to pull out the side menu, it doesn 't work at all.
maybe 1 out of 100 times it will start to pull out.
page loads are extremely slow.
i installed crosswalk-webview and it fixes all these problems, but wondering why its so slow vs the previous version of ionic 1.3?
crosswalk is no longer maintained and adding a huge overhead to the app.
having a signup form with 2 fields email and password, the user is created successfully but ends up in this exception.
runtime error uncaught (in promise): removeview was not found
i tried to upgrade a project from ionic 2 to ionic 3. testing the app with "ionic serve" results in the error "runtime error - cannot redefine property: oncreateelementsnsready" in the generated polyfill.js.
updating the package.json of ionic v2 app and running npm install, ionic serve --lab throws error: runtime error no provider for applicationinitstatus!
i got null exception at phofurl
virtualscroll only supports vertically scrolling lists.
lacking documentation for multi-column lists.
hello, in my app i have a component where i use a slide and icons generated with the dependencie ionic2-custom-icons, i generate a list of these components, the first 2 items show it fine but if the list slide down the next items not show correctly because slide component is showed over icons, icons show it fine until i touch slide image, next i show a gif of this issue phofimage
when using the `ionviewcanenter` method, according to the docs: > we need to make sure that our navctrl.push has a catch in order to catch the and handle the error.
- when using ionic 3.0.1, catch was being executed after returning false from `ionviewcanenter`: demo plunker phofhyperlink - when upgrading to
just change `$tabs-md-tab-padding` in your variables.scss and when you switch between tabs (3 for me), the tabs will move around.
i have a form on a view, and when the page loads i pre-fill out the form using a `formbuilder.group` in the constructor.
my `ion-datetime` works as expected, but the `ion-select` does not.
all of my `ion-select` appear empty until i select a value manually - defeating point of pre-filling out form.
`ionic lab` always refresh app when save scss file.
not a refresh scss and stay in the former page.
but it refresh to a home page, like when you save a code.
slide menu item 's click work on second time or third time
when i am using formcontrol in radio-group then i am not able toggle betwees radio button values.
the floating label does not show correctly when used with a checkbox.
it is pushed underneath the checkbox and all but hidden from view.
the no-lines attribute is not working when added to a list inside a menu (ios and android).
when you create a ion-select which returns an object, on option selection, it shows all options selected.
i have updated to ionic 3.1.0 per the instructions in the changelog.
however, when i run `ionic info`, the version shown "ionic framework version" still says "3.0.1".
something 's fishy with `ion-select` in the `3.1` update.
first, the `ionchange()` event is firing automatically on page load without any user action.
second, only the value of the event used to be passed through, but now whole event is being passed.
as described here, phofhyperlink , the `interface` attribute on an ion-select elemen cant takes the following values: `action-sheet`, `popover` and `alert`.
`action-sheet` and `alert` work as expected, but `popover` don 't : i get an alert instead of a popover.
live demo here : phofurl
clicking on tabs does not highlight currently active tab icon.
highlight under tab behaves properly though.
with the new lazy loading structure and the deeplinking method, using navguards becomes even more important.
but when i use ionviewcanenter(), i can only return false or true and not set the new page to navigate to, if i load the page directly by url, so only thing i will be seeing is a blank screen.
have already tried to pass defaulthistory via @ionicpage(), but that is not working as well
when i deploy my current state of application to ios device the slider doesn 't work as i expected.
slider is on the first page after application run.
it seems to be free mode all the time without transition at all.
on android devices and browser everything works fine.
this issue appears only on ios devices.
there 's no way to specify sass maps to be used in the value of the color attribute in the component template.
1. click on ion-input and type something.
2. to close the keyboard click outside the keyboard and the input box.
3. during the time keyboard is closing, try to scroll up or down.
4. when you try to edit textbox, its unresponsive.
this happens inconsistently, i need to try steps 2 and 3 around 10-15 times for issue to happen.
just updated to ionic 3.1.0. after using "ionic serve" the "default"
when custom building for aot with ionic 3.1.0 i got the following errors: [9:45] error in (2,578): property _lblid does not exist on type range.
error in (3,5): property options is private and only accessible within class selectpopover.
search bar text animating to center every time page loads.
extremely awkward on flows with search bars on multiple pages.
the config.mode var is not working when i 'm compiling the app for platform browser.
i 'm using the ios style in my web app but it 's using md by default.
setting the variable works when i 'm running the app with ionic serve.
if i use dynamic link in deep link support, phofcode when i put 2 values `id` and `name` in param value phofcode then i can only get `id` value, but value of `name` is undefined phofcode
after adding on-swipe-right or on-swipe-left attributes in ion-content we can 't select text.
ok i have push/pop mechanics for navigation.
i have encountered bug with date picker from ionic in 2 occasions.
first one was like this: i came to the page for first time and it worked perfectly then i pushed onto new page and then pressed back button after that i tried to edit my date and it wasn 't working.
second bug behavior was this: last bug described stopped working after push and going back.
but this time it didn 't work even on first page visit.
note that page was on 3rd push.
it didn 't work on activity.
note: model value is changed since i console.log model on ionchange but the model two way binding or whatever is not working since my changes are not reflected .
the input stays blank even if set default value for picker.
ionic 3 is creating new instances of providers instead of single shared instance.
"ionic build android --prod" command fails with "internal error: unknown identifier {}"
navigating to a page by clicking on a popover element makes the device back button useless.
the device back button won 't get me back to the previous page but the navbar back button will do.
the toast message container overlaps the statusbar in ios devices.
the css translatey value is set in javascript hardcoded to 10px, which is too less.
so i recently published one of my apps online as a pwa but i noticed that on page startup i get the following error with no description whatsoever: `screen:1 get phofurl 500 ()` image: selection_260 phofimage
using list in ion-scroll (scrolly) on android devices where both click and swipe are used, make the list not scrollable (see screenshot to see which part of the screen isn 't scrollable).
i try to use color inside attribute from variables.scss but it doesn 't works
on device and emulator, the ion-select return the model value as an array, while on chrome it returns the model value as string.
the loading the slides api doc demo, the images are not loaded, throwing error 404 in console.
using ionic.io services, after logging in with facebook, i can fetch the user through the ionic.io api, but the [details][name] object will be empty.
the first and lastname can however be found in the [social] structure.
also at client side, 'user' object does not contain name, only via user.social srtructure.
the constructor will be repeated when the same tab is selected consecutively.
changes aspect-ratio of images in ion-avatar
i 'm using the `ion-img` as explained in the doc, inside a virtualscroll, but the images are not shown in the first moment (grey box only).
after a certain scroll, some images appear, and after scrolling a bit more, images disappear another time.
so i need to add a small form inside a popover.
it 's a "add to wishlist" popover.
so the user either selects an existing wishlist or creates a new wishlist and add the item at the same time.
when i tried that in the device, i got weird result where keyboard was overlaying popover and form couldn 't be seen.
after install node, cordova, gulp, bower and ionic, i made a new project with: ionic start test sidemenu running this project always throws: phofcode on mobile device, it should ionic loader, then get a white screen for more than 5 secons, and then app apeears.
i try all the available templates, with same result
generating new project with --v2 flag starts a v3 project
when calling in app.component.ts: phofcode ...the setroot doesn 't work and the promise never resolves.
when using `ion-tabs` and pushing additional views inside one of the tabs navigation between the different tabs will pop the tab back to its root page on ios or the ios emulator (
if you have an `ion-searchbar` in a modal, and have at least one character in the search bar then you can 't click any elements on the modal until the second click.
it 's worthy to note that if you place a regular `<input>`, that does not happen.
this started happening after i upgraded from ionic 2 to ionic 3.0.1 -- it takes roughly 2-3 minutes for the app to load viewing it on ionic view.
when i downgrade to ionic 2, it 's almost instantaneous.
when typing in an input field, the input loses its focus when a toast is presented.
i use toats to show new activity in my app and currently it 's hard to type in an input when it 's loses focus every time toast is presented.
while using the ionic tabs and tab components, the [rootparams] are 'undefined ' when the same tab is selected again.
when a specific tab is already active and you press it a second time, then the [rootparams] are 'undefined '.
whenever pressing on another tab other than active one, then [rootparams] are defined as expected.
pushing an object to the navparams with a key that starts with a '$ ' cannot be used in the segment property of the @ionicpage property to create dynamic links
"activated" class is not added anymore to <ion-item> on tap
when i try to make two `http get` calls to my rest api the app breaks.
the first call goes through and returns my json data, but instead i get... phofcode logs taken from chrome://inspect on an android device.
1. list view: user clicks an item in list and goes to a detail view 2. detail view: user performs an action that adds a toolbar for detail view + list view, then clicks "back"-button and goes to list view.
3. even after calling `content.resize()` on the inactive view 's `content` component, it is not resized taking the added toolbar into account.
i have a list with 1000 items that is bound to a virtual scroll component.
if i replace any of 1000 items with a new reference (i.e.
items[500] = new item();) then all components rendered inside the virtual scroll are destroyed and recreated.
if you click outside the keyboard then tabs will push up.
after upgrading to ionic 3, i ran into performance issues related to firebase.
it takes forever to load information now.
this behavior is only occurring on real devices and emulators.
however, on regular web browser it works good.
this happens for the first connection from the device/emulator to firebase.
map does not render in the content of the modal.
just a transparent window shows.
i got following error caused by phofcode when i am trying to user number filter in order to display a value with formatted decimal precision.
following a link inside a popover to another page and then calling settoroot() does not return the app to the root view.
i ran ionic generate resources in terminal and the three ios splash screens were generated when i run ionic emulate ios the default iphone se simulator does not use any of these images as a splash.
running the other ios simulators does use these splashes.
n/a (hopefuilly the extra text makes you happy)
the password field gets cleared when i type a new character after re-focusing the field.
ionic-hello-world@ ionic:build: `ionic-app-scripts build "--prod"` err!
exit status 1 failed at the ionic-hello-world@ ionic:build script 'ionic-app-scripts build "--prod" \'.
make sure you have the latest version of node.js and installed.
if you do, this is most likely a problem with the ionic-hello-world package, not with itself.
tell the author that this fails on your system: ionic-app-scripts build "--prod"
using ion spinner inside a popover shows a blurred version of the spinner.
it looks like a spinning blurred cube: image phofimage
in an application with tabs menu when you are in an active tab and you return to press reload the view again.
currently ionic oss code repository does not include any information about what developers should do to submit any security issues or vulnerabilities which they might discover in a formal manner.
this call below will return the dimensions object with the property `contentheight` equal to `nan`.
when you have to load dynamic options on actionsheetcontroller, you have to add an handler by action on the option, but now , we can 't identify which button was pressed because all the buttons get the same value on the framework.
add an value prop on buttons solve this problem and will help to get many new ways to use actionsheetcontroller.
today solve this problem, we have extends class and override button options.
version 1.3.3 is available just on code.ionicframework.com
the html link to call a phone number - made by an `<a>` tag with an href attribute with the value "tel: - seems to be buggy on ios devices.
clicking on such a link on an ios device triggers a confirm alert that shows the phone number to call and the two buttons "cancel" and "call".
if one let this alert be present for approximately 10 seconds, by not clicking any buttons, the alert will disappear for one second and show up once again.
the bug has been observed on these devices: iphone 6 plus 10.3.1 iphone 5 10.3.1
when opening keyboard in ios, content does not resize.
content does resize when closing keyboard, which causes blank space at the top or bottom of screen, followed by a second resize that corrects the screen size once the keyboard is fully closed.
make sure to include cordova.js or run in a device/simulator cordovawarn main.js:45009 checkavailability main.js:56592 callcordovaplugin main.js:56680 (anonymous) main.js:56799 value (anonymous) t.invoke oninvoke main.js:4424 t.invoke n.run t.invoketask oninvoketask main.js:4415 t.invoketask n.runtask a invoke
i upgraded to 3.0 following the release notes and i 'm trying to run the app and i 'm getting stuck on the splash screen.
i tried both with a full build and a live reload build.
with the lr one i got only following log: console.log: ionic native: deviceready event fired after 204 ms
i am adding different ion-select dynamically; nevertheless, when i change the value of one of them, the "displayed" value of the others are also updated for an unknown reason.
the bound value is correct though.
when i click on toggle it triggers a function in the browser and ios and it doesn 't on android.
actually in 50 times it triggered once.
when using the default command to scaffold an ionic 3 app `ionic start ionic2do blank --v2`, the default cordova-ios version in platforms.json is v4.1.1.
this seems to be causing the ios simulator to display the error that current app needs to be recompiled for 64-bit and may not work in future ios version.
platforms-json-2 phofimage <img width="375" alt="ionicerror" src=" phofurl
whenever i do `ionic serve` inside the project folder it successfully starts up the live reload server, but then when i reload the page it stops the live server & also when i make any changes to code and save it stops live server with same error when i refresh window.
so every time make any changes have to run `ionic server` again and again.
on ios device, i open a modal from tabs as explained in the docs: it works fine but when i implement a navigation structure inside the modal, then ios sliding animation is buggy.
when i use nav.push() inside the modal, the faded background during animation is background of previous selected tab and not actual one.
if i navigate further inside modal, faded background is one of previous page, and not actual one.
new install ionic and cordova choose super template fail
scrolltobottom is not working with ionview
when i run "ionic cordova emulate android -l", the emulation says: "webpage not available the webpage at phofurl could not be loaded because: without the -l, it 's working as should, on ionic serve it 's runs too.
when using phofcode transition to next component in stack in our app fails on ios (also browser ios emulation) with phofcode
platform.is("windows") returning false when app is a uwp app and running on desktop platform.platforms() array returns: cordova core
after updating to ionic 3 i see this issue, before all was working great.
phofimage when i first load the tabs page the content doesn 't show correctly, if i go to an other tab and return to the first one all work properly.
ion-refresher is triggering by scrolling ion-scroll content when both of them presents on ion-content.
i am trying to use ionic3 lazyload,but when trying to present something (modal, actionsheet, alert) i get typeerror: cannot read property _getportal of undefined.
when navigating from a slider to another page, if you rotate the device and then navigate back to the slider, the slides are not aligned.
1. deeplink change default _[root]_ in
when touching an input field on ios, the keyboard opens and the input/form bounces around.
it 's not great ux.
with the new ionicpage deeplinking, manual changes to the url are not recognized.
if i have a url #/home and change it to #/about, nothing happens.
when reloading the browser, the aboutpage gets loaded
found a small bug with the new ionicpage deeplinking: when setting a link from the navpush directive `<a the generated link always shows the current page `<a href="#/home"
if you have a page with a bound ngfor and in that ngfor is an invalid binding to another item, pushing the tabs page as root causes tabs to not highlight but still work.
there is also no error in the console.
this only happens if the for binding is populated in the ionviewdidload.
if for binding is populated in error thrown and ionic displays error page.
my guess that ionviewdidload catching error and not displaying anything.
though functionality of tabs still works.. highlighting doesn 't.
grid auto-layout does not work with ios.
the grid continues on the same line and does not fit as in android (with the same code for ios an android).
when i use safari on mac os, it works.
screen capture from real device iphone7 with ios 10.3 portrait image phofimage landscape image phofimage
sometimes on `ionic serve` using `ionicpage` after change a file and live reload i get this error: phofcode i don 't know how to reproduce this, if you need an example i can try to do it.
i think the problem is on `livereload` and `ionicpage`, have multi `ion-nav`
i use visual studio 2017 to edit the code.
when using visual studio 2017 to debug on the device i can only debug the .js files using chrome debugger.
because of that i thought building the app using ionic cli strangly it always results in lint finished in 4.83 s error: unexpected token in json at position 0"
ion-loading don 't inform the user about the loading process and the displayed dialog when using accessibility voic assistant (screen reader).
on [ion-slides] instance with loop=true option, slideto() method shows index-1 slide ex) slideto(0) = shows last slide slideto(1) = shows first slide
upgrade app to v3.0.1 and run in lab
location replace has no effect on android platform, but is ok on serve on browser.
when i push back button (system or top ionic back button), i go the te wrong state a -> b -> c [back] comes to a on ionic serve (expected behavior) a -> b -> c [back] comes to b android the replace is asked for transition from b to c example of link: <a ui-sref-opts="{location: \'replace \'}" i also tried with custom joined directive joined below (to use $state.go), but i have the same results.
selecting a date with the datetime and clicking 'ok ' returns an object to the model instead of an iso string.
according to the docs i should be receiving an iso string: datetime docs phofhyperlink
on ipad mini and ipad retina (ios 9.3.2), line separators don 't render in an ion-list.
they show fine on the browser when tested using ionic serve.
i upgrade my ionic v2 app to ionic v3.
the proccess was success, when i review my app, all pages have a button in the left side but were hidden.
i removed the menutoggle directive and inmediatly were showed the buttons, but near to button end, ion tittle is up too and is misaligned (in android).
i have ion-item-sliding with nested ion-item, inside is ion-label for ion-datetime.
if i remove ion-label everything works fine, if i insert it, the whole ion-item renders empty.
ionic start command never establish a tunnel to downlad ionic2-app-base zip file.
npm works fine, git works fine.
and what is the ip address of ?
apparently this only occur on ios device with ionic3.
i have tried with my own project and also the official ionic3 project files, both result in black screen after multiple click on tabs.
screenshot of the issue phofhyperlink
if i use onquestionchange or onquestionclick and i change the selected item manually inside one of these functions the ion-list is not refreshed.
i know it 's a weird use case but i need to clear one or all values in a ion-list (multiselect or not) and i can 't disable the items because know after if the value is wrong.
the typescript transpiler throws an error when transpiling this: { animate: true, direction: 'forward ' });` > typescript error > argument of type 'component ' is not assignable to parameter of type 'string | page '.
type 'component ' is not assignable to type 'page '.
property 'apply ' is missing in type 'component '.
> > const tile:blftileconf = { animate: true, direction: 'forward ' }); } ionic framework: 3.0.1 ionic app scripts: 1.3.0 angular core: 4.0.0 angular compiler cli: 4.0.0 node: 6.9.1 os platform: windows 10 navigator platform: win64 user agent: mozilla/5.0 (windows nt 10.0; win64; x64; rv:52.0) firefox/52.0
i got an error when useing lazy load in production environment.
text between `<p> </p>` tags above an ion-grid is breaking on whatever letter is reached before hitting the edge of the ion-content area.
let's say we have two ion-select component in a page if one of them has no ion-option available both of them will broke.
nav.getactive() returns object with value name set to the class name of the page
i updated my project from ionic 2.2 to ionic 3.0.1. since this update, angular not refresh the views correctly when i use a virtualscroll list in my project.
the virtualscroll list work but when i go to an other page after rendered the list angular do not detect objects changes.
i have to use changedetectorref or ngzone in order to fix the problem but it 's not a normal two-way data binding behavior.
- i am on page1 and i have an ion-list button to go to page2 using "navctrl.push(page2)".
- on page2, i have a toggle button.
- in page1, when i click on the ion-list button, at the same position as the toggle is in page2 (the right edge), it triggers the toggle in page2.
on devices (tested on ios), tapping outside the menu area is being ignored during 2500ms phofhyperlink right after opening the menu.
the menu can not be closed by clicking back on the visible app area, right after opening the menu, causing non responding effect, or that there is not possibility to close menu by tapping outside of it.
the event propagation is being prevented by ionic ' tap-click phofhyperlink ' module.
so there is neither possibility of listening or detecting event in your own app code.
i created an page with ion-refresher, and other more elements.on ios when i pull down to active the refresh, when the refresher appeared, the whole page get an white flash.
then i debug the page with safari.
i found onmove function in refresher invoked ` `, and maybe it is that which cause whole page to redraw.
try to scroll a list with like 20-30 elements.
scroll is too sensitive that it will click list element.
to scroll without clicking, i 've to press screen little hard and then scroll.
when initialslide is set to 1, the first slide presented is 2 (the second slide).
so i guess initialslide counts from 0, but getactiveindex() counts from 1. with three slides and loop="true" you can still slide to slide 0 or slide 4 and get a blank slide.
sliding again will give make the slider skip a slide: slide 3 -> slide 4 (blank) -> slide 2 (skipped 1).
the same will happen the other way.
scrolling in an ion-scroll on ios (wkwebview) doesn 't work respectively ion-scroll looks frozen / can 't be scrolled related issues: phofurl phofurl notes: i use wkwebview.
i use to solve that issue in ionic 2.3.0 and 3.0.0-beta by enabling the enablescrolllistener() on the content by myself but this method doesn 't exists anymore in ionic 3.0.1 aka i use to solve that issue like following: ionviewdidenter() { }
i am developing a wechat h5 website, the default ionic navigation in header bar can not be used in my case.
only by browser 's back button can pop a page.
it is ok if popping one page only.
but when popping multiple pages, eg: page1 -> page2 -> page3 -> page4 page4 -> page1 if page2, page3, page4 have the same url(this can be achieved by setting navoptions.updateurl = false), click browser 's button, page4 can navigate to page1.
so, navoptions 's property updateurl is crucial for this kind of back navigation.
but loading, alert, toast etc breaks expected behavior of setting updateurl: false.
refreshing the app in your browser with a hash bang url is setting the rootpage in app.components and then setting the page from the hash bang.
if you build a layout using the new `ion-grid`, if you have any inputs or textareas in the columns, when the device 's keyboard appears the form is not scrolled correctly to right position.
actual conf-app lazy-load, set config mode to "ios".
run on windows platform (`ionic run windows --prod`) open "filter sessions", click on ion-toggle buttons.
1. toggle control is broken and does not enter "off" state correctly.
"reset all filters" doesn 't affect all items.
in fact they are logically reset, but visual state lacks.
we have a simple ionic3 app with lazyloading and ionicpage, we want to load a popoverpage but this is not working.
i get this error: `view-controller.js:570 popovercmp ionviewpreload error: no component factory found for popoverpage.
did you add it to i don 't know if this is a inoic3 or a problem with lazyloading or perhapse i 'm doing something wronk :smile:
in order to assign url to specific page a new page module is required.
i get this error, and i 'm not sure when this error is happening: phofcode i play around with encapsulated `ionicpage ion-content/ion-toolbar` and others i 'm not sure how i can help you to reproduce this.
after updating to 3.0 there is an extra padding when using ion-card inside a `<ion-content>`.
removing the padding corrects the padding left an right but top and bottom has no padding anymore.
happens on all ios devices and isimulator with ios 10.3 and on android emulator with android 7.1.1 bildschirmfoto um 22 25 54 phofimage bildschirmfoto um 22 42 49 phofimage bildschirmfoto um 22 53 03 phofimage
there are few issues with deeplinker / url support: 1. when a page (single page, no tabs) is pushed to rootnav from within a tab page, url is not changed 2. when tab page (lets name it b) is pushed from other tab page (lets name it a) and then back button pressed (on the app 's navbar), the location is still showing url of b page 3. when in any modal presented, the url cleared to empty anchor... when modal opened and browser reloaded, then app opens on main page, which not desired in pwa.
i noticed, that it happens as well for popovers.
all those issues applies to application that runs in a browser (i tested on chrome, but same behavior on all browsers).
in a form (reactive style), when you add a select or date field it does not get the colorizing of the validations.
so if you add required to the field it does add that but does not show the user by colorizing bottom border to proper valid or invalid color.
also, when you click into select or date item and then click out with out selecting anything it does not show "required" tag.
we are trying to handle a navguard calling a http request by an obersvable.
we have an get for current/user in an service, something like that: phofcode for our lazy loading page on ionic3 we will check if user is authenticated on ionviewcanenter, so this has to be async.
we are doing this: phofcode the http call is never started, so it looks like there is now subscription to observable.
it 's difficult to debug, but i think it could be a problem by combine `observables` with promises.
also the commented code with `topromise()` for observable does not work.
while ionic apps work extremely well in browser, on a device the story is a bit different.
everything just feels delayed (touch events), and applications does not feel native.
when an input field is focused, the screen scrolls up and then scrolls down every time i click on the field.
so, as a result keyboard hides the input.
before 2.3.0 (specifically, before phofurl js scrolling was used on uiwebview, but only for the virtual scroll component.
since 2.3.0, up to current master, js scrolling is enabled on every scroll view when using uiwebview.
this causes a lot of other functionality to malfunction (infinitescroll, pull to refresh, scrolltox(), etc.).
this is because they track scroll position using which gets its `scrolltop` from the scroll element.
but, when using js scrolling, its `scrolltop` is always zero, because scrolling is done using a transform.
when using android < 4.4 (tested on 4.2 and 4.3) the app freezes before firing platform onready.
click multiple times on a tab to refresh the tab (is this behavior new?
it didn 't do this before and i actually would like to turn it off).
the view for the tab goes black and broken from this point on.
when pushing to a currently
i have a page containing two components and use ngswitch to control the visibility of them.
if i switch between these two components very quickly, some undefined property error will be thrown to crash the app.
> cannot read property 'length ' of undefined the error is thrown by below method in swiper.ts.
i think the root cause is because the _slides property has been initialized.
my app before displaying the first page initializes the current user and a number of actions.
with the advent of deep links, the app stopped to wait for initialization and immediately opens page in url, in consequence of which, there are different kinds of errors.
i like implementation lazy loading pages, but i don 't like current implementation deep linking.
how to disable deep linking preserving lazy loading?
or how to make application first initialized, and only then passed on a deep link?
i have built a custom directive that limits the number of characters in an ion-input which uses the keypress event.
it allows more than the specified number of characters in the input field.
this directive works on web, on android version 4.2.2 but does not work on android 5.1.1 and android 7.
trying to swipe back a "heavy" page, the swipe is choppy, while trying to swipe back an empty page, the swipe back is silky smooth
(this is ios) when long clicking anywhere in the page, it opens a text marker and shows it at the top, while marking no text.
either mark the text, or don 't show a window
in some situations, some parts of the view are just not rendered and then rendered after a second or 2. this happens on ios (i think only) and occurs a lot while scrolling.
(even in production build, on ios 10, on iphone 6s)
the sidemenu scroll on ionic 3 beta work fine if run on my local browser but on my phone ( android and ios) the scroll not work i try to slide up and down and don 't work and don 't see the others elements.
ionic 2.3 the scroll work fine ionic 2 3 phofimage ionic 3 scroll not 3 phofimage
when building an app for windows 10, noticeable performance degrade was observed.
when running the app built for windows 10, or using ms edge browser, the performance when clicking on items, radiobutton much slower than using chrome or opera (in my example, i was using opera).
it takes more than one second delay for the click event to be registered to the component
using google maps cordova (native) + popover, the click on backdrop does not dismiss the popover (the map is the background)
when the `locationstrategy` is set in the `config` to `path` it 's impossible to access the page when refreshing.
for example: navigating from " phofurl to " phofurl works, but after refreshing in my-page i get the following error: `cannot get /new-deck`
when clicking one of the days/months/years the clicked item not being selected.
when using android < 4.4 (tested on 4.2 and 4.3) the app freezes before firing platform onready.
a number sign (#) is added inside the url when using deeplinker phofhyperlink .
this sign shouldn 't be in url, and make it harder for search engines to index the current page.
example of url: ` phofurl
when creating a custom error handler `{provide: errorhandler, useclass: myerrorhandler}` running the app in dev or in emulator has no problems.
but when building with `--prod` and running on device, i saw the app splash screen and then white screen.
after looking at the `logcat` i saw: `uncaught error: no errorhandler.
is platform module (browsermodule) included?` this line just before the device ready event.
when using `oninputchange` to modify input programmatically, cursor is not moving when using android virtual keyboard on mobile like when using keyboard on browser, emulator or even chrome remote debugging
when you run any `ionic` cli command on an ionic project, it will remove newlines from the end of `config.xml`.
many text editors automatically append the newline by default.
the newline is also part of the definition of a line on posix systems phofhyperlink .
when we use infinite-scroll on bottom and on top (since 2.3.0), we load and load and load data over scroll.
if we scroll a very lot amount of data, screen start to be slow.
selecting input forces whole app to scroll up and down and sometimes keyboard overlays the sleected input field.
this happes to me on all ios devices with 10.3 and as i saw on ionic forum also in android.
i didn 't try it on minor ios versions.
<ion-list <ion-item> <ion-input [(ngmodel)]="value" </ion-item> <ion-item> <ion-input [(ngmodel)]="value2" </ion-item> <ion-list>
when you switch quickly between two pages which have a few slides inside an exception is thrown and the whole app needs to be restarted.
the 'cancel ' and 'ok ' buttons for ion-select is hidden when the orientation in phone is changed to landscape mode.
this happens if there are more than 4 items in the list.
so far all the components i 've tried (slides, pickers, side menu, etc) do not work with mouse scroll.
you must click and drag to get the desired behavior.
windows - hardware back button stops working after clicking it once while on root pages (exists/suspends)
on a tabs page, if you click multiple times on the same tab-button (quickly) the page breaks.
a dismiss transition is started and then a blank screen is shown.
unfortunately the console logs no errors.
* ion-cards in ion-header that are dynamically added (in the plunker example after 2 seconds) do not refresh the view and instead overlap the ion-content.
* also if they are dynamically removed they will have header overlap.
when editing css in the chrome inspector, cpu goes to 100% and makes the inspector unresponsive.
might be caused by the huge amount of css lines (over 64.000) in main.css when running with `ionic serve`: image phofimage as far as i remember this wasn 't a problem in the betas ' of ionic2
i have to run ionic serve each time to see how the app looks like in the browser after adding codes.
even though ionic serve works" generate url and browser", it also throw some errors when i refresh the page, it shows that
i 'm using a loading widget with text in the content value.
when i use chrome devtools network throttling it works as expected, until i select grprs, and then the widget works, but with no text, just a circling icon.
you can see space for the text, but it doesn 't show up.
when using animation on transition, animation starts from center of the screen when using
the problem is, that there are only scroll events emitted, when the user touches the screen and doesn 't release the finger while scrolling.
if the user releases finger and lets content scroll, then content scrolls as expected, but there are just events emitted, when user scrolls while holding finger on screen.
after releasing finger, there aren 't any events emitted as on android or computer.
there 's just one last event emitted, when scrolling stops.
and because of this, it 's impossible to have a smooth transition of css properties, that should change based on scroll position of content (done with javascript).
after assembling and running the application in production mode on the device, an error is thrown about not finding a provider.
in the development mode, there is no such problem.
all pages of the application i switched to lazy loading mode.
all components and pipes have their own module, which is connected as necessary to page modules.
application providers are imported only to main module.
<img width="250" 15 51 24" src=" phofurl
ion-img position top is calculated based on the position relative to the viewport instead of the scrollable container.
if after loading the list data content is scrolled programmatically, lazy loading doesn 't work anymore, because values are wrong.
(i have a custom component that let 's me load/replace list items of content component when scrolling to beginning or end of a list, to be able to paginate data (a variation of infinite scroll that works in two directions).
after loading second batch list items i scroll down programmatically.
now lazy loading images doesn 't work anymore.
the reason is calculation an image currently being inside viewport uses img top value relative viewport and not relative scrollable container, as it should be.)
when using navcontroller.setroot() to switch to a page that has a menu on the same side as the current page, the new menu will disable itself.
the reason for that seem to be that the navcontroller starts a transition for both pages, which causes new page to attach dom while old page is still active.
this causes new menu disable itself because menu.ts checks explicitly for other active menus on same side in ngoninit().
i am getting an error when i run ionic serve in the terminal
setting the model on `ionviewdidload` (or constructor) should bind the control to the value.
it does so for some cases, but not all.
the current behavior has started after upgrading my ionic app from 2.0.1 to 2.2.0. so, this issue can be considered as a breaking change.
in my app, i have 2 tabs which have their own menus.
i have applied the same pattern suggested in github.
shortly, when i move from tab1 to tab2 and press the menu icon in tab2, there is no response in tab2!
if you press the same icon second time, it works properly and the menu appears in tab2.
after that point, it keeps working properly tab2.
however, if you move to tab1, same strange behavior is applied to tab1.
when you click twice, it starts working properly again.
of course, loop goes on if you move tab2 and press menu icon again.
i checked tab1 when first pressed menu icon tab2.
realised that first button press always opens previous tab.
moreover, this happens despite is disabled that particular tab.
in many components having `(click)` set for them, or just regular activity, a click on the padding of those elements triggers the click animation (ios grey something, android ripple effect), but does not trigger the event set.
this is frustrating as it is a horrible ux, for the click effect to show, but click to not register.
*no, `tappable` does not fix it.
when input focus, screen will slide up to prevent the keyboard from overlapping input (left image) and will bounce screen to same position itself (center image).
if type text with keyboard, screen will slide up to prevent the keyboard from overlapping input again (right image).
i found it in ios 10.3 phofimage
when presenting an action sheet that includes a subtitle, that subtitle gets displayed with no styles applied to it.
currently only "pages" can be lazily loaded, and each page that is lazily loaded requires it 's own module.
this is really ugly, and seems to dictate that we must use a folder-by-type app structure, which completely goes against how angular is supposed to be used.
any attempt to lazily load a true module with multiple components and services is met with errors.
trying to lazily load two components that share a module results in: `page-two.component.ts has a @ionicpage decorator, but it does not have corresponding "ngmodule"`, and trying push different component from lazy loaded module onto the nav stack results in `error: no component factory found for secondpagecomponent.
when using 2 ion-tabs on a page (with them having differing heights), the margin calculation for ion-content is incorrect.
first i report most probably a bug, i won 't say it 's one but i really i really spent hours to be sure followed correctly the upgrade guides and examples.
when set the root page, push, setroot, modal.create a page with her string value (like instead of nav.push(loginpage)) always end up facing following error: error typeerror: undefined is not a function at array.map (native) at webpackasynccontext ( phofurl at loadandcompile ( phofurl at ngmoduleloader.load ( phofurl moduleloader.load ( phofurl getcomponent converttoview navcontrollerbase.push nav.ngafterviewinit callproviderlifecycles checkandupdateview
infinitivie scroll doesn 't work on ios.
when a tab that 's already been initialized (clicked) is selected again programmatically with tabs::select() the tab content is rendered but the tab button itself is not active until some other action repaints the view.
note that if switching to a tab for the first time this works as it should.
not rendering a simple list.
(just post titles without any conditionals or complex logic).
zoomed slides cannot be panned currently.
followed the steps to upgrade to v3.
pushing a page with nav.push produces the following error phofcode
when a chip contains a button with an icon, it is rendered off to the left of the button area in ios 9 wkwebview and safari.
the icon is correctly centered in ios 10 and safari on macos.
screenshot (check the close icons in the chips under "delete chips"): image1 phofimage
after creating a new project via `ionic start <app name> --v2`, and then `cd <app name>`, running `ionic serve` don 't start the server, nor open the browser, and any tries to access directly from the browser `localhost:8100` are unsuccessful.
after running `ionic serve`, the only output is: phofcode
using the datetime component and passing to the minutesvalues property a string of comma separated numbers or an array of numbers, i can 't choose from them.
it shows all the minutes.
i have an observable in my `accountservice` called `isauthenticated$`.
the sidemenu contains options only available when the user is logged in.
currently it is only possible to add a boolean on the when: `<ion-split-pane | async">` however this results in showing the sidemenu even when the user is on a small screen.
`<ion-split-pane when="lg">` also works but then i miss authenticated check.
i am trying to port my app to ionic3 using these instructions phofhyperlink .
but i am getting the following error when i push to a lazy loaded page: `error: cannot find module i tried with multiple apps (my own, conference-app(lazy-load branch), blank app) but always get the same error.
think is auto generated by ionic when trying to find out which module load when call here is the full error: phofcode `webpackasynccontext()` is throwing the error, because it can 't find ` in map.
it seems like path module is missing slashes.
if it would include slashes it probably would find a match in map.
when creating a new ionic 2 project with ionic start myapp --v2 and starting it with ionic serve, the following messages appear: phofcode but no browser is opened, and no server is listening on port 8100.
after upgrading to latest ionic version the build not work and freeze in first step
when adding an event binding for `ionscroll` on `ion-content` it is never fired.
scrolltobottom on content not work anymore on ios, and works fine in brower & android.
i seems to be a regression.
it 's failed only in version 2.3.0 and works fine on 2.2.0
the click event on a button or non button element, has a lag nearly a second long before the "click=()" event is executed.
if i use "tap=()", the event registration is nearly instantaneous.
in ios mode, when transitioning from one page to another, especially if you are swiping and can do it slowly, some icons in the navbar do not transition, rather they just get cut-off by the page that is transitioning.
when the event emitter is fired, the subscribe recibes that value.
and the new value is storing in the local variable, but view shows previous one until some other event happens, like a dorefresh, doinfinite, or touching tab-bar, etc...
"white screen of death" from ionic blank template --v2 on mac emulator os x el capitan
when i add more than fourteen named colors in variables.scss file and create a production build with --prod switch (ionic run android --prod), all screens get blank after splash screen.
sometimes the position also matters (adding the new named colors at the end of list or just under "primary" named color).
when i do navctl.push(page), the next page opens up with a statusbar that has a white background and all content is pushed down althought i have <img width="335" alt="screen shot at 3 57 12 pm" src=" phofurl
ionic2 has a very obvious problem is that the app has a long time whitescreen, this is compared with the ionic1, or very obvious, hoping to improve.
of course,ionic2 has a better performance than ionic1 on view change the use of aot compiled after the package is indeed better than jit, but still whitescreen is obvious.
after 2.3.0 release, slides swipe to slide not working if there 's slides behind the modal i mean if there 's slide in the page and there 's a modal open from that page and has slides but actually after some testing i figured that any two slides together the issue will appear but the case of slide in modal and slide in page behind it appear after #2.3.0 and it was working before
with current desktop chrome including up to the latest canary build, ionic tabs tabshighlight = true will render a highlight bar under/over a tab button and this position is incorrect.
the highlight bar extends further to the right than expected, partially underneath the next tab.
i have a service which exports an interface named post, and it is imported in several other files.
when i run `ionic build android --prod --release` i get the error `rollup failed: 'post ' is not exported by even though it is exported.
this ends the build process.
a user hits the app and on first launch is visited by a welcomepage phofcode after successful login, i set the tabspage as the root phofcode a user now hits the hardware back button on android and goes back to `welcomepage`
having a normal grid (one row, one col - test), its padding is off the charts, even when i see it is just 5px.
image phofimage i have many grids usages, and it happened only in 2 of them..
clear attribute only works when button use the directive ion-button together
datetime picker opens with wrong values when both of these conditions are met: - model has time value between '00:00 ' and '00:59 ' (e.g.
'00:27 ', '00:27z ', - picker format is an 12-hour format (e.g.
'h:mm a ', 'h:mm a ', 'yyyy-mm-dd h:mm a ') _example:_ when data bound to ngmodel is '00:27 ' and picker format is 'h:mm a ', picker opens as '1:27 am '
version 2.2.0 of ionic-angular was working just fine with data coming from observable source and async pipe.
updating to ionic-angular 2.3.0 makes the same virtual scroll to not render at all
menu even side = right in desktop goes to left it was working fine in v2.2
after upgrading to version 2.3.0, when i click on a field, the keyboard hides the field instead of scrolling the page as it was before.
after the new change of moving 'ionic-native ' to this plugin doesn 't work or maybe i am missing something here ( i was using the previous version with no problems ) when i try to execute this line on runtime let contact: contact = this.contacts.create(); i get this error, that basically, saids can 't call create of undefined.
if you use angular 2 formarray with ionic inputs to interpolate date into the value attribute of an ionic input or ion-textarea it will not work and will make the value undefined.
i updated my project to 2.3 and left my virtual-scroll implementation the same.
i have see my list is populated and i can see the list being passed to virtual scroll.
but virtual scroll doesnt render each item in the list.
when using ngfor to create ion-slide and load the array from a service async, the slides component doesn 't work properly: * loop from first slide to last slide doesn 't work anymore.
* loop from last slide to first slide jump to the second instead.
when going from last slide to first slide (loop allowed) and having a button on the first slide, clicking the button on the first slide does not trigger (click) handler
when going from first slide to last slide, the pagination bullet of the last slide doesn 't highlight.
menu items in splitpane aren 't showing
white space if use virtual scroll between items list image phofimage
we have a dashboard with 3 components (move, water, temp&hum) which are the same components <sensor> with some little different content sensor-component: phofcode in the dashboard we load this 3 components doing this: phofcode as you can see i use
until now ionic is following the style guides for mobile menus for mobile apps and this was good.
now you with splitpane and others i think it 's time to introduce also something like a sub menu.
introducing a sub menu we have a better way to have a menu for our desktop apps, which is the next step for ionic.
the toggle button is able to enter a buggy state which can be demonstrated by making a button that has a disabled attribute linked to the state of the toggle.
clicking in a small limited area around the toggle causes the toggle to enter state which happens to inverse synchronization with button.
the bug has been observed in these emulators: - iphone se on ios 10.2 - galaxy nexus on android 7.0. and on these devices: - iphone 6 plus on 10.2.1 - samsung galaxy s5 android 6.0.1. inverse on-off behavior phofimage
some fixed values are selectable.
when i create and present an alert, it returns a promise that i guess resolves to true if the alert is correctly displayed
currently, search is aligned left: image phofimage when focusing on it, there is no effect, except for input focus.
also, search icon looks a tiny bit off when it has text, it shows an `x` button: image phofimage
ionic users don 't know when next releases are coming out.
knowing such thing, may help with their app release cycle.
also, if ionic releases after angular does, it would always be nice to upgrade and test so the new application release will be stable with the latest version.
native keyboard in ios does not display word suggestions even though ion-input attribute autocomplete is set to true / on.
everything works as expected on android devices though.
i 'm building video app using ionic2.
everything goes fine when i play video without fullscreen mode.
if i switch to fullscreen mode then all screen is totally in black.
give the following component / view hierarchy: phofcode `c` appears blank.
forcing a `tick()` allows the view to show, but no change detection takes place.
inspecting ngzone reveals `c` is not in the zone.
in a virtual scroll list, if a list item changes its visual appearence due to a users interaction (button click, some property binding on the item), that change is reflected only after some scrolling of the list.
i have defined an animation which trigger when i enter and dismiss the modal.
phofcode the animation works perfectly when i enter in the modal, but it doesnt work when i dismiss the modal.
no animations happens when dismiss it ( `transition(* => void,)` ).
demonstrates modal with slides and ion-textarea disappearing when focused.
when having a content with a background color, when doing overflow scroll on ios (when scrolled to top, drag down) the background is white.
versions included with 2.2.0 are app-scripts 1.1.3, and ionic-native 2.2.6
when running the app on a device of ios 9, there are tons of weird ui bugs, then i notice there is a red error printed in console, when i inspect using safari on mac: phofcode however, the error is gone when i switch to an ios 10 device, everything works as expected, no ui bugs anymore.
when app has considerable js code and one tries to type fast.
this is what is happening: textarea-slow phofimage
when navigate back from a page to tab the ionviewwillenter of the tab container is not called
when scanning via zbar is initiated, the application crash without any error message, regardless sqlite connection to database is open or not.
when deploying my app as pwa and i run google chrome 's lighthouse plugin to audit my app it throws an error
right now, we have a button which opens a component which has a toggle element, and the tap event from the first page carries through to the second page for some reason.
i made a short video to demonstrate: page click bug.mov.zip phofhyperlink
if you try to rerender "ion-slides" within 300ms, it will crash with following error: phofcode
clicking/tapping on textarea toggles focus and keyboard.
when build with phofcode disappear tabs and the item inside sidemenu not translate put the letter "t" for al item.
when i drag from slide 1 to slide 2, i have an event to capture slide changed successfully from slide 1 to 2. but i couldn 't able to find an event capture changed is not completed from 1 2(fall back on slide1)
shows only day name as number ( from 1 to 31).
the screen flickers on ios devices with several actions (screen transitions mostly).
when navigating to another screen with the push animation, the new page flashes full screen before entering the screen with the push animation.
when selecting an ion-select appears flickering.
when selecting a popover appears, it appears flickering.
when scrolling through a list of ion-range items with buttons at min and max, images flicker.
the flickering already occurs in a fresh installed application ionic2-flickering phofimage ionic2-flickering icons 2 phofimage
when an error occurs in one of the navigation lifecycle events like `ionviewdidenter` it doesn 't bubble up to the ionicerrorhandler.
ion-sliding-item can be slided open only by a touch gesture and not programmatically.
trying to use ion grid with ion items to create hortizonal scroll of ion items
two days ago, i built an `.apk` with this exact command, as copied from my ~/.bash_history: `ionic package build android --prod --profile dev_profile --release`.
the `.apk` was 6.6 mb big, took 20 seconds, and was booting up in 6 seconds.
however, today, using the same exact command, using the same exact commit on git (did a git checkout to the successful build).
the `.apk` was 8.8 mb, took 20 seconds, and boot time at 16 seconds.
i tried debugging this to see if somehow my `--prod` flag wasn 't working.
so i ran another build like so, without the flag: `ionic package build android --profile dev_profile --release`.
this yielded a build time of 40 seconds (expected), and file was, once again 8.8 mb with a slow boot time.
so i can conclude that `--prod` is being noted by change in time, but for some reason, aot compiling and minifaction is not happening.
so no change in boot time, no change in file size.
only difference can think of `/platform` directory which gitignored.
and `/node_modules`, which did a fresh `npm install`.
had co-worker do same thing with same repo + command, adding `--prod` does not seem to change file size at all other than taking 20 seconds faster to there 's no difference.
datetime input that mimicks `<input type="datetime-local">` (on ios - see image) is currently not available (or undocumented).
docs state that datetime is similar to this input type, but the attached input method is not available.
highly useable ux for inputting near future events eg.
"this friday at 9:45" or "tomorrow at 9:45" - without having to know precise dates (or having to double-check) etc.
as that information is given in the input.
year does become somewhat implicit but given in the reference design(input type="datetime-local").
have used this input format a lot with great success and no issues.
one can resort to native datetime pickers, but that leads the usual variety of issues (testing, android fragmentation, native changes/bugs etc.
in ion tabs i have a static tab at the front, then a variable number of dynamic tabs using ngfor and then one final static tab.
doing this at the moment causes the dynamic tabs to appear after the tab that should be at end
having a modal with `ion-content`, activated overflow-scroll and deep nested divs inside causes that you cannot scroll anymore at a certain level of nesting.
this is only on android.
on ios, it works as expected.
template parse errors: parser error: unexpected token : at column 1 in [search] in homepage@.
following the instructions of the apppreferences native plugin ends in an error when using `cordova serve`: phofcode error message: phofcode
when long tapping on an ion-textarea using an android device, the keyboard disappears instead of showing the standard android overlay for pasting content.
i found a workaround by doing phofcode , knowing that this probably breaks something else.
use 12-hour time with a am/pm column, and min/max time, e.g.
`<ion-datetime displayformat="hh:mm a" min="01:20" hours/minutes columns are not shown.
(real device print - iphone 6s) _this cannot be reproduced on simulator or browser_ spinner is not aligned when there is a long text - preview phofhyperlink
when android talkback is enabled and the user selects an input or ion-input, the keyboard will sporadically close and/or ignore user typed letters.
after creating my icons using `ionic resource --splash` and `ionic resource --icon` the cli generates the pictures for splash and icons.
as described in this very old bug [ phofurl where i also add a comment, the pictures are only created for android and not for ios.
the other thing is, what 's about the favicon for browser?
have a look in `config.xml` after creating pictures with cli, i see this new entry `<icon i think this should be pictures which will be used instead of favicon, but this does not work.
when multiple slides are changed (substituted with other data) with loop enabled duplicated slides are not updated even on method call.
so loop ends up to be broken.
i am trying to move my code from pure html / css / flexbox to ion-grid.
but i don 't succeed to get the expected layout.
support request have been submitted on phofurl without any answer so i come here.
google maps doesn 't work inside a modal.
it doesn 't display it at all.
ion-infinite-scroll is not working in firefox.
everything is fine in chrome, but firefox won 't run the doinfinite($event) function.
if you take a look at the api page at phofurl with firefox, you can see what i am talking about.
nothing happens when scrolling down the list.
when i use the back button at the third navigation level the slide is not updated
after creating a project with tabs and adding menus to tabs that contain split panes, only the first tab with a split-pane containing a menu will display its menu.
the other tab has the menu hidden.
in the dom the menu is present but has display:none.
injecting menucontroller and doing a menuctrl.enable(true, "menuxyz") in tabs ionviewdidenter ensures menus are displayed on navigation.
this has to be present in both tabs, as enabling one disables other.
this commit introduced hardcoded value for the border radius of the img phofurl which makes circle images with content out of the circle to appear cut.
when an input is focused, the keyboard is shown.
if the keyboard is closed (by clicking on the back button for exemple), the field loses focus (there is no more blinking bar)
in ios works as expected.
in a fresh install, when the sidemenu is longer than the height of the device, the sidemenu closes itself when dragging.
it won 't happen if view is itself longer too, and after multiple attempts of dragging.
neither happens if drag is done from title bar.
everything runs in the console, but white screen on app launch.
when i try to call plugins (facebook plugin or camera plugin) when it tries to execute the plugin command it just wait to execute the command but never executes unless the app is minimized.
for example, the facebook plugin when doing it just waits as it executes command but never executes unless you minimize app then will execute and get information from call.
the reordering functionality built directly into <ion-list> via <ion-reorder-button> is not working properly on my android phone.
when i press and hold the reorder button, then move up or down, it scrolls the whole screen rather than the individual item.
thus, you can 't actually reorder the item.
after doing `nav.push`, a new page opens, with a button saying "back" image phofimage image phofimage also, on swipe-back, the effect is overlapping components, and does not feel like a native transition.
my app takes 65 seconds to boot (i.e it shows the splash screen for 65 seconds then shows the main screen).
i tested this behavior on a real iphone, am i see the same problem like see on my local ionic lab image phofimage image phofimage
using slides, when sliding to the last slide (where there is only 2 slides) attempting to slide right again, causes the didchange event to fire again, and with the activeindex returning 1 greater than the actual max index.
when run the app i see a blank page
when content is < screen work, when content is > screen doesn 't work
when used dynamic load component in angular using componentfactoryresolver + viewcontainerref the content not render if be inside of ion-item-options and don 't show any error, if put outside in a div for example the component is sees ok
i have an ionic2 app with side menu and multiple pages.
one of this pages have a list with virtual scroll.
in a ios real device, when i 'm scrolling in this page, and only in this page, i can 't open side menu while the scrolling is not finished and the page isn 't immobile.
hi, i have a problem with inappbrowser plugin for ios.
i open google maps app with a location and i 'm trying to show the toolbar with a button to can close the new windows and come back to the application, but it doesn 't work, it opens the google maps app but without any toolbar/button.
currently i 'm opening new window using: let browser = new '_system ',
keyboard displays a white rectangle above when visible.
which is probably meant to pad the keyboard height and should be at the very bottom.
enhance the sass feature to support many helper api already available.
on the toggle control ( phofurl when you tap the `ion-label` in the `ion-item`, the `ion-toggle` does not activate toggle and switch states.
this should work exactly as per checkbox control ( phofurl when clicking/tapping on `ion-label`.
on android, the datetime control ( phofurl and the select control ( phofurl that shows up can only be dismissed by tapping outside of the component or pressing the cancel or done buttons.
line camp not working, ionic removes attribute from web inspector.
`ion-slides` stops autoplaying after popping.
create a new project using ionic start.
run `ionic emulate|run android -l -c -s` edit page save android emulator reloads app, however there are no console logs.
if i connect ddms and run logcat i can see the log statements appearing.
when use navpop, navctrl.pop() or viewctrl.dismiss() on modal page don 't fire ionviewdidenter in previous page.
native back button shown on window even thought nothing is on the stack
the app in the background (because you can go check an other app for instance) will restart on resume.
(this is working on android).
ionic cli needs cordova to be installed globally to work.
not very convenient when you work on many projects with each project working with its own version of cordova.
for now i use nvm to have a node version per project and so both cordova and ionic globally installed.
but it is heavy to maintain and it can't be the solution when you need setup continuous integration.
no support for server-side rendering.
the icons on buttons/ion-items in an ion-list in a ion-menu do not have correct line height set and therefore are not completely visible.
in safari on ios, when a user pinch zooms on a map the entire window zooms, and the event is never registered by mapbox gl js.
in ionic v1, this was fixed by setting the attribute `data-tap-disabled` on `ion-content`, but that attribute does not exist in ionic v2.
using a popover as a navigation menu, each button would run the following basic code: => { });` if i did it this way, then the settings page would have the back button as expected, and would properly navigate back to the page that popover was opened on and popover would be dismissed.
doing it with dismiss first cause no back button to appear and make settings appear as root.
i added a nav push into settings page.
when pushing new page, new page have back button allowing me to go to settings.
upon returning settings was gone and settings was treated like a root page.
no way to close keyboard on iphone when using ion-searchbar
when i go back to the app after calling other apps (camera, gallery, facebook, google plus ..) on ios, there is a problem where the top statusbar overlaps.
refresher components are visible ontop of the content on pull down.
the arrow points to the left !
using `detail-push` or `<a ion-item>` item arrows are hidden with ionic 2.1.0-nightly and ng2.4.
swipe the slides right-to-left until the first slide wraps around from the right side.
it won 't respond to clicks/taps.
the issue also occurs swiping the other way, and sometimes with slides in between.
the ion-footer of sub-pages (accessed thru navcontroller.push) seems to disappear, when going back to the previous page, only once the view did effectively leave.
if you apply a background-color to the ion-footer, that lead to a weird effect, where, after the click on back button, previous page is displayed and one second later footer blink while disappearing.
_on ios:_ erratic behavior of keyboard show/hide when navigating forms.
the keyboard only stays up when tapping (or scrolling) on an actual input field, resulting in a completely unacceptable user experience.
it 's virtually impossible to properly fill out and navigate/scroll a longer form.
adding fullscreen="true" to ion-content causes the content to interfere with tabbar click events.
when scrolling the content and then tapping a tab icon while the content is still moving, the scrolling halts, but tab does not switch.
this can cause for frustrating experience, forcing users to tap a tab icon more than once.
i init two items on a page, e.x.
: phofcode there are two diffrent ion-datetimes with different mix and max params.
but i always see datetime items with the same params (min and max)
with `<ion-row wrap>` you can have the rows automatically wrap based on <ion-col width-xx> where xx + yy=100, but if you want one just one column on a single row, there is no width-100.
this would make layouts very easy without having to override and manipulate the css and/or adding new rows to the grid layout.
when i make a change to an attribute of an element in a template (.html file of a page) using live reloading, the app refreshes and the live reloading is triggered, but when i check the updated page template in the app, changes are not reflected, almost as if attributes of elements of template are being cached.
note that if other aspects template like structure or added/removed elements do work correctly, it 's only attribute changes that aren 't being reflected with live reloading.
if i terminate "ionic serve" process and run it again, then is now updated correctly with attribute changes.
this started happening after i upgraded to 2.0.1 release from 2.0.0 version.
just updated to 2.1.0 to check if bug was fixed but it 's not, it 's still hapenning.
when there are multiple `ion-slides` on a page, over-swiping (bounce) one slider will bug out the other sliders.
they 'll start swiping too and then turn unresponsive.
this seems to be desktop only (maybe touch vs click events)
`ion-slides` removed the `options` input in rc-5 without exposing alternative attributes for `lazyloading`, `lazyloadinginprevnext` and `grabcursor`
ion-slides removed the `options` input in rc-5 without exposing an alternative output for the `oninit` event of the underlying swiperjs instance, this is important to have, e.g.
in some layout cases the sizes might be off, because it is rendering before layouting/sizing hasn 't finished.
this option would give us opportunity to hide it until sizes has been properly set.
the `ion-slides` component allows only integer values for `slidesperview`, and will turn any float values into full ints.
pre-rc5 with the now deprecated `options` input this worked perfectly fine.
navigating to phofurl and then clicking glossary opens up the phofurl which seems to be invalid.
the page looks like a development url and was probably accidentally injected within the documentation.
when you create and dismiss two loading components one after another, the second one is never dismissed, no matter if you use `.dismiss()` or `.dismissall()`
using latest ionic-angular nightly (after update of angular version to 2.4.8) using ion-refresher components the page breaks with the error: phofcode
the problem only shows on a windows phone ( ms lumia 950 tested ) when pushing or popping a new page, the default page transition animation is flickering.
all elements on the page ( header, content etc ) are jumping and switching between 100% transparent and 100% visible with no state in between during the transition time.
when i make a change to an attribute of an element in a template (.html file of a page) using live reloading, the app refreshes and the live reloading is triggered, but when i check the updated page template in the app, changes are not reflected, almost as if attributes of elements of template are being cached.
note that if other aspects template like structure or added/removed elements do work correctly, it 's only attribute changes that aren 't being reflected with live reloading.
if i terminate "ionic serve" process and run it again, then is now updated correctly with attribute changes.
this started happening after i upgraded to 2.0.1 release from 2.0.0 version.
just updated to 2.1.0 to check if bug was fixed but it 's not, it 's still hapenning.
i wrote a small test program that creates 55 toasts and displays them.
it crashes around the 50th toast on my ipad air.
i invoke a popover from a parent element that is not that nav bar.
from a card for example.
when doing so the popover aligns itself over the icon that invoked it and the arrow does not display but is actually in the middle of page ( and yes event is being passed in properly )
we bundle our app with `ionic build browser --prod` and serve it with an jetty webserver.
after that we open the app from different devices with the browser and think there could be a problem on recognize the right platform.
ionviewcanenter executed only when tab is first activated, but not later.
as i have to deal with large lists, i heavily rely on virtual scroll lists.
to group my items, i use a custom header function.
so my code is like template: phofcode and my corresponding typescript: phofcode now my problem is, that i cannot access class properties or injected services within the header function "dataheaderfn": `this.someproperty` and `this.myservice` are both undefined within the function scope.
when debugging the header function with chrome, see that "`this`" within the function scope is of type "`componentref_`" and has a property "`_component`", which finally refers to component and its properties/services.
yet simply saying doesn 't compile, so tried to do a type assertion for "this": phofcode but compiler now complains that > [ts] property '_component ' is private and only accessible within class 'componentref_<c> '.
so is it really impossible to gain access class properties a custom header function?
this once worked in previous framework version, so don 't know if its bug or feature request ;-)
when generating tabs with *ngfor with data from an observable the tabs element is invisible.
but when hovering the mouse the cursor changes and you can click tabs - then they become visible and their respective root pages load
the onscreen keyboard covers the input element that has focus when used within the grid component.
launching the app in android device with liveload and console output `ionic run android -lc` shows after a while this error: image phofimage our app is very very big with a lot of components and a lot of external angular and javascript libs.
it takes also a long time in production `(--prod)` or on `run android` or` emulate android` mode to load the app, more then 10 seonds.
i show your new amazing split pane and have some feature request to respect more the google style guides for material design.
in your case you have two panels, the left one and the right one and if the view is to small left panel will hide which you can show up with menu button.
now on epanded browser you have complete separate left and right panel, see screenshot there is line in header between menu map.
in case you build for specific platform i. e. for ios the build adds component styles for all platforms, there are plenty of unnecessary css rules.
ios 10.2 keyboard go button submits form even though submit button is disabled.
google maps hide when i call the show banner
currently it is not possible to format the output on the pin of the range knob.
a formatted output seems to be necessary in many cases.
on ios during swiping back, you can still scroll vertically.
ion-input caracters becomes invisible after typing second caracter in some ios devices (iphone 6 and iphone 7) , and once the input field lose the focus and the keyboard hides , the caracters becomes visible again
swipe gesture doesn't work with up and down directions, just work with left and right
when i add android platform, i have the following error: error: could not find gradle wrapper within android sdk.
might need to update your android sdk.
i get strange behavior when placing an `ion-range` inside a` ion-item`, hide almost all the elements inside
on floating input, the delay seems very long before the animation start on ios (like a clickable element without being a "button" / an "a" or tappable), even with tappable directive.
i did not try on android.
i 'm getting this problem too with ionic 2.1.0. it only happens with the device (so when plugins are working).
it only happens with push or pop of navctrl; it will never happen with loading or alert because i 've already added a .catch() to all of them.
from the original stacktrack it seems to happen inside the transistion code.
reference: - previous bug phofurl - phofurl
`ion-textarea` inside a `slide` goes out of the view when the keyboard is being opened
loading screen does not reappear for second time, unless reinitialized.
i have setup a plunker to reproduce the behavior i am experiencing.
ion-slides does not fire ionslidedidchange configured hanlder when user switch to a different tab.
`ngafterviewchecked` is triggered every second (+/- a few milliseconds) if `push` from `@ionic/cloud-angular` is injected into any constructor.
the current version of ionic uses angular 2.x which produces js bundles with larger size.
in samsung s3 ( 4.3 ) application is not starting.
its was stuck on splash screen.
not even start webview to inspect through chrome inspector.
its working fine in samsung s4(5.0), sony m2(5.0), ios.
but when in add crosswalk, it works fine.
but the problem is, adding crosswalk, increase the app size by 22mb.
is there any way to run ionic 2 project without adding crosswalk ?
or if i had to add crosswalk, which devices i have to add that.
text-center css utility doesn 't center the text.
when in development with ionic serve and using the default hash url strategy, i can configure a segment like this `segment: i can successfully navigate to this page and the url looks like this...` phofurl when i paste the url into a new browser tab, it comes up again.
i 'm so stoked about the simplicity of this "router".
when i change hash strategy to `{ locationstrategy: 'path ' }` and set `<base href = '/ '>` in my index.html file, everything works great when navigating in app.
however, can no longer reach page when paste ` phofurl url into another browser tab.
i 'm getting a 404. have not tested this outside my localhost environment.
when i set min and max date in datetime and i selected a future date, it is setted as mindate.
when i scroll to horizontal the right end, it will trigger the loadmore event.
i also reported this here.. but no replies phofurl i have a tab that i assign 2 different pages two depending on some user action, however if i dynamically change the root page of a tab and select it, it does select the right tab but the content is not refreshed with the new page, i have to physically click tab button again in order for it to update content.
it seems i need to force a "click" event of a switching tabs dynamically/changing their rootpage doesnt seem to do anything until physically click again
i try to use ngtemplateoutlet + templateref because it needed to pass a parameter to the content projection and phofcode does not provide, the problem is that the elements that are displayed within the content projection for some reason lose styles and are displayed incorrectly image phofimage
in ios 10.2, i am having an issue with my tabs when blurring a searchbar component.
when the keyboard slides down, the tabs suddenly appear in the middle of the screen for about and then drop back down to bottom.
the color of the buttons in a searchbar is always grey and is not configurable.
on overriding hardware back button , nav pop() inside is called multiple times.
i don 't think i am calling nav pop() more than once.
suppose a toast is created on tabs page 's tab, even with `dismissonpagechange` set to `true`, it will not detect when a user visits another tab.
this event is registered in the viewcontroller.didleave observable, but the toastcontroller doesn 't use it with `dismissonpagechange`.
i have an ion-content that contains a list that goes beyond the physical borders of the screen.
when looking at just this page, the scrolling works properly.
if i use this page in a tab page, the list no longer scrolls.
the slides component in ionic 2.0.0 final (and 2.0.1) does not allow for slides to have inner slides components; e.g.
a horizontal slides with inner vertical slides.
this can be achieved in 2.0.0-rc.4 - see: phofurl @brandyscarney you asked me to post this here, see phofurl
when using slides with pagination bullets, you can click on the bullets to switch to the corresponding slide.
the `paginationclickable` option is being ignored.
if i try to add `ion-refresher` to a custom component.
> parse error: no provider for content
in a fresh install of the ionic2-starter-sidemenu, the side menu opens if the icon/button is tapped, and similarly can be dismissed with a tap, but it cannot be dragged open or closed on swipe from the side.
the change detections doesn 't work after launching the app from a push notification.
when i type `ionic generate --list`, i get: image phofimage
using tabshideonsubpages works for all sub-pages except when using the cordova map.
the tabs will show on that page but are unusable.
the popup modal stay on the default mode of the application
using `<ion-range>` in windows uwp app, the slider can be dragged by mouse but cannot be dragged using touchscreen.
as described in the title, any button click fire twice.
ionic 2.0.1: the icons inside of ion-items/buttons are cuts
when trying to access from inside the app (any .ts file such as app.component.ts), i get the following error: `property 'serviceworker ' does not exist on type 'navigator '.`
in case of an error i want to select some text from the browser, however the selection of text is disabled.
screen shot at 10 25 08 phofimage
when i use angular $http.get on a resource which does not exist i 'm getting different error object on ios and on android.
on ios i got status code = -1, but on android i got status code = 404 (not found), as expected.
in the browser console there can be seen that ios it is doing a preflight request which fails.
on android there is no preflight request, just request given url.
when applying multiple filters to an attribute of an element, the second filter results in an error... [$parse:syntax] syntax error: token 'uppercase ' is an unexpected token at column 22 of the expression....
using this example below from your documention the slides instance will always be undefined and you will be getting an error saying "cannot set property 'freemode ' of undefined".
phofurl then in the source code (slides.js:777) i found that "slides" initiliazation is wrapped in the settimeout function: phofcode so i think it 's pretty clear now why the example in your documentation doesn 't work as expected.
it starts to work only if you wrap your code in settimeout function as well: phofcode but it 's not acceptable either.
calling .slideto method to jump to last slide works as expected with moving to last slide... but does not update the pager position
instead of popping a page the back buttons take me to the last url, usually closing the app.
also the android back button kills app when opening it in a mobile browser.
and closes app when opened as a pwa
<div <ion-label stacked class="control-label">{{ element.name }}</ion-label> <ion-textarea id="{{ element.slug }}" formcontrolname="{{ element.slug }}" </div> <ion-item>`
using a query parameter to specify platform forces mobile device mode which breaks click events in `md` mode .
with loadingcontroller currently been displayed, pressing the hardware back button takes you to the previous view with the loadingcontroller still been shown.
when using a component such as ion-slides with a large dataset.
memory usage becomes incredibly high.
the transition from side menu to the page in question is slow and the generated slides with ngfor are slow to respond.
a part of the ngfor is loading data in via a provider which parses a json file to fill the slides with info.
the json file itself is 500~kb in size.
on ios using large dataset, app crashes citing memory management issues.
on android there is no crashing but slow performance.
on osx built app and chrome served ionic app, we see beachballs and slow performance.
if i have a youtube video embedded on a page, navigating to that page will open the youtube app.
this happens when i use the app on my iphone (both when i compile to the native iphone version, or if i just view the browser version from an iphone).
the is undesirable because may have other content on page that want to view, but am prevented from doing so because youtube app immediately launches.
searchbar phofhyperlink component behaves weirdly on ios simulators - when clicked, it loses focus automatically and user cannot type in.
android application takes too long to load after splash screen.
when i use chrome inspect to view why its slow, i see that it loads a few items quickly and then there is a 10 second pause before loading anything else.
because `ion-tab` outputs anchor tags, 3d touch can be performed on the the tab buttons, triggers a white preview overlay like any other link in a safari web view.
there is no safari api or method to disable this behavior.
infinite scroll in ion-slide is not trigger when the view is scrolled to the bottom upon entering the view for the first time, however it will be triggered after navigating back from a view pushed from slide.
this only happens when its async data.
when using `[navpush]` inside a modal, the page it transitions to ignores the header bar for ios (tested in ionic lab, not native).
that is, the nested page 's header bar overlaps the native status bar.
when using the android version of serve, clicking through an app with click events leaves detached dom nodes for all of the elements that rippleactivator should be listening to.
just navigating between pages is enough to recreate the issue usually, but clicking on some of these elements creates it.
screen shot at 5 07 35 pm phofimage can confirm with our app that running ?ionicplatform=ios removed the detached nodes.
it 's possible *ngif exacerbates problem.
these nodes are building up in our app that is a kiosk and making it impossible for us to deploy our ionic 2 app.
we tried: phofcode but that did not seem to change rippleactivator from attaching events.
at this point, finding a way to disable activator would work in interim as leak is fixed.
the default button size is too small.
if you put the phofcode attribute, then it becomes huge.
if you put the phofcode attribute, it 's the same size as the default.
screen below, happens on first in browser `ionic serve` or each time when launching an app on android device.
does not happen after reload/refresh page in browser.
scroll freezes in ios wkwebview and safari.
importing `nav` from `ionic-angular`, injecting it into the constructor and trying to do = false;` does nothing to stop swipebackenabled.
components that are created by the virtualscroll, are running outside the angular zone.
cordova plugins not loaded when you close and open the app different times.
ionic deploy not injected and it 's always undefined.
this doesn 't appear on android debug but only on release.
if you change the contents of an ion-select multiple 's ngmodel to something that would still be considered valid, it does not update the ion-select; so if you have an array of numbers as the ngmodel and you push a number into it outside of the page 's constructor, option equivalent to it will not be checked.
after upgrade to ionic lib 2.0.1, i get following error at serve phofcode
push a page from a modal page with and page has a header without padding.
display under the native ios statusbar.
only on ios and ios simulator.
<img width="321" alt="naamloos" src=" phofurl
ionic seems to ignore the widget:packagename config params from cordova ( phofurl thereby, all platforms either have the same bundle it or the widget:id config param in config.xml needs to be changed in order to have different.
that is especially annoying when building for uwp since microsoft has a strange naming convention for their packages which is very uncommon for typical package names on the other platforms.
when using `ion-slides` with `direction="vertical"` breaks when screen orientation changes.
it 's fine without `direction="vertical"` option.
sometimes after selecting the option from the available radio buttons, the binding variable in the template is not updated in template.
i am using angular version 1.3.13.
i can 't remote debug app on ios device with safary.
i can see under develop my device a i connect to it but no logs or html elements are shown.
if i open a select with no ion-options and then click 'ok ', the bound model 's value becomes {}.
my goal is to do logic when user enter the app, and when he leaves.
when subscribing to: phofcode it works well on android, but doesn 't perform any action in a web browser (pwa), chrome.
i have added splash screens into my app, but its showing white screen instead of my splash image
i have a ionic application based off of the sidemenu template.
when i enter the same page again, (ie reselect it from the side menu), the ionviewdidenter fires before ionviewdidleave.
should these be other way around?
when the value in ion-datetime is invalid don 't show a line red (border-bottom).
since the pages on ionic 2 are always constructed (using navigator.setroot) i wondered why it keeps the html rendered.
i 'm using leaflet on the home page of my app.
if i use setroot to load the home page, leaflet constructor acuses element being already initialized.
as described in api phofhyperlink `itemsliding` has event `iondrag` which is fired when swipe happens.
the problem is that when i do object update inside the function which is bind to `iondrag` object doesn 't update its value in to the view.
only if you swipe until the `percent >= 1`.
if `percent <= 1` so the title doesn 't change.
currently, the `disabled: true` option on picker columns just makes the option invisible, but it 's still selectable.
in ios 10, every tap registered twice, causing various issues.
if you have a site with a ionic slider component and push a site with another ionic slider it causes buggy behavior and you cant control the new slider page, it also causes events (ionslidenextstart etc) to trigger on the previous slider even though its not on screen.
1. set `swipebackenabled` to true 2. intercept the `nav` in `ionviewcanleave` with a `promise` and an `alert` 3.
`resolve` the `promise` doesn 't close the current page
when opening a select it is impossible close it unless you click on the alert ok/cancel buttons.
the android build is working fine but when i tap hardware back it shows a blank white screen if i tap it again i.e., twice it goes to the previous screen perfectly.
i don 't have this problem with the back button inside the app.
everytime i use virtualscroll in the template, there 's a runtime error: no provider for content
on android, when you push a new view in the navigation stack (either through navctrl.push() or by presenting a modal), then on that view you use ionviewcanleave() to control if the view can be closed, then use the device back button to exit the view and ionviewcanleave() disallows exiting by returning false, a "exception: uncaught (in promise): false" error is thrown with following stack trace: phofcode
testing in desktop (the docs), i 'm seeing scroll bars in the alert ui when it 's not necessary: image phofimage
compilation error on a page is not outputted in case `ionviewcanenter` is utilized as it only returns true/false.
while the developer may be caught unawares and would try to fiddle around with promise in `ionviewcanenter` when the error would be somewhere else.
with voiceover turned on in ios if you tap the back button in the nav header it says "back arrow back".
i want to add clearinput attribute on my ion-inputs.
my ion-inputs have ngmodel attributes and some have keyup functions bind to them.
on ios, the clearinput icon shows up on focus but nothing happends when clicking it besides the loss of focus on the ion-input.
it does work on android.
there is no error whatsoever when formcontrolname doesn 't match name in formbuilder definition.
when placing ion label (which is a part of ion chip) inside ion item, the item remove all text.
i have implemented a solution in my app to use swipepable tabs by using a segment with a slider.
i had this working in the beta11 version.
ik have just migrated to 2.0.1 and it now has weird behavoir when inspecting in chrome on the various devices.
the app crashed when using the `this.slides.slideto(1, 0, false)` in `ngaftercontentinit()` and when i use = 1` then it goes to the second second element but it also triggers the events and that is what i not want.
when you enter a page that has tabs, all of them use data from a provider, which receive through "rootparams".
but the first tab never get 's the data.
if i change the order and put the 1st as 2nd, then one that now ocuppies 2nd place will get data (and also first one) but not first one (which was 2nd before).
what i mean by this is that i just changed order to see if it was an issue with code specific to page but that doesn 't seem to be issue.
i 'm using tab-slide-box package ( phofurl phofhyperlink ) in which i 'm generating tab name and slides dynamically using ng-repeat if i pass a tab attribute in tab-slide-box it is choosing the tab but not displaying the slide.
if you have a customized component and place it within the ion-navbar, the elements in your components seems cannot get the proper class to style.
like this: screen shot at 4 47 25 pm phofimage
if you pull down an ion-refresher a little bit (so that it doesn 't trigger).
if you release, it never goes back to state inactive (or it may, but an event with that state is not fired)
i 'm developing withe latest version of ionic2 and using chrome for debugging.
in some cases, *some typescript clases* (not all!)
are not displayed in chrome for debugging.
i also checked that they are not included in the "/buil/main.js" file.
i seems that the compilation process can 't find those clases unless they are
if i have a page consisting of an `ion-header` which contains an `ion-navbar` and an `ion-toolbar` with the toolbar having a `ion-searchbar` and an `*ngif` on it to toggle whether the searchbar is displaying or not, and `ion-conent`.
when i toggle the toolbar to on/off, the `ion-content` below it does not rerender/resize and this results in appearance of `ion-searchbar` hovering over `ion-content`.
better illustrated here: ion-searchbar bug phofimage if i have above rendered without `*ngif` (i.e.
where `ion-searchbar` is always displaying), then page is rendered as expected with `ion-content` appearing beneath `ion-navbar` `ion-toolbar`.
i have an app with fullscreen=true.
on android, when the keyboard open when editing text on any type of inputs (ion-input, ion-searchbar, ion-textarea, ...) statusbar and navbar are showing up.
the problem is that when the keyboard disappears, statusbar and navbar don 't.
they 're hiding top and bottom parts of the app.
i can 't set slidesperview to 2.33, however, before refactoring slides, it was working perfectly !
updating chip sass variables doesn 't make any changes
something is wrong with ionic build browser --prod.
it seems that angular "forgets" to update view.
i have implemented drag and drop using [style.transform] directive and it seems to skip the part when it promotes changes to dom.
using "ionic serve" is fine.
when running `gulp lint.sass` without having ruby and the `sass-lint` gem installed, i get a `fatal undefined`.
the issue is that the `scsslint.failreporter` in cannot handle the error message produced by `scsslint()`.
when dropping the piping into failreporter, i get following error: phofcode
customerdetaildeeppage ) to reach the customerdetaildeeppage and i press f5 to reload the page, the history of the customerdetaildeeppage isn 't created.
i don 't have any back button in my header bar.
furthemore i see tabs even if i set option `tabshideonsubpages` on `ion-tab`.
when using the 'dots ' spinner with ionicloading, the svg shows tiny 'lines ' right below or next to the last dot.
this only occurs on ios.
when opening a modal, the deeplinker behavior is overridden to be therefore, when the user refreshes the page, they are taken to the root page.
the generated main.css file is actually about 20k lines long.
after i 've digged a little into the builded main.css i saw, that when building for android-platform, the stylesheets for ios aswell as for wp are inserted.
this results into a big css file which needs to be parsed by the browser.
specialy old browsers and windows-phones have problems to parse big css files.
currently there is absolutely no sass variable to customize styles of ionic-slides component and her swipper-pagination.
in my page, in ionviewwillenter, i create an array of objects with data and a reference to a component.
then i use this array in my template to construct ion-tabs with ngfor.
when i navigate to a different page, then navigate back using navctrl.pop(), the tabs seem to get duplicated.
the first iteration of tabs doesn 't work anymore, only the second, "new ones" do.
it seems like the cached tabs don 't get removed or something.
however my array is correct.
a new set of tabs appears everytime the component gets navigated from navctrl.pop().
this doesn 't happen when navigating with navctrl.setroot()
since update to 2.0.0 our app still runs fine on android but on uwp and ios the app simply crashes on startup.
on windows phone we get (in vs2015 debug mode) script5022: exception was thrown at line 1, column 8373 in - javascript runtime error: 2 polyfills.js (1,8373) on ios (started via xcode, debugged via safari): exc_bas_access (code=1, address=....) in javascriptcore the start of the stack trace seems to be in
in my newsfeed, when i reach the end of the displayed items i 'm using ionic infinite scroll to load more.
now when i reach it it keeps loading more posts and apparently jumps doen when new ones are loaded.
in my app i am displaying a newsfeed and also offer to only see news from a certain group.
i recently noticed a delay of about .4 second when clicking the group label in order to switch to a group page and also when going back.
it seems to get worse if more posts are displayed on the navigated page.
from running the constructor of the news page right now ~800ms over 3000ms when i loaded more posts.
i also want note, that this does not happen on pc while using serve and i 'm using oneplus 2 for testing.
i 'd be happy provide additional info.
_edit: here is screencap of what mean phofurl
1. from a tabbed interface, go to a new page with 2. from mypage go to another new page with 3. from mypage2 go to another new page with 4. from mypage2 try to go back mypage with: i would expect be popped mypage, but instead it simply navigates back mypage3.
text in select component, alert component, datetime component and etc.. for buttons like "cancel", "done" hardcoded in class.
calling `getactiveindex()` on an `ion-slides` element when that element has a `[loop]` input property set to `true` returns a 1-based index (e.g.
1, 2, 3, 4, etc.)
- meaning the first element has an index of 1. it 's never 0. if the `[loop]` input property is set to `false`, then it 's 0-based.
it specifically only becomes 1-based when it 's set to `true`.
this only happens when the `[loop]` index is set to true.
otherwise, `getactiveindex()` returns a 0 based index (0, 1, 2, 3, etc.)
i 'm using tag `<ion-content padding class="page" when content fits screen size, i have no bounce as expected.
when content is bigger than screen size, so i have vertical scroll, cannot disable bounce.
already set phofcode in config.xml i have this bug on ios 8-9-10
i am using platform.exitapp() to exit the app on back button press.
the app goes into background and when i try to relaunch the app it takes very long time and ui also not proper.
when we are on large screen as tablet the tabs remain on the bottom of the view.
i have 4 tabs in my homepage.
assuming i 'm inside my userpage which is a tab in my homepage.
i run this: and the output is: homepage (although i 'm inside my userpage which is inside homepage).
using virtualscroll inside ion-card cause virtualscroll to render wrong items while scrolling.
some of items of virtualscroll visible area aren't rendered and also some of them which are not in visible area are rendered.
i 'm using a sliding side menu in one of my apps.
when i 'm opening the app with an android phone, the shadow below the `ion-header` doesn 't show while the menu is sliding out and is only displayed when menu is revealed completely.
upon launch image is not resized to fit the available view index 6 phofimage here it is on an android device galaxy s5 phofimage
the underlying _click fires first and sets checkbox._checked true or false regardless of (click) binding.
when an element has both a "click" and "press" event listener, it seems like both events are fired from a long press on ios.
on android, it seems the click event is fired from a short click and the press event is fired from a long press.
this latter functionality seems correct to me.
interestingly enough, on short click, ios does not fire the "press" event.
only on long press does ios fire both events.
i build my ionic 2 app with "ionic run android", which launches the app in my xiaomi mi5s.
i 'm using an android 5 apk, and the parse js sdk.
when i try to log in (which works perfectly in the navigator), it throws the error "typeerror: converting circular sturcture to json".
i 've never had this error before in navigator.
using ion tabs may decrease rendering dramaticlly since all pages are rendered together.
i 'm using 4 tabs: my world tab is really big page that uses different components and shows gifs, and the app works really slow when my world is rendered while im viewing any of my app pages inside my tabs.
it is not possible to set a meaningful aria label on a tab button.
if you set `<ion-tab [attr.aria-label]="some label">` then the label doesn 't get set on the button.
it looks like the aria label is currently pulled from the icon name of tab.
for the dark theme, ion-option label text color is #000 (black) and there is no sass variable to override it.
it is possible to override only selected item using which is not enough for the dark theme.
hi, i 'm running into issue on ios since ios 10.x update.
when i start the app everything works fine if i use wifi connection, every view is correctly loaded ad i can use it normally.
this does not happen if i use mobile connection, the app is not able to contact my server and database.
if try to login it fails and says "incorrect credentials" even if there are correct and if switch from wifi to mobile when i 'm running the app, the first thing to be load fails and all app become empty.
also, i try several times use mobile, killing app, it stucks on a white screen only way it again is uninstall install again.
tryed lots of possibly solutions none works.
the only thing can imagine is new csp but tried tons of string, without success
call `nav.setroot()` from app.module.ts, white screen of death, see gif.
i am using ionic 2 storage (not sqllite) for storing using credentials.
on uninstalling the app, storage is not cleaning up, so on installing the app again it picks up the user credential of previous user.
this is issue is coming only in signed apks.
tested on samsung on7 and lenova vibe models.
setup alertcontroller as per the documentation.
on button click, the handler is not passed a parameter of the inputs, in this case phofcode && phofcode , rather you receive an empty string, instead of the defined input params in alertctrl.
the dropdown icon for the ion-select is currently drawn through the use of css only.
when swapping between ion tabs on ios device there is a brief moment of oblivion
when using nested navigation stacks, the children nav stacks are not destroyed when their root does.
when adding *ngif="boolean" to `<ion-header>` or `<ion-content>`
onwilldismiss() not called in modal controller created by another modal
this is a feature request to update ion-datetime to work with ie 11 on windows 7, as this is one of the main issues stopping us from offering an adequate ie experience to our clients and users.
current behavior: ion-datetime renders with a single letter (w or t in my testing) instead of a date and doesn 't respond to any click events.
image phofimage i realize you don 't support internet explorer, but i 'm hoping you could add some unofficial ie 11 support for the datetime component given the trend of using ionic as a web framework, angular 2 's shim support for ie 9 - 11 ( phofurl and browser stats such as phofurl
in a phone in landscape mode, the select cancel/ok buttons are off the bottom of the screen and can 't be used.
i tried using css to reduce the size of scrolling list so buttons were on screen, but then list of options doesn 't scroll.
the same problem occurs in a web browser when you reduce height of window.
when focusing an `ion-input` * if * the view needs to scroll up, the placeholder and input jank (visual glitches).
the cursor also blinks various times in rapid succession until focus is complete.
* important: * this only happens on the device itself (since the keyboard appears) and cannot be reproduced in a desktop environment.
if we navigate quickly between pages that have a swiper in some cases the ngondestroy of the swiper breaks
my list is a nested object.
first loop: group of groups second loop: users of group i need virtualscroll because there may be many many users.
but it doesn 't work properly.
there are inconsistent white spaces between users as in this screenshot: screen shot at 11 27 07 phofimage
when clicking on menutoggle, during opening sidemenu clicking on a menu item will not work.
on a browser it 's acceptable.
but on ios it feels like the sidemenu is broken (delay of +-500ms).
popping up alert closes app/crashes with the image attached.
the error message is ios system alert.
cannot extend ionic 2 select component to use modal interface
i have multiple inputs in a page, and i focus them manually every time using the setfocus() method.
the problem is that when i do so, the page makes the correct scroll but when this scroll is finished it return to de no scroll position, is like something is cancelling the scroll.
i have read a lot of issues of ios keyboard and i still couldn 't find exactly what problem is.
in this gif shown current behavior.
at the moment (as far as i am aware) there is no option to "edit" an `ion-list`.
from ionic 1, there was a lovely feature where you could set a `show-delete` directive on an ion-list which displayed the `ion-delete-button` and wire that up to a function.
if you then spliced an item in the array the list was bound to, this showed a nice animation of item sliding out.
none of this appears to be present in ionic 2. imo delete button is less important since you can use an `ion-item-sliding` item with `ion-option-button` to produce similar behavior.
but removing item animation would be great if possible just give more native feel.
i am unable to utilise the "hardware" keyboard when deploying to the ios simulator which uses an `ion-input` (in this instance, the hardware is the macbook 's keyboard).
i gather this may well be related to `ionic-plugin-keyboard` plugin.
if i uncheck this so simulator is forced to use software keyboard, i can focus and type, but this is somewhat painstaking.
but when attempt set focus by clicking, focus is immediately lost and am unable type.
when using the nav guard "ionviewcanleave" the documentation phofhyperlink states that the catch is already handled by ionic for the back-button of ion-navbar.
however, it 's not done for android back-button (wich behave same way as ion-navbar back-button).
therefore, when we use back-button and nav(guard returns false, an error is thrown.
if i have 3 screens with nav bar and action buttons on top left corner.
screen 1 - nav bar has open screen 4 button screen 2 - nav bar back button screen 3 - nav bar back button if we tap the back button area of nav quickly on screen 3, 2 and 1. it unloads screen 3,2 and 1.
ion-icon text-outline doesn 't display on android emulators in chrome dev but it displays for ios
editing a field on android opens the virtual keybord and the screen is pushed up (to have the edit field just at the top of it).
if while editing i enable another portion of view (below edit field) and then call scrolltobottom(), view moves up too much, hiding edit field and newly enabled portion.
i have to manually scroll up to see again my view.
this behavior seems not to appear on ios.
data is nulled out in password fields on changing focus.
on ios, text input inside an `<iframe>` will sometimes fail to accept text input.
immediately after tapping on the text input for the first time typing will work as expected, but if the user tries to drag the cursor, then future input will no longer work until text field loses focus.
the same issue occurs if user selects all and deletes it; afterwards input field will no longer accept user types.
currently if you have a two ion-datetime inputs in one row in ion-grid clicking on any of those two inputs will always open the last one in the html.
i 'm using a virtualscroll to display items which can be filtered.
after the filter has returned an empty list the next attempt to render all items results in only 4 items to be rendered and added to the dom.
building with the --prod flag breaks inheritance.
pages extending a parent class that have an implementation of ngoninit/ngondestroy must have their own implementation of ngoninit/ngondestroy.
this is not the case with non-minified bundles as generated by ionic serve, ionic run or ionic build without the --prod flag.
running my app, which includes `class` and `let` in it, on many devices /emulators work, however, running it on this device fails with errors like: image phofimage don 't know what this is: > uncaught syntaxerror: unexpected reserved word this is a dependency i am using via npm: (the class arrayprototypes is theirs) > uncaught syntaxerror: unexpected reserved word class arrayprototypes { a config file (js) on root of the app: > unexpected identifier for: let _config = {
when backslashes are present in an html data attribute (for example: `<div they get inconsistently escaped between prod (`npm run build --prod`) and non-prod (`ionic serve`) builds.
in prod builds, the tag at runtime has the correct attribute: `<div data-foo=" bar">` in non-prod builds, the tag at runtime has a single backslash only: `<div data-foo=" bar">`
$ ionic generate --list undefined undefined 'component ' undefined 'directive ' undefined 'page ' 'pipe ' 'provider ' 'tabs '
the headercolor listed in the docs phofurl phofhyperlink (there 's a typo in the documentation, it 's spelt headerolor) does not work.
when presenting a component through modalcontroller, the backdrop is always hidden whatever showbackdrop is set to true or false.
the text inside a segment header button is not vertically centered on ios devices: a phofimage you can see the text is slightly on the bottom.
i get the same behavior on the ios simulator.
however, text is properly centered in browser: a phofimage i noticed this issue is also existing on ionic conference app, so it not specific to my case.
if you 're using the refresher component to refresh data from server, and you are leaving the page while the refresher shows up, the issue gets thrown: phofcode this occurs because: `_refresher.complete()` call.
the function here tries to set `style`, but refresher component is already destroyed.
sliding list don 't show the sliding buttons correctly and few issues with the display.
before sliding: image phofimage after sliding left: image phofimage after sliding right: image phofimage after sliding more and more right: image phofimage
when i click on an input, the keyboard comes up and the content jumps abruptly and white blocks appear (i assume it 's the content rendering).
when i create the alert object, there is no posibility to define a default button, which can be invoked on the hardware keyboard enter press.
as per phofurl even when calling the update method, the pager does not set itself correctly after being hidden on `ion-slides`.
on a list that contains input fields, the scroll bouncing glitches.
while bouncing, 'ghosting ' list items are shown.
it happens at the top of the list, as well as at the bottom of list.
the following gif illustrates problem: bounce_problem phofimage
after the slides component was changed on ionic rc.5, the `nested` parameter is not available on the slides component even when using the advanced options.
the `nested` parameter is not available on slides.ts phofhyperlink
date picker allignment is not good in ipad mini.
where the date overlaps with the line in picker.
a prompt alert on a large device like an ipad (on ios) is being displayed at the top half of the screen: image phofimage i am assuming this is done because then the keyboard appears, the alert will be in right place.
i upgraded a project from rc4 to 2.0.0. when running the project, i get shown the following error: image phofimage note that if this error is dismissed, the application continues to function as normal.
when having slides, with a scroll, as suggested here phofhyperlink , in the last comment, the content disappears when opening the keyboard, except for the first input.
note: this happens on device, in this example i am using an android emulator, but it also happens if you `serve` and open page via iphone.
here phofhyperlink is a video demonstration
when i first open an app after install/serve and use the login (via firebase email auth) the buttons, forms, inputs, radio buttons, nothing works.
i can click, select, type and anything, but it doesn 't update my view s *ngif, [ngswitch], [ngclass] and any other directive can work.
but if i close the app or press home button on device, or f5 my browser page it all works as expected in most of cases.
(everything was working some days ago before i updated to rc5, now it persists on 2 final release).
fileentry doesn't respect specification phofurl file.size and file.type are not supported by lint checking properties are available when running on device.
we need to click on "okbutton" to check value for single ion-select.
if i create a new `<ion-slides pager="true">` and add a hidden to the slider the slider does not initialize correctly.
the slider does not slide back to the center position and the bullets are missing.
when starting the application, this is the console output that i get: console.log: angular 2 is running in the development mode.
call enableprodmode() to enable the production mode.
console.error: exception: uncaught (in promise): failed to warm up service console.error: original stacktrace: console.error: error: uncaught (in promise): failed to warm up service at s ( phofurl at phofurl at ( phofurl at processmessage ( phofurl processmessages ( t.invoke object.oninvoke t.invoke e.run console.error: unhandled promise rejection: failed to warm up service ; zone: angular ; task: promise.then ; value: failed warm up service null console.warn: native: deviceready did not fire within 2000ms.
this can happen when plugins are in an inconsistent state.
try removing plugins from plugins/ and reinstalling them.
console.log: deviceready has not fired after 5 seconds.
error opening ws message: ready fired after",3938,"ms"]}
the hardware back button doesn 't dismiss an actionsheet on android.
forcing the ios style in `ionicmodule.forroot` results in a strange hover effect on buttons (normal buttons and the back button) in the navigation bar when the navigation is colored at same time.
the button text disappears because it gets same color as navigation bar.
this happens only in browser with `ionic serve` (` phofurl it doesn 't happen with ` phofurl or ` phofurl the issue is not present with `mode: 'android '` (the hover color is dark).
i want to add another network indicator toolbar dynamically to the header.
however when it happens, it does not recalculate the size of the content resulting the overlay of toolbar.
ionic 2 select only supports alert and action sheet interfaces .
if you set `min` and `max` on a datetime without the year in the `displayformat`, then when you open the datetime none of the columns will be rendered.
pages with dynamic lists with `<ion-item-sliding>` will often stop to responding to taps and swipes all together.
list scrolling seems to continue to work, but swiping the list or tapping any other button on the page does not.
range is randomly skipping over values while dragging if the minimum is negative.
on this e2e phofurl if you tap a disabled input the input will act like it is focused (will cause the page to scroll) even though its disabled.
the reason for this is that when disabling with angular forms the `ion-input` does not get the disabled attribute so our css which targets using disabled attribute does not get applied.
if the range is small then image phofimage or image phofimage
with 2.0.0-rc.5, when using the `virtualscroll` inside a `ionc-menu` component, the list does not display.
when creating a new alert, the alert is left to right, although the application is rtl (dir="rtl")
when moving to the next slides in rtl app, the slide dissappear and it 's impossible to click anywhere on the app.
on a windows 10 tablet or device with a virtual keyboard (no hardware keyboard), after you have tapped on an input field, the virtual keyboard continually pops up every time you tap somewhere on screen.
commands ionic run android and ionic build android do not work after upgrade to rc5.
but command ionic serve works normally.
when embedding a video say from youtube, if you have the video playing in a tab and switched to another tab, the video keeps playing in the background.
also, when you play the video in full screen then click on screen where tabs buttons are (even through they are hidden) app will switch to that tab.
the pwa version of an app has its footer partially cropped, whereas the footer is correctly displayed on a website.
checking the examples under phofurl the one with `chrome wednesday dec 31` is blank and in the same manner, when i try to display dates using the only numerals show.
device only (iphone se ios 10)!
if animate option is set to true, the constructor is called once.
if animate option is set to false, the constructor is called 7 times, a fast "reloading" blinks are noticeable.
i have created two pages, page1 and page2, page2 being connected to a server via socket.io.
everything works fine unless i go back from page2 to page1 and come back to page2.
all the messages are received twice by page2.
if i go back again to page1 and come page2 again, it will start receiving the messages three times and so on.
it looks like when we go back, the page is not destroyed.
it is alive somewhere in the cache/memory is still active.
everytime we go back forth, a new copy is created.
all ionic modules have different nomenclature.
framework is ionic-angular, while cloud and storage are @ionic/storage or @ionic/cloud.
i use video and ion-tabs in my app.when the video becomes full screen, the ion-tabs at the bottom also worked, although the icons disappear.
swipe events on ion-scroll elements aren 't triggered anymore
ionic run ios --device --address localhost --livereload ---> is just stuck at splash screen.
ionic run ios --device --livereload ---> is just stuck at splash screen.
unable to simultaneously run livereload on ios, android and browser.
dom elements sometimes leads to an error in edge browser (this affects uwp apps).
in our case it 's a svg icon that is embedded like this: phofcode
a brand new ionic app rc 5 would take close to 8 sec to bootup.
if u add fontawesome and our styles then the app boot time is around 16 secs.
tried both adding, removing plugins, adding and removing platforms..no use..the app takes like 16 sec to bootup.
device ready fired after 16549 ms <img width="1205" alt="screen shot at 8 11 18 pm" src=" phofurl
when the scss is minified, relative paths to images are not updated to reflect the new build path.
for example if one of the css files is in /pages/login and the background-image: is when it minifies it will still have that same path even though minified file is one level more shallow.
the home page has a simple 3 slide slider.
the button on each slide will change the page to a details screen.
if you navigate back to the home screen using the header navigation, the slider will function again.
if you use ion button to go back (via slider will not function.
this only appears when running app in local browser not in device mode.
in device mode slider will function correctly.
in my advanced case, i am able to jump a specific slide, but no swipe interaction is possible.
if the $range-ios-bar-height is set to a different value than 1, the range bar is no longer veritcally centered in the range-slider element.
also, the knob is not positioned correctly
there is no transition ocurring after pressing the navbar back button, or a custom "pop" button or the native hardware back button on the android phone.
'a... ' is showing instead of 'am '.
when i use the disabled attribute on ion-input or ion-textarea, the text is not disabled.
on running ionic start myapp tabs, i get the following error: > installing npm packages (may take a minute or two)... > error with start error: spawn unknown > at exports._errnoexception (util.js:870:11) > at childprocess.spawn at object.exports.spawn (child_process.js:362:9) at spawn pm ode_modules ionic ode_modules ionic-app-lib object.runspawncommand pm ode_modules io nic pm ode_modules ionic ode_modules ionic-a _fulfilled pm ode_modules ionic ode_mod ode_modules ionic ode_m odules ionic ode_modules ionic 557:44 and also i am not getting ionic.config.json in myapp created from the above command.
wenn the window witdh is >= 800 px the tabbar looks like: conference-app phofimage windows width < 800 px is fine.
this can only be observed in a windows app.
ionic serve (browser view on edge) is fine for every width.
alert dialog crashes when reusing it and trying to show (present) it for second time.
create a form with a require input field.
click on the first input but don 't input any data.
click ( 'go ') on the ios keyboard, the form is submitted.
i am currently using ion-select to display about 200 countries for a form.
i 've noticed that the ion-select can be quite slow.
currently i am using the pull the refresh and the ion list component on a page.
my content disappears when i use the pull to refresh and after that i open navigation.
currently i am not able to setup a plunker but will try that later.
since rc.4 i'm having some issues with the virtualscroll lists.
the problem only arises when running in a safari standalone mode (ios).
so when accessing the ionic app via the safari browser, it works fine.
when i add it to the homescreen and access app from there, problem occurs.
it seems like some overlaying (or sometimes it seems underlaying) component processes drag-actions.
the list itself won't move, but some background-element will.
after releasing drag, action is again processed, but this time by virtualscroll list itself (this includes click-events)
when navigating with the sidemenu, the lifecycle events trigger in the following order 1. ionviewcanleave() 2. ionviewcanenter() 3. ionviewdidload() 4. ionviewwillleave() 5. ionviewwillenter() 6. ionviewdidenter() 7. ionviewdidleave() 8. ionviewwillunload() if the user opens sidemenu, and then selects page they are already on, this also occurs.
the problem is, that in that case, all events trigger for same page, potentially destroying state of page just as it is initialized.
run the current ionic-conference-app in prod mode on a real android device, i 'm using a motorola g2 with android 6.0.1. tab on any sidemenu item or select a tab.
i experience a slightly/remarkable delay of half second until the button/tab reacts.
@jgw96 can you observe this effect on your real android device, too?
wrong padding/space when using ion-badges in rtl layout ionic 2 apps: image phofimage
locationstrategy: 'path ' does not work with a param
when a menu is toggled in rtl website, the menu is being toggled from the left side of the screen
the documentation for the config phofhyperlink states that a user can call `config.set(<platform>, <key>, <value>)` however when i go to set the value i don 't see any changes.
calling a before and after performing the `config.set` does print out two different values, leading you to beleive that the values have been changed, but there is no change to ui.
i open the app, then click the back button, go to instagram for example, then go again to my apps and try to open my app, it loads super slow showing a white screen for around 4-5 seconds before it resumes.
slider is 'sliding ' to an slide that does not exists (after the last one)
a button in an ion-footer on a list.... where the list has a reasonable number of entries, sufficient that they are more than one screen full.... when you scroll up and down, the list and the footer go up and down.
imagine two slides with a ionslidechange event.
in my testing with 2 slides, when i tried to slide to 3, the app correctly stopped me, but the event handler fired.
also, returned 2 which is invalid since the app only had 2 slides.
android icon and splash screen are not copied to the android platform folders.
using a virtual scroll in a popover shows an empty list.
in the dom there isn 't any ion-item inside the ion-list.
the same code works outside the popover.
this happens in rc5, i don 't know if previous versions have the same bug.
when an html file for a component is saved in utf-8 with bom, the bom character will appear in the compiled component.
upgraded from rc4 to rc5.
when sliding an item left or right in the list, the item will track with the position of my finger, instead of bouncing back to the correct position.
when i lift my finger, ion-item stays where i slide it to.
setup looks like this <ion-list approxitemheight="86px" no-padding no-margin> <ion-item-sliding *virtualitem="let message"> <ion-item class="item-message" > <ion-avatar item-left> </ion-avatar> <h2> contact name </h2> <p>note</p> <small>duration</small> <ion-note item-right> <small>test message</small> <br/> <i class="fa fa-2" aria-hidden="true"></i> </ion-note> </ion-item> <ion-item-options side="left"> <button ion-button color="danger"> <i class="fa fa-trash fa-3"></i> archive </button> </ion-item-options> <ion-item-options side="right"> <button ion-button color="secondary"> <i class="fa fa-bookmark fa-3"></i> save </button> <button ion-button> <i class="fa fa-flag fa-3"></i> read </button> <button ion-button> fa-exclamation-circle fa-3"></i> urgent </button> </ion-item-options> </ion-item-sliding> </ion-list>
currently the grid system works well for a static layout.
when a execute "ionic g page page-name" in ionic cli, the new page is created but this dont is seted in modules...
in safari, the scrolling of the menu is tied to the content.
if the main content isn 't taller than view, then menu won 't scroll even though its content is taller than view.
when you add content to main view, scrolling in menu will work.
swiper provides a rich set of api method, currently ion-slides wraps the underlying swiper instance and only exposes few api methods.
the slider starts hidden but when the condition become false the slider appears but only the first item is usable.
the swipe gesture will not work: it stops halfway and the first item remains active; it does not go forward and it does not go back (loop).
also trying to programmatically switching slider with slideto(index) does not works too.
the slider is fixed stucked at first element.
if [hidden] attribute is removed works normally: gesture, slideto(), loop, etc., all is ok.
i am currently implementing ionic in ibm mobilefirstplatform (mfp) cordova 7.1. since i update to ionic 2.0.0 rc4, *ngif does not does not work well after a mfp adapter is executed.
in my app, i am using to hide/show my html elements.
although the value of the variable had changed (i can confirm as the value is shown in console log), the html element is not shown/hidden according to *ngif.
the strange part is, html element that supposed to be shown/hidden will be shown/hidden after i minimize app and resume back.
i 'd just updated rc5 but does not help.
the only solution is fall back rc3.
the ionic v2 refresher component seems to be dependent on the component being defined as the first child of the ion-content component?
this limits it 's use.
i can 't get the current path in ionviewdidenter.
when i try for example location.pathname the path of the last view is returned.
when location.pathname is requested half a second later it is correct.
using text-wrap on a button does not apply any effect
focusing a ion-input with text-right attribute let the input value jump to the right.
this happens for the first ion-input after a different element than ion-input.
it also happens for every ion-input while focused and scrolling.
phofimage while inspecting those items something strange happens for every jumping input.
a cloned input has been added and after a little delay it will be deleted again: phofimage
after upgrading from rc4 to rc5 image slider not work.
array and images loaded from web service and just show the first image, after slide the bullet move to second but blank image (white) show and can 't not move slide again to left or right (slider crashed).
this error showed in console: phofcode i 'm use rtl layout.
throwing the below error: > exception: error in :0:0 caused by: cannot set property of undefined original exception: cannot set property of undefined
modals always appear inset on tablets.
currently, you cannot pass in a cssclass name into the modaloptions object as you can do on alerts, popovers, etc.
occurs when running ios in md mode.
updating data in templates stop working in random way and update only if you call in app.component (on video added it on click of menu), there `this.ref` is `changedetectorref`.
here video how it is looks like: phofurl
popover is positioned as if the window height and width are zero.
the slider does not work when used in a left menu, no autoplay, no smooth sliding.
very slow performance when switching tabs, rendering pages, etc.
it is slow in general and worse for more complex templates.
demo: [youtube video phofhyperlink ]
when running ionic serve the process often hangs on `webpack started`, at which point the only thing i can do is quit / re-run ionic serve.
the `previoustab()` phofhyperlink method from the `tabs` component returns the incorrect tab when called.
currently, it returns the tab that came before the correct one, or null.
similar to #9994, if you try to toggle disable on a ion-toggle or ion-radio, it doesn 't do anything
i have made a page with *ngfor on `<button ion-button>`.
i may have around 1000+ buttons in the page.
when nav.push(<to that page>), it opens the page very slowly.
seems rendering the ion-button takes super long.
instead, i 've just used `<span>` and result is pretty fast.
the tab button can be shown and hidden by its property "show".
when tab highlight is enabled for tabs and one tab is hidden (set show=false), the tab highlight is not until window resize event is triggered.
when md theme is used and tab highlight is enabled for tabs, the width of the highlight is not the same as tab button width, which doesn 't look good, especially if tab buttons are not centered in tabbar.
it only happens in chrome when device toolbar (from developer tools) is inactive (so that the app contains in whole chrome tab window).
screenshot (any tab): phofurl screenshot phofimage screenshot (last tab): phofurl screenshot phofimage
i have this code: phofcode when i click on the input, the keyboard shows.
after i type something in the input and click the send button, its click event is not fired and keyboard is just closed.
the click event fires only when keyboard is closed.
i have a chat app and can not implement a send button due to this issue.
issue is described also here and experienced by other users too: phofurl it happens on ios 10.1.1 android 5 6.
i have just enabled the service worker and it seems to be working just fine in the browser, but after i deployed to an android device, i see the following: phofcode
create a simple virtualscroll list, add a button that calls content 's scrolltotop() method.
listen for the ionscrollstart event fired by content.
console.log to show that the listening method was called update a variable in the called method the change in variable isn 't detected by change detection to fix wrap variable updated in ngzone and all works as expected.
related to the discussion on issue #9951 with the current implementation of `ionviewcanenter` and `ionviewcanleave` we find the following: - `ionviewcanenter` : only triggers once, right before loading the component (before `ionviewdidload`).
never triggers again when view enters (before `ionviewwillenter`).
- `ionviewcanleave`: never triggers when view leaves (before `ionviewwillleave`) except when unloading view (before `ionviewwillunload`).
i recently switched from rc4 to rc5 and i noticed that autoplay is not working.
i 'm getting the given error: phofcode
when an `<ion-input>` is disabled, it marks the field as invalid and it highlights it with red.
issue is the same, as described here (includes video) - phofurl it happens in ios 10.1.1 and android 5 for ion-textarea and in ios only for ion-input.
difference in android and ios for ion-textarea is that cursor is positioned at the beginning of the text in ios and at the end android.
i am not entirely sure when this issue appeared, seems like it wasn 't present older ionic 2 rc releases.
moving cursor ion-input inside a form is also hard not always possible ios.
the datetime component does not follow the iso8601 specification completely.
more specifically the z-notation does not work with the datetime component.
consider the 2 strings in iso 8601 format; both string are completely valid and contains same time.
when executing the command "ionic resources --icon", the following icons are not getting generated: - iphone notification (ios7-10) 20pt - 2x - iphone notification (ios7-10) 20pt - 3x ipad notification (ios7-10) 20pt 2x ipad notification (ios7-10) 20pt 3x
it happens on ios devices or simulator it works in browsers didn 't test on android if i use more then one 'ion-input ' inside a 'ion-item ', it dosen 't matter which one i click, the focus always get on the last one.
so if i want to edit the first one i have to click it twice.
the ionviewwillleave and ionviewdidleave lifecycle events do not fire when navigating using the side menu.
`ion-view` title is cut off on some screens followed by a "..." while on others, where the title is even longer, it 's not.
this happens 100% of time in my app on android emulator (nexus s api 23), but not in browser.
for example, here on the first screen the text "facilities booking" is truncated but the second screen "maintenance reporting" is rendered in full length, even though it consists of more characters (18 vs 21): screen shot at 15 37 57 phofimage screen shot at 15 38 17 phofimage
hi guys, i want to load external url inside my ionic2 app, though i find that provides a web browser view that displays web page, but i want to display this web page as a division of my ionic2 app, then i find that "iframe" tag can embed a webpage inside my ionic2 page, but how to listen web page event?
is there a efficient way to achieve this goal than "iframe" tag?
the `ion-footer` does not animate custom component during ios transitions.
it was working in beta-11.
when scrolling through a list of cards and tapping the screen, the wrong card gets selected.
deviceready does not fire for at least 8 seconds in dev builds, causing the app to break (platform.ready() fails because ready does not exist on undefined).
using '--prod ' works, but livereload is not available in prod builds as far as i know.
when i click in a fab list button i get `"uncaught typeerror: ele.hasattribute is not a function"` in the adb console.
in ionic serve works fine but not in native android
some pcs enable multiple input devices.
for example, windows surface pcs enable both of touch device (physically screen) and mouse (physically touch panel or mouse).
but ionic allow to use one kind of input device by the determination running on initialisation.
this leads very troubling behavior.
on windows surface pcs, user can click element with screen and touch panel while use cannot scroll element only with screen.
when a list is filtered by a search query, if you are at the top of the list when filtering all works fine and results update.
if you are part way down the list and the length of results returned by filter is less than you would need to get to your scroll position before filtering you get a blank screen.
you can still scroll up and down but all will see is white, scroll events don 't fire from ion-content.
it 's like content area has been lost off top of screen somewhere.
if then clear search filter so list goes back to it 's original length (ie long enough to reach your original scroll position) up and down a bit all items reappear events start firing again as usual.
only happens with virtualscroll, ngfor lists behave as expected under same test.
network.type shows an error: property 'type ' does not exist on type 'typeof network '!
updating variable $scope.unread_count doesn 't change the displayed value.
$apply and $timeout don 't work either.
i 've also tried disabling caching on the route and had no luck.
when going back to a previous view, using the back button, code in `$ionicview.beforeleave` block of the view which is being left is not executed of the appropriate controller is never triggered) in case when url parameter of the abstract state is different between these views ( when using url parameter inside for url of app 's abstract state e.g.
update: `$ionicview.leave` also not triggered.
i push a page with parameters (object) and grab them in the second page with navparams.
if i change this object in the second page it is changed in the first page too.
how is that possible without me doing so?
or is it expected behavior?
when running app in browser using `ionic serve`, the callback of `$ionicplatform.ready()` gets called immediately.
this usually doesn't cause any problems, but some angular plugins suddenly broke in the browser (but kept working correctly on hardware) when i added jquery instead of angular's jqlite.
after some debugging, i found the issue is that inside `app.run()`, `angular.element( ... ).scope()` returns undefined (but only when using jquery and running in a browser), and some angular plugins didn't like that.
i solved the issue by adding a `$timeout( ... , 0)` inside
when using ion-slides, if each slide contains an input and you hit 'tab ' (or 'next ' on android keyboard), the layout is messed up.
it shows half of the current slide and half of the next slide.
here 's a plunkr phofhyperlink illustrating the problem.
having a sliding list without sliding crashes
when having two <ion-content> in a modal, it hides 46 pixels of the first content behind the header
config.tabhighlight = true; does not add the highlight bar in the tab element
i have a datepicker: phofcode it looks like this when you tap the field: initial phofimage once you scroll the dates it fixes itself: fixeditself phofimage
google analytics method `starttrackerwithid` rejects, with undefined error - for a correct id
facebook native is not rejecting on `ionic run browser` instead, there is a console error: > can 't load url: the domain of this url isn 't included in the app 's domains.
to be able to load this url, add all domains and subdomains of your app to the app domains field in your app settings.
if i want to present a loading component with the option "dismissonpagechange: true" with the goals of doing some stuffs and then closing the modal, the loading gonna hang after modal close.
ion-searchbar inside ion-toolbar is very less visible and cancel is not visible if ion-toolbar has background color
* ionic 2.1.18 upgrade or fresh install fails on fedora 25 leaving ionic unuseable.
* i suspect it 's related to npm config set prefix assuming /usr vs /usr/local errors start with npm err!
enoent enoent: no such file or directory, rename -> n * it seems install package is assumes /usr/lib/node_modules is where node_modules are kept * using npm config set prefix /usr/local works but other errors crop up as the rest of the node_modules are elsewhere symbolic link from /usr/lib/node_modules to /usr/node_modules does not work
subscribing to the content.ionscroll works fine when user scroll slowly a page.
as soon as he scroll faster, like when he want to reach back the top of a long page, the event isn 't emitted enough often or don 't produce enough steps.
this behavior should be reproduced on a real device, like an iphone 6 or 7 with ios 10.2.
as followed this tutorial: ionic 2 firebase 3 facebook login phofhyperlink the app seems to crash on so many ways.
1) the setroot doesn 't works with sidemenu.
2) if i quit the app and open it again, none ion-header is shown.
3) after login atempt it freezes the screen, i can click on any menu option (the menu is enabled for testing purpouses) and it doesn 't changes the view.
4) the hardware back button doesn 't quit app
currently when we run `ionic build browser --prod` we get 1 `main.js` file that contains both libraries (_angular, ionic, etc._) and application logic/ui(_aot_).
when tapping a button in an alert the alert dismisses but the element behind the button also gets tapped.
for example when a textfield is behind the button it gets selected and keyboard shows.
1seem tabs cannot be hidden by api 2 ion-content cannot be extended if tabs are manually hidden, ion-tool-bar will be given a 50px bottom.
phofimage text in the `ion-datetime` component has a font size sometimes too large for the screen to contain without overflow.
when min/max properties limit a dial to fewer than the max possible (i.e.
only 6 out of 12 months), the picker presents with issues.
give a datetime properties of and and you 'll see the picker present without showing the month dial.
there 's a similar issue with days.
both issues are shown in plunker with explanation.
when calling ionic serve it opens a browser and watches my files but does not reload the app on changes, manual reloading however works.
the only interesting output seems to be error sending client ws - cannot read property 'readystate ' of undefined`
in my controller for the modal that is shown below, i call on the
phofcode the above is in my view, when i scroll down to the input field a click it, the 'scroll-content ' suddenly get 's a padding-bottom of 300px, and looses that if the focus is removed.
on ios padding-right of all text inputs is increased to make some space for the clear input icon.
in the styles for material design it 's only when attribute ``clearinput`` is set.
scrollto method of the content component is not working with a duration of 0 ms
list are not displaying as they should on samsung galaxy note 3, the list looks un styled.
the input field on the form do not allow any action and are not in style, select options not showing the drop down and pointer jumps to another input field below and when a text area is displayed the text pointer keeps blinking rapidly than normal.
open phofurl with edge 13/windows desktop, and when trying to focus the input with the mouse, the input element isnt focused.
the bug appears on ios simulator and mobile not on web.
injecting the `alertcontroller` in a service works while in production mode, but not in dev mode.
on android 5 when i 'm trying to open datepicker i see: phofcode
exception is thrown on android 5. and item sliding doesn 't work
when going from section.child to home (using transitiondirection "back") and then back to section.child from home multiple times: * the scope & dom "pane" elements stop being cleanedup * additional controllers are loaded (first +1, then +2, +3, ...) on ios the app will crash when it reaches 7-8 additional scopes.
currently to have the datetime object open with a value (other than the max value) you must set the ngmodel value for the object before datetime is opened.
sometimes this isn 't desired, such as when you 'd like to leave field blank if user does not input a date.
`ionic platform add android --info` results in: > adding android project... > > > creating cordova project for the android platform: path: platforms android package: name: myapp activity: mainactivity android target: android-24 subproject path: cordovalib android project created with cordova-android@6.0.0 installing "cordova-plugin-console" for android files java_home=c: program subproject path: cordovalib failed to notify but primary configuration failure takes precedence.
at at at at build failed total time: 1.116 secs source) failure: build failed with an exception.
* where: script line: 64 * what went wrong: a problem occurred evaluating root project 'android '.
no installed build tools found.
install the android build tools version 19.1.0 or higher.
* try: run with --stacktrace option to get the stack trace.
run with --info or --debug option to get more log output.
failed to install cmd: command failed exit code 1 childprocess.whendone emittwo (events.js:106:13) childprocess.emit (events.js:191:7) maybeclose error: cmd: command failed exit code 1
when having slides, that are bigger than the screen, they are not up-and-down scrollable.
also, (and i think that is why the bug happens), the slides are aligned center to height.
i couldn 't find a way to un-center them (is there one?)
so i could not see if that is the cause for sure.
when you create a form using the `formbuilder.group(...)` method and assign an `ion-input` to a `formcontrol`, it seems to ignore the `disabled` attribute set in the state object, documented here: phofurl and the `ion-input` is enabled regardless.
on a regular html input this seems to work as expected, so i am thinking it 's something in `ion-input` not correctly being set.
when i set `disabled` attribute directly in mark-up on `ion-input` it * does * follow correct behavior: <ion-input type="text" disabled></ion-input> but this is undesired (since i cannot set it programatically) and i receive following console warning from angular: console warning phofimage
i guess the scale calculate result is according to the first record not the previous.
as long as the two fingers do not exceed initial distance, whether it is pinchin or pinchout picture always zoom out.
and i want to calculate scale by myself.
howevery, all pinchmove event always record same pointers array.
maybe get change is by other property i dont kown which one.
when using the slides component with the `initialslide` option set inside a modal component, the first slide appears briefly before switching to the initialslide.
with a grid i try to get 2 ion-datetime input element next to eachother.
i managed to get them next to eachother, but i cant edit them both.
see this plunker for the bug in action.
pickercontroller component does not select item by tapping on it.
this occurs only in android
i create a singleton service.
this service correctly works as a singleton across all pages.
when i use popover to open a page that this service is injected in the constructor a new instance of the service is created
in an ionic 's tabs based app, if we handle a button click from a tab button, change some states, ionic 's changing detecting mechanism for the current page will stop working.
only thing we can do is exist and re-enter the view.
using the `text-right` utility attr on an ion-item does right affect `ion-avatar`
there is no option to limit the number of selected checkboxes in an alertcontroller.
ionic is cutting last 2 characters of year in datetime.
on ios it 's work perfect, but on android and mozilla firefox responsive mode not.
and result is for example: 22 06 20..
i 'm getting this unexpected bug when i implement a native google maps on a page: phofurl
currently scrollto doesn't support scrolling to a particular item as documented here phofurl but i want to scrollto a particular element of a list.
consider this code: phofurl before doing anything with the select element, we see that the selected value seems to be test1.
however, if you click open the select element, you will see that the selected element is in fact test3.
in app/home.page.ts, on line 26, i have modified value to which select option is bound.
this affects option when you open select, but does not affect already selected value.
i need to open sms native app.
hi, i am having a problem when i test the app on ios, i am using an ion-select with input properties "selectoptions" and add alertcontoller input properties such as title,substile and button and all property accepted by ion-select except button.
when the current page component has an ion-title element, the document title would be exactly the same string as contained in the ion-title, nothing more or less.
i am facing difficulties in showing ion-icon in the screen.
the following is the html code which i use; phofcode for some reasons, ion-icon does not show up in the screen.
running ionic start app_name --sass --v2 fails because of invalid peer dependencies.
hello, i just upgrade to rc4 then encounter this problem: i have an ion-list which bind to [items] property (it 's value has 3 items): image phofimage it 's good, but when i remove 1 element of [items] property, image phofimage => the list becomes blank
sliding ion-options when done for few times result in ion-options not becoming active.however they are okay when slided again.
ion-input requires two taps to fire (click) event i have an ion-input, besides an ion-label, inside an ion-item, inside a form, inside an ion-list.
i have a (click) event tied to that input, as it 's read only (i have it open up a modal).
the input works find when running on desktop browser, but on iphone 6 device the first click seems to blur the input but a second tap is required to fire the (click) event
i have one modal which is called from various places to edit some data.
it works all of the time unless it 's presented from within a popover.
from the popover 1) it takes two clicks to open the modal and 2) once the modal is open, i cannot interact with any elements on that page.
scrolling still works, and i can click back in header, but i cannot touch or click on anything else.
this issue is specific to being ran on a device, iphone 6 in this case, it works normally in all scenarios when running on desktop browser.
the swiper `onreachend` callback is called when closing a page containing ionic-slides with `nav.pop`.
i think the cause is the call to `slides.rapidupdate` in `slide.ngondestroy`.
the event (ionchange) on the component <ion-select> fires even if selected value hasn 't changed.
using the facebook web view, without the facebook app installed, you log in with facebook on the app and navigate to another page with ion-tabs.
whatever the fist tab is on ion-tabs, it will be duplicated or otherwise added to stack twice.
wrapping the `slide` component in a custom component causes a template parse error because there is no provider for `slides`.
this is understandable, the `slide` component uses a reference to its parent `slides` in order to update the `swiper` automatically when a new slide is dynamically added or destroyed.
if you use virtual scroll and ion-refresh together on the same page it causes lag and makes it to where virtual scroll does not actually scroll reliably.
for example, on a longer list you will sometimes have to swipe on the page multiple times before it actually scrolls.
this only happens on uiwebview, android and wkwebview it works great.
preliminary debugging shows that this is probably because of us having to use js scrolling uiwebview.
also, virtualscroll by itself works great uiwebview, this issue only happens when using an `ion-refresh` with virtualscroll.
(swipe) gesture does not work at all on some devices.
`testevent` function is not even called.
most of the time it works.
i have the following code in my app: phofcode it should allow to scroll horizontally but it 's not working on android.
with ios everything goes fine.
it generates the following html:
the user opens a right side menu.
they click a link that opens a modal.
they then click a dismiss button that's on the left side of the modal.
this causes not only the modal to close but the menu as well.
swipe to toggle side menu is not possible with some components.
for example, i have a simple view showing an iframe by this way: * agenda.html: * phofcode * agenda.ts: * phofcode when i swipe to toggle side menu, all i get is that the webpage (showed by the iframe) moves to the right.
i explain another use case (with cordova plugin for using native google maps) here: phofurl
unable to set configuration options.
when click in notification, backgroundmode open app info no the app!
i use toastcontroller to create toast with duration.
after update to rc4 i got "error: uncaught (in promise): false" when duration timeout is expired: error: uncaught (in promise): false at resolvepromise at resolvepromise at at zonedelegate.invoketask object.oninvoketask zonedelegate.invoketask zone.runtask drainmicrotaskqueue if you use ionicerrorhandler for errorhandler provider ({ provide: errorhandler, useclass: ionicerrorhandler }), this error is catched and shown always.
given i am on a page that is subscribing on an event when i have a background observer.interval polling and fire an event the page receives the event, i update local state object however the page does not refresh the new state unless i do a navctrl.setroot and unsubscribe the event.
docs table formatting is broken probably due to `|` character.
phofcode ` does nothing on windows 10
in rc4, when a popover inside of a popover is dismissed, the onwilldismiss callback never fires, ondiddismiss does fire however.
the visible checked state of a disabled ion-checkbox or ion-toggle cannot be changed programmatically.
when clicking on a textarea the focus is in front of the bound text with no way to change it to behind the text
i have an ion-list, where i iterate over an array (with *ngfor) and add multiple ion-items.
i also wanted to conditionally set the direction of the item, but neither nor seem to work.
the error i get is error: uncaught (in promise): error: template parse errors: can 't bind to 'item-right ' since it isn 't a known property of 'ion-item '.
1. if 'ion-item ' is an angular component and it has 'item-right ' input, then verify that it is part of this module.
2. if 'ion-item ' is a web component then add "custom_elements_schema" to the '@ngmodule.schemas ' of this component suppress this message.
since rc4 orientations are not detected correctly in my views in ios builds.
`hidewhen="landscape"` doesn 't work ` neither this: phofcode it was working perfectly in rc3, i didn 't try to run on android yet.
the funny thing is that it 's working perfectly in chrome when i use "ionic serve" and i enable mobile view landscape/portrait.
since i updated to 2.0.0-rc4 i have a bug with cordova google maps.
if i tap on the map, it cause an error on tap-click component in ionic-angular : in file `"ele.hasattribute is not a function", line 203:` phofcode
i manually created a new `rc4` project from a working `rc3` project + "@ionic/app-scripts": "0.0.46" `ionic build ios` builds for the wrong/different (default) platform.
building project : tconfiguration : debug tplatform : emulator build settings from command line: archs = i386 configuration_build_dir = sdkroot = iphonesimulator10.2 shared_precomps_dir = valid_archs i386 ... note: add @available attribute to enclosing class
when i check the platform type of my tablet 'pixel c ' (eitheir with platform.platforms and the type "tablet" isn 't returned.
in a virtual scroll list, if the data is updated (or the subscription to data removed and readded) and the list has been scrolled down a couple pages, the list becomes blank until user scrolls down a bit.
locale is interpreted as a string/array of values for day and month names.
but, locale is just not confined to the day and month names.
it covers the numbers also.
one suggestion given is to use moment.js to implement locale support.
if i want to display the calendar in arabic (leave out rtl for moment), even if i supply locale strings for month and weekdays, numbers will still showup with locale=en.
if i generate numbers and pass it as string, all validations inside utility for date time validations will fail since everything is numeric.
so, current implementation of datepicker fails even in browsers which have implemented i10n i18n.
1) start a new side menu project 2) on the ios emulator or device tap the hamburger to open the side menu (all good) 3) tap the hamburger to close side menu (takes 2-3 taps before it responds).
cannot complete `npm install` with rc4.
results in `peerinvalid` error, regardless of upgrading from rc3, or starting a new project.
the current popover behavior seems to have a delay from when i click a button inside the popover to when the dismiss event fires back / notifies the parent controller.
the delay is about 1-2seconds, which is noticeable.
i need to use text-wrap for ion card header.
i have a bit long titles.
but it seems it doesn 't work text-wrap in this case.
the first time ionic upload works well but as soon as ionic.project file is created and the app id is saved to bundle the next upload starts failing with error message error: cannot find module at (module.js:336:15) at function.module._load (module.js:278:25) at module.require (module.js:365:17) at require (module.js:384:17) object.run object.<anonymous> module._compile (module.js:460:26) (module.js:478:10) module.load (module.js:355:32) function.module._load (module.js:310:12)
with external keyboard on ios (or using keyboard in ios emulator), i 'm not able to traverse inputs in the form with tab key.
for a moment it switches the focus to the next field, but then the focus is lost.
this is happening in default ionic2 app created from scratch.
however, when i add plugin `<plugin spec=" phofurl `, tab traversal works correctly and as expected.
the issue is there on rc 4 and also in nightly.
ion-grid doesn 't render if inside of an ion-item
upgrading from rc3 to rc4.
using async pipe to resolve user id into image (in base 64 format) from either locally saved cache or fresh from server.
the data (base 64) is sucessfully grabbed from within the pipe, but not get updated in the view.
working perfect in rc3 but failed in rc4.
debugger keep pointing to this line in img.js file.
creating an ion-slides component with 3 ion-slide components inside, and setting the loop option to true, then navigating from the first slide to the last (by looping around), the click event stops working until i navigate to another slide by not looping around.
ionic 2 android application hangs with a white screen during startup.
it takes 10 - 12 secs for the app to display root page after splash-page / spinner fades.
this doesn 't occur in browser with ionic serve.
in rc3 the no-shadow tag on ion header was hidding the shadow :)
bind the text of ion-option when value attribute is phofcode .
i run my ionic app by
ionic serve white screens with no errors, nothing in console logs etc however ionic build --prod works fine, creates output (but no error messages)
with the upgrade to rc4 i 'm seeing the height and width explicitly set for img inside ion-thumbnail.
looks like it was changed here: phofurl appears $item-wp-thumbnail-size is setting the height/width now instead of the max-height/max-width.
just curious why default changed.
following code should give a clear button, but it actually clear class doesn 't do anything.
<button ion-fab mini clear><ion-icon i have a workaround by putting this code in css.
.fab[mini]{ background-color: transparent; margin: 0px; box-shadow: none; color: #387ef5; }
open the attached plunker, click on a list item (and hold, of course) and pull the list down, but not far enough for an update to happen, then release.
the ion-refresher gets canceled as expected, but the click event gets propagated to the list item you originally clicked on.
when you add webapp link to ios homescreen and start it, scrolling on webview with virtualscroll is unusable (with non-virtualscroll list all is ok).
when you swipe finger down, first you see bouncing gray rect, then view is scrolling.
i seen this bug only on ios and only in webapp mode.
(on ios in safari it works ok, on adroid works ok even in webapp mode).
building for device with modified main.ts fails.
if is not in the top level, of the file, build gives an error.
device object from "ionic-native" package is empty.
it does not include any methods or properties to call.
in fact, if i call the "device.device.uuid", i am not able to deploy on device or run it in the browser because i get this error: typescript: src/pages/jobs/jobs.ts, line: 70 property 'device ' does not exist on type 'typeof device '.
l69: if (typeof device !== "undefined") { l70: transpile failed ionic-app-script task: "build" typeerror: error.message.indexof is not a function
when you use virtualscroll and ion-img, after scrolling down (when buffer ends) ion-img stops loading images _034 phofimage please look at code inspector: phofimage url phofurl is correct (for my local machine) and image is available.
`ionic-build` and `ionic-serve` result in a cli error.
using a map with base and contrast now results in an error: phofcode
conditional on virtualscroll causes no content to be displayed, even if there should be content.
running on an actual android device.
on an app with 4 tabs (one of the tabs shows a virtual scroll list) i push a view into one of the tabs.
the view contains an input box and i click inside the input box to give it focus.
the keyboard opens and the uncaught exception is thrown.
the app becomes unstable after that.
this happens in 4-5 different components where i do no navigational manipulation, just clicking inside an ion-input box triggers error.
this could be related to #8693 but it happens on any ion-input not just search box.
my code has a `<ion-content with a text input inside of it.
when i try to type something in there on
the virtual keyboard of an app running on windows 10 with edge or cordova appear even if the user click outside an input.
it occurred only if an input was previously used.
if an ion-input is added inside an ion-item-sliding the content doesn 't scroll correctly, if the input that is focused by the user, is in the area where native keyboard will popup (e.g.
at bottom of screen) on android or ios.
so ion-input remains overlapped by keyboard.
setting the side="right" property on a navbar is ignored and menu still slides from left
clicking on an input with `no-lines` added shows a 1px highlight border.
a scrollbar appears when opening an alert or closing a sliding item from a page that doesn 't have enough items to scroll.
unable to open database in android
slide in the menu from the edge, scrolling in page underneath still possible before you lift your finger off the screen phofimage
modal is invisible on chrome debug galaxy s5nexus 5xnexus 6p ,but its correct on iphone device.
when i change the backdrop 's opacity to 0, i can scroll the content that under the backdrop.when the opacity of backdrop isn 't 0, i can 't scroll content under that backdrop.
component is shown undefined in console on run, although it passes ionic build without error.
viewchild only work when the called component is placed under the same module with the calling component.
app have a tab inside another tab.
when i move between the parent tabs, phofcode life cycle of child tab 's root page is not running.
the behavior of ion-input in not intuitive and does not match the way a normal angular input directive works.
you cannot set the "value" of an ion-input and expect it to be reflected in the instance.
similarly, setting the corresponding member in instance does not get reflected in element value initially (see unit test below).
to programmatically set a value into dom element and have it reflected instance, value of hidden child input element has to be set which feels like exposing internal details that should not be relied upon.
using an `<ion-input>` or `<ion-textarea>` component inside an `<ion-footer>` throws an unhandled exception: `cannot read property 'ionscrollstart' of null`
on create a list of inputs the bottom border of the last input is not showing in android.
on click on the last item, the border follows width of list instead of input.
if you first load (or reload) a deeplinker segment and the component 's `ionviewcanenter` returns `false | promise<false>`, the user is left with a blank screen.
if a pushed page raises an error in a constructor the caller page becomes unresponsive.
in the program, i simply created an
we 've set to fix the problem with header bouncing (see phofurl but then we found another problem: if the next input element is under the keyboard (not visible), the view scrolls too much and focused input ends up being too high in view so it 's not visible either.
recording audio using the mediaplugin on android fails with exception.
the audiorecorder seems to be working, but the file never gets created.
infinitescroll does not work in firefox using latest nightly.
i 'm getting a lot of these errors since rc3, and they are still there in the latest nightly: phofcode
followed this doc closely ( phofurl but the plugin doesn 't work.
using `navcontroller.pop()` redirect back to previous pages recursively until reaching a black screen.
when clicking on a tab (ion-tabs --> ion-tab) to open a modal the change detection for the previous tab is detached.
when we then dismiss the modal the change detector will not be reattached and ui will not update.
`deviceready` doesn 't fire or fires very late in my ionic app when i run it on my ios 10 device or emulator with `ionic run ios --device -lcs` i tried removing all the plugins with `ionic plugin rm ...`, deleted the content of the plugins/ directory and reinstalled them.
i also removed and reinstalled the ios platform with ionic platform rm/add ios.
however if i remove plugins and `cordova-plugin-device`, deviceready` fires normally.
if you have two input fields and press tab to switch between them you get: phofcode
if i use the angular 2 router instead of ionic 2 and try to import a module with ionic components (and of course importing ionicmodule) it not work because of: "
i have main page with tabs.
each tab have several sub tabs (tab -> subtab -> subsubtab).
if i press the tab on subsubtab, application clear current tab navigation stack and go to the root (the tab page in my example).
after pushing a page to rootnav it 's not possible to swipe back (back button works though).
i have an `ion-slides` component which has some `ion-input` and `ion-textarea` controls in.
on rc2 the way the form scrolled when a keyboard displayed on a device was bearable.
in rc3 it is completely broken.
in latest nightly it 's better but still very bad.
when a user touches an input, the input completely flies off the screen or is in completely wrong position.
when keyboard is dismissed screen is not returned to it 's proper position.
i have `ion-footer` elements in each `ion-slide` which show how screen not aligned after keyboard dismissed.
on ios footer and input are in wrong positions, and sometimes inputs do not even accept inputs from keyboard.
tested on android 6.0.1 and ios 10.1. no crosswalk or wkwebview.
when sliding an itemsliding in a list, we can scroll the list.
1. if code like this phofcode
if `<ion-footer>` content changes after a view is loaded, `<ion-content>` 's margin does not adjust to factor the change ending up with hidden content.
if you run `ionic serve browser` or `ionic run browser` and open it on ie/firefox/safari, the application doesn 't load, in chrome the application loads
presently, the `config.set()` signature is phofcode .
this makes it difficult to know what to do without navigating to the docs.
in ios : plugin behavior only triggered when form field touched.... yes it 's strange.
for example, i touch a link that would normally open with inappbrowser plugin, and the link opens when, on another page, the form field is clicked (touched).
same with socialsharing, sharing a post, then go the form touch the first field, then only social sharing shows up.... heg ??
html template content in loading controller does not support double curly braces to display variable.
wrapping the variable double curly braces results in displaying the double curly braces and the variable name.
navcontroller returning wrong view name when doing .last().name this issue only happens when running on prod mode.
i have the following code phofcode and this works only when running _ionic serve_ or _build --dev_.
i check the value returned by _this.nav.last().name_, using console.log(), and it printed 't ', (yep, just the letter t)
using nav.push or nav.setroot in the app.component.ts in <ion-menu> from nav ( not navcontroller ) does not trigger the lifecycle hooks of the current page.
the page that is navigated to works as intended.
set the displayed time in ion-datetime to 12:01 am and tap/click on the control.
the picker time is showing 01:01 am
currently, when i attempt to override it has no effect.
if you move the scroll position below the very top on a virtual scroll component, then open a side menu, the rendering goes bonkers.
right side menu appears when left drawer is closed, technically the z-index update is occurring during animation.
virtual scroll contents are all bunched up after returning from the camera plugin.
changing the orientation of the device forces the redraw, which solves layout.
i have a tab set as root.
when i push a modal over it and use navpop / dismiss it closes the modal but it doesn 't fires the ionviewwillenter event of tab due to which the tab data is not reloaded.
when working on a project running `ionic serve` runs into the issue below in the browser phofurl failed to load resource: the server responded with a status of 404 (not found) and i do not see any errors in the logs terminal.
when running `ionic build` phofcode i also ran `ionic-app-scripts transpile`; it finishes without outputting any errors in terminal
switching tabs quickly causes "digest already in progress" error
input placeholder and text is invisible in ios 8/9 invisible-input phofimage
"ionic build android" and "ionic run android" fail when used @viewchild("cmpname")
i made the application build of the ionic 2 sidemenu, however the svg appears in the chrome but svg does not appear in android after generate file android-debug.apk: phofimage follow commands i used: `npm install -g ionic cordova` `ionic start myapp --v2 sidemenu` `ionic platform add android` `ionic build android`
ion-refresher is glitchy with onpush change detection strategy.
the arrow and the pulling text doesn 't appear, and on the rare occasion it appears, the arrow doesn 't change direction.
the div with the class refresher-pulling stays display: none.
edit: made a plunker that illustrates bug.
in my project i was marking component for change detection manually at specific points, that 's why my description differs slightly from behavior of plunker.
there seems to be a problem with the height calculation of any scroller when tabbars are active in ios.
it 's not adding the height of the tabbar into the calculation.
i just decided to start developing with ionic, but after a fresh installation as documented as described here: phofurl i got the following error: serve
all other input directives seems to have it.
i have a provider that handles everything related to push notifications.
i want to navigate to a page that has tabs whenever i receive a push notification.
to achieve this i subscribe to an event on `app.component.ts` and push the desired page when it's published, and publish this event from the callback when receive a push notification.
the problem is that when navigate page that has tabs using what described above the tabs get on top of the header.
this only happens if publish event inside callback, if publish it from anywhere else everything works fine.
when we use "to many" colors variables in theme/variables.scss color(), then we get a white screen at startup.
scrolling the big list on the device(tested on iphone), fires the action click on the item.
on the layout code below, i am getting the p text not nicely vertically aligned <img width="581" src=" phofurl you can see the text on the right is lower than arrow, and lower than corresponding text on left
when setting the value of "id" of an input in the alertoptions, the id attribute is never written to the dom for said input.
alert component fails to compile on `ionic build android` when switching `strictnullchecks` to true in tsconfig.json
the `sticky` property in an `ion-item-divider` doesn 't work if it is inside an `ion-list` with `[virtualscroll]`.
if works fine if it lives inside a plain `ion-list` component (like in the schedule page in ionic-conference-app)
when pushing a new page from a popovercontroller, that page header will overlap with the status bar on ios.
ipa file is not created when executing 'ionic build ios --device --release --buildconfig ./build.json '
overriding $bar-title-font-size does nothing on android devices.
when building an ionic project in windows, it builds and runs fine using `ionic serve`, but the same project on mac os causes a missing main.js using `sudo ionic serve`.
no build errors showing whatsoever.
i have a provider that handles everything related to push notifications.
i want to navigate to a page that has tabs whenever i receive a push notification.
to achieve this i subscribe to an event on `app.component.ts` and push the desired page when it's published, and publish this event from the callback when receive a push notification.
the problem is that when navigate page that has tabs using what described above the tabs get on top of the header.
this only happens if publish event inside callback, if publish it from anywhere else everything works fine.
datetime does not bind to formgroup if the format is "mm".
in an ion-textarea, setting a variable in (ngmodelchange) in a function fired by(ngmodelchange) only works once.
that is the content of the textarea only gets updated once.
'characterremaining ' does get updated in the app.
i started with ionic v2 two weeks ago.
this is my first mobile app.... ps.
with this current configuration 'maxlength ' didn 't seem to do anything, hence this effort.
when we use on ios (simulator and device) it break all the gesture events excepte the `swipetogoback` gesture, who reactivate the gesture events by the way.
using dark color for ion-navbar makes ios status bar almost impossible to see as it 's also in black color.
<img width="377" alt="screenshot 00 43 21" src=" phofurl
when a parent component with <ion-content> contains a child with a virtual scroll element, the virtual scroll does not show.
only wen the child component also contains its own<ion-content> element, does it show.
sliding from left opens menu on any page of app, doesn 't matter if page has menutoggle button or not
clicking any` ion-input` field inside `ion-slide` ,
when starting a new project with ionic cli, it adds ios platform by default with an outdated version of cordova-ios that will throw the following warning when deploying or emulating ios 10.1 : "[app name] may slow down your iphone".
in order to fix this issue, it 's necessary to update the project with the latest version of cordova-ios and specify it on
*ngif not working with two or more conditions inside an `<ion-slide>` element but inside any other element it works.
it does not throw an error just does not hide the component that im trying to hide with the directive
injecting and mocking out viewcontroller for unit tests causes two separate issues.
1) the first error being `failed: can 't resolve all parameters for viewcontroller: (?, ?, ?
).` for when there is no mocking out of the viewcontroller.
2) when creating a jasmine spy or mocking out the viewcontroller `typeerror: viewctrl._setheader is not a function`.
when i bind ion-radio (inside ion-list radio-group) to object, only first item is selected and ngmodel value is not the binded object.
when i bind ion-option (inside ion-select) to object, all options are selected when i select someone and ngmodel value is not the binded object.
adding multiple modals one on top of another the modal on top when closed, slides in the background and not in his previous z-index.
this is more noticeable if one of the modals has semi transparent background.
when running the app on device using 'ionic run ios --device -lcs ' not a single button works, even the tab bar buttons tried using phofcode but nothing seems to fix it some extra info: i 'm just casually programming an app, and somehow my buttons just stopped working on my iphone, all of them.
but when i run it in the browser the buttons work fine as expected.
no errors are displaying in console, and my code compiles just fine.
i have another test project to check if this is a problem with my code, ionic, or device, and it seems to work on starter project.
but not on further developed one.
i 'm having same behavior an emulator.
putting an element on the page with a color attribute as of rc0 e.g: phofcode yields the warning in the console: phofcode
the documentation lists navcontroller.setpages() to take an array of pages with their params as the first argument.
however, there is no example of doing this and i cannot, for the life of me, figure it out.
i don 't know how to trigger the event of refresher when a page reload.
for example ..... export class activitypage implements oninit { ngoninit() { } } i want to trigger the 'refresh ' event of refresher in the function ngoninit()
upon navigating to a page with `setroot()`, the constructor function, as well as ionviewdidload() is being called 10 times.
1. run `ionic -g page login` 2. it asks for my ionic-account login like: `to continue, please login to your ionic account.` 3. enters e-mail + passwort, it says im logged in :) 4. nothing got generated :c 5. run the command above again -> login asked again.
6. it does not happen with the full command: `ionic generate page login`
the document title is not updated when navigating back from a page that has been opened via a popover.
on native devices the class `statusbar-padding` is added to the toolbar.
this applies the following css: phofcode
i believe this to be a bug, although you may correct me if i am wrong: using an `ionviewcanleave()` lifecycle hook on a tabs page which implements `ion-segment`s seems to cause the `ion-segment-button`s to stop operating after rejecting the promise.
i have a tab button hooked up to a logout button with an ionselect implemented.
this ionselect fires my logout logic (which pops the page).
after tapping "no" confirm if i want log out, the ion-segment seems be inoperable.
this seems be case when hook is implemented on main tabs typescript file.
unable to clear or reset the filter on ng-repeat.
while using the filter on `ng-repeat` once the search has been done, the filter is being reset manually inside controller via `$scope.filtername = "";` but it does not reset nor it throws any error.
(this happens on ios 9 and 10. on android works fine.)
i 've a form, with a "close" button on the toolbar, which when pressed presents an alert modal (with an "ok" and "cancel" button) asking the user to confirm if he 'd like to exit without saving changes.
if the user presses the "ok" button navcontroller.pop() runs in order to exit form.
however, if an input field is exactly behind modal buttons, then by time modal closes and navcontroller.pop() is called, input behind it gains focus and prevents navcontroller.pop() from running (even if a very quick tap is done).
strangely enough, when modal is displayed backdrop there, you can still scroll content from behind.
then, when i try to press close button again, this time not having input field behind buttons of alert modal, then navcontroller.pop() runs but it 's called twice, a blank page displayed, warning displayed in console saying navigation stack now empty because was called many times.
simply, i just want to show some code snippets inside view, and using `xmp`, `code` and `pre` standard tags, but these are not working.
when i try to call or this.nav.push(tabspage), the ngafterviewinit callback is calling twice on the tabspage (page with tabs component).
and the child tab page creates twice.
this problem happen only when i try to navigate from push plugin (standard phonegap-plugin-push plugin) notification callback.
using this plunker phofhyperlink , which uses with the `ion-select` and `ion-range` components, the bound values don 't display on the components.
i 've put a regular `select` element beside it to demonstrate how it should work.
if you comment out it works as expected.
the color attribute no longer works for buttons in a fab list.
when i emulate ionic app on iphone, the datetime field doesn 't change value after select one.
no source code for ionic v1.x
using wkwebview, when swiping to go back, sometimes the app stops responding to further interaction.
no errors are thrown in xcode console.
sometimes it happens after trying swiping back 3 times, other times it happens after 50 tries - haven 't been able to reproduce it reliably.
==== js stack trace security context: <js object> 1: allcombinations(aka allcombinations) <js 2: findallfits(aka findallfits) subproject path: cordovalib incremental java compilation is an incubating feature.
i run ionic serve then if i get an error it displays over webpage so i need to close it everytime i debug.
in my app, i have a list with virtual scroll.
when the user taps on an item, a sub-page is shown.
when the user taps the back-button, the list is show again.
but when user changes device 's orientation (e.g.
from portrait to landscape) on sub-page and taps back afterwards, list is shown with only one item.
2.0.0-rc.3 i 'm updating to rc3 from rc0.
switching betwen inputs inside an `ion-content` causes screen to awfully "bump".
is there a reason why the dom polyfill phofhyperlink is not included with other polyfills?
popover can 't work normaly.
the position not ok, and the arrow not show.
when the toast dismisses other components on the page and outside, _e.g._ the sidemenu, back button, etc., are not clickable.
when i click on ion-select on ie or edge browsers, nothing happens.
if i use ion-label with some angular expressions, the expressions are copied in the aria-label as they are, without being evaluated.
example: phofcode in the dom it ends up being: phofcode
the collection-repeat directive is not handling scrollable content correctly; in multiple cases i can 't see all of the contents of the collection.
using navparams in a component throws an error when testing: phofcode
if you have an `<ion-input>` that gets added/removed using `*ngif`, its tab focus order becomes the last, even if it 's in the middle.
when an `<ion-input>` is followed by an `<ion-datetime>` in a list, pressing <kbd>tab</kbd> throws the below exception: phofcode
in rc3, with this sample code: phofcode every click on the buttons calls "a" handler, but "b" handlers are never called.
in rc2 this worked as expected using $event.stoppropagation() in "b" functions to prevent calling "a".
on rc3 when opening modal on android (browser emulation & device) i do not see anything.
its not frozen persay but pressing anything does nothing.
it turns out to be a css problem in the framework, this is not part of my custom css.
removing this rule correctly shows the modal and it functions as it should.
i have custom colors into $colors: ().
then, i wan to use those colors into color 's button property.
when opening a popover from popovercontroller, the default behavior is to automatically blur any focused element.
sometimes, it is not a wanted behavior.
when i create an new modal and in that window i could use scroll to bottom in the content.
when i close this windows and open it again it will then say after i call the function getdimensions: exception: cannot read property 'parentelement' of null
i wrote an app with a modal that is expected to be dismissed with either its own ancel button or the hardware back button.
however since an upgrade to ionic 2.0.0 rc 1 (rc 2 and 3 as well), it couldnt be dismissed with the hardware button, but will quit within several presses with the modal present instead.
if i manually dismiss the modal after pressing back button, i could find that page present is different from one i opened modal with, but some previous page.
nor do hardware back buttons dismiss loading indicators.
virtual scroll renders only last item when accessed through history stack (back navigation from another page) and the next page was used for long or heavily used memory
having some consistency issues when clicking the "hamburger menu."
as you can see here example phofimage so what happens is you will click the menu and sometimes it will work sometimes it doesn 't.
in my app first click always gets swallowed.
after that it looks like it randomly registers the click to open the menu.
i create a fab button at the bottom and the right in testcomponent which has some text and a lot of <br> to create a scrollable side.
the fab button but does not scroll down with the scroll view as expected for the button.
if i declare fab button in same component where ion-content is anything works, but if i load a subcomponent in ion-content in this case <test></test> for testcomponent where is my fab button, button does not scroll
the bug manifests when the connection is down, and the browser fires the at this point, the loading service crashs and stay on screen, without possibilities to remove it from screen, and user needs to reload de application.
when fires, handleerror function below is called.
the first time that i show the dialog it works but the second time it doesn 't.
the same code works on ios.
:processreleaseresources failed build failed total time: 1 mins 1.842 secs error: /users/
when saving multiple times in short succession, the watcher apparently breaks, and webpack gets stuck in "started" mode.
_ion-fab right bottom_ scrolls when used in segment.
screen shot at 11 28 32 phofimage
i can 't use any cordova plugins during development anymore.
(no splash screen, no sqlite, nothing)
at the end of the build the icon are copied to "/res" (cf phofurl instead of "/platforms/android/res" (cf : phofurl and then the splash screen and icon are default cordova one.
when using a ion-datetime element, the 12 hour time period (am/pm or am/pm) can only be used in the picker if the time includes only hours and minutes.
as soon as another format is being used, (e.g.
only the full hour "h a" or including seconds "h:mm:ss a", am/pm option will not be displayed.
when there is a list, the app is not loading dynamic content to the list on ios 10.1.1 mobile safari after built as browser
i was trying to upgrade from rc2 to rc3 my app but when i do npm install shows this error: skipping failed optional dependency /chokidar/fsevents: npm warn notsup not compatible with your operating system or architecture: fsevents@1.0.15 npm err!
so if you build a page that have a list of dynamic data pulling from the backend, it work with ionic serve but after built for the browser, chrome won 't refresh the list automatically
it 's a bit hard to describe so i made a video phofhyperlink showing the issue.
the problem appears when using the swiping back gesture on ios.
i recorded the video on a real iphone.
when navigating more than once the title of nav bar isn 't animated properly anymore.
when using back button on top left of app, it works like a charm.
deactivating swipe back gesture isn 't an option.
when content is scrolling and click back button or side menu toggle nothing is happen
i am using a simple list with virtual scroll, the first item gets indented by 16px.
this bug was already reported in #7059. this issue was closed as duplicate of #6961. in between #6961 seems to be fixed, but #7059 still persists.
the workaround i described back in july still works.
i have an ionic2 app , and a shared module written in angular2 typescript , the shared module is simple one component .
in my main app.module i 've imported the shared module and ionic:serve wirks fine i can see the component .
as i run ionic build android i get an error error: unexpected value 'mymodule ' imported by the module 'appmodule ' ngc failed ionic-app-script task: "build" error: error
the combination of itemreorder and itemsliding doesn 't seem to work on ios.
the html below won 't properly reorder the items on the gui on ios.
by "reorder the items on the gui", i mean that selected item can be moved, but no other items shift as you move selected item: phofimage am i doing somthing wrong?
if i do same sort of thing with a simple ion-item (non-sliding), reordering works fine ios.
if i use sliding item in this manner non-ios, it works fine.
it is not showing source map files while debugging in chrome.
in `1.4.0` istio-init was changed to use the same image as istio proxy, therefore you could infer that setting `global.proxy.image` would change the `image:` for both `istio-init` and `proxy`, however it doesn't.
in order to use my custom proxy image i had to set two variables: - `global.proxy.image` - which was a little counter intuitive.
slice `node.serviceinstances` from phofurl is not stable in terms of the order which results in the listener configuration flapping.
i 've downloaded istio 1.4.0 and took the command straight from phofurl but there is a problem with istio cni value overrides
mtls is enabled globally on my cluster.
i have a headless service with a statefulset of cassandra nodes and they can 't communicate even if i disable mtls.
#12551 says it doesn 't work with mtls but even without mtls i can 't get it to work.
i followed phofurl and also phofurl but no success.
in istio 1.4.0, `tracing.istio-system` has moved from port `80` to `9411`.
there is already a `zipkin.istio-system` service in the namespace on `9411`.
both services point to the same workload (jaeger).
this is a breaking change for us so just wondering why it was made and if it was intentional, it should have been in the upgrade notes (as we have upstream systems talking to tracing.istio-system).
the clusterrole for pilot is a little confusing, firstly secrets are defined twice: phofcode the second block (added in 1.4.0) gives pilot permission to create, update and delete secrets too.
what is that permission used for?
similar to phofurl the status field should be added by the server not in the manifests: <img width="316" alt="screen shot at 12 13 17" src=" phofurl
i 've noticed in the templated yaml for istio 1.4.0, a bunch of manifests contain a `creationtimestamp ` field, and they probably shouldn 't.
<img width="370" alt="screen shot at 12 05 33" src=" phofurl
i 've created an out-of-process adapter, it 's working well.
i want it to be customisable and added a configuration proto and yml files.
now this static configuration is passed for each request next to the payload.
that 's great, but i rather like to have this configuration passed once at the adapter startup instead of for every requests.
so i tried to switch the "session_based" attribute from "false" "true" and implement the infrastructurebackend proto file in my adapter.
and here is bug : i can 't see any calls my new infrastructurebackend service (validate, createsession, closesession), but my configuration is not totally ignored since i no longer receive for every requests.
so, is session_based adapter not yet implemented ?
is there a bug ?
or, better, what am doing wrong ?
:) ( tried get answers on stackoverflow few days ago but didn 't have any luck : phofurl )
when using `istioctl` to generate manifest, then the contains duplicate values in the `istioproxy` attributemanifest.
there are two entries for `context.proxy_version`.
this causes problems with some of our tooling since we parse the yaml which leads to a duplicate key error.
before using istio, the tps of my service app can exceed 4000/s, after using istio, the tps drop to 2300/s, and istio-telemetry service consume more than 1 core
it appears the operator is not processing a kv pair.
- galley 's probe always succeeds even though probe is failing.
- this is because galley 's probe phofhyperlink command does not return error and so error code of the command is always `0`.
the existing stackdriver tracing directions were confusing to me phofurl > additionally, tracing integrations based on opencensus (e.g.
stackdriver) propagate the following headers: > x-cloud-trace-context > traceparent > grpc-trace-bin what actually happens is that envoy will propagate any of the headers found.
in this case, we have configured it in the order: phofcode see the bootstrap configuration phofhyperlink and envoy 's extraction phofhyperlink and injection phofhyperlink logic.
a user only needs to to propagate one of these, istio will propagate all of them when stackdriver is enabled.
i suggest changing wording from: to do this, an application needs to collect and following headers from incoming request any outgoing requests: x-request-id x-b3-traceid x-b3-spanid x-b3-parentspanid x-b3-sampled x-b3-flags x-ot-span-context additionally, tracing integrations based on opencensus (e.g.
stackdriver) following headers: x-cloud-trace-context traceparent grpc-trace-bin to: to do this for zipkin, jaeger, and lightstep, collect following headers from any incoming request any outgoing requests: x-request-id x-b3-traceid x-b3-spanid x-b3-parentspanid x-b3-sampled x-b3-flags x-ot-span-context additionally, tracing integrations based on opencensus (e.g.
stackdriver) headers: for stackdriver, above headers or just `x-request-id` one of headers: x-cloud-trace-context traceparent grpc-trace-bin wdyt?
i can make pr docs soon (waiting for cla verification).
sometimes my istio gets into a state where istio-telemetry pod shows running, but nothing responds on 42422/metrics.
prometheus dashboard -> status -> targets shows 42422 is down.
image phofimage manually restarting the telemetry pod fixes it.
istio-telemetry exposes ports 9091/tcp, 15014/tcp, 42422/tcp.
liveness check exists for :15014/version but not 9091 or 42422 can a liveness check be added to :42422/metrics?
installing a new multi-cluster secret for a new remote cluster causes mixer to panic.
when using `istioctl manifest`, doesn't seem to have an effect
istio operator controller icp is the default profile.
the istio-system was stuck in terminating from a previous manual install of istio and bad clean resulting in the finalizer getting stuck.
creating the icp resource, the operator controller attempted to deploy istio, but since namespace was in a bad state, applies for resources in istio-sytem failed.
the reconcile loop was never re-attempted.
the istio-system namespace was cleaned up forcefully, but reconcile loop never re-attempted.
with namespace enabled for sidecar injection, run the following kube command: `kubectl run test --rm --restart=never -it --image=ubuntu -- echo hi ` this will hang forever.
this same command works in a namespace without side car injection.
tried to build istio and sidecar rpms for redhat vm mesh expansion, but failed with a lot of errors because the build scripts are not up-to-date.
i have an existing istio gateway with a list of 6 domains and a `simple` tls cert.
these domains all work fine.
after adding a new domain to the list that also should work with the same (wildcard) certificate, the new domain returns `curl: (35) libressl ssl_connect: ssl_error_syscall in connection to test.mydomain.com:443` from curl, while the existing domains continue to function properly.
moving new domain to a new item under `servers` list (with only that domain in `servers.hosts` and all other settings (port, tls) same) fixes issue.
i try to configure a timeout for an https host but the configuration has no effect.
followed instructions of access external service phofhyperlink and timeouts phofhyperlink
i configured my existing prometheus to scrape metrics from all of the istio services by copied the jobs from the istio prometheus configuration.
the job that reads the "prometheus port" from istio-telemetry service only get a "connection refused" as answer.
the prometheus job looks like this: phofcode the telemetry service is alive and well.
there is nothing to see in logging, except for `warn adapters unknown workload instance type: unknown {"adapter": which i think is not related to my problem.
when executing istioctl manifest apply commands, order matters in an unexpected way, but is not mentioned in the documentation.
specifically, i configured my minikube installation according to the instio setup instructions, to configure a demo environment.
i 'm also using an nginx ingress to forward calls into the istio ingressgateway.
when i applied the manifests in order mentioned in documentation, it worked.
i shortened invocation from 3 separate calls to one which combined commandline parameters (which i thought was fine do, since they don 't appear conflict) it ran without error, but created a gateway that always failed with a 503 "bad gateway" error.
env: openshift namespace: istio-injection=enabled as you see, when i deploy a image on the openshift (what ever image, here i used a nginx image), it lanched a deploy pod to do the job for me.
this is quite normal but, when the deploy job done, the deploy container completed while sidecar still running... image phofimage here's its log page.
we can see running status of sidecar .
what should i do to prevent this situation or just treat it as a bug ?
i have to implement authorization policy based on regexp analysis of the url path: some part of the url should contain id of authenticated user.
the only way i found it - lua envoyfilter.
i have a service, jwt authorization policy with keycloak as identity provider, and some gateway-routing staff which works fine.
i have envoyfilter which is correctly inserted into sidecar by pilot.
but when execute the call, envoy_on_response function is ignored.
my configs: service - deployment.yaml in the archive envoy filter - envoy-filter.yaml in archive
my custom mixer adapter that listened on check events is not called anymore when a service is accessed.
i guess that 's because of the move of telemetry from mixer to envoy proxy.
so are the adapter listening on check events are deprecated ?
or is that a bug ?
the automatic injection of sidecars is not working.
manual injection using istioctl works fine.
the namespace is labeled: labels: istio-injection: enabled no pod is scheduled.
the following log is printed: 0s warning failedcreate error creating: internal error occurred: failed calling webhook post phofurl net/http: request canceled while waiting for connection (client.timeout exceeded while awaiting headers)
kiali configuration for prometheus namespace is not working, the configuration is just ignored.
i 'm trying to use an already installed prometheus and i don 't have any option apart from the namespace setting to set the url as coded here: phofurl i haved tried the next things using next configurations: phofcode
helm install of sidecarinjectorwebhook fails with error nil pointer evaluating interface {}.imagepullsecrets
when running tests written with new test framework, it seems like kind only export logs for control planes, e.g.
phofurl phofurl for test written with legacy framework, kind exports logs for both control planes and applications: phofurl
all the requirements values in should be `1.4.0`.
after upgrading to istio 1.4.0, istio-ingressgateway is failing to route requests to upstream services.
istio-ingressgateway inexplicably returns a 503 `unavailable:no healthy upstream ` for all virtualservices.
my setup looks like this: i have several services which are attached to the gateway directly and routed by hostname (service1.example.com, service2.example.com, etc.
), and an nginx proxy that proxies requests some other services (this is the service the bare domain - example.com - routes to).
this setup worked fine before in istio 1.2.5, and actually seemed be working at first after the upgrade 1.4.0. i didn 't make any alterations gateway or virtualservices since upgrade either.
gateway: phofcode nginx virtualservice: phofcode dex virtualservice: phofcode example of failing requests: phofcode
after installing using these guides: setup -> platform setup -> google kubernetes engine setup -> install -> customizable install with istioctl task in documentation for certmanager + let 's encrypt fails at setting up a demo application phofhyperlink .
doc location: tasks traffic management ingress kubernetes ingress with cert-manager when you execute the `cat <<eof | kubectl apply -f - ` of helloworld service, deployment and ingress in docs the first error you get is: phofcode after that, if you create a `temp.yaml` file of the helloworld service, deployment and ingress, and `kubectl apply -f temp.yaml --validate=false` the file you get this error: phofcode this is pretty straightforward to reproduce.
either something isn 't clear in documentation or there 's a problem with gke + istio + cert manager.
i 've been playing around with this tutorial for a while now and i 've never had it successfully work on gke any of 1.3.
i was hopefule that 1.4.0 would work as i saw documentation had been updated.
if i change the namespaceselector in the via `kubectl istio-sidecar-injector` to phofcode i noticed that the is updated shortly to the desired state i defined above.
after just a few seconds, gets updated by another mechanism and it defines following state: phofcode it 's not clear to me what i should do differently in order to get desired state that claimed at top (only select namespaces that do not have disabled label).
can somebody help me point at what am doing wrong here?
upon running the application with on kubernetes v 1.14.7, was the getting the following when verifying the heartbeat using a request header based canary routing: response status: `415` grpc-status-code: 13 grpc-message: `content-type is missing from request`
i deployed istio 1.4.0 using `istioctl` command as mentioned in the doc phofurl after creating the gw and vs i tried to access the bookinfo ui but the css was broken as follow bookinfo phofimage useful informations : phofcode phofcode config_dump of gateway config_dump.zip phofhyperlink
when install istio using istioctl, the image values of istio components ' deployments had the prefix `istio` missing from the image section.
for example the pilot deployment 's image was set to: `/pilot:1.4.0`.
some times when a pod get restarted, the new pod ip not sent to all connected to envoys.
the old pod ip is removed from the cluster members but the new pod ip does not appear in the cluster members.
only when we restart pilot all envoys get updated endpoint.
based on the doc, the jaeger service could not be accessed.
but, when i run the 'docker run -itd --restart=always --name=jaeger -p -p -p -p which could accessed via phofurl docs installation
mixer `source.namespace` attribute missconfigured on the envoy sidecar when the pod name includes a dot.
for example, if the pod name is in the namespace 'demo ', source namespace inside sidecar proxy will be set to instead of 'demo '.
impact: - istio metrics (tcp and http) are reported as "unknow".
- sadly for me, i have around 200+ services with a dot in deployment name note: i am not very familiar with istio codebase.
i am struggling to identify lines of code where namespace is parsed.
i am more than happy to raise pr to fix this issue.
would someone be willing point me in right direct?
using istioctl to set the email value (for the cluster issuer) of the included cert manager is not possible when installing istio.
`istioctl analyze`, when pointed at a file with a line containing `# ---`, emits a parse error of phofcode likely the parser used by istioctl is trying to split on end-of-stream markers incorrectly and not realizing its commented out.
this sounds innocuous, but it 's not - the frequently used microservices-demo app at phofurl for example has this comment in its generated istio config, which triggers the bug: phofcode
if the `--workload-cert-ttl` of citadel is longer than the ttl of the intermediate certificate the that is used to issue certificates.
your workload certificates will become invalid when intermediate expires and citadel will not refresh them as certificate itself is not yet expired.
for 1.4, when i describe my product page pod, i'm getting: phofcode --- it used to be a msg like this in 1.3, which i think it is more useful.
phofcode for auto mtls (kudos to the team that delivered this!
), it is working nicely with describe: phofcode i could prefer to have clients configured http automatically here so have the protocol info as in 1.3. for authn tls-check cmd, what does `-` mean below?
btw, loved the status=auto here.
does it mean doesn't know what client is configured?
and there isn't any destination rule?
we need a better indication for this.. phofcode 1.4
i installed istio using the new 1.4.0 istio operator.
i used the example demo profile for the istiocontrolplane.
apiversion: kind: istiocontrolplane metadata: namespace: istio-operator name: spec: profile: demo the issue is that 1.4.0-alpha ... version was installed for the control plane and not 1.4.0. i updated istiocontrolplane to following.
apiversion: kind: istiocontrolplane metadata: namespace: istio-operator name: spec: profile: demo hub: docker.io/istio tag: 1.4.0 the tag was properly applied but hub was not.
here is an example of one of component images after applying updates.
from phofurl it mentions that there should be a istioctl.bash and a _istioctl file in the tools directory for bash completion.
when supplying multiple route rules as part of an ingress spec: phofcode when using the ingress controller as part of processing2 true`), i see that `curl echo1.example.com` hit the echo1 service, and `curl echo2.example.com` also hit the echo1 service.
if you flip the order of these rules around, you 'll see `curl echo2.example.com` go to `echo2`, and `curl echo1.example.com` go to `echo2`.
in a dual stack k8s env, ipv6 traffic cannot get out from pods with sidecar injected.
after some debugging, it seems following ip6tables rules added by istio-iptables.sh reject incoming icmpv6 packet, which is used for neighbor i suppose this was not by original design, as the script says dropping all inbound traffic.
after adding rule which allows icmpv6 in the container, the traffic can get out.
1. istio mixer custom adapter guide uses mixer_codegen.sh script which invokes protoc with argument "docs_out=xxxx", there 's no protoc-gen-docs plugin anywhere on the internet.
is it a google internal plugin?
or is protoc-gen-docs migrated to protoc-gen-doc while the istio mixer custom adapter guide hasn 't update accordingly?
error message: " --docs_out: protoc-gen-docs: plugin failed with status code 1. attempt 1/3 to run protoc failed with exit code 1 protoc-gen-docs: program not found or is not executable please specify a program using absolute path or make sure the program is available in your path system variable " 2. protoc.sh invoked by mixer_codegen.sh uses variable repo_root while it seems to be null at run time.
supposingly, error message: " /common-protos: warning: directory does not exist.
import was found or had errors.
import was found or had errors.
attempt 1/3 to run protoc failed with exit code 1 "
following this demo: phofurl admins-mbp:~ admin$ kubectl logs -l app=sleep -c istio-proxy new config, resetting budget retry (budget 10) /etc/certs for changes 0 starting command: [-c --restart-epoch 0 --drain-time-s 45 --parent-shutdown-time-s 60 --service-cluster sleep.default --service-node --max-obj-name-len 189 v4 --allow-unknown-fields -l warning --component-log-level misc:error --concurrency 2] --allow-unknown-fields is deprecated, use instead.
grpc config stream closed: 14, no healthy upstream unable to establish new stream proxy is not ready: config not received from pilot (is pilot running?
): cds updates: 1 successful, 0 rejected; lds updates: 0 successful, rejected proxy is ready admins-mbp:~ admin$ kubectl logs -l app=httpbin -c istio-proxy /etc/certs for changes new config, resetting budget retry (budget 10) starting command: [-c --restart-epoch --drain-time-s 45 --parent-shutdown-time-s 60 --service-cluster httpbin.default --service-node --max-obj-name-len 189 v4 --allow-unknown-fields -l warning --component-log-level misc:error --concurrency 2] --allow-unknown-fields is deprecated, use instead.
grpc config stream closed: 14, no healthy upstream unable to establish new stream proxy not ready: config not received from pilot (is pilot running?
): cds updates: successful, rejected; lds updates: successful, rejected proxy ready i cannot see any log entries.
how can i verify if everything set up correctly?
using model: cluster 1: service sleep , pod sleep-in-cluster-1 cluster 2: service helloworld, pod helloworld-in-cluster-2 when service sleep in cluster 1 call service helloworld in cluster 2, everything is ok, except report info of pod most destination info is unknown, like: `destination.name`, `destination.namespace`, though are set properly like this: phofcode set up environment like: phofurl haven't test multi-network scenario.
[ x] policies and telemetry
after upgrading istio 1.3.5 from 1.2.2, all deployment rollouts via replicasets fail with error: phofcode ` obtaining logs from the sidecar-injector pod returns: data: err=template: inject:139: function "structtojson" not defined spec=`
in rare cases we 're seeing that sds is missing an event entirely that 's causing only the root cert to get pushed but not the key/cert pair.
looking through the logs we can see that the root cert gets pushed out once secret is eventually found: phofcode you 'll see that no key/cert pair gets pushed.
this causes tls/mtls gateways to break completely.
the way to recover from this is to delete secret and add it back again.
this results in following logs: phofcode
new way to download just istioctl is not working phofurl
404 is returned when http calls contain host with a trailing dot.
i have deployed istio in kubernetes through the official helm chart, but cannot access the nodeport service of the istio-ingressgateway.
any ideas what could be wrong?
most of the istio control pods don't have request limits.
this means pod could consume memory and cpu resources without bounds and cause issues.
all pods should also have a liveness probe to allow for better pod management.
| image | readiness probe | liveliness probe | request size request limits --- --- --- --- yes no yes no no no yes yes grafana/grafana:6.4.3 quay.io/kiali/kiali:v1.9
1) configuration is not respecting initial delay.
in my app initial delay is set to 120s but pod is in running state before that.
1/2 running 0 34s 2) it sets the application in running state even if readiness probe fails - `warning unhealthy 15s kubelet, readiness probe failed: http probe failed with statuscode: 503`.
also, it should start checking after initial delay.
when i check the website it says: `no healthy upstream`.
it routes the traffic even if health check fails.
the `mixer out of process adapter walkthrough` guide in the wiki has a typo (probably) phofurl in the step 3 code for the adapter, in the imports section, import `istio.io/istio/pkg/log` is not valid, and during go build it fails with phofcode maybe this should be `istio.io/pkg/log` for phofurl ?
i am installing cert-manager version 0.11.0 and getting this error.
>error: unable to recognize "test.yaml": no matches for kind "clusterissuer" in version
we are experiencing random disruptions with some sidecars.
from time to time, an envoy starts to take exactly 10s to forward requests to an specific destination.
it has happened 4 times us right now, and a simple restart solves the problem.
but we are unable pin point what was causing the specific destination take 10s long.
example: my-first-api -> | 20ms my-first-api -> my-third-api/anyendpoint | 10 seconds this is happening at envoy because we have spans telling us so, and we made tests inside the container that took only ~3ms.
no retries were configured at our side.
i have two services which speak grpc.
when the request hits the client proxy it is logged as http/2.0 but when the request hits the server proxy it is logged as http/1.1.
consequently when response is parsed by client a parsing related exception is thrown.
currently, we are using istio 's ingress gateway as the public endpoint for many of our microservices.
furthermore, we are using its reverse proxy capabilities to redirect traffic based on uri format to our web frontend or various aks-hosted backends.
what i am trying to achieve at the moment is splitting 'regular ' web requests (i.e.
traffic destined for dynamic web pages) from static content requests (css, images, etc.).
my current setup uses prefix-based uri matching to identify requests containing the subpath '/static ', rewrite the subpath name of cdn endpoint that static content is hosted on, then finally forward traffic azure cdn where said static content is hosted.
for example: phofcode furthermore, i added a service entry and destination rule for azure cdn, since it is an external resource: phofcode now, while istio does perform basic operations described in vs config (i.e.
rewrites request uri from _/static/whatever.css_ _/test/whatever.css_ and forwards traffic cdn), every test that i have ran so far yields a 404 not found despite requested file being present in said path (accessing cdn url directly downloads test style sheet) my first instinct was raising a support ticket with microsoft, suspecting a possible limitation their azure cdn / storage blob product.
however, after week of back-and-forth emails and log analysis, their conclusion has been that it possible that istio could strip away some of request headers, resulting in said 404. and since i couldn 't find any solid reference header manipulation in documentation, thought might move my inquiry here - did anyone attept something similar until now?
does any sort header manipulation / stripping occur when request gets processed by istio?
am happy provide logs / packet captures forwarded requests if it helps with troubleshooting process.
in phofurl we added `request.host` to the expression for `destination_service` labels.
this was added as a fallback for cases when would not be set (pass-thru, blackhole, nr).
in theory, this is a nice idea.
however, this is problematic at ingress, as the `host` header can be set to arbitrary values.
example of sending such a request: `curl --verbose --header 'host: <gateway ip>/no-route` this results in metrics with a destination service label containing junk -- some of it potentially harmful.
example from prometheus: image phofimage this is problematic for number of reasons: - allows arbitrary explosion of cardinality metric, as bad actors could send an unending stream requests with all different `host` headers - pollution the `service` variables in grafana dashboards - potential xss, etc., when rendering metrics with bad `request.host`
i am installing istio ingress gateway using below annotation to use the ip address from the different resource-group but, it 's not considering the change.
when deleting all k8s worker nodes any namespace that have istio injection enabled never start up.
there error we receive is: internal error occurred: failed calling webhook post phofurl net/http: request canceled (client.timeout exceeded while awaiting headers) i believe this is a result of the failing and never retrying.
i have mtls enabled globally.
and both of my services are running with sidecar container with mtls enabled with default policy.
when i try to connect to internal service over `https` i am getting below error: > curl: (35) protocol
at last check, all 3 of the multi cluster install scenarios are failing on istio.io.
this issue is for changes required in the `istioctl` tooling.
there was a beta.3 build last night but i now that the latest installer pr phofurl is not in that.
it is in the build which i will test with today.
normally i do a `istioctl manifest apply ...` to install and then a `istioctl manifest generate ... | kubectl delete -f -` to remove it.
sometimes when trying to remove i get an error like: error: error parsing stdin: error converting yaml to json: yaml: line 3: mapping values are not allowed in this context.
follow the kiali task docs (the version of the docs that use `istioctl` - phofurl and notice that when installing kiali via `istioctl` using the default profile, the user 's custom secret gets overwritten with demo secret.
(note: as of nov 7, 2019, that link to docs above still shows helm - this pr phofurl is waiting to be merged, when it does, it will show user how to use istioctl rather than helm).
getting a 404 http response when calling service endpoint and resolving to istio-ingressgateway external ip (port forwarding to a jumpbox 30005 to 443 pointing to istio-ingressgateway external ip and below scenario): phofcode similarly, after enabling logging with helm: phofcode seeing the following output in the istio-ingressgateway pod: phofcode where is one of the usercluster nodes where the application is running, and 12688 is node port.
curling application service external ip directly gives a valid response.
there is a kubernetes secret which has been volume mounted on istio-ingressgateway which contains valid tls.key and tls.crt for domain: phofcode the filepath similarly references in gateway resource inside application namespace:
when using a headless service with a statefulset, grpc connections to the ss pods fail with the following error message: `rpc error: code = internal desc = server closed the stream without sending trailers`.
i have tried adding serviceentries for the headless services to no avail.
i have also tried replacing `grpc` with both `tcp` and `https` in port names.
below is an example of resources being used: phofcode phofcode phofcode phofcode additionally, i can see connections in envoy logs, but they seem like they should be succeeding: if i change service back to a non-headless service, problem immediately goes away.
the only difference could see in logs was that when it was working, it was using http2 (non-headless), but when a headless service was used - http1.1 showed up in requests.
performing a `deepcopyobject` on generated types in the library in duplication of all repeated elements (e.g.
in istio 1.4.0 go.mod file is showing go 1.12, but in it is showing minimum version should be go1.13.
in debugging session with a few others, using an mtls enabled cluster, saw a dash like the following: image phofimage it didn't seem like the number of certificates signed, etc., was correct.
query used is: `sum by (typeurl) it should be: `sum by (collection) the legend should be updated appropriately too.
when `source` peer metadata is not present, the edges reporting for stackdriver 's mesh telemetry api will still generate a `trafficassertion`.
this leads to requests like: phofcode this request results in: `wasm log stackdriver_inbound: meshedgesservice failure: 3 request contains an invalid argument.`
when installing istio from the `istioctl x manifest apply ...` method with `--set results in a tracing pod that cannot be scheduled due to the incorrect container image name being used.
phofcode editing the `istio-tracing` deployment and chaning the image to and saving corrects problem.
`istioctl analyze` prints "no validation issues found" and returns a 0 exit code on failing to parse all input files.
we have gke cluster with custom istio installation 1.2.6. with gateway configuration like this phofcode and we have external services that has connections to our service cfg.mysiteaddress.ru.
there are were working fine.
but then we update istio to 1.3.4 the external services begin to fail connections: _error: self signed certificate_ with debuging we saw wrong certificate wildcard.cert from "*" host but gw config haven 't been changed.
also one strange thing - a browsers connecting to cfg.mysiteaddress.ru well.
so we found this problem: `curl phofurl -iv --tlsv1.2` - works fine `curl phofurl -iv --tlsv1.3` - faild ssl: no alternative certificate subject name matches target host name, because get default cert i made tcpdump and compare packets - both has correct sni cfg.mysiteaddress.ru
after fix on sds done on version 1.3.4 for updating certs(#17409), i have been testing with letsencrypt and i 'm getting a nil pointer exception.
for `1.4.0-beta.2` the operators default control plane tag is still `1.4-dev`.
the httpretry docs phofhyperlink link to the relevant envoy docs to define valid values for `retryon`.
but the link points to envoy `latest` docs; there is no way to know if the options described there are valid for the version of envoy included in your istio version.
the docs and the helm install of the demo profile mention that there should be a jaeger-agent service (with no clusterip) after installing the demo profile.
i see the service when using helm, but not when using istioctl.
received a fatal error: phofcode
go to view logs in the kiali console and you will get an error about missing permission.
istioctl help verify-install shows phofcode while the file does still exist, the use of the file to install istio has been removed from the docs so i'm not sure if this still needs to be documented.
i'm not sure how upgrading works if they installed using file in 1.3.
istioctl profile list still shows demo-auth profile
addrconn.createtransport failed to connect to 0 <nil>}.
err :connection error: desc = "transport: error while dialing dial tcp i/o timeout".
reconnecting... transient_failure turns unavailable: 1 error occurred: t* liveness: rpc error: code = unavailable desc = all subconns are in transientfailure, latest connection error: connection error: desc = "transport: error while dialing dial tcp i/o timeout"
envoy too many open files ( tcp sock connections), more than 44k, when use istio-ingress-gateway & my service written by go.
various installer templates (for example gateways/ingress-gateway chart) have a hardcoded exclusion statements that overwrite labels when "istio-system" is used as a namespace.
this causes the release label to be to set to "istio" rather than the provided release name.
this affects resources such as the horizontal pod autoscaler that require the release label to be match ingress-gateway pod.
this seems unintentional as all other resources seem have their release label set provided name.
- when creating services that have multiple ports in `spec.port`, __all__ envoy process in the cluster causes high load at the same time.
- the cpu load increase approximately linearly by the number of ports in the svc.
- knative serving deploys `100 svc * (4 ports svc + 2 ports svc + 1 svc)` on e2e test.
it produces `envoy proxy is not ready` error after more than 20 svc are deployed.
seeing the following bug in the istio operator logs from image phofurl logs and icp content attached
`go get istio.io/istio` fails due to unzip error.
the following files have a `*` in the filename which is not os agnostic and hence the unzip fails in go get:
istio ingressgateway responds with error 503 to request to working service when sds secrets are enabled for the gateway.
when deploying a gatway with a tls enabled https port with hosts=* gateway goes into an inifinite handshake error loop and consuming 100% cpu.
debug logs (enabled by surfaces the following output: phofcode
i have a rancher 2.3.2 managed cluster with istio 1.3.3 deployed.
the sidecar injection is enabled for a namespace where there are multiple applications running in.
redeploying all the running applications were successful except for one.
digging into the logs, it looks like the istio-proxy sidecar cannot start and it is unclear why.
all system level istio components are running and healthy.
there is an issue in kiali when using configuration wizards available at the service details page.
i'm talking about this: !
istio ingress gateway (more specifically envoy proxy) memory keeps increasing when some bi-directional grpc streams (http2) are opened.
my test case is using my own load-testing tool, which open one grpc bi-directional stream per simulated client, then send one message every 10s.
for this test i started 2500 clients by batches of 100 every 20s.
in this graph : - purple : client connexions count - green : istio ingress gateway 's pod memory usage image phofimage looking at the envoy 's stats: - : 2500 is stable - keeps increasing keeps increasing if i start only 500 clients, the memory keeps increasing but at a slower pace.
also, if i stop the clients before the oom kill, proxy my conclusion is that envoy leaks some fixed memory size per connexion.
i had issue on istio 1.3.3 before upgrading and also have it on another cluster running 1.2.2 on 1.2.2 cluster, proxy was using 720mb or ram before started my test.
think was re-used until it went above and start grabbing more ram.
until it was oom killed image phofimage this is an early bug opening and expect to grab more metrics from envoy proxy.
also think i 'll open an issue on envoy 's side.
adding a `maxamount: 0` rate-limiting policy to all services, about 0.3% of all requests are still served under load
i 'm running my jobs in istio mesh, which does not expose any ports.
so i have set the following annotation: "0"` unfortunately, now i can 't call: `curl -x post from my main container to cleanly complete the job.
it works correctly without that annoutation but it 's raising probe errors, which i don 't need.
i use shared control plane (multi-network) to deploy istio by helm.
when i tested request two different clusters ingressgateway,the request only sent to the control plan cluster.
when installing istio v1.2.8 using helm 2.14.1 the nodeagent is installed even though it is marked as being disabled at both the chart and the subchart level, this is using the default release by istio.
this is causing nodeagent to enter a crash back loop off with error reading `error ca provider missing`.
i have configured serviceentry to point to external server which tls enabled with self-signed cert.
i am getting verification failed issue.
our corporate ca has to be added to the ca certificates and how do i add that the istio-proxy?
tried issue curl from the istio-proxy and here is the curl -v <myhost> output.
------ * trying * connected <redacted> port 443 (#0) * found 148 certificates in * found 592 certificates in /etc/ssl/certs alpn, offering http/1.1 ssl connection using tls1.2 / server certificate verification failed.
cafile: crlfile: none closing connection 0 curl: (60) server certificate verification failed.
cafile: crlfile: none more details here: phofurl curl performs ssl certificate verification by default, using a "bundle" of certificate authority (ca) public keys (ca certs).
if default bundle file isn 't adequate, you can specify an alternate file using --cacert option.
if this https server uses a certificate signed by a ca represented in bundle, verification probably failed due a problem with (it might be expired, or name might not match domain name in url).
if you 'd like turn off curl 's of certificate, use -k (or --insecure) option.
the process described to install a shared control plane in a multi-network environment ( phofurl fails.
after installing istio following the current instructions, citadel shows grpc security handshake problems.
citadel logs phofcode i have stopped any additional installation steps right here.
all alpha features must be guarded by a feature flag and must meet specific requirements to exit alpha: phofurl please add a feature flag guard for this feature.
upon a grpc server crash, the channel state only gets updated 30 minutes after the disconnection.
tested on a kind cluster and on a bare metal k8s cluster: following the task: phofurl when it comes to check that the services only accept tls : phofcode when the istio cni is enabled i get 200 success codes instead of the expected 503. when it 's disabled, everything is fine.
when you define a subset in a destinationrule for a kubernetes service with endpoints, the envoy endpoint is missing for that subset.
server side code example: phofcode
nginx cannot proxy back to istio ingresses.
i 'm unsure if the issue is in istio or nginx but thought i 'd file it here to see if anyone could pick apart the debug logs on nginx (i don 't see any information on the ingress gateway pods logs).
when istiocontrolplane cr is removed, most of the control plane is removed.
there a few resources left over: - some secrets generated during the control plane use - the control plane namespace itself (istio-system) phofcode
we have enabled istio and injected side car.
as part of container start up.
we try to install some extra packages using `npm install` command.
`npm install `command fails with following error when istio is injected.
`npm` can be reached using a corporate proxy error phofcode in order to connect to external service, i have created a `serviceentry` and `destinationrule` but unable to get `npm` install command work.
serviceentry phofcode destinationrule phofcode istio config map phofcode
i use istio ingress-gateway enable https in aws eks and then test my service by locust.
when testing, everything seems good, but when i stop testing, the error occurs.
i have a pod, which has readiness and liveness probes.
for some reason, readiness probe fails and liveness probe still works.
pod is still shown as running but not ready and endpoint shows empty.
istio ingress gateway still forwards traffic to the pod.
it looks like pilot doesn 't trigger any eds push to ingress gateway pod if endpoint becomes empty.
pilot log when pod readiness probe fails and endpoint becomes empty.
the following code in getwaittime() has an overflow bug (e.g., when = time.hour * 90000, gradeperiod becomes a negative number due to the overflow).
graceperiod := * / time.duration(100)
when a serviceentry 's resolution type is updated from `static` to `dns` after it is created, pilot generates "ads tads:eds: ack error ", leading to inconsistent proxy state across the mesh - endpoints across the mesh have different endpoints because further eds pushes fail with the ack errors.
the proxies generate the error error_detail:<code:13 message:"malformed ip address: somevip.force.com.
consider setting resolver_name or setting cluster type to 'strict_dns ' or \'logical_dns \'" >
now `mesh manifest diff` outputs some string like this: phofcode
when the kubernetes `service` resource in front of a deployment is exposing a port that doesn't follow the naming conventions, ingress spans aren't being created.
i would expect * egress * spans to also not be created.
currently, egress spans are being created, but not ingress spans, which seems inconsistent to me.
documentation reference: phofurl > ... confirm that your ports conform to the istio
rbac not working when defining servicerole accessrule services different than fqdn.
the ingress sds fails to reload a valid ssl cert secret if the secret is replaced.
throws a warning > server key/cert change in secret
istio pods after installation are running but are not ready
deployed the bookinfo app and expose the "productpage service" and generated traffic using the productpage svc route , but in grafana dashboard nothing is showing up.
if the envoy process exits outside of pilot-agents lifecycle management, it currently doesn't restart it.
it feels like it should?
after our istio-sidecar-injector was upgraded from to it began crashing and went into a crash back off loop with the following error: phofcode as a workaround i added the following to the deployment for the istio-sidecar-injector at path of phofcode
i followed the guide from this link ( phofurl and using *enable via helm option globally* method to use readiness probe in my application.
we are running istio v1.3.3 (this also happend on v1.3.0), most of our applications are running fine.
however, in one of our deployments the cpu on the sidecar is pegged at 1.0 for the life of the pod.
this happens for majority of pods in same deployment but not all.
the pod contains nginx, istio-proxy and an application container all which have normal cpu use except istio-proxy.
i turned on debugging on sidecar however there are not really interesting.
phofcode i was able to collect an strace from pid problematic pod phofcode here is output kubectl -n $namespace exec -it $pod -c istio-proxy -- top a pod with busy-envoy phofcode there has been a forum thread about it, but this is now ongoing without any resolution.
so far only workaround has been to downgrade sidecar to 1.2.6 phofurl any ideas how i can troubleshoot further?
we are running istio v1.3.3 (this also happend on v1.3.0), most of our applications are running fine.
however, in one of our deployments the cpu on the sidecar is pegged at 1.0 for the life of the pod.
this happens for majority of pods in same deployment but not all.
the pod contains nginx, istio-proxy and an application container all which have normal cpu use except istio-proxy.
i turned on debugging on sidecar however there are not really interesting.
we are running istio v1.3.3 (this also happend on v1.3.0), most of our applications are running fine.
however, in one of our deployments the cpu on the sidecar is pegged at 1.0 for the life of the pod.
this happens for majority of pods in same deployment but not all.
the pod contains nginx, istio-proxy and an application container all which have normal cpu use except istio-proxy.
i turned on debugging on sidecar however there are not really interesting.
we have migrated our legacy application to kubernetes where it uses istio-ingressgateway for tls termination and routing.
for sake of backwards compatibility we went with a san certificate for istio-ingressgateway.
post this we are seeing issues from our clients where requests to our domains fail during ssl handshake even though the domain name requested is the same as the cn on the certificate.
passing sni info(servername) resolves this issue for them, indicating that gateway is expecting sni info from client.
is it possible to not use sni and pass same certificate for each domain?
just setting up istio on docker for windows locally, fails, with phofcode
whenever i click on a service in the console i get the message `sorry, there was a problem.
try a refresh or navigate to a different page.` on screen, and in the chrome console this: phofcode
working through the kubernetes services for egress traffic example at phofurl under the `use a kubernetes service with endpoints to access an external service` section, step #6 shows accessing the wikipedia service from the istio sidecar pod with istio's mtls disables.
this step should get a valid response, but end up getting a `exit code 35`
following azure 's tutorial phofhyperlink , at
i am trying to install istio with `curl -l phofurl | istio_version=1.3.3 sh -` but getting below error: >curl: (6) could not resolve host:
`istioctl` experimental `analyze -k` command throws an error.
after enabling mtls, grafana doesn 't show data from custom dashboards
helm 2.15.0 fails to properly enumerate `.values.global.arch` in `_affinity.tpl` when the values are integers.
this results in deployments missing key elements and values for deployments, for example: phofcode quoting the values in `values.yaml` like phofcode produces the desired yaml.
`use_remote_address` cannot be set to `false` on filter via the new envoy filter api.
this seems to be the case for `booltype` values (as opposed to `bool`) : i see the same problem for `use_remote_address` & `generate_request_id`, whereas i can set to `true`.
cf : phofurl given the following gateway : phofcode the `use_remote_address` filed is set by default `true`.
when applying following `envoyfilter` : phofcode the `merge` behavior doesn 't take into account `use_remote_address: false`.
you get following listener `istioctl pc listener --port 80 -o json` phofcode
hi,buddies,i faced a problem about istio-mesh,when i get the metric "istio_requests_total" data through prometheus ,i found that the metrics data sometimes can be lost over a period of time, i use this promql to search the metric 's data: <pre><code> </code></pre> it will return many metric data,so i just paste the key part: image phofimage in this picture ,you will find exception datas in red box,there are two problems: firstly,the istio_requests_total number 500 straight down to 1,i thinks number should constantly increase, number at ) must large than 500 at not.
secondly, between ) and ),there is no metric data to capture,so metrics data was partly lost.
it is important for me,can you give me some ideas?i 'm pleasure to provide more details if need.thanks.
imo the binaries should match the operating system uname.
on linux - this is `linux` on osx this is `darwin`.
the images are currently named `osx` which makes executing a simple curl operation difficult for those that don't like to run magic install-everything shell scripts that require root from the internet...
the operator is not starting a proxy for pilot.
the last i was aware, this was mandatory: phofcode
example from doc: phofurl the mapping phofurl appears to be wrong.
fails for the follow components: - configmanagement - galley - gateways - ingress egress security citadel telemetry telemetry trafficmanagement pilot
we have this on all of our clusters, pilot seems to push config every 5 minutes and i 'm just wondering why?
this is on a simple testing cluster which is doing basically, nothing: <img width="794" alt="screenshot at 22 25 56" src=" phofurl it looks like all the proxies reconnect: phofcode
this is a follow on from phofurl as it 's technically a different issue.
when envoy needs to reload listeners, this can result in a 503uc for in-flight requests, for example: <img width="1680" alt="screenshot at 21 15 47" src=" phofurl
whilst debugging a different issue and watch the envoy logs, i noticed that when a new instance of an upstream comes up, the first connection fails, and the second works.
phofcode i don't believe this is causing any impact other than i'm guessing a tiny bit of performance, but thought i'd point it out anyway in case it's highlighting a race condition or some other undesirable behavior.
i have installed istio with sds enabled and all works fine except that secrets are not getting reloaded by sds.
i can successfully submit a cert-manager certificate like phofcode and the secret will be created in the istio-system namesapce.
phofcode however the logs for the ingress-sds process show phofcode the above logs show where i deleted certificate and secret from istio-system namespace and then reapplied above certificate.
websocket connections fail when passing through istio-ingressgateway as the `connection` and `upgrade` headers are not passed through to the backend application.
we are seeing intermittent 503 's on long running requests.
we have an endpoint that takes around 4 minutes to respond, and it can fail any time within that.
we 've seen as low as 6 s. sometimes it completes without issue.
the flow looks like this: -> `[search-one]` it always fails in the same way: - `dc` flag from the destination `search-one` envoy - `uc` flag from the source `ingress-nginx-internal` envoy phofcode we 're at a bit of a loss at the moment, and wondering if you 've seen anything like this before.
if we curl application locally on pod (bypassing envoy), we do not see a failure.
the stackdriver adapter performs poorly when handling concurrent `report` rpcs that contain trace spans that need to be exported.
serviceentries with wildcards are only matched as exact matches instead of trying to use the wildcard information at all.
this means se with "*.bookinfo.com" would not match "eu.bookinfo.com" but the vs would be marked invalid.
when `x-request-id` is provided in request header, the request can no be displayed in jaeger.
is there any format requirement to the `x-request-id`?
while using istio-1.3.2, i encountered a bug that sometimes sidecar send check request, but sometimes not.
this causes the rate-limiting incorrect.
i also did some code change phofhyperlink as an experiment in istio/proxy to check the behavior, turns out that after i disable some condition check, the sidecar is sending check request even under high traffic load.
kiali is unable to capture the traffic for bookinfo app on openshift 3.11 on ibm cloud.
deployed the bookinfo app and expose the "productpage service" and generated traffic using the productpage svc route , but in kilai nothing is showing up.
but if i expose a istio ingress gateway service and generate traffic some portion of traffic showsup in kiali.
question: is it necessary to use istio gateway to see in kiali?
facing issue setting up nifi using istio.
both nifi and envoy proxy containers comes up successfully, but unable to invoke the web ui and receives the error *curl: (56) recv failure: connection reset by peer*
we have situations where pods need to perform a cleanup sequence during shutdown that requires all of the following to be true: * istio-proxy container up and running * pod needs to make outbound calls * pod needs to receive inbound calls (using the pod ip, not the service ip) when the pod receives a sigterm it starts cleanup sequence.
this can last up 4 minutes (the is set `240`).
the istio-proxy container is kept up and running since we inject following into its definition (via a customized sidecar template) phofcode in istio 1.1.x, all of this used work seamlessly.
this behavior has changed in istio 1.2.x.
what seems happen is that within a second or two of sigterm, inbound listener is removed and all inbound calls fail with `503 nr`.
we also see health checks fail with standard `envoy missing listener for inbound application port: nnnnn` message.
(the failing health checks are not root problem.
the problem that requests are rejected for want of listener).
i am following the tutorial for istio mesh expansion phofhyperlink .
unfortunatly, when i launch the node_agent i get the following error: phofcode --- * i have copied the certificates from my kubernetes master to debian machine where installed node_agent.
they are stored in `/etc/certs/` as docs explains.
* using node_agent 1.3.2 * istio has meshexpansion: true * content of `cluster.env` phofcode
installing istio-sidecar.deb (1.3.3) is not working with the following error message : phofcode
`istioctl version --remote` is broken if the istio is installed via operator phofhyperlink .
istio post-install jobs are missing if istio is installation via operator phofhyperlink .
istiocontrolplane is a namespaced crd, however, the deploy directory doesn't work when istiocontrolplane is namespaced to `istio-operator`.
examples of `istioctl dashboard` are outdated.
- when using services without selectors phofhyperlink with mtls, we get `upstream connect error or disconnect/reset before headers.
reset reason: connection failure` if switching the endpoint.
- this is an trick of knative serving phofhyperlink porject.
it changes the svc 's endpoint for the routing.
but due to this bug, knative serving does not work with mtls strict mode.
i 've deployed a fresh minikube (based on 1.16) cluster on my computer with the following params: phofcode after this, i 've deployed istio following the quickstart instructions: phofcode and then deployed the httpbin and bookinfo sample applications.
whenever i look in jaeger dashboard, the trace entries are duplicated even with same id: phofcode <img width="1598" alt="image" src=" phofurl this also happens to bookinfo sample.
`istioctl dashboard zipkin` causes an error.
disclaimer: i 'm still very green with istio so this could be documented somewhere, but i haven 't been able to find it.
i 've noticed an alarming discrepancy between the time need to run simple commands like `apt update` with an ubuntu:18.04 container i 've noticed a significant performance impact in running very simple commands like `apt update` on a ubuntu:18.04 container.
if i launch an ubuntu-18.04 pod within a non-istio enabled namespace an `apt update` takes ~2.5 seconds.
if i run the same pod in istio aware namespace (so it gets istio-proxy sidecar) it takes between 30-45 seconds.
i 've tried isio version v1.3.2 and v1.2.6.
i 've set the `outboundtrafficpolicy: allow_any`.
also experimented with the egress-gateway.
tried on different hardware configurations (up to 32 vcpus).
also tried istio-demo and also istio/perf benchmarks (which don 't seem to test egress traffic).
also tested this on different version of k8s (v1.13, v1.14, v1.15).
also using microk8s, aws eks, and through kops.
the all suffered similar performance degradation.
at moment, i 'm running out of ideas.
however, i have a suspicion that envoy process running in istio-proxy sidecar is performing some egress rate limiting.
i failed to access ` phofurl inside mesh and error is
when using the mixer zipkin adapter, with jaeger-collector as zipkin service, mixer sends its generated spans to the same jaeger-collector instance.
it seems like the zipkin reporter is reusing the tcp connection to jaeger-collector as long as possible.
this makes it hard to horizontally scale jaeger-collector, as at most one collector instance is used per mixer instance.
even worse, when multiple mixers and collectors are in play, collectors can go unused.
a possible solution might be customizing client used in zipkin adapter 's reporter phofhyperlink to break up connections regularly.
i 'm following this tutorial: phofurl but unfortunetaly, when executing `go generate ./...` inside my mixer adapter directory i got the following error: phofcode when i execute `go generate ./... -v` from the mixer adapter directory phofcode i saw similar issue, which is already closed: phofurl however i still get this error.
when using mixer-based tracing with the zipkin adapter, traces are successfully sampled as defined by my `rules`, `handlers` and `instances`, but envoy always sets the `x-b3-sampled` header to `0`.
this means that proxied applications cannot re-use the sampling decision to forward application-level spans for sampled traces.
i am aware, that this is probably by design (afaik requests to istio-telemetry are non-blocking, so envoy cannot know what sampling decision mixer made).
i would like to find either a solution that changes this implementation or a workaround.
when using 1.3.1, request pod application, header can get x-forwarded-for, after upgrading to 1.3.2, x-forwarded-for is lost,but remotehost and x-real-ip is right.
i am nginx reverse proxy nodeport 31380 port.
visit version 1.3.2 can not get x-forwarded-for in pod, 1.3.1 can.
istio-citadel gets "panic" and not working after.
we are developing a tool to find potential bugs in kubernetes configuration files.
i found out a potential problem of the file it may miss a required field `"selector"` for document starting from line 65 phofhyperlink .
also, i use `"kubectl"` to validate the file, after i run `kubectl apply -f --dry-run=true` i got the following error: phofcode would you please verifying it is a real bug or not?
when configuring rate limiting, it is not possible to configure an accurate rate when using a low valued phofcode value
in redis ratelimiting tests, we see ingressgateway becomes unresponsive and needs to be restarted for it to become responsive again.
i have rbac enabled for my-service and i have a jwt policy in place.
i have an application that allows anyone to post to `/apps` (create an app).
this creates a service role that then allows that user access to `/apps/my-app`.
so actions on `/apps/my-app` should be restricted to the users in the servicerolebinding.
given the following servicerole and binding phofcode any user that matches the subject properties can access `post /apps` (this is correct).
but they can also access `post /apps/my-app` (which is incorrect).
i have noticed other http methods are rejected correctly (ie can 't `delete` `/apps/my-app`) but paths seem be ignored.
also noticed in documentation for paths it says > this field should not be set for tcp services.
the policy will be ignored.
however am unsure what means.
kubernetes services only support `tcp`, `udp`, and `sctp` as protocol options.
is it referring service protocols?
or is it referring port naming conventions (`http-`, `grpc-`, etc)?
find it hard believe is referring kubernetes service protocols but how reads and how seems behave.
in istio 1.3.1 when we create the envoyfilter external auth, the istio-pilot fails to push the config to the envoy sidecar.
after upgrading to istio 1.3.1 (also occurs on 1.3.0) we will get random ssl connection errors to resources behind the ingressgateway.
through cloudflare, these are returned to the user as 525 errors, but going straight to the elb with curl the error returned by curl is
--set istio_cni.enabled=true") prevents remote connections via nodeport.
for example, opening telnet to nodeport fails from anything but "localhost" (even fails from if it disabled, everything works as expected.
when a proxy returns multiple instance ips in node metadata but the with the same container port, pilot complains of duplicate clusters in logs.
here is the instance ip in node metadata ` "instance_ips": and pilot logs phofcode
to test the readinessprobe with istio mtls enabled i 'm following the instructions of phofurl however when i move the readinessprobe to a different port by applying the readinessprobe still fails.
i suspect that separate policies/destination rules need to be created for that port that are not mentioned in documentation.
what are those rules and should they be mentioned in phofurl documentation?
i set up a shared control plane (multi-network) environment, setup the bookinfo example, after applying the default destination rules, i get a 'upstream connect error or disconnect/reset before headers.
reset reason: connection termination' error in the ui.
at icelolly we 're using eks to host our kubernetes cluster.
we 're running istio 1.3.1 with mtls enabled.
we 're in the process of migrating applications into kubernetes, but otherwise we have applications running on ec2 instances, managed by elastic beanstalk.
in our eks cluster we have a graphql server that consumes several other grpc services.
the grpc services consumed by the graphql server are all hosted in ec2 currently - none of them have been migrated to our kubernetes clusters.
the graphql server and the grpc services are all written in go.
overnight, we shut down our staging environment vms in elastic beanstalk.
we 've found that when we come on a morning have to restart the graphql service (i.e.
delete pods) for it to start working again.
we often arrive hours after staging environments elastic beanstalk started again.
we 've also tested server 's reconnection ability without istio mix, and it works fine.
this happened us a few times production - it 's just lucky that right now we 're not using this for any mission-critical service.
we believe that sidecar is keeping a connection open with service, making grpc library believe connection is "ready", keeping it dark about connection failure.
traffic to the application is not observable at istio-proxy[envoy] level logs.
we also would like to hear how to configure customized logs
i have a db in namespace `ns-restriction-demo-2` and a nodejs application that is using that db from namespace `ns-restriction-demo-1`.
so i was trying to add authorization i.e.
db can only be access by one namespace (ns-restriction-demo-1), but when i enable the mixer logs, i realise that the source attributes are different.
i got this setup.. * auth.mydomain.com resolves to 10.1.2.3 and the ip is handled by metalb using arp-mode * istio-ingress > gateway-1 > auth.mydomain.com (keycloak) * istio-ingress > gateway-1 > a.mydomain.com (contacts auth.mydomain.com) `a.mydomain.com` are
if an http request is cancelled/aborted on client side, the request is reported with http status code 500 in mixer / prometheus (which is a server status code).
i have two deployments with labels `version: v1` and `version: v2` under the same kubernetes service.
when creating a `virtualservice` and `destinationrule` to weight traffic, if i specify tls settings per subset (using the same settings), `istioctl authn tls-check` will show a conflict, but it works.
all of our applications are configured and deployed using the same helm template.
we have mtls globally enabled and there are no exceptions, however, we see a variety of different prefixes in jaeger traces.
`http, phofurl <img width="776" alt="screenshot at 08 49 11" src=" phofurl ` phofurl <img width="560" alt="screenshot at 08 56 09" src=" phofurl ` width="788" alt="screenshot at 08 52 34" src=" any ideas what is going on here?
grpc config stream closed: 14, no healthy upstream unable to establish new stream grpc config stream closed: 16, request authenticate failure grpc config stream closed: 14, no healthy upstream unable to establish new grpc config closed: 16, request authenticate failure 2, failed to get root cert proxy is not ready: not received from pilot (is pilot running?
): cds updates: 0 successful, 0 rejected; lds updates: successful, rejected 2, failed to get root cert 16, request authenticate failure 2, failed get root cert proxy is not ready: not received from pilot (is pilot running?
): cds updates: successful, rejected; lds updates: successful, rejected 16, request authenticate failure proxy is not ready: not received from (is running?
): cds rejected; lds rejected 2, failed get root cert not ready: not received from (is running?
): cds rejected; lds rejected 14, upstream connect error or disconnect/reset before headers.
if the retrieval of the public key fails when applying an authentication policy - for example, when the network is down, jwt validation will be applied on the affected pod but will fail forever on that pod.
when servicea connecting serviceb we are seeing 503 uaex unavailable:upstream connect error or disconnect/reset before headers
following on from what i raised on the test and release call today, we 're approximately 3 days into 1.3.x.
and we 've noticed an increased in upstream timeouts from the perspective of the source envoy, with a `504` response_code and a `ut` response_flag.
this graph shows from the source: <img width="1673" alt="screenshot at 18 31 10" src=" phofurl however there are no timeouts reported at destination: <img width="1680" alt="screenshot at 18 31 18" src=" phofurl we aren 't seeing any issues in destination application logs, only source application logs which show connection timeouts.
i 'm still investigating and trying to gather more information, but felt this is now more than a coincidence so i 'm raising issue here to track.
we alert on such failures so it isn 't that i 'm now just seeing them as i 'm looking more closely, they are firing alerts that weren 't firing before so issue wasn 't there.
i 've decided to roll back to a `1.2.6` proxy on some of higher throughput (and higher 504 rate) applications, will monitor them over next 12-24 hours report back here.
i keep seeing the following error on pilot for egress endpoints.
i have given the configuration below for service entry, destination rules, gateway and virtual service.
please see the below graph which represents cluster wide istio-proxy memory usage since a 1.3.1 upgrade.
1.2.x was stable around 17.5gb, so this feels at first glance like a regression.
note this is graphing which will count allocated heap even if unused.
@howardjohn mentioned to me that we don 't cap the heap size for istio-proxy, as a side note i feel this should be done and correlated to the container memory request.
i 've added some scrapes for and for a handful of applications so will report on that in few days.
i stumbled across this whilst investigating some random 504s that have started happening 2 days after the 1.3.x upgrade every 10 minutes or so.
frustratingly restarting applications resolved problem.
i have _no_ idea how golang gc works, so it 's likely anecdotal, but felt similar to java 's gc pauses.
the `reporter=destination` reported 504s, but application itself was not logging any slow requests, further pointing finger at destination envoy.
<img width="1680" alt="screenshot at 21 51 48" src=" phofurl there appears to be correlation qps, top usage is on applications processing most traffic: <img width="1680" alt="screenshot at 22 04 52" src=" phofurl there 's some pretty big jumps in these apps which don 't occur in lower qps apps but i 've reported that separately in phofurl i 'm not sure what else i can do help debug this.
: i have 2 domains in different gateway 1) example.com 2) api.example.com
we have istio 1.3 deployed on our saas (running on eks) and have been testing a few failover scenarios.
if we restart the node that has the side-car injector service some of the applications pods fail to get re-deploy after that.
1. created certificate with certmanager 2. created gateway to point to port 443 2. but pilot log, gives this error, although i can see the secret has certificate.
hey, the behavior of exportto is quite confusing and inconsistent, for example phofurl states that setting `exportto` can be a list of namespace, however it appears that only `*` and `.` work, which is what is stated on phofurl phofurl states you can use namespaces in the but again, that doesn't appear to work.
what's the roadmap for `exportto`?
as you can see, pilot is complaining about conflicting listeners: phofcode this is likely because we have two services pointing to the same port: phofcode that 's because we have both public and private ips for it: phofcode i do not want istio to care about `8318`, only `8317`, so i tried to use the following pod annotations: phofcode however, we still get this warning.
am i missing something when it comes to telling istio ignore a given port?
i am not being able to connect with mysql using mtls enabled from another application (which is a simple crud application).
when i disable the mtls for mysql i can successfully connect with it.
following are the configuration i am using.
: istio-init is not installing certmanager crd and because of that getting this error.
>unable to recognize "stdin": no matches for kind "clusterissuer" in version i am using below command.
it installs other istio crds but not certmanager.
helm template --name istio-init --namespace istio-system | kubectl apply -f -
i have the following virtualservice phofcode i would expect that only the endpoints /, /app and /postauth/* would get exposed, with each being routed to its respective services.
right now every endpoint (even those not listed) are being routed to the first service in the list (so if i change order behavior changes)
cross-cluster calls ignore virtualservices in destination clusters.
ex: an in-mesh call from servicea (clusterx) to serviceb (clustery) routes directly to serviceb instead of using virtual service rules configured for serviceb.
this appears to be an artifact of the envoy configuration in the istio ingress gateway, which routes *.global requests directly to envoy "clusters" (which translates a service in k8s).
the virtualservice configuration is written the ingress envoy 's other "normal" gateway configurations as "dynamic routing rules".
ex: if i connect the virtual service a gateway on port 80, virtualservice config becomes dynamic_routing_rule config on port 80 in envoy proxy).
this doesn 't happen for *.global, even if i directly connect virtualservice "global" gateway istio creates for multi-cluster routing.
i am trying a network policy example to allow the traffic from specific namespace.
everything works good until i inject a sidecar for nginx application then all calls are blocked.
this phofhyperlink is the example i am trying to implement.
virtualservice crds which contain a regex match greater than 1024 bytes will cause pilot to panic when generating routes with an error like: phofcode envoys phofurl suggests regexes may be no longer than 1024.
after upgrade to istio 1.3.0 we have found a weird behavior in the ingress sds, related to the last changes in sds phofhyperlink .
prior to 1.3 we were able to create gateway secrets (for both simple and mutual mode) with temporary values, and update them later.
in 1.3 due the added validation, this causes an error in sds.
i want to add a external service (which only with ip and portlso it 's tls) to our istio service mesh.
my idea to do this is following: 1. add a k8s external service to add this service into k8s 2. add a istio virtualservice and destionaltion rule convert inner tcp outer tls the config is following <details><summary> a sleep pod for test </summary> phofcode </details> <details><summary>k8s external service</summary> phofcode </details> <details><summary> virtual service</summary> phofcode </details> <details><summary> destionation rule</summary> phofcode </details>
was able to curl https resources previously for few months, however it stopped working without any changes.
curling any external resources via https returns phofcode curling returns: phofcode pods without sidecars work fine.
i am following the guide at phofurl and cannot get it to work.
i have tried on gke and minikube and always run into the same issue.
one of the steps that seems to be missing from there is annotating the default namespace with istio-injection label, but even with that done (and envoy container injected in hello application pod), following this tutorial stops where you need to check http connection - all it returns is 404.
our application use nginx to redirect request to different service.
nginx is also running in a pod.
when i add destination rule and virtualservice for service a, i send request to nginx and request will be routed service a. but the traffic is not correctly shifted as definition in virtualservice.
there is no outbound log in the log of istio-proxy for nginx pod.
but the traffic is correct if i run curl to service a directly inside container and i can see outbound in log.
on deployments which do not permit egress policy, the startup of istio-proxy is quite significantly delayed (10s or so) when attempting to read the metadata: phofcode we run with = false, so why does istio/proxy even need zonal information?
perhaps it could look this up as/when it's required/enabled?
in our particular use case, we inject a liveness probe to istio-pilot which is aggressive enough to detect this as a failed proxy, thus getting it stuck in a crash loop: phofcode
i'm currently running a v1.2 cluster with certmanager and ingress-sds enabled.
i have recieved an email from jetstack warning me that they will be disabling all versions of certmanager below 0.8.0 on 1st november 2019, which is pretty soon.
the bundled version is 0.6.2 i've checked the chart for 1.3 and it is still installing version 0.6.2. patching to version 0.8.0 of certmanager appears to work so far, but my tests have not yet been very thorough
use_remote_address and xff_num_trusted_hops applied using envoyfilter do not apply
i 'm trying to mirror traffic to an external service but it seems that the content of the `mirror` block in the virtualservice is not picked up and the traffic is not mirrored.
locality lb does not work after upgrading istio from 1.1.8 to 1.2.6.
uninstalling istio via helm does not delete the crds that were installed by istio init.
jwt policy seems to be broken in `v1.3.0`, but working in `v1.2.6` with the simple example provided with `httpbin` in the official documentation: phofurl
lots of dockerfiles in this repo are installing custom ca-certificates via `add ca-certificates.tgz /`.
i can't tell if the build process downloads fresh certificates, but phofurl is over a year old.
instead, i recommend grabbing the latest ca-certificates via the package manager, as the base dockerfile does: phofurl alternatively, consider rebasing on distroless/static phofhyperlink (see phofurl
the destination_service_name label for tcp metrics is set to "unknown" when either of these clusters are used.
we have setup an istio over on eks cluster & a java app is hosted in it.
the pod has been created along with service with type clusterip we have created virtual service, gateway & set the istio ingress gateway as a nodeport.
in front of the istio ingress gateway, we placed the aws application load balancer.
we created a route53(dns) entry which points to the above said alb now, all services & pods are up now, on hitting dns with https, request info we get in above said spring boot java application, has been changed from https to http with port 443 for eg: if i make a curl request to say `curl phofurl in our java app, while we get request info we get them as ` phofurl also have printed headers like x-forwarded-proto, x-forwarded-port in our java app.
`x-forwarded-proto` value get java app is `http` `x-forwarded-port` value java app is `443` `x-forwarded-for` value app is `null` our key suspicion envoy which does this protocol conversion from https to http
we are trying to use istio to track the request.
our existing application use https to communicat between each other, but jaeger can not get trace for request sent to container through https.
is there any way support tracing for the https request container?
uri rewrite for a virtualservice resource where the host is an internal service and the destination is also an internal service does not work.
(see steps to reproduce for an example of the virtualservice)
metrics and have `destination_service` label set to the attribute where as this label should be set to the as is done for all other metrics.
istio doesn't respect endpoint locality when traffic is routed via the egress in a multi-cluster (replicated control plane) environment.
i want to use rate limit with redisquota.
and, i wrote the following rule with double `*`, it does not work.
istio returns status `200` with single `*`, it worked without any other changes.
ip whitelist does not work for a specific ip
if you have a working mesh with no named networks in the meshnetworks file, and then add an entry to that same file and redeploy pilot (so that it now loads the named networks), pilot will begin rejecting all xds requests from the existing sidecars, which have no named network, causing them to become unavailable.
installation of 1.3.0 does not complete with generated sds config.
ingress, pilot, policy and telemetry pods are stuck at creating status.
# kubectl get pods -n istio-system name ready status restarts age 1/1 running 0 5m23s 0/1 completed 0 5m24s 1/1 running 0 5m24s 0/1 containercreating 0 5m24s istio-nodeagent-92c46 1/1 running 5m24s 0/2 containercreating 5m23s 0/2 containercreating 0/1 completed 1/1 running 5m23s 0/2 containercreating 5m23s
ive recently upgraded my istio setup from 1.0.5 to 1.2.5, basically running a fresh setup.
after that my set of virtualservices / destination rules seems to be totally ignored.
ive a kong api gw with istio sidecar acting as a ingress and a couple of nginx labelled version: green and version: blue i want to access via given header nginx (green is the live one, blue the ark alternative) here is my destinationrule phofcode and my virtual service phofcode such configuration was working perfectly on old 1.0.5 and i could drive browser from green to blue simply adding http header nginx: blue.
ive checked 1.2.5 documentation several time but couldn find any significant change validation webhook kiali says everything is fine.
nevertheless requests are simply doing roundrobin between green blue as they where totally ignored by istio.
<img width="457" alt="kiali_console" src=" phofurl
hi, i have configured the serviceentry, virtualservice, destinationrule(s) as per the istio documentation : phofurl this is for redis cluster which is hosted externally outside the cluster.
serviceentry, virtualservice, destinationrule(s) are attached phofhyperlink after configuring the above, there are no logs in istio-proxy, and istio-egressgateway and my redis connection fails as it is not able to get connection from external redis host.
with the option grafana.persist=true, grafana pod failed to start (crashloopbackoff).
i updated one of our clusters to 1.3.0 (using helm).
we enabled k8s ingress resources with the ingress controller.
after upgrading to 1.3.0, however, they all stopped working.
once i added `ingressclass` and `ingresscontrollermode` to the mesh config in the istio configmap, they started working again.
i would like to be able to configure retries only for idempotent methods .
i have applied this in the virtual service but it appears that all methods (eg idempotent gets and non-idempotent posts) are retried
after upgrading to istio 1.3 our services are losing their database connections after what seems to be fixed intervals.
this causes errors in the application, as it cannot write data using the already open connection - causing a rollback of the transaction.
downgrading to istio 1.2.5 resolves the problem.
our setup is as follows.
istio 1.3 with mtls and aws rds postgresql 9.4. pods access rds via a virtualservice and serviceentry: phofcode and virtualservice to allow access rds instances are via sni inspection.
phofcode logs from istio-proxy for affected services: service a: custom jpa java service phofcode service b: keycloak idp phofcode one thing that jumps out at me is that durations for closed are very similar for service a, ~10000 for service b).
also they seem be followed up by a reconfiguration of envoy due `grpc config stream closed: 13, `
when creating stackdriver telemetry (handler, instance and rules) to send metrics, logs and tracespans to stackdriver from non-gcp k8s cluster, using apikey as authentication method doens't work.
logs from mixer container: phofcode
istio envoy proxy is ready before finishing fetching all the configurations.
this can result 503 when scaling up the ingress/sidecar pods
ingress-gateway is presenting the old certificates even after updating the secrets with the new certs.
my problem is that i want to replace the old certificates with new certificates without deleting or restarting or patching gateway deployment, i cant bear any down-time.
when you create a service with endpoints,
in our deployment cluster(deployed with istio 1.1.11) all the traffic to/from the application container is routed through the envoy-proxy side car.
following issue is observed, http2 traffic on port 8080 originated from application container towards upstream servers(e.g, foo.com) is being forwarded by envoy-proxy as http1.1.
we don 't have any service port defined in the cluster for destination server.
currently when using a custom cluster domain and generating the template using helm, the mtls does not respect the custom domain: phofurl it is hardcoded as `"*.local"` but i would think it would be `"*.svc.
set the but that value is not passed to mixer.
i 'm using ansible to provision my bare metal kubernetes cluster ( 1 master, 3 workers).
istio installs fine without errors.
if i apply a simple https gateway with one virtual service, path-based routing works as expected.
i run into problems when my gateway gets a little more complex and i deploy more virtual services.
istio routing completely stops working.
path-based routes that were working before are no longer reachable.
i get the following errors in the istio-proxy container: phofcode
i have set up one custom gateway per environment on our cluster.
each of them contains the gateway, virtual service and destination rule objects in single files.
this all works when there are no http matching rules.
but when such are implemented they don 't seem to take any effect.
phofurl none of the suggested examples makes any difference.
i noticed istiocl x manifest installed demo profile varies differently than our istio-demo.yaml.
we need to have this and other profiles in sync to ensure a smooth experience.
istio is prone to missed-configuration where the missed configuration works perfectly in kubernetes environment, but doesn't work in istio environment, and there is no reliable way of debugging or prevent this.
for example, if a container has no `ports` defined, istio essentially doesn't proxy any ports.
however, it still allows consumers to connect to the port.
when mtls is enabled, the consumer will attempt to connect w/ tls, the producer port is not proxied, and expecting plain text.
in strict mtls, producer port shouldn't even be accessible.
however, at same time, `istio authn tls-check` shows no conflicts and indicated that mtls effective - when it's really not.
in the past couple of days weve witnessed a strange behavior in our production environment.
we now believe this behavior may be caused by a bug or an unexpected behavior in istio-envoy, and we would like to report our findings here.
a symptom first noted was a large ratio of `5xx` status codes being returned from one of our services, deployed to an eks environment as a deployment.
this service is working against other internal and external services, the internal ones reside on different managed cluster (for the record, dc/os cluster, but seems this fact doesnt play role here).
to reach those internal services, the service in question used an istio-envoy side-car inside its pod, configured with serviceentry.
the side-car created connection against an aws elb, which routed request to different services in dc/os cluster.
when we started to dig in, weve noticed following error being logged inside istio-envoy container: phofcode .
to us it seemed that maybe istio-envoy container couldnt, for some reason, reach elb on its path dc/os cluster.
to confirm that, weve used `netstat` and `tcpdump`, provided here: > netstat > $ netstat -p | grep "xx.x.5.5:80"
starting from a vanilla install of the hipster demo app, running `istioctl analyze` currently takes about 8 seconds.
that time is all spent waiting for resource events to propagate from the k8s client.
the most likely cause here is that the watchers we are using are slow and/or throttled.
using watchers makes a lot of sense for the galley use case, where we need to react to a constant stream of changes, but it does not make sense for istioctl use case where we need a point-in-time snapshot as responsively as possible.
@ozevren mentioned that we should be able to use different kube client api get resource data more synchronously instead of creating watchers.
when trying to send all fields defined here phofurl to fluentd, the fields that are of type ipaddress are sent as 4-byte binary array, that is interpreted by fluentd as a string, thus causing elasticsearch to complain about invalid utf-8 phofcode
minhealthpercent in does not take effect.
this is observed in perf test against istio release 1.3 rc.3.
the perf test use file mount to provide certificate for workloads, and a random port name is used in httpbin and sleep service deployment.
phofurl the spike happens every 15 minutes, and all proxies are hot restart every 15 mins for cert refreshing.
overall the memory usage is quite stable, no memory leak is found.
when using the demo profile which has trace sampling 100% configured, i'm not seeing any trace spans from my req in jaeger.
the only trace spans i saw are from user prometheus, nothing from my browsers.
documentation doesnt mention how to configure multiple matches for uri and header with and behavior.
i am trying to handle stickysession for my web-app using istio's destination rule like below, 3 replicas of web-app in a deployment exposed with a single service: phofcode
when gateway resource and virtual service/pod are deployed different namespaces.
i have deployed my gateway resource in istio-systems and my vs (that refers to the gateway resource) and pod in another namespace.
when running istioctl x describe, i 'm not able to see any reference to the gateway resource.
multi-cluster setup using replicated control planes seems to be broken.
following instructions available at: phofurl results in "503 service unavailable" errors.
this is using approach (not using istioegress to hop into the remote cluster; which i have not tried, so i cannot say if it would work).
using a simple sidecar config for a given namespace (namespace-a), mostly following the sidecar reference doc example, resulted with service a in namespace-a communicates to service b in namespace-b in 502 error.
phofcode after digging through, i found out in the dynamic route config section, there is no matching route for the external name service i built to allow service a namespace-a to access b namespace-b.
a virtualservice with a non-existent gateway is accepted by istio when applied to a kubernetes cluster, but is then ignored and not used in routing decisions including in local cluster traffic.
when i try to upgrade-downgrade between versions 1.2.2 and 1.2.5 my applications which are using sidecar goes into unready state and i see a downtime in my services.
my requests follow this path: load generator (outside cluster) -> load balancer (outside cluster) -> istio ingressgateway (inside cluster) -> application (just simple nginx docker image) i have about 20 instances of istio-ingressgateway and 60 instances of nginx and i generate a load of about 15k rps which normally this setup handles without a sweat.
what observe when do `netstat -ltpn` inside sidecar proxy is that a new envoy process comes up old one goes away, this probably causes the application to become unhealthy because this new envoy process isn 't listening on port 15090. after while it does start listening to 15090 15001 the errors go away once all instances are back.
deploying elasticsearch with tls security enabled (via helm chart example phofhyperlink ) breaks communication with elasticsearch http(s) api when istio sidecar injection is enabled (mtls set to `permissive`): phofcode
galley validating webhook configuration, replica set and pods are periodically garbage collected by kubernetes.
this is due to the fact that the ownerreference field that is added to the by galley pods points to the galley deployment object - phofurl and phofurl (part of 1.3 release as well - phofurl since is a cluster scoped resource it should not have an owner that is a namespace scoped resource (deployment).
this clearly stated in k8s docs - phofurl phofcode kube-controller-manager logs showing galley resources getting garbage collected -
hi there, we are trying to route our whole external traffic through the egress gateway.
i started with a simple example (configuring external traffic to google and cnn) but unfortunately this doesn 't work and i receive the following error, when trying to access phofurl phofcode
some e2e tests fail on go 1.13 for the error: flag provided but not defined:-test.v.
run with go 1.12 instead works fine.
it seems the error is returned by `go tool cover -html=coverage.cov -o coverage.html` in codecov.sh, maybe also related to the switching to go111module=on.
cc @howardjohn @geeknoid @sushicw @kyessenov
in the certificate mount path is hardcoded to: servercertificate: privatekey:
when used in aws eks, the release version 1.2.5 of istio (installed using helm), causes a continuous https redirect loop if the value of `tls.httpsredirect` is set to `true` at the gateway level.
i changed the global proxy settings on the values.yaml, to lower proxy requests and limit resources.
i deployed the changes on one cluster, and it worked, and then i deployed them on a different cluster and noticed that mixer (on failed to start.
this is the only logs: phofcode i can see that mixer is problem when running describe on pod: phofcode update: purging re-install did not help - having exact same issue
sds config values in the default `values.yaml` are empty and invalid.
only the default values in are valid.
so sds is unusable without users explicitly installing the sds profile.
unable to load prometheus and grafana services through aws alb.
when running an authentication service inside the service mesh - for usage in the ext_auth phofhyperlink filter in envoy - the `cluster_name` created will not be usable over grpc due to the previously reported issue #5331, where `|` is an invalid character for authority header in grpc.
the example envoy filter that would be utilising invalid `cluster_name` is as follows: phofcode in this case, what would be a potential solution to reference a `cluster_name` which is valid?
this described scenario works fine if authentication service runs outside *service mesh* and i reference in-cluster dns name instead.
the `_affinity.tp` template files in the helm charts do not quote correctly boolean values even if those have been quoted in the `values.yaml` file.
for example, should i set a `toleration` value of _true_ for an element in in a `values.yaml` file, the template would not quote the value resulting yaml file to be applied kubernetes, leading to helm not able to deploy resulting configuration.
istio couldn 't handle full url request (also reported a year ago on so link phofhyperlink ) phofcode and the same resource but with full uri phofcode
when istio is configured with phofcode and an http request is made to ` phofurl the reported metric `istio_requests_total` has the label `destination_service` set to `unknown`.
istio-policy and istio-telemetry going into crashloop when scheduling on d32 size vm
if a service is deployed with port 8080 kiali reports the source as unknown.
this only affects the port and only port 8080, as soon as it is changed to something else kiali reports source correctly and is able to build the graph.
following the instructions on phofurl at the step "kubectl apply -f sleep-injected.yaml", get an error as follows: ~$ kubectl apply -f sleep-injected.yaml serviceaccount/sleep created service/sleep created error: error validating "sleep-injected.yaml": error validating data: missing required field "selector" in io.k8s.ap if you choose to ignore these errors, turn validation off with --validate=false
citadel health check doesn 't work with plug in certs (with intermediate certs).
log: addrconn.createtransport failed to connect to 0 <nil>}.
err :connection error: desc = "transport: authentication handshake failed: x509: certificate signed by unknown authority".
reconnecting... transient_failure turns unavailable: 1 error occurred: t* liveness: rpc error: code = unavailable desc = all subconns are in transientfailure, latest connection error: connection error: desc = "transport: authentication handshake failed: x509: certificate signed by unknown authority"
the istio cni daemonset fails to start in the `istio-system` namespace on k8s v1.15.3, due to permission issues.
when creating a gateway that has a host section with identical hosts on different namespaces on port 443 with simple-mode tls, the resulting listener config is always rejected by envoy phofcode the log message in the gateway deployment 's envoy is phofcode the proxy diff (retrieved with `istioctl proxy-status <gateway-proxy>`) contains following listener: phofcode
when deploying a custom ingress gateway using a standard deployment and not a canary i get the following error: grpc config stream closed: 2, gateway has no associated service instances the ingress gateway pod produces 404 error on http and 503 on https with mtls set to simple.
i have no idea which service instances are referenced in the above message but noticed that while in the canary i can specify spec.service.gateways i can't do the same for a deployment.
any idea what error might mean would be great.
most of our platforms services are paas based services which requires dns endpoint and its public ip may change from time to time.
hence we are forced to use dns endpoints whereas istio service entry -
i 'm configuring istio using helm here you can find my istio-config.yaml phofcode then i deployed a bunch of microservices using istioctl, all of them are simple rest call using http.
they can communicate each other with out any issue.
if i exposed them with node ports i can reach and communicate with them correctly.
here my svc: phofcode i created an ingress gateway and one virtualservices to route call from outside the cluster.
here gateway and virtual services configuration: gateway: phofcode virtual services: phofcode when make a call to the service always got a 503 service unavailable: here log output for istio-ingressgateway pod: no downstream connection or no original_dst.`
when we enable sds for our gke cluster via istio-installer phofhyperlink , service-to-service mtls doesn 't work due to envoy proxies sending incorrect trustworthy jwt tokens.
all received jwt tokens share the exact same header (`ya29`) and payload (`c`) for all node agents, and somehow signatures are different per each node agent, but they are still identical within the same node.
those jwt tokens are formatted as follows: phofcode logs on a given node agent are as follows: phofcode
in our uat cluster not used a week approximately we noticed some strange behavior with istio-proxy.
first 3 to 5 requests returns 503 uc errors from requesting proxy, and this happens in every service in chain.
it looks like istio-proxy somehow dying if not used a bit of time.
our pod liveness and rediness probes realized as curl inside app containers an not invokes istio-proxy traffic.
from kubernetes perspective all pods are live.
istio installed as sidecars, not using istio-cni.
i 've deployed k8s 1.13 in eks along with istio 1.2.4 using hashicorp vault 1.0.0 to issue certificates however after following all of the mtls and vault documentation the istio-proxy sidecars for the sample bookinfo and httpbin deployments do not get certificates.
> certs: "/etc/certs/key.pem", > []string(nil) > status port 15020 > proxy agent /etc/certs encountered an error no such file or directory new config, resetting budget on the node agent: vault client for address: phofurl tls: true grpc server for workload uds starts, listening on "/var/run/sds/uds_path" sds grpc server cert has changed also logs from httpbin istio-proxy sidecar: certs: "/etc/certs/key.pem", []string(nil) status port 15020 proxy agent /etc/certs encountered an error no such file or directory new config, resetting budget
manual injection of sidecar proxy not working.
can someone please help me with this?
the istio-operator pod will deploy the jaeger-collector and jaeger-query deployments.
based on the openshift docs [1], we should be able to use tag version 1.13.1 based on the example below: phofcode but when i deploy the jaeger-operator which in turn deploys jaeger-collector and jaeger-query pods, i see that wrong image version is used.
unfortunately, based on registry.redhat.io container catalog, tag version 1.12.0 doesn't exist [2], which results in an imagepullbackoff error when spinning up those pods.
result of `oc describe pod jaeger-collector`: phofcode result of `oc describe pod jaeger-agent`: phofcode
after setting egress gateway tls origination for a service, curls to that service return 503 and are not routed to destination.
as soon as i install a service entry for a specific application and with the policy set to defaults (allow_any), all the pods in the cluster cannot connect anymore to external https services, returning `curl: (35) protocol`.
when you change istio 's configmap pilot is not being redeployed
the root cause is `istio-system ` is the root config namespace by default, so we get 2 (one from root ns, and one from gateway's namespace ) same envoyfilters for ingressgateway.
i am trying to inject a simple lua filter into the envoy config to test envoyfilter in istio 1.3 using httpbin as a test app.
i am following the basic examples and docs from phofurl but i am running into multiple issues: 1. if i specify a `portnumber: 8080` as in the examples (also tried `name: in the `match`, then nothing is injected.
this match criteria seems broken.
2. if comment out `portnumber` and `name`, then it applies to all listeners * except * port 8080 and lua filter is injected * twice * in each listener.
3. the `insert_before` appears to be working as `insert_after` when a `subfilter` is used.
without `subfilter`, it correctly adds it beginning of list, however.
simple test envoyfilter that should add lua http filter before "mixer" filter, but actually adds it after and adds lua filter all listeners except port 8080 (note using `portnumber: 8080` is what want use as example, but this causes nothing be inserted): phofcode example snippet of http filters after running (two filters after mixer instead of one before mixer): phofcode
java 11+ core `httpclient` optionally supports http/2, and as per official http/2 spec rfc7540 phofhyperlink , it sends optional `upgrade: h2c` header, which is
small tcp packages with data length less or equal to 4 bytes are blocked, or being saved in receiving buffer.
this small tcp data will be read only after another package is sent and the total buffer size is greater than 4 bytes.
all the following packages even if data size is less than 4 bytes can be forwarded correctly.
another weird finding is, if the 2nd byte of data is `/x03`, the 4th and 5th bytes cannot be anything except ` x00`.
i try to apply istio in my own project, but it doesn't work, and in the same environment, the sample bookinfo works, so i try to find the difference between my project and bookinfo.
i found that when apply the service&deployment yaml, port i set doesn't display in envoy's route, and only display 80 port, how can fix it?
image phofimage istioctl -n vio-v1 proxy-config routes -o json image phofimage
when i apply a file to k8s phofcode then in galley 's logs i find this error: phofcode the strange thing is that i cann 't find the ip 10.xxx.192 in any pod or svc.
in addition, the mutatingwebhook which has the same cabundle as can work normally.
is there somebody can help me?
after upgrading to `1.2.4` (from: `1.1.8`) we see occasional segfaults on many istio-proxy pods all of which have a form similar to this: phofcode
istio pilot failed to fetch pubkey sometimes.
this will bring jwt verify fail (401).
we have a elasticsearch service is running inside the cluster (outside of the mesh) on http on port 9200, port is named 'http ' in the service.
allow_all is activated for egress.
when a request is sent to an external url on https also on port 9200, the request responds : curl: (35) version number if port of service renamed to 'https ' (even if it serves only http), it works properly
when including a dynamic opentracing config for envoy in istio 's `pilot-agent` 1.2.4, envoy consistently segfaults on every request to the proxy.
istio successfully restarts and averts a container crash, but traffic is effectively dead.
upon deploy of istio 1.2.3 using helm (out of the box other than added image pull secrets and custom image repo), the following services fail: istio-pilot istio-ingressgateway istio-policy istio-telemetry disabling mcp allows all pods except the ingress-gateway to successfully deploy (with very similar logs)
after updating our development gke cluster from istio 1.0.9 to 1.1.12, we are experiencing degraded rolling update behavior on our kubernetes deployments which are configured for sidecar injection.
it is taking 8-20 minutes to update our small 2-3 replica deployments when it used to take 30-120 seconds.
upon investigation, i am finding that istio-proxy sidecar in these replicas is taking several minutes to declare itself ready.
this appears be because pilot is very slow deliver config the sidecar.
this is a small 5 node cluster with less than 20 services and deployments and less than 50 pods.
the api 's are serving very light traffic so istio-proxy sidecars are not under sustained traffic load.
istio deployments configured with default configured hpa 's.
this upgrade happened about 7 days ago and i notice that the original were preserved in the upgrade process as they 95 days old.
$ kc get hpa -n istio-system name reference targets minpods maxpods replicas age istio-egressgateway 13%/80% 1 5 1 95d istio-ingressgateway 13%/80% 1 5 1 95d istio-pilot deployment/istio-pilot 5%/80% 5 95d istio-policy deployment/istio-policy 9%/80% 95d istio-telemetry 2%/80%
nginx pod with sidecar injection turned on is returning `400` when proxy passing urls with spaces to upstreams.
the same behavior doesn 't happen with other urls that go to the same upstream but don 't have spaces.
in addition, if the sidecar is disabled, the urls (with or without spaces) resolve just fine.
when the sidecar injection is turned, `location block with "~/b/(.
*)$"` is definitely being reached for urls spaces, but upstream not.
again, without spaces work just fine.
running traffic on istio 1.2.2 with workloadcertttl=1h, there is traffic failed.
the test case is sending traffic with h2load for 3 minutes, keep running test cases with different configurations like with/without sidecar, different payload size, different connections for 5 hours.
at last there are 3 cases failed because there are traffic failed like logs from h2load: process request failure:20 requests: total, started, done, succeeded, 13 failed, 13 errored, 0 timeout when i set workloadcertttl=720h (30 days), all the cases can pass.
it seems the renew of certificate will impact the traffic.
changing the port definition in istio-ingressgateway service, effect outbound traffic to https targets
hey, we noticed some problems when implementing header-based routing with istio: when creating a virtual-service to enable header-based routing it works fine as long as the header-name does not contain a "_".
however, one a "_" is added to the header-name istio seems to ignore the virtual-service.
following definition works: phofcode the following definition
this is a follow on from phofurl we had some strange behavior with a few applications this morning.
i tried to debug it but didn 't get anywhere so wondering if anyone else has seen this happen.
i 'll just talk through one specific use case but this happened on 3 different apps.
take this deployment: phofcode as you can see, one of them started 47 minutes ago, that one started alerting that istio-proxy is using too much memory.
so looking at one of the other instances you can see it uses about 43 meg.
and is the same for all of them: <img width="344" src=" phofurl however new instance was using 131 meg, 3 times as much: <img width="432" src=" phofurl there is nothing in any of the logs indicating any sort problem.
doing a `kubectl delete pod` brings it back up with the correct amount memory.
this has been happening more frequently recently (a few times over past few days) so a little concerned it could escalate.
see phofurl @lei-tang would you mind to take a look?
the customer is reporting it's failing in 1.2, not sure if it also fails in master where we have switched to use jwt filter in envoy (we also need to verify this but that is a separate issue).
we may also need an e2e test to prevent such regression, thank you!
isito 1.2.2 - helm upgrade does not update meshpolicy.
few examples: 1) manually delete the default created meshpolicy, running helm upgrade does not recreate it.
2) setting mtls in values.yaml from false to true or vice versa, the meshpolicy and destination rules are not updated/created however, in configmap, i do see the custom-resources.yaml key being updated.
phofcode i did some research, and tried rerunning the following jobs as well thinking it creates it from a job: phofcode however, that has no impact as well
when a gateway gets added which used port instead of port the istio-pilot will crash.
here is the istio-pilot log: phofcode
i followed the example ( phofurl for setting up a rate limiter of 100 requests/second.
requests at well under this rate are being rejected.
rates above this limit are being rejected, but not at the defined rate.
i have a simple routing in a virtual service that does the following: if queryparam `?apikey` and route = "/" go do service a, if just route "/" go to service b.
when creating a custom metric i 'm attempting to use a cexl expression to manipulate an attribute and truncate it.
the logic i need requires multiple conditionals.
reading the documentation here: phofurl i see `|` described as `first non empty` and an example of i 'd like to able to use this with conditionals truncate request.url_path.
`conditional( "/api/tx", "" ) | "unknown"` unfortunately this empty string is returned instead of "unknown" for a single conditional this is an easy fix.
but i hoped use the pipe with two or three conditionals before returning unknown.
to do this currently requires nested conditonals which become harder read than the pipe syntax.
in my cluster, i make a request to the services who listen to port 8080, but all get 404, however, the services who listen to other port can request normally.
for example, i have a service listening to 8080 and 8087: phofcode then i make a request this service from another pod which has a sidecar: phofcode we can find the 8080 gets 404 and the 8087 is fine.
the logs of sidecar: phofcode then i set log level of sidecar trace, can find this: phofcode we can find "no cluster match for url '/ ' ", but configurations of this pod are normal does anyone help me?
we had some strange behavior with a few applications this morning.
i tried to debug it but didn 't get anywhere so wondering if anyone else has seen this happen.
i 'll just talk through one specific use case but this happened on 3 different apps.
take this deployment: phofcode as you can see, one of them started 47 minutes ago, that one started alerting that istio-proxy is using too much memory.
so looking at one of the other instances you can see it uses about 43 meg.
and is the same for all of them: <img width="344" alt="screenshot at 08 05 58" src=" phofurl however new instance was using 131 meg, 3 times as much: <img width="432" alt="screenshot at 08 06 07" src=" phofurl i had a look in the istio-proxy logs and saw these unusual messages
adding the "true"` does not actually make health checks on services with mtls enforcement on work.
i have installed istio 1.2.2 on aws eks and enabled tls on istio ingressgateway with sds.
created secret with the my company signed certificate.
gateway info as follow: apiversion: kind: gateway metadata: name: abc-gw namespace: my-ns spec: selector: istio: ingressgateway servers: - port: number: 443 name: https protocol: https tls: mode: simple credentialname: "abc-credential" hosts: - "myhost" istio ingress gateway is annotated with the following and successfully created 0.0.0.0/0 created route 53 record set "myhost" pointing to the elb created from the above.
i have tried curl on my mac terminal and it worked fine with "https" but when we tried from same endpoint on f5, it failed.
ran following openssl command: echo | openssl s_client -showcerts -connect myhost:443 2>/dev/null no peer certificate available no client certificate ca names sent ssl handshake has read 0 bytes and written 0 bytes new, (none), cipher is (none) secure renegotiation is not supported compression: none expansion: none no alpn negotiated ssl-session: protocol : tlsv1.2 cipher : 0000 session-id: session-id-ctx: master-key: start time: timeout : 7200 (sec) verify return code: 0 (ok) same output when i ran from mac as well.
the elb created has following: load balancer protocol | load balancer port | instance protocol | instance port cipher ssl certificate tcp 443 tcp 31390 n/a n/a to rule out certificate issue, i configured elb to terminate same cert using aws certificate manager elb point to istio ingressgateway http then it worked fine.
checked following openssl command it is working fine correct data.
echo openssl s_client -showcerts -connect myhost:443 2>/dev/null but terminating tls at pointing to ingressgateway https (port 31390) then fails http/1.1 408 request_timeout any idea why tls connectivity unable recognize cert ingressgateway ?
i have 2 `gateway` objects, one for external and one for internal traffic.
both of these are set to `*` for the hosts on both port 80 and 443. with this configuration, only a port 80 is listened on for the `external` `ingressgateway`.
on the internal one, 443 is also listened to.
we have istio 1.1.11 deployed(4 ingressgateway + 3 pilot setup) and it's running for a while without a problem.
but early today we noticed one(and only one) ingressgateway started returning 503 to all the incoming requests: phofcode and then this ingressgateway pod got recovered and started working normally.
our pilot pods also kept crashing as phofurl mentions.
and i know there's an on-going pr phofurl addressed this issue.
so is that possible that multiple `dopush()` from pilot discovery caused my problem?
attach envoy stats here as a reference: phofcode
follow up on a closed issue in an unknown state: phofurl "this is fixed in envoyproxy/envoy#7505.
i think this issue can be closed once those changes are pulled into istio."
didn 't see it in the changelog of latest version 1.2.3. updated, the issue still persists.
i tried to expose my services on aks with istio ingress, but i think i misunderstand something when routing services.
when i test my api, it returns 500 error.
got denied after connection check and the actual rbac rule passed, however we did not turn on any network filter and wondering what filter it is checking against.
enforced allowed checking connection: requestedservername: , remoteaddress: localaddress: ssl: none, dynamicmetadata: enforced denied
i am unable to have a vm in my expanded mesh behave as an egress gateway (the `example` gateway).
http traffic reaches the vm/egress gateway, but tcpdump shows the vm responding with the ` r.]` flag, and the original source pod interpreting that as a 503 response code.
i have followed [egress gateway tutorial phofhyperlink , and i believe root cause is that gateway resource does not select vm based on its `selector` despite gateway documentation phofhyperlink stating "one or more labels that indicate a specific set of pods/
run manifest diff command to compare manifests generated from helm vs operator cli, there are some fields which are inconsistent between each other.
create this issue to track fixing them.
we 're using prometheus 2.10.0 with this scrape config: phofurl as you can see, one must supply the pods scrape job with tls certs and keys paths.
as we 've activated sds, we do not have these certs locally on the file system and we 're relying on in-memory tls infra.
seems like sds activation is breaking official scrape config for prometheus, since without these files, prometheus is blocked from reaching the pods.
when i edit the _istio-sidecar-injector_ config map to set `policy: disabled`, after a few minutes, the config map reverts back to `policy: enabled`.
i have tried doing the edit on the gcp console, and using `kubectl -n istio-system edit configmap result.
we have a test case with a service returning 200 and 503 alternatively to readiness probe every 2 minutes.
the ingressgateway keeps routing traffic to the pod during the time when the service returning 503 to readiness probe (k8s displays the pod in not-ready state during that time).
ingressgateway hpa unable to figure out cpu utilization and thus doesn 't scale.
all other hpa (pilot, policy, and telemetry) created by istio working fine.
might be related to #11350 phofcode phofcode looks like metric-server is configured properly phofcode phofcode
when using rate limiting (redis) without defining an override, the key used to look up the current amount in redis does not respect any dimensions, unless there is an override provided.
see phofurl here the key is defined as the name of quota used.
if there is an override, name will be extended by a hash of matching dimension.
if no override is provided, key will be unchanged.
see phofurl furthermore key only identifier passed to lua script, see phofurl this problematic, as instances referring to same quota will effectively use same counter _unless_ you have an override provided.
different services might accidentally share same counter.
also this does not allow per-pod rate limiting.
while you can provide a dimension containing `destination.name`, you cannot provide override (as you cannot know all pod names), and thus all pods will use same key.
every 50 seconds pilot populates the following error entries indicating that a connection to galley has been closed: phofcode this behavior, similarly to cases described in phofurl and phofurl is caused by a low client timeout configured in a mid proxy mediating traffic between services.
in my case, the proxy is provided by openstack neutron lb operated by kuryr kubernetes cni phofhyperlink which for each kuberentes service spawns a haproxy instance in tcp mode with the following configuration: phofcode the configuration explains the regular frequency of connection errors and failed watches occurring every 50 seconds - `timeout client` set to 50 seconds.
most services in kubernetes and istio control plane communicate using grpc performing rpcs via long-lived http/2 connections.
without proper mechanisms for keeping connections open frequent errors will be common, especially for idle services.
idle istio service mesh generates too many errors, which, although harmless, significantly limit clarity of operation.
having connection errors populated every few seconds makes it difficult to detect and debug "real" issues.
istio provides keepalive options for several control plane components e.g.
`keepaliveinterval` `keepalivetimeout` parameters pilot, however, these options are not applied use case of keeping idle connections open.
keepalive pings are sent only if there are active rpcs present.
this behavior is controled via `permitwithoutstream` option: phofcode for some components i.e.
galley phofhyperlink , on server side phofhyperlink , we permit keepalive pings over idle connections: phofcode however, there is no corresponding configuration no client side: > // clientparameters used set keepalive parameters on client-side.
// these configure how client will actively probe notice when // connection broken send pings so intermediaries will be aware of // liveness connection.
make sure these parameters are set coordination with keepalive policy on server, as incompatible settings can result closing connection.
my proposal enable pings idle connections by switching `permitwithoutstream` flag `true` communication between istio control plane services.
that should reduce number failures on regular operation.
istio provides annotations & which can be used to override the global proxy resource requirements.
these annotations are not documented in phofurl or phofurl
the `istio` helm chart has a global value to insert imagepullsecrets into deployments/jobs, but `istio-init` does not even though it uses containers that may need to come from an authenticated private registry.
the istio regression patrol is showing a regression in throughput and response time on all 3 configurations (full istio, no mixer, ingress only) and for the 2 branches tested (1.1 and 1.2) for builds starting on 07/25.
the degradation is from 10% to 15% compared with the baseline (1.1 ga) or previous builds (see phofurl to verify that this degradation was not due to some unforeseen change in the test environment, i ran again the load with build 07/22 and got good results, as shown in comparison charts below for 2 configurations: image phofimage image phofimage since "ingress_only" configuration is equally affected, that indicates a change introduced in ingress gateway could be cause of this regression.
we have a number of rabbitmq consumer pods with istio sidecar running.
these pods should consume messages from rabbitmq running as a hosted service via cloudamqp.
as soon as the pod starts the consumer container never receives any messages even though the queue has messages waiting to be consumed.
when we turn off sidecar injection, messages get consumed as expected.
connectivity to cloudampq seems to be broken when istio is running.
oddly, when we run a second process of the rabbitmq consumer within original container that had connectivity problems while sidecar is running, we are then able to connect and consume messages.
to troubleshoot we created a serviceentry resource but it did not seem have an impact.
when using loadbalancersourceranges in istio service with load balancer in aws with 1 security group attached if the cidrs are > 50 entries (limit per security group) a new security group is not created and also that has a limit of 5 security groups per load balancer in aws.
if you try to create > 50 cidrs nothing changes in aws.
example: if you have 0.0.0.0/0 and you try to add more than 50 cirds the 0.0.0.0/0 will stay without changes.
if you try with < 50 entries then it works the sg is updated with the cidrs phofurl
we have seen in many scenarios, that the pilot is scaling up without an obvious reason.
therefore, we did some performance measurements.
it seems that cpu usage, which is used to trigger the autoscaler, is not correlated with the actual load of the pilot.
we used following scenario (see also #14782) * create 400 namespaces with one virtual service and one service in advance * use a loop to * create one additional namespace with one virtual service and service * remove it directly after creation we used pprof to get profiling data for several numbers of ingressgateways and pilots phofcode the main three cpu consumers are
enable ip address based configuration in serviceentry and virtualservice
i have about 20 pods running on kubernetes cluster.
after about 3 days, they begin to refuse readiness prob http requests.
this is an example of "kubectl describe pod" output: ` warning unhealthy 4m41s over 4d21h) kubelet, digi (combined from similar events): readiness probe failed: get phofurl read tcp read: connection reset by peer` output of same pod after few minutes: `warning unhealthy 2m32s over 4d21h) kubelet, digi (combined from similar events): readiness probe failed: get phofurl read tcp read: connection reset by peer` seems like process itself inside container is not aware about any issues.
if i opening ssh into container (e.g.
note: have been having troubles with dev env, so it 's possible that the following is simply misconfigured following the task for setting up a secure ingress gateway with sds phofhyperlink works on its own, but when sds is enabled globally in the mesh phofhyperlink in conjunction with the secure ingress task, requests to ingressgateway fail.
service x which is grpc client connecting to service y which is stateful grpc server doesn 't recover when server 's pod is recreated.
service y is grpc server configured as a statefulset with headless service.
service also have serviceentry: phofcode service x connecting to service y using address when service x started before starting service y, then everything works fine.
when i delete pod of x, connection to x fails with message: phofcode when y starts then message changes to: phofcode to reconnect to y, i need restart x.
the daily build process should process sha256 files for each of the istioctl archives that are published during the build process.
currently, the build process is publishing the sha256 file for windows archive (.zip.sha256) only.
when a destinationrule specifies a trafficpolicy that uses cookies for a consistenthash loadbalancer for more than one subset, each subset 's cookie is applied instead of just the appropriate subset 's cookie.
was attempting this as a workaround for phofurl
when restarting the istio-ingressgateway pods and simultaneous requesting (e.g.
with curl), some request fail with `empty reply` even if a `rolling update` is used.
how do i use phofcode
if you try to start productpage v1:1.15.0 with a different uid such as 1001 python will error with `keyerror: 'getpwuid(): uid not found: 1001 '` docker run -it --user 1001 sh python productpage.py 9080 cat traceback (most recent call last): file "productpage.py", line 379, in <module> port=p, debug=true, threaded=true) file line 943, in run run_simple(host, port, self,
when we define the following service entry (where `.mesh` hostnames are resolved with istiocoredns) and virtual service, it seems to work via istio-ingressgateway but not from a sidecar istio-proxy in a workload.
phofcode phofcode here is the output for _istioctl proxy-config endpoints_ command : istio-ingressgateway (looks right as it points to cluster ip): phofcode meshapp01 (doesn 't look right, some random public ips): phofcode i think this is causing the calls from meshapp02.mesh from meshapp01 to fail with 503 while the same works via istio-ingressgateway.
restarting the sidecar-injector pods does not produce matching ca certificates.
envoy is randomly dropping the connection between jboss client and postgresql database and gets many connection destroy warnings in the application logs.
this is start happening when we migrated the application to the istio mesh.
there is no issue or log in application when we remove istio sidecar and application directly connects to database.
it seems like sidecar reload drop idle connections, the pilot push configuration update to sidecar which causes drop in connection and jboss jdbc connection validator will verify mark this as invalid open a new to postgresql.
sample client log: warn (connectionvalidator) destroying that is not valid, due following exception: an i/o error occurred while sending backend.
tat tat tat tat caused by: java.io.eofexception
i have a simple go program (available here phofhyperlink ) which will either: * starts a grpc client that keeps sending data to a server (via streaming), or * starts a grpc server that listen for client connections, once client called its api (this is only one api called `hi`), it will firstly receive the first message from the stream, and then sleep.
what the program will do depends on the command line arguments.
and purpose of this program is to test back pressure handling.
first, i ran test locally, i.e.
without kubernetes and istio, i started client and server on my laptop (not using any proxy), and stream will eventually blocked on side, won 't be able to send any more data, that 's expected behavior.
then, i ran them inside kubernetes cluster, which has istio enabled, stream never blocked on side, sidecar eventual log an warning message: > warn epoch 0 terminated with an error: signal: killed > warn aborted all epochs then, connection between server be terminated.
~we set memory limit proxy sidecar to 1gi, however, it got killed before it reached limit.
in my test, proxy got killed when sent about 500mi data.~ it looks like that happened when proxy was about use up its memory.
having started with a single-control plane, multi-cluster installation using the multi-network strategy outlined in the documentation, we experienced numerous issues resolving services across clusters and decided to eliminate the remotes and their associated networks.
i modified the `istio` configmap resource in `istio-system` namespace and removed two superfluous networks referring to remotes.
i maintained primary network which references gateway in primary cluster, however.
the gateway definition we had been using before continued to work just fine as we redeployed our services into this single cluster.
however, subsequent services (virtualservice resources) configured identically to working ones and applied same cluster have started failing resolve other services in _same_ cluster.
i have checked pilot logs an attempt debug only relevant error i can find is following: phofcode this is with debug logging enabled across board for pilot.
it gives no further information about which cluster/namespace it is attempting access.
the certificate of phofurl has been expired.
validatecidr is implemented in common.go but not used by any non-test code.
add validation for ip values in operator's validate phase.
after pushing invalid remote cluster configuration, mixer will log errors indicating the specific problem.
however, after fixing the configuration errors and re-creating the remote cluster secret, mixer instances (both telemetry and policy) fail to recover from the original error.
the commit ca334ac9f updated the envoy version and also added new logging parmeters to the listener configuration that is sent down to envoy.
the new listener configuration contained the directive.
an envoy container running as part of an existing deployment running versions of prior to this change do not know how to handle this new configuration and reject the listener change.
this leads situations where a pods cannot receive traffic, as there is no listener bound.
phofcode the problem only manifests on restart of a pod.
while this happens rarely, one cannot assume that all deployments will be updated pick up new sidecar injected version (in this case `1.1.9` `1.2.2`) before a pod restarts.
as a result, any pod that restarts as part of workloads being moved around k8s cluster, failing hardware, etc.
will ultimately not receive traffic when it is rescheduled.
the only way fix is by rolling _forward_ envoy image by updating deployment so that sidecar injector will trigger, or rolling back control plane upgrade.
example usage ( phofurl of the stackdriver adapter is out of date phofcode
_preface: this is without galley/mcp.
pilot is directly interacting with k8s.
not sure if moving to galley would change the behavior._ the `podcache` phofhyperlink and `workloadsbyid` phofhyperlink caches are keyed on pod ip.
we are running into issues with this for pods that have `hostnetwork: true` because we end up with multiple pods with the same ip.
this causes the `workloadupdate` phofhyperlink method to constantly trigger full pushes due to label mismatches phofhyperlink since it is actually comparing different pods.
in a large cluster several host networked daemonset pods, this ends up creating a huge amount of load on pilot.
applying a sidecar resource without `spec.egress` results in `error from server: error when creating "stdin": admission webhook denied the request: configuration is invalid: sidecar: missing egress`
i 'm trying to collect metrics( phofurl with latest version (v1.2.2), but when i execute `kubectl apply -f i get this error (i execute it again for copy the output): phofcode and istio.io crds, there 's no "prometheus": phofcode
`istio-policy` pods call out to our custom adapters for policy checks.
we notice that every time an adapter pod is killed (either due to a deployment or an eviction), a small set of requests from mixer fail.
we tried adding a prestop hook of `sleep 30` to the adapter pods to give mixer a chance update its endpoints but that seems have no effect.
my hypothesis is that these are persistent grpc connections that only fail when the adapter pod closes the connection.
(i haven 't dug into how this works so i may be totally offbase).
is this known issue and, if so, is there workaround get zero-downtime deployments of adapter pods?
redis sentinel cannot find master with istio 1.2.2 or 1.1.11. have tried renaming service name redis to redis-sso as suggested in a different issue, but it just wont work.
i would like to work with istio and not move to linkerd.
move circleci jobs to prow.
we have two service x and y in same test namespace, x call y inside service mesh.
we have enable servicerole on service y and in servicerolebinding we have given user as * and when x service calls y then it is working fine as expected.
but when we give "abc" instead of * in the user filed of servicerolebinding then also x gets response from y. that should not happen.
a slack conversation below: <img width="866" alt="screen shot at 6 49 17 am" src=" phofurl
when you update the values file and re-assert the helm install of istio, changes to the `global.proxy` section do not appear to cause already injected sidecars to be updated.
i have a gateway that captures http/2 traffic on port 443 (i.e.
a virtualservice matches on the domain i am fronting then re-routes this traffic to another domain (in this demo case `google.com`), added to the mesh via a serviceentry.
i observe that the request is received with `scheme: https`, but the scheme is downgraded to `scheme: http` before being routed outbound over a tls connection.
the request is rejected, as one would expect, as plaintext is being sent down an encrypted channel.
the server (google.com) closes connection.
the request returned to client a 503 with message: phofcode
istio proxy cannot route to service on serviceport 80. but after i changed the port, proxy could route normally.
i wanted to run a subset of the e2e tests (simple tests) on an existing istio cluster with mtls activated per `destinationrule`: phofcode this default rule prevented the test to successfully run (since the test case checked an http endpoint).
after adding the following following `destinationrule`: phofcode `simpleingress` test case is running.
from my perspective there should be no downsides in creating a specific `destinationrule`.
when trying out the https via egress gateway tasks i notice they only work from the namespace the virtual service is applied to.
from what i can tell this happens because the keyword "mesh" now expects a namespace prefix or it is only applied to sidecars in local namespace.
ie: "anything/mesh" is all sidecars "mesh" is current namespace sidecars.
the following virtualservice works from all namespaces: phofcode this one only works from namespace virtualservice deployed to: phofcode the only difference between two prefix for "mesh" keyword.
helm delete does not remove istio-system namespace.
helm delete --purge istio helm delete --purge istio-init
istio documentation on rate-limiting states: > every named quota instance like requestcount represents a set of counters.
the set is defined by a cartesian product of all quota dimensions.
however, the way `memquota` and `redisquota` implement this definition of "set of counter" is not consistent (as mentioned in phofurl as both support the `quota template`, the documentation even suggests that `redisquota` is a drop-in replacement for `memquota` - and encourages its use for convenience unless in production.
consider the following named instance and handlers: phofcode for `memquota`, each unique tuple `(source, destination)` gets its own counter.
for `redisquota` same counter is used for all unique tuple `(source, destination)`.
with this setup in place: - `memquota` will allow a rate 80 req/s on each two requests types `(source=10.0.0.1, destination=reviews)` and destination=reviews)`.
- `redisquota` will not allow rate 80 req/s on each two requests types `(source=10.0.0.1, destination=reviews)` destination=reviews)`.
it will limit 60 req/s (from both request types).
discovery container keeps crashing with sigsegv if auto sidecar injection enabled in cluster.
here is the stack trace (see full logs attached): 1/1 running 0 27h 1/1 running 0 27h 1/1 running 0 27h 1/1 running 0 27h 1/2 crashloopbackoff 45 3h53m 2/2 7 2/2 7 phofcode
after enabling the istio ion gke, i am not able to get all traces in stackdriver, the logs in mixer shows unknown workload instance.
phofcode and the trace list in stackdriver is not listing any app related information.
the only source i can see is from
in grafana, istio workload/service data is extremely limited for egress gateway.
"istio service dashboard" show data in "service: section, for the "client request volume", "client success rate" and "client request duration" subsections.
"istio workload dashboard" is totally empty.
associated query in prometheus also return empty result set.
envoyfilter cr object is not being applied to the `"virtual"` listener of a workload sidecar.
no logs are visible neither in the pilot > discovery container nor the workload proxy.
brief overview: in our current implementation of istio, the ingress gateway sits behind one of our partner's reverse proxies, i.e.
the client owns the domain name, which gets resolved to their reverse proxy, which in turn forwards traffic to our ingress gateway ip.
in turn, the ingress gateway acts as reverse proxy itself, routing traffic to either an azure web app (the web frontend) or an api service (running on kubernetes).
while this system works fine, we've found that since migrating to this new implementation (before requests would go directly from partner's reverse proxy azure or kubernetes), we lost track of client source ip in http headers.
iptables rules are not updated even after successful istio-init so the traffic doesn 't pass through proxy hence non of the rules apply to the services.
consul cpu usage reached to 300% while service changes in my test environment.
the high cpu usage of consul is caused by the pilot consul registry, which is called multiple times while services change in order to push the changed services to envoy sidecars.
the repeated consul registry calls result in hundreds of remote calls to consul catalog rest apis.
we support phofurl however it only contains the latest charts version.
developer quick start phofhyperlink from istio/operator points to invalid git repo, and doesn't provide dependency installation overview.
all istio helm repositories contain the same version of istio-cni chart.
envoy is only trying to resolve ipv4 address, so all ipv6 external services can 't be reached with resolution.dns mode.
and according to envoy documents by default it should be auto, means first ipv6 and then ipv4.
but i found in istio code, it is specifically set to ipv4 only.
grep * -r cluster.dnslookupfamily = apiv2.cluster_v4_only enum cluster.dnslookupfamily [cluster.dnslookupfamily proto] when v4_only is selected, the dns resolver will only perform a lookup for addresses in the ipv4 family.
if v6_only is selected, the dns resolver will only perform a lookup for addresses in the ipv6 family.
if auto specified, dns resolver will first perform a lookup for addresses in ipv6 family and fallback to a lookup for addresses ipv4 family.
for cluster types other than strict_dns and logical_dns, this setting ignored.
if a kubernetes cluster undergoes a scenario where all pods are destroyed and then rescheduled, the istio control plane will not successfully restore itself back to functionality when the number of pilot pods is > 1. consequently the rest of the istio control-plane, and gateways never stabilise/get their configuration.
all pilot pods will report following in their logs until number of replicas is scaled to 1: phofcode
i have single gateway and two virtual services.
i am sending requests to ingress-gateway but with different hostnames but traffic is routed to same services for both.
recurring connection termination error observed in galley logs.
the following error appears once every few seconds: phofcode is ip address of istio galley: phofcode more logging context: phofcode
when configuring subsets with label matches in private destination rules, traffic policy rules are applied for cds, but not for eds.
istio does not allow domain name with more than 64 characters
on scale when creating 600+ pods with virtual services that are connected through web socket, connections get broken.
connections are dropped by pilot and ingressgateway.
pilot error msg: "client received goaway with transport: loopywriter.run returning.
connection error: desc = "transport is closing" mcp error receiving mcp resource: rpc error: code = unavailable desc = transport is closing error mcp error receiving mcp response: rpc error: code = unavailable desc transport is closing" ingressgateway msg: "proxystatus": { { {}, {}, {}, {} and later "epoch 0 terminated with an error: signal: killed.."
i got too many warnings about ignored consul service tag.
i understand only key|value form of tag can be used by istio, but other forms are also normal in our system.
the pilot log is flushed by the warn messages, it could be better if it is printed as debug instead of warn log message.
warn tag ignored since it is not of form key|value warn tag ignored since it is not of form key|value tag ignored since not form key|value tag since not `` `
my destination rule resides in "default" namespace where my service resides in "ns1" namespace.
in the destination rule definition, even if i use "fqdn" of the service, it is interpreted to reside in "default" namespace of destination rule and the call to service via istio fails (http/1.1 503 service unavailable).
if i change the namespace of destination rule to "ns1" (same as service), then call to service succeeds.
for endpoints/service discovery, multiple mcp sources should be supported in multi cluster environment.
to sync service discovery from external sources, example consul( phofurl mcp sources for endpoints should be available and will sync the updates with pilot/envoy.
after enabling istio-cni and the side-car proxy never came up bcz of readiness failing.
the root cause is ip6tables input tables rules are not correctly set.
gateways from meshnetworks are not picked up when using serviceentries.
i would like to route every request from a specific cidr block via a remote gateway.
for example, route every request to *.mycompany.local (cidr to a remote gateway inside the mesh.
note than not everything undert *.mycompany.local will be routed via the gateway, only whatever resolves within the cird for example foo.mycompany.local should be routed via the gateway but bar.mycompany.local should not.
on the phofurl page, the default value for global.proxy.concurrency is set to 2, but the description says "controls number of proxy worker threads.
for allowing grpc traffic the gateway only supports specifying http, http, https, https for the port protocol.
using http2, or grpc does not appear to be supported and will cause error.
i have confirmed this on my cluster for istio 1.1.7 and have not yet tested on 1.2.1 this behavior was first noticed in istio version 1.0 phofurl its a high priority for many clients to use grpc as primary implementation of micro services allowing multiple languages to be used.
external clients may opt for direct grpc calls over http2 vs http rest performance reasons or simplicity of using just one access mechanism.
using http the port protocol specifier is confusing in terms of what protocol is actually in use end to end so it would be good have clarification on this.
also need clarification on tls vs https as port protocol specifier when tls is enabled.
i 've created a policy as follows: phofcode with this policy in place, i 'm getting a 401 unauthorized when calling `/credit/category`.
making a call to `/health` results in a http 200 response.
it seems that paths in `excluded_paths` are not treated correctly if it also occurs in `included_paths`.
i noticed a problem with services in the mesh were not able to call a new service added to the mesh.
when i checked the logs it seems that pilot is sending only cds updates to proxies.
proxy status was "not sent" for the services in question.
there is nothing special that changed in mesh config.
on previous day we removed quite a lot of services from mesh tens due to an access issue an external resource (code related problem).
after i restarted pilot everything went back normal.
in a split-horizon eds deployment (as documented under the cluster-aware service routing), with a three-cluster configuration, i am unable to resolve any service in the mesh from the remote by internal host name the gateway correctly forwards inbound traffic to services in the remote clusters but none of remotes are able to resolve any services by name.
when an e2e test fails, we save tons of cluster info, which is great, but we save it to stdout in a non-parseable format ( phofurl this is not challenging to read, challenging to download (build-log.txt gets up to 4 gb), and corrupts our junit-report output (which parses build-log.txt expecting go test like output).
see phofurl for an example of a huge build log, and phofurl for the corresponding junit.xml.
sidecar egress configuration is not honored when is set to `allow_any`.
i think it shouldn 't matter what your configuration for `outboundtrafficpolicy` is, because as the docs phofhyperlink say (emphasis mine): > istio has an installation option, that configures the sidecar handling of
if the cni plugin is installed and istio is configured with `istio_cni.enabled: true` then injected pods cannot validate against any psp on gke, giving an error as follows: phofcode
the operator docs provide a confusing command for building the `iop` tool.
instead of outputting to `$gopath/bin/iop` as you might expect, they output to `$gopath/bin`.
showed as passed in pr phofurl but actually it's aborted in prow: phofurl the pr gets merged even if it breaks some tests: phofurl cc @utka
can 't access kiali / grafana with ingress on azure aks.
i can successfully port-forward without issue to both services so this is just related to ingress.
the following works: phofcode everything is running: phofcode but whenever i go to phofurl i get "upstream connect error or disconnect/reset before headers.
reset reason: connection failure" and the https variant doesn 't work at all and gives a time out.
the sidecar proxy of an application pod does not verify host: kubectl exec -it $(kubectl get pod -l app=sleep -o -c sleep -- curl httpbin:8000/headers -hhost:myhost.com { "headers": { "accept": "/", "host": "myhost.com", "user-agent": "curl/7.60.0" } }
i 'm running istio in an ipv6 cluster.
but when i check ports which pilot is listening.
i found one of port(9876) is listening on ipv4 loopback.
kb exec -nistio-system -- netstat -anp defaulting container name to discovery.
use 'kubectl describe -n istio-system ' to see all of the containers in this pod.
func defaultoptions() *options { return &options{ port: 9876, address: "localhost", } } of course in pilot /etc/hosts file localhost has both v4 and v6 addresses, but my question is in this case shouldn 't ipv6 take precedence?
the serviceentry validator in only accepts - ipv4 subnets for addresses - ipv4 addresses for endpoints for example in phofurl lines 2321 c 2324 (2323): for _, address := range serviceentry.addresses { cidrfound = cidrfound || "/") errs = appenderrors(errs,
i raised an issue previously (#15084) reporting a seg fault in the proxy upon trying jwt authentication.
although the latest update promised to fix this, i 'm still facing the issue.
here are the logs -> phofcode here phofhyperlink is my public key.
i 've changed it a bit from last time and made it look more like auth0 public key.
my decoded access token -> phofcode phofcode help would be appreciated, been stuck with this for way too long :(
isito 1.2.0 application can get source ip, 1.2.2 cannot be get the web application gets the visitor 's ip, similar to or istio 1.2.0 version can get the correct ip, 1.2.2 has always been
if i curl an ingress gateway with `-v`, i can see that it responds on one of the three elb ips... the other two just hang.
i 'm pretty certain i 've narrowed this down to happening when sending traffic to a immediately upon being created, from an otherwise unused ingress gateway.
couldn 't deploy application on namespace which is `istio-injection` label enabled.
when this error occurs, no log message ~~ manual sidecar injection phofhyperlink is working.~~
rbac namespace-level access control not working
there are some bad values for env vars for the proxy images: - `istio_proxy_version` is hardcoded to `"1.1.3"` ( phofurl - `istio_version` is set to `$istio_version`, which comes from `$version` in the `makefile`, which defaults to `"1.0-dev"` ( phofurl if i build a `proxyv2` image from head and inspect the metadata, i see: phofcode this information is incorrect.
a gateway object 's hosts list doesn 't match against host headers that include a port
i was following perform tls origination with an egress gateway phofhyperlink example and found out that telemetry to the service entry is not being reported when doing the step 5.
i 'm attempting to get internal services communicating via a virtual service / destination rules with weighted routing.
the case where there is a single route with weight = 0, there might be need to add some validations and logic fixes.
per the docs phofurl "if there is only one destination in a rule, the weight value is assumed to be 100."
in case that the user has added a yaml with weight = 0, it seems that there are a few things that might be happening: 1. the weight = 0 is treated/overriden in code to 100, but yaml remains with = 0 which not very user friendly.
so even if user explicitly wrote 0, 100 used in code.
comment in docs not very clear that even if * * set, then its value ignored.
(user could have left it empty too) phofurl 2. seems to be no validation for case when single !=100 phofurl
bumped into the same issue in my cluster running istio 1.2.0 (installed via default helm chart): phofcode it tells me the same line (`line 3`) for other deployments as well.
routing to http01 challenge in cert-manager fails if global mtls is enabled.
i 'm trying to apply fault injection rules to external services that my cluster is accessing.
i 'm able to successfully apply rules internally and to http routes, but it isn 't working for https.
looking at envoy logs, it looks like the mesh is recognizing requests the https route, but i haven 't been able apply any fault injection rules it.
i 'm running istio version 1.2 and have my set `allow_any`.
i 've been testing with phofurl here are the yaml files that i 'm trying use.
service entry phofcode fault injection rule phofcode i wasn 't able get this work with the "accessing external services" example ( phofurl or with my own project.
istioctl proxy-config <anything> hangs indefinitely on 1.2.0, eg: `istioctl proxy-config endpoint
to determine whether or not a given namespace should be citadel-managed, if the `listened-namespaces` flag is not used and `explicit-opt-in` is enabled, we must check the namespace 's labels for istio-managed.
however, citadel does not currently have the privileges to read cluster namespace resources.
i set up a virtual service and destination rule like below.
i expect the first `httproute` will be triggered only when request contains params `version=bar` (or header `x-version: bar`), and route to `bar`.
any other request should match the second route rule and go to foo (per api phofhyperlink : _the first rule matching an incoming request is used_.
however, looks like `queryparams` (or `headers`) was ignored, and the first route match all requests hence the `bar` server is always hit.
phofcode and destination rule: phofcode
this is found when i am modifying the perf test helm file.
in a extra helm values.yaml, i set global.sds.enabled to false and global.sds.udspath unset.
when this extra values.yaml overrides default values.yaml, the global.sds.udspath has non-empty default value.
this causes pilot to generate sds config for sidecar proxy.
the deployment has no citadel agent pods because global.sds.enabled is false.
this only affects workload sds.
customers would hit such issue if they switch sds to non-sds and leave udspath unchanged.
enabling galley and mcp results in mixer components crash looping until galley is fully available and able to handle requests.
phofcode it 's actually the livenessprobe doing the killing: phofcode which is configured quite aggressively (this is telemetry): phofcode this only happens on a fresh start of mixer, if you scale galley to 0
istio 1.1.7 and 1.2.0 "ip-based whitelists or blacklists" cleanup takes 4+ minutes to see the cleanup effect.
after applying the in istio task "denials and white/black listing" [1], user can see the "permission_denied... is not whitelisted" response when trying to access the bookinfo productpage.
however, user will still see "permission_denied... is not whitelisted" response until 4+ minutes after deletion of .
is this an expected behavior that requires 4+ minutes to see effect of ip based handler, instance, rule deletion ?
why does it take so long to deletion effect ?
whilst upgrading a larger (508 services, 566 pods) cluster, the istio installation failed.
the tiller logs showed that it was waiting for a destinationrule to be patched: phofcode this is an old crd that we have: phofcode we have done countless istio upgrades
i 'm seeing connections being closed in galley due to too many pings from the client: phofcode this ip correlates to a pilot instance: phofcode and discovery logs: phofcode
i 'm trying to implement service to service jwt authentication like something shown in this phofhyperlink repo.
while it 's working fine with auth0, i 'm having trouble while setting it up with my company 's authentication service.
i made the service architecture by following this phofhyperlink article, you can see my repository here phofhyperlink .
this is the policy i 'm applying -> phofcode i 'm hosting the public key locally, you can find it here phofhyperlink too.
if i hit the service with an invalid access key (say it 's expired), getting a 401 as expected, but a valid access key gives a `503: upstream connect error or disconnect/reset before headers.
reset reason: connection failure` upon checking logs for envoy proxy of publisher pod, i can see this -> `epoch 0 terminated with an error: signal: segmentation fault (core dumped)` this log message isn 't there when working successfully auth0, so i think this might be a hint.
but looking at lines in source code where log message is present, can 't figure out much.... one reason think might occur is different keys in access token passing.
the auth0 access token has following keys -> phofcode and my token looks like -> phofcode anybody has any ideas, i 've been stuck for quite some time now, any help will be appreciated..!
i was following the doc about "perform tls origination with an egress gateway" phofhyperlink but in the step 5 i don 't get the expected result.
i have an istio installed (1.1.7) and i 'm evaluating upgrading it to 1.2.0. i 'm using fabrikate+flux to configure kubernetes, so yaml files are always identical (stored in source control).
the only difference when i 'm templating 1.2.0 (compared to 1.1.7) is istio_cni.enabled=true.
everything is working with 1.1.7. i apply 1.2.0, delete all istio pods after crds were updated, wait for them to come up.
i delete all the bookinfo pods, they come up (no init containers now as excepted), but the ingress
pods which do not have containerports specified no longer work on 1.2.0. we have some applications that only make outbound connections so as such do not need listeners so this is a regression for us.
this manifests as: phofcode because pilot-agent is being started with an empty value for applicationports: phofcode
external https traffic always fill telemetry for a existing serviceentry (even if it doesn 't match) for example, if i have a externalservice to `www.apple.com` and i do requests to `en.wikipedia.org`, data is filled from the pod that called wikipedia, but the de points to `www.apple.com`.
when a meshconfig file is not found or could not be loaded, pilot resorts to reading from the 'istio' configmap directly (in case we're on kubernetes).
it doesn't do this for the meshnetworks- here, it only tries to load from a file and uses a default configuration if that's not possible.
my understanding is that pilot should not be directly dependent on kubernetes in the future so i think it should only try to read the meshconfig from a file (which on kubernetes will be mounted configmap anyway).
i understand there are still lot of places where pilot uses k8s directly but this seems like an instance where it could be easily removed.
am i missing something here?
is this code path used for testing purposes (codecov looks like it's not)?
after upgrading to 1.2.0 using helm template installation i've got: `tls error: secret is not supplied by sds` messages all over the ingress gateway instance.
i have recreated the certificates restarted the ingress instance, the logs said it found secret, but it still wouldn't work.
downgrading back to 1.1.8 github tag worked.
adding invalid entries to match rules, or simply misspelling a valid one, fails silently instead of triggering the webhook validation.
the impact is that although you think your config was successfully applied, it was not, and you don 't know something 's wrong until your stuff doesn 't work and/or you dig in the logs.
if your match yaml uses "sourcelabels" instead of "sourcelabels", you may not realize why the config isn 't working when it appeared to apply successfully.
in our virtualservices, we have a cors policy that specifies `alloworigin: "*"]`.
if a request comes in with an `origin` header set, the response includes an header with the value of whatever the `origin` request header specified.
the problem arises when we add a `maxage` to the virtualservice 's cors policy.
it correctly sends back `access-control-max-age` header when requested, which causes browser to cache cors policies for that endpoint.
unfortunately, this causes problems when same resource is requested from another origin before cache has expired.
[more information about this here phofhyperlink .
we are currently trying to route http requests based on uri matching, using a regular expression.
basically, any uri that matches should get routed to our api service, while all other requests for the respective host that don 't fit the pattern should be directed to an azure webapp.
the match shouldn 't be case sensitive, hence the '/i ' switch at the end.
this doesn 't work as expected however, as virtually any request gets redirected to webapp in question, despite fact that regex matches test urls in virtually any major regex tester you can find online.
i tried a few different iterations, omitting quotation marks, adding single or double quotes, double escaping characters ( ), using (?i) as a switch for case insensitivity, but no avail so far.
it 's worth mentioning that requests get redirected api service when using prefix based matching, however this method implies case sensitive uris, which is not what we need here.
i added my virtual service config below - any ideas what i might have gotten wrong?
the sample bookinfo pods can 't be created after labeling the default namespace with i also debug it according to istio-doc phofhyperlink , but it seems that nothing has been found.
replicaset logs phofcode istio-sidecar-injector logs phofcode
both the circleci tests and the build (`make test`) fail for the installer.
the source code assets and the os-specific assets of the same release contains different helm charts.
we need to call google services as well as aws services.
all the calls are https.
we need to setup request timeout for them but can not find the option.
timeout not supported with tls.
we 've been attempting to track down some random 503 issues in our istio adoption with mtls enabled.
we 've gradually stepped back out of some more complex scenarios trying to identify potential points of failure.
getting back to a quite simple install scenario with the published helm chart seems to have identified destination rule conflicts.
* using the published helm chart repo for 1.1.8 via `helm repo add istio-1.1.8 phofurl * using helm template -> kubectl apply for the istio-init and istio charts (see exact install below), both and * into a fresh, standard gke cluster (1.12.8-gke.6) * with a deploy of httpbin.yaml phofhyperlink into a "services" namespace we get the following with an `istioctl authn tls-check ...`: phofcode
making requests to a service with no virtualservice (or with a virtualservice with no timeout configured) that includes does not take effect.
the service responds successfully after its normal amount of time.
this should work, per phofurl >one more thing to note about timeouts in istio is that in addition to overriding them in route rules, as you did in this task, they can also be overridden on a per-request basis if the application adds an header on outbound requests.
in the header, the timeout is specified milliseconds instead of seconds.
relevant cluster dump info for the route phofcode relevant debug logs that show two extra headers i sent (`x-my-test` and were received differently: phofcode
when sidecar rejects any envoy config, pilot logs it as info level log.
pilot resource limit in 1.1.8 is less than the request phofcode
cirlceci seems to think that a create followed by an apply is a problem.
this is not desireable in kubernetes.
what is strange is this a new error.
i 've followed authorization guide phofhyperlink to setup rbac policies to httpbin service.
additionally, i 've gone on to test this setup for requests through ingress gateway by applying the below configuration.
i get a `403` based on the below config when i try to hit the api from the internet with `curl --header "authorization: bearer $token" -i -s -o /dev/null -w "%{http_code} "`.
though when i try hitting httpbin api through sleep pod within same namespace, it works with a `200` response.
`kubectl exec $(kubectl get pod -l app=sleep -n $ns -o -c sleep -n $ns -- curl phofurl -s -o /dev/null -w "%{http_code} " --header "authorization: bearer $token"` configurations: phofcode phofcode phofcode phofcode
when installing istio 1.2.rc1 via helm is not honored the property is still documented at phofurl
istio-ingressgateway is running but has no listener on port 80 phofcode
we 're using istio 1.1.7 as an ingress gateway on azure aks and we 're seeing strange behavior on tcp connexions never ending.
our client (mobile application on android using c++ grpc lib) connect to the cluster through an azure basic load-balancer (only lb supported by azure) and connexions are sent to istio ingress gateway.
for the moment our application does not use tcp keepalive.
we are seeing an increasing number of tcp connexions stacking up at the gateway level and also in our application.
after discussing with azure support, as i expected, the issue is comming from their lb which, at come point, cancel clients connexions but never terminate/close tcp connexion to backend (gateway).
we now have 2k where no traffic is going through.
while i blame azure lb for this bad behavior, i also tried timeouting those using istio/envoy.
following issue phofurl i tried adding a value of 190s (lower than 4 minutes idle timeout of lb).
also tried adding a timeout of 170s in `destinationrule`.
noticed that despite all this, final configuration envoy on ingress gateway still had : `"stream_idle_timeout": "0s",` in some parts.
here is relevant part : phofcode and : phofcode reading doc, see : phofcode my understanding here is that, as we are in a `gateway` not a pod 's `sidecar`, `stream_idle_timeout` applies `route-level idle_timeout` not used.
setting `stream_idle_timeout` to `0s` means never timeout idle connexions.
don 't see how change this value easily but any help welcomed.
we use a bash command to determine the latest istio version before executing the command from the documentation to download the latest version from command line.
#### command to fetch latest version from github `istio_version=$(curl -s phofurl | grep "tag_name" | cut -c 15- | tr -d " | tr -d ,)` #### command to download latest version `curl -l phofurl sh -` for some reason, is currently 1.0.8. previously it was one minor higher: 1.1.8. this caused our automated deployment script break because instructions install istio crd 's differs (i.e.
folder structure was modified between versions).
is this a mistake, or is there a different method i should use determine current highest stable istio version?
cpu limit(cpu 2000m) of istio sidecar is too big(much bigger than the cpu request value) which conflicts with namespace level quota limit design.
currently, we set quota limit(both request and limit) in namespace level.
and we met following error: phofcode in fact, the limit of the application pod is 1000m, and now, the quota check found that 3000m cpu limits reaches, and no enough resources left for other pod, so later pods failed to start.
helm value for does not change expected key for kiali.
proxy-status and authn tls-check commands fails with the following error: phofcode
destinationrule doesn 't accept subset labels with slashes.
in gateway connectivity phofhyperlink doc, the following command generates a conflict in the yaml file: phofcode as the files don't have the `---` separator at end, `cat` command appends two yamls together without separation.
this causes a missing crd in cluster.
this missing crd didn't cause any issue in my demo app, but may do that in future.
from the trace spans always report zero bytes: screenshot at 09 59 16 phofimage
we installed istio via helm default config (prod) and try to simulate a high load environment according to our production kpi's.
each pod uses `8 route`, each pod created in new ns.
using the default configs `pilot` was
when installing istio via helm, the `values.yaml` files seem to be ignored in istio version `1.1.8`.
this issue did not appear in previous versions
the documentation for istio-cni was reviewed and a problem was found wrt the lack of released helm charts.
hi, we are suffering a issue where if we re-create a ingress pod aka we restart it it wont start to listen on :80 :443 even though it says it should if you check with phofcode we have tried on 2 different clusters and with both replicacount 1-3 where the ingress gateways work fine after install but if restarted aka chaos testing then they fail to come up.
they show as ready in kubernetes since the check towards :15020 works phofcode phofcode * pilot logs for proxy restart phofcode *helm values*
in data panel, the final `socket_address` of inbound xds is generated by pilot.
it works if user process listen to `0.0.0.0` but some case, user process listen to the specific pod ip, the traffic route will not work.
the scenario described in apply kubernetes network policies phofhyperlink cannot be successfully followed.
step 9: phofcode shows a different error message.
probably not relevant, since hostname can 't be resolved as well.
step 13 (curling cnn via egress) fails: phofcode envoy 's readiness probe fails: phofcode envoy logs show the following: phofcode
i totally follow the phofurl guide, and then start `bookinfo`.
but the pilot reports phofcode and accessing `ratings, details, reviews` will all be redirected to `productpage`.
manually run integ tests and e2e tests run against a gke cluster fail because the istio-proxy sidecar container dies with the following error: phofcode investigating more closely, it appears that the executable permissions for the envoy binary are set to 750 instead of 755. this bug appears to have been introduced in phofurl there was some discussion of impact of removing chmod statement, but it didn 't seem to fail automatic tests.
should we re-add chmod that was removed in above pr?
should we use some other mechanism to ensure that all packaged executables are 755 before packaging them into docker containers?
i have a gke cluster (4 node, 8 vcpu per node), and i am following this guide to execute perf test against 1.0.7 phofhyperlink .
this test uses file mount approach to provide key/cert for each workload.
it deploys 20 workloads in one namespace test-ns, including 10 sleep pods and 10 httpbin pods.
it basically runs following steps below.
1. access each sleep pod and sends a request to httpbin:8000/headers, and one of the httpbin app will accept this request.
1. delete the workload deployment via kubectl delete -f then redeploy workload deployment via kubectl apply -f wait for pods to be ready, repeat step 1. the test starts fail after redeployment, 50% requests get 200 ok, others get 503. i stop the test manually access sleep app send request, the success rate does not recover.
kubectl apply -f istio-demo.yaml when upgrading isito, kubernetes has restart of isito-proxy pod, business interruption access
when i perform enabling rate limits task phofhyperlink .
wether i use memory quota or redis quota, the rate limits is not work, and i can find warn in mixer --- `warn trequested quota 'requestcountquota ' is not configured`
the dnsconfig field of certmanager 's deployment in helm is not indented correctly.
btw, the reason i discovered this, is the default name server in certmanager was not resolving my ".systems" tld, and was thus unable to verify the txt dns record it made to generate a certificate.
so, i need to switch the name server in certmanager pod.
if the user installed a previous `istio-init` release, and didn 't delete and purge it, the 1.2.0-rc.0 upgrade 's instructions phofhyperlink to install it again will fail.
`istioctl verify-install` incorrectly determines that k8s version as lower than `1.11`: phofcode
the `err` label of the metric `pilot_xds_cds_reject` sets a value with an arbitrarily large error message.
one particular example contained a value with 94k bytes in it.
a scrubbed version can be seen in this gist phofurl this brought our prometheus instances to their knees.
we were specifically bit by the `pilot_xds_cds_reject` metric, but it appears that there are several other examples that could crop up: phofurl for the time being, we are dropping the metric entirely.
second replica of istio-ingressgateway and istio-egressgateway intermittently fail to come up.
there is not much in the logs, at least for me.
please, let me know if any additional information is needed to troubleshoot this issue.
we 're evaluating istio right now and trying to find out if istio is production ready for large clusters.
when i 'm using java to connect our system i 'm getting the below exception.
the thing is that in java i can bypass non matching name and self signed certificate but i can 't bypass nor ignore any certificate issues.
couldn 't open connection: x.509 certificate is incomplete: subjectalternativename extension must be marked critical when subject field is empty exception in thread "main" x.509 certificate is incomplete: subjectalternativename extension must be marked critical when subject field empty tat tat tat tat caused by: x.509 certificate incomplete: subjectalternativename extension must be marked critical when subject field empty t... 11 more
original user report: > hey guys, we were testing the jwt auth and noticed that jwt tokens are required to have the `exp` field or they wont validate, im wondering if thats is a hard requirement or can we have non expiring jwts?
> code-wise if the `exp` claim is not present then the jwts should verify.
phofurl > i found that too.
although it does not match istio phofurl
gateway does not appear to be routing grpc requests to the correct endpoint, or is somehow disrupting the request.
i tried using the discussion forums but cannot attach files.
if you download releases from phofurl bug version in the chart.yaml are not bumped so: istio-1.1.7 chart.yaml phofcode and 1.1.6 looks identical: phofcode i and i'm sure most people expect semantic versioning and actually bumping of bug versions.
especially when i've been told that releases are the source of truth.
i still think with proper versions a public helm repo would work well.
but i brought that up phofurl
when a sidecar first starts, it connects to pilot with no issues, however after a short while envoy sidecars fail to connect to pilot, restarting pilot seems to solve the issue.
however when i changed the istio config # mutual tls authentication between sidecars and istio control plane.
controlplaneauthpolicy: none # # address where istio pilot service is running discoveryaddress: it works fine and i do not see the issue.
ilbgateway has started up, and reports readiness to kubernetes (so the deployment carries on) it 's not actually ready, as envoy has not started listening on the right ports.
i 've got the multicluster setup going, so ilb should be listening on 80, 443, and some others.
it 's not listening on anything for a significant amount of time.
(a separate issue would be why it takes so long to warm all the clusters before it starts)
ingress-gateway does not works well when the service has multiple ports
image phofimage image phofimage pilot not sent rds to ingressgateway, listener not have 80 port.
i restart one of thire, it 's synced.
getting & metric errors in prometheus but cannot find any error logs in pilot pods.
so not sure how to resolve this error and avoid &
define a service with following definition: phofcode this definition will be populated as a 443 route in the sidecar proxy and therefore all the outgoing https traffic will have protocol level errors.
the certificate in the of the sidecar-injector `cabundle` expired, and did not auto renew.
phofcode following on from phofurl - when we were trying to get services back online, pods were unable to start due to the certificate on the injector being invalid.
this compounded an already bad day.
the root certificate generated by citadel hit 365 days old: phofcode this caused services to be unable to talk to the control plane: phofcode and services unable to talk each other: phofcode locating this was a nightmare, no logs anywhere indicated there was a problem with certificates.
it was by pure chance i noticed the secret was 365 days old: `istio-ca-secret istio.io/ca-root 2 365d` in order recover the cluster we had to: - delete that secret - restart istio-citadel - let citadel update all other services secrets - restart _all_ other apps (yes, envoys which were running did not dynamically update their certificates and recover they continued get 503s until restarted).
however, we were then unable restart apps because the sidecar-injector certificate suffered a similar fate albeit with a different certificate chain, see: phofurl it seems this isn't an unknown issue: phofurl which is quite unbelievably really folks!
using envoyfilter for external auth through `envoy.lua`: phofcode and i have config the access log format for envoy: phofcode then try to access some resources `curl phofurl and got log in istio-ingressgateway: phofcode as per access log, istio-ingressgateway has traceid and spanid but i can not get these two headers from lua script in the for loop.
the managed and mandatory `default-http-backend` service deployed in gke clusters apparently randomly picks a nodeport at start time in the lower 30000 range.
(i cannot find any documentation on this, but i spot-checked a dozen different clusters otherwise created the same way and they all had different port numbers.
i even deleted the `service` resource in one and it was immediately recreated with a * different * node port than it had had previously.
i assume they 're doing the equivalent of a `kubectl expose`, which uses allocation range by default) in one cluster today, `default-http-backend` service randomly got `nodeport` value of 31390, so when `istio-ingressgateway` was being deployed, it failed: `the service "istio-ingressgateway" is invalid: spec.ports[2].nodeport: invalid value: 31390: provided port is already allocated` we deploy istio using automation into at least dozen fresh gke clusters day and this is first time it 's failed because of this, but obviously, it 's serious issue which gke is unlikely to address.
i 'm not sure what best/reasonable solution would be here, except not to use nodeports in `expose` range, as that carries risk of conflicts not just with this service gke but virtually any cluster.
for now i 'm overriding node ports that range our automation script.
as of istio 1.1.7, serviceentry locality feature (for adding additional external endpoints for a service) only supports static resolution and requires endpoint destinations specified as ip addresses.
in any non-trivial production-grade scenario where a service is running on cloud vms as well as inside a kubernetes cluster, and the service wants to enable in-cluster traffic to failover to its external endpoints, requiring the configuration to use ip addresses only is impractical.
service vms can and will go up and down, the service 's endpoint ip addresses will change frequently.
it 's impractical expect the service owner keep serviceentry up-to-date whenever service 's external endpoints change.
if pod defines a port (assumed port-1) but service do not defines this port-1, then for a single request to pod_ip:port-1, we can see very very much logs of this single request, and it makes a loop between sidecar and iptables which will final use all 1024 connection-pool of envoy.
for example, for this service and deployment: phofcode the pod defines port 80 and port 2334 but the service only defines 80, if we do a request from another service to pod_ip:2334, i see plenty of logs in envoy: phofcode which means somewhere makes bad loop !
the reason, i guess, because of this commit phofhyperlink commit phofhyperlink add default `passthrough cluster` , all traffic will be fallthrough, in case, the request to pod_ip:2334 will be fallthrough go to iptables, it will go output table because it 's dst_ip is itself, got chain: phofcode then go back envoy, be fallthrough, go iptables ... so loop became.
when enabling sds with a gateway, content of secrets will be printed at debug level on stdout and there is no way to change the log level of the sds sidecar.
phofcode by sending secrets content to stdout, these will ends up on our searchable logs storage.
i compiled the envoy binary from the source code, and then built the proxyv2 image with this envoy binary, but the pods with this sidecar were all get 503, in istio-proxy logs i can find this: phofcode
following the instructions here phofhyperlink to secure an ingress gateway with file mounted tls certs, the certs are mounted correctly, but the ingress gateway is not aware of them.
istio is provided by the istio gke add-on.
cloud run is also enabled on cluster.
deleting pod and recreating it does not solve problem.
regular http access through gateway works as expected.
https requests give an immediate `connection refused` ingress gateway logs show requests for http traffic.
no logs appear for https traffic.
i am trying to follow a tutorial for enabling mtls for service mesh from here phofurl but after enabling mtls, when i try to use `curl` command from the tutorial as shown below phofcode i am getting error from curl as phofcode
i 'm trying to make https calls to an external resource using urllib2 in python 2.7.6 and they fail with "connection reset by peer" (error code 104).
when i try the same request with python requests, urllib3 or with curl the request works as expected.
when monitoring envoy fron the ingressgateway on port 15000, the envoy process stop working when i clear the stats
hi, i want to connect to the external tcp service in the kubernetes cluster.
i know that there is a native kubernetes service and endpoint to connect, but after injecting istio i occasionally encounter connection tcp service failure.
i am not sure if have to use serviceentry for external tcp declarations.
otherwise the above situation will occur, so tried configure the external tcp connection using serviceentry.
but am having trouble configuring external connections using serviceentry.
when connecting service, pod will display an error indicating that name or service is unknown (the same is displayed when pinging from shell terminal).
below, will show my configuration (i want know if there is a problem with my configuration and understanding).
look forward your reply, thank you, good morning.
ingressgateway component is failing with following error: phofcode i suspect this pr phofhyperlink , which provides `proxycomponentloglevel` and `proxyloglevel` as parameter for `istio/proxyv2`.
while pilot supports this parameter phofhyperlink , it seems `istio/proxy` does not support phofhyperlink this parameter yet.
istio `tracing` and `side-car injector` pods are not starting.
#### details * i installed istio on kubernetes cluster using the manifest given below: phofcode * then after few hours `tracing` and `side-car injector` pods went to `pending` state.
* then pods are removed.
* by looking at the events of `replica-set` of `tracing` and `side-car injector`, i found this error: phofcode
we are running single control plane and 1 remote cluster.
we are trying to capture tracing and prometheus information of services running on remote cluster.
there is no data for both of them.
i have tried to enable jaeger for control plane first, that did not work.
modified remote cluster with below command : phofcode and able to see some data.
however that means tracing data wont be at single place for all the services as we start running more remote clusters.
we run netflix hysterics as well so be able to compare the data between envoys and hysterics.
problems * centralised tracing data * centralised metrics * compare between envoys and hysterics , remove hysterics in future releases
running `istioctl proxy-status` show one synced proxy (as expected): phofcode running `istioctl proxy-status <pod>.<namespace>` causes the envoy to crash: phofcode sidecar logs: phofcode pilot logs: phofcode
when a serviceentry object (like above) is applied, there are no errors, but pilot begins to choke and is unable to distribute config properly to the sidecars.
here are the logs from the discovery process: phofcode
there is ability to set grafana service url for the situations when kiali should be integrated with grafana deployed separately from istio.
link to chart phofhyperlink phofcode this url will be used only if `service` and `service_namespace` values are empty, but the problem is that default value for `service` is hardcoded on * kiali * side.
in result this url will not be used by kiali and there will be errors during requests to grafana api.
link to kiali sources phofhyperlink .
grafana settings description from kiali operator phofhyperlink .
this link is here just for understanding all properties that could configured.
i have an istio cluster running with service rbac and readiness/liveness probes set for the k8s deployment whose service is protected by the rbac policy.
i am running kubelet as a daemon process via systemd and because kubelet is performing the healthchecks and is not authorized by my rbac policy (because as far as i 'm aware daemon processes running on the node can 't be configured subjects) health checks are failing with a 403 and my container is never able to receive traffic keeps being restarted.
i know this type of policy available via kubernetes network policy but it just seems like kind of a hole in istio for users who run kubelet as a systemd process.
any workarounds/help in case i 've done something incredibly silly would be greatly appreciated.
happy to attempt pr to fix this if someone can point me in right direction however i am by no means go programmer.
when restarting a cluster istio cni doesnt setup correct routing depending on pod start time.
traffic is not proxied through sidecars.
restart of those pods with sidecars fix that.
seems to be like case 1 of phofurl and might be related to these changes phofurl
if a pod is deployed with set to false, the istio-proxy 's readiness probe fails constantly.
this was discovered after updating istio from 1.0.6 to 1.1.7. it might have something to do with the sds, as this also has been enabled during the upgrade.
when istio 1.1.6 is installed from helm charts (istio-demo) with tracing enabled, it appears that istio-tracing deployment specs and service is created with incorrect data.
kiali is expecting jaeger query service to be at phofurl and it tries to read services available from phofurl phofcode at the same time istio-tracing pod is created with `query_base_path: /jaeger` and service port at 16686. kiali just times out trying it at port 80. i could not find any parameters that we could give to kiali to use different port and prefix access jaeger.
logs when query_base_path still set `/jaeger`: phofcode after changing query_base_path empty string updating jaeger-query service listen on port 80, i got tracing working properly in kiali 's console.
no complaints in the logs from kiali anymore the ui looks good.
when attempting to install istio 1.1.7 using the helm chart index, it fails as the version doesn 't exist.
installing `1.1.0` from the `1.1.7` chart index works, on the other hand.
i have installed istio and download latest istio using `curl -l phofurl | sh -` script and move that latest istio to istio-latest folder.
after doing these step when i test using sleep deployment which is provided in istio site it fails.
kb exec -nistio-system -c discovery -- lsof -i | grep ipv4 pilot-dis 1 root 12u ipv4 45865 0t0 tcp localhost:9876 (listen)
i try to setup an aws load balancer (elb) with ssl follow the instruction at phofurl phofhyperlink ssl is enabled on elb.
however, i got the issue "upstream connect error or disconnect/reset before headers.
reset reason: connection termination" when trying to access our web on browser.
here is the logs from istio-ingressgateway: `[warning][config] grpc config stream closed: 14, upstream connect error or disconnect/reset before headers.
reset reason: connection failure` our setup without ssl has been worked before.
envoy proxy takes a long time to get ready.
info envoy proxy is not ready: config not received from pilot (is pilot running?
): cds updates: 2 successful, 0 rejected; lds updates: 0 successful, 0 rejected ` above message comes repeatedly for a while.
even after envoy is ready, we get 503 service unavailable and the below log in the istio proxy of the pod.
"get http/1.1" 503 uaex "unavailable:cluster not available" 0 33 - "wget/1.20.1 (linux-gnu)" "-" - - ` application layer works perfectly since inside the pod, queries works fine.
by not explicitly defining runasuser, all istio components are set to run as uid 0 (root) by default (with the exception of grafana).
errors seen when installing policy, egress and ingress components when using phofurl
when is set to registry_only, there are no logs showing up in istio-proxy that a request for an external resource is being rejected.
after upgrading to `v1.1.x`, when there 's only 1 pod for the `istio-ingressgateway` deployment, getting a response from the istio cluster works as expect like it did in `1.0.x`.
the moment the number of pods for `istio-ingressgateway` goes above 1, a simple health check `curl` will take around or more than 10 seconds at the `istio-ingressgatway` pods before getting routed to appropriate service defined for `virtualservice`, regardless if it 's http or a https request.
this issue starts to occur frequently right after upgrading istio from 1.0.5 to 1.1.4. external service (database in our situation) is not accessible shortly, most of time when a pod is just created.
it 'll go back to normal after app container auto restarts once.
installing istio with cni isn 't possible in the way described in documentation ( here_is_source phofhyperlink ), because istio-cni chart is not in the right place.
we 've got a service entry targeting two ports, using a wildcard name.
first port is 80, second is 6565. we resolve the name statically, as we have multiple ingress-ips being used as an entrypoint and want to force-route it to the one supposed to be used for the cluster.
* when using `host: *.foo.bar` in the service entry, routing to port 80 works, but not 6565.
* when using `host: foo.bar` in combination with a virtual host, port 6565 works, but port 80 does not.
using `istioctl routes`, we saw that in first scenario (see below) virtualhosts entries for 6565 are missing `*.foo.bar` entry and only have `foo.bar`.
in second scenario (see below) we see this for 80. our current solution this: * create two different service entries for same host (one with wildcard, one without) and let a virtual service route corresponding one based on port.
scenario 1: not working 6565 but 80: phofcode scenario 2: not working 80 but works 6565: phofcode what works: phofcode
i 'm trying to add additional http headers to understand the backend that is being load balanced.
the follow rule seems to have no effect.
i'm using mysql chart, along with a php app that has a pod and connect to mysql.
if i disable to istio proxy sidecar on php app then mysql query works as expected.
when the sidecar proxy is enable i can get a query with 80 rows to return, but 90 rows just hangs.
the db shows that the query resolved and the connection is idle phofcode
following the docs from istio.io phofhyperlink , the pods within local cluster can start but the ingressgateway from remote cluster cannot connect to the local pilot.
the logs from isito-ingressgateway pod are shown as below.
anyone has this similar issue in your environment?
grpc config stream closed: 2, gateway has no associated service instances proxy is not ready: config not received from pilot (is pilot running?
): cds updates: 0 successful, 0 rejected; lds updates: 0 successful, 0 rejected proxy is not ready: config not received pilot (is pilot running?
): cds updates: successful, rejected; lds updates: successful, rejected
phofcode ` phofurl does not exist but is referenced in `index.yaml`.
when setting the following traffic policy on a grpc destination, requests are still round robin and evenly weighted.
phofcode the documentation here states the traffic policy only applies to "http" connections.
i 'm not sure if this is meant to exclude grpc connections as well.
bookinfo fails to start under openshift 4. istio-init throws; phofcode i 've modified the configmap for istio-sidecar-injector per other issues to include; phofcode
using the `-x` or `-i` option in `istio-iptables.sh` with a valid ipv6 address range (e.g. )
there is no `ip6tables` command executed with this ip range.
if using the option `-i` or `-x` in istio-iptables.sh with a comma separated list of ip ranges, the script doesn 't use the option at all.
for example the loop in line 229 phofcode runs only once, because is no array variable.
it 's a simple string variable build from a command line argument.
phofcode phofcode but hpa can 't get mem/cpu info: phofcode
since moving to istio1.1.0 prometheus pod in state "waiting: crashloopbackoff" -back-off restarting failed container
i have pulled latest master branch which include fix for #13117 and #13027 but still inbound cluster for bookinfo productpage is still using ipv4 localhost.
kb get pod "} \' kb get pod "} \' "cluster": { "name": "type": "static", "connect_timeout": "10s", "circuit_breakers": { "thresholds": [ {} ] }, "load_assignment": { "cluster_name": "endpoints": [ { "lb_endpoints": [ "endpoint": "address": "socket_address": "address": "port_value": 9080 } } } } ] ] }, "last_updated":
image phofimage image phofimage inadvertently posted the wrong configuration causing two domain names inside the route, curl any domain will return 404
i am unable to add per filter config to virtual service so that i can manage kind: envoyfilter i want to use this feature with istio's api phofurl
when trying to follow this "bookinfo with https access to a google books web service" example, it is unable to retrieve the book info from google via an `https` call.
the network of container cant connect when spring clound start with istio sidecar
when disablepolicychecks is set to false, inbound tcp connections do not generate check requests to istio-policy and external authorization is not applied.
this behavior is a result of a change to in 1.1: in buildinboundtcpfilter: disablecheckcalls: mesh, node) the first argument should be inbound instead of outbound.
the problem seems to be similar as phofurl when the creation of a new `gateway` resource doesn 't propagate to `istio-ingressgateway`, which can be verified by the following command: phofcode
after upgrading istio from 1.1.3 to 1.1.5, the cluster seems not in a good state.
following are observed: 1) https requests failed with codes such as 400 for both curl command and automate testing scrips.
same script runs good with istio 1.1.3 with good metrics e.g.
error message: libressl ssl_connect: ssl_error_syscall 2) http seem good, but qps drops significantly for same cluster same configuration 3) error were observed in the log of ingress sds pod: phofcode
hello, we are facing issue with istio sidecar injection with our grpc app in kubernetes.
we have created ingress gateway, virtual service and destination rule.
gateway is publicly exposed, service has port mapping where request should route and also have destination rule for traffic routing.
so now what happens is as soon as we inject the istio sidecar it stops one of the port 50051 which our app is listening and that breaks things to work.
below is the sample yaml file for reference.
please let us know how to fix this.
but it is not user friendly.
rolling upgrade of the worker nodes results in brief outage of application pods.
there is no documentation which specifies how the ha for istio.
which pods need ha etc.
we kept ingress gateway, egress gateway and sidecar with 2 minimum replica set.
do we need pilot to be ha ?
why does the application pods dis appear when a upgrade of worker node happens ?
galley push crds(to pilot) when there is no change, which causes pilot push config to sidecars.
according to phofurl the telemetry pod for 1.1.4 should only require 0.6 vcpu.
this is less than pilot which requires 1 vcpu.
however, the telemetry will not schedule on the default n1-standard-1.
i tried adding more of these n1-standard-1, 1 vcpu nodes and deleted the telemetry pod, but it comes back pending again with same events.
kubectl describe pod shows events: warning failedscheduling 94s (x4 over 3m59s) default-scheduler 0/5 nodes are available: 1 insufficient memory, 5 insufficient cpu.
warning failedscheduling 57s (x3 over 57s) default-scheduler 0/6 nodes are available: 1 insufficient memory, 6 insufficient cpu.
warning failedscheduling 38s (x18 over 54s) default-scheduler 0/7 nodes are available: memory, 7 cpu.
normal nottriggerscaleup 6s (x22 over 3m56s) cluster-autoscaler pod didn't trigger scale-up (it wouldn't fit if a new node is added): cpu
sidecar proxy does not seem to respect grpc context timeout as a timeout for the whole request, instead it uses it as a timeout for each retry.
in 1.1.4, istio-init with helm template doesn 't create all the necessary crds.
a destinationrule with of type passthrough breaks cds downloads to sidecars pilot log: phofcode a pilot diff shows: phofcode
helm release name istio is used while installing istio.
--command: helm install --name istio --namespace istio-system --values --url: phofurl but during mesh expansion, release name is used as istio-system.
--command: helm upgrade --set istio-system .
after configuring a very simply lua script the istio proxy crashes with a segfault.
i have the following yaml that defines a retry policy.
the retry policy is not being applied when a service returns 503. phofcode there is an end-point that returns 503 status code with no body every other second.
when the pod is injected with proxy, the pilot report warning and pod can not be working well.
phofcode the pilot log: phofcode the deployment phofcode and can not find service 's route though "istioctl pc route"
given this outlier detection config: phofcode let ' suppose i have 2 replicas of an application and both always fail with a 502 error.
i want that all replicas failing more than once are evicted from the pool.
what i was expecting was that the circuit breaker would be open and a 503 response (open circuit breaker) is returned for every request at this service.
however what i see is the failing replicas are always called.
when calling `apps.neworfail` during native tests i'm only and to get the latter half of that promise... phofcode
tests under - - fail because the cluster hosting the test vault server on was deleted.
to fix these tests, a new test vault server needs to be created, and the test cases need to be updated to use the ip address of new test vault server.
in addition, vault related user guides need to be updated use new ip address.
the helm chart for galley fails to deploy the object when galley is deployed to a namespace other than `istio-system`.
this problem was fixed in pr #7477 phofhyperlink in july, 2018 but the commit has never been merged into a release since then.
it is a simple one-line fix.
the update is not in `master` and is currently not in `1.1.4`.
although galley doesn't crash, the feature essentially disabled.
under low load, i am seeing 503 responses during deployment of services that did not have connection problems without istio.
the deployments are just k8s deployment `rollingupdate` deployments with `maxunavailabile` set to 0... so it brings up a new pod, waits for it to be healthy, then tears down an old one.
to mitigate these problems without istio, we had the following: - prestop "sleep 10" hooks on all service deployments to give the endpoints a chance to update - `sigterm` handling in all services let existing connections train - an increased (60 second) graceful termination period support longer-running services all of these fixes are still in place with istio running.
there were a couple blog posts by @sdaschner that seem indicate the `prestop` delay doesn 't work as expected with istio but i 'm not following why it wouldn 't.
phofurl phofurl now that i 'm able reproduce this reasonably well, i captured some logs from the calling service 's proxy.
from what i can tell, target service 's proxy never received a request so data is only on this side.
i 'm still learning debug with envoy logs so let me know if this doesn 't include everything needed.
phofcode as i mentioned before, i 'm still learning envoy but my guess would be that this is one of two things: 1. as blog suggests, prestop delay isn 't mitigating race condition of removing endpoint for removed services before service is told shut down.
2. envoy is shutting down before service itself (i thought was fixed in 1.1).
just note, had similar issue related keepalives previously ( phofurl was caused by an envoy issue where closed connections aren 't removed from pool.
mitigating one by using new option in 1.1.3 set `idletimeout` value lower than server.
that eliminated 503s outside deployment windows completely.
only mention it case could still be related keepalive somehow... though doesn 't look like connection trying be reused here anyway.
in case it 's relevant, health checks on all my are: phofcode things i 've confirmed: - this happens on client side this happens during scale-down or rolling updates (scaling up has no negative effect) increasing prestop timeouts has no effect tried 1.1.4 case was related phofurl (no luck)
i setup multi-cluster as documented with phofurl when i removed the config for the second registry the endpoints did not get removed from pilot or the sidecar proxy.
the full description is on this stackoverflow question: phofurl summing up, given this configuration:
application which is created on gke can 't connect to gce 's redis with istio sidecar by creating serviceentry.but works well without istio sidecar.
at first, application internal log was all sentinels down, cannot determine where is mymaster master is running..." after create serviceentry ,log was chagned as "cannot get jedis connection,nested exception is could not get a resource from the pool" created serviceentry phofcode
with and a `sdsudspath` set as non-empty such as causes gateway configuration to have a non-empty sdsudspath, which in turn causes issues in the deployment as there are a number of conditional checks (in pilot) which use the sdsudspath to check if sds functionality should be used or not.
i have a single service entry yaml with 60 hosts defined.
soon as i do the kubectl create -f the kube-dns start crashing with: dnsmasq[25]: maximum number of concurrent dns queries reached (max: 150)
istio does not properly send a 421 response when a connection is reused and accident sent to a server that is not the correct origin.
this can occur when there are two gateways, one with a wildcard certificate (*.example.com) and one with different non-wildcard certificate (b.example.com) routing to two different apps (a.example.com and b.example.com) where http/2 connection is first established to the wildcard gateway (on host a.example.com with *.example.com) then resource is requested from an application on the non-wildcard gateway (b.example.com with certificate b.example.com).
because of http/2 connection reuse it 's possible for traffic destined for the second app (b.example.com) to end up being routed on existing connection for (a.example.com) due rfc definition of re-use in section 9.1.1 ( phofurl e.g., because certificate can authoritatively handle request, and ip address same as they are on same ingressgateway).
when that happens, according section 9.1.2 istio should respond 421 indicating that wrong was used origin was not found.
this would instruct browser retry on new connection, thus renegotiating tls presenting sni thus going down non-wildcard route different gateway/virtual service correct service.
specifying `address: 10.1.1.1` in a gateway section works for us, that endpoint shows up appropriately when going cross-cluster.
specifying `address: some.fqdn.com` does not.
the gateway endpoints silently vanish.
i tried to set up a gateway and virtual service for an https service.
currently, policies with jwt scopes only support an array.. that is actually not how the scope claim is to be implemented by spec: phofurl the official way is via a single string that is space delimited.
this causing issues with token issuers that only support generating tokens via space delimited, such as auth0.
while setting up a kind e2e tests from a macos machine, if i set goos=linux and run phofcode the build breaks at phofurl because it tries to run a linux binary on a macos.
$ goos=linux make docker hub=kind tag=e2e mkdir -p bin/gobuild.sh real t0m0.719s user t0m1.062s sys t0m0.873s bin/gobuild.sh ./pilot/cmd/pilot-agent real t0m0.352s user t0m0.534s sys t0m0.454s bin/gobuild.sh real t0m0.520s user t0m0.779s sys t0m0.639s bin/gobuild.sh ./mixer/cmd/mixc real t0m0.278s user t0m0.428s sys t0m0.366s ./mixer/cmd/mixs real t0m0.900s user t0m1.325s sys t0m1.122s ./mixer/tools/mixgen real t0m0.264s user t0m0.392s sys t0m0.357s real t0m0.282s user t0m0.428s sys t0m0.365s real t0m0.534s user t0m0.812s sys t0m0.674s ./security/cmd/istio_ca real t0m0.651s user t0m0.968s sys t0m0.803s ./istioctl/cmd/istioctl real t0m0.735s user t0m1.094s sys t0m0.936s collateral --bash && tmv istioctl.bash /bin/bash: cannot execute binary file make:
mesh expansion does not work due to #13291 1. iptable-starts.sh stops on a mesh expansion vm instance.
1. cluster.env file is phofcode
envoy sidecar is not able to communicate with mixer when the following global destination rule is used with mesh policy set to permissive and controlplaneauthpolicy set to none.
phofcode destination rule for istio-telemetry is default phofcode
i thought building a new `envoy` binary from istio/proxy (branch `release-1.1`) and putting it into a new image would give me the same setup as if using the official `proxyv2`, but it didn 't.
there 's significant regression in terms of cpu usage and latency.
adding a slash after the hub url when defining image values breaks compatibility with certain docker registries.
if you create an service of type="externalname" with the intention of routing a certain fqdn to a certain destination (internal or external), the envoy cluster config that gets created in both ingressgateway as well as sidecars contains additional endpoint mappings than what the service definition contains.
for each port in the externalname service, corresponding envoy cluster config has destination endpoints to all ports of service, so each port ends up forwarding to all ports of service (i 'm sure there 's a better way to explain this, but see example below) this results in calls that routed through envoy proxy (either ingress requests on gateway or egress requests from a pod) fail randomly, because requests are sent any 3 destination endpoints in round-robin fashion.
the behavior for this issue is same regardless whether externalname service routes an external or an internal service.
i updated to 1.1.3 by the istio-demo.yaml, but when i applied this yaml to k8s, the pilot, the ingressgateway, and the egressgateway were all restarted constantly because oomkilled, then i found that they are all set to a smaller limit which not set before 1.1.3, so i had to delete limit, and now everything is fine.
so want know why set such a small limit?
don 't think this limit is necessary.
i am trying to use my own set of certificates for mtls.
citadel does not push my external certificates to the envoy proxies.
validation logic in serviceentry.hosts allows shortnames, but pilot is silently ignoring serviceentries defined with a non-fqdn name sample rules: phofcode both rules are accepted by the validation plugin but pilot silently complaining about the non-fqdn names with only a message logged at the `info` level.
phofcode checking the config_dumps of sidecars show non of corresponding configs get pushed for rabbit: phofcode
presence of a destinationrule with mutual mode breaks routing for external clients when sni passthrough for ingress is enabled for a given mtls application
the documentation (in multiple places) says there is a 15s timeout with requests by default.
i can confirm that this is not functioning if it is intended -- in fact, i have requests that go over 60s just fine.
there may not even be a real timeout in place.
applying a virutalservice with a timeout works as expected.
error shown in kiali when accessing a workload logs: failed to fetch pod logs: pods "xxxxx" is forbidden: user cannot get resource "pods/log" in api group "" in the namespace "xxxxx"
i am using aws elasticache with encryption-in-transit enabled.
my service entry looks like: phofcode phofcode phofcode
we are in a process of adopting istio and have recently upgraded to istio 1.1.2 from 1.0.6. once we upgraded, the ingress and envoy proxy logs do not display incoming requests, even though traffic is being routed correctly to the pods.
pilot crashes when attempting to pair a control plane cluster with a remote cluster after correcting a previously bad remote cluster configuration.
this sounded similar to #12376, which was marked as fixed by #12377, but this is still happening on pilot versions built from latest master.
repeat of phofurl the bug was fixed ( phofurl on 1.0 branch and never made it to 1.1 branch.
tl;dr: endpoints are removed from k8s but never removed from envoy.
i am trying to call the service running on `default` namespace which is istio tls enabled from another namespace `test` which is non istio.
i setup istio version 1.1.3 with default config: outboundtrafficpolicy: mode: allow_any i call wget phofurl in a pod injected sidecar but it return wget: server returned error: http/1.1 404 not found
recording of two radio buttons phofimage using a number or boolean to represent the selection of a radio group doesn 't work any attempt to switch between radio options results in neither option selected.
numbers are an especially common pattern for multiple choices, and are the default in typescript `enum`.
1. provide `initialvalues={{ somefield: 1 }}` to formik 2. create some formik-connected radio inputs with `value={1}`, `value={2}`, and `name="somefield"` phofcode
with formik 1, when we use resetform handler and we don't pass nextvalues, it uses initialvalues from props.
you can see this behavior in phofurl but, with formik 2, when we use resetform handler and we don't pass nextvalues, it uses initialvalues from a ref and this ref is only updated when the initialvalues changes and the variable enablereinitialize is true.
you can see this behavior in phofurl
tldr; probably related to #1712 but the behavior is slightly different since i 'm setting touched manually.
shape of formiktouched should differ if values are arrays - `boolean[] | undefined` instead of `boolean | undefined`.
if i ignore the type errors, it works as expected.
basically, i'm using ** formik ** 1.5.8 and i wanna have the latest ** formik ** which provides useful api.
when i upgraded formik in my app to the 2.0.3 i made some small changes and it was working fine until i realized that my datepickers don't work as they supposed to.
in formik, i try to use on my input field instead of using value, onchange, and onblur.
but it 's not working.
this works : `<input id="email" name="email" type="text" />` but this doesn 't : ` <input id="email" type="text" />` any ideas ?
because of a change to the types on this line ( phofurl the fieldprops type no longer works.
it was changed so that the v generic type (which is historically the type of entire form, and applied to `form` prop so that your formikprops would be typed around data structure of form) also applies to `field` prop, and ends up typing `field.value` prop as v, (which we've established above is type of overall form data structure, not specific field's value, which is a element on overall data structure
react formik-yup checkbox is causing so much delay whenever i check it or uncheck.
here is the codesandbox for my issue- [ phofurl
basically, in v1 i can call `resetform(values)` in an onsubmit, to reset the dirty state (and touched, etc.).
this is sort of equivalent to enablereinitialize, which i think does work correctly.
in v2, calling resetform(values) doesn't seem to change the values in proceeding renders.
worth noting that my submit handler is async so there may be renders between the issubmitting and resetform.
if setfieldvalue is called very early inside withformik, formik will throw an error with `ref.current is undefined`
i am trying to use validatefield function however i got an error.
i am just trying to use the basic example provided by formik web site.
i am using formik and yup for validation this is my yup object it is working, but i have noticed that this code doesn 't support some formats phofcode
i'm not sure if this is a bug, or expected behavior, but it caught me out when trying to disable a submit button when my form was invalid.
my form using yup and is not validating onblur and onchange on <field component={owncomponent} />.
on a project that uses typescript and nested fields, the defs are not flexible enough for many functions in formikhelpers.
phofcode in the above example, the `#setfieldvalue()` call is invalid bc the function is defined using `(field: keyof values & string, ..`.
obviously `some.nested` doesn 't exist as a key of values, so it doesn 't compile.
i have a form with two fields and a validation logic that is dependent on both.
but only the current field error gets mapped to the form state and the form state does not match with the validation logic anymore.
isvalid becomes true even if not all required fields are filled in.
i 'm testing 2.0.1-rc.8 and found a bug.
when placing two `<formik />` in same render, validation before `onsubmit` fail because its evaluates another formik 's fields validate props.
i 'm trying to have resetform from a button that is placed in the header of my application since react navigation accepts a component as a header, i 've created a hoc for the header and im using withformik wrapping everyone.
in our product we use validationschema to validate our form but we also allow customers to add their own form fields to it.
since we have no idea what their validation will be it can 't be included in our yup validation, so they need to validate at the field level.
when the form is submitted formik shows the field as invalid but not as touched like it does with validationschema.
we have a field (text) that may be empty.
when it is empty, it is not in the `values` state of formik and therefore also not in the `values` argument to the `handlesubmit` function.
- initialvalues are not set in formik@2.0.1-rc.4 - can reproduce in codesandbox (there is no rc.4) - worked some time ago look like there similar, issues, but with `<formik`.
i can move the issue to tsdx if you want.
formik version used : 1.5.7
`fieldarray.pop` doesn't remove touched on the removed field
unable to use formik + next.js in production build.
development build works just fine but the production one gives me an error.
this is minimal code to reproduce.
i have also prepared full formik + next.js setup here phofurl phofcode
formik validation does not consider changes in the errors structure
in your component life cycle example: phofurl new props passed from component did not mapped to values successfully.
the below is the url i created for error: phofurl
hello, i have the following scenario: i have a search component with a lot of inputs for different filters and decided to use formik for it.
also i have search [type="submit"] and reset buttons [type="button"] and when i click "reset" button need the form to be reset to its ' initial values and submit the request.
tried to do something like this: phofcode something like this: phofcode but neither worked for me.
issubmitting remains in false state
(updated after post phofhyperlink )
it looks like at one point, the formikerrors type allowed errors to be type `any`, which was added in bug #266, to support i18n frameworks.
but over the course of a couple of typescript upgrades, this got dropped, and the type was changed to `string`.
i'd like to change it back `any`, once again make it easier use with i18n frameworks (or just put other react elements in error messages).
first of all, thanks for your hard work in this library!
**edit: after more investigation, i 've noticed it happens when we use the array helper `insert`.
it has a different behavior from `1.3.0` and above.
** hey i 'm submitting this bug because i 've noticed something has changed in the `touched` shape between formik `1.3.0` and `1.3.1`.
when a fields value is an object instead of an array / string, a change to the value will not dirty the form.
this causes the form to require another item to be changed for the form to dirty, and in case where isinitialvalid is false, for form even be valid.
calling arrayhelpers.push(new someobject()) doesn't work.
fastfield uses way to much loop in ** shouldcomponentupdate ** , here is a fix : phofurl
i 'm using two identical form areas (area 1 and area 2) that differ only in the field names.
i use a shared form component that assigns the different field names based on a prefix i pass to the common component.
whenever i select something in area 1, the parallel field in area 2 also gets its value set (the value is actually present in formik value tree) a simplified version looks like this.
manually trigerred nested field validation inside fieldarray is not working
- there is no description in the documentation
- second click on circlemarker open the popup (at the new location).
the number of tiles that started loading is less then the number of loaded tiles
if i switch a layer off, then on, the image for the ping isn't loaded (maybe a quarter of it) or random markers will be rendered (not that ones, which is selected).
if i switch to an other application on my phone, then back to safari, the markers are fully loaded.
some bounds visible in current map view differ from ones reported by map.getbounds().
and sometimes this difference is about half of the geographic second.
[violation] added non-passive event listener to a scroll-blocking 'wheel' event.
consider marking event handler as 'passive' to make the page more responsive.
see phofurl | addone | @ | leaflet-src.js:2679 | on @ leaflet-src.js:2616 addhooks @ leaflet-src.js:13609 enable @ leaflet-src.js:5734 addhandler leaflet-src.js:3739 init leaflet-src.js:385 proto.callinithooks leaflet-src.js:357 initialize leaflet-src.js:3151 newclass leaflet-src.js:301
eventually the tile server experiences issues and stops sending tiles because it has been flooded with requests.
image phofimage image phofimage in this case i just zoomed out one tick.
the markers on the right disappeard for no reason.
note that the same code works perfectly in a common .html file.
- map is pinch-zooming (with the second finger being the point previously tapped and held)
the component unmount successfully but some kind of error is trigged:
take a look at the console in this jsfiddle to see that the passed option `testoption: true` is not present for markers: phofurl
only the markers on last map on the screen are able to open popups.
the circle will be below any new tiles.
only on releasing the mouse button (on moveend) will it be on top of the tiles again.
the hamburger button has no context on the link to expand the layer controls, and throws an error when people are surface-level checking for accessibility issues.
after 25 times zoom in+zoom out: memory consumption with interactive:true interactive phofimage memory consumption with interactive:false noninteractive phofimage
i can only navigate inside the map with the arrow keys, no mousa dragging is possible.
while the wms layer is rendering in chromium it's not rendering in firefox nor does it execute any http calls to the wms service.
the pinch zooming zooms the whole page
tooltip disappear when zoom in or zoom out
`tooltipanchor.x` has no effect for the directions `top`, `bottom` and `center`.
`tooltipanchor.y` has no effect for the `bottom` direction.
base map covered by grey-colored layer <blockquote class="imgur-embed-pub" lang="en" data-id="a/pcjj2gx"><a async <blockquote class="imgur-embed-pub" lang="en" data-id="a/dnprazk"><a async
only identified by a colour.
see phofurl for an example failure.
the logged `event.originalevent` is of type `mouseevent`
tooltips are always 'drawn' and in the dom even when well out of view in the map
leaflet does not render inside this div.
instead, the "cached" tiles around the currently viewed one are also displayed, around the "map" div.
if you zoom in or out, the cached tiles are still displayed, even though they are no longer inside of div map is rendered into.
the first click on the back button goes back to the previous webpage (or blank page).
this endlessly repeats and consumes memory: phofcode
the panto is not centering the map when dimensions have changed.
the click handler isnt triggered when using safari (or chrome) on ios.
the mouseover event for d3.js does not work in leaflet
svg element class attribute is only leaflet-zoom-animated"`
as of leaflet 1.5, the transition between each polygon is very laggy and user experience is degraded.
profiling the performance in chrome, i noticed the culprit is the `formatnum` function.
the mouseover and mouseout events used to take about 25ms, now they take about 120ms, and it's clearly noticeable.
looking at diff between leaflet 1.4 and 1.5, i noticed `formatnum` function indeed has been changed.
the related pr is phofurl a small benchmark phofurl shows performance difference.
i suppose number of times `formatnum` called proportional to number of polygons in my geojson layer, because performance impact becomes noticeable when more than about 100 polygons are drawn on map.
this results in a javascript error: "cannot read property 'min ' of undefined"
currently i have some issues in my project, using leaflet.draw + geodesiccircle (current implementation of it doesn't have `_radius`).
the map freezes when loaded within an iframe on a samsung galaxy, with pointer-events set to auto.
this occurs when using alongside leaflet and the way is being used ithe opacity of a null icon tries to be set which results in this exception: `uncaught typeerror: cannot read property 'style' of null at setopacity (leaflet-src.js:2368) at newclass._updateopacity (leaflet-src.js:7694) at newclass.setopacity (leaflet-src.js:7684) at newclass.clustershow newclass._recursively newclass._moveend newclass._zoomend
only some tiles are displayed (usually just the top part of any map)
tile are loaded at the maxnativezoom level even if we zoom deeper than maxzoom.
for example, if maxnativezoom is set to 8 and maxzoom is set to 8. if we zoom to level 9 the tiles for the layer will be loaded and hidden (rather than simply not loaded).
you will see the maxnativezoom level images flash before they are hidden.
touch events are not properly propagated on other elements once you zoom on the map
callback method is not invoked
tiles are selected, and they appear in a blue color, like this: image phofimage
basically it works, however there is an undesired side effect: the control.layers does not always keep the current zoom level when switching between base layers but jumps.
the popup get's only closed when the layer the popup is bound to is not focusable
- the base layer seems to interfere with each other.
popup appeared and dismissed, you can only see when stop thread, for example alert or error
previous zoom level is pruned (dark gray flash): irregular-grid phofimage
the map click event is not firing for 2sec and then works properly.
the marker click event is not firing for 2sec and then works properly.
for the diagonal lines it works well.
horizontal and vertical lines lose their mouseover status as soon as the mouse goes out of the original (thinner) line.
quickedit: i just found out that the problem arises as well when going over ends of lines.
this happens on all lines.
controls like zoom control disappear when scrolling down/reappear when scrolling up again
leaflet isn't rendering map data in a way that is even somewhat accessible.
* the browser eventually terminates the tab for running out of memory.
leaflet accepts such feature as a valid geojson object.
no alert is displayed, and the pointer shape does not change as it usually does with mouse over.
radio buttons on the other map are deselected.
the property map.tap is undefined.
a plugin like leafletsleep is not initialized properly on a mobile device using chrome.
show outline in every tiles.
currently leaflet exceeds the maximum call stack, turning the map gray and unusable
tilelayer redraw partly: image phofimage
there are 6 errors related to the extra div placed in a label as a fix for issue #2771
the actual api method is not valid, and it still watching of location changes
`cargo-audig` should break the build also when it generate warnings, so developers can be alerted if something not-vulnerable-but-fishy is happening.
the libra book phofurl phofhyperlink stated that to start a local test net, just need to phofcode but actually, the above code snippet is misleading and not working
consider a functional test containing a transaction that aborts with code 1. in the ci, this will be logged as follows: `status: keep(vmstatus { major_status: aborted, sub_status: some(1), message: none }) })` whereas in local runs, there is a comma after the exit code, i.e.
if the test checks for abort codes with commas, e.g.
`// check: 1,` then it passes locally but fails in the ci.
the bot assigns reviewers on draft prs, which aren't ready for review.
runtime issue returning a balance (from get_balance of libra client) equal to 0 including for addresses with fund (source of truth used is phofurl after address minted using the post rest endpoint
terraform config failed to build at master.
possible after `generate_keypair` to `generate-keypair` migration?
build all of libra code on a new ubuntu 18.04 vm.
the stack usage verifier does not correctly account for the number of pops an instruction does.
currently, only the instruction's net change of the stack height is recorded.
for an instruction like `readref`, the net change is 0 (-1 (pop) + 1 (push)).
this does not capture invariant that stack height should never go below zero and thus following function body will pass usage verifier `[readref; ldconst(0); ret]`.
however, this will cause a panic in bytecode verifier since `readref` required stack to contain at least one item (which it doesn't at since `readref` is at start of block).
the safety protocol must ensure the following invariant is maintained in every validator: `if` the validator has a contiguous 2-chain of qcs `qc_grandparent <-- qc_parent <-- qc` in its block store such that: - `qc_grandparent.round + 1 == qc_parent.round && qc_parent.round + 1 == qc.round` and - `qc_grandparent.round` is the highest such `round` `then` for any `qc_new` with `qc_new.round > qc.round`,` qc_new` must be able to reach `qc_grandparent` by following its parent pointers recursively.
adding this check as a runtime assertion in `mirai` causes the test case in `chained_bft_smr_test` to fail.
while shutdown testnet and start testnet, the account information is missing but when you input 'account create', the balance is retrieved libra% account list no user accounts libra% account create >> creating/retrieving next account from wallet created/retrieved #0 address libra% create >> creating/retrieving next from wallet created/retrieved #1 address libra% query balance 1 balance is: list user index: 0, address: sequence number: 0, status: persisted user index: 1, address: sequence number: 0, status: persisted query balance 0 balance is:
error ` * * * [fuzz_runner] error while determining fuzz target: environment variable not found`
warnings appear to be swallowed when compiling in the root of a workspace.
this is the intended behavior for non-path dependencies, but we'd like to see warnings for the local crates.
this also appears to prevent treating warnings as errors.
see #618 where this was attempted unsuccessfully.
the nightly cargo audit task found another instance of memoffset 0.2.1 in our dependency tree.
another path to this crate was solved with #279. this one comes via the redox os target from slog-term.
see the context section below for more details.
note that this does not pose a threat as we do not build for the redox os target.
this dependency chain does not exist for windows, mac, or linux targets.
libra cli crashes when returned without any command
in the network module, there is a single combined queue for all outbound direct messages.
so a single slow peer could block the whole queue and prevent sending direct messages to all the other peers.
in tokio thread doesn't exit the process to report a security issue, please email security@libra.org.
when the user transfer coins between two accounts, an error is thrown: [error] failed to perform transaction: transaction failed with vm status:
in the my first transaction phofhyperlink tutorial the transfer command resulted in an error but the transfer sometimes completes successfully anyway.
to report a security issue, please email security@libra.org.
the hkdf::<sha3_256> generate hex is not correct, i try it by nodejs phofhyperlink , go phofhyperlink , and `python`, all the check child_0 key derivation result is but the rust is the code is below.
i ran the command <code> cargo run -p libra_swarm -- -s </code> and got the error about thread 'main ' panicked at 'max out 5 attempts to launch swarm ',
error: failed to run custom build command for `grpcio-sys v0.4.4` error: failed to run custom build command for `network v0.1.0 (/home/libra/network)` error: failed to run custom build command for `snappy-sys v0.1.0 ( phofurl error: failed to compile `libra_node v0.1.0 intermediate artifacts can be found at `/home/libra/target`
i mint a new account with x libra, query balance on the account displays 2x libra.
building (using stalls on gcp compute engine smallest instances, running on an ubuntu 18.04 image, while the cpu doesn't go over 2% usage.
it updates repositories, downloads the crates, starts building the 461 packages.
to get up to 260 packages built, i got stuck about 5 times (by stuck i mean nothing seem to happen for more than 10 minutes and cpu usage at 0%).
sometimes just using `ctrl + c` will allow me to run the script again and start building from same package.
most times i had to reboot machine, which usually started re-building packages that were already built.
it got stuck every time on a different package, without an apparent pattern (it could get stuck after building 1 package like it could get after building 100 packages).
when i tried to mint coins for different accounts i see this error.
to report a security issue, please email security@libra.org.
unable to run language tests.
on aws linux, need to install protobuf-c and protobuf-compiler packages with protobuf,
in chapter procedures and transaction scripts.
of white paper phofhyperlink , procedure declaration is used to describe the procedure body.
and at chapter 5.2 of this paper, it uses procedure definitions to name it, i think it makes us confused.
according to my experience, the declaration is different from the definition, the declaration makes a new symbol record, but without assignment or function body attached to it.
and assignment or function body attaching is occurred in definition phase.
to report a security issue, please email security@libra.org.
funds have been seized by a third party due to violation of terms of service.
i just posted something the validators don't agree with on social media.
** stack trace/error message ** phofcode
running the following command in the directory with the script flag enabled produces an error: <img width="776" alt="screenshot at 23 35 18" src=" phofurl why is this happening?
i have also tried using --script instead of -s. also, how can one run the main function of a .mvir file?
i created a mnemonic key file: `silver silver silver silver silver silver;500` and then using the libra cli ran `a r 0` after a few seconds i started to get a lot of 429 error messages: `e0619 failed to get account state from validator, error: rpcfailure(rpcstatus { status: cancelled, details: some("received http2 header with status: 429") })` presumably, this is due to too many queries to the validator.
why is regenerating the key/address pairs making repeated queries the validator?
if queries validator are necessary, then account recover command should space requests out so that errors are not raised.
cannot compile as per the example on this page phofhyperlink phofcode to report a security issue, please email security@libra.org.
you can't trust this consortium or facebook, how to fix?
on ubuntu 18.04, ran `./scripts/dev_setup.sh` successfully.
when running `./scripts/dev_setup.sh` on ubuntu 18.04 (vagrant vm `ubuntu/bionic64`, which i think is representative for other ubuntu 18.04 installs), the script fails with: phofcode i would expect this to complete successfully on the latest ubuntu lts release.
if a link reference appears in a nested list, it is not parsed correctly and its corresponding link won't render.
according to github flavored markdown phofhyperlink specification strikethrough text is any text wrapped in two tildes ( ~ ).
however marked library applies strikethrough to text when it's wrapped with single tildes ( ~ ) which causes unexpected behavior.
gfm spec got updated phofhyperlink for restricting strikethrough to two-tilde wrapping.
the package converts the tabs in the markdown to 4 spaces every time.
it breaks the alignment of the text.
it 's not how tabs work.
the tab indentation of current tab in a string will be `tabsize - ((number of characters occupied in current tab buffer) % tabsize)` <img width="475" alt="image" src=" phofurl
it said to report this while running my code so i'm reporting phofcode
the breaks option doesn't seem to work.
maybe i have the wrong expectation?
url automatic linking with single and double quotation is invalid.
when i try to use template literals in javascript marked will compile my text into a single <code > block.
`&` in the query section of a uri gets escaped and re-written to `&amp;` thus breaking the link.
to be very honest, i am not quite sure this is a bug since `commonmark.js dingus` produces the same result.
but, for e.g., github doesn't escape `&`.
more of a question around why and how to handle the change in semantics introduced by escaping of `&`.
our team is testing the markdown via api content, however when it is being retrieved via api.
it is not being rendered properly by markedjs.
after updating from `0.6.1` to `0.6.2`, i noticed that my linebreaks got lost.
i noticed that sometimes the nested lists are rendered as code.
the baseurl isn 't added to the <img /> tag.
nested references do not work and are inconsistent with the performance of commonmark
~~infinite loop~~ extremely slow processing on malformed markdown edit: i tested it under chrome and it finished significantly faster than firefox, but still quite slow (7 seconds).
i believe it is a combination of malformed input and an exponential-runtime regexp combining to hang the parser.
i tried to strip the markdown to the exact syntax that breaks the parser, but it 's difficult to narrow down.
the reason i suspect it 's a run-away regexp is that removing obvious non-syntax like strings of plain alphabetic words allows it finish, but only after 30+ seconds of processing.
(for anyone curious, markdown is from some old notes had on arexx programming language)
when you are escaping the character * inside of an italic text (using *), makes it work bad.
i found a workaround for this issue by turning on the pedantic option.
marked doesn 't output `<em>` tags correctly when asterisks are outside double quoted strings.
i have some markdown that contains a table immediately followed by a heading on a new line.
the subsequent heading is being rendered as part of the table.
for usage in github pages i 'd like to use the baseurl option to add a prefix of the project name for relative links.
for instance with a github pages site like phofcode with phofcode being the project name.
i 'd like relative links to change from phofcode to phofcode .
marked options markdown output html what is actually happening is: maybe it is as simple as not inverting rtrim here: phofurl
when putting different two unordered lists (`-` and `*`) with blank lines, a `<p>` tag is inserted into `<li>` tag.
the last `)` is stripped out from the `href` when rendering html.
it works fine on commonmark.
whereever a text begin with double quotes marked ignore the starting * to make this text italic.
in block mathjax, `_` will be converted to `em`
the `--test` cli option is not displayed in the man page.
i have a named link, that i want wrapped in asterisks, essentially making it italic.
too many a tag, the cpu will be 100% when there is no split.
gfm spec describes the following as a
if an inline html tag contains a newline, anything after the newline will be parsed as markdown.
marked parses mixed bold and italic incorrectly
i am testing docute ( phofurl and (following a failed rendering), the console mentioned phofcode i am reporting it here and not with docute, per the request in the error stack in the console.
when cleverly adding backslashes to the input string, the html detection can be bypassed and thus the html is not sanitized, even when sanitize is set to true.
when there is whitespace in the info string of a fenced code block, like so: phofcode html foo phofcode html <p> phofcode
when i write an unordered list and right after an ordered list, both lists get merged.
when gfm is `true`, the following text: ~~hello@email.com~~ renders as: <a in html it thus shows up as _something like_ (but not exactly, the mailto should render as above - see the markdown demo for exact behavior, github 's parser is harder to coerce to the invalid rendering): <a
in marked demo page, with default github flavoured markdown.
bold formatting in single line not properly parsed.
when using lists with linebreak separation, marked adds unnecessary &lt;p&gt; tags to list items.
when marked is rendering a list in gfm mode with line breaks enabled, it adds unneeded characters after each list element.
in github all (even source) newline characters are removed in a list
marked doesn 't work with firefox extension when loaded as content script, but other umd-compliant lib like highlight.js phofhyperlink does.
phofcode marked & markdown-js: image phofimage github & markdown-it & showdown : image phofimage html: phofcode
the editor does not render html blocks correctly.
the following screenshot illustrate the difference (the code is below).
image phofimage - [x ] can you reproduce the issue?
if marktext is installed with deb package it fails to start with `trace/breakpoint trap` error.
when headings (lines starting with # or ## ...) contain an emoji, the export to pdf/html function would fail.
- [x] can you reproduce the issue?
using the shorthand emoji names (":angry&nbsp;:") within a header forces the application to refuse exporting silently; however, copying and pasting unicode-8 emojis from an online repository () into the heading, allows exporting, as expected.
- [x] can you reproduce the issue?
i noticed that when a file ends with an empty blockquote, marktext will not be able to render it and won't allow to be edited anymore.
if there is multiple tabs opened, marktext will show the last rendered file instead of the one it can't render.
keep up the good work!
- [x] can you reproduce the issue?
when setting macos appearance (dark mode) to auto, all apps will switch to dark mode except for marktext which will stay in light mode.
- [x] can you reproduce the issue?
inside fenced codeblocks for the python or julia language, syntax highlighting does not work on triple quoted strings.
the badge insert to title can't normally render
clicking the "preferences" button (cog icon) in the bottom left corner of the editor does not work anymore.
in previous version 0.15 the issue does not exist and it behaves as expected.
- [x] can you reproduce issue?
bomutf8 cannot open md file that was saved as utf8 with bom
i just switched to marktext from typora, and i found that i can't open a bold or italic hyperlink text with cmd+click, maybe someone can tell me why?
mark text treats ordered task lists as mere ordered lists.
- [x] can you reproduce the issue?
list item are copied with too much space between list item marker (e.g.
`-`) and first text character if you select multiple list items or copy the whole list.
loose task list sub-items are copied wrong.
the heading maker (`#`) is added when pasting a html heading from web page into an existing paragraph (`foo <cursor> bar`).
mark text renders checked task list items as struck through.
this differs from how github renders them and makes it impossible to distinguish entries that are actually struck through from those that are not.
- [x] can you reproduce the issue?
** note: ** this is a release blocking issue for v0.16.x.
mark text becomes laggy when setting the cursor to another paragraph in larger documents.
lack of undo functionality for source code mode.
- [x] can you reproduce the issue?
when running `yarn dev` i get following error: phofcode it seems to work with node 10.16.3.
- [x] can you reproduce the issue?
when adding a block by typing `@` i get shown the shortcuts for a mac keyboard even tough i'm using the appimage for linux.
image phofimage - [x] can you reproduce the issue?
the current opened item is shown as `undefined` in the `window` menu.
- [x] can you reproduce the issue?
in my notes base folder and subfolders, there are some hidden files (from other note taking tools).
if i search my notes an error text is displayed above the search results which clutters the (small) sidepane.
the error text (replaced file and path names) : phofcode - [x] can you reproduce the issue?
select an image that the image is marked with blue dot's.
open a dialog like about dialog and press `space` or `enter`.
all textboxes have a dark font color when a dark theme is selected and you cannot just overwrite it by css.
an ordered list is shown as task list when a task list is above the ordered.
uncaught exception when creating code block.
the editor may crash when transforming a code block that contain markdown content back as paragraph and press `enter` at the ending of a line because the text is not shown as rich-text.
when you add an image to your mark down file and the path to the image contains spaces, the image will be missing in the export.
however, editor will show image correctly and not provide any errors in editor or exported pdf/html file.
- [x ] can you reproduce issue?
whenever a formula is present in a block that's not a paragraph, e.g.
a list or headline, exporting fails without showing an error.
- [x] can you reproduce the issue?
if you set the editor width using a percentage and go to source code mode everything overflows to the right hand side.
- [x] can you reproduce the issue?
you can still edit text when a dialog is shown and muya's overlays/toolbars are not hidden (when text was selected before).
- [x] can you reproduce the issue?
when exporting to pdf format with just enough text to fill the page to the last line, a new empty page is added in the pdf: demo pic phofimage it's quite annoying because the only way to not get this empty page is not use last line of previous page, which often leads deleting parts of text.
if i inspect pdf file there is no additional character nor line return justifying new page.
all checkboxes in settings have 100% width and clicking by mistake on the right side changes the checkbox.
an exception occurs when writing html tags and pressing enter to autocomplete the tag.
- image transformer is not shown when fisrt click image after inserted.
- image can not be previewed when press `space` key after selected.
the preview editor cursor when using the scrollbar thumb is the text selection cursor and not the default cursor.
i edit the file in any folder, unnecessary file watch notification shown after i save the edited file.
we should show single html `pre` tags as code block like github does.
- [x] can you reproduce the issue?
after opening a few files the opened files and tree view position is wrong and overflows.
- [x] can you reproduce the issue?
as explained in keybindings.md phofhyperlink i have created a `keybindings.json` file and placed it inside of my `marktext-user-data` which is on a usb.
i use portable mark text at work from this usb.
- [x] can you reproduce the issue?
when i have a passage like this phofcode and i tried to delete content from the very beginning by pressing the delete key when the cursor is at the front.
however, instead of deleting content word by word as intended, it deleted first <> and skip first parapragh and started to delete second paragraph.
create a paragraph, and change it into a task list by the front memu, it became a task list, but it still show bullet list in the `paragraph menu`.
some emojis from earlier unicode standards display as black-and-white fallback characters instead of their emoji glyphs.
the following emoji are the specific ones i am having trouble with (but are not the only ones affected): , , .
they render properly in both notepad and chrome.
- [x] can you reproduce the issue?
the multiline comments inside code fences of `cpp` or `c` languages are not parsed correctly.
specifically the first line of such comments is correctly greyed out but subsequent lines are colorized like normal code.
- [x] can you reproduce the issue?
please see the crash log.
it is intended that menu bar of any applications allows keyboard-only navigation.
so if user want to open *** f * ile** then `<alt+f>` will open this menu (and so on for other similar topmenu items).
hi team, found a bug related to cursor moving right using `ctrl+right key`.
the `ctrl+left key` works fine.
when the user closes a modified file, after getting a prompt about saving the file, the table of contents in the side bar is not erased.
when closing a file that was not modified (not popup dialog box), table of contents in side bar is properly reinitialized.
- [x] can you reproduce issue?
the github image uploader cannot be set as default uploader.
- [x] can you reproduce the issue?
when i use the table creator to create a table with ** 1 ** column, i get 2 columns.
- [x] can you reproduce the issue?
an exception occurs when deleting the code block identifier and pressing multiple backspace after.
- [x] can you reproduce the issue?
sometimes (several times today), the application is in such a state that changes in source code mode are lost when switching back to normal mode.
version: v0.14.0 - both portable & setup unable to open existing *.md files.
results in a new blank mark text window - [x] can you reproduce the issue?
the multi-line selection is not working unless one of the chars is selected fire before pressing shift+up arrow or shift + down
after launching the marktext app, when a file is opened, it should open in the same windows rather than opening in a new window.
this always leaves an empty window and it has to be manually closed.
text "gibberish" effect when export to pdf the text itself is actually correct without all the extra notations first page of pdf doc is fine; all other pages are affected
the `|` character must be escaped in the table in preview mode, otherwise data loss occurs like in the example below.
- [x] can you reproduce the issue?
buttons on the small picture are hidden, like `edit` and `delete`.
image phofimage how about put buttons on the right side of the line?
loose data or save not efficient when writing with image at the end
i'm not sure whether this is intentional or a bug but this behavior feels very unnatural.
if you're editing a document and reach the last line, pressing the down arrow will add a new line to the document and keeping the down arrow pressed will keep adding new lines.
usually expected behavior is that if down arrow is pressed scrolling will stop on last line of document and new lines can only be added using enter key.
another aspect is that when scroll occurs, only scroll bar expands and cursor goes out of screen.
only typing something brings cursor back into view.
- [x] can you reproduce issue?
a few table separators begin to move around when scrolling the editor.
writing a sequence of bold code blocks i.e ** `text` ** only affects the last one.
when writing in inline code using ` `, writing an underscore (i.e.
_) will double the underscore, as if i wanted to emphasize something: _emphasis_ (i.e.
in code blocks ` ` `, it works as expected.
when using the cut command (ctrl+x), the rendering of the diagram or math formula is not updated.
incorrect parsing and/or rendering of format modifier (i successfully tested with italic, bold, strikethrough, hyperlink, and image) when the modified text contains an inline code block with corresponding delimiter.
this is not compliant with commonmarkdown specification (i checked with the reference commonmark.js implementation phofhyperlink cf screenshots), and is counter-intuitive.
- [x] can you reproduce the issue?
cannot edit the same file on vscode and marktext at the same time.
when i modified my markdown file on vscode, it would become empty on marktext, so i have to reopen marktext to see the changes.
the format picker is not hidden when switching tabs.
the new settings window leads to another issue.
when changing certain options like aidou or theme all registered menus are updated in background.
the problem is that we added another menu type for the settings window but not changed `appmenu` menthods, so that an exception is thrown because the menu don't contain certain entries.
latex does not wrap lines in the editor or in the pdf export when using math blocks.
the text does wrap in html export and when using inline math.
editor: marktext issue phofimage pdf export: mtpdf phofimage
copy and pasting vscode's readme into mark text leads to an exception: phofcode
when exporting a markdown file containing badges, the badges don't show after export to a .html file.
- [x] can you reproduce the issue?
i know this issue was kind of referenced in a closed issue (8 months ago) #450, but it 's still not fixed (feel free to close this issue if this has been fixed in an unreleased version).
if you click any inline math, the popped out preview will mess up text below.
- [x] can you reproduce the issue?
when working with text i usally use ctrl-shift + arrow-left/arrow-right to select by whole word.
found instance where i get unexpected behavior using this technique.
- [x] can you reproduce the issue?
an exception occurs when using invalid katex formula.
loose list with different bullet or ordered list delimiter are exported as tight list and/or as mixed list.
math blocks (`$$ ... $$`) should be editable without the html hover edit protection.
after i created a `table`, i still can use `cmd + 3` to update the cell to a header even if the paragraph is disabled.
when using the absolute path way (by using the menu) to insert an image, the absolute path of an image in realtime preview displays incomplete (**missing the last letter** of expanded-name) for example, absolute path of image is: phofcode in realtime preview (missing "g"): 1 phofimage same as png or gif file - [x] can you reproduce issue?
when words over than the sidebar width, the layout will get messy
the window close button are not aligned to right side in windows 10 os.
when copy paste a text from a code fence, the pasted text loses the indentation
there is a very long scroll bar after i input a mermaid diagram.
phofcode mermaid sequencediagram participant alice participant bob alice->>john: hello john, how are you?
loop healthcheck john->>john: fight against hypochondria end note right of john: rational thoughts <br/>prevail... john-->>alice: great!
phofcode - [x] can you reproduce the issue?
create a code block by input ` ` `.
input a language identification, like bellow.
phofcode javascript const a = 'hello' select part of language and codes, press backspace, error happened, and cod block no longer be input.
- [x] can you reproduce the issue?
indent and unindent list item by press `tab` is not work.
wrong cursor position when delete `inline math` or `raw ruby element` use <kbd>backspace</kbd> - [x] can you reproduce the issue?
there is no possibility to write a single opening bracket in code mode.
usually in code editors you get autocompletion when you type a opening bracket but with 'delete'-key before the closing bracket you are able to delete just the closing bracket.
mark text adds 2 spaces to indent sub-bullets inside a list, however the commonmark spec phofhyperlink says it should be 4. i've also noticed that on bitbucket, sub-items with only 2 spaces of indentation are not indented but are shown on the same level.
- [x] can you reproduce the issue?
all changes should be discarded if the cursor is invalid and therefore no exception is thrown.
- [x] can you reproduce the issue?
`const { href, title } = this.labels.get(key)` in referencelink.js phofhyperlink may be `null`.
you can open the same file twice which leads to issues.
the cursor disappeared when press arrow up and down between headers.
- [x] can you reproduce the issue?
an exception occurs when searching for hidden text and then click inside the editor.
muya's inline parser parses links with brackets wrong.
if markdown inline syntax in multiple lines, mark text can not recognize it.
there is no need to show list style marker in task list.
side bar text boxes have different colors in sub-directories when adding a file or directory.
- [x] can you reproduce the issue?
list item font color is wrong in a blockquote.
relative path images do not appear in pdf exports.
it seems the path is broken.
- [x] can you reproduce the issue?
relative path images do not appear.
it seems the path is broken.
- [x] can you reproduce the issue?
when you switch tabs the editor doesn't scroll to the cursor position if the cursor is out of view.
html with relative image doesn 't render.
i tried this to get it to render.
phofcode markdown way works fine ` start phofimage ` using absolute images works too phofcode (don 't think it is related to #754) - [x] can you reproduce the issue?
exporting to pdf with "dark" theme produces an unreadable document.
- [x] can you reproduce the issue?
if i am in source code mode and i switch tabs, the content of the tab still shows the source of the previous tab.
- [x] can you reproduce issue?
performing an undo and then viewing the source will show that you still have the undone text present in the file.
- [x] can you reproduce the issue?
i can't create a comma-separated list of dollar ($) amounts.
it seems dollar signs are being paired and creating math items of some kind.
additionally, i can't even escape the dollar signs with a backslash ( ).
- [x] can you reproduce the issue?
when typing in either `*` or `_` for strong format the autocomplete exhibits some unexpected behavior.
- [x] can you reproduce the issue?
if you export or print a document with long code block lines, the lines are not wrapped and the scrollbar is printed too.
- [x] can you reproduce the issue?
a list (item) is not recognized as a list when a paragraph ends with a hard line break in preview mode.
i don't know if this is allowed in commonmark and/or gfm because markedjs parses the following code as normal paragraph and list: phofcode is parsed as phofcode - [x] can you reproduce the issue?
an exception occurs when combining two lists with text in between and you make the text to a list.
- [x] can you reproduce the issue?
when pasting a list from a different type (loose/tight) into another list, the list types are mixed.
- [x] can you reproduce the issue?
list items are always copied as loose list.
- [x] can you reproduce the issue?
when typing in code blocks mark text becomes laggy.
- [x] can you reproduce the issue?
an image is not correctly reloaded when the image is modified on disk.
- [x] can you reproduce the issue?
when using code identifiers (info strings when opening code fences) such as `typescript jsx`, we get some weird behavour where the inital opening fence is ignored - which obviously causes the next regular text to be seen as code now, like so: image phofimage those extra identifiers are important because of things like jsx, which are differentiated from regular typescript or javascript by adding that extra term in the info string.
if for the sake of development simplicity on your side, mark text just treats those blocks as regular typescript (as if we only marked it `typescript` without `jsx` extra) i'm fine with that too - i just would like to have editor display code blocks correctly at least and not skip over that opening fence altogether.
- [x] can you reproduce issue?
when opening a file or directory, the font and title bar change to the wrong theme/font.
but, once you click inside the text editing area, it fixes itself and switches to the correct font and theme.
- [x] can you reproduce issue?
when pressing ctrl+q noving happens.
- [x] can you reproduce the issue?
relative images are broken after exporting or printing.
- x] can you reproduce the issue?
this issue is related to #659 but is not the same issue because #659 affects the editor and this issue the print service ([exporthtml.js phofhyperlink ).
a forced line break (two spaces at the end of the line) in a list item is displayed wrong.
- [x] can you reproduce the issue?
a renderer exception occurs when pasting text with new line(s) into a heading.
- [x] can you reproduce the issue?
pasting text into a table cell always append text and the cursor position is ignored.
- [x] can you reproduce the issue?
when dark theme is being used, `export > pdf ` results in a pdf with dark background and dark grey text that is unreadable.
when light theme is being used, the resulting pdf also has a slightly grey background on the text as well, but is harder to see and the text readable.
marktext hangs when navigating certain markdown document with pgup and pgdown keys - [x] can you reproduce the issue?
selecting text in the side bar leads to a renderer exception.
- [x] can you reproduce the issue?
i can change tab in "source code mode", but the markdown content is not refreshed.
i always see the same code even if i change between different tabs.
- [x] can you reproduce the issue?
build failure with the latest `vue` and `vue-template-compiler` because of invalid `v-for index as key on <transtion-group> children`.
phofcode **resulting problems:** - build failure with `yarn` - ci will always fail because of `yarn` ** workaround: ** use old packages with `npm` package lock.
- [x] can you reproduce the issue?
documents with code blocks cannot be exported as html or pdf.
- [x] can you reproduce the issue?
exporting a document with black theme activated produce a black document.
see my export example : ererere.pdf phofhyperlink
crash when you press `enter` after choosing a valid code block language identifier.
- [x] can you reproduce the issue?
many exceptions when removing a code block in a specific case.
the code block must be at the beginning of the document, other text may follow but the cursor have to be in the next line at index `0`.
- [x] can you reproduce issue?
pressing `tab` in a table cell moves to the next cell, but then selects the cell showing the context menu, making it impossible to keep tabbing between cells.
- [x] can you reproduce the issue?
pressing return in a fenced code block does not work on its own line, i.e.
you cannot insert multiple empty lines when typing.
- [x] can you reproduce the issue?
you can paste text into the language field of a code block.
`java`) however, you can also paste text with line breaks ` ` into the language field of a code block.
when the user presses `del` and the cursor is in front of a code block, the contents of the code block will get moved out of code block - [x] can you reproduce issue?
the application menu will not be updated when switching between multiple windows.
- [x] can you reproduce the issue?
typing a line that wraps result in word cut in the middle and continue on next line.
the issue is with selection change when using shift-left or shift-right arrows.
by default, using shift-left or shift-right arrows changes the right end of the selection.
if there is no selection, and the ** shift-right ** arrow key is pressed, the character at right is selected and selection length updated relative to shift-left or shift-right arrow key pressed.
this works as expected and as on ubuntu text fields.
[description of bug or feature]
creates unwanted newlines on the end of the yaml frontmatter.
if you change your keyboard layout into a rtl language (arabic, hebrew), cursor still remains on the left.
marktext crashes when opening a markdown file
first of great job with the marktext app it 's great and i love.
the real-time feature is what makes this app truly useful imo.
i really appreciate the work.
i am using ubuntu 18.04.1 lts.
when i want to open a markdown *.md file from the file browser (nautilus) with a double-click, the app opens up and then "freezes".
opening system monitor shows 4 marktext processes, out of which one has a "high" cpu usage (30-40% with a intel core i5-7260u cpu @ 2.20ghz 4 ).
this process is also very memory intense gathering up to 2+ gb of ram!
the file was trying to open only had few lines of text.
before my entire system froze, killed processes after approx.
also have theme set to dark mode.
after double-clicking .md file it opens up in light theme.
don 't know what 's going on but it feels like some kind "infinite loop".
can however open all files, if open marktext app first and then drag files from browser onto window.
it then opens up new window with contents "dropped file".
also choosing "open file" via menu works.
it 's just bit tiresome always having files like that when you want edit just few lines.
i 'd really like help and solve issue.
however have no idea where start what files have look at.
what function gets called when double clicking on it, etc.. so appreciate work once again many thanks again for all work time you have put into it.
after pressing esc, the format of math block is broken
when you have a code block and switch to source code mode and back again, the colors will change.
can not change font for codes
when i exit out of marktext, and marktext asks me if i want to save a file, the last option says "delete", which to me, means that the app would delete the file rather than not save the changes made since file was last saved.
change dialogue box to match similar apps like visual studio code.
i am not able to get marktext to run on archlinux any more.
after a full system update my existing installation would not start any more so i tried reinstalling it using the aur package provided here phofhyperlink .
the build ran perfectly fine aside of some npm warnings about vulnerabilities.
when i tried to run the appimage it immediatly crashed.
this also happens with this phofhyperlink aur package, the latest github release and the latest source code directly cloned from github.
the coredumpctl / gdb output can be found here phofhyperlink .
creating a bulleted list in the following format shows a carriage return-like symbol in non-source views * test item something else * test item 2 something again * test item 3 something yet more (there are two spaces after each test item) these show in all but source view, and when exporting pdf, these symbols are included.
i am trying to do the following things but could not figure out the way to do so 1. every time when the app is opened, open the last opened projects with same size and locations on screen 2. a menu item and shortcut to close all tabs (or all tabs except current edited one) 3. open url links in default browser are these features available?
if not can them be some feature requests?
also ran into some problems which may or may not be bugs.
a. the content does not change when i click different tab.
b. when file is changed outside, could find a way to refresh content window
`[...]` is displayed in gray and orange.
the text should be displayed using subpixel font rendering instead of grayscale.
the grayscale will looks really blurry when using a standard dpi monitor.
it's a text editor, so the font rendering is really important.
clicking a link either added directly or with markdown syntax `[]()` should open it in the browser.
marktext creates * untitled-1 * even when the user types in no text.
perhaps the user just wanted to check for updates.
finding none, they exit marketext but are then inconveniently prompted if they want to save untitled-1.
when exporting a document with math equations, the katex fonts used in the html aren't exported, thus fallback font times new roman is used
detected as malware/suspicious by anti-virus on windows
1. leaving "source code mode" does automatically insert newlines to (nested) lists, which might be feature in your opinion, but it manipulates existing code, which is fine within the gfm spec.
2. a similar problem exists for lists nested in block quotes.
but it is even worse here, because removing the newlines in "source code mode" inserts block quotes recursively ** and ** adds newlines which makes each line quoted on level lower for each switch back from "source code mode" 3. just saw that in default writing mode, every list has this huge paragraph space between each item.
this should not be the default behavior.
4. there should be no newline required, before the first list item, but leaving "source code mode" automatically inserts a newline 5. horizontal rule `---` gets quoted (minor bug)
relative image paths are not loaded/displayed after reopen mark text.
if the table of contents sidebar tab list is too long there are two scrollbars and the preview-layout is wrong.
if a list item starts with inline math it's not rendered at the same line.
if you write multiple display math formulas among each other, only the first and third are rendered.
in preview mode, i can 't erase text by selecting it using cmd+a, and then taping backspace.
it seems to be removed, but if i go to `source code mode` i still can see what i wrote, and when go back to the `preview mode` the text has reappeared.
can also see that my text has not been removed by using the down arrow key: my cursor moves and reveals the "erased" text.
when a text is in the clipboard and i select some text in my document and then paste the text from my clipboard, the selected text is not replaced by the pasted but instead pasted gets appended to selected text.
it does not matter if i use shortcuts (cmd + v) or context menu or menu bar.
the behavior is consistent throughout all of them.
i made a simple example for this:
in the sidebar folder browser, the context menu that 's opened by right clicking on either a directory or file in the sidebar has a typo.
the menu item for moving a directory or file to the trash is labeled "move to trach", when it should be labeled "move to trash".
it seems that the pdf export always only produces one page and cuts off the rest of the document.
windows installation produces warning by windows defender smartscreen
**feature request:** i personally like to structure my files by headlines and i usually have a generic headline at the top of the document that could easily go as the file name.
i think it would be a good idea to have the first headline in a document become suggestion for a file name when user opens save dialogue.
pdf export currently exports the tab bar.
if you press save as and then cancel, there is an exception.
it is possible to insert emoji with a keyword between two colons.
deleting an emoji takes too long in preview mode with just using delete.
it will take it out of emoji mode and make it a full string again.
then you are deleting one character at a time.
when making a new file in the tree view i expect that the editor would immediately open the file for editing.
the color scheme of the source code mode with the dark theme appears to be broken.
it seems to be a mix of light and dark theme.
* the background around the text area is from the light theme.
* the background of text area is from dark theme.
* the text color is from dark theme.
* background of paragraph that text cursor is in from light
i have a document with some paragraphs and some code blocks.
when i switch from source code mode back to normal mode, all the code blocks are collapsed to one line with no visible content.
when i click inside such a code block, it expands and shows its content.
as far as i have observed it, it stays expanded until switch to source mode and back to normal again.
side note: found that the collapsed blocks also expand when switch the theme.
suspect this is because a theme switch triggers a layout reload.
if you open a file with a long filename the titlebar use more than a single line.
if you export a document and abort the save dialog, a log entry is written.
** problem: ** i guess a empty string is send to the export function.
if you close a tab, the tab-view (content) is not updated.
when entering hyperlink tab should jump to next brackets.
i have a couple of paragraphs in my markdown file that are long enough to fill multiple lines each.
when i use the `up` and `down` arrow keys to move the text cursor one line up, it skips to the next paragraph instead.
to get further up inside a paragraph i have to keep going left until i reach the previous line.
am not sure if this is intentional or not because know these paragraphs are just one line each in plain markdown.
but either way this is frustrating and counterintuitive.
the whole point of mark text is make working with markdown files easier.
i have some text in my markdown along with some code blocks.
when i change the theme from `light` to `dark` or from `dark` to `light` the color scheme inside these code blocks won't update right away.
it does however update once i click inside the window again.
this leads to the following two effects: - **change from `light` to `dark`:** the code block has a dark background but still uses syntax highlighting color scheme of `light` theme.
some of text is black or dark blue and therefore hard see on a dark background.
- **change from `dark` `light`:** the code block still has a dark background and still uses syntax highlighting color scheme of `dark` theme.
this is not as bad as other effect since it is still readable this way.
it is a bit confusing see it update its color scheme once i click into window.
i found an issue with the keyboard shortcuts unter macos when i tried to toggle the source code mode.
enabling it by pressing cmd+u works fine, but disabling it seems impossible to achieve by shortcuts.
i tried a few different variations of the expected cmd+u shortcut but i eventually gave up.
it seems to me that disabling the source code mode via keyboard shortcut not possible in current build.
if you enable sidebar and switch to source code mode, then there are too many sidebars.
when in marktext 0.11.42, ctrl+u does not work in the older version it was ctrl+shift+s which now works as save as, such as most programs
creating a empty fenced code block within a list creates another list item
many exception if line ends with 4 spaces.
deleting a new line can duplicate stuff can duplicate a `code block`
mark text automatically converts escaped characters to normal characters when opening files
cannot select an entire document if table is at the beginning of the document.
`ctrl+t` is not working after 2 tables.
add a setting to automatically format source text with semantic linefeeds.
math blocks are really hard to read in dark mode since one can't change the font color of those
if you set a large font size in the preferences marktext does not complain and evidently complies.
as a a result it is impossible to see anything in the application window.
when you press `shift` + `left arrow key` at the same time, multiple characters get selected.
however, when you press `shift` and repeatedly press `left`, only one character gets selected
mark text converts `*` and `+` lists into `-` lists.
i think this is a parser/html to markdown parser bug, because commonmark and gfm support `*`, `-` and `+` lists.
i try to create a list using a *.
if i try to write a * it creates a second * behind my cursor.
to create list i now press enter and list element is being created.
now the second * stays behind my cursor.
it would me much more comfortable if the * behind my cursor would get removed when i create list element.
in fenced code blocks (), ctrl+x (cut) doesn't work.
mdmd30kb [description of the bug or feature]
while clicking preference, it would not open preference.md but a new edit windows
a yaml format is needed for jekyll or other static blog tools.
marktext will auto convert this such as `---` into `##`.
it may add a option or change this feature.
by the way, i suggest to add a new option to config which is the default mode( source or others ).
i wanted to use mark text to write post in hexo (blog generator).
when i open the markdown generated by hexo, mark text changes the front matter to be part of the content upon saving.
this makes it impossible for me to use mark text write blog posts.
the math block font remains black, even when the black theme is applied, and this is a big readability issue.
as title [description of the bug or feature]
table inside a list is not supported.
deleted table still exists if no input is made after deletion.
empty table disappears if no input is made.
if you insert a long text into editor, not the complete text is displayed until you click on the text.
when the markdown file is too large, the mark text editor will become stuck
when scroll to bottom, then click any space that not empy, then the scrollbar will auto scroll to top.
when i change to source code mode i can't go back to typewriter mode, it just happen when i save the file
double space between tasklist checkbox and text.
i delete all the content after i select all, but when i input some text later, the previous code block content is still there.
as discussed in pr #127, i found another issue related to raw html elements.
insert following text into editor/source code mode (and exit source code mode).
press 4x (multiple times) backspace and then many exceptions.
phofcode it also crashes without sanitized html elements.
i'm trying to get marktext up and running on my computer in order to have an understanding of how marktext use `codemirror`, `snabbdom` and `vue` all together internally.
the marktext app was working well, but i got the following error with `npm run dev`.
phofcode my guess is there's conflict with the electron versions.
so i downgrade the electron version in the `package.json`, re-install npm packages, then vue-devtools was installed without issues.
so is this something we can fix without downgrading electron?
or any specific features of electron marktext is using?
[arrow down is not work in float box]
arrow left is not work in html block
uncaught exception error when installing from the exe in the readme file for windows.
open up mark text's own readme.md in mark text and you get a lot of raw html that makes it look as if mark text is not working.
[description of the bug or feature] all the data deleted when put down command-z as source code mod in mac
i just installed the app for the first time and i get an error when i try to open it.
as a result, there 's no way for me to use the app.
if you parse the following table with cursor position on the last character, the editor throws exceptions.
support using svg as an image
i am using marktext as appimage on ubuntu linux.
when i pass a filename as a command line parameter to marktext.appimage it just starts with a blank document.
therefore i cannot integrate it in desktop environment nicely, like opening markdown documents in marktext with a double-click.
i use mark-text with downloading linux appimage file.
i am using unbuntu 16.04, and i open a new file to write something.
if i enable `view` -> `source code` setting, can't export file as pdf.
[description of the bug or feature] can't export file as pdf when enable `source code` setting in view.
i changed my theme setting to dark and after i restarted mark text the theme setting switched back to white.
this is a bit annoying because i always have to change the theme whenever i open mark text.
drag and drop don't work and destroys the editor.
when export as styled html, the symbol which should be just existed in editor was exported to html file.
double bug in one here : - when you open a file containing a `<` in a code block followed by a-z char, all the text will be deleted after the `<` occurrence till the end of line.
then the file is automatically saved and so you lose line content forever.
(] s] haroopad @n phofimage
on kde neon i've seen a bad integration with the window drawer, it ts not showing the window bar with close, minimize and maximize buttons.
mark text does not support windows "open with.." feature.
hey thanks for the app, it looks great.
is there any way you could think about changing the default installation directory from c: program files to a less privileged location.
i would love to install the app on my work laptop but don't have admin rights.
another option would be to make the installation path configurable.
mark text doesn't save the selected theme, perhaps there could be a user config file.
great job on this markdown editor.
the current shortcut for typewriter mode on linux (`ctrl + alt + t`) unfortunately brings up the terminal.
clicking the blank option on a select component adds some space somewhere that moves all other elements
chipsets stop working after casting the element to chipset.
in my latest try of getting the mdc framework work for our product.
many of already created select elements have most of the time first option without value.
in this situation the label doesnt float and acts like nothing is selected, even if i select the option and then cancel focus label it self floats back down.
i tried filling value with random char, which obviously works but i was told by our other developers that i should not be sending any undefined values.
is this correct behavior ?
select components became unstyled (showing default html select menu, see screenshot).
switching to another cdn has seemed to fix this issue.
no network issues were detected.
when using an **outlined text field** with a **leading icon** and a long label, the label can end up rendering beyond the outline.
any css workarounds are welcome.
i am using the layout-grid component to create a basic layout.
everything works fine until i test the layout on ie11 using browser stack testing software.
you guys have said that this library should work on ie11 so a little confused.
i might be missing a step any help will appreciated.
mdcsnackbar documentation phofhyperlink in the description of snackbar there is part in the documentation for timeoutms property saying: > gets/sets the automatic dismiss timeout in milliseconds.
value must be between 4000 and 10000 (or -1 to disable the timeout completely) or an error will be thrown.
defaults to 5000 (5 seconds you can 't set timeoutms property to -1 (to disable timeout) as described in documentation because of error in console.
**calling autoinit() multiple times** phofurl mdc-auto-init does not declare a function that takes the second optional argument used to call autoinit() multiple times without logging a warning.
the ~ material spec for button theming phofhyperlink ~ material spec notes that the border color of an outlined button should be set to ~secondary theme~ on-surface at 12%, but we seem to set it as primary phofhyperlink
the spec phofhyperlink shows that when there is more text than a text area can hold, the displayed area scrolls without showing any kind of scroll bar.
the text field shows a scroll bar, however.
on iphone, when trying to drag the blue dot, it always jumps back to a lower number.
i can tap to each number, but it won't let me drag.
this seems to be new behavior.
can reproduce this behavior on browserstack with the ios13 beta they have, but not with earlier versions or different iphone models.
chrome on the same phone/ios is fine.
when parent component is scrollable and scrolled, slider in mdcdialog is "out of sync" exactly the amount the parent component is scrolled.
the current implementation of the `mdc-slider` cannot be pre-rendered on the server because the foundation has the following problems: 1) it uses dom globals which cannot be proxied through adapter.
phofurl 2) it expects element dimensions to be computed on foundation init.
this is problematic because on server, element dimensions cannot be measured.
this prevents us from pre-rendering initial value of slider.
`edgeoptout` is enabled for button container fill color but not icon or ink color, leading to buttons that have poor contrast due to the inconsistency in edge phofcode note the `mdc-theme-prop` calls in the mdc code above.
on mobile safari, after tapping on a component that has ripple, the hover styles are still applied to the component.
upon rendering a page containing an @material/data-table, and then attempting to interact with checkboxes - the following error is reported in the js console: phofcode * however * , if the rendered view is changed to the previous view (where data-table is not) and then changed again to view in which data-table exists, clicking on a checkbox results in no error.
got to run - but i'll see if i can distill problem into a repeatable demo in a starter kit within next 24hrs.
when enhanced select is open, scrolling leaves the menu open and does not move the menu with the the select input.
while building angular app an error occurred ` error encountered in metadata generated for exported symbol
it seems that currently only `material-icons` is supported by `mdc-list-item__meta`.
thus, the icons presented with other themes will not appear.
mdc-checkbox focus state not showing while tabbing through all components when it is inside an mdc-dialog.
focus state does show when the checkbox is checked.
i 'm trying to reinitialize/ redraw all mdc components for form elements when their values change via `ajax` or `form.reset()`, but so far my attempts have fallen short.
is there an easy way to achieve this with a built in mdc method that i 'm unaware of?
i created a custom way to reload the mdc components with a `data-mdc-reload` html attribute that fires on click but this isn 't quite doing the job.
making an empty text input invalid triggers the select animation when it shouldn't
when you de-select all rows after you have selected them all in the data table, the select box flashes the highlight colour after its colour fade out
when `close()` is called on the components foundation class the component gets the class which results in `opacity: 0`.
this does not stop the css animation, which leads to constant cpu/gpu load even when component is not visible for user.
when a select option is selected the spacing to the underlying element is automatically changed.
this bug is visible on the demo site on the outlined enhanced select element.
periodically i get this new behavior with the latest release: taskbar icon buttons: <img width="184" alt="screenshot at 23 46 57" src=" phofurl becomes: <img width="200" alt="screenshot at 23 46 40" src=" phofurl the html originally inserted in dom: `<button tabindex="1" id="button_profile" title="your profile" class="material-icons the html (after being init (new looks like this: `<button tabindex="1" id="button_profile" title="your profile" class="material-icons mdc-ripple-upgraded" --mdc-ripple-left:29px; i also have the issue that checkbox hover - appears as a solid circle - but also periodically working??
button placed in a card turns white on hover
a textfield with a floating label attached to it breaks the rendering of adjacent raised buttons.
chips defined as input chips appear to have no special behavior.
when select is on focus it applies styles of the state when a dropdown is visible
the navigation icon is not unselected when clicking twice on it.
this only happens in chrome.
couldn't reproduce in firefox and safari.
recommended font height 10 px for desktop phofhyperlink is too small.
** phofurl seems to be down, i'm getting 404**
checkbox fills container color with previous component override color.
there has been several questions/problems with how formatting is applied.
some of it could be documented better.
but currently global formatting is not applied unless the field type is timestamp`.
this means that native/sql questions always shows default formatting.
same goes for qb questions, where the field type isn 't defined as `
after a couple of days, all metics and queries will fail with no obvious reason.
the database it reads from hasn 't run out of resources, and is still working.
the metabase instance is a kubernetes pod and has no resource limiting.
when editing visualization settings of a card on dashboard, then it's impossible to go back after clicking into a column's :gear: and depending on the column type, it'll break the preview too.
after upgrading from 0.32.7 to 0.33.6 there were a number of errors in existing charts.
seemed like it was looking back 20 years into the past for the x axis of a time series.
we were able to work around it by switching to ordinal from time series, but this is less than ideal from a ux and developer experience standpoint.
additionally, now in ordinal mode, the charts display dates at the beginning of unix time when a date is null.
based on release notes, my colleague thinks issue may be related to fix for #5916 .
when i create a simple grouping query with a filter in the count column as shown in the attached image, i get an error because comparison is done as "character" in stead of as "numeric" field.
updating to either docker image 0.33.5.1 or 0.33.6 fails.
it seems to be related to permissions?
i 'm not sure if i am missing permissions or something changed?
more information in the logs below.
check for updates thinks 0.33.5.1 needs to be updated to 0.33.5.
clicking "view these xxx" on an aggregate value where the group by value is null, i.e.
"is empty", the resulting table doesn 't apply the "is empty" filter to that field and all the underlying records are displayed.
the same action on question itself seems to work, but it may not be exactly as intended.
it relies on an empty "is" selection list, that 's probably ok but it presents slightly oddly.
dashboard table sorting uses case sensitive instead of case insensitive ordering, which makes all uppercase strings come before all lowercase.
"hour of day" always uses am/pm even when global formatting is 24-hours.
with no workaround possible, since visualization settings > data > created at :gear: does not allow formatting.
when using the custom question builder (notebook mode), if there are a series of joins and processing steps, changing the first step completely removes the subsequent steps.
this essentially means you 've got to get the first step 100% correct before moving forward.
part of benefit of these notebook style editors is that you can try stuff then tweak it to correct issues, this reset is blocking that.
date fields display as `december 1, 2019 12:00 am` despite not having time information.
when selecting trend/number visualization, the title back-button to return to viz selection does not work.
it works for all other viz types.
workaround: just click the visualization-button in bottom left to show visualization selection.
the tick labels of a line/bar/area timeseries are always showing english instead of browser language.
it shows localized version in 0.33.4 workaround is to change visualization settings > axes > x-axis scale = ordinal.
unable to save/replace questions when the query has join tables, i tried on native query with the same query and even with multiple join tables from multiple database/catalogs(im using presto), miraculously i could save the question with no issue
trying to set up metabase behind a reverse proxy using proxypass fails.
after clicking the '+' button to add a question to a dashboard, users are unable to actually select a question for 1-2 minutes when metabase instance has a large number of cards.
the problem appears to be the call the `card` api with `filter=all`, which loads metadata for every card in metabase.
we have approximately 38,000 questions, so this call usually takes 1-2 minutes, and ends up returning ~40mb of data.
dashboard embed not working in 0.33.5 - just gives a `not found` error page instead of the preview on 0.33.4 question embed works.
latest update of metabase fix mysql json bug (issue 9800).
but after i updated docker images bug still not fixed.
i found that latest metabase docker images use incorrect metabase.jar (i use sha256sum for compare hash with release page)
after saving a question the button for downloading the results dissapears, this causes the user to re run the query just to get button displayed.
this amounts to 3 runs of a query to get results (original, after save, generate download).
connected a local (docker based) metabase setup to a mongodb atlas database but after connecting there are no tables (or collections) shown in the metabase dashboard.
metabase image: mongodb version: `4.0.13` connection string format :
bar chart scale is not correct when you have more than one value in a grouping.
i am not able to save or replace a question when i query against `my_dataset.__tables__` and the results are empty.
saved questions do not show linked tables in filter and summarize options, but new questions do.
in existing saved questions, filters and group options show an empty field in the editor where the linked table field was.
when trying to add a new filter or summarize in the question, the linked tables do not show up.
when a new question is made that queries same thing as an existing one, linked tables and their fields show up as expected.
when new question is saved and page is refreshed in browser tables fields do not up.
native query question switch to edit mode ("new question") by applying a drop-down filter.
this produce an error "you do not have permissions to run this query."
when one tries to filter using `count`, you get to chose a text in the filter and then it fails with an error.
detailed explanation with step by step reproducing below.
also, i have added a hack which i use to overcome the issue in the extra context section.
when i try to add a chart to an existing chart on the dashboard i am not able to add the new chart, even if it is the same data type, or an exact clone of the original chart.
phofurl dashboards with layered charts that did work before cannot be edited, otherwise they all fail.
when using metabase, i have some attribute 'a' along the x axis, and am grouping by attribute 'b' to have multiple lines of data shown on the graph.
however, if i place a filter on 'b' to limit the number of lines shown, metabase often changes a for b on the axes.
the _"oracle system id (sid)"_ and _"oracle service name"_ part formular to set up a new oracle database are misleading: <img src=" phofurl width=350 /> ##
combo chart is misaligned/displaced on x-axis, when using area and ordinal, or just histogram.
the pin maps initial zoom level when it 's first created hides the top most set of pins, you have ot either zoom out or pan down to see them.
using pin maps on a data set that is wide, can be columns joined in the query builder, or simply a table with lots of columns.
if you zoom in using either the "+" button or double clicking the map, then hover a pin to get more info the map zoom and pan is reset to default.
when using a grid map built off a custom question that includes a join to the location fields (i.e.
new advanced query builder), the "zoom in" function produces an error and does not zoom correctly.
the same data presented from a simple question using the automatically joined locations does zoom correctly.
when setting "replace missing values with" to not "linear interpolated", then line point tooltip is missing data.
using `java -jar metabase.jar dump-to-h2 mydumpfile` with a postgres 12 application database fails with a `referential integrity constraint violation` concerning foreign key `collection_id` which references `public.collection(id)`.
when i write a sql query without a join, i can reuse the results as a saved quetions.
once i join two tables across 2 differrent schemas.
then cannot find the question anymore, in the saved questions.
when a filter is used with multiple selection, the hover on a chart will display only a single value for that variable.
i 've metabase 0.33.4 with ldap authentication configured.
i 've configured group sync and the metabase group is correctly assigned after the user logs in.
but when i remove the user from the mapped group in ad i get a login error and following exception
i 'm experiencing a weird bug with 2 specific sql questions already existing on a dashboard that has been around since february.
i currently can 't make any changes to the dashboard, pressing "save" results in the button changing to "save failed".
> side note: if i remove a filter from the dashboard and the "save failed", filter is actually removed so it didn 't roll back.. i narrowed failed save on dashboard down to 2 specific questions, which, when they are saved with table visualisation, don 't cause any problems (i can save dashboard), but when they are bar-charts dashboard save fails.
i tested this by making a new dashboard, adding one of 2 problematic questions and could reproduce "save failed" in bar-chart mode.
resizing, and dragging broken question also doesn 't work properly, it doesn 't register release of mouse-button after resize so can keep dragging element around.
the moment press "edit" on dashboard, following error appeared in js-console: `typeerror: t[0] is undefined` the stack-trace is just bunch of react render-cycles then recreated one of problematic questions, including all it 's field filters (11) and tried new with this question.
compared records old new question in metabase values 2 columns where different: - `dataset query`: no significant difference json.
only `id` field-filters was different ofcourse order keys json slightly differed.
- `visualization_setting`: differed quite bit, i 've probably tried out different visuals on broken question: - old: phofcode - new: phofcode
i am using metabase hosted by a provider version 0.33.4, but am happy to run a docker instance to help test.
multiple users, with different databases, are having the same issues.
this seems similar to #11054 and #10805.
hello, we noticed that the iframeresizer script that metabase uses to make the dashboard embedd iframe be displayed at its content height makes ie11 extremely slow, on an 8core i7 with 8gb memory ie stops responding, i waited for 5minutes but ie didn 't stop freezing, the website became unresponsive!
as soon as we disable this iframeresizer script (remove onload property) the website loads almost fast (~2 seconds) and doesn 't freeze in ie, but this is not someting we want to do, we need it with dynamic size.
start a native query, go to data reference, select the saved questions.
it'll show how many saved questions there are, but the link text is invisible.
the links are still clickable, and go to the data reference for those entries.
i 've configure the timezone to be `us/pacific` in the jvm and when i query without grouping using the custom question builder it works fine but the timezone isn 't being considered when using `group by`.
it directly considers it a `utc` timezone and starts displaying data in `utc` time.
sometimes, when i try to add a new question to a dashboard, it doesen't load properly.
the new card with the question is added over an already existing card and, when i try to resize or move it, it sticks to the mouse cursor.
therefore i can't place it on the dash and can't save it.
it is important note that this bug doesn't happen every time when i try add a new question a dashboard.
however, once it happens, keeps happening every time specific dashboard.
when trying to change the date granularity or remove a metric (eg, from the default starting point of users + page views over time), clicking on the granularity or the "x" doesn 't do anything.
if a user has written a custom query, in some cases it is showing an incorrect association to a table not used in the custom query.
for example: custom question shows: "example database | example schema | example table" but "example table" is not being used anywhere in the custom query.
what makes the issue a little more odd is that i don 't see this necessarily happening with all custom queries so i 'm not sure why it 's doing for this particular query (which was written by another user).
chart (in my case a stacked bar chart) x-axis doesn't reflect the order changes (ascending/descending) of the used column.
in the dashboard widget edit modal an unintentional horizontal scrollbar is visible on the bottom part of the modal when questions with too long names should be listed.
when renaming the schema of a database, previously existing questions break.
on running the query in the query editor the rendering seems to trigger an infinite loop when working with a pie chart.
when clicking a column header to drill down filter, it will not show data options on first load, but if trying again will display data options.
downloading "full results" to excel, csv or json from a card containing multiple questions only returns a single data column (apparently the data from the * first * question added to the card).
post to /api/database will overwrite an existing database instead of erroring
embedded reports return 400: assert failed: (map?
it is not possible to clear/empty/remove the description of table/column in data model.
same goes for of table in data reference, but it is possible to clear those fields for database in data reference.
note that it is possible to add and edit those fields without any errors.
when sorting data for trend (smart number) in descending order, then it stops working and just displays the message `nothing to compare for the previous x.` this is applicable to qb and sql.
problem are: multiple lines with the same "x" value on the line chart are visualized incorrectly.
in new version 0.33.3, just one "value" is displayed for one "x" value in the version 0.33.3 it looks like this: image phofimage in the version 0.33.0 it was working fine: image phofimage
previously i could use custom columns to add calculated columns e.g.
however - there are now 2 separate custom columns.
the first one does not allow a user to enter functions.
the second allows me use to columns from the 'group ' however with no alias (so if i have several 'sums ' i only get the first as an option called 'sum ').
when i update the report by adding a new grouping the custom columns are removed.
text columns are converted aggressively to datetime in charts and x-axis shows date even when scale is set to ordinal.
visual query builder won 't load at all.
i upgraded to v0.33.3 from v0.32.8, and the issue still persists.
a clear and concise description of what the bug is.
when creating a custom question and doing filter aggregation on returned data (generating a sub-select), then dashboard filters cannot be connected to card.
for example, a table `user` with single column `id`, this sql is not supported by hive: phofcode hive only support order by only selected field.
this query works: phofcode the different is that table alias `t1` must not present in field name of order by clause.
hive not allow to use table alias in order by clause when use column alias in select clause.
this query was generated when sort table any field in ui.
1. open any embedded dashboard 2. user clicks download icon 3. download menu opens 4. user clicks on one of the formats - csv /xslx/json 5. nothing happens.
in the background the api call is in progress to download the results (which might take time depending on size and complexity of query) 6. user keeps clicking on one of options after assuming that no action is taking place 7. this repetitive behavior quickly overloads system.
ideally one of following should happen after clicking on one download formats 1. disable download menu and show a loading icon instead 2. close menu altogether and show loading for entire dashboard
some panel questions are not processed randomly and intermittently.
i trying to migrate my data from h2 to mysql using the comand load-from-h2, i 'm running the docker version
when the date is string formatted in a native query, the tool-tip doesn 't show up when hoovering data points on the dashboard bildschirmfoto um 11 34 23 phofimage
cannot stop/exit resizing a dashboard card, then clicking the corner (not press-and-drag)
i deployed a metabase instance and added successfully a database of type mongodb pointing to an aws documentdb instance ( supporting part of mongodb 3.6 api phofhyperlink ), but when trying to add another database from the same documentdb instance i got a timeout.
i retried several times by redeploying met abase and the issue seems to be systematic.
i also tried to delete the database that added successfully, and when trying add it back incurred in the same issue.
bar visualization does not work
when using custom question (notebook), and joining two tables by `datetime` columns, the sql casts/parses the joining-columns as weeks (postgres) or months (h2).
if i add a new database and for some reason metabase doesn't record its tables, then on the admin > permissions screen the database's granted permissions will no longer be displayed.
if you try to save data permissions and the server responds with an error message, that error message is not displayed anywhere.
1. the metabot group appears in data permissions and the ui communicates that you can set data permissions for it.
however, you are actually not allowed to set permissions for metabot.
you can only set collection permission for metabot.
2. the user has no way of knowing why they can 't set permissions for metabot because the ui doesn 't give them that information.
in a 445-entry table there's one single entry that should be coalesced into an n/a pie slice.
in table view it is displayed correctly as 1, in pie chart view it is 1.34.
my custom metrics always returns 0 when calculating the ratio of 2 (sql) `integer`s however, it works when the given metrics are `numeric(4,0)` (see comment).
since updating to v0.33.2 we 're getting "sorry, you don 't have permission to see that" errors when trying to save anything (questions, dashboards, etc) and often even when running queries.
the errors occur regardless of whether the user is an admin or not.
there 's no single obvious "this is what makes a query error out", but simpler queries are more likely to work than complex ones.
queries with more joins, more aggregates, and/or more window functions are likely error out.
in all cases the queries work correctly when run directly against the database.
we have two databases configured, one postgresql and one snowflake, and the same errors occur in both cases.
internet explorer 11 does not show charts but rather the error message `object doesn 't support property or method (german original: `das objekt untersttzt die eigenschaft oder methode "getelementsbyclassname" nicht`)
i've seen this bug discussed and _supposedly_ fixed, but i'm definitely seeing it again on v0.33.2.
when creating a native query visualization with line graphs, no lines appear and a javascript error is displayed in the console.
csv download doesn't give proper results.
as per the documentation 1 million is the download limit.
however in my case i'm getting 29,167 rows in excel this is download on the table created on metabase, whereas my data is having ~265k rows.
what is the exact limit for metabase download ?
when summarizing a group of orders and grouping on a column from another joined table, the drill-down to "view these orders" breaks as it only looks for it in the main table image phofimage
charts are not visible: in console there is: error getting setting graph.x_axis.title_text typeerror: cannot read property 'cols' of undefined
when aggregating by month, the truncated dates are returned in the incorrect format, preventing metabase for charting anything.
this issue appears to be related to the str_to_date() mysql function which metabase uses in its truncation of dates.
for example, i want the count of rows by month from a table.
using custom question ui to construct a count of rows with by month.
the result i get back is a blank chart with an error: image phofimage the error reads: > data includes missing dimension values > we encountered an invalid date: > launched at is an unaggregated field: if it has more than one value at a point on x-axis, values will be summed.
note that in this case launched_at is datetime type column.
for one of the sample dashboard (peoples dashboard), the geo map is loading fine as shown below.
image phofimage now, when i try to print the same dashboard using chrome (ctrl+p), the print preview shows loading icon on geo-map section.
image phofimage here 's error that gets logged when print command is sent - image phofimage this issue is in printing
time series data are not recognized when rendering charts.
the year is set back to 1970.
there is some inconsistencies between the public shared dashboard and the dashboard accessed from metabase directly.
hi, few days after running metabase, email pulses stopped working.
the only way to get it work again was to restart the service (but again - after a couple of days pulses stopped working again)
create a metric with a custom expression without giving it an optional name, and then save the metric and visit data model.
now it doesn 't load the data on the table for the metric.
bar charts are not rendered when one of the series includes only nulls.
while creating a query, i want to unselect columns.
but after unselecting a few columns (also creating a feature request for an unselect all option), when i click to unselect the 19th column, it selects a column that i already unselected, the 14th one (or sometimes the 10th).
trying to run metabase on windows 7. using gitbash for installing.
build installed successfully but when running the backend server using `lein ring server` i 'm getting the following error - phofcode this is error is definitely due to the path mismatch between windows and linux - `/c:/` might be causing this exception.
i couldn 't find any useful resources to solve this issue.
this same issue is reproduced when using windows command prompt for running.
updating user name/email via :gear: account settings returns `sorry, you don't have permission to see that.`, but actually saves the changes.
a dashboard containing a pin map will not load anymore after upgrading to 0.33.1. i can also feel a longer response time to load the dashboard in general.
percentage formatting no longer works whenever values are shown (tables, tooltips, etc.)
search loads indefinitely and does not return results.
after upgrading from v0.33.0 to v0.33.1 we can 't create any more questions
after upgrading from 0.33.0 to 0.33.1 some of our existings questions containing line and bar charts are broken displaying an error like this: image phofimage
pie charts are significantly larger across all dashboards since the upgrade to 0.33
when i want to match a filter of a dashboard with parameters of questions in a dashboard it is not possible.
when running an sql question as a bar or bar+ line chart, the dates displayed on the x axis are being shown incorrectly.
if the date range passed into the query is 24th -30th aug, chart displays dates from 25th -31st aug, but label over data point displays correct date, see screenshot below: image phofimage
members randomly get removed from groups in metabase, when their ldap group membership remains constant, seems to happen when a user tries to login.
after updating to 0.33, the default formatting settings set under admin do now pull through on the settings option at the bottom of a question.
this means i can't change a column to type currency as this will default to dollars, same with date, time and all of the other data.
i did upgrade from 0.32.2 to newest 0.33 and i'm using docker container on aws.
after upgrading from 32.x to 33.0 the pulse images on slack got stretched up.
it seems like it changed from landscape to portrait orientation.
please see the screenshot below for more details.
is this an intentional change or is it a bug?
or is it a feature?
when visualizing timestamp data and group it by month, march appears twice.
and october is sometimes not visible.
the most recent release of metabase has added 200mb to the size of the image from the rc1 image.
i have a question that shows a table that counts rows by day and time.
for example: how many sessions took place on monday at 4pm for example.
i have read the time faq guide and don't think the issue is related to this.the reason i think this is because i can confirm that the database record timestamp matches the metabase value.
moving queries from a personal collection to a public collection has options to do so, but upon saving the move and refreshing the question, the question remains saved in the personal collection
drawing a map in the map view does not create a filter.
drill-through filters on joined tables doesn 't use aliased name, so it ends with error.
a clear and concise description of what the bug is.
upgrading from v0.31 to v0.33 we are now unable to perform any kind of queries against our bigquery data sets.
these can be native queries that work in bigquery console and are pasted into metabase, that throw errors, or they can be more complex reports that rely on bigquery, built with the custom query builder.
this can be a simple query
when you manually join a table using "join data" - you cannot write a custom expression that contains fields from multiple table.
field / column from joined table will not show up in custom expression
on tables created a couple months ago, some of the basic metrics like averaging, sum of, etc are not available.
on newly created tables (< 1 week old) these metrics are available for use.
i can 't start metabase v0.33.0 with the jar file download from phofurl and connect to amazon aurora mysql v5.6.10a from ubuntu 19.04 with the command `sudo java -duser.timezone=utc -jar metabase.jar`.
when creating a question based on google analytics and using the date filter of "previous [x] months" (with this month unchecked), the last month data is not pulled in correctly.
it only pulls the data from the first day of last month.
when auto y range is disabled and a manual range is set, this range is ignored if a data series has values outside of that range.
instead, the range is set to the minimum and maximum values of the series.
this was previously working in older versions, and i suspect may be a regression of phofurl when i apply a format to a date field, for examples, to remove the time component, it renders correctly in metabase itself.
however, when i export the result to csv/xls, my chosen format is no longer applied and instead i get a full date/time string with timezone.
addition of tables to the universal search bar is great, but just found that it will only search on the actual table name, not the friendly name used everywhere else in metabase.
note that these are the friendly names automatically generated by meatbase, not manually overwritten.
a user with collection permissions to a dashboard _also_ needs data access permission
when starting a "fresh" install with docker-compose using multiple instances, sometimes one of the instances dies because of an exception encountered while trying to migrate
it appears that the documentation for version 0.33.0 is not uploaded to metabase.com.
i 'm seeing the error message "cannot read property 'getattribute ' of undefined" when zooming into reviews data in the sample dataset
with a mb instance running on docker, i tried to connect to a postgres db running on the docker host (my laptop) using the setup wizard.
mb could not connect and displayed the message "server error encountered"
when going through the setup wizard, i skipped the company name field.
when i tried to click next, it turned out the button was disabled.
because the ui didn 't indicate what was invalid, i wasn 't sure if i needed to fill out company name, or if there was something else needed to do.
tabs inside the audit panel are not availlable.
letter `` in russian keyboard layout is located on the comma key.
russian comma is located on `/ ?` though.
when i type the letter `` in any search field it still works as comma, not as letter.
what is more, russian comma doesn't work for separating paprameters.
it's just typed into the search box like any other symbol.
casting a large number to ::money results in an error.
metabase `load-from-h2` fails at removing `constraints` during migration
not able to save custom fields, done button is disabled i couldn't find any existing bugreports, if so sorry about that.
when looking at raw data for a given table it appears those fields do not show up by default but we can still add them in tabs settings section.
when using bigquery data source, if i apply filter on a pre-aggregated "count of rows" metric, the filter being applied is a text filter instead of a numeric filter resulting in "no matching signature for operator > for argument types: int64, string.
supported signatures: any > any at [2:297]" error.
in the 0.33 release candidate, trying to apply filters in notebook mode on a small display can result in the list of fields extending off the screen with no way to select all options.
this is particularly tricky since the lists render upwards, so searching for a field to bring it on screen doesn 't work as a workaround
metabase fails to start after installation, when run, it exists with zip end header not found`` backtrace.
when creating a simple aggregated question, sorting by a column and then moving the columns, shows the sort-indicator (chevron) on the wrong column.
and creating a notebook aggregated question and defining an aggregated column in sort, then it does not show any sort-indicator.
when having two databases and only setting sql permissions for one, then users cannot access the editor via "ask a question" > "native query".
it works via "write sql" button.
when editing a native query, the variables side panel does not appear when a `{{variable}}` is entered into the query box, so it 's not possible to setup/use variables.
navigating to phofurl and clicking the button, the launched environment does not automatically configure the
when trying to bin latitude and longitude for questions where you want to join other tables, it works in preview, but the results do not bin meaning you can 't use the grid map
when i create a region map based on world region, it takes a lot of time to render the chart and the whole screen freezes for almost 40-50 seconds during loading of the chart.
stacked bar chart produces incorrect results when given a combination of positive and negative values to stack.
issue seems to be present for both - custom/sql and native query types of questions.
tested with metabase versions v0.32.8 and v0.32.10.
database type seems to be irrelevant, tested with postgres, h2 and ms sql server.
on 0.33 preview 1/2 i am able to connect to my oracle db.
on rc1 the connection no longer works, within metabase i get the following error.
> no suitable driver found for i have confirmed that the ojdbc8.jar file is in the plugins directory, and is detected at metabase startup.
leaving plugins directory as is, and rolling back to preview 2 .jar file allows oracle functionality to work as it previously did.
when a field in admin > data model has "display values"="use foreign key", then the question cannot be used as saved question.
it will just return an error that the foreign table column was not found (depending on database, the error might be different): `invalid column name "title"` `column "source.title" not found`
i 've got a table with a number field called "counter", i wanted to sum them up as part of a "custom expression".
i get an error "expected field name, number, or expression but found \'count \'" in the expression dialog.
for reasons that are beyond scope here our internal domain is called xxx.yy.inet.
with the move to v0.32.10 metabase no longer accepts servers referred to using this domain in the site base url.
if i use a replace the ".inet" with a ".com" or ".org" it is accepted even though these are not valid names.
when adding a question to a dashboard i 'm getting repeated results for the same questions.
each question is repeating multiple times, the exact number of repeats is variable.
changing table column order shows "get answer" instead of just refreshing.
a large response from a call to the api causes the results to be truncated.
this appears to be a write-stream that is not being flushed properly as it truncates at different points when sending the request multiple times.
query builder - queries against saved questions with applied filters, the filter disappears once saved.
when trying do synchronise the database scheme of an oracle database containing tables with geodata (in my case shape files), the prepared statement will trigger an "ora-01427: single-row subquery returns more than one row" error.
the sync process is stopped after the first occurence.
when exporting from an embedded dashboard, exports are limited to a maximum of 2000 rows.
today at my company, we 're enforcing a policy to randomly rotate passwords in all our rds servers, and we 're using scripts to update every asset/app which uses these databases internally.
therefore, we need to allow this to happen our metabase installation.
however, everytime i try update any mysql database configuration via api, i got the error: phofcode for whatever request i 've done for it.
upon logging in to metabase, the main page includes a loading indicator that spins forever.
i have set up metabase behind traefik, running as a docker container.
it runs as expected, with ssl, but fails to load logging 200` errors in the console (chrome).
dashboard cards that reference custom sql questions fail to load when clicking on a dashboard link that includes a dashboard filter param that references a table id when using postgres as a data source.
tested on latest stable metabase 0.32.9 a similar bug was fixed for non-custom sql questions here: phofurl
i've connected a new, dockerised version of metabase to a mongodb atlas sandbox with a read-only user.
the dataset is small, with 6 collections - there is less than 5mb of data in total.
the connection succeeds and the database is connected.
scanning tables manually / syncing manually, or automatically, all result in no tables found - empty dataset.
it can't see any of my collections.
unable to render a card while creating a pulse
the checkbox to _include current day/week/month/year_ unchecks itself whenever any of the filter conditions change.
we use version v0.31.2 to design our dashboard, but found a problem when loading the region map with filter, after the region map load finished, the filter not apply to any of the question in dashboard.
below is region map we use: image phofimage map display uk map, and to district name in our source table.
when load page without filter, it working: image phofimage it display data for all uk region.
when select a district from filter, other question finish first, but still loading: image phofimage and wait until finished, all question show data without select filer: image phofimage
in a dashboard that has many fields click the edit button and try to reorder one of the fields, it will cause other fields to disappear.
a clear and concise description of what the bug is.
we 've recently updated metabase to its latest version and the ldap auth stopped working for new users.
* users that have previously logged in are working correctly * manually added users are also able to log in please note that if we manually add the new user through the
specifying a foreign key constraint within the metabase admin panel without the underlying databsase foreign key prevents adding columns under the `visualization` section by selecting more columns.
one quirk that i 'm not sure is affecting this is one of my "tables" is a non-materialized view.
bigquery queries that return a column of array type trigger a backend exception: `java.util.arraylist cannot be cast to java.lang.string`
when trying to reset the password of another user on the admin panel, the popup with the new password is no more displayed.
dashboards fail to load some questions showing a message _there was a problem displaying this chart_.
it affects different questions on dashboard every time - sometimes all questions load correctly, sometimes half of them show the error, the other time it 's yet different set of questions.
observed in version 0.32.8 and 032.9 (did not test other 0.32.x releases).
does not occur in 0.31.2.
showing all series in one tooltip of bar
i create a custom query with one metabase filter variable.
i define this request : phofcode but presto receives this one : phofcode which is invalid due to the multiple quotes and second variable item not replaced as expected.
date range picker unchecks "include today" whenever user changes the date range.
user has to save twice in order to change a date range and have the date range include today.
unable to upgrade to `0.32.9` (from `0.32.5`) on heroku using metabase-deploy phofhyperlink and following upgrade instructions phofhyperlink .
certain points on graphs have tooltips that flicker in and out - seems to be related to if they're getting cut off by the screen.
when clicking on the id of a record in the results view, and seeing the "full" record view, the left div/pane is a white and right one is light-blue.
however, left pane is only filled in white up to bottom of original scroll height.
as such, when you scroll down, area beyond original scroll height is now light-blue.
see attached screen shots to see.
if you want to measure an individual google analytics goal's metrics (e.g., completions), it appears to not be possible (or i'm being obtuse and can't figure it out and can't find docs to help).
the terminal doesn 't show up.
the terminal crashes almost immediately after loading a blank screen.
in trying to fix this i 've reinstalled and also removed profiles.json to get a fresh one.
afterwards i attempted to debug, and got the following call stack: phofcode based on this i realized my display 's scaling factor had been set to a custom value (115% or something).
i changed it back the default 100% and it started fine.
the shell window get hang.
here is a video clip that shows the situation.
the demo contains two keystroke, the first is simply `ctrl-c`, the second one if hit `ctrl-c` twice very quickly.
the terminal icon appears in the start bar, then a moment later it disappears.
i've been using windows terminal for the last few versions and it's been fine.
i upgraded to 0.7 today and now it no longer opens.
i tried uninstalling and reinstalling it.
i also tried explicitly removing profile.json, because i had previously changed it.
i have to press `shift` + `/` twice to insert a single `` same problem with other chinese symbols, such as ``, ``, ``, `` and etc
the blank spaces still leave blank.
image phofimage image phofimage however, if you resize the window, the panes will return to normal
the title of the tab is `vs2017 developer cmd - c:/program files (x86)/microsoft visual knipsel phofimage
on the primary monitor everything works correctly.
on my secondary 16:9 monitor the windows taskbar still visible and there is a black area in the terminal: 169 phofimage on my secondary 4:3 monitor the terminal is all black with a gray box and unusable: image phofimage in all monitors terminal exits correctly from full screen mode by pressing again `alt+enter`.
the problem happens also with default profiles.json.
a new tab will be opened, but nothing gets executed.
it is hanging: image phofimage
once the terminal is focused, moving the mouse around is very laggy (even if the mouse is on another screen).
this keeps happening until any other window is getting focused.
the system laggy overall while the terminal focused.
worth to mention: i tried installing terminal both via windows store as well as scoop.
i tried using it with default (empty) config file, i tried personalizing it.
the behavior was always same, from moment i installed first time terminal (starting with v 0.6xx and continuing into new 0.7xxx)
a quick note: the character here, the hebrew letter taf - , is comma on the hebrew keyboard image phofimage
it opens the settings profiles.json note: i have tried remapping the settings to use instead but it still open if i try to "expand abbreviation" so i guess this is another form of bug, where you can 't remap the settings to a different key?
it shows me an error which is system can not find windows terminal.
see bellow image runas_admin phofimage i know i can create a variable that hold the credential of my admin account that used to manage other computer in a domain.
but that 's not what i want .
the next shell prompt and the command as i type it doesn 't appear.
it takes a newline or so to get out of this state.
note: this issue only occurs with exactly 256. with bigger numbers there 's no hang
color index 15 is set to the given value (works for 0..15), index 16 remains unchanged (doesn 't work for 16..255)
the screen it`s not fully covered by terminal and it appears to be cut the top of terminal image phofimage is this by design
keeps outputting "" just like i keep hitting the "" image phofimage
the windows terminal ui flashes briefly and immediately quits
* when pasting with right-click of the mouse, extra blank lines are generated between code and at the end of the copied text.
* an error message is populate once per `if` statement.
the error message reads: phofcode
content of the background window is being painted (in this case desktop) image phofimage if i resize the window it goes back to the norm
the main scrollback buffer isn 't erased.
this is probably somewhat related to issue
the `ris` command clears the alternate buffer, and doesn 't switch back to the main buffer.
so when the final 1049 sequence does switch back, the main buffer contents are all still visible
please see bellow picture for more clear explanation.
1. the code in the originate bash is quite normal 2. but the code in the terminal bash is quite different, bellow each line of code has an empty line.
3. if i copy code from a json file that originate from linux , will not have this issue in terminal bash.
4. but i work under windows , always create text(config) file under windows environment and always copy text from notepad.
-- could we use a very different color to identify the active tab ?
it 's hard to figure out which tab is active when my monitor is not so good.
i have to chick on each tab to find the active one.
the history window does open, but part of it is invisible.
it appears to be cut off at the point where the console transitioned from the _bash_ shell to the _cmd_ shell.
side by side comparison for cmd (command prompt): image phofimage side by side comparison for powershell: image phofimage
scroll up shows my command that i typed long ago.
the serial console message is lost.
if i run ubuntu terminal directly (instead of doing the same from windows terminal), i could scroll up and see right messages.
not sure, may be ncurses behavior is not compatible with windows terminal 's expectations
- (window scales down correctly) - terminal window disappears after around 1 second without message - (process is terminated according to task manager/process explorer)
1st - it is too sensitive, milimeters of movement on the touchpad is enough to go all the way up or down on the buffer 2nd - it scrolls 4 lines at a time instead of 1 line
if you run powershell 7 preview 6 in windows terminal, out-gridview, show-command, and get-help -showwindow don 't get a focus.
they open windows behind the terminal
no tab until i drop :( !
i have 4 tabs open, but only one is showing; i have to scroll to see the rest of them.
image phofimage i later found that if i close one of the tabs, all of the others will suddenly become visible.
didn 't try adding a tab, but that might fix it, too
context menu text is not legible.
the overlay and box stay at the position they were initially in which is ugly and, depending on the resize, allows selecting of the underlying text or cuts the contents of box.
* current tab closes * tab bar disappears * (!!)
other tab content is visible, but cursor is not flashing and input is not handled * (!!)
a few seconds later, the application crashes, logged in event viewer: phofcode i have raised a feedback hub issue, but it has not yet appeared in "my feedback".
i 'll update this ticket once it 's showing up (it said it would take a few minutes, but now it shows nothing...
now you see it, now you don 't.
the external diff tool appears behind the windows terminal window.
image phofimage the file name /line
previous message is shown again.
background has black lines screenshot (31) phofimage
the title bar is of a different color (a light gray)
the title bar is wider than the actual window by 9px.
resizing the window fixes the width.
this is a little annoying because the 9px grey area goes on to next monitor and it does nothing when you click on it.
the terminal window crashes and all the tabs in the windows get closed
text input is ignored even though the terminal window has focus.
text input is restored when clicking the text area or focusing another tab
when the historysize profile setting is sufficiently large resizing the terminal window does not change the reported terminal dimensions.
when cursor changes line there is one additional space to delete and the typing position is off by one afterward.
ps seems to work correctly deleting chars with phofcode seems to work correctl
the terminal freezes and becomes unresponsive
lines are duplicated or sometimes not, it 's super confusing to understand what exactly is happening
text maintains it's original color which leads to contrast issues.
now, there is a brief flash where it seems like terminal is trying to launch the shell, but it quickly fails to do so and closes that tab.
if i launch a regular powershell shell, and then manually issue the command, i can get things working as they previously did, so this seems to be a recent change with how the commandline property is read rather than what i 'm trying to execute.
this seems have stopped working with the update i received from microsoft store recently.
microsoft store indicates that i received an update yesterday, but can 't confirm that this was when this change occurred, only that it happened in past few days as this was working last week.
am suspicious there was a change with how escaping things might have changed but wasn 't able determine what is different now and what might work.
when switching to the alt buffer in conhost, we reset all those properties, producing the following results: - the "start" text is in the top left corner.
- the "margin" text is at the bottom of screen.
- the "tab" text is in column 9.
- the cursor is visible.
here 's what our output looks like: image phofimage reason for this behavior because these properties are part of `screen_information` class, and alternate buffer implemented as a separate instance of that class, when it should really be sharing much of that state with main buffer.
scroll margins are a little more complicated, since those properties are also duplicated in `adaptdispatch` class.
and this can result some weirdness when switching to alt buffer since two sets values can end up out sync
recently i've been getting failures in `terminalapplocaltests` that i've never had before: [failed] [failed] [failed] [failed] the `trycreatewinrttype` test is failing because it's throwing an unidentified c++ exception (i think in the `terminalsettings` constructor): phofcode the `keybindingstests` are failing because the method is throwing an exception for all of the key chords, so nothing gets added to the `appkeybindings` in `layerjson` call.
the test output isn't particularly informative, but here's an example of one of them: phofcode are these failures expected when running tests locally or is it just me
the application will either a) reject my perfectly valid credentials (which work in other prompts), or b) give me an access denied error.
runas: attempting to start c: program as user ... runas error: unable to run - c: program 5: access is denied.
"run as other user" gui: "windows cannot access the specified device, path, or file.
you may not have the appropriate permissions to access the item."
unsure if this same issue happens on the non-store version.
`git` does not receive the pasted text.
please note, i verified that i can paste text inside wt itself.
both right mouse button and ctrl-v options worked.
the issue is somewhere in the interaction of wt, psc, and git.
if i am using cmd only or psc only, i can successfully paste the text and git accepts the input.
the terminal window will have the left-most chrome border and some of the console output on the left screen.
a screenshot of this is tough, but notice that the border is overlapping adjacent scroll bar that is maximized on left display here.
screenshot of overlap between a terminal window set to use left half of a right-hand display and window adjacent to left that is maximized to take up full display phofimage
the window when moved to the other screen freezes and then crashes.
note: it works if the windows terminal window starts and is maximised on the first monitor and then is win+shift+arrowed to the other monitor.
no crash but if it is not maximized and either moved by way of win+shift+arrows or cursor drag then it crashes.
the tabs don't reappear on the tab bar unless you click to add a new tab, then they all pop back in.
the tab bar scroll buttons are there but don't so anything when clicked.
when typing <kbd>o</kbd>, the string `~` is typed into the terminal, whereas the string `` was expected instead.
super slow and sluggish behavior.
there is at least a 2s delay for typing and using `ls` for example will result in a slow animation for listing the content in a directory.
the terminal is pretty much unusable if i go full-screen i have a laptop with 1080p display and i also have an external monitor connected via mini-display port.
monitor is 4k native 60 hz, and it works without any issues.
my laptop has also dedicated gpu (nvidia gtx850m with the latest drivers).
spotify, microsoft edge, word etc) perform just fine when in full-screen on this 4k display.
however, the windows terminal performs super slow when i go full screen on the monitor.
terminal performs fine when put it in full-screen on laptop 's main display
the same line in windows terminal displays with the wrong text size: image phofimage the font i use is noto sans mono cjk sc, 12pt
i get extra lines in-between regardless of whether the source i copy from is lf or crlf when i paste it into wsl in the terminal.
image phofimage image phofimage existing text is also affected.
before: image phofimage after: image phofimage another example: before: after:
it seems that the terminal is unable to handle the fast/large amount of text output from the find command.
looking at the time that tmux shows in bottom-right of screen, it can be minutes "behind" in rendering text output.
other notes: * running in tmux locally, without going through ssh, it takes ~2 seconds for a ctrl+c to come through * running without tmux locally, without going through ssh, ctrl+c is immediate * running without tmux but with ssh, executing a find on a remote linux server, it takes about 5-7 seconds for ctrl+c to come through.
so it seems only combination of being connected to another server through ssh, running a there, and then having lot of text output causes issue where terminal is very far (minutes) behind with rendering text output.
there will be two cursors
the acrylic effect only appears when terminal is in focus
1 output consists of `normal 1` to `normal 74` (exact number depends on the window height), followed by `alt 1` to `alt 74`, and finally `normal 75` to `normal 100`.
(`alt 75` onwards are gone.)
lines get permanently lost as the window is made smaller, e.g.
the sequence goes like ... 70 71 72 73 78 79 80 81 ..
nothing, just a error saying this command does not exist.
default background is slightly lighter than black and default foreground is slightly darker than white.
* scrolling causes the terminal to scroll into it's scrollback buffer phofimage * double clicking selects text in the terminal, but not in the application itself.
this seems more in line with how i would expect single click and drag or shift + click events to be handled.
title shows, before and after running the program,
only a small number of colors.
an image is attached that shows git bash running that script, then git bash in windows terminal running that script, and finally ubuntu in windows terminal running that script.
git bash shows the colors as expected, as does ubuntu in windows terminal, so it seems reasonable both git bash, and windows terminal support those colors, but somewhere between them, the colors get mangled and do not show properly.
* windows terminal not starting after first ru
an error message is displayed: > [window title] > c: program > > [content] c: program no applicable app licenses found.
windows terminal opens with maximum screen size, but not maximized (see screenshots).
wrong (actual implementation): wrong phofimage correct: correct phofimage
even a small image is being stretched and weirdly positioned.
property window opens and properties have not been changed.
what are the factory defaults?
after restoring the 'use legacy console' to off the terminal window is blank because the terminal colours have not been correctly restored to their previous state - both foreground and background are black.
similarly the cursor color is black rather than inverse colour.
the terminal window content area "flashes".
somewhere along the way an error appears--usually, but not always, after a closing brace (}).
the error is, reported in red text, "oops, something went wrong...report on github: phofurl the issues happens on ps 5.1 and ps 6. pasting the same code in to a non-terminal ps 5.1 works as expected with the same version of psreadline.
terminal screen be white when i open a window and drag it, but when i maximize it, it recover to normal.
in wezterm when using conpty this renders as follows, with a spurious unicode replacement character present before the pig face emoji: phofcode (the replacement character may render as a `?` in wezterm depending on font configuration) wezterm using a direct ssh connection to localhost spawned via `wezterm ssh localhost` (conpty is not involved on the client side, but is on the server sde) also produces the spurious replacement character.
wezterm using an ssh connection to a unix machine, or via unix domain socket to wsl doesn 't have replacement character.
the windows terminal preview renders correctly when run locally, but if you: phofcode you 'll see offending character in windows terminal too.
in the drop down and using the hotkeys what i get is image phofimage which after many experiments appears to be: * first 2 profiles * last 3 profiles for a total of 5 profiles
here 's the stack: phofcode i 'm particularly confused because it 's hitting a `_crtdbgbreak()` in the last frame.
i can select but auto completion menu is displayed ** twice **
terminal closes when moved to a separate display
my bash installation was not conclude, and now neither my terminal is working.
when i try to open cmd, my terminal is completely on back screen.. image phofimage
terminal should continue working without any issues note: on "ubuntu 18.04 lts" app this issue isn 't reproducin
when using the windows terminal to enter a ps session with another host, if the output from that session causes the terminal output to scroll down, upon exiting that ps session and running a "clear" or "clear-host" command will not clear the first portion of output from ps session, equal to number of lines that ps session caused window to scroll down.
empty window frame is drawn, then closes.
this is in _event viewer_ under _windows logs > application_ none faulting application name: windowsterminal.exe, version: time stamp: 0x5daf7ab2 faulting module name: windows.ui.xaml.dll, version: time stamp: exception code: fault offset: faulting process id: 0x2b68 faulting application start time: application path: c: program module path: report id: package full name: package-relative application id: app ``
1. run app from vs (i.e.
ctrl+f5) empty console window vs console window properties - layout: * windows size: width 100 cols and height 26 rows * screen buffer size: width 100 cols and height 26 rows 2. run app from command prompt (i.e.
run cmd) **console window contains text from before the app was run** command prompt console window properties - layout: * windows size: width 100 cols and height 26 rows * screen buffer size: width 100 cols and height ** 9001 ** rows
ui lockups due to 100% gpu
cloud shell does not show up as a profile.
the cursor changes to an international no symbol to indicate that you cannot drop the path onto the terminal window
after releasing the drag&drop operation the window briefly (~1s) seems to be usable, but then it just closes.
after i updated the os, the title bar is now gray under this theme.
the cmd tab hangs and there is no dialog box.
ctrl-c does not recover and the only option i've found to exit this state is to close the tab
caps lock + shift + <num> does not launch a new tab
when i try to open the azure cloud shell, it does not displays the code requested by the azure portal: image phofimage
some terminal control chars `~2` gets printed instead of `copyonselect` text
wsl window will close, or hang.
seems like an issue with (or around)
tab size flickers in response to input in shell.
in other shells, the tab resizes frequently in response to a change in the title text to adapt to the size of it.
it seems like zsh has some way detect a maximum size and truncates it, but not before wsl has rendered the update.
even other shells that don 't flicker, "adaptive" behavior seems very strange; e.g.
when i change directories it resizes tab, causing frequent visual distraction as ux is reorganized each time shell title changes.
i am not sure if this behavior is intentional, but i think having a fixed, consistent tab size is a much better user experience then trying adapt title as it changes.
for example way chrome works is pretty sensible; use larger until there are too many tabs then shrink them all, but each tab should probably always be same -- or at least not change while someone 's actively using shell, as would be common when someone has title that reflects current directory which changes often.
powershell session ends, but tab stays open
extra newlines after each line of copied text.
you are unable to scroll to the current input location without resizing.
the scrollbar also only appears when the lines exceed the initialrows value and ignore the actual window height.
similar to phofurl but that one deals more with scroll bar not working at all more so than scrollbar scrolling to incorrect location / appearing later than expected
cursor seems to go back 1 place and when trying to continue typing the command it ends up in disorder.
funny thing: the terminal doesn 't crash when i have more than one tab open.
a small white line at the bottom of the window image phofimage
there is nothing displayed in bold.
in power saving mode the terminal background turns completely black while other acrylic effects in windows work as they should (like the taskbar).
lines are not wrapping but rather writing over themselves.
the color must be set manually with the `
the logos for all 4 distros were replaced with the standard tux logo tux logos phofimage
removing `startingdirectory` or setting it to `%cd%` still results in launching in `%userprofile%`.
however, setting an explicit path (e.g.
low level output takes 74-76 ms to accomplish, no faster analogs found, buffer size is image phofimage
blue screen on the pc, with a "kmode exception not handled".
i stand at disposal for whatever data might be needed
1 phofimage 2 phofimage !
if i open neovim and i change the window size, neovim view is extended only respect to the horizontal direction.
resizing-shortcut phofimage resizing-no-shortcut phofimage this issue happens only by using windows terminal.
if i use powershell, everything works as expected.
the area where you would expect to see the terminal output is completely blank (black).
not sure how to reproduce this consistently, seems to happen at random.
looks like it can go back to normal after a bit (a minute?)
you are prevented from typing
after restarting windows `fontface` is being ignored: grafik phofimage grafik phofimage
the windows terminal throws a blank error without proper error descritption when a 32-bit executable is tried
it is being interpreted as two commands.
1. resize windows terminal => the number of column or row is not modified, resize event is not fire
vs hangs at 100% cpu then drops to 0% still hung.
selects tenant for first key that is pressed, so you can't select tenant 12, for example, as it will select tenant 1 as soon as you press the 1 key.
only x86 powershell 5.1 shows up in gui
the connection does not receive a message after the buffer resizes.
the user typed character is being combined into the location text modifying the normally un-editable text
looking like this: image phofimage
for a fraction of a second, tons of horizontal and vertical lines, which look like the border of the window at its previous sizes, are painted inside the window area.
this suspiciously looks like some leftover widgets that don 't get properly cleaned up during a resize, potentially consuming various resources (and maybe causing who knows what other problems).
the new tabs are not visible
(windows 10) the program exits, conhost.exe throws an exception and then crashes, causing the terminal window to close.
an adplus log for conhost.exe is attached, but some excerpts:
the acrylic background freezes, distorts and is only rendered once the maximize/minimize animation is completed.
the event does not trigger and no file is created.
note: if you reproduce this in the native powershell 5 or 7-preview.3 console (not the terminal app) you 'll find that the event triggers correctly only when using the `exit` command.
clicking close button also does not trigger event.
although i also reported that at phofurl i believe that with terminal it 's an independent issue
i get an access violation in phofurl
<-- -bash-4.2$ crs can 't find termcap entry for this terminal can 't run crs --!>
funny characters are shown (see
install gets to 89% and then fails with the following message: `error while processing the request, the system failed to register the windows.sharedfonts extension due to following error: the system cannot find file specified.` there is no reference to which file it is looking for.
terminal appears to open with 14 lines off the bottom of the desktop (behind and below the taskbar).
there does not seem to be "initialxpos" nor "initialypos" in settings to manually place terminal in its entirety on the desktop
pressing enter key will issue the command as if there was no selection in progres
the last digit `9` is wiped out by el for no apparent reason since the "delayed eol wrap" state isn 't cleared, the first letter `a` is printed in the next line anyway: abcdef or, at 38 columns: echo 'the quick brown fox jumps over the lazy dog. '
| grep z the quick brown fox jumps over la y dog.
steps 4 and 5 can take very long times to process the keystroke and respond.
sometimes 10, 20, 30 seconds, sometimes immediate.
compare to doing the same process from `cmd.exe` (in its native window), which responds immediately as expected.
[edited to correct eb and ab and add ctrl-c comment]
the `tab` moves the cursor position onto the start of the next line, so the `b` is output below `a`.
this is what test case looks like in windows console: image phofimage
the cursor is displayed in the partial bottom row (although no text is printed here c the next prompt in case of this screenshot).
1.: it prints d: image phofimage 2.: it prints an empty line image phofimage
the titlebar isn 't black: image phofimage
some tabs are invisible, and one tab may be cut off.
see the screenshot; the empty space between the last tab (which is cut off) and the "plus" button contains one invisible tab.
image phofimage resizing window even a little makes tabs appear
terminal randomly crashes, i haven 't found the specific cause.
i do have the event data, though.
pasted line appears text scrolls up.
at this point there is no consistency between cursor and location in the file.
hitting "u" to undo even when at the "already at the oldest change" point removes the text under cursor and scrolls everything up.
leading to multiple copies of vim status line confirms this is a problem even when ssh [-ing] to a remote machine and using vim there not local windows instance as well.
**last known working commit: wed sep 25 2019 -0700** image phofimage screenshot is after simply hitting "u" 6 times.
faulty and inconsistent output, presumably depending on the timing of events.
often the output terminates way too prematurely, e.g.
during the intro or section 1 or 2 of the file.
sometimes succeeding shell prompt isn 't printed either, although shell is already ready to accept a new command.
other times output ends as end of text file, but as you scroll back you 'll notice that a big chunk is missing
windows terminal renders image icon at the end of 1st line small and with big ?
terminal output is blocked, causing the build to be blocked as well.
this means that the build will not proceed until reconnecting the rdp session or logging into the host machine.
true phofimage when showtabsintitlebar is false false phofimage
vs code shows the comment lines with red squiggles under lines like this: image phofimage this is not just a vscode issue though: the file also doesn 't validate in online json validators: phofurl
scrolling up shows previous output.
this repros with both powershel 6.2.3 and 5.2.1. this does not happen with the powershell terminal, which correctly removes all previous output
at some point, adding lines to the buffer after listing files (or anything else), starting from where the cursor is at, the current line gets shifted down by one line.
then near the end of line, remainder of line is displayed correctly.
any typing is displayed on line down and is initially treated as valid input by your shell, but soon, input line starts being displayed twice, or characters don 't show up correctly, and generally becomes visually and functionally almost impossible to use.
i 've also confirmed that not related to any particular shell, commands, or programs.
it 's how terminal 's display handling of that appears to be problem (no pun intended ;-).
images attached show this more clearly.
the first simple file listing from zsh.
the second an example in vim that shows exactly where shift occurs.
the cursor on number that underlined, but insert characters display on next line.
and status bar provides clear range of shift.
it 's not .vimrc or any configuration issue in any program or dotfiles, none those have changed, and vanilla vim and/or nvim show it clearly as well.
the cursor jumps to the end of the current line, further keystrokes wrap on subsequent line, backspace makes a big mess.
when the windows terminal is focused it will randomly start to cause the entire screen (not just the windows terminal) to flicker and tear.
i see the windows terminal window flickering in random parts of screen.
the tears show up as individual lines of pixels just randomly tearing/flickering across random parts of screen
profile is skipped or doesn 't load.
the cursor remains visible and blinking.
it is often misplaced on subsequent operations, though.
press the up arrow, it brings back the previous printf command to the command line.
press the left arrow, cursor doesn 't move.
press backspace, letter `l` is removed (that is, logical cursor did indeed move to left in previous step), cursor now blinks at right edge
when switched back to the normal screen for a short time, sometimes a digit `1` appears in the bottom left corner.
even more interestingly, the number of such `1`s in that row keeps growing, despite the cursor being explicitly moved to row 28 column 1 every time.
(and changing that to column 2 keeps it a digit `1` that appears, so it 's not where it comes from.)
when switched back to alternate screen, sometimes a letter `h` appears at top left.
both artifacts occur me with probability of perhaps 25c50-ish %.
play with timing constant if they don 't want appear you, it might make difference, i 'm not sure
if you start zsh/tmux with a powerline font, all color blocks are shifted slighty: image phofimage if you start with a non-powerline font (e.g.
consolas) the blocks are the correct position: image phofimage applying the powerline font after startup works as it should: image phofimage using wsl without the terminal app works (excpept lacking emoji support) image phofimage
`34h` is printed, suggesting that parsing the sequence got interrupted.
note that if the given number is supported (e.g.
1049 to switch to the alternate screen) then the sequence is parsed and executed correctly even when a delay is injected.
--- update: the same goes for unsupported csi modes too, e.g.
` e[22;0;0t` (save title on stack) or ` e[4l` (replace mode)
the following weirdnesses occur: - a literal ` ` gets printed.
- that ` ` gets printed 6 seconds after starting the command line, rather than 1 second after.
that is, not immediately when received, but when the next character (whether that 's a newline or not) is received.
- subsequent newlines don 't move the cursor to the beginning of line as expected, but walk downwards in second column.
so it seems parser might be stuck in some weird mode??
the bug does not occur if delay is eliminated and unsupported escape sequence is printed in a single step.
it is completely ignored then, as expected.
the bug does not occur with supported escape sequences either, such as setting title with osc 0. it 's immune to injected delays, as expected
it displays weird characters: `_ `
the "should still be underlined" bits aren 't underlined.
note that sgr codes `22`, `27`, `39` and `49` seem to cause this effect, but only if they 're predeced by a `1`, `7`, `30-37` or `40-47`, resp., that is, only if they do actually turn off some other attribute.
also note that if the "should still be underlined" text is made longer so that it overflows to the next line (or even multiple new lines), it 's underlined in the last one of these lines.
this makes it perhaps a reincarnation of
on save deleted profiles come back, and powershell appears even though its not in the settings.
: **maximize window view** : in maximize view of windows terminal, all tabs are displaying in tab layout.in this image i have opened 6 tabs in terminal.
terminal1 phofimage **minimize window view** : but after minimizing the window view of windows terminal.
tab layout is not displaying all the 6 opened tabs.
it is displaying only 3 tabs but actually 6 tabs are opened.it is hiding the remaining which are not able to fit in tab layout.
terminal2 phofimage same behavior getting for maximize windows view also.
terminal fails to start correctly.
app process is created, but terminal window fails to render its content to appears almost entirely transparent.
sometimes, the outer non-client area is visible and draggable which leaves pixel-trash on-screen.
however, terminal does finally appear on-screen after ~2 mins: image phofimage
shows a 1 pixel thin white border on the bottom of the window.
the standard blue powershell theme is still shown
1. select text 2. remove selection 3. clipboard is overwritten with previously selected tex
an extra entry is in the list.
there is no profile 5. what 's strange is that when i launch that bogus profile, it doesn 't look like the one i set up: image phofimage the "real" profile for windows powershell looks like this: image phofimage here 's the profile list as shown by terminal.
terminal crashed with below given windows event log entry: faulting application name: windowsterminal.exe, version: time stamp: faulting module name: terminalcontrol.dll, version: time stamp: exception code: fault offset: faulting process id: 0x1d3c faulting application start time: application path: c: program module path: c: program report id: package full name: package-relative application id: ap
the operations do not work
the lines of the box are not vertically joined image phofimage
"hello" is printed in brightwhite and is hard to see.
(in some color schemes brightwhite is identical to the background color and is completely invisible) it looks like the interpretation of the ansi "bold" sequence simply to render the following text in brightwhite.
this "works" if background dark and foreground light, but it pretty useless when using a light background and dark text.
this impacts all programs that use ansi escape sequences (e.g., "less" pager)
... but they do not.
the problem happens when using standard conhost and also the openconsole.exe version.
**on the contrary**, the square brackets are correctly transmitted to `math` (or `wolframscript`) program **when using mintty from git4windows**.
the line moves one column left.
at least one tab will forget it's focused pane, causing: a) the tab's title to go blank b) the keyboard bindings to stop responding clicking inside the tab's terminal restores the focus, title, and binding responsiveness
depends on the currently active shell.
if it 's powershell or cmd, nothing.
if it 's bash wsl, `";5f"` appears following the prompt: image phofimage (found this issue while testing phofurl nto sure if it 's also related to phofurl or if i 'm just incorrectly stating the shortcut?)
no automation id attributes being picked up via inspect.
no changes to the background color, the text colors do change but powerhshell still remains blue
here 's below what i really see on my screen (when taking a photo of it).
for eg., first line is truncated.
img_2013 232 phofimage *sorry for the image github doesn 't want to turn it anyway but clicking on it shows the photo correctly :)*
i 'm getting the following schema warning: > missing property "name"
i get the following schema warning: > incorrect type.
terminal will not recognize phofcode as a line break and will execute each line individually immediately causing a unexpected results.
the menu is scaled inappropriately image phofimage
windows terminal goes blank and not show the terminal or get any input.
in the windows powershell profile the image is more whitish than in the powershell core profile powershell core profile image phofimage windows powershell profile image phofimage
in the windows console, the movement isn 't constrained by the margins.
as a result, the `cuu` sequences ends up at top of viewport, and `cud` sequences ends up at bottom.
image phofimage note that this isn 't a regression of
the margins are ignored by the windows console, so `cnl` moves all the way to the bottom of the viewport, and `cpl` moves all way to top of viewport.
image phofimage i can 't say for certain that this is wrong, but i think we should probably be trying to match xterm and vte behavior unless there is convincing evidence that they 've got it wrong
space characters are not printed out and make the prompt freeze
powerline arrows are rendered at an incorrect size/location - the branch name text is also similarly reduced, it seems.
npm begins installing packages and then the terminal closes.
no error message or crash feedback is generated, i do however see the error in my event viewer: phofcode
terminal size is smaller than defined: case 1 phofimage case 2 phofimage
scrolling does not function except if one is using a remote desktop session.
windows powershell and powershell core default to no acrylic.
cmd, ubuntu, and azure cloud shell default to use acrylic.
if you edit settings and type "useacrylic" for a profile, vscode (or, i imagine, any software that supports json schema) adds `"useacrylic": false`.
if the default setting is false, then why do some profiles use it by default
error "the data area passed to a system call is too small."
is shown and terminal does not open.
the zone doesn 't light up and it appears as though it 's not registering that i 'm even dragging a window into the zone.
this seems like an issue for here, not the powertoys repo because this is the only app that i 've seen that is having this issue.
as seen below, the server is sent to background (as expected), launches chrome (off screen and as expected), and releases the prompt to foreground.
however, as soon as any command is entered into the `fg` prompt, the background server is killed.
receives "` (i 'm using ` x20` here, because github didn 't like my actual sps :) )
on initial run of the command in step 3, the rightmost character of the last line to contain one is "smeared" down the screen until another rightmost character replaces it, thus: terminal-smear phofimage terminal-smear-2 phofimage when screen is subsequently cleared, all characters displayed in this column remain visible: terminal-smear-clear phofimage thus far, i have only been able to reproduce this behavior inside a tmux session, although it was not observed until latest windows terminal update.
additionally, i was using cascadia code as my terminal font also previous to that upgrade, without problems.
some text in man page are invisible.
image phofimage trying to search `-a` in the man page: image phofimage the default `one half light` scheme: { "name": "one half light", "foreground": "
terminal immediately crashes, you can see the ghost of a window frame before it disappears
occurs 100% of the time following these steps.
i've tried it 6 times and got the crash all 6 times.
i believe this is a regression as this did not occur in the previous version of windows terminal preview.
character not being erased from screen, although it is not still present (i am using cascadia because it felt to me like it might be related; but when i swapped it to consolas still happened.
wt does not generate/add a guid to the new profile, thus there appears to be no way to set your custom profile as the default
the background information is not pasted.
the background of the line is not copied either.
image phofimage the background information is pasted correctly in word.
image phofimage i do not know whether this issue is caused by windows terminal or powerpoint.
if powerpoint the culprit, could you point me towards where i could report this?
thank you, and thanks for the amazing job you guys are doing on this project!
i get the following error message "no previous regular expression".
this does not happen when i run less under a cmd.exe session the old fashioned way.
i can 't type chinese char in terminal by **microsoft pinyin bind in win10 20h1**
the wsl man page seems to use `brightwhite` for highlighted text in man pages.
`brightwhite` remains white in the light themes.
the remaining text has the color `foreground`.
grep manpage with default color schema `one half light`: bug_brightwhite_is_white phofimage grep manpage with modified color schema `one half light` (`brightwhite` set to `
windows terminal crash and close
closes window and crashes back to desktop after printing out stack trace.
the "hi" is printed correctly and the escape sequences are not printed in any form, however the color is not applied.
1. any character on left was deleted and the command characters go to left phofimage
terminal crashes ironically, it's crashing while trying to determine whether azure stuff is in fact installed.
the exact line that's crashing is apparently in a generated file where it calls and unexpectedly gets `error_mod_not_found` going up the stack ultimately leads to this line: phofurl
= $true` does turn off ctrl+c either or `$host.ui.rawui.readkey` is not working correctly
terminal crashes &swapchaindesc, nullptr, &_dxgiswapchain)); tbreak; } `height` is 0 which i assume is an invalid parameter
the terminal keeps using the previously available space, not occupying the extra one.
some screenshots: 1. after maximizing on ubuntu: maximized on ubuntu phofimage 2. after maximizing on cmd: maximized on cmd phofimage _(note the last `dir` output kept going but it was cut midway)_
1. if you `ctrl+tab` to a tab that is not in the list at the top, the tab is still not shown.
there is no way to verify which tab you are on, except based on what was in the window as you left it.
1. the current tab is not highlighted to indicate which current tab.
1. the bar shows a static list of first few items, each at their full width until space runs out.
1. all tabs are shown at full width, even though they are not currently selected tab.
there no ui for accessing full list of all open terminals.
there no way to scroll through list of tabs.
usually down with `<` and `>` buttons appearing when becomes big display fully in bar
nothing happens and the terminal is left with the same options as before.
in my case the default options of cmd, powershell, and azure.
my cursor does not return to vintage but instead keeps the cursor from vim / neovim
loads basic bash.exe and anything sourced in `~/.bashrc` but otherwise, any environment variable not set in `~/.bashrc` is overwritten by windows environment variables.
such as path msys2 `$path` is overridden with windows `%path%`, which while it works, it defeats the purpose of msys2 as many core programs to msys2 (such as `pacman`, `ls`, `nano`, and anything else) are not in path
password prompts will not recieve pasted string correctly.
windows terminal scrolls at least 8+ lines at a time, zipping up the console history at lightspeed.
the smallest scroll increment scrolls at least 8 lines a time, making precise scrolling nigh impossible.
in my mouse/trackpad settings, i've verified that it is set to only scroll 1 line a time with the trackpad.
this is correctly reflected by other terminals (cmd.exe, powershell, etc) scrolling correctly
produces error box failed to load settings setting could not be reloaded from file.
check for syntax errors including trailing commas.
temporarily using the windows terminal default settings.
about box displays windows terminal (dev build) version: 0.0.1.0
build dir tree is still used by running deployed release build app files opened by running "windows terminal.exe" verified by process explorer.
not sure why it does this, but it shouldn 't
on 125% zoom, the same window now looks like this (tiny black horizontal marks between what should be contiguous lines of text all colored blue).
image phofimage at 150% scale, we have a similar issue, though now instead of every line being affected, every other line has the horizontal artifact.
image phofimage 175%, and 225% zoom seem to have the same artifact line pattern as 125% 200% zoom has no artifact.
this looks similar to the artifact reported by @shanselman in phofurl
eventually the process will crash.
if running a debug build, you will get an assert dialog (abort, retry, ignore) and if you attach a debugger and press retry you will see the crash is in renderer.cpp at line 642: > stack_text: > faulting_source_file: enderer base enderer.cpp > 642 > symbol_name:
the actual behavior is that i get permission denied when connecting to the docker daemon
m-> does not move to the end of the file.
m-< does not move to the beginning of the file.
c-h k m-> displays m-.
c-h k m-< displays m-, as command run.
actually, when i change the display focus, the terminal opacity is disabled.
this recorded video capture phofhyperlink tries to illustrate the behavior.
at second 00:07 i click on the other display that leads to opacity losing.
when i click again on second display with open terminal, opacity is enabled
my suspicion is that the windows terminal is counting the ansi characters when drawing the text, but at the same time correctly interpreting escape sequences and changing text.
the row you are on is not highlighted.
you must click on the first character of the row, not to the left of it.
this requires for more precise highlighting to avoid missing what you want to copy and is far slower.
dragging moves the scrollbar but doesn't scroll the terminal.
also the scrollbar sometimes changes size when i start dragging it.
moving the scrollbar completely to bottom and releasing it makes scrolling work again.
ctrl+c is instead just the typical cancel and new line.
pressing alt+backspace then pressing enter inputs an escape sequence that would be expected from alt+enter, which bash silently ignores by default.
to see this more visibly, run `bind -x \'" e ":"echo whoops" \'` then repeat the above steps.
now, `whoops` will be printed, since the above steps will input the escape sequence for alt+enter (` e `).
* cmd cmd phofimage * pwsh pwsh phofimage * windows powershell windowspowershell phofimage
as soon as the selection period is over, the terminal hangs for 1-2 seconds with a spinning cursor, then crashes.
no text is copied to the clipboard **also, here is the feedback hub posting:** phofurl
pasting into notepad pastes the full selected plain text.
pasting into an html-capable app (in this case the mail client) shows that entity-escaping hasn't been done correctly: image phofimage
when hovering with the mouse pointer, the box doesn't change color as it should.
when clicking the box, the content is not changed.
this behavior works on wsl (win+r + `wsl.exe -d ubuntu-18.04`) here's a gif with raw wsl and windows terminal running wsl side by side that compares behavior 7fts1bqfwm phofimage
: if the line wraps, the altered background color inexplicably shows up after the end of the content, to end of line.
note: this image is of the left side of the terminal.
the black bar is the boundary between monitors.
the up arrow does nothing, even if the r history is in an expected state as showed by the `history()` function.
this bug occurs only in "windows based" terminal, such as powershell and cmd, executed by windows terminal.
this bug does not exist if r is run inside the * old * terminal.
this bug does not exist either if r is running inside a ssh session inside powershell.
windows terminal -> powershell -> r -> bug windows terminal -> cmd-> bug windows terminal wsl ubuntu 18.04 bug old terminal powershell no bug old terminal cmd no terminal powershell ssh into a linux host no
- the cursor stays at the end of the line, although the internal position is updated and new text appears at line start.
- when i delete text using backspace or delete, the cursor jumps to correct position, but jumps back to end of line when new text is entered.
it seems that mingw emacs and msys2 bash don 't play well in windows terminal -- in classic windows console there is no issue.
this might be related to
when we start with profile a, there will be no delay.
however, when opening profile b we see the background is gray for small moment of time.
afterwards, the image loads normally.
if we switch between tabs every 1.5 seconds(ish) when going from a to b the image has a delay loading.
but if switch quickly there will be no delay.
i will add a gif showing the result happening.
i 'll also add both of background images i 'm using.
space phofimage this is image for profile a. sshspace2 phofimage this is image for profile b. phofimage the issue in action
the fancyzone does not react.
it just seems to be that i am dragging the window without holding down shift key
looking in task manager, windowsterminal.exe does not seem to load.
this was not built, this was the preview through the store
terminal becomes unresponsive for a second, then disappears.
in the first tab, something like this is seen: 98810 98811 98812 98813 98814 98815 x1b]0;cmd - echo abcdefghiz 98816 98817 98818 98819 98820 98821 98822 98823 98824 98825
the vertical extent of the affected area seems to be determined by the decstbm margins rather than the _cliprect_, and the viewport content is actually moved up by 1 line instead of down by 4. image phofimage i could possibly imagine it was intentional for decstbm margins to have an affect if it wasn 't for fact that scroll direction was backwards.
so i 'm almost certain that this is not intended behavior.
as i mentioned in issue
in the windows console, the line feeds cause the viewport to scroll up, just as they would if there were no margins set, so the "bottom line?"
actually ends up 3 lines from bottom, and top line has scrolled out of view.
tab title still shows current directory.
installer window appears but hangs at: image phofimage there is no commentary to say why it has hung.
the pc is behind a corporate proxy server.
terminal v.0.3 previously installed successfully using github asset in similar environment
the terminal will not start when using rdp to connect to my laptop.
it brings up the outline, then crashes (eventvwr log below).
it will also crash if i try to close a tab or open a tab.
general use, like switching tabs or generally interacting with the window (resizing, maximising, etc.)
this is reproducible 100% of the time.
it never fails to open when i 'm physically on the device, but it is intermittent if i can then switch rdp and continue use it.
most colors look nice and similar but "darkblue" looks completely different and way worse.
image phofimage to get a somewhat similar color you need to set blue (darkblue) to something like `"blue" : "
getting the following series of statements as arguments for the cmd.exe and closing immediately.
1. mode 20.5 2. tasklist /f1 "imagename eq soundmixer.exe" 3. find /i /n "soundmixer.exe" 4. start /min "" 5. tasklist /fi "image name eq explorer.exe" 6. find /i /n "explorer.exe"
- after maximizing the window and running `ps` the buffer size setted with the `initialrows` value doesn 't get updated after the window size changes.
image phofimage image phofimage - the problem gets solved if i open a new tab and run command again.
terminal terminates this would sound like a perfect dupe of
on an ssh connection, paste the text on the screen tab position incorrectl
scrolling behavior is different depending on the mouse position.
in some areas, it scrolls properly.
in other regions, scrolling won't work.
- if scaling is 100%, then scrolling works properly.
if scroll inactive window setting is on, then scrolling works properly.
- same issue for both normal and non client window scroll-region phofimage heres what i think is happening: with `scroll inactive window` off, the wm_mousewheel messages are only be sent to current focused window (if i've read the docs correctly).
i think that the window that takes focus not scaled properly so in some areas mouse 'outside' and won't receive mouse wheel messages (maybe it needs to be focused and hovered?).
terminal does have a couple windows (the host and xaml island ones) but i'm not sure which one takes focus when terminal active.
i tried checking for wm_mousewheel in procs but i could not see message being sent.
have my suspicions that it's top level that supposed to be receiving messages because using spy++, when highlighted top level window, its size also matched area where scrolling works.
but visually, everything seems to be scaled properly so i'm not too sure now.
having an error 3 times : exception non gr: l 'index se trouve en dehors des limites du tableau.
args) permission denied, please try again.
exception non gr: l 'index se trouve en dehors des limites du tableau.
args) permission denied, please try again.
exception non gr: l 'index se trouve en dehors des limites du tableau.
can scroll using mouse or touchpad without wt which opening by `ctrl + r` then `powshell` or `cmd` or `bash`.
can't scroll using mouse or touchpad with wt but scroll bar works.
the text of the message, including the code required for input at url, is cutoff and no way to get the terminal to repaint/provide the code again.
only solution is to increase width of window and open another tab to get code.
is it possible apply a wordwrap that initial message?
site responds with "that code didn 't work.
check the code and try again."
after open windows terminal (dev build), windows defender detect a suspicious behavior, and block the execution windows defender message: alert level: severe status: quarantined date: category: suspicious behavior details: this program is dangerous and executes commands from attacker affected items: file: appmodel: file: c: users odoa source note: i compiled and deployed 8 hours ago and it ran fine, but i opened it (from start menu) again a few minutes ago w.d.
it looks like the tabs aren't being repainted.
see the following video (zipped as mp4 is not supported): wt-tab-scroll.zip phofhyperlink
i'm somehow expected to know the uuid change (`wsl.exe --list` does not show the uuids).
---- another bug report claims that behavior for non-existent profiles would be handled gracefully in 0.4. can't confirm that
far manager just opens folder in the windows terminal as if you would press without `shift` key.
in powershell, cmd, cmder far manager works as expected
- cursor is displayed before last printed character, not after - cursor does not moves when left or right buttons are pressed (just not displayed, internal position gets updated) p.s.
as i get it, it has something to do with the way far clears and redraw the screen or with the way commands are executed in far, but i have no ways to localize that bug in windows terminal or in far.
at least same version of far works ok in plain cmd.exe or conemu
the installation fails with the following error: phofcode full logfile: phofurl
if i remap menucomplete to tab it works, otherwise it doesn '
it crashes, with the error `file system error (12029).`
in the windows console, though, the underline and reverse video attributes _are_ applied, so the screen is filled with the yellow foreground color rather than red background color, and every character on screen also has a red underline.
no alignment or sizing - displaying in the top left corner.
both commands are ignored, because they 're executed above the top of the scroll margins.
now i can 't say for sure that this is the wrong behavior.
the vt510 documentation says that both `ich` phofhyperlink and `dch` phofhyperlink have "no effect outside the scrolling margins", but it 's possible they were referring only to horizontal margins in that particular context.
if you look at dec std 070 manual, wording is a lot clearer: "if active position is outside left or right margins, this control is ignored."
however, just to confuse things some more, dec std 070 manual also provides a kind of pseudo code algorithm for each command, and algorithm for `ich` seems to suggest that it limited by both horizontal and vertical margins, while `dch` only affected by horizontal margins.
i suspect might just be a bug in `ich` algorithm, but who knows.
bottom line: documentation isn 't particularly clear about this, but i do know we don 't currently match xterm 's behavior
in the first test, the second "orange" line is a shade of yellow rather than orange (the exact color will likely depend on your palette).
in the second test, the second "reverse" line is not actually reversed - it 's white on blue instead of blue on white.
the wsl distro not appear in the profiles list
the cursor remains in column 10 after the insert, so the text appears in the wrong location: image phofimage the dl (delete line) escape sequence has the exact same problem.
it should move cursor back to left margin, but in windows console it doesn 't
store allows me to install, attempting to run terminal results in immediate crash to desktop.
no window is ever created as far as i can tell and no error message is returned
the linux tab closes immediately without even properly logging out of the ssh session.
the cursor is stuck at the end of the line.
i tested this behavior in other repls such as node, and python and this was not an issue.
i then tested this behavior in other shells cmd and powershell (not in windows terminal) and this behavior was not reproducible.
did some further testing noticed issue is a problem both in powershell command when i start them windows terminal, but it is not an issue when i run wsl windows terminal.
the cursor is stuck at the end of the line.
i tested this behavior in other repls such as node, and python and this was not an issue.
i then tested this behavior in other shells cmd and powershell (not in windows terminal) and this behavior was not reproducible.
a thin line is rendered after every other line.
this happens only at size 11. both smaller sizes (8, 9, 10 tested) and bigger (12, 13, 14, 15 tested) are fine.
size 11 is fine in hyper.js and also in wsltty.
it sends `c` and `v`
terminal doesn 't show up any error message, just shuts down.
* only the gif background of the default terminal plays, all the others play for few seconds and become still images.
menu stays on position it was opened while window moves in the background
maven does not run because it is not found in path close terminal (all tabs and windows) start up terminal again run `mvn` works again
the test file does not run at all, with error == (lines manually wrapped): phofcode creating the etw log and parsing it with windows ' built-in `tracerpt.exe` tool yields a number of interesting errors.
as best as i can tell from my very limited knowledge, there was a problem with the appx package extensions (&lt;extension&gt; elements in appxmanifest.xml).
<event xmlns=" phofurl <system> <provider /> <eventid>0</eventid> <version>0</version> <level>2</level> <task>0</task> <opcode>0</opcode> <keywords>0x0</keywords> <timecreated /> <execution processid="8272" threadid="11028" processorid="0" kerneltime="315" usertime="405" /> <channel /> <computer </system> <eventdata> <data <data <data name="line"> 221</data> <data 11028</data> 1</data> </eventdata> <renderinginfo culture="en-us"> </renderinginfo> </event> ``
when i open the windows terminal app, it opens and crashes almost instantly, as i show in this tweet: phofurl i looked at the windows logs and doesn 't seems to show any error
see screen shot and additional square characters: image phofimage
the vertical scrollbar remains, fully or partially obscuring the last column of text characters (depending on font/size?).
screenshot phofimage the obscuring behavior can be seen on the longer lines in the screenshot
the default shell is opened in the new pane
* configurations get shared between devices * it is also not predictable when the configuration gets updated from the other device
`container id` is printed in the console and then the terminal window closes.
text appears in blank space.
screenshots of process: pane-text-1 phofimage pane-text-2 phofimage pane-text-3 phofimage
visual studio as jit debugger is triggered and reports this unhandled exception of pwsh.exe: "cannot read keys when either application does not have a console or when console input has been redirected.
the new lines keep the original background color instead of keeping the blue background with black text.
it's worth noting that _the parts of the lines that cmd.exe prints (such as the prompt) are formatted correctly - blue bg with black fg_
windows seems to think the file doesn 't exist, even though it 's quite visible in the file explorer.
wt-error phofimage the windows "settings -> apps" dialog is unable to open advanced options for the windows terminal (preview) app.
attempting this causes the settings app to crash.
it is also unable to uninstall app.
the windows store app is unable uninstall, launch, or reinstall windows terminal (preview).
the installation failure only leaves a very generic message in system event log: phofcode if i try launch terminal (preview) by clicking icon on taskbar, desktop, or start menu, application event log receives following event: phofcode i have verified on other computers, that running `wt.exe` from localappdata directory does work as expected.
i have tried removing profiles.json file, which has enabled me work past previous "crash on start up" issues, but it didn 't work this time.
attempting run `c: program by hand from a terminal simply results in an access denied error.
after typing `ctrl + v` only `v` is showing.
windows prompts for administrator privileges but the batch script never executes, because windows does not escape the ampersand in the current working directory correctly.
the interesting thing here is we are relying on the current working directory to pass full path to `elevate.bat` script.
this leaves all escaping to windows.
if full path to these files has no ampersand, i.e.
`qa` instead of `q&a`, everything will work.
but, if full path includes an ampersand, windows itself won 't escape ampersand when shellexecute expands path elevate.bat.
this can also be reproduced using a powershell start-process script, making me think it 's something common both.
we found this while working through phofurl
the settings file is rewritten and reformatted, and, worse of all, an annoying trailing space is added to the end of every json key.
see image bellow: codesettingsfile phofimage
no scroll bar ps phofimage
-the files name appears as: harmless_file exe.txt screenshot comparing windows terminal, conhost and file explorer: phofimage
the overlay does not resize with the window.
when pressing ctrl+w anywhere within windows terminal, it closes the active tab.
this behavior effectively prevents the use of nano's search feature.
i cannot write korean text to the terminal
newlines are preserved when copying multi-line output.
applications are launched they no longer are preserved and pasted output ends up on a single line.
terminal crashes, bringing all other tabs with it.
when a customized `tabtitle` is specified, it cannot be overwriten or changed from within the shell.
after scrolling only empty space is visible instead of the tabs see attached screenshot with empty tab bar empty tab bar phofimage
my shortcuts for copy (ctrl+insert) and paste (shift+insert) keep on disappearing.
terminal window is opening, but is positioned offset to the lower-right from what is expected.
this requires an extra keystroke or mouse movement to maximize the window properly, which is a real show-stopper for terminal dandies like myself who thing you should be able to hit your keyboard shortcut to launch your terminal and then immediately start using it.
when released the editor continues to move for 5-7 lines of text.
- the about dialog only disables a rectangle based on the original window size.
this can lead to behavior where the user opens a new tab and regains focus onto the terminal
in dark mode the pane separator is hard to see due to low contrast with surrounding background.
example: image phofimage in comparison, in light mode the separator is very visible: image phofimage ideally, the color of the separator should take into consideration surrounding background in order to show up with enough contrast to be visible in any combination.
exceptionaddress: exceptioncode: (access violation) exceptionflags: numberparameters: 2 parameter[0]: parameter[1]: attempt to execute non-executable address
after some time, the azure cli commands will failed with the following error : phofcode executig several times the same commands ( phofcode for instance) won't change anything.
however the azure cloud shell is opened in browser (shell.azure.com) same command will work and executing azure cli commands will start working again in azure cloud shell of windows terminal.
using windows terminal there is no scrollbar and using the scroll wheel does not do anything either.
hovering over where the scroll bar should be makes it appear, but there is no actual bar, only up and down arrows.
image phofimage image phofimage (by the way, if anyone knows what's up with that pepi memory leak you'd be my hero but that's another story, i guess.
1. at the powershell prompt, type $psversiontable, and press enter.
phofimage 2. type "dir" and check the cursor position.
phofimage 3. type "exit" and press enter to exit powershell.
(not possible) at this moment, after a few minutes, azure shell seems to freeze, forcing the manual terminate the session
unable to install packages i remember wsl having issues with windows firewall so i tried disabling firewall but no dice.
i get a quick flash of a terminal window - it is not blank (as reported elsewhere).
it is a quick flash and then immediately it terminates.
nothing on the taskbar, nothing in the process list, no error messages, etc.
* there is no ** x ** to close the tab available.
it is truncated along with the window title.
true phofimage when showtabsintitlebar is false false phofimage
only the screen is cleared.
a single line is generated with spaces so that it looks like they are different lines.
the app crashes when i use the latest code of
the window is reverting the background color.
the ris escape sequence doesn 't work at all when there isn 't anything in the scrollback.
and when it does work, it clears the display with the wrong color, and doesn 't completely erase the scrollback buffer.
image phofimage `sl` works on its own but when piped through `lolcat`, i only see hundreds of lines of colorful gibberish scrolling by.
crash it doesn't happen with the last tab -- the last tab disappears too quickly to hit it again.
with tabs that aren't the last, the hit looks like it goes to tab that slides over, but it's not ready for it?
the uac prompt calls it "unknown program" rather than "windows terminal".
however, it 's detected as a signed application and the icon is shown correctly.
screenshot of uac prompt phofimage
ctrl c cancels, potentially terminating foreground jobs.
this makes sense from a terminal point of view, but windows users are used to hitting ctrl c to copy text.
that there is some text selected is a good indication that the user wishes to copy, not to cancel.
the values still * work * , technically, but they are not what the user specified.
a failure to properly re-encode will lose data.
better to leave the original values untouched.
related: if i omit a profile guid, why add one to the file?
pick one on load and use it internally, but unless it 's getting referenced elsewhere in the file, why have it at all?
you get an error message: > at line:2 char:47 + where-object { $_.driveletter.length -gt 0 } | + ~ an empty pipe element is not allowed.
+ categoryinfo : parsererror: (:) [], + fullyqualifiederrorid : emptypipeelement
no background image shown, bad characters, great sadness.
... given the rash of other character issues, i think it 's a failure to interpret utf-8, perhaps?
... further investigation showed that switching the encoding of the file in vs would fix the tab issue, but terminal would rewrite background image paths with uxxxx codes which i 'd have to re-type
typing performance will be horrible until the image has been scrolled off the screen.
bad enough that typing will have 1 second of lag.
nothing happens, nothing shows up, not even prints of weird character codes.
an error pops out telling me that "powershell has stopped working" as in the screenshot.
"standard" powershell works just fine.
<img width="265" alt="powershell has stopped working error in terminal" src=" phofurl
keyboard-entered input (cursor) is initially repositioned at row 0, column 0 regardless of where the prompt positions the cursor.
last line is always blank - acts as if there's some kind of invisible window chrome here for example, in both the below images, the output extends past the bottom of the window (i.e.
scrolling reveals more output below what is currently shown) the first is in wsl terminal, and uses all lines within window.
the second is in windows terminal, last line blank; this occurs for all shells within this terminal.
(note that while it not readily apparent from screen shots, there are actually further files in directory listing output than are shown so last line should actually display next file list) image phofimage !
moves promt to top of the screen, and clears what is currently displayed on the screen without putting it in the scrollback
the drop-down menu stays open
** terminal ** crashes with no error message.
the **windows problem report** lists the following detail: none description faulting application path: tc: program problem signature problem event name: tmoappcrash package full application name: tpraid:app application application fault module fault module fault module exception exception os locale id: t2057 additional information 1: t17fc additional information additional information 3: tdf83 additional information ``
the terminal starting directory always use the `startingdirectory` value in the settings instead of the current directory.
i captured traffic with fiddler4.
the oauth api returns 400 error code like below.
the api says `aadsts70016: pending end-user authorization.`.
i don 't know what causes the error after authentication is complete, but authentication fails as shown in the attached screenshot.
if there are any conditions or circumstances that prevent the device from logging in, it may be necessary to provide guidance on how to respond appropriately.
request phofcode response: pending end-user authorization.
trace id: correlation id: timestamp: ``
** powershell ** - most of the time, wt stops responding and interacting with it shows the "windowsterminal.exe is not responding" modal **cmd / wsl** - wt stops responding for about 1 second and then exits (also happens for powershell sometimes)
the windows terminal title bar color stays the same after the settings app dark/light mode change.
i have to restart the app in order for the terminal title bar to obey settings change.
(not talking about accent color, by way)
expected behavior is line-drawing characters, as seen in console on the right.
actual behavior is all such characters rendering as "underline", as seen in terminal on the left.
the first line is run and the second put in a new prompt afterwards.
the second prompt is awaiting further input.
default `cmd` profile in terminal with clink phofhyperlink setup to autorun, terminal fails to exit properly and runs in background even after closing.
* terminal with clink autorun setup and running normally: image phofimage * terminal closed normally (ui close button), still running: image phofimage when the command `exit` is used, the terminal exits without the above problem
this window got blank and can't be input image phofimage
login text which talks about logging into visual studio cod
the terminal turns white, all tabs and buttons become disabled.
the terminal still can be dragged and resized.
maximizing the terminal window restores it back to normal.
there is a significant lag between the primary window movement and child windows ( such as option menu)
chinese characters turn into smaller size if i type english above the line.
it crashes immediately probably related:
no scrolling of the part after the cursor happens, instead the line following the line cursor was in is replaced with part of line cursor resides in and cursor (correctly) moves down to beginning of next line.
you see phofcode and position is (correctly) before 'n' character of 'ne2'.
note, that this **behavior is different from
no scrolling of the part after the cursor happens, instead the line the cursor was in is cleared (becomes empty, not disappear), and cursor (correctly) moves down to beginning of next line.
you see phofcode and cursor position is at beginning of line3.
**note that after saving file, expected behavior is what correctly happens to file data, only display behavior is incorrect.
the app essentially stops responding.
it will return to normal eventually, but how long that takes depends on the speed of your computer and how full the scrollback was to start with.
this might be a duplicate of one of the other freeze-on-exit bugs (e.g.
the blank lines are black rather than red.
however, if you scroll down to the very end of the buffer, you 'll see the 4 red lines there instead.
i believe the problem is that call to `scrollregion` should have been passed a clip rect matching window/viewport, but instead was given a rect encompassing full buffer size.
in this case, offending code is in function, which calls `scrollregion` function via method: phofurl
when a new windows terminal window is opened, the `profiles.json` file is re-written, restoring the original formatting, and in some cases changing setting values.
in my settings, i had a profile's `acrylicopacity` value set to `0.9`; after windows terminal reflows the settings, the same value has changed to
- get following message > could not connect to azure.
you may not have internet or the server might be down.
opening up fiddler, the request is failing, here is the request phofcode and response phofcode looks like no client_ id is being set in code.
do you need to set this somewhere
- get following message > could not connect to azure.
you may not have internet or the server might be down.
opening up fiddler, the request is failing, here is the request phofcode and response phofcode looks like no client_ id is being set in code.
do you need to set this somewhere
pscore attempts to load its profile from and fails because it tries to find it on the d: drive, which doesn't contain that file.
the same steps do not repro for classic powershell.
it loads its profile correctly when set to start on a different drive.
here is the error: c: program files (x86) microsoft visual error msb3272: there was a problem reading the implementation file "unable to read beyond the end of the stream."
image phofimage the color is taken form the first copied cell, `x` in this example.
the terminal window resizes about 20 pixels outside the display area when maximized on the smaller display.
maybe its a little bit more on the left side.
app immediately exits without any error messages when tab with this font is opened.
if it 's the default profile, the app doesn 't even start.
same with other iosevka nerd fonts (iosevka term, iosevka mono)
terminal crashes (without any error message
no graph is produced, although, when calling `plt.plot(...)`, a memory location is displayed, indicating that a plot was initialized, but `plt.show()` does not actually create a window for viewing the plot
the terminal stops responding and then the typical windows messagebox for annotation phofimage unresponding apps will show
the background color ends after the text.
it says "nvidia-smi cannot be found, but can be installed with nvidia-340" afer i run nvidia-340, it displays "/usr/bin/dpkg returned error code"
it starts to flash in random intervals
it seems that for every key press i get a pair of debug messages similar to this: (caller: returnhr(19) tid(2c6c) (caller: returnhr(20) tid(2c6c) as far as i can make out, the issue is that `_dogetconsoleinput` method can successfully return either a `status_success` or a `console_status_wait`, but the latter is considered an error by the `return_ntstatus` macro, so it's logged in the debug output.
i guess it's possible that's intentional, but i suspect it's more likely an oversight.
if it's an expected outcome, wouldn't think you'd want to keep flooding logs with those messages.
it makes it difficult to spot any real errors, and probably not helping performance.
app frame shows for a second, then crashes.
does not repro for non-administrator launch.
i get an 80x37 terminal, with extra blank horizontal space after the last usable column: image phofimage
a continuable exception is thrown, see the screen-capture below.
image phofimage improved stack-trace: phofcode
the font fallback doesn 't work and you just see a question mark error glyph.
i believe this is a regression caused by the windows 8.1 version check introduced in pr
a closed tab, a delay, and than closing of windows terminal
image phofimage i know this is a minor nit, but it should be an easy fix, and i'd be happy to provide a pr for it.
it's just a matter of replacing [two characters in the translation table]( phofurl
right now in its current state the terminal uses very high resources while doing cmatrix, which is about 30% cpu usage or more _(depending on the size of the terminal)_. which is higher than the number i saw with older versions of terminal _about 20-ish_ it visibly lags while doing normal tasks like installing a package or any task where lots of lines update quickly, which kind of frustrating.
a little bit but still.
in case crashing ** the entire terminal ** after trying to close tab, i never did any serious task while executing "cmatrix" but that could end up very bad as entire terminal crashes.
here is one multiple times it crashed.
uac prompt appears and the border of a window is displayed but the process hangs at that point.
i have to kill the process with task manager.
you have to know to delete the "background" element from the profiles, and only then will color schemes ' background color take effect
ubuntu is not on the list and had to add it to `profiles.json` manually
it will open the window/tab empty and than, it close it; with no clue of what append
terminal starts, and right after start it closes (like when commandline argument is not able to open - there is no problem for profiles.json)
tapping the titlebar does not dismiss it, and if you drag the window, the flyout lags in moving to the correct position image phofimage
this does not happen on the local host, just over ssh to another.
the xtpushsgr and xtpopsgr sequences have been moved to the beginning of the string!
my first thought was that powershell must be doing something funny, but i attached windbg to the powershell and set a breakpoint on kernel32!writeconsolew, and the string passed in there is correct.
so something is happening after string has left powershell 's hands.
visible sparse interline gap: !
sometimes the tab takes awhile (like, multiple seconds) to obey your "close" command via `ctrl+w` when this happens, the human gets frustrated, and presses it multiple times, resulting in terminal being entirely closed after a few seconds.
this makes for a ** terrible ** first user experience.
i couldn 't reproduce it every time, but it happened the first two times i opened the terminal, which was all it took to give me a bad first impression.
fyi, i tried to run this code, but not reproduce.
caret is placing in a clicked place but farmanager doesn't take any action.
terminal intercepts the key combination but does nothing.
checked configuration but didn't find how to disable this key binding from the config file.
terminal is detached and not kille
- the hollow terminal window blinks for a moment and closes.
**the terminal works in elevated mode**, though.
event log faulting application name: windowsterminal.exe, version: time stamp: 0x5d1bd2d0 faulting module name: terminalapp.dll, version: time stamp: exception code: fault offset: faulting process id: 0x377c faulting application start time: application path: c: program module path: c: program report id: package full name: package-relative application id: app ``
what actually happens in the windows terminal is the _hello_ is displayed on the following line.
image phofimage i don't have a good understanding of how the conpty stuff works, but my theory is that escape sequences aren't actually being processed initially, and are just written out to screen as literal characters.
as a result _hello_ is forced to wrap onto next line, because there isn't enough space remaining.
this screen structure then passed through conpty somehow, at which point escape sequences are processed and text colors changed.
but by that stage wrapping has already taken effect, so text in wrong place.
it's easier to see what's going on if you apply pr
i am probably just overlooking something, but i 'd love to find an explanation for this.
it is rendered as if had typed `12313`, but only on the promt, not in error messages image phofimage
the output ends at the null character, and the `after` part of the string is not displayed.
image phofimage sometimes i don 't even see the following command prompt - i assume it depends on how much content is buffered before it 's output.
i can 't reproduce this in released version of windows terminal, though - it only happens for me with a locally built version.
but looking at code in debugger, i can see why it is failing, so i 'm really confused why it would ever work.
if you look at method, there 's a lambda expression which takes terminal output, in form of an `hstring`, and passes on to `terminal::write` method, which expects a `wstring_view`.
capture phofimage capture2 phofimage text is displayed with blurry and aliased font.
topbar size has increased, but tab does not appear.
if close one tab, or increase window size.
on two tab added, topbar size has increased, but tab does not appear.
image phofimage increase window size, then tab apeear.
the credential dialog appears and can be dragged around, but no buttons or input fields on it are responsive.
it also blocks the rest of the terminal, requiring me to kill and restart the entire terminal.
this happens even when launching terminal as admin.
other gui dialogs (show-command) work as expected, but i haven't tried with any other blocking dialogs
cursor "stucks" in the symbol: image phofimage
esc does not modify the behavior of the key
the program pauses, ostensibly to allow copy/paste behavior to work, and if i hit enter it continues running.
there is no way to capture ctrl+c
screenshot belows show what it looks like: <img width="219" alt="bug-report-1" src=" phofurl
screenshot belows show what it looks like: image phofimage
screenshot belows show what it looks like: image phofimage
as soon as the drag covers or starts at chinese character, the terminal crashes.
image phofimage (dragging over the dual-width `` character)
screenshot belows show what it looks like: some of the tabs are expanded while others are not.
image phofimage cleared remaining tabs and only left with collapsed tab, it does not expand every tab but the last tab.
screenshot belows show what it looks like: <img width="825" alt="bug-report-1" src=" phofurl !
windows terminal has a zero-width window border in defiance of the system theme, making it nearly impossible to resize.
when i move it from a screen to a screen it goes full screen.
when moving it from a screen to a screen the terminal crashes.
icon has no shadow also i think it's a bit too small?
or maybe the yourphone one is the outlier here, i actually like the size of that one way better
utf-8 partials result in corrupted text.
a discussion about this already began in
by typing "path" with a cmd terminal or "$env:path" with powershell, the path entry with spaces disappeared.
the character below where you clicked to copy that was accidentally selected is pasted
the window title bar area not covered by tabs is black: image phofimage also, not a fan on the rounded corners.
every other window on my system uses my accent color (and ** not ** rounded corners) e.g.
: file explorer: image phofimage notepad: image phofimage you get the idea.
the maximized windows causes notifications to be in silent mode (without notification) and does not get out of silent mode even passing to another application.
this is possible related to the unable access tothe task bar issu
the "alt gr" keys are not working on a danish keyboard.
when presing "alt gr" it just is like no "alt gr" the shift and normal keys are working.
the location of the changes.
the display of the text is weird if you type something.
input field is skipped with the error "authentication token manipulation error" and the password is unable to be changed.
note: on the same machine, this process works on the standard wsl bash terminal.
`alt-shift-,` emit `alt-,` `alt-shift-.` emit `alt-.`
the shell is being started as if no launch argument had been passed.
- terminal rewrites `fi` to a phone icon.
windows terminal works fine with the settings loaded from the created symlink, but when i modify the file content, it won't trigger any reload of the terminal app.
i have to close and relaunch app in order to apply modified settings.
screenshot belows show what it looks like: <img width="832" alt="bug-report-1" src=" phofurl
screenshot belows show what it looks like: <img width="960" alt="bug-report-1" src=" phofurl
repeatedly, i see the following error message: image phofimage
nothing happens more information: i have visual studio installed as well.
if i change the settings so visual studio is the default handler for json file it works, also notepad.
if select gvim from the selection list i can open json files in explorer just fine but trying to open the settings in terminal does not work.
to be honest i am not sure if this is a terminal or vim issue but since terminal is first application see this behavior filled bug here.
if the binding is disabled, i get `2~` when this key combination is pressed.
no ability to configure terminal preview.
screenshot belows show what it looks like: first image and second image does not differ from one another, although the acrylicopacity has changed.
screenshot belows show what it looks like: <img width="960" alt="bug-report-1" src=" phofurl
get a popup about severe trojan from conhost.exe which was compiled from source.
powershell core 6 is missing from there.
the symbol displayed is the one that should have if the "alt gr" key wasn 't pressed.
| char wanted | key(s) pressed | char displayed | ----------- -------------- -------------- " " " ' ' ' ( ( ( - - - _ _ _ ) ) ) = = = $ $ $ - ~ alt gr +
the cursor continues to blink.
i tested before and after phofurl and it seems like the issue started with that commit
when y try execute windows terminal only show the border of application and then crash.
i get the dump from event viewer and the problem is the module msctf.dll.
the dump is this: image phofimage
terminal overflows and leftmost characters not showing.
--------------------- it crashes, without any warning
for error (1): a dialogue window asking "how i would like to open this file" appears.
- error (1) screenshot phofimage for error (2) - nothing happens
tab isn't being clicked because there are space on top of the tab.
this is bad ux in my opinion.
space above tab should be removed and should be occupied by the tab all the way to the top.
1) point mouse cursor over the scrollable amount of tabs.
2) use horizontal scroll wheel (second wheel) on the mouse.
the other bug i found is that i can 't copy paste something.
normally, with quick edit enable you do select the text + "enter" or right click on the window title copy.
it was so fast that i didn 't see any word in it earlier, i think it is just like
window resize does not use full window for output
it used to be very smooth.
if i press shift+option+ l to display the pipeline character, i get just "l" on the screen console.
- when wsl ubuntu is the only tab open: - window shows up in taskbar for a second, and then terminal crashes and that window closes.
- when another tab is also open: - wsl ubuntu tab just closes.
the other tab remains open.
the terminal crashes and stop workin
windows terminal scenario is noticeably slower.
windows terminal blinks with artifacts (mostly ``|``) on each scroll step when you press and hold up/down key.
tested the same with mc in local bash session.
less artifacts and a bit improved speed but still noticable slowdown.
seems related but not duplicate of
opens cmd outside of terminal in cmd standalone window.
in general i was trying to figure out how to open a terminal window from the command line in alternate creds and couldn't sort it out.
i got access denied when trying to launch.
something i regularly do is use runas /netonly or cpau (www.joeware.net) to launch cmd with alternate creds which locally is whatever user i am logged into the pc with but remotely is the alternate credentials.
for example will open up cmd windows in creds from say 5-10 different disconnected ad forests.
then as need manage the different forests jump proper window and run commands need run.
as an aside, am thrilled see all of this work being done for command line access.
there are quite a few of us who have been managing windows and eventually ad from command line since nt4 in late 90s.
wt runs non-elevated (medium integrity level)
windows termial crashes on startup.
the console is outputting "hello world!"
as white text image phofimage
paste does not appear as an option.
if you check your clipboard history, it does pop up, but it doesn't let you actually paste it.
only "run as administrator" is available
in the powershell no char will be shown in the command line the letter `q` or `` is getting displayed
the filename will display as something like docx.
you won 't get .docx in your clipboard after you try to copy it from the windows terminal.
under a wsl.exe process in windows terminal, the app might crash when you try to select and copy it from the list given by the "ll" command.
the minimize and the maximize button didn't show correctly it show like a small corrupted buttons.
(i don't know that is this an ui or a bug, and sorry for my english i'm thai.)
<img width="487" alt="powertab bad" src=" phofurl <img width="891" alt="ztwnew" src=" phofurl there are multiple horizontal lines that should not be there.
terminal doesn 't respond for a while (second or two) with just window borders displayed and then exits.
instead i get this: image phofimage for some reason the size of the terminal as deduced by clink is incorrect and the prompt is wrapped prematurely.
to your credit, windows terminal does a better job of color reproduction than conemu.
the output is < instead of | **parent issues:**
terminal not killing processes executed after being closed
the entire windowsterminal application is blocked and we have to close it with the processus manager.
this bug might be related to
the panes get broken - maybe it 's a conpty bug, because i also get similar issues when running alacritty using conpty.
i can also intermittently see the cursor jumping between different panes for a brief moment (100ms or so)...
ubuntu: clears part of the previous executed commands cmd: prints just a `q` powershell: no output
animated image begins to play for ~2 seconds and then console exits.
event log shows event id 1000 faulting application name: windowsterminal.exe, version: time stamp: faulting module name: terminalcontrol.dll, version: time stamp: exception code: fault offset: faulting process id: 0x4e28 faulting application start time: application path: c: program module path: c: program report id: package full name: package-relative application id: ap
the app doesn't close, which is inconsistent with 99% of windows apps
application becomes unresponsive for a matter of seconds and forcibly terminates.
the first two characters move to the left one position, and the third appears next to them.
any commands 3 characters or greater get shifted to the left one position when the 3rd character is typed.
this occurs for any 3rd character, including spaces.
dragging window with mouse does not work in the red section, can be dragged only by hover and mouse press on the green section.
windows asking me how do i want to open this file, specifying that it 's a .json file in the "always use this app to open .json files" ; see picture attached below.
windows terminal settings bug phofimage
emojis are actually being rendered but if the user wants to type them is shows '' annotation phofimage
phofcode swedish qwerty reference: phofurl
i start with `mycomputer ~/codea/ (master)$ asd` then press `altgr + |` which replaces the entire line with `mycomputer ~/codea/ (master)$ less .bashrc ` swedish qwerty reference: phofurl
3. clicking the emoji or pressing enter has no effect.
4. clicking the green arrow to insert the emoji (?)
the menu becomes overgrown disproportionately to the zoom level of the desktop itself to the point of usability issues.
please report this bug with the details below.
report on github: phofurl last 200 keys: space space space space " r e s o u r c e g r o u p n a m e " : " r e s o u r c g r o u p " , enter ctrl+enter w b s i t : w w w .
c m p a n y .
c m enter ctrl+enter } enter ctrl+enter ] enter ctrl+enter } } } ] escape exception: the value must be greater than or equal to zero and less than the console 's buffer size in that dimension.
parameter name: top actual value was -1134. at left, int32 top) at renderdata, string defaultcolor) at at key, dictionary`2 dispatchtable, boolean ignoreifnoaction, object arg) runspace, engineintrinsics engineintrinsics)
without access to my folder.
tab and the complete terminal freezes.
need to alt + ctrl + delete.
a transparent and titleless window opens for a few seconds and closes again: afbeelding phofimage the error event that is generated shows: phofcode
in the powershell tab, the ligatures of <= and >= do not work, the rest does.
image phofimage in the wsl ubuntu tab, all ligatures work !
the white is too bright.
that stood out immediately, so i looked deeper at the pre-defined scheme.
profile file is reformatted and the bindings for increasefontsize and decreasefontsize are lost.
these operations do not respond to the given keybindings.
copy/paste does not happen (already referenced in other issues, like !968).
font size does not change.
terminal loses transparency when out of focus.
the left space this is reserved ([1]marked red) for new tabs or existing tabs (black) cannot be used to move the window
windows terminal does not start.
when resizing the window and trying to drag the scrollbar immediately afterwards, the scrollbar will not scroll the terminal contents despite moving up and down just fine.
brings up a prompt - how to you want to open this file.
default option is windows store, tick box below says always use this to handle json files.
the terminal is not responding after closing.
this will cause terminal to crash if open once `profiles.json` is saved, and subsequently crash on launch.
breaks apart and doesn't render properly powershell1 phofimage wsl1 phofimage cmd1 phofimage
i opened 10 tabs in the terminal and being on the 5th tab i am not able to scroll to the 10th tab to close it.
tab bar not able to shrink its size if i open new tabs.
the pasted file has new lines between each line when pasted.
example: copy the following into terminal phofcode results when pasted into terminal: version: '3 ' services: gogs: image: gogs/gogs:latest ports: - - volumes: - ./data/gogs:/data depends_on: - mysql mysql: image: mysql:5.7.16 volumes: ports: environment: mysql_root_password: mysql_database: gogs mysql_user: mysql_password: tz: pacific/auckland ``
the batch script does not executes and fails like this: 'c: program ' is not recognized as an internal or external command, operable program or batch file.
it's freezing the terminal, you'll have to close terminal and open again to work with it.
it's the default arrow pointer that's used.
- cannot access the taskbar with the mouse when the terminal is maximized
cmd profile: no-solarized phofimage ubuntu profile (output of color-test.sh phofhyperlink ): !
prints nothing, completely ignores combination.
title bar has separated from the tab row creating some rendering issues in the terminal.
- tab title is not matching with `name` in `profiles` in `profiles.json`
powershell is used instead, and powershell core doesn 't appear in the list.
i cannot find a declaration for the `nexttab` action in the `profiles.json` file.
crash and don't start until fix change the fon
text goes supper minimized increasing font size only makes it smaller.
also it will crash on launch, needing a revert to consolas to launch.
the ascii code (126) and a tilde is inserted wintercmd phofimage <!-- what's actually happening?
windows terminal crashes on startup.
only the border of the window is shown and then the process terminates.
the following entry is recorded in event viewer: phofcode
`acrylicopacity` has a floating point error.
until you click the current console area (not tab) in order to see the blinking cursor again, then the hotkey will work.
selection stays at one line and doesn't move.
this is also the case for other padding sites (e.g.
selecting line form right to left), but left is most noticable
when cursor reach last/first line of screen, only last/first line changes under cursor.
before resizing the window, there is minimal input lag, barely or not noticeable.
after resizing (or starting with a column count > it is easy to type faster than the characters will appear on screen.
this happens for wsl ubuntu 18.04, 18.10, 19.04, cmd and powershell.
i'm not sure if this is specific to using a 4k display with integrated graphics or if this is a windows bug with acrylic
the terminal eventually hangs and is completely unresponsive.
the call stack for the main thread when the window hangs is attached.
phofhyperlink a minidump of the hung process is available here: [hungwindowsterminal]( phofurl
a new line appears and prompt `digit-argument: -1` as i entered `alt`+ `6`
build fails with: phofcode the build is failing because its using/looking in the wrong location for these targets files.
the first line says that its picked up the correct msbuild ("16.2"): phofcode but a few lines down, you can see that its picking up msbuild from the 16.1 folder: "c: program files (x86) microsoft visual /t:clean,build /m /p:configuration=debug /p:platform=x64 /p:appxbundle=false ``
crashes and closes the terminal.
i get errors saying the windows sdk 10.0 cannot be found, even though i have installed all requirements: `error msb8036: the windows sdk version 10.0 was not found.
install the required version of windows sdk or change the sdk version in the project property pages or by right-clicking solution and selecting "retarget solution".` [...] `========== build: 4 succeeded, 44 failed, 0 up-to-date, 0 skipped ==========`
file is reformatted every time the terminal opens.
a thick, non-windowsy white border is shown instead.
the visible area is cleared, but the window scrollbar remains active.
when you scroll up, you see that most of the file you displayed remains; only the end of the file is erased up to a length determined by your visible window height
this is from my secondary display(notice that everything is dragged outside of my monitor pixels, even the text and some portion of the tabs).
the actual behavior is that it copies it without preserving any linebreak and tries to do it in one line image phofimage image phofimage image phofimage
windows terminal hangs, leading to a _windowsterminal.exe is not responding_ eventually.
* cursor returns to previous line, but with a whitespace between the last character input and the cursor position * additional input character does not show up in terminal, although it is recognized '..789ab ' is received as input in the example below, even though it is not shown: !
first tab is started in /home/xxx second tab is started in /mnt/c/users/xxx
the terminal crashes after entering `ls` the third time.
i 've seen two different types of error message.
in one case, the terminal prints the following text in red and then exits right afterwards: out-lineoutput : the win32 internal error "the parameter is incorrect" 0x57 occurred while writing to the console in another case, visual studio displays a dialog box with following text (identical to dialog box from
f is displayed image phofimage
<img width="137" alt="annotation src=" phofurl
the text that gets selected when searching is not the right text
image phofimage and doesn't reload profiles.
at commit id 2da5b0b, it actually reloaded it, and those utf-8 needed chars looked crazy.
after killing `wsl` powershell/cmd is in a bugged state because nano takes up the whole screen cmd: cls won 't clear the screen (first screenshot) powershell: cls will clear screen but if the user inputs e.g.
"cls", terminal will print "cclcls", yet still interpret it as "cls" (second screenshot) phofimage phofimage this issue is also present in the original cmd/powershell.
it crashes, losing all your tabs.
the crash is here, on line 93 of in title(): ` ` the calling code is at line of app.cpp in gettitle(): phofcode and the caller of that was unfortunately it is not a thrown exception but an access violation, so the c++ exception handling doesn 't help.
inside _getfocusedcontrol(), it would be possible for _getfocusedtabindex() to return -1, but it doesn 't seem to be in this case.
also it could conceivably return >= _tabs.size() but isn 't doing that either.
the problem is that returns nullptr, which according to its documentation a reasonable thing to do.
i changed the code inside the try{} to: phofcode this seems stop crashing.
but there are other places where _getfocusedcontrol() called without checking for a null result.
so perhaps another tab should be considered focused, or something.
also if you create shells quickly, some of them end up with no title.
i think that 's related, because if you click on one those tabs, window title (can be seen by hovering over app 's icon in taskbar) "windows terminal" which gettitle()s default
it looks like a pathing problem on the last line of `get-childitem -path $versions[0] "$name.psd1" | import-module`
(clean;build target) (1) -> (default target) (7:2) -> (default target) (44:2) -> (clcompile target) -> c: program files (x86) microsoft visual rgets(429,5): error msb6006: "cl.exe" exited with code 2.
(clean;build (1) (default (13:2) (default (33:2) c: program files (x86) microsoft visual rgets(429,5): error msb6006: "cl.exe" exited with code 2. roj]
note that i tried this out in a regular powershell instance launched from start menu and it seems to do what it's supposed to (at least from what i can tell), in that it sets the color scheme.
i noted that the background color doesn't appear to be correct, which when i searched for colortool bug reports, found
icon is blurry image phofimage
best way to demonstrate this is with some screenshots: image phofimage i tested this with a completely fresh install of windows 10 1903 just now to confirm it's nothing that i've done wrong.
i can confirm that everything works perfectly in the previous october 2018 windows 10 release.
honestly, the terminal in this new release is unusable for me given all the problems i've been finding and i don't really have much choice but to reinstall the older windows release as i depend on powershell.
unless of course any workarounds may be suggested?
any help is greatly appreciated
the case was changed to all lower case and the build fails.
step by step screenshots: we start with a normal powershell window: image phofimage change cursor to vertical: image phofimage vertical cursor shows up, yay: image phofimage hit enter and type some text, then notice the cursor changes back to the default: image phofimage popping back into properties reveals our selection has been reverted too; !
some text is white, some is black.
it looks like command _output_ is white, but commands i type are usually black, as well as error text.
image phofimage weird nuances though: image phofimage image phofimage
observe tab is unusable, typing in it does nothing
windows crashes to a green screen of death with stop code apc_index_mismatch no further information presented.
screen flickered imgur phofhyperlink related to
windows terminal does not start.
there is no error popups, notifications, or any other sign.
instead, i could find an error event on windows event viewer.
following is the event log.
line endings are "doubled" on text paste to unix-space sessions.
as expected, pwsh should set the title correctly, but pwsh reported the error: image phofimage let 's take a look at the command line: image phofimage image phofimage when you see the red line, command line that pwsh starts is incorrect, and when you start conhost, command line is still correct!
currently i have found a suspicious code, most likely this code caused an error: phofurl
the cursor continues to blink, or if the cursor blinking is turned off it stays on.
this leads to some weird behavior: phofimage phofimage
selection 'freezes' when cursor moves outside window.
this seems quite obviuos but i couldn't find issue describing it so sorry if it's dupe
see attached zip with video phofhyperlink
after the last command the terminal only displays all integers from 100 to some random integer smaller than 999 (e.g.
sometimes the last integer is not shown completely (e.g.
only "97" instead of "978").
---- the output is truncated?
one of the programs in pipeline is aborted early?
it might be a timing issue?
repeating last command often results in same "random" number, but sometimes it gets stops later / earlier.
100 to 400 instead of 100 to 999) problem also occurs.
using slightly different commands problem does not occur, e.g.
this works correctly: wsl cat * | sort | uniq ``
only powershell works as expected, cmd, ubuntu, ... doesn 't work like image i 've pasted.
(just stays as normal) image phofimage
seems that the `_getfocusedtabindex` is returning the index unadjusted for the closing of the tab.
i think that `_removetabviewitem` is not readjusting index.
the `shared_ptr` is constructed by indexing into `_tabs` by `_getfocusedtabindex`.
that calculates index by `_tabview.selectedindex` the `_removetabviewitem` does not update index.
i can not seem to track down where implementation for tab bar renderer is handled (i suspect due to xaml bits).
some pointers as to where to start digging would be appreciated.
one line with lots of space.
phofcode note that no errors happen.
actually phofcode to contain phofcode notice that the tab character is in the correct place but it seems to have overwritten the character rather than inserted it.
the length, however, has been increased by one but the last character is a space which wasn 't typed in.
this makes it impossible to correctly handling tab completion.
a portion of the leftmost column of cells is cut off.
the text is fine when maximized on the primary monitor.
window is opened at a default location.
errors with: phofcode the last (failing) part of the npm log is: phofcode i wouldn 't normally think this a problem with terminal except for the mention of "ansi escape codes" and the fact that the install works in a regular console
cmd is still in focus despite it is not shown in the tab bar might be related to
terminal doesn't response to mouse dragging occasionally !
same output as pressing on button 2 resulting in .
although on enter the write input is processed.
issue phofimage also if an editor like vim was open as can be seen the screen is not cleared on loss of connection.
it will be nice to have the normal error telling you of a timeout error and the terminal goes back to working as it was working before.
terminal window opens with a message cmd.exe - application error - "the application was unable to start correctly click ok to close the application"
terminal prints 2. in an ssh connection, "(arg: 2)" comes up.
when i open it it just shows the ubuntu logo and does not show anything at all.
and it just wont let me type anything at all.
the terminal shows control sequences or nothing: phofimage
the `>` symbol combines to create font ligatures.
the behavior is shown in the below images: font-ligatures-error-1 phofimage font-ligatures-error-2 phofimage
nothing happens (or the current tab changes in the case of alt+digit)
if the `/min` parameter is used with the `/d` parameter, the path used with the `/d` parameter does not seem to be used, and program contained in path referenced by `/d` parameter is not found.
hi, i am the author of the module `node-libcurl`, recently this issue was reported there: phofurl basically the promises takes a long time to resolve itself after resolve/reject was called.
sort of follow up to phofurl which was fixed phofhyperlink but it seems not fully.
when an error is thrown and is asserted to be equal to a similar but manually crafted error, the results are as follows phofcode
vscode 's mocha test debug target broke with the latest changes to `bin/_mocha`
issue #3243 shipped with v6.0.0 throw a deprecation warning or an error if `--throw-deprecation` is enabled with all coffeescript tests since the language support implicit returns.
in the karma debug console there are lines of useless output.
this is traced to the module.
i`d like to know how to fix this.
mocha base runner does not emit start event.
my test did work, but then i needed some post-test logic and i wanted to use #after.
my code is in ts ran through ts-node and this is a 'compilation ' error but would you please advice ?
i am trying to use the following code to determine phofcode
subtracting the difference between two moments results in hours represented as milliseconds on object a: `'nov 19, 2019 2:41 pm'` a: b: `'nov 18, 2019 1:42 pm'` b:
month year and day functions accept nan as a value.
date seems valid but it 's actually broken when such values are passed.
when you set up a mindate or a maxdate you suppose to not be able to navigate before or after the month you set up.
however if you use the keyboard shortcut to navigate it seems to not care about mindate or maxdate and we can continue navigate even if it should be block.
when parsing a string to a date, using a string containing a date that represents the days with no preceding 0s (ex: '2019nov1 ' for 1st of november 2019) followed by the hours and minutes and with no separators (ex: for 12:05 of 1st of november 2019), moment is not capable of identifying the day with no preceding 0s even if the correct pattern is indicated:
a duration between two moments which are a year apart is not exactly 1 year.
bug, or at least surprising behavior, when humanizing time deltas in the past with high relativetimethresholds
checking for valid dates in order to format to our necessary format returns isvalid == true and converts objects to valid moment objects return true `moment(myobject)` becomes today 's date
the docs do specify that the `.year()` method signature expects a number value, but as strings are not outright rejected, i thought i'd report this weird little bug.
it seems to happen only with the year 2020 and no other leap years.
starting from a moment object with its date set to and then setting the year to '2020' (with a string value) changes the day to 28. if you pass 2020 as a number, day stays at 29. if you start off with 2012, 2016, 2024 or 2028 and then set year same value, string or number, day stays at 29. it only happens with year 2020 using string value.
unlike all other tokens in the formatting system, `a` and `a` require a space before them for `moment` to identify the created object as valid, even though it seems valid and functions as intended in every way i 've tested.
or, it might be rather that time tokens must be followed by a space and every token causes this.
this seems more likely after a bit more testing.
additionally i suggest that the dash character `-` should not produce invalid dates, the same way `colon`, `period`, and `comma` work.
for some specific year ranges iso8601 time is offsetted by -6 minutes.
i discovered this behavior when our system was parsing iso8601-formatted timestamps and presented them on a calendar.
before that, timestamps are 'normalized ' to viewer 's local timezone offset.
we ensure that input data is already in viewer 's timezone offset, so the 'normalization ' step is actually superfluous, but it is there, and since input/output offsets are the same, it should not damage the data.
however after parsing it via moment object, resulting value indicated 1 day before than it should.
phofcode this 'm ' value was then passed around, and later displayed.
since contained a different offset than local, another component re-normalized back to local +02:00 and that resulted in this caused a calendar component to display instead as the date.
the problem does not lie in fact that timezone offset was changed back forth, but in extra change of -6 minutes.
a clear and concise description of what the bug is.
this week 's translation into japanese should be "l" rather than "l".
when using the german locale, the format mmm adds a dot this is not really a bug ...
moment docs say `you may also specify a list of locales, and moment will use the first one it has localizations for.`.
i 'm using moment on a react-native app, and only on release build, if i do: phofcode i get an error `requiring unknown module "./locale/fr".`.
so the questions are: 1) why does it happen only on release build?
; 2) since there is not `fr` (and indeed there is not), shouldn 't moment fall back to `en`?
right now, the range for time.to and time.from is too obtuse.
what i get is "in 2 hours" what i would like to get is "in 2 hours and 30 minutes" or the two highest values.
for example, 1 year and 5 months, 4 minutes and 30 seconds.
using isbetween with hermes engine in react native returns false with default moment configurations.
every time i try to get a week of the patter "yyyy[w]ww" for the year > 2020 (2021, 2022 ...) i am getting the week increased by one "yyyy[w]ww").week() result : 04
as the title mentions, when you add a week to the last week of 2019, the expected output would be the first week of 2020, but instead its first week of 2019: phofcode however if you add two weeks, output is correct in selecting second of 2020: phofcode
when repeatedly running this calculation: `moment().add(1, 'years').diff(moment(), 'days')` when the current date is in a year before a leap year (in my case, moment inconsistently returns `365` or `366`.
adding `.startof('day')` to each `moment()` will consistently return `366`.
moment constructor for parsing local date time is parsing date string as utc.
i know this because the moment object has _isutc field set to true.
i'm under the impression the default locale `en` is supposed to represent english (united states) since there is no `en-us`.
phofurl however when i try to get the start of the week with `en`, i get monday and in us and in general north america week starts on sunday.
`en-ca`, english (canada) works as expected.
"in" word showing up in format resulting in the format not making any sense
within a protecting vm, due to `utils.isfunction` using `instanceof function` will throw an error `typeerror: right-hand side of 'instanceof' is not an object`.
when i set the following setting: 0);` and have a duration result of one second it prints out `1 seconds` instead of `1 second`.
when i compare the time displayed on phofurl and the time displayed on phofurl (and many other resources).
the time displayed on moment.js is behind by 20 seconds.
when parsing a freestyle date text, moment allows an overflowing date part and, instead of invalidating the result, it silently sets it to zero.
converting a moment to an iso string and back causes the moments to not compare equal.
this makes checking a complex object equals another one when it contains moments _exceedingly_ tedious.
when i look at the diff duration in days between 3-11-19 and 3-1-19 vs 3-10-19 and 3-1-19 i get the same number of days (9)
moment('2019 99 12 15:21', 'yyyy mm dd hh:mm').isvalid() return false.
but month start from 100 will return true.
moment('2019 100 12 15:21', 'yyyy mm dd hh:mm').isvalid() return true.
the momentjs is returning value when calculating number of days between and
a clear and concise description of what the bug is.
the isbetween() function is returning different answers to the same question, when called with an undefined value.
when creating a moment from an object, there is inconsistent behavior between the use of the `day` and `date` key when setting to `0`
expected to get february but got march when i set 2 as month
the difference between (date + 5 days) and (date - 1000 days), rounded to 2 decimals doesn 't give always the same number, depending on the date used.
i have some weird inconsistency between the code i execute inside my application and the code i just type in chrome dev tools (within momentjs website) the following code: gives me this output when i put into the console
startof and endof does not give the correct dates.
a clear and concise description of what the bug is.
i am trying to do a daylight savings check in my docker container and the result is always false.
i also tried the example code to run in my container on start and they both ended up false.
phofcode i created a javascript file with moment and was able to get correct output of the above code.
invalid date strings with a + in front get parsed
i receive strings and i have to validate if it is a date or not, as i have to execute different processes with the type of the string.
i don't know the date format will receive, so cannot use string + format predefined.
every string that get with the format xxxx-yy being yy numbers, will be valid as date, and they should not.
.diff method gives 1 day difference in time.
`moment.locale()` returns `undefined` after updating a non-existing locale.
unexpected results are returned when the date difference between and is found.
in locale "tr", "do" format is not working.
need to test all formats again.
the date time object created by moment does not correctly represent the local time zone.
a clear and concise description of what the bug is.
momentjs returns `invalid date` for an object argument passed to constructor using the month `12`: phofcode `
when using phofcode it gives invalid date which is 8 days.
two different dates, when parsed to timestamp (x), are returning the same exact number
as said in the title, it seems that moment.js is translating moment objects into javascript date objects with wrong values and this is causing issues when doing operations with moments 'cause it seems (correct me if i 'm wrong) that moment.js actually converts its moment objects into a date object to do things like comparisons.
this error pops up : `typeerror: config._d.gettime is not a function.
(in 'config._d.gettime ' is undefined)` - in moment - in clone - in toisostring
in this line phofhyperlink , there's a documented copy from a stackoverflow posting.
according to stackoverflow faq phofhyperlink this part is licensed under cc-by-sa 3.0 phofhyperlink .
as far as i know, cc-by-sa 3.0 cannot just be relicensed under mit.
this question generally picks up from the last comment phofhyperlink from issue #3161 .
the diff for `days` method while expected return value for 1 on all time-zones but it gets 0 only for the mentioned dates below in the specific time-zone (tehran).
differences days between 23 march and 22 march.
duration is computed incorrectly from iso 8601 format for some edge cases.
for example, moment computes `p64d` to be `2 months 3 days`.
parsing a date in the following format: '10:50 as 'dd/mm/yyyy ' and then re-formatting it into string with the original format ( 'hh:mm dd/mm/yyyy ') does not yield the same date (00:00
build failures due to incorrect type returned.
seems some method return a type depending on arguments' type.
`moment.duration()` has a behavior that change depending on arguments given * return a `duration` object * `moment.duration(number, string)` return a `string` * `moment.duration(number, return `duration` object
initial date of brazilian dst is wrong, isn't but please check the nexts dst date because the rule changed to first sunday of november.
the function to validate the `date` returns `false` when the `date` is `undefined`.
if i try to compile my typescript app with webpack, i get an error for each locale that '../moment ' can 't be resolved.
this error is repeated for every other locale: phofcode
i'm using moment in my angular projects but it includes all the locale in my main bundle.
adding 1 day to march24th in the atlantic/azores timezone yields the same day.
for some reason date parsing yields invalid dates.
while the format seems to be correct.
i suspect this is due to the fact that the date is in the last week of year, but that 's only a hunch.
when the first argument to isbetween method is a valid date before the moment being compared, and the second argument is an invalid date (like `undefined`), the method returns true.
we have come across an issue that seems to me would be best fixed inside the moment-timezone or the moment library rather than end users having to implement their own logic to handle it.
is related to this issue: phofurl
same as a bug that was closed due to lack of info: 30 of march 2014 returns a very weird result #1568
converting from a javascript date object to a moment object, extracting a "yyyy-ww" format, converting the extracted value to a moment and from that moment to js date object results in invalid date.
using moment().week() returns week 1, but moment().year() still returns 2018, creating a lot of issues in our code
when generating a date with moment based off of year and week number, the dates for all weeks in 2018 are generated in 2019 instead.
according to the documentation i can pass an object with custom formats to moment.locale(), but doing so gives output in default locale (us).
utcoffset is giving wrong date
template, even if it 's not really a bug, nor a feature request, but more a doc improvement suggestion
a second note bookmark at the same address overwrites an earlier note bookmark at that address that had a different category.
occasionaly (when the decompiler-generated local variable has a data type with larger storage requirements than the original local variable in the listing pane), renaming a local variable in the decompiler window will behave in a strange way: - a local variable with new name will be created and visible in listing window, but will have an exclamation mark next to it, with message "invalid storage" - decompiler window will not reflect new name, and use an autogenerated name instead.
ghidra is unable to import the file with sha256 hashsum triggering a
dex strings are displayed incorrectly in 9.1, skipping every second byte.
a clear and concise description of the bug.
this does not seem to be working in phofurl
ghidradev's link ghidra option does nothing.
de-compiling code that uses conditional float division and multiplication will not show these operations.
it also does not recognize the `_ftol` function and the conversion from float to dword.
ghidra fails to identify an address push followed by a ret as a form of jump instruction.
this is a common pattern used on style processors (and possibly other 8-bit controllers) to work around the lack of an indirect jump instruction in the 805x isa.
if i create a java or jython script that uses swing gui components to make changes to the program, the changes are made but the display is not updated in ghidra until i perform some action that causes the display to be updated such as changing functions.
if i execute identical function from a script that doesn 't use a gui component, display is immediately updated in ghidra without needing to perform any additional action.
for example, if i have a script that updates function name, displayed function name immediate changes.
if i tie identical script javax swing button, function name will change, but display will not update.
the only way i 'm able verify change has been made is check name through script.
when decompiling any binary built with vfpv2/vfpv3 vector extensions for the 32-bit variant of arm, these instructions get decompiled as cdp instructions.
while not necessarily wrong, this does make the instructions significantly more annoying to read.
this appears phofhyperlink to be due to the fact that sleigh constructors only exist for the neon a1/t1 variants of vmul.
there doesn't seem to be constructors for vfpv2/vfpv3/vfpv4 a2/t2 variants that allow a condition code on a2 variant.
just figured that i'd report this in case it was an oversight.
using | in a sleigh bit pattern requires that both tables match for the entire pattern to match.
converting a word-size char sequence yields the wrong result in the disassembler view for little endian cpus.
the decompiler creates an incorrect instruction flow.
maybe it gets confused by stack manipulation and interrupt control code being interleaved rather than nested.
some iphone app binaries lead to the objectivec2 class analysis failing with "symbol name can 't be empty" when using the 9.1-beta or recent master
same as #505. when opening an existing ghidra program, cursor starts at top and the decompiler window is empty.
ghidra won't ask to save the program if i close code browser after moving the cursor without changing anything.
this is listed in the official bugfix list, but is still happening.
editing the label through the listing to set a namespace to a function removes the function name.
the decompiler fails to analyze correctly code that is making use of the x87 fpu subset of instructions.
when loading an arm be8 elf file, the instruction set defaults to an incorrect value and is the only recommended setting.
examination has shown the elf loader does not parse the architecture specific flags in elf header.
whilst this can be overcome by unchecking only show recommended languages box, this selection does not seem to propagate for any dependant binaries which are selected to be loaded (e.g.
this is problematic for binaries with a large number of imports.
several gui elements are missing space characters.
key bindings assigned to scripts don't work.
mdmang is not able to demangle symbol names for compiler generated thread safe static guard variables.
`__undname` is not able to demangle these symbols correctly either, but the structure is somewhat documented from the other direction thanks to clang's msvc compatible mangling at phofurl
when the cursor is over a string in the decompile view and the user presses ctrl-c, the string is copied to clipboard.
this was requested in #411. the copied text includes encompassing `"` signs though.
example: if cursor is over string `localfree` for example, clipboard contains `"localfree"` after pressing ctrl-c.
all bitrange registers as described in the sleigh documentation section 4.5 compile successfully with sleigh.
upon loading the .sla file, ghidra throws `throw new sleighexception("bad symbol xml");` in symboltable.java line 158. it appears that the below xmlelement is being parsed in the restoresymbolheader method which there is no case for.
i 'm not sure if sleigh has compiled it wrong, or if symbol table class has not been updated to handle bitrange registers.
i performed the procedure described in the advanced class to fix a jumptable from a switch the decompiler couldn 't recover.
the script executed correctly with the labeling and everything, but now decompiler is stuck with "low-level error: could not find op at target address" even though there is clearly instructions there at each jump target.
the struct editor is slow with big structs.
in version tracking the exact function match correlators don't match an identical function.
using version 9.1, in some random instances, the local stack variables used inside a function are not having labels applied and are being shown as the two 's complement offset instead of the variable identifier (local_xxx).
this error is occurs both in the flat view and assembly view.
the exact same file / location is being correctly labeled in version 9.04, just not in 9.1_beta.
if i load file directly 9.04 or upgrade version 9.04 file to 9.1_beta, local stack variables are being labeled correctly.
but if i load file fresh into 9.1_beta, error is occurs.
loading a elf binary causes phofcode
i'm not sure if this was as designed or a bug, but it seems inconsistent so i went with a bug.
when viewing the edges in the graph view, there are inconsistent line weights.
probably 60 or 70 percent of the edges seem to be displayed with a very light font.
the other 30 / 40 percent have a darker line weight.
i can't determine any reason why sometimes the weights are darker vs lighter.
the darker line weights are ok. the lighter line weights are very light and difficult to see if your vision is not perfect.
even darker weights have pretty thin weight, but extra light color along with thin weight make thin lines fairly difficult to see.
i put few screen shots below to demonstrate this bug.
at first, i thought different jump conditions determined if edge lines were dark or light, but it doesn't appear be that case.
incorrect `jsr` decoding if before them was a `call`.
with normal mcu operation, `call` instructions changes `ppage` register, stores it previous value in stack and transfer execution to another function.
that function should restore correct value of `ppage` (it done with `rtc` instruction, "return from call").
unfortunately, ghidra analyzer doesnt take into account contens of called function.
when you look at the references to a function, i added the field "function_name".
when you select any field
`display function call tree` button won't open a new tab to the function under the cursor.
i have made some simple c programs to test this.
but it seems when i import the same executable after i change a parameter and recompile it's not reflected in the analysis.
i tried recently to parse certain data structures from the xnu kernel.
i encountered a simple struct that could not be parsed.
the struct is defined in a xnu header file.
all data types are of type `__uint32_t` which is a `typedef` for `unsigned int`.
interestingly, the parsing works if the type in the struct definition is changed to `unsigned int`.
therefore, i guess parser cannot parse type definition for some reason.
more interestingly, parser recognizes `__uint32_t` as valid.
i tried this with 9.0.4 and 9.1-beta.
lines mentioned in screenshot: phofcode
while trying to connect to ghidra server receiving "error occurred while connecting to the server connection reset".
ghidra was built from source to get access the new switch for nat 'ed environments as this is running in openstack.
security group set allow 13100 13101 and 13102 tcp also tried allowing all tcp and udp getting the same result.
connecting dns or direct ip gives the same issue.
although connection reset occurs 90% of time it also sometimes returns non-jrmp server at remote endpoint
the export tool options does not seem to export all user preferences.
all of the options located in the edit / tool options appear to be saved, but if an option is not in the tool options, it does not get saved.
a few examples i 've noticed are below.
without these preferences being saved, it means you can not share settings with other analysts or copy ghidra into a new vm without manually setting everything up again.
the "edit code block fields" setting being saved are especially troublesome because these are settings that greatly affect readability of the code.
- if script directories are modified, it is saved in exported tool - in graph view, no customization 's appear to be saved.
specifically, i 've notice following settings saved in exported tool: * block hover mode * block focus mode * any changes made to edit code block fields most of these preferences seem be stored tool.tcd file, e.g.
code_browser.tcd, but don 't get exported tool file, e.g.
after autoanalisys of a .exe win executable (demangle enabled, importing pdb with debug symbols), one can see that all the mangled c++ symbols are not demangled.
the exe was compiled with visual studio.
i've tried to run the demangler separately after, but no luck - it doesn't work and does show this message: phofcode params are named correctly, but their type is not right - should be inferred from the signature i guess.
so, i've separately run the `demangleallscript.java` script and it
when analyzing a pe file, all standard lib functions (i.e., printf, fopen, strcpy) show up as ".text"
when loading pdb xml, if ghidra can 't resolve certain data types, it throws nullpointerexception and aborts the load.
in a few cases, the stack depth calculation seems to not get performed.
this causes local stack variables after the error point to not be recognized and labeled as such.
it does not happen frequently though, only on occasion.
in the situation shown, it 's after a call to a register (wsastartup).
i 'm assuming it 's due to the fact that ghidra doesn 't know what call is.
i thought if i manually apply "set stack deptth change" option correct stack depth and re-analyze program, then local variables would be recognized and labeled.
in screenshot shown, you can see i added stack depth all way up selected row, i was hoping [esp + 0x10] would have been recognized and relabled as a local variable.
i 'm entering this as bug both because of failure for ghidra recognize change because of failure accept my manual update for depth use that in it 's analysis.
if there is any way manually force ghidra recognize change label local variables, would be very interested in knowing.
i was learning the ghidra scripting and found bug in the scripting lab5 answer.
the program goes into infinite cycle if reversing file has instructions with less or more than 2 arguments.
analyzing a binary and manually starting "load pdb file ..." results in the error of the screenshot.
if i start pdb.exe manually with the same pdb file as input, it creates a perfect xml file without any errors.
accessing a structure with a negative value will produce the same results as if the value was positive.
i 'm not sure if this is a bug or a feature.
when looking at the code blocks in the graph view, the last field will auto-size to just the length of longest entry so that it does not have extra space even if field is set to be larger.
the bug / feature is that this calculation does not occur for any field except last one.
that means if last field width is set to 50 but largest entry only 25, will resize to 25 so that it doesn 't waste unneeded space.
if same situation occurs in 2nd last and there an entry in field, 2nd tot will not resize.
so in that case, 2nd width will be 50, even though longest entry only 25. i 'm unsure if this a bug or as intended.
it seems make most sense have fields auto-resize longest input, up maximum value specified.
since occurs field, but any others, it seems more like a bug than feature
some of the code blocks in the graph view don 't properly expand to show the full width.
i 've used the "edit code block features" button to expand field widths.
this works on 95% of code blocks and i can set field size to see entire instructions.
for maybe 5% of code blocks, fields do not expand like other 95% and fields are truncated.
for some reason, this seems to virtually always occur in microsoft compiler 's optimization for mod by a power of 2. i put two different screenshots this highlight, but i 've noticed truncation in every instance where i 've seen optimized mod by power 2. but it does occur in other instances too.
the 3rd example is just a random call where field doesn 't get expanded for some reason.
i opened the same file in 9.04 and the 9.1_dev version i built from github.
in the 9.04 version, numerous library functions are identified and labeled correctly.
for the exact same file in 9.1_dev, none of library files are recognized or labeled.
i checked analysis options between both versions and they are identical.
i put a few screen shots showing example calls that were not identified.
note that this seems to be a widespread problem, only put a few screenshots for examples.
the copy special option doesn 't work on a single line and will only work if multiple lines are selected.
the copy special / byte string is particularly useful for copying opcodes out as byte strings for yara rules.
even though much of the time this would be on multiple rows, there are still situations where you would do this on a single row for long instructions.
this is not only quicker, but it prevents typing errors.
when decompiling a 64-bit macos application, while floats and doubles are correctly passed and returned through xmm registers in the default calling convention, structs containing 28 bits of floats or doubles are not, requiring extensive use of the `use custom storage` option.
a new feature was added to the development version of ghidra under the tool options / function graph / nested code layout to "route edges around vertices" in general, the view is much better than the previous, but it is still fairly buggy.
maybe 20% of edges don 't get routed around code blocks and still go through code blocks.
sometimes they go straight through middle, sometimes just through edges.
additionally, if you don 't use default code block layout, graphing algorithm seems to get very buggy.
with default field sizes, graphing algorithm is maybe making 20% mistakes, but field size for instruction operands is too small to even see operand in graph view.
when i increase size of fields in graph view so that i can view entire instruction, operand, and comment, graphing algorithm becomes much more buggy and failing maybe 40% of time.
with increased field sizes, you also get many more overlapping edges instead having them distinct.
once edges overlap, it because very difficult read and determine where edge starts or ends.
in either case, if new features worked consistently, it would be enormously helpful close using other tools such as ida pro.
there are many situations where it desirable or necessary use graph view over decompiler.
in those situations using graph view, portions where edges go straight through code blocks makes almost unusable because it 's nearly impossible follow where control flow logic.
if this feature could be fixed work consistently same accuracy as idapro, binary ninja, or radare2, would make ghidra a very attractive alternative.
i put a few screenshots below for examples with captions for comments.
figure 1 shows several still going blocks, though near edge instead straight middle.
this tool using default field sizes.
image phofimage figure 2 shows an example edge still going straight middle a block.
this tool using default sizes.
image phofimage figure 3 shows same image as figure 2 except for sizes are not used.
in this case, i expanded fields so that could see entire instruction, operands, comments.
this case, you can see graphing algorithm has a major problem with new sizes.
note that instead only going middle 1 block, go 3 blocks there are several overlapping that are indistinguishable.
i 'm trying to examine an old german dos game to figure out how it works, and when i tried to examine function fun_2d77_30fe(), it gives me an error: "exception while decompiling 2d77:30fe: ghidra/decompiler alignment error"
references to data at offset 0 in a segment are not marked up as any other reference in the code.
as the title says, shortcuts using the alt key seem to be broken on macos (for example, "add to program", which is alt+i by default).
also, when trying to assign a shortcut to any action on the codebrowser tool, you cannot use alt).
interestingly enough (i just tried), pressing the shortcut twice seems work, so you get expected behavior every second pressing of shortcut.
register function parameters are substituted even when the parameters ' storage size don 't match registers '.
this only occurs in the listing view, the decompiler works as intended.
when you use the data type chooser dialog (default hotkey "t") to assign a type to a region of data, it checks that you 're not going to clobber any existing declared type beforehand, which is good.
however, on a 16-bit target (like old ms-dos executables) the size calculation is incorrect when using pointers/arrays and similar structures and it will do the check as if those pointers are 4 bytes long, while they are really 2 bytes long.
the importer throws `java.io.ioexception` with a message saying "bad omf data" when importing libh.lib, the "general helper library" included with microsoft c compiler v6.00a.
attempting to load any pdb files results in the following exception: phofcode
stack depth after a call instruction in x86-16 is always `- ?
it cannot be specified either locally or globally for the called function.
when disassembling code in an overlay, sometimes the segment/memory block of the target of a near call varies unexpectedly.
### example 1 code is enclosed in `assume cs = 38e4`.
the memory map is shown in a section below.
first calls uses memory block `38e4.1` as expected.
the second call uses segment `3000`, even though there is a location in memory block `38e4.1` that it should target and cs was not modified.
phofcode ### example 2 code is enclosed `assume cs = 38e4`.
the memory map shown a section below.
the first call uses segment `4000`, even though there location block `38e4.1` that it should target.
second call uses `38e4.1` as expected even though cs was not modified.
phofcode ### memory map name | start | end | length | type -- -- -- -- 1000 1000:fd0f 0xfd10 default 1fd1 1fd1:fc7f 0xfc80 default 2f99 2f99:94af 0x94b0 default 38e4.0 38e4:fcbf 0xfcc0 default 48b0.0 0x1270 49d7 49d7:02ff 0x300 4a07 4a07:02ff 0x300 4a37 0x170 4a4e 4a4e:08ff 0x900 4ade 4ade:0000 4ade:d97f 0xd980 38e4.1 4000:8aff 0xfcc0 overlay 38e4.2 0xedd2 overlay 48b0.1 0x1270 overlay
when copying from memory map, the text representation of the table contains the first row in the header.
on aarch64, when a function's return value is too large to fit in a register, the caller allocates storage and passes a pointer to it in the x8 register.
see section 5.5 of the procedure call standard phofhyperlink .
ghidra incorrectly allocates x0 for this purpose.
sometimes data is not correctly identified as a string in the listing view, either it 's all marked as undefined or partially undefined and partially a string.
in the latter scenario, data can be retyped selecting data -> string from the right click menu, but not by selecting data -> choose type -> string
demangling a mangled symbol for a __function_type_info instance results in a demangled object with it 's namespace cut off at the return type.
xxe vulnerability in yajsws jnlpsupport affects ghidra server.
an insecure way to parse xml input was found in jnlpsupport class from yet another java service wrapper used by ghidra (up to latest version).
ghidra parses enums with ternary expressions incorrectly.
# steps to reproduce the behavior: crate header with enum based on a ternary phofcode in ghidra load the enum using file > parse c header using the type viewer view the enum from ghidra_test.h
in the storage address editor, register locations are sorted by register name.
on platforms like arm and aarch64 where registers are named like "x0, x1, x2, ..., x9, x10, x11, ...", this is not helpful because they get sorted like "x0, x1, x10, x11, x12, ..., x2, x21, x22, ...".
ghidra does not follow the xdg base directories specification.
according to nxp coldfire programmer's reference manual phofhyperlink , page 122, the data value 0 in the immediate data field represent -1 instead of 0. ghidra does not implement this edge case.
i attempt to make ghidra build in ci environment.
i download bison and flex, and that part seems to be working, but when building native projects, vs configuration does not picked up and `msvc_sdk_version` and `msvc_tools_version` does not setup properly.
the issue locates somewhere here: phofurl where you build following command line phofcode to get environment variable %windowssdkversion% console displays following phofcode when i make same command in the cmd on my pc it does not work as expected, but when i run `gradle build` then everything working as needed environment variables propagated.
try to understand how it is executed by gradle, seems be that it is working due some kind of gradle magic.
was try different way invoke commands, but i 'm out of ideas for now.
build on linux produce following errors: phofcode
when renaming certain local variables, not changing their type or whatnot, it is possible for the decompiler to remove other local variables and omit to decompile parts of the code.
when a pc-relative lw instruction that is preceded by a jal, jalx, or jr instruction in mips16e mode, the address that ghidra computes for the lw instruction is incorrect.
specifically, ghidra uses the address of the lw as value for pc instead of address of preceding jump instruction when forming load address.
using entry, boolean findentrypoint) with findentrypoint set to true and the entry address set to an address that has not been disassembled causes applyto(program) to return true even though no function is created.
this is halfway between a bug and a feature request.
it appears that remote project archives (rpa) default to 32-bit pointer size and that there is not mechanism to enforce 64-bit sizes.
one particularly noticeable side effect of this is that structs with pointer fields will gain a number of _undefined_ entries if unaligned, or shrink if aligned.
ghidra doesn 't doesn 't recognize the bytes "9f" and "9e" for x86_64.
ghidra doesn 't doesn 't recognize the bytes for x86_64.
these bytes disassemble as "movbew %cx, (%r15,%rax,2)" in objdump and "movbe word [r15 + rax*2], cx" in radare2.
copying or creating a new structure, using replacewith(dt) and then clearing/deleting components results in structure with the same components as the original dt.
the decompiler is not handling pointers where segmented addressing is used correctly.
firstly if it has the segment register, it emits code as: phofcode if it sees data references to pointers passed as near values - it does not figure out to use the data segment register automatically when probing regarding them (but should never probe a near pointer without filling in a segment register as its non sensical in segmented code): phofcode and have no symbol but ds:0x0034 and ds:0x0278 do have a symbol and that would be the correct output these are basically 2 separate issues though they relate to the same area of segmentation.
for data segment not being used to address ram, compiler spec in fact has a special snippet already deal with this case: phofcode but gets ignored within decompiler.
coreaction.cc: - does try using constant resolver which should resolve it.
a request is sent for correct address and data is sent back but then ignored.
it followed by raw ram address which replied with hole, then even ds:addr 16 bit shifted (instead of 4 bit shifted like cspec resolver correctly tries first) even tried.
at which point gives up displays as ram.
but resolver should have accepted first request where symbol was provided.
in fact same file may also have first opportunity clean up unaff_ss detail - but its not constant value its register variable joined.
a path traversal vulnerability exists in restoretask.java from package this vulnerability allows attackers to overwrite arbitrary files in the system.
to achieve arbitrary code execution, one of the solutions is to overwrite some critical ghidra modules, e.g., decompile module (in this case we need to know the installation path of ghidra).
an uncaught exception occurs upon renaming undefined functions.
running ghidra causes gnome-shell to use 100% cpu
decompiled floating-point literals seem to cap at max fractional digits, which results in small enough values being displayed as
in x86-16 files such as the ne (new executable) format for windows where external symbols to dlls are loaded, the decompiler for whatever reason is being informed of external references but not querying to get the details needed for naming and type information.
instead the raw decompilation contains names like
ghidra incorrectly disassembles certain `move*` 68000 instructions, specifically instructions where the addresses are sign extended.
for example, ghidra disassembles the instruction below (from ida output): phofcode as phofcode "the 68000 has a 24bit address space, allowing access to up to 16 mb of memory."
this differs from later 6800* variants that have 32-bit address buses
the x86 (important for 16-bit programs mainly) cs register is not recovered in the context properly by the decompiler after a far call is executed which has a different segment.
the loader currently attempts to place imports in the same segment so this bug is less likely to turn up.
upon continuing disassembly scanning after a far call, the cs register should be implicitly restored to current instruction pointer/program counter (ip) execution address which requires that cs to even do scanning.
but scanning proceeds without even needing context cs:ip values so until an instruction requests cs explicitly its not an issue.
jump tables specifically will cause this problem.
x86-16.pspec contains inexplicably: programcounter register="eip" where it should really be "cs:ip", and presumably this "eip and "rip" is erroneous x86.pspec and x86-64.pspec respectively as register still used address that instruction pointer.
i would point out stackpointer register="sp" in compiler spec and may have slightly different handling behavior as stack a useful construct not fundamental raw processor execution.
while analyzing a windows binary compiled with gcc, the symbols prefixed with their section followed by $ are set as the primary symbol.
this behavior causes virtually all symbols to remain mangled.
below is an example of the symbols at a function address.
privateframeworks analysis from dyld cache is broken.
under powerpc vle instruction set, the `e_rlwinm` instruction results in incorrect pcode which results in wrong output in the decompiler.
it also results in `removing unreachable block` warnings printed at the top of the decompiler output.
if a function takes a 64-bit float parameter and then proceeds to compare it to 0 ghidra considers the non-0 branch to be dead code and for parameter to be unused.
1) ida export xml plug in fails when exporting ida database when function stack variables have comments.
2) failure message itself fails to properly display failure message.
in the application logs some debug lines are written indicating that jad is not present so java decompilation features are not available.
however, i do not believe jad is used for java decompilation in ghidra at the moment, as it seems to work fine without it.
if some features are gated behind jad, i would suggest adopting another java decompiler as jad is deprecated.
this issue crops up when i import an apk on one project, and attempt to open it again in another.
i can import dex (and their corresponding decompiled jar/class files) just fine the first time, but afterwards files from that apk will not be available for import.
i believe this is a caching issue, as deleting the .ghidra folder in my home directory allows for imports to be made.
even if a project is deleted, or files from a project are deleted the issue still persists.
the current version of the devguide at phofurl states: > by default, the ghidradev project is excluded from the build.
to enable it, uncomment it in settings.gradle.
this is not correct, currently settings.gradle at phofurl does include ghidradev by default.
as a result, the "get dependencies for ghidradev" steps need to be executed always.
therefore, they should be mentioned in an earlier section of devguide.
ios devices ship with all shared libraries (dylibs) in a unified cache.
ghidra seems to offer the feature to import individual dylibs from a shared cache, but does not seem to parse them correctly.
i have downloaded the ghidra and jdk11.
changing the order of variables in function signature has no effect
compiling a slaspec that contain a bitrange definition produce a broken sla file.
ghidra does not disassemble many bytes for the test case binaries.
for example, at addr `0x8ac9c`, there should be code while ghidra will left the bytes as data and would not disassemble them
when renaming an (auto generated) type of a parameter, the decompiler of ghidra seems not to be aware of the refactoring that took place.
instead, it produces a low level error stating it cannot resolve the type with the original name anymore.
in arm, when a call is done by first loading the full address of the target procedure from a nearby literal pool, the call is incorrectly decompiled as an attempt to use a jump table.
i am creating a rule for the rxv2 mov instruction register operands.
i created a field called `ad2_2` to pull out the bits that determine the addressing mode: `00b` | `rs, [rd+]` `01b` | `rs, [-rd]` `10b` | `[rs+], rd` `11b` | `[-rs], rd` i want to handle source vs. destination registers a bit differently (let me know if there is a better way), so i created separate table for rs and rd operands: phofcode note that `rd_post` only has constraints for `mode_ad` values of 0 and 1.
`rs_post` only has constraints for values 2 and 3. the `rd_post` table worked fine, but `rs_post` did not and exhibited really strange behavior related to the `mode_ad` constraint.
the instruction definition that uses `rs_post` looks like this: phofcode after lot of fumbling around, finally found that `rs_post` table setup would not work unless constraints values of 0 1 were defined: phofcode
the decompiler fails to optimise an if condition where the sequences of instructions in the tittle occurs; the decompilation is correct, but much more complicated than what should appear.
it is possible to get ghidra working through a nat however checking out files always fails, the files download but the server never registers that they have been checked out.
all other functions of ghidra work with this.
when working with pic18, the decompiler seems to not correctly represent the carry bit assignment across function returns.
pdb.exe uses the dia sdk to read pdb files.
this is a com based set of interfaces.
com interfaces must be released when of no more use.
the current version of the source code doesn't enforce this rule.
consequently objects allocated by the dia sdk are not released until the pdb.exe program comes to an end.
this may lead to huge memory use for pdb files of some importance.
pdb.exe may silently crash due to a buffer overflow leading to an heap corruption.
the resulting xml file is incomplete and thus malformed.
this is later exhibited as a fatal error in the ghidra interface when using the this is not related to issue #343
the decompiler produces wrong output in (at least) aarch64 mode, when processing static variables declared inside a function,
take any elf64 file using powerpc64 and 32-bit addressing.
i was using but any ppc64 language with 32-bit addressing will suffice.
this is handled by it satisfies this check: phofurl however when `procesself` is called then this check is included: phofurl which fails since it is equal to 32. this may just be an unimplemented feature (i would need to see what assumptions the class makes), but we can clearly see that files imported using this ppc variation are not properly processed.
in the python window, i can copy and paste within the input line, but i can't copy out of the output.
getting an error message after clicking the "print" icon in help.
> illegalstateexception - this function should be called while holding treelock the print dialog does open up alongside the error message, and printing does work properly.
i 'm compiling my processor spec with "./sleigh -a <processor_dir>".
i have the following warning: > warn 4 nop constructors found (sleighcompile) >warn use -n switch to list each individually (sleighcompile) trying again with "./sleigh -n -a <processor_dir>" i get: > warn nop detected at null (sleighcompile) > warn nop detected at null (sleighcompile) > warn nop detected at null detected at null 4 constructors found which doesn 't help me.
i want to know what line i have a instruction.
ghidra has a "tip of the day" phofhyperlink where it claims that the largest diamond ever found was carats.
according to wikipedia phofhyperlink (which of course is unquestionable truth) this would correspond to the cullinan diamond phofhyperlink , which is the largest * gem-quality * diamond.
however, largest diamond is apparently a non-gem quality carbonado named sergio phofhyperlink ) that weighed 3167 carats.
i think tip should be changed to either refer to sergio or qualify statement so that it remains accurate.
in 9.0.2 release, when importing an xml file containing structures, several exceptions are encountered.
these exceptions appear to be caused by four bugs or typos in the idaxml.py file: 1) lines 3447 and 3517: phofcode note that "namspace" should be "namespace".
this generates an exception.nameerror with the description "global name 'namspace ' is not defined.
2) lines 3097 and 3101: phofcode note the idc.set_member_cmt method takes four arguments instead of three.
i believe these calls should be phofcode instead of phofcode .
using the idc version of set_member_cmt generates an "exceptions.typeerror" exception with description "set_member_cmt() takes exactly 4 arguments (3 given)"
while trying to use findbytes is thrown due to the presence of b ' x28 ' or b 'x 29 ' in the bytestring parameter.
on 32bit x86 when calling __stdcall functions through virtual tables (microsoft interfaces for instance) the stack analysis is breaking down.
can 't add a keybinding to close the current window/pane.
the demangler generates an empty placeholder struct every time it demangles a symbol.
this occurs even when the dwarf information has already been loaded and parsed.
when importing a c header file containing an enum which defines at least one of its values as an explicit negative number, that number is silently ignored, causing incorrect values to be assigned to subsequent entries.
when parsing a spec that contains a macro with a label-related error, the error message does not contain enough information to easily debug the error.
when running `file`->`parse c source...` ghidra fails to parse: phofcode (condensed to a minimal working example) the problem is the `(*base)` changing this to `(base)` that is: phofcode allows the parse to correctly parse it.
also changing it a `(+base)`, `(#base)`, or even `(,base)` allows the parser parse it.
in arm assembly generated to iterate over multiple struct field arrays in a loop, ghidra has difficulty labeling the struct field accesses correctly.
a __cdecl function is recognised as __stdcall
simple loop is ignored in the decompiler view.
the graphic for the first icon in the .rsrc section is rendered correctly.
the remaining five have blue where there should be yellow.
ghidra does not find references to a struct field when it is accessed through an array that is indexed by a field from a different struct.
on windows 10, when using the look & feel option _cde/motif_, it appears that all text edit fields stop to support the common shortcuts and for the clipboard operations copy, paste, and cut, respectively.
an arm binary has a function which is encoded as <typeinfo_cmt>int __fastcall addcmd(_dword base)</typeinfo_cmt> in the xml file.
when ghidra tries to import it, it errors: line #11332 - unable to parse function definition: int __fastcall addcmd(_dword base) when i change the "_dword" to "int" in the function definition, the xml import works correctly.
when a read of a volatile memory region is followed by a sequence of zero-writes, the read is silently dropped from the decompiled output.
this issue applies on windows when the user has enabled focus-follows-mouse without window raising.
with that setting, as you move the mouse pointer, the window under the pointer is activated but not raised.
(you need to click to raise window.)
when a ghidra window is activated automatically as user moves mouse pointer over it, it seems ghidra raises newly-active window, obscuring any other ghidra windows.
it should not do that.
when ghidra raises newly-active window, it moves to front of other windows, but not in front of other programs that might be running.
for example, if you have several windows open plus notepad, with notepad on top, notepad window remains on top as you move mouse over different windows.
decompilation of dex files stopped working on ghidra 9.0.2. now i get errors like: `xml processing error: unknown attribute: metatype` or `low-level error: unable to resolve type: activity.initactivity` in decompilation window.
nearly 300 warnings are shown when compiling pdb.exe of ghidra in visual studio 2019. of course, not all warnings are actual bugs, it's still good engineering practice to kill all of them and prevent future bugs.
there is a buffer overflow in the native windows pdb.exe binary due to an unchecked call to `strncpy` in `pdb/cpp/util.cpp` phofhyperlink
after loading the binary and maximizing the window, ghidra (ui) completely shits the bed and it becomes unusable, which sucks.
on the same code example i used in #304, i found that if i define some value in the disassembler, the decompiler will not use the equate value
when building the javadocs for ghidra, a range of errors and warnings are reported.
errors such as `attribute not supported in html5: name`, `malformed html` (when using `<` characters).
following the build instructions outlined in the devguide phofhyperlink , an error is reported during the *import gradle project* step, namely: phofcode
this is indeed a buggy behavior since for linux/unix systems and especially other than x86 the default have always been __cdecl.
a fact established in the late 70ies.
it might be that __stddecl is defined as __cdecl on these architectures, however it makes no sense since there are actual pe/coff files for wince/nt for a dozen of platforms that might use that convention.
i installed the 9.0.1 on my x86_64 ubuntu desktop, created a new project from scratch, and imported a shared object (library) compiled for an armv7l target that contains multiple object files.
i am still seeing ghidra get confused about what symbols are where due to the incorrect offset.
when i compare the output of objdump for the same file and run armv7l target itself, i can see that ghidra has disassembly for function diminuto_cue_debounce correct, but because of incorrect offset, it places it in middle of an entirely different object module diminuto_controller.o and proceeds to interpret variables as if they were in that module (e.g.
remarkably, decompile for diminuto_due_debounce seems reasonable.
similarly analyzed same shared object but compiled two different x86_64 targets (one which was host on which ran ghidra) and both disassemblies seem correct; don 't see incorrect offset disassembly interprets variables correctly.
some instructions in disassembly cannot be identified, my program is powerpc 32 bits.
after a python script fails to execute due to an exception, it appears that some memory is not being freed.
when using the default `createlabel` method exposed to the python api, it will not correctly set the new label as the primary label even if `true` is passed for `makeprimary` on a function.
it does seem to work at any other point in listing.
maybe i'm doing fused register parameters wrong, but when a named function parameter is split between more than one register (e.g.
`ax`/`bx` for a 16-bit value), the disassembly treats both registers as that name, rather than a subpart of that name.
cmpxchg seems to confuse the decompiler quite a bit.
the decompiler throws the error when attempting to view a function that utilizes java 8 streams.
the original identification was that "bne decodes as lsl in arm mode"... but upon closer inspection, it appears the decoder is changing into thumb mode without apparent cause: xref[1]: 00 00 54 e3 cmp r4,#0x0 00 00 53 13 cmpne param_4,#0x0 009bb91c 01 lsl param_2,param_1,#0x0 009bb91e 1a sub param_1,param_1,param_1 when it should decode to the following: (from vivisect) cmp r4,#0x00 cmpne r3,#0x00 bne clearly the first two instructions are being decoded correctly, but then ghidra is decoding next instruction as thumb lsl (btw, if imm5==0, it 's supposed to be a mov instruction).
"find text" highlight in decompiler is not cleared after clicking a different line or closing the "decompiler find text" dialog.
the decompiler crashes and pops out several windows with the same info.
using the patch feature on a cmp.w instruction creates an incorrect instruction.
ghidra tries to automatically open pdb files from the location stored in a pe file, which could pose a risk on windows, since using a file path that points to a windows share could leak ntlmv2 hashes and also provides possibility for an smb relay attack.
the function signature editor doesn't have the ability to understand flexible arrays, this seems to be due to the way it's parsing the text field, however it's also not possible to set up a flexible array in the custom storage options.
when marking a function as returning a char * and accepting 2 char * parameters (strcpy) the stack analysis seems to get confused and decompiler output becomes wildly incorrect.
the font setting resets (only for certain fonts?)
when editing a function, uint32_t, when formed by ax:bx or cx:dx, keeps changing to 2 bytes.
a clear and concise description of what the bug is.
in many cases, instructions that reference data segment addresses do not result in assigning symbols in the data segment.
option `automatically save tools` (in main window of ghidra: `edit -> tool options... -> tool`) is set between restarts.
i try to analyze some pwn challenge phofhyperlink with ghidra.
and it looks nice at first.
image phofimage but if i try to disassemble that last cmp instruction's opcode with another disassembler... it looks like this.
image phofimage my gdb and ida and intel manual also agree with above result.
i don't know the reason but there are some problem in local stack variable recognition.
ghidra correctly recognizes the structure.
then it seems to categorize the `guardcffunctiontable` as containing an array of `imagebaseoffset32` (`ibo32`) entries.
when running ghidra, the font rendering is really bad on linux (have not tested on other oses).
after clicking on the "diffview" button in the code browser, and selecting another file to compare against, an "uncaught exception" is reported and the "diffview" fails.
whenever i run the version tracking tool, i get the following message: ``error constructing plugin: class the tool window appears, but it is empty - there are no plugins loaded.
6502 has an instruction: lda addr,x and lda addr,y which loads the assembler with the contents of address (addr + x) or (addr + y).
when this is disassembled sometimes the results has a label, sometimes it doesn't.
an example is shown below, from the same binary: phofcode as can be seen, entry at 0x78f uses 0xc00 whereas entry at 0x79a uses label $dat_0c00.
looking at instruction info dialogue, it appears that on one with a label it decides that 0xc00 is an address, but doesn't on one without a label.
in all cases with 6502, 0xbd means that passed 16-bit parameter is an address.
i have a pdb which is has root elment like this `<pdb age="4">` somehow ghidra execute consoleapplication1.pdb which produce phofcode which does not parsed correctly inside pdb loading process.
instead of that produced error message with indication that pdb.exe should be recompiled, which is misleading at best.
there does not appear to be any horizontal scrolling available in the built-in script editor _when multiple files are open in the editor_.
the only workaround is to resize the window/pane.
when i opened a relatively large xml file generated by ida, ghidra could not effectively recognize that it was an xml file, so i could not properly import a file.
i switched to a smaller program and tried to open a smaller xml file corresponding to ida, and ghidra was able to recognize that it was an xml file.
therefore, i think there is bug in the place where ghidra imported the file.
after applying this patch phofhyperlink to be able to load chrome.exe.pdb (latest version, can be retrieved using `symchk` from phofurl the generated xml file is chrome.exe.pdb.xml.zip phofhyperlink .
the following error appears: bug screenshot phofimage
as the title mentions, the mouse/trackpad scrolling speed on the python interpreter pane (maybe in others, but it seems there are 3 kinds of pane: one for source editors, one for treeviews and the rest?)
if you make it very small, scrolling goes by a fraction of a line, but if you make it almost size of screen it will skip many lines at a time.
after downloading ghidra and jdk, ghidra shows a cliiped/glitched version of the full gui.
i had to click around randomly to even get passed the welcome screen.
starting ghidra is not possible with more than 2 monitors.
it is possible to start with 2 monitors and then enable the 3rd one afterwards.
so i suspect that the "loading banner" is causing the problem.
ghidra doesn't recognize intel `xsaves, xsaveopt and xrstors` instructions, so it cannot disassemble the byte sequences of those instructions.
the byte sequence of xsaves is `0fc729` xsaveopt is `0fae31` xrstors is `0fc719`
this byte sequence, is a valid indirect call instruction on amd64, but ghidra cannot recognize it.
the key binding for the data "recently used" action (from context menu `data`->`last used`) is reset between restarts.
ghidra seems to not like the executables that are written in visual c++ compiled with visual studio 2017 enterprise.
in particular it does not recognize the library functions (e.g.
printf) (in contrast to that it works for the basically same code compiled with gcc version 5.4.0 (ubuntu also it seems to not recognize objects of type 'const char * []' or in other words a array of strings.
additionally it seems like its discriminating for loops.
the version tracker tool displays the number of matches in subwindow titles (at least).
these numbers turn negative even in case of binaries with moderate sizes.
i assume this is due to java treating all integers as signed by default.
in particular, seems to return `int` (signed datatype), which is then used in for example.
a trivial solution would be to change the return value of `getrowcount()` to `long`.
when creating structure with union of pointers to another structure on disasembly it appears to be shown incorectly in disassembler.
the native behavior on macos when triggering the right click (two finger tap) context menu is that even if the mouse cursor it moved a bit, the context menu still appears.
in ghidra the context menu only appears if you keep mouse cursor on exact same position.
in the decompile window, there is a context menu option for "auto create structure" when right-clicking on numeric values added to variables, such as the 0x38 part of "pcvar3 = *(char
when using the search box in the ghidra docs (ghidraapi_javcadoc) and click on some result line, navigation is redirected to a wrong address resulting in 404.
cant disassemble powerpc32 vle : phofcode
window corruption in codebrowser and program manager.
on 32 bit x86 architecture (and possibly 64bit), msvc generates a specific pattern to test equality to zero of floating point numbers (see: phofurl this pattern is incorrectly decompiled.
ghidra is not finding symbols in my symbol server that has 2-tier hierarchy enabled.
see more about this here: phofurl basically, instead of just having a root that contains pdb directories, there is an intermediate level with the first two letters of the binary.
so, kernel32.pdb will be under (for example).
when i try to import certain binaries, ghidra warns that it can 't find some referenced library files.
except, when i look at the locations where it says they weren 't found, they 're there.
gui becomes unresponsive for an unreasonable amount of time when analyzing the attached file.
attached file consists of a single function that has its stack frame initially set to ~1600 local vars of type undefined1.
after a couple of minutes the ui becomes responsive, but if you click around in the decompile view it freezes again.
when executing ghidra from a given path the java process working directory is set to this path.
then, when launching python interpreter located in "ghidra codebrowser" -> "window" -> "python" ghidra will try to execute an arbitrary file "cmd.exe" located at the attacker choosen working directory.
when you create a second byte mapped memory region from an already byte mapped region, the data appears at the new memory location, but will not disassemble.
ghidra cant disassemble powerpc32 vle : phofcode ida prints
the method equals(...) in varnode.java is implemented incorrectly.
as a result, standard collections such as (hash)map will allow duplicate keys or fail completely.
i wanted to parse header file with types, enums, arrays etc.
and faced with the problem that if array doesn 't contain a comma after the last element, "parse c source" command fails.
the header has "architecture" spelled incorrectly, and references document `md00097` while the actual document id is `md00087`.
i was unable to find any `md00097`, while `md00087` is indeed "mips architecture for programmers volume ii-a: the mips64 instruction set reference manual"
when using the 'memory search ' from search > memory, the 'wildcard ' option doesn 't work as intended.
it seems like it 's replacing "?"
with 00 instead of an actual wildcarded value.
when all function decompilation analysis options are disabled ghidra applies decompilation analysis anyway.
ghidra attempts to open a file in its installation folder in write instead of opening it in read-only.
project open/restore is susceptible to xml external entity expansion attacks.
this can be exploited in various ways by getting someone to open/restore a project prepared by attacker.
compiling a specific c code with the default gcc/clang on macos 10.14.3 makes the analysis fail.
although ghidra was able to find a class name and it appears in the disassembler, the class name does not show on the decompiled view.
in an i386 elf binary, an got entry is incorrect which leads it to display the wrong symbol information.
if a string is present in the binary with valid html tags it is being rendered in the "string value" window.
the <script> tag does not seem to be executed, but i didn 't spend a lot of time messing with it.
i am running it on a 43" 4k monitor with scaling set to 150% and every window that opens in codebrowser is partially off the screen.
to move it back on screen i use alt-space, select move and use keyboard to move it back down.
if you import an elf binary with the format as `executable and linking format (elf)` and then export that binary, it creates a corrupted binary that segfaults.
however, if you import it as "raw binary" and manually select the language, then the exported file works as expected.
link does not exist to dev guide
the "_windows x86 pe exception handling_" auto-analysis pass is extremely slow, to the point of making it unusable.
after auto-analyzing an x86_64 elf go executable (the hello world program from phofurl several error messages are displayed (see the 'additional context' section below)
on hidpi displays on linux, it is necessary to set gdk_scale= for a reasonable experience with openjdk apps, but setting this variable causes clipping of ui elements in every window.
when i click on a link in a webview in android `stoploading()` does not do anything.
setting the `css` property on page will apply styles globally when the page
it seems like css properties like `margin-bottom: 50px;` override their shorthand counterpart `margin: 0;`.
i've only tried on android with angular.
i 'm developing the app with tabs with images.
but all images are broken when i navigate to other page and come back with back() function.
for regular components, using renders a component over the current component.
when this is used in the views loaded modally, nothing happens.
an attempt to use css animation on `border-color` seems to crash the build or throw the following exception: phofcode i 've not tried it on ios, only android.
the error occurs on android 9 on a google pixel 2 xl and emulators.
changes in elements tab doesn't apply after livesync
on android, negative line height moves text lines together.
on ios, negative line height has no effect.
the bug is a runtime error on android os.
it only occurs if the navigation is performed within a frame of a tabviewitem using the animation-type "slide".
if the animation is disabled or performed outside of a tabview the error does not ossur.
after navigation to page containing listview (with slide animation) app must be put to background and activated again.
a tap on first list entry "destroys" layout (using listviews itemtemplates).
a second tap crashes app: phofcode
after upgrading my nativescript project to 6.2, our application crashes with the following error: phofcode this only affects the android version of the app.
the ios version launches without any problems.
using tab navigation inside a sidedrawer navigation with nested page-router-outlets breaks the ability to interact (e.g.
tap the nav button to open sidedrawer again) with the actionbar inside the tabview after using routerextensions back().
this applies only to android.
using core modules version 6.1.2 works fine for both platforms.
it seems not to be directly associated sidedrawer since you cannot tap any button in actionbar after routing back.
i am trying to create a simple modal in my app, but it opens weird.
it looks like it takes over the entire screen (can 't see the mobile carrier or the clock on top of the screen).
then i opened playground view (creating a modal page), and modal view behavior is same.
even if modaldialogoptions property, fullscreen is set to false or true, modal view opens fullscreen.
i presume this is a bug.
changing accessibility font-size within the context of a bottomnavigation causes a runtime error.
in version 6.1 and 6.2 there is a bug that if a textfield has focus (cursor active in the field) when you navigate to a new page and there is a transition specified in the params object, the animation occurs incorrectly and turns the page that you are leaving all white, then when going back one page in stack, page that was navigated from is blank.
action bar always has extra padding on top even without status bar
when i tap on a button inside scrollview which is inside radsidedrawer, the tap event does not fires on android.
background color and border are not applying to elements with height longer than 2048 (device 1) and 2730 (device 2) and 3075 (device 3).
i 've also tested this on android 9 and it works fine.
white screen on `tns preview` if you use class-component style.
if an angular project has dependency to "1.0.0", the build will fail because of a wrong version check throwing :
importing the `_app-variables.scss` file in a component breaks fontawesome for that component.
app crashes in nested frame scenario with mixed parent frame / nested frame navigation with flip transition.
trying to upgrade nativescript-theme-core says it requires platform 6.1.1 of ios.
when i run tns platform update ios i get: `the content of the current project file: and the new project file: is different.`
i installed sidedrawer template (angular project) and when i apply some changes in other pages like search (other than the home page), the changes are not going to be applied.
for a long time, tns apps has been around 10 mg with production build, and these flags: `bundle`, `aot` and `uglify`.
(this become more with `snapshot`) now an empty angular tab template is about 22 mg. that's really terrible.
i tested with both local build and could build.
what happened to nativescript platform since the last couple of updates?
app crashes at runtime when trying to set the day value of a nsdatecomponents object.
app crashes when touch event is being captured on the bottomsheet and the bottomsheet is being dismissed.
has been reported on repo earlier: phofurl
setting any border or border-radius to buttons (probably other elements) will remove their ripple effect on android.
we 've run into an issue in the ios version of our ns app - when you flick the finger to make a long/fast scroll and then you want to stop the scroll with a tap, tap event is triggered, which is not correct - it should stop scrolling only.
issue is not present on android.
hi, i 'm working on {n} 6.1.2. and i have a problem: * i cannot place transparency in my modal (backgroundcolor = "transparent" does not work in ios).
when use tabs and minimised the app (open some other app) the highlighter(the line under the icon and tab text) of the selected tab is changed.
it seems like first tab was selected one.
note: the content of tab is not changed, only highlighter.
app was building just fine yesterday.
this morning, it won't load onto the iphone.
`unable to apply changes on device: error is: cannot read property 'type' of null.` i don't know if this is a problem with the phone, with nativescript, webpack, or what.
does mac automatically update things?
did xcode change settings by itself?
i haven't opened xcode in several days.
i don't know what could have changed so am looking for guidance as to what it could be.
my build log looks completely different today, it's throwing warnings haven't seen before.
here are some of them: phofcode it then outputs a few hundred lines related to metadata and assets that it never did before.
when building for ios 13, videos do not show up in the view (but they _are_ there, and they do play, because you can hear the sound of the video).
you can get the videos to show up temporarily following way: "tns run ios" when app opens, and video isn 't displaying, change anything in file (like on xml page) when app updates and re-opens, video will be there.
however, any time you close app manually and reopen it, video is no longer there (but it plays in background again).
after updated the master with the latest `nativescript-core` refactorization, i was instructed to upgrade cli to at least 6.2.0. i upgraded it to @next.
after this, whenever i try to run the tests on ios i get: phofcode
after about 1 minute of back and forth in nativescript-angular radsidedrawer template, it gets crashed.
here is a video for a demonstration: crash.zip phofhyperlink
on ios, after open a third party app from the app (contacts, camera, ...), the gridlayout at the root (in `app.component.html) letting 2 children overlap each other.
nested `css-calc` and `css-variables` with fallback value give incorrect result.
label formattedtext doesnt work under repeater.
same works using listview (sample project phofurl but it doesnt work when used with repeater.
shorthandproperty instances can 't be listened for changes
i just installed the app in an iphonex (ios 13) and found out some pages don 't work.
actually i saw empty pages (with no errors or anything).
pages: item layouts, item reorder and reorder with handle.
it seems lisview doesn 't work in ios 13.
every time i work with nativescript, it takes about 15 minuet to start my project via tns run android.
it only gets faster when i deactivate my internet connection.
(about 10 sec) afterwards, changes in the code are quickly captured and the app is restarted at the usual speed.
i am working on the nativescript mapbox plugin.
my fork is here: phofurl the crash can be replicated using the included demo-angular app and e2e test.
since upgrading nativescript to ns 6+, i am experiencing a random crash when navigating away from a page containing a map and removing the map container when running with "markingmode":"none".
i do not know if the map plugin code is causing instability as i have not been able to reproduce this problem navigating away from other pages, but crash happens after navigation has completed and map view and object have been destroyed leading me to believe that maybe this is not my bug.
the object is quite large so when doing lateral navigation ideally want to destroy mapbox view.
do this by wrapping mapbox tag in container with an *ngif.
before navigating away *ngif condition set false wait for mapbox ondestroy return before proceeding with navigation (thinking maybe there 's a race condition somewhere.)
after random number of navigations between page test-crash page in demo-angular app, it will crash on phofurl when navigating /to/ test-crash page with error: phofcode cacheddrawable in this case not null on javascript side so suspect markingmode: "none" issue.
adding line of code javascript: phofcode causes on second console.log error can 't call tostring() null object.
we want to define platform-sepecific css styles like this: phofcode those styles are correctly applied for elements that are placed in a normal page, but they are totally missing in a modal-page for both android and ios.
(i have not tested .ns-portrait, .ns-tablet etc as we only need the platform classes at the moment).
nsstyleissue phofimage also, in the beginning of the gif you can see a strange effect for switch component on android: when clicking switch, it is colored blue for a short time, which is default accent-color.
this effect does not occur normal styles (without .ns-android).
im having problems trying to run the hello world template app using the nativescript source as described here phofhyperlink when trying to run the app i get the error attached in screenshot at end.
on simulators this seems to not be an issue and the function is almost instant.
so only on real devices.
have tested on iphone xr and iphone6.
i'm dynamically changing the app styles using `nativescript-themes` it works fine, no errors.
the issue is that the core-module function `addtaggedadditionalcss` in `style-scope.ts` here phofhyperlink is taking 3-5seconds to complete.
it's specifically the line link above on `fromsource` method.
current timing: console info csssource.fromsource: when this happens, app is locked up while this processes.
when opening a modal on ios, the background of the modal cannot be transparent to display the content behind the modal.
it is transparent during animation then at end a white background is added.
the default icon size in tabstrip compont is a big zu large for our use case so we try to define a custom size like this: phofcode the result: on some devices the icons still look very big, while they are too small on other devices.
google pixel 3: tabs_google_pixel_3 phofimage acer iconia one 10 b3-a30: phofimage the tab-icon with font-size 15 looks very different between different devices, while the same icon with sthe same size looks the same on every device when used outside the tabstrip component.
on ios it works as expected: when defining this: phofcode ... then icons have same height as usual text labels and icons look consistent through different devices and ios versions.
when a textfield is focused the app is freezing - happening on ios 13 emulator (iphone 11 max pro).
the application crashes runtime when `tns test` command is executed for newly created code shared application.
element custom attribute's styles are only applied on initalization but not on further changes.
font icons in bottomnav tabstrip aren 't very crisp for what a font icon should produce.
the order of execution of tap event handlers is inverted between ios12 and ios13 using ns6.
when trying to contribute to `tns-core-modules` and using an external ns angular app to develop / test these contributions, the compile step fails when following the instructions currently outlined in developmentworkflow.md phofhyperlink (running another app).
i have a similiar error as described in #7901 coming up after trying to migrate.
ios version runs just fine, only android will produce the following bug on regular tab switch (as described by poster in mentioned issue) when vuex store command has been used before.
in our app we need to load data, that should be visualized in tabs and we want to use the new tabs component for that.
navigating to a page that contains `bottomnavigation` (or `tabs`) + having phofhyperlink as a
a defined the styling of the tabstrip like this: phofcode and the result is: simulator screen shot - iphone 8 - at 16 11 30 phofimage
only on android 5.0, device crashes when we redirect to the page where the 'android-elevation ' property is changed.
the app crashes when setting the `selectedindex` attribute on the `bottomnavigation` component.
while the change is visible after restarting the app, it keeps crashing on each change making development quite painful.
i want to use navigationbutton to navigate to certain page, but it always returns to the previous page.
<navigationbutton text="back" both ways are not working.
hi, after updating to ios13 (also 13.1) when our application uses a webview it doesn 't get initialised and throws the following error: phofcode on ios 12 and android it still works as expected.
my app runs well in debug mode, but when i try to build it for release on android, the app crashes immediately after starting.
the same version runs properly on ios in testflight.
here is the logcat message that is produced when this happens: phofurl here is the out.txt phofhyperlink produced by adding the `--log trace > out.txt` flag to run command.
the second part which is possibly related, when i try to build in release mode with `--env.snapshot` flag, it fails with following message: `error: could not load css from app.css: typeerror: e not a function` followed by a longer error message which can be seen here: phofurl
with code below, a textview should be shown with links highlighted.
tapping on the links should take user to respective sites.
i get "attempt to use cleared object reference" errors in a few seconds with the markingmode = none.
(again: phofurl you have to change background colors of elements while navigating to a new route several times.
after a while it crash.
use case: change background color of current route in a menu.
* it dont crash when you only navigating * it dont crash when you only change background color * it crash when you do both * it dont crash when you change text color instead of background color quicker do lot of calculations in the app
when you rotate from portrait to landscape mode the styling of tabs/selection is completely messed up.
in the example below the second tab becomes unstyled when the rectangles that were previously styling tabs are moved and split first tab: screenshot at 0 42 29 phofimage
the listpicker is working on ios but not on android, when i try to load a page with a listpicker on it i get the error: phofcode searching in the code of this repository the problem appears to happen in the file line 175.
step 1: open a modal in full screen mode.
do the action inside modal and exit the modal with some data which is used to update the parent view display.
in this case the parent view updates correctly.
step 2: open a modal in full screen mode.
do action inside and exit with some data which is used to update parent view display.
the parent view is not updated now ui painting completely stops nothing refreshes on ui except it can open again it renders.
but exiting causes ui painting to freeze.
but you can see in logs that logic runs.
if i click on a button which navigates to different page, whole routing and transition logic runs but ui is not painted.
the project runs successfully in android environment.
when i try to run in ios environment by issuing "tns run ios", i have the following errors: error: property not found on object of type 'uicolor ' _pickertextcolor = i have tried to remove everything by issuing this command "rm -rf nooks platforms node_modules".
then i install again using the following command "npm i", "npm audit fix", "tns platform add ios" and "tns run ios".
i still see the same error error: property not found on object of type 'uicolor ' _pickertextcolor =
just created vue+typescript app from and when i try to `tns preview` it dont compile.
in our real app we want to show circular avatar-images of our users within a listview and if the user has no image, we want to show a placeholder image while using a fontawesome icon as the source of the image.
phofurl phofhyperlink here are the problems:
the `translatex` and `translatey` does not sync with `left` and `top` property of the view.
which leads to strange behavior when implementing drag and drop like feature inside absolutelayout and gridlayout.
during the first drag - `left` `top` of properties are not updated - so that the view jumps back to it's original position at the start of second drag.
when i set "color" css property on list picker it crashes the app: i.e.
<listpicker style="color:#fff" [...] the exception occurs: system.err: calling js method oncreateview failed system.err: typeerror: is not a function
`no view controller managing visible view` error upon changing selected index in tabs component.
when the application is suspended during the transition animation, the following error occurs after resumed.
1) the screen before transition is displayed (though the actionbar displays content which is after transition) 2) $navigateto doesn 't work
when having a proxyviewcontainer as first child of tabcontentitem, the app crashes.
this is very important for angular.
when tapping on the tab strip tabs one by one, they get stuck at the second.
when tapping on the tab strip tabs one by one, they get stuck at the second.
after the latest release of my app to the google play store there has been an extreme increase of crashes & anrs reported.
there is one exception in particular that has most reports, and it appears to mostly releate to android 9.0. screenshot from google play console: phofurl stack trace from google play console (this is the entire log): phofcode
`tns run android` works fine.
`tns build android --key-store-path --key-store-password --key-store-alias --release` builds fine.
then on opening shows during half a second the splash screen and then crashes.
if an android button is not stretched and has short text, there seems to be some min-width set that can 't be seen or removed from css or element properties.
i created a new core typescript project (not angular or vue), i added a simple webview to a simple home page, but i am not able to open this page phofurl but i can open phofurl or phofurl in the webview in the nativescript app.
note that am building the app for android 9 64-bit and have latest version of phofurl
we see that error on some devices (huawei)
we want to use fontawesome-icons as actionitems instead of static image-resources, as we offer many color-templates in our app and changing the color of fontawesome-icons is very simple.
the problem: using the same icon with a fixed font-size results in different icon sizes on different devices.
i 'm not sure if it depends on the os version of the device or on display resolution,... phofcode phofcode hint: first actionitem uses a static image resource, like we do it in our real app right now, and second actionitem uses fontawesome-icon, way that we would like to use in future instead of static images.
the results: asus memo pad hd 7 with android 4.2: android_4_2 phofimage nexus 4 with android 5.1.1: android_5_1_1 phofimage nokia 5.1 with android 9.0: android_9 phofimage iphone 6 ios 12.4: ios_12 phofimage so you see that first actionitem (using static image) has always same size (in relation to whole actionbar) on different devices.
but second actionitem using fontawesome has different size each device.
normal view properties can be set from css in nativescript, but we can 't set `rows`/`columns` with a "*" value.
"*" is invalid css and the string "star" logs the error: phofcode
this bug occurs in android lower apis (android 7 and above works fine).
when you scroll in listview within the first tab and then go to the second tab, and when you come back to the first tab, the scroll position is lost.
sharing internet connection on ios breaks the layouts on resume.
t tsystem.err: calling js method oncreateview failed t tsystem.err: typeerror: cannot read property '__extended ' of undefined t tsystem.err: stacktrace: t tsystem.err: frame: function: 'extend ', line: 62, column: 15 frame: line: 79, column: 19 frame: frame: function: ' ',
on ios can 't use the regular and solid versions of font awesome 5 at the same time.
the buttons on the tabview are incorrectly aligned on ios 13 for the iphone 7 and 8 but not on the iphone x and xs max.
i have not checked for other devices or simulators.
simulators and devices show the same behavior.
see image for result on a demo project <img width="846" alt="schermafbeelding om 09 53 34" src=" phofurl
when you do phofcode with a phofcode and not a phofcode the phofcode is not called.
this is pretty bad because all js references are released, so native object dealloced but is not called.
for example will crash because it has an observer for key/value which has not been removed before the view was deallocated.
in the tabstripitem, if i set the iconsource parameter to a typescript variable the icon will not appear, instead will appear the hexadecimal code
if a textview has multiple paragraphs, when you tap on it to edit it and then dismiss the keyboard, a portion of the text gets cut out at the bottom of the textview.
my application use a worker to make a counter, when application is minimized or the device is locked works around 30 seconds and after freeze around 10 seconds and continue, try to use the minimal resources as possible but the issue persist note: the freeze only happens when application is minimized or device is locked don 't crash and don 't happen when application open.
tabstripitem title gets clipped when both iconsource and title are specified.
animate seems to be hard coded to a count of 2 no matter what iteration i set it to in the demo below.
be it infinite, 1, 3 100 etc.
since all changes to platform classes in #7606 are done through cssclasses property, they are not reflected in classname property, thus changing classname will overwrite them.
most of the time when i use the auto-import in vscode the import is a total mess and does not represent the actual path.
this on a newly started project with ns 6.0 and using long import paths.
after merging #7553 "feat: implement css-variables and css-calc" there is a limitation in the implementation of `css-calc` in nativescript.
expressions like `calc(100% - 10px)` are reduced to `calc(100% - 10px)` because we don 't know what the relative size of `100%` is at the time.
i have a textfield with keyboardtype="number" that i need to use to input currency values.
the problem is that the comma button is not available on android as a decimal separator, even if i change the device locale to a region that uses ', ' as the decimal separator (e.g., it-it).
the comma button appears on the android numerical keyboard, but does nothing when you press it.
i have noticed once i start a custom activity and navigates back to the main / default activity navigation doesn't work.
sometimes ui elements does not responds to clicks.
multiple taps on a button which changes `tabs`' * selectedindex * causes glitches.
using the clip-path css property when an image is dynamically loaded is not working, for example like this <image [src]="myasset"></image>
given we have a css selector like this: phofcode this is fully supported in browsers, however in nativescript when the css parser parses it, the selector is parsed as `.w-1` completely ignoring the ` /2` part.
in practice you would use these selectors as `<element class="w-1/2" />`.
the issue with them parsing as just `.w-1` is that if you already have a `.w-1` class, it will override it 's properties and lead to undesired results.
the runtime error i am seeing is as follows: 1. on the android version of the application, i start on a page, and do an unanimated transition to a second page.
2. from the second page, i do an animated transition to a third page.
3. from the third page, i call frame.goback() to go back to first page.
4. once on first page again, you cannot navigate anywhere and navigatedto event for first page and navigatedfrom event from third page are not called.
have a specific reason for using an unanimated transition from one page next in my app as well.
in a view, using conditionals on an `object.property` does not calculate correct result (or any result).
in my project i have created a login with a tab-base navigation according to the instruction phofhyperlink .
after i was upgrading and migrating my app to 6.0, the tab-base page after logging in is now fully blank, even without the tabview displayed.
unfortunately the log with option `--log trace` doesn 't provide any useful message as error or likewise.
similar to this phofhyperlink issue but calling the close callback still works.
the issue is that the modal's content is not changed accordingly to the changes and is not closed.
when you change the `selectedindex` programatically the tab actually changes but the styles are not applied, so visually the old tab remains selected and new one looks like unselected.
works as expected on android.
download file doesn 't work on ios since nativescript 6.0. on android all is fine.
if a module name ends in `.page` (i'm guessing `.<anything>`) you'll not be able to use it, at least not as a frame's `defaultpage`.
please see this playground example phofhyperlink .
the behavior of the `navigatingto` event is not the same for android and ios in the case of a `visibility="collapse"` frame-element.
for android, a frame that is hidden using `visibility="collapse"` will not have its `navigatingto` called, while the same frame on ios will have a call to `navigatingto`
uinavigationbar can 't be modified in `actionbar.loadedevent` event handler.
when i execute a css animation by set a class for example "active" via a tap-event, the css animation is triggered like excepted, so everything works fine.
but when i set this class by an android an back-button event, no animation is triggered.
even though the css class is set.
when doing an animation via code (for example translate: { x: 0, y: posy}, duration: 300 });`), it works fine.
when i tried to run the app via xcode i get following error: "framework not found i have tested the app with the "preview app" which works all fine on both platforms android and ios.
i have extended the nativescript template for tabview navigation: ( phofurl for use in my own app.
everything works as expected when navigating to the home tab and then to the item detail view, but i'm unable to navigate any further from that detail view.
i've tried myriad approaches with no luck.
when clicking to navigate from the detail view, there is no error; yet there's also no navigation another page, a further detail view so speak, with its own corresponding actionbar and back navigation.
the desired navigation would be from home tab -> item with listview -> item detail which is a corresponding listview -> item detail detail which is in depth item view.
or home tab -> item listview listview w/summary detail is this a limitation or am i missing some step?
this is a really strange issue.
when the bottomnav is loaded all looks correctly, but when you change the tab selection, the font of the text in tabs changes to some strange color that seems to have some alpha applied.
this is a rather strange bug.
if you have a `textfield` on the 2+ tab, and you have the `textfield.edtable` property bound to some value and the `autocapitalizationtype` is set to `sentences` (the default one), the text field never gets enabled.
if you dynamically generate tabs when the `bottomnavigation` control has a class applied to it, the applications crashes.
dynamically generating tabs that have an icon source set to a font crashes the app under android.
under ios make the tabs not visible similar to #7609
having some tabs defined in the xml and then changing them from code does not generate new tabs.
the tab bar appears to be empty.
this is after applying the workaround to overcome #7608
in android, after an app is suspended and its activities are destroyed by the os, upon resuming and trying to navigate the app crashes with an error of type `cannot read property 'goback ' of undefined`.
this happens when such kinds of calls are present in the code: phofcode
having an angular app with scss style sheets, when hmr reloads the components, it alters its styleurls from './comp.scss ' to './comp.css '
after upgrade from `~1.0.4` to `2.0.2`.
i can 't import a light theme using this `@import the error says... <img width="497" alt="screen shot at 2 10 21 pm" src=" phofurl
when running `tns run android --bundle` in nativescript 5.x after each save the android emulator would do an incremental webpack build and reload the app but after updating to nativescript 6 this appears to no longer work, the incremental builds happen but the app is no auto-reloaded.
this leads to having to stop build and re-run `tns run android --bundle`
nativescript has different casting rules compared to browser javascript.
(at least in timer.settimeout and timer.setinterval functions).
tab with nested frame is not completely selected.
method does not call its completion callback.
on ios when nesting tabs inside bottomnavigation the layout is wrong.
the content of the tabs tab doesn 't get to the bottom of the screen.
see light blue background in following image: screenshot at 10 24 44 phofimage
bold, underline, foregroundcolor and italic not working for label
i have finally released a nativescript app to the store.
ios is good, almost all versions of android are good.
however, someone downloaded onto a pixel 2 with api 29 and told me they couldn 't login.
i downloaded an emulator and sure enough, the http request never goes through.
this is my login code in my service: phofcode this is my login component using it: phofcode i 'm getting this on the pixel: there is a connection error.
in the debugger this what i see in headers on pixel: phofcode this what i see on emulators that are working correctly: phofcode it appears error happens instantly, as if it isn 't waiting for a response to come back.
why would one device not use http get call?
on ios tabstripitem font icon doesn 't get the element 's classes.
i 'm wanting to extend the ios app delegate.
i 'm integrating with a sdk called mobile pay ( phofurl and need to hook into the app delegate when opening an external app for payment.
i 've been using different examples such as and nativescript-urlhandler but for some reason the methods are never called when leaving the app and opening mobile pay app.
have also read phofurl snippet of code that is used to extend ios delegate: phofcode
with recently added css property, android-elevation and an android 5.0.2 (lollipop) device crashes on app startup.
the same app seems runs correctly on devices after android 6.0.
(we tested android 6.0 and android 9.0).
and even on 5.1.1 device, the app works without crash.
so we assume that there are some issues regarding to setting elevation on only 5.0.
on ios when `tabs` are wrapped in any layout, the tab strip isn 't laid out correctly.
runtime error when i import in a script executed in strict mode phofcode
app crashes when selecting tab with no relevant content item when there are more tabstripitems than tabcontentitems.
hello, i noticed that radsidedrawer is having a "lag" or some kind of delay on angular & android.
it 's currently not possible to open the sidedrawer via moving your fingers from the side to center of the device in a "normal speed" (like expected from other apps).
you have to slide your fingers very slowly to let the radsidedrawer appear.
running application on ios device fails with error > terminating app due to uncaught exception 'nativescript encountered a fatal error: error: failed to create file at path see full stack trace below, before error <img width="871" alt="screenshot at 04 11 35" src=" phofurl
cannot change text color for selected tabstripitem applied via "active" pseudoselector.
font icon does not update to active state for selected tabstripitem when "active" pseudoselector is specified.
after scanning qr code in playground in device logs is printed error for loading `app.css` but actually it is loaded and changes are applied.
the tabstripitem selected / highlight indicator is not visible in case tabstripitem background color is set.
i create listview (and itemtemplate) dynamically.
when i try to specify `height` via css for `itemtemplate`, items lose their height after scrolling.
after changing css file and after hot reload, styles don 't applies to listview items.
setting property `height` programmatically don 't work at all.
seem like on ios all works as expected.
app crashes in a scenario with frame -> bottom navigation -> frame (nested fragments) after you navigate forward from the root level frame and try to go back.
note the error occurs only if navigation is performed with animated=false (no transition).
bottomnavigation component renders empty space at the bottom (where tabstrip would be) when no tabstrip is defined.
calling cangoback() of routerextensions causes the following exception when using inside back button listener.
the parent expression shows [object object] when the project is ran with --env.uglify flag.
for example following code snippet in the label doesn 't work as expected: `<span }}" />`
i try to offer the opportunity to cancel a worker 's task, but i am not able to terminate the worker.
here is what i am doing: i start the worker script this way: phofcode this is the content of my worker script: phofcode on button tap, want to cancel workers task and tried two things: 1.)
calling _worker.terminate();_ from main-thread 2.)
sending a message "cancel" worker, and when worker receives this message, i try call _global.close();_ from worker both versions do not work, still see logs from task and nothing else happens.
btw, if change workers task something 'simpler ', like this phofcode ... then worker.terminate() or global.close() works as expected.
tap on a `tabstripitem` does not change to its `tabcontentitem` on ios.
navigating back on `ios` via the default _swipe back navigation_ removes all `actionbar` styles to the default `ios` style.
and if the _swipe back navigation_ event is started but not completed the styles remain changed.
when you call the event it emits fails to account for replaced items.
this means it accounts only for removals/inserts, but any replace returns an added count of 0
running the command `tns create helloworld --template tns-template-blank` results in a hang with no output for roughly half an hour before failing with the message `request to phofurl failed, reason: read econnreset`
i use programmatically created views and store/cache them in variable (not to parse every time) related with phofurl also looks like related with phofurl testgoback.gif phofimage phofhyperlink
after installing nativescript 5.4.2 i cannot compile scss to css files.
the app compiles but not scss and is not livesynced tns run ios --device --bundle
when a button's css class is changed at runtime, it does not respect the class' color property.
after upgrading upgrading the project, when i run, `tns run android --bundle` or `tns run ios --bundle`, i am getting `unable to apply changes on device: emulator-xxxx.
error is: cannot read property 'env ' of undefined.`
when applying a background to a label with a formatted string, the background is re-applied in the inner `<span>`s.
this is a problem when we have semi-transparent background, as you can see here: span background bug phofimage
custom components extending span are not rendered in formattedstring.
there are still some short imports in the http-request code, which may conflict with other libraries (i.e.
with the npm `platform` library)
the value of the property will not be updated correctly when we used nested objects
dialogs like `alert` and `prompt` not showing on the 2nd modal opened by the first modal.
but when i try to show the alert from the first modal it works as expected.
the app will crash when a new value in the listpicker is selected.
this happens when an observablearray with key-value pairs are used for the component's source.
error: http load failed (error code: -1200 [3:-9802]) task http load failed (error code: -1200 [3:-9802]) task finished with error - code: -1200 background: it was working fine until i installed "6.3.2" that a new build was created.
i started getting the error on all new builds.
here is the call using https protocol module.fetch(" phofurl note: i make the same request with arc and get a ok (200) response back.
i also noticed the build in using deployment target 9.0 by default.
any thing missing in plist file?
android: setting minminute, minhour, maxminute and maxhour, has no effect on spinners, all values can be selected.
ios: setting minminute, minhour, maxminute and maxhour.
hour spinner is locked either on current hour or value set by property "hour".
minute spinner is limited by min and max values.
none of these ides is able to analise the webpack.config.js file content which makes harder using alias and another configs which help developers to have a better autocompletions and error prevention, this bug causes "false positives" since the ides will show error that are really in there
real row height in pixels is muuuch bigger than set.
`tns device android` responds with "cannot find connected devices" with my galaxy s5 connected.
`adb devices` lists the device, and i am able run apps on this hardware from android studio, so i am certain that all the necessary setup is complete (app debugging enabled, usb driver installed etc.)
`tns run android` also fails with "cannot find connected devices.
emulator start failed with: command failed: -s 8ae6d329 shell getprop this is interesting because the device name listed in `adb devices` is "8ae6d329", so although `tns device` is saying there are no devices, `tns run android` seems to be trying to do something with my device regardless.
application is not deployed on the emulator.
i tried using options `--clean` and `--syncallfiles`.
the application is crashing on a real device on ios (iphone 7; ios: 12.2) after including this podfile: phofcode crash i am getting: unzipping livesync folder.
this could take a while... unzipped 51 entries in tns_modules folder not livesynced.
using tns_modules from the already deployed bundle...
component builder does not support codefile / cssfile / import with bundle workflow -- discovered in xml declaration tests here: phofurl
livesync tests do not pass when using bundle workflow (with hmr) -- they can only pass with `--no-hmr` flag
css not applied when creating label from code with bundle workflow -- discovered in unit tests app.
code-only custom components phofhyperlink do not work with bundle workflow.
note: seems the issue is typescript only -- works with js.
introduction of the webpack only workflow breaks the established development workflow in nativescript core team where we link a local copy of tns-core-modules in test projects and use it to run/debug test scenarios on mac osx (assuming behavior is the same on windows and linux as well).
when i do a `tns build ios --log trace` it builds successfully.
however, when i run `tns debug ios`, i run into this error: "unable to apply changes on device: ######.
error is: unable to find free local port.." now, i think it may be related to `fork-ts-checker`, only because it remains running when there is a fault.
using the non-legacy workflow leads to a silent failure for my android project which just hangs at the splash screen.
after trying the new workflow (and having it fail), i tried going back to the legacy workflow but kept getting a "error is: socket connection timed out".
i tried restarting android emulator, but error persisted.
the only way i could fix it was by either changing project name, or creating a brand new emulator image.
using a css class with leading dashes (e.g. "
--disabled") in the new bundler does not work.
if i update a css file while using the webpack bundler (soon to be required), the updates are not applied.
webpack does respond, outputting: >file change detected.
starting incremental webpack compilation... webpack compilation complete.
the only way to apply the changes is to stop the emulator and restart `tns debug ios`.
the code below doesn 't change the color of the status bar on android on navigating back to the page using or native android back navigation.
simultaneous multiple hmr replacement of page module during development crashes on android with the following exception: phofcode
on ios, the content placed outside the frame disappears after you open and close a modal.
when using application in worker thread, the app might crash when the worker is terminating and the application is sending a notification at the same time.
this is because nsnotificationcenter calls observer from main thread, and calls function in worker thread, while its deallocating observer.
which then causes invalid memory access and then crashes.
relevant code lines: phofurl phofurl
whenever i try to run test cases on my android emulators, i can see the results, but i receive a warning from test runner: `26 05 2019 [nativescript / 26 (8.0.0; android sdk built for x86)]: disconnected (0 times)client disconnativescript / 26 (8.0.0; android sdk built for x86) error` and i can`t see my results in the browser or the emulator, only inside the console.
application event subscriber does not work for android back button pressed event.
i have tried with legacy and it works fine, however it does not with webpack workflow
when you have a tap and double tap gesture recognizer on a view and you attempt to double tap, the tap handler fires.
the tap gesture event should not fire if you 're attempting a double tap.
take a look at the "additional context" for the commit that allowed this.
the nativescript theme provides some nice helper classes for margin and padding.
i wanted to apply a margin-top of 5 to my button.
i 've used `m-t-5` which simply did not work on my button.
when i 've checked, we 've already specified `margin: 0` for our button (`.btn`) class.
so first i thought it might be a problem of the the order the classes are applied but i could move them around without any success.
for some reason i came up with a solution by adding `m-0` to the button as well which does not make any sense for me but it works.
previous ns the following css created a transparent button for android (removing material ripple and shadow) phofcode
i have raised the bug here as i saw no other means of providing input.
in the marketplace, the demo "basic listview with images" has a bad link.
it links to a hispanic restaurant viewing application instead of the stated listview demo.
additionally, replacement application is broken.
i have fixed it here: phofurl
migrating to the webpack workflow causes unit tests to not run.
the overlay underneath dialogs causes colors to be wrong for the segmentedbar (and tabview icons) - see screenshots.
note the gray color for selected segment, but this is orange when a system dialog appears.
i 'm posting this early to get prepared for 6.0.0. i tried using the webpack bundler for my app and a lot of my styling ended up breaking.
it was largely in regards to background image and color on components.
hi bro, i wanna to use routereusestrategy to solve some cases but i got an error `can 't resolve all parameters for pagerouteroutlet` occur when the application is starting when i use `routereusestrategy` is there any idea to solve this one?
phofcode however, i can use `routereusestrategy` in android platform version 5.0.0 and angular 6 and tns cli <=5.1 log phofcode
setting view.androidelevation property should not require explicitly setting property (it should use its respective default value instead).
error typeerror: cannot set property 'actionbarhidden ' of null js: error context { js: "view": { js: "def": { js: "nodeflags": "rootnodeflags": "nodematchedqueries": 0, "flags": 0, "nodes": [ { "nodeindex": 0, "parent": null, "renderparent": null, "bindingindex": 0, "outputindex": "checkindex": "flags": "childflags": "directchildflags": "childmatchedqueries": "matchedqueries": {}, "matchedqueryids": "references": {}, "ngcontentindex": null, "childcount": 1, "bindings": [], "bindingflags": "outputs": [], "element": "ns": "", "name": "ns-app", "attrs": [], "template": null, "componentprovider": "nodeindex": 1, "parent": "[circular]", "renderparent": "[circular]", "bindingindex": 0,...
after upgrading the `nativescript` cli to 5.4.0 i can 't execute the `tns platform add` command.
<img width="1029" alt="screen shot at 5 10 44 pm" src=" phofurl
when the "double space to insert a period" shortcut in enabled, the textfield model is not being updated after the period is inserted.
when using `tns cloud` for ios release build it fails with error: `builed failed: too few bytes to read asn.1 value.`
master detail template crashes on ios simulator < 11 when scrolling the application.
`textfield`s take focus even when they have `.isenabled` and `.editable` set to `false`.
in some cases this will cause the soft input to rise to edit a field that is not editable at the time.
in the past month we've tracked 20+ crashes with this error: phofcode
when the keyboard is up, the safe area is showing above the keyboard, which doesn't make sense because there is a safe area below the keyboard.
the bug is visible in next image: safearea_and_keyboard phofimage
while debugging in chrome devttools if you try to change button's text from elements tab - the change is not apply every time and this is logged: phofcode <details> <summary>see more log</summary> phofcode </details>
the tap area is shifted down on the icons of a font on ios.
by tapping directly on the icon does not trigger any action, you must tap below the icon to start the action.
when setting up a gridlayout with percentages for rows/columns they appear to be treated as pixels instead of percentages.
kinvey android starting guide phofurl trying to add an android service written using the kinvey android config (gradle deps, etc.)
and the config works fine in android studio but fails with nativescript build.
as far as i can tell, `resetnativeview()` doesn't do anything.
i've run into a few very troublesome rendering issues so far, all of which would seem to require the ability to manually tell the app to refresh its views.
from this answer ( phofurl it would appear view.resetnativeview() is supposed to be able do something like this, but it never works.
so far, these are the two major rendering issues i'm running into: - updating label width: phofurl - re-aligning flex items: phofurl
in the past week we've tracked 80+ crashes with this error: phofcode
when a listpicker component is rendered with `selectedindex` property bound, it immediately emits an `selectedindexchange` even thought `selectedindex` has not changed.
on android, the listpicker continuously emits `selectedindexchange` events as the user interacts with the list wheel.
this results in ui jank when `selectedindexchange` handler performs a heavy operation.
the same problem does not happen on ios because ios only emits a `selectedindexchange` event once the user releases list wheel and takes finger off screen.
an observable change that is set/triggered on page load more than 500ms after load (delay with settimeout, http call etc.)
will not perform any ui change before after about 30 sec.
i 've only been able to reproduce on ios simulator with ios version 12.1 (currently unable to test on newer android versions), but it seems to work on ios 9.x (tested through playground).
i 'm trying to develop native-script app using quick-start guide with vue.js.
<tabview> is crashing on ios when `tabtextcolor` attribute is provided.
when doing a http get request for a xml resource in ios the response has status 200 ok but request crashes during parsing even though its not supposed to do any parsing: "status": 200, "statustext": "unknown error", ok": false, "name": "httperrorresponse", "message": "http failure during parsing for phofurl "error": { "line": 173, "column": 61, "sourceurl": responsetype is set to 'text ' for the request.
in android everything works fine.
i have debugged and found that http-request.ios.ts is the source of the crash at line 204: return code).tostring(); for some reason returns null which crashes .tostring()
i want to query an image via a restful api.
the api requires authorization information inside the http-header (authorization: key="<secret key>").
since the nativescript-angular httpclient does not support the "blob" responsetype phofhyperlink , i need to use the nativescript http module phofhyperlink instead.
the problem i 'm encountering is authorization.
when i send a request to api (see below) i get a 403 status code.
the authorization code is correct since i 'm using it in an other part of my app to request json data.
`startmonitoring` returns value the first time an app is launched and then when you turn off wifi on mac (returns 0 - connectiontype.none).
but once you turn on wifi again it seems to break and does not return any value to the callback
storing numbers in application-settings on android using the `setnumber` method may result in lost precision, overflow, or underflow.
this is due to the implementation storing the number as a float.
when `node_modules` folder is present and `hooks` folder is not present, `tns install` doesn't generate it, it only generates `platforms` folder.
that causes to build fail afterwards with not clear error message.
i create a foreground service which shows a notification and kill the app (intentionally i do not stop service) -> relaunch and app crashes.
the lifecycle hook `off` seems to be the cause?
hello guys, i am unable to broadcast a message from one part of an application to another, more specifically from an android background service to an angular component so one can work with it in the ui.
i am not sure if the localbroadcastmanager is not being instantiated properly or if the intent is even created.
i am trying to follow the approach, as described in first answer in here: phofurl and this documentation phofurl in ns terms i am sending message like this: phofcode but then never receive it (androidcontext, intent) => { received"); that.data = value*/); console.log("data + " + that.data); }); note: - the receiving end seems be okay, since can send broadcast directly via adb and component receives it.
phofurl additionally, it works when subscribe system messages.
so problematic part is in sending of messages.
showingmodally event doesn 't seem to run when modal is opened through a frame.
i 've run the exact example from phofurl under action bar.
- with "markingmode: none", errors "attempt to use cleared object reference" occur when i change the background color of an element in my app with a css class name.
- it doesn 't seems to happen when i change the color or the opacity, only the background-color.
- it doesn 't seems to happen when i use - my app freeze too often without "markingmode: none" i don 't know if it 's related to nativescript or nativescript-angular
when the app is running in foreground and i press the "overview" button on my phone, then select a different app (like "whatsapp" or my contacts) , then go back to "mydrawerts" (my-drawer-ts) and select any navigation page from from the drawer 's list of pages, the app crashes.
it looks like frame stack is empty and default home screen (frame?)
is not being returned, instead, undefined is being returned.
if the xml of the app 's first page (the one defined in the frame 's `defaultpage`) includes unicode characters outside of the basic ascii set (for example polish ``) then some of properties defined in xml get set to `undefined` instead of their actual values.
so far i observed this behavior with `returnkeytype` and `autocapitalizationtype` on `textfield`.
if properties are present in xml, nativescript tries to set their values to `undefined` (instead actual values defined in xml), resulting app crashing.
the problem doesn 't occur if there is no extended unicode character present same xml file and only occurs with very first page, only on ios.
i 'm finding a lot of app breaking bugs involved with ios and use of the layoutbase.addchild() and removechild() functions.
these issues include: - broken event listening - native buttons which show response to taps (change color) but no longer call the event listeners applied to them - broken styling - many views have completely broken styling.
updating the sass file (with no real changes) will regenerate them in place correctly.
the sass is correct, but not being applied correctly.
undefined nativeview this was the first of many issues i 've run into with ios.
a link to issue is here: phofurl
i have some code which switches out child views inside a layout base.
only on ios, and somewhat randomly, there will be an error : phofcode this is the line of code at which it happens: phofurl
when using html to describe items, segmentedbar doesn 't show any of the tabs and a runtime error is logged in console (ios only): _typeerror: undefined is not an object (evaluating `<segmentedbar <segmentedbaritem <segmentedbaritem </segmentedbar>`
i'm working on nativescript switch component.
i found an issue while applying background colors when the switch state is on/off (i.e, checked or unchecked).
based on checked property, the background color of switch should change.
after running `tns run ios --emulator` any changes thereafter appears to crash and reloading needs to be executed manually by closing emulated/virtual application and reloading it.
occurs after updating nativescript and plugins 5.3.0. see crash report below
running `tns deploy ios ` along with --device id is meant to install application on device.
though cli completes with message "successfully installed application ..." on device with id "xxx" the aforementioned application doesn 't appear in launcher, a quick search shows application icon however it can 't be launched.
if you add the css class to a view, it will not get the styling updates.
this may be an issue with the sass interpreter, or something else.
failure: build failed with an exception.
* what went wrong: execution failed for task > could not create service of type using
when setting a clip-path (for example a hexagon) on an image, with a background-color different to transparent (for example yellow) the image is not clipped on android, on ios though all works fine.
in our project we use a dedicated service that loads the images as we have to modify/intercept the http requests for the images to add authentication.
using background-url is not an option as we don 't have this capabilities there (additionally we use more advanced bitmap pooling, but that doesn 't matter much: have to stick src being set on image view)
the `layoutchanged` event does not fire on the ios platform.
on android the event fires as expected.
swipe/tap/pan ... are not recognized when triggered from child view
when building for an iphone 5c (ios 10.3.3), physical device, whenever the project is installed i am told tns_modules folder not livesynced.
using tns_modules from the already deployed.
if i build for iphone x (ios 12.1.4) i get no such warning.
on ios, navigating to a page results in the page content not extending to the action bar and leaving a large gap of white space.
user input such as a tap event will cause the page the redraw into correct format without white space.
label or stacklayout)_ has the `tap` event added, either in `xml` or via `object.on("tap", ...)` the event can not be raised by the `notify(...)` method.
i believe this is because they do not have the `tapevent` static property.
out of memory - leak ui out of memory issue - 6000 items
when setting the `presentationstyle` of the `showmodaloptions` to `popover`: phofcode the `closecallback` of the `showmodaloptions` is never called if you tap outside of modal view to close it.
after `tns run android`, the application runs when opened manually, but we are unable to debug or see any console logs because the app fails to start: phofcode below is a log trace from the newly created app: phofurl
when you try to recieve the device uuid on android the app crashes saying that cannot read property 'getcontentresolver ' of undefined.
but ios works perfectly fine.
when `textview` has fixed height and it is placed inside the scrollview at the bottom of the content then when we type more line than the height it does scroll to bottom automatically.
but to see top content there is no way other than erasing text.
scrolling inside `textview` doesn't work.
when i try to build or run a mobile version of my web app which is builded with angular via nativescript i get multiple compiler errors like: error ts2307: cannot find module this doesn't happen when i import the files from a relative path.
for example instead of: if i do will not get any errors.
even that the fix seems easy this is something that would prefer not to change as relative paths make our life more difficult if we want to refactor our app or move things around.
does anyone has a solution with this?
it happens only when build the app with nativescript cli and not with angular cli.
we are trying to set the font-size of the titles within tabview using the _tabtextfontsize_ property.
phofcode it is working as expected when navigating forwards to the page where tabview is located.
but when you are in another page and navigate
as shown in the screenshot, flexbox works on android as expected, on ios not.
on android, everthing looks like expected: phofurl (notice the heck at the end of the line, its not shrinked and completely readable) on ios, though, it doesnt: phofurl
different layouts fall behind the tabbar with the actionbar hidden.
(page.actionbarhidden) i have a feeling the change that was made with: phofurl has to do something with it.
changing padding of a label on ios at runtime does not apply.
animations on android seem to finish faster than on ios.
exception occurs on back navigation between single-frame and nested-frame pages: phofcode
i am using an android foreground service to keep the app running while in background with location tracking.
on application exit event the service is stopped, notification successfully removed from status bar.
the problem is that the app is still running - js code is still executing.
this does not happen if the service stopped manually, e.g.
by pushing a button, only then closing app.
on ios, the webview 's `loadfinished` event is never emitted when a dns lookup error occurs, meaning there 's no way to detect and react to this type of error.
forward and back navigation stop working in a specific scenario when navigating between nested-frame and single-frame pages.
randomly opening a modal will cause app to be unstable and subsequent modal opening will not work due to this stacktrace: phofcode
- with "markingmode: none", errors "attempt to use cleared object reference" occur when i change the background color of an element in my app with a css class name.
- it doesn 't seems to happen when i change the color or the opacity, only the background-color.
- it doesn 't seems to happen when i use - my app freeze too often without "markingmode: none" i don 't know if it 's related to nativescript or nativescript-angular
$parents['listview'] or $parents['repeater'] dont work as expected when used in conditional expression.
i am using a tabview as a direct child of a page.
when i open another application that uses location services and switch back into my app the tabview strip is pushed past the bottom of the screen due to the change in status bar height.
this is taller status bar that appears in these cases.
lluwh phofimage i can provide a sample image of issue if needed.
we found a problem on serveral getframebyid refrences, where nothing happened with our navigate calls.
so i investigated the cause and i found the following problem: - we have a frame as root with id= 'root-fame ' where we want to navigate on in later states of the app - if the user leaves app via "home" of android and resume app with launcher icon (not recent tabs) root-frame is new instantiated (with new dom id) - if we call old instance is given
the segmented bar title that are long cannot be aligned to center.
i've tried using text-align: center and others but it does not work.
in tabview, titles are center aligned but i cannot use tabview because it looks different on ios.
segmented bar: titles are right aligned.
image phofimage tabview: titles are center aligned.
use the syncallfiles option to sync files from this folder.
searching for devices... npm warn ajv-keywords@3.4.0 requires a peer of ajv@6.9.1 but none is installed.
you must install peer dependencies yourself.
added 83 packages in 8.127s found peer typescript 3.1.6 copying template files... platform ios successfully added.
v5.1.0 hook skipped because either bundling or livesync is in progress.
preparing project... successfully prepared plugin nativescript-angular for ios.
successfully prepared plugin nativescript-theme-core for ios.
successfully prepared plugin tns-core-modules for ios.
successfully prepared plugin nativescript-intl ios.
tns-core-modules-widgets project successfully (ios) building project... xcode requires a team id to be specified when building device.
you can specify the team id by setting the development_team setting in build.xcconfig file located in app_resources folder of your app, or by using the --teamid option when calling run, debug or livesync commands.
found and using following development team installed on your system: xuan nguyen xcode build... python version: 2.7.10 (default, oct 6 2017, [gcc 4.2.1 compatible apple llvm 9.0.0 generating metadata armv7 metadata generator arguments: "-output-bin", "-output-umbrella", "-docset-path", "xclang", "-isysroot", "-arch", "armv7", "-std=gnu99", "-ddebug=1", clang arguments: "-v", "-x", "objective-c", "-fno-objc-arc", "-fmodule-maps", "-ferror-limit=0", "-wno-unknown-pragmas", "-isysroot", "-arch", "armv7", "-std=gnu99", "-ddebug=1", error: unable to generate metadata armv7.
clang version 4.0.1 (tags/release_401/final) target: arm-apple-darwin17.7.0 thread model: posix installeddir: clang invocation: "-cc1" "-triple" "thumbv7-apple-ios9.0.0" "-fsyntax-only" "-disable-free" "-disable-llvm-verifier" "-discard-value-names" "-main-file-name" "umbrella.h" "-mrelocation-model" "pic" "-pic-level" "2" "-mthread-model" "posix" "-mdisable-fp-elim" "-masm-verbose" "-target-cpu" "cortex-a8" "-target-feature" "+soft-float-abi" "-target-abi" "apcs-gnu" "-mfloat-abi" "soft" "-target-linker-version" "302.1" "-v" "-dwarf-column-info" "-debugger-tuning=lldb" "-resource-dir" "../lib/clang/4.0.1" "-isysroot" "-d" "-d" "debug=1" "-wno-unknown-pragmas" "-std=gnu99" "-ferror-limit" "0" "-fmessage-length" "0" "-stack-protector" "1" "-fblocks" "-fimplicit-module-maps" "-fobjc-exceptions" "-fexceptions" "-fsjlj-exceptions" "-fmax-type-align=16" "-x" "objective-c" "umbrella.h" -cc1 version 4.0.1 based upon llvm 4.0.1 default target duplicate #include "..." search starts here: #include <...> starts here: end of list.
in file included from umbrella.h:2: in file included from in file included from in included error: attributesmay not be specified on a category @interface eaglcontext umbrella.h:553: fatal error: not found <libxml/xmlversion.h> ~~~~~~~~~~~~~~~~~~~~ note: using new build systemnote: planning buildnote: constructing build description
on nativescript with angular the radcartesianchart and radpiechart don't update when an item has changed.
i want the user to be able to change the properties dynamically.
on other components like radlistview or listview it works as expected.
alert dialog cannot be shown while modal dialog is being shown on ios.
using switch component in angular reactive forms causes `invalid boolean` error.
this is only reproducible on ios.
related with #6312 #6201 #6339 phofcode
in an angular app on android, navigating forwards and back sometimes causes navigation to stop working.
on ios, when you apply a border radius to an element with one border color, the border radius is applied.
if you try to apply multiple border colors to the element, the radius is not applied.
i am specifically trying to do apply a border-radius on a flexbox layout but i have also tried other ns layouts.
on ios if a nativescript app is opened during a phone call the layout is distorted by the addition of the call status bar at the top.
this appears to only occur if app is not running and is then opened during a phone call.
this happens on android when tapping the fab item, it should call the tap even, but it 's hidden due to setclipchildren property set to false on each element layout element through code.
the whole context is hidden somewhere.
i think it should be possible to have these elements z-index (in web) increased because now they 're shown but not functioning.
i would assume it happens to other elements as well if you were use on with other components.
using the create command for a new app, appear some npm warning
situation: you have a view that contains a textfield and a button, the textfield has a blur event and the button has tap event.
when you focus on the textfield, and then click on the button, tap event on button gets called, but not blur on textfield.
this is not expected/wanted behavior.
the textfield should lose focus and call blur before calling tap button.
if you set a `searchbar` `textfieldhintcolor` before setting a `hint`, the color will not be assigned.
this is very important for css styling.
you usually want to set the color in css and the hint in the code behind and css is always applied first.
i have a `textfield` with `editable` set to `false`.
however if i tap quickly on the field
the app uses a custom fork of nativescript-bluetooth with a lot of `javaproxy` files to extend the android classes seen here phofhyperlink the project also follows an xplat type setup for code sharing which i don 't believe is an issue.
the master branch of the project is live on the app stores, it runs and behaves normally and all functionality is there regarding the extended classes.
i 'm just not sure how to handle webpack with those files.
i 've looked at documentation on extending android activity.
@dicksmith has fixed some of basic webpack issues project master branch has, and his pr here phofhyperlink is where i 'm currently trying to make it work.
i 've added extended class files to `appcomponents` in webpack.config.js and result still same.
phofcode webpack does indeed resolve files with those paths.
prior correct path webpack would complain about not resolving.
i thought this was all i needed do make everything work with extended classes but have been spinning my wheels on it for a day or so now trying various attempts make classes accessible when app ran.
a nativescript plugin i build a few weeks ago is not able to be built any more.
i did not change anything since then.
it always says that there are conflicting android support libraries.
failure: build failed with an exception.
i was running the emulator (ios, ipad) for approximately a day and half (ie, starting the emulator and not stopping it for a day and half; the computer was periodically asleep during the time, but emulator was not shut down.).
at that point, it started having faulty router navigation.
specifically, (i) a navigation button would stop working and (ii) emulator would navigate away from a certain page immediately upon going back to that page (even though navigation had not been ordered).
navigation on app is done with router, navigation extras, active router.
it is very unlikely this is code error, because i have run same code multiple times on different emulators (and on my device), without seeing this behavior.
on running it again, behavior has stopped (and navigation is working properly).
so it seems likely to me that navigation "glitch" was specific to emulator, probably result of running for so long.
a breakdown in after running for so long not significant concern.
however, would be helpful to know whether others have seen buggy behavior in an open long time, as would help me confirm whether or there some hidden code problem, bug in router with nativescript, or an issue with ios back button.
i've created a gridlayout container which has a min-height, so it can grow vertically if the text content is too long.
elements in its cells should take the available space automatically.
only if i use fixed height instead of min-height it works as expected.
verticalalignment = 'stretch' has no effect.
listview doesn 't delete separator on android (pixel 2xl) but works fine on ios (iphone x)
ios textview content shifts up and gets partially clipped on every other newline character input
i 'm reading the device width and height on orientation change and the values reported are opposite of what they should be.
on landscape i 'm getting `width: 360, height: 640` and on portrait `width: 640, height: 360` using the following code: phofcode why is this happening?
is it a phone specific issue?
when rotating on an ios device (tested on ios version 11.4.1 and 12.1) after scrolling down the page until the top components are off-screen, items stack up.
the playground link below is using transparent colors to show the overlap but that and margins aren't necessary
when using a linear-gradient on page on ios (works on android) is making the v-template (or the list view ?
)in it invisible, but listener still work.
i can install a local plugin (containing a cocoapod project) with: phofcode then i can prepare prepare/build and everything works fine.
if i then remove the plugin, and re-add it, and then `prepare` again, i get this error: phofcode if look at that path, it doesn 't exist, as the error says (instead, the "app_resources" folder is renamed to "resources": which is the as first `prepare`).
simple test app that has an icon on the bottom left.
press it and navigate to another page.
press back and press the icon again to repeat.
i've narrowed the problem down to the navigation code (file main-view-model.ts).
if `transition` property is commented out - it works.
if that property is activated, then on navigating back to main page, whole page frozen - subsequent clicks never occur.
unable to install nativescript cli via npm.
it gives an error: cannot find module 'hawk ' i 've also tried npm i -g nativescript@5.0 which installs nativescript@5.0.4. this has the same error.
scss file changes do not propagate to playground preview via "tns preview --hmr" you can see the file change is detected but the change doesn 't display unless you restart.
i have a listview with a complex item template.
each item template is a stacklayout with some labels with formattedstring.
this labels are shown conditionally (v-if in vue) depending of the datasource structure.
when trying to scroll the listview, an exception occurs: phofcode
app crashes in nested frame scenario with mixed parent frame / nested frame navigation with flip transition.
android only: login dialog uses the usernamehint option as a placeholder for passwordhint, causing the same placeholder to appear twice.
android only: login dialog uses the usernamehint option as a placeholder for passwordhint, causing the same placeholder to appear twice.
on iphone 6 simulator there is a space between any layout and the actionbar, when the layout is inside a tabview.
the space is part of the tabview itself, because changing its background color changes the color of space.
this does not affect any android devices.
here is also a picture: simulator screen shot - iphone 6 - at 14 40 32 phofimage
after setting the `androidtabsposition` to bottom and changing the tab index using the `selectedindex` property the slide animation is still shown.
if tab is changed using tabview itself, animation is not shown, which should be expected behavior.
this will only affect android devices.
flexshrink= doesnt seems to work on ios.
i make a change to a typescript file and the javascript file is not updated.
there are no errors being reported in the typescript and the app continues to work, but changes that i have made do not appear.
our users should be able to use the "next" option of the keyboard to get to the next textfield while being able to scroll the page when keyboard is open.
problem: this does not work on our physical devices, it only works on android emulator.
we tested on following devices: motorola moto x play, moto z play, google nexus 4. we already added
when i set the background image property using css.
it works well on android and the full image is shown but when i run this on the ios simulator the image seems distorted.
i have generated release signed apk using following command.
`tns build android --release --key-store-path --key-store-password android --key-store-alias mykey android` release signed apk suppose not debuggable.
that means should not able to access data/data folder even on a rooted device.
when do the penetrate testing i found that the apk is still debuggable.
what that means is i can access data/data folder.
this leads to security threats.
please advice how to make non debuggable release apk.
<img width="363" alt="screen shot at 11 16 07 am" src=" phofurl fyi: i tried to manually set in androidmanifest.xml which seems not allowed though.
i 'm trying to create a component using flexboxlayout with a fixed sized rectangle to the left and a variant size label to the right with the textwrap property enabled, so if the right label text increase its length there will be a line break but that makes left rectangle to be narrowed.
the template layout is like follows: phofcode and scss file that style it is: phofcode this gives me following result: image phofimage but if i increase size of `#synchpointslabel` from 20 higher value (for example 24) that makes line break but also (and what i don 't expect) cut off width of green rectangle: image phofimage is like overflow of label text (that makes textwrap happen) is substracted in left rectangle.
adding a css class with classname updates the list of classes on the element, but the styles are not changing
icon fonts are not displaying, instead of displaying the mapped icon they display a questionmark in a box.
<img width="390" alt="screen shot at 12 21 38 pm" src=" phofurl
in a basic two-level list, where there are category headers and entries below, there is not a way to catch a click on the category header (at least in ios).
there should not be a place on the screen (especially in basic+common ui like list) where there is no way to watch (and isolate) user click event.
for example, take basic list of countries and cities as follows: phofcode the headers (the countries) should be clickable.
the common way to create such list in nativescript is using radlistview 's grouping function, described here phofhyperlink .
however, the grouping function "hides" the group header from html, so there is not clear way to attach tap event it.
other methods would include create two level loop using *ngfor, but *ngfor reportedly not stable for larger lists.
another method would be have two level (ie, nested) listview, but that also reported be unstable/non-performant.
in ns 4.2, applying a negative value to `margintop` on the parent element of a page would shift the contents of a page upward on both ios and android.
however, in ns 5.1, this only works for android.
i had a code before which worked fine: phofcode now in ns 5.1. this stopped working.
the ios property is coming undefined.
when a border radius is applied to an image, there is a very faint outline of a second border (for lack of a better word) outside of the border i actually want.
listview 's `itemtap` events not fired when listening to its parent `tap`
the bug happens instantly after back navigation on item.
i'm using default app template
navigating to a page when app resumes from background causes the app to crash with the following exception: phofcode
i know this has been raised before and i guessing it 's considered fixed as they have been closed but i 'm sure not the textview auto height is working as it should.
for example on the first return the first line of text gets cut off, then second return it 's all ok, but then third return it gets cut off again.
i.e every alternate return causes the text to be cut off as you see in gif below.
it 's a runtime bug.
application crashes with the following stacktrace: phofcode
then trying to provide label with number (like `somearray.length`), the ios version works nicely, but android refuses to continue work on the module and throws me this: phofcode
it appears that if a request fails to connect to the server (or doesn 't get a status code), it resolves the promise instead of rejecting it.
trying to encode a js string into a native one will get wrong data if js string has utf8 characters like '' this is mostly not shown by users as it is only happening when trying to transform js string to native nsdata or android byte[].
i do see this issue while using my fork of the bluetooth module.
i was trying to send js strings with a '' char and we were seeing wrong chars when using code from testencoding1.
i had switch the method used in testencoding2.
i would really much prefer the method from testencoding1 as it is completely native and thus faster.
i am investigating to use the htmlview in ios to show the html content.
however, i found there is an unexpected bottom pad
no uncaughterror event is raised for native ios errors such as
fragments) disappear when their parent is animated.
related to phofurl but the problem is not specific to tabview and is more general.
caused by phofurl -- arcane issue that google somehow marked as obsolete & won 't fix.
i have upgraded my package.json following the migration guide here: phofurl seeing this exception on what is missing here?
if i apply `linear-gradient` on layout, it flickers when the page loads (which has radlistview and remote data fetch etc), as can be seen in attached screen shot.
by flickering it means current layout becomes transparent and underlying layout becomes visible for short instants which gives a flickering effect.
screen shot at 9 17 44 pm phofimage screen shot at 9 18 04 pm phofimage
a label is not catching all the tap events when a project is run with "tns run android"
the following api is not providing data for eddystone beacons: phofcode
exiting tab item fragment disappears instead of executing exit transition while navigating from page containing tabview to a different page.
going back to the tab page works as expected -- tab item fragment executes its enter transition properly.
the type of the navigation transition does not matter (slide, fade, flip)
when running a typescript build.
if the typescript compiler fails to compile one of the ts files the previously compiled version of it is still hanging out in the directory as a js file.
often that old version will still provide a working app and tns debug command will move on to deploy to device with a partially updated version of your software.
this version is not state of your software before compilation error as some ts files were compiled correctly, it's mish mash code that makes it difficult to tell when compiler has exploded.
expected result: the tns command issues an error in console and prevents new native app from being deployed test device.
phofcode after a specific set of navigation actions in a nested frame scenario with slide transition and app suspend/resume.
nested frame content disappears after mixing nested / parent frame navigation actions with different transitions (e.g.
default transition for inner frame and slide transition for parent frame).
phofcode after a specific set of navigation actions in a nested frame scenario with app suspend/resume.
refer to phofurl on ios, the listview layout is rendered incorrectly, text is overlapping.
this is happening with the elements that are not initially displayed on screen.
this works fine with tns-core-modules version 4.2.1. on android, the listview works fine.
getting the ios uitextfield return always an undefined (i want modify tint color of the textfield).
if you use = true;` you can't control the color of the title with css like you can with a normal title like this `actionbar { background-color: #fff; color: #f00; }`
when a backgroundcolor is applied to a layout(child layout) inside scrollview layout (parent), then if the child layout containing the background gets cut off at the edge(because of no more visible screen), it will merge with the next child layout say another flexbox.
i applied margins & padding on right to prevent it, but it doesn't take its values.
in grid layout, the items at the bottom are expected to come on top.
this behavior is commonly used to layer items in nativescript.
the android button doesn 't obey this behavior, whereas the ios button does.
ios app crashes bcs of memory leaks.
memory do not reset when app navigates between pages.
tap events are being propagated to parent objects, even when = false;
when using a raddataform in nativescript with angular2, groups are not displayed.
using the linked playground example from the sample section below, the form simply displays the list of email addresses without any trace of grouping around email addresses and without any errors.
if this is a case of incorrect usage, then problem comes down to a lack of examples or incomplete documentation.
as a follow on, grid layout within form also does not work but that may be result issue with grouping to begin with.
running 'tns update 5.0.3' fails with the error 'could not update the project!'.
the output should state the cause of the update failure or point to logs that can tell what is happening.
as it is, there is no indication of cause of error.
currently the raddataform does not seem to support source objects containing list entities, but the error message seems to contradict this.
the error indicates both that an object of type jsonarray is not supported and that a value converter should be added.
even when a value converter is added, the following error occurs.
the error should indicate only that a jsonarray is not supported rather than suggesting that a value converter might solve the problem.
alternatively, code could support passing jsonarray to value converter to let it resolve list an appropriate value.
error: java.lang.error: dataformtexteditor does not support properties of type jsonarray.
please specify for your property.
method) method) caused by: org.json.jsonarray cannot be cast java.lang.string method) method)
just tried to run the hello world project.
it gave me an exception
when running the following command to install android avds: phofcode i get this: phofcode
runtime exception when trying to navigate phofcode
i'm trying to install a pod ( onfido 10.1.0 phofhyperlink ) with a fresh clone of nativescript-plugin-seed phofhyperlink .
everything works perfectly before i try to add this podfile phofhyperlink to phofcode , the app installs and builds with no errors.
but whenever i try to open the app it closes straightaway, no error or anything.
log trace doesn't give anything useful relating cocoapods or a nativescript issue.
when doing a scale animation on a stacklayout with an embedded label, the text in the label is out of alignment.
also the border-radius for the stacklayout is not working any more.
this happens for all curves (linear, easein, easeout, easeinout) expect for spring curve.
doing animation with spring curve shows everything correct.
issue appears on preview on ios device.
on android device both views are correct displayed, but animation after load is not performed, stacklayout just appears but do not animate.
when `isenabled` is set to false, you can't scroll through the listview on android, but you can on ios.
for some reaon the binding breaks when used with tabview , and async function , and reusing the same page in the tabview frames
im using vscode for debugging, i added tnsargs:["--hmr"] flag in launch.config from console i can see that debug is launch with --hmr, but what i noticed is when i update code or xml it gets updated and see webpack logs in terminal, but the app close and reopen again instead of staying open as it is the case with tns run.
also noticed that the change takes effect before app close and starts again so hmr work but looks buggy.
the bug happens with a brand new code sharing project on android build.
after creating a new code sharing project and running `tns run android -- bundle` or using nativescript sidekick the app with fail with errors in the terminal as well as shows logs and exceptions in mobile.
android app crashes after 'tns run android --bundle ' in my kde neon (ubuntu 18.04 base).
but no any crash in windows or macos with the same properties.
and cloud building also ok.
current version of template drawer navigation (angular) phofhyperlink doesn 't work well when running `tns preview --bundle`.
error: failed to find module: relative to: /app/
when running `tns run android | ios] --hmr` i get the following errors: [full log phofhyperlink .
the app (obviously), crashes on the device.
when running the same command without the hmr flag, app runs perfectly.
while running hmr on android and changing a module on different page than root, when it gets replaced - methods that should print out console.log for debugging purposes, doesn't trigger anymore.
you need to navigate back to the root component and navigate to the page that you have changed and which was replaced by webpack again for it to work.
creating a new angular project using the `tns-template-blank-ng` template, then following the instructions at ` phofurl fails to run the tests.
i can't figure out how to get tests to run successfully.
the last few lines of the log show: phofcode which indicates that tests never executed.
i tried renaming `example.js` to `example.spec.js`, i tried moving generated `tests` folder from `src` `src/apps`, i tried changing `files` property in `karma.conf.js` `src/
`@types/jasmine` requires typescript 2.8.4 but `tns-template-blank-ng` installs 2.7.2. following the unit testing instructions at ` phofurl create a new angular project using `tns create helloworld --template tns-template-blank-ng`.
this creates a project with typescript 2.7.2. set up testing as instructed with `tns test init` and select jasmine.
now execute `npm i @types/jasmine --save-dev` as instructed.
the project doesn't compile since `@types/jasmine` latest version requires typescript 2.8.
a 100% height child of scrollview does not center its children vertically on ios > 10.2 you can see in the screen shot that it works fine on ios 10.2. but on the 2 other devices the yellow view is decaled when the blue view is exactly or more than scrollview height.
in this case (sample) it seems to be exactly statusbar height.
in my app decale is a lot more as yellow square ends up at bottom of screen.
<img width="1305" alt="screen shot at 10 37 01" src=" phofurl
i did not change anything from the project that worked perfectly on pre-current version(4.x.x) , but after updating the tns cli and tns-core-modules and android runtime i could not open the modals anymore i get this error: > cannot set property 'showingmodal' of undefined
it 's very simple when i put a long rtl text inside any label or textview the first line is worked good but in second line the line start from ltr .
after install i execute debug command (tns debug android --bundle) and all works well.
after that i try to run (tns run android --bundle) my app and ns request to update webpack from 0.13.0 to 0.17.0. i update webpack to version 0.17.0 (tns plugin add then ns does not compile.
i reinstall and the app was compiled again.
also update nativescript-angular version 6.2.0 try use hmr.
also follow the changes on but hmr does not work.
i try to set a timeout for our http requests in our nativescript app, but the timeout phofhyperlink property has no effect for me while testing.
i have a `listview` that references a component (`app-icon`) that displays an `image` based on input parameters.
<listview [items]="items" class="list-group"> <ng-template let-item="item"> <gridlayout class="list-group-item" rows="auto" columns="auto, *"> <app-icon <stacklayout row="0" col="1" > <label item.id]" [text]="item.name" <label [text]="item.role" class="list-group-text" color="gray"></label> </stacklayout> </gridlayout> </ng-template> </listview> phofcode as you can see above, this component 's `image` property (the url for the icon) is set during `ngonchanges`.
this works fine if `ngonchanges` run synchronously, however, if i do any asynchronous work (i.e.
with a promise) and then set the `image` url property, the icon images displayed in the `listview` are not correct.
images will show, however, they are not correct icon for corresponding item.
scrolling around in `listview` causes icons to change when viewed again, however, they are usually not correct icon for that item.
the same problem happens if trying to use `ngoninit` as well.
i am assuming this has something to do with how listview 's cells are being recycled.
i have only tested this on android so far, but imagine something similar will probably happen in ios as well.
until v4.2.0, setting to `false` not only prevented click events but also the scrolling incase of scrollview.
since 5.0.0, it's not the case anymore with android, user is allowed to scroll anyways.
i can 't add device specific config to a webview.
here for example i am trying to remove the ios bounces effect, scrollbar and add a transparent background.
having a flexboxlayout with flexdirection="row" doesn 't work well with a child having on android.
on ios the child is centered vertically, while on android it is top aligned.
if the list view has rows with dynamic heights, it fails to render certain rows when the new height of the recycled cell is different from previous height.
weird thing is, when you tap on the cell, it does show content that was supposed to be there.
<img width="317" alt="screen shot at 3 03 28 pm" src=" phofurl <img width="329" alt="screen shot at 4 51 06 pm" src=" phofurl
i have an issue with the radlistview with multiple item templates and toggling visibility.
i 'm trying to re-create an according type display without using the nativescript-accordion plugin.
by toggling the visibility attribute for a given item
kind of related to phofurl happening with 4.1.2 and 5.0.0 (next)
i always get `referenceerror: can't find variable: exports` every time i ran `tns test ios`
`searchbar.isenabled = false` does not work on ios and android devices.
and = false` does not work on android devices.
it has no effect too.
i recently updated from angular 4 to angular 6 and am now getting an error whenever i open the keyboard (i.e.
dialog.prompt() or click in a textview or searchbar).
my error is: > javascript stack trace: 1 2 3 4 code] 5 6 7 8 9 10 11 evaluate@[native code] 12 moduleevaluation@[native code] 13 @[native code] 14 javascript error: js error typeerror: undefined is not an object (evaluating
on ios only an empty actionbar is visible while a route guard 's `canactivate` is not resolved.
the horizontalalignment attribute doesnt work as expected when the stacklayout has horizontal orientation in android as well as on ios.
it is a run-time error, i am trying to get a video using the plugin, it turns out that in the execution when i select the video sometimes an error is generated that blocks the application.
in the playground and with the cli when running `tns run android/ios` deleting a segmented bar and adding it again result in the following error: `binding: binding error while setting property items of error: view already has a parent.
a simple webview with an image in a local folder is not loaded on an ios device, but is loaded on an ios simulator and on android devices and simulator.
to be able to hide the keyboard after tapping on any other space than a textfield i added a tap action on the parent element of a listview, this behavior works if the listview doesn't use itemtap action on the html.
if i place another tap in viewlist with itemtap itemtap behavior gets overwritten so it stops working.
on ios problem is solved using iqkeyboardmanager plugin but apparently on android this is not supported.
i also made this work adding a tap over another area other than listview, so issue here is that in android ns is unable to determine tap action inside empty space of listview which also has itemtap action declared and an item.
when following the development workflow step for testing tns-core-modules inside your own app phofhyperlink , the app will stop with the following runtime error: phofcode
scrollview scrolls even with scrollenabled = {false} in chrome phofcode
setting the `accessibilitystate` on a `<touchableopacity/>` doesn 't seem to be setting the appropriate aria attributes.
lists go out of their container over the the content below and above them
`autocomplete="off"` is not working in browsers.
when creating a production build i am facing the `javascript heap out of memory` error, please find below the exact log: phofcode i was seeing it before when running node 10 and using node 12 helped, but currently i am seeing it on node 12 as well.
i included a window.open in my app.
a few seconds after opening the new tab, both apps become buggy and then eventually freeze.
i see that the tabs are grouped together in the chrome task manager, and cpu usage spikes to 100%.
rnweb doesn't work with latest react due to `nativeevent` being null in
use touchableopacity with onpress causes an error to the whole page.
i added phofcode once i press on anywhere on the page, it shows the following errors: phofcode
phofurl in the above sandbox, i create an animated component out of `touchableopacity`.
until react 16.9.0, everything works fine.
but after the recent 16.10.x upgrade, i am getting two console errors on hovering into the page on chrome.
phofcode phofcode on firefox, i get: phofcode
adding keyboardtype="numeric" to textinput breaks the custom validation on firefox and allows letters to be typed.
we have a web app with ssr and two separate webpack bundles, one for the client and one for the server; both these bundles support hot updates in development.
on the client all works fine.
the server works initially, but after the first update when reloading page there is an error in `createelement.js` where is called during ssr: phofcode this can be fixed by only injecting event plugins on client, which seems like it should be fine because event handling isn't relevant on server: phofcode just adding condition is sufficient to resolve issue.
would this be a reasonable fix, or is there something else we're missing that might resolve this problem?
rnw * should * work with a snapshot tool like react-snap, that simply renders pages in a broweser (puppeteer) to create static html files before hydrating them.
the `image` component should match native behavior by setting draggable to `true` by default.
when using `next.js` with `react-native-web`, the server does not deliver the css needed to properly render the page, which causes the page to first show a page without styling then quickly renders it again on client with all css.
when using `react-testing-library` for testing components made with `react-native-web`, i 'm unable to trigger the `onpress` handler with `fireevent.click(node)`.
currently i have to add 2 `fireevent` like shown below.
to me this feels wrong as it also triggers on click.
i 'm attempting to build a library that exports both web and react-native consumable components.
and i 'd like to export them without any additional libraries needed by the consumers.
so i 'm targeting create-react-app and `react-native init` without having to bring in any specifics.
when i export a `<touchablehighlight onpress=...` the resulting web version that 's being consumed by create-react-app (web) does not register a click event.
it renders properly and handles the focus + spacebar event, but any clicks on it do nothing.
when using keyboardtype=number-pad you can enter "."
and "e" expected is only numbers when using keyboardtype=numeric you can enter "e" expected only dot and numbers
the problem is that the props doesn't hide the scrollbar on firefox 68 (64-bit) in the `scrollview`.
this also means that it doesn't work with `flatlist` and `sectionlist` as long as they're based upon `scrollview`.
textinput's oncontentsizechange is never fired when the size is reduced, only when it's increased
i am trying to update react 16.4 project to the latest version.
and getting this error: phofcode
the share api offered by react-native library throws "share is not supported in this browser" error in chrome or safari, however works fine on safari desktop browser.
using component breaks `numberoflines` in text component.
i originally encountered this problem while placing an icon component at a random place in my render function.
so the position doesn 't seem to make a difference.
nested text tags inside textinput not working as expected.
in react native we can have inline styling inside textinput.
however, this is not reflected in react-native-web.
in dev mode, replaces the children of the target dom node as expected.
in prod mode, however, the react app is appended to a nested dom element.
sometimes i get wrong dimensions or the event simply don't fire.
i'm trying to run web an expo-project which uses mapview and i've got this error: phofcode phofcode
image not working in live demo: phofurl
clicking a `text` inside a button (`touchableopacity`) trigger both `onpress` callbacks.
when `<textinput />` has an explicitly set `height` (for example because we're implementing an auto-growing textarea) then `oncontentsizechange` is not being triggered if the content height is smaller than that container height.
`ellipsizemode` on `text` component does not work.
the produced css is always `text-overflow: ellipsis` regardless of the value of the ellipsizemode e.g `ellipsizemode: "clip"`.
a view with children a pan responder will have the locationx and y values of the move event relative to its children view
it is impossible to perform a preventdefault on a textinput.
`<text />` have no `borderstyle` set by default.
title prop only works for text components
at a high-level, twemoji on edge are broken on twitter.
we did some preliminary looking into this (thanks @krosenberg)...notes below, but we haven 't done an isolated repro yet.
in both chrome and edge, the span that wraps an emoji has two class names that each reference a css rule containing a display property: phofcode in chrome, the computed style for the span is `display: inline-block`, but in edge it is `display: inline`.
i took a look at the style sheet where these rules live, and noticed that order of cssrulelist differs between chrome and edge.
on chrome `.r-4qtqp9` comes after `.css-76zvg2`, so inline-block takes precedence: phofcode but on edge, it 's opposite: phofcode i 'm not sure how order of cssrulelist is determined, but if it 's based on when js code adds rules to list (i 'm assuming this happens in rnw somewhere), then i wonder if there 's difference in order in which code is called based browser or js engine or something.
textdecorationcolor is not being applied to element when textdecorationline is also set
according to phofurl `react-native-web` should support using the style property `textshadow` as in css: image phofimage indeed, setting the property works fine.
the result displayed in multiple web browsers is correct.
however, there is a verbose console error message complaining about this style property being incorrect.
the message is specially annoying because it lists all the possible css properties if using previous versions of `react-native-web`.
image phofimage although in `react-native-web` "0.11.x" is only one line fortunately.
but still misleading: image phofimage extra information: using the text shadow properties split as in react native mobile, does not work for `react-native-web`.
which totally fine as `textshadow` working.
rn supports naming a file with `.native.js` and this lib supports naming them with `.web.js` which is great.
however, i have made an `image.native.js` and a `image.web.js` but the webpack build fails with errors from within the native file.
edge browser throws `domexception: hierarchyrequesterror` while inserting css rules into css media queries.
regression introduced when upgrading from `0.9.9` to `0.10.0+`: | before (correct) | after (wrong) | | -- -- devhub 3 phofimage devhub 1 phofimage
images disappear in high contrast mode on windows os browsers because high contrast mode strips away background images and the accessibility image has opacity:0 phofhyperlink .
when a component in a `<virtualizedlist>` scrolls offscreen it is not unmounted or removed from the dom.
compatibility break with native-base and react-native-elements.
when using "export * from \'react-native \'", like does, the following exception is thrown: typeerror: cannot convert undefined or null to object > 1 | export * from 'react-native ';
a minimal project with next.js react-native-web and styled-components doesn't build in 0.11 but works in 0.10 am i missing something or is this a bug?
the `css-*` styles are missing from all ssr output (except the very first call to
importing a module `unimplementedview` or an `emptyobject` causes the majority of `react-native-web` to be included.
i 'm thinking this is because the babel preset cannot reassign the import to use a `react-native-web` internal.
cloning react-native-web and running `yarn install`, then `yarn website` causes error `module not found: error: can't resolve 'react-native'`
custom props are not being passed to "native" components.
react specifies that any lower-case prop will automatically be passed as an attribute to the dom.
this is not happening in `react-native-web`.
all custom props are being stripped.
by default flexbasis: 0% is set on all views.
this forces all views to collapse to zero width or height, ignoring the content width and height.
applying styles using object spread works on android and ios but the styles do not get applied when rendering on the web.
creating a style object like this phofcode the `styles.bar` do not get applied to the object when rendered on the web.
when loading many items in a flatlist with the `inverted` prop, the list gets weird behaviors.
the scroll moves on its own.
it is also reverted whereas it shouldn't, and to top it all, some elements of the list gets inaccessible...
no matter what i do, i can 't seem to get a reference to the dom node of a textinput element
| web | mobile | | --- ------ image phofimage image phofimage notice the white edge at the web version and not on the mobile.
it's a very subtle thing but we should aim for pixel perfect.
* web phofimage * android phofimage
second line has `maxwidth: 50` (half), but it has no effect on web: <img width="200" src=" phofurl />
i updated next.js to 8.0.0-canary.2 and when i run `stylesheet.create`, this error is thrown: phofcode with next 7.0.2, everything works as expected.
textinput's `onkeypress` prop isn't called when the escape key is pressed.
as mentioned in #1157, touchable was called when we touch to scroll, and cause browser layout due to the `getrect`: image phofimage i have find out that it is called on native too.
image phofimage but there is no performance problem in native.
browser layout costs so much times, making the scroll performance so bad!
nested scrollview can not scroll properly in some android devices.
`[dom] password field is not contained in a form:`
in `applylayout`, the intent is to leverage resizeobserver to power onlayout updating.
looking at the `componentdidupdate` override, it's clear that the observation should be added or removed with `applylayout`.
however, looking at the `componentdidmount`, every single node is being observed, regardless of its props: phofurl coupled with large projects and suggested `resizeobserver` shim, this can tank performance in non-chrome browsers: mutationobserver is attached at window level and observers are accumulated.
any change, any where in dom will trigger a loop over all observers.
in order to determine if a resize should be fired back to consumer (rnw), it attempts measure size of each observed element.
tl;dr: in non-chrome browsers, every rnw element in dom is measured on every dom change.
sometimes the touchable onpress event is not called when i'm inside a scrollview.
it doesn't happen all the time but when i test it outside the scrollview, onpress event is always dispatched.
what i noticed debugging it is that the onpress is not being called because signal leave_press_rect.
it looks like this happens if i slightly move mouse when clicking touchable
rendering `<image resizemode="repeat" />` with an svg source does not repeat in macos safari and ios safari.
`accessibilityrole` is used by react-native-web to chose the appropriate component to be rendered.
`<view accessibilityrole="list" />` would be rendered as an `ul` element.
however, this behavior collides with `react-native` 's `accessibilityrole` implementation introduced in 0.57.0 phofhyperlink .
using the aforementioned code snippet (`<view accessibilityrole="list" />`) will crash on android, since `list` is no valid role for android.
in react native, you can wrap children of a touchablehighlight in a fragment to get around the problem of having to forward setnativeprops.
the first render of a `picker` with an `onvaluechange` prop shows the following warning in the console: phofcode the handler still gets fired on change despite the warning.
when using the `maxlength` property of the `<textinput>` component, it is not enforced on web when using chrome the issue does not appear to be present in microsoft edge internet explorer or android 9. i did not test firefox or safari.
accessible false should set tabindex -1 imho.
first problem: as soon as i add `keyboardtype="numeric"` to my `textinput` the `value` prop does not work anymore.
in the example when i add a letter (first textinput) it should remove it.
this only works when i remove `keyboardtype="numeric"` (second textinput).
second problem: `onchangetext` is only triggered (with when i add a string matching the regex `/ d+ d?$/`.
in words: one or more digits and optional one (only one) letter at the end.
touchableopacity does not check unmounted component
react native web doesn't work with `react-dom@16.5.0` it seems that react dom has removed some functionality that react native web requires phofcode which is likely due to phofurl causing it to fail here phofurl
in 0.8.0, imageloader started using decode to defer decoding of images.
however, even when `.decode` is supported, it may sometimes fail.
right now there is no failure handler for the promise, which causes this to bubble as an `encodingerror: invalid image type`.
the sandbox at glitch.com stuck at "fetching project" status
when server rendering a next.js application, the "critical" styles for the given page are missing.
they apply correctly, however, in the client.
when using a screen reader to interact with a switch, the purpose of the switch control is unclear.
despite passing an accessibilitylabel prop into the switch, the label is not read.
sticky headers not working in `sectionlist`
using the decode method of an image instance that references a a svg url throws and encodingerror exception.
even though the svg image is being shown correctly, the exception prevents the onload handler from being called.
this pr proposes handling calling onload handler on reject as well as on resolved, to work according to spec.
i 've also filed an issue on webkit 's bug tracker phofhyperlink
key events for children of touchable-objects are not being fired for space & enter keys.
`<picker />` doesn 't add padding in chrome and webkit browsers.
to fix it is just matter of adding `appearance: none` but then it shows a warning in console.
i am currently working with `react-native-web` and `storybook`.
i am currently facing an issue in the `animatedcomponent` on storybook because they are not displaying an error message.
i was debugging and i checked that the problem is in a function that doesn't appear available.
an horizontal flatlist completely disable the vertical scroll.
using with `somehandler` is not called when hitting the return key in a nested `textinput`.
textinput onchangetext is not fired on text change
i'm not completely sure if this is an issue or if this is how it's supposed to work, but when using numcolums > 1 on a flatlist, i can't make the columnwrapper to stretch to the full width of the list.
it seems that the div that is used as columnwrapper is within another div, so making it width:100% doesn't work as it only stretch relative to it's parent that has fixed width, and there no way of styling that.
trying to apply the property `background-clip` with the value `text` fails on webkit based browsers.
also, it is unclear how to enforce vendor prefixes when they are wanted.
for example, here, on firefox, using `webkitbackgroundclip` is unsuccessful, but `-webkit-backgroundclip` and work.
when using a multiline textinput with bluronsubmit=true, calling ref.clear() after onsubmitediting is called and then ref.focus() will add a newline to the input.
i am using phofcode and i upgrade to the latest version of phofcode suddenly the unit test display the following error message: phofcode
views have stopped responding to focus() and blur() methods when done programatically after 0.8.0. it was working well in 0.7.3
using the flatlist, an error is shown in the console while rendering.
the error is the following: phofcode
after installing react-native-web on clear react-native init install i received many type flow errors.
if i add to .flowconfig this: `.
* * ` then i don`t receive errors, but i think probably it 's not the best solution.
i am exporting my components to another project and touchable is not working in `react-native-web` components.
in the project when i am trying to use the components the click event is not working.
i imported the components and those has a onclick method.
when running the project on the web, the events are directly recorded without clicks.
for example a scroll/panning will happen when the mouse hovers over screen.
when using flatlist with inverted prop, the mouse scrolling direction is also inverted.
i'm not sure if this is an issue per se, but i think only the content of the list should be inverted and not the direction of scroll.
i worked on an implementation for same feature for rlv phofhyperlink and i tried to handle this on onwheel event reversing scroll direction of container.
this only happens on desktops, mobiles scroll is different so it works fine there.
this file is missing in npm package: so it is not possible to use jest preset as described in phofurl
in the example app, `<switch>` is only functional on the first press.
the same problem is not present in the storybook app.
hello, thanks for all the hard work done on that poject !
i'm using `lerna` with yarn workspaces features on a project.
i encounter issues like `syntaxerror: unexpected token export` due to the fact that babel will not transpile from the root `node_modules` (eg since `react-native-web` also compile to `commonjs` on `dist/cjs/exports`.
is there a way to tell to use that folder instead of `dist/exports/` ?
i try to test a component who use react-native-web 's text, by jest and got this error: phofcode
i 'm not 100% sure this is a bug but i think it probably is: given the following config (without using react-native-web babel plugin, using webpack 2): phofcode jest snapshots fail since the jest serializer is using stylesheet from `const { stylesheet } = whereas the components render using the es6 stylesheet built by webpack resulting in 2 different registries.
i think you forgot to export this class.
in previous versions of `react-native-web` was included.
firefox crashes when given an array of styles in svgs content, works fine in chrome.
can be worked around by removing stylesheet.create and merging the objects into one, causing redundant pressure on memory and gc.
same problem #940 i added code in index.html phofcode but this did not solve the problem now so: 39 46 phofimage , but should be like this: 19 04 20 phofimage
when rendering a touchable component inside of a link, the link 's `href` will fire in addition to the touchable 's `onpress` handler.
after unmounting component with phofcode we steel have some event listeners for this view that fires phofcode
appcomponent (part of appregistry) wraps the app in a view.
this view as a style of `flex: 1`.
however, even if the root div in the html is set to height 100%, the react app does not render to full height of screen.
if you change appcomponent style to `width: '100%', height: '100%'` react app renders as expected.
please see #7303 i have a maser/slave deploy.
i had been losing metrics because netdata determined that data was redundant during a restart of multiple nodes.
i switched to using dbengine memory mode and this seemed to address the issue.
this morning i discovered the issue again.
* think * my netdata estate is being restarted due to the netdata log rotation as part of cron daily.
sorry for raising as a new issue - couldn't see how to reopen the original.
bash <(curl -ss phofurl ends up trying to grab phofurl which doesn 't exist on that repository anymore pic here phofhyperlink
netdata was installed on a system: phofcode run netdata updater to update it: phofcode it thinks the latest version is already installed.
let 's run the installer again to install the latest version: phofcode it fails too.
on my custom dashboard, charts stop updating after a few minutes.
needs a hard reload to start updating again.
when installing from a stable tarball as those found in github releases page, the release_channel should default to `stable`
it looks like netdata fails to die during the daily update.
i'm running netdata on ~75 servers and this seems to happen only on my low powered dell r330 servers.
netdata is running directly on the hosts, not in containers or vm's.
the problem doesn't occur on every update, but does occur several times per week ~6 servers.
simply restarting with `systemctl restart netdata` resolves the issue.
my alerts are not sending.
alerts are being triggered, they are just not being sent.
if i manually call test the alerts send correctly.
for example, i get the following output.
phofcode when i login to the webui, i can see the alerts.
also when do test above, alerts are actually received.
im here because of this exclamation sign: <img width="118" alt="update button warning" src=" phofurl
installlation phase sometimes fails, when trying to install `.keep` files into filesystem with symlinks instead of read directories, when at least two symlink point at the same directory.
the netdata collectors block if dbengine page cache is full of dirty buffers, and as a result metrics stop being gathered until the problem is resolved.
this can happen if there is a huge number of metrics being gathered, or the disk is too slow or too busy, or if the disk has gone bad.
im trying to install netdata with ubuntu repository in trusty version and the package has a incomplete dependencie.
the uninstaller script should kill an active daemon process if it is running.
in both privileged and non-privileged installs the uninstall script fails to kill the daemon.
basically, throws error code 421 for irc, which is false, as the alert is seen on irc when configured in it was suggested to open a bug report in phofurl
with firefox 70.0 on macos 10.15.1. both netdata 1.17.1, 1.12, and 1.10 show the same behavior when clicking on the nodelist, "loading..." is displayed.
safari 13.0.3 on macos is fine.
for firefox, i 'm seeing two errors in the console: source map error: error: request failed with status 404 resource url: phofurl error 407: cannot hello netdata server: phofurl however, clicking on those urls results in both the .js library being displayed and netdata console being displayed, respectively.
apache module not working with letsencrypt certificate
when building an rpm with the provided netdata.spec the conditional which installs the cups plugin only checks for centos version 6 and 7 which returns the following error on rhel7: phofcode this is not a satisfiable dependency on rhel7, it is on rhel8 though.
i 'll be submitting a pr shortly to add an additional case for this conditional.
our nightly jobs are failing due to timeout: phofurl phofurl phofurl phofurl
we have a machine with several databases in postgres, one of them was very large, about 40gb, and was migrated to a separate machine.
after the migration, the database was droped from the old machine, the 40 gb was freed from disk phofimage , but in postgres database size chart it still shows that deleted database contains about 20 gb.
phofimage i already made query "select pg_database_size ( \'rm \');" and it returns that database does not exist.
netdata is not started when dbengine is enabled phofcode error.log phofcode
on macos safari 13.0.2 the node menu in the top left corner does not load the list of nodes from the registry.
it is stuck on "loading, please wait..." the javascript console displays an error that might be related: unhandled promise rejection: typeerror: null is not an object (evaluating <img width="1436" alt="bildschirmfoto um 13 45 26" src=" phofurl
kickstart-static64.sh does not write a proper reinstall_command to
the netdata-updater.sh script disables automatic cron updates (disables itself), on kickstart-static64.sh installations
the netdata-updater.sh always performs a reinstallation during the first run on a clean installation
hi all, after configuring netdata with all required modules for my server, i got the following error now: `error 405: cannot download charts index from server: phofurl when checking i saw that netdata daemon had sent correctly the requested url: phofcode so i try to retrieve then same uri using curl, and i got a big json file that seems correct at first.
but, piping it to `json_pp` give me the following error: phofcode and `dd` confirm there is a problem: phofcode it seems there is garbage in the `"dimensions"` table in chart!
so, go version of web_log generate garbage data in charts.
after analysis of file, found a lot of lines with invalid http method: phofcode there is plenty of error 400 with invalid method.
it seems someone does some attack on my server, and this result in dos netdata!
similar to #2602, netdata sometimes does not send load average metrics to the carbon/graphite.
by sometimes i mean 1-3 points out of 12 (in a minute).
also, in the netdata web ui everything seems fine.
here 's grafana screenshot: image phofimage
i want to edit a config file but edit-config throws this error: ~]# apps_groups.conf` `file is physically at which is not in aborting.`
if i shut down netdata i see that nvidia-smi process is not killed.
number of running nvidia-smi processes keeps growing if i do several netdata restarts.
when travis builds nightly packages, build stops with the following error phofcode
running netdata using docker image fails to show any containers on the host.
the log reports the following lines (containing word docker) netdata info : main : netdata info : main : go.d info: main[main] loading 'dockerhub' configuration go.d error: main[main] skipping 'dockerhub': config 'jobs' section is empty or not exist go.d info: main[main] loading 'docker_engine' configuration go.d error: docker_engine[local] get phofurl dial tcp connect: connection refused error: docker_engine[local] check failed warning: main[main] docker_engine[local]: autodetection failed python.d info: plugin[main] [dockerd] built 1 job(s) configs python.d error: dockerd[local] 'docker' package is needed to use dockerd module python.d info: plugin[main] dockerd[local] check failed
i installed a basic lemp stack and tried to use netdata to monitor nginx, php, and mysql.
the services all had charts even without having to `./edit-config python.d/mysql.conf`.
the output of `grep mysql phofcode output of: debug 1 mysql` phofcode
make[2]: entering directory cc libnetdata/os.o cc cc cc libnetdata/avl/avl.o libnetdata/eval/eval.o libnetdata/libnetdata.o libnetdata/locks/locks.o libnetdata/log/log.o libnetdata/log/log.c: in function 'log_facility_id': error: 'log_auth' undeclared (first use in this function) return log_auth; note: each undeclared identifier is reported only once for each function it appears in error: 'log_authpriv' undeclared (first use in this function) return log_authpriv; error: 'log_cron' undeclared (first use in this function) return log_cron; error: 'log_daemon' (first use this function) return log_daemon;
after #6796 netdata doesn 't use more than 7% of cpu time on freebsd when it is tested with the following command: phofcode image phofimage before this pr netdata used 90% image phofimage
running the `netdata-installer.sh` as a non-root user produces instructions on how to escalate privilege for the apps plugin.
the instructions cannot be cut and pasted into a shell as there are some extra escaping characters in front of the quotes.
phofcode or, to run apps.plugin as root: sudo chown root:amoss sudo chmod 4750
file `megacli.chart.py` does not work on freebsd without patches and needs to be more configurable
during my tests with the prs #7082 and #7083 i verified that there are old problems with our shell script files, so i arrived in the conclusion that the shellcheck is not working properly here at github, because this kind of old merges could not happen, but this looks like problems after some update, because part of the problems that i will show in next images was reported to me in past.
if you try building netdata with cmake version 3.10.2 there are errors: phofcode changing `add_library(libnetdata object ${libnetdata_files})` to `add_library(libnetdata static ${libnetdata_files})` fixes the problem.
another way to fix the problem is to move `libnetdata` from `target_link_libraries` to `add_executable` using something like that: phofcode
phofurl phofurl volumes: - - caddy:/root/.caddy the second line for ssl files local destination is wrong thats why it leads unsuccessful docker build
netdata info : main : 'fatal' 'netdata:main' /2' netdata fatal : main is not supported in this platform.
# : no such file or directory in the file where using memory mode = dbengine in the netdata.conf file ### more info phofcode phofcode - we add issue with lz4-devel that was not found in repos so, i installed it manually using rpm phofcode - netdata was installed using `bash <(curl -ss phofurl **nb the epel repo was added after the installation** - the os on an aws ec2 instance.
disabling statsd causes a segfault in freebsd 12.
i upgraded to 1.18 and am trying to get dimension templates working for my cpu and hdd temperatures.
here are the alarm templates i created: phofcode the alarms are not loaded, however.
i can 't find any reference to them in and they are not loaded on the dashboard.
netdata crashing on exit (when ctrl+c pressed) with ` memory mode = dbengine`
netdata version 1.17.1 service will not start after upgrade from 1.15 running command generates the following error: -shared object "libjson-c.so.4" not found, required by "netdata" the file appears related to the json-c library dependency and is apparently supposed to be optional for netdata.
the current stable release of pfsense distributes with json-c version 0.13, but patch 0.13.1 changelog references a version bump which appears related to this issue.
it is unclear when pfsense will distribute a package update given that the relevant update was ported to freebsd 5/sept/2018.
custom nginx access.log log format failing to be read by netdata
currently, if for any reason the data collection timestamps of the metric data points get reversed this will result in either pages with invalid starting/ending times or overlapping pages which is not allowed and as a result one of the pages will be dropped.
we need to also examine whether this is related to monotonic time support in certain systems.
netdata is crashing on freebsd plugin during startup
mass alarm sending from all my hosts
ssia from the wiki phofhyperlink > expressions can have variables.
check below for more information.
> there are two special values you can use: > - nan, for example $this != nan will check if the variable this is available.
a variable can be nan if the database lookup failed.
addition, multiplication, etc) with a nan result in a nan.
querying latest metrics is not always consistent when you 're concurrently updating the same page.
eventually you are going to get consistent data (eventual consistency), but this occurrence is statistically significant if you 're generating millions of metrics per second while simultaneously querying the latest metrics.
when clicking the alarm in rocketchat, the url is in this format: ` phofurl this result in a message "sorry... your account is not linked to a netdata server named: proxy01.example.com", unless i have already viewed the slave in netdata (so that it is listed under "my nodes").
the slave is listed under "databases streamed to this agent", but only slaves that have been viewed the gui listed under "my nodes".
when i update my docker-ce to version 19.03.2, i find that netdata doesn 't work.
the uninstall process removes the netdata user and group if they exist on the system.
failed to build with either one-line or manual installation on raspberry pi 3a+ and zero w.
yesterday 's commit phofhyperlink (adding "support for offline installs using kickstart") seems to have broken the non-interactive (or, `--dont-wait`) install.
rather than installing without question, the script appears to get stuck in a loop.
i 've validated this by adding `-x` between `bash` and the script `kickstart-static64.sh`.
this results in a rapid and repeated filling of shell scroll-back of `opts= ' --accept --accept --accept --accept`.
using the previous iteration of script phofhyperlink works as expected.
the md5sums declared in the docs for the kickstart.sh and kickstart-static64.sh seem to be out of sync again.
the docs already contain the new hashes for both files while `curl -ss phofurl | md5sum | cut -d ' ' -f 1` still returns the old checksum and therefore fails my deployment.
i 'm aware that in #6049 a similar issue was reported and then resolved but it seems error has cropped up again and last change to kickstart scripts was yesterday at time of reporting this issue.
so maybe there is another problem in deployment pipeline.
or maybe i 'm just not patient enough.
just as an additional question: how often are these deployments kickstart scripts expected to change?
i wanted to download, verify run them via anisble if checksum changes regularly i would probably need skip validation.
on nightly "yum update", netdata failed to update via rpm.
in short, many files seem to have "conflicted with themselves", including the directory /etc/netdata/.
here 's one error: > transaction check error: > file /etc/netdata from install of ** netdata ** conflicts with file from package ** netdata-conf ** > ... snip... full transcript attached, netdatafailedupdate.txt phofhyperlink (i suspect you 've attempted to consolidate the existing "netdata-conf" & "netdata-data" rpms into a single "netdata" rpm, without first uninstalling the other two?
ya, that 's gonna end badly.)
it seems like sometimes nodes aren 't deleted and removed from a user 's **my nodes** menu and nodes view even after explicitly deleting them via the **my nodes** menu.
here 's what i 've been trying: i click on the trash can/delete icon for a node that 's registered in the **my nodes** menu.
image phofimage i then click on **delete it** in the modal that appears.
even after a refresh, and a log out/back in, node that was deleted still shows in **my nodes** menu and in nodes view.
there 's some console output on firefox 69, beginning from moment i click on **delete it** button: phofcode
incorrect metrics after update (1.13 to 1.17)
based on travis build: phofurl we don't seem to have an official repository i know of that provides judy-devel and libuv.
we have to build from source for those two particular packages, for x86 centos-7
dbengine hangs during heavily multithreaded artificial dataset generation workload.
the database is not generated in realtime but the timestamps are simulated by the dataset generator.
in section "applications/cpu" i have noticed that ssh group is reported as consuming almost 100% cpu constantly, and after manual checking it seems that this is wrong.
i have one process consuming 100% cpu but it is definitely not ssh.
after starting another process for testing purpose from different session, usage was doubled.
process tree looks like this: image phofimage isaac64 was the first one reported in ssh group, openssl was the second (started for testing), checking /proc entries didn 't reveal anything in exe, path, cmdline or comm that could match "ssh*".
my app_groups config has the line (unchanged from default): phofcode if i remove "ssh*", usage is reported as usual ("other"), adding "sshd" causes netdata to account cpu usage for all apps started from ssh sessions for ssh itself, i.e.
it looks like it propagated somehow to sshd, and this makes me wonder why - there are more processes below (and above) sshd...
following the contributing documentation phofhyperlink guide.
i try to run the bash script `sh i get the below: phofcode the full output can be found in this gist phofhyperlink in essence, the mkdocs site fails to build.
trying again to run `mkdocs build` phofcode mkdocs works fine for other documentation sites i generated using `mkdocs new` or random ones i cloned to test with `mkdocs build && mkdocs serve`
i 've installed netdata from the ports and with "pkg install netdata".
without modifying anything in the config file, it dies a few seconds after being started.
a netdata.core file is placed in /usr/local/etc/netdata i 've compiled the port with the "not stripped" option, and with gdb i 've managed to get explanations: phofcode it makes no difference to have coretemp module loaded.
i 've compiled port disabling do_dev_cpu_temperature, setting ".enabled = 0" in `{ .name = "dev.cpu.temperature", .dim = "cpu_temperature", .enabled = 0, .func do_dev_cpu_temperature }` this way netdata performs ok.
i try to install the new packages from dedicated repo phofurl however there 's a dependency to a package that is not available in debian: _libprotoc10_ phofcode checking for available packages i get this similar: _libprotoc17_ phofcode please advise how to fix this?
i upgraded to netdata 1.16.1 and since then the webui is not loaded.
netdata service is starting w/o errors: phofcode the service / port is open from any client: phofcode there 's no error message in
currently coverity scans were run exclusively from travis, resulting on the absence of proper developer toolkit for coverity scanning as part of this issue we need to: - [x] wrap up #6747 with a new pr to attend comments and inputs found in #6747 ~update ci pipeline to execute multiple versions of the installer with different configure flags~
netdata stopped working after it has been updated to its last version today (29 - 08 - 2019).
`systemctl status netdata` output: phofcode here is the output of gdb using a coredump: phofcode
netdata queries can be arbitrarily long and can take a long time to complete, effectively keeping the web server busy.
this could lead to a denial of service.
charts that stopped being visualized from unknown reason: - ip.tcp_syn_queue - ip.tcp_accept_queue - ip.tcpreorders on some servers, the whole list above is missing, but on some servers is missing only e.g.
we generally observed different behavior on servers with identical installation.
on netdata web service of one of our server (v1.15.0), we directly observed failures instead of rendered charts *removed by @cakrit : image showing errors in `data` api calls* below is content of error.log having error and warning lines only, produced by netdata v1.16.1: > netdata error : main : failed to open pidfile (errno 2, no such file or directory) netdata error : main cannot chown to (errno 2, no such file or directory) error main cannot open the file (errno 2, no such file or directory) plugin[cgroups] cgroup: cannot find memory mountinfo.
assuming default: /sys/fs/cgroup/memory plugin[cgroups] cgroup: cannot find devices mountinfo.
assuming default: /sys/fs/cgroup/devices pluginsd cannot open plugins directory (errno 2, no such or directory) line 2: exec: node is not available in this system: not found pluginsd[node.d] read failed: end pluginsd[node.d] (pid 5259) disconnected after 0 successful data collections (ends).
pluginsd[node.d] child pid 5259 exited with code 127. pluginsd[node.d] (pid 5259) exited with error code 127 and haven 't collected any data.
pluginsd[perf] (pid 5269) disconnected after 0 successful data collections (ends).
pluginsd[perf] child pid 5269 exited with code 1. pluginsd[perf] (pid 5269) exited error code 1 and haven 't collected any data.
tc-qos-helper.sh: warning: fireqos is not installed on this system.
use fireqos to apply traffic qos and expose the class names to netdata.
check phofurl ioping.plugin: warning: cannot find plugin[idlejitter] cannot advise kernel about memory usage (madv_mergeable) 22, invalid argument) fping.plugin: warning: find tc-qos-helper.sh: warning: pluginsd[ioping] 5267) disconnected after 0 successful data collections (ends).
pluginsd[ioping] child pid 5267 1. pluginsd[ioping] 5267) error 1 haven 't collected any data.
pluginsd[fping] 5255) disconnected after 0 successful data collections (ends).
pluginsd[fping] child pid 5255 1. pluginsd[fping] 5255) error 1 haven 't collected any data.
tc-qos-helper.sh: charts.d: main: configuration not found.
charts.d: ap: command 'iw ' not found in charts.d: error: ap: module 's 'ap ' check() function reports failure.
charts.d: apcupsd: command 'apcaccess ' found in error: apcupsd: module 's 'apcupsd ' check() function reports failure.
libreswan: command 'ipsec ' found in error: libreswan: module 's 'libreswan ' check() function reports failure.
nut: command 'upsc ' error: nut: module 's 'nut ' check() function reports failure.
device-mapper ( 'ram0 ', 1:0): directory device-mapper ( 'ram0 ', 1:0): directory '/dev/vx/dsk '.
device-mapper ( 'ram1 ', 1:1): '/dev/mapper '.
( 'ram1 ', 1:1): ( 'ram1 ', 1:1): '/dev/vx/dsk '.
( 'ram2 ', 1:2): '/dev/mapper '.
( 'ram2 ', 1:2): ( 'ram2 ', 1:2): '/dev/vx/dsk '.
( 'ram3 ', 1:3): '/dev/mapper '.
( 'ram3 ', 1:3): ( 'ram3 ', 1:3): '/dev/vx/dsk '.
read heartbeat missed monotonic microseconds alarm-notify.sh: fatal: all notification methods are disabled.
not sending notification for host 'dev.excello.cz ', chart 'silent ' for = '47 ' for status 'warning '.
i am seeing an 'inlet temp ' as 41 c but if i query the sensor with `ipmimonitoring` it shows 31c and has been for hours.
for some reason this temperature sensor (and others) stopped updating.
image phofimage if i hit the http api endpoint, it reports 41c, but the timestamp is from 5 hours ago!
phofcode i see the time window in ui also ends 5 hours ago (which is really confusing because it is aligned vertically with current readings from other things that are still updating).
seems like it is just this one plugin that hung up.
have a bunch of other identical servers that are updating successfully.
what should do to resolve this and prevent in future?
when running the static version installer (`bash <(curl -ss phofurl which is the recommended way to update, the installer overwrites my edited `netdata.conf` file with its empty one.
i've tried moving the config files i've edited to `/etc/netdata`, but binary version appears to ignore this folder.
we haven't implemented a logic of purging older distros from package cloud, this resulting on creating numerous amount of versions for netdata-edge repository
we have been facing problems with bats usage on some of the distributions currently supported.
we need to either use a more standard way of running those basic tests we currently have with bats or alternatively guarantee we always install bats regardless of its availability on the package managers.
i have a single master and multiple headless collectors running.
one of these slaves are having issues with very frequent reconnects which makes holes in the graph on the master.
the difference between this slave and the others, are that this slave is installed with the .run-package and others are installed with kickstart-script.
this slave is placed behind a more strict firewall-rule that other slaves (see #6676).
this is stream.conf on slave: [stream] enabled = yes destination = master api key = secret timeout seconds = 60 default port 19999 send charts matching * buffer size bytes reconnect delay seconds 5 initial clock resync iterations 60 and following logs are repeated in error.log on slave: netdata error : stream_sender[slave] : stream slave [send to master]: too many data pending - buffer is bytes long, unsent - we have sent bytes in total, on this connection.
closing connection to flush data.
netdata error : plugin[proc] : stream [send]: not ready - discarding collected metrics.
(errno 2, no such file or directory) netdata info stream_sender[slave] stream [send to master]: connecting... netdata info stream_sender[slave] stream [send to master]: initializing communication... info stream_sender[slave] [send master]: waiting response from remote netdata... info established communication - ready send metrics... error [send]: discarding bytes of metrics already in buffer.
(errno 22, invalid argument) plugin[idlejitter] [send]: sending metrics... error too many data pending buffer long, unsent we have sent total, 20979 this connection.
plugin[proc] [send]: not ready discarding collected metrics.
(errno 2, no such file or directory) connecting... initializing communication... waiting response from remote netdata... established communication ready send metrics... discarding of metrics already buffer.
(errno 22, invalid argument) web_server[static2] sending metrics... this appropriate logs from master: web_server[static1] clients wants metrics.
thread created with task id 2085 [ip-redacted]:40454: receive thread created (task id 2085) [receive from [ip-redacted]:40454]: initializing communication... [receive [ip-redacted]:40454]: multiple streaming connections for ame host detected.
if multiple pushing metrics for same charts, at same time, result unexpected.
postponing health checks for 60 seconds, host 'slave ', because it was just connected.
[receive [ip-redacted]:40454]: receiving web_server[static1] clients wants metrics.
thread created task id 2122 [ip-redacted]:40456: receive thread created (task id 2122) [receive [ip-redacted]:40456]: initializing communication... [ip-redacted]:40456]: multiple streaming connections for same host detected.
if pushing metrics same charts, at time, result unexpected.
postponing health checks 60 seconds, host 'slave ', because it was just connected.
[ip-redacted]:40456]: receiving rrdset: chart name 'system.idlejitter ' 'slave ' already exists.
i checked slaves, and it 's unique.
netdata uses a `;` as a separator for it fragments phofhyperlink .
this trips up some security software.
rfc 3986 phofhyperlink describes valid characters after fragments.
the generated `configure` script fails to find openssl on gentoo systems.
the one-line installation does not work in manjaro linux 18.
`dbengine` memory mode is not enabled.
it appears that the installer tries to install `libuv-devel` but the package name in the os is `libuv` instead.
[y/n] y :: retrieving packages... 690.0 kib 2.88m/s 00:00 [
there is a line at the end of install script which deletes the temp files phofurl that command can 't fully clear the temporary folder because there are root-owned files in it.
the script itself runs under the user-level privileges.
there is no indication of that error in script output because output of ``rm`` is discarded to ``/dev/null``.
at end of that issue i provided list files that can 't be deleted in my case.
i don 't know if those files are supposed to be root-owned.
maybe they do and solution here is to just run that command as ``sudo rm``.
maybe they not and solution to change some other part install script run without root privileges.
the ``rm`` command last command ``kickstart.sh`` script.
the exit status whole install ``1`` because that.
that makes it difficult understand if install successful in scripting environment.
after this night's update i the mysql plugin don't work, seems to be related to this pr: phofurl the user i have configured for mysql monitoring don't have permissions for doing a `show slave` command because the server doesn't have a mysql replication (it's a percona cluster with galera replication.
when building an rpm for v1.16.1 i experience a compile error phofcode this only happens on v1.16.1.
if i revert down to v1.16.0 it builds perfectly.
netdata re-enables itself and starts on next reboot after being disabled and stopped
i 'm not receiving `clear` (green) notifications any more after the upgrade to netdata 1.16 and enabling the repeat notification feature.
also, i don 't see the alarms in web ui alarms log.
config change to enable the repeat feature: phofcode
database query results are wrong on phofurl
installing netdata in an ubuntu 18.04 lts system that has been upgraded from a 14.04 lts and did not switch over to the netplan network configuration system (retains the original "ifupdown" under /etc/network/interfaces) seems to be affecting netdata 's ability to detect and show networking monitors.
a valid let 's encrypt certificate is considered as invalid for reason 20 by streaming client even if openssl _sclient return 0 in verify
when creating a custom dashboard, i noticed, that the labels of the legend is missing.
"user, nice, iowait" normal dashboard with titles: <img width="1810" alt="bildschirmfoto um 23 33 26" src=" phofurl custom dashboard without titles: <img width="1336" alt="bildschirmfoto um 23 34 24" src=" phofurl
i no longer get all metrics for all of my lxd containers as i used to since i switched from lxd apt package to installing lxd from snap.
i now have two places in the netdata ui where metrics are reported: lxc.monitor * lxc.payload * where think only had one of them before (not 100% sure here) - what's odd is that containers can also be entirely missing, and it seems almost random what metrics are present and which ones aren't.
sometimes can get reported io and network use, most often not.
on some versions of opensuse or centos, the snappy library is not detected and prometheus remote write backend can't be compiled.
when scraping metrics with prometheus including variables, the variables are exported with a stale timestamp causing the metrics to be dropped by prometheus, if the netdata process has been running for some while, e.g.
: phofcode the variables report the timestamp netdata was last restarted (first scrape possibly?
), others report current time.
once static data has aged enough, variable values will start failing in scrape.
if dbengine files get corrupted netdata should not halt execution but should return null values for the corresponding extent and print a relevant error message in the error log.
rpm package version should be `1.16.0` not `v1.16.0`
netdata fails to install in an automated context - using `chef` in this case.
however, if the same command is run by hand, installation is successful.
below is a snippet of the output from the failure case: phofcode and the corresponding snippet from successful case: phofcode note that in failure case, line "checking if 'pkg-config ' is installed..." not present; in succesfull case, it is.
the chef run can be made to succeed by pre-installing pkg-config in both cases, command `bash <(curl -ss phofurl --dont-wait --stable-channel --no-updates`
if a netdata snapshot is loaded while the `which dimensions to show?` dashboard option is set to `all`, an error is displayed instead of a chart: phofcode the error in the console: phofcode the corresponding key in the snapshot file:
netdata is sending me alerts about disk space and inodes usage from * /run/lock * /run * /dev
<img width="1676" alt="screenshot at 17 17 43" src=" phofurl using brave browser on a mac fails to access the registry.
it works fine on chrome.
the node drop down menu just says '....please wait... '.
the cloud nodes gives me a white screen.
when trying to update netdata using bash <(curl -ss phofurl i get the error in the title.
when someone 's netdata is connected to a private registry, they will want to know that by signing in to netdata cloud, they will use the `netdata.cloud` registry instead of their private registry.
if they click the `sign in` button on the top-right corner, they see this popup: image phofimage however, if click on either of the nodes<sup>beta</sup> buttons, on either top navigation or dropdown on left-hand side, will not get this popup and will go directly to netdata cloud sign-in.
we should minimize incidents where people don 't know are no longer using their private registry.
consistency in popup behavior also make documentation simpler.
alsomy first issue, so i welcome feedback how make these better.
<img width="1440" alt="screenshot at 11 06 28" src=" phofurl <img width="1299" alt="screenshot at 11 07 16" src=" phofurl
"master / slave" environment, streaming is ok, but private registry doesn 't seems to be working
as discussed we need to investigate the root cause of netdata crash on one of our demo servers due to maximum open files limit.
- netdata should not crash when max file descriptors are reached.
- netdata should allocate a fd budget for dbengine and inform the user of the typical requirements.
the user should be able to configure the service fd budget depending on her needs such as amount of streaming slaves connected to this master.
- netdata should not allow a new streaming slave connect this master if fd budget has run out.
- in unlikely event descriptors running out dbengine will continue writing on same data and journal files until problem is resolved.
the error condition will be recorded with specific statistics and a new alarm will be generated.
starting the official `netdata/netdata` image always fails with this in the container logs: phofcode
elasticsearch plugin fails to load and the following error is reported in netdata logs.
i am using elasticsearch 7.1.0 python.d info: plugin[checker] : elasticsearch : checking python.d info: plugin[checker] : elasticsearch : source successfully loaded python.d info: plugin[checker] elasticsearch found config file python.d info: plugin[checker] elasticsearch created 1 job(s) from the config error: elasticsearch[local] url: phofurl error: 'module ' object has no attribute 'retry ' error: elasticsearch[local] url: phofurl error: 'module ' object has no attribute 'retry ' error: elasticsearch[local] url: phofurl error: 'module ' object has no attribute 'retry ' error: elasticsearch[local] _get_data() returned no data or type is not <dict> check failed, skipping the job all jobs failed, skipping module
cannot download sha256sums.txt and netdata-latest.tar.gz from phofurl similar to issue #5768
would it be ok to silence the error level messages about clearing old files from the database?
it seems that they are already set to level info in line: 235 `info("file %s is too old (last collected %llu seconds ago, but the database is %ld seconds).
", fullfilename, dt_usec(&now, / usec_per_sec, rd->entries * rd->update_every);` could we change line: 616 `error("file %s is too old.
", fullfilename);` to: `info("file %s is too old.
we seem to be facing some sporadic failures in travis ci during package installation.
suspecting the issue related to polyverse, but not 100% certain.
i am opening this for investigation with the support from the polyverse team phofcode
when using netdata to monitor the blocks and bans on my system, it only shows sshd bans.
i have 14 jails active and l/ogging in the log file.
so only 1 of the 14 jails actually displays on the netdata fail2ban section.
i understand that netdata only displays bans since it was started and i have attempted to restart netdata daemons as well as restarting fail2ban server, both have no change to single ssh logging only instead of all jails.
after installing netdata 1.15 (used 1.13 previously) some * httpcheck * metrics disappeared from prometheus export.
nodes won 't load in the dropdown list, instead the message "can \'t load known netdata agents from netdata.cloud!"
clicking on the 'nodes ' link in the navbar takes you to `/console.html` which is just a blank page, console output is this: `loading failed for <script> with source phofurl although navigating to that link shows javascript just fine.
* httpcheck * module of * go.d.plug * does not dispose sockets properly `sudo lsof -i -p -n -l | grep syn_sent` shows that there are lots of sockets waiting for ack despite of timeout: phofcode
i have edited the health config file with the appropriate slack webhook url and when i try to run alarm-notify.sh all i receive is the following: phofcode `
when using the new parameter `memory mode = dbengine` in netdata doesn 't start any more.
i installed all the required software, which was mentioned in #5878 this is the output of phofcode i assume thet this is the relevant line: `netdata fatal : main is not supported in this platform.
# : no such file or directory`.
i checked with strace for files which are missing: phofcode thi directory `/lib64/bash/` does not exist on this host but file is actually there: phofcode i deleted content of directory `/var/cache/netdata` too.
with 500k docker pulls/day, we should be getting telemetry events from many more containers.
in a test with our k8s cluster, we only got start events from 1 out of 4 netdata instances.
1) check for `tar`, `grep` and inform the user accordingly in various key places 2) when go is not possible to be installed for any reason, just inform the user he can disable-go and fail cleanly 3)long shot, but try to clear some script errors that break the output (even though they are not affecting execution), for example: phofcode
netdata shows wrong cpu frequency, takes throttling not into account
when using the new dbengine memory mode, netdata still creates all the same directories that it would for the save and map memory modes even though it puts nothing in them.
while using the nodes (beta) feature : i have several nodes declared and available.
i delete one node (by deleting the docker container and restarting it), this is generating a new guid with the same previous ip.
after that i have two nodes on the dashboard : - new one (reachable) - old one (unreachable) problem is that i 'm not able to delete old unreachable one (deletion works but then nodes is still available after refresh).
trying to follow one-line kickstart script validation in phofurl i found that the validation fails, most likely because the listed md5sum for the script is out of date.
unable to take actions on system due to inability to fork new processes due to netdata creation of `timeout` defunct processes
running the kickstart following the instructions on ubuntu 18.04 lts fails.
sample logs of the execution sequence: kickstart_failure.log phofhyperlink cc: @ktsaou @cakrit
when "group=average" parameter is set in `/api/v1/data` request values are computed incorrectly - sum is reported instead of average.
- `api/v1/chart` response body phofcode <br> - returns only list of dimension names i don 't see `variables`
while we were developing the ssl for the web server we saw that the following line inside static-threaded.c is saying for us that pi->socktype is defined as af_unix instead af_inet or af_inet6.
if(unlikely(pi->socktype == af_unix)) { web_client_set_unix(w); } else { web_client_set_tcp(w); }
the elasticsearch plugin kills `python.d` when elasticsearch is not available.
attempting to use the bash nut.chart.sh plugin plugin fails to execute because `upsc` is command not found in docker image.
the `nut-2.7.4` package from alpine-edge is not installed
alert badge not showing after nginx reverse proxy
fatal errors sometimes fail to halt the netdata daemon.
(some) plugins in docker image are not executable by netdata user
following up the discussion on #5586, we realised that we need to make an adjustment so that default plugins permission gets reduced to 0750 after the change the permissions will look like this: phofcode reasoning on this change: we don 't want broad permissions to the plugins in general.
only people with authoritative access should have permission to run this plugin for any reason we always run with a user that has either user or group permissions, so no need for "other" permissions.
when we run as root, we establish netdata:netdata (or root when netdata not possible) and when we run as simple user have user/group user 's user/group information so netdata should not be affected by this change.
also users won 't be affected.
when i am root, i am authorized execute plugin and when i have installed as simple user i again have permissions
we have identified multiple cases were the netdata version that is produced by the binary or the configure tools of the source code, is wrong.
instead of getting something like we get a `netdata-39a9sf9g`.
example 1: @cakrit has identified from analytics reported strings that contain hash-only pattern rather than right version example 2: when i was trying to run configure + make dist of netdata under docker within environment of travis with --depth=50, netdata version was generated as `39a9sf9g` rather than
if go.d/x509check module can't connect to source for any reason (invalid certificate, connection issues, etc.)
it does not output any metric.
swapio chart is missing on centos 7
my netdata is running on beaglebone black.
after 1 days, it just hang and shows out of memory on kernel log.
i reboot the device and check the memory usage from prometheus and find the netdata memory consumption start to increase constantly.
after half an hour, the system memory is running out.
screen shot at 4 53 42 pm phofimage screen shot at 4 16 53 pm phofimage * * * this is kernel log * phofcode
python module 's autodetection_retry don 't work
currently the `bash <(curl -ss phofurl installation does not work on the fedora 30 pre-release.
the specific problems are: - fedora 30 starts to cut down on python2 packages while still providing a base python2 binary.
the script sees the python2 binary and therefore assumes a python2 installation is fine and then fails to install the necessary packages that don 't exist anymore.
- assumes that `libuuid-devel` is installed by default on fedora.
however on fedora 30 this is not case anymore, misses to install this dependency and compilation fails in `configure` stage as a result.
i attach a modified version of script (albeit renamed due to github file upload naming issues) that adds some exceptions make it work fedora 30. it may not be final solution for script but it could give you some pointers what 's necessary.
link attached file is here -> phofhyperlink <- a side note: i didn 't find script in netdata repository, it seems be maintained outside.
maybe you want consider include this in repository which would facilitate improvement suggestions such as this one as they could be submitted as pull requests.
when we do not have any changes in the code and nightlies.sh does not generate an artifact directory, travis workflow attempts to push non-existent folder "artifacts" causing a false-positive error on deploy.
most of our alarm notifications contain a link that you can click to go directly to the chart at the time of the alarm.
unfortunately, this only works as long as the alarm is active.
i'm using a caddy reverse proxy to connect to netdata from outside of my network (with basic auth) when trying to connect to netdata.cloud it will go through the authorization process (using google) but when it goes back the netdata dashboard it isn't logged in.
initiated from #5781, we need to add a more accurate check on our pipeline to detect problems on our updater script.
right now we are using the lifecycle script that it suppose to test the full lifecycle of our product (install, update, uninstall).
it seems though that the mentioned bug was not caught, so we need to re-iterate and ensure updater is tested properly
it looks like as a result of phofurl the kickstart scripts fail because the function safe_sha256sum does not exist.
i assume the function needs to be included / copied over from functions.sh?
perhaps this should be automated by ci?
we are showing errors when running kickstart on a macos.
install with kickstart phofcode also, during uninstall, the scriptlet does not manage to kill netdata from my system.
i am still left with a rogue netdata process and some plugin processes left hanging.
netdata has issues with collecting stats from nvme drives on one of my servers.
on a system with 8 nvme drives, only one drive gets discovered, and even for this drive, the values produced are wrong (read/write rates are steady 8tb/s, utilization is shown to be 1 billion percent, the backlog has value of 28000 minutes, etc.).
charts for all other disks on the system are okay.
edit: i have the same issue on a second server, although they are identical - same os, same hw config, so nothing really surprising here.
see attached gist for list of drives and contents of `/proc/diskstats`: phofurl steps i have tried: 1) compile netdata with debug enabled and flags (d_procfile)` after running in debug mode, `debug.log` has nothing interesting, but `error.log` is getting spammed with this: phofcode repeated over and over again for all charts nvme disk in question.
2) adding configuration other nvme disks to `netdata.conf` by hand, e.g.
: ` enable = yes ... ` however, dashboard still shows only charts one disk (`nvme3c33n1`) that was autodiscovered before.
there's no mention other disk i configured manually in `error.log` any suggestions on what to try next/how to debug this further?
when running the installer on mac, user management of the installer is broken.
we need to adopt the mac flavour of commands for adding/removing users.
indicative article with some basic instructions: phofurl ** workaround: ** the user can manually create the necessary groups and respectively delete them upon uninstall we can prioritise this if we find community having major problems with this
after the recent xenstat commit updating or installing netdata fails with an error referencing
my config (python): phofcode i see on the dashboard: phofimage phofcode application name: chart name: `read_error_rate`
we have sporadic build failures at py2-psycopg2 .
here 's the end of the log with the details of the error phofcode
current documentation for running netdata in a container recommends to export the docker socket volume: > -v first, the `:ro` does not what people expect: you can still access it and write to the socket.
you can just not change the file.
so i recommend to either remove it to not lull users safety, or at least document clearly what it does (which is, nothing useful).
second, exporting volume into a container with outside access is a very, very bad idea, see: - its a good thing selinux blocks access docker socket.
phofhyperlink - don't expose docker socket (not even container) phofhyperlink tl;dr: with this you enable direct root access host for anyone taking over anything in your container.
this is less secure running netdata outside container framework, as normal application user.
instead, please add docker socket proxy which is not reachable from outside, but exports docker capabilities in controllable and safe way - and read only.
see for example: - docker socket proxy phofhyperlink [howto] launch traefik as container in secure way phofhyperlink was an example how do it with other tools which need socket
when netdata-updater.sh is run from cron, on occasion it leaves it 's log file on the root "/" directory.
the files are named; random 5 digit extension)
the cgroup name on the right menu seems to be truncated some times.
not sure if there 's a max length limit, but it looks strange.
everything works as expected, just need to see where that happens and record it here.
starting recently (discovered today) proxmox containers no longer appear to be renamed.
they are just showing up as their raw lxc container "names".
the perm of `go.d.plugin` is 750 while other external plugins are 755. phofcode
when a lot of docker containers are created in a short period, there is a possibility that empty charts will be displayed for a virtual network interface which was created and immediately destroyed.
the system swap chart should use stack mode, not area mode.
the area mode looks very strange.
<img width="1063" 14 02 33" src=" phofurl
static package fails to install on coreos because /lib is read-only phofurl
i have downloaded and installed the latest as of a few days ago, and after installing and running, clicking the "please sign-in to netdata.cloud to view your nodes" results in the following: file does not exist, or is not accessible:
no python modules will display charts on ubuntu server 18.04 both sensors and redis modules appear to be working.
output of 1 debug sensors` > python.d info: plugin: main: using python 2 > python.d debug: plugin: main: loading > python.d error: plugin: main: cannot load [errno 2] no such file or directory: will try stock version.
> python.d debug: plugin: main: loading debug: module load source: 'sensors' => [ok] debug: loading error: cannot load : [errno 2] no such file or directory: will try stock version.
also attempted to install all python packages on the server that were not present as compared with the livecd.
this also had no effect.
`apps_plugin` plots zeroes for group even if there is no processes in that group.
hello, i have an issue with a python plugin named "merge_charts" the first error was legit, there was a variable i did not defined the second error was also legit, there was a file write attempt with no permissions (i commented the code) so, in this point, i have a valid code which can run on local machine (i imported netdata python libs to run)with no errors.
i imported the plugin in netdata python.d plugins with two jobs to run (from merge_charts.conf).
all errors were reported by netdata, after each fix i restarted netdata agent.
the issue is that netdata seams to execute two jobs with the same module "merge_charts" but the code version is random, does not execute always last version of code!
i am installing netdata over a spotty connection and have gotten my prs merged to address the network quality - #5476 - #5468 i am installing netdata using this command as documented: `bash <(curl -ss phofurl it seems like for some reason, the installer script at phofurl isnt updated to master branch phofhyperlink .
additional question, would it make more sense to change the installation command to `bash <(curl -ss phofurl phofcode
simetimes, zombie processes exist after restarting netdata.
we spent a lot of time trying to identify the root cause of some problems in a master slave setup.
the root cause ended up being that one of the slaves was created by cloning the master, taking the same machine guid with it.
we should have at least a detection of such cases, so we can warn users about it.
verbose curl output causes unwanted emails from netdata-updater cronjob the content of unwanted emails from cron: phofcode
cgroup ram reporting is showing incorrectly.
in one container (which runs a torrent client for seeding) it shows ram usage is full but when i check the netdata instance inside the container it is reporting correctly with used and cache split appropriately.
the ram allocation is 8gb + 1gb for swap (9gb total).
this container will use all free ram for disk cache (released as needed) however this ends up with netdata showing all 8gb as being used when checked from the host.
in my jenkins log, netdata fails to install due to a failed download of `go.d.plugin` phofcode on the cli, i confirmed this issue phofcode
web ui response header show wrong version info phofcode
under python3 the logservice._get_raw_data fails with an exception when undecodable bytes are read from a log file (e.g.
the file encoding is different from what specifies or some garbage data is logged by the monitored application).
this blocks any logservice-based collector until a log rotation happens or netdata is restarted (the method will retry reading the same line every time it is invoked).
` phofurl is still looking in ` phofurl which is not being updated.
netdata installer wget command heavily increases log output during headless install phofurl
containerized netdata doesn 't resolve the containers name even with docker pgid env set correctly.
visual error in slack alert after possibly headless update
when a netdata slave is rebooted, the ip bandwidth counter displays correctly on the slave's dashboard.
however, when the slave is viewed from the master's dashboard, there's a huge spike (3.8 gbps) just after reboot.
this is on a system with a gigabit interface.
there are other systems where reboot causes an even higher spike like 2 million terabits/s.
** master ** screenshot from phofimage ** slave ** screenshot from phofimage
i 'm trying to run the kickstart script in the install documentation, and `wget` is tossing me an error about an untrusted tls certificate on github.
i 've already checked to make sure i have the ubuntu `ca-certificates` package installed and updated.
with the latest update of netdata (kickstart install..), the notifications does not work.. i only have pushbullet, email and slack.
verified this with only enabling the slack notify, and doing a test with `alarm-notify.sh` per the wiki phofhyperlink .
sudo or the like not used to execute freeipmi.plugin, meaning it shits its self in sane config as it is net being run with proper privileges.
unfortunately this requires manually configuring hostname etc be set as a work around.
when trying to run kickstart.sh non-interactively i get the following output: phofcode trying to install it interactively brings up the following: phofcode
the automatic updater script cannot be started since yesterday morning on both my vps servers running netdata.
the following error is logged and mailed to me by cron: phofcode it looks like the updater script is completely gone: phofcode
missing graphs at random times.
screenshoot: proxmox-debian-host phofimage inside-lxc-container 2 phofimage i 've found one similar reported issues, but they were old bug reports and solved by blackisting module acpi_power_meter .
never had such an issue on any other enviroment i 've installed netdata.
on instance where i have powerdns i used old netdata till today and everything works expected with powerdns module.
after completely removing old netdata from system and installed latest version, powerdns module didn 't work.
looking in debug, looks like some library problem.
if i try manually from terminal to get statistics from powerdns everything works.
i tried with command: `wget -o- --header="x-api-key: my-api-key" phofurl also, tried to uncomment from python.d.conf, same problem.
permission denied is shown in journalctl logs when netdata is configured with unix domain socket.
this may be a duplicate of #5178 and related to the recent merge of #4969
i 've been attempting to debug this issue for some time but i haven 't been able to get anywhere... for some reason whenever i try to proxy the netdata registry server throug nginx it results in the dreaded: `error 409: cannot access netdata registry: http://... responded with: strangely enough, when i look in the network tab of the browser debugger (in all of browers i 've tested) i don 't see any failed responses or redirects at all.
both nginx log and netdata log don 't show any non-200 responses either.
accessing registry on port 19999 straight away works perfectly.
i 've read following issues (and have all cookies enabled) but it appears to have no effect: - phofurl - phofurl - phofurl - phofurl
hi when proxying from nginx to netdata with a unix socket; i can 't reach netdata and get the following error on the nginx proxy; 502 bad gateway nginx/1.14.2.
phofcode the thing is when i use a normal tcp connection for the proxy it works just fine.
also, i get these messages in nginx error: phofcode and these messages in netdata access log: phofcode nginx has read/write permissions on the socket so that shouldn 't be a problem either.
it appears as though there is hardcoding for this module to only work with /dev/block_device and not work with /dev/disk/* if that is what is being passed from hddtemp.
instead what netdata uses for disk names is the model number, which there are multiple of the same, so they are a single temperature.
phofimage input data is: phofcode
docker container show container id instead of name.
i tried my own docker monitoring container and with the official netdata container.
in both it show only the container id with a lot of error about cgroup in the error log.
the only that work for me is : titpetric/netdata.
i noticed the smartd_log plugin stopped showing up in my dashboard, so i looked in phofcode
`nginx_plus` and `phpfpm` python.d plugin seems to block the python.d.plugin process when apache is running on port 80 but with no nginx and no phpfpm on the server.
old monit metrics still remains in netdata even after netdata restarted
using netdata inside the official docker container (netdata/netdata) a partition mounted under `/mnt/<name>` is not recognized by netdata.
it only found the disk (sdb in this case) in _disks_ section.
**disk space utilization** info for the given mount are not dispalyed.
quite frequently this line shows up in the error.log: phofcode i think it should be
- makeself produces its own versioning based on date and other factors - `make dist` produces artifacts with future versions.
currently it bumps patch part in semantic versioning.
this behavior is miss leading as it produces a tarball with a non-existent version.
- script tries to modify packages - `netdata.spec.in` is using non-existent version number netdata binary is also using different versioning to store its version number the easiest way would be to require `git` tree when building packages and using `git describe` instead of inventing our own solution to an already solved problem.
as a bonus using `git describe` gives us a way easier reproduce bugs when new issues are coming since we can see exactly which revision is used by an end user.
it will break third-party packaging scripts which depend on tarballs without `.git` directory.
i ran the netdata-installer.sh today to test a pr and saw many lines like the following: phofcode the .conf files are the same, the problem is that filename for stock config is wrong, because it includes `orig`.
the paths in `configs.signatures` two additional executions didn't produce same error, so there must be a condition that is checked before comparing md5 sums (which do match entries in `configs.signatures`.
since -l option is explicitly passed to `find` at phofurl symlink should be followed.
e problem around phofurl where `t`, string expected in `configs.signatures` built.
on the latest and recent version of netdata, i found some server failed to stream the data while the tcp connection "exist".
use `sudo netstat -ptan | grep netstat` will **show a established tcp connection to streaming master, however, on the other side, streaming master don 't have tcp connection**.
there is no error and nothing in log (i didn 't enable debug log though, it 's too complicate to switch debug mode and generate too much log while waiting for reproduce.)
sometimes error seems to be self-recovered, but usually last for day or longer.
and it wasn 't completely missing data, data will come back for every a few hour, last for a while and gone again.
restart netdata service would fix it immediately.
see pic below, after a restart at 18:00 pm, streaming become stable again.
screen shot at 8 53 12 pm phofimage i noticed this bug while since #4425 get merged, but again, i wasn 't able reproduce it.
seeing the following when attempting to build a .deb from release v1.11.1: make[1]: entering directory dh_installdocs cp: cannot stat changelog.md: no such file or directory dh_installdocs: cp -a changelog.md returned exit code 1
my error log is flooded with this message: phofcode here is my `/proc/mdstat`: phofcode
i have identified an inconsistency in netdata.spec.in phofhyperlink compared to git-installation executing `kickstart.sh`.
example: netdata.spec.in line 214 %dir git-installation phofcode
i wriite python.d plugin for journalbeat, it just parse json and send data to netdata.
after update to 1.11 it has strage behavior.
my netdata container recently stopped working.
i can't access the web interface, i'm getting a lot of errors in the docker log phofhyperlink .
when accessing netdata, it shows all stats correctly, except the disk reads (-> writes are shown properly!)
as you can see, the read graph shows `0.0` constantly, except some weird and buggy bumps that have no relation to the actual reads: image phofimage while doing a `cp a b` on the same disk: image phofimage output of `iostat -x`: phofcode
line 96 of the netdata-updater.sh script phofhyperlink contains a bash command substitution that is being interpreted during daily cron runs.
phofurl even though the line is calling an info level logging function, the use of the bash command substitution syntax of $() as well as being encapsulated in double quotes, causes bash to actually execute `git stash pop` command in a sub-shell.
since theres (usually) no stash to pop, command exits with a return code of 1, and cron sends an email every day.
my netdata logs are flooded with the following message: netdata error : plugin[proc] : core 1 found but no more than 1 cores were expected.
this is running in a proxmox container which is allocated 1 core.
the proxmox environment itself runs on an intel xeon e5-2683 v3 (14 cores, 28 threads - sadly not my own hardware...).
my `/proc/cpuinfo` correctly reports i have 1 core.
however, `/proc/schedstat` contains info about `cpu0` through `cpu55` (56 total, or 4x14 for some weird reason.
maybe there 's 2 cpus, i 'm not sure), as does my directory.
the proc plugin detects this discrepancy and consequently throws an error at: phofurl this plugin was moved from python to c a few days ago in #4635
i installed netdata on a host which runs several lxd/lxc containers on a zfs filesystem.
every night these containers are temporarily stopped, snapshotted and restarted.
during this downtime (less than 10 seconds usually) for every container i get bombarded with alarms from with this error: > out of disk inodes time = 4h > estimated time the disk will run out of inodes, if the system continues to allocate inodes with the rate of the last hour edit: i forgot to mention that also alarm for `out of disk space time` gets triggered this way: > out disk space time = 1h > estimated time will run out space, if system continues to add data with rate last hour
slack ignores "channel" and "username" parameters.
the api has been changed so that now it is required to specify the channel the messages will be posted to during the creation of a webhook >the majority of your legacy code for sending messages using incoming webhooks should continue to work within a slack app without much modification; the only thing you can no longer do is customize destination channel and author identity at runtime.
source phofhyperlink i guess that it also makes #3722 obsolete.
i found that on freebsd, most of the free memory are in the 'inactive' memory category.
this results in a constant warning of memory used by 95%+.
my server is at phofurl
`my-netdata` items are clickable but nothing happens.
the items take action only when the hostname is clicked.
documentation scripts added files confusing to contributors and not related to netdata software such as: - requirements.txt - runtime.txt especially that we are using python inside and both files relate to python.
renaming a docker container phofhyperlink does not change its name in netdata
docker container metrics are identified with ids, not names.
when i update the git repo and re-run the kickstart.sh script, it fails as can be seen in the gist here: link phofhyperlink
if you specify the stream destination host like `tcp://examle.com` netdata tells you that the connect failed, instead of an more appropriate `syntax error`.
the rpmspec that's provided in master and in the 1.11.0 release doesn't generate a configure script as part of the build steps, therefore failing to run configure as part of the build.
using edit-config, the editor used is not the system editor, but is forced to vi
i found this bug while using node.d snmp plugin, if i use a counter32 value, the maximum length of the 32bit counter will be full in very short interval, and it reset to 0 after that, with current implementation this will produce 0 value on the graph.
see: screen shot at 3 23 07 pm phofimage
honestly not sure if it 's really a bug, but still maybe it 's worth checking out.
on one of my machines i ran out of space due to hard disk filling up with unrotated log file, once that file has been deleted i noticed that there still an issue with inodes.
phofcode netdata uses 687k inodes phofcode going deeper phofcode looks like interrupts and cpu are guilty of this behavior especially.
i try to use the documented `oidname` setting of `snmp.conf` to monitor a number of sata disk temperatures of a synology diskstation, but the names show up as `nan`.
the python.d.plugin code utilizes a modified `sys.path` that does not include the standard user site-packages directory.
the `netdata` service stops responding despite and the process is gone but the container keeps running.
netdata, more precicly the diskspace plugin, tries to stat() a mountpoint i explicitly try it not to touch at all.
we already had a simmilar problem in the past -> phofurl i have a cifs, kerberized, multiuser mount: ** /etc/fstab ** `//dfspath /mnt/test cifs 0 0` this works perfectly, but each accessing process needs a kerberos ticket valid for the uid of that process.
the netdata process obviously does not posess such ticket.
i dont need statistics for this mount and want netdata to just ignore it.
the parameters **exclude space metrics on filesystems** and **exclude space metrics on paths** dont seem to block all stat() requests.
when nobody has accessed the mountpoint everything is fine, but once somebody has accessed it sooner or later netdata process with uid 999 wants stat() mount: **journalctl output** phofcode i added /mnt/* exclude space metrics on paths and cifs exclude space metrics on filesystems, but nothing works.
its definetly diskspace plugin, because once its deactivated behavious dissappears.
once this attempted access happens one of netdata threads is using 100% and will become zombie upon restart.
**/proc/mounts after boot untriggered mount** phofcode **/proc/mounts once its triggered** phofcode if mount is already triggered is started get following debug out: `netdata[1060]: error : plugin[diskspace] : diskspace: cannot stat() mount point '/mnt/test' (disk '_mnt_test', filesystem 'cifs', root '/').
(errno 13, permission denied)` just noticed something.
when user triggers mount just first level so (cd /mnt/test) only 1 line appears in /proc/mountinfo like above does not appear try stat.
once user starts move in triggers cifs.upcall additional mounts like: phofcode then appears try stat.
can it be, that exception (/mnt/*) limited that toplevel not recursive if happen something /mnt/test/xxx?
with the fix that closes #4421, the installer is effectively now detecting the presence of systemd, but for whatever reason the unit file in `/lib/systemd/system/` seems not detected on ubuntu 14.04. phofcode ive tried to replace install path in `installer/functions.sh` with `/etc/systemd/system` and it seems to work : phofcode i dont know what is best practice, or why `/lib/systemd/system` works on most systems and not ubuntu 14.04. ive always have put my services files in `/etc/systemd/system` without asking myself if it was right place.
phofcode this ultimately results in no alarms being loaded, and probably other things.
when invoking `parcel build` first without `--bundle-node-modules` and then again with `--bundle-node-modules` -- the node modules are not bundled due to the compilation being completely cached
the asset id generation method used in phofurl is prone to collisions.
one example of relative paths that will generate same id is: phofcode phofcode both of these assets will generate asset id "tofw".
having different assets with the same id could and does break some applications.
in parcel v2 when creating a web worker, it will correctly detect the worker entrypoint and create a separate bundle for it, but the resulting bundle will not have the `entry` argument set in the `(function(modules, cache, entry, globalname) {})()` bundle init call.
thus, web worker code is never actually run.
multiple named exports with same name causes crash in parcel.
when using a file with no extension as an entrypoint parcel adds a dot to the end of the file name when building.
parcel seems can 't read html native attributes `onclick`, `onsubmit`, its trigger on click and on submit but the function on it was undefined.
notes that your script must be on `<head>` tag, not body.
there is a very surprising bug with wrapping assets, a local variable inside a function is replaced by an export which was assigned to a variable of the same name as the local vairable in completely different asset.
when trying to use the api, if you import another file which contains imported packages, parcel throws an `could not find a .parcelrc` error.
when using .babelrc and specifying both `targets` and `usebuiltins: 'usage '` i was expecting parcel to only include the core-js polyfills that were necessary to work with the targeted browsers.
instead all polyfills are including (making build size huge).
alternatively, if `import 'core-js/stable '` is removed, then * no * polyfills are included.
whenever i try to start my app, parcel will try to install the dev phofhyperlink npm dependency instead of referencing the dev directory that i have in my `src` directory
build crashes on building react typescript project:
in parcel 2 (2.0.0-alpha.2.1), it doesn't seem like files included by a transform as an asset's `includedfiles` are considered for cache invalidation or rebuilding (when watching).
this can be demonstrated by e.g.
using the `include` feature of pug, where the v2 transformer will loop over includes and do phofhyperlink i initially reported this as a comment on the call to test parcel 2, but decided to create a separate issue because i can't see it tracked already.
apologies if i've missed it.
when using a `sassrc.js` file and define a `data` config, only the code from the configuration is used but the real file is ignored.
when using styled-components within a parent and child bundle, the application throws at runtime with `typeerror: c(...).div is not a function`.
it looks like, within the child bundle, styled-components refers to the named imports instead of the default import.
i have a modular file structure like phofcode --
i just installed parcel via `npm i -g parcel-bundler`.
then i created index.html with the basic html skeletton in a new folder and ran `parcel index.html` with and without package.json
parcel detects sourcemaps in js files when they 're inside js code strings and aren 't actually sourcemaps.
there are multiple unrelated (e.g.
not built together) packages that both use parcel.
one is a small script (script a) that is loaded as a sibling of a larger script (script b) that uses hmr.
when script a loads first, hmr does not work, but when script b loads first, hmr works fine.
when using a static class property within the class itself or outside/ in another file, the reference to its class is not renamed properly.
i tried running parcel 2 alpha in my project to see how it goes, and i was presented with an error "cannot find module...".
i 'm just using the bootstrap + fontawesome recipe and trying to get jquery plugins like venobox and easing to work (this is from a legacy project).
i followed the steps, and afterwards i ran `npm i venobox` and edited main.js to this: phofcode
when including the `@sentry/browser `dependency and calling it's init function the build fails.
if i set a rel canonical link in a page, then parcel breaks if the href doesnt exist.
if its part of a spa, then the canonical url usually doesnt need to exist as an actual file, but will be something that the load balancer will resolve to when i deploy.
for example: phofcode the error i get in the end is: > enoent: no such file or directory, open
if i create a `.parcelrc` then running `parcel build index.html` crashes with exit code 1 and no error is printed to the console.
however if i comment out `(0, at and try again i get following error: ~~~shell typeerror: cannot read property 'report ' of undefined at reporterrunner.report ~~~ i tried many `.parcelrc` but all made parcel crash, such as: ~~~json { "extends": "transforms": { "*.js": } } ~~~ ~~~json { "transforms": { "*.js": } } ~~~ ~~~json "extends": ~~~ ~~~json
parcel has a runtime dependency on `babel-types`, but this dependency is not declared in parcel 's `package.json`.
with certain workflows (i am using rush with pnpm), this causes `parcel build` to fail at runtime.
when i try to install parcel on my computer using `npm install -g parcel-bundler`, i got this error phofcode
i 'm trying out parcel on a sample project, with dependencies installed via npm.
i was really impressed to start with, thanks for developing the project.
when i add an unknown import, it tries to install the missing dep with yarn.
it shouldn 't be using yarn if there 's a `package-lock.json` available.
there 's a bigger problem here though: i was rather surprised to see it start installing things when i changed a file - was actually in the middle of removing code that referenced the package, and parcel decided to unhelpfully reinstall it for me, behavior _i didn 't know existed_.
fwiw think parcel has no business automatically installing packages.
it is functionality way outside reasonable scope of bundler, with way too many edge cases and problems taking time away from hundreds of other outstanding issues.
bundler throws an error about core-js even if the correct version is installed.
happens if dependencies in node modules require their own core-js version.
1. take a look at this project phofhyperlink , which builds a simple html file + site.webmanifest with parcel@1.12.3 2. the manifest is at the path ( code phofhyperlink ) 3. when it gets built, it references the file at ( code phofhyperlink ) 4. the "icons" within that file links to the image at ( code phofhyperlink ) which should be relative to the webmanifest inside `static/` 5. but actual image is placed in root of `dist/` foldr ( dist directory )
take `index.html`: phofcode phofcode phofcode if we build it with parcel `parcel serve --no-hmr index.html`, it includes/runs `y.js` two times.
same time, if we use native es modules: phofcode the `y.js` is run once.
litelement declares its shadowdom html in javascript template literals.
when css files or other assets are declared inside the literal string parcel doesn 't bundle them.
css is especially relevant to allow css files to be injected into the shadowdom.
eg: phofcode the jsx pattern for including resources does not work for template literals
react code in tsx file: import * as react from 'react '; import { routecomponentprops, withrouter } from 'react-router-dom '; import axios from 'axios '; code fails at run time.
when inspecting the axios variable it is null.
routecomponentprops) are not nul and working properly
when two different modules contain the same code, they are collapsed such that the code does not get executed as required.
for example, react-bootstrap contains two files with this content: phofcode with parcel, these "two modules" actually execute only once and return the same value.
if i add some comment to one (e.g.
`//`) it works as expected.
i have two react contexts being used at the same time.
they are created in an identical way, and this results in identical file content: phofcode in development environment, parcel recognizes two react contexts as separate files and everything works as expected.
in production environment, the files are being merged into one!
differences in dist folder output when running `parcel build ./src/index.html` vs `parcel ./src/index.html --no-autoinstall --https` we are building a react application and ran into a routing issue when deploying the app.
after searching a whole working day i noticed it could have something to do with the way parcel builds the dist folder.
when using the serve mode, the output path is wrong
using tree shaking with `parcel build ./src/index.html` does break with an error.
a small repo for reproducing the error is available here: phofurl writing imports in another syntax does indeed work.
running parcel in "dev mode" on os x just constantly rebuilds which triggers reloads making it impossible to work with :(
i am getting a high severity vulnerability in the serialize-to-js dependency.
the audit command output is the following:
scope hoisting doesn 't work when a file is imported multiple times
at sourcegraph, we have a monorepo with a root package.json, and several subprojects with package.jsons that define some scripts, but no dependencies (those are all in the root).
this is expected to work, because the node module resolution algorithm should walk parent directories until it finds the dependency in a node_modules folder.
it works with our projects that use webpack.
however, parcel seems to have a problem with this, in particular react.
i am using parcel to build vue files into js.
a pretty normal vue set up with minimal configuration.
unicode such as &#8217; or &rsquo; got turned in to the actual symbol " " (a curly quote here it is).
and browser cannot display this correctly.
in the compiled js, curly quote should be &#8217; or &rsquo; for html to display them correctly!)
how to disable this behavior?
basically i need preserve the unicode.
when incluide same javascript which imports styles, then after compilation styles appears only on one page.
when including two files with the same content and name but in different folders, the build fails with `bundles must have unique filepaths`.
after starting parcel the process hangs completely.
the only output i receive (in development mode only) is `server running at phofurl opening the url in the browser the server does not respond, it's loading.
in resource monitor, you can see a node js process is spawned with 50-70% cpu usage.
on file system a `.parcel-cache` folder is created with some subfolders which don't contain any files.
after `ctrl + c` process ends after ~1 second as expected.
parcel 2 server returns a 404 page whenever i set a .pug file as entry point
despite parcel-generated certificate working in chrome, firefox is not trusting the certificate with the error
if multiple entry points are used with --open, the browser is uselessly directed to phofurl where nothing is served.
it should instead be directed to the first entry point.
when you have js files that have identical content or the content ends up being identical after minification, the output file contains only one file.
this only happens in prod build.
the dev build contains all files bundled as expected.
this bug has impact on libraries like for example **material ui** where it breaks some functionality after prod build.
adding the `--no-source-maps` flag when running `build` will make dart-sass not find mixins that are clearly there.
the issue disappears if you remove the flag from `build` but then you get a bunch of source maps that are unnecessary in production.
the parcel documentation states that dependencies in `node_modules` get transpiled using `preset-env` but this does not seem to be the case.
when configuring `posthtml-expressions` in a project with vue 's single file components, the components are processed with posthtml before vue, and variables are replaced with "undefined".
or something close to that.
anyways, it breaks the build.
i have a small project consisting of ~5 files.
it also imports some npm-installed third party packages, among them lodash and tfjs.
when trying to debug in chrome dev tools as usual, breakpoints do not work at all.
they either get ignored or get set in completely unrelated places (e.g.
i click on a line in a file of mine and the actual breakpoint gets set in a random file of random npm dependency that i have nothing to do with).
when exceptions are thrown, the call stack is all over place.
call stack entries that are clearly part of my code are referenced to be inside the lodash package etc.
another annoying problem is that at every hot code push / refresh, the underlying files seem to change and all previous breakpoints / call stacks become void.
so far i 've worked extensively with meteor as my bundler and it always worked exactly as expected, without any this weird behavior.
can 't say i 'm impressed from parcel so far.
tippy.js phofhyperlink (dependent on popper.js phofhyperlink ) is not working with tree shaking enabled.
cannot read property 'js ' of null when trying to build project.
this works: phofcode changing to this leads to an error `typeerror: fs_1.readfilesync is not a function` phofcode
when setting the port using the environment variable port; parcel incorrectly reports that the port could not be used.
when combining css, parcel completely ignores `@import url()` statements and allows them to be included in the middle of the output file instead of removing them and appending them to the top of the file.
any `@import url()` statements in "body" of a css file will not be imported.
when importing a `.rs` file from a `.js` file, and building the js file with `parcel build index.js`, the resulting wasm file is much larger than expected.
npm found 63 high severity vulnerabilities when being installed/audited.
when using posthtml modules for templating, modifying a partial html file doesn 't trigger hmr as it should.
i 'm trying to use parcel to build an npm package i can use in other projects.
in this case, it is the react component i 'm building for use can be found here: phofurl i 'm trying to test before publishing.
i tried using npm-link, and i 've also tried directly installing.
in all cases, i get the following error in my project that depends on it: phofcode i followed the link, but couldn 't find a resolution based on what was seeing.
notice that npm-link could lead to the issue.
have confirmed that same version of react (16.8.1) is installed in both my library and in my sample project, and that it is listed as a peer dependency library (it is worth noting it also a dev depenency, but from what i 've read that 's supposed be case).
lastly, as far as can tell, i 'm using hooks correct locations.
so wondering if something wonky happening build process making my dist/index.js invalid for whatever reason.
i 'm using parcel api to integrate it inside a gulpfile.js.
when running it withing gulp it does not find any of the plugins i 've install, looks like it does not find the package.json.
when specifying multiple entry files via a glob, the "vue-hot-reload-api" module is missing from one of the bundles.
parcel does not recognize the `__dev__` variable (babel plugin) that gets transformed into `process.env.node_env !== 'production '` and throws an error.
postcss config support plugins set as an array (`{plugins: []}`), but doing so prevents being able to set custom `postcss-modules` config.
the trouble here is that i use a shared postcss-config file, but even if i didn't, the plugins array syntax is more explicit, not depending on js's unsupported object key order.
my application using typescript and react, so i 'm following this phofhyperlink gist from parcel docs to make src folder as root, but unfortunately i get the error.
i imported fontawesome's styles into my app and parcel build broke.
apparently parcel tries to copy the font files but infers an incorrect source path.
new to parcel and i 'm trying to deploy an app made from bricks.js on my "work.html" page in my personal website with a custom url.
i 'm getting very strange warnings about sourcemaps.
only on the '/ ' page.
see: screen shot at 22 30 03 phofimage
parcel says `token`, which is a typescript interface, is not exported when i use i create a repo to reproduce this issue.
i have these two files: </tile> </msapplication> </browserconfig>
when building a node application with bundled node modules (e.g.
`node-pty`) the native .node files are copied to the `dist` folder but the references to them inside of the `.js` file are not updated to point to correct location.
trying to replace webpack in compiling server-side code to a single .js file (for use in an aws lambda).
the file generated by parcel appears to be non-functional, at least the way i am trying to start it.
i have created a publicly-available repo provide complete reproducibility: phofurl `use-parcel-not-webpack` branch.
phofcode fails when using a proxy server, load balancer or ssl-endpoint.
reason: parcel should not assume it can open a port on `www.foobar.com`'s ip address, because that ip belongs to the proxy, and not to parcel's host.
it appear that hot reload only refresh one line of dependant modules instead of all of dependant modules
`parcel build` 's minifer erases `ref` attribute for vue.js of `<svg>`.
parcel fails to load the `elm` module, which was installed by parcel due to missing globally installed elm binary.
hmr `update` events are currently causing `referenceerror: window does not exist` in browser-targeted apps *that use web workers*.
this appears to be happening because `hrm-runtime.js` makes reference to the `window` global, which doesn't exist in a web worker context: phofcode
when building our application, which has multiple elm-mains sharing some modules, on windows, the build process crashes with phofcode
hot reloading fires browser refresh only after trying it in chrome first
i 've a project with vanilla javascript,jquery and i 'm migrating these to parcel for modularize,minify the js and compile the sass, **my project compiles ok and builds ok**, but if i run this with the include local server (parcel index.html --public-url .
), i get these errors phofcode if i click inside some of these js files, show the main html, so seems than parcel is taking html as body for my js files also external dependency files like jquery are not working (but when i build project works fine) i 'm using jquery not modularized (not npm) instead requering file phofcode when build project with parcel build or parcel watch works but with live server get undefined $
it seems that globs only work relative to the importing file.
when using `/` or `~` as the start to a glob, the resulting argument to fast-glob is either just the glob argument (starting at your fs root) or full path with a `~` in middle (e.g.
i have two html pages: index.html about.html both html files share the same script reference: **<script src="./app.js">** inside app.js, i have one file import , which is the scss file **"import "./style.scss";"** however upon running: "parcel *.html" only about.html has the stylesheet tag.
kindly guide me, i 'm new to bundlers.
typescript with css modules is not working.
in my configuration, parcel rewrite its package.json even though it is told not to ... and since parcel is installed locally (no -g, global is evil) it removes itself from the node module directory, some kind of suicide ...
when there 's an error in the reasonml code, parcel will not complain but instead just not recompile.
this only happens if it previously has compiled successfully
i did a simple build speed test between parcel and webpack on a same simple vue project.
however, webpack did better than parcel.
parcel throws an error when adding a new file whilst using glob imports in css files
parcel fails and app won 't run with code shown below.
parcel doesn 't track file, if the file path is taken from store
when a js function in a `<script>` is minified, references to that function in `onclick, onscroll, onload ...` are not renamed to the minified name.
examples: original function phofcode minified function phofcode original call in html event handler attribute phofcode output call phofcode as you can see, those are not changed and therefore the cannot properly be called.
when changing js the entire page is being reloaded instead of hot-reloading.
i 'm using node "promisify" on "fs" methods, like: `const writefile = parcel builds the package successfully, but when importing it in another project, i receive the following error: `typeerror: the "original" argument must be of type function` when using the **`--target node`** flag: `typeerror [err_invalid_arg_type]: the "original" argument must be of type function.
when using vue web components, the styles are not attached to the component
parcel remove single quote on production build css
module a depends on module b, which is processed by parcel, when running ** jest ** for module a, ** jest ** throws following error: phofcode
i 'm trying to globally install parcel@latest and am getting `couldn 't find package "@parcel/fs@1.11.0" required by "parcel@latest" on the "npm" registry.` this seems to be an issue using either npm or yarn to install.
i tried installing `parcel@1.11` but that fails with the same issue.
it seems that parcel 1.10.3 is the latest version i can get to install without getting the error.
i upgraded from `v1.11.0` to `v1.12.3` and hot module reloading is no longer working.
whenever i make a change to one of my react components, it will trigger a rebuild, but then the browser page goes blank.
the error in the console is `uncaught syntaxerror: unexpected end of input`, and it looks like the `.js` file is only partly there.
if i manually reload the page everything then works fine until i make another change.
in `cli.js` an option called `--no-autoinstall` produces a value in the final `options` object called `autoinstall`, while in `bundler.js` the `normalizeoptions` function expects a value called `autoinstall`.
since `autoinstall` is never declared, the auto install feature cannot be disabled via the flag as expected.
i'm the author of `vue-storybook` phofhyperlink , a library that allows vue developers to add `<story>` blocks to their vue single-file components and have them automatically translated into storybook phofhyperlink stories.
parcel is my go-to bundler, though i'm experiencing some strange behavior when bundling/publishing my library code and subsequently using it in a freshly scaffolded vue cli project.
without fail, when running the vue development server, i'm getting the following warning: phofcode i'm confused, because i _don't_ see this message when i bundle my library code with webpack or rollup.
doubly confused because not using any special configuration with parcel, just a good ole' `build` command.
it's just a warning, so not _too_ concerned.
but i've gotten user feedback that this is distracting.
i'd like the warning to go away.
given a directory structure where the parcel project resides in a subdirectory.
when referencing a css file anywhere in the parent directory structure, parcel overwrites the `package.json` file in the subdirectory completely with a file containing exclusively `devdependencies` with single entry for `cssnano`.
this does not happen if `--no-minification` is specified on command line.
parcel ** sometimes ** fails to start due to a less sourcemaps error phofhyperlink (no files changed between those `npm start` instances), it seems to happen randomly, sometimes i have to re-run the script 3 times before it happens.
editing any .less file (so that parcel rebuilds the changes) or restarting parcel seems solve it.
my hunch is that is due the plugins that the less files (boostrap 4 less adaptation) use, in this case.
importing a .svg file into my react component is failing with the following error: phofcode
parcel is adding a `<pre>:</pre>` tag to all of my served sites.
this tag being added through a javascript function called by the `hmr-runtime.js` app generated by parcel, specifically the function phofhyperlink .
this function is called higher up phofhyperlink in the script when websockets are undefined and `data.type === 'error '`.
the calling function is supposed to be doing a `console.log()` of the error via ' + data.error.message + ' ' + data.error.stack);`, but this isn 't outputting.
i have tested this on an extremely minimal set up - installing parcel-bundler alone with nothing else, a barebones index.html, and simplistic app.js that only runs single `console.log()`.
this error shows through even when i attempt to access localhost site in an anonymous browser window (i.e.
no extensions running that would affect it).
if i try to enable tree shaking (with building my typescript react project, nothing is displayed any more.
and no error message either in build time nor in run time.
without the option, everything works well and my apps runs properly.
it works as expected in development mode of course.
tilde path does not work when importing css from node_modules
parcel does not appear to follow `extends` in tsconfig.json
sometimes (usually after big changes), hmr reloads the page and it breaks.
turns out the javascript file included into html is the same as the html itself so it fails to parse it.
when building application with multiple entrypoints the source map for css file is invalid.
- the cloned folder from github builds properly, but not usable with react directly - doing yarn add puppeteer or yarn add puppeteer-core, and then building the index.html fails - does not work with browserify bundle provided by puppeteer-web - alias in package.json works both with the built file, clonned git repo
using parcel with its api generate `error: cannot add a worker call if workerfarm is ending.` errors randomly at build step, which trash the terminal with errors
markdown as an entry point phofhyperlink .
however, i 've run into some small but breaking issues.
when i import oidc-client and write "new usermanager({...})" in a parcel bundled project, i get this issue: "uncaught typeerror: cannot read property of undefined" i tried it without parcel and it worked.
so the issue should be caused by parcel.
running `parcel watch` on a minimal project: phofcode i want to rename `index.js` to `main.js`.
i start by changing `index.js` to `main.js` in `index.html` and parcel rightfully complains: phofcode so i rename the actual file in another shell... phofcode
so this is very strange issue.
app fails to start with following error: image phofimage and the specific conditions that create this issue: - there are components loaded lazily with `import('')` syntax (doesn't happen if components are just imported) - there are more than 1 component that is loaded lazily (doesn't happen if there's only 1 component) - each of these components are wrapped with another component (doesn't happen if wrapped with regular div or entire route is wrapped that component) - this wrapper component import image (doesn't happen if it doesn't import an image)
calling `parcel build <entry point>` with all default configuration results in a warning from `@babel/preset-env`.
simple tilde paths as described under getting started phofhyperlink don 't seem to be resolving.
the scss inside vue components is not working.
but no styles are added to the page.
the scss code outside vue components works without any problem.
if i use package.json phofcode all the scss code stops showing on the pages.
it comes back if modules is set to false.
but in both cases, scss in vue components don 't work.
scope handling fails with `--target node` and es imports of node builtin modules (e.g.
parcel generates wrong path for image source url: image phofimage while the image is available at url: phofurl
this bug is related to the issue phofurl and also to this pull request: phofurl if you specify the parameter `--public-url ./` when calling the parcel cli (like it is described in the doc for cli) relative links (e.g.
hrefs) are relative to root directory and not relative to sub directory in which bundle/html file is located.
when the hash of a bundle a changes, the hash of a bundle b that includes bundle a should also change.
on a fresh elm project following the exact steps provided in the documentation phofhyperlink , any change to the index.js or main.elm files results in an error.
when i try to link an html document that is in a subdirectory to itself the url is not correct
after upgrading parcel-bundler from `1.11.0` to `1.12.0` our app throws an error when we try to run it after building.
probably related to: < phofurl relative/absolute files imports with single or glob patterns return invalid file paths with weird characters.
in both serve and production mode.
parcel is incorrectly renaming the paths of `background: url` entries.
works with 1.11, the path has no slashes * image path: * `/src/pages/landing.tsx` phofcode * /src/pages/landing.scss phofcode
library such as anime.js that interact with html cannot load properly.
this only occured after upgrading to parcel 1.12.0 (may be linked to #2738).
using a npm library that was build with webpack (eg.
phofurl i suspect there may be others.
webpack adds the following lines: phofcode
can 't resolve background image url in .less file
i want to remove hash of a js file using cli, not api
trying to bundle a small project utilizing moment-range phofhyperlink version 3.1.1 we receive an error when bundling during the step of sourcemaps.
a standalone repo to duplicate can be found at: phofurl
a vue single file component with a typescript script shows incorrect line numbers.
when importing the `grommet` package, i get unexpected errors.
i had to upgrade my parceljs version from `1.9.3` to `1.11.0` and babel from 6th to 7th version, because some of babel plugins were available only on 7th version.
but now when i run `parcel index.html` it does not make an update properly.
parcel only watches for the first changes save, makes hmr and then if i make some changes at the same file again it does not affect anything.
if i change another file, parcel detects changes and makes reload, but the previous file changes does not apply at all.
have vuejs project with pug templates (if it can be useful).
basically the same, as in #899, but with typescript.
when a dynamic import is made inside of an env conditional like `if (process.env.node_env !== 'production') {` the import is also resolved when `node_env=production`.
first i would to say that i parcel.
my problem is related to react 16.6.x hooks, but strangely it 's only an issue when importing module from parent (eg.
there are few more issues related to react-hot-loader and react 16.6.x hooks, but i promise this one is different :).
let 's imagine following project structure of ** typescript ** project phofcode from `playground/module2.ts` i 'm importing `module1.ts` (react component) that is located in parent dir (`../src`).
so import looks like: phofcode however compiled bundle is not usable.
it triggers react error: `error: hooks can only be called inside the body of a function component.` interesingly making symlink from `playground` directory to parent `src` -> `ln -s ../src src` and importing same module as: phofcode works just fine.
bundle doesn 't trigger any error.
continuation of #2079 > i am still seeing this issue on parcel-bundler 1.11.0.
> > 1. if i build with source maps, then `rm -r dist/` and build with `--no-source-maps`, then i still get source maps in `dist/` > 2. if i then `rm -r .cache/ dist/` to remove both the cache and dist and build again with `--no-source-maps`, then get it without source maps phofcode by @mrcoles
when using hot reloading with css (in this case scss) modules, when a user hits save, a link will be added to the page with the correct link to the css location + date.now().
image phofimage however, since the old link is not removed, it won 't hot reload.
after hitting save again, these links will both update.
im working on a simple single page application build with lit-element.
i bundle everything together using parcel and that works pretty good.
but in live development, whenever i change something inside of a custom element, the page won 't refresh and i geht this issue: "uncaught domexception: failed to execute 'define ' on this name has already been used with this registry"
i 'm using parcel, typescript, react and a custom .babelrc.
when starting parcel or building with parcel, the error below occurs.
it can 't handle the generic.
it appears that cache keys always miss if the full path has changed, which is something likely to happen in a ci system.
on ubuntu, elm files do not compile and hot reload after a change is made.
this only affects changes after the very first change.
i have included a test repository to showcase code and config.
when building a vue project that has an external js file for the script, the js file never gets loaded with a build but will work fine if you user `parcel index.html`.
while trying to reproduce #2373, i found that chrome has stopped working with parcel sourcemaps entirely.
when trying to import an installed sass module, in this case bootstrap (for testing), import fails.
when the entry file is inside a dot folder, i get the following error in my browser: phofcode it seems like the server might be serving the html as js for some reason (instead of serving real js file).
app works perfectly when running locally using `parcel src/index.html`, however after creating a production bundle by running `parcel build src/index.html` and attempting to serve the static assets using vscode live serve phofhyperlink or serve phofhyperlink the app is being served with missing css and javascript files.
the same thing happens when the app is served via github pages phofhyperlink .
interestingly enough, http-serve phofhyperlink is able to serve the app in its entirety.
the repository containing whole source code can be found here
when i build my package basedirs phofhyperlink with experimental scope hoisting, it fails with the error `cannot read property 'id' of undefined`.
the entry point is a html file.
the bundler doen 't seem to detect the resource file which is specified in `<amp-img>` tag 's `src` attribute.
the path in output file is the same as the input file.
referenceerror: __dirname is not defined` in case if you are using code splitting inside a code spitted block the function `loadjsbundle` would be added to the parent block.
the function is simple phofcode the problem - it could not execute _itself_, ie own duplicate in a chunk, as long as it __eval__ module code, and `__dirname` is __not defined__ for eval.
`new worker('myworker.js', { type: 'module' })` doesn't get transpiled (i'm guessing because visitors/dependencies.js 's iswebworker test involves `args.length === 1`.)
removing the second argument to the worker ctor results in parcel working flawlessly.
it seems like the functionality of `{ type: 'module' }` is already supported, but the parser disallows it.
it 's really rare for developers ' machine to not have java.
(and actually, mine was one of that rare one.)
note: it 's the issue for #2590. i 'm writing it here because i messed that pr up and started again from scratch.
i 'll publish new pr soon.
when you run tests on windows, tests that use symlinks fail because windows doesn 't allow symlink to normal users by default for security.
phofhyperlink (you need admin privilege to run them.)
note: it 's the issue for #2590. i 'm writing it here because i messed that pr up and started again from scratch.
i 'll publish new pr soon.
in typescript applications, parcel doesn 't reload the code properly when an interface or type is updated.
google gtag snippet is getting broken and rewritten as this: phofcode
using 'composes ' with cssmodules results with duplicate styles exported:
importing a .vue file from outside the project root destroys the package.json file.
i tried to override an asset via `extensions` options.
it did not work because the options passed to the parser are normalized before, and losing this information.
see phofurl maybe this is intended and not a bug, i expeted this to work.
let me know your thoughts.
i 'm opening this as a bug report because the behavior is unexpected, but i 'm not sure what "correct" behavior is.
there is some dialog here: phofurl and there is a very minimal setup here: phofurl which produces the output in the current behavior section.
bignumber.js specifies a module file which is an es6 module.
it has the following code: phofurl when compiled into dist.js es6 module compiled and module.exports contains a "default" key instead of module.exports equaling bignumber - which breaks packages which use bignumber.js
so i try to build my bundles through a local parcel package installation.
please be aware of the keyword ** parcel ** as it is used twice in a row to get the package.json configuration working.
that is weird and i really don 't know why.
it 's currently not possible to set --bundle-node-modules as an option in parcel bundler scripts.
parcel build errors out with the following error when building: phofcode after updating the heroku env variable to parcel_workers=1, build hangs indefinitely.
compiling the mwe (involving `type`) fails with parcel
using watch, if i do changes in app.js file or main vue file imported into app.js it works, if i 'm doing changes in other .vue files imported in main .vue file it doesn 't work.
using multiple entry files, i'm trying to get custom file names for each entry.
as hard as i try, this seems to now work.
one of the out files gets renames, but the other always seems to keep the original filename.
i ran into this issue using `watch` so the `build` commands are just me trying to get this working as expected.
in one of my files i have: phofcode when i comment the dynamic import, it works.
but when both import are present i 've got this error: "cannot find module \'jsonwebtoken \'".
the weird part is when i uncomment it: at the beginning, it works (with hot reload), but when i reload, it stops working bug-parcel-720 phofimage
when using parcel to transpile an electron app that uses bootstrap-vue phofhyperlink the output throws a javascript exception.
it is only this particular module that causes this problem.
other modules works as expected.
`.babelrc` plugins aren 't applied on typescript files.
it does work on javascript files though.
i 'm using parcel bundler with mithril.js and typescript.
with `import * as m from 'mithril '` it will complain that `m is not a function`.
but with `import m from 'mithril '` it works.
but with `import m from 'mithril '` the typescript checker would complain about `mithril has no default export`.
when building a rust project, if there are spaces in the path parcel fails with the following error where the path was `/path/with spaces in it/`.
note: this is not a fatal error, it just logs to the console.
everything else still seems to work.
i have a simple web application build with parcel.
i use react with route-based code splitting.
i am attempting to deploy a parcel app to heroku.
i have succesfully deployed the app itself to heroku (heroku reports succesful build), however when the app attempts to start i receive an error: phofcode it appears heroku is failing locate the cli.js, but when i look in my local files can see the cli file is there.
are there any other possibilities that would cause this happen?
i think this is related to #2041, but showing the same symptom in a slightly different context.
it seems that when using scope hoisting and minification, any class method cannot refer to its own class, i.e.
to create a copy of itself: phofcode
i 'm using semantic-ui-react and the `build` fails.
in dev, it 's working fine.
in my `index.js`, i 'm importing the semantic css file as follow: phofcode
when building kotlin code in a directory with spaces, parcel errors out with `[path to file before space] is not recognized as an internal or external command, operable program or batch file` (on windows).
it is expected that this error will happen on other operating systems as well.
when using css modules with `composes` from another scss file, the imported file is not transpiled using sass.
everything is working as expected when using `composes` inside the same file.
in a custom asset, { includedinparent: true })` fails to rebuild parent asset when a watched file changes.
related to phofurl if typescript option is set to `{ jsx: preserve }` (so that babel transforms can work on jsx files), then those files won't get transformed by typescript rules (i.e.
i tried adding but that did not work with parcel, so i'm guessing these final transforms must be done by parcel itself.
as a related issue, it doesn't seem like parcel adheres to typescript's `extend` rule and only picks up rules from the config in the root directory.
i was using `typescript` + dotenv.
i changed `.env` file, but `parcel` didn 't recognize that change even when i restarted `parcel`.
i was attempting to use parcel with a react project using emotion v10, a css-in-js library.
emotion recommends using a preset which configures several plugins to enable a custom jsx pragma, per phofurl however, when using this with parcel, parcel 's default configuration for compiling jsx files doesn 't seem to respect the configuration inside the preset.
i ended up copy/pasting the plugin configuration from the preset into my `plugins` configuration in .babelrc: phofcode which did work.
when using the following command, the source maps generated by parcel doesn 't keep the file extension which makes debugging impossible using vscode.
`parcel build src/index.ts --target node` parcel generates two file `index.js` and `index.map` the reason why i know this is indeed the problem with my debugger is because if i rename `index.map > index.js.map` and change last line of `index.js` to `//# then debugger works like a charm
i am facing a problem on mithril with parcel and couldn't find a solution anywhere including your github issues.
this is related to phonegap.
i am developing a new application and successfully able to parcel it into a bundle.
running the compiled bundle over server works great.
however, when i try to open the html file directly in browser, it gives lot of error.
therefore, when i put the zip file in phonegap, it doesn't run at al.
any idea where might be going wrong?
parcel using most of cpu even when at idle.
hi unfortunately the plugin seems not to work as expected in combination with parceljs.
when i 'm importing a rust function in, it works great at first.
the code executes and i get no errors.
however, after i make any edit (trivial or non trivial, doesn 't matter), my console will say "_{rust file name}.
{function name} is not a function" and indeed, logging the function object gives an `undefined` value.
despite that, the function will continue to work.
however, only the version of the function pre-edit will execute.
refreshing page will mean new edited version of start working.
as far as i can see, something is broken with hmr for rust files.
i have not tested this with importing a .wasm file, same problem may apply there.
with a basic setup of parcel + parcel middleware in an express server.
when you do: - load page - change component - component is updated - reload page component is back to previous state and not updated the current parcel-bundler middleware ( phofurl will fail at sending updated code when doing a full reload of a react application.
it seems to be triggered by the hmr feature.
here 's a repository that is replicating the issue: phofurl with instructions
i have following file tree: phofcode the step-1.html and step-2.html are both linking to the main.js and main.css.
in order to get to that path i have to use phofcode and phofcode access them.
but when bundling them with parcel using following command phofcode , parcel bundles the output as if they are in the same folder.
anchor tags, however, are working fine.
hi i found out that generated source maps for javascript files are not working correctly if you 're using es modules and named imports.
by trying to debug a named import inside the dev-tools, at a point before it is used, it is not available.
as i understand, this behavior happens because imports are regularly defined at the top of a file, but the generated javascript bundle provides the transpiled named import only at point where it is used.
when generating code with parcel that contains dynamic imports (code splitting) the expected path of secondary bundles is always expected to be at the root path and ignores the `--public-url` flag.
__update:__ it turns out that parcel uses a stack trace to resolve the path to primary bundle, then uses this to determine base path of secondary bundles.
however this only works with files loaded from protocols ` phofurl ` phofurl ' phofurl and 'file://'.
i've created a pull request support `chrome-extension://` protocol.
importing sass files fails when using the absolute path phofhyperlink approach to module resolution.
hello, our experience with parcel has been very poor so far.
first we had an issue with multiple watch instances raising cpu to 100% because old ones weren 't closed if connection timed out, but we managed to get around that with automatic timeouts.
then parcel decided to raise cpu to 100% on our aws production pipeline s3 setup.
we tried different options, some library updates, etc.
so we went for a better plan test.
then we went back down without changing anything in the repo.
it was ok for a bit and now the problem returned on travis where can 't do anything with cpu.
they moved phofurl and builds started failing.
we tried different distributions no result, also getting rid of yarn cache and setting the worker environment variable.
it stopped at `build removeclass.js` consistently, so upgraded `dom-helpers` which the file belongs.
then it started consistently stopping at `build someproject.scss` project file which has nothing unusual.
using disable minification parcel option moved it a bit further our modal file and i stopped for now because no idea how many steps like that will be required.
locally on node docker container it works just fine builds in under a minute.
i 'll try lowering container 's available cpu see if that changes things.
edit: apparently it works `cpus: 0.5`... very slowly but goes through at least.
so i guess it 's not related cpu alone.
i removed `node_modules`, `dist` `.cache` make sure container starts like travis does.
loading via `script src` a local copy of a library doesn 't create the `window` global that it does if the library were loaded from its absolute url, or if the html file were open directly in the browser via `file:///`.
even after pulling the fix for #2358, still fails with: > failed to install https what am i doing wrong?
failing to load cdn libraries seems like a blatant omission.
i tried the `math` example from the 1.9.0 blog post phofhyperlink to see if tree shaking worked.
it doesn 't seem to do anything for me.
parcel with source maps enabled cannot import livescript
when using `parcel build` with multiple entries, url rewriting can fail.
when using variables in the url() function the events.js throws the following error: phofcode
when following the getting started exemple phofhyperlink and running `parcel index.html` i get the following errors `/parceltest/index.html: cannot read property 'walk ' of null`
when i try to enable log level 5 on the parcel dev server `parcel serve` i get an error.
`error: enoent: no such file or directory, open pm.log '`
when using the following command: parcel build index.html --detailed-report --public-url ./ no source maps are produced and react doesn 't work: > uncaught referenceerror: react is not defined
i am working with multiple page setup, with all pages interlinked by anchors.
all the styling provided by scss is imported in index.js, which automatically adds stylesheet link to every html file.
this works just fine, however, when i try to add anchor leading to the second html file, it removes the styling from that page (styling still works on page without the anchor).
initially everything worked ok, after first time import of mwc-fab ( phofurl every @material/mwc package was crashing for me at build time with: cannot resolve dependency removing mwc-fab did not help.
also, a "dirty" fix is to manually change the import in the dependency from: `import {classmap} from to `import {classmap} from lit-html is a dependency for my project and also for each of the @material-mwc packages.
i run `parcel watch` command, but it hangs on _linking dependencies..._
loading the dev server output in ie11 keeps bundles from loading.
it 's a hard stop that prevents the base page from even attempting to continue.
note: this is from what 's generated by parcel, not my app source code or my dependencies.
see this comment phofhyperlink below.
fails with: > only absolute urls are supported > failed to install https the code works just fine without parcel when i open `index.html` in chrome.
what am i doing wrong?
failing to load cdn libraries seems like a blatant omission.
`` could not load source file "../src/objectcache.ts" in source map of `` after upgrading from 1.06 to 1.10.
the exact cli command i 'm running `parcel build src/app/index.tsx --no-source-maps it is still outputting source maps
i am struggling when using `parcel` with `--target node` if my source contains `fs.readfilesync`.
when i run the resulting build using `node`, it fails with `error: enoent: no such file or directory`.
i have a mono-repo that consists of library/shared projects and many independent web apps.
almost all these web apps rely on a parcel plugin.
as long as i have that parcel plugin specified in devdependency of each web apps it is being loaded/used however if i have it declared only in the root package.json (lerna monorepo) it does not seem to get loaded.
i was expecting that there will be a traversal to the parent package.json to find the dependencies.
may be it is intentional and known behavior however takes away the benefits of monorepo where all my dev dependencies should be at root.
also since have many web apps in this monorepo and parcel-bundler itself depends on babel and many other packages cost (of packages in node_modules) is not ignorable.
code splitting not working with react router and react lazy.
i 'm not sure if i 'm missing something, but i tried to use parcel to bundle multiple entry files by following documentation but ran into issues.
running parcel, then opening the resulting application in my browser results in phofcode
i have a very simple project.
using `parcel index.html` works fine, but when i try production build `parcel build app.js` it seems it tries to install cssnano/package.json, then i get the message about github rsa, then another message again about installing cssnano.
console output for `parcel build app.js`: phofcode at this point the console stalls.
currently, not all files are going through babel transforms, even though it 's explicitly set in `.babelrc` file.
when running `bundler.serve()`, assets seem to be loaded * twice * during the _first_ pass at bundling everything (from that point on, they are only loaded once whenever a file is changed).
more specifically, my asset plugin's `load()` method gets called * twice * for every asset when the server is building the first bundle during startup.
on a brand new project, running either one of the following commands would result in the error (see current behavior section) from the command line phofcode phofcode
out of the box, the compilation to js of some <script works but in the resulting html the type attribute is kept intact (application/ts) and browser (firefox in my case) doesn 't execute produced javascript
i was trying to use parcel together with @babel/preset-env to create a bundle to run on ie 11. in my source code i had a call to object.assign.
after build the code fails running on ie with the following mesage `object doesn 't support property or method 'assign '`.
i have created a repo for reproducing the bug here: phofurl
if i declare a web worker like this phofcode parcel does not bundle a web worker file.
i believe that it is because of this line where it requires a string literal for the argument.
phofurl i have a wrapper that creates web workers attached to queue and its convenient to pass in the path of the file to generate the worker.
for now, i have to work around it like so phofcode
i'd like to add a custom asset for files with the extension `.tpl.html`.
since the parser uses `path.extname` (see phofurl which does not support this use case, i'm unable to do so.
i'd consider this a bug.
i'd be interested to hear the thoughts of the parcel team as to whether you'd accept a pr fix it?
parcel not working with node 11.0.0
attempting to bundle a polymer 2 project results in a `maximum call stack size exceeded` error being thrown, but only with certain values of `browserslist` in `package.json`.
when referencing a js asset by npm package with subpath, e.g.
a different asset is loaded than when referencing that same asset from within the package, e.g.
this causes issues with type checking among other things.
(graphql is particularly sensitive to duplicates like this.)
i was trying out `emotion` @ version `10.0.0-beta.7` with the babel-plugin.
with the default config: phofcode the plugin seems to try to access `process` to determine if it should run in production or development mode (to add labels or minify), but fails since it can not access the variable.
phofcode *note: i am not 100% sure that this is an issue wie parcel, could also be that plugins does something it shouldn 't do?
parcel is not rebuilding or reloading the dev server when i save files.
i have searched all over for this but i am not able to find anything regarding my issue.
i am trying to create a simple vue-router example with parcel.
i have used the example phofhyperlink from vue-router page.
only see a blank page.
there must be something am doing wrong.
the only reason think this might be a bug is that when remove parceljs and just use `<script>` tags from the example, it does work.
also followed the example phofhyperlink pages to create a vue project.
i'm working on a webextension for firefox.
the code is written in typescript.
but parcel generates sourcemap paths that are not parsed correctly by firefox.
the paths look like this: `//# without the slash in from of content2.map, the path can be read by firefox.
this problem occurs only for sourcefiles within folders.
to be sure i used the parceljs getting started guide and added a data subfolder with two files in it: ./data/index.js phofcode and ./data/test1.json phofcode then i changed the root ./index.js file as follows phofcode then when all files are saved, start parcel with parcel index.html and the console will show hello world with a object on the next line containing test1.
now keep parcel running and create a new json file ./data/test2.json with some arbitrary information like phofcode but nothing happens.
this could be happening for some understandable reason, but when editing ./data/index.js file it should be picked up.
however, this is not case.
issue happens if you try to create a new class that extends eventemitter.
when i try to build code using tree shaking flag, i get error that global variable `eventemitter` doesn't exist.
everything works fine in development mode, as well as build without experimental flag.
i am trying to include sourcemaps for a dependency that has been linked.
`npm link mydep` this is working with the caveat that the sourcemaps appear under the same root `src/` in chrome devtools.
this is a problem b/c the linked node_module sourcemaps appear mixed with my applications sourcemaps and will be overwritten by my app if any conflicts exist.
i had an index.html which contain a main.js file.
phofcode when using import, it always show 2 vue development message in console.
image phofimage 1 is from line "import vue ... ", and second is from line "import comp ... " this also happen in production build.
is this correct behavior ?
i 'm using parcel to manage a react-ts-ssr project.
i want to be able to run the server part in dev mode.
the server part of the project also runs a `apollo-graphql` middleware in order to proxy the backend rest api.
tried eslintconfig in package.json, .eslintrc.json and .eslintrc.js but parcel is not picking up on it and doesn 't install the devdependencies.
i ran into an issue only seen when building in production that when lodash 's clone method was called it would lead to the following error: phofcode i tracked it down to this line here: phofurl and added some extra logging around it.
what i found was that the "stack" variable, which should be a reference to an imported lodash function, was actually the string which is the generated filename for one of images that import in another file.
i tracked it down further and found that requires map to same id: phofcode so somehow, only in production build, these things are being mapped same id.
everything is fine in dev/watch mode.
i 'm trying to update an npm package to use in a different web application.
the npm package imports a ` './utils '` file.
it uses parcel for bundling, while the web application runs a gulp task with browserify.
when the gulp task runs, an error that reads "cannot find module ./utils" is thrown.
i looked in the bundle file created by parcel, and i noticed that it 's requiring ` './utils '`.
is parcel ideal for bundling npm modules in this manner?
when requiring 'parcel-bundler' within an electron process a native exception is thrown.
parcel seems to look only at `dependencies` in `package.json` when deciding if the new or old transform should be used.
i had `@babel/core` installed in `devdependencies` which caused build failures when the babel plugins complained about babel v6 being used.
typescript project that perfectly works with v1.10.1 and v1.10.2 is getting an error with v1.10.3 screen shot at 7 07 26 pm phofimage
in file b, importing a new file a that doesn't initially typecheck doesn't trigger reloads on subsequent changes.
getting an unexpected token error for no reason i can discern.
parcel says you can provide postcss configs using .postcssrc (json), .postcssrc.js, or postcss.config.js.
but this does not just work!
parcel misses out on this file for some reason.
adding style= can cause non-hashed named js files to be included that dont exist
i am trying to compile script using parcel that would run in electron.
`alias` key seems to be ignored for some reason if `--target` is set either to `node` or `electron`, it works fine otherwise.
when building a javascript file that uses object spread syntax, parcel 1.9.7 produces working output, while parcel 1.10.1 produces output that fails when run.
if i build a file that contains this snippet: phofcode
i am using the api phofhyperlink and want to bundle directly a typescript file as an entry point instead of a html file.
unfortunately the generated bundle file does not include a hash.
though when i wrap my entry file in a html file and bundle that html the bundle name has hash included.
on windows, parcel serve apparently don't work.
strange random or unknown working.
steps: phofcode * npm dev task: `parcel serve src/index.pug --open`
experimenting with three.js within a react application, i 've prototyped an example that works locally; however, fails to load remotely from static hosts such as github or amazon s3.
if i run [my github project][1] locally, it works: $ parcel index.html --open however once i build a distributable and push to [my github pages][2], the script fails to execute - just a blank page.
all css and javascript are being loaded, but no errors are present in the console.
$ parcel build index.html --public-url '. '
strangely, i can use `serve` on the exact same build and it works locally.
my initial thought was just paths, to which i added `--public-url '.
'` my parcel build command.
all scripts seem correctly pathed, and loaded.
it seems like the issue may stem from importing all modules as: import * as three from 'three '; it may be coincidence, but have [another github project][3] that exhibits same problem on [github pages][4] when importing all modules.
to sanity check, do have react projects using parcel that deploy without issue.
[1]: phofurl [2]: phofurl [3]: phofurl [4]: phofurl
when editing a pug file, auto refresh of the browser html does not happen, though js hmr does seem to work.
auto-rebuild(hot reload) doesn 't work on the local development server opened by `parcel serve` command in some directory named like 'parksb.github.io '.
change a .pug file should trigger page reload.
when importing an image with `import img from "path/to/image"`, the returned url looks like this `image.<hash>.jpg/` in which the `/` at the end causes a lot of issues by making a server think the resource is a directory
hmr happens twice then stops for js updates.
houdini paint worklet causes cryptic `uncaught (in promise) domexception: the user aborted a request.` error
i 'm using parcel to package a web extension.
since i want to target both chrome and firefox, i need a polyfill phofhyperlink script.
this can be installed as a node package.
i have added it to the manifest.json.
but the path that is automatically produced in the `dist/` folder is` __/node_modules/...`.
this is incompatible with chrome.
web extensions must not have folders of name `__`.
tl;dr. if i try to use a class name of `columns` in one of the css files included in my project, the resulting css module exports the class name incorrectly with vendor prefixes.
the autoprefixer should only affect css * properties * , not *class name selectors*.
i would imagine that other auto-prefixed css properties would trigger this behavior as well, although i have not tried others.
parcel watch uses 100% when encountering a symlink posting to itself within the project directory (not an asset, but just lying around) on macos.
reproduced in new folder: phofcode
when updating to version 1.10.0 of parcel-bundler from 1.9.7, absolute paths in typescript are no longer working.
it 's take too many times when using parcel with yarn workspace.
> after upgrade to parcel-bundler 1.10.0 if there are something after a self-closing vue component like: phofcode you will see no `<span>` after `<slot>` content.
but if you change it to: phofcode the `<span>` will be seen.
i upgraded my project to parcel v1.10 and now `babel-plugin-emotion` phofhyperlink is failing to load.
it was working fine with previous version.
i have a `base.scss` on my project which contains same base styling and variables, such as colors etc.
this file is then imported to other stylesheets with `@import`.
now when i change something in `base.scss`, parcel seems to get stuck on the first file that is importing base styles.
parcel always transpiles to es5, which does not allow to use custom elements.
i want to define a custom element but i have the same error always: `index.js:5 uncaught typeerror: failed to construct 'htmlelement ': please use the 'new ' operator, this dom object constructor cannot be called as a function.` this problem seems be because of the fact that custom elements classes are needed be run with `new` instead of the function-like call.
after searching this issue, everybody recommended keep code at least es6 and not transpile es5, which could be possible with babel by setting up a node version bigger that 6. i tried set this from babel.config.js and with `browserlist`, but it still transpiles es5.
my problem is captured in a simple repo phofhyperlink where the readme describes what i 'm experiencing.
maybe (hopefully) i 'm reading the results wrong or overlooking something simple.
the repo contains a small rollup module and an example parcel app that imports functions from it.
i 'm using parcel-bundle-visualizer phofhyperlink to inspect my bundle.
if i import nothing from the rollup module, then the module is not included in bundle, as expected.
however, if i import at least one function, it seems to include whole module, as module size is same no matter how many functions i import.
accesses of static ts class properties are broken when building with enabled.
i am running parcel as dev server: `parcel server index.html` i am using .env.production and .env.development to set up env variables.
if i change the contents of these files, the server does not pick up those changes and does not cause a rebuild.
only recourse is to halt and restart the server.
using stylus and @import font via `url()` make the build fail.
parcel works fine but gives `lscpu: not found` warning on alpine linux.
in a pug template (sth to be extended by), relative paths work for other template (via `include`), but doesn 't work for style and script (via `link` and `script`).
i cannot deploy to app engine on google cloud platform because of the following error: phofcode
importing a raw asset as a url (in a js bundle) fails if the asset is referenced in another file.
creating the bundle succeeds, but the browser console throws the following error when opening page: phofcode
a simple d3 code is not working as expected when bundled using parcel.
`parcel build index.html` when using `parcel index.html`, the code will not work unless i resave the index.js.
please see the following repo for reproduction: phofurl
when parcel loads css bundle in dom, 3rd party css is overwriting my css.
since the position of my css is over the other 3rd part libs earlier phofimage solved phofimage see in earlier.png the position of the link tag is at top position and all other style are below that.
due to this it is my css gets over write.
if i just removed and re append that link tag to head my problem get solved.
but this not a best way to solve it.
` let head = 'head ' ), link = head[ 0 ].queryselector( "[rel=stylesheet]" ); head[0].removechild( link ); head[0].appendchild( ); ` in soved.png you can position at bottom of all styles so it working perfectly fine.
parcel uses the full path of the files to create the hash-key.
for projects that like to commit their generated files, this produces different outcomes depending on environment.
i 'm working with an almost fresh parcel setup.
i 've added a .babelrc because i need phofcode package.json phofcode
when using with `@material-ui/core`, the bundle builds with no errors.
however, when the app is served phofhyperlink from `index.html`, its fails with `referenceerror: react is not defined`.
tried both cjs and esm, same error.
when the flag is _not_ used, it builds and runs fine.
i also ran into a similar issue with `@material-ui/icons`; the error is `typeerror: (0 , oj.default) not a function`.
see code samples and metrics in gist phofhyperlink .
when loading components from a locally installed package postcss module hashes are reapplied causing style to fail to be applied to components.
i tried adding some reason files to an existing project built with parcel and followed the documentation as close as i could, but when running `parcel index.html` (which is the entrypoint), i get an error and the build fails.
i have a .php file which currently has nothing but html content (later i plan on adding some actual php code).
when i run `parcel watch index.php` (i 'm running apache server, so i use watch command) and then open the browser it throws a console error regarding `require` modules.
if i remove the `require` line then it works fine.
parcel crush when try build project with wildcard import on windows
i started my project with this example phofhyperlink .
and inserted several inline svgs in a vue component like so phofcode and when i run `parcel build index.html` such inline svgs inside vue component get minified into something like this phofcode which i am not sure if the minifier tries to give a more compressed interpolation of the original `d` attribute inside `path` tag, but the result that shows on the final html website seems indeed wrong.
and i tried to run `parcel build index.html` with flag `--no-minify`, which does work in an expected way.
i have a static file without an extension (it's a 3d scene blob file) that i want served in the parcel dev server.
unfortunately, the file is not served.
it seems to be due to this line of code here: phofurl
i have a project that dynamically imports two components, inside both of those components i import the same static file.
that static file doesn't get copied to the `dist`folder.
this also happens if you import multiple files using globs.
if i only import that file/s inside one dynamic component then it works fine.
when importing a `css` file that doesn 't exist, using the typescript import command`, the parcel build commands get stuck and hangs until you kill the console or the build server timeout
when i launch parcel it executes a very strange command "yarn add v1.9.4".
it also throws error on hawk plugin ... i do not know what it is.
parcel with `--no-hmr` doesn't reload the page after changes in code.
this is a weird one.
i have two identical directories, but parcel will only watch files in one of them.
my react project has a dependency on npm module websocket-driver and we recently switched to parcel from react.
when we are trying to run our project on windows, with `npx parcel index.html` we 're getting an error of **cannot read property 'map ' of null**.
digging in to websocket-driver, this is the line of code that 's causing the issue: { return parseint(n, 10) });` so it 's not getting a value for process.version.match, i 've tried multiple things but couldn 't find a solution.
i am trying to make server side rendering work for my earlier react app.
i am using phofurl phofhyperlink for this purpose.
demo repo to reproduce the issue that i am facing is phofurl phofhyperlink **the issue in brief is as follows:-** the development build with parcel is working as expected.
the command for this is phofcode and comes from line 8 of package.json ( phofcode ).
if you will visit phofcode after running the command above, you would see a proper webpage where the first section will have a functioning image carousel and second section would have a timeline.
but when i run phofcode which comes from line 9 of package.json ( ), then the command produces a folder with two sub-folders in it, and .
the folder contains all required files to run site and as expected.
but folder lacks css files.
**it not bundling css files from two external packages** namely .
these two packages have css file which import at line 3 of line 11 of .
previously i have used react with parcel without any problems.
but for some reason a new, small project isn 't working ("error: cannot find module \'react \'" appears in the browser console), and i found out that the problem disappears if i delete my tsconfig.json file.
i tried fiddling with the settings in tsconfig.json but so far didn 't find a solution other than deleting/renaming the file.
the issues occur when you run multiple builds concurrently or even sequentially in the same process.
for the first issue, it seems that module resolution is only run once for both builds, which creates a problem if for example you're building a browser and server bundle.
the second issue is that parcel keeps the process open even after completing its work when building w/ two bundlers.
i tried to reproduce the minimal example on the homepage, but the `console.log` to log the css from `main` class.
since 1.9.5 a simple page with no other modules can 't build at all.
when a vuejs component 's style tag has the attribute lang="postcss" the styles wont compile at all.
when importing any module/export from gl-matrix, using typescript, and the resulting bundle is devoid of all gl-matrix code.
the bundle for the gist linked below looks like this, for example: phofcode phofcode i 've tried as many variations of `import` and paths that i can think of, but still cannot get gl-matrix included in the final bundle.
perhaps i 'm doing something wrong!
running parcel on this javascript file causes it to run out of memory and crash.
i cannot import css from node_modules when the target of parcel bundler is electron.
usage of dynamic import `async () => await import( 'file ')` (in typescript) for code splitting doesn 't work when importing the same required file twice.
this project phofhyperlink which only includes react and react-intl phofhyperlink results in following builds: normal build (no phofcode build with phofcode with cra the file size after gzip is 47kb (157kb non-gzipped)
1. run `npx parcel watch index.html` 1. run `npx parcel build index.html` 1. then modified something to trigger hot reload in `watch` mode 1. the modification seems not work
as referenced in #541 and #1456, i believe background-image styles defined inline in html should be parsed and the images should be treated as assets by parcel (please correct me if i 've misunderstood).
in my test case, this isn 't working.
the image urls are left untouched and the images themselves never show up in the `dist` folder.
doesn 't matter if there are quotes around the urls or not.
i 'm trying to set up material ui with babel and parcel by following the same steps described in the sample parcel example given here: phofurl
as described in the title, rust files cannot be resolved from web worker script like this.
phofcode when i run `npm start` then open html, the bellow error message appears in the browser 's console.
phofcode the error was thrown in `newrequire` function in the genereted code (maybe this phofhyperlink ).
`lib.add()` does not seem to be called.
if i replace rust file with an equivalent javascript file, that works as expected; javascript file is resolved and `lib.add()` is called.
i am trying to set up parcel in my electron + react project.
i have parcel set up so that i get all the way to the render process loading, at which point i get `uncaught error: cannot find module 'react ' error for any `import` statement (ex: `import _ from 'lodash ';` in the render process `.js` file).
am running parcel using a script that uses the parcel api to target `electron` and run a development server.
if comment out render process `imports` and just put in some `console.log` statements, everything runs fine.
set up a toy project just to test setup and it works perfectly, so can 't figure out for life of my why this is happening.
i'm having issues with importing the same `.scss` file in multiple vue components.
this works in up to three components.
if a glob import/require is used hmr/watch does not redo the glob, causing it to not automatically add new files if you added a file that matches the same glob pattern.
for example: phofcode file structure phofcode if you add a file for example `anotherfile.js` to the files folder, it will not cause a reload or update and will not include the file.
unable to import 'vue ' when target is set as electron
lodash plugin for babel phofhyperlink does not seem to work with `parcel
when using css-modules on windows, there is problem using ** composes ** phrase.
its seems that path is resolved with system path separators instead of unified ones (unix).
please see style.css file for more informations.
if it is `css-modules` error, i will move this issue to theirs repo, and also sorry for wasting time!
when specifying a config for less compiler/renderer, the `paths` property in the config is not respected/resolved the way less does itself.
you can specify the property to lessc with or via config (.lessrc / .lessrc.js / package.json key "less"): `{ "paths": ["path1", "path2", "path3"] }`
although the stylus binary compiles just fine files containing glob imports, it breaks when using with parcel.
css url() assets from node_modules are not looked up in the correct directory.
when building this code using phofcode ...running the bundle results in an exception due to an undefined identifier.
removing the flag or uncommenting the workaround `require` makes the problem go away.
reasonml + parcel so in your standard example on your site, where the index.html references index.re it will recompile if you change index.re.
however, as in your standard example - with the feature of reason to include files by referencing module names - it doesn 't work when index.re reference greeting.re implicit by using the module, and then make a change in greeting.re.
it will however, notice that greeting.bs.js has changed and build again.
bundles built with parcel keep doing really weird stuff, until `rm -rf .cache` which fixes everything.
i 'm using scoped css with vue and the minification doesn 't work properly.
it does work fine without the scoped css.
parcel isn 't compiling a module in a `yarn link`ed package, as well as not respecting my content on `.babelrc`.
i am working with a default website export from a gis program, which is using just standard script tags.
the repo and example page are here: phofurl phofurl as you can see, the way the scripts are being imported (with script tags), everything works fine.
if i try to serve or build the project with parcel, i get : phofcode labelgun is one of the imported libraries, second is a script file with a single declared global "var".
when importing a .css file from within .scss file, an error with an unclear message is thrown: phofcode i'm on parcel `1.9.7`.
it didn't happen on `<=1.8.1`, so it looks like a regression
** repo ** 1. run `parcel index.html` 2. change apple.html (add some numbers)
when trying to use parcel middleware feature with the node --inspect flag on i get consecutive errors: phofcode
when using api, building for multiple targets (e.g.
`node` and `browser`) in one script with api results in second or later target not working.
some user agents require a `<link />` tag with some **actual json** (not json-compatible js module).
unfortunately there seems to be no way to prevent parcel from converting it into some js module nonsense.
when building a big collection of `.vue` files into separate `.js` files using globs, the folder structure stays intact.
however, files that are being asynchronously imported using `import()` _inside_ one of these `.vue` files are being put in the root output folder.
the actual bundle tries loading it from the nested path however, resulting in a: `get phofurl 404 (not found)` as you can see in the screenshot below, every file is correctly put in their nested folder, except for async `import()`ed one (`javascript.js`): image phofimage my folder structure looks like: phofcode
this issues occurs when wrongly using `~/`.
it leads to a stuck and unresponsive build process.
i don 't think that something needs to "fixed" here, just maybe an error thrown instead of getting stuck in an endless loop.
consider a directory structure like: phofcode with the following dependencies `app1.js -> ../app2/app2.js -> ~/app2/other.js`, the resolver gets stuck in an endless loop.
hello, i want to use the source map feature of parcel.
they are generated and linked in the bundled javascript file.
i am trying to import a pug file in js, as shown below.
this code works in webpack (with pug and pug-plain-loader installed), but fails with parcel.
phofcode if you remove the `console.log` then the error disappears and nothing happens.
it looks like the `bundler` overwrites the `require.resolve` object, such as that is no longer present for subsequent modules.
eg: i added this log statement to module 'a': phofcode and a similar one to module 'b': phofcode the output is: phofcode when i change the order of imports to: phofcode then output is:
when building a set of entry files that live at different levels in your directory structure, any files that are nested beyond the top level entry file fail to find dynamically generated bundles.
i'm working on prototyping our build in parcel to measure performance.
one of the things that i noticed different between webpack and parcel through my work is that webpack will wrap calls to `global` in a function that exposes the `global` variable as `window`.
parcel bundles just fail when run in the browser with `global is undefined`.
in source tree of parcel does not contain minified versions of builtins though the source expects it.
people should be working with release tags but in the off chance they want to work with a newly merged feature we need to fallback to the source version of the builtins.
when running parcel and then changing source files a few times, the page is reloaded after the first edit only and no more reloads happen.
parcel provides inline asset importing via statically analyzable `fs.readfilesync` statements.
they work as expected in javascript but not typescript.
when running `parcel watch` through the platformio-ide-terminal phofhyperlink plugin in atom, it builds the application and then logs 'done in __s' and stops.
i 'm getting the error `syntaxerror: expected expression, got keyword 'import '` in firefox 61.0.1 when using `import()` to import something.
we have test suite in parcel-plugin-htl phofhyperlink that uses the `bundler` via api to test the plugin.
the testrunner doesn 't complete if running more than 1 test.
i think this has something to do with the `workers` used in `bundler` not being shutdown correctly.
starting up a web worker in electron seems to yield phofcode i see another closed issue with this error but it seems to be related to electron and web workers in the browser half of the environment.
i 'm using a case-insensitive file system (apfs on macos) and i have imported a module using incorrect capitalisation in the file name (`app.js` when the actual file is `app.js`).
the initial build works but subsequent changes to the module (`app.js`) do not trigger a reload.
bug occurs for both script tags (shown below) and es module imports.
i 'm running debian on windows using windows subsystem for linux.
things work fine in 1.9.4. things do not work fine in 1.9.5. running parcel itself still behaves the same, and i see "server running at phofurl but when i try to access that url, i get a 404. there was a lot of stuff that just went into 1.9.5. imo that should have been a minor version bump, not patch.
after upgrading to the latest 1.9.5 version, the introduction of `ora` #1472 is producing the following error running on jenkins or ci: phofcode according to `ora` source phofhyperlink , when `enabled` is always set, it ignores the `process.env.ci` var, which can be used to disable spinner.
when the environment variable `parcel_workers` is `0` parcel hangs on the first bundle.
fresh project with blank html5 boilerplate index file will not build.
parcel builds fail when `.babelrc` files contain relative paths plugins.
when using parcel as a middleware, can 't find a way to minify the build.
i am trying out parcel bundler and with help from other people online have produced the following repository: phofurl it 's a working one page example app that builds successfully using react.
however when i do `parcel watch ./src/index.html` or `parcel ./src/index.html` and then change a file, it 's not actually rebuilding anything.
this was just one of a few other problems i 've been having.
in general parcel just seems very buggy and is throwing a lot of errors.
but i will submit that it could just be react specific stuff, or the fact i have never used parcel before.
have uploaded video of my experience to youtube.
video of my experience phofimage phofhyperlink
getting `failed to load resource: the server responded with a status of 404 (not found)` on javascript files in the dev server favicon.ico
when using the server (with or without hmr), it doesn 't recognize styles in `<style>` block within a vue template.
this problem is within hmr, but style changes are also not picked up when doing a manual refresh in the browser.
browser versions of common libraries (like `events` for example) are used, even when they are explicitly installed with npm.
when doing `import image from './my_image.png '` in combination with typescript, everything works fine in production mode (`parcel build`), but an error is thrown in the console when running in dev mode (`parcel serve`).
when building my app using `parcel build` the application simply doesn 't work due to error in console.
screen shot at 12 04 00 phofimage
currently, when you setup a project for absolute imports and use those imports somewhere in your code, parcel will identify that as a missing module and add that to your deps.
im trying to import many icons at once from a directory, but it doesn 't build after that.
the reason i want to do that because i get the name of the icon from the database, and i need to later 'dynamically '(not really lazy loading, but i don 't know in advance the name of file) load icon.
after bump from `1.8.1` to `1.9.3` i receive runtime errors in reason app in production build only.
when i start parcel, it does a "resolving packages" step, which changes my package.json dependencies.... and i need to manually change them back.
i 'm not happy with this behavior.
especially, because i want to stick with react 16...
hi there, i 'm trying to use parcel to build a simple website.
when i add the nanocomponent phofhyperlink package to my dependencies and try to require it, parcel hangs and uses 100% cpu instead of building.
when i remove this dependency, everything works fine.
please check out the repro here: phofurl
when attempting to use a function (in an `onclick` and `onload`, specifically) from an imported script in html (i.e `<script i get `referenceerror: x is not defined` for every function.
this has been tested only when running locally in the default parcel dev mode.
hey guys, thanks for all the great work with parcel!
i'm actually creating a ssr framework for react that uses parcel.
however, since parcel doesn't seem to have great support for external dependencies yet, i'm using rollup to bundle my package code, and parcel to bundle the application code.
the problem i'm running into is that parcel is unable to find the external depencies of linked modules - e.g.
i'm getting an `cannot find module react` error.
but i do not get this error if i download the actual package.
so guessing parcel is treating linked module differently.
this might be related #948 but i actually want parcel use compiled code, rather than source code.
when using `img` `srcset` attribute, parcel incorrectly does not add a space after the `,` if the image urls do not all have a size or resolution.
i am using parcel to bundle a react app written in typescript.
when using reactcontext, specifying `<mycontext.provider>` as a jsx tag causes a build error, assuming because the bundler does not know how to handle the `.provider` portion of the tag: phofcode there is a full app at phofurl which recreates the issue in simple way.
pulled 1.9.3 with the fixes to tree-shaking.
didn 't change any of our already working and building code from 1.9.2. ran build with the flag.
now, it builds without error.
however, going to the built package shows this js error: phofcode
upgrade to 1.9.3 because of need this patch phofurl but face new issue,it does exist before upgrade to 1.9.3,then i checked the source found it may cause this problem.
steps to reproduce: - install npm and add sources like in this article phofurl - add minimal index.html and index.js - run parcel - open url in browser
i 'm trying to build a cjs and es compatible package by having cjs point to `main` and es point to `module`.
i 'm going to point a specific version because i 'm currently active in this repository.
phofurl if you build without `--no-cache`, you will get the same output for both cjs and es.
tried to run it step by step using `npm` and get stuck on step 3: phofcode
when i use `parcel build` to generate a production bundle for my project that uses react-hot-loader, the bundle ends up containing however i don't want the actual hot reloading code in my production bundle, and react-hot-loader is supposed to omit this when built for production.
i followed the steps exactly here: phofurl making changes to either the js or html file does not cause any update to occur at localhost:1234 when `parcel index.html` is run.
i also followed the react recipe verbatim with the same issue: phofurl saving file doesn 't refresh dev server.
the relay babel plugin does not run on outputted javascript when using typescript.
it appears that something is happening, since parcel will complain about missing plugins; but the `graphql` template tags that relay strips are still present in the output.
unknown plugin "transform-runtime" specified in "base" at 0
i tried to use dynamic imports to extract common code in entries.
however the common part is not extracted in last entry
upgraded from 1.8.1 to 1.9.1 - development fails with minify: false
phofcode the error seems to be caused by the lack of package.json.
parcel will include polyfills/dependencies if classnames or keywords are mentioned in a comment or string.
i know the feature is experimental and there are quite a few possibly related bugs being filed atm, but i quickly managed to reduce this to the broken code so figured it was worth filing separately.
the feature is really cool and i can 't wait for it to be ready for general use!
unable to import a `.scss` file when using an absolute path i.e.
browser complains about the undefined variable `$<number>$exports` which looks like the bundled output here phofhyperlink .
parcel doesn't generate chunks for dynamic imports when using typescript.
here's an example: 1. a project in js that works: phofurl 2. same project in ts that ** doesn't ** work phofurl
we are using vuetify la carte phofhyperlink , upgraded to parcel 1.9.0 and the build fails with an enoent: no such file or directory error.
once the error appears, parcel hangs.
this means `parcel watch` does not update anymore.
this may be a bug related to #1397.
when starting a brand new vue project via parcel, hmr was not working out of the box.
rather i got the following warning: phofcode this is dicussed in this issue on vue loader: phofurl just to see if it would fix things i explicitly added vue loaded to my package via `yarn add vue-loader`, which resulted in `15.2.4`.
running parcel again hmr worked as expected.
1.8.1 was importing less without issue.
now i am getting: cannot find module 'uploader.less ' from phofcode
running will fail to bundle an app claiming that an library is not exporting a file.
i checked node modules to see if this was the case, but it 's not.
the function is being exported.
error when bucklescript outputs es modules: <img width="963" alt="screen shot at 2 15 29 pm" src=" phofurl error when bucklescript outputs commonjs: <img width="905" alt="screen shot at 2 27 29 pm" src=" phofurl code the error refers to phofcode
after i updated to parcel to verson 1.9.0, i get an error when trying to running `parcel index.html` i get the below error.
i tried to build my react project with the new experimental scope hoisting enabled and it crashed (works without the feature enabled).
i can't get absolute or tilde paths to resolve.
i am having issues with `viewbox` being removed from inline svg in my html file.
i have passed my own options via `.posthtmlrc` but i am still seeing the attribute removed on production build?
can 't find module if i require the same file on js and css
inline script tags are not processed and imported scripts are not bundled or copied to the `dist` directory
importing a vue component fails with this error message: `app.vue: cannot read property 'parsecomponent ' of undefined` the problem: expects a `compiler` object in the `options` passed to `parse`.
parcel loads the template compiler, but does not pass it, in `vueasset.js`: phofurl the fix is to add `compiler: to the options object in that call.
i am trying to use hyperapp phofhyperlink with jsx.
i followed this guide phofhyperlink for most of my set up.
i 'm not experienced with the js so i 'm sorry if i misdiagnosed this as a parcel issue if it 's actually a bug in a dependency or me misconfiguring something.
basically, hyperapp uses the `h` function for virtual-dom creation, and i have configured babel to use that when transforming jsx.
index.tsx: phofcode the problem is that when run this in my browser, will receive a `referenceerror: h is not defined` error and nothing will render.
however, the code will run properly if have explicitly used the `h` function anywhere in code.
this example will run fine: phofcode
in my index.html if i do phofcode it compiles fine but in the browser i get `mymodule is not defined`.
i noticed that a new javascript file was generated with the same name as the old one, even though its contents had changed.
parcel doesn 't rebuild bundle when i save file on version 1.8.1, but it works on version 1.6.2. i use vscode it doesn 't have "safe write" problem
chrome throw error when `import()` dynamic import more than one vue components, though vue components render successfully.
when i change the `--public-url` option, so that the `sourcemapurl` at the bottom of my js file changes, i should see the fingerprint of file change... when i use `--no-source-maps`, i should see fingerprint of file change... currently, neither change it.
my app, written using css modules, builds correctly with parcel-bundler v1.7.1 but usually (but not always!)
hangs with parcel-bundler 1.8.0 or 1.8.1 .
this problem happens when running either `parcel` or `parcel build`, with hmr or without.
if you try to import an image, in normal javascript, to get the url of the file it just works: phofcode but when i use typescript i get this error on the vscode console phofcode
at parcel is recognizing dotenv 's call to and is attempting to convert it to a node, causing the babel converter to throw an exception.
i try to build a poc with parcel, with simple proyects only javascript with console.log.
when build with parcel, the console throw me this error, but i remove and install node_modules, the error lib change.
i try to install `yarn` and `npm`, but throw the error.
i reply the same code parcel-bundle 1.7.x and works!!
when using parcel to build and/or serve a website made of static html files, linking to directories doesn 't work as expected.
file to import not found or unreadable:
when splitting concerns in `.vue` files by passing a `src` attribute to the `<script>` tag, the vueasset.js does not resolve the linked file
custom .uglifyrc config didn 't take affect the code as node_modules dependencies.
for example the parcel wrapper code.
editing and saving a scss partial does not properly trigger updates to the live build, requiring manual save of the root scss file.
using es module in main html cause "parcelrequire is not defined" error.
if we use ** type="module" ** , minimal code in getting started (parcel official) phofhyperlink make this error.
in a vuetify project we are trying to reduce the build size using la carte phofhyperlink , but when parcel builds/serves/watch the project, the message "error writing to cache" appears.
when i use multiple vue components in my vue template, only the first child component of a parent component appears to be displayed after minification.
this happens when building the code for production, and does not happen when building for development or when using the `--no-minify` parameter.
build cache is not updated when `.babelrc` file is created.
specifically for my use-case, setting is not respected.
when compiling vue single component file (`.vue` file), with minify enabled, parcel results in incorrect js file.
it 's quite complicated, and spend me all the afternoon to find the problem.
it 's a bit long issue, but i 'll try to describe the details in the below code, please see code with patient.
i 've marked code with `attention`.
the problem is mainly about module
he can sometimes work, sometimes he can 't work.
when i remove the `scss` file it may improve, but i 'm not sure if the problem is there.
perhaps it is related to the loading mechanism of the module?
faster processing when there are fewer modules, when number of modules is large, dependency is more complicated and relationship not handled properly, causes process to exit abnormally.
- when dynamically importing assets (aka code splitting) everything works fine during development.
- when building things work well.
the problem is that if the dynamically imported file is changed, and the main js is not, a new hash is not generated for the output and can be cached.
this error occurs when you haven 't installed `windows-build-tools`, but i actually checked and tried installing `buffer-util` and it worked just fine.
one of the submodules is specified in the error message: `deasync`.
when an exception is thrown in an async function, there is no meaningful stack trace.
this is the trace i get: phofcode i would expect that, upon exception, i 'd be able to find out where the exception came from.
as-is, the trace only points me to the reactdom.render method here: phofcode
when css-module is enabled with postcss, changing the css file doesn 't reflect on the browser.
it requires either to save the js file from where the css file is imported, or refreshing browser.
unable to call functions from inside a `<script>` tag due to > uncaught referenceerror: foobar is not defined
hi, i 'm creating a simple app using typescript + react + css modules.
and the stylename is not compiling in the right way.
please refer to the code sample below.
i use parcel and then change a file, parcel rebuilds and then my react reloads/rerenders (something like that) forever and my pc goes out of ram and dies for 5 min.
when i use console.log("s") it prints this infinitely, thats why i think it reloads.
maybe it is related to some redirect logic of the route.. (ubt the conditions are not given)
when bundling and serve multiple entry files, `/ index.html` can not be accessed with `localhost:1234/` however, you can access it with `localhost: 1234 / index.html`
i noticed that `parcel watch` was not updating the filename of some assets even though their content had changed.
if you look at this shell transcript you can see all the files and steps required to reproduce the issue: phofcode basically i can see that it updates the content of file but does not update its hash.
note that if i do same thing but use `parcel build` between changes instead of `parcel watch`, file hash * does * update according to file contents: phofcode i tried `parcel watch` with `--no-cache` but that didn 't fix it.
some tickets reported similar issues but i have isolated the cause and effect which you can see in my repo phofurl
im noticing that `parcel src/index.html` is not seeing any changes in my file when it is in a directory underneath a dropbox directory on my computer.
get the builds to honor new configuration files without needing to either (1) use `--no-cache` or (2) make a change in one of the source files.
it appears that configuration changes are picked up (see this commit phofhyperlink ), but adding a completely new file when one has not existed before does not invalidate the cache.
i started this issue as a feature request, but given that configuration changes are partially supported in 1.5.1, it feels like a bug.
if you set a `maxwidth` value on a bitmaptext object (let's call it `mybitmaptext`), it will fail to recalculate its bounds when you update the value of `mybitmaptext.text` value more than once.
as a result, once you have assigned a value to `mybitmaptext.text` once, that string will be displayed forever; no further re-assignments of `mybitmaptext.text` will have any visual effect.
basic wordwrap adds a space to the end of the last line if the last line is only one word long.
expected behavior: no space is added.
gameobjects stop responding to input events after game recreated with scale.mode
when a `gameobject` is using a `bitmapmask` and then receives a `blendmode`, it is not rendered anymore.
on ios devices, as you could see from the code below, i have added using js a html video element as a tutorial video before the game and then after the video ends, it should automatically switch to another scene for the game.
however after user hits play on video, game seems to freeze.
no touch events or other interactions work.
however this works perfectly on desktop devices.
when setting zoom or using `zoomto`, the camera view port does not center on the object it is following with `startfollow` and using default values.
after i set a new animation to a sprite, the pause() stop working.
i am creating a rendertexture on a game scene using 0, width, height)`, but when the `height` of rendertexture gets bigger, webgl reports an error in console.
image phofimage this height value seems related to n*1024, that means when height=8192 is fine, but 8193 it crashs.
sometimes setting to 4097 it also crashs.
i have set some breakpoints and figured out that the crash was happened here: phofhyperlink , but i don't know why.
**is there a way to fix this?
or i just can't use a texture this big?
the worldview of the main camera is not properly updated if you go back and forth between scenes.
will on first load have a proper width value, but if you leave scene and come back to scene, the value will be 0 at creation, but updated to the correct value after one update.
if you use a timeline callback with extra parameters (e.g.
`onstart` and `onstartparams`) the first extra parameter is missing when the callback is called.
i resized a phaser container to fit the assets on the mobile screen.
it is scaled down with inside that container is another container which has added to it an arcade physics body.
the body has its width and height set larger than the default.when i scale it down for mobile, the width and height do not change, they remain at default size.
i originally built this game for desktop.
the desktop game works perfectly fine without container scaled.
in webgl, setting the mask of a container has no effect.
this is not the case in versions earlier than 3.20.0 (like 3.19.0).
when i 'm trying to load a multiatlas generated by texturepacker i get "unexpected token < in json at position 0 when"
steps: 1. on the iphone, inside of safari, go to phofurl (also, bare-bones reproduction is available at phofurl 2. tap once to begin the background audio loop.
3. tap one of the logos to open a link in a new tab.
4. close the new tab and return to game.
expected behavior: the audio should resume playing.
current behavior: returning app tab does not resume audio ... sometimes.
it doesn't seem consistent for some reason.
sometimes minimizing game using home button, and then returning it has same behavior.
i can't seem get this reproduce, or not reproduce 100% of time on any of iphones.
here's a video it reproducing on iphone x: phofurl
i am having a problem while trying to load tiled map where tiles are not based on tileset image but are represented by **collection of images** (read here in tiled docs phofhyperlink ) here is the difference: tiled json map based on tileset image: 111 phofimage tiled json map represented by collection of images: 112 phofimage here is my code phofurl you can reproduce the issue by cloning it, running npm install and npm start.
i have an error 113 phofimage as i can see in source code phaser3 parser knows of such scenario and even creates an imagecollection parsetilesets.js#l136 phofhyperlink but then the parser falls to getting data from empty (in that case) mapdata.tiles array: phofhyperlink **am i doing something wrong, is that a bug or such tilemaps are not supported?
** for me uniting all my images into a single file (for example with texturepacker) is not an option because tons of maps and tilesets are made by the moment and changing them all will be a total pain.
will try to dig into phaser3 sources deeper tomorrow to understand why parser behaves like that what it tries do in phofhyperlink
the collision categories returned from do not get reset after the scene is restarted and continue to increment.
check the console log of the code below for an example, the player's collision category starts at 2 and keeps growing every time scene is restarted, eventually player stops colliding with platform as game exceeds maximum number of collision categories.
in the definition of phaser.d.ts, returns however, only defines the spritemap property.
isn't the correct return value phaser.sound.basesound?
the above is google translate of the following sentence.
expected behavior: spine game objects will appear in the scene when added to the display list.
it looks like there is some issue with the arcade physics in phaser 3.17.0 and above.
i 'm adding three sprites with collisions, two dynamic (red icon and blue icon) and one static (square icon).
the red one can be moved with wsad keys.
when red is colliding with the blue one from the left side, then red is pushing blue one without any problems.
but when you try to push the blue ball from bottom, top or right collision physics are not working correctly.
red ball is "jumping" trough when pushing from right.
also when trying to push square sprite from right side you can sometimes go trough collision box.
good behavior: 3.16.2 gif phofimage bad behavior: 3.17.0 (and above) gif phofimage
if i create a shader using `this.add.shader()`, i get the expected result (a blurred image rendered in my camera view), but if i create that same shader using `new i get a black screen.
drag problem when game object transformed.
scaling or rotating a container, zooming or rotating a camera will cause this bug.
01 phofimage additionally, when camera scrolled during dragging, the game object won't be transformed.
input/dragging/camera move and rotate.js phofhyperlink 02 phofimage
if you set timeline.loop = -1, it will not work.
you can check it here: phofurl and set loop: -1.
behaviors of are not consistent in webgl mode and canvas mode.
** tldr: ** when using arcade physics and colliding with platforms created from tilemap, there is sometimes random y velocity applied on the sprite 's body, causing weird behavior.
hi, i am working on platformer game and i am using components and tilemaps created in tiled map editor.
i experience strange behavior - there is **_sometimes y velocity_** applied on sprites`s body, even when the body stands still on the ground and no input is provided.
i created my sprite, put it to the world platforms created in tiled put debug line start of update() method.
**_the unwanted velocity seems to be higher when fps values are lower_**.
for example, in chrome testing environment running 10fps, this bug causing various problems, ranging from falling from platform edge to falling through colliders.
believe this similar or same problem described here: phofurl
rendering and switching scenes worked fine in the spine plug-in prior to 3.19. since 3.19 the plugin seems to corrupt when switching scenes.
the error i see is: phofcode
setting the alpha topleft, topright, botleft, botright alpha values on a sprite inside a container will cause the command being ignored, so, calling setalpha(1, 1, 0, 0) on these sprites will do nothing
adding a spine to a container works fine, but if you create another container the webgl crash with error: webgl: invalid_operation: buffersubdata: no buffer
same as previous issue 3915, i get hundreds of the following error in the console.
`[intervention] ignored attempt to cancel a touchstart event with cancelable=false, for example because scrolling is in progress and cannot be interrupted.`
image phofimage antialiasing is not disabled when the render is set to canvas.
the canvas does not look crisp when anti-aliasing is disabled.
in chrome, disabling anti-alias is functional, but in safari everything is still blurry.
add shader method can only pass a img which width and heigth is power-of-2
can't use key, frame phofhyperlink when creating render texture game object.
when a particle emitter manager has a rotation set, and the camera has been moved, the particle emitter will orbit the origin (i think it's the origin anyway), as opposed to rotating in place.
hi, i 'm experiencing an issue where a function)` handler does not fire on safari on ios (until after the browser is rotated).
the handler works without issue on chrome for mac and android.
- update arcade physics fps to 120.
- create two game objects with physics enabled, in the style of "character on moving platform".
- object a has gravity downward (the "player").
- object b is immovable, and moves side to side (the "platform").
expected behavior: object a is carried along by object b at exactly the same speed.
actual behavior: object a moves 50% faster than object b, and slides to the leading edge of b.
(a doesn 't ever fall, because once it moves off b, it is no longer being moved, and b moves back under it.)
when trying to debug tiles collisi;on with renderdebug() throw the error: t.translate is not a function.
since version 3.18.0 there appears to be a change to scalemode.none mode, and expected behavior of related functions.
using a "safezone" method i calculate scale and max height/width from config values, and run setzoom() + resize().
3.17.0 and below this works fine, but there appears to be some internal refactoring that has affected my identical examples, the canvas is stretched wrongly when the window is resized.
not sure if there 's something that can be done my end to fix this, but happy share scale mode example if i can rectify.
i 'm having an issue related to #4420, but with createcallback on physics group.
createcallback is _never_ called within a physics group config.
if you manually assign the createcallback property after the group has been created, then the physics body becomes invalidated and collision does not work.
you have to manually enablebody on the created child to get it to work again.
the cursors.right.timeup is returning 0, but it 's not been pressed.
in my game i create a function to check double tap for a arrow: `function doubletap(cursor) { console.log(cursor+" timedown: " + cursor.timedown + ",timeup: "+cursor.timeup); return cursor.timedown - cursor.timeup < 100; }` where cursor is cursors.right, in this case.
i tested for all the directions and is working fine, but for the right cursor it is not.
to discard something else in my code was the problem, i try this phaser lab example, adding my function doubletap, and i get the same result: cursors example phofhyperlink for right cursor: timedown: 0 for left cursor: timedown:
when adding an object to a container, its dimensions grow to fit the object.
setting the position of the container moves it around.
this is as i'd expect.
however, if the container contains a _child_ container, it seems that instead of _moving_, parent container _grows_ to incorporate new position.
if you create a container at 0,0 and add a sprite (say, 50 x 50px) to it, its bounds change incorporate sprite.
then if you move (with `setx(100)` for instance) then bounds change show new position.
( `x:100, y:0, width:50, height:50` ) if you do this with nested container, (add sprite child container, add parent then call `setx(100)` on parent) instead of position changing it simply adds dimensions of - so you end up with `x:0, y:0, width:150, height:50` .
multiple instances of the same shader using uniforms doesn 't work and gives this error: "webgl: invalid_operation: uniform1f: location not for current program"
phofimage just a frozen full screen logo on top of background.
when using a multifile loader (in this case, phofhyperlink ), if a scene is restarted, the `update` method gets called before `create` runs the second time.
if you check `this.sys.isactive` during these calls, it returns false, and yet the update is being run anyway.
i've been testin with pixi blendmodes and phaser blendmodes, and what i've seen is that they make different result, i'd like to have the same result as pixi's blendmodes has
when i try to remove a frame from the animation by using either it 's "removeframe(frame)" or "removeframeat(index)" method, it all works fine except in the case when the animation has 2 frames in total.
if i try to play that animation afterwards, in some sprite object for example, an error appears.
there are 7200 tiles object, tile size are 352x64 (separate with 4 sprite) to cover the game map.
if i switch scenes or start another scenes, its take about 7 seconds until its moved to target scene.
but starting game scene are quite fast, look like there are no delay to process.
when trying to alter the settings of `this.body` in a physics sprite, only options for normal sprites show up.
setting gravity is not allowed by the typescript definition file.
when manually asserting the body to be a physics body, the code works.
when adding a to a group that you then set up a collider with group);`, the collision does not happen correctly.
instead if you turn on arcade physics debug, you see the line bounding box is in a weird place.
since the line object is the correct type to add to group, i would expect collisions to work correctly.
as demonstrated in code, workaround is use rectangle, which works correctly, so it seems like an api inconsistency.
tween.restart() doesn't work correctly if the tween is running.
it stops the running tween and resets targets values, but the tween is not running anymore.
events.off does not deregister a user created event.
events are still received after component is destroyed.
not all mouse clicks are caught
when using a bitmapmask and graphics with a higher depth it causes an error: `uncaught typeerror: cannot set property 'tl' of undefined`
* expected * : getbounds() returns a correct data for parent and children.
*what actually happens*: when container has child containers, getbounds() for children and for parent becomes incorrect.
there is two containers for see differences between behavior of getbounds().
first container (var parentcontainer, left side on screen): * circle (lightgreen) * child container ** line second container (var anouthercontainer, right side on screen): circle (darkgreen) line second container has correct result getbounds().
but first container shows incorrect result.
and not only parent - child has incorrect result too.
i am loading a tilemap exported from tiled.
it 's pretty simple and i followed the recommended export to json.
unfortunately i am getting some warnings and the screen appears blank.
here are the warnings i get in the console: phofcode
if using input.setpollalways() or changing the pollrate, the "pointerdown" event will be called twice.
expected behavior: run the new game instance without errors what happens: code throws the following error: phofcode
tween timelines not working properly, some which should be looped behaves weird
after an html5 video begins playing on ios, pointer events are not emitted
the "pointerdown" and "gameobjectdown" events do not trigger when the cursor has just enteret the object (about less than a quarter of a second) moving the cursor fast inside the object and clicking does also not trigger events
changing the radius of an arc game object is broken in webgl context, it looks like the origin is not honored by the render.
in canvas context it works as expected.
i want to make a game that fills 100% of the screen space (ignoring aspect ratio).
i want the game to have a render width of 256. i think i have this working, however the tilemaps do not scale properly when the browser is resized/ mobile device is rotated.
when you change the camera zoom to any other value than 1 the particle emitter position starts to go out of place and moves faster than the camera.
probably related to the scroll factor.
the following commit phofurl contains es6 arrow functions that make their way into the final dist files.
the es6 syntax breaks older browsers (in my case ie11) where phaser 3.16.2 was working.
i 'm having a set of different issues with arcade physics when upgrading from 3.16 to 3.17. i discussed some of these with @antriel on discord and we agreed i should submit a github issue with a minimal repro.
i 'm not sure the repro covers all the issues i 'm having, but it certainly demonstrates that there 's some issues.
1) setting worldfps either via setworldfps or providing an fps value in the physics config affects game logic.
this didn 't happen in 3.16. in 3.17, setting the world fps lower makes everything happen faster.
this is demonstrated in minimal repro.
2) physics "happen faster" when i 'm running my game in chrome on a screen with higher refresh rate.
i 've tested my game on my stationary computer 144hz refresh rate and laptop "regular" 60hz refresh rate.
i 've also confirmed these framerates by checking `game.loop.actualfps` value.
this is super problematic since you can 't cap web browser framerates.
this can be tested any phaser game on 144hz monitor by switching between chrome and edge, since edge 's framerate seems to be capped at around 70 fps.
3) setting arcade physics world fps to high value (120+ my case) makes physics buggy.
at stand still, object gravity applied standing firm colission-enabled tilemap layer sends multiple different tiles to colliders process callback, when at default worldfps (or even at high worldfps 3.16) process callback only receives one and same tile over over.
it seems that high worldfps completely breaks "consistent" frame frame gameobject/tilemap-layer colission.
4) setting physics timescale doesn 't seem have any effect anymore all of these things worked fine 3.16. if needed i will provide more code examples, but generally most existing examples can be "broken" by setting fps value config.
using arcade physics, circular body does not work when it is repeatedly collided.
`(but working in version 3.16.2)` rect body can work.
the default camera of a scene (not the main camera, keep in mind) is created once, in the `boot` method of the camera manager, but it's destroyed when the scene shuts down.
because of this, restarting a scene (or stopping it, then starting it again later) will cause problems with anything which uses default camera.
passing frame as a textures.frame object to bob.reset() doesn't work.
passing the same fame as a frame name works.
when adding an array of items to a physics group, it does not add the body object etc... but it works when only adding a single config object.
the gameobject created with scene.add.spine will cause the position of this gameobject to become nan after being added to physics.
found performance issues with drag, and traced it back to commit 31c0b4f2f.
when i create a tilesprite and set scale to 2 for example and try to get the body height, it returns me the value in original scale, tested with staticgroup and using refreshbody works like a charm, but doesn 't fit my need.
the method has the following documentation (and therefore typescript datatypes) for tileset: * @param tileset - the tileset, or an array of tilesets, used to render this layer.
can be a string or a tileset object.
but if a string identifing a tileset is passed, it does not work, only if the tileset object is passed.
containers do not seem to work correctly with pixel perfect input.
i would expect them to iterate their children and perform a hit test on all of them recursively or something like that, but i don 't think that 's happening.
in the console, i see a stream of errors like this: <img width="465" alt="image" src=" phofurl
`key.duration` isn't updated when the key is being held down.
as a consequence, `keyboard.downduration` and `keyboard.upduration` don't work as intended either.
looking at the source, it seems `duration` is only updated for resetting it to zero when the key has just been pressed down ( phofurl but not when we keep holding it, and later on when the key is up.
i'm not sure if this is intended behavior for `key.duration`, but `downduration` and `upduration` should work regardless.
this is my use case.
i have two scenes that are of different dimensions.
i am starting on scene 1 and set the size and use scale manager with width_controls_height.
when screen size changes e.g.
goes below 700px, then i switch to scene 2. now i need to adjust the game size so that it uses the new game size but still uses scale manager to scale.
expect this to do the job: 1869); however this does not work fully -- canvas is not set and aspect ratio is wrong.
in order fix it had "hack" it with following code: let canvas = canvas.width = "375"; canvas.height = "1869"; 1869); expect this should be done (correctly of course handle all cases) by set game size.
i am trying to use dom elements using master code.
i'm using scale manager with width_controls_height.
the scaling of the dom elements works fine.
however the initial position of the dom elements is not correct.
it is only correct if the initial width of window matches passed game width.if initial width is different then elements are to left or right depending on initial window width.
once positioned scaling works correctly with resize.
there are multiple scenes, two a loading scene that doesn't show outside the dimensions of the canvas.
the other is a map scene that is larger than the canvas.
if your mouse is over the canvas during loading scene worldx and worldy get set based on that scene.
but when other scene loads and changes world size it doesn't reset worldx and worldy so they are incorrect.
it causes shooting and looking to go wrong direction.
if you keep mouse off of canvas until loading is gone there not issue.
* create a container with scrollfactor(0) * add an element inside with setinteractive() * scroll camera -> element stays in place, but interactive hitarea has scrolled with camera movement
when two tilemap layers use the same tileset image, and they placed under each other, there appear gaps on the above layer when the camera moves.
i want to measure for how long the left mouse button is pressed - the command returns 0 until there is some other event on the input (like move) - then it indeed returns the time since left mouse button was pressed.
combination of - this.time.now works fine.
as far as i understand from code in /src/input/pointer.js getduration: function () { if (this.isdown) { return (this.time - this.downtime); } else { return (this.uptime this.downtime); } }, problem is that this.time returns time when this pointer was most recently updated by game step.
so if i press left button and not move mouse that time will be exactly same as this.downtime hence duration reported will be 0.
(obviously on my laptop pointer is not considered updated by game step if it at least does not move so measuring duration of button press in this way does not work properly)
parameters `fixedwidth` and `fixedheight` will change the size of text object only in method height)` ( set width phofhyperlink , set height phofhyperlink ).
it won't change the size of text if `fixedwidth` and `fixedheight` are passed in the configuration of creating this text object, like phofcode (btw, the width and height of this text object will be `1` in this case.)
trying to debug tilemap collisions, it seems that if you call renderdebug() on the map, only colliding tiles from one layer is drawn.
if renderdebug() instead is called on each map layer, all colliding tiles are shown correctly.
two immovable objects with collidation set between them, do not collide at all.
if collidation is set only to one of them, it move the other object.
in my case, i have a player character, and enemies which move towards the player.
the two should collide with each other, but not be able to move the other.
since version 3.16.1 the gamepad is not updated correctly.
it only updates, if the mouse is moved.
all phaser examples for the gamepad do no longer work correctly, if a version above 3.15.1 is selected.
a sprite is not well animated if it is created with this data: * create an animation with frames from a multi-atlas with trimmed frames (removed extra whitespaces).
* set the sprite `flipx=true`.
when attempting to set the class type of a group through the config, it doesn't change anything.
camera.getworldpoint() ignores current camera's zoom.
keyboard input does not behave as expected on ios.
this was tested using a plugged in keyboard tested on an ipad and iphone.
this can be demonstrated using the phaser keyboard example on phaser labs.
it appears that the keydown event is continuously fired, and keyup does not occur.
i tested the keyboard input on another website: phofurl to ensure that safari is sending the correct events and everything seems fine.
when filling a `rendertexture` (with `fill()`), the fill doesn't appear at the right coordinates.
when i create a new sprite from a sprite sheet with specified coordinates, the sprite is off in position.
it displays by an inconsistent offset every time.
trying to use phaser random with sprite config generator by following phaser example it gives this error in chrome phaser.min.js:1 uncaught typeerror: cannot read property 'integerinrange' of null in firefox: typeerror: n.rnd is null
if i use `viewport-fit=cover` for ios pwa app, the scale manager `fit` method will not accurately calculate the biggest height of canvas ' parent.
there is small space left at the bottom of the device because game move up to fill notch area.
(battery percentage area on older i-phones) this is not just centering issue.
because of `fit` nature, i also get smaller game width.
since html background color is now taking whole screen on pwa mode, canvas should be able to use all area of device on pwa mode with `viewport-fit-cover` as well.
when tile that have custom collision shape (applied by tiled collision editor), rotated or flipped (with tiled map editing or maybe even in code), it is not affected on matter body shape.
when exiting fullscreen mode using 'esc', i expect that the phaser game window will be restored to its previous size.
instead, it appears to be keeping its fullscreen size but in windowed mode.
i am working on a game that supports 2 touch pointers.
when the game is created a second pointer is added via this.input.addpointer().
this object exists when i console.log this.input.pointer2.
in an update method i am logging the following output for pointer1 and pointer2.
this.input.pointer1.x + ", " + this.input.pointer1.y + ", " + this.input.pointer2x ", " this.input.pointer2.y ", " when i press 2 fingers down on the device screen get true for pointer1.isdown and the positions update as move my finger.
pointer2.isdown evaluates to false and positions stay at 0, 0. the object exists, but isdown remains false and am unable to get touch position.
is something else required to enable mult-touch or is this a bug?
adding a quad to a container throws an error: "uncaught typeerror: child.setalpha is not a function" seems to be caused by parent setting child object alpha during render update using setalpha() (deprecated for this version).
uncommenting final line should demonstrate error.
when using a draggable zone with one finger and clicking a button that destroys it with another finger, the library crashes with an error about `cannot read property 'dragstate' of undefined`
matterjs nextcategory variable should be reset on game destroy.
if it is not, the next game created will continue from the last number until it reaches the maximum.
when it reaches maximum, it ignores the categories.
when launching a scene in parallel `this.scene.launch(' * * * ')` above the current scene, like a modal, the input events on the newest scene doesn't fire.
using settext after scene restart trigger the following error phofcode
issue was found in the readme.md on github page, the section for first example, linked here: phofurl the code all looks fine, but the source for the engine seems to be dead, when i tried to run code i got failed to load resource: server responded with a status of 404 (not found) code looked correct to i took a look at <script src=" phofurl browsing labs.phaser.io i noticed that is not in build folder.
nor in fact is any of assets for this source (that i could see)
sound.add() allows to add configuration like 'volume'.
the option 'delay' has no effect.
from my understanding delay: 0.5 should make the sound play 0.5 seconds after play() was called.
the sound is played immediately no matter which value delay has (0.1, 1, 5000).
when using the syntax for tweening multiple properties the `easeparams` option does not work.
in the texture manager, when you look up a spritesheet (e.g.
its frametotal property shows 1 too many frames.
the count and offset parameters of the getscores method of the leaderboard class are fixed to their default value.
inspecting the code shows that they are not passed as parameters to the facebook api.
i tried to show first place of my leaderboard but next results showed up.
phaser.display.color 's darken and lighten methods changes `this.v` property which is declared as `this._v` in the constructor.
this concerns the ** arcade ** physics engine.
if you have two circles colliding "sideways" while both having a velocity, the bounce will be extremely weird, like if they are "bouncing back".
creating a custom class that extends does not render texture.
the debug boundaries still show, which also react to key inputs (move left, right.. etc)
when an image stack is chained, the bounding boxes of the chained images start floating upwards for no apparent reason.
project.bundle.js:64510 uncaught error: failed to compile vertex shader:
when a tween's duration is 0, the object being animated disappears.
should center the body on the texture when the `center` argument is true or omitted, but for static bodies this doesn't happen.
changing to a previously visited scene or restarting it creates warnings about duplicate animations.
i suppose they just don't get cleaned up like images and sounds do.
i am working on a shooter game and collision between the ground and bullets doesn 't always work right, as seen on the gif phofhyperlink .
my game have plugin rexui from rexui phofhyperlink to create a simple scroll view (use gridtable) in a scene called menu.
everything works fine, until i click an item view, this call a callback to start a scene (called game).
in console, it showed error and the game got frozen.
actually, the game got frozen in version 3.14. when i update to version (just downloaded in webs) 3.15.1, it no longer frozen, the game scene is loaded but the error still thrown.
using html5 audio, it 's not possible to play two sounds of the same name concurrently.
**graphics setinteractive** not work correctly.
suppose: console outputs: 'btn pointerup' result: nothing happened
when `tween.play()` is called a second time, the expected behavior is for the tween's state to reset so the tween can play again, ** or ** `tween.state === phaser.tweens.complete`.
what actually happens is two semantic inconsistencies: 1. after one call of tween.play(), `tween.state === phaser.tweens.removed` instead of `phaser.tweens.complete` 2. then jumps to `phaser.tweens.active` and `tween.isplaying()` returns true indefinitely, **while the tween does not actually ever update**.
when i was working on my mobile game, my testers found out that its touch control didn't work.
after my investigation, i discovered that the pointer/touch input just dosen't work on the first scene using mobile devices.
all of the scenes after work perfectly fine.
also, if i load some web fonts inside the `create()` function of scene, there will be a short period of time that touch input will work.
calling `.get()` on an arcadephysicsgroup will create the gameobject if none are available but will not apply any physics-related calls made in the class constructor.
calling them after the get will work however.
i have identified two problems: 1. a staticbody whose body has been set to a circle with `setcircle` does not render as a circle in debug.
however the collision body is in fact a circle.
2. the offset parameters appear not to actually offset the body.
in this case i observe that the render and collision body are both not offsetting.
when using a normal map with a tileset image, and create a `dynamictilemaplayer` with that tileset, i should be able to set the layers pipeline as `light2d`.
what occurs is that the console logs the error: > uncaught typeerror: cannot read property 'datasource' of undefined at (vm75183 at [as renderwebgl] (vm75270 at webglrenderer.render (vm75179 webglrenderer.js:1752) at cameramanager.render (vm74411 cameramanager.js:612) systems.render (vm74510 systems.js:375) scenemanager.render (vm74507 scenemanager.js:600) game.step (vm74482 game.js:554) timestep.step (vm74542 timestep.js:560) step (vm74479 this prevents the scene from loading and rendering anything.
i 'm working on a project involving some lights and i noticed that on desktop browsers it works awesome, while on android mobile devices (i did not try on the apple 's ones) the browser/webview only show ** one ** light, the others are not displayed, moreover it seems to me that they 're not affecting the pipeline 'light2d ', since they 're not graphically displayed.
i also tried mobile browser called puffin, which renders web page its servers and then sends back "finalized" data: there lights were all working, but probably because it 's all rendered by a desktop server.
when using `setpipeline` on an image while also using `setrendertotexture` on the camera, the sprite is flipped across the canvas (note that it's not just the image flipped; y-coordinate is also flipped)
when a body collides with several bodies during a single step, it has correct `deltax()` and `deltay()` values only during the first collision.
on any subsequent collisions during the step, `deltax()` and `deltay()` are 0. in the example, this makes friction work correctly only for the first colliding body.
when i am tracking the mouse position, there is some unexpected behavior with the wolrdx and world y values when the browser is exactly sized things behave correctly: expected phofimage when the browser is enlarged one way or other, there's an unexpected offset: unexpected phofimage
getting the width/height of an image doesn 't seem to take the scale into account.
while trying to work through the official plugin examples phofhyperlink with typescript i 'm running into what appears to be missing properties.
specifically, it appears that `phaser.scene` has a `plugins`, and `pluginobject` and `pluginobjectitem` should perhaps have a `mapping`.
i create a rendertexture which is bigger than the initial game size and set a fill background to it.
but only within the game size the background color was rendered.
is it a bug that rendertexture can not bigger than the game size?
phaser.canvas mode - when we setmask for any shape, **all objects on scene get same mask** (in phaser.webgl mode mask works correct)
when calling `matterobject.setsize(w, h)` or h)` i would expect the body size or rendered size to change respectively.
calling `setsize` seemingly does nothing whereas calling `setdisplaysize` does change the render size but also applies some odd scaling to the body.
i've modified one of the phaser labs demo's below to show how a dynamicbitmaptext instance is being positioned incorrectly when using the canvas renderer and applying a scroll to a scene.
toggling to webgl renderer type will show the different results.
i've modified one of the phaser labs demo's below to show how an origin applied to a dynamicbitmaptext instance has no effect when using renderer type canvas.
if you change this to webgl, then their origins change as expected.
sprite origins are behaving differently when using flipx depending on the renderer type.
for certain devices / browsers i need to use the canvas rather than webgl renderer.
i'm finding that bitmap masks aren't being applied when falling back to canvas.
arcade physics bodies stop overlapping with overlap zones, when you set their velocity to zero.
as long as they are moving they still overlap, but as soon as they stop moving the is set to `true`.
the expected behavior is that they still overlap even when the other body is not in motion.
in spritesheets created from a (trimmed) texture atlas frame with if the resulting spritesheet is single-row or single-column then the spritesheet frame sizes will be calculated improperly and show parts of the surrounding textures in the texture atlas when used.
when the camera is zoomed in, objects returned by the `camera.cull()` method are incorrect.
objects appear to be culled prematurely.
please observe this behavior in the following gifs - for visualization purposes, objects are turned invisible when the camera culls them.
default zoom phofhyperlink -> behavior is as expected, zoomed in phofhyperlink -> notice that rectangles are removed from view early.
as we get closer to edge, background image is also culled prematurely when it should clearly still be visible in camera's viewport.
when camera's x or y position is not 0, another problem occurs altogether.
it appears that `camera.cull()` does not take camera's viewport positioning into account.
please observe behavior in following gifs - for visualization purposes, culling camera's viewport has a pink border and objects are turned invisible when camera culls them.
the main camera also at 50% alpha this example.
centered camera phofhyperlink -> as you can see, despite viewport being positioned at x300 y200, culling being performed as if it was positioned at x0 y0.
the game opens, appearing to have been stuck unwavering at 60 fps, but then after a few seconds suddenly drops to under 20fps even with no interaction from the user.
`uncaught typeerror: child.setblendmode is not a function` error is thrown when adding particles to a container while the game is in canvas mode.
expected behavior: no errors should appear by adding particles to a container in canvas mode.
phaser fails to load when trying to use the light2d pipeline with dynamic tilemaps with the following error: phofcode
when adding a matter body to a polygon shape, it appears to break the origin (resetting it to 0,0).
manually using `setorigin` or `setdisplayorigin` doesn't seem to fix it.
it's possible that i'm missing something in the setup, but i believe i'm doing this correctly and that it's a bug.
when you have a game config set to autoresize, the rendering context doesn't seem to resize well.
when you load the following example in a browser window that is half the size of the screen and then make it larger, a black area will appear.
if `game.destroy()` is called while a scene is preloading assets, some unhandled exceptions pop up.
is phaser supposed to handle this edge case?
exceptions that pop up (they are not consistent): screen shot at 12 03 09 phofimage screen shot at 12 03 23 phofimage screen shot at 12 03 59 phofimage
when initializing a game like this: phofcode i expect the game to be zoomed by a factor of 3x, when in reality it doesn't get zoomed at all.
the examples below use tilesets.
i create a card game and i add image into 6 x 4 (row and cols) grid and other 2 x 2 grid i want drag the image from 2 * 2 grid into the grid 6*4 only and after dragging i want to fix the position or stop dragging that image phofcode
when trying to get matter physics to work with generated curved shapes in phaser there are a few strange things that happen.
namely a sliding/rolling object gets caught on each segment of the collision shape for the curve (sorry, not sure what it 's actually called... ).
the other issue (which you can see clearly from the demo) is there is an extra line drawn in the debug physics outline (i say debug mode as it doesn 't seem to impact world at all).
i may be using phaser api incorrectly but i went through source code for phaser and i feel like i 'm using appropriate methods/classes/etc.
if an interactive sprite has a custom cursor (custom as in different from the default one) and is destroyed while the cursor is hovering it, the cursor does not reset to the default state.
i guess same will happen if a scene's input plugin has a custom pointer and is destroyed while its' being hovered.
move the cursor/spotlight near the bottom-right of the game canvas.
expected: the robot texture shows ambient color (blue) and spotlight (red) at cursor location.
actual: robot texture disappears (all black).
0. setup a game with webgl; 1. create a rendertexture; 2. fill it with with some content (see full demo as an example); 3. save it to cache; 4. create a tilemap and add cached texture as tileset; 5. add dynamictilemaplayer and fill it with any content.
unhandled exceptions are triggered after destroying a phaser instance.
the mousemanager seems to have listeners that continue to trigger after game teardown.
it seems to me that drag is not disabled once an object has already been dragged.
when i enable and disable drag before i have touched the object, disable is working.
once the object has been dragged, the disable drag commands, executed from inside the 'dragend' event, seem to have no effect, my object is still draggable, even though no `drag` events are fired.
could it be that something is leaked to dom?
starting a new project for a game jam and was loading an 80x80 tilemap.
only the top-left 40x40 section is rendered when a new layer is constructed via `createstaticlayer`.
i've noticed problems with tilemap dynamic layer and sprites when i enable light: 1. sprite becomes invisible 2. dynamic layer shows js errors in a console
scene resume event in scenea will is triggered by "scenea") in sceneb and the next line { data: data }) is not trigger the resume event afterward.
in this case, the data is not passing to scenea.
after the ship hits the ball, open the console and see "uncaught typeerror: cannot read property 'settint ' of null" game.js:43 single stepping through with chrome developers tools, you can see the bodya.gameobject is null.
the settint call works (and gameobject is valid) when i load two images directly like 'images/ship.png '); do i need to modify this code in some way so i can use texturepacker and physicseditor?
do you know if phaser or matter.js is responsible for defining gameobject?
i am still learning how everything fits together with body and gameobject.
having a `camera` ignoring a `container`, if a `object` inside this `container` have a callback)` and `camera` bounds overlaps with that object, even though the camera doesn 't render it, passing the cursor over the object does call the `callback`.
phaser scales a 1x1 image such that the source image 's center ends up where the top-right of the scaled image is expected, and the bottom right corner ends up where center of scaled image is expected.
complicating things, a matterjs body attached to pre-scaled 1x1 image will align its body in "expected" position after scale, but itself becomes misaligned with body.
hi, i seem the release log phofhyperlink and understand the changed of flattintpipeline.
now i update my code using the texturetintpipeline to instead of the flattintpipeline, furthermore i wasn't changed any other codes.
but program throws an error that: phofcode what happend about it ?
it is ok when use flattintpipeline, so... what else should i do ?
when adding a strokethickness property to a text style configuration, it seems to break the text 's width.
for example, a text that has a displaywidth of 76 pixels will, after `strokethickness: "2"` is added, have displaywidth of 276 (which is obviously way too big).
this means that it 's no longer possible to center this text, as the automatic align: 'center ' will be broken, and so will centering by hand.
the delta passed to a scene 's update method is always (60 fps) regardless of the actual frame rate.
when light source is far enough from the visible object - it is not being rendered (like is fully transparent).
i've noticed it depends on the light x/y coordinates, light radius, canvas width/height - manipulating any of them can cause the object to become invisible.
while learning lights in phaser i've noticed problems with tilemap's dynamic layer and sprites when i enable lights: 1. sprite becomes invisible 2. dynamic layer not working at all (js errors in a console)
i 'm trying to create a new `htmlcanvaselement` with and get following error: `typeerror: undefined is not an object`.
the create() method creates, and then adds the new sprite3d to the displaylist and updatelist.
however, when leveraging add() to supply the camera with an existing sprite3d instance, it is left out of these lists and doesn't render.
when a cursor key is down enter to the conditional but when is released never return to the original state.
in this case keep printing 'is down' forever.
`if (cursors.left.isdown) { console.log('is down'); }`
recently i had started the portainer instance in swarm cluster with
since we use github package registry instead of dockerhub to host our images, only the manager node can pull the images.
we get "no such image: when it tries to run on a worker node.
it seems that the worker nodes don 't have the necessary information to pull an image from a custom registry.
here is how i understood there was a problem: capture dcran a 17 46 12 phofimage as you can see, all containers on worker node are rejected.
only manager node manages to run containers.
here is error message on rejected container: capture dcran 17 48 06 phofimage here is an example on stack.
see how many rejected before it finally launches: capture dcran 17 48 49 phofimage
the deployed portainer container runs then randomly restarts.
the container runs from anywhere between 3 - 24 hours.
i 'm using a web proxy with nginx from evertramos phofhyperlink .
so, i connected to my docker env using tls config domain:port (not ip, i used domain because ip is dynamic) as example i will use "example.com:1234" after i add a container ("nginx:alpine in my case) which points to my domain ("example.com"), the portainer endpoint is no more accesible, is down.
assigning a user to two teams (each having helpdesk and standard user roles respectively) results in the user having read-only abilities.
when i upsate the sql server app template with microsofts new location and save it, when i revist the template, and when users try to deploy, the app template reverts to using dockerhub which fails.
i have a swarm of 5 nodes (4x linux armv7l, 1 linux x86_64 ), when launching the agent stack the armv7l nodes join each other but not the linux x86_64 node
current api documentation in swaggerhub has two errors.
stack restricted to a non-admin user is shown as assigned to administrators for all other non-admin users.
removing a service that is part of a stack makes it dissapear for all rbac users, however it is still visible for administrators.
stacks owned by administrators are showing as limited for rbac users.
endpoint admin & standard rbac users cannot use the attach functionality of containers, when they try to attach it just hangs.
if a resource is restricted to a non-admin user, e.g.
`container restricted to helpdesk user eve` then endpoint-admins cannot manage it.
disabling the rbac extension after assigning users rbac roles, leaves the users with their previous role's abilities & no way to remove them.
occasionally when a stack is removed (via gui or api) the stack is still visible without any containers in it.
if i try to remove this stack the frontend receives the following response on the http delete request: `{"message":"open no such file or no such file or directory"} ` the complaint from backend is right, docker-compose.yml indeed doesn 't exist.
as a workaround a can create an empty docker-compose.yml hit delete and all mess is gone.
after refreshing the browser, rbac users no longer have abilities in the ui such as container console or volume browser.
log out and log back in and they have abilities again.
when i try to update portainer from version 1.22.1 to version 1.22.2 i get the following error: phofcode it seems that the database has been corrupted because when i rolledback to 1.22.1 i can only login with admin user (local user) but not with ldap user.
when i go to users section of portainer get a "json invalid" error and inspecting the console can see: phofcode now have a broken portainer.
`1.22.1` version text in `1.22.2` release.
re-creating (or editing) a container won't update healthchecks if they specification changes inside the image specification.
stacks api endpoint `/api/stacks`returns only the list of stacks that were created from portainer, not including existing docker-compose stacks that are shown in the web ui.
after upgrading to 1.22.1 our members granted via rbac can not login anymore.
the /api/users/<id> response 403 and the jwt token is too short comparing to 1.22.0 jwt.
if i browse through the menus and services, the message is returned to me unable to retrieve container
i am trying to pull an image from my internal registry.
the ui interface shows the "green" message saying that the image is correctly pulled.
the page is automatically refreshed but the new image is not displayed in the list of image.
in fact, if i take a look at docker log (/var/log/daemon.log), i can see followiing log `oct 25 clus-portainer-1 dockerd[17001]: level=info msg="attempting next endpoint for pull after error: failed to register layer: error processing tar file(exit status 1): write /usr/sbin/mysqld: no space left on device" `
non-admins can create but cannot start containers.i.e `/images/create /containers/create` works but `/containers/$id/start` returns a 403.
no login fields displayed, it juat says loading portainer with a spinning gear.
when deleting a team a user is part of, the user's permissions are not updated to remove permissions inherited from the team.
after upgrade portainer to 1.22.1 (from 1.22.0), we can't access the container logs and stats as default user.
we use ldap as authentication provider and have a split between developers and administrators.
developers are grouped in teams.
as admin i can see the logs / stats.
as developer not, unless i grant him administrator rights.
when using the external auth extension, and logging in using google chrome (and * only * chrome, as far as i know), one ends up at ` phofurl (note the `?`).
this doesn 't matter all that much * except * that the container console doesn 't work anymore, because code there uses to get the base url and that ends up being ` phofurl and then api request fails.
portainer with --ssl supports outdated, insecure cyphers (tls 1.0 and 1.1), but there is no way to configure it differently.
when i atempt to install an application template such as "iron functions" in portainer which depends on the ` phofurl the deployment eventually fails as git times out attempting to access the resource.
i have encountered this issue multiple times, and, from what i can gather, it occurs whenever watchtower (a container which automatically updates other containers) updates portainer.
as this occurs during automated updates, i have not found any errors or logs (i believe that the issue is caused by portainer, because portainer is the only container with `docker.sock` mounted).
the title explains the issue pretty well; `docker.sock` gets deleted somehow, which then prevents docker from starting properly (as portainer's mounting of `docker.sock` creates a folder in its place).
when i try to create a new user from api the api return this message: phofcode
if portainer is managing multiple swarms, and a stack is deployed to a swarm with a name that matches a stack that was previously deployed to different swarm, the deployment failes with duplicate stack name error.
when hiding some containers in settings section "hidden containers", it does not decrease the container quantity on home screen.
when using portainer to deploy a stack to a docker swarm via an agent endpoint, the deployment fails with an orange badge.
i am not entirely sure what the actual intended behavior is but it seems a bit against my logic.
basically, when using docker-compose and having admin password in a file, then when modifying the password and doing `docker-compose up --force-recreate`, the new admin password is ignored and the old one is still used.
the log of portainer when it comes up says: phofcode
i've updated my stable running portainer by stopping portainer on cli and using $> docker pull after restarting container using: $> docker run -d -p -p -v -v portainer_data:/data portainer/portainer the web-interface came-up again, but authentication does not work.
the portainer_data volume has not been touched in the meantime!
if you want to open a shell in a container, this doesn't work as it will not connect.
hello, this might be totally pebkac, but when i try to deploy a stack using a git repository as build context, i always get the following error: capture phofimage the docker-compose config i'm using is just phofcode no clue what could be the problem here...
cannot connect to portainer on windows 2019 swarm on port 9000 following instructions in blog post phofurl
when trying to add a host in the network section and re-deploying the container an error is displayed in the upper right corner that says "error: cannot read property 'push ' of null".
when i create a volume in portainer and set it to an nfs endpoint, when i bind the volume to a service the actual volume created is a simple local volume.
specifically, when i navigate to the swarm node where the volume is mounted and inspect i see an empty options section, and `fd`m `/etc/fstab` etc show no evidence that there is a mount being used.
i get the ` registry management configuration required` message when: - updating an azure registry without re-entering password (possible on the develop image of portainer) - adding an azure registry with an invalid password and updating it with the correct password
unable to login with ldap users when they are not admins, but have endpoints assigned to them.
when trying to recreate a container and pull latest image, the error message "r is null" appears.
the problem with portainer is that the users (none-admin) do not see the same endpoint values as the administrators.
when a user (none-admin) on the home page looks at endpoints, he sees all key figures of endpoints.
however, if he clicks on one of endpoints, key figures of corresponding endpoint disappear in dasboard.
every value on screen is zero.
however, administrator sees all values for same endpoint.
we are trying to install empty stack on docker host managed by portainer that is running in windows containers mode.
during the creation of the stack, we receive an error from docker host: phofcode
the graphs for both memory utilization and network usage both have intervals of "5 gb" when the screen width is below 3000px.
after adding an internal registry, when i try to browse or test i 'm receiving the error "invalid management configuration".
no logs appear in portainer container that can help me figure out what is the problem.
the added registry is using http and does not have authentication (and already verified that the v2 api is available in our internal docker registry)
when oauth is activated and someone tries to login with form and invalid credentials, backend panics.
when you try to give users/teams access to a custom registry created with authentication enabled, the operation fails with: _invalid credentials.
username and password must be specified when authentication is enabled_.
the access management view, though, does not have form fields for the user to reenter the credentials (correctly, because they should only be needed when adding the registry).
on portainer 1.22.0 containers with status of healthy, paused or created are not displayed in the containersoverview list
when attempting to access an associated edge agent on a synology host, the action fails and the error message: > endpoint is unreachable and there is no snapshot available for offline browsing.
i have a local registry where an image `nginx:test` is available referenced by my templates server.
when trying to deploy the container on an edge agent the following red pop-up appears: "failure no such image: even if this is not the tag i asked for.
i have a local git (gitea) server where docker-compose yaml files are stored to be referenced by my templates server.
when trying to deploy a stack on an edge agent the following orange pop-up appears: "deployment error yaml: unmarshal errors: line 1: cannot unmarshal !
when trying to pull an image from local registry on an edge agent, the following error popup shows up: "failure manifest for not found: manifest unknown: manifest unknown" it works from the "local" docker portainer endpoint
portainer doesn't deploy as a service nor a stack because of the `volume` directive in the dockerfile
items selected on a page of a datatable aren't persisted after selecting more items on another page.
try pull an image that isn 't multiarch and portainer says `image pulled`, because docker api returns a "success operation" response, but it doesn 't actually pull.
i'm running portainer behind a traefik proxy, to serve it over https on a specific domain name.
when i try to login using google oauth, portainer thinks it is running on my ip address instead, and i end up with this error on google: phofcode the domain name i'm using is not specified as the `redirect_uri`, even though it's configured like that on google's end.
if i logged in as admin i see all containers and volumes, but if i log in as ldap user and team member - i see only images on endpoints.
portainer tries to fetch all the containers from the api on every screen, leading to timeouts
the password that we had been using for portainer suddenly stopped working (i have been unable to determine why).
however, in scouting around and discovering that there is no way to reset the password via the ui, i followed various threads to remedy the issue.
one of those was to remove the data directory / volume.
i didn't do that, but i did remove `portainer.db`.
this caused portainer re-prompt me for a password.
i can enter it and create a new user.
have verified that a record is created for `admin` user and hashed password is present.
when try log in immediately after, however, get `invalid credentials`.
an agent endpoint associated to one portainer instance, still shows as `up` after being associated as an endpoint to another portainer instance.
clicking on the endpoint in the orginal portainer instance will give an error message `failure: unable to connect to the docker environment` but portainer still shows it as up.
volumes of worker node not shown in volumes lust
when using auto-refresh on the services table, all expanded services are collapsed after a refresh.
portainer allows you to select numbers for some number inputs which do not make sense.
for the number of replicas for a service you can select `negative` numbers.
when trying to deploy a stack using a git repository (vsts) it fail with code=500
after clicking on a services checkbox it makes the task status table show up, pushing the rest of the services down in the table.
this makes selecting specific services difficult.
persistent volumes added to a service when deploying are not saved.
- volumes named by docker arent persisted, but named ones are in v1.19.0 & v1.20.0 - volumes named by docker & named volumes arent persisted in v1.21.0 & v1.22.0
since 1.21, this api call is not usable anymore : phofurl
the containers are always sorted by state.
the latest tag (1.22.0) of portainer does not start the container and it shows the following error: `c: program error response from daemon: container xxx encountered an error during createprocess: failure in a windows system call: the system cannot find the file specified.
if you 've enabled authentication for a private registry, you cannot grant access to that registry to users or groups at the `registries/1/access` url.
when deploying a new stack in portainer, the containers don't have any variables passed to them but when deployed via `docker stack deploy` it works perfectly.
when updating the url of a registry, the new url is not used to browse the registry unless you access the `registry/:id/configure` url and test configuration.
a merged pr request in the development branch has introduced a bug where tables in portainer are not defaulting to sorting alphabetical by name.
we have used portainer now since apprx.
10 months in a development setup of mixed centos and windows nodes (total of 16 nodes) and a production environment with 2 nodes (centos), accessing the nodes via portainer agent.
about 3 weeks ago portainer got really unstable and the endpoint connection dropped over and over again in the middle of operation, so we had to re-connect again again.
so i decided to have a look updated to latest versions of both portainer agent.
after doing this connection via agent stopped completly i had to fall back a docker tcp connection instead which works, but without the nice benefits agent infos.
the only way get agent running again, was schedule its execution first on same node as runs then extend it one by one run on other nodes.
phofcode findings so far: - if any nodes is under high load, agent-based endpoint might go offline - the console feature lately is broken.
it worked like charme for months, but now you might get console for only few seconds then you will be returned previous screen.
there is a checkbox next to the service webhook button on the service details view that should not be there.
when adding an endpoint or user, portainer gives a green notification of "successfully added", however in the ui neither the endpoints or the added users show up.
after portainer has been running a while, it can 't connect to the primary endpoint any more.
we 're not using agents, see docker-compose-file below.
in the logs i can see lots of those: `background schedule error (endpoint snapshot).
unable to update endpoint (endpoint=primary, (err=input/output error)` if we restart portainer, e. g. using `docker service update --force portainer_portainer`, it 's running ok for about a day again.
i 've seen issues about this regarding the agent but couldn 't find an issue about /var/run/docker.sock, so maybe this is something different.
portainer implementation of oauth is missing the state parameter which is needed to integrate with okta.
if i set an `env` variable within my dockerfile, build and deploy it (i.e.
make a container using that image) the `env` variables are displayed in portainer's ui, which is great.
but if i now build a new image version with the variable set to a different value, that change is not taken on neither `recreate`, nor `duplicate/edit`.
it seems as if portainer reads the variables from the image and saves them in its own database.
when creating new versions of a container these variables are then applied to container, overriding ones set in `dockerfile`.
i can see how this behavior makes sense on variables entered on portainer's ui.
i am willing to discuss this behavior on passed in by an external call of `docker` cli.
but for set `dockerfile` this is at least highly unintuitive.
i use portainer on multiple swarm clusters, it works fine on it (thanks by the way ).
on an existing swarm cluster (with ~15 stacks, 150 services), when i try to start portainer, the start fails because of an 'out of memory' error.
indeed, when the container starts, it takes 100% of the cpu and amount of ram used by process gets higher and higher and finally crash.
the server has, when portainer starts about 5go free ram.
when a docker command takes a long time to execute (such as fetching all volumes) portainer and the agent both experience errors.
- with an agent enabled endpoint, it shows as up in portainer but clicking on it gives the error that it is down.
- when using the portainer ui and browsing to the dashboard and other views where a docker a command times out, elements of ui fail to load and there are errors in browser.
it seems that portainer is blocking on a read or write to its underlying data volume "/data", when it is backed by an nfs share (or something remote).
when this is the case, the portainer binary blocks waiting indefinitely and never becomes responsive.
when a agent becomes unavailable (such as the node it 's on being drained), portainer can be impacted with a failed request.
this could potentially lead to an endpoint going down if a snapshot request is issued around the same time that the drain request is issued.
after promoting a worker node to manager, the agent does not update it 's status.
if other manager nodes are drained then endpoint is marked as down.
ui settings not persisted after log-out i just updated to version 1.21.0 and now the ui settings keep to be reset after logout event.
settings the "items per page" on container view or hiding a column is not persisted.
on previous version 1.20.2 this was working as expected i can successfully see the following cookie set and persisted, but looks like is ignored: phofcode
latest agent doesn 't seem to provide a docker build for armv7.
after add new private registry,i create new app template and deploy container,portainer give me message "failure:invalid reference format".portainer shows image has pulled.
deploying new stack from git repository fails with "deployment error, unable to clone git repository".
portainer logs show: http error: unable to clone git repository (err=read the process cannot access the file because another process has locked a portion of the file.)
sometimes when i try to use portainer and click on my endpoint (which is marked as down), it gives me the red notification box on top: > failure > endpoint is unreachable.
connect to another swarm manager.
if i look in the console output logging of the portainer service, i only see this: > http error: unable to query endpoint (err=endpoint is down) (code=503) once for each time i clicked the endpoint.
if go to endpoints and re-add same endpoint, that new one works while old one still doesnt.
i am running a local registry on my host windows 10 machine.
after purchasing and enabling the registry manager extension, i 'm able to visualize the repository with different image tags that i have pushed.
however, if i click into any of the repository and refresh the page, it gives me an error saying: "failure: unable to retrieve tag <tag name>" the repositories are still there, just unable to retrieve images with tags.
i first thought it might be registry, so tried to "docker pull" images from local registry and am able do that.
we have been running portainer 1.19 for a long time without any issues.recently, i have observed that the internal ip address of our containers are changing after rebooting the host.
eg: container 1- nginx - 10.1.1.2 container 2 php-fpm - 10.1.1.3 container 3 mariadb - 10.1.1.4 after restarting, they are getting randomly assigned like container 1- nginx - 10.1.1.3 2 php-fpm 10.1.1.4 3 mariadb 10.1.1.2 since the ip of mariadb is referenced as 10.1.1.2 in database configuration files, this is creating a big problem.
each time, i have to do a similar action like: forcefully remove the containers by clicking on 'leave network'.
then manually join network in order of free ip addresses.
ie, in this case, i must select nginx first in order to assign 10.1.1.2 to nginx container.
if i select php-fpm container, then will get assigned to php-fpm which will create problems again.
next, must select so that it will get 10.1.1.3 and finally mariadb which will automatically get only free ip address, 10.1.1.4. we have do this every time host restarts.
there are nearly 20 containers but for some of them, address is not getting changed.
tried upgrading 1.20.2 suspecting this may be a bug but did not help.
trying to install latest version on ubuntu 19.04 server
if you type the text in the terminal, then after you switch to another language for example (in my case it's russian), then switching back you will find that you can no longer write anything to the terminal.
when i start portainer with an admin-password, the password hash is logged to the console.
` creating admin user with password hash starting portainer 1.20.1 on :9000 ` for us, these docker logs will then be sucked up and put into a log aggregation platform and made available to anyone.
while i realise a strong salted password hash is not massively useful, it's the sort of thing security people get nervous about, and it's the sort of thing that security analytics tools send alerts about.
while we'll likely adopt oauth plugin, i am trying to remove barriers to adoption while we're trialing :) from source, looks like i can't easily turn this off.
is it possible an option can be added do that, if you didn't want remove it completely?
when creating a secret that has a label added with a blank name, the label is applied.
in swarm mode in windows container mode, portainer is unable to connect to the local running docker daemon.
connecting to a tcp-enabled docker daemon on another manager server works fine.
ldap user credentials not recognized.
ldap configuration is ok as test connectivity return green flag.
during service creation you can assign the same secret/config multiple times which you should not be able to do, as the service create will fail.
when creating a user with space in the name (which is not allowed) an incorrect error message is shown.
if all or part of a tag name is entered in the home view search box, all endpoints (including ones that match) are hidden.
specifying the `--admin-password-file` option logs a message that it creates an admin user with a calculated password hash, but the plain-text password in the given file doesn 't work on the login page.
consider this docker-compose config file: phofcode additionally, i created with my desired plain-text password.
if i remove portainer data directory (to ensure a clean up) and run `docker-compose up portainer`, output looks like this: phofcode however, attempting to log in with password contained in secret file fails.
i considered that there may be a problem with secrets file.
since i can 't exec bash into portainer container, defined test service.
`docker-compose up test` outputs exact contents of secrets file.
this tells me that should exist correct contents on portainer container.
when 'authorize all' or 'deny all' is used, with multiple users or teams present in the users and teams or authorized users and teams tables, not all entries are moved.
each time a team leader is removed from a team, the team leader count is not reset to reflect this.
ldap imported users (from aactive directory), cannot see stacks, services, containers, volumes or networks.
the only section that works is images.
the users are given access to endpoint directly using manage access option.
either giving access to user directly or via imported ldap group doesn 't work.
endpoint is not listed on dashboard, neither local named-pipe nor tcp.
i don;t know what microsoft try to do here, but they have change the hostname event the image is available in docker hub.
phofurl but portainer do not handle it well: the docker registry for the image is not registered inside portainer, you will not be able to create a container.
please register that registry first.
when using the portainer development environment on mac i am unable to deploy a stack.
when the portainer agent is not running globally in a swarm, i can click the stats and console task actions on all nodes under the service.
i 'm unable to update any stack definition on portainer after upgrading from 1.20.0 to 1.20.1
version 1.20.2 fails to start on windows 10 v1809.
error message returned from: phofcode
portainer 1.20.1 ui hangs when i try to add endpoint with tls certs.
i have placed ca.pem, cert.pem and key.pem in the /home/ash/certs folder using the bind-mount.
i then try to add a remote endpoint and upload the tls files using the ui from /home/ash/certs and ui hangs and i see no response from target docker engine showing that there was communication was between engine portainer.
however, endpoint is added when use cli as follows: `docker run -d -p --name portainer -v /home/ash/certs:/certs -v portainer_data:/data portainer/portainer -h --tlsverify`
possibly related to #2306 if a variable list is created in the app template with several values, when creating a stack the selected variable is replaced by the preset value if a preset exists in the list.
if preset is blank, or does not exist, variable is blanked out.
when the firewall block the connection to some registries ip, portainer shows a "image downloaded successfully" even if the download failed.
i am unable to view stacks, produces red box that says "unable to retrieve stacks" also, the login button nolonger logs you in.
have to hit refresh after clicking on login button to get it log me in.
hi, it 's a little bit hard to explain in one sentence but here we go: i have a portainer instance (v1.20.1) that shows around 15 containers on containers page.
some of them are web servers such as nginx, some of them are databases such as mysql or rethinkdb.
my portainer container has these settings: > image: > port configuration: ->9000/tcp and i have an nginx configuration that resolves these requests to port 9000 and redirects them to ` phofurl i have a user defined network named `user` and it details are like these: > name: user > driver: bridge scope: local attachable: true internal: false subnet: gateway: if i create a new container, let 's say postgres container, and expose port 5432, can see it working perfectly.
can add it to `user` network and let my other containers access it, etc.
i 'm telling this because also have firewall that only allows 22 (ssh), 80 (http), 443 (https) 9000 (portainer).
so, no one can hit that 5432 port outside of my machine.
problem starts right after this point, let 's try understand it in the next section.
logout portainer login portainer visit phofurl page is blank
`get`ing a network that doesn 't exist (i.e.
returns a `502` without any content (and logs out `http: proxy error: docker network identifier not found`).
docker itself responds with `404` and an error message in that case.
portainer is trying super hard to connect to remote docker daemon.
portainer logs look terrible =( phofcode phofcode
after portainer session timeout, and the user clicks any page, it will go to login page.
however, clicking login button has no response, staying in `/auth`.
in fact the login is successful.
then user has to press f5.
it will go to `/home`
windows container: ajax docker api frequently respond "i/o timeout".
user may see red toast of following messages: `unable to proxy the request via the docker socket` `unable to retrieve stacks` `unable to retrieve images`
containers -> add container, red toast "typeerror: object expected" shown js console (edge): phofcode js console (firefox) phofcode js console (chrome) phofcode
can't reset resources to unlimited for a container
when using nano function in the console, and navigating with the arrows or scrolling down, the text mixes up and it's impossible to edit it.
unable to pull image from the image page since it has two `:` in the name.
portainer does a `post phofurl incorrectly.
it splits the first colon and sets `5000/asp-service` as the tag
we are passing a large string to the container as part of the env, and it is completely breaking the display of the container details.
image phofimage example of big string in env (replaced actual content with a) image phofimage
when you create a stack and set it name to i.e.
"portainer" then duplicated stack is created with name "portainer" and limited control
i have this app template: phofcode i have a private git server running in my server to provide this repo: ` phofurl but when cloning portainer fails with: phofcode the thing is, this repo `universal-webdev` repo is a submodule of another repo.
cloning normal repos through app templates works, but a submodule is failing.
and there is no problem with the container that serves this repo.
when i attempted to clone it through another container it worked.
here 's a experiment that i did running container on the same network as the git server one: phofcode
volume download works for plain text files, but if the file is a zip, somehow the downloaded one cannot be extracted by any zip tools.
in the network tab underneath the advanced container settings section of a created container, if you 're using the "container" network, the chosen container sub-option reverts to "select a container" when you save and view/edit container settings again.
screenshot of problem phofimage as far as i have seen, this is only a cosmetic issue, and container is still properly configured to use network of another container.
an additional issue that this causes is that when editing a container, you receive "failure invalid network mode: invalid container format container:" error when trying to deploy.
the error vanishes when you select proper container sub-option again.
clicking on the 'published ports' column to sort it results in a very strange sort order.
for example, on my setup i got the following (all ports are prefixed with the same hostname, 0.0.0.0): phofcode this seems like a very random order.
i can't see any reason for it.
host job fails and from portainer log i can see a lot of rows like these: scheduled job error (script execution).
unable to execute script (endpoint=primary) (err=error response from daemon: get phofurl no basic auth credentials) i have masked the repo and app name, as they are not relevat here.
i do have private repo created and the domain name part matches with the host job image host name.
portainer is unable to find or pull images from a gitlab.com registry with a tag other than latest.
when deploying a container you cannot specify labels without an empty value.
if you don't specify a value they are silently dropped from container creation and cannot be added via the web ui.
when creating stacks concurrently using portainer api all created stacks share the same stack id.
resulting: - only last deployed stack have "total" control, all remaining stack have "limited" control.
- all stacks share the same directory with the first deployed stack specifications.
single qoutes in command statement for dockerfile are common and as well portainer supports overriding command with templates.json.
for example, nginx:mainline-alpine command statement is: `"nginx -g 'daemon off; \'"` since upgrading to portainer 1.20.0, such command statement in templates.json results into: `"nginx -g ' 'daemon off; \' \'"`.
i tried connecting the container to a network (tried multiple times with multiple networks).
when going into the container's page, clicking on each of the networks resulted in opening network page with empty details and an error `unable to retrieve network details` when checking url of networks page it was missing network id, when i went back to container page i found that url was missing id.
inspecting object resulted in missing id for network.
i did a few checks and also running `network connect <network-id> <container-id>` had same results, seems like a bug with docker.
posting this here to think of a workaround.
creating a new team containing the character '&' results in the ampersand character being transformed to `&amp;` which prevents the 'automatic user provisioning' functionality to work as expected while using ldap.
setting node name has been removed from node details page with recent refactoring.
remotely connected pr is #2605 (another bug coming from this refactoring) screenshot at 16 13 30 phofimage
when starting a container/stack with acl turned on, the volume does not appear in the volume view, only for administrators, as it is has the ownership 'administrators'.
new nodes are unable to pull images from remote registry that requires authentication.
i have private registry in aws ecr, nodes are running outside of aws and this requires authentication in ecr then.
when new node joins, portainer will attempt to start containers on it including those defined as global.
the automatic pull fails every time, right until i manually pull image via portainer dashboard specifying that registry.
looking at docker logs when this issue happens i see it fails to pull image from that registry, which makes me think that the auth credentials are not used in case (even though saved), but used (added) to node when manually image.
when i reboot my ubuntu host, portainer starts but: - portainer shows 0 containers, volumes, etc.
- the portainer container cannot be stopped so i can 't recreate it: phofcode - these errors coincide with log entires in `dmesg`: phofcode
i 've created an overlay network named "cluster" in docker by using following command: `docker network create -d=overlay --attachable=false --gateway=10.1.1.1 --gateway=10.1.2.1 --gateway=10.1.3.1 cluster` when i review its detail from portainer 's "networks" page, it just shows one subnet and one gateway, other two and gateways are disappeared.
using the official i tried to deploy a portainer to a simple docker swarm which consists of three nodes that are all manager nodes.
but the agents do not seem to be able to form a cluster.
that leads portainer always connecting a random instance of the agent and just showing that nodes containers etc.
here are the logs of one of agent instances: phofcode all instances are showing same error messages.
the ip seems belong host `us1.utm2d.sophos.com` which might have something do with our corporate firewall which is sophos system.
a clear and concise description of what the bug is.
when using service webhooks or the `update the service` (along with the `pull latest image version` option), related app is updated
for version 1.20.0 the pre-compiled binaries are missing.
the url in the dialog for creating a new portainer agent is broken.
when adding a registry host:port, portainer interprets it as https.
a prefix with http is not interpreted at all.
this means portainer is expecting a secure registry.
a clear and concise description of what the bug is.
cannot launch new stacks with portainer running on synology nas.
have tried various docker-compose files in the "deploy stack" web ui, all with the same results (see below).
i created a container, wanted to edit some env variables and redeploy it.
after that the published ports are missing.
if i edit the container again the ports show up in the configuration but they are not published.
create template with: phofcode this shows up as: screenshot at 2 09 31 pm phofimage
when failing to recreate a container, the app renames the old container, which means the next try to recreate fails because portainer tries to name the container `original_name-old` which already exist.
when i change the container image, the new container does not work.and i get this error `oci runtime create failed: container_linux.go:348: starting container process caused "exec: " \'node \' ": executable file not found in $path": unknown`
recreate/edit leads to the command & logging showing: phofcode manually removing the single quotes leads to this working again
after upgrade from 1.19.2 by pulling latest image from docker hub portainer is not starting.
log shows: templates already registered inside the database.
failed to parse duration @every : time: invalid duration
container console exec a custom command if process finishes within 1 second,
there are some missing characters in container logs please download `log.txt` and then build below `dockerfile` phofcode log.txt phofhyperlink then run a container of this image.
as the title says, if for example i just created the portainer instance and didn't select the initial endpoint, and i change the url to `/dashboard` i get an error in my console about missing endpoint.
when pulling an image, phofcode is returned.
when trying to create agent endpoints with curl (agent is installed on another swarm cluster than portainer), it fails when url field is set.
same values works with portainer form.
i get a valid endpoint via api and used same values : it fails
for stopped container, container stat page shows red prompt at top right corner.
but it is showing some javascript error message
when viewing the list of endpoints in portainer 's home page, the summary of is always using the plural form of the nouns the same thing happens in summary displayed at dashboard page for a particular endpoint: words are in their plural form, regardless of fact there may be only one
running a curl request to update a loaded portainer template is failing with `json: cannot unmarshal array into go value of type
today i get security error when running any command that is "too many open files", so i guess that there is memory leak somewhere and i use a script from phofurl to count the number of open files per process.
which show me the report as follows: > 63573 fds (pid = 21725), command: /portainer > 8191 fds (pid = 31635), command: /usr/bin/dockerd > 1488 fds (pid = 4047), command: /opt/jdk-10.0.2/bin... it means that portainer keep over 60k open files which i believe it 's leaking somewhere we forgot to close files or connections.
when container is configured with logging driver and option, it 's not preserved or parsed out from docker inspect when trying to duplicate/edit.
it basically falls back to default logging always, and user then needs to re-type the logging options and drviers.
this is from testing on
cannot create/modify/save any environment variables after container creation.
after a restart of the host portainer says that the swarm it is managing is down.
the swarm is still up and portainer is running in the swarm.
the agents are running as well.
after removing the portainer container, so that swarm spins a new one, solves issue.
registry management pages load slowly when misconfigured private repositories.
for example private repositories that doesn't existsee the log belowthe page loads slowly because of timeout > http: proxy error: dial tcp i/o timeout
when trying to create a new network i don't have the macvlan driver as an option.
under engine i can see the macvlan plugin.
if i create a macvlan network using docker i can then see that in portainer listed using driver macvlan.
but the option is still not there when trying to create new network.
with docker volume for gluster, working on a normal host in a swarm environnement.
portainer don 't list files.
the result send by api : {"err":"unable to list files inside specified directory"}
using latest portainer 1.19.2 when trying to add a stack which resides in our private repository, portainer show an error "unable to clone repository", portainer logs show the errors: phofcode the volume which portainer uses is empty before starting the portainer container.
using git clone for the same repository from command line works as expected.
i created three stacks the other day, they all conformed to the naming scheme and ran without any hitches until i restarted the host system which is an ubuntu server 16.04lts host with just docker running on it, when the system came back online i noticed portainer was showing only limited control over stacks, i restarted container for portainer and it continued to show same limited control.
when deplying a stack on a non-swarm instance, the network ip is ignored.
i have several stack created on "docker" endpoint.
say enpointid 1. i then added portainer agent and had to recreated the endpoint, lets say it 's enpointid 2. now all my stack are associated with endpointid 1, so when i try to edit the stack i get a failure message saying it 's unable to find the endpoint.
so queried the api to get stack information: get : phofurl [ { "id": 3, "name": "mystack", "type": 1, "endpointid": 1, "swarmid": "entrypoint": "docker-compose.yml", "env": [], "projectpath": "/data/compose/3", "resourcecontrol": { "id": 0, "resourceid": "", "subresourceids": null, "type": 0, "useraccesses": null, "teamaccesses": null, "public": false } } ] so tried update endpointid using api: put : phofurl { "endpointid":2 } and get : { "err": "unable find endpoint associated inside database", "details": "object not found inside database" }
portainer mounts the volume not based on absolute path of the host.
but relative to container root?
in earlier verisons (not sure which exact version but somewhere around 3months ago) it was possible to add additional docker-sockets to portainer over the api with a post request like this to `/api/endpoints` phofcode re-running the same api post to 1.19.2 does not work, it tries use http even though endpoint url prefix is of type `unix://` log shows: phofcode
if a request to portainer's ui is made with tls 1.0, the connection is successful.
when a stack named "s" if created via api, for every volume named "v", a new unused volume is created named "s_v".
when a stack is added via api, the docker-compose.yml file is created as expected, while the "env" list of dictionaries is ignored.
i created some stacks via api which shared the same network.
i tried to remove both, but is not possible to remove the second one, because the network is no more available.
portainer hangs if i dinamically leave a managed docker machine from swarm and ingress it in another one.
a stack has been created via api with status code 200, but it is not listed in the web interface nor in the api.
triggering a service to update & selecting `pull latest image verison` will not pull the image and update to it, when the image it uses is in a private registry.
after installing portainer and create a new container, when i setup my first account i can 't login to the panel and i got this error in container load: `http error: no administrator account found inside the database (err=object not found inside the database) (code=404)`
a bit of a long shot but i got deployment of private aws ecr images in a swarm stack working by following the solution in #1533 with the phofhyperlink .
however if i try and use the service webhooks #1663 to update the created service update gets rejected with phofcode but if i update stack it pulls image just fine.
it seems like authorisation is being handled differently between service and stack pages.
when recreating a container that was previously on the bridge with mapped ports and changing the network to container:<container name> the following error shows: "conflicting options: port exposing and the container type network mode"
when i log in with a non admin user, the endpoints' group name is empty.
home view phofimage also the model doesn't have a group name: model phofimage
variables for an app template that are defined via select from predefined values are not inserted ito the compose file.
when hitting "deploy stack", the value in the drop downs change to "select value" as well.
after scaling a service from 1 -> 0 -> 1 containers, the scaled-up container does not have environment variables, configured in the portainer ui, set in the container.
when deploying a stack, spaces || dashes || underscores are stripped out from its name when deploying through composer, so stacks list does display two stacks, one using the original name (portainer's name) and other using the stripped out name string.
if the original named stack is selected, no containers are displayed at all, though the stripped out version does.
if the entry point has one or more arguments, making any change in the entry point field will make the container invalid, because it gets saved as a string rather than an array.
on this version of portainer, there is no "app templates" section under settings.
there is no linuxserver.io templates either.
i can 't pull a private image from the docker hub althought login details were entered on the registry screen.
the docs page for the agent has a litte error inside the stack file example phofhyperlink .
a wrong indent in line 20 and 21 prevents the stack from deploying.
cannot create an overlay network using portainer setup using the
in the current development version (1.19.2), the 'image ' tag in 'container details ' is the one that was used to create the container; even if tag does not belong to image being used anymore.
add new external endpoint in json file and restart portainer, it shows in interface, but when you want to manage access to this new endpoint, it gives error: > failure > unable to find an endpoint group with the specified identifier inside the database and it doesn 't load access management interface part.
i'm running a fresh kvm alpine linux vm with docker swarm installed succesfully (1 node setup, node = manager)
when linking container `foo` to container `bar`, the name displayed for container `bar` changes to be `foo/bar`.
this does not align with what shows up in `docker container list`, nor is it a desirable behavior (for me).
the link on `published ports` column of any given deployed service in the `services` section opens up a new `about:blank` tab.
i have a swarm created with docker for aws, with the daemon configured to use the awslogs log driver.
when i deploy a stack from the cli, the services use awslogs driver as well (the one specified at daemon level) as no log driver as been specified in docker-stack.yml at service level.
from portainer, service log driver should specify awslogs but it shows "default logging driver" instead.
i am unable to connect to running docker demon, neither through npipe nor through tcp.
docker is configured to listen both on npipe and on tcp, and _ping returns ok phofcode phofcode phofcode phofcode
on a service details page, long image names are truncated (expected), but very difficult to see and edit.
the text field wraps the image name, and forces focus to the top of the field.
this means that it is not possible to scroll/drag past the right edge of text field, like a normal text field.
it is also not possible to scroll or move text cursor down see overflowed text, because scroll position is forced top.
when a service details page is opened (e.g., by clicking on a service on the services page), it immediately scrolls to the bottom of the page because the focus is set to search field in tasks list.
i then have to scroll to top of page in order see service details or access quick navigation.
when i choose a custom logo it appears on the left side menu and in the login land page.
but if the logo is white (to match the blue left side menu) i can barely see it in login screen because background is white as well.
installed portainer 1.19.1 (clean install, empty data folder ie no upgrade) on debian 9 using the instructions as per phofurl phofhyperlink started portainer with '--admin-password-file' and get following error: >
after configuring ldap authentication against active directory, portainer panics after creating the user but before allowing the user to log in.
although registered in database, templates type 3 (compose stack) aren't showing up in the ui either created via ui or via api.
the create process is ok, in both cases (i can see the template description via api), but after creation, the ui is showing only swarm stack and single container templates.
i'm unable to reconnect to a swarm (agent driven) when redeploying a fresh portainer instance.
portain can connect to swarm upon endpoint creation but endpoint is shown as `down` in home page and trying to use the swarm endpoint results in `unable verify portainer signature` error.
note: swarm is using portainer agent as service.
note2: the only way get the connexion back is restart the entire swarm.
if i try to connect to portainer api providing a valid username and a passphrase containing $ character, the login will be denied example: user@xpto:~$ http --verify no phofurl username="admin" password="anything$else" http/1.1 422 unprocessable entity content-length: 30 content-type: application/json date: sun, 05 aug 2018 gmt x-content-type-options: nosniff x-frame-options: deny { "err": "invalid credentials" } in web frontend i can login with no problems, with this password.
if i change the password, removing the $ from passprhase, the login succeedes.
trying to add a stack template with a repository with url `ssh://` is failing with: phofcode
in stacks view, clicking on an action in the actions column leads to a js error phofcode
any empty environment variables set (e.g.
my_var="") are rendered with a trailing = in their name after a "duplicate/edit" ui action on the container.
when running a swarm cluster with portainer + agent deployed one can still deploy a single container.
portainer + agent allow to deploy that single container to a specific node in the swarm cluster.
however in the advanced settings section the drop down to select a volume or network show values from all nodes in the whole cluster and if they have same name you don't know which one to choose.
docker registry from gitlab.com cannot be accessed through a fqdn, hence cannot be accessed in portainer.
all passwords of registry are transmitted in `/api/registries`, in
the "registry" parameter for container templates seems to have some issues, both with usage on container deployment and setting of the parameter via the new portainer template ui.
the docs don 't have a sample for "registry", but from the code it appears that "registry" should be set using the hostname of alternate registry like "docker.ourdomain.com" rather than vanity name of registry setup in portainer.
when doing this via template.json for initial load like: phofcode with a registry configured in portainer (with auth) for docker.ourdomain.com, then trying to deploy a container based on that template, portainer replies: `failure no such image: however, that image
the "network" template parameter for container templates doesn 't seem to get handled properly by the new portainer template ui.
using a customer template.json for initial load, the "network" parameter seems to get set properly (i.e.
deploying a container off the template shows proper network config), however when going into "update" the template via new ui, "network" parameter isn 't set (shows "select a network") and any attempt to select and save results in `invalid request payload` with portainer log giving: `http error: invalid request payload (err=json: cannot unmarshal object into go struct field of type string) (code=400)` the object posted to /api/templates/{id} does include network parameter, so it seems be an issue with api endpoint handling that data.(?)
if i run a container which has volumes defined in its image and i don 't specific bind or mount all the volumes, the unnamed volumes will be added with ownership public.
with the new browse feature this becomes a security risk.
git authentication not works in portainer 1.19.1
using the `--no-auth` flag during start-up does not seem to work correctly anymore.
going to the url brings me to `<url>/#/auth` with blank username/password fields.
clicking `login` generates this message in the log: `http error: cannot authenticate user.
portainer was started with the --no-auth flag (err=authentication is disabled) (code=503)`
when specifing a port like in template.json it will show at the container side and leaves host empty.
documentation says: it can be optionally prefixed with the port that must be mapped on the host in the port: form.
we run a stateless portainer instance on a multi node docker swarm.
thus, if a node goes down, portainer restarts on another node and starts afresh.
although, when running portainer with agents, the agents will not allow the new portainer instance to connect.
portainer does not fetch remote stack files decalred in `template.json` although the git clone is possible.
in a swarm environment the stack creation of a yml file hosted in a git repository doesn 't work.
creating a stack on a docker environment (not swarm) using a docker-compose.yml that contains an external network returns the following error: phofcode without the `external` parameter there is no error.
found during testing #2018 that stack deployment fails on both linux and windows and even when version is build directly from develop branch without npipe changes.
after a while (more than 2000 lines can't tell when) having container running and watching the logs it jumps around showing the latest line than jumps back to way way back old lines, than to old lines than again back to latest lines and so on.. i couldn't figure out how many lines it exactly starts jumping around
- can not access container console from portainer web interface.
however, running "docker exec ..." in the physical host works.
the error is "no such exec" as similar to the one reported in issue #1671 - google chrome is showing me the following errors: websocket connection to failed: error in connection establishment: post phofurl 404 () - portainer is not behind a proxy.
- portainer is installed in a single docker host using self sign certificates following advise from @deviantony tried to deployed a plain http instance.
the problem does not appear up to now.
when i create a stack via the ui, the stack is created and indicated as total control.
when access the detail page, the stack indicate no container available.
in same time i can see a second stack created and indicated as limited control, second contains container that should be associated to first stack.
using portainer docker api proxy in a swarm mode environment (portainer agent installed on all nodes) does not work each time.
often we just get "no such container" or "502 bad gateway" or "page not found" errors.
i have a swarm with 3 nodes running since several months.
but suddenly now, when i call: phofurl
the action links (logs, console, info, stats, inspect) are not consistently presented in the various task/container lists.
for example: - the containers page has all four action icons, even for stopped containers where "stats" and "console" throw an error that complains "container... is not running" and "inspect" throws "unable to inspect the container" - the nested service task lists show a "logs" action icon for "ready" and "starting" tasks, but it is not clickable and the cursor does not change to a pointer.
- the nested service task lists never show "stats" or "inspect" action icons, even though those actions are available if i click through to the task detail page.
- nested service task lists do show a "console" icon for "starting" tasks.
these are generating logs they are running.
they just waiting for first health check to pass, which could be several minutes after a is started.
i can click through detail page then click "console" action.
the node behind nat doesn't show up in the portainer dashboard.
i can see service logs too.
node is reachable for swarm.
hello i 'm trying to run portainer agents in my swarm clusters of raspberry pi and i 'm receiving an error due to not workers can commit to the conditions required by the agent to run.
i 've inspected the image and it seems architecture is shown as amd64 even on arm images: phofcode
i remove one stopped container from the container list in swarm mode.but i recieve an error "no such container: which expect i can remove the container sucessfully but if i click the container name enter the detail page, can remove container.
debug it , find request head is different.
from containers list remove operation image phofimage from detail page operation image phofimage
i 'm unable to open a console in a running windows container.
the process fails with: _failure resize could not find containerid <containerid> to resize_ happens for powerhell as well as cmd.exe
after manually deploying roughly 40 stacks and hitting random errors about every 4-5 stacks - after 3 hours i finished adding all of my stacks.
portainer is using a docker volume backed by the default volume driver / local disk.
random errors "is a directory", "unable to clone repository", and odd compose file corruption issues when deploying stacks from custom templates.
portainer now reports it cannot retrieve any compose files from disk.
the majority of these stacks were deployed from the same custom template.
any that were not were manually deployed by pasting the compose from the git repo (because this seemed to reset some state in portainer and allow me to continue deploying template again).
since upgrading from 1.17.1 to 1.18 i can no longer list or access (via console) containers that are running in the docker swarm but are not located on the host running portainer.
i am using portainer-agent (and have set as the endpoint for portainer) and was previously able to access all consoles directly from portainer.
in 1.18 this seems to be no longer possible.
portainer is not behind a reverse proxy.
the containers view only shows containers that are located on the portainer-host itself.
services-view lists all containers but any container not on portainer-host can only show logs.
after deploying an arbitrary number of stacks using the same template, portainer will no longer accept new stack deploys from any template.
instead it gives this error: `http error: read /data/compose/: is a directory`
the swarm cluster visualizer page shows tasks on each node of a cluster.
it automatically refreshes on a regular interval (4 seconds?).
on every refresh the tasks on the nodes are sorted differently.
this makes it really hard to see what's actually changed on every refresh.
i have deployed a stack (outside of portainer) that contains a global service which should only be deployed on manager nodes.
my swarm has 3 managers and 1 worker.
in `docker service ls` it 's shown correctly: > management_traefik global 3/3 traefik:1.6.4-alpine however in the services list in portainer it 's shown as 3/4.
we have set a swarm cluster with 4 linux managers and 4 windows nodes (2 with 1709 version and 2 with 1803).
the linux machines are running docker version 18.03.1-ce while windows the point is, when i use the stack option of portainer to deploy a stack it works perfectly for linux containers, but when i try to create a stack deploy for a windows node i get error on mount volumes: "invalid bind mount source, must be an absolute path..."
i have uploaded a docker image to my google container registry (gcr.io); and registered in the registry using a service account using this guide to setup authentication: phofurl i can create a container utilizing my full image path: `gcr.io/<project when i click 'recreate ' on the image, i get the alert in the ui: "cannot read property url of null" my container gets deleted, but not recreated with latest version of image.
i have a stack deployed via portainer stacks functionality, with a local-scoped named volume for one of the defined services.
when looking at the service page in portainer, the volume is not listed, instead the default 'select a volume ' is selected.
if i open combo box i can see several volumes listed.
i am running portainer-agent across my swarm, if that 's relevant.
when migrating from a standalone portainer instance to a stack with agent and i 'm trying to log in i get "{"err":"portainer public key unavailable"}" on the request to if i start a portainer stack from scratch it works fine but i 'd like to keep my database with all of its config.
i installed volume plugin `rexray/s3fs:latest` but not showing on portainer volume creation page image phofimage image phofimage
since i have switched to 1.17.0 i'm unable to see volumes on dashboard.
now after some loading it just shows no volume available.
i'm using rex ray plugin for persistent volumes on digital ocean, it could be slow sometime error i get in agent logs: http: response.write on hijacked connection http error: get phofurl net/http: request canceled (client.timeout exceeded while awaiting headers) (code=500) http error: get phofurl net/http: request canceled (client.timeout exceeded while awaiting headers) (code=500) what i got on slack support is that timeout is set to 10s and that it is hardcoded.
maybe that should be increased or feature to set the value you want should be implemented.
when using the `put` endpoint ` to update a stack with a new compose file.
the compose file does update inside portainer - it just never updates the swarm.
when im using web console to connect to container and paste some commands in it, it got all messed up.
words get mixed, words from end gets into middle and similar.
at first i thought it is only presentation issue, but command is really paste in wrong way and it is not working.
vsts git urls look like this: phofcode where `repo` is the name of the repository.
the bug is that portainer fails to pull a valid repo with the following error message: text deployment error unexpected client error: unexpected requesting " phofurl
long text now didnt wraps in tables!
portainer in swarm mode shows all vsphere driver volumes once for each container (might be intensional ?)
i 'm unable to update any stack definition in portainer on v 1.17.0 running on a docker swarm with engine v17.12
in the stack detail page, it 's not possible to filter the tasks clicking on the search function.
the page doesn 't filter any task after filtered some thing.
i cannot access portainer through a traefik generated reverse proxy (let 's say mapped to "console.example.com").
i recieve a 504 error, it seems to timeout.
this issue does not occur if you use the agentless setup.
can not deploy stacks due to this error message: failure error during connect: get phofurl dial tcp: lookup /var/run/docker.sock: no such host
when deploying the portainer app in a swarm having multiple master nodes, the user authentication fails.
in the container details when clicking onto a container the port mappings are displayed in a "container -> host" format, although docker uses the other way around everywhere else.
this is either a bug or just irritating.
example: 9000/tcp -> 80 container -> host
after portainer (with agent-support) runs for a while, we get instant "failure unable to create stack" errors (top right, red popup) when attempting to * update * any existing stacks.
these existing stacks have not changed at all since they were last updated or deployed, and they are already running.
updating the `portainer` and `portainer-agent` services and reloading my browser fixes the problem, and i am again able to update existing stacks.
when viewing the network tab firefox dev tools, it shows a 500 put response to each request, `{}` as the response payload.
some recent `portainer-agent` tasks show as "failed" "rejected" with `task: non-zero exit (137)` `assigned node no longer meets constraints` error messages, respectively.
the 4 `portainer-agent` task logs from immediately before update (which fixed error) are: ## 1 phofcode ## 2 phofcode ## 3 phofcode ## 4 phofcode the `portainer` task log from immediately before shutdown is: since restart, still running `portainer-agent` task logs are: 1 2 3 4 and log from still running `portainer` task after shutdown: this is a 3 worker, 1 manager cluster provisioned by docker for aws 18.03.0-ce, letting them create vpc which i believe allows "all traffic" between all nodes managers within cluster by default.
the ui allows me to add multiple host file entries under the advanced network setup but when i save and provision the container is only saves and applies the first host file entry and all other entries are lost.
on defining a field in the prisma datamodel with a type of `boolean`, am trying to set a default to false.
reading the docs phofhyperlink suggests that the correct syntax is `boolean @default(value: "false")` noting that the boolean default value is defined as a string.
the following error is thrown when i set default value as string: phofcode when i set default value as `false` - omitting quotes, prisma deploys successfully but does not set value correctly to false for each row in db.
when running an upsert command using the prisma client, am getting errors for unique constraint violations for multiple different entries.
i can see these in the docker logs as well: phofcode as you can see, the query is looking for `username: 'nonexistent '` which indeed already exists.
but instead of updating it as the upsert command should do, it attempted to recreate it causing unique constraint violation on username space.
following the go tutorial for prisma which works with gqlgen causes type conflict in the `generated.go` file and `resolver.go`.
define a model like: type test { id: id!
@id lastdate: string } where last date can be a string or null.
prisma's graphql queries to the database work without any issue: phofcode you cannot query the same results from the go client
given this prisma schema: phofcode will produce this `models` array: phofcode if you have an enum in your prisma model, it will even contain that, saying its a non-embedded-model.
maybe i don 't know what the purpose of this array is, but i needed something to get a list of all models that can be queried.
dear prisma enthusiast, i am struggling with putting the prisma_config in a docker secret in the right way.
i assume this is no real bug.
it would be great if there is a place in the documentation where it is clearly said how to pass the config to docker secret.
in trying to setup prisma, i 'm deploying the attached docker-compose.yml, then running prisma deploy which then results in ` phofurl failed, reason: socket hang up`
it is not possible to create a simple mutation with input from an array.
tried using a json object, looping through the array and creating the mutation json object.
(attachments is an @embedded object)
consider this datamodel: phofcode this will yield an error on prisma:deploy: phofcode as embedded types are stored as nested documents, there is no need for a relation name, but you have to give one anyway, which seems to be a bug or flaw.
the bigger issue is now that you can 't recover from this problem.
adding `@relation` will break the upgrade as well: phofcode will break as well: phofcode
running `prisma deploy` for the first time on an already existing mysql db after `introspect` results in error: (conn=140) duplicate column name 'countryid '` (see full error message with failing sql query below).
countryid is a foreign key referring to a country table.
making many create entity requests asynchronously via generated prisma client (ts), i am getting `a unique constraint would be violated on .... details: field name = ...` errors to whole patch and only for whole patch that was in processing at the time unique constraint error occurred.
when checking database after migration, it seems that data was inserted.
requests were made asynchronously with a limit, to be under prisma 1000 worker limit - there weren 't any "socket hang up" errors.
when running post requests directly against prisma server or postgresql directly, fault doesn 't occur.
hello prisma team :) thank you for what you do.
i have deployed one of my companies project to aws via fargate as it 's explained at aws fargate tutorial phofhyperlink with a model which look like this (small part) phofcode on my local dev, no problem everything is fine as expected.
but when i 'm trying to save multiple signinputs the mutation takes forever and ends with an load balander timeout 504 error phofcode after a little bit of research, my company dba saw there is a lot of connections between prisma and the mysql db and there is locks inside the db that made request stacking endlessly.
the question is why ?
and how to make it work normally ?
having a model with a relation (for example `foos: [foo!]!
@relation(name: "foosrelation"))` doesn 't allow you to create a node with this relation, specifically when you use postgres 9.4. using express and prisma-client, i see an error like: phofcode which looks like this following stack trace in the prisma server: phofcode i see this if i create a postgres 9.4 server with my docker-compose file.
the issue goes away however, if i switch to version 9.5.
given this prisma schema: phofcode will produce this `models` array: phofcode if you have an enum in your prisma model, it will even contain that, saying its a non-embedded-model.
maybe i don 't know what the purpose of this array is, but i needed something to get a list of all models that can be queried.
prisma `1.34.7` breaks services with a service secret.
attempting to run `prisma seed` results in the following error: phofcode after running `export debug="*"` i saw that `prisma` is attempting to auth against ` phofurl see log below: phofcode running `prisma deploy` works fine: phofcode
i am unable to set a unique field to null in a mutation.
i recently startet working with graphql and prisma and still exploring the features.
i followed the main tutorial from the site and experimented a bit on my own project.
to summarize the strange behavior: when i 'm using automatically created function for creating a record in underlying database (in my textcase "createuser") it requires a valid usercreateinput and returns an userpromise.
but when i call that function with invalid user data it neither resolves (as it should skip this) nor gets catched (what should happen) in a following errorhandling.
the result is only useable when i explicitly add reject function after resolve function.
after i found that i tried to reproduce same behavior with "normal" promises.
and it looks like reject as well as an error-thrown promise both step to either reject function or chained catch block.
so in conclusion is possible to deal with that behavior but is not really intuitiv because dealing promises works different.
i 'm getting errors related to `name 'default ' and stage 'default '` when initializing new prisma project
as the title said, the generated types file automatically import interface `model` from this will lead to a same-name-overlapping with a user-defined type.
<img width="676" alt=" 34 29" src=" phofurl a simple workaround is rename `model` but has to do this every time after re-generate the types.
typescript client generation fails for graphql types that are missing an @id field.
it's unclear whether this is a documentation error or an actual bug.
as far as i can tell after perusing the prisma docs, an id field is a system field but it's not supposed to be required.
mutations with custom check constraints don 't work.
i want to be able to alias a field name, but when i do so in graphql-yoga server connected to prisma server, i get an error saying `cannot return null for non-nullable field`.
i checked the requests made to prisma server, and came know the request and response were successful database, which means prisma server is responding with given alias but graphql server throws an unexpected error.
as i describe, i clone new but it very slow
i have a prisma 1.34.5 instance deployed on fargate, and beginning last night, it's been responding with internal server errors after a short period of time.
if i manually restart the instance, it works again for a while before failing again.
looking at the logs, i'm seeing a lot of these recently, where it looks like metrics endpoint that prisma posts to is returning 502 error, and when that happens few times in row, the instance stops working: phofcode can i disable these prometheus pings until the endpoint is working again?
are there any other workarounds?
query by empty (nullable 1:1) relation always return empty result set.
impossible to update several elements in batch - graphql types: a parent (`project`) and its child (`asset`) phofcode - resolver to update two assets belonging to the same project in batch: phofcode - only the last asset in the list gets updated
when using npx to login, init and deploy (i should have installed it though, i know) it uses the version 1.32.0-beta for the server, and when using the cli after installing it globally, it says this: warning: your prisma server and prisma cli are currently out of sync.
they should be on the same minor version.
prisma cli version: prisma/1.34.3 (darwin-x64) node-v8.11.3 prisma server version: 1.32.0-beta for further information, please read: phofurl
deletemany or operator on subresource gives `these should not be hit`, other tries of usage positional filtering doesn't works.
more specifically on the batchpayloadpromise interface, looking at count.
phofcode when doing a phofcode it will return a string by type definition (long = string).
but at runtime it is a number.
a clear and concise description of what the bug is.
after a few hours of frustrating debugging i found the issue i was stumbling on.
there is namely a difference in the `prisma deploy` and the generated prisma client (`prisma generate`) which both use the `enpoint` from `prisma.yml` file.
i am running a local prisma server (via docker) and when i tried to run `prisma deploy` it would always pull up login page in my browser in stead of connecting to local running prisma server.
found that when `endpoint` is set to an ip adres (from docker) it doesn't work but when setting it to ` phofurl (1234 being port of your prisma server) it works correctly.
then other side of coin is when you set `endpoint` like mentioned above using localhost client that gets generated also has (at bottom file) `endpoint: phofurl when you try run anything in playground you will see that you get `request phofurl failed` error.
in order solve basically need change `localhost` ip address that was causing error `prisma deploy` command.
there is a big with `marked<=0.6.2` that has been documented elsewhere phofhyperlink and is present here: phofcode
i get an error when i use the same embedded type in one type.
prisma server has an internal queuesize of concurrent request it could be processing.
when this limit is hit (with high enough qps and slower queries), prisma server starts to reject new queries that it receives.
once the load is reduced, prisma server should "recover" and start accepting queries again.
my hypothesis is that prisma server is not able to recover once it hits the `queuesize` limit once.
i have a querie that is running well on pgadmin connecting to the same database that the prisma server is connected on pgadmin the querie returns values but when i try to run it with execute raw it does not work here is the error phofcode
go-client can not query connection: error: field 'edges' of type 'useredge' must have a sub selection
prisma is throwing an error when enum is used with no migrate flag.
sometimes the following error is produced in playground as well as while running my nodejs app which interacts with a postgres database present on heroku under hobby plan.
i am doing a nested mutation, and after doing around 10 of them in a span 15 mins.
the cpu consumption is shooting up and the server is crashing.
it happened when i had 2gb ram, so i thought if i increase the ram to 4gb, at least by brute force it should not crash.
i am not sure if this is a `bug` or `expected`.
i 've just found strange behavior when setting `prisma` endpoint.
when i don 't set prisma `endpoint`, my mutation query `request` direct `params` like below which is expected.
image phofimage however, when i set my endpoint like below, image phofimage now it requests `data` param and i have to put my other `params` inside `data`.
struct generated with datamodel in snake case names will not decode
while trying to create a data model for an existing mysql database, i ran into some issue when having two `@db(name: "parent_id")` in different types.
specifically, the data model phofcode fails on deployment with error message > the column for the inline relation field `parent` is not referencing the right table.
it should reference the table of model `entity` but is referencing table `comment` commenting out faulty field works: phofcode
getting started with prisma and ran into an issue when trying to use recursive self references in my `prisma.yml` config file.
i am getting an internal server error on deploying the following datamodel with prisma on a docker container.
i saw on another issue that the bug seemed to origin from a problem of relation names so i renamed them all to be sure but it didn 't solve it.
installed prisma cli using yarn pnp does not work.
it is not possible to create a server through the prisma cloud, using an existing mysql database.
regardless of specifying the schema or not, the following error is thrown: app[web.1]: exception in thread "main" unable to load prisma config: only postgres connectors are allowed to configure schema and database.
for others please use database.` full log can be found here: phofurl
when running `prisma deploy` i get the following error phofcode
i have tried prisma deploy in this my database name tvd@demo has been created but table user is not created , it will throw error : !
'econnrefused ': request to phofurl failed, reason: connect econnrefused error:: phofcode
firstly when im doing prisma deploy i will get error of : id that is id is reserved keyword, but in mysql it will create default@default database , than i will try with id: uuid!
@unique in my datamodel , and done again prisma deploy, and it will throw error like somethings are already exists.
than i deleted default@default database (i know this is my mistake!
), than again i do prisma deploy and it show me error like this: phofcode
trying to load a `datamodel.prisma` of 46kb in our case throws an `e2big` error
a clear and concise description of what the bug is.
if a type in the datamodel doesn 't have the `createdat` nor `updatedat`, the generated schema exposes both in the [type]orderbyinput.
and when you want to orderby `createdat_asc` for instance, it throws: phofcode
prisma queries are omitting fields i'm trying to query for a user phofcode prisma gives me back a user object but it doesn't have the permissions property on it so it's throwing an error.
`error: cannot return null for non-nullable field user.permissions.` my mutation expects for a user type to be returned `signin(email: string!, password: string!
): user!` and my type looks like the following phofcode the object prisma returns to me looks like this phofcode
i can't upgrade my private hosted server via the prisma console.
i get a success message saying that the upgrade will be scheduled and run in 10 minutes but the upgrade never goes through.
i have been waiting several days.
anyone else have these issues?
trying to upgrade from 1.24 to 1.33.
prisma crashes as soon as there is a table in a schema that includes a postgres jsonb column.
this happens even if the prisma gql spec is not including a definition for the table.
the server throws the following error and the prisma cli is not able to deploy any managed schema updates.
phofcode i understand that prisma does not support jsonb queries, but it should not crash if it find an (prisma) unmanaged table.
prisma server throws sqlsyntaxerrorexception on "create" mutations for types with integer id and (one or more) * relations * to other types * only * .
i'm seeing the following warning in the prisma log, and it repeats almost every minute.
i've tried deploying mysql and postgres on a local machine as well as through prisma cloud ( phofurl with postgres hosted on heroku and i'm seeing the same repeating warning: phofcode
`prisma delete -f` appears to do nothing for remote deployments, even though it appears successful on the command line.
when attempting to run a remote deploy after calling `prisma delete -f` we would expect to see migrations run, however we instead see: phofcode
i am seeing this phofcode on the playground, i see this screenshot at 7 17 10 am phofimage
naming a type `subscription` breaks ts client.
when setting up mysql through the init cli command, it creates a file with schema in the docker-compose file.
however the composed docker container then throws an error saying that "schema" is only usable with postgresql, and "database" should be used for the key instead.
so changing key "schema" to "database" fixed issue for me.
also when trying to connect to docker service with prisma deploy, it will throw error: `no cluster could be found for workspace '* ' and cluster 'default '` the docker-compose.yml file created through cli init command, should have "database" as key instead of "schema" when mysql is selected as database type.
using datamodel 1.1, a new field using @id(strategy: sequence) is successfully deployed to the prisma server, but no column is created, and errors are thrown when creating new objects of affected type.
calling prisma init on existing database generates an error: "typeerror: cannot read property 'type ' of undefined"
i have set up a type with a self-relation (see below), with the aim to create a nested folder structure where the top item has no parent, but you can create sub-folders by providing the parent folder id phofcode
when you create a type, e.g.
`type admin { id: id!
@unique @relation(link: inline) }` with a user type phofcode it only creates a where unique input with only the id field as being unique: phofcode
`@linktable` directive was renamed to `@relationtable`.
prisma cli is still generating `@linktable` when introspecting a database.
cli does not throw error when deploying a field with the decorator `@id(strategy: sequence)` without a `@sequence` decorator attached.
when the elevated database user account does not have permission to create a schema, it cannot establish a connection with an existing database.
but when i provided the root account, i successfully established a connection with the database, but prisma created a schema called prisma.
look like this: image phofimage
i have a data model with the following types: phofcode prisma generates a query for me along with input types, so i can write: phofcode i would expect this to return a list of events that have *at least one* rsvp, where the rsvp has a user with an id matching "abcd" however, when sending this query, we something like: phofcode even though an empty list of rsvps cannot match the requirement that `rsvps_every` has user id equal to "abcd", it is returned with the query.
where can i find documentation for *whereinput and its expected behavior when applied to various queries?
not sure if it 's a bug but also don 't understand why it 's happening.
i 've got prisma connected to my mongodb but when i make any mutations, a new database is being created in mongodb called `default_default` and data is being added there instead of the database i specified when going through the setup here phofurl here is my docker-compose.yml phofcode
prisma export fails as soon as the database fails to give a timely response once.
when the client composes a query on multiple unique fields, prisma generates an or query based on the passed arguments.
this currently results in a single matching node being returned when the passed arguments do not match the actual outcome
i cannot filter parent by `id` in a `where` filter (see `allsubcategories`).
the prisma data models generated by `prisma introspect`are inconsistent across different projects migrated the v1.1 datamodel.
everything went fine at first.
this was for our main project.
we are starting to build smaller projects around it.
and when i tried doing `prisma introspect` in another project i received a different result.
and the introspection is against the exact same configuration as in the main project and against exact same docker container running mysql.
main project: image phofimage side project: image phofimage these two commands are run exactly after each other and generate same result when run multiple times.
the important part is difference in models generated.
it also seems like relations are not caught correctly.
a 1-1 relation will show up as a many to many...
a clear and concise description of what the bug is.
`prisma generate` fails when using a custom endpoint in 2 cases: 1. command `prisma generate --endpoint phofurl is not using the endpoint from the command-line.
response is a successful generation using the endpoint defined in `prisma.yml` : phofcode but expected an error that prisma service at ` phofurl cannot be reached.
also, endpoint values used in generated `index.ts` is still from `prisma.yml` and not one given on command-line.
looking at code for prisma generate command, there is a `if` statement based on whether argument available, but value of argument never used.
when specifying a custom `prisma.yml` with `-p subdir/prisma.yml`, it isn 't respected for the implicit `prisma generate` that was added in #3579
when saving a datetime field using prisma client and mongodb, the field is not saved/returned.
while working on my api, i added the `@unique` directive to a field.
then i ran `prisma deploy` (note that adding or not `@unique` would not resolve the bug).
and now, everytime i try to make a request to my own api (
prisma cli is parsing regular local private urls as cloud workspace urls with the following error if you are logged in.
when you are logged out it is just asking you to login: - logged in image phofimage - logged out image phofimage
prisma supports uuid to be tagged @id in data model v1.1, however, this does not work when the backend database in mysql.
from the docs: the @id directive can be applied to scalar fields of types: id uuid int
we are currently facing the issue with a redeploy error throwing `"post", "field": null, "description": "you are creating a required field but there are already nodes present that would violate that constraint.` eventhough the only existing entry has all those fields filled out.
a clear and concise description of what the bug is.
given the following: phofcode the introspection algorithm will report the default as `{}` which would be an object in js/ts.
prisma docker image shuts down with code 137 and this pr fixes it.
however, i can 't build the server image because of this error: docker run -e "branch=local" -e "commit_sha=local" -e "cluster_version=local" -v -w /root/build -v ~/.ivy2:/root/.ivy2 -v -v sbt "project prisma-local" docker unable to find image locally docker: error response from daemon: pull access denied for repository does not exist or may require 'docker login '.
see 'docker run --help '.
using an enum array with the directive `@scalarlist(strategy: relation)` doesn't provide a way to query based on the content of the array.
i have a database setup w/ some foreign keys.
i run phofcode ; then when i go to deploy, i get foreign key errors on every table have foreign keys on.
prisma can 't filter data by scalalists fields.
when making a query with nested `where` argument i got an empty array with prisma.
i get the error `there is a relation ambiguity during the migration.
please first name the old relation on your schema.
the ambiguity is on a relation between service and trade.
please name relations or change the schema in steps.` i don't even know what previous name was or really have any idea what relation was in my old schema, and i have no way of getting old schema back, because i was just messing around and didn't save it.
but anyway, don't even really care what old name was, because i'm not using that schema or data at all anymore.
so, solution was to delete database.
deleted it with `prisma delete --force`, but when try to launch database again, it still gives me same error.
considering whole database supposed to be deleted, it seems like there shouldn't be an error regarding migrations.
it did not give me an error or anything when deleted database, and i've tried to delete it multiple times, still gives me same error when try launch new schema.
after upgrading to 1.31 and migrating to the new database syntax i can 't delete any nodes.
i tried to create new type, create node and delete it same error.
also i 've tried to clean cache and reload.
i have defined a simple data model containing `@embedded` types like this: phofcode when trying to retrieve the data using the prisma client like `prisma.users()`, only the scalar types and not the embedded types are returned.
a i have a table that has a bigint datatype, and when i run the initial prisma deploy, it errors out
i don't know if this qualifies as a bug, but i asked the question here phofhyperlink , and no one has been able to give me an answer.
i'm getting the error `error: directive unique: couldn't find type unique in any of the schemas.`, just like the user here phofhyperlink , and solution was that you can't use prisma datamodel in your schema.
that directly conflicts with what it says in documentation phofhyperlink .
it seems like this was an intended feature because it's in documentation, but it obviously doesn't work.
it would be really nice not have to redefine everything again my schema.graphql, as it seems that should be able to be done automatically.
i have a psql 11 database; used introspection to generate the prisma datamodel.
when i deploy the model, date types in the model cause an error in the prisma server
when input [json] in datamodel.
the generated prisma-schema.ts does not as expected
1-1 relation unique quering/updating not possible
if you try to deploy a datamodel with a scalarlist, it is always asking for the relation strategy and you are unable to use `embedded` strategy even if explicitly specified.
getting error on prisma generate with datamodel v1.1 i had posted this to forum three days ago phofhyperlink , and it 's still not resolved.
it 's most probably related to empty many-to-many table generation.
i have the following two models: phofcode i want to count the number of blogs that have a specific label.
however, the count returned by the aggregation is always zero.
mutations and queries return empty `@scalarlist` if parent type uses integer `@id`.
i am using the new data model and noticed that ids are incremented even when there are no nodes being created.
there are some options which can only be passed to the mongodb driver via an options object.
(not supported on the uri query string.)
specifically, the ability to specify ca or key/cert files needed for connections to some mongodb instances.
(and important for testing, the ability to turn off ssl certificate checking.)
they are options that correspond mongo cli options below: --sslcafile arg --sslpemkeyfile arg --sslpemkeypassword arg --sslcrlfile arg
this is the first time i 'm using the aggregations api, i believe i am doing everything correctly, yet getting 0 back even though i should expect to see 1. the correct list of nodes is coming back though.
this is my query: phofcode this is the response: phofcode ` clearly `count` should be `1` but coming back as `0`.
not entirely sure if i 'm not using the api correctly or if this a real bug.
note: even when i remove `archived: false` flag, it still returns `0` even though there would be more than 1 node returned in that case.
only experience this issue when querying with an association.
i tried to create a type using the new datamodel v1.1: phofcode <details> <summary>this part is fixed already fixed</summary> note that the id field needs to be called `id`.
if it 's called `value` instead, the generated prisma schema would look like this: phofcode this doesn 't look correct because the id is supposed to be generated automatically in a sequence but "create" mutation is asking for id.
changing id field name form `value` to `id` generates schema as expected.
</details> the generated create mutation looks like this: phofcode however, when trying perform this mutation by using either `prisma-binding` or graphql playground: phofcode => `whoops.
looks like an internal server error.
search your server logs for request id: i 'm using demo servers (us) so i can 't see logs.
seems like a bug but perhaps i 'm doing something wrong.
i made a typo in the `ondelete` parameter to the relation directive: phofcode this led to it not cascading deletes, nor to `prisma deploy` generating an error.
mysql on windows is case-insensitive wrt table names phofhyperlink .
every model is forced to have createdat and updatedat fields, even though they are not defined within the data model.
there should be a possibility to filter for relation based if relation exist or not.
its possible to filter items with non existing relations like this: phofcode but its not possible to invert this filter e.g.
filter only one where relation is set.. that`s really limiting..
invalid json in json field not handled properly
running prisma generate or when prisma finishes deployment and running post-deploy hook it throws an error and not generates prisma client or prisma graphql schema
prisma timeout when starting up with mariadb
`prisma init` workflow with existing mongo yields an incorrect docker file with a field called `schema` but it should be named database.
`prisma init` workflow with mongodb does not introspect.
deploying a prisma service from a different folder via a cli command like `prisma deploy -p ../prisma/prisma.yml -e ../.env` will not load the env-file specified by the -e flag.
mysql does not support uuid but allows us to use that as a type on non id fields but the deployment always rolls back
when `prisma login` was used before it seems like authentication against a self-hosted prisma server is not working.
the authentication token is not send to the server even everything seems to be configured correctly.
when i try to run prisma export locally against my own instance.
my zipped export gets generated correctly.
hovever when i try to export from our stage environment i get the following errors: `enametoolong': spawn enametoolong` some of our data seems to be outputtet into my console and it also seems that i do manage to get some data placed into my .export folder - so it starts out working, but then fails along the way - i cannot see what makes it fail though.
the error dosn't make it any clearer.
i find difficult debug what happens, because dont get any more information from prisma than this.
docker container continuously restarting after `prisma init` using mongodb existing database.
for this model phofcode i want to update pets with all new information in just one sentence how there is no set for embebed types i have to delete all first and then create a new ones (please correct me if i am wrong) then i need to run deletemany and create but my problem is deletemany is execute at the end, deleting de previous creation
the available operations don't execute in the specified order.
i use the go prisma client to determine with an example query like: phofcode everything works correct if the array passed into namein is not empty.
once its empty, it returns all objects.
from my understanding prisma should return 0 objects if the in-query is empty.
if i have a model user and try to fetch one that does not exist, with this method: `user: (where: userwhereuniqueinput) => userpromise` typescript does not warn me that the user might be null: phofcode the generated type should be something like: `user: (where: userwhereuniqueinput) => userpromise | promise<null>`
the init flow for existing mongodb never asks if the database is empty and always tries to introspect.
it is causing the following error: screenshot at 7 29 12 pm phofimage
while using `prisma introspect` on a `mysql` database faced a few problems with the `schema`.
1- a few table rows are duplicated for no reason since the db schema doesn't have them duplicated, thinking that the problem might be related because of the # of relation an specific table has.
2- while executing `prisma deploy` returns a couple errors because db schema is currently using `id` as `int` instead of `id or uuid` type.
3- `boolean` type rows are giving us problems because our db schema uses integers instead of `true|false`.
4- the schema generated in `datamodel.prisma` has a lot `postgres` directive like `@pgtable` and `@pgcolumn`
`prisma init` asks for schema name when working with existing postgres with data but does not print it in the `docker-compose.yml` file.
a clear and concise description of what the bug is.
shortly after running the prisma server it has memory leak / runaway cpu usage.
it allocates up 2gigs or ram and runs at 100% cpu and is completely unresponsive.
currently running prisma server version 1.11.1 in production without issues.
this error happens when attempting to upgrade to latest version 1.29.1, a similar problem also occurred when trying to upgrade to 1.14.2 a while back and kept the current version waiting for a bug fix but situation has not yet improved.
i know there is not a lot of details, so hoping get some clues help track this one down.
phofcode docker-compose.yml phofcode prisma.yml phofcode
an error was thrown while querying a document with json scalar type on mongodb.
> not implemented: "coordinates " : "type " : "point " }
adding a node type to the datamodel breaks the prisma api as it already has a node type.
it also breaks the cli generation.
a clear and concise description of what the bug is.
unable to deploy datamodel for postgres schema due to the error `encountered unknown sql type float8 with column`.
prisma cli is parsing regular local private urls as cloud workspace urls and deploy to any server other than localhost is broken right now with the following error if you are logged in.
when you are logged out it is just asking you to login: phofcode this is regression introduced by the following commit: phofurl
i'm getting an error when i try to follow the getting started phofhyperlink tutorial with my existing postgres database.
deleting a record with a list field of scalar values always returns an empty array even though this should not be the case.
i am unable to deploy prisma for an existing psql database with foreign key relations.
i tried to update prisma version from 1.26 to 1.27 or 1.28. but if i updated it, database connection was refused.
i tried to make a repro environment but oddly i couldn 't repro on docker-compose structure.
that 's only my local k8s structure.
if downgrade prisma version to 1.26 or below, database connection become normal.
so guess some kinda prisma updating has relation this.. could anyone give me any solutions?
- prisma config phofcode - deployment of prisma(k8s) phofcode
when a table has two or more foreign keys referencing the same table, generated datamodel results with duplicate fields and missing `@relation directive`
`npm-run@4.1.2` is a dependence package in prisma-cli-core, and `npm-run@4.1.2` has dependence `sync-exec@0.6.2` which be found.
deploy fails, it attempts to connecto to `postgres` database, even though i have specified an alternative database name `orqidund`.
when installing prisma via homebrew the post-deploy hook `prisma generate` fails because of a missing module.
one of our users seems to have identified an edge case when renaming an enum field and afterwards changing it from accepting multiple values (list) to a non-list.
causing a key not found:` error.
i am using mongodb with prisma.
i have two types `post` and `user` and i just want to model the relationship between the two types so that one `user` can have many `post` and a `post` can only have one `user`.
i create these types and when trying to query auser 's posts get back `null`.
when using the prisma cli to init a project and generate the yml file, the endpoint is missing information.
when the user then runs prisma deploy, an error is thrown: typeerror: cannot read property 'split ' of undefined at at object.parseendpoint at [as cluster] at step object.next fulfilled exiting with code: 1
generated schema/models do not have [relay] connections for relationships between types.
only root level (on `query`) connections are made available.
trying to create a new object with a connection type fails.
when executing prisma deploy it fails with error: `encountered unknown sql type 1111 with column postal_code.
i am following this get started guide phofhyperlink verbatim.
prisma doesn 't run on phofurl after running `docker-compose up -d` running `docker ps` gives me this (
i believe increasing the request timeout in v1.27.1 (22c83ce) breaks heroku deployments.
after upgrading my prisma instance from v1.25 to v1.27 on heroku, i ended up with a non-descriptive `error: graphql error (code: 503)` when running `prisma deploy` on an existing service.
upon checking the dyno logs, i 've discovered an h12 error - "request timeout".
after downgrading to v1.26 deploys worked perfectly.
this doesn 't effect deploying new services - i was able to run `prisma deploy -n` and created new service without an issue.
heroku has a hard limit of 30 seconds phofhyperlink for network requests.
the disconnect property seems no to be working when using the mongo connector.
i have 2 collections, rules and groups, this is my schema const typedefs = ` type rule { id: id!
type rulesgroup { id: id!
status: rulesgroupstatus rules: [rule!]! }
` what i 'm trying to do is, update a rule, removing it from a group and inserting it to another.
here 's how the mutation looks like phofcode the rule is indeed added to the second group, but it 's not removed from the first one.
phofcode returns (where "vehicle" is the node) phofcode
when i try to query a connection type query with version 1.27 and use the 'before ' or 'after ' argument, prisma throws an internal server error.
when downgrading prisma server to 1.26.4 it works correctly.
on execution of `prisma deploy`, the cli responds with `error: token is issued in the future (iat).`
if we cancel prisma init workflow using ctrl+c, a directory is still created, which should not be the case
- command line `prisma deploy` throw an error when using multiple interfaces separated by ampersand but accept syntax with multiple interfaces separated by comma - `prisma generate` is vice versa , accepting ampersand but throw syntax error on comma - i used hooks to call generate after deploy
duplicate variable name for `$where` when querying an array field that references a type.
after successful existing database setup and running `docker-compose up -d`, the logs on the container generated show the following error a couple of times: phofcode
`prisma import --data export.zip` fails to correctly insert list of strings on most entities even though the data is provided in the `.zip` file on all entities.
below you will find a `prisma.zip` which holds the schema / `prisma.yaml` as well as the `export.zip` of project.
prisma cli doesn 't resolve an object which is in a relation with another one.
the prisma server always creating new mongodb database when i deploy my service, it is not using the existing database.
error while simultaneously deleting and updating or creating and updating in the
when trying to deploy prisma to aws ecs + ec2, on setting the env variable `prisma_config`.
the value of the variable looks like this: `port: 4466 sesd-secret-api databases: default: connector: mysql host: port: 3306 user: foobaz password: xxx migrations: true`.
naming a type in the database schema with a starting lowercase letter results in an "internal server error" message from the prisma cli when running `prisma deploy` with a cryptic error in the server logs if any implicit relations exist in the schema.
lack of a clear error message resulted hours of investigation/debugging.
aggregate-count is not working properly when implementing a resolver
i 'm trying to import my data, from .zip export file.
when i updated percona mysql to version 8.0.13, prisma 1.25.4 does not connect to the database.
this problem also occurs in pure mysql 8.0.13.
schemas generated by prisma-generate-schema npm module do not respect opencrud : types from the datamodel do not implement node in the generated model
currently, if you use embedded types with typescript typings, the typings for that embedded type gets generated as `<t= fragmentablearray<s>>() => t`.
if you wanna call this promise it throws an error, cause the embedded type isnt a function.
example datamodel: phofcode generated area interface: phofcode
its currently not possible to use different databases for different stages with the mongoconnector.
i have an issue where i try to create and connect an object (`company`) to its associated `user`, but the actual insert in the db function attempts to insert a blank `store` which is owned by a `company`.
my datamodel.prisma looks like this: phofcode each user can have multiple companies, and each company can have multiple stores.
to simplify querying, i also associate the stores with the user.
this datamodel was created with `prisma intropect`.
the issue is when i try to create a new company (`user.sub` is user 's id): phofcode if try associate user 's id with company, then `createcompany` try 's also create an empty `store`.
this fails, because have contraints on my db which disallow a blank store (`name`).
if however, leave connect property out, then company is created with no issues (except it not associated user - not wanted).
here error recieve in my docker contaier: phofcode
i have a one to many relationship set up for user permissions to users.
when i query the users for their permissions it works fine however when i query user permissions for the users it returns null.
when using the prisma generated graphql schema and go client with graph-gophers, i receive the error message phofcode here is my datamodel.prisma phofcode the go client contains the following for spacewhereinput: phofcode the generated graphql files has following user definition phofcode the error appears when implementing a resolver for the users field, specifically in where input of resolver i was able to resolve issue by changing go client code to following however, since this is generated code, this is not correct way to solve this issue, so i 've elected to not use generated graphql schemas.
is there a reason arrays are not pointers?
cannot use `prisma deploy` to update a remote server.
the error message is: `environment fetcherror: request to phofurl failed, reason: unable to verify the first certificate`
prisma deploy doesn 't recognize a declared interface.
on renaming a type with mysql connector using the `@rename` directive, a table is generated incorrectly in the migrations table.
all method chaining with prisma client now produce a bug
a clear and concise description of what the bug is.
gives an error: `project not found: 'project$stage%7d'`
a second-degree relation onto embedded documents only works if the relation is stored as an array on the object also retaining the embedded document.
querying the related document fails with an exception on graphql `whoops.
looks like an internal server error.
search your server logs for request id: prisma stacktrace tells: key not found: street` see two schemas below.
cannot deploy to prisma cluster hosted in prisma cloud
connection to database error: "no primary found in replicaset or invalid replica set name"
following the tutorial of doc 1.24 on setting up prisma with an existing mongodb on ubuntu 16.04
i am currently following the steps in the documentation here phofhyperlink for setting up prisma with existing database and i was getting an error in when running `prisma deploy`.
so i decided to add the `export debug="*"` and got this in the console phofcode
`prisma generate` will throw an error if there are no other fields than id in the datamodel.
phofcode generating a client from this datamodel will result in an error: phofcode it is mainly caused by phofurl there should be check for nullability there.
prisma cli outputs wrong information when performing migrations with mongodb
with the following datamodel: phofcode why is "sessions" field on type "user" nullable in the resulting prisma api?
phofcode i 've checked multiple cases, this effect always persists in one-to-many relations.
the one-to-many relation field is always nullable, regardless of whether it is marked as nullable or non-nullable in the datamodel.
introspection doesn 't work when using `prisma init` with an existing postgresql db
a clear and concise description of what the bug is.
prisma deploy demo server gives `network error: unexpected token < in json at position 0`
i am seeing this bug again in the (al)most recent version of prisma (1.23.2).
getting an internal server error when attempting to connect a node which already exists.
all the deployments on the prisma cloud and my local docker instances of prisma have stopped working.
when using uuid instead of id, disconnect silently fails to disconnect and remove the relationship between entities.
i believe it 's a feature to silently fail, but it should be able to remove ids which exist.
querying fields with `id_contains`, `id_ends_with`, `id_starts_with`, `id_not_contains`, `id_not_ends_with`, `id_not_starts_with` is not working as expected.
given an id this query returns an empty array.
phofcode it is only happening with id, the rest of the fields are returning the expected results.
not possible to deploy to a prisma server with a dns that contains the string "prisma.sh" (eg.
i have followed the documentation to setup the prisma binding for graphql mongodb for go.
there is a line missing from the generated prisma-client/prisma.go
example sdl : phofcode will produce correct type in prisma.bindings.ts : phofcode but if i set username as unique field then regenerate with `prisma deploy`, i still get same `userwhereuniqueinput ` as above... like if prisma-binding where ignoring any field other than id.
the error `error: the provided database doesn 't contain any collection.
please either provide another database or choose "no" for "does your database contain existing data?
"` will pop out even though i selected `no` as the option
creating two users via this mutation phofhyperlink (that uses this schema phofhyperlink ): phofcode note that in the schema, the `email` field of `user` is unique but in the mutation query, the email fields for two users are unique.
also, this error does not occur if we delete second `createuser`.
prisma throws error when using id in the where clause of a query.
phofcode phofcode the same exact query works with a different unique field such as const posts = ctx.prisma.posts({ where: { owner: { username: "dorothy" } }, }); phofcode
in 1.24.beta-2, mongo connector queries unnecessary fields from mongodb
`@relation` name args value is generated against the shape [a-z][a-za-z0-9]* after prisma introspect.
it shows the error during deploy after introspect.
golang client generates float32 for float type, but graphql.org phofhyperlink defines float as double-precision, so the correct is float64
can 't set to null a nullable field using golang client
a clear and concise description of what the bug is.
in connect field, for example, an "id" field is required in connect.
even the id is invalid, the document (mongodb) is still being created and return a null object.
i also set non-null value for return values.
i used prisma init to create a basic docker-compose file and basic settings.
scripts seem to be out of sync.
when there is a reference column to type uuid is set to null (on purpose), a null pointer exception is throws from prisma
cannot query multiple records with relational fields in the `where` condition
i know this has been reported multiple times but after reading/experimenting quite a bit i can 't get over it.
after doing `prisma deploy` i get the error: `cluster secret in env var does not match for cluster local` here 's my `docker-compose.yml` phofcode and my `.env` file: i tried adding this to `~/.prisma/config.yml` to no avail: phofcode
mapping between prisma json type to postgres json throws an error but when using text type in postgres it works
prisma deploys different datamodel, then specified inside `datamodel.graphql`.
i 've been using the mongodb connector and started with the example of posts and author.
i can 't get author from post(s) `cannot return null for non-nullable type author`
i 've deployed my server to heroku and when visiting the endpoint phofhyperlink the schema does not load.
i typed `prisma playground` into the playground and received the following error: phofcode i am able to access prisma service endpoint and perform queries etc.
also there are no errors popping up in logs on heroku.
more than two consecutive uppercase characters in type name breaks the logic used to create the "auxiliary types".
three days ago i built a new prisma server following the set up on a new database tutorial phofhyperlink .
that was on version 1.21.0. today, going back to update my schema, `prisma deploy` fails with the cli@1.22.0. i 've updated my docker container to version 1.22.0 as well to no avail.
unable to update an `enum` list in prisma client without manually changing it into a `set` object.
whenever i build the project using `yarn tsc`, i get the following error: phofcode
flow type checking always fails with prisma client
when prodiving the env var to the cli, it should use that value and not override it with a value based on the logged in account
have a schema user which has a field addressess.
the field addressess is a list of address[type address] associated with user.
i have created a subscription, whenever new user is created i should be able to get the new user details along with the address and display it.
however i am getting the below error cannot query field 'edges ' on type 'address '.
(line 7, column 9): edges { " note the field addressess in user is of types addressconnection.
therefore relay compiler is not giving any error.
the subscription schema as below: phofcode
the problem is that i cannot disconnect relations when i try to use e.g.
`updatemanyusers` because all values with relations are missing in everything works fine when i use `updateuser` because all values are available for `userupdateinput`.
changing field type from int to float triggers error "you are changing the type of a required field and there are nodes for that type.
consider making the field optional, then set values for all nodes and then making it required."
i have a graphql server using prisma inside the context object.
when i try to use a `connection` query in the playground i receive the following message: `field must have a sub selection`
in the recent alpha/beta releases, a found a bug/different behavior using prisma client.
after creating a document with embed/inline relations, the data from this relation is not being returned.
the bug is described here phofhyperlink .
if we have this datamodel: phofcode and we want to make this query: phofcode then i found out that, prisma client is producing these queries: phofcode and for each user in db: phofcode prisma client 's queries causes that underlaying database (in my case postgres) executes: 1. one query to get all users 2. for each user a separate query to get user 's id 3. for each user a separate query for getting data from relationtable(s).
if we sum all queries then we get the final number of db queries executed equivalent to: `(numofusers * 2) + 1`
when i run a command for generating prisma assets (or prisma client) using `graphql-schema` generator, i don 't get a message about running it in the console.
but for such generators as `javascript-client` and `typescript-client` i get the message about their running (e.g.
`saving prisma client (javascript) at which makes it 's all confusing for me: seems like these 2 generators run perfectly but `graphql-schema` does not since there is no information about it.
golang client does not recognize any field besides `id` for single queries
running prisma import is failing on my data when uploading the lists.
phofcode running `docker-compose logs -f --tail="10" prisma` shows the last activity was a node.
yet when i use mysql workbench i can see that some tables that contain list values have rows.
typescript types generated by prisma-client-lib do not reflect the graphql schema for the argument `data`.
the subscriptions as advertised here ( phofurl do not work.
i 'm trying to create a new service on my new heroku-hosted prisma server.
i 've succesfully created the server, and it displays the playground when accessing it.
however, when trying to create a service on the server, i get the following error: phofcode
post-deploy hooks are failing on windows since 1.20 - these were executing fine on 1.19.3. for example using the following hook for prisma generate fails hooks: post-deploy: - prisma generate fails with: _post-deploy: spawnsync prisma enoent running prisma generate _ however changing 'prisma deploy' to 'prisma.cmd deploy' allows the command to be found and executed.
this workaround was not required for 1.19.3. the same error and workaround also applies for other commands such as the graphql cli etc i.e.
graphql get-schema fails but works when changed to graphql.cmd
with an unmatched relationship in the datamodel the error reported is a syntactical one that doesn 't point to the root of the problem.
i want to get an array (multiple) items from my relation.
go client only generates single return.
when creating a data model type without any scalar fields (ie.
only relation fields), code generation breaks.
traversin back relation fields does not work with the mongo connector.
generation a token for ` phofurl with the following claim phofcode works playground: phofcode returns this phofcode trying this without wildcards in the `target` like this phofcode returns
related to this phofurl in the js based schema generator, the pluralization should match the pluralization strategy implemented by phofurl
i have two projects on demo-eu1 server and `prisma delete project1` removed the wrong service project2: image phofimage
subscriptions not functioning as documented in schema
on mysql all seems to work well, but when i try to delete from a table that contains array elements, i receive following error: phofcode
fluent api of ts client breaks in latest beta
*1.19.1 introduced a breaking change for the updatemany*.
i use the javascript generated client but there is a clash between the mutations defined in the generated client and prisma exposed schema.
prisma console breaks when in smaller browser windows
the go client supports enums in every way for writing queries, including inserting data.
however, it does not return them from the database!
when i try to run ``prisma deploy`` in the folder that has the ``prisma.yml``, an error is shown: > prisma.yml should not have additional properties.
additionalproperty: generate if i remove the ``generate`` property, it works fine.
i can't have big int with current prisma 1.19
i just started a brand new project with graphql-yoga and prisma 0.19. the generated typescript client starts with phofcode which would be fine except that graphqlschema and iresolvers are unused, which causes problems if you 'd like to enable typescript 's `nounusedlocals` check in your own code.
is there some way that we could get the generated libraries to either compile under the strictest possible options, or just generate them with `// @ts-ignore` statements in the code?
when using `docker-compose` to deploy a server (e.g.
apollo server or graphql yoga) talking to prisma server, it is not possible to reference the prisma server container by its name because of string validation in `prisma-binding` module : `throw new error("invalid prisma endpoint provided: " + endpoint);`
i'm receiving the error: ``graphql error: a unique constraint would be violated on user.
details: field name = email`` even though given email address doesnt exist in database.
yes, it's the same problem as this one: unique constraint violation without entry in db phofhyperlink
i 'm having the same issue filed and fixed before here phofhyperlink in the current version of prisma (1.18.1).
when connecting users via the `friendrequest` relation the new connection shows up for both users.
but when adding a connection to `friends` it only appears for one user.
currently, the automatic `prisma generate` workflow for `prisma init` is broken for `prisma init <folder-name>`.
<img width="858" alt="screen shot at 6 24 28 pm" src=" phofurl
when invoking `prisma deploy` the cli starts to poll the `migrationstatus` field in the management schema to wait for the completion of operation.
when deployment fails for some reason, cli waits indefinitely.
when executing a nested mutation from graphql playground, i get it in the log of the docker container: error: null value in column "id_menu" violates not-null constraint
prisma client swallows errors returned for initial subscription requests.
i 'm trying to use the same db with 2 different apps (different prisma endpoints).
if i use the same prisma server for both of them everything works fine.
however, if i try to create a new prisma server for the second app (basically copying the dockerfile from first server, pointing to same db), then `prisma deploy` throws: phofcode note that playground works well, so only problem is management api.
i 'm pretty sure it gets env var with correct value since it 's just a copy of first server.
i found the data of subscription events is not exactly how it's declared on the generated graphql bindings
updatemany and deletemany mutations do not fire subscriptions.
when a relationship is setup with cascade deletion, subscriptions will not be fired if the record which has the relationship on it is deleted.
since #3278 my autocomplete is acting weird.
with the 1.17.1 the code generated on this repo phofhyperlink branch master autocompletes without any issue.
however with the cli installed and the corresponding branch phofhyperlink my autocomplete is broken but server works fine (mutation, queries, etc).
there is currently no way to run raw graphql request using prisma client.
this seems to be a missing feature, and also a problem in the documentation, for which i created a separate issue here phofhyperlink .
`prisma generate` for the `flow` client adds a `documentnode` type without importing it from `'graphql'`
can't connect to postgres database (on google cloud) when `only secured connections are allowed to connect to this instance` is enabled.
if you set your `id` field to be of type `uuid`, the create mutation won 't work.
when installing the latest version of primsa, i get the following error: phofcode this is using the following `package.json` dependencies phofcode
subscription on deleted event fires always despite of filters
i have an issue with paging not working correctly.
i have a datamodel like phofcode
my post-deploy looks like this: phofcode this is what i see in the terminal: screen shot at 16 26 28 phofimage the issue is, that it is always succesful.
for instance `graphql get-schema --project database` was returning an exception, but prisma deploy not breaking on this exception.
but continuing and showing green check marks.
the new prisma client maintains an internal data structure that has the name 'types' phofhyperlink .
it appears as if each of the root query types from prisma is also added to the client as properties.
this can cause naming collisions.
if one were to have a model in their `datamodel.graphql` with the name `type` then prismas root query would have a field on it named `types` phofcode generates a schema with: phofcode the naming collision occurs here phofhyperlink and original `client.types` is overridden.
i 'm attempting to deploy a simple prisma stack to a docker swarm.
it 's essentially the getting started compose example, converted into a stack file for docker swarm on aws.
the prisma service and postgres db are both giving some unusual logs which don 't present themselves with the local compose file: prisma service, cycling, ending with killed.
phofcode postgres service, continually giving errors that prisma already exists: phofcode the db * does * exist, however has no tables in it.
when running `prisma init` using git bash on windows 10 the arrow indicator doesnt move when pressing up or down arrow keys.
also the active selection is not shown in a blue color like is shown when running from command prompt.
aggregation `count` not working as expected: when you try to list an entity using generated query from prisma with pagination (eg.
`skip` + `first` parameters), count returns exactly the `first` parameter or lower number corresponding to the number of remaining items.
when you deploy a datamodel with a field of type `boolean` or `string`, you receive an internal server error, "no value found for \'boolean \'" or "no value found for \'string \'".
stuck on applying changes if entity "access" have field user with type "user".
so it 's stuck on: phofcode
i was paying $45 / month for a hosted prisma server.
lately, performance has been terrible.
i logged back into my account to investigate, and noticed that i was inexplicably no longer on a paid plan.
internal server error when doing "intensive" concurrent mutation error :{"message":"whoops.
looks like an internal server error.
search your server logs for request id: { item1: createitem(data: { name: "usersids 1887 " label: "mylabel " }) { id } }"
`prisma playground` command fails if you use a `.graphqlconfig.yml` file in combination with the `generate` property in the `prisma.yml` file.
i am currently unable to successfully run prisma init on a clean/new mysql database running on my localhost.
initially i thought this might be a duplicate of #2516, but its seems possibly this is different?
when using the prisma cli in the new phofurl container environment, signing in fails with error code 3. this happens because the login flow requires the cli to open a browser window, which is not available in container environment.
to work around issue, you can manually copy login url, but because cli returns an error, it is not longer listening for successful login.
client has a `$fragment` selection api for creating a custom selection set.
however, this is not available for arrays.
as of version `1.17.1` the command `prisma generate` does fail if the `prisma.yml` endpoint holds a template literal such as `${env:core_revision}`, an example config can be found below.
subscription works via mutation queries but not manual sql queries, ex: 'insert into headers () values ();`
go client exists cause panic
use chrome web page translation to read the document click the section, an error occurs
i create type user with enum gender phofcode deploy to demo server and client generation passed successful next i create new user and want receive gender property phofcode but `user.gender` is `undefined`, property `gender` not exists in `user`
(from phofurl [postgres db schema a] --(introspect)--> [prisma datamodel] --(deploy)--> [postgres db schema b] a !== b
for this datamodel phofcode the generated type for a to-one relation should have `userwhereuniqueinput` as the input argument type.
connecting prisma to a local mysql docker container on a different port than `3306` crashes prisma.
when running the command `prisma init --endpoint phofurl as per the docs i get the following error: error: file or directory '/
using a grant with a target: " *" in the management auth jwt throws an "*authentication token is invalid: contained invalid grant \'vector( * ) \' * " error
when i use a relation in a "unique" direction, it looks that the cli cannot generate the prisma client.
when prisma seed is used with an invalid configuration, it fails silently.
prisma server 1.17-beta rejects enum starting with lower case sometimes.
skip and first does not return accurate results from related sub selections.
instead of filtering the results the entire collection is returned.
first, skip do not work.
when filtering the type directly filtering works fine, just not with a nested query.
im seeing the following issue prisma docs 1.17 - getting started part 2 step 5, phofcode
prisma client 1.17 create mutation generates 2 records
when trying to run the application phofcode you get this error message in the terminal: phofcode
can 't `updatemanyxxxx` fields null to post types it only work with basic type
the 'first' modifier is not working correctly in nested (one-to-many) nodes using postgresql.
deploying to a database with `migrations: true`, results in a seamless deployment.
deploying, either to an existing database with the proper tables and `migrations: false`, or to a database with no existing tables and `migrations false` results in errors regarding postgresql array fields which didn 't previously exist.
combining `where.first` + `where.orderby` in create mutation = internal server error looks like #2786 (but this one is now solved)
env var used in endpoint (prisma.yml) breaks generated/index.ts
the order of declaration in the data model changes how the `updateone` input type looks.
if, for a type `a`, the first occurring field referencing `a` is required, the input type `aupdateone` will have no disconnect field.
if first occurring field that references `a` is nullable, `aupdateone` input type will have a disconnect field.
running prisma cli command like "prisma deploy", always return "0" as exit code.
prisma executes bad query for the input below.
the docs for configuring prisma on a kubernetes cluster ( phofurl make the use of a `configmap` to inject configuration to the server.
however, this is really bad since that configuration contains sensitive information like `database.password` and `managementapisecret`.
sensitive information should be managed by a kubernetes `secret`, but the problem is that `secrets` need to be `base64` encoded and that isn't easy to deal with when there are nested values on a `yaml` file.
when a nested node calls multiple arguments, prisma errors.
the text on the error notifications in the playgraound is invisible when using firefox
a database, some array relationships are lost.
(see the example data model at the end).
i 'm not sure if i 'm only getting a partial database export or it 's only performing a partial import or if it 's certain relationships in the data model.
when i begin to type in the search bar at the top of the docs, the docs disappear and display ""an unexpected error has occurred.
i 'm filtering the records based on a multi-depth where clause (it goes down 4/5 levels).
interestingly, it does not throw an error if i provide an id midway down (the 2 queries are described below).
if the relation name is set to the name of an existing automatically-generated relation, prisma will generate a crud schema with incorrect relations types.
prisma can be tricked into creating an empty input type, which cannot be parsed correctly by some tools.
generated schema of collection is missing `required` annotation for items.
i have a type called rsvp in my prisma datamodel.graphql.
after deploying the service, i get the following queries and subscriptions: `rsvp(...)` (query / subscription) `rsvps(...)` `rsvpsconnection(...)`
running `prisma playground` opens the playground in the browser when electron app is installed.
simple hello-world example gives the following error when using the graphql playground: phofcode the following logs are shown in docker-compose: phofcode
using the latest alpha release of the cli, the `prisma init` command writes the wrong version number into `docker-compose.yml`, it writes: 1.7.
looks like an internal server error.
querying nested nodes results in error > error: missing from-clause entry for table
filter "_in" in one to many is not working.
i want to change the scheme with a couple of uuids.
but i had multiple problems with the migration process.
this is a duplicate the question at stackoverflow : link phofhyperlink essentialy, regardless of where i subscribe (the app or prisma api directly) the subscriptions will only fire on the 'delete ' action.
any mutations which update or create have no effect, the subscription just ignores changes.
the subscription will work without any problems but only for delete actions.
since i am in mainland china, i could not access prisma 's servcie unless i use a proxy.
but when i run command `prisma login`, it reports an error
when a type contains a enum list, prisma doesn 't generate the filters for this enum list.
btw, i don 't know exactly if this is a bug or if it is normal behavior.
we've updated our backend from prisma 1.13 to 1.14 and now the data returned has a different format than before, therefore we have to change a lot inside the graphql-yoga resolvers.
when changing an optional field to required, and the field has uppercase letters, it crashes (at least on postgres).
as mentioned in the slack channel my prisma server throws java exceptions when querying multiple relations with a data model derived through `introspect`.
i 've only been able to verify this with postgres, but when i require an enum field type to be non-nullable, i get an error but when i remove the exclamation mark (allowing the field to be null), the error goes away when running `prisma deploy`.
the prisma container exits and provides the following error message phofcode
when adding an implicit backrelational field and changing the relation name at the same time, the deployment will be stuck.
`prisma list` should displays local deployed services
the uuid field type creates columns to store binary uuids with the type `char()`, which is not binary-safe as it depends on the encoding of the connection and database.
i think it would prevent a lot of wasted time and questions if the "connect to server" interface either accepted "naked" urls (without `http(s)` / `www` in front) or specified that it was required.
when viewing a data type in the data browser on prisma cloud, i see
running a query with deeply nested relational filters resutls in the internal server error: "unknown column 'role_alias.id ' in 'in/all/any subquery \'."
after creating a server on prisma cloud using heroku (currently only available option), the server itself is created successfully, however i am unable to deploy to it (more to come): <img width="1118" alt="screen shot at 6 09 57 pm" src=" phofurl at this point, i have my `prisma_endpoint` (the one on heroku) so i go ahead and create another env file: .env.prod phofcode now, when i run `prisma deploy -e .env.prod` get the following: phofcode feel like am missing a step here.
could someone point me in the right direction?
pagination (`after` and `before`) doesn 't work for id field type `uuid`.
issue #2615 states that uuids are supported as ids.
however, the current documentation (1.13) phofhyperlink doesn 't list uuid scalar field types anymore.
when performing an initial deployment of a prisma data model, the cli throws the following error: phofcode
i followed the steps in the prisma docs phofhyperlink on authentication using `secret` and `prisma token`.
once the `token` is generated and sent via the header to server, however, it appears that i have unlimited access to server even if i remove `authorization: bearer __token__` from header, and even if i open an incognito browser tab or use a different browser (im accessing server client-side via `window.fetch`).
whereinput doesn't dispaly id field when using uuid
trying to do phofcode causes prisma to error with: phofcode
deploying a relation to an unknown type throws an internal server error.
when running a "deletemanyx" mutation against a table with a large number of records, an error is returned with a message of > whoops.
looks like an internal server error.
search your server logs for request id: looking at the prisma logs, i found the following: phofcode
when subscribed to `deleted` events, `previousvalues` -> `id` returns the string `cuidgcvalue(...)`.
(`...` represents the actual id)
a clear and concise description of what the bug is.
when `schema: public` option is provided in docker-compose.yml, prisma successfully executes queries on tables in `public` schema of existing postgresql database.
but during mutations, prisma looks for the table in `default$default` schema and then postgresql throws the following error since the table exists in `public` schema and not `default$default` schema.
getting the error: "could not connect to cluster prisma-us1 with host phofurl did you provide the right port?"
this error shows on the console when i run `yarn start`.
my prisma services work for months until jul 29. it started showing the error on jul 29. i tried starting service again on jul 30 and it 's gone.
but, it happens again today morning (jul 31).
i 'm trying to deploy a service where the data model was generated via introspection, the db is hosted on heroku.
here is my docker compose file for the prisma server (was generated by `prisma init` -> `use existing database`): phofcode this is the generated data model: phofcode this is output when trying to deploy service: phofcode here wha db schema `public` looks like: phofimage
ordering by id ascending / descending is not working
if the `prisma introspect` command is run against a schema with a view that has a space in its name, the generated `datamodel.graphql` has a type with space in it.
a very simple subscription in a brand new project initialized with `prisma init` does not fire.
i 'm implementing a following feature using many-to-many self-relation, let 's say x is following y and z when i disconnect x/y, x/z got disconnected to
subscriptions to types containing recursive relationships stopped firing after upgrading to 1.12.0. this works fine under 1.11.1.
i 'm trying to setup clearly separated typings for each of api / database(prisma) sides, so i can pull types for my resolvers later on ... here my `.graphqlconfig.yml` yaml projects: app: schemapath: src/app.schema.graphql includes: ["
currently, my user schema is phofcode i am trying to change it to: phofcode it is lagging on prisma deploy "applying changes."
i 've tried going back to it 's initial state but it is still stalling.
trying to delete a record registered with an uuid return a internal database error
i 've been able to introspect my database and manually tweak my schema and deployment is find however when running queries i get the following error: phofcode
a clear and concise description of what the bug is.
messy log display every 30s seconds.
`[metrics] no prisma cloud secret is set.
metrics collection is disabled.` <img width="803" alt="screen shot at 09 41 17" src=" phofurl
using the first: 1 or last: 1 in a query returns more than 1 result
upon running _prisma deploy_ i get the error > org.postgresql.driver connect > severe: connection error: > fatal: no pg_hba.conf entry for host user "prisma", > database "postgres", ssl off my `docker-compose.yml` phofcode my `prisma.yml` phofcode
while running `prisma deploy` from a database generated via prisma introspection, i get.
can 't introspect database with specified schema
i am getting this error when attempting to run a mutation with the following model: datamodel.graphql phofcode when running this mutation: phofcode i get the following error: phofcode
running `prisma playground --port 1234` opens the playground electron app, if installed.
i have a copy of my mysql db deployed on aws aurora.
when i am doing a query, asking for the first x of a table (where x>max number of lines for this query), the query never ends, therefore it times out.
for example, my mission with id has 236 images linked to it.
by querying the first 235 images, i have the result in less than a second, executed query is following : phofcode which executes on aurora : phofcode
when passing the `headers` via the `yaml` configuration file, none of them are being sent to the webhook.
when using prisma server on heroku (or custom server on aws), some commands including `prisma seed`, `prisma seed` do not work and throw the following error.
deploying a new service with this datamodel is stuck on `applying changes`: phofcode
a clear and concise description of what the bug is.
`prisma deploy -n` currently comments out the `endpoint` property and appends the new endpoint in the now commented out line, which should be adjusted as well.
an export of an older prisma version might contain values for scalar lists that reference a non existent node id.
scenario: export data with `prisma export`, reset prisma with `prisma reset`, import data with `prisma import -- data ...`: data import fails when trying to import nodes with scalar list fields.
import works fine, when scalar list fields are empty.
error: > unzipping 12ms uncaught exception, cleaning up: error: object lacks the following properties: tools validating data
it is currently not possible to deploy a service generated by `prisma init` to the demo cluster.
when a database type is defined with only relation fields, an associated `previousvalues` helper type is created with no fields.
this causes an error during the `graphql get-schema --project database` command.
when prisma.yml does not contain an endpoint.
command `prisma deploy` tried to append the endpoint to `prisma.yml` by asking the user for it.
however, if we do not specify the service and stage, the generated url should have defaults.
when the user has a one-to-many relationship, the server query will report an error.
one user has multiple articles phofcode phofcode throw an error message phofcode the debug logs: phofcode i try to remove the `info` parameter in the resolver, it will return data, but articles field does not have data
i want to connect a local prisma server to a local postgres database with an existing schema (outside of docker).
i use prisma cli version 1.10 but it doesn 't work.
switching a field from `json!` to `json` (so no longer required) in `datamodel.graphql` (and then deploying it to prisma cloud) doesnt appear to work.
a create mutation still requires this field.
with a project locally, set up with a self hosted database after i do `docker-compose up -d` i start getting max connection errors.
inconsistently, could succeed `prisma deploy` but still not working.
server cannot be reached and error message in playground after a successful deploy on a demo server `{ "error": "response not successful: received status code 500" }`
a clear and concise description of what the bug is.
if you define `endpoint`, `service` and `stage` in `prisma.yml`, they will be used and no error is returned.
i'm attempting to upgrade to prisma 1.10. after bumping the version in my docker-compose file, and the cli version, i attempted to run `prisma deploy`, but received an error: phofcode
_a clear and concise description of what the bug is._ i am unable to get a basic one-to-one relationship query working using postgres.
this relationship is using `integer` as the id type and the query built is trying to compare `integer` to `character varying` causing errors when requesting any relationship.
<details> - <i>the docker phofcode </details> <details> - <i>ddl for the database</i></summary> phofcode </details> #### the `datamodel.graphql` phofcode #### the simple query i 'm running phofcode #### the response i was given #### the error ## note:
following this tutorial phofhyperlink for connecting an existing empty postgres db.
`prisma deploy` fails with the following error: `error: variable '$name ' expected value of type 'string! '
reason: expected non-null value, found null.
* `prisma info` with `.graphqlconfig.yaml` does not work.
* `graphql init` creates `.graphqlconfig.yaml` file, and not `.yml`
i am following this guide phofhyperlink verbatim.
i am installing on ubuntu.
this is a fresh vm and has nothing already on it.
so, i am following the guide exactly.
i installed npm and nodejs on the vm.
i am unable to get docker to successfully connect to the database it created and i unable to get prisma deploy.
after running `docker-compose up -d`, i get the following output.
phofcode running `docker ps` gives me this: phofcode running `docker logs` on prisma container gives me this: phofcode running `docker logs` mysql container gives me this: phofcode
error seen while upgrading prima
black is rewriting a long line in a way that changes the type of variable being written by the line of code.
black cannot reformat a file when: - the last line of a function or method body is the `# fmt: on` directive - the `# fmt: on` directive has no indentation (it starts on first character of the line) - there is another global statement or expression following function/method definition.
when these three conditions apply, black errors out with message that "black produced code that is not equivalent to source."
unexpected trailing comma left when wrapping up the list parameter inside a function call.
black is failing to format a python snippet to conform with its own rules; in particular, the default 88 character limit is breached.
in previous versions of black, short argument lists would be wrapped to a single line.
in new versions of black, this is not always the case.
if the argument list starts off as a single line, it 'll remain a single line.
if the argument list starts as multiple lines, it 'll remain multiple lines.
a clear and concise description of what the bug is.
the installation of black via pip fails with this: phofcode
a clear and concise description of what the bug is.
this release needs gcc env to install library (`regex3`?)
under popular docker image which makes complicated.
starting with version 19.10b0, black adds unnecessary parentheses around the left side of an assignment when unpacking tuples with a single item.
this now produces inconsistent, and imo less readable, behavior when compared with unpacking multiple items: phofcode
when black encounters a formfeed character alone on a line, it removes the character.
it would be preferable to leave such a line alone, as it 's useful in text editors to use formfeeds to separate code into pages (eg phofurl
i have installed black in my pycharm project's venv and tried to run it.
at first it gave me these errors: phofcode after i disabled read-only on the directory and all files in it, black is just running forever in it.
i have waited for about 10 minutes but got no result at all.
i am using a tesla k40m, installed pytorch 1.3 with conda, using cuda 10.1
trying to register the following function: phofcode gives the error: > nov 22 assertionerror: self, tensor(b!)
found_inf, tensor inv_scale) -> (tensor(a!
is flagged as jit signature compliant, but does not match the signature self, tensor found_inf, tensor inv_scale) -> (tensor(a!
), tensor) even though the function is correctly declared.
i have also seen this bug with: phofcode i was able to workaround `floor_div` decl by removing annotations, but i shouldn't have to, and there is no workaround for decl.
when convert scriptmodule to onnx we crash and get the following exception: traceback (most recent call last): file line 382, in _export file line 262, in _model_to_graph file line 132, in _optimize_graph graph = operator_export_type) file line 174, in _run_symbolic_function return **kwargs) 619, _run_symbolic_function return op_fn(g, *inputs, **attrs) 124, wrapper return fn(g, *args) 862, batch_norm if len(input_sizes) == 2: typeerror: object of type 'nonetype ' has no len() (occurred when translating batch_norm)
missing header files for build in folders for release version of libtorch.
state tsuppression state error tc1083 tcannot open include file: no such file or error open source file error open source file error open source file error source n utils.h t4 t t error tc1083 tcannot include file: no such or ` probably it 's needed to include files to folders or remove missing includes from files.
when i use funtion as below and change bucket_cap_mb form 20 to 25, the md5 of my grad has change,is there any one can explain about this?
model = model, bucket_cap_mb=20) the md5 of different bucket_cap_mb:
if a linear or conv module is constructed without bias, a subsequent move to another device fails
this bug was referenced here phofurl but it doesn't seem fully resolved.
for example, if you set the batch size >= 12, trace gives a tracer warning indicating precision issues.
i use tensorboardx to `add_graph(model, (dump,))`, but phofcode
i have wrote a customop with torch.autograd.function, but the custom backward will not be called.
`torch.size` is tranfered to`torch.tensor`, values don't equal
when using l-bfgs optimizer with distributed computing (cpu only, `gloo` backend), at the last epoch of the training loop, some ranks report an error regarding connection closed by a peer.
the documentation only says: > right now all parameters have to be on a single device.
this will be improved in the future.
for a simple distributed setup, all processes have exactly the same copy of all parameters.
so i 'm not sure if this meets "all parameters have to be on a single device`.
at first glance, i thought "all parameters on single device" simply means i can not distribute different parameters to different devices.
but now i 'm not so sure what this warning means.
pr phofurl refactored the `affine_grid` code to remove all cudnn dispatch.
this had the side effect of dropping support for `half` / `float16` in the cuda / cudnn case.
the cudnn code supported half, but the native torch implementation does not.
users may see: phofcode because `linspace_cuda` does not include dispatch support for `half` / `float16` ( phofurl the old cudnn routine is still exposed (as so can be used directly with half, but half support is not available via `affine_grid()` routine.
the problem is the result after a convolution layer.
with some kernel sizes like (3, 3), only the first channel have expected values, the other have random values.
i try with pyotrch 1.4.0 which i build and unofficial wheel of pytorch 1.3.0 on raspberry pi 3b and 3b+
i am trying to run a distributed deep learning workload on multiple nodes using gloo.
but unfortunately i receive the error below: phofcode this is a two node environment with two vms.
each of these vms have 16 gb of ram and 8 cores.
build fails with (uninformative) `ninja: build stopped: subcommand failed.`
there's a 150x gap in performance for torchscript ops versus straight python / c++.
looping over 100k numbers takes 2+ seconds instead of 18ms or better.
please see the benchmarks here: phofurl
i use downloaded from site a stable version 1.3.1 of libtorch in debug and release modes and i 'm testing a simple project on mnist data from pytorch site.
when project is executed and the main have to exit after return 0; it does not happens, neigther debug nor release modes.
the program is pendeling and the process have to be killed.
`einsum`, which takes ** incontiguous ** tensor as input, can not back-propagate correct gradient
installed cuda-10.2 in ubuntu-19.10, run simple mnist.py example from pytorch dist.
however, if i install cuda-nvrtc-10-1 and symbolic link library file within cuda-10.2/lib64, then the problem go away.
sudo ln -s why i need cuda-nvrtc-10-1, although i got whole cuda-10-2?
torch fails while trying to `shm_unlink()`.
is there a way to get the `shm_unlink` * errno * ?
attempts to relay exceptions from its child processes.
it fails to do this when the exception type takes multiple required arguments.
cannot register a custom jit operator with this is useful to do create operators like phofcode currently, running this fails the assert at phofurl
for some reason, the built in is giving me different gradients wrt the parameters of the distributions, compared to when i manually implement the kl divergence.
as an example, i took kl divergence of categorical distribution - i haven 't tested with any other distributions yet.
after calling `rpc.init_rpc` and then `rpc.join_rpc`, if the user tries to re-initialize rpc, then they get the following error: phofurl it seems that the `distautogradcontainer` is not destroyed, and thus there is an attempt to initialize it twice.
i am encountering cpu memory leakage issues when training my custom torchscript rnn models in a dataparallel environment.
i am implementing custom rnn cells, using torchscript for speedups.
these models perform great in a single-gpu environment, and torchscript gives me an ~2.0x speedup.
however, when i deploy my models on multiple gpus using dataparallel, i encounter a cpu memory leak.
this leak eventually leads to an overflow that kills the training.
believe that have determined that the issue stems from torch internal rather than from my own code.
a similar issue page phofurl provides the advice that dataparallel leads to cpu leakage when there are cycles in data structures.
wanted to distill whether the issue comes from my own custom rnn layers (which are fairly complex) or if it originates in interaction between torchscript and dataparallel.
to this end, implemented a simple linear layer as both `jit.scriptmodule` and `nn.module`.
this serves as minimal stand-in for more complicated rnn layers to replicate issue am encountering.
ran these linear layers inference mode (just forward pass, no training) as dataparallel on g3.8xlarge aws instance (2 nvidia tesla m60s).
as you will see below, have validated interaction between and dataparallel leads cpu memory leakage at constant rate, independent of model/minibatch size.
although models explored this study are toy models, believe this gets core of am experiencing.
script shared below runs into rref leaks and pickler issues when running the distributedoptimizer
between 2460dced8f and 18bdf97dbb something broke in pytorches internals, as i 'm getting a error when trying to train my c++ implementation of pointnet++.
this results from a permutation from bhwc to bchw and not calling contiguous afterwards.
the forward pass works, but on the backward pass the following error is thrown: phofcode the exact same code works in 2460dced8f flawlessly.
indexing into a pytorch tensor is an order of magnitude slower than numpy.
it is found that remote python exception is not re-thrown when create remote reference to itself
i noticed a regression in the jit tracer in the last 3 days.
i made some test and it seems that it is coming from phofurl (commit
the following short program does not compile.
#include "torch/torch.h" int main() { torch::tensor tensor = torch::ones({2, 2}); tensor.fill_(0); // ok tensor = 0; // gives compile error }
after i 'm done building from source there is a new untracked directory in the pytorch source tree.
unsure of whether or not pytorch mobile ios supports anything more complex than a resnet34, as i cannot get a vanilla resnet50 to work.
i 've gotten resnet34 and below as well as mobilenet to work in ios and call predictions (with the libtorch library doing the c++ bridging).
specifically, in my predictimage function in "torchmodule.mm" in my ios project this line never computes/moves forward (aka the print statement after is never printed...) `- { int outputlabelindex = -1; try { std::cout << " predictimage"; at::tensor tensor = {1, 3, 224, 224}, at::kfloat); std::cout << " predictimagetwo"; guard(false); non_var_type_mode(true); auto outputtensor = std::cout << " received outputtensor"; ` the "received outputtensor" is never printed because _impl.forward does not return anything/finish computing for resnet50.
import torch works for me but does not work for anyone else
when training (on cpu) a simple one-layer cnn (with variable-width batches, as it is standard in text classification), the memory usage increases significantly at each `forward` call, and quickly causes an out of memory.
i 'm trying to use stft on ios device.
phofcode if i call stft, i get this error.
c10::error: false check failed at (_fft_mkl at this leads to this error.
phofurl at_error("fft: aten not compiled with mkl support"); how can i run fft methods on ios device ?
performing a linear transform to a large, higher dimension results in output that do not satisfy `torch.allclose()` when a single row vs. a minibatch, post-transformation row are compared.
if an exception is thrown in `listenloop` (which is likely since it is doing network communication), the process crashes since we have an uncaught exception in std::thread and that in turn calls std::terminate.
i think the kl divergence is summing over the batch dimensions when it shouldn't, at least for the gaussian case here's the transformed distribution function: phofcode here's independent_independent kl phofcode
the exported onnx model cannot be loaded, got the following error: phofcode i find that my code works well with: pytorch==1.3.0+cpu and torchvision==0.4.1+cpu **but it does not work well with: pytorch==1.2.0+cpu and torchvision==0.4.0+cpu**
`prepare` function from the `quantize.py` is responsible for inserting the observers.
it works well when the model already has a qconfig.
however, according to the documentation, `prepare` can take qconfig as an argument, in which case it will insert observers even if model doesn't have qconfig member.
intermediate empty tensors result in exceptions and segfault.
`torch.jit.script` has flow-sensitive typing (allowing `assert`s and `if` statements to dynamically change the types of variables), but this does not work for torchscript class elements or named tuples.
i'm not totally certain if this is a bug or just an oddity i don't understand, but calling python's `print` function on a gpu tensor uses a lot of gpu memory.
that's probably a reasonably low priority bug by itself, but it's also kind of strange one, so i thought i'd raise it in case it's indicative of something else going wrong somewhere.
the look-ahead mask generated for the transformer decoder is flipped allowing initial tokens to use future information and later tokens to get less.
this is due to an error in the function which casts the look-ahead matrix to `float()` too late causing unexpected behavior.
installing nightly builds of `torch` and `torchvision` shows `error: torchvision has requirement but you'll have torch which is incompatible.`.
when serializing our model into torchscript, i need to mix script and tracing: trace a few small module and add them to original model then script the whole model.
i 'm not able to compile the model using script after i added the traced modules.
when i use a numpy.ndarray type boolean index for a tensor, it sometimes goes wrong when the tensor is a relatively small one.
y) result greater than 1.0, and x != y.
292 tensor_str = indent) 293 else: 294 if self.numel() == 0 and not self.is_sparse: runtimeerror: could not run 'aten::empty ' with arguments from the backend.
'aten::empty ' is only available for these backends: [sparsecputensorid, cputensorid, variabletensorid, mkldnncputensorid].
ivalue can't be constructed from one of `int`, `long`, or `long long`.
np.std(4) returns 0 whereas returns nan.
this causes numerical instabilities in certain situations.
convolution module constructors do not check for input argument kernel_size length, neither does forward method check for number of kernel dimensions, which makes it possible to use conv1d as conv2d vice versa and so on, which in turn may lead to confusion in new users.
cublas64_100.dll, cusparse64_100.dll and a few others are missing from but were included in
running quantization tutorial phofhyperlink on windows 10 x64 errors out in ** ** step with the following: **runtimeerror: didn't find engine for operation quantized::conv_prepack noqengine** this issue is similar to 28945 phofhyperlink but happens on windows x64, on pytorch installed via conda.
when i use a data loader with num_workers > 0, each worker crashes trying to get the shared-storage file name.
the code works with num_workers=0 and under pytorch v1.2 in both single and multi-process modes.
building on cuda appears to fail when building binaryopskernel.cu.
there several nearby warnings that suggest isnan() is not supported on the device memory.
well, the code sample best shows what's going on.
i am trying to add one int and one float tensor.
and the result is wrong and even yield different results every time.
we are trying to export a model created in pytorch to onnx.
the model is created with function: phofcode and then, one convolutional block of that model is swapped with a different kind of block, like so: phofcode when we try to export this updated model, like so: phofcode an error occurs - for some reason, pytorch fails to export the model, that otherwise is fully functional.
if the blocks are not swapped, the network is exported successfully.
third party `cpuinfo.h` is missing during compilation of the benchmarking cpp extensions.
i 'm trying to export a small models that only contains a single operation which is bilinear upsampling with corner_aligned = true.
but i 'm getting the following error: `runtimeerror: onnx export failed: couldn 't export operator
when adding (or calling to_dense()) on uncoalesced sparse tensors of dtype int16, values seem to be lost.
`torch.sum(tensor, dim=())` performs a full reduce, while `np.sum(arr, axis=())` performs no reduce.
i get the errors listed below trying to build v1.3.0 on windows, 64-bit with vs2017 in the windows terminal.
i am not quite sure, but i think this error occurs if a tracedmodule is getting scripted.
only present in the latest nightly from today.
it works in 1.3.0. phofcode
*tensor` constructors can accept something like `torch.longtensor([list, tensor])` but not tensor])` or list])`.
**exception message:** > valueerror: only one element tensors can be converted to python scalars
when try load a saveed that been saved by module::save before using method torch::jit::load it, error happened.
`booltensor.eq(1)` seems to be not working properly.
indexed assignment of quantized tensors effectively copies over the `int_repr` of the source tensors.
this makes no sense in terms of values when the scale / zero_point do not match.
scripting functions and classes with initialisation of list, dict, tuple fails, if `import typing` is used instead of `from typing import...`: error "runtimeerror: unknown type constructor typing.list"
when building from master, the error in the title appears.
`initializedcontextids_` field in distengine grows without bound
when running a function that uses a pytorch in an embedded pybind11 interpreter, freeing tensors constructed from numpy deadlocks.
if a function calls `len(s)`, it works differently in scripted and eager modes.
without a type annotation, returning `none` from a `torch.jit.export`-ed function has really weird behavior when `torch.jit.script`-ed.
in ` phofurl phofcode this is supposed to be `replicate`.
max_norm in embedding layer modifies the embedding layer weight in-place which makes it a non-leaf variable.
this leads to issues when doing gradient backpropogation.
**error: runtimeerror: leaf variable has been moved into the graph interior**
i 'm trying to build a pytorch cuda extension ( phofurl inside a docker container, for this i 'm using official dev image but the build fails with an error stating that no nvidia driver has been found, see the traceback at the bottom.
when i try to build it inside a runnig container with `--runtime=nvidia` this builds successfully.
this was not an issue with image.
connectionreseterror when 'pin_memory=true ' for dataloader.
a simple test case is provided.
( i found the issue in a more complex training code with larger dataset.
i made a simple code to pinpoint the problem)
i'm getting the following error trying to run a model on android: phofcode can one not use the embedding layer on android?
built static version of libtorch for sailfish os (linux-based).
for build followed instructions from here #21737 trying minimal example phofhyperlink
after i call the backward method i get the error in the title.
if you set and then create and use a conv2d layer, it 's much slower than if you use my tests found it to be between 10-80x slower.
`torch.tensor()` is very slow when it is passed an h5py dataset.
- addition of different data typed tensors after permute giving incorrect results.
- addition of same data typed tensors is fine - addition of different datatyped tensors was not allowed in pytorch 1.2, so this never happened in 1.2 version.
building cxx object in file included from from from from in function torch::jit::stack pybind11::tuple&): warning: void is deprecated note: in expansion of macro at_check at_check( in file included note: declared here inline void deprecated_at_check() {} ~~~~~~~~~~~~~~~~~~ in file included warning: void is deprecated note: in expansion of macro at_check at_check( file included note: declared here inline void deprecated_at_check() {} ~~~~~~~~~~~~~~~~~~ ninja: build stopped: subcommand failed.
building wheel -- building version cmake -gninja -dbuild_python=true -dbuild_test=true -duse_cuda=true -duse_numpy=true cmake --build .
--target install --config release -- -j 32 traceback (most recent call last): file "setup.py", line 751, in <module> build_deps() file "setup.py", line 310, in build_deps cmake=cmake) file line 59, build_caffe2 cmake.build(my_env) file line 334, build self.run(build_args, my_env) 142, run check_call(command, cwd=self.build_dir, env=env) 311, check_call raise cmd) command '[ 'cmake ', '--build ', '.
', '--target ', 'install ', '--config ', 'release ', '-- ', '-j ', '32 '] ' returned non-zero exit status 1. full output log is here: phofurl thanks!
torch.as_tensor() fails to create named tensors
onnx can 't parse the onnx model converted from pytorch '.pth ' model, and reports following issue: phofcode this is how i convert pytorch model to onnx model.
phofcode in the output log of above conversion i find the gather[axis=0] operations: phofcode and the gather[axis=0] operations come from 239th and 240th line in seg_hrnet.py: phofcode
i am using pytorch 1.3 with quantization feature.
after the model is quantized, you can no longer export it to onnx.
i used the exact same code provided in quantization tutorial to quantize mobilenet2 model but failed to export the quantized model to onnx.
the call to python on line 158 phofhyperlink in cmake/codegen.cmake fails due to an undefined `python_executable` variable.
first of all thank you for this awesome library.
i found one issue, you are maybe interested in: when using a lambda, that references to the object itself in the constructor of a class, the object will not be deleted from gpu memory (ever).
when having something like that: phofcode and you put it on the gpu via `net = net.cuda()` and then recreate net and send it to cuda again, gpu memory usages will be higher every time.
even when you delete object with del and empty cache, it will still be there.
python crashes after repeatedly calling `refine_names` to get named tensors.
error during compilation from source, see stdout/stderr in attachment for details file line 311, in check_call raise cmd) phofhyperlink phofhyperlink
calling cudart::cudaapisetdevice appears to be a very expensive operation.
however, as my system has only a single gpu, it is unnecessary to call it at all.
`nn.avgpool1d` and `nn.avgpool2d` (and presumably others) will raise an error when the input shape is less than the kernel size.
this is a change in behavior from version 1.1 where it would just act like the identity function.
when using `dynamic_axes` the `slice` operator (since opset10) always should use `shape` information instead of fixed constants.
currently fixed sizes are used and the only workaround is to use jit.
exported model does not keep input data type, resulting in this error: > runtimeerror: [onnxruntimeerror] : 1 : general error : load model from /mnt/output/gr/crop.onnx failed:this is an invalid model.
model input (data) does not have type information
tensor.masked_scatter() change elements even the the self and source tensor are of same values
when the forward pass of torch.nn.poissonnllloss does not compute the same value as described in the documentation.
there is a problem happened on my case at libtorch1.1.0 training and directly inference get a normal and correct result, however, training-save and load-inference get a innormal and competely wrong result.
here is my flow path of my code, step 6 outputs are same but step 7 not competely different:
this bug was reported internally ( phofurl appears to be an issue with how we're scripting modules with method and type annotations.
with the master branch or v.1.3, the results of masked_fill func are not correct.
there may be some changes that i don't realize.
because of this issue, my transform example is broken ( phofurl
torch.einsum seems to have inconsistent behavior with half-precision tensors, as illustrated in the snippet below (minimal non-working example): phofcode as we can see in the example above, the results we get in fp16 can be significantly different from the fp32 (all 0.000) but are also inconsistent for same computation as highlighted in comments.
there is problem when use a transpose a boolean tensor.
it seems like that it hasn't been transposed.
attempting to create a sparse tensor from a tensor of indices and values placed on another gpu than `cuda:0` (for instance `cuda:1`) fails with error `device of indices (0) must match device of values (1)`.
placing the values on `cuda:0` while leaving the indices on `cuda:1` works and returns a sparse tensor on `cuda:0`.
the following demo should show the bug: phofcode
problem when installing pytorch 1.4 from source on centos 6.3 building cxx object building cxx object warning: unused parameter ont [-wunused-parameter] **error ** (instnode * node, rablock* target, rablock* cont) noexcept { building cxx object generating building cxx object in function smjit::error uint32_t, const asmjit::baseemitter*, uint32_t, const asmjit::baseinst&, const asmjit::operand_*, uint32_t): warning: unused variable instinfo [-wunused-variable] const instdb::instinfo& instinfo = in function t::tensor at::tensor&, at::dimname, at::tensor&, at::tensor&): **internal compiler error**: in expand_thunk, at cgraphunit.c:1700 }} // namespace at::native 0x7dd826 bool) 0x7df3bb ../../gcc/ipa-icf.c:1133 int) ../../gcc/ipa-icf.c:3232 ../../gcc/ipa-icf.c:2436 ipa_icf_driver ../../gcc/ipa-icf.c:3309 ../../gcc/ipa-icf.c:3356 please submit a full bug report, with preprocessed source if appropriate.
please include the complete backtrace with any bug report.
unexpected behavior of nn.dataparallel by setting model by default to training mode.
when using torch.jit.script with a module that has an attribute of type (where tuple or list is expected), it generates the error "module has no attribute \'{attr_name} \':", which is inaccurate.
even the official docs for cpp extensions phofhyperlink use `gates.data<scalar_t>()` but i get deprecation warning.
it looks like a scripted module that contains and fails with a keyerror.
the affinity of a worker process is reset after `torch.randperm` is called in the worker process.
execution of traced function results in unexpected modification of an argument
using `torch.arange` with an `out=` target tensor object, it will sometimes change the dimensionality of the target tensor.
i 'm creating a (1,n) tensor, and sometimes calling `arange` changes it to a (n+1) vector.
same on cuda or cpu.
i'm getting an error while loading quantized resnet18 on iphone with ios-demo-app/pytorchdemo phofhyperlink .
a module might declare a buffer of unknown size in its init function by using: phofcode the buffer might later contain a valid tensor.
saving this (now non-none) buffer with `state_dict()` works but loading this state dict to a newly instantiated module (where the buffer is currently none) with `load_state_dict()` fails as the is unexpected.
tried to load fb released pre-trained model on instagram on pytorch hub.
it works without passing the 'pretrained' parameter.
but if the parameter is passed it raises error.
i think this will cause inconsistency with loading of other models.
i want a deepcopy of a quantized model.
however, when i am applying copy.deepcopy() to a quantized model, it returns to me "copy from torch.qint8storage to torch.qint8storage isn 't implemented".
corrupted archive of pytorch 1.3.0 with cuda 10.0
loads parameter values by an in-place `copy_` operation on the module parameters.
sometimes the parameter values may be initialized to an expanded tensor, in which case the `copy_` call fails with a catch-all error message, phofcode
`torch.onnx.export` reports issues in exporting models with `torch.rand` and `torch.rand_like`.
right now, `torch.jit.script` does not seem to support tuple unpacking assignments to class variables (e.g.
`self.a, self.b = (1, 2)`).
instead, you have to run something like: phofcode this isn 't a big deal because of the easy workaround, but it is kind of a papercut.
`ncclutils.hpp` does not compile with clang and libc++.
the following line makes a shared pointer of `ncclcomm`, whose destructor may throw exceptions.
phofurl this violates the standard.
> c++14 (n3797) requires: p shall be convertible to t*.
y shall be a complete type.
the expression delete p shall be well formed, shall have well defined behavior, and not throw exceptions.
the issue is similar to the ones reported in phofurl and phofurl changing it to `auto comm = ncclcomm());` makes the code compile.
this is the fix applied to tvm issue ( phofurl but it's still undefined behavior when destructor throws.
it seems that for a specific case of torch.mean its grad_fn is not implemented, which raises an error during the backward pass.
the same case for torch.sum is working though.
not able to create torchscript when copying data between gru to grucell using '.'
it not able to identify `.` operator.
the `div_factor ` parameter determines the initial learning rate via `initial_lr = max_lr/div_factor` in the onecyclelr scheduler.
the default is 25, but this parameter does nothing.
training with nn.dataparallel in v1.1(v1.2 or v1.3) is much slower than v1.0.1.
such as run_squad.py in transformers library as its readme phofurl phofhyperlink
i tested with efficientnet-b0, b3, which were trained around one week ago with promising results with pytorch 1.2, cuda 10.0. after i upgraded pytorch from 1.2 to 1.3, cuda 10.0 to 10.1, the inferencing using the exact model and weights gave different results.
i am not sure is it expected or a bug in 1.3.
there is some memory usage shown in the nvidia-smi but not in torch.cuda when torch starts to use cuda.
the amount of this usage differs on different machines.
memory consumption increases when running inference with torch script module.
when type-promoting while assigning values using a list index, e.g.
`a[:, [i]] = b`, where `a` and `b` are of different `dtype`, the assignment produces incorrect values.
`categorical` refuses to sample from logit/probability tensor which has a 0-sized dimension if it is on gpu but does not refuse that when the tensor is on cpu (returning, as expected, a 0-sized sample tensor).
cuda.model() take too much time to load
when using pytorch1.3 c++ distribution in visual studio 2017 and follow the tutorial of loading a torchscript model from c++ described here phofurl it all works fine as long as the model and the tensor data stays on the cpu, but as soon as i try to move model to gpu (cuda) via .to(at::kcuda) i'll get a crash when using debug version of libraries.
and i'll get a crash later in release version in .forward method
when sending cuda tensors via queue between processes, then memory of consumer process grows infinitely.
my backward passes are roughly 300 times slower than my forward passes when using `nn.conv2d` layers.
for example, a forward pass using just a convolutional layer takes 0.003 seconds, while the backward pass takes more than one second.
since 1.3 the torch.save function throws a userwarning when trying to save a nn.module.
it claims that it cannot find the source code of the module.
currently quantized lstm supports only non-packed sequence, we should fix it.
the are used in my model, when i convert to onnx with 'torch.onnx.export ' the error is phofcode when i use 'torch.where ' to replace the error is phofcode when i use 'torch.nonzero ' to replace the error is phofcode but, i see 'torch.nonzero ' and 'torch.where ' are support in official documentaments phofhyperlink
all eigenvalues of the tensor below is positive but we still get a cholesky error: a = tensor([[ [ [ [ [
/ enhancement in distributed training, if `rpc.join_rpc()` is called when the locally created rrefs are not garbage collected, this can result in leakage errors.
see the example script below to reproduce.
pytorch appears to have an issue with threads that causes it to not properly warm up models if executed by different threads in succession.
this is why when using multi-instances of the model on the same gpu, it does not provide a speedup and in some cases is even slower than a single instance.
when specifying msnpu for `torch.device` it throws a runtimeerror inside the c library instead of catching it and raising it as a python error.
named tensors are currently excluded from the type hints test: phofurl at a high level, the type hints test (1) pulls all named tensor documentation examples and (2) runs mypy on them.
those currently fail for me locally.
`torch.hub` treats tag or branch names as file paths; if the tag or branch has a path separator (e.g.
"/" on linux) in it e.g.
branch `ssues/4` as in then torch hub integration fails e.g.
hi all i 'm trying to build caffe2 on pytorch from binaries, have used python 2.7 with vs 2019 and cuda 10.1. cmake donwloaded manually and also updated via conda as read from other users posting my issue.
build_shared_lib=off per instructions in build_windows.bat, get error : phofcode
my model (for object detection) uses a function which computes padding to trim excess tensor size after pooling with ceil_mode then upsampling gives a size which is off by 1. however pytorch onnx exporter complains that this is a dynamic operation and can 't export the model.
trying to import `iterabledataset` in creates an error in pycharm.
look at the following picture: phofimage it says that `cannot find reference in dataset.pyi`, where in `dataset.pyi`, we can see that: phofimage it's obviously that there is no `iterabledataset` but only its super class `dataset` exists.
i believe it should be added.
trying to install the stable release following instructions from phofurl results in the message `error: no matching distribution found for torch===1.3.0`.
trying to install the preview release results in a python error.
the difference in first decimal place for desktop python code vs ios-demo-app/helloworld phofhyperlink on emulator
moving tensors to cuda devices is super slow when using pytorch 1.3 and cuda 10.1. the issue does not occur when using pytorch 1.3 and cuda 10.0.
test_big_tensor_repr in test_namedtensor.py seems to required the default tensor dtype to be set to work properly.
when this setting is removed the string is not formatted as expected.
on windows, using conda, running "conda install pytorch torchvision cudatoolkit=10.1 -c pytorch" gives you pytorch 1.0.0 build for cuda 9.0
i am trying to run the captum cifar10 example link phofhyperlink and i want to test it on gpu so i modified a line `net = net().cuda()` to load the model into the gpu (i am having a single gpu rtx 2080ti).
however i got this error: phofcode at the moment, am using nvidia driver version 410. have tried to upgrade nvidia gpu driver version 435 and don't see that error anymore but code got stuck trying load model into gpu.
i run this code on colab phofhyperlink running torch.onnx.export gives this error.
> tracerwarning: converting a tensor to a python boolean might cause the trace to be incorrect.
we can 't record the data flow of python values, so this value will be treated as a constant in the future.
this means that the trace might not generalize to other inputs!
> if ssh != up_out.shape[-2:]: > userwarning: onnx export failed on aten operator mv because does not exist > .format(op_name, opset_version, op_name)) keyerror traceback (most recent call last) in <module>() 1 dummy_input = torch.randn(1, 3, 224, 224) 2 ----> 3 dummy_input, "colorizer.onnx") 7 frames in domain, version) 89 warnings.warn("onnx export failed.
the onnx domain and/or version are none.")
90 global _registry ---> 91 return _registry[(domain, version)][opname] keyerror: 'mv '
when i am using onnx export with dynamic axis i'll always get a warning from inside utils.py in torch/onnx saying that the input or output name can not be found which is not true.
after having inspected the code itself it is clear that adding them to the valid_name set is simply wrong as it is adding an expression instead of the execution of expression into set.
multi-gpu gathering is much slower than scattering
upon `import torch`, i get illegal instruction 4. this issue appears to have arisen sometime after 1.2 was released, but it was hard to nail down because of the issue resolved in #27583. for the same reason, i haven't been able to track it to a particular pr.
compiling with xcode 9.4.1, cuda 10, cudnn 7.6.4, python 3.6.
the nn.multiheadattention constructor phofhyperlink allows using _key_ and/or _value_ dimensionalities which are different from `embed_dim`, using the `kdim` and `vdim` positional arguments.
however, when setting either `kdim` or `vdim` to a non-`none` value, this assertion in phofhyperlink unnecessarily blocks execution.
phofcode fails with error phofcode the git version is phofcode
if you have an index tensor whose shape does not match the other tensor's shape but is broadcast-compatible, the forward pass of `torch.scatter_add()` will succeed but the backward pass will throw a runtimeerror saying that the shapes do not match exactly on non-indexed dimension.
when i try to use pytorch/caffe2 as backend to run onnx model, i found the result for conv layer with "same_upper" padding is wrong.
the output shape is not correct as expected.
sometimes, pytorch does not free memory after a cuda out of memory exception.
have a warning message when i used amp to train a model with fp16.
the special large batch / alphabet handling, although can provide up to 2.5x speedup sometimes, it comes at the cost of up to 1.8x more memory.
for large targets, this can be a significant amount of increased memory usage (in the order of multiple gbs).
i think if the memory consumption can't be put down, then this should be optional, many users with tight memory constraints would prefer a slower implementation to a memory hungry one
if a function is assigned as a module attribute, it does not get picked up in recursive compilation.
this may also hold true for classes.
a pytorch model with weights imported from a tensorflow model cannot be saved as an .onnx.
can not update a `moduledict` with another `moduledict`.
**update: `parameterdict` has similiar issue, fixed in the latest pr.
cpu usage tops at 100% when running models on macos
the installation scripts aren 't adding the magma path to the dylib.
this is at least as far back as 1.1, and exists in the current master.
it 's easily fixable post-install with `install_name_tool -add_rpath /usr/local/magma/lib /path/to/libtorch.dylib` (actually in 1.1 its the `caffe_gpu` dylib), but of course this should be set properly by installer.
`tensor.record_stream()` on a view tensor which has shifted storage offset finishes silently.
but actually, the stream is not recorded for the view tensor.
when trying to build from source on os x, following the directions in the readme phofhyperlink , i was getting the error: phofcode this seems to have been reported elsewhere as well: phofurl simply adding the line `#include <stdexcept>` to was sufficient to build pytorch successfully.
i don 't presume know ins-and-outs here... but is there any reason not add that include there?
i have a simple 2-layer nn (fc-relu-fc) that takes a large number of features (30,754).
it throws a value error `valueerror: input contains nan, infinity or a value too large for dtype( 'float64 ').`, and upon inspection, i noticed that the matrix multiplication by the first layer results in all `nan`.
hello, `torch.cdist` raises a cuda error when trying to backward if the batch is too large (but still fit in vram).
is it a conscious decision to exclude from the list `torch_python_srcs` for which we specify `list(append use_nccl)` in phofurl this results in the file being compiled without `use_nccl` defined, even if the build is with nccl enabled.
on the other hand, i do see in list.
conv2d fails with certain tensor sizes on quadro rtx 8000 when running with cudnn.benchmark=true.
the jit tracer doesn 't seem to work on arm 32 bit.
when we perform a cuda copy from device to device, i find pytorch only block current stream on dst device before copy execution.
why don't we wait for all streams on dst device to ensure no one touches the dst tensor?
the dst tensor might be written or read on other streams not current stream on device, when copy execution?
when building pytorch from source on latest version of macos (10.14.6), i get an error (full error message and output of `collect_env.py` below).
batched magma calls illegally read cuda memory.
these illegal reads are often "silent" and harmless.
if, however, they access unallocated device memory they will cause the program 's future cuda calls to fail.
some specific situations, such as batch_size = 32, in/out_channels = 128, h = 1, w = 128 and kernel_size 7, memory usage is too large.
if kernel_size 5, memory usage is a few mb; but if kernel_size 7, memory usage can reach 10gb!
cpu usage is not increasing by increasing the number of threads when inferring with cpu only libtorch in one process and multiple threads.
i get compilation failures, starting with onnx.
the errors appear to relate to protobuf headers.
the errors began when i upgraded xcode to 10.1, which seems to be required for cuda 10.1. the errors did not occur with xcode 10.0 and cuda 10.
(however the resulting executable was unable successfully perform any cuda operations.)
convert to onnx and then use caffe2 to run inference, there are errors when there is fpn structure in the model.
the model was scripted in eval mode and then saved with torch.jit.save.
torch.jit.load loads the model in training mode.
this is a problem, because in training mode dropouts are enabled, and also batchnorm needs to be adjusted.
we expected torch.jit.load to load the model in the mode it was saved in.
==58309== 3,120 (1,800 direct, 1,320 indirect) bytes in 15 blocks are definitely lost in loss record 14,673 of 15,041 ==58309== at 0x4c2a4c3: operator new(unsigned long) ==58309== by unsigned long, custream_st*) (in ==58309== by long) const (in by 0xc0c5de5: thcstorage_resize (in by 0x9a51eab: c10::arrayref<long>, c10::tensoroptions const&) (in 0xbf9c018: c10::arrayref<long>, c10::tensoroptions const&) 0xa148ca6: at::tensor const&, at::tensor const&, bool) const&, at::tensor const&, c10::scalar) 0xbf9d0f0: at::tensor c10::scalar) c10::scalar)
`torch.bernoulli()` randomly returns "1" for 0 inputs, even if the probability of drawing "1" is 0. this bug occurs only on cpu.
on a multi-gpu environment, it is common to set to select one gpu.
however i have found that importing leads to an unexpected behavior in this context.
i have two titan xp gpus on an ubuntu 16.04.5 server.
setting = '1 '` had all memory allocations and computations happen precisely on the second titan gpu, until i integrated tensorboard into my code today.
now with the same code, memory allocation and computation happens on the first titan gpu.
below are the screenshots i took.
the first titan gpu is running something, which allocates 8742mb is gpu memory.
the second gpu has 10mb allocated by default (i have no idea why).
refer to reproduction steps below.
(screenshot 1) <img width="1440" alt=" 3 58 17" src=" phofurl (screenshot 2) <img width="1440" alt=" 3 58 55" src=" phofurl
assigning a cuda tensor to a cpu tensor indexed by a boolean index results in crash (jupyter kernel, unit test).
compiling master with option is failing, commit
215 return func(*args, **kwargs) 216 except exception: 217 op_id = op_id_fetcher() runtimeerror: [enforce fail at pow_op.h:100] a.sizes() == b.sizes().
[1, 2, 768] vs [].
dimension mismatch - did you forget to set broadcast=1?
error from operator: input: "188" input: "189" output: "190" name: "" type: "pow" device_option { device_type: 0 device_id: 0 }frame #0: const*, int, char const*, > const&, void const*) + 191 in libc10.dylib) frame #1: bool caffe2::cpucontext, caffe2::eigenpowfunctor, + 5339 in libtorch.dylib) frame #2: + 122 (0xb350fca2a in libtorch.dylib) frame #3: caffe2::simplenet::run() + 464 in libtorch.dylib) frame #4: > const&) 86 libtorch.dylib) #5: void bool, > const&, int, bool, pybind11::name, pybind11::scope, bool > const&, int, bool), pybind11::name const&, pybind11::scope pybind11::sibling 207 (0xb8e78b2df #6: _object*, _object*) 3324 <omitting python frames>
build_test=off does not work, afterwards `import torch` will error with undefined symbol
an `nn.embedding` object with `max_norm` set to `true` causes a runtimeerror that is hard to track.
i installed pybind11 v2.3.0 systemwide (for fasttext).
pytorch build system detects it, use it but then build fails.
hi, always throws a warning when using it with two tensors of different shapes.
there are legitimate reasons for wanting to use differently shaped tensor and taking advantage of the standard broadcasting behavior of pytorch, so there needs to be a way to disable that warning.
trying to compile pytorch for android, calling for that.
afterwards when trying to use the libraries (torch, c10 etc) via the header `torch/script.h` inside an app i'm getting an error: fatal error: 'aten/functions.h' file not found and indeed, using `find` to search for `functions.h` only results in: remember this is * after * calling (so i would have hoped to find it somewhere under it is requested because `torch/script.h` calls calls which calls `aten/aten.h` which has a line `#include <aten/functions.h>`.
when i define a custom that call cudnn is not called.
tcpstore has a member variable `timeout_` which has a default value and is configurable by the user, but we don't pass this in when calling `tcputil::connect` to connect to the daemon.
see the callsite ( phofurl this means that we don't use the right timeout when trying to connect.
running the c10d test with a debug python 3.6 build leads to the following crash: phofcode the extra checks of the debug build seem to find a problem with the way gil is handled in c10d.
i was getting this error > runtimeerror: method run failed due to: [onnxruntimeerror] : 1 : general error : void int64_t) axis == 1 | | axis == largest was false.
attempting to broadcast an axis by a dimension other than 1.
0 by 6 an could not figure out where `6` was coming from.
`6` is `shape[0]` of an intermediate tensor when `torch.onnx.export` was called, but it is dynamic.
`scatter_add` creates a constant with a fixed size: phofcode
description: on a server running red hat enterprise linux (rhel) workstaion release 6.4 (santiago), i used conda 4.5.12 to install pytorch using the following command: conda install pytorch torchvision cudatoolkit=10.0 -c pytorch the python version installed is 3.7.4. when i open a python interpreter, i try to import pytorch via the command: import however, i get the following error: >>> import torch traceback (most recent call last): file "<stdin>", line 1, in <module> file line 81, in <module> from torch._c import * importerror: /lib64/libc.so.6: version `glibc_2.14 ' not found (required by
there is an issue when you want to instantiate packedsequence and then export that model to onnx.
it gives the following error: `onnx export failed: cannot export individual pack_padded_sequence or pad_packed_sequence; these operations must occur in pairs.`
i have already asked questions in the forum, the link is as follows, phofurl i happened in the same program, using the same model, switching between gpu and cpu, and results were different.
my libtorch version is libtorch1.2.0_gpu.
failed to run 'bash --use-nnpack --use-qnnpack caffe2 '
the phofcode will be stuck or deadlock in the multiprocess if the main process did the phofcode before the child-process start().
please see code below to reproduce bug.
if reducing size of dummy_im to size (3,3), it 's ok. therefore, it might be a shared memory problem.
the bug appears in following environments: pytorch 1.1.0+ python version:3.7.4 created by conda pytorch 1.2.0+ python version:3.7.4 created by conda pytorch 1.2.0+ python version:3.6.8 created by conda pytorch 1.2.0+ python version:3.5.2 in docker but it 's ok in following environments: 1.1.0+ version:3.7.3 created by conda 1.2.0+ version:3.7.3
if annotation is accessed through annotations.py, then an exception is raised.
`annotations.py` pathway is used in a lot of script code and should work with named tuples.
- i can import pytorch properly screen shot at 21 37 05 phofimage - after import other library (ngtpy, flair, or other), it raised segfault core dump screen shot at 21 37 57 phofimage - if i swap the import (ngtpy first), it will raised `free(): invalid pointer`.
screen shot at 21 39 22 phofimage i did not know what happened.
i use ngt ( phofurl
in the rref protocol rfc, #23110, there is an implicit requirement that the rpc component (now checked-in as rpcagent) needs to support nested rpc calls, meaning that a rpc call could initiate another rpc call before it returns.
as a result, in the work queue of the threadpool, a work in front could depends on work in back.
@pietern suggested that > there should be some kind of detector for this condition, otherwise people will spend time debugging hangs for wrong reasons.
i see 2 ways forward: 1) a stack depth counter tacked onto every call (easy, throw error if stack depth > some threshold that is <= number of threads in agent), 2) disallow nested calls and make everything async first.
but depth does not matter much.
bunch of 2-level nested calls work queue could also deplete all threads.
for example, 1 ' is inner call an outer 1, 2 ' inner an outer 2, 3 ' inner an outer 3, 3 ' inner outer 3, | taken by worker threads | queued works | | {1, 2, 3, 4,} [1 ', 2 ', 3 ', 4 '] this way, it takes up 8 slots threadpool queue, but 4 threads are available.
the performance of multiplication of two matrices is different between window and linux, when the matrices shape is small (1000, 4), i run the code in window is more slower x3 than linux, and when i change the matrices to large 4),i run the code in window is same as in linux.
when i run resnet50 in torchvision using a small shape input and large shape input, i can get same problem
backward passes generate nonzero gradients for the embedding vector at the `padding_idx` index.
only occurs on the gpu, and didn't occur as of version 1.0.1.post2.
instantiation a `concatdataset` with a generator fails, because `len()` is not available in a generator.
after cloning `git describe --tags` shows version 1.0 instead of 1.2. this impacts packaging from git source.
compilation stack incorrect when recursively compiling `nn.sequential`:
should be able to compare boolean to 0,1 and exporter maybe should then use fale,true as constants.
but comparing bool to 0 results in error phofhyperlink
gpu memory can 't be released when using a try-except statement for cuda out of memory.
phofcode should be exported as float32 but is exported as float64, which throws off this error in ort: > runtimeerror: [onnxruntimeerror] : 1 : general error : load model from output/gr/logo/logo.onnx failed:type error: type parameter (t) bound to different types (tensor(float) and tensor(double) in node (rand_node_name_330).
i have a problem when loading saved checkpoint for pytorch model in seperate thread.
cpu memory keeps increasing and is never released.
multi-threading version of script increases ram usage with each iteration and ends with 978 resv memory (htop output).
single-threading version holds with 374 resv memory (htop output).
when i randomly initialize model (without state_dict loading) both versions use the same (smaller) amount of memory.
to preface, this started as a post on the forum phofhyperlink .
however, i now think it's a bug or unexpected behavior and merits a discussion here.
my problem is straightforward: i have a gradient of sum that turns out 0 while i think it shouldnt be, and it doesnt match the sum of the gradients separately.
during training the process dies with the following error: phofcode
when computing the forward pass of convtranspose2d with many input and output channels, the memory used by pytorch with a v100 skyrocket.
boolean indexing is not supported in onnx and the exported models are invalid phofhyperlink , as suggested by onnx instead of gather use where to export to onnx phofhyperlink
segmentation fault when importing torch with pikepdf.
compiling libtorch without fbgemm causes a compile error in rnn.
> error: packedlinearweight was not declared in this scope the struct exists in workaround was to #ifdef certain sections of code.
if one of the submodules is none, torchscript doesn't recognize it as an attribute, unless explicitly specified in `__constants__` lists.
obviously, if it's just a plain attribute, it might be necessary to additionally annotate it.
but it doesn't work even if explicit `add_module` call is made.
a recent pr (#24506) added an incidental "sccache --show-stats" command in the pytorch jenkins build script.
fine, but this command isn 't universally present and this new stat command can cause the whole build to unnecessarily fail, for example on a recent ppc64le platform build.
cannot use pytorch built with tbb and multiple dataloader instance with pin_memory=true, the first instance of dataloader is raising a tbb warning and the second one will make the program cras
please set a random name to all the nodes, for debugging, when opening in netron
when training a particular model (see below) on cpu, a segfault is thrown when phofcode is called.
built-in `max` in python doesn't work with lists (or tuples) of numbers (both `int` and `float`).
i get a discrepancy between the values of the losses obtained by the torch.
the docker build fails to build torchvision and thus fails to complete
cpp extension ompilation with lang set to a utf-8 encoding will cause an ascii decoding error in python 2.7 phofcode probably the subprocess should set lc_all=c
incorrect label data on reading mnist lmdb with image_input operator.
i see the same behavior with both c++ and python interface.
mnist db read works as expected if i use tensorprotosdbinput operator.
cudnn implementation of ctcloss does not handle gradients from subsequent operations.
core dump when dividing the tensor with a float value obtain from time.time().
`floating point exception (core dumped)`
when i run my benchmark code with `channel_count = 64` on both tensorflow and pytorch, the pytorch version shows ~2x slower speed than tensorflow version.
but when i set `channel_count = 256`, tensorflow and pytorch perform similar speed.
tested on cpu(ryzen 3700x), tesla k80(up to 20x slower), tesla t4(~2x slower), rtx 2070 super.
interpolate with bilinear results in phofcode
the `connect` function in c10d (used by the tcp store) may end up retrying infinitely if in every connection attempt it gets either a econnrefused or econnreset.
i am getting the following error when i am trying to profile my pytorch code using `nv-nsight-cu-cli` command.
the * in * operator is bond to dict when i tried to use it on list or tuple typle.
i can bypass this with a for loop.
but i think this one still should be reported.
i compile pytorch from source,and meet the error : phofcode i fond it might be the memory limit ,so i set c flag -mcmodel=medium,however i meet error again: phofcode after google i found it may be with medium model some register are used in x64,so what should do?more specification about error before and after setting mcmodel=medium are in the attached txt,please help me,thank you!
the same os and hardware run pytorch 1.1.0 fairly well, but encounter this bug using pytorch 1.2.0. binary pytorch packages for mac os with cuda support are available at: phofurl
when using `torch::jit::load` to load the same model twice one time, i find a error: phofcode
according to phofurl the manylinux versions don't exist for the different python versions.
when calling torch.jit.script() on code using torch.finfo, a runtime error is generated with: `unknown builtin op: aten::finfo.`
torch.rfft does not work with cpu
fasterrcnn and maskrcnn doesn 't work with dataparallel or distributeddataparallel
after successful installation of pytorch and torchvision, importing torchvision produces the following error: importerror: dll load failed: the specified module could not be found.
according to the description for the torch::jit::pickle api, the parameter tensor_table is optional.
if not provided, the tensors are expected to be stored in same byte stream as pickle data.
see phofurl however, if we only pass ivalue without an empty tensor_table.
the program will throw exception: phofcode
closely following build instructions from the readme yields build failures on macos.
illegal instruction (core dumped) when using conv2d using this as input phofhyperlink .
pytorch c++ api cannot call operator() on torch::nn::sequential.
phofcode the error is "no viable conversion from to function return type torch::tensor"
when i use torch.onnx.export , i met opset support problem: phofcode
`len` does not work for lists.
it seems we can create lists but cannot use `len`
please support for-loop with `range`
i have a `tensor[int]` passed to `torch.jit.script` when i do
running tests with `-pt` option for `test_c10d.py` allows failing tests to pass.
i tried to reproduce this in some other test files, including `test_distributed.py` and it doesn 't seem to be an issue there.
embedding bag does not work with dynamic axes with onnx loaded in caffe2 backend on the nightly version of torch.
related to #25469 (with onnx runtime )
the jit can't pass following code when i tried to passing another instance with same class type.
using pytorch 1.2 stable on windows, a simple torch::cat of two gpu tensors generates a c++ memory exception.
with cpu tensors, no problem happens.
in a `scriptmodule`, modifying a tensor and returning it as part of a dictionary undoes the modification.
for some reason, i want to divide all training processes into several subset, and do communication in each of them.
as the division may change during traing, after some research, i want to use dist.new_group().
howerver, i keep getting error like connectionrefused or just stuck.
when loading a it seems it is never possible to use the same module in different threads at the same time.
workarounds i have tried: `model.to(torch::kcuda, deviceindex);` this has to be called inside the thread where forward is used otherwise i get an error about model being on the wrong device.
if i call it in right thread, i get a cuda internal error.
despite apparently doing a deep copy, it does not like running at same time as original model.
`auto newmodel = {torch::kcuda, deviceindex});` this works perfectly fine.
can run both models at time.
when trying to use `torch.fft` or any other fft function (`torch.rfft` and inverses), the user is faced with: phofcode
a `torch.nn.module` with a `parameterlist` as a member cannot be
if you try to script a module with an unsupported unary op (in this case, `invert` applied to a tensor like `~x`), `build_unaryop()` tries to use `len(op_token)` before checking if the token is none.
instead of printing the actual error message, it then fails with a valueerror: phofcode if i add a check for none and use 0 instead of `len(op_token)` in that case, i get the real error which says that invert is not supported unsupported unary operator: invert` followup question: is that expected?
if i replace `~` with `th.bitwise_not()` then it works just fine.
in python2 input to `@torch.jit.script` cannot be `tuple[tensor]` but can be `list[tensor]`.
since this is python2 i use mypy-style type-hinting.
libtorch(c++) adam and rmsprop optimizer memory leaks in cuda
copying a lstm's state dict to another process via a torch queue will hang when the source process tries to dispose of the underlying tensors.
when i send a series of inputs of a different max_length to jit, it allocates ~200 megabytes and never frees it.
valgrind does not catch the leak, but it's there.
phofhyperlink this is cpu forward pass only.
when using `torch.bmm` to multiply gpu matrices in fp16 with a batch size > 65535, the results are only correct for the first 65535 batch entries, after that is garbage.
for some particular data, `torch.load()` can not properly load a file dumped by `torch.save()`.
root cause: the file was mistakenly identified as a zip file by `zipfile.is_zipfile()` at line 557 of due to the collision of magic number.
numpy arrays of dtype `np.bool` should be interpreted as masks when slicing torch arrays, just like tensors of dtype `torch.bool` are.
insead, such arrays are interpreted as indices.
the download link on the start locally phofhyperlink website for the c++ libtorch library (c++ 11 abi) without cuda is broken: when accessing phofurl a tab opens and shows image phofimage
bcewithlogitsloss and used with weights parameter throw a runtimeerror stating that the weight has wrong shape.
according to the documentation > weight (tensor, optional) c a manual rescaling weight given to the loss of each batch element.
if given, has to be a tensor of size nbatch.
the weight should have `nbatch `entries but expects a vector of size `#classes`.
attempting to install torch 1.2.0 on linux results in a memoryerror phofcode
it seems like there 's an undeclared dependency on phofurl in the caffe2 library that causes import errors.
for pytorch 1.3.0 a from source installation is necessary, if one only have cuda 9.0. i cant update the version, because i do not have root access.
auto outputs = crashes when loading the model with model = read_model(model_path); checked versions : prebuilt libtorch c++ stable 1.2 & nightly both cpu and cuda versions.
there is no way to fully reset the weights (buffers?)
of a model with spectral norm.
when i reuse my model i get good looking samples almost instantly on any full mnist 30-epoch training run other than the first, which i presume is caused by how the spectral norm is implemented.
there is no reset_parameters for spectral norm (as it even isn 't implemented as a layer).
removing and adding using remove_spectral_norm and spectral_norm does not work as a workaround, as i get: phofcode know should create a new model as it isn 't that costly for each run, but this should be possible without copying.
`ctc_loss` computes different loss values and different gradients when run on a batch of utterances than when it is run on each utterance individually.
in batch mode, some of the computed gradients are -inf
after passing the input through a function, the gradient * w.r.t.
* to the input can not be correctly calculated on a cuda device.
sometimes a sampled index is drawn multiple time in a row even if replacement=false on `torch.multinomial`.
this happens when an element of `input` is very small but not zero.
there seems to be an issue with cpu utilization when using a dataloader with pin_memory=true and num_workers > 0. i revisited some old code that had `pin_memory=true` and two workers that weren't doing all that much.
it pinned all of my cpu cores at or near 100%, with 40-50% of the usage in the kernel.
i've had performance issues with pinned memory in the past, but never to this level.
indeed, i cannot reproduce the issue going back to some older environments 0.4 or 1.0.1. but on 3 machines w/ pytorch 1.1 and 1.2 i can easily reproduce by running mnist main.py from current examples master.
if i set either num_workers=0 or pin_memory=false issue goes away and i'm left expected one core change of usage for mnist (or two cores change for my original case).
please see below minimal code to reproduce the problem cmakelists.txt phofcode main.cpp phofcode
"cannot instantiate class object" error does not print out the stacktrace or the location of the error.
this occurs when attempting to use `ordereddict`, among other things.
in a situation in which different python threads execute cuda operations on different devices, calling torch.cuda.synchronize blocks cuda executions on all threads, including those on other cuda devices.
taking a simple model with an nn.embedding layer (`nn.embedding(6000, 16)`) on the gpu, the forward pass takes ~32us while the backward pass takes ~42ms (42000us), which is over 1300 times slower.
i am aware there's a sparse backward version, but it's not compatible with the optimizers i want to use.
also this seems too slow for a dense backward pass regardless.
perfetto trace: phofurl code: phofurl
when trying to index a numpy array with a tensor (uint8), sometimes the result can be very from what is expected.
when i apply torch.svd() on large matrices (e.g.
x 4 elements), the function fails throwing a memory allocation error, both in gpu and cpu.
this behavior is consistent in all the versions of pytorch i tried (0.4.0, 1.0.0, 1.1.0) in linux, both in my local machine (ubuntu 16.04) and a remove server (centos 7).
in my workstation i also tried using pytorch 1.2 without cuda support (because i cannot update to cuda 10 yet).
also tried it on mac without gpu support and it works perfectly fine there, giving me the u matrix with 4 x 4 elements.
after i export my pytorch model to onnx model with dynamic shape, i use caffe2 as backend to run the exported model.
**everything is fine** when i run it on cpu, but when i run it on gpu, get a runtimeerror as following: > enforce fail at concat_split_op.h:291] dim == dim_j.
512 vs 34. expect dimension = 512 got 34 at axis = 2 for input: 1. the input tensors can only have different dimensions when arg 'add_axis ' = 0 and along the axis = 1 <[3, 256, 512, 0]> vs <[3, 512, 34, 34]>.
try it with onnxruntime and also get a runtimeerror as following: > method run failed due to: [onnxruntimeerror] : 1 : general error : non-zero status code returned while running node: status message: after some simple analyze, think it is caused by torch.cat and may related to the limilation of **[shapeinference phofhyperlink **.
creating a pinned tensor in pytorch 1.2 fails with `runtimeerror: error in dlopen or dlsym: libcaffe2_nvrtc.so...` under nvidia nsight systems.
i tested both pytorch versions 1.2 and 1.1. this problem happened only in pytorch 1.2.
if windows.h (and possibly other windows-specific headers) is included prior to libtorch headers, the program will fail to compile.
in one specific case (not windows.h but some unknown include), adding `#undef unicode` before including `torch/torch.h` was enough to fix the problem but this is not true in all cases.
the following error occurs after i upgrade to pytorch 1.2.0. one of the variables needed for gradient computation has been modified by an inplace operation: [torch.floattensor [3]], which is output 0 of addbackward0, is at version 1; expected version 0 instead.
pytorch cpu docker failed to build.
on gloo backend gives wrong result if input tensor stride != 1.
there's no direct way to install latest stable pytorch+cpu on windows.
the website recommends: `pip3 install torch==1.2.0+cpu torchvision==0.4.0+cpu -f phofurl the above command requires specific numeric version and there's no way to specify 'latest stable'.
it seems that a scripted module that includes a `nn.dropout` submodule cannot be exported to onnx
pylint returns the error `torch.tensor is not callable`
i tried to export to onnx a portion of the model described in phofurl scripting works but export to onnx fails, even though i think all the ops being used are present in the list of onnx operators.
this is a partial error trace: phofcode
when building pytorch 1.2.0, occur `recipe for target 'bin/test_parallel' failed` error.
i'm trying to build pytorch 1.2.0 from source.
the cmake phase passes successfully, but building fails.
when a ``nn.module`` that have been instantiated on cpu is traced and saved, it expects a `cpufloattype` tensor even if the `scriptmodule` is mapped onto gpu.
in current floatfunctional module, it has `self.observer = torch.nn.identity()`.
the add_observer will not insert the observer.
as a result, it will lead to the following error message: `attributeerror: 'identity' object has no attribute 'calculate_qparams'`
the outputs for torch.nn.dataparallel is different from single gpu.
cannot compile constant submodule with new api compiling an `nn.module` with a constant submodule attribute gives an error.
serialized models have a huge overhead on a first run.
with the model i 'm using, it takes at least more than 3-4 minutes (than i 'm just shutting it down, though it doesn 't respond to `sigstop` or `sigint`).
i am providing the slightly trimmed version of the final model, but still you can see the huge overhead here too.
i'm trying to install pytorch with mkl as the blas/lapack provider, but it fails to find the library and does not specify how to tell it where the library is located.
using the batched version of `torch.solve` on a multi-gpu machine crashes with the error: phofcode the computation seems to work, but when the solution is used, it crashes due to not being on the correct device.
the same batch works on cpu and on another machine with a single gpu it worked as expected, even gpu.
it does not crash when using pytorch 1.1, only pytorch 1.2.0.
hi there, in pytorch built from source i 'm encountering a very weird behavior while exporting to onnx, creating unwanted nodes in the exported onnx file.
hi, i download the libtorch windows debug version and want to build libtorch in vs. however, when linking each libraries, in bash shows it will link to those libraries phofcode for the second library:torch_library, it will shows in vs as torch-notfound.obj.
phofcode the other two library can be found, except for the torch_library and when i switch to the release version of libtorch 1.2.0, it works okay.
i traced cmake files, problem is in phofcode in fact i dont really understand that caffe2_main_libs is called torch_library.
but bug is windows debug version linking that library
training goes noramlly, and suddenly, at random time, this error shows up.
only happens when i run two models on same gpu.
playing around with torch 1.2.0 seems to output the wrong tensor when calling empty(5,3)
when calling the forward function of a module, some memory is allocated that is not de-allocated at the end of the thread.
when using user-defined classes, it's easy to miss type annotation of members of the class (and python won't error out).
the only error occurs when the instance of the class is passed to one of the torchscript functions and it's pretty confusing by itself.
script modules support defining new methods from code with `.define()` call.
with new api it 's impossible to define `forward` method like this because jit scripting happens before the .define call.
if i pack a float64 or float32 cupy tensor using to_dlpack and then use it to set the weights of a pytorch tensor using from_dlpack, the resulting weights are converted to float16.
the command `~(torch.tensor([1, 0]).byte())` outputs `tensor([254, 255], dtype=torch.uint8)`
installation of pytorch cpu-only fails in python 3.7.
calling `torch.fft` on cuda tensor in a `nn.dataparallel` wrapped module segfaults.
i'm currently having a problem whenever i tried importing `summarywriter` in my python script.
`torch.jit.script` is unable to parse comments with the character "".
userwarning: this version of onnx-caffe2 targets onnx operator set version 9, but the model we are trying to import uses version 10. we will try to import it anyway, but if the model uses operators which had bc-breaking changes in the intervening versions, import will fail.
warnings.warn("this version of onnx-caffe2 targets onnx operator set {}, but the model we are trying to import uses {}.
we will try to it anyway, but if model uses operators which had bc-breaking changes in intervening versions, will imp.version)) onnx fatal: don 't know how translate op resize onnx fatal: don 't know how translate op nonmaxsuppression fatal: don 't know how translate op roialign runtimeerror: conversion failed caffe2 is not able support most of operations of object detection.
in version 1.2.0, nccl backend doesn 't support `torch.bool` datatype.
broadcasting a tensor of this type throws error "runtimeerror: unsupported data type for nccl process group".
the method `__contains__` of class tensor returns the notimplemented instead of raising one, which is confusing because the consequently, the boolean statement of [var in tensor] will be true if "var" is not numbers.number or tensor.
when installing pytorch with conda in a new environment, it always installs compiled with the cuda version 10 and cudatoolkit=10.0.
whether i conda install pytorch 1.2, 1.1, 1.0.1, or 1.0 with cuda90 it always tries to install the cuda 10 version of the package as well as cudatoolkit=10.0.
this is via the pytorch conda channel.
my machine has an older driver version that can't easily be upgraded.
i also tried pip installing from phofurl and it still insists on using cuda 10.
torch.eye doesn 't work for dtype torch.bool when the device is cpu, but it does work on gpu.
running pytorch with multiple p40 gpus freeze and is not killable (even kill -9 by root).
only a reboot removes this process.
inside docker container (with nvidia-docker2) it freezes docker.
when i create a jit.script function that includes without a constant `is_training` parameter.
the fusion does not work.
backward can be called on tensor of `torch.size([1])` only if it is on cpu.
sorry if a duplicate of existing bug-report (can't easily find it)
multiplying a very large cuda tensor with another tensor yields unexpected result.
non-determinism while using the aforementioned layers.
check the code sample below to look at the model.
using and `torch.autograd.grad` breaks when used in combination with resulting in the following stacktrace phofcode
this is a followup for #23228 this is the result if we call `barrier()` at the end of with an unresolved future, as suggested in #23948
for certain ops, it appears if you create out-of-place gradients via `torch.autograd.grad`, then perform a double-backward by calling `.backward()` on an out-of-place gradient, the leaf `.grad` attributes don't actually end up populated.
i can investigate further on my own, but i want to check if this is a known issue or if i am misinterpreting or screwing up the intended behavior of `torch.autograd.grad`.
this is a followup for #23228
i have a tensor b, for which i am trying to get the gradient of an element of b wrt a sub-tensor of b. the results are unexpected...
line 36, in forward > self.min_val = torch.min(torch.min(x), self.min_val) > typeerror: min(): argument 'input ' (position 1) must be tensor, not nonetype
when there is no bias, the from_float method should take into account the mod.bias is none.
the latest version phofhyperlink of the `_batch_mahalanobis` function from is slower than that in a previous commit phofhyperlink .
on a system with a single gpu, with a model already loaded to this gpu, i expect model->to(torch::kcuda) to be almost free.
however, i find it takes approximately 1.5ms.
when using the torch conv2d i have a huge slowdown in speed using a specific weight tensor coming from a pretrained state_dict.
by adding 1 and subsequently subtracting 1 from the tensor from the state_dict i get a huge improvement (factor 5 on my machine).
in the code example below i compare pretrained weight with itself after adding and subtracting 1. i also observed this problem in 1.0.1 phofcode generates problematic tensor (there are many tensors like this in my pretrained state_dict, so it is not unique)
despite pytorch being able to work out that the storage of the device is actually "cuda:1" (this is where it was created!
), it assumes it was on "cuda:0" and complains about it.
if i set the index to -1 (default), it should use the pointer to work out device index and bypass any complaints.
instead, makes this assumption about cuda:0 (which is not mentioned anywhere in my code).
error: > attempted to set storage of a tensor on device "cuda:0" a storage on different device "cuda:1".
this is no longer allowed; devices must match.
the mere execution of without even using its resulting tensor in the loss function seems to have an effect on the gradient calculation.
the error message when feeding a string instead of a float for the weight_decay parameter of adam and amadax (and maybe others) is not clear: file line 124, in step self.optimizer.step() file line 90, in step p.data) typeerror: add_() takes 1 positional argument but 2 were given something like `weight_decay: expected type float, got string` would be easier to debug.
constructing a multivariatenormal distribution is much slower when inputting gpu-based `floattensor`s than cpu-based ones.
on my machine the gpu version is ~33x slower than cpu.
i have a model which has two embedding layers.
and i initialize the model, train it on gpu, and save its state dict to disk using 'tmp.pt')`.
and now i want to use previous model to do inference jobs, i find two ways below can cause different results: 1. initialize model on cpu -> load state dict -> model to gpu 2. initialize on cpu -> gpu -> load state dict **however, using just one embedding layer in my will solve this.
comment from the user is add to log_dir path name only if log_dir is not precised.
saving different file in same folder result creating files 'log_dir/filename.0', 'log_dir/filename.1', .. read as the same file by tb and messing with the graph, histogram, etc.
during the training of highres-net phofhyperlink the training phase will exit with a segmentation fault `exc_bad_access`.
when i ran the code of repo phofurl i ran python train_pose2vid.py i 'm confused about the error, magic_number = pickle_module.load(f) _pickle.unpicklingerror: invalid load key, ' x0a '.
<_io.bufferedreader traceback (most recent call last): file "train_pose2vid.py", line 130, in <module> main() file "train_pose2vid.py", line 44, in main model = create_model(opt) file line 15, in create_model model.initialize(opt) file line 83, in initialize self.criterionvgg = 118, __init__ self.vgg = vgg19().cuda() 392, __init__ vgg_pretrained_features 180, vgg19 66, load_url return torch.load(cached_file, 358, load return _load(f, map_location, pickle_module) 533, _load magic_number pickle_module.load(f) _pickle.unpicklingerror: invalid load key, ' x0a '.
the tensorboard graph always displays "cpu:0" as device placement.
back propagating trough a slice operation twice results in broadcasting issue in the second back propagating, when the slicing was done using a list.
code which used to be scripted without issue now fails with `valueerror: compiled functions can't take variable number of arguments or use keyword-only arguments with defaults`
in pytorch 1.2.0, a new 'debug' folder with a fairly large pickled file has come in to existence.
i have a 3mb model and this debug folder seems to take up an extra 1mb making it a 4mb model for no specific purpose.
worse, deleting the folder means the model fails to load.
as workaround i created an empty file in the folder and it successfully loads and runs as 3mb model again.
i am getting a compilation error when building from source with cuda 10.0 and ninja on dockerfile with ubuntu 16.04. error message: failed: (...) error: identifier "__ldg" is undefined
pytorch fallback for convolutions with half inputs/weights fails.
first reported on the forums phofurl this is likely a regression introduced by phofurl (thanks for tracking this down @ptrblck ).
it should be a must fix for 1.2 release.
in most cases, convolutions go through cudnn and thus this bug is hidden.
however, when deconvolution has non-unit strides and output_padding, pytorch fallback path is used and it fails.
forward is ok, backward throws a runtime error.
i have a c++ application with an embedded python session, and i 've observed that importing pytorch causes strange errors when the program ends.
from what i can tell, the problem emerges because i finalize python during the program exit, after pytorch 's internal objects have already been destroyed.
pytorch deallocates the objects ' memory, but it does not update corresponding reference counters.
thus, when python finalizes and garbage collects, it attempts to deallocate memory that has already been freed and crashes.
if my interpretation is correct, may i suggest a few possibilities: - register a cleanup function with `atexit` to make sure internal python objects are appropriately cleaned up, even if has not yet finalized.
- if c++ is an option, wrap internal objects in classes with appropriate destructors.
- if this edge case is too weird and you decide not to support it, put an error message if internal objects are destroyed before has been finalized.
it seems like that the time cost for backpropagation with f.interpolate layer is very high, not sure how to fix it.
in my experiments, i added around 10 adaptiaveavgpooling and f.interpolate layer combination in resnet50 for parameter-free decode and encode, my codes was slowed down for more than 4 times.
i checked the code, the adaptiaveavgpooling layer works fine, but interpolate layer seems to slow down the code a lot during backpropagation.
the toy experiment to reproduce is attached below.
first one is for vanilla 2-layer model without interpolate layer, time cost is around 0.009s.
second one 2-layer model with interpolate layer, time cost around 0.07s.
i also calculate time cost forwarding interpolate only, very small, around 8e-5s/iter.
therefore, was mainly from backward process.
however, parameter free operator, there shouldn 't be that much difference.
tried pytorch1.1 with cuda9.0 and pytorch0.4.1 with cuda8.0, got similar results.
i have trained a transformer model and the results seem to be wrong
the result of indexing pytorch tensor by a boolean `np.array` or boolean `torch.tensor` is different.
this may cause bugs possibly.
is it better to make the result consistent whenever the type of indicator is `np.array` or `torch.tensor` ?
i am getting a segmentation error when i call loss.backward() while using mobilenet_v2.
although the official step order seems to have changed to calling scheduler.step() after each iteration/epoch instead of before, this causes to have an extraneous step at iteration/epoch 0, instead of starting at the maximum specified learning rate.
enforce_sorted can not be set to false in pack_padded_sequence.
i do not know if this is actually a bug or it is the expected behavior.
i am experimenting with sparse data.
i create a dataset class that stores a scipy.sparse.csr_matrix (csr because it is able to slice the matrix and create minibatches).
the `__getitem__` method transforms the csr matrix into a minibatch of class if i slice the dataloader dimensions are expected.
when feed dataset into dataloader, it adds an extra dimension to returned minibatch.
with example code will put now, explanation will be more clear.
a large consumption of ram memory is used when creating a 'cuda' type variable.
this occurs even if the variable is very small such as a 5x5 random matrix.
in the example shown below a total of ~10gb of ram is consumed.
i am using the terminal command `top` and the 'virt' column to determine ram consumption.
calling or before `with and then call any torch api that internally calls ` th._c._cuda_getdevice()` after daemonization throws the following runtime error: > runtimeerror: cuda runtime error (3) : initialization error at however, the use case is to set all the seeds and visible gpus according to the availability of gpus and user config as early as possible as part of application framework without explicit initialization code by user and let user decide whether to daemonize or not later.
the `grad_fn` of `torch.where` returns the gradients of the wrong argument, rather than of the selected tensor, if the other tensor 's gradients have infs or nans.
torch.mean() on cpu and gpu differ (nvidia xavier/arm64 example)
tensor from mmaped storage loads the entire file into memory for operations that don't require it.
when attempting to adapt our repo ( phofurl to fp16 inference we get this error.
we attempted model.half() and then input.half(), using output = model(input).
the pytorch tests for qnnpack attempt to run when run on the ppc64le platform, where qnnpack is not enabled.
the tests have no awareness of whether the build was done with use_qnnpack=off specified.
as a consequence, the tests immediately fail.
i choose `model = and then use inputs)` to get a graph, a `runtimeerror: only tuples, lists, and variables supported as jit inputs, but got collections.ordereddict` is in line 295. i think if the outputs of the model are the collections.ordereddict, just take the **values of dict** and then convert to ** tuple ** .
detection module is not present in torchvision.models
when i applied the random.shuffle to a 1-d tensor, the num in the tensor was changed.
when i convert the `deeplabv3_resnet101` model and use it in libtorch, it gives a segmentation fault on forwarding.
segmentation fault when calling torch.tensor for specific numpy arrays (or torch.clone or any call that copies the storage of the numpy array).
it may be related to the array not being memory aligned or being loaded using np.frombuffer (thus being readonly with its data being the bytes of string); however, it does not fail for other arrays stored in exact same way.
can't use tensoriterator reduction functions if the dimension to be reduced over is > 64.
this is a niche bug, but it might cause troubles in advanced users who like to use masking to filter out nan losses.
simply put, when nan losses are masked out using `masked_fill`, performing `backward` on the sum of the losses should produce valid gradients (assuming that the gradient graph is smooth everywhere except for the masked losses).
i want to convert my pytorch model to onnx.
however, i get an error saying that > runtimeerror: number of input names provided (9) exceeded number of inputs (7) however, my code runs perfectly if i take out the two dropout layers from my model.
i believe that this is an error with the dropout layer.
when we specify output tensor in certain torch operations (including in-place operations), in cases where the actual storage associated with the output tensor cannot hold all the output elements (i.e.
the output tensor `has_internal_overlap`), result is not correct.
the issue was found by @fdecayed and is best described in repro code below.
i found that the speed of `torch.einsum` when using fp16 is much slower than using fp32.
when the shapes of inputs are (a,b,c) and (a,c,d), `matmul` became much slower as well.
concatdataset returns different error messages setting out of range plus index and minus index.
batchnorm1d results in phofcode on first run through.
afterwords it works as intended.
note that this does not happen on cpu.
torch.distributions' `cdf` and `log_prob` work for inputs that are either `torch.tensor`s or native python floats.
however, fails for python-float inputs.
when i try to scripting my model.
it comes up an error message about the arguments.
torch.flatten works in a counterintuitive way when supplied with 0-dim tensors.
# returns a 1-dim array >>> array([1., 2., 3.])
# returns a 1-dim array so, in numpy, flatten() always returns a 1-dim array, which is exactly why one would use it.
in contrast, in pytorch, it returns 0-dim tensor for 0-dim tensors, which defeats the whole purpose of flatten: to convert all tensors to 1-dim, so we can handle arbitrarily shaped tensors in uniform way.
in torch: >>> tensor(123) # 0-dim tensor!
>>> tensor([1, 2, 3]) # 1-dim tensor
1. build a mask r-cnn model 2. try to save it as onnx format 3. expected a saved .onnx file but get an error message runtimeerror: the expanded size of the tensor (1056) must match the existing size (1066) at non-singleton dimension 2. target sizes: [3, 800, 1056].
tensor sizes: [3, 800, 1066]
you 'll get an error if two attributes of a module have the same values when using `torch.jit.trace`: phofcode
this issue is related to #20116 and #10942 and has to deal with `upsample_bilinear2d`
there is an issue with how blocks/buffers are being allocated on cuda.
this leads to zeroed gradients in the example below for those matrices that are beyond the `65535`th entry.
this only seems to affect the nightly build.
i was trying to evaluate the performance of the system with static data but different models, batch sizes and amp optimization levels.
however, when using ddp, the script gets frozen at a random point.
the gpu usage is stuck at 100% and the process is also using 100% cpu.
i tried this on three different system configs but error persists.
i even tried nightly version of pytorch but it wasn 't useful.
if i switch from nccl backend to gloo backend, code works, but very slow.
suspect that problem might be with nccl somehow.
here is nccl log that retrieved.
phofcode closed script by ctrl+c after an hour as it was stuck at this point.
also did a backtrace using gdb: phofcode
wrong error message about dimensions mismatch.
when a function that takes in a dict of tensors is jited using `torch.jit.trace`, autograd seems to have problems computing the backward graph with cuda tensors.
see #20335 for context, this seems related.
build pytorch/libtorch with tbb support is failing
fused kernel error when using simple method with inputs of size 0.
we found huge memory needed to run conv2d when some specific shapes and data type used on v100.
i 've found this when debug a wired oom issue, the memory will suddenly jump 4-5x during training on v100 with mixed precision.
after some debugging, i 've found it was caused by the in `conv.cpp` in pytorch 0.4.1 with cudnn 7.4 / 7.5 that will return algorithm 2 and then `getworkspacesize` will return a huge size (>8g) for this setting.
it may be a cudnn issue.
(it works fine with cudnn 7.0, but will have this issue with 7.4 or 7.5) pytorch 1.1.0 cudnn 7.5 also has this issue.
instaling pytorch nightly using the method suggested on the website phofhyperlink results in a **404 error**
graphfuser does not pass its fusioncallback and symbol to recursive calls when fusing nested blocks: phofurl
when using a jupyter notebook, executing the same cell multiple times eventually leads to cuda out of memory.
in pytorch `1.1.0`, if a `nn.module` has a parameter which is a sparse tensor, fails.
for the mini snipped below it throws the following error: phofcode on pytorch `1.0.1` there is no error.
i ran into the following error when trying to convert an integer numpy ndarray to a torch tensor: `>>> torch.from_numpy(b)` > traceback (most recent call last): > file "<input>", line 1, in <module> > typeerror: can 't convert np.ndarray of type numpy.int32.
the only supported types are: float64, float32, float16, int64, int32, int16, int8, and uint8.
i am current using pytorch 0.4.1 and find that the actual behavior of `tensor.view()` method is not the same as the documentation.
specifically, the documentation phofhyperlink says: > **the returned tensor shares same data** and must have same number of elements, but may have a different size but actually, returned tensor does not have same `id()` for `tensor.storage()`.
if i create a tensor with a fourth layer where (almost) all entries are zero, and i use transforms.
transforms.totensor() the hole tensor becomes a zero tensor.
when using the autograd profiler with `use_cuda=true`, memory usage continuously increases.
this behavior does not occur when `use_cuda=false`.
i am trying to train pretrained mobilenet_v2() on cifar 100 dataset as taken from torch vision.
however, loss.backward() fails and crashes python with `segmentation fault 11` error.
same error is not observed when using any other pretrained model like vgg16 etc.
i implemented functions to perform a cholesky update via pytorch and hoped for better execution times by utilizing the jit decorator.
unfortunately, then the result of the cholesky update is not longer correct.
however, while debugging i realized that i am able to get the correct result when using a print-statement within update function.
when passing a specific 4d tensor to `triu` or `tril`, the gpu implementation produces non-deterministic results.
the cpu implementation produces `nan` values.
hi, i 'm trying to compute the jacobian vector product using a trick from phofurl this involves computing the gradient twice.
it seems like using conv2d with padding =1 slows down the computation by almost 3 times, compared to padding =0: padding= 0: s padding=1: in case only one backward pass is computed both give the same times: padding =0: padding = 1:
the recently added batched eigenvalue decomposition via `torch.symeig` is very slow on gpu (pr: phofurl issue: phofurl
codes involving collect_env_info() make unicodedecodeerror when running on cmd of windows 10 in korean(and maybe other languages..)
cannot build caffe2 while installing pytorch on raspberry pi 3b+ (raspbian:buster).
torch.exponential_ on the cpu has a small (2-53) chance of generating 0. i don't think we document whether torch.exponential_ may return 0, but both the numpy phofhyperlink and tf phofhyperlink documentation pages don't allow for zero.
this is convenient for downstream uses, such as gumbel-softmax.
the cpu exponential generation function computes `-log(1-uniform())` (always in double-precision).
the result is then rounded to the desired data type (e.g.
phofurl if `sample` is `0`, then `log(1.0 - sample)` is also `0`.
note that `sample=1` also not allowed.
the cuda generator doesn't have this issue because it shifts the probability mass around zero to log(1-eps).
the bug appears in pytorch 1.1 in file lr_scheduler.py (line 686) for lr scheduler where the parameter name is * t_mult * but in line 686 the name * t_mul * is used instead (python interpreter does not know variable t_mul ).
export of `f.one_hot` to onnx format fails.
don 't know if i should call it a bug, but i think it is better if you could add an assertion if people use scatter_ on a non-contiguous tensor, since the scatter_ function will behave unexpectedly in this case.
in other words, the output of scatter_ for a non-contiguous tensor is different from its output for an "equivalent" contiguous tensor.
we are missing some optional flags that are useful for building some cuda extensions that relies on half precision.
the following are the flags that we should add for building cuda extensions by default.
the idea originally comes from phofurl phofcode
`torch.jit.trace` over a rnn (gru, lstm) does not work when you feed it with a packedsequence (as the ones created by however, this works in eager mode.
i used distributed data parallel (ddp) with 8 v100 to train resnet 50 on imagenet dataset.
but pytorch 1.1 has lower speed than pytorch 1.0 .
pytorch causes segfault in internals of pyarrow during reading a parquet file.
i 'm trying to implement distributed adversarial training in pytorch.
thus, in my program pipeline i need to forward the output of one ddp model to another one.
when i run the code in distributed setting, the following error is throwed: > runtimeerror: expected to have finished reduction in the prior iteration before starting a new one.
this error indicates that your module has parameters that were not used producing loss.
you can enable unused parameter detection by (1) passing keyword argument (2) making sure all `forward` function outputs participate calculating loss.
if you already have done above two steps, then distributed data parallel module wasn 't able locate output tensors return value of your module 's `forward` function.
please include loss function and structure of return value of `forward` your module when reporting this issue (e.g.
(prepare_for_backward at frame #0: std::string const&) + 0x45 frame #1: > const&) + 0x666 frame #2: <unknown function> + 0x6df3b8 frame #3: <unknown function> + 0x1fc7f0 #31: main 0x16d (0x400c1d #32: __libc_start_main 0xf5 /lib64/libc.so.6) #33:
i 'm exporting torchscripts from a machine equiped with cuda.
when trying to use the models loaded with `map_location= 'cpu '` on my macbook (which had at some point an external gpu but doesn 't anymore), i get the following error (full trace is bellow): phofcode
certain operations on the storage of cuda tensors cause a crash when using the non-default gpu device.
auto differentiating through `torch.cdist`yields incorrect gradients on the gpu.
numerical and analytical gradients do not match
integer tensors, when divided by zero, is giving large integer values as answers instead of flagging as zerodivision error or results as inf/nan.
float numbers, however, are behaving as expected (returns inf) for e.g in numpy, the behavior is to return inf with "runtimewarning: divide by zero encountered in true_divide"
given a `std::vector<long> vect = {1,2,3,4}`, i can use `auto tensor_ = torch::tensor(vect);` to create a tensor in linux, but same code results in an error in windows, and i get `e0304 no instance of overloaded function "torch::tensor" matches the argument list `
interpolate in the icubic mode with the same shape, transpose the tensor.
in other modes all works ok.
ambiguous torch.tensor int vs float comparison
testing geoopt against torch-nightly fails probably due to backward incompatible changes from torch side
packedsequence's sorted_indices is not put on cuda when `.to('cuda')` is called, but `.to(device='cuda')` works.
the problem seems to be here: phofurl maybe it should be `lambda t: t.to(*args, **kwargs)` as the previous line: phofurl
`torch.lu_solve` gives an unintuitive error message when the inputs are not batched
building from source failed after printing out this line.
no explicit error message is printed out, so i am quite confused what went wrong.
i am trying to build pytorch from source on a ubuntu 18.04 gpu server.
however, after i have followed the steps listed here phofhyperlink , running `python setup.py install` keeps failing.
if you have a distributeddataparallel module which contains a buffer used in the forward pass, and that module 's forward method gets called twice in your training script, the following `backward()` call will fail claiming that a variable that requires grad has been modified by an inplace operation.
`torch.multinomial` is not sampling the correct distribution for cuda tensors.
pytorch is slower on windows than on linux
this is a more general version of the bug in #21970, which i'll close.
when a `autograd.function` returns the result of `einsum`, the backward pass is ignored.
when the result of `einsum` is `clone`d before returning, backward pass works fine.
when i use multiple gpu while the loss is calculated by only part of the parameters.
i get the following errors.
use only one gpu works well.
functionalimpl binds a function one-to-one with its' arguments and does not allow to add new optional argument.
if you add not-optional argument, it will break bc.
this is based on the discussion here: forum link phofhyperlink i was wondering why reducelronplateau does not have _lrscheduler as parent class.
if i want to check if a variable is a learning rate scheduler object type, i could have used: `isinstance(scheduler, above covers all learning rate schedulers defined in lr_scheduler.py except reducelronplateau because it does not inherit from _lrscheduler.
so instead i need to use: `isinstance(scheduler, or isinstance(scheduler, shouldnt reducelronplateau inherit from _lrscheduler as well?
is this just an oversight?
context: in general for saving a checkpoint, if also want to save scheduler state dict, then would like to verify the params first.
when running a docker container from pytorch/pytorch like pip does not seem to detect the pytorch binary and will install over it if you try to install any other package.
when a function returns the result of `einsum` is checkpointed, the backwards pass is not correctly computed.
one of the arguments of is `base_lr`.
this is described in the documentation as: > initial learning rate which is the lower boundary in the cycle for each parameter group.
when this class actually computes learning rate on each step, it uses attribute `self.base_lrs`.
this is set in parent class, _lrscheduler ` phofhyperlink however, due to implementation of this (it uses value 'initial_lr ' from each parameter group), this actually produces wrong behavior when that 'initial_lr ' key already set.
in effect, cycliclr scheduler now cycles between whatever value was `initial_lr` value for each parameter group, and `max_lr`.
this a problem, as 'initial_lr ' gets set by most optimizers, making it impossible to chain multiple optimizers.
i am indexing tensors and storing each element of the batch separately so that they can be read individually from disk.
the output of the model is a tensor of size when i index one element from it and store the dimensional tensor using torch.save() it takes the exact same time as it takes to save whole object.
on other hand, if i do a .numpy() and do same process in numpy it is much faster.
may be some thing to do with how torch handles indexed sub-tensors.
is a separate object, or same one?
dummy code below reproduces issue with pytorch 1.0.1.
using `all_reduce` under cuda-aware mpi with a cuda device other than `cuda:0` causes segmentation fault.
i managed to bypass this for a very specific use case by setting `cuda_visible_devices=1` and then using `cuda:0` within pytorch.
when called .to(device) on constant once before train/eval loops this cause errors with training and not raising exception.
when i trying to export my taco2 model to onnx i got this error.
how can i add symbolic and where i can do it?
userwarning: onnx export failed on aten operator _thnn_fused_lstm_cell because does not exist
i am new to pytorch and so i am not sure if it is an actual bug or a normal thing.
however, when i have a print statement outside of any function and i iterate over a dataloader then the print statement is invoked multiple times.
simple unit test to show how i get an internal assertion failure when converting from at::tensor to double.
when running a code for (cnn + rnn model with ctcloss) on google colab, i obtain following exception: phofcode the pytorch version on google colab, where i execute gpu version, is 1.1.0
for (size_t epoch = 0; epoch < epoch_count; ++epoch) { t t tfor (auto& batch : *dataloader) { t t t tif (_is_exit_) t t t t treturn false; t t t tauto data = batch.data.to(d), targets = batch.target.to(d); t t t t tauto prediction = model_->forward(data); t t t tauto loss get_loss(prediction, targets); t t
when using ``torch.nn.modulelist`` within a module annotated with an error is raised in the forward method, incorrectly stating that the modulelist is not added to ``__constants__`` although it is.
attempting to build latest master for rocm, once i disable mkl-dnn (see issue #21834), the build almost completes but fails with the following errors, seemingly related to cudaipc: phofcode .... many more errors like this, then finally ... phofcode
building rocm from source fails with this error: phofcode it appears mlkdnn is linked against intel's libiomp5.so, while the rest of the system is linked against gcc's openmp.
`index_add_` (and probably other similar indexing functions like `index_copy_`, ps.
not tested) give wrong results when used inside a model which has been wrapped with `dataparallel`.
even with `dataparallel` wrapped model, the forward function which may be using `index_add_` for some kind of calculations should work normally as in the case for single gpu.
refer to the log attached which illustrates the problem.
i 'm trying to add libtorch to a working project.
cmake configure throws no errors but when i try to build the project, it throws a lot of linking errors with opencv.
then i tried to run the example code in installing c++ distrbutions of pytorch phofhyperlink and then it throws a different set of errors.
runtimeerror: cannot insert a tensor that requires grad as a constant.
consider making it a parameter or input, or detaching the gradient when use torch.jit.scriptmodule without torch.jit.script_method forward.<br> it can work normally when i replace torch.jit.scriptmodule to nn.module.
caffe headers are missing in both the latest stable release and nightly phofurl phofurl
when building libtorch with cmake/make directly, the generated will always show 1.0.0 as the version number
nn.conv2d performance (on cpu) changes 40 times by only changing its filter weights
not sure how it's missed but here we go:
optional.h(519): error c2660: function does not take 2 arguments when i tried to build a function in vs c++ it seems that the "swap" on line # 519 cannot find the definition (line # 1052).
do you have any workaround to resolve this issue?
`assert` statements are not removed in jit graph even if -o is provided to python interpreter.
when using the pytorch c++ frontend, the batchnorm-modules ignore running_mean and running_var values.
`torch.solve` in gpu tensor fails when the batch size of the tensors > 65535, and throws a `runtimeerror: cuda error: invalid configuration argument `.
interestingly, if you run the `torch.solve` multiple times, it will occasionally pass (but with wrong results).
a specific shape of conv2d produces wrong results for cpus.
c++ custom operator cannot be used to extend pytorch nn.module (used to work).
hello, it seems there is a hardcoded path inside cmakelists relating to ** nvtoolsext ** .
in cuda 10.0 there is no nvtoolsext folder while pytorch is expecting one.
specifically, when using cuda 10.1 with the latest version of torchlib on windows 10, i get the following exception.
> make error in cmakelists.txt: imported target "torch" includes non-existent path "c:/program files/nvidia indeed, there is no include directory under that folder.
there are basically 2 issues here: 1) pytorch does not handle properly when dataloader workers hang.
the whole process hangs when a worker hangs if no timeout is specified.
when a timeout is specified, the dataloader simply throws an exception without cleaning up its worker processes.
2) since pytorch doesn 't handle it, we had to handle it ourselves, by forcefully killing the worker processes.
this in turn can cause another hang when pin memory thread is used.
because dataloader uses the same "work_result_queue" to send data to the pin memory thread and to notify "done" pin memory thread, it 's possible that "done" event can never be read properly from queue after we kill worker processes.
and because dataloader iterator joins pin memory thread indefinitely when it self-destructs, self-destruction can hang forever.
when concatenating two large tensors a 'segmentation fault (core dumped)' is thrown.
tested on an older version of pytorch(1.0.1) and bug was not present.
while working on fixing a bug in the cpu sampler in #21324, @neerajprad noted that the cuda sampler was not sampling correctly.
refer phofurl for more details.
the code snippet below throws error.
i'm trying to see if i could reuse a buffer.
when running the `add_embedding` example provided in the documentation here phofhyperlink , i am unable to visualize the output in tensorboard.
when loading the projector page, tensorboard backend returns a 500 and cli throws an error (details below).
when using `conv1d` with a large kernel size (1024 for instance) on gpu, the cudnn implementation is very slow and gets slower as i increase the kernel size.
i thought it was using fft but apparently not.
if it were using fft, the computation time should be independent of the kernel size, because kernel is anyway padded to length of input.
i have tried benchmarking with both set to `false` and `true`.
my implementation using fft is significantly faster especially when a stride of 1. you will find hereafter code both for fft based convolution implementation i use and profiling.
my implementation is within ~5e-5 of reference for random weights and input.
for a size 1024, with 64 channels, a stride 1 an input length 64000, default about 20 times slower than fft based one.
when size 2048, it 40 times slower.
convert pytorch inceptionv3 model to onnx, then converted to caffe2 failed.
the error message for inferencing caffe2 model phofcode the original pytorch inceptionv3 model: phofhyperlink phofcode if self.transform_input is true, then x_ch0 = torch.unsqueeze(...) will be converted to onnx operators: phofcode from this, we can see that (0.229 / 0.5) is converted to mul operator 's second input 584 with data_type=1(float), and (0.485 - 0.5) / 0.5 is converted add operator 's second input 596 with data_type=11(double).
but caffe2 's add operator only accept that first operand should share the type with the second operand.
when running the `add_embedding` example provided in the documentation here phofhyperlink , i am unable to visualize the output in tensorboard.
when loading the projector page, tensorboard backend returns a 500 and cli throws an error (details below).
matmul in a scriptmodule requires much more memory than in a regular (non-jit) module.
`import torch` fails on windows using pytorch-1.1.0
we have custom network which is based on yolov3-tiny model implemented in `pytorch`.
we run it on jetson nano, without any problems, except that we had jumping fps -- from 7 to 30 in some kind of cycle.
it was suspicious, thus i tested it inference speed in `ipython3` using `%timeit` and got pretty strange results which corresponds to what we have seen on video processing: phofcode this also applies to standard `pytorch` models, i.e mobilenetv2 (see below).
the shape of prelu weight is incompatible with onnx document.
the shape of weight should be channels, 1, 1] according to [onnx document phofhyperlink , however, the actual shape is [channels] instead.
it causes the exported onnx model illegal.
test_array_adaptor and fails with numba version 0.44.0
in `tools/pyi/gen_pyi.py` there is no type hint provided for `tensor.contiguous()` is there however).
as a result uses of `.contiguous()` cause mypy linting errors.
in the case i had the line (the context and details of the tensors doesn 't matter): phofcode gives the linting error: phofcode
i followed the steps provided to install the pytorch from source.
but it ended with error.
pytorch emits the following unexpected message to stderr: phofcode a backend library should never write to stderr unless a logger is set up accordingly or an error situation occurs.
we use stdout/stderr for interprocess communication, so unexpected messages from a backend library will mess up that communication.
memory corruption between two threads: one calling select and another moving a tensor to `kcuda`.
it seems that the new bicubic interpolation is introducing some noise/artifacts into images.
when i execute example/mnist/main.py on colab/local machine with cuda, it throws initialization error.
if i add --no-cuda flag, it works fine phofcode
i don 't know which caused this problem.
trying to run fasterrcnn newly released in torchvision 0.3 runs into ptx jit compilation failed error.
this fails on my google cloud instance using gpu, but does not fail using cpu
on colab, cpu gives strange result for torch.norm.
but colab gpu and my local machine cpu/gpu gives appropriate result.
on colab phofcode on local machine phofcode
reducelronplateau will fail when add new parameter group to the optimizer.
the `_reduce_lr` function will raise list index out of range error
the true value of the element of tensor seems not to be what it looks like and what it should be.
the debuger shows that a variable x is 1.0000, while `torch.sqrt(1.0 - torch.pow(x, 2))` is nan and `x > 1` is true.
what's worse, some other 1.0000 variable shows the opposite.
they are all produced by computing cos, which means they should be no more than 1.
when 'padding_mode' is 'circular', padding=1 and 'padding=0' are no different.
(in fact, i am not sure whether this is a bug or a special setting.)
assignment to a twice sliced tensor (for example, masking a tensor and then slicing that masked tensor) drops the assignment altogether.
the same thing is true when `tensor[][].copy_()` is invoked - nothing is actually assigned to any portion of `tensor`
performing identity comparisons between tensors does not work as expected.
it looks like 'is' is overloaded but i can't find documentation to that effect.
conversion to onnx seems to export some constants as type float and some as type double.
this part is not strictly your responsibility, but this causes type issues when trying to convert the onnx model to other deep learning frameworks.
there has a bug when clone a mkldnn tensor, it seems that this clone share the same memory which is different with cpu tensor's clone .
if one want to compile a model using hook but with a well determined behavior while traced, the trace function raise anyway.
there doesn 't seams to be a way to force the trace function to ignore the raise: phofcode
when running torch.bmm(a, b) on cuda tensors i get the following error phofcode i'm running the appropriate cuda for the card (plenty of other models have trained fine).
the same cuda version on a machine with a 1080ti works fine.
when i convert tensorflow inceptionv4 model to onnx, then to caffe2, and test this model, it failed.
phofcode slice operator in onnx is : phofcode the converted node to caffe2 is: phofcode
in the example below, i want to subtract the value of the first column from all columns of a 2d array/tensor.
`x -= x[:,0][:,np.newaxis]` (or with pytorch can also do `unsqueeze(1)` instead of `[:,np.newaxis]`) however, the above expression gives different results when x is a numpy array vs when it is a pytorch tensor.
specifically, with pytorch it seems as though broadcasting is "lazy", and only broadcasts first column after first column 's self-subtraction.
while with numpy gives "expected" results.
is it possible that above expression, with x appearing on both lhs and rhs and relying on broadcasting, does not have well defined semantics?
or is this a bug?
we recently develop a jit test for function.
the test fails due to the numerical discrepancy between the jit version and the python version.
when using layernorm in scriptmodule in version 1.1.0, i get "runtimeerror: no grad accumulator for a saved leaf!".
but it 's ok in 1.0.1.
the test case fails with a runtimeerror about ` test case fails intermittently
in the hub.py, line 169 should be preceded by: cached_zipfile.close() otherwise on windows, it will crash with permissionexception
when running the example of using libtorch with cmake, it errors about missing `libc10_cuda` during `find_library(torch required)`: phofcode it tries to find it under `/usr/lib`, but arch 's package manager installs it to `/usr/lib/pytorch`.
so it 's either the packager didn 't install it to the correct place, or the `caffe2targets.cmake` file not rigorous enough about elf location.
what 's your thought on this?
is proper to modify `caffe2targets.cmake` so can find lib correctly under this circumstance, or at least provides a variable or something workaround this please.
when i convert onnx dynamicslice operator to caffe2, it failed.
phofcode i found the reason is dynamicslice 's input_size is 3, and we should get the inputs from index 0-2 rather then 3: caffe2/onnx/backend.cc phofcode
below is all the library generated which does not contain the libtorch.a.
no error messages are observed.
libprotobuf-lite.a libclog.a libcpuinfo_internals.a libcpuinfo.a libpthreadpool.a libqnnpack.a libonnxifi_loader.a libonnxifi_dummy.so libfoxi_loader.a libonnxifi.so libfoxi_dummy.so libfoxi.so libgloo.a libprotobuf.a libgloo_builder.a libprotoc.a libonnx_proto.a libc10.a libonnx.a libcaffe2_protos.a libnnpack.a libmkldnn.a libcaffe2.a libthd.a libc10d.a libtorch.so
batched cholesky decomposition is much slower on gpu than on cpu.
for small number of batches, cpu is orders of magnitude faster than the corresponding gpu implementation
sometimes indexing by a 1-dimension `int64` tensor with a single element returns a tensor with reduced rank.
compiling pytorch causes my laptop to become unresponsive, requiring a hard restart.
this is because nccl is compiled with `make -j` (without a number) which is dangerous behavior phofhyperlink since it causes an unbounded number of processes to be spawned.
this is the line: phofurl
when use gpu to train a two-convolution-layer model, the random behavior is different in the running of two times.
following steps to build caffe2 on windows per the caffe2 install page build_windows.bat runs for a good while then fails with microsoft (r) c/c++ optimizing compiler version for x64 copyright (c) microsoft corporation.
**ninja: build stopped: subcommand failed.
traceback (most recent call last): file line 22, in <module> build_python=false, rerun_cmake=true, build_dir= '. ')
file line 286, in build_caffe2 check_call(build_cmd, cwd=build_dir, env=my_env) file line 347, in check_call raise cmd) command '[ 'cmake ', '--build ', '.
', '--target ', 'install ', '--config ', 'release ', '-- ', '-j ', '7 '] ' returned non-zero exit status 1.
list builtin doesn't preserve the type of its inputs.
nn.embedding backward is very slow when there is high contention for a small number of rows in the embedding matrix.
this can be ameliorated with different approaches to backward in this case.
hello everyone, i use pytorch profiler to get my program performance, but seems profiler not print all op function calls.
my program has 53 conv2d, but profiler only print 6 conv2d calls, can anyone help on that?
pytorch is not using the gpu specified by `cuda_visible_devices`
the issue has been resolved with a recently merged pr ( phofurl this issue report is here for the record and future benchmark.
the issue is related to the local scope of a weak-scripted function, which cause a memory leak.
we have the out-of-memory issue when running nn.multiheadattention module on cuda.
this happened since we split the forward function of nn.multiheadattention module and move major calculation to torch.nn.functional.py.
to fix in merged pr, we had to remove "weak_script" decorators in function.
`pip install --find-links phofurl torch` installs package from pypi and not from provided index.
an assertion is triggered: phofcode when doing: phofcode error occurs when `padding[1] == 3`.
the value of `padding[0]` does not seem to matter.
error occurs on this processor `intel(r) xeon(r) cpu e5-2697 v2 @ 2.70ghz` but not this processor `intel(r) core(tm) i7-8750h cpu @ 2.20ghz` error occurs using torch version `1.0.1` and `1.1.0` but not using torch version `1.0.0`
i'm encountering a very strange performance issue when accessing an extremely large tensor.
i first encountered it when loading a whole dataset into gpu memory on a tesla v100, which may be required for reproducibility because smaller tensors don't demonstrate the effect.
if the tensor is above a certain size, then once you index past specific value, access to the tensor (or at least the performance of dnn) begins to take longer and longer.
the linked repo includes an example notebook that demonstrates performance dropoff.
there doesn't seem to be an issue with tensors in cpu memory.
here are things i've tested so far to help isolate: - different tensor shapes (2x wider tensors results in degredation at ~6m samples) - changed tensor size be within limit (no slowdown occurs) - cpu memory (no issues) - different gpus, although all on same dgx-1 (hopefully validating hardware is functioning) artifically starting dataloader at point where it slows down.
(slowdown is immediate and performance is much worse (25k samples/s) breaking up into multiple blocks see if being contiguous matters (multiple tensors don't have same effect.
only one larger demonstrates this issue) started with multiple blocks and concated together on gpu.
(issue shows up again) tested just indexing of single large random see if it was impacted (no slowdown) this possibly due int (or long) variable in memory addressing of tensor; if i calculate point in where slowdown occurs (45x4bytesx~12m = 2.16b) that's suspiciously close int limit of what's strange that slowdown only occurs if there significant access beyond that range.
i tested that was 4 bytes larger (and one was 100k larger) and neither those displayed significant problems.
it's only when it's much larger it seems cause issue.
as mentioned above, for larger if i start accessing region slowdown immediate much more pronounced.
it's worth noting encountered similar more nefarious issue when shuffling by index loaded from dl_pack this size where region data beyond int limit was all 0s.
understand this size are unusual (at least for now) but would be great figure out limitations so others don't run into this so we can plan for future gpus with much more ram gpu memory datasets.
currently contains: phofcode however, the doc states that the `params` in the constructor is `iterable of parameters to optimize or dicts defining parameter groups` (i.e.
the doc description is correct (matches the code), which makes `.pyi` incorrect.
unless i 'm missing something it should be: phofcode
an outer torch.no_grad() is ignored inside a thread (e.g.
cmake version (in seems stuck to 1.0.0 in the latest libtorch c++ windows packages (cuda or not).
this problem may also have affected the previous 1.0.1 packages.
another big problem for me is that i can't find any more link to download libtorch c++ 1.0.1 packages, upon which i based all my current developments.
when adding an nn.upsample module with different scale factors per axis, i.e.
a tuple of floats matching input size, a typeerror is raised.
python crashes (with sigfpe) when dropout is called on an empty cuda tensor.
in index_put_ operation indices backend now has to match source backend.
it used to be not necessary, so that e.g.
cuda tensor could be indexed by cpu tensor.
blame points to #17991 phofurl
the non_blocking option of does not seem to have any effect as of torch 1.0, or possibly something additional needs to be configured for it to work?
when i run program on server by ssh, dataloader may cause this runtimeerror.
if this error happens, in the same ssh session it can reproduce again (but file number varys).
but after i reconnecting ssh, everything is ok.
cosineannealinglr has unexpected behavior with large step.
we use token count as the step for language modeling and this is often in the 1e9 range.
the cycliclr scheduler tries to access the optimizer's momentum parameter even if `cycle_momentum=false`.
cannot type a class with an annotation that contains itself using python 3 style comments
i don 't manage to import a tensor saved in pytorch from c++.
any help on this is welcome
i'd like to use a random sampling process as part of my training (related to work in this paper phofhyperlink ).
in my case this entails taking a binomial sample every epoch from the raw data, and using that sample to train.
the dataset itself is small enough to fit into gpu memory (~8000 samples by 7000 features).
unfortunately, the binomial sample method contains this phofhyperlink : phofcode which, for my data, means that it tries allocate a >600gb matrix take a sample from 240mb matrix.
this is not ideal, say the least.
i guess no one has tried binomial distribution of this size before?
when including a call to `th.cat(tensors)` in a scriptmodule, if `tensors` is a tuple of tensors the scriptmodule can be constructed, but if `tensors` is a list of tensors, the construction fails.
onnx exporter gets tripped by a model using `nn.sequential` and `nn.embedding` when the embedding layer is stored as a class property.
the generated onnx file is malformed: it has an initializer for the user-defined input.
the initializer used is the weight metrix of the embedding table.
the embedding table appears in initializers second time (this time for embedding layer).
when using the index_copy_ function, the programme will throw a segmentation fault.
with the same configuration, i trained a face recognition model with pytorch1.0 and pytorch1.1 separately and found that training speed under v1.0 is faster than v1.1.
to be more exact, i got about 2.5 batchs/sec/gpu with v1.0 while 2.0 batchs/sec/gpu with v1.1.
both experiments configurations are the same(same batch size, init seed, number of processes and so on).
i use the to realize data parallel.
and startup my training task with command `python -m torch.distirbuted.launch --nnodes=1 --nproc_per_node=8 train.py`.
but pytorch1.1 got slower speed, i don't know why.
both pytorch 1.0 1.1 was installed by `conda install pytorch torchvision cudatoolkit=10.0 -c pytorch`
unreasonable memory increase (probably memory leak) while training a simple cnn with a custom mean-only batch-norm layer on gpu.
this is probably related to the module buffer, since removing the buffer stops the problem and training on cpu also seems to work fine.
i've been trying to build the caffe2 v1.1.0 release and link it statically with our application, but i'm getting a lot of undefined symbols related to avx functions.
i was trying to use gpu for some heavy-lifting pro-processing work so i wrote my own transform function.
the tranform function keeps throwing 'runtimeerror: cuda error: initialization error' whenever i use num_worker > 0. the error happens at the line when i try to send tensor to gpu using tensor.cuda()
sparse tensors can 't be used in dataloader running many workers
i cannot save and then load a custom operator, using the test code available in in pytorch 1.1.0.
cannot create a tensor using `torch.tensor` from a list of tuples.
failed to build (link) `caffe2_benchmark` target.
cannot do in-place modification of a tensor with a double slicing using `torch.uint8` (boolean mask) tensor.
different behavior of slicing tensor with slices in different tensor type
i get the following error during the backwards pass of a jitted model that i 'm training.
the trace is as follows: phofcode
after upgrading to 1.1.0, the value returned by `lr_scheduler.get_lr` is confusing comparing to the lr value inside
on an aws p3.16xlarge machine, i'm using the mixed precision training from phofurl checked in at phofurl when i run with adaptive softmax phofhyperlink with 8 gpus and apex mixed precision phofhyperlink , nccl hangs.
when i remove `--adaptive`, it works as expected (after reducing batch size to avoid oom).
if i remove `--fp16` it also works fine, so it's definitely a mixed precision issue.
sorry if this is a dup of #11672 but i haven't been able to figure it out.
it seems there is an issue with the pip installation of 1.1. after upgrading, i get an error when calling `import torch`.
torch.norm `p` argument default is ignored by jit
phofcode when tracing nn.sequential with nn.conv2d in torch 1.1.0
`cosineannealinglr` (and probably others) are giving unexpected learning rates.
traceback (most recent call last): file "<stdin>", line 1, in <module> runtimeerror: _th_uniform_ not supported on cputype for long
when trying to create a tensor of too many dimensions it simply returns an empty tensor with its shape is the dimensions i passed even though it should have contained the value `1`.
instantiating a subclass of `torch.floattensor`, `torch.bytetensor`, or `torch.booltensor` causes a **segmentation fault**, a `c10::error: unrecognized scalartype unknown_scalar`, and/or other odd errors.
instantiating a subclass of `torch.tensor` with parameters and overriding `__init__` fails with `typeerror`.
cannot convert pytorch to onnx using the latest pytorch and onnx version system config: phofcode
i tried to install pytorch, but i can 't use it.
it can 't link dynamic library libomp.dylib
in test/test_nn.py we skip 'backward' for low-precision types (float, half) because the precision is often too low to get reliable results on large embeddings.
the same test doesn't fail for dense embeddings.
there's a limit to how much precision we can expect with float and half types, but it would be preferable if they were consistent or if the difference was clearer.
product of ones is zero on cuda.
this seems like a rather common issue, but i found no mentions of it here after a brief keyword search.
i am getting error while converting my saved torch model to onnx format dummy_input, "sentiment.onnx") typeerror: forward() missing 1 required positional argument: 'hidden ' torch version - '1.0.1.post2 '
runtime error when running: phofcode error message: phofcode
after updating to v1.1.0, i get `omp: warning #190: forking a process while a parallel region is active is potentially unsafe.` from dataloader when `num_workers>1`.
this was not the case when i used v1.0.1 and v1.0.0.
using torch.jit.trace with optimize=true shows no performance difference with optimize=false the test model i used is resnet from torchvision.
i modified it to run only the features extraction (no ave pooling and fc for classification).
inference test.py python script: phofcode modified resnet.py from torchvision phofcode
tl; dr; i traced a (non-pretrained) resnet18 model in python and saved this to a .pt.
i successfully loaded this .pt in a c++ program.
model inference seems to work.
when the c++ program exits, i encounter a segmentation fault.
i asked in pt 's slack about why the pytorch profiler returns an `unsigned short` op when performing `torch.t(tensor)`, @t-vi guesses needs to return `t` instead of `unsigned short`and asked me to open this issue.
assignments like `a[:2] = x` is elided in onnx graph.
a weight parameter referenced twice causes wrong onnx weight exports.
the used by the resnet50_trainer.py caffe2 example avoids setting up a learning rate blob (doesn 't call build_lr()) if the base_learning_rate is 0: from phofcode but the resnet50_trainer.py example code tries to fetch the learning rate blob without regard for whether `base_learning_rate` was non-zero.
from phofcode so at end of a training epoch, if base_learning_rate was specified as 0, an assert / enforce fail occurs in fetch_blob() as code tries to fetch a blob that doesn 't exist: phofcode i 'd be happy to submit a pr for this, but not sure whether better solution is to qualify example 's call fetchblob(), or just assert (at top of train()) that user specified non-zero base_learning_rate.
i 'd lean toward assert as i don 't see much value in training run with lr = 0, but that leaves me wondering why optimizer codes expects / special-cases 0 in first place.
i managed to run distributed training using 2 nodes and 2 gpus each, but failed with nccl error when using 4 gpus on the 2 nodes.
the error occurs when fist calling dist.broadcast.
grouped convolution with 4 input channels, 16 output channels and 2 groups yields wrong result.
interestingly, many other combinations of number of input and output channels work fine.
hi, i found a bug while feeding big batch size to my model.
the code works fine if i remove `bn.eval()`.
i have checked similar issues, none seems to solve the problem `runtimeerror: this error may appear if you passed in a non-contiguous input.`
`torch.multinomal` raises runtimeerror: cuda error: misaligned address on certain conditions.
encounter "runtimeerror: called_from_autograd assert failed at please report a bug to pytorch.
(mark_variable_ready at when using distributeddataparallel with torch.no_grad() in the lastest nightly build.
after initializing a tensor with `requires_grad=true`, applying a view, summing, and calling backward, the gradient is none.
this is not the case if the tensor is initialized using the dimensions specified in view.
our autodiff infrastructure have bugs on double backward for early expiration of grad_accumulator for some formulas (i.e.
it gives error like below phofcode this is happening on master now, the bug is kinda complicated to trigger: when we add an non-trivial ad formula, sometimes non-trivial models will throw the above error, while in pure autograd mode it runs fine.
importing the open3d python package after importing pytorch causes the above crash.
mse loss between tensor a with shape (n, 1), and tensor b with shape (n) is different than loss between tensor a with shape (n,1) and tensor b with shape(n,1).
this concerns the method: torch.transpose(input, dim0, dim1) tensor according to the documentation, phofurl : > the resulting out tensor shares its underlying storage with the input tensor, so changing the content of one would change content of other.
however, transposed versions of original tensor are not changed when original tensor 's data is changed via "set_" method (specifically).
building a simple application with libtorch built from source results in a linking error phofcode
not working on some osx machines
(cpu) is very slow on a specific trained weight: 50x slower than using a random weight.
same shapes, same input, but: phofcode
nvcc fatal : the version ('70100') of the host compiler ('clang') is not supported using llvm-7.0
tracing a call to produces a script module where the resulting allocation is always made on the same device as `x` was in the trace, not at runtime.
if the call is made in a function/method annotated with then everything works as expected.
in case of `zeros(sizes, device=device)`, this is understandable since i can see that passed non-tensor args (the device) would be considered constants for tracing, but in case of zeros_like it is not obvious.
(sorry, not 100% sure this a bug but behavior isn't entirely expected.
perhaps warning warranted for traced `..._like(x)`?)
using `torch.jit.trace` to export the model, but the size of the serialized model file is changing every time.
i have adapted the mnist.cpp example to work with two gpus using however, the loss does not decay, and the accuracy never improves beyond 0.114 (the original single gpu example reaches around 0.99 accuracy).
i want to slice a tensor by a variable range such as ` x[:y]` where `x` is a tensor and `y` is a 0-dim tensor.
since normal way of slicing like the above can 't be captured by jit trace, i opted for `narrow` which causes segfault.
many projects use qt for ui, but when compiling such code a special keyword "slots" is defined, which conflicts with the 'slots ' function defined in ivalue.
since ivalue.h ends up being included when including torch headers, this prevents using torch in any code that also does qt stuff.
even though this is not the fault of torch, since qt is a popular cross-platform gui library, it would probably be great for usability if that function is somehow renamed or some other smart trick used.
when using a jit model twice at the same time, for the first time, i get a crash here.
poolwindow::reserve seems to try to access a vector out of range.
the responsible code was added in phofurl backtrace: phofcode
if we export `nn.rnn` module to onnx, the `activations` attribute is written is all lower case.
several backends assume these strings to be case-sensitive, where this can be a blocking issue during runtime.
there is an open issue ( phofurl in the onnx repo to make this this explicit in the spec.
pytorch's onnx exporter should also consider writing strings with correct case in `activations` attribute.
hi i 'm running `preprocess_stage2.lua` code phofurl phofhyperlink .
but getting below error phofcode
i 'd like to print the return of the `gc.get_objects()` function (i have memory issues) but i can 't.
whenever i do it, i get the following error : phofcode but what 's more strange is that using the length are affecting it to a variable (not printing it) doesn 't produce an error.
we usually use `for m in self.modules()` loop to initialize weights and biases.
however, `isinstance()` is not working properly when the module is jit-supported (all modules except for `unsupported torch.nn modules` phofurl
arrayref.h c10_deprecated_using error: attribute does not apply to any entity win10, cuda10.0, vs2017 15.7.6, pytorch 1.0.1 source install
pytorch 's conda package depends on the `cudatoolkit` package, but still loads the system `libcudart`/`libcublas` if available.
not sure if this is a bug or a known limitation.
i get a silent crash in the onnx exporter when i work with a large model (> 2gb total size of parameters).
the behavior i 'm seeing is that the exporter returns control without reporting any error and an empty onnx file is created on disc.
working through the suggested pytorch gcp base image, the wrong version of cuda was installed.
i 'm moving to pytorch 1.0.1 recently.
but i got the error below when i use runtimeerror: the derivative for 'weight ' is not implemented my code is work well with pytorch 0.4.1 i 'm used cuda 9.0.176, cudnn7.4.1, ubuntu 16.04(gcc is 5.4.0)
the backward of torch.pow() in a traced module produces an error when the input is on cuda.
> runtimeerror: expected tensor to have cuda backend, but got tensor with cpu backend (while checking arguments for cuda_tensor_apply4) (checkbackend at the backward is defined in i think the reason is that the backend of the first argument of torch.where() is always cpu.
sometimes my vector is only 1 element, for example: in = { };` when calling torch::stack on this tensor vector when using cuda, i get a crash.
> cuda error: invalid argument (copy_device_to_device at > (no backtrace available) workaround looks like this: `auto test = in.size() == 1 ?
classes _instancenorm, groupnorm should throw an error if number of elements over which the statistics are computed is 1. e.g.
if you have a batch with shape [64, 256, 1, 1], instance norm and group norm (with num_groups=256) will compute the statistics over last two dimensions, which is just one element.
the effect of this will be that the output of the normalization operation is an all-zeros tensor.
arguably, if you want your operation to output an all-zeros tensor there are easier ways to do it.
on other side, if this mechanics is triggered unawaredly activations of network will become all zeros, which would effectively prevent any learning.
in _batchnorm, computing statistics over 1 element tensors triggers a valueerror
according to the documentation, the input to should be: - x (a 2d mini-batch tensor) - y (a 1d tensor of target class indices, **0 <= y <= x.size(1)**).
for cpu tensors, it will raise runtimeerror when target (y) is out of range, however that seems not the case for gpu tensors.
the tracer in onnx exporter is failing with an assertion error in the exporter.
i get some error when i try `python setup.py develop` or `python setup.py build develop`
cufft plans are context-specific and need to be used on arrays from the same context.
pytorch 's cufft plan cache uses the arguments to the plan-creation call to generate a hash, but the plan 's cuda context is not used as part of this hash.
so, for example, if you call `torch.fft` on some data on gpu 1, then call `torch.fft` on data of same shape/type gpu 2, you get a cache hit and pull up plan from gpu 1 and then attempt to use it gpu 2, resulting in a cufft_exec_failed.
repeated calls to using the nccl backend lead to out-of-memory errors, even when the "live" set of tensors is small.
`[ 34%] linking cxx static library ../../../lib/libprotoc.a [ 34%] built target libprotoc makefile:140: recipe for target 'all' failed make: * * * [all] error 2 failed to run 'bash --use-nnpack --use-mkldnn --use-qnnpack caffe2'`
all tests in test_c10d pass if run individually in separate commands, but 8 fail consistently if run together in one pytest command.
they all hit the similar error as shown below: phofcode the failed ones are: phofcode
backprop on weights generated with torch._weight_norm that are zero filled yields nan gradients.
i don't see a way to add an eta to the norm to prevent this.
embedding layer does not check input range when running on cuda
queues of operations assigned to different cuda streams are executed in series, not concurrently.
i changed the size of a tensor input so that it was where normally it is dynamic size.
other sizes all seem to work but i have not done a thorough test.
the model was traced in python and loaded via libtorch in c++.
stack trace is as follows: phofcode output is as follows: phofcode
i have code set up to delay load cuda-related binaries as they tend to reserve a lot of memory.
when attempting to unload the delay-loaded libraries, when caffe2 is included, i receive a crash.
the call stack looks like this: phofcode at time of crash there is one listener with default deleter.
the operator it is working on is operatordefiterator with schema name with five arguments (input1, input2, output, legacy_broadcast, axis).
it seems like torchscript does not handle ternary conditional op from python (`[on_true] if [expression] else [on_false] `) correctly.
i exported a jit model on gpu, then try to load it and run it on cpu, using c++ frontend.
if i create multiple threads, each owning its own built in pytorch module such as `torch::linear`, i don 't get thread safety related errors when running the networks concurrently.
however, when i implement my own module, i get segmentation faults.
when compiling a c++ extension on windows, in cpp_extension.py, calls with the default argument "c++" if cxx is not set: 'c++ ')) at another place (in the _check_abi function) the default is correctly set as "cl": elif is_windows: compiler = 'cl ') else: compiler = 'c++ ') should also use the default value "cl" if is_windows.
i get the following error in the latest nightly when attempting to convert a gpu blob from opencv to torch: > attempted to set the storage of a tensor on device cuda:0 to a storage on different device cuda.
this is no longer allowed; the devices must match.
code that creates this issue: phofcode **note: i only have a single cuda gpu on this system!
** the default cuda device is negative 1, which does not match actual cuda device of 0. however, this code previously worked fine.
the pip package does not ship mkl with it and mkl is required for fft support on cpu.
running a 2d convolution (no padding, stride=1) on a 3x1 input, sliced from a 3x3 tensor, and a 3x1 weight, sliced from 3x3 tensor.
when trying to run it on cpu the convolution result is wrong, but when moving to gpu (by adding .cuda() after the tensors), the result is correct!
there are two related issues: 1. repeatedly pulling parameters from a pytorch model results in non-identical parameter values.
2. repeatedly running a pytorch model (cpu) on the same input does not produce identical outputs.
tried running python setup.py install and it failed when trying to link
building pytorch from master (`python setup.py bdist_wheel`) does not install libraries or `libmklml_intel.so`).
however these libraries are built and located on
i am getting different derivatives when i compute `g(a)` via `a -> g(a)` versus `a -> ll' -> g(ll')`.
the derivatives are off in a predictable way, and it's easy to correct (~2 lines of code), leading me to believe this is a bug.
calling torch.onnx.export on a module that contains a torch.min() or torch.max() or torch.ceil() operations fails with the following errors: > typeerror: min() missing 1 required positional argument: 'dim_or_y ' (occurred when translating min) > typeerror: max() missing 1 required positional argument: 'dim_or_y ' (occurred when translating max) > runtimeerror: onnx export failed: couldn 't export operator aten::ceil
when setting i expect torch to compile with all cuda architectures available to my current version of cuda.
instead, it attempted to build for cuda 2.0. see error: nvcc fatal : unsupported gpu architecture 'compute_20'
after having built a static libtorch.a and loading a model, i get the following exception: c10::error: deviceguardimpl for cpu is not available.
fatal error lnk1248: image size exceeds maximum allowable size (ffffffff)
i am trying to use distributed.all_gather to gather gradients in multi nodes.
but i found the all_gather function stuck and no error throw
attempting to parallelise embeddingbag with inputs being a tuple (1d longtensor of indices, 1d longtensor of offsets) to multiple gpus results in incorrect chunking of the batch and throws `valueerror: offests[0] has to be 0, i.e., the first sequence in the mini-batch has to start from position 0.`
int ndarray becomes normalized floats when converted to tensor
i am trying to train a production size network that has a set of large convolution filters ( millions of parameters , kernel size of 20+ ) when i train with a smaller dev version of the network - still tens millions parameters everything is fine.
when i inspect the gpu performance i can see that the ram is fine.
the issue seems to be a peak in the copy.
more interestingly it looks likes copy gets stuck on zero for moment and then peaks too high which causes process to die.
i've recently discovered an issue with memory not being freed after the first iteration of training.
it's not a leak, as memory usage stays consistent after the second pass through the loop.
it appears on both cpu and gpu, however it is much more significant when running on cpu.
the issue seems to come from the either backward or optimizer.step(), as removing their calls provides stable memory usage.
i ran into this while attempting to train a rather large model that uses pretty much all of my available gpu memory.
it will complete first iteration successfully, then oom during second.
an error occurs during building of libtorch with torch_static on for windows error c2491: definition of dllimport function not allowed error c2491: definition of dllimport function not allowed error c2491: definition of dllimport function not allowed c2491: definition dllimport function not allowed
repeated evaluation of a 2nd derivative of a custom autograd function gives incorrect results.
incorrect loading of weights for jitted rnn modules when using cuda.
weights seem randomly changing from time to time.
model is broken and outputs garbage.
loading model with `map_location='cpu'` fix the problem.
there is a mismatch in semantics between torchscript and pytorch when indexing with a list of integers.
in pytorch (which follows numpy semantics), the list is converted into a `int64` tensor, and advanced indexing is performed.
in torchscript, the list is treated as a tuple (in pytorch semantics), and it dispatches to several calls to `select`.
so phofcode becomes in torchscript phofcode which not semantics-preserving.
i 'm hacking away at flair ( phofurl to create a minimal script that can be jit 'd via torchscript and can run predictions.
i realise my work is not complete yet but i was iteratively working through the errors being reported until i received the following error: > assert failed at please report a bug to pytorch.
wrong batchnorm2d momentum value in onnx export.
whatever momentum is set in pytorch, it 's always `1.0` in onnx export.
jit fail with tracingcheckerror with tracing model with layers created after init.
`logdet` returns `-inf` when it should be possible to calculate a well defined log-determinant.
i haven't confirmed, but this is probably because this line phofurl is not stable and is used in the following if/else phofurl
caffe2 config is only written when using shared libraries as below: phofurl however, there is no such condition on torchconfig, so regardless of whether shared libraries is on or not, it attempts find_package(caffe2): phofurl
when using find_package(torch config) and attempting to use the resulting torch_libraries, i find that c10 is not linked in.
the result is my programs will complain about undefined references to all c10 symbols (such as c10::error, which is thrown from torch::jit::load in libtorch).
reflective padding throws a runtime error when padding is bigger than one of the input sizes.
runtimeerror: argument #4: padding size should be less than the corresponding input dimension, but got: padding (46, 46) at dimension 3 of input [1, 3, 128, 36]
i discovered that the embeddings of words slightly change after calling `optimizer.step()`, even though the embedding was not part of the back propagation chain and its gradients were zero.
interestingly, this only happens after the word was seen once, but occurs at every update afterward.
if i use sgd instead of adam as an optimizer, my code behaves as expected.
to me this smells a lot like a bug, but if this is intended behavior, could you please explain why it is happing and what motivation for it is?
**i call `zero_grad()` at beginning of every batch, both for optimizer and model itself!
build from source in virtualenv causes error below on ubuntu 18.04.
when building with mkl 2019.3 installed (this is now the default version on conda) i'm getting the errors related to deprecation of some functions: phofcode
on my computer (with gtx1080ti, cuda 10) and with today's master, i'm getting extremely slow (60 sec?)
`sudo perf top` (thanks, @soumith) indicates that this is due ptx-jitting.
using nccl seems to produce sm_30 assembly in the libcaffe2_gpu.so, which i don't get when not using nccl.
if i subtract some scalar before use reflectionpad, the model cannot be converted.
when i use the nccl backend, results in a `nccl error` when called from multiple threads (each thread uses a separate process group).
`broadcast()` works fine from multiple threads when using the gloo backend; nccl backend works fine in the same environment when using a single thread.
calling `torch::cat` with an illegal concatenation dimension in a pybind11-exposed c++ function results in a malloc error: phofcode
taking `mean()` of a large cpu tensor results in severe precision loss.
i would like to know if the following behavior is known and normal.
torch.norm does not work as expected when p="nuc" , x is a 4 dimensional tensor, dim=(2,3)
with low temperature produces samples (on the boundary 0.0 and 1.0) for which the distribution gives `log_prob` value `nan`.
ctcloss doesn 't provide the correct gradient when the target sequence is empty.
it seems that `~` operator does not generalize to different tensor shapes under jit.
i have recently reinstalled spacy but when i try to import it i get an error from torch:
hi, i have tried to use to train a model on multi gpus.
my model * shares * weights between several "child networks".
in each training step, i want to train only one child network and update its related parameters in the shared model, and other parameters are remain unchanged.
the code can run on single gpu.
however, i met "typeerror: _queue_reduction()" when using as the parallel model.
i have found that issue #13273 also report the same error, and have tried to run the code on pytorch-nightly build and use but error still occurs.
want know how fix this error, how train model with unused parameters on multi-gpus.
the gradients of the conv1d layer are blowing up when dropout is used after the convolution.
i noticed this after migrating my code.
the problem occurs on pytorch 1.0.0 and 1.0.1. the problem does not occur if: 1. dropout is taken out 2. in pytorch 0.3.1
in the context of using pytorch to produce scalable and fast rl, i am playing with c++ extension that consumes python-produced tensors.
in that context, i create a promise` and retrieve a future via `primes.get_future()`.
i then `std::move` the promise, which will be fulfilled via a call from python, and wait on the future.
when the future 's status is ready i retrieve tensor via `future.get()`.
in python, have another thread which calls into c++ to set values for promise.
the relevant code for retrieving future 's result is: phofcode this works fine on macos, using clang and pytorch-nightly (installed via conda).
on linux, using gcc pytorch-nightly (installed conda), it iterates a few times then gets stuck with *future in ready state* at `future.get()` call, not reaching "all good" line: phofcode
i have a python script to save a mixture of both traced and scripted `torchscript` as `.pt`.
but on execution, it's thrown index error.
i wrapped the `@script` functions into a scriptmodule class and everything is working fine now.
i got non-deterministic results when i run my model with nn.lstm with its dropout > 0 on gpu, even when i seeded everything and = true.
also, if i set = false, the results are deterministic.
`torch.gesv` segfaults if its arguments are on different devices.
i am trying to load my monodatasets for xlm and am stumped with this pickle data issue.
i have attempted to pass various arguments including expression ascii, latin1 and utf-8 ` data = torch.load(path) file line 358, in load return _load(f, map_location, pickle_module) file line 532, in _load magic_number = pickle_module.load(f) _pickle.unpicklingerror: pickle data was truncated`
`masked_scatter_` alters the object even after an error.
i compiled magma 2.3.0 from source successfully, and compiled pytorch 1.1 from source successfully where it used magma.
when i run my code with the python api, torch.pinverse(tensor) seems to work, but when i run it with the c++ pytorch api torch::inverse(tensor).
it fails with `error in magma_getdevice_arch: magma not initialized (call magma_init() first) or bad device`
the following simple script: phofurl crashes with the following traceback: phofcode
while profiling my code, i noticed millions of calls to cudagetdevice which were slowing down my code significantly (it's an rl use case and the model i am using is small).
i have a minimal repro that demonstrate that a single forward call on nn.linear() is triggering 11 cudagetdevice() calls and 3 cudasetdevice() calls.
caffe2 inference through python bindings has huge slowdown when put in docker , depending on how many "logical" cpus are exposed by the host, even if execution threads are set to one via `omp_num_threads=1` and `mkl_num_threads=1`.
unsupported type of tensor c10::half error in spatialbn operator when running resnet50_trainer with float16 type on v100, cuda10, cudnn7
c++ api `torch::nn::gru` fails when `bidirectional=true`.
(it works fine when `false`).
error occurs here phofhyperlink i tried with different options; the changing the number of layers from 1 to 2 and switching `batch_first` parameter, but it yielded the same outcome.
when the binary not operator `~` is used in a module, which is then jit traced, it causes a crash when the resulting jit module is moved to and executed on a different device type (e.g.
this crash only occurs in the jit module, but not in eager mode.
using `1-tensor` to negate the bytetensor does not show same issue in jit.
phofcode assert failing when trying to train a pytorch model where only a part of the model is jit traced.
forward works without a hitch, backward gives this error
i'm observing some weird behaviors with the sparse mode of nn.embedding.
for instance, with the following code: phofcode i'll get phofcode as expected.
but if i repeat the fwd/bwd line twice: phofcode i get random outputs, such as: phofcode i guess this is not expected?
also i noticed that if the input is different, it behaves very differently: returns:
similar symptom to #15478, when using `torch.jit.script`, calling `torch.ones_like()` with dtype starts to give errors while previously it works.
converting the phofcode operator from phofcode to phofcode using torch.onnx phofhyperlink and onnx-tensorflow phofhyperlink throws an error
pytorch's implementation of the argmin() function returns incorrect (maybe rather unexpected results) when using the argmin() and the min() function on tensors with dimensions where the minimal value appears multiple times.
index with said value, whereas one would assume that very first occurrence is reported.
this is inconsistent with numpy's, eigen's, c++ stl etc.
the `cosineannealinglr` throws a `zerodivisionerror` after being applied for more than one epoch.
also, the learning rates returned by the `cosineannealinglr` do not match the internal learning rates of the passed `optimizer`.
the resnet_50 trainer fails when parameter num_channels 1 is provided: phofcode
`torch.randn` silently fails when the output has more than 231-1 elements.
the output remains uninitialized (often all zeros).
`torch.mv` causes an "illegal memory access" when multiplying a matrix with more than 231-1 elements.
note that each dim of the first matrix can fit in an `int`.
this is likely a bug in cublas.
either cublas should be fixed or pytorch should issue multiple calls to `cublassgemv`.
creating a torchscript scriptmodule class deadlocks when done in a separate thread.
building from source fails with nvidia driver 418.43, cuda 10.1, on ubuntu 18.04.
i was using one of the packages written with keras tensorflow backend.
i wrote a `dataset` class, which invokes a function from the package via `__getitem__` and it worked fine, by testing the `dataset` and / or the dataloader outside model.
clearly, to reduce memory that `dataset` needs, i am implementing function provided via keras tf-backend in `__getitem__` in a class i defined for its implementation, to be able to do a few manipulations to string called via `__getitem__`.
however, dataloader halts when implement it during testing, have not tried training, as am measuring chance-level performance prior training.
have tried this scenario with lots of other `dataset` classes, i.e.
test prior train, some provided by pytorch, and others wrote myself and everything went well.
not sure if this is problem with using pytorch keras tf-backend, or invoking `__getitem__` twice, one for class that invokes function of keras tf-backend via `__getitem__`.
when a `binomial` instance is initialized with a large logit, effectively setting the distribution mean to 1, `log_prob(1)` returns `-inf` whereas it should return `0`.
this is likely to occur when a neural net outputs the logit and tries to push for a probability of 1.
if a model contains dilated convolution and uses jit trace to export to torchscript module, the exported module will run slower in c++ inference than in python on cpu.
for an internal model the slow down is significant, where python inference takes ~10s with `omp_num_threads=2`, and c++ inference takes ~31s.
when a script module is loaded in c++ and used in a multithread environment, the result of gpu forwarding is non-deterministic, even if one assigns each thread a seperate module instance.
this behavior does not appear when running in single thread environment, or with module::forward() call locked, or with cpu backend.
got the runtimeerror: cudnn error: when execute a cnn model.
it only appears when i have multiple gpu and the batch size is too large ( for my task it is ok for 128 but not 256).
and the gpu memory still has some space phofcode
i apologize for the title but i do not know how to briefly describe this kind of situation, the code will speak for itself.
inconsistent results of torch.argmax with tensors that have duplicated values
/ unexpected behaviour i have a custom subclass of `torch.tensor`: `packedsequences`, which is meant to pack together sequences of variable length.
i supply my `dataloader` with a custom `collate_fn` which returns `packedsequences` objects just fine.
when i sample a batch, i find my `packedsequences` objects have been converted to `torch.tensor`, losing the elementary extra data in `packedsequences`.
running pool.map() hangs (torch 1.0.0)
`numpy.matmul` and `torch.matmul` (after converting from numpy using `torch.from_numpy`) produces different results.
the maximum absolute error is of the order 10-4.
there appears to be some regression recently, the following script produce a error saying bad optional access, it used to work several days ago.
occurs on **windows 10** while building with **python 3.7.2 (32bit)** and **visual studio 2017 (version 15.9.5 toolset 14.11)** for **cuda 9.0**.
phofcode **meanwhile, pytorch is installed successfully using python 3.7.2 (64bit).
: traced lstm works as expected, but when saving it to disk and loading it again outputs nan and incorrect values.
tracedmodule 'to' attribute doesn't work for tensors created on forward.
when passing a tuple genericlist] to jit script module in c++, it goes to line 145 in [incompleteinfertype phofhyperlink .
then in fmap function call, is called recursively, then an `at_error("type cannot be accurately recovered from this ivalue.
")` is thrown because genericlist is not handled directly in this function.
how to resolve the problem of using dataparallel giving `runtimeerror: can 't start new thread` error when threading.active_count() is only 6?
i have tried using python 3.5 and python 3.7 and both give the same error.
i am using cuda 10.1 with the latest pytorch.
it occurs when i use 1 gpu or 2 gpus with dataparallel.
there is no problem if i run using 1 gpu ** without ** dataparallel.
face this problem even with the imagenet code in examples repository of pytorch.
the way use dataparallel is to add line `model = nn.dataparallel(model)` in my code.
what else do need to do?
assigning a long tensor to a float tensor silently fails.
when i store large numbers in half (near the boundary of what half can store) i get some >1 rounding behavior.
when training a cnn, after a while either the process gets killed or the system hangs.
the net is defined as follows: model = torch.nn.sequential( torch.nn.conv2d(3, 8, (3,3)), torch.nn.relu(), torch.nn.conv2d(8, 8, (3,3)), torch.nn.relu(), torch.nn.conv2d(8, 16, (3,3)), torch.nn.relu(), torch.nn.conv2d(16, 16, (3,3)), torch.nn.relu(), torch.nn.conv2d(16, 16, torch.nn.conv2d(16, 8, torch.nn.conv2d(8, 8, torch.nn.conv2d(8, 1, (3,3)) ).cuda() in my system this crashes after processing around 800 images.
i get "runtimeerror: cudnn error: when trying to move a rnn layer to the gpu by calling ".cuda()".
when a function takes in an unused variable, jit graph is created but conversion to onnx fails.
onnx loop produced by `scriptmodule` and `onnx._export` does not conform to onnx loop spec: the second input to onnx loop--the conditional variable `cond`--should be `tensor(bool)`, but i got `tensor(int64)`.
calling `torch.onnx.export` on a module that contains a `torch.sort` operation fails with the following error: phofcode
dividing by phofcode results in core dumped (instead of some catchable exception)
i like to report a weird behavior in 1.0 that i could resolve by only going back to 0.4. i am training a network on quite a big data set (35 gb) and use 4 gpus by applying the command further i am having a big batch size (>1000) which makes the command have num_workers=16 in the dataloader necessary.
now the trouble begins: every epoch my /dev/shm increases by ca.
at some point it is full and my process crashes.
tried 1.0.0 and 1.0.1 but both showed this bahaviour.
pytorch 0.4 does not have this problem, /dev/shm is never above 1gb.
during instantiation of a custom module, parameters do not register if they are initialized with a .to('cuda') function call on the parameter level.
a simple 2 layer linear model with the correct masks from phofurl fails the autoregressive property tests.
the input gradient is 0 even when there is a connection from the input to the output.
the current libtorch package from phofurl misses a couple of .dylibs which were present previously.
compiling a minimal example works, but at runtime, several .dylibs are missing.
when trying to export the adaptiveavgpool2d node to onnx with the export fails, due to an assertion error being thrown.
after converting an rnn from the pytorch example phofhyperlink to jit scriptmodule, it fails to convert to onnx.
`__doc__` is missing for many global operators (`torch.log_softmax`, `torch.logsumexp`, ...).
doesn't output deterministic results on segmentation outputs / labels, when using reduction other than 'none'.
cpu does give a consistent behavior.
i tried to run the pointnet module on pytorch phofurl phofhyperlink but got the error as shown in the title.
i was playing around with the `autograd` and "intermediate gradients".
and discovered strange behavior (as for me).
looks like by default `autograd` is disabled inside hooks (using `register_hook` to extract intermediate gradients).
to avoid a kind of "backward inside backward"?
generated `__init__.pyi` contains default values (some of them are invalid), due to conventions phofhyperlink they should be replaced with `...`.
the argument dim=-1 doesn 't work for torch.cross, despite that it is the default argument described in document.
the flip method of a tensor does not allow to flip the last dimension through the index -1. the output: runtimeerror: expected flip dims axis >= 0, but got min flip dims=-1
i am observing confusing (and probably errornous behavior) when using *= tensor operator with expand function.
i don 't think this should be an expected behavior, but if it is, there should at least be a user warning.
below is a minimally reproducible example:
see below: `pytorch` was built successfully, but when i tried to build `libtorch`, it says `cannot build libtorch: sleef does not allow in-source builds`.
coalesce() on sparse scalar error out with phofcode
i have generated and saved a model in python using `torch.git.save()`.
now i am attempting to load it into my c++ implementation for inference, however i get the error: phofcode
>>> import torch traceback (most recent call last): file "<stdin>", line 1, in <module> file line 84, in <module> from torch._c import * importerror: dll load failed: the specified module could not be found.
if i use distributed training, sometimes one of the processes dies for a variety of reasons (maybe out of memory, a cuda runtime error, etc).
in a single gpu job, the experiment would crash.
in the distributed setting, the remaining processes often freeze and wait endlessly, so job remains alive continues to consume gpu resources, even though it is actually dead.
namedtuples prune the tensor representations too much.
i am converting my model to torchscript in order to be able to save it and load it in c++.
after solving various errors that arose along the way, i am left with a _runtimeerror: arguments for call are not valid:_ which i do not know where it originates exactly.
when i try to install from source i get: phofurl
i trained a model using pytorch python implementation.
this model was saved using `torch.save()` .
i then try to load this model on my c++ libtorch implementation using which fails.
i also tried using by previously loading the model first as a ifstream binary, in which case this loading fails with a similar error.
an error occurs during loading model in c++ saved in python via torch.jit.scriptmodule.
in python, my model works as expected.
i would like to swap elements `i` and `j` in a pythonic way as follows: phofcode however, what this ends up doing is replacing element `i` with `j` and not modifying element `j`.
pytorch throws an error when attempting to convert an empty numpy array with non-trivial size using the `from_numpy` routine.
if we use nn.batchnorm1d() with (very) large batchsizes and torch.cuda.floattensors, we get an "invalid configuration argument" error.
auto-complete / type information for torch.cuda / torch.device are missing, as reported at phofurl
hello, ive noticed a problem when using workspace.predictor to execute models exported from pytorch with the onnx and the caffe2 mobile_exporter, as shown here: phofurl an error which reads blobistensortype(*blob, cpu).
blob is not a cpu tensor: [blobnumber] is generated when trying to execute a model which has a dropout module in it (e.g.
mobilenetv2), with blobnumber being the id number of the dropout blob in model (verifiable by printing it in human-readable form).
i dont know if theres any solution for it besides than removing dropout module when building model (which ive tried and works).
it specially affects when trying to run model inside an android app, as android studio caffe2 code uses predictor to execute models imported from protobufs.
this issue has been mentioned previously in old caffe2 github repo: phofurl
[jit] cannot index into tuple with non constant integer.
constant array turns it the array into tuple
tests fail on macos 10.13 when compiling with cuda.
the `test_cpp_extensions` tests are unable to find `libcudart` due to looking in an incorrect path (possibly coded for linux).
when generating random integers over the full range of `inttensor` and `longtensor` (-231 to 231-1, and -263 to 263-1), only `inttensor` on cpu works as expected; the other three combinations either crash or do not produce actual random numbers.
this seems to be at least partly due to integer overflow, as `max-min+1` of an integer datatype cannot by definition be contained within the same datatype.
according to the extending pytorch phofhyperlink doc page, optional arguments are allowed in a this works well when passing the optional argument as a positional argument, but fails when passing the optional argument as a keyword argument.
the addmv performance for 3072 * 1024 is 2.8x worse than executing 1024 * 1024 3 times.
when the input of the bidirectional parameter is _non-bool_, the behavior in v1.0 is not coherent to that in v0.4.
specifically, if you pass `bidirectional=true`, everything is fine.
however, if you pass `bidirectional=1`, there will be an error asserting a type mismatch.
this leads to a huge pain when switching code from v0.4.x to v1.0.x because the error message does not point conversion issue.
an update could be either add type conversion like line 113 in `rnn.py` in v1.0.1, or add an explicit warning on type of this parameter before error message.
hello, i have a problem when i try to build pytorch on windows 10. i have vs2017 15.9.6 installed, cuda 10, python 3.7 64 bits.
i have anaconda installed too.
hi, i'm trying to pass a dictionary to a jit model.
it fails when checking that the input type matches the schema, in the `c10::issubvalueof` or method.
the stack trace is as follows: phofcode
unable to cast .item() to int.
there is no way to use .item as an int .item return a number not int
msbuild : error msb1009: project file does not exist.
switch: all_build.vcxproj cmake error at (add_subdirectory): the source directory does not contain a cmakelists.txt file.
as per title, attempting to install pytorch-night in a conda environment shipped with python 3.7 pulls pytorch py2.7, and for extra fun breaks also the environment by doing: phofcode as you might imagine, hilarity ensues after attempting to utilise the environment in any way.
process crashes with segmentation fault when calling conv2d from multiple threads.
the tensor.clamp function returns the upper bound when applied to a nan array on the gpu.
on the cpu it returns nan instead.
when i execute `tensor.resize_(-1)`, i get a run-time error message that tells me to report the bug: `runtimeerror: storage_initialized() assert failed at please report a bug to pytorch`.
because `-1` is not a valid argument to `resize_()`, it is reasonable that we get an error.
however, the above error message seems to suggest that this error is not handled properly in the source code.
i wanted to write a small c++ extension and compile it via setuptools beforehand as mentioned in the tutorial.
however there seems to be library issues on my mac.
the latest xcode command line tools are installed.
when trying to perform batch cholesky decomposition of a singular matrix on the gpu, a tensor with nans is returned instead of raising a `runtimeerror` as on the cpu.
@property fields modules are not added to the `module`
memory consumption keeps increasing monotonously when using `backward` with `create_graph = true`, inside a loop.
even we call the eval() before the serialization, the loaded model 's training flag is still true.
resnet50 inference is 20 - 65% slower on pytorch 1.0.0 and 1.0.1 vs 0.4.1 on cpu with `omp_num_threads=1`, and ~~2800% slower without `omp_num_threads=1` (8 core cpu), although these are probably two separate issues and i'm personally more interested in `omp_num_threads=1` behavior because it gets maximal use of available cores regardless of the version used~~ (edited: updated for 1.0.1, all timings below are very similar between 1.0.0 and 1.0.1).
use multinomial on cuda without replacement, it generates repeated items occasionally.
when using uniformly-distributed random number generation, especially using `float32`, over a range including 0, the sampling code ignores the extra precision of floating-point around 0, leading to very bad sampling.
the generated floats also have at most 24 (`float32`) or 53 (`float64`) bits of entropy.
**consequence 1:** multiplying any pytorch float32 `uniform_(0,1)` by a large integer like `2**33` is guaranteed to give an integer.
**consequence 2:** it is actually possible to generate an exact `0.0` using the `float32` ** `uniform_(0,1)`, ** with probability 2**-24, whereas that should actually have been 2**-149.
**consequence 3:** it is not possible to generate a `float32` strictly between `0.0` and `2**-24` with `uniform_(0,1)`, whereas it should have been possible with probability 2**-24.
if `_process_next_batch` gets an exception that 's of type errorkey, the exception message is rendered as binary - i.e.
new lines are not respected.
a floating point exception is thrown when one mask-slices a two-dimensional tensor with a one-dimensional all-false boolean tensor.
pytorch's distributions lacks a fast method of generating uncorrelated normally distributed values.
multivariatenormal is able to be fed an identity matrix to produce this behavior, but this has cubic complexity, and will exhaust all ram on cpu or gpu when generating a large tensor filled wtih random numbers.
together with @fmassa, we observed a potential instability when i run the following snippet with cudnn.
without cudnn, it works as expected.
it 's also worth noticing that this used to work on pytorch 0.4.1, and that it works as expected on cpu as well.
when a path is given from pathlib.path into a torch.load method, the error occurs as below, `invalid file : i think it is because of the characteristics of path object that is only allowed to use like `path.open( 'rb ')`.
i have a matmul where (4, 4) matmul (4, 400k) non-contiguous tensor takes 40ms contiguous tensor takes 0.5ms profiler shows that the non-contiguous tensor launches a lot of 1x1x1 kernels image phofimage this is the profiler output for the contiguous tensor image phofimage
maybe again not a bug, but something that surprises me.
i have this matrix here phofhyperlink and i'm trying to subtract the mean over the columns from each column.
the result is that there is a substantial difference in the averages computed by pytorch and by numpy, leading to different result, which bites me further down my processing.
the difference between the results is up to which is a lot in a matrix that consists of number < `0.05`.
doing backpropagation on `torch.sparse.mm(sp_mat, mat.t())` gives the error `runtimeerror: expected object of backend cpu but got backend sparsecpu for argument #2 'mat2'` (or the same with cuda instead of cpu).
mkldnn convolutions need continuous inputs but don't check or enforce them first reported by philip meier on the forum phofhyperlink with repro.
using instead of nn.dataparallel, the nn.crossentropyloss report errors
gradient is missing when calling torch.autograd.grad wrapped inside a function on multiple gpu 's.
(eg computing wgan gradient penalty).
calling torch.autograd.grad inline (not wrapped in a function) on multiple gpu 's returns expected behavior.
cannot compile tf c api and libtorch into the same target.
this makes migration away from tf a little bit annoying.
when users (that already use tf) are trying out libtorch, it is just more friction to have to clean up all the tf stuff.
installed in python pytorch-cpu, torchvision-cpu.
when importing: import as backend a warning is issued regarding cpu only mode.
subsequent import of : import torch then produces an importerror in python.
torch.round() seems to be rounding differently for cpu and gpu tensors.
on cpu tensors it rounds half-to-even phofhyperlink and on gpu it rounds away-from-zero phofhyperlink as shown in the example below.
i am getting a `typeerror: can only concatenate tuple (not "list") to tuple` when specifying the `output_shape` in `nn.maxunpool1d()`
on rocm builds, converting a `float64` tensor of `gpu0` to a `float32` tensor on `gpu1` gives wrong results.
if you download today's libtorch nightly build for windows w/cuda 10, the zip file is only ~400mb and contains just a few dlls, nothing else.
3d convolutional network with size > returns `cudnn error: when performing `loss.backward()`.
when using half precision convolution on pytorch nightly with = true, cudnn_status_bad_param runtime error occurs i found that when using latest pytorch 1.0, or using fp32, or use = false then this script runs without problem.
a bug in parallel.data_parallel phofhyperlink when - the batch size is smaller than the number of gpus - with some keyword arguments (module_kwargs) in the custom forward function.
flip is about 3x slower than advanced indexing, even though advanced indexing is a more general operation.
i have tested this on cpu and cuda, and on pytorch 1.0 stable and pytorch-nightly.
the mseloss criteria has a strange behavior when used with two tensors of different sizes -- i would expect this to throw an error.
instead it does... something else.
can not serialize a script module including sequential to a file.
on gpu crashes when batch size >=
reducelronplateau fails when the variable passed to `.step()` is reused outside the lr scheduler.
i get an error message of "no schema registered for constantofshape with domain_version of 9" when exporting an onnx model to caffe2.
when i use half precision floats my matrix multiply operations do not return the correct answer.
when i switch to 32 bit floats everything is fine.
c++ frontend is unable to support
if i use torch.where to replace nan values in a tensor with a constant, the gradinets still become nan.
jit is unable to append a `tuple[tensor, tensor]` to a `list[tuple[tensor, tensor]]`
scriptmodule is not able to take optimize=false as a flag when you have pytorch_jit=0
scriptmodule is not able to have a tensor as an attribute
after register a backward hook `myhook(module, grad_input, grad_output)` of `torch.nn.linear`, and call `myhook`, it seems that the `grad_input` has an unexpected order/existence of gradient tensors of `(grad_of_linear_output, grad_of_linear_input, grad_of_linear_weight)`, which are respectively gradient tensors wrt outputs of `linear`, inputs `linear`, and weights `linear`.
this is unexpected and biases' gradient is missing.
it is also inconsistent with `conv2d`, `batchnorm2d` and `relu`, whose `grad_input` return something like `(grad_of_input, grad_of_parameter1, grad_of_parameter2)`.
fail: test_stream_event_nogil (__main__.testcuda) traceback (most recent call last): file line 296, in wrapper method(*args, **kwargs) file line 120, in wrapper fn(*args, **kwargs) file "test_cuda.py", line 1736, in test_stream_event_nogil self.assertgreater(tok - tik, 0.05) assertionerror: not greater than 0.05
when trying to load a file using if `filename` does not exist, the error message is very complex and misleading.
in place op `eq_` in c++ has unexpected behavior when comparing to zeros.
this behavior is also different than python version.
i am trying to convert the format between cv::mat and torch::tensor using c++(libtorch), one crucial step of which is to permute the shape of the tensor.
however i found that in some cases the permute() function failed to manage memory of image.
after building the docker image successfully.
starting it fails throwing the following error: `error response from daemon: oci runtime create failed: container_linux.go:348: starting container process caused "process_linux.go:402: container init caused running prestart hook 0 caused "error running hook: exit status 1, stdout: , stderr: exec command: --load-kmods configure --device=all --compute --utility --require=cuda>=10.0 --pid=12024 nvidia-container-cli: requirement error: invalid expression " "": unknown `
i built pytorch from source with latest anaconda, python 3.7.2, cuda 9.2, g++ 7. it passed the compilation after fixing several compilation issues by hand.
i'm sure that pytorch found my cuda and used my nvcc.
full log is attached here phofhyperlink .
`torch.distributed` function will raise error after waiting the master process for about 5 minutes.
` returns strange results when weight tensor created by `torch.inverse` or `torch.t` operations.
when running a rl model, during training i send in a batch of tensors, into a model that has a 1dbatchnormalization layer, this is fine.
but during eval(), i send in single tensor(no batch).
training fails in this scenerio, because it says dimensions are not correct.
they are correct, because during eval() batch norm is supposed to be disabled, looking at batchnorm.py, there is check for .train mode, but it only applies to actual batch processing, there is no check for eval/train for checking dimensions.
in summary, eval supposed to disable the batchnormalization, here suggestion for fix: phofcode suggested change to this or similar (for each batchnorm1d/2d/3d etc): @weak_script_method def _check_input_dim(self, input): if self.eval: return if input.dim() != 4: raise valueerror('expected 4d input (got {}d input)' .format(input.dim())) `
out of bounds dimension errors while indexing always mention dimension 0, regardless of the dimension being accessed
legacy sparse constructor and sparse.new() can create a dense tensor.
putting extreme low negative values as the tag does not raise error
cannot load and save a `nn::module` herited model if instanciated on the stack.
i found cpu memory keeps increasing when using `dist.all_gather` in `gloo` backend.
update: it seems that `gather` and `all_reduce` have the same issue.
continued from some discussions at phofurl and phofurl running the following script gives the error **runtimeerror: assertion `self->allocator() != nullptr ' failed**: phofcode
can't index nn.modulelist in script function
whatever the state of sparse tensor support was a few months ago, one could successfully do `einsum` with one of its operands being a sparse tensor.
this no longer works in 1.0, rendering sparse tensors nearly unusable for a large set of usecases.
runtimeerror: cuda out of memory.
tried to allocate 512.00 mib (gpu 0; 15.75 gib total capacity; 14.26 gib already allocated; 362.94 mib free; 14.24 mib cached)
when the shape of weights is bigger than the shape of input, calling `f.conv2d` throws an error in aten.
small gradients with log_softmax when there should be no gradient
doc phofhyperlink says: > streams are per-device, and this function changes the urrent stream only for the currently selected device.
it is illegal to select a stream that belongs to a different device.
but it just silently change current stream on that "different" device to the given one, and no error was raised.
the context stays the same as if was not called, which might lead to unexpected behavior.
if i load convolution weights from a numpy float32 array, the result of the forward pass does not match that of a layer with the same weights loaded from a numpy float64 array or of a keras convolution layer with the same weights.
casting layer to `double` fixes discrepancy, even after casting back to `float`.
comparing convolution weights before and after casting shows that they have not changed.
torch.norm doesn 't work with "dim" as tuple ints when explicit argument "p" is passed.
i am encountering a segmentation fault when converting a cuda allocated blob of memory on the gpu into a tensor on the gpu.
the application seems to proceed as expected, but segfaults during cleanup in calls to the aten and c10 tensor destructors.
i want to use the lbfgs optimizer in c++.
my code is working fine in python and with sgd, but i get ``terminating with uncaught exception of type c10::error: a leaf variable that requires grad has been used in an in-place operation.
`torch.fmod` yields different result between gpu and cpu for large numbers.
failed to run 'bash --use-cuda --use-fbgemm --use-nnpack --use-mkldnn --use-qnnpack caffe2'
as described in the title.
is this a bug or expected?
hi, i am just running 'build.py ' through the website phofurl however, i got those errors: capture5 phofimage one is: 'fatal error c1021: invalid preprocessor command 'thcstate '.
another one is: command failed with exit status 2 ' could you please help me with this?
at the beginning of the training, the gpu memory usage is high, i.e.
after some iterations, the consumption is stable at 1.4 gb.
so i can't set a larger batch size.
when randomly initializing a cuda tensor with a manually-seeded generator using `tensor.uniform_()`, the function throws the following exception: phofcode this does not happen when the device is cpu; it works as expected then.
the released windows binaries for libtorch cuda 10 include cuda and cudnn dlls, suggesting they were built with cuda/cudnn support, but phofcode returns false.
in the past it was possible to work around this by copying files from a windows/anaconda python installation of pytorch, but this no longer works.
most torch functions throw a user-friendly exception when they encounter tensors on incompatible devices; however torch.nn.batchnorm1d segfaults instead.
forward pass on each module in an `nn.modulelist` seems to slow down with increasing number of modules.
cannot apply np.any() to a pytorch tensor in 1.0.0 with numpy 1.15.4: * * * typeerror: any() missing 1 required positional arguments: "dim"
the ram consumption continuously grows with each backpropagation step.
it can be easily checked using the official reinforcement learning tutorial: phofurl phofhyperlink
given the simple implementation (provided below) of a separable `3x3` convolution as two consecutive convolutions with kernels of size `(3,1)` and `(1,3)`, performance suddenly gets worse after `n` consecutive calls to forward (on gpu), where `n` seems to usually be in the `[150, 250]` interval.
this is illustrated by the figure below (generated by the provided snippet).
this pattern seems to hold with different channel or batch numbers, as well as different width/height.
torch::load optimizer does memory leak in cpu and gpu.
when i add `torch::save(model, "model.pt")` in the mnist example provided here phofurl phofhyperlink it causes a serialization error
a seg-fault occurs using libtorch in a qt c++ application: terminate called after throwing an instance of what(): attribute lookup is not defined on builtin: ... (more pasted below)
`1 // 0` in script does not raise error.
build on macos fails with error below.
@vishwakftw @soumith could this be related to #15334?
build on macos fails with error below.
`tensor.cpu()`, `tensor.cuda()` are not available in jit script methods despite `tensor.to(device=...)` is ok. phofcode
hello, i 'm having a problem of loading a serialized tensor from a file.
my tensor shape is 2, 5] the dtype is torch.int8 when i deserialize the tensor using torch.load(), it yell "invalid memory size".
the line that it complain is: phofurl it seem like the variable it used is destructured from here: phofurl which also came from here: phofurl so i insert `print(saved_id)` where it yell: now, print: `( 'storage ', <class 'cpu ', none)` it seem that size is negative.
under pytorch 1.0, nn.dataparallel() wrapper for models with multiple outputs does not calculate gradients properly.
i used `cmake4eclipse` to build torch c++ version 1.0 stable in windows 10. basically, i have the following cmakelists.txt to build the mnist example: phofcode
the installation goes fine but when i run my program, i get the following error: from torch._c import * e importerror: libnvtoolsext.so.1: cannot open shared object file: no such file or directory
in libtorch, my program crashes when trying to move a tensor to cuda.
i encountered a problem of segmentation fault (core dumped) when i tried to train a model of cyclegan phofurl phofhyperlink on cpu mode.
in fact, it is not only a problem with training of cyclegan, i have the same problem when i tried to train on other datasets provided by cyclegan or to test the pretrained models of cyclegan.
as requested by @ssnl , open an issue here.
the related issue report is phofurl phofhyperlink
a stackoverflow error occurs when using weightedrandomsampler with large (65k) number of samples and multiprocessing.
python interpreter dies badly with message `process finished with exit code
i'm not sure it's a bug or intended behavior, but phofcode and phofcode sometimes return different result.
i found that nn.dataparallel module always loads parameters on gpu #0 and there is same question in forum.
( phofurl i also tried torch.cuda.device context manager.
phofcode even though, it always use gpu #0. i trained the model with default cuda device (0).
however, it is expected to use gpu 1 only under torch.cuda.device context manager.
trying to build code with a current pytorch under conda fails with the following error: >importerror: torch.utils.ffi is deprecated.
please use cpp extensions instead.
when exporting a graph that computes a gradient the function export throws the error "runtimeerror: output 0 of traced region did not have observable data dependence with trace inputs; this probably indicates your program cannot be understood by the tracer."
init_process_group() hangs and it never returns even after some other workers can return.
when i build pytorch by 'python setup.py install ', i got errors as follows: phofcode
when i write a torch.jit op with thrust::sort function and use it in python: phofcode seg fault.
**if i preload the lib before import torch:** phofcode the sort function works fine.
but the at::tensor::mm will start to produce segfault.
i'm testing my code against torch-nightly to be aware of bugs and changes.
today i got the following inconsistent behavior with previous version.
as i saw no deprecation warnings in v1.0.0 available on pip, thus i assume it is a bug, not feature.
mean is declared with an argument of scalartype: `tensor mean(const tensor & self, scalartype dtype);` `tensor mean(const tensor & self, intlist dim, scalartype dtype);` `tensor mean(const tensor & self, intlist dim, bool keepdim, scalartype dtype);` but this argument generates errors when called from c++ or python (dtype not documented here)
when build cuda torch.jit op, a large library (70mb) is generated.
cmake 3.12 can't build project using libtorch.
other cmake+cuda project, such as tensorrt plugins library, don't have this problem.
following very simple code prints value of 1 to output (tensor(1., device=uda:1)); instead of 0, i expect to see.
using default stream (instead of custom) ixes the issue, but defeats the purpose of original code - copy from one gpu to several others at the same time (async), also overlapping with (unrelated) computations on these gpus.
*would be happy for any other solutions which achieve this goal?
* (likely i'm just doing it in a wrong way?)
can only guess that something odd happens with memory when x1 + 1 starts executing (see nvprof) and at the same time device-to-device copy starts happening cross-referenced from phofurl
i use git clone to download the pytorch source code, and use "sudo python setup.py install" to install but i got error like below.
when using cross entropy loss, i want to set ignore_index=255 and reduction='none' at the same time.
`nan` propagates through computations during a `backward()` pass even if it wasn't accessed at all.
get error c4146 in release mode with visual studio 2015. error "c4146: unary minus operator applied to unsigned type, result still unsigned" it occur at phofcode
when using or `torch.jit.script` moving tensors to gpu / cpu via the `.to()` method does not function.
also, the resulting error message might be wrong?
pytorch converts floats to ints when performing mixed int-float exponentiation.
it should convert ints to floats instead.
when performing convolution on inputs that are too small for the given convolution kernel, no useful error message is provided.
i received a error message of: phofcode just because i exchanged the order of two lines, which operations i think are parallel to each other.
jit is not compatible with data parallel.
so no one can train any model using more than one gpu.
data parallel is such a fundamental module.
it makes the jit totally unpractical for training (except toy models), even in 1.0 ** stable ** version.
compile failure when building from head
the function `f.grid_sample` takes two args: `inputs`and `coords`.
for the sake of simplicity i 'm going to describe this issue for the case when `inputs` represents a grayscale image and has a shape `[1, 1, ih, iw]`.
the `coords` argument has shape `[1, oh, ow, 2]`, where the final dimension of size 2 is an x and y coordinate in normalized input space, where `-1,-1` is the top left of image and `+1,+1` is bottom right.
the `[1, c, oh, ow]` output is constructed by sampling values from input at xy-coordinate specified in `coords` argument.
bilinear interpolation used when xy-coordinate (after de-normalization) doesn 't fall cleanly within a single pixel in `inputs`.
the bug has to do with behavior when a value in `coords` falls outside of range `[-1,1]`.
docs state that value should be bilinearly based on border mode (the default behaves as if entire input image was surrounded with zeros).
however, this fails case where `ih=1`.
modifying an expand-ed tensor (e.g.
with `+=`) gives unexpected behavior.
there's no way to do this operation correctly in place, so should this raise an error?
in numpy it raises an error.
bernoulli samples with p(1) = 0 can sometimes yield 1.
working from the output of a conv2d module, `create_graph` option on `torch.autograd.grad` fails to create a gradient with a graph for higher order gradients.
inspect.getargspec() is deprecated in python 3 (in favor of inspect.getfullargspec until 3.2 and in favor of inspect.signature since 3.3).
the same issue #14961(windows libtorch1.0 : cpp_export in visual studio 2015: error c2397: conversion from 'long ' to 'uint32_t ' requires a narrowing conversion) was closed, but it happens the same on most recent visual studio 2017, version 15.9.4. it only occurs on debug environment, and runs fine on release.
i 'm running in to an issue where `torch.gesv` accepts a `torch.size([n])` right hand side (with an `n x n` left hand side) in the forward pass, but the backward pass will fail.
unsqueezing the right hand side to `torch.size([n, 1])` and then squeezing the output gets me same size output (`torch.size([n])`), but backward pass also works.
using `torch.jit.trace` on a function that feeds inputs to lstm produces a graph with a hard-coded batch size.
this makes it impossible to use the traced function with inputs of different batch sizes.
for some reason unknown yet commit change has caused ppc64le test to go into an infinite loop.
the memory used keeps growing until system memory is exhausted or process is killed because it hits it ulimit.
torch.save always allocates some memory on cuda:0
in batchnorm2d' doc, the explanation of momentum is: = (1 - text{momentum}) times hat{x} + text{momemtum} times x_t$` where `x_t` is the newly computed batch statistics, ` hat{x}` is the estimated statistics in history.
while in my experiments, when momentum set to 0, the batchnorm operates just use newly computed statistics.
so i guess maybe following explanation is correct: = hat{x} + (1 - text{momentum}) times x_t$`
the results of f.conv2d with group > 1 is strange.
cuda-convnet2 from caffe2 contrib, which is now also installed during pytorch installation, is not python3 ready.
number of **syntaxerror: invalid syntax** occurs during byte-compiling while installing.
if you run python with the `-oo` flag, you receive a `runtimeerror` as soon as you import `torch`.
when i try to cast a traced model (traced via `torch.jit.trace` in cpu) to gpu using `.cuda()` method, it do not cast initial hidden tensor of rnn to gpu.
i 'm trying to get started with some tutorials on the c++ api of pytorch on windows but they crash in debug builds.
** crash: image phofimage with this call stack: phofcode steps to reproduce the behavior: source code: phofcode
i am running an image classification model with serverless and aws lambda.
receiving following error upon calling the serverless function; **"error in cpuinfo: failed to parse the list of present procesors in - i did not misspell this, the spelling is copied from the error message i received and appear with same spelling here; phofurl suspected it might be something with pytorch 1.0.0 so i switched back to pytorch 0.4.1 which made it work.
there is (maybe) a bug when using dataparallel which will lead to exception.
if the sample count is not divisible by batch_size, the last batch (sample count is less than batch_size) will have some interesting behaviors.
for example, if i have 4 gpus and the batch_size is 32. when the input data in shape of (32, x, y), after `dataparallel.scatter`, inputs will be splited into [(4, x, y), (4, x, y), (4, x, y), (4, y)].
if dim of input data (10, `dataparallel.scatter` will generates [(3, (3, (3, (1, y)] but when i input a (9, y) data, `dataparallel.scatter` gives me [(3, (3, (3, y)].
only first 3 gpus have valid data as input.
the last gpu not get input, which leads to exception `typeerror: forward() missing 1 required positional argument:` however, when i input a (4, y) data, `dataparallel.scatter` split data into [(1, (1, (1, (1, y)].
i think distribution for each gpu and then dispatcher to each gpus one by one.
after scattered to first `x` gpus, last `gpu_count-x` gpu have no data.
is this a bug or special design?
reported by @m3rlin45 phofcode phofcode
conv1 has unexpected results with a simple example on linux cpu with a source build.
python 2.7 errors out on printing tensor generate by traced module.
when a subset of a log_prob tensor is nan then you can select the subset that is not nan.
this should then result in a finite gradient (in many cases) when doing backprop through the distribution.
i wanted to obtain convolutional features from resnet-101.
i had already figured out how to do it, but i wanted to run a simple test to check if i am applying the correct preprocessing steps, so instead of omitting the last layer, transformed the whole network into a nn.sequential(), only get an error: runtimeerror: size mismatch, m1: [2048 x 1], m2: [2048 x 1000] at
first, this is not actually a bug, but when one uses pytorch to train a model and then convert the model to onnx which later will be used to do inference by caffe2, then different result just happened!
some operations after `.copy_()` results in the error: `runtimeerror: one of the variables needed for gradient computation has been modified by an inplace operation`.
this worked with pytorch 0.4.0.
the sample c++ program for libtorch results in an incorrect makefile because the path to libculibos.a is hardcoded somewhere as on arch linux, the default install directory for cuda is `/opt/cuda`.
**this is handled correctly for other linked libraries.
`torch.bincount` returns incorrect results on non-contiguous tensors on the cpu.
hi, i've ported my model to 1.0.0, then found out my model much slower then it on v0.4.1.
so i did some tests to locate the bottleneck.
it seems dilated conv in v1.0.0 is too slow.
in the forward function, adding new lines completely changes behavior (50% vs 85% accuracy on a binary classification task).
nccl `dist.barrier` seems to assume `device_idx = rank`.
when `jit.trace` is applied to a custom gru with cuda enabled, the call fails when seq_len is longer than 200. with cuda, the call succeeds with smaller seq_len such as 100 or 120. with cpu, the call succeeds even with seq_len >= 200.
pytorch-1.0-cuda-10.0 core dumps on ubuntu linux on some cpu types (opening issue on behalf of @surajkota since he has permission problems with github issue creation)
pytorch-1.0-cuda-10.0 core dumps on ubuntu linux on some cpu types
setting model.cuda() should convert all the layers to use cuda backend instead of cpu.
however, if initializing your layers within a list (e.g.
for multitask), these layers are not set to use cuda.
according to the doc phofhyperlink for `torch.as_tensor`, the input should be copied to a cuda device if the default tensor type is a cuda tensor.
> default: if none, uses the current device for default tensor type (see device will be cpu for cpu tensor types and current cuda device for cuda tensor types.
it does copy to cuda if input is a numpy array, but not if input is a cpu tensor.
when tracing a scripted function creating a tensor and performing inplace operations, the shape seems to be fixed where i would think it should not.
(this used to work in mid november in the context of phofurl .)
below there are two script functions that only differ in `print` vs. `masked_scatter_`.
indexing seemed to also produce the bug.
hi all, **while training a cnn called dpnet i noticed that training was faster on cpu(i7) than gpu(nvidia gtx 1050).
as far as i understand, gpu should be faster than cpu for training cnns.
** **any ideas/reasons for this behavior?
** training configuration: dataset: 40,000 samples batch size: 64 learning rate: 0.01 learning rate decay: 10% for every 8000 iterations.
**i get the following messages when i train on gpu.
are they supposed to appear?
is there any cudnn version which has implementatios for those operators?
building pytorch's v1.0.0 tag phofhyperlink (with the `use_fbgemm=on` environment variable) fails with: phofcode phofcode because the fbgemm submodule isn't updated (it's on 0d5a159 phofhyperlink instead than phofhyperlink , where the avx2 specific code was moved to the `fbgemm_generic` target).
commit phofurl should be included in v1.0.0 branch.
seems like the new accumulate=true code introduced in phofurl has a bug when using mask with zeros.
, error: use of deleted function
the contributing.md file documents a command (`python setup.py rebuild_libtorch`) for re-building only the pytorch c++ code, but it does not exist.
the command is documented here: phofurl
pytorch-1.0-cuda-10.0 with onnx-1.2.1 and 1.3.0. export onnx model core dumps on ubuntu on gpu instance
pytorch-1.0-cuda-10.0 with onnx-1.2.1 and 1.3.0. export onnx model core dumps on ubuntu on gpu instance
`nn.utils.weight_norm` seems to nullify gradients of unrelated parameters if wrapped in `dataparallel` in v1.0.0.
from the code below, a `debugnet` model computes two disjoint operations: 1. upsampling input `c` with `nn.convtranspose2d` and the `nn.utils.weight_norm`.
2. calculating with input `x` with an independent class named `actnorm`.
for the single-gpu setup it works as intedned: the `actnorm` parameters get gradients from training.
for multi-gpu setup, if using `nn.utils.weight_norm` in operation 1, independent gradient of `actnorm` parameters becomes `none`.
pytorch-1.0-cuda-10.0 with onnx-1.2.1 and 1.3.0. export onnx model core dumps on ubuntu on gpu instance
hi, i just replay the example in phofurl in window 10x64 compiler + cmake 3.10.2 and it end up with "checkincludefile.c(1): fatal error c1083: cannot open include file: \'pthread.h \'" in cmakeerror.log
calling `new pred_net)` where each `net` is of type `caffe2::netdef` (devicetype set to `caffe2::cuda`) raises an error that says `cannot find operator schema for giventensorfill.
will skip schema checking.` -- edit -- i found a couple of other similar issues ( this phofhyperlink , this phofhyperlink and this phofhyperlink ) in the last one, @peterneher says that `caffe2::predictor` uses `tensorcpu` internally, so i checked and even on the latest libtorch (stable 1.0) this is true.
for now, i'll use raw nets as suggested, but supporting cuda tensors would be great :)
i found this while building the docs.
`device` is not added as a case in `topyobject`.
as of today's nightly build and pytorch 1.0.0, i get an error trying to build pytorch c++ extension - phofurl phofcode
pytorch version 0.4.1 while calling torch.randint() function, it is supposed to return a long tensor, but a `torch.float32` tensor return instead.
take phofurl if we dont set the environment flags `omp_num_threads=1 mkl_num_threads=1`, then 0.4.1 vs 1.0.0 is seeing a significant slowdown.
some settings related to default number of threads used has regressed
when a function `f` returns a tuple of size 1 containing a single tensor, `torch.jit.trace(f)` returns a tensor rather than tuple.
i am unable to load a pytorch model as a scriptmodule from a file and then export to onnx.
however, i am able to export a scriptmodule in memory directly to onnx.
it seems that while using torch.ge on a torch.int tensor (e.g.
converted from a numpy array), the result is not reasonable.
as a reference, applying torch.ge on a torch.floattensor performs correctly.
originally reported in the pytorch forum phofhyperlink .
with reference to: phofurl the `torch.empty()` factory for `cpucomplexfloattype` tensor creates a tensor of shape 0 instead of creating a tensor of the specified shape
batch norm trace contains an in-place add which appears to be related to recent in-place jit changes.
long pages in the documentation such as the documentation for the torch.nn module phofhyperlink take a long time to render and become interactive.
on my system in the page is unresponsive for several seconds while opening this page, which makes navigating around documentation a bit painful.
i am getting the following error when i use the squaredl2distance operator as the output layer of my cnn network **(1st attempt)**: phofcode phofcode then i tried to fix the error converting `label` to float (even though it is already float32, see below) using cast operator **(2nd attempt)** phofcode however, i got following error: phofcode furthermore, created lmdb training dataset which stores image data as uint8 and label as a multivalue of float64: **key: image_data: shape: (210, 280, 3) type: uint8 indicators: shape: (14,) type: float64** **how can fix error?
libtoch:terminate called after throwing an instance of 'c10::error'
doing a convolution with weights in float32 if the weights have been transposed in numpy before being assigned to the convolution, the results are incorrect.
the same does not happen if its float64 or an "untransposed" array.
with torch.jit.script, if torch.rand_like is in the fusion group, and output of rand_like is broadcasted, it behaves as if no broadcast happened, generating a new value for each element
torch fails to install with gpu support after following the instructions at phofurl phofcode
hi, i have installed pytorch on windows 10 using conda prebuilt versions.
pytorch seems to have installed but i cannot execute code on cuda.
>>> import torch >>> import numpy as np >>> x = >>> x tensor([ 1., 4., 67.])
x.to( 'cuda ') thcudacheck fail line=74 error=30 : unknown error traceback (most recent call last): file "<stdin>", line 1, in <module> runtimeerror: cuda runtime error (30) : unknown error at
the gumbel_softmax function returns seemingly random output when inputs are distributed around 0 to 1. i think this problem arises from the gaussian noise added to the softmax; if inputs are of similar order of magnitude, the noise overtakes the output.
even using gumbel_softmax on one-hot vectors will generate a random one-hot output.
this probably isn 't a problem if softmax is used within a training procedure, but i have a pipeline where inputs to softmax are "near" one-hot encodings.
in lieu of having hacky solution on my end (i.e.
multiplying my input data by 100 or adjusting eps value to large positive), maybe there could be an option specify softmax noise level, or whether use purist version of gumbel_softmax without noise.
does not know how to deserialize lua class nn.pixelshuffle.
version and env: in docker with version `0.4.1` conv2d.forward() sometimes will try to get all the rest of gpu's memory which let the next op raise `runtimeerror: cuda error: out of memory`
i have a namedtuple which is converted to a list by the dataloader, because pin_memory_batch converts all collections.sequence to list, and all collections.mapping to dict.
hope you have a great day.
i trained my model in ubuntu 18.04 libtorch c++ with cuda 10 and exported the model to the disk.
i want to test this model in mac libtorch c++ with cpu.
both versions are both libtorch are downloaded from official website.
i checked the source code in `inline_container.h`, i am not sure whether this error is due to different libtorch version.
the error is: libc++abi.dylib: terminating with uncaught exception of type c10::error: file_format_version >= assert failed at please report a bug to pytorch.
attempted read a pytorch file with version 1, but the minimum supported version for reading is 2. your pytorch script module file is too old.
at frame #0: > const&) + 135 in libc10.dylib) frame #1: + 852 (0x10bdfbbe4 libtorch.1.dylib) frame #2: >*) + 107 (0x10bdfb0ab libtorch.1.dylib)
when i build pytorch from the latest repo, it produces some unusual error as: phofcode phofcode
i followed the tutorial "transfering a model from pytorch to caffe2 and mobile using onnx" ( phofurl including building pytorch from source, and it failed with phofcode
when using the cpu only (no cuda), the in-place add function `torch.tensor.add_()` returns different values on different calls (with trivial differences) using some inputs.
i am using `nn.dataparallel` for a neural machine translation task, when the number of parallel sentences is more than 10 millions, the training speed becomes much slower.
after some analysis, i find that the cost of time of ** scatter ** operation increased strangely for some batches.
i tried to **load a leveldb dataset created by regular caffe (datum) in caffe2** using ** brew.db_input ** from the python api, however i got the following error **(case 1)**: phofcode i also tried to load the dataset using ** brew.image_input ** but i got the following error **(case 2)**: phofcode
suppose i write a script function/module where one argument is an int.
then tracing a larger model that uses this script function will fail.
caffe2 git master fails to build with opencv 4.0, giving the following error: phofcode
with the following error is observed phofcode
after using ** scripts/build_android.sh ** build caffe2 for android, the libs are ok, but there are no include files.
i 'm following through this tutorial: transfering a model from pytorch to caffe2 and mobile using onnx phofhyperlink the problem is that pytorch 's network output and that of caffe2 differ.
just before the section on "transfering srresnet using onnx", there is this code, which asserts that the pytorch 's output and caffe2 's output are almost equal: phofcode but i get an error here.
phofcode i output the arrays and manually checked that they are indeed quite different.
i have one suspect for this problem.
when i import onnx_caffe2, get a warning says phofcode ... which has an issue opened just a couple of hours ago (#14347)
exception ignored in: <bound method _dataloaderiter.__del__ of object at traceback (most recent call last): file line 399, in __del__ self._shutdown_workers() file line 378, in _shutdown_workers file line 337, in get return file line 167, in rebuild_storage_filename storage = handle, size) runtimeerror: interrupted system call at
when i train a cnn-rnn-ctc text recognize model, i meet nan loss after some iters, but it's ok at pytorch 0.4 with warpctc
the runpath in the installed libraries is set to the tmp_install directory of the build: phofcode this causes the loader to not find dependency libraries (if they don't exist there or it doesn't have access) or load wrong ones (when version i'm fiddling with isn't one installed and i want installed one).
caffe2 git master fails to build with fbgemm enabled giving the following error: phofcode this error seems to be caused by the recent commit phofurl it was building fine some commits before it.
after fixing #14102 issue it is possible to build static caffe2 library with protobuf-lite now.
however when built static caffe2 libraries are linked to user application full protobuf library is still required to be passed.
it seems that despite libcaffe2.a library correctly linked with protobuf-lite, libcaffe2_protos.a library still needs full protobuf library.
this behavior can be seen at least in android arm builds with build_android.sh script (with use_lite_proto=on onnx_use_lite_proto=on cmake flags added).
also while building shared version of caffe2 for android arm i noticed that passing use_lite_proto, onnx_use_lite_proto cmake flags has no impact on the final size (i guess it is due to the fact that full protobuf is still linked final libcaffe2.so library) another small bug - libcaffe2_protos.a not included in install targets and running **make install** do not copy this into install directory, however it required by libcaffe2.a.
i am trying to build own custom operator for caffe2.
my operator has some arguments.
some of them are repeated (vectors of numbers).
in operator constructor i get the arguments, however, when i run my operator in cpu context i am able to get all arguments, when run in cuda context all repeated arguments are empty.
aten incompatible with cuda 10 and rtx 20xx series graphic cards, poping errors like below: `ptxas warning : value of threads per sm for entry ... is out of range.
.minnctapersm will be ignored` this is likely due to the architectural change of the new gpus.
integer array indexing appears to be slower than applying `index_select` to the flattened tensor, using flattened indexes, and then reshaping to the expected output size.
i'm trying to build pytorch (to get libtorch) on windows 10. currently i'm building with visual studio, but it's very slow.
the documentation suggests using ninja, however if i `set cmake_generator=ninja` i get the error `cuda support not available with 32-bit windows.
did you forget to set win64 in the generator target`.
how do i get `win64` set as the generator target when using ninja?
or is ninja + cuda not possible on windows 10?
i've scanned through the other issues and saw similar ones, yet i saw my environment slightly differs so i decided to open a separate report.
after trying to build pytorch inside a virtualenv, i ran into this error: `makefile:138: recipe for target 'all' failed` `make: * * * [all] error 2` `failed to run 'bash --use-nnpack --use-mkldnn --use-qnnpack caffe2'`
-- build files have been written to: /home/feng/pytorch/build + make install -j12 scanning dependencies of target js_embed scanning dependencies of target benchmark scanning dependencies of target nccl_external scanning dependencies of target pthreadpool clog gtest gloo onnxifi_dummy onnxifi_loader libprotobuf-lite libprotobuf [ 0%] creating directories for 'nccl_external' mkldnn [ 1%] building cxx object [ 1%] building cxx object [ 1%] building c object 1%] no download step for 'nccl_external' no patch step for 'nccl_external' no update step for 'nccl_external' no configure step performing build building c object c c make[3]: warning: jobserver unavailable: using -j1.
add '+' to parent make rule.
linking executable ../../../bin/js_embed linking shared library linking static library linking static library ../../lib/libclog.a static library built onnxifi_dummy built js_embed built onnxifi_loader built pthreadpool clog python_copy_files c10 2%] 2%] 2%] 3%] 3%] 3%] 3%] ptxas warning : too big maxrregcount specified 96, will be ignored init.cu:52:1: ncclnet initialized and xtern ncclnet_t* ncclnet = null; 4%] 4%] 4%] 4%] nvcc warning : the 'compute_20', 'sm_20', and 'sm_21' architectures are deprecated, may be removed in a future release (use to suppress warning).
compiling ring.cu > nvcc warning : the 'compute_20', 'sm_20', 'sm_21' architectures are deprecated, may be removed in a future release (use to suppress warning).
5%] 5%] 5%] 5%] static ../../../lib/libgtest.a gtest generating 6%] 6%] 7%] 7%] python_copy_files common 7%] 7%] common mkrename executable ../../bin/mkrename mkrename ptxas too big maxrregcount specified 96, will ignored nvcc the 'compute_20', 'sm_20', 'sm_21' architectures are deprecated, may removed in a future release (use suppress warning).
i think issue 13962 phofhyperlink may have been closed prematurely.
i just did a fresh `git clone --recursive phofurl and followed thei installation steps and still have this issue on my machine.
torch.argmin behaves differently on cpu (which is correct) and gpu (which is wrong) i'm not sure whether this 'bug' (or 'feature') is expected or not...
i am trying to create an fp16 tensor in caffe2, and i am following the method described in phofurl (set type to float16, store float16 as unsigned short in int32_data) however, upon attempting to run the network using workspace.runnet, i get: runtimeerror: storage_.istype<t>() assert failed at please report a bug to pytorch.
tensor type mismatch, caller expects elements be float, while tensor contains int.
error from operator: input: "data" input: "scaled_datascale_w" output: "scaled_data" type: "mul" arg { name: "axis" i: 1 } arg { name: "broadcast" i: 1 } arg { name: "float16_compute" i: 1 }
fp16 results in "floating point exception" with following minimal example.
when working with an onnx model, preparing the backend automatically initializes phofhyperlink the graph inputs as float64, which then throws out the following warning when specifying a cuda device: `cuda operators do not support 64-bit doubles, please use arr.astype(np.float32) or np.int32 for ints.
blob: 0 type: float64` this is because `numpy.ones` has default datatype numpy.float64.
i am trying to build caffe2 for android and to reduce final size i want to use protobuf-lite.
to archive it i added two flags to build_android.sh script: use_lite_proto and onnx_use_lite_proto.
however in such case it fails twice.
1) phofcode this part is quite easy temporary resolve.
datatype_name is used only for producing better exception description and can be removed without any impact.
however, after resolving the first issue next one occurs: 2) phofcode i do not know how fix the second failure.
this behavior was reproduced and by building linux x86_64 version with same use_lite_proto, onnx_use_lite_proto cmake flags.
when pickling a `torch.dtype` object, python 3.5 reports an obscure error "can \'t pickle int objects".
phofcode i just downloaded & unzipped the latest deps: wget phofurl unzip old deps work fine code: phofcode i 'll try redoing the trace & exporting my model and installing the latest nightly of pytorch and see if it works though.
was just unexpected (though i know i am running on nightlys)
i implemented 3d version of by just replacing conv2d and batchnorm2d with conv3d and batchnorm3d, respectively.
but i got runtimeerror: cudnn error: when phofcode .
if phofcode , it works correctly.
a model containing argmax cannot be converted to onnx.
properties defined in classes that inherit from `torch.nn.module` raise a misleading error message if non-existent properties are used inside the property definition.
the error message reports the incorrect property as missing.
i compared the execution time of two codes.
code 1: phofcode and code 2: phofcode the code 1 takes less than 1 second to execute (used `time`): phofcode whereas the code 2 takes 5 seconds: phofcode
fp16 overflow sometimes results in "illegal memory access".
i saved a model in pytorch python using torch.jit.save.
i tried to load the model in c++ using but it produced the following error.
the android build of either `libclog.a` or `libcpuinfo.a` seems to be broken somehow.
linking errors for the `clog_*` functions appear despite the generated `libclog.a` being linked in my android project 's cmakelists.
`torch.multinomial` occasionally samples elements with zero weight.
a possible cpu-side memory leak even when fitting on the gpu using pytorch 0.4.1.
when i run the distributed training on multi gpu, the program errors and says no such file or directory '
when exporting a tuple-output custom function to onnx, the loweralltuple optimization pass will fail because symb::pythonop is not in the whitelist.
the same export works in 0.4.1 but not master.
the failing assert is at phofurl invoked by phofurl by adding symbol::pythonop into the whiltelist, at phofurl we can export normally again.
when using distributeddataparallel with mpi backend and assigning each gpu a single process on the host, program crashes at the end of an epoch.
failure is not always consistent.
pytorch streams are not cuda-memcheck clean
on a new install with this spec phofcode i get memory errors almost all times.
when moving `tensor = tensor.cuda()` in data preprocesing routine, loader `collate_fn` fails.
the reason why i 've moved `.cuda()` to data-loader is that i need to `torch.matmul(input, matrix)` each input batch, and the matrix is large.
doing so in cpu is slow.
the weight of positive examples should default to `1.`.
however, there are inputs for which the result is finite without specifying `pos_weight` and `nan` with
error in building caffe2 under windows 10 with enabled gpu and python bindings.
when using pytorch in combination with numpy from the conda-forge channel, creating a sparse tensor in a child process after an `os.fork` leads to a deadlock.
i 'm not sure if the naming was intentional or not.
but in phofurl a function named takes a model, instead of a specific graph.
when using a particular architecture, pytorch is throwing cuda oome much faster (with "batch_size" of 10k) than tensorflow (which runs smoothly with "batch_size" of
after train , when test the model, the batchnorm is different between different gpus, it does not do broadcast in eval()?
jit is unable to compile range with more than 1 argument.
jit can compile `range(10)` and cannot compile `range(0, 10)`
we are seeing an intermittent failure in the reshape_op when trying to run the example: end-to-end alexnet from pytorch to caffe2.
when you go to the releases page, the "assets" downloads there are missing most of the contents of the subdirectories of `third_party` directory.
so for example `third_party/fp16` is empty, as are most of folders inside `third_party`.
pytorch cannot be installed without them.
i am trying to package this for opensuse and having specific, downloadable sources would be preferable if at all possible.
when using `dataparallel` with `nn.embedding` with `max_norm` set to a non `none` value, the following assertion is triggered: `runtimeerror: output_nr_ == 0 assert failed at please report a bug to pytorch.`
when script wraps a python function, the exception messages from python don 't get back to the user and appear as just 'std::exception '
mkldnn shared library built as a part of ideep interface does not link intel mkl and intel omp.
this happens because pytorch's script sets mkl_cmake_included variable to true and when it comes to configuring mkldnn in script it returns from the first line phofcode however, according to mkldnn's mkl configuration script it should be linked with other libraries than pytorch: mkldnn uses either downloaded mkl-small or mkl_rt and pytorch uses mkl_intel_lp64, mkl_gnu_thread, mkl_core.
so probably due to misconfiguration it is not linked with mkl and intel omp (it uses libgomp.so insted).
before #12170 was possible provide system mkldnn, but now unfortunately i can't do it.
maybe there is any way still do it?
also forces users run outdated mkldnn 0.14 version is possible compile 0.16 with various speed improvements (and correct linkage).
doesn't work for a function with one argument.
conda install pytorch1.0,and does not work well on jupyter notebook
pytorch onnx export is failing in 1.0
traceback (most recent call last): file "test_dist.py", line 5, in <module> world_size=2, rank=0) file line 288, in init_process_group raise package doesn 't have nccl " runtimeerror: distributed package doesn 't have nccl built in
`sum()` is special that we can backward() through it multiple times since it doesn't have saved variable, so nothing was really destroyed after the first backward.
this behavior is bad as we might silently backward through it multiple times without noticing, but the grad accumulates.
`torch.sum(dim)` no longer works when dim >= 64.
dear pytorch team, i am trying to run a multi-gpu job using i would like to use pytorch 1.0+ because of: ( phofurl phofurl and well because its awesome :) i am running the following commands in separate tmux sessions on the same cloud machine with 8 gpus: phofcode the programs execute as expected up until: phofcode at which point they ( ** usually ** ) hang.
i have checked to make sure that all of the programs are getting the same file for ...) have yet to get this working with a world_size of 8, but can get this working with smaller world_size 's (2-7).
to do so just run exact same command a number of times until programs just (seemingly) randomly get past at first glance average number failed tries before a success seems increase with world_size.
this code was working consistently on 0.4.1 however gloo timeout needed be larger for my application.
do not know what is causing this.
would really appreciate you hep.
some empty numpy arrays cannot be converted to torch tensors.
l1loss changes its value if arguments are swapped
instead of raising an exception, the function forces python environment to shut down due to a segmentation fault if the input is not in decreasing order.
passing a .t7 lua-torch model to gives the following error: in `attributeerror: 'spatialfullconvolution' object has no attribute 'bias'`
in attempt to compute confusion matrix for my classifier, i ended up with code like this: a1 = print(a1.shape) a2 = print(a2.shape) a3 = a1 & a2 print(a3.shape) cm = a3.sum(2) print functions output: torch.size([340, 74498]) torch.size([340, 1, 74498]) torch.size([340, 340, 74498]) however .sum(2) causing error: runtimeerror: $ torch: not enough memory: you tried to allocate 64gb.
cpu memory will leak if the dataloader `num_workers > 0`.
we fix the random seed, save and reload the network during training, but found the network output is different although the network parameters and input is exactly same.
see below code modified from pytorch example mnist.
we insert save/load code during training: phofcode the print output shows phofcode
when enumerating registered operator metadata and exception is thrown.
phofcode when iterating over dataloader loader with cuda tensors.
i found out the torch nightly builds are sufficient for my needs but i keep one separate virtual environment that makes sure that my dl research code is always on pytorch 's head.
thus do a build of torch from scratch at least once every week but since last month i 've always got this strange error when building.
the full build log is here phofurl the error part is here if that 's tldr phofcode
the backward pass over is more than 300x slower with half tensors compared to fp32 tensor for the example below.
i create a network, which uses `labelcrossentropy` operator.
error messages are reported, which asks me to "report a bug to pytorch".
see below for detailed error messages.
we have a number of machines with threadripper cpus, and 2 nvidia gpus, some have 1070ti cards some 1080 some 1080ti and one with titanxp, they all displayed this behavior, when switching to using data parallel, training would fail, i.e.
accuracy would not go up.
we first saw this in our code base, but it also happens on the imagnet example from the pytorch examples repo
the conv grads computed by phofurl rely on the function phofcode (from the same file).
phofcode raises a valueerror when phofcode >1 because it does not account for phofcode when computing its expected input size.
i encountered an unexpected `nan` gradient that was rectified by swapping the order of `torch.log` and an indexing operation `[a > 0.]`.
these ought to commute right
non-argument tensors with requires_grad=true are traced as constants
my basic conda environment is python 3.7, but creating a new environment and installing in it pytorch ('conda install pytorch-nightly cuda92 -c pytorch'), python --version gives me 'python 3.5.6 :: anaconda, inc.'.
this bug seems very similar to phofurl although the issue there is supposed to be closed, so i also left a comment there.
mpi-ext.h does not exist in mpich, so i could not compile with mpich for cpu-based mpi support.
although i had cuda during installation, i think the same would happen without cuda considering the context of the code.
if i want to use libtorch in my cmake project, i got an error: phofcode
torch.nn.l1loss()'s parameter * reduction * doesn't work if b = net(a).
seems that cuda10.0 could build pytorch objects, but during linkage phase.
could you help to check reason, or give me some hints for solving with it?
now my mac with nvidia gpu 1080i can 't use torch with gpu.
opening this issue because i'm not sure if it's a bug or i'm just doing something wrong.
when calling `temp.index_put_(mesh1, slice1 + slice2)` with `temp` and `slice1+slice2` as `at::tensor` and `mesh1` as `tensorlist`, i get: `runtimeerror: variable impl does not have is_contiguous (is_contiguous at it seems that it can't find an implementation of the `is_contiguous` method for `slice1+slice2`, even though if i call `(slice1 + slice2).is_contiguous()` right before the incriminated line it evaluates to true with no problems (from `gdb` the error is raised at this line of the `.cpp` file phofurl ).
i tried to trace back origin of issue from `gdb` but it's a rabbit hole down to `thc` code that i don't understand.
trying to calculate gradients with respect to input for a simple network that processes batches.
backpropagation crashes with runtimeerror: output and gradoutput have different number of elements: output[3 x 1] has 3 elements, while gradoutput[1 x 1] has 1 elements at same backpropagation without sigmoid as a last step in the network works ok.
after exporting a basic rnn model to caffe2, running it results in assertion error thrown in `operator.h`: `unsupported type of tensor: nullptr (uninitialized)`
similarly than bug #12284 but with an instance of adam optimizer.
the stored file and gpu memory usage grow very quick.
when i use simple forward hook and backward hook on resnet101 model from torchvision, memory leak occurs.
in windows, dataloader with num_workers > 0 is extremely slow (pytorch=0.41)
under some circumstances, we search for gloo headers in which can lead us to erroneously conclude that gloo is available, when it is not.
i have a model which behaves correctly "as it is" and during tracing, but the traced one fails during convolution.
the backtrace is as follows: phofcode during tracing `self.kwargs` is consistently empty so this is surprising.
i still believe this is my programming error, but the runtime error definitely could be more telling (what kind of `bad_param`?
unsqueezing using the `none` keyword does not work with the @torch.jit.script notation.
if you define a nn.module that contains a forward func with multiple lists (that you stack together into a tensor at some point) that process works perfectly fine in the conventional workflow.
however, if you attempt to convert your module into a scriptmodule that will be compiled into graph representation, every list object defined in `script_method` function seem to merge together somehow.
the jit script compiler does not support the `&` operator, so `a & b` fails.
in torch/jit/frontend.py, the following definition exists: boolop_map = { ast.and: 'and', ast.or: 'or', } i tried `a and b`, but this makes the compiler fail, maybe because it can't differentiate tensors from boolean variables at compile time?
@ current master head: commit i found the source code cloned from github/pytorch/pytorch doesn 't contain submodule of cereal.
from .gitmodule file the submodule cereal can be found its definition.
... [submodule "third_party/cereal"] tpath = third_party/cereal turl = phofurl but in source folder i cloned with recursive option, there is no cereal.
pytorch/vision pretrained model inception v3 input transform issue for trace & onnx.
i have a pr( phofurl for this issue.
fyi.. this is not captured in ci because inception v3 test is turned off due to precision issue, and pretrained=true is not being tested phofurl
pack_padded_sequence throws > indexerror: tuple index out of range when only kwargs are specified, but no args.
the ignore_index option in the crossentropyloss phofhyperlink doesn 't work as expected.
manual seed doesn't seem to tie down the philox rng, but only the mtgp32 one.
for extremely large inputs ( approximately the training process behaves very differently for different but very close input sizes.
for size and smaller training runs ok for more than 10 epochs, for the size and larger training fails during the second epoch with runtimeerror: cuda error: out of memory
onnx-7 defines only two modes where `linear` includes phofhyperlink bilinear and trilinear.
when i use cuda grad , it shows grad was none
while installing from source on windows, build fails with the error
the docs notes that will all_reduce all gradients at all machines so that all gradients are same.
however, i use the `torch.nn.conv2d()` and the at the same time, i find their grads are not same.
wrong error message for conv2d with a too large kernel size in pytorch version:
i get an error when i try to backprop through `torch.matmul` where the first matrix is a sparse matrix and the second matrix (dense) requires gradient.
i am getting the following error: phofcode note that the sparse matrix does not require gradient in my case.
more specifically backpropagating through `torch.matmul(a, x)` works fine, but it doesn't work for `torch.matmul(a, x.transpose(0,1))`.
it works fine when doing `torch.matmul(a,
`conv1d` with nan weights outputs non-nan values during traing.
but after saving and reloading the weights, it outputs nan values.
it should output nan value not only after reloading but also during training if the weights are nan.
and i don't know why the weights become nan.
these lines in my repo are example.
it prints only `weight has nan` after hundreds iterations.
the file includes this header which as far as i can tell is specific to openmpi: phofcode so this won't build with other mpi implementations, including cray mpich which we use at nersc.
i was able to work around it with the following change: phofurl but maybe it also/instead needs a check on `#if defined (open_mpi)`, and/or an alternate include or implementation when not using openmpi.
i'm just getting started with libtorch, but the few models from torchvision i'm trying to run are throwing an exception.
even following the instructions at phofurl gives the exception.
`torch.tensor` is creating tensor only on cpu.
the `device` argument isn 't working
using dropout with either cpu or cuda halftensor throws an error: runtimeerror: bernoulli_ is not implemented for type torch.halftensor or runtimeerror: "bernoulli_scalar_cuda_" not implemented for this wasn 't the case for version 0.4.1
runtimeerror: cuda runtime error (77) : an illegal memory access was encountered at
runs several times slower for fp16 inputs.
i want to use models from r2plus1d phofhyperlink for extracting action recognition features.
however, when running their `extract_features.py` it will immediately throw the following error message: `attributeerror: method videoinput is not a registered operator.
on the gpu, if you pass crossentropyloss a label id that is larger than the number of columns in the the network predictions, it results in an uncaught c++ error, which seems to bork internal torch state.
all further operations results in a runtimeerror.
note that problem does not exist on cpu side.
also, i've only tested on torch 0.4.1, its possible this was fixed in 1.0, but i haven't checked.
however, i did do a quick search and afaik this bug has not yet been reported.
i was trying to use to generate grid and grid_sample() to warp a image.
however, if i use the identical affine matrix, i can 't get the right output, which should be the same as the input.
when running : python -m unittest -q -v the test fails with : runtimeerror: cuda runtime error (7) : too many resources requested for launch at if i hardcode threads_batch = 8; in around line 522, the test passes.
when i want to import caffe2.pytho.core, i get a segmentation fault.
i followed the install guide for ubuntu 16 with prebuilt binaries and also installed nccl, i've been browsing past issues but can't find a solution.
trying to load a simple saved scripted_model produces an error: phofcode
get "illegal instruction (core dumped)" error when trying to copy object in cuda memory.
when saving to file the same tensor.
it takes several (around 5) minutes to run for the first time.
after that, there isn't any problems calling cuda().
my configuration has 2 rtx 2080s in sli and a gtx 1070. the gtx 1070 does not have any problem, while both rtx 2080s have the slow cuda() initialisation problem.
i also tested both pytorch 0.4.1 and 1.0 preview on cuda driver version 410.57, the problem persists.
when given a one-hot probability distribution, with replacement=false, torch.multinomial returns 0s for all indices after the first one.
while i understand that it is weird to sample > 1 value without replacement if the distribution is one-hot, i think this is less desirable behavior than randomly sampling the remaining values without replacement.
when a module that has a registered buffer with `requires_grad=true` is moved to the gpu, the buffer no longer accumulates gradients.
the in-place `masked_fill_` seems to give incorrect results on pytorch master for non-contiguous tensors.
steps to reproduce the behavior: phofcode this prints: phofcode
build 1.0 from source (tried today) has failed on cpu-only macos.
looks like a linker error, but perhaps something else.
the cudnn version check is too strict.
cudnn 7 guarantees backwards compatibility of minor releases.
i am getting an error during the build of a custom cuda extension with pytorch 1.0 on macos high sierra.
i built pytorch from source with `clang version 3.9.1 this build worked once with a `pip install` of pytorch 0.4.1 and `gcc-7`, however i wanted to upgrade from 0.4.1 to 1.0 for these extensions.
i have cuda and cudnn, but no nvidia gpu.
please see stack trace below and additional information for context.
and thank you, a ton, in advance for any back/magic wand/bandaid.
unmatched behavior of numpy and pytorch on indexing with a list of bool value.
vue cli 4 add quasar plugin failed.
i want to embeding quasar to an existing electron-vue project.
got "typeerror: cannot read property 'screen ' of undefined" when rendering qlayout
the browser does not scroll 'scroll-area' element to top/bottom when using navigational buttons (ctrl+up/ctrl+down) when focused, also the search is not scrolling to found element as well when using standard browser's ctrl+f.
keep-alive does not save iframe state
when a q-img element has the width and height equal and the border-radius set to half of these (i.e.
to make a circle), in chrome the bottom left corner of the image shows briefly and in safari 13.0.1 all for corners show briefly before image is displayed as a circle.
this is on a mac, in case it makes any difference.
(it works as expected in firefox 70.0.1)
when i set `display: block;` on a qitem, then that item takes up additional space below it.
this is only present on ie11 and edge.
if i inspect the element in said browsers i can see that there are the following rules applied: phofcode i am not seeing these rules in the other browsers.
tracked the source of these rules to ` phofurl phofcode while these rules do not interfere when `display: block;` is omitted and are probably there for another reason, they do create a problem here.
if an ae is using and the consuming quasar app is using `framework: { all: auto }` then the qmenu won't be included in the auto import.
`option-value` props seem to be not doing its job.
i have tried it on jsfiddle and on my own desktop (same version).
i don't know if this is related with the removal of __index, but sorting the rows using pagination no longer works since 1.4.4. i tested with all versions before, including 1.4.3, and everything works fine.
in my code, it simply does not do anything, but there are no errors in the console.
in this example phofhyperlink from the docs, it outputs a bunch of errors in console.
when using to "to" property or type="a" (aka the button is a link) with a q-btn the label is always centered no matter what 's set in the align property.
a q-menu with context-menu no longer opens on long-press, but now opens on touch end, even when scrolling.
experienced on android 10 (pixel 3) using brave and chrome.
when running `npx quasar dev` from a brand new spa project in wsl (ubuntu) it cannot open windows browser: phofcode and then a windows alert showing up (see screenshots below) when browsing manually to ` phofurl everything seems to work.
sideloaded apps (via `quasar dev -m capacitor -t android`) have platform detected as chrome rather than capacitor.
all other platform types are correct as far as i can tell.
not tested in prod, not tested with ios.
(cant be replicated with any of the code running websites provided as they don 't run capacitor)
a clear and concise description of what the bug is.
empty qtabs shows useless chevron buttons on chrome and quasar 1.4.3.
this is a problem with the dialog plug-in prompt text box.
when using the japanese ime, it uses the enter key to confirm the phrase conversion.
this is an enter key to confirm phrase conversion and dialog should not be closed.
the quasar dialog plug-in prompt closes in this case.
we can increase the display time of the splash screen by `capacitor.config.json`.
(doc link) phofhyperlink this is useful when it takes time to prepare the capacitor app.
however, because quasar forces off splash screen, the setting is ignored.
the relevant part is below.
phofurl the following settings are ignored by above quasar 's `app.js` phofcode or phofcode
the grpc library gives the following error at compile time: phofcode once the app has booted the following error is raised: phofcode phofcode phofurl
we 're seeing a problem that when we use qselect with current cypress (3.6.1) on both chrome stable (78) and canary (80), qselect 's virtual scrolling does not render all items, which leads to this: quasar-select phofimage
quasar is an exceptionally good tool.
however, quasar does not allow users to set 'nodeintegration' to false in electron mode as the documentation already states that it should be set to true in phofurl
when a specific mask is set for the `qdate` component, the `options` callback does not provide a date with the same format.
when running the command `quasar dev -m capacitor -t android` on windows, android studio is expected to open but fails due to an unescaped path with special characters.
space character in the _program files_ part when using the default path.
`const studiopath = 'c: program
if a qbtn is used, with long text, but the button is constrained to a fixed width, it would be expected that the text would be truncated when using the "ellipsis" calss.
qcolor used inside a qpopupproxy which is inside a qdialog closes when you drag the color picker pointer.
note: a single click does not close it.
qslideitem css override the qitem background color on dark mode
as per documentation, the v-intersection directive should fire an event when an the respective element is scrolled into view.
i use the feature to implement lazy loading on images within a infinite scroll container but noticed that the intersection event is fired for all child elements of scroll container as soon as they are loaded/appended, regardless of their visibility (whicht loads all images in a not so lazy way).
when scrolled into view, intersection event is fired again even when using "once" modifier.
after updating the quasar cli to v1.0.1, if i try to create a new project, it download the starter kit and then nothing.
i also tried to reinstall.
i have a qimg in my project that, about 1 in 10 times it will have a height of 0px.
looking at the html, the only thing that differs in this 1 in 10 occurance is the div: `<div style="padding-bottom: 60%;"></div>` is instead `<div></div>`.
according to the type definitions for qbtn, the `click` function takes an _optional_ parameter of the event that triggered the click.
even though definition says it is optional, `qbtn.click()` will throw an error if there is nothing passed in as a parameter.
example: `button.click()` throws an error, while `button.click({})` does not.
you must put a `<div>` or `<q-card>` as a direct child of qform as per phofurl
qresizeobserver stops capturing window height when the resize occurs over an iframe.
qinfinite scroll doesn 't trigger the initial @load, but throws errors when initialized with an empty array.
"[vue warn]: error in render: 'typeerror: cannot read property 'concat ' of undefined \'" "[vue warn]: error in mounted hook: 'typeerror: t.closest is not a function ' this worked pre-1.3.0.
when use the `to` prop in a qbtn in a small size the icon is in wrong position.
a form with async rules.
calling submit on that form when one or more of those rules would result in an error still submits the form.
`q-select` doesn't always work on first click on safari.
on safari it intermittently seems to require a second click on the option before it will take.
it seems pretty random, can't find a specific trigger but it happens roughly about 50% of the time when clicking a select option.
for example, any of the selects here: phofurl
when using an ipad in 13.1 version, the platform plugin of quasar considered the ipad as a mac desktop
copy an exact mask text and paste it into the input.
on the first focus/first paste, it will only paste first character.
the wysiwyg editor remove prevous selected items like bold, italic, underlined... after click on a free space in toolbar.
a `$on('show', ()=>{ // is not called })`, only `$on('hide', () => {})`
default left icons on buttons draws in right side in 1.2.6.
the vertical separator is misplaced in firefox.
going to the quasar documentation phofurl on ie11, clicking on select boxes doesn 't give you options menu unless you click on `use-input`
after executing all boot files, quasar (specifically `client-entry.js` ), replaces the store's state with of course this is because of ssr and prefetch.
but this turns the `store` param on every boot script useless, as any information that is put on the state will be removed after the boot finishes.
when using qeditor toolbar buttons (e.g.
to create bullet lists), the wrong text is targeted.
when qtable separator is cell and applying auto-width on qtd (other than last column), it does apply auto-width however removes the cell border
when i use quasar component inside functional component, using auto-import feature, i get phofcode
i have an issue combining a sliding list of items and refreshing it with pull down to refresh (qpulltorefresh and qslideitem).
i cant pull down because the sliding actions are always triggered first.
trying to make my own implementation of the button to open the dialog box for choosing a file, the pickfiles method has no effect.
when we type in normal qselect, the browser gets super slow or the browser crashing
this is a catchup from a discord discussion channel components wednesday : - >18:20 (myself was not included .. so may there are some more details from metalsadman)
qslideitem doesn 't function when running in firefox mobile view when touch simulation is turned on.
i 've tested in chromium and it appears to work in all situations: desktop, mobile, touch simulation turned on or off.
i have not tested in any other browsers.
event.js export has these members: phofurl but event.d.ts only has these: phofurl missing are: listenopts, preventdraggable, create.
not sure if by design or an oversight.
there is a visible artifact to the left of focused `qselect` controls in firefox.
it looks kinda like a backtick.
qselect doesn 't call filter function when entering cyrillic characters on mobile devices.
there is probably an issue with change detection logic.
space, numbers) proceeds normal behavior.
when virtual table contains dynamic height images, then scrolling beyond index 100, result in too many jumping.
when i 'm using virtual scroll with `scroll-target="body"` go to another page and return back to the virtual scroll page it jump ahead
when `scroll-target="body"`: when trying to scroll fast or jump to the end of the list, in mobile and desktop the list is back to top or not rendering
swipe-to-close on qdrawer doesn't work in ssr mode.
in spa mode works fine
when the browser is safari, qheader and qfooter will jitter when qlayout is scrolling in qdialog.
i appeared after 1.2.0 has been released.
two days ago it worked correctly.
here is log file: phofurl
if you put focus on the qeditor, it works, but then you can't remove the focus from it with the function blur().
qtoggle with prop `true-value` of type array outputs strange stuff
electron building has failed, whether it is with packager or builder.
and there is no problem with building spa.
q-card-action events are being propagated q-card .thus, if q-card-action and q-card all have theirs events, when user click btn in q-card-action, the event is also being propagated q-card, it makes repeat call ,how to avoid repeat this call
qdrawer's backdrop doesn't have class `no-pointer-events` on first show on mobile
if i use a dialog with a layout and toolbar like in the docs, the scrollbar is beside toolbar and footer.
in v0.17 the scrollbar is correct only in content area
if the avatar image provided to a qchatmessage is not square, the container stretches to contain the image, resulting in an oval.
when you define both top and bottom slots, and programmatically remove the top slot, you can still slide the item down while getting the error: uncaught typeerror: cannot read property 'style' of undefined at vuecomponent.__pan (qslideitem.js?e45e:119) at htmldivelement.move
a page has enough content to scroll through that the qheader or qfooter reveal is triggered at scrolling hiding the given qheader or qfooter, then if a qdialog or qpopupproxy is fired within the scrolled content, the qheader and/or qfooter are revealed while qdialog/qpopupproxy is displayed, on ios it actually breaks layout.
implementing a snap to 0 for the splitter produces unexpected behavior after the first snap.
once the splitter has been snapped to 0, then it's moved to a value < 20 it will fail to be snapped again.
once it's touched momentarily it then snaps immediately 0 from 0 < x < 20.
if you add some classes to q-icon, strange thigs will happen, it brokes jsfiddle or your app icons at all in some cases.
after clicking on qselect the options menu popup is shown and the popup-show event is raised.
regardless of whether all options are displayed at once or the scroll bar is displayed - the virtual-scroll event is raised immediately after popup-show event.
adding `:readonly="undefined"` to q-btn-toggle prevents the `input` event from being fired.
while `:readonly="false"` works as expected.
there 's a artifact "-->" and the proxy popup is broken when using the date picker with qinput and font awesome pro.
the same code functions normally when using the material icons.
the offset and color style props seem to have no effect with the qpopupedit components.
when swipe qcarousel, tabs should not display scrollbars
when defining `@blur="evt => to capture blur event, the value received in the callback is empty.
qtable grid mode cant't showing the header even hide-header=false
at 160% zoom on a 1080p screen, the colour picker on the theme builder page phofhyperlink loops though adjusting some alignment
div nest div, they both have context-menu, when right click child element(inner div), both div context-menu appear overlapped.
using quasar 1.1.3: q-toggle or q-checkbox does not update visible state when changing its model either using v-model or :value/@input combination when used inside a q-menu
background-size and background-position are generated as inline style declarations for q-carousel_slide's div instead of in .q-carouselslide
`qdialog` does not seem to correctly refocus the original element/component on hide even though `no-refocus` is not set.
this makes for difficult keyboard navigation when opening/closing dialogs.
if you set `no-focus` to `false` then at least the original element retains focus when the dialog is hidden, however this means the dialog is difficult to navigate with a keyboard since it 's not focused.
it looks like it tries to set focus (reported active element changes via observing focusin on document) but focus is not reflected in ui appearance.
using `<q-popup-proxy touch-position>` with keyboard navigation can cause the popup menu to be rendered off screen.
i only notice this if it's inside `<q-layout>`/`<q-page>` but that's probably going to the case most of the time.
framework all: auto does not work if using <pascalcase /> component names e.g.
<qpage> ... </qpage> instead of <q-page> ... </q-page>
process.env.node_env is always undefined when running eslint, be it with `quasar dev`, `quasar build` or `yarn lint`
when clicking 'choose file(s) ' button in `<q-input @input="val => { somefile = val[0] }" type="file" />` file selection dialog opens properly but dev console displays these errors: `domexception: failed to set the 'value ' property on 'htmlinputelement ': this input element accepts a filename, which may only be programmatically set to the empty string.` i believe it started happening after commit the error is triggered at this line: phofurl
when i use framework: `{ all: 'auto ' }` in quasar.conf.js, some of my pages do not find globally-registered components (registered using boot files).
a clear and concise description of what the bug is.
quasar loading plugin doesn 't display loading if "show" was called synchronous (or with small interval)
when ssr prerendering a view on desktop,a mobile screen is assumed causing a blink that can be very confusing when developing a responsive site (for example, using the grid view for mobile and normal view in desktop for a qtable, as shown in screenshot)
i am using the material design icons.
the icon `chat_bubble_outlined` is part of the standard (filled) set, so i don't need to also import the outlined set.
if i put a different icon in the last column of a qtable, then everything renders ok. but if icon is specifically `chat_bubble_outlined` then a horizontal scrollbar appears as if icon takes up more space for which table doesn't account for.
if i use a qbtn with icon, then problem persists, but in codepen noticed that is not centered correctly.
haven't tested if any other icons can cause this problem.
when adding `v-model` to qmenu with context-menu, the menu is broken and the following error is shown in console: phofcode
i have defined a custom date input component (wraps qinput), which uses a custom date picker component (wraps qdate).
in order to use v-model with two-way binding, i have a standard setup of passing the prop down and emitting events up.
the input can also be clearable and i need to use a custom mask for the dates.
everything works as expected except for one problem: after using the clearable icon, the first time i pick date from popup calendar, model changes correctly, but content of input field is not updated.
the only visual indication that observe is quick flash of cursor.
subsequent picks from calendar work as normal.
if remove mask property on qinput, then everything works fine again.
so suspect mask might be involved in some racing condition.
but also, if don't use v-model setup then problem doesn't occur either.
this can be tested by using codepen from docs.
codepen is currently out of service, but can submit an example later if needed.
cypress hangs before it outputs run: running e2e tests with cypress
for development purposes i am proxy my api calls to local .json files inside `assets/mock/` folder.
for instance, when my app calls `/login` the proxy return the file @quasar/app 1.0.5 works as expected: the browser calls `/login`, and get the content of `login.json` file as a response.
upgrading to version 1.0.6 browser calls `/login`, and receive a `404 not found` error, with a `cannot get /assets/mock/login.json` as a response.
if you keep a `q-input` field readonly ( because you dont want the user typing there ) , the field cannot be cleared by adding a clearable property.
when a user press `tab` to switch from a field to another, the select don't open his dropdown when he receive the focus
the following error appears in the console
got 'undefined' when using getglobal(name) in electron render process.
as per title, qselect width collapses, instead of showing label or selected value, when it's container has display flex with direction row and some other causes i cannot replicate into a jsfiddle.
but the behavior is reproducible in the design overview docs example for qselect, using devtools.
the bug is the exact same as the one described in closed issue #4128. the issue creator closed it after a separate discussion about this problem here phofhyperlink and finding a "workaround" that comes with its own ux problems.
however, i believe it still walks a thin line between a feature and bug.
in short: qpopupedit does not fire the save event when nothing has changed in the data source.
i understand this behavior is as expected.
however, when using `:value` prop instead of working with v-model, for example in vuex state binding use case, we should be able to have save event (or separate event) fire to catch change and dispatch an action (such as request to an api).
when using a native ios build: * if there is an input contained by a dialog, and * the phone 's keyboard hides (partially or completely) the input, then any key event in the input causes the entire screen to rapidly shift up (to try and display the input) and then immediately back down (to its original position).
qvirtualscroll component allows to pass any string value as type
unless i am missing it, we are unable to set the labels text color on a slider without overriding quasar styles and if i have a white slider with a white label, the label text is also white and not readable.
the color prop doesn't seem to have any effect on qpopupedit.
ios wkwebview seems to have a bug with reporting wrong `window.innerheight` and `window.innerwidth` in the `resize` event when the device is rotated.
it eventually ends up reporting a square screen with the smaller of the 2 values.
this in turn causes screen plugin to report incorrect dimensions, which then cascades to every other area that depends on it (like `qpage` setting minimum height inside a `qlayout`).
wkwebview does end up with correct values at some point, just not in time for resize event so screen plugin never sees them.
wkwebview does seem to immediately report correct values for and so maybe those values could be used for mobile devices/cordova mode since they don't have scrollbars that affect layout anyway.
probably wouldn't want use these on devices that do have scrollbars though since will differ from `window.innerheight` and `window.innerwidth`.
when the the (computed) tooltip text is empty, the tooltip should not show itself at all.
qitem with a checkbox/radio/toggle allow to click them when is disabled
when localizing the qdate, the days are positioned in the wrong week day column.
when using a `use-input` on a q-select with the `multiple` attribute, when beginning to type to filter results previously selected options will change from displaying their labels to their values.
in ssr mode, after page load i can see for a little while: 1) the top bar doesn 't show 2) the left drawer appears after a few milliseconds (but easily perceptible) the top bar appears and the left drawer animates to the left and disappears i 've attached a gif on the screenshots section
1. immediately after pressing the upload button, the % progress jumps to 99% and stuck there until the upload is completed image phofimage 2. when click on abort all, the request is still being sent image phofimage
`quasar dev -m cordova -t browser` ends up opening ` phofurl (like ` phofurl instead of `<url>`.
(using the latest cli, but with the v0.17 branch.)
input component has no outlined border.
button with round style should have rounded ripple effect, but on ios safari it shows as regular square ripple when i press button quickly multiple times.
it seems like its happening only for the buttons in toolbar
the padding for toolbars in all versions of ie does not match chrome/firefox/safari
interface qvueglobals in does not contain `lang` property
when using quasar app in safari 10.0, this error shows up in the console.
it also happens on quasar docs page for resize observer.
phofcode the offending line is in resizeobserver in `__cleanup` method, line 59 (in quasar 1.0.5) phofcode
font awesome 5 icons render larger than default (material) icons.
i would like to only include one icon font in my project (in oder to reduce overall size) - but it doesn't look as nice when the icons are oversized like this.
when mixing material and font awesome it looks even worse.
sometimes when using the sessionstorage, cookies or other probably other (quasar plugins) in an app extension i get this error: phofcode [edit] quasar doesn 't complain during compilation.
but if you run the app that is thrown as it tries to use non-existant props, eg `cookies.remove(...)`.
this error is sort of complier-intermittent; it sometimes disappears and comes back between compiles.
the annoying thing is that it has appeared/disappeared out of different reasons and can 't really reproduce and pin-point the cause.
eg: installation of it then started.
at one point i had installed "vuex-aspect" and started, then i deleted all node_modules in the hosting app extension, `yarn install` worked, but for "webpack-graphql-loader" i did same bug still persisted.
there are many instances this happened can 't reproduce or resolve same way,
when qdialog has a qcard with width set and input field inside it, a scrollbar appears when user puts focus to the input field or writes smth in it.
"~assets" alias not working in icon property of the q-btn element, it just remains as is
when hovering over a splitter component, the mouse cursor flickers badly on windows 10 (haven't tried on mac) and completely disappears if the mouse is held still.
it continues to flicker badly once you begin to move the splitter bar.
app extension render function not copying dot files eg: `.myrc`.
i have a dir structure that only contains dot files that i need to render to main app land during extension installation and the render function isn't copying them and completely omitting the dir structure altogether.
when setting the input-field to use lazy-changes: `@change="e => { message = e.target.value }"` qmenu will delete the contents of the input-field when opened.
when input has autogrow attribute and readonly=true, input area cursor becomes disabled
qselect only emit the input event in first select, after any change is emited
i don't know whether to call this a bug or a feature, but the thing is it seems like extensions are being made with the assumption that i would expose everything to the hosting app using the `templates` folder, ie: `api.render(...)`.
i have noticed that this is actually undesirable most of time since it will blot main app with non problem-domain-specific code.
it's like putting all node_modules code into your app src folder on installation.
i know there is desire to customize extensions and this is fine, but most of time extensions want to add that needed feature being without blotting actual app they are extending and live in
form validates inputs in a wrong order when there are custom components
qdate marks dates of adjacent months as non-selectable.
this is especially confusing when other dates are _really_ non-selectable, by being disabled with the `options` prop.
example: all upcoming dates are selectable, but it shows 1st, 2nd and 3rd of august as non-selectable (until you switch to august, obviously...): image phofimage
i am playing with qtable and columns[] and want to format field with html tag.
however i fail here columns: [ { name: 'name', label: 'name', align: 'center', sortable: true, field: row => (`${row.name} <b>abcd </b>`), format: val => `<b> ${val} </b>` }, ] i try to embed html code in field and format attribute.
however in browser html code is not run, still print out <b> tag as text
_occasionally_, when i click on a qsplitter separator button i receive the following console error: phofcode clicking the button is supposed to change the splitter model to 100 so that it hides the right side.
instead, when this error occurs nothing happens.
clicking separator button again works as usual.
this is a very hard bug to reproduce.
it occurs roughly once in every 15 tries.
this is most similar to issue #3495, but this issue is focused on using separator button for changing splitter model.
also, instead of using a text area inside `qsplitter` my setup has a template that includes `qcard `with embedded `qscroll-area` with `q-tree` inside of that.
qeditor losing focus when toolbar buttons are pressed.
recompiling and app hot update fail if array mistake
the issue is in <q-table> component with responsiveness.
when i use action items or custom rendering mechanism in column fields but when i resize window, and it convert to card it causes the issue in card rendering.
in card action items not showing up, or custom html not rendering.
q-menu inside q-item does not work if q-item has a clickable property.
empty content is shown when opening a quasar app in an embedded internet-explorer window, despite edge-compatibility setting in meta header.
a vue.js app is working fine.
also in a regual internetexplorer window, quasar is working fine.
i suppose some 'window. '
property is queried, that in hosted context missing.
since vue.js working, hopefully not something too serious.
in chrome, qbuttons with icons have text displaced by 1px when used in qdialog
in the theme builder, opening a color-section box will make it flicker between different sizes if your screen is not large (e.g., under 1300 px wide, or 580px tall).
i've tried it in firefox and chrome, and only had it happen in firefox.
when using a qdrawer exactly the same way as shown in this example, it works correctly.
phofurl however, as soon as we remove the `bordered` property, we see the icons moving left/right by 1 pixel when hovering.
shrink doesn't seem to be working all the time with zoom on qtabs.
using the "--skip-pkg" (or "-s") argument to "quasar build" doesn 't correctly update an ios cordova app.
(i was trying to use --skip-pkg because i wanted to speed up my build.)
i am trying to use `quasar serve` however it seems to keep sending me on 404 | page not found.
qselect triggers the model data change multiple times when a different option is selected.
when there are several (n) other qselect components, the time will add by n.
there are serveral context menus defined inside a v-for loop.
all of them share the same `ref`.
when a button is clicked the corresponding context menu should appear.
this is done by calling a function which identifies the correct menu component and calling `show()` on it.
the menu does not appear.
the loop/ref idea was borrowed from phofurl
a qselect with a @keyup.native property does not seem to trigger the specified function in cordova (though it does in a pwa).
i've also tried @keyup, @keydown, and @keydown.native with the same results.
this codepen behaves as expected, though the same code compiled to a cordova app (android or ios, though i've done a lot more testing on android than ios) doesn't ever trigger the mykeyup function.
have a qdialog with component inside with properties being passed.
when qdialog is fired, the properties inside the component are not being passed.
subsequent to that, if i close the dialog and open it again, the properties are then passed.
the docs here: phofurl state that one can pass emulator options as part of the build or dev commands.
however this doesn't seem to work.
i'm trying to pass the `-dns-server` options to the android emulator but it doesn't work.
the docs are a bit ambiguous about the actual format for doing so and don't provide examples, so i'm not 100% sure if it's a but or if i'm just doing it wrong.
a clear and concise description of what the bug is.
given a `q-slide-transition` inside a `v-show` like below: phofcode and both `outercondition` and `innercondition` evaluate to `false`, if `innercondition` is first set to `true` and then `outercondition` is set to `true`, the `innercondition` div has a 0px height and is not shown after the `outercondition` transition.
in this case i 've got an outer `qslidetransition` as well but that 's not required for the issue to happen.
i assume this would happen if the ancestor was hidden for any reason, `v-show` or otherwise.
the validate.json file for the validate mixin is assuming the prop error as the test result.
following the code in component, prop error and errormessage should be used for external validation and computed haserror returning validation result, both external and internal.
the code in js file it's ok, but in json that generates typedef files and docs it's wrong.
also in first examples of qinput usage documentation, it shows use of haserror as only way to validate fields without qform.
so probably this computed was forgotten when qform was created.
when we have nested router-view 's inside q-dialog, the parent route component is somehow duplicated.
expansion item may be turn into active state just like the list item component.
but it ignores active-class prop when active state.
qselect filter is not being cleaned after selecting a value.
it seems like app extension 'install ' is causing components with `template strings` to fail on installation when it is asked to render the templates.
take a look at the component definition in eg in codesandbox: phofcode that is normal and works in a normal component.
but trying to use this in an app-extension component will cause that component not to render and fail the installation as it throws an error saying `proper` is undefined.
it 's trying use `proper` during rendering of which it shouldn 't.
it should just leave it as and render without interpolating it.
so escaping or something needed before the render function called.
in firefox (chrome seems to be fine) when using `qslideitem` around a `qitem` that has a route specified, the slide/swipe feature is very difficult to operate.
the drag gets stick after a few pixels and does not resume until you release the mouse button, at which point it oddly resumes without the mouse button pressed.
not sure if this is something with my machine, or i'm doing something wrong, or if it's a bug with firefox, or quasar.
quasar typings don't cover the plugin object, which is required to mount quasar during testing (in jest, for example).
the `quasar` plugin object is defined here: phofurl and thus included into the generated `quasar.common.js`.
this allow it to work when using js and including it like `import { quasar } from 'quasar'`, but as soon as you enable typescript you'll get an error because it has not been defined into typings.
`quasar` should be of type `pluginobject<t>`, where `t` are the optional parameters of the plugin.
shadow in the qtoolbar inside the qcard doesn't work
when using qselect on a mobile device (only checked on android), then the filter does not get applied when i start to type in the qselect textbox.
only after a whitespace has been added.
_it appears that anything only happens when a whitespace is involved in the modification (either one is added or one is deleted)_
quasar platform detection is detecting edge as chrome on android
class and style attributes do not propagate to the qmenu.
trying to recreate the fab to menu material design concept: see *transform into a menu with the related actions* section at material design phofhyperlink video direct link phofhyperlink
qinput autofocus an error `typeerror: this.$refs.input is undefined` if destroying doing it fast.
event a `$nexttick` is not enough to prevent it.
when doing `quasar dev` for a fresh empty project, i always get this error when the build process is around 50% done: phofcode build process then freezes.
doing ctrl+c then running the suggested `npm install` command from the error message fails (could not install / error code enoent / -4058 / no such file or directory).
tried as well with `yarn add`, no luck.
i get a very similar issue & error message about "missing dependency .../objectspread2" when running `quasar build`
the qselect standout shows wrongly on mobile layout...
when i have a form with a qselect that has the use-input prop set and the form has at least one other qinput field, when the browser offers to autofill the form fields for you from qinput and it puts a value into input of qselect also, value may not match any of choices for qselect and text remains in qselect 's input field.
once i click into qselect input field, label slides up and text that did match any of choices goes away when i click back out of its input field.
quasar v0.17 did not have this issue since qselect 's field for filtering did not seem to pick up autofill since it only shows after user opened list choices.
autocomplete="off" did not seem to prevent from being autofilled.
the code pen does include vuelidate validation, but i found that after qselect 's had a value from autofill, validation failed, but itself show error indication ( red outline, etc ) for now work around is to use use-input prop.
material icons don't display correctly using ie 11 in production mode
hello, i 'm using localstorage in a boot file w/ v1.
i get this error when trying to call getitem() is not a function" this is new behavior - this code was working previously.
phofcode then in feathers.js, i 'm importing from quasar.
the alert and floating badges align to the top right corner of the container rather than the icon.
q-badge can't add event when floating
when the editor content is empty, an error occurs when you click the link button.
typeerror: cannot read property 'iscollapsed' of undefined
the bottom-slot spacing on qinput is not sensitive to the content it contains.
qselect display value instead of label
the quasar documentation for v1 states that qrange has a @change event which is emitted when the user releases the thumb of the range slider, this does not actually happen.
this is a continuation of #4401 (thanks for the very quick fix btw.)
before, the aria label was rendered on the wrapping div, now it's rendered directly on the input.
to be honest, that sounds absolutely reasonable for me, just want to make sure that this doesn't fall through cracks, as we have some tests that rely on it and i want to know what correct way going forward is :) are you planning to change this or keep as is, that is: keep aria-label on input itself?
the value of the qinput starts automatically really fast by just hovering over the arrows with the mouse.
image phofimage the type definitions lack for qvueglobals['dialog'] lacks definitions for the custom props for components using the custom component qdialog evoking.
a clear and concise description of what the bug is.
a dialog with persistent: true prevents the dialog itself from closing when clicking/tapping the backdrop or when hitting the escape key on a desktop.
however, it doesn 't prevent it when tapping the android back button.
i don 't know if it 's expected behavior but i guess it 's not.
the q-drawer doesn 't show anything with my specific setup when opened on "desktop".
however, opening it on "horizontal ipad" does make it properly show up.
(i was originally only developing on horizontal ipad view, that 's why i found out about this later) see gif: 18 27 58 phofimage
when using an input mask and keep on typing in the input field, browser window freezes for some time (depending on input mask length, as far as i could test).
loadable component fails to get the state.
we've upgraded our application to react and react-dom v16.10.2 that was created using react-boilerplate v3.7.0.
we now get warnings due to the renaming (and deprecation) of componentwillmount that are used in the injectreducer.js file ( phofurl is there any upgrade path for older react-boilerplate versions to use newer react versions?
does someone in the community have experience in upgrading older react-boilerplate projects?
in my project ( phofurl i have several sagas that are responsible for retrieving data from multiple api endpoints.
i've split up the sagas so that each saga has its own endpoint.
there is one saga that controls login and logout actions on the application level phofhyperlink .
the application saga is injected in the app container component with key 'global'.
i used that same key for another saga phofhyperlink which didn't give me any issues when developing locally.
after i ran webpack and tested the application on production, other with same key as main stopped working.
i didn't get any data from apis nor did get any errors or warnings in my console something was wrong.
after a lot of fiddling and changing key name of saga, got application working.
i 've developed apps using previous versions of this boilerplate in the past where i could export multiple saga from the same file doing the following: phofcode i 've started a new project using the latest version of boilerplate and this no longer works.
the one thing i 'm doing differently is using `useinjectsaga({ key: 'users ', saga });` instead of `injectsaga` hoc.
when i use above example, saga is not run.
but, when i tried this: phofcode that first saga is then picked up.
could use some help understanding if this is an error on my end or a change in how are picked up that i 'm not understanding.
i 'm posting container and files being used in hopes someone will have an answer.
after upgrading to the new v4 i see that routing / selectors etc only works when each component 's reducer is made global, i.e (somecontainer below): phofcode if the components reducer is local (i.e.
not assigned to global reducer, like above, the app crashes (i also had some problems before with switch not recognizing location, but i solved it with a little help phofurl so it seems like state for that "local" reducer is not accessible in some way?
it is strange because i simply do use useeffect in my container component: phofcode and later in that containers components selectors do: phofcode the ** error ** is: phofcode so it seems like ** suspense ** crashes in some way?
any on encountered same issue?
i have several routes in app and on come to route, in componentdidmount, i fetch data from server.
when i change route and then come back to the previous, i have my requests mutiplied, more and more on evry route change (first it is one call, then 2, 4, 6 and so on).
it is also when i call post on page - it is also multiplied.
that situation happens only when i use application on server build with basename to be run under specified path i add {basename: '/bo/'} in createhistory - app>utils>history publicpath: '/bo/' in output section app >internals > webpack > webpack.prod.babel.js when run app without basename, locally or built server - problem doesnt happen
i use the react-boilerplate latest commit code, without any changes.
i have some nested routes as in app: phofcode and in accounts component phofcode accountsdisplay is connected to redux and trigger a saga for fetching the accounts.
phofcode accountcreate is also connected and use saga to post a new account.
by default connected-react-router render twice on a route load/change.
**the issue is that the saga watchers are registered again and again on route changes.
same error to this: phofurl in release, develop mode is ok, not error, but only production also component has this error, no idea i find this , and remove after ok!
phofurl thank for this react-boilerplate!
when doing the command: `npm run build` i get the error: phofcode `
is there available documentation or proper way to deploy production build files into subdirectory?
hi, i am using react-boilerplate and i found that if i use redux-saga for pushing to new route: `yield then url is changing in browser but component is not rendered.
so i found the solution to add withrouter to compose in my root component: `export default compose( withrouter, withconnect, )(app);` it is the only solution that works for me, get redirected to "newroute".
saw that this solution is not recommended ( phofurl but how should one do in react-boilerplate then?
hi, i am using react-boilerplate and i found that if i use redux-saga for pushing to new route: `yield then url is changing in browser but component is not rendered.
so i found the solution to add withrouter to compose in my root component: `export default compose( withrouter, withconnect, )(app);` it is the only solution that works for me, get redirected to "newroute".
saw that this solution is not recommended ( phofurl but how should one do in react-boilerplate then?
hi, i am using react-boilerplate and i found that if i use redux-saga for pushing to new route: yield then url is changing in browser but component is not rendered.
so i found the solution to add withrouter to compose in my root component: export default compose( withrouter, withconnect, )(app); it is the only solution that works for me, get redirected to "newroute".
saw that this solution is not recommended ( phofurl but how should one do in react-boilerplate then?
hi, i am using react-boilerplate and i found that if i use redux-saga for pushing to new route: yield then url is changing in browser but component is not rendered.
so i found the solution to add withrouter to compose in my root component: export default compose( withrouter, withconnect, )(app); it is the only solution that works for me, get redirected to "newroute".
saw that this solution is not recommended ( phofurl but how should one do in react-boilerplate then?
created a new container called newpage.
yarn start the package from home page, i click the "new page" button then i tried to load repo from that page.
however, the saga does not attempt to load repo at all.
i'd really like to start closing any issues or prs that do not fill out the given templates.
it's such a waste of time to go through everything and try and figure out the problem.
we could also update these templates if that might help?
after running yarn run build, yarn start:prod it says it is running on the terminal window, however, when i go to phofurl the url suddenly changes to => phofurl and says this site cant be reached localhost refused to connect.
development mode yarn start works fine
i'm getting an error when running `npm run setup` on the `dev` branch that comes from the `compare-versions` module claiming is not valid semver: image phofimage it appears that some new code that checks the node version is not properly replacing windows line endings coming from stdout.
postinstall script which is running build:dll with node is throwing an error - as path for creating appropriate folder is wrong.
this is only on development environment as on production this script skipped !!!
> aem-authoring-ui@1.0.0 build:dll > node mkdir: cannot create directory ** ** : not a directory building the webpack dll... fs.js:646 return stringtoflags(flags), mode); **and i did quick checking:** ** dllconfig: ** { [boolean: false] exclude: [ 'chalk ', 'compression ', 'cross-env ', 'express ', 'ip ', 'minimist ', 'sanitize.css ', 'react-icons ', '@opuscapita ' ], include: [ 'core-js ', 'babel-polyfill ', 'lodash ' ], path: ode_modules eact-boilerplate-dlls ' } outputpath: ode_modules eact-boilerplate-dlls dllmanifestpath: ode_modules
i'm trying to use `react-palm` in my project but without success.
i tried some options like phofcode but always get phofcode and if i try do add at exlude phofcode i get: phofcode trying also did not work.
those tries was based reading phofurl phofurl phofurl phofurl what could i be missing?
my issue is that i get the props of my mapstatetoprops undefined on initial load then it take initialstae.
it doesn 't take the initialstate from the beginning and get an error on render() if i do not check if undefined or not... if i console log it on render, it first show as undefined then straight after show as defined with initialstate.
i do not think this is something normal.
if someone have an idea why ?
the boilerplate adds .bin extension to the .htaccess file
when using yarn workspaces, whenever we run npm test:watch it run all tests in a project, if we set jest to run "only files related to changed file" it does not run the tests in file that we just changed.
this hurts our tdd ux since we now have to reload every test in app whenever update a single test file.
when adding main chunks to additional assets in offlineplugin as below (webpack.prod.babel.js) it causes website to not load at all if the webserver is unavailable upon service worker activation.
additionally, **even if the webserver is restarted, it will take another service worker download, closing the tab, and restarting it, for the website to load again.
i'm having same problem described here phofurl with last version of the boilerplate.
i can't re-open/comment the previous issue so i'm creating a new one.
running npm run test produces a complete set of coverage and a somewhat amibiguous error message: final lines of output: test suites: 5 failed, 16 passed, 21 total tests: 5 failed, 56 passed, 61 total snapshots: 0 total time: 7.381s ran all test suites.
react-boilerplate@3.5.0 test: `cross-env node_env=test jest` err!
exit status 1 failed at the react-boilerplate@3.5.0 test script.
this is probably not a problem with npm.
there is likely additional logging output above.
a complete log of this run can be found in:
how about creating a cli based on boiler plate ?
i add `jest --watch` to npm scripts like this commit phofhyperlink , when file change it will still re run all test like `jest --watchall`.
but base on jest document phofhyperlink , i think it should only re run the test for change file.
is it possible to just re run the test which related to the change file?
`npm run setup` on windows doesn 't create a new repository after installing the dependencies and clearing the old repository.
i think this is actually a bug because the boilerplate features should be compatible, but the fix is likely a feature request.
as far as i can gather, enzyme's render and react-intl don't play well together, resulting in the error in the title.
i found corroboration, discussion, and workarounds here: phofurl and here: phofurl it would be great if this (or another) workaround could be part of boilerplate so that enzyme rendering of components with formattedmessage elements will succeed without having to choose between partially-tested workarounds found on web.
there 's an error when run `yarn run lint` or `npm run lint`: phofcode
running `npm run test` in the example app as outlined in the testing notes does not perform any tests on windows 10.
`no tests found in eact-boilerplate 19410 files checked.
testmatch: - 19410 matches testpathignorepatterns: ode_modules - 19410 matches testregex: - 0 matches pattern: "" - 0 matches`
i 'm experimenting antd (ant design) with this awesome boilerplate, i fiddled around with some basic components in dev mode, everything works fine and looks very promising.
but as soon as i 'm building it as production, i got this error: "you may need an appropriate loader to handle this file type."
(please see the full details below)
i can successfully use `redux-form` within my app, but i get a weird cryptic errors with the test suite after adding it.
this is really easy to replicate as all you need to do is add `redux-form` to the `package.json` file.
i am far from being an expert in i18n, but shouldn't an empty translation json contain an empty object, not an array?
is there a certain reason why empty array is generated, when i18n's seems not to benefit from them at all at top-level (since values cannot be assigned to keys) ?
in webpack config (`base` in that case), `resolve#extensions` reasonably assumes that `.jsx` files can be used in the project (besides the fact that react components use `.js` extensions in the sample app): phofurl regardless of that fact, regex for `babel-loader` allows only `.js` files: phofurl hence, one on side, config allows and suggests we ** may ** use `.jsx` files, but on the other side, it will not properly import / compile these `.jsx` files.
would probably be reasonable to add a missing `/ .jsx?$/` in regex for `babel-loader` or remove `.jsx` extension from `resolve#extensions` ?
`npm run build` stops at 91%, quits, and the build folder isn 't created.
happens when i try to do a build on a cloud ubuntu vm.
<img width="586" alt="screen shot at 11 53 48 pm" src=" phofurl
whenever i try to inject a saga, in the new dev version, i get this error : `uncaught typeerror: cannot read property '_currentelement ' of null`
environment variable not exposed when running in production.
after adding the `request` packages for call an api on the express server i got the following error: phofcode and after running this command in terminal i got this error: phofcode
i've got an spa developed using this boilerplate, and was happily trying to deploy using what was mentioned here: phofurl my whole project folder is inside the web root.
ran `npm run build:dll` and `npm run build` with no problems, serving with either `npm start` or `npm run start:prod` loads the whole thing without problems.
loading the static files by navigating to `/build/index.html` results in only the main.js chunk being loaded.
here's a screenshot of chrome devtools window (app loaded from static files): image phofimage here's how it looks like using run start:prod`: image phofimage using command for deployment is pretty much non-negotiable at this point, there was more problems trying to get apache to work properly (since i intended deploy it under a subfolder e.g.
i read from a closed issue on how make paths relative, and i disabled `offline-plugin` by removing it from `package.json`, `webpack.prod.babel.js` and `app.js`.
here's changes i made with my config: phofcode aside from setting `target: 'web'` `node: { fs: 'empty '}` there's nothing else modified initial config.
`app.js`, only disabled `offline-plugin` import.
or is it not true anymore that can serve files statically?
if you don't have lodash or cross-env installed before running `npm run setup` or installed globally, then the project will delete the setup script, but will not complete setup.
this puts the project in a state where you need to re-clone in order to fully set up the app.
the "tagged template literals" link directs to phofurl but that page says that the documentation has been moved to styled-components.com
i'm trying to deploy to heroku, it deploys but the app doesn't work.
i have followed the deployment steps for heroku phofurl but no luck, the logs is indicating a problem with cross-env, i have tried to remove it but it didn't work out.
syscall spawn test:clean: `rimraf ./coverage` spawn enoent failed at the test:clean script.
this is probably not a problem with npm.
there is likely additional logging output above.
a complete log of this can be found in: code elifecycle errno 1 build:clean: `npm test:clean && rimraf ./build` exit status 1 failed at build:clean script.
this probably not a problem npm.
there likely additional logging output above.
a complete log of this can be found in: code elifecycle errno 1 prebuild: `npm build:clean` exit status 1 failed at prebuild script.
this probably not a problem npm.
there likely additional logging output above.
a complete log of this can be found in: code elifecycle errno heroku-postbuild: `npm build` exit status failed at script.
there likely additional logging output above.
a complete log of can be in: build failed we're sorry build failing!
you troubleshoot common issues here: phofurl some possible problems: - dangerous semver range (>) in engines.node phofurl love, heroku !
push rejected, failed to compile node.js app.
push failed verifying deploy... !
hi, i have browsed some articles but i seem not to be able to find something helpful, so i am asking here and please help me.it 's my first time to post things on github so tell me if i made any mistakes.
here is my problem: i am amazed by the styled-components, which makes my project simpler.
went to see the official documents on the git of styled-components, where found more functionalities than here saw.
( phofurl found functionalities like "extend", "attrs", which seem be very powerful because can inherit properties or can set some default properties on a self-defined tag.
also tried it on a "create-react-app" propject( phofurl and it works just fine.
however, when was using it the react-boilerplate, got an error: typeerror: button.extend is not a function here is screenshot button extend is not a function phofimage here code wrote(i actually copy example code from styled-components official phofcode by way, origin version of styled-components fetched from react-boilerplate was 1.1.2. tried update it latest version (2.0.5), ran again and still got fail(as image shows) help me this please, thanks lot!
[performant lweb font loading][1] doc explain how to enabled it 1. append link at the end of body on the file `app/index.html`, talks about the open sans font but is also missing 2. add `body.fontloaded` style, is pointing to `app/styles.css` but that file doesn't exists i think the global styles are on `app/global-styles.js` 3. in app.js add a <fontname>observer for your font, here there's not example in file `app/app.js`
intellisense/suggestions are seemingly non-functional in a brand new project (cleaned, `react-boilerplate`) in vscode.
whereas this does work in `create-react-app` and general javascript projects.
in a new react-boilerplate project: image phofimage in a new create-react-app project: image phofimage image phofimage
experiencing a bug when adding io.
the error messages are <img width="660" alt="screen shot at 15 26 18" src=" phofurl
captura de pantalla a las 12 32 24 p m phofimage
i am having troubles implementing external bootstrap libraries with the react-boilerplate.
this is potentially related to the webpack configuration but i can't find anything related in the documentation.
i would recommend a guide to adding node_module extensions that need client-sided-inclusions.
following setup in the module: image phofimage browser returns error that require statement didn't return a function: image phofimage
this is not particularly a bug or something that prevents having a fully working app in production, but i think because of the way styled components injects styles directly into the app there is no css file cached with service worker.
its super tiny and my time to initial paint is still about 3-5ms which is still amazing!
however when you go back and refresh a second time it re injects all of the styles every time and that leads to the appearance of it loading everything again even though its cached.
in an app-shell model where core styles and initial render should be as fast as possible it looks like it still jumps a bit.
i suppose one of ways to combat this would be to put your app-shell styles in separate css file instead injectglobal, so service worker can cache it.
has anyone else noticed this or am i just misunderstanding something.
this boilerplate amazing my #1 choice for any web app thats more than just few pages!
in a clean installation, when i run `npm run build` i go this error output: (i have a similar error on `npm run start:production`) phofcode
stuck at `cross-env node_env=test jest --coverage` (add images if possible)
tests of the project is impossible to run via intellyj idea (webstorm) npm plugin.
the test are freezed and not run.
well usually it is not a problem because i can run it manually in console.
but it become serious problem when you wan to automate build with another tools.
for example i have project which builds with maven and react-boilplate project just another module.
of cource i run test during maven build and it freezed as well.
newly cloned boilerplate returns unexpected token error after running the usual setup.
using latest version of react-boilerplate, can't load local fonts: unable to load the direct js file to my index page (i.e.
bottom of page before body ending tag) a 3rd party js file has to be loaded in the application, bottom of the page.
and html for reference to.
which we don't have any control on.
a 3party 'supportchat' folder, which consist of js and a html file.
this has to be in application is same directory , so that when ever the guest is facing issue's on page there popup chat opens.
webpack alias seems to be ignored when running test.
here is the line i added into the `webpack.base.babel.js` file `resolve` object: ` alias: { config: path.join(__dirname, '../../app/config', process.env.node_env), } ` when running tests, i have the folliwing failure message: phofcode using `import config from 'config'` works fine in development and production, and it loads the correct file, but it does not in test mode.
i guess this is due to webpack being loaded in a special manner during tests ?
is there an alternative to alias that would prevent this bug to happen ?
hi, i get the following error when running tests.
phofcode it seems that `memoryhistory` does not exist in `react-router` (maybe after an update ?
), and indeed i can't find the corresponding export, instead there seems to be a `creatememoryhistory` function.
we 're experiencing problems importing moment locales in our react-boilerplate project.
the problem is: if we "import then it 's as if the locale is not loaded, and moment stays in english.
if we "import then the locale is loaded, we can use a localized moment, but then the tests fail: jest tells us "unexpected token import" when trying to parse (which is indeed written using es6 module syntax).
i have worked around that by using a custom including the moment module, but i 'm wondering why locale is not loaded when using "normal" import.
for reference, same code works fine with a fresh create-react-app project.
i am using react-boilerplate 3.4.0. this is my `package.json` : phofurl i am trying to add the `async` and `await` using the babel plugin source: phofurl does anybody succeed to install a babel transform plugin with success ?
did a fresh install, trying to run a generator, getting: phofcode
this pertains the 3.4 branch (since that's all i've messed with) and running `npm run clean`.
the cleaning process removes the tests from the components that it does leave behind, so it's impossible to get a production build of the clean app without changing coverage settings or adding tests back in (with modifications).
it would be better if a clean app came with minimal tests to meet coverage requirements, guided by assumption that a clean app really shouldn't fail any of npm scripts as written.
i understand that this might not be easy to achieve given that some of components referred to in tests no longer exist, but could mean either sample should be refactored so can't happen, or a different test file should be dropped in during clean (probably harder do).
for some of components left behind, such as `app`, `notfoundpage` and `languageprovider`, boilerplate was considered common enough not out so there should on all boilerplate.
keeping these around would at least stop coverage from plummeting right off bat.
when i deployed code to heroku and got an issue below: > remote: > react-boilerplate@3.3.3 build > remote: > cross-env node_env=production webpack --config --color -p --progress remote: remote: module.js:471 throw err; error: cannot find module 'yargs ' at (module.js:469:15) at function.module._load (module.js:417:25) at module.require (module.js:497:17) at require object.<anonymous> module._compile (module.js:570:32) (module.js:579:10) module.load (module.js:487:32) trymoduleload (module.js:446:12) function.module._load (module.js:438:3) npm err!
argv "run" "build" npm err!
v4.0.5 code elifecycle react-boilerplate@3.3.3 build: `cross-env node_env=production webpack --config --color -p --progress` anyone can help me?
- currently running `npm run extract-intl` works unless: user doesn't use his own `babel-plugins`, specially transform-plugins such as - the code repetitively reads `presets` information from `package.json` phofcode
first let me describe my setup, which is probably wrong.
i have a hapijs server, which has the following endpoints - `/` which serves the index.htm, currently not used - **requires auth** - `/login` serves a login form, tat calls `/api/login` - `/{param*}` which servers the assets and statics **requires auth** `/api/login` allows to log in and sets a cookie `/api/whatever` api methods and stuff.
**requires auth** the expected flow is, hit any route, and if you are not loged in, you are redirected to `/login`, you log, the cookie is set, you are redirected to `/` everything works from there.
so login flow is separated from entire app.
probably it would be a good idea to include login flow into main app flow.
i am having problems because service worker is asking for resources server without auth cookie, so server responding with html of login form.
as result service worker caches all resources as same response.
this causing me several problems, one of them that i can't navigate any route because all routes end showing same.
one partial solution removing auth requirment from assets.
i suppose that this common, but if can make it working with auth it will be just fine.
but again, having in regular form that then redirected actual app seems like an awkard solution.
if anyone has solution my problem, or flow that can be easily integrated into this boilerplate would be very grateful.
i was wondering if there is any example around there of how to serve the production build from a hapi server.
i'm hapi-auth-cookie for session autentication, and i'm running in some issues serving the chunks and some routing loops.
if there is any example about how to configure hapi for this, i will be very grateful.
first of all, please let me thank you for the awesome work done with this boilerplate.
it has a lot done out of the box, and has a lot of potential.
but, at the few hours of start using it i got really confused.
before even trying to do anything i understood what sagas are and how do they work.
i missed a lot a bit explanation about how to "start your own application".
there is lot good documentation about generators, the frameworks used, and all that stuff, but when you find yourself alone in front keyboard... you feel overwhelmed.
i got no idea where to start: - how or where can link selectors with reducers?
mean root flow - how to properly fire actions, from where?
- or where can name part store?
how can nest containers inside other containers and map them new part store?
those are actions that i 'm able do in regular react+redux workflow, but as said, here feel bit lost.
everything is so automatic that it took me an hour figure that: 1. when you create new container, default reducers sagas are named with that container 1. when create new route, store section corresponds is named with name container will live on route 1. you have match name selectors name container plus `select` prefix 1. camelcase words are converted lower case when prefix is removed, for example `selectusers` becomes `users` if can clarify those doubts write small "getting started" guide will be my heroes.
i am having difficulty tying my redux-form installation into the redux and middleware setup we have in the boilerplate.
i have added it to the combinereducers and imported the node modeul by following docs but i can not even get it to enter input into field.
it just stays blank when typing with cursor in field.
if any of you guys have suggestions that would be a big help.
there are some error messages in console when change language from english to german <img width="960" alt="screen shot at 11 40 30 am" src=" phofurl
hello, i 'm trying to implement the react-dates package in one of my projects but i always get the error "uncaught (in promise) typeerror: (0 , _moment2.default) is not a function" even in the simplest setup.
my guess is something related to the way we load dependencies (momentjs in this case) but i was unable to go further in my investigations because i still learning how webpack loads modules specially using dll.
you can't do a development flow in this repo when you have large images as part of the source.
the subscription to the hmr websocket never returns.
using npm start: <img width="656" alt="screen shot at 15 20 55" src=" phofurl - font - normalize - my css using npm run build: <img width="736" alt="screen shot at 15 21 40" src=" phofurl - font my css normalize stuff like margins etc gets reset this way in prod.
in the webpack config phofhyperlink `mainfields` seems to be breaking libraries such as `isomorphic-fetch`.
this is because when loaded in the browser the `main` field of `isomorphic-fetch` is used.
however, `isomorphic-fetch` 's `package.json` is defined as.
phofcode so the node version of library is loaded because of `mainfields`.
this relevant to this boilerplate as very popular libraries such as redux-api-middleware phofhyperlink use `isomorphic-fetch` for requests.
the error phofcode i am fairly new to webpack so i apologize if i have overlooked something.
as to fix, i am not sure but maybe change `mainfields` something like phofcode
when route change using `<link>` or `browserhistory.push()` every component get unmounted.
i'm not sure if it is default behavior.
~~but the problem is when i want to route to the same page, but bind param (e.g.from `/user/` => `/user?showmodal=true`).
all component should not get unmount/remount...~~ it won't unmount if it's under the same route.
i ran into something very weird today.
basically, i didn 't get the same output when hitting f5 and ctrl+f5.
f5 showed the old website, and ctrl+f5 showed me the latest -correct- version.
i couldn 't figure out why, local caching was disabled through the browser console.
it 's only when @gihrig gave me this solution that i finally figured out (or think so) what was wrong: `chrome dev tools > application > clear storage > clear site data` think that because of "offline-first" feature, _sometimes_, local caching gets screwed.
and only way to fix it is to clear it.
basically, a simple warning in docs somewhere would be enough, don 't really know what 's best place for it (maybe when we talk about offline-first?
assuming it 's indeed related to offline-first.
after adding a child route as described here phofhyperlink , the container specified in the parent of the child route route is rendered instead of the one specified in child route.
`npm run test -- --browsers safari` test failed.
i 've just started a project from scratch and added a dependency to firebase phofhyperlink .
when i generate the build, it finishes with an error.
here 's what i find in the npm-debug.log: 17 info lifecycle failed to exec build script 18 verbose stack error: react-boilerplate@3.2.0 build: `cross-env node_env=production webpack --config --color -p` 18 verbose stack exit status 2 18 verbose stack at eventemitter.<anonymous> 18 verbose stack at emittwo (events.js:100:13) at eventemitter.emit (events.js:185:7) at childprocess.<anonymous> emittwo (events.js:100:13) childprocess.emit (events.js:185:7) maybeclose if i run `npn run start` and go to the chrome browser, i see this in my console: screen shot 10 09 50 am phofimage
the lint script in the project has completely stopped working for me.
originally i thought i might have changed something in my project so i grabbed a fresh clone of the repo, and saw the same issue.
i have tested this on 3 physical machines and 2 docker containers with different configurations to determine that the problem is not in global node/npm modules.
every time run `npm run lint` get following output: phofcode what is really interesting is that lint worked just fine 2 days ago, no updates to dependencies have been made, and it just started throwing this error yesterday.
have seen at least one more user mention this issue in gitter.
whenever i click on a `<link>`, its `activeclassname` style doesn't appear to get applied, but routes are changed, but `activeclassname` appears only after second click on the `<link>`.
i've tested this with react-router versions 2.7, 2.8, and 2.8.1 and they all have issues.
new es-lint rules have been added which cause some generated files to fail testing.
the generators, and the files they create, should be included in the test suite in order to ensure they are kept up to date with future changes.
it would be good to automatically generate a set of files and test them (for linting at a minimum).
when running `npm install` the process works great until it reaches the webpack dll.
once this completes a number of parse warnings and errors scroll up the screen.
see the attached console log for a sample.
the errors don't seem to impact running my app; but i can't say i really know what impact of them is.
i've created a stackoverflow question on subject but haven't received any good ideas to resolve issue: phofurl
i set up a really simple component with a test to demonstrate this issue.
i 've also seen this issue when running tests on other components and the common theme is that it always seems to look at line 9: phofurl i 've done some googling and thought the issue might be related to using istanbul code coverage with karma but turning off code coverage doesn 't seem to affect this at all.
site never loads properly on oneplus one.
it works on ipad mini and zte blade though.
this can be found in the chrome devtools on desktop: phofcode
the `npm run build` fail without any meaningful error
heroku install is failing, i presume it is due to the package.json having unmet peer dependencies.
webback can't resolve modules when building reactboilerplatedeps
the second example on phofurl throws a `received true for a non-boolean attribute show` warning.
looks like overlaytrigger is passing down a boolean `show` prop down to tooltip.
trying to add an id prop to top level navs items.
the 'id' prop and other data attributes are ignored.
when using a custom component in a `dropdown.toggle`, if the custom element takes an onclick property (which should be the case), the type checker emits an error telling that an `onclick` prop must be provided to `dropdown.toggle`.
this message is incorrect since it is the responsibility of `dropdown.toggle` to call our custom component with `onclick` prop.
0.33 introduced critical a11y error, when opening dialog(modal) `aria-hidden=true` is applied to it.
if you put a `<nav>` inside a `<card>`, the resulting `.nav` element is always given one of the `card-header-*` classes (`card-header-tabs` or `card-header-pills`, depending on the `<nav>`'s `variant` prop).
this happens even if the `<nav>` is not inside a `<card.header>`, eg if it's in card's body; and in those situations, unwanted class messes up `<nav>`'s margins.
this issue has closed but the problem persists.
phofurl when using a `form.check` component, changing `type="checkbox"` to `type="switch"`, the onchange function no longer triggers on click.
this is also true when using `form.switch`.
tabs cannot be selected using keyboard navigation if none of the tab items are active.
issue caused by setting `tabindex="-1"` on inactive tabs, even if none are active.
docs for nav state: phofcode phofurl but the role is never being applied even when manually specifying
the form based toggle button should not have a default role of group if there is a single value ( phofurl
the modal is currently setting the container to have the attribute of `aria-hidden=true`, but this is not allowed since there are focusable elements inside it.
the `overlay` component has an incomplete typescript definition and, as far as i can tell, it 's not tested either.
i have no idea how to type a `ref` attribute for `button`.
every value i can think of produces a compilation error.
"stateless" function components is an incorrect way to describe function components, so we should omit that terminology from our docs.
when importing react-bootstrap returns the error module not found: can 't resolve 'react-bootstrap ' in the version 1.0.0-beta.13.
in the version 1.0.0-beta.12 everything works well
when creating an accordion with only one card child, there is no border-bottom defined.
sliding direction of carousel with 2 items not working properly only not working proper when carousel has 2 items
clicking radio buttons inside dropdown items updates the active menu item but not the button itself.
the prop `size` on formcontrol does not get set on the html element when using `as="select`.
it is possible to set `multiple="true"` and use css to set the height, but it is not possible to have a single select that displays the options as a list rather than a dropdown.
i have dropdown.menu component set to show hide itself with manually coded trigger, and after opening the menu once it never opens again by cliking on the button that toggles the visibility.
i 'm getting error from typescript when trying to create a customized variant for button, following the official guide: phofurl
warning about invalid prop 'children' of type 'string' supplied to 'forwardref' when trying to render accordion page.
the "react overlays" doc page, which is quite short, includes a hyperlink which looks like it should take the reader to somewhere they can find out more info, but instead it 's just a link to the same page the reader is already looking at.
when a navbar component is expanded, the navbar.toggler classname is "navbar-toggler collapsed", and when it is collapsed, the classname is "navbar-toggler".
should this not be the inverse?
i.e when expanded: when collapsed collapsed"
closely related to phofurl , this issue is however related to tabcontainer and not navbar.
using tabcontainer creates the following warning: > backend.js:1 warning: componentwillmount has been renamed, and is not recommended for use.
> > * move code with side effects to componentdidmount, and set initial state in the constructor.
> * rename componentwillmount to suppress this warning in non-strict mode.
in react 17.x, only the unsafe_ name will work.
to rename all deprecated lifecycles their new names, you can run `npx react-codemod in your project source folder.
* please update the following components:
vertical navs phofhyperlink of the tabs variant phofhyperlink use the default horizontal styling.
after upgrading from 1.0.0-beta.10 to 1.0.0-beta.11 (or later), the role attribute is no longer specified for the `nav` element generated by the `tabs` component.
it was set in 1.0.0-beta.10 and earlier.
this is an accessibility issue and is flagged by many accessibility testing tools, like axe phofhyperlink .
we are missing releases `v1.0.0-beta.11` and `v1.0.0-beta.12` from the changelog.
i'm migrating from 0.3 version to v1, and there are different types for object which pass to eventkey.
after switching to the new version i've got compilation error: > ts2326: types of property 'eventkey' are incompatible.
> type ' * * * ' is not assignable to type 'string'.
aria attributes, or at least `aria-labelledby`, don't seem to be properly passed through to the root `div` of a `dropdownmenu` component.
instead, the `dropdownmenu` component is always given an `aria-labelledby` attribute assigned to the `id` of the associated `dropdowntoggle` component, whether or not toggle is given an `id`.
the type files don 't believe there is a _ref attribute for things (e.g.
form.control) which there should be, according to the docs (e.g.
`nav` used for tabs cannot contain a custom component which directly returns a `navitem`.
react-bootstrap beta 10 version added touch support in carousel component, but the direction of slide navigation is right on right swipe and left on left swipe.
when using form control with html5 validation (i.e: uncontrolled react input components).
the event.target being propagated when clicking on the submit button is the same as event.currenttarget instead of originating from the button.
the event.target should reference the <button> element that originated submit of form, while event.currenttarget points to <form> element as it has onsubmit listener attached to it.
on mobile, when toggling the menu navbar, the toggle button is pushed upwards approximately half its height when the menu is opened.
collapseonselect only works with <nav.link> items and not with router <link> items
in "nav" that is inside of "tab.container", if you pass null or undefined as a child, it breaks switching between tabs with arrow keys.
i am unable to use react-bootstrap in my application.
every time i try to import and render a component (from react bootstrap) this exception occurs: > uncaught invariant violation: invalid hook call.
hooks can only be called inside of the body of a function component.
this could happen for one of the following reasons... i do not use hooks in my react application.
**the web app works fine without react bootstrap!
the type of `dropdownitem`'s `eventkey` is always received by its `onselect` handler as a `string`, even if some other type is used such as `number`.
`===` checking when testing the received value.
adding the `plaintext` attribute to a `<formcontrol />` input contained within an `<inputgroup size= 'sm '>` or `<inputgroup size= 'lg '>` (as documented here phofhyperlink ) doesn 't scale the formcontrols input as expected.
an overlay with a placement of "right-start" will not display an arrow.
can not set id attribute to listgroupitem
i'm using `react-beautiful-dnd` for drag and drop and i noticed that i cannot pass the `innerref` prop on `<row ref={innerref} />` because it seems that their is not a way exposed by the api to pass a `ref` on `<row />`.
is there a reason for this?
it seems that when providing the `muted` prop to `<form.text />` the flag does not add the `text-muted` classname as intended.
when i nest a form inside the modal element from the react-modal library, the user input into the input (or text area) field do not allow spaces to be typed.
so you can only enter a single word.
when you type spaces, they don 't register.
it 's like whitespace is automatically trimmed.
when running npm run build and deploying my react project to netlify, the netlify version of my website loses styling... here is an image of my localhosted version: phofurl and here is the link for the netlify version: phofurl i have ensured to add the relevant stylesheet link in index.html and added relevant import into index.js as instructed in react-bootstrap and bootstrap documentation, not really sure what is going wrong.
i have found that if i remove line: import from my index.js run locally i get exact same problem in local version as have in netlify version...
the `ref` attribute on components like `alert` (and others) does not seem to have a correct typescript definition.
first, thank you for making this wonderful library.
it seems that event handlers don't have types in 1.0.0-beta.8.
when i create a `<button>` with an `onclick` handler like `event => ...`, and my typescript project has `strict` enabled, vs code shows me an error, `parameter 'event' implicitly has an 'any' type.ts(7006)`.
the link to tab components on the following page is incorrect: phofurl current link: phofurl correct link: phofurl
`dndprovider.d.ts` imports react differently than all other type files.
`import react from 'react '` is not valid unless true` is set in the tsconfig.json.
all other type files import react correctly `import * as react from 'react '`.
dragsource element will retain the graphic element on top of it when dragged away.
drag box cannot work well when i use input type is password
after hours of debugging, i realised that in the "setup testing for jest" doc ( phofurl commonjs build points to `react-dnd/dist/cjs`, which doesn 't seem to exist anymore.
shouldn 't it be `react-dnd-cjs` ?
furthermore, after digging in the react-dnd package, we still have a file, which looks like an umd module.
i first decided to try this umd module for my jest config, but it doesn 't work: the `dndprovider` is not properly exported (see error below when running in my app or in jest tests).
everything 's working well with the new umd build, though.
phofcode is not up-to-date anymore ?
when using react-dnd html5backend in chrome on a windows 10 machine with a 4k monitor, display scaling is on by default.
this breaks the image preview offset when dragging.
when dragging an item, i want my drop zones to enlarge.
the item that i 'm trying to drag can be pushed out from under the cursor because a valid drop zone above it enlarges.
if this would happen, the draggable item just fails to be dragged.
in the debugger, i can see that there are two calls to my `collect` function.
during the second call, `monitor.getitem()` returns null.
when you use drag handle and drag preview while coding for drag component, drag preview does not shows up while dragging.
it seems like we are dragging handle only.
when run app it show this error
this appears to be the same problem that was fixed for #1275 i upgraded my app from `react-dnd` 7.7.0 to `react-dnd-cjs` 9.4.0 and similarly for (using `-cjs` to avoid figuring out how to get `electron-webpack & babel` transpile the only change i made was rename `dndprovider`.
continuing use the legacy wrapper api.
i'm getting this error: phofcode as addressed by #1277, this seems be due a call `object.useeffect`
running the umd builds of react-dnd and react-dnd-html5-backend (both v. 9.4.0) in ie 11 gives a syntax error.
i need a way to customize the size of dragpreviewimage.
currently what i am trying to do is to create a new canvas and use it as a preview image but it doesn't work phofcode
if you use react-dnd on a page, and you show that page within an iframe, the dropping doesn't work anymore.
using the breaks site-wide text drag-and-drop into inputs, even ones that are not managed by `react-dnd`.
this happens to all inputs event ones that are not children of `dndprovider` and even ones that are not managed by react.
i'm not sure what the name of this default browser feature is but here is a gif: ok2 phofimage
it seems that it is not possible to build a sortable list of sortable lists with this library without dumping hundrets of hours in try and error.
possible memory leak with react-dnd.
in a app with react-router-dom when i navigate away of a screen with react-dnd i still see a lot of my models instances, unrelated components (not child neither sibilings of my component containing the dndprovider) and `detached dom elements` with references to `dragdropmanager`.
at the current state the memory usage after i leave the screen dnd is around 49mb, if i comment out dnd components (which is now as simple as possible: provider + 1 drop zone) it goes to 28mb.
was able to recreate a small sample which only shows leak of detached dom elements references to `dragdropmanager`.
couldn 't yet replicate scenario where multiple components are kept in memory dragdropmanager as retainer object.
but here is picture retainer in one my components: <img width="624" alt="screenshot at 10 37 34" src=" phofurl
drag preview is calculated based on what is shown in the active window.
if we have a fixed width for parent container and add horizontal scroll to elements, drag preview is being cut off from the screen.
here is the sandbox link.
when an item is dragged and dropped onto a drop target, the mouse leave for the drag source is not triggered.
nor is the mouse enter for the drop target.
we faced this issue while trying to have difference styles on drop.
when dragging a draggable item with the `item.type = ''` (an empty string), it does not drag.
this is understandable, but there is not console warning anywhere.
if this is intended behavior, we should have an assertion.
otherwise, we should clear up this behavior.
i can do a pull if it's intended behavior, but not if it is unintended.
please clarify if it intended behavior.
when the components are dragged across `frame`, the offset of `frame` wont be counted by `getsourceclientoffset `.
and the offset of `draylayer` will be incorrect.
occasionally, when i drop a draggable, i get this error: phofcode i looked at existing issues such as #1435 and it didn 't seem applicable.
i 'm making a context state change in `end`, but no state changes.
cursor is wrong when dragging by mouse.
it happens when `dndprovider ` has `backend={touchbackend}` and true, enablekeyboardevents: true}` (for supporting dnd by mouse).
i have checked it on your examples.
i downloaded examples, installed replaced `html5backend` to `touchbackend` and added options (`{ enablemouseevents: true, enablekeyboardevents: true }`) to `dndprovider`.
chess_touch_backend phofimage droptarget_touch_backend gif phofimage
i have a multiple drag source and a drop area which accepts one of the types.
i expected that collect function of drop area should be called only for accepted types.
this behavior makes me do some redundant `if-else` clauses and causes re-renders of drop area.
according to the docs: 'this drop target will only react to the items produced by the drag sources of specified type'
the `props` variable in all callbacks (e.g.
`begindrag`, `candrop` or `drop`) only contains properties that are actually passed in the original object.
if a high-order component phofhyperlink is used, the properties from that hoc phofhyperlink are missing.
the user is accidentally able to overwrite the `dropeffect` using the ` command` when the `dropeffect` is "forced" by passing it in `options` in `usedrag`.
writing test with enzyme as stated here will not work phofurl
given a draggable item that contains an absolute positioned elements.
when the user drags it.
then the preview is larger than the component itself and also shows elements below.
it gives the sensation that you are dragging more than one element simultaneously.
i upgraded dnd from 7.4.5 to 9.3.2, but the browser throw an error: attempted import error: 'dragdropcontext' is not exported from 'react-dnd'.
the copy or move example from phofurl does not work in the hooks variant.
no matter where you drop any of the boxes, it will always alert "you moved ${boxname} into ${boxname}".
the decorator version works as expected
after dragging & dropping your first todo, all subsequent todos will only show the ":::" drag handler while dragging, rather than the whole todo.
i'm making a toolbar with draggrable tabs.
when i drag the tab the first time it's working but the second time the drag doesn't work anymore.
edit : after some tries, it seem to work again sometimes but fails again after another drop
if connectdragpreview is directly inside of connectdroptarget, it works bad.
but the old version 7.7.0 works well.
* ... * /))` otherwise if i wrap a dom node(eg.
`<span>`) with connectdragpreview, it works well again: * ... * /)}</span>)` maybe it's my fault, look forward your reviewing.
the app which imports `usedrag` can 't be tested.
i attempted an upgrade from 7.4.5 to 9.2.1 and then i needed to move from the deprecated (but still used in quite a few examples in .md files) dragdropcontext to the react dndprovider component.
the code compiled fine with typescript but when trying to run this within a meteor app which uses some babel-based minifier i get an error that prevents the build.
typically, consumers of libraries like react-dnd don't run their node_modules through babel to transform newer syntax.
there's a bit of a debate over when and how we should all start doing that, but it's not a great option right now.
in v9, the es-modules exported version of react-dnd also started using some newer browser features (specifically, the spread operator) which if not transpiled out will fail to parse in browsers like ms edge 17 which still don't support that syntax.
if there are any state (via `usestate`) changes in `end` callback of `usedrag` they throw a react warning if draggable element gets hidden as result of drop.
dragging and dropping items with custom drag layer results in occasional artifacts (flashing drag item in random screen location).
most of the time there is no artifact, but i keep dragging and dropping, it does eventually happen.
i'm using on chrome 75 on windows 10. this occurs in both the custom drag layer example phofhyperlink , and also in my react app.
a clear and concise description of what the bug is.
`error ts1238: unable to resolve signature of class decorator when called as an expression.`
since using the new `dndprovider` i get an
a number of the examples on codesandbox are not working because they are trying to load react-dnd@8.0.1
i found that there is a bug fix about "fix umd builds to use commonjs-based libraries" in version 7.6.2. and it 's important for my project.
but in npm packages, there is no version 7.6.2. it just jumped from 7.6.1 to 8.0.0.
when using uglifyjs to minify the size of the bundle, it failed becaulse the dist of react-dnd includes es6 syntax.
i find the problem occurs both in version 7.5.0 and 7.6.0. however, in 7.4.0, there is no problem.
i checked that compilation option "target: es5" does exist in tsconfig.json so i have no idea why it seems not work in 7.5.0 and 7.6.0 ...
i am experiencing an issue where `monitor.isover()` will incorrectly return `true` when moving a dragged item from a source over a target at a quick speed.
if i move the dragged item slowly it doesn't occur, so it seems that there might be missed events.
i experienced this after moving project from the decorator api to the hooks api.
this issue doesn't seem to occur with the decorator api.
getting empty {} props in drop method of droptarget.
`component` argument passed to specification methods, such as `hover`, is `null`.
even if the component is a class component.
it only happens if the component's `render` method is defined with an arrow function expression.
i am getting this error at the begin of drag, this is seen in production environment.
in development environment drag source just work 's fine.
it seems there is not a standard way of checking if we 're dropping a file or a folder.
i was trying with the `type` prop (for folders is an empty str) but there are some files that also have `""` types.
see phofurl for more details of the issue.
i'm not sure if this is a bug vs. a design choice.
in any case, the interaction is not documented and is a little counterintuitive.
if you try and drop a compatible drag source onto drop target where the spec defines `candrop()` method which returns `false` for that operation, calling `monitor.diddrop()` from the drag source's `enddrag` method will still return true.
phofurl in `componentdidmount` on `dragdropcontainer`, `this.handlechange()` will be called with no initial state (`this.state === null`), this causes `handlechange()` to call `setstate()` which causes a cascading update and another react reconciliation process.
when dragging an item that is both a drag source and drop target, an error is produced in the console.
the error is only seen when the "types" for the drop target is obtained via a function that returns a new array each time it runs.
key property from react component is vaporizing.
`draglayer` prevents children from rendering on the server.
i think these are the offending lines: phofurl
drag previews are incorrectly rendered in safari
since the correct indication whether one can drop native files and urls does not work anymore.
the cursor indicates that the item can be dropped anywhere, and not only when being over the actual drop target.
this behavior was introduced with pull request phofurl
when defining the hover function inside of a drop target specification on a functional component, hover's component parameter returns null.
my file dropzone fails on initial mount after upgrading the following: react-dnd: 7.0.2 -> 7.4.3 react-dnd-html5-backend: 7.0.2 -> 7.4.0
the drag around: custom drag layer example says that using a custom drag layer will get rid of the flickering that can happen with a native drag layer.
however, the example is still flickering for me, in both chrome and firefox.
it 's hard to see if you don 't disable the rotation in the custom drag layer, but if you comment out rotation you 'll see it right away.
when exporting a draggable component all other hoc props are removed, like auth etc.
if i update from 7.1.0 to 7.2.0 or 7.3.1 -- but make no other changes, and no attempt to use hooks -- i get the following error in my previously-working app: phofcode
hello, banging my head around this problem for half of the day already.
any help very appreciated monitor.isdragging() throws error image phofimage my dragsource looks like that phofcode and at the moment of calling monitor.isdragging() everything fails as it doesn 't have sourceid (equals to null).
context is created by using dragdropcontext(backend) and for backend is used some extended version of phofurl
version 7.0.2 (vars) phofcode version 7.1.0 (const) phofcode
i have a connected drop target that is removed from the dom, once something is dropped on to it.
now since upgrading to `v7.1.0`, i 'm getting phofcode in the `monitor.isover()` call inside the `collect` function.
somehow, it sees that the collect function is still called one more time, after drop target has been removed (`targetid` is undefined).
the official tutorial demo (drag and drop knight on chessboard) does not work properly: phofurl chrome on mac: knight can get dragged (horse image shown), but does not drop as it should.
dragging plain text in firefox gives a 'permission denied to access property "types" \' error.
this can lead to the tab hanging and the browser crashing
when i try to install `react-dnd` via `yarn`, i get the following error: `couldn 't find any versions for "recompose" that matches "0.30.0".
possible versions: "0.20.2, 0.23.5, 0.26.0"` i looked on the `yarn` website to see if maybe `0.30.0` isn 't included in the registry, but indeed it is, and it 's been around for six months.
the documentation states repeatedly that the touch backend is how to get drag-and-drop working on touch-based devices.
while the html5 backend is not touch-compatible in chrome, it is functional in edge.
my initial thoughts on why this might be is that edge uses `pointerevent`s to handle mouse, touch, and pen events, whereas chrome `mouseevent`- and `touchevent`-based.
chrome working on `pointerevent` support, but i believe it still in an experimental phase.
when you have two closely positioned (but not nested ones) drop targets it's quite easy to perform attempt to drop item on two targets simultaneously, then you'll encounter the following error: `uncaught typeerror: cannot read property 'drop' of undefined`
i am using draglayer and i need to retrieve my component in my test.
i am using the static method decoratedcomponent but what i get is wrong.
my component is a class component, not a stateless one.
monitor events in the collect object only fires once
when dragging an element, i would like the element dragged under the mouse to look different than the original source element.
when dragging, the custom drag layer is appended to default drag layer rather than replacing it.
i'm not sure if this bug belongs here so this is more of a question whether this behavior could be solved with this lib or not.
i took the simple sortable example and added `contenteditable` to the card's `div`.
after that it became both draggable and editable in chrome, only editable but not draggable in firefox and only draggable but not editable in safari.
i have 1 lap and 1 monitor.
i choose 'extend' display mode.
then i open ie browser on monitor screen.
i can drag something, but nothing happened after drop.
when choose 'duplicate' display mode.
now can drop and drag everything.
my ie browser is tried on another version (11.165) and could drop.
component decorated with `dragsource` is not rendered at all (render function is not called)
i'm following the tutorial and everything is fine until the point when we make knight draggable for the first time.
according to tutorial only knight symbol should be draggable, but in my local version you can clearly see white background behind the symbol.
uncaught error: expected to find a valid target.
similar to phofurl but in a different scenario.
i am using nested sources and targets.
i have a list of items (each item being both a drag source and drag target of type 'item'), with each item having number of subitems (each subitem being both drag source and drag target of type 'subitem').
when swapping dragged subitem with hovered subitem within the
i am following the code in this example phofhyperlink and using es6 syntax.
the idea is to be able to drag 'cards' to rearrange them.
i think i was able to get dropsource and droptarget work, but only on the same element.
however, nothing happens when i drag the card over any other cards.
as soon as i start dragging, get console output, but then nothing else.
specifically, nothing happens when try drag one card over another.
phofcode here is the code for my custom card component.
to use another dnd library in app together, you can use context props as described in this comment phofhyperlink .
unfortunately, html5backend expects window prop is the window object phofhyperlink , not just a dom element.
you will take an error like `cannot read property 'body' of undefined` when you drop a element, because a dom element doesn't have a `document` property.
should be able to take dom element to make this feature useful.
firefox hangs when dragging multiple files
usually with the html5 backend, one `'dragstart'` event fires when you drag something, and one `'dragend'` fires when you drop it.
now, in chrome, at least in v67, when you have `capturedraggingstate: true`, this is messed up.
it goes: - mouse down to drag an item, move it; - `'dragstart'` - `'dragend'` immediately after that - later, drop the item: no events fire because of this,
my app uses `componentdidmount` to measure an array of dom elements.
those elements are wrapped in a `dragsource` in v3.0.2, i could measure them in cdm.
in v4.0.0, they all return 0s because they mount empty divs.
i dug through the diff and saw what i assume to be the offender: phofurl cdu is not a valid replacement for cwrp as it fires too late, although i'm not 100% sure that's the culprit.
i'd like to pick your brain to see if you think something else may be the cause.
i know it isn't html5 backend because i upgraded both & it was borked.
then removed `dragsource` hocs and it looked correct, so i'm relatively certain it's there in `decoratehandler`
according to the documentation phofhyperlink : > for every begindrag call, a corresponding enddrag call is guaranteed.
but using versions 4.0.5 of react dnd and dnd html5 backend, the enddrag event is only called when the dragsource is dropped in a place where it can 't be dropped, e.g.
edit phofcode on below files dragdropcontext.tsx and below image phofimage
is it possible with react dnd to make the drag source element stick to the drop target ?
currectly i've made a fake calender (drop target ) with a few cells and a box with external events (drag source).
the drag works fine , basically i've copied the example from here ::- phofurl
the simple drag and drop code example doesn't work
we are using typescript and after updating to the latest version of react-dnd (from 2.6.0) we cannot use the new package due to errors similar to this one: phofcode the issue is that in the generated .d.ts files for react-dnd, they use: phofcode where it should be using phofcode
upgrading from v3 to v4 is producing errors and crashing my app saying that i can't have more than 1 dnd backend.
receive the following error when `optimization.minimize` = `true` in webpack 4. disabling minification seems to work around the issue: > uncaught error: cannot call enddrag while not dragging
the tooltip is appearing in the wrong location on android.
it appears above the pressable button, rather than below it.
instead it is only showing a placeholder.
tooltip size dont change depending on text, and long text are cut
on android (device and emulator) the `reverse=true` icons should have a white background but they are transparent instead.
a clear and concise description of what the bug is.
adding flex:1 to a buttonstyle under the conditions i am using seems to produce different behavior between android and ios
<image testid= 'testid '/> no longer gets the passed testid.
the index is delayed, so the index in the usestate is behind compared to the event onpress.
it did not do that on react-native 0.60.5 it does seem to render just fine, it just gives an warning/error in the console.
the subtitle placement works, but a warning is thrown.
when i type in the toolbar searchable placeholder, it stops the toolbar and close it with only one symbol of input.
when i put the onchangetext method in comment, it allows me to type more than one symbol so i guess this onchangetext method is the real trouble but i'm not able to fix it.
my question is : is toolbar is compatible with a flatlist populated by a request of my api in a goal of an auto completion ?
ok, so i'm only seeing this in production, but when i create an icon like so: phofcode a few users have been reporting that they're seeing the icon character below.
this should just be a simple 'x'.
i'm not seeing on my phone, and so far i've only heard about it from android users.
there is some code error what throwing this error and making app crash.
it is not getting installed it is stuck after ' sill extract extracte ' i have been waiting for an hour but it is still here.
but the symbol is not rendering properly as shown below 13 29 287 phofimage
the new letter is not displayed and to see it i need to go left
in android, after loading the image, the spinner is still showing up.
it works fine however in ios
the color changes as expected, but the `avatar` title disappears (
a clear and concise description of what the bug is.
i get this error `failed prop type: invalid prop `pricingstyle` of type `array` supplied to `pricingcard`, expected `object``
every jest test for files testing components with rne button throws this error: warning: react.createelement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: undefined.
you likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.
check the render method of `button`.
in button (created by context.consumer) in themedcomponent (created by in (created by button) in button (created by formik) react-native-mock view) view formik) formik loginform) loginform wrappercomponent) wrappercomponent console.error the above error occurred the <react-native-mock> component: react-native-mock view) view button) button context.consumer) themedcomponent button) button formik) react-native-mock view)
if i pass function wrapped in react.forwardref in inputcomponent property - i got a warning _"warning: failed prop type: invalid prop `inputcomponent ` supplied to `input `.
in line of button.js it 's taking the `buttonstyle` prop (which can come from the theme) and applying that after `styles.button(type, theme)`.
this means that the backgroundcolor and borderwidth that the type creates are always overriden by buttonstyle which can come from theme.
the button is not clickable.
nothing happens regardless of what is set to it.
noicon: > > warning: react does not recognize the `noicon` prop on a dom element.
if you intentionally want it to appear in the dom as a custom attribute, spell it as lowercase `noicon` instead.
if you accidentally passed it from a parent component, remove it from the dom element.
> in input (created by textinput) > in textinput (at input.js:111) onclear: warning: unknown event handler property `onclear`.
in input (created by textinput) textinput (at input.js:111) div (created by view) view (created by animatedcomponent) animatedcomponent (at input.js:93)
the text is display just fine at normal font sizes.
when larger font sizes are enabled, the text no longer renders, although it takes up height in the scroll view and is scrollable.
the clear button does only appear if the user changes the text but not when changing the text programmatically.
there is unfortunate white space on the right side of the button
the build is successful and my app opens in the android simulator, then the metro bundler does his part and halfway trough spits out the following error: > error: bundling failed: error: unable to resolve module `lodash.merge` from eact-native-houston ode_modules module `lodash.merge` does not exist in the haste module map reverting back to 1.0.0 makes everything work again.
`searchbar` `inputcontainer` 's `margintop` cannot be overridden when that value is provided via the `themeprovider`
a clear and concise description of what the bug is.
it does not change the contextual behavior of the keyboard.
a clear and concise description of what the bug is.
- when upgrading to the latest version the badges ui have changed.
on attempting to resolve this back to how it looked on 1.0.0-beta7.
i was able to get the badges looking okay on android but ios badge text does not display due padding i have added correct badge shape.
on both platforms badge size is not rendering based on font size also.
eslint error in `src/text/text.js` : `'fontfamily' is missing in props validation`
the icon is stuck to the label
when i use themeprovider with flatlist and listitem the warning messages appears: warning: each child in an array or iterator should have a unique "key" prop.
see phofurl for more information.
in listitem (at withtheme.js:42) in themed.listitem (at item.jsx:120)
the placeholder question mark appears and (using the debugger) you get the error that the icon wasn 't found.
the icon requires focus first so it has to be pressed twice
when i set the default state of loadingright to true it shows the spinner (working) when i set the default state of loadingright to false it hides the spinner (working) when i call setstate on my bool flag it should change state, however it is not (bug) if i make change from loadingright to loading works as desired (it shows and hides spinner when change state of flag).
either this is a bug or the documentation for these props should be adjusted.
digging into the source for this version i believe i have discovered what is happening.
when you use any of the h1 - h4 props on a text component the provided value (either true or false) is passed in externally.
the problem is that passing in those props externally i expect style that those props control to also be applied externally however that not case.
the are passed down through theme wrapper to internals of component and then correct style applied.
given this order of operations, style set inside theme overrides h1 - h4 set style as it should way code written.
not so much of a bug, but rather an oversight: in android, buttons have a certain style, and thus the ios look-and-feel is not persistent.
deprecated props on switch warning this is the current implementation @xavier-villelegier which is causing the deprecated warning.
according to react native 0.57.xx documentation, tintcolor changes to trackcolor e.t.c switch props should be updated in this library's implementation of the switch in listitem.js `{switchbutton && hidechevron && ( <view <switch onvaluechange={onswitch} disabled={disabled ?
disabled : switchdisabled} value={switched}] /> </view> )}`
there seems to be overflow of the minimumtrackcolor to the right of the thumb overlapping the maximumtrackcolor.
when thumb is on maximum value, this minimumtrackcolor exceeds track.
the title appears in the middle of the item.
using the input component results to a `typeerror: cannot read property 'default ' of undefined` error.
other components work just fine.
the image appears but has a grey background
cancel icon is shown instead of clear icon.
overlaycontainerstyle no longer changes the background color of the avatar component.
after some digging, it looks like the placeholderstyle property can be used for the same result.
however, placeholderstyle is not exposed in index.d.ts file, so typescript throws an error when trying to edit.
there is now a black background when pressing listitem components.
i do not see anywhere in the updated documentation that shows how to edit the color of the listitem's outermost container.
the avatar is displayed, but a yellow warning pops up
the ref is inaccessible only when wrapped with `overlay`.
no problem without the `overlay` wrapper.
it throw an error for the icon and suggest me some names sometimes.
for the card it display only the arrow even if i don't require an arrow in my card
header is smaller than expected.
a clear and concise description of what the bug is.
if you add children to an themed overlay, they get added as an array and therefore need a key
instead i got the question mark.
i investigated and found that antdesign isn't included in the helper function at this link: phofurl
the typescript definition is for a `react.reactelement<{}>` which would equate to: phofcode however, the correct accepted type should be which correctly would be: phofcode
rne button works perfectly on native, tested on android.
it 's clickable and there is no issue with the style.
however, the rnw version of it can 't be clicked and there is red border outside.
a clear and concise description of what the bug is.
when give the styling parameters to inputcontainerstyle, no effect on searchbar.
buttons with only icon have smaller padding (no padding?)
and it makes them different size than other buttons.
the tile component does not accept objects or arrays as props for the caption.
invariant violation: text strings must be rendered within a <text> component.
- the avatar has a grey border around it.
- the medium/large avatar is not rounded on android.
the problem could be with `react-navigation`, but since pure react-native `textinput` works fine in this case, i'm reporting it here.
a clear and concise description of what the bug is.
i am not sure this is a bug.
probably me not knowing how to get it to work.
test suite failed to run.
i have not used the * rating * image anywhere as per the error log ode_modules syntaxerror: invalid or unexpected token at at object.<anonymous> at object.<anonymous> my test case is as simple as this (modified to match the snack link below) phofcode
i see the big wide non-badge
the lineargradient props show regardless of the disabled prop
it's not possible from all the many tricks i've tried.
i need to click on the clear icon at least twice to reset the input.
use of the overlay component causes an invariant violation error.
a clear and concise description of what the bug is.
when a big text input contains slashes ( / ) and you click on another input, the first input is truncated strangely.
switch value never changes and onvaluechange is never called.
switch immediately returns to off.
note: the below switch, when copy/pasted, works fine on its own.
the badge is not showing, actually neither a simple ``text`` inside of it
font weights aren't supported on android for custom fonts.
instead, if you want to use the bold variant of a font then you need to set the fontfamily as `myfont-bold`.
adding fontweight to the titlestyle prevents a custom fontfamily to be displayed.
the clear button isn 't shown/hidden when props.value changes.
the second slider 's value gets wrongly placed and cannot be used anymore.
when you are on a forminput field and you select another element (button, forminput, checkbox, etc) it closes the keyboard rather than interacting with the selected element.
then you have to select the element a second time in order to interact with it.
when press cancel button, the input remains the same.
when first press clear button, the input remains the same.
it lost focus on search bar.
when second press everything works.
* using recommended angular test pattern approach for ngrx effects phofhyperlink fails if the observable pipe uses a mocked value generated inside the unit test for a function returned by the `withlatestfrom` operator.
instead of the mocked value supplied, `withlatestfrom` returns mocked function's previous value, which in case of angular pattern is `undefined`.
ngrx effects are my most common use case in angular for `withlatestfrom`.
but this issue also occurs in angular components and services' unit tests because they all use `beforeeach` - pattern.
this can be bypassed and effects and other services can be instantiated inside unit tests, but this is not recommended pattern.
all other rxjs pipe operators i've encountered have not had this problem with mocking inside tests, both using marbles and, `of()` or `from()`.
* if you start a `timer` with a time longer then 24 days, it emits all values
* when i use import { behaviorsubject } from 'rxjs/behaviorsubject'; i got an error: module not found: error: can't resolve in @ 6:9-47
* hi i trying to learn phofcode within a typescript node environment.
when i run a test i receive
* when using a subscribable compositionally inside a typescript class, type information is lost.
in the snippet below, typescript should be able to infer the type for `consumer.subscribe` phofcode
* catcherror returns the data emitted only by atomic observables, who return the value immediately, rather that waiting for the target observable to complete.
* always returns initial value if subscribed to an observable from webpack library while the observable is emitting new values.
* "of" does not contain a value object
* consider an angular project with the following code: app.component.ts: phofcode running the linter within the angular cli project with the command `ng lint`, following warning is thrown: phofcode
* a clear and concise description of the behavior.
`combinelatest` takes an array of input streams, namely,
* when the subscriber triggers an item in the observable stream with an inclusive takewhile, it throws a stackoverflow exception even if the takewhile predicate is true.
* when using sharereplay with refcount, if the source observable completed and refcount is zero, if we subscribe again, it doesn't resubscribe to the source.
* you cannot apply any operators to a stream of type `observable<x> | observable<y>`.
the stream `observable<x | y>` works as expected.
* when run with the following npm deps: phofcode we get a error upon phofcode that looks like: phofcode
* the default behavior of using phofcode it will be using the source file in because of the `module` defined in but if we are using some other stuffs like phofcode it will be using the source file in this is causing a lot of bugs which i filed it here phofurl i have to use phofcode then everything works fine
* even after using share, using two concatmap's causes observers to execute twice.
no matter where i put share, the actual array ends up with double the inputs, and doesn't even finish the second source pipe correctly.
* currently, there seems to be 2 similar ways to organize requestanimationframe based observables: 1) `interval(0, 2) `of(0, however first approach, using `interval` apparently emits twice each frame.
* the `tap` operator does not executes the `complete` callback when the source observable is completed (in the following example i also use the `finalize` operator that works as expected).
* throttle with interval (not throttletime becuase i need leading & trailing) is creating a very long stack trace of repeated setinterval: image phofimage
* `filter<t>(event => event instanceof t)` fails when typescript is set to strict mode.
* when piping multiple `finalize` actions into an `observable`, the order of the `finalize` calls is reversed and does not occur before the `completion` step.
this makes the `finalize` step untestable because there is no correct place to call `done` method in `jasmine` or `jest`.
* a boilerplate assertion is required inside the callback from a creation of a testscheduler object.
phofcode if this is missed out by someone looking to remove unnecessary boilerplate (like me), marbles testing assertions inside testscheduler.run() pass
* piping a stream to `catcherror` then `materialize` starts an infinite loop
* a clear and concise description of the behavior.
* importing static methods not working when bundling with webpack production mode and typescript loader.
according to bundle analyzer, it seems all of the rxjs code are not bundled in production mode.
could it be webpack tree-shaking too effective ?
* i previously reported an issue phofhyperlink in seeing large bundle sizes when building rxjs with webpack and typescript.
image phofimage while diving back down this road to shrink the overall bundle, i noticed that it seemed that i had multiple sets of rxjs imports.
lo and behold, despite having only the one installed rxjs package, i had a typo in my project that pulled from "rxjs" instead of "rxjs" in the import statement.
correcting the case of import shrunk pre-minifcation size of bundle by 40 kb and results in just one section.
image phofimage i 'm not well-versed all variations import statements these days (except to be thankful that they just work my ide) so i 'm not entirely sure if there 's anything you can do about this, but ideally you should only be able to import from "rxjs" and not other permutations case.
a clear concise description behavior.
* when error occurred in `subject`, the related observer will be unsubscribeven though it bas been caught.
* when an observable made from an array is cut into windows and then these windows are made to produce values asynchronously (with `delay`) and have to wait on one another with `concatmap`, only the first window receives values, second and on behave like empty streams.
everything works great when there's no `delay(*)` or windows can start without waiting on a previous one (`mergemap` instead of `concatmap`)
* takelast() operator when applied without any param returns undefined.
* the filter operator is not called in tests (using jest).
in the browser it works as expected (see repo for details).
* when using the iif() observable and use function inside witch does something and returns a stream it will always do something and return the stream on condition.
* if you use rxjs v6.5.2 and a library that depends on rxjs v6.4.0, you may get a ts2322 error.
for example you can get the following error: type is not assignable to type 'builderoutputlike' while phofcode
* when creating a minimal project using rxjs the bundle size for that project is very heavy even when using just one or two operators (
* when a `race` is won by a source observable that completes or errors synchronously, the implementation continues to subscribe to subsequent source observables.
this does not happen if the source observable that wins the race does so by emitting a value notification.
* if a `race` observable is constructed with at least one synchronous observable, the order of events is confusing.
(optionally) subscribe to asynchronous observables that come before the first synchronous observable.
2. subscribe to the first synchronous observable.
3. copy the output from synchronous observable.
4. subscribe and immediately unsubscribe from all other observables.
step 4 could be ommitted in my opinion.
if this is intended behavior, maybe put a note about it in documentation?
* if modify one property in a nested object after get return from subscription `.subscrib((res)=>{ this property get modified in another subscription.
* when using `defer` with a `() => void` factory, the return type will be `observable<any>`.
* from looking in the source code the question arose in me that the source code of sharereplay could be refactored.
here my view: technically sahrereplay should look something like that: phofcode sharereplay, in my opinion, should just reuse the `multicast` operator with a subject factory that returns a `replaysubject` that is configured over config param and shared over `refcount`.
furthermore i question refcount option in sharereplay for 3 reasons: - it is inconsistent because share, a more primitive operator uses always refcount and sharereplay which should be a more specific form of share cover this option.
- in source, there is documented (this ability to replay values on subscription is what differentiates `share` and `sharereplay`.
)[ phofurl - it would be more predictable behavior for lib consumer that already know share.
* ajax put and post requests both submit a successful options request but then throw an error phofcode before submitting the subsequent put or post request.
the api has cors configures and is working with both the get and the angular httpclient put and post.
* ajax put and post requests both submit a successful options request but then throw an error phofcode before submitting the subsequent put or post request.
the api has cors configures and is working with both the get and the angular httpclient put and post.
* fromfetch does not return results from successful requests, but throws error instead
* there 'value' property that was on the action object passed out of an observable has been removed and is causing redux to reject actions without a type property.
i have a system where each redux action is a class and created via constructors.
for this to work the following middleware is needed for redux to not throw an exception complaining about async actions.
actions returned from epics passed on their destructed value property which had the 'type' property that redux expects.
since the 6.5 update, value isn't there which breaks webapp.
also, returned actions are returning as non-scalar values, which i assume is causing them to lose their 'value' property.
phofcode the custom middleware loaded as first middleware before routes and epic middleware.
* when using the `lift` method to create a websocket subject, it does not emit data (or even connect to the websocket).
* the behavior seems to be weird whenever you pass in an iterable from map.prototype.values()
* after #4640, `forkjoin(promise)` throws an error > you provided 'null' where a stream was expected.
you can provide an observable, promise, array, or iterable.
note that this only happens if you provide `forkjoin` with a single argument of type `promise`.
* `fromeventpattern` currently checks `args.length` and if it's 1, emits the first item, otherwise it emits an array of all: phofurl this is problematic because it is not type safe and unpredictable.
it could be made slightly more type safe with a conditional type, but even then, if the parameter is optional ts would accept calling the listener with `undefined` or no parameter at all, which are different `args.length` and would result in one case in the emission of an array `[undefined]` and in other case in `undefined`, which would not be checked by type checker.
checking `arguments.length` is generally considered bad practice.
what's worse that you can't even reliably use `resultselector` anymore to ensure it always an array, because magic switching _always_ done first, `resultselector` just a shortcut now that checks if element an array.
which means that if listener was _actually_ called with array as a single parameter, `resultselector` logic would _think_ it was instead called with multiple parameters spread array out.
* trying to compile with latest version of rxjs and @types/node, i get the following error: phofcode phofcode
* calling .flush() on a scheduler (e.g.
animationframescheduler) with no pending actions causes an unclear exception to be thrown: phofcode
* when an async function subscribed to the `subject` is being called several times by `subject.next(value)`, with `value` as an object which is updating among the calls, the async function will be called with the latest option of object specified number of times.
* your examples phofurl phofurl do not work.
no `clicked!` gets printed in console.
* if the close of a websocket takes a little bit of time subsequent calls to multiplex fail to send any subscription messages and close the socket immediately.
* subscribing to the result of a `race` of two different types of observables results in a type error.
* no result would be output if i piped `debouncetime` with `siwtchmap`/ `mergemap` returning `empty`.
* when groupby encounters a new key it emits a group.
if i unsubscribe from that group then any subsequent encounters with that key do not result in groupby emitting a group.
* rxjs is not able to subscribe general functions like `() => {}`.
so, the following code must make errors.
phofcode of course, it makes an error on 3rd line, but if we add a slight of type hints, it makes things confuse.
phofcode now there 's no error!
every functions are instance of `arraylike<any>` and where arraylike is defined as phofcode it doesn 't matter, if we don 't add an explicit type hint for being a function to arraylike.
but there are some problem originated from this issue.
* the type of the first argument of the predicate passed to the filter operator will overwrite the observable's type.
the linked stackblitz shows issue very clearly, hover variable name to see its type.
* when applying the `sharereplay` operator to an `observable` that (immediately) synchronously sends multiple values, the resulting `observable` only gets the last value that was sent.
* using the `from` function to generate an observable from a promise seems to, instead, generate an empty observable.
* there is a missing ';' reported for types.d.ts `
* currently `timeouterror` and other error "classes" do not use the value returned by `error.call(this)`.
this means, among other things, that some properties (such as `.stack`) do not get initialized on some browsers.
* when compiling a typescript file that imports something from `rxjs` with the `isolatedmodules` option for typescript set to true, the following error occurs: phofcode
* currently `sharereplay({refcount: true})` and `publishreplay(), refcount()` behave differently in some situations.
* `1` and `2` are logged to console
* `npm run info` invokes error: > npm err!
missing script: info > > npm err!
a complete log of this run can be found in: > npm err!
* currently, `of` observable more than 9 parameters would throw error.
* rxjs v6.3.2 pipe not going on with observable returning by v6.3.3
* passing a large `period` to `interval(period: number, scheduler: scheduler): observable` results in continuous emissions instead of 1 after given `period` passed.
* `const a = iif(()=> true) ` the above code infer `observable<{}>`
* it has six overloads to support `observableinput`, the inference still behave the same without those overloads.
these signatures seems to be enough to cover phofcode
* `pairs` observable is incorrectly inferred.
with the example below the type infers as `observable<[string, {}]>` phofcode
* npm install of rxjs hangs indefinitely.
* if the websocketsubject is unsubscribed before the connection is in the open state (readystate = 1), it does not close the socket connection, and resets subject state.
this happens both from calling unsubscribe directly on subject, and when last subscriber calls unsubscribe on their subscription.
* when using `mergescan()` its `accumulator` function never receives `index` like all other operators.
* `zip()` with `array: observable<t>[]` argument doesn't work, but the function has still the definitions.
* umd rxjs file will inject global variable `$jscomp` to global/window.
* as the below code, which is work in the desktop browser.
however, it is doesn't work in the mobile browser.
i find it is because of the subject.next() did not send successfully.
* repeatwhen doesn't have access to calling observable, unlike retrywhen.
according to the description i would have expected a similar behavior.
* i have a dual build system for es5/2015.
es5 works fine with the path alias.
in es2015 build, the build completes but the application crashes in initial load with phofcode i 've tried to removed angular build optimizer, uglify, and all other plugins in my build and narrowed the problem to es2015 path mapping of rxjs i am using as documented in your docs.
when i remove the path mapping alias it works.
when i mean es2015 build mean that webpack prefers es2015 field package.json on module, browser, main.
and that compile my typescript to es2015, set my uglify-es to work ecma:6 etc.. phofcode ` const rxpathses5 = const rxpaths = ... webpack config... { resolve: { t t t talias: { ?
rxpathses5() : rxpaths()), t t t t}, t t t}, ` but then (perhaps obviously ) source-map-explorer get "two versions" of rxjs - one of es5 (with all operators) and one of es2015 (with some used operators) the weirdest part this (really i 've seen a few, i 'm charge ~20 apps here) is that if come back broken version remove sourcemapping can see that all names are managled (via uglify) but observable stays observable is not mapped some one letter variable is defined by calling n(000) (runtime webpack require with module id).
this is at least case scalarobservable, three frames down stack chain - we 're @angular/core importing merge operator there we do have observable --> look at scope frame attached screen shots from there we go arrayobserbale (which doesn 't have observable) finally scalarobservable which explodes.
* combinelatest operator does not infer correctly for `observableinput<t>[]` signature
* if a deferred observable is shared and retried, it is only really sharing the source if it is not synchronous.
* i have a typescript file creating an observable (merge) based on a few other observables, nothing out of the ordinary: phofcode for some weird reason, the rxjs-related imported were as follows: phofcode this returned observable was then handled to a component, which would `switchmap()` a lot of times over the same instance of the returned observable.
with imports stated above, though, `switchmap()` was not unsubscribing properly, so on every `switchmap()` 's "switch", previous subscribed observable (`merged$`) was still producing side effects, even after it was supposed to be unsubscribed, producing n+1 side effects for each `a$` 's emission after each "switch".
* even if `crossdomain` is set on the `ajax` operator arguments, the call will fail with a cross domain error: phofcode
* i 'm trying to test a very basic pipeline with a buffertime operator using the info on the marble testing document.
i 've stumbled into a problem and i 'm not sure if either my implementation is wrong or its an issue with the buffertime operator.
it 's throwing a "javascript heap out of memory" error.
* phofcode restart of websocket server triggers `error` callback with `closeevent` to reconnect with ws server i've used it's work but throws error on version 6.3.x using version 6.2.x this error doesn't appear
* have an observable with asyncscheduler i want to test with testscheduler outside of .run method - just to flush it.
and i can do that with virtualtimescheduler instance with flush method, but it doesn 't work testscheduler.flush call.
* hello, please someone can help, after update to 6.3.3 i get in pipe ts2557: expected at least 0 arguments, but got 1 or more.
* tldr: to clear the input, then the submit still log.
long: have 2 inputs and a submit button, and console.log submit when clicked button and 2 inputs be verified, and if one of inputs failed then button do nothing.
i almost finish this feature, but have a weird problem button log when clicked 2 inputs passed, but when one input failed again, the button still log, only two failed then it stop, i don 't know why, i wanna one of failed then stop, how do i to fix it?
* i am attempting to convert of objects, flatten them into an array of objects.
however prior rxjs version that would flat and combine does not work in new version phofcode now that combinelatest is no longer an operator, the equivalent would be: phofcode but this does not work.
* observable says it hasn't thrown an error, but stops updating?
* stack traces are no longer recorded on rxjs errors as of 6.3.0.
* a clear and concise description of the behavior.
* calling rx.range with anything other than a number as second the parameter results in an observable that emits values indefinitely.
* the way the types for 'startwith' are written it only allows adding values of the same type as the underlying observable.
however, i am observing a lot of usage where people call start with a value outside the original observable type.
afaict, there is not fundamental reason why startwith types are so limiting and they can be written to support more permissive usecases.
* using string `urlconfigorsource` generates `syntaxerror: unexpected token s in json at position 0` with `websocketsubjectconfig` and defined `deserializer` function error does not appear.
* the following does not type check: phofcode
* currently, if you pass `observer, undefined, undefined` to `subscribe` you get a build error.
* callbacks registered with finalizing operator are called in flipped order.
* phofcode when using rxjs 6.2.2 and 6.3.2. npm list rxjs phofcode
* code is running like i expected, but typing is failing and i don't understand why.
* using static pipe to compose operators will lose the return type.
* static pipe function in the recently merged fixed (#3945) for observable pipe function signature overload is not in sync.
* i have timeout test, because i do want test run fast, so i set to 1000, test throw an error, but set to 100 is working.
* `console.log('map')` executed twice phofcode
* when creating a new `observable`, passing an `async` `subscribe` function to the constructor, when calling `complete()` on the observer, the following error is thrown: phofcode
* currently if you nest a `concatmap` inside of a `concatmap`, and the source completes, the inner most concatmap will not forward along values.
* in projects that - use bazel - have client apps whose node_modules folder contains rxjs it is not possible to go "bazel build ..." at the top level, because bazel gets confused by rxjs ' bazel files.
* deferred inner-observables continue to execute even when the outer observable it depends on has no subscription left.
this was seen only with a non-asynchronous scheduler.
please forgive me if it 's not an issue in your opinion, but after giving it some thought i don 't really see any advantage to this behavior.
* when using `startwith` inside of `pipe`, the argument type is not validated and/or the return type may be incorrect.
* withcredentials sometimes works (i.e.
a cookie is send with the ajax request) and sometimes doesn 't.
* we want to upgrade to rxjs 6 and therefore migrated to the pipeable operators as described in rxjs v5.x to v6 update guide phofhyperlink .
we faced twice the issue that the switchmap operator does not work correctly and does not fire an event.
as a solution we had add tap() operator before make the switchmap operator fire an event.
and yes, we always subscribe observable ;-)
* buffer drops last buffer on source complete.
* have updated my app from angular 5 to 6. by following the steps on phofurl - i have dealt with rxjs code changes e.g.
* when we add a trailing coma to the arguments of combinalatest, then combinelatest is flagged with deprecated type signature and lint errors appear along with deprecation notice
* i have a timer and some other streams that touch this timer.
* sometimes `expectsubscriptions` counts unsubscriptions incorrectly.
i don 't know what is the general rule when the incorrect behavior occurs, please see the example.
* the changes in pr #3945 exposed a bug with typings for the `first` and `last` operators.
with those operators, it 's possible to specify a default.
and if one is specified, its type is used to infer both the operator 's input and output types.
and, in doing so, the inferred type can be incompatible with the source observable.
* i use `websocketsubject` and `websocket` in my angular universal 6.x project, which works fine on the browser platform.
however, when running the node web server (that contains the ssr stuff (server-side rendering)), an error is thrown: `referenceerror: websocket is not defined`
* array.from( <set > ) return empty.
rxjs.umd.min.js version >=6 es6-shim.js v0.35.3
* when doing auto-import in webstorm it imports by default `import { interval } from
* when there are no more subscriptions to a `websocketsubject`, then the underlying `websocket` is closed.
if you then create a new subscription on the `websocketsubject`, before the `onclose` of the previous `websocket` has fired, then newly created `websocket` will never be closed.
if you combine this with `multiplex` function, then some subscribe/unsubscribe messages will not be send as well.
* the `find` operator does not unsubscribe from the source observable when a match is found, but rather only after the result observable is unsubscribed from.
this means that `find(()=>true)` behaves differently from `first()`, and the behavior of `first()` is better.
* the `replaysubject` takes a `buffersize` argument in the constructor.
when given a `buffersize` of `0`, i 'd expect it to behave (almost) like a regular `subject`, so does not buffer any values at all.
however, there will be a buffer of length 1 and the `replaysubject` behaves as if `buffersize` of 1 was given.
this happens when omitting the `windowsize` parameter.
* phofurl using the testscheduler for the first time, i don't understand what these parameters accept.
the documentation doesn't mention it either: phofurl what are they?
* calling `expectobservable` adds tests to `flushtests` field, and calling `tobe` on the expect, marks those tests as ready.
then calling `flush` should go over `flushtests`, and execute and remove those that are ready at this point.
the logic of removing is broken, and different tests get removed than should be.
as a result, some tests might never be checked, some are checked multiple times.
the problem is that `testscheduler.flush` is broken.
when removing items from `flushtests`, it uses the index of the item from before removal, so for example if there are 3 tests, `[ready1, ready2, notready]`, then `flush()` will execute `ready1`, then remove at index 0, so `ready1`.
then execute `ready2`, then remove at index 1, but now it's `notready` that is present at index 1. so after `flush()`, `flushtests` should be `[notready]`, but in fact it `[ready2]`.
* `observable.of()` behaves like `observable.empty()` instead of `observable.of(void 0)`
* kinda related to #3890, when trying implement interop by accepting `subscribable` as input, you cannot pass `observable<never>` into any `subscribable<t>`.
this is because `subscribable`'s signature for `subscribe` doesn't match that of `observable`: phofcode vs phofcode so you get this error: phofcode
* when creating a `new subject()` with a direct subscription on it, subscription does not receive piped values, only receives original `.next` value.
* when running 'npm run test' in master branch under '/docs_app', it throws errors.
* error: `property 'run' does not exist on type {}, any, action<any>>'` or error: `you must provide a root epic to createepicmiddleware`
* when doing a this is not being sent through the websocket connection.
* `this` is not correctly preserved when calling the `observer.error` method.
presumably, this affects `next` and `complete` as well.
* typescript confusion on generics in pipes
* i upgraded an existing angular 5 project to angular 6 and changed everything to pipe()-operations.
the code (snippet) below has been reworked from (before) to (after).
in chrome, everything is working fine but in any other browser it is not working.
see the firefox console output in the "additional context" section.
* the creation of an instance of behaviorsubject requires to pass the initial value.
but this should be an optional parameter.
* calling `pipe()` method on a `subject` returns an `anonymoussubject` but according to the types it should be a plain `observable`.
firstly, it allows a consumer to cast the object as a `subject` and access the `next` function.
secondly, it prevents developer to avoid such problems by calling `asobservable`, because typescript doesn't allow to call it on an object of type `observable`.
* some connectable observables when used as `takeuntil` notifiers seem to cause `takeuntil` 's source observable to enter a sort of hung state where nothing will be emitted and in most cases no completion will happen either.
appears to only happen when the source observable is created after the notifier has completed.
* jasmine tests of observable functionality, when using jasmine 's mock clock ( phofurl will break in certain cases, for example when testing the `delayed` operator in tests that explicitly use `date.now()`.
* the follow code fails because the methods on the subscriber are not hard bound to it.
* phofcode no type error, but runtime error: phofcode
* hi, we are building a components that exposes rxjs observables for plugins to connect to.
our component is primarely used prebundled, which means that our plugin creators might have double of some parts of rxjs.
though, somewhat wastefull this worked fine with rxjs 5, but after upgrading to rxjs 6, things started breaking in firefox and chrome canary 69. here's the error message they get when trying to subscribe: phofcode which pointed at the subscribeto function, where i suspect that this line is the culprit: phofurl `instanceof` seems to be a bit unreliable and appears work differently under the hood in each browser, especially if class appears twice and originated from same source.
* when an error is thrown inside a `switchmap` pipe `catcherror` in the same pipe didn 't catch that error.
* `switchmap` an ajax observer stop working even with piping `catcherror` outside
* operators that return `connectableobservable`s (ex: multicast, publish, publishbehavior, etc) lead to type errors when used in v6 with the `pipe` function.
* when an object that is "array like" and has observable symbol, observable.from uses `array like` observable.from mechanism before the observable symbol interop.
this is a problem in microstates because the observable symbol provides the proper mechanism to make a microstate observable.
treating it like an array does something very funky.
* a clear and concise description of the behavior.
error in error ts2687: all declarations of 'observable' must have identical modifiers.
error ts2687: all declarations of 'observable' must have identical modifiers.
partially filling a `sudo apt install` command and tabbing doesn't print out a list of matches.
this works fine if i remove `source $zsh/oh-my-zsh.sh` from my `.zshrc`.
i would like to choose a theme that displays the exit code of the previous command when it was not zero.
most themes do not display the exit code when it's zero.
thus when using the theme chooser i don't know wether a theme displays non-zero exit codes.
the jenv plugin messes up the path by putting a duplicate `/usr/local/bin` back at the front even if it is already there.
after cd into a git repository with `git-auto-fetch` enabled it asks for the ssh passphrase but it's not possible to enter it.
after installing zsh and oh my zsh on a remote server, i exit the server to see if i have already set zsh as default ( because when installing oh-my-zsh, i made the following choice: do you want to change your default shell to zsh?
however, i cannot login agin.
i 'm the root user of the server, and there 's no other user.
i 'm 100% sure that user name and password is right, but after type in password, it says "permission denied" set ssh-key for both my windows system and a ubuntu sub system, but none of them can be recongnized.
it 's kinda annoying don 't know what to do.
i 've read issue saying that add command after ssh login line, but without permission login, can do barely nothing.
there seems to be a inconsistency in the way zsh manages incrementing strings to a variable - in bash the code below will output something along the lines of `test2_filename.txt` if the script is executed with zsh shell, it throws a syntax error.
`./test.sh: 4: ./test.sh: var1+=_filename.txt: not found`
error occure while input shell commands below: read -p "test " 40 05 phofimage
when an apt is added, the terminal doesn't update the autocomplete to check for the new command (it's zsh only, because i tried bash and it works fine)
alias gl conflicts with gitless
some commands that update a single line of output in bash (like a progress indicator, for example) end up appending new lines for every update in oh-my-zsh.
this happen for * some * , but not all scripts.
`yarn install` is an example of a script that updates a line as expected.
`docker-compose up` is an example of script that updates lines, but only the bottom line updates in the terminal.
the output behaves like this: phofcode
oh my zsh wants to install dpkg.
getting this message `install package 'dpkg' to provide command 'dpkg'?
tab-completion does not for for project names that contain spaces
there is completion without "fully qualified" branch name, which yelds to invalid parameter for git.
just completed a clean install of macos catalina beta 10 - it looks like a new insecure directory is now created in the process - `/usr/local/share`.
this causes a `insecure completion-dependent directories detected` error from oh-my-zsh when sourcing my `~.zshrc`
last week i started noticing two behaviors: 1. if i try to open a new tmux session, tmux exits directly again without having created a new session (not just detaches).
2. if i make changes to my `.zshrc` file, and source it afterwards, the terminal is closed.
initially i thought had an issue with my tmux.conf or had added some problematic code to my `.zshrc`, but after searching for a bit and not finding anything in the tmux configuration or .zshrc, checked other things had changed recently among them installing the `awscli` via `pip install awscli`.
while debugging, removed the `aws` plugin from my `.zshrc` file and both behaviors mentioned above worked again as expected.
tried to figure out what part of aws plugin is causing this, but knowlege of zsh and oh-my-zsh is too limited.
i am not sure if this is a bug or i am missing something, but i would like to use the `print` function with `-z` flag from a script and it is not working.
i use curl to lean elasticsearch: phofcode when i finish typing `"name": "elasticsearch denver",` and enter to continue, it always close the ssh connection
i said yes to the regular update.
now my `$ps1` is messed up.
my shell prompt is blank and there are errors.
when activating autocomplete in a specific case, the last char of the file name will be added after the cursor.
phofcode tab completing the session name shows the window information of the last session, when it should not.
when typing `git switch ` and pressing <kbd>tab</kbd> after the space, the tab completion produces a list of file system objects of the current working directory rather than a list of git branch names (i.e.
what happens when pressing <kbd>tab</kbd> after typing `git checkout `).
when the prompt is very long and close to the width of the terminal and when up arrowing through previous commands, the cursor will jump up another line above if command is 2 lines long.
in lib/termsupport.zsh, this code: phofcode should read: phofcode so that when i run shell commands from vim (e.g.
`:!ls`) the control sequence is not included in command output.
when i 'm trying to commit a project with "git commit -m" the terminal suddenly closes when i reach the "-" character.
vscode gives me the error `the terminal process terminated with exit code: 139`
homestead plugin do not parse commands
if using python virtual environments, `af-magic` theme puts the virtualenv at the front of the line separator and pushes the line into next terminal line
i use oh-my-zsh with the agnoster theme and tmux.
usually i administrate these linux systems with a putty shell over ssh from my windows system.
the shell usually works fine if i stay in the user context of the user i used to connect to the server.
but in many cases switch to root shell by starting it with "sudo -i tmux".
there are some problems within this shell: 1. when scrolling history back and forth (ctrl+b page up/down) with tmux, single letters get stuck 2. in root shell, there is an additional space between prompt and command line entry 3. errors occur during auto-completion: e.g.
if you type "cp -" and then press "tab", strings jump one letter to left you type one character at a time, characters are offset
in a git merge state, the prompt is not displaying | merging
tmux started with smaller client.
missing code completion for git aliases
auto add an extra space after branch name when using tab.
autocomplete (tab tab) with new-line enabled causes ps1 and ps2 to merge, resulting in ps2 being on ps1 and becoming unresponsive to the exit key.
can press enter to clear the current command
i'm on ubuntu 18.04 freshly installed with zsh and latest version of oh-my-zsh.
i activated the command-not-found plugin.
when i type a command for a program that is not installed everything performs normally: phofcode same thing if i type a command that * looks * like a known command: phofcode but when i type something totally unrelated to known command it displays nothing at all: phofcode
in debian buster, zsh 5.7.1 the debian plugin in omz gives parse errors: phofcode it appears that it doesn 't like the functions being defined here without the "function" keyword.
this appears to be able to be fixed by adding "function" to all the functions defined in that section, namely: line 75: "function abd() {" line 86: "function ai() {" line 91: "function ap() {" line 96: "function ar() {" i 'm not sure how to file a pull request or i 'd just do so myself, sorry.
each time i autocomplete on a prefix search matching multiple entries the cursor will go up 2 lines
i want to create a file(filename*.txt) using vim editor on terminal.as i have to use filename like file*1.txt but zsh is giving me error.
installed oh my zsh using the homepage curl command.
when i got to `do you want to change your default shell to zsh?
[y/n]` i typed `y` and hit enter.
the installed then said `invalid choice.
opening a new session has me in bash instead of zsh.
hello, after the last update of all my oh my zsh plugins the symfony plugin is not highlighted by zsh-syntax-highlighting.
please see my specific issue: aliases are not highlighted #617 phofhyperlink
if i run `nvm` direct from terminal, which is using zsh, it works fine.
if however, i run `/bin/zsh -c nvm` in that same terminal, i get a command not found error.
when i install oh-my-zsh on one user, installing on another user fails.
it says it's already installed, citing the other user's folder.
also everything links back to the original users home folder
currently on mac mojave 10.14, the cli prompt in terminal is unsightly.
power line bar is almost blacked out with very dark colors making the text unreadable.
using the default theme agnoster that came with installing oh-my-zsh.
i've installed omz on my server, and it works well when i log in with ssh under mac os.
however, when i use any kind of command line tools under windows to log in my server, the prompt always breaks into two lines, also, it usually messes up the type-in area.
the django plugin does not work on a cloned project but works on projects created locally.
vim shows strange characters that won 't go away in zsh.
vim in bash works fine.
a clear and concise description of what the bug is.
the page title and favicon are left default, not set as configured for internet explorer.
umlauts (, , ) are very important in german and its related languages.
it's not possible to use them in channel names.
for email notification in notification preference for rooms available 4 values: default, all messages, nothing, mentions.
image phofimage but in account preference for the email notification available only 2-3 values (missing 'all messages' value).
profile: image phofimage account (administration): image phofimage
currently viewing the sidebar with an admin account and the last message is shown in the 12h format.
the messages in the chat however are in 24h format.
to clarify, our goal is to have 24h format everywhere.
at the moment, the request's response from the rocket.chat server doesn't have the x-content-type-options header.
this directive can prevent incorrect interpretation of resources (mime sniffing).
this prevents browser from executing content that should not be executed.
we can add this header via a reverse proxy server, but i think best place for it would be in core of rocket.chat same as `x-xss-protection`
when a user is added via saml login, multiple values in the "channels" claim results in no channel subscriptions for the user.
a single field in the "channels" claim containing a comma-separated list of channels works correctly.
at version 2.2.0, the new options `restrict access inside any iframe` and `options to x-frame-options` are added into the rocket chat server configuration.
but currently, when i tested that header on rocket chat server v2.2.0 and v2.2.1, it is still not set even though i enable `restrict access inside any iframe` and set a proper value for `options to x-frame-options`.
after investigating in the code i found that only when we enable the `support cordova app` option, header is set into response.
i think it is a bug an needs to be fixed.
i'm testing the video chat after updating from v1.1.1 to v2.2.0.
i setup a conversation between two users, on on desktop and one on mobile.
when the two users go into the video chat, they are actually in separate chat sessions.
not able to see one another, though on each persons screen, everything looks fine.
livechat doesn't show up on my website, instead i am getting this message in my browser console: cross-origin read blocking (corb) blocked cross-origin response phofurl with mime type text/html.
see phofurl for more details.
livechat wordpress plugin is installed on this domain: jfwebdev.com rocketchat is installed at
when search for messages and the results contain thread replies, said replies are empty and their message content is missing.
messages with image_url attached, not collapsed, sent using the rest api, is shown correctly inside rocketchat (direct chat, livechat management, or channel), but not at the livechat widget for the visitor.
if the image is sent "collapsed", it doesn 't show on both rocketchat (nowhere) and livechat widget
when a federated room is deleted from any server (original server or destination one) an internal server error is raised.
didn 't look like #13441 resembles the issue we had, opening this one.
a high-curling-rate script we run to adjust some settings automatically suddenly gets hit by the rate-limiter.
this was working a couple of weeks ago so unfortunately i don 't have a version to pin down to (we run snap-based install).
the curling user authenticates is both `user` and `admin`.
my permission settings are still default (so `api-bypass-rate-limit` is enabled for `admin` and `bot`).
changing permissions and allowing `user`s to also bypass doesn 't have any effect.
we have recently installed the latest version 2.1.1 of rocket.chat with snap.
everything is fine but the livechat widget is not loading in frontend in ie11 on windows 7 or windows 10. in edge 15 or higher the widget is loading.
we have got an syntax error in console output.
our rocket.chat server is running on ubuntu 18.4
after setting up custom fields in admin panel they appear while editing own profile but not visible to anyone in the team, including administrators.
manually using "prune messages" or enabling "prune- automatically prune old messages" causes the android mobile client to not download new messages after old ones have been pruned.
the channel list will usually show the latest message excerpt and indicate new messages.
but when entering the channel, nothing new is shown, not even the message shown in channel list.
we currently use rocketchat and want to start using the s3 functionality of rocketchat for uploads.
we've enabled it according to the instructions at phofurl and have filled in the requisite fields but it always generates this error: phofurl
trigger a update of the snap package.
it seems that nodejs server runs in a timeout because the mongodb server is not not seems to be ready fast enough.
the rocketchat server does probably not wait long enough to be connected to mongodb.
probably there is a trivial fix in just increasing connection pool timeout values or re-trying forever to get a mongodb connection.
updating the 'autolinker url regular expression' field under messages > autolinker while autolinker is enabled and all other autolinker settings set to false has no affect on converting text into hyperlinks.
when an administrator adds a new user to the chat and leaves the `verify` switch off, the new user gets an email containing username and password, but cannot login until the administrator switches `verify` flag on.
there are some users who experience the problem that they are getting logged out from our server every time they don't use the app for a second.
this happens everytime they go back to the homescreen or switch off their phone (not shutting it down, but only blacking out the screen).
it is independent accross ios and android with latest version of app.
these problems only occured on one device while we were on rc version 0.74.0. since upgrade to 2.2.0 there are a lot of other useres with same problem.
the account setting ui still claims that `mentions` are the default however phofurl and experience suggests otherwise.
we are currently running a rc server for our 400 delegates in sharm el-sheik on the world radio conference.
rocket chat is installed with the snap subsystem.
until friday last week we were running version 1.3.2, friday night the snap updated the rc server to version 2.1.1 unfortunately our experience is that push notifications to mobile devices now are delayed anywhere from a few seconds up to 15 minutes.
there seems to be another instance of the develop docker image being built from an older commit.
this was reported on #13264 (for a different set of commits).
i believe @sampaiodiego found it was linked to an end-to-end tests issue.
so just giving the heads up that the current image is based on a commit dated oct 31, when the most current one (per my last backup) is nov, 11. my thought is that this could cause some really nasty regressions.
and again, i understand this is a develop version, but if it being published, it would probably be something to check .
here is 2 bugs with avatars, that got from ldap (active directory).
1 bug - when ** fileupload_storage_type ** is set to ** filesystem ** .
enabled accounts_avatarresize rotate some photos to 90 degrees.
when accounts_avatarresize is disabled, photos is in normal orientaion, but slightly compressed vertically.
2 bug - when fileupload_storage_type set to amazons3 (minio) which configured and works normally itself.
and when accounts_avatarresize off - accounts avatars apears to be broken.
that broken avatar 0 bytes size in minio storage.
when accounts_avatarresize enabled - avatars created successfully, but with bug 1 (**some photos** are rotated 90 degrees)
custom authentication service creates accounts, although this is prohibited by the settings.
it is security issue for us, because we create users in rocket.chat by native ldap with active directory security group filter.
that creation allows you to bypass this filter.
the auto translate will not work for new translation language and it always get the previous translation language from the cache which leads to inconsistency in translation
the messages on ui are cached.
this prevents the re-computation of auto translated messages.
therefore, when the re-render of translated message happens the original message has to be replaced by the translated message.
reason: the key for each cached message is `msg._id + _updated.id`.
so translated message with same key exists already in cache and therefore will be ignored.
i've followed the steps to install the rocket.chat apps cli, but i'm getting the following error when trying to scaffold a new app using the given rc-apps create command
the defined message limit of e.g.
5000 chars ("maximum allowed characters per message" setting) is not enforced when posting a message via an incoming webhook.
messages/channels are randomly not set to "read" automatically.
after our rocket.chat server, installed as a snap on ubuntu 18.04, did an auto-refresh and updated to version 2.1.1, the mongodb component now fails to start.
it now throws a fatal error around needing to upgrade data files to 3.4 before attempting upgrade 3.6, and returning error code 62. while this now seems technically a mongodb issue, it 's one that 's triggered by following the documented snap-install method of rocketchat-server, hence my post here.
i 've seem what looks like a workaround for this, by manually installing older copies of mongodb and manually updating data one version at time, but this doesn 't seem like it should be the way forward when encountering this specific issue.
** login ** not convert to ** name ** in a quoted message
iframe integration can't with http not work),our site can't support https alo
on busy site, auto pruning is causing heavy cpu usage.
the usage grows over time until rocket chat eventually becomes unusable and instances of rocketchat and mongodb need to be restarted.
i have a rather active install with up to 200 active users at once and about 6,000 total users.
this was not an issue until i upgraded from version 1.3.2 to version 2.2.0. i use a short retention policy to keep the database small.
1 day for room and 7 days for channels.
it may be relevant that i also upgraded mongodb from 3.6 4 during this install.
upgraded npm from 6.4.1 6.9.0 during this install as well.
on clicking on the searchbar and resizing the browser the sidebar breaks badly and some it protrudes out
the search bar doesn't fit to the end of the sidebar.
whenever i write a sentence and end it with a full stop and try to attach an emoji to it then the emoji doesn 't render and only the the text emoji shows up .
the unread message counter next to the username or channel does not disappear sometimes.
it takes up to several minutes and / or many clicks into the channel or click to the menu and _mark [as] read_.
this error is not constantly reproducable, different channels are affected for every user.
i cannot upload custom emoji file in utf-8 encoded characters(chinese for example), but it used to be worked before.
the name and alias will be translated to some encoded string automatically.
current desktop client behavior for `ctrl-k` (or `cmd-k`) brings up the channel search dialog.
the problem is that key sequence in most other applications, including web browsers, would normally kill the current input.
my typical usage is to `ctrl-a + ctrl-k` to kill what i was typing and start over.
if we can 't change this default, ideally, there would be a way to specify different keyboard shortcuts in a config file or preferences w/in the applicaiton.
file upload to amazon aws s3 stopped working.
error 500 seems it does not resolve s3.amazonaws.com from error log below this has been working fine until today, no change in configuration.
went to notification settings, tried to change them, crashed desktop client.
exception in template helper: typeerror: cannot read property 'split ' of null at ( phofurl at phofurl at phofurl at phofurl ( p.call ( p.mustacheimpl ( object.p.mustache f.view._render
i have a public installation with around 2000 users per week, many of these use anonymous accounts to login.
when starting the server, rocketchat and mongo uses ~10% memory, this increases each day the server is running and after a week the memory usage has risen to ~50%.
this continues until the server crashes a few weeks later.
i have also noticed some anonymous user accounts being stuck in list of users for a channel, even when user hasn 't used chat for several weeks.
to try and amend this i have tried deleting user accounts through api regularly, but this causes issues as well because "user.delete" action consumes lot of cpu power which ultimately crashes installation as well when deleting many accounts.
on opening any option present on the chat box and resizing the window to a sufficient size the chat box hides under the options tab opened
after installing the latest `develop` docker image, the administration -> log no longer displays, and the stdout shows the following repeatedly: phofcode
when posting message with attachment no id that can be used for subsequent edits is returned.
when listening to an audio clip, if i or another user reacts to the message, the audio stops playing.
possibly caused by the message being re-rendered?
in the web version of rocket chat , the style of the cancel button in the dialog window which appears on leaving room seems unprofessional and weird because of having no container and grey background .
when opening a channel permalink, e.g.
phofurl the page hangs on the loading animation.
this is not a problem when you're logged in.
of course, when simply going to phofurl the chat works and the channel can be selected.
this bug isn't unique to us.
i noticed it also for phofurl
unable to update the redirect uri when domain is changed.
i use docker-compose to run rocket chat (rc).
after following the hint that mongodb version 3.4 is deprecated, upgrading to 3.5 breaks the app.
when a user is forced to change their password, they can enter their current password, therefor not changing it at all.
furthermore on the user account settings page change password has the same behavior.
the option of "use full name initials to generate default avatar" only seems to use the first name initial instead of first name and last name initials.
the column header for the "createdat" column in the directory -> users table is missing.
<img width="1379" alt="screenshot at 12 06 32" src=" phofurl
can 't create new users whn selcting live-chat-agent role.
the submission form doeans 't process users creation.
but can create normal user with the "user" role instead.
because the snap package is stuck on mongodb 3.4.20 for the time being, administrators of the edge channel snap package receive a message every 24 hours from @rocket.cat saying, "mongodb deprecated" about this.
additionally, there 's a big banner on the web ui and admin panel stating that version of mongo in use is deprecated.
i follow the steps to enable facebook messenger with livechat, when i click on "facebook messenger" on live chat guide, open a pop-up where i use my credencials from facebook and after i receive a message: "login failed: you can 't use facebook to log into this app or website because there 's an issue with its implementation of facebook login."
and server error"}}" when click ok.
there is no possibilty to send files with .cfg extension.
i have set "plain/text" in "accepted media types" but still not working.
when i leave empty "accepted media types" is possible to send .cfg files.
in the android and ios app are all avatar pictures broken.
phofimage the service runs fine in a browser.
we had set the retentionpolicy and the outdated messages got pruned on the desktop.
but all the messages remains on mobile.
deleted messages are not removed from the count of messages in a discussion.
potentially of note, this does not happen with threads.
while having a chat open and receiving new messages the conversation is first moved to the unread section in the sidebar then immediately back to it's original position.
this happens in both web and electron clients.
since the recent push with the kotlin app that saw updating via google play not work, the push notifications have started to assume that the rc servers are using default port of 443. if your rc instance is configured to use a custom port (which is an awesome piece of functionality, thanks team!)
notification will not resolve upon being clicked on.
this is either a problem within clients (android apps.
did not work for kotlin or react clients).
since rocket.chat version 2.0.0 we're experiencing issues where the channels having only few new messages in them don't get marked as read automatically, leaving the channel name as bolded in the channel list pane.
rocketchat is configured to use amazons3 (but not with aws s3 service) as fileupload storage type.
setting a new user avatar (upload or gravatar) works when the current avatar is the initial avatar (1st letter of name).
when the avatar is set and a user uploads a new avatar, the new is not stored in s3 bucket and a broken image shown.
mongodb entry fine but object does not exist in s3 bucket.
reverting to initial avatar, does remove mongodb entry.
the current documentation describes adding an srv record as _rocketchat._tcp the actual code requires _rocketchat._https or _rocketchat._http.
rest api chat.delete not working with direct chats
hi, i installed latest version of rocket chat on my ubuntu 18.04 server, after installed based on rocketchat doc, a simple gray paged show whit white box centered.
after updating to rocketchat 2.1.0 it's not possible to edit a message anymore.
the menu entry is gone obviousely?
this is similar to issue #6481, and pr #14275. however, those did not quite fix the issue for me.
we have connected our saml environment to rocket chat to allow users to log in.
however, the current configuration doesn't allow us choose a globally unique and/or immutable identifier as primary id (perhaps it's called immutable field name) in rocket.chat.
the latest implementation in #14275 allows you choose between username and email for immutable field name, but both of those can change at times - and should.
we have a staff id that is unique across all of our organizations and i believe many other organizations would have this as well.
this id doesn't change even if someone gets married or changes their name.
is there a way use that identifier identify the rocket chat user account?
able to open downloaded files in direct private and channel
thread ui broken when hide avatars is set on the web and fat client.
when activating https on caddy, it replies that dns query cannot be resolved, where as it 's working properly using dig.
when send messages that contain markdown link, the urls captured in the payload is incorrect.
they have a ")" character which is suppose to be a part of the markdown.
this happens only when the url ends with a slash "/" or contains additional paths (i.e: /path/to/something/).
if it 's a bare url ( phofurl then capturing works just fine.
after i follow the developer installation instructions i get the following when i do a meteor npm start: killedcessing files with rocketchat:vers... | npm err!
exit status 137 failed at the rocket.chat@2.1.0-rc.0 start script.
this is probably not a problem with npm.
there is likely additional logging output above.
killedcessing files with rocketchat:vers... | code elifecycle errno 137 rocket.chat@2.1.0-rc.0 start: `meteor` exit status 137 failed at the rocket.chat@2.1.0-rc.0 start script.
this is probably not a problem with npm.
there is likely additional logging output above.
one of our user has a ldap password containing a $ in it.
he has to use his password shorten to before the $ sign in order to be able to login.
example password : blablabla$bliblibli working password : blablabla
when send messages that contain markdown link, the urls captured in the payload is incorrect.
they have a ")" character which is suppose to be a part of the markdown.
when trying to get information on a group through the api as an administrator, i always receive the following response: { "success": false, "error": "the required "roomid " or "roomname " param provided does not match any group [error-room-not-found]", "errortype": "error-room-not-found" } this is probably due to the fact that the admin is not a member of group, but in my opinion admin should be able to see all channel and not have to join private channels.
hi, i 'm new to rocket chat and i recently tried deploying the server on an ubuntu 18.04 server behind nginx as a proxy.
i followed the guidelines from rocket.chat ubuntu phofhyperlink and configuring ssl phofhyperlink
setting a channel 's audio sound to default breaks audio notifications
i am looking to see if i can collect rocketchat logs into sumo logic.
sumo has direct integration with slack phofurl and i wonder if i could use this in rocketchat.
server will not start with the following error in log: phofcode
my rocket.chat instance has an ldap sync as well as oauth users.
when setting up an ldap group membership <> channel membership rule this works for the initial sync of the user.
however when the user then signs in using oauth subsequent channel membership changes in ldap won't work until the user logs in with ldap username/password.
as long as user is still logged in using oauth no changes to channel memberships happen, even after an sync.
the `package-lock.json` file phofhyperlink contains lines of the form phofurl where the `resolved` field doesn't actually point to the resolved uri, but is just `false`.
this prevents certain tools, such as node2nix phofhyperlink in my case, from being able to use the lock file to fully resolve dependencies.
i found this issue which mentions such a problem: phofurl but without any good solutions other than `rm -rf node_modules && npm install`.
it would be great if this problem could at least be temporarily fixed on 2.0.0 release branch.
when saving audionotificationvalue preferences from the pushnotificationsflextab (notifications preferences for a room / direct message), changing the sound value saves the incorrect value to the database.
when trying to go directly to a room, without having logged in to rocket.chat, participants get a loading screen forever rather than a redirect/popup to login.
ideally, users clicking the link should be able see that they are in the right room (i.e.
see past conversation, perhaps with the typing box greyed out) and have the option log in.
webdav upload still gives errors
docker pull failing due to userns-remap attribute on the /etc/docker/daemon.json file
if a message gets more than 15 similar emoji reactions, a special message is constructed when hovering the mouse over the emoji.
and there is no space between last username and the word `and`.
the pr phofurl fixed some issues with read-only & muted of a room.
unfortunately, this fix introduced a side-effect, that may not be intended.
that means, **once a user gets re-activated**, user is able to **even if entire room gets muted.
** even if user kicked, its username remains in `room.unmuted` array.
this is very error-prone, because moderator doesn't see which users still are able to messages.
when i want to share links or such, rocket.chat isn 't in the "share to" menu of different apps.
i tried to find an android system setting and also looked up in the the issues here and on the internet.
it is not possible to reference a discussion by its name in channels.
when updating rocket chat from 1.3.2 to 2.0.0 federations breaks completely.
users cant find each other, existing chats via federation are not usable.
slackbridge integration works fine 2-way on public groups, but on private groups only slack to rocket works.
sending a message in rocket won't make it appear in slack.
run rocket.chat server as docker-compose and set file upload to filesystem.
uploaded files are not browseable on docker host.
i'm trying to use direct reply with imap or pop3.
my problem, first : * if i answered with my signature, with pictures and links, it's displayed in the chat, so, it's not user friendly : rc_reply_signature phofimage second : * if i delete my signature, i still has the first part of the email : reply_message phofimage
i installed latest version of rocket.chat with docker and when i add the js code in my wordpress site it does not work.
it shows message in the dev console syntaxerror: expected expression, got '<' because of that the chat window is not showing,
announcements are not showing on 2.0.0 rc2.
i upgraded from 1.3.2 and announcements stopped showing even if i deleted them and recreated them.
when calling any of the `/groups.info`, `/channels.info` or `/rooms.info` endpoints the usernames are not included.
a guest user is allowed to make a video call or audio call directly to user.
if the videoconference is enabled (via jit.si) is also allowed.
if someone posts 5,000 emojis, it will crash the tab and prevent anyone from opening the page again, until deleted.
on a fresh setup of rocketchat, bound against an ldap server, it is not possible to use the api of a user if the user has not logged in via the browser interface first.
i found the search channels close itself when i click somewhere else.
and search is losed too!
i expect the same ux than the android application where i can filter channel with a research to see only what want to see.
websockets in chrome do not always connect right away and falls back to xhr, once a websocket connection is finally connected it switches to websocket.
this seems to happen more often when you have a lot of private messages open with other users.
in chrome this error appears.
"failed: websocket is closed before the connection is established."
this only happens in chrome and not in any other browser that i have been able to test.
i have a ms surface tablet computer, with a keyboard, mouse, and monitors attached via a docking station.
when it 's docked, it 's essentially a desktop computer.
in rocket.chat, whenever i give focus to the "message" area, the onscreen keyboard comes up on my non-touchscreen, external monitors.
this includes when the program loads.
not the biggest bug in world, but it is bit of nuisance.
i first noticed this in 2.15.3 and it is still case in 2.15.5.
after upgrading, loading images and uploading images is very slow and causes load on the system.
so i have a staging and production system, my production system is currently on 0.73.2 and i upgraded my staging system to 1.3.2. i've imported the database from live to the staging system upgraded in major increments.
but now all my file uploads the loading of images is super slow using gridfs.
i've tried changing to filesystem storage which sped up uploading files but since old files won't be migrated to filesystem slow loading problem still persists.
if i click on more -> files try clicking on a couple images load my staging system goes up 8 or 9. the hardware both systems is identical since they're using same ressources same hypervisor.
the collapse/hide button next to spotify previews does not work, unlike image or video previews.
snaps & docker images that are using node < 10.0.0 cannot connect to servers with tls or ssl certs that use ecdh curves that are not `prime256v1`.
with #11016 being obsolete, i'm willing to step in and make a pr to get this support added, but i need some direction on the best place to add the tls/semver checks on the server side.
my initial inclination is add it app/settings/server, but i'm not familiar enough with how the project is laid out if there is a better location code similar #11016 in.
the default_ecdh_curve has been set `auto` in node 10 and higher, so we'd have target this towards nodejs < 10.0.0.
rocket chat deployment on docker containers fails using a custom mongodb port: phofcode the deployment was perform as described in the official tutorial phofhyperlink with the following configuration file (`docker-compose.yml`): phofcode > the deployment is perform successfully if the default mongodb port is used (27017), which is not always desirable (when another mongodb daemon already works on this port on the host).
the leave room button is not placed correctly, please see screenshot below.
it may only occur in some system languages, e.g.
the blue "join" button does not show on public, read-only channels when i and my other workspace users search for a public, read-only channel (including broadcast channels) there is no blue "join" button.
it appears on public channel 's on the bottom right, but not for public, read-only ones.
the icon for the server that usually displays in the server bar in a multi-server client config no longer shows.
the roles of a logged in user from sso are not updated if the user has a new idp role
the current version of rocket.chat does not customize the "name" field of at all.
no matter where you go, the default name would be "rocket.chat" for every pwa instance.
furthermore, the icon never changes with the icon set as favicon or logo and requires manual uploading of many assets.
this admin-usability issue contributes to diffulty of differenating among different pwa links for user.
please consider doing some auto-generation option on that end via some optional dependencies like `easyimage`.
(you can just use svg in manifest for android.)
user can 't follow url in conversation if it have specific symbols like "{".
if i send or receive message with url link, like phofurl and then follow this link it 's open in browser link phofurl and don 't work.
when symbol "{" became in url after this not recognize like url part.
after installed update v1.2.3 livechat widget cannot establish connection through wss protocol.
firefox says something like: > the connection to was interrupted while the page was loading.
sometimes the unread message marker doesn't show.
note that this sometimes works as expected, but not always.
this worked before on version 0.74.3. this looks similar to phofurl but with a normal public room instead of a livechat.
my installation has been spammed by malicious users for quite some time now, to the point where regular users barely can use the service.
the tools to fight this behavior are unfortunately very limited.
* there is no easy way to check the ip address of the spamming users.
* it seems that captcha can't be added.
* the moderators can't do much to stop it since spammers create a new account for every message they send.
we share a lot of config/code lines via rocket.chat which is really appreciated btw.
yesterday we encountered what seems like a bug where the multi line code input is missing some numbers in the visual output under certain circumstances.
we couldnt recreate that problem yet, but we have one output that triggers that behavior consistently.
when i edit my comment all numbers are there bit if i copy the multi line formatted output the numbers are also missing.
we also updated rocket.chat to latest version after seeing this but problem still exists.
upgrading rc from 0.72.0 to 1.3.1 results in failure when starting rc, specifically i get the following (extracted from log).
re-starting rc resulted in the migration progressing to version 147. re-starting rc thereafter results in no further change.
log is accessible in gist, see below.
when an escaped bracket is pasted in code block, it disappears
when setup, ldap will sync and import 22 of the 37 users in an ad group.
however it will not import the rest of of them
when opening rocket.chat web interface the page stucks on loading with the three loading dots.
button for file download is opening in the same window.
when posting a twitter link, it's expected to see the tweet directly below it (similar to how you post a website url, you will see a brief view of it below)
i 've successfully added custom fields to the users in my rc installation.
i can retrieve the custom fields when calling the `users.list` endpoint.
but only when logged in as an administrator.
how do i see custom fields as any user?
we have a 3 node cluster with instances on each node.
they are behind a loadbalancer and the setup is round-robin to share the load.
each node is offloading ssl using a local certificate which is ca signed.
the issue we have is that when a user starts and otr session with user on different node, the prompt for otr doesn't appear.
when user received an e-mail i.e.
about new message, as sender is being shown "username".
in old versions there was an "name".
it is confusing for users.
when a rocket.chat installation has more than 50 custom emoji, only the first 50 show with no pagination buttons.
additionally, the search only searches those visible and not the whole set.
ldap sync is enabled and also syncronize user data.
when activating the snippet feature (admin ui message allow message snippeting), there is no way to actually snippet a message.
encrypted channels allow users to send non-encrypted text
i get a `the required "roomid" or "roomname" param provided does not match any channel [error-room-not-found]`
previously, i had no trouble installing apps from the marketplace to my locally hosted instance of rocket.chat.
now when i go to install an app from the marketplace, free or otherwise, it asks for a "payment method" and has fields to fill in a credit card.
if i skip those fields and check the tos box the "get" button is active, but clicking it does nothing.
even with valid payment information, nothing happens.
pdfs are always shown as preview.
this makes the app very slow when many pdfs are attached to a room.
i have a group in ad named "rocketchat" which has some users in it.
i want to allow only this group users to connect to rocket.chat.
therefore i am using **user search** filter.
i have tried different strings given below but none of them worked for me.
api url endpoint is called twice at the same time, when user logout and refresh the page imediately
push notifications worked just fine until we switched to oauth authentication.
after that, the new oauth accounts do not receive mobile push notifications.
attempting to test by clicking the "send a test push to my user" in administrator -> push returns the error "there are no tokens for this user".
after enabling debug logs in the same "push" section and rebooting server, i see these type of logs which appear to show a successful push, however, these users are also using windows application, and they may be related those clients that do get alerts correctly: push: send message "<redacted>" via query { userid: '<redacted> ' } ` all users are getting spotty android push alerts for rooms where they have enabled notifications, or where someone does an "@here".
when in a read-only channel, reactions are not allowed, even when set to "allow".
if you paste or type an url in the chat that contains some ":xxxx:" smiley string, the smiley will be rendered making strange and hard-to-read url.
in mail sent by "mailer" feature users recieve link to unsubscribe this type of notifications .
when user go this link unsubscribe information is invisble (white font) and visible after mark it.
it is not possible to enable "override global retention policy" even if a user is owner in a channel and the role owner has the permission
on the chrome browser and the rocket chat client app, with a valid user and encryption password, entering the encryption password to decode client key fails.
for a new user, attempting to save their encryption password fails.
every subsequent login, a new encryption key is generated but it never saves.
posting this here since it effects the browser and client app
when trying to rename a discussion within the rocket.chat ui, it shows the discussion id (`name`) instead of the human readable name (`fname`).
if the cursor is near the bottom of the channel window, when you @ search to autocomplete it will automatically and incorrectly highlight whatever happens to be under the cursor which is almost never what you intend.
changing times in livechat office hours too quickly invokes rate limiter on self
at info panel, i see os free memory is reduced constantly.
even no more users (about 7) is logged, memory still counting down
when switching status from a custom status to one of the 4 predefined ones the description is not updated.
same applies when editing the status message on the fly and then switching back to "online" for example.
after logout in whole of client latest version can't login back until reload server in client menu
we use oauth via keycloak to log in to our server.
it worked well up to version 0.74. then we upgraded to version 1.02 / 1.03 (and now 1.1.1) and the login fails, usually once.
if you hit reload on the error page and try login again, it 's usually successful.
the first login attempt does not generate any logs whatsoever.
i tried to implement rocket.chat using an iframe, which worked just fine.
but i 'm struggling with automatically authorizing the users with a token.
i have a small backend service that calls the rocket.chat api ( phofurl and returns the token.
now i want to send this token to the iframe via postmessage, as described in docs phofhyperlink .
i also tried to use `event` parameter instead of `externalcommand` as mentioned in #9019. even though did "enable send" and "enable receive" in admin > general > iframe integration, **rocket.chat does not respond any of my commands**.
tried it both, my local rocket.chat instance (running on `localhost:3010`) and `open.rocket.chat` server.
also, when add an event listener for outgoing events phofhyperlink , can see that all messages that send in are being sent back out.
can also see all other messages, such as "room-opened".
did miss one of settings?
or is it a bug?
if you need more details, let me know.
when sending a file to a another federated user the receiving server throws a typeerror.
currently it 's only possible to filter between channels, direct messages and groups.
there is no way to display just the new discussions room type in the "rooms" overview in the administration ui.
it also shows the room id rather than discussion title as "name".
should be able to invite users to a channel by name, not just username (input does not allow spaces).
when setting the per user notification preferences and selecting a different sound, and saving, the sound does not play.
it also does not play even if set back to "user account preference".
we noticed our rocketchat instances were crashing.
we managed to trace the issue to a user that was uploading an svg file.
when a client is disconnected on the site, the chat remains open.
threads button displays a "not allowed" message in the web frontend.
when trying to setup a multi-org rocket.chat instance using permission-removal of `view-outside-room` it correctly hides users when trying to search for them in the groups.
when you however add a new discussion to an existing group, it will allow you to invite users **outside of the parent group**.
for a channel with many files, enough that they would need pagination/load more button, it appears that the loading animation simply doesn't go away, making it impossible to browse the file list.
not even the close button is functional during this.
if i edit it with the browser dev tools to delete loading modal thing, it's perfectly functional and shows everything had indeed been loaded.
had a user encounter this same thing on his mobile phone browser, too.
when uploading a file with the webdav option i get an 404 error
the text input below the chatroom is very narrow.
**this issue is loosely related to #14375** section titles should use the same the primary dark color.
we started to experience issues with rocketchat web version freezing on our devices as they 're using the web-client version of rc.
i pinpointed the problem down to desktop notifications as once those are turned off in user settings no more crashes occur.
to give further information - desktop notifications are not working on the few win10 devices as well.
we are using the official windows client for these computers.
no crashes occur, but no notifications are not shown as well.
video message can be sent into wrong channel when it was canceled in a different channel before uploaded in first place.
when a user goes into a channel with unread threads, the blue counter over the threads button disappears even though the user didn't yet read new thread replies.
rendered messages are cached for 5 secs and invalidated afterwards.
the actions **translate / view original** on the context menu will not switch to the corresponding messages if the action is executed within 5 secs.
in other words no re-rendering takes place until the cache for message is invalidated.
this behavior was introduced in rc 1.03.
custom emojis with the same name as a default emojis used to appear instead of the defaults.
they no longer do this, showing the default emoji instead
when copying a message containing formatting, only the text part without the formatting is copied into the clipboard.
this was not the case in earlier (pre-1.0) versions and seems to be still a feature, because formatting is marked in html with a `<span class="copyonly">` tag.
however, css for `copyonly` has `user-select: none`, so it doesn 't work any more.
attempting to find a user by username in the member list won 't find them if they haven 't been loaded.
if you scroll down on the member list and "load more" until that user shows up, then now the filter will find them.
when livechat-guest from my wordpress try to contact me using the livechat it give an **internal server error**.
some times the message does not appear in the livechat from livechat-guest side, but the message never arrive to agent.
the system was working, till i need to remove to users from livechat agent.
i tried adding them back but nothing.
on hovering the mouse on the line graph for reaction and response time, the values are altered e.g.
reaction time shows response time value and vice versa.
rocketchat generates jitsi room ids which are predictable instead of randomized room id's.
rocket.chat rooms are not shown on the android-app rocket.chat.
uploading files to snap based rocket chat server behind nginx with file upload set to filesystem tops out at ~23mbit/s.
iperf testing to this same machine uploads at ~150mbit/s single thread.
downloads happen at 200mbit/s+ so no issue.
speeds were also slow with default gridfs which prompted the change to filesystem.
when user attempts to reset a password on a rocketchat server with a defined password policy, there is no way to indicate to user on screen the minimum requirements of said password policy.
if a user attempts to reset password and creates non-compliant password, the only feedback is red bubble that relays one of the policy metrics, with the other metrics of policy left as mystery end user.
i am running in a sub directory, i am running the same instance on domain.com/chat as i am domain2.com/chat as an alias with apache.
i use the same chat on multiple sites.
everything seems to work fine but when try to upload a file it is stuck at 0% with a cors error.
if i put header set "*" in my htaccess file everything works fine.
this problem doesn 't happen right away, sometimes have to let the chat run for an hour or two before issues start to happen.
am sure this is a cors issue because after setting the in .htaccess file have had no issues for 24 hours.
believe that there is cors issues when using multiple domains on same instance.
users who use job access with speech (jaws) are not fully able to use rocket chat when accessed from a web browser only.
recommend testing with jaws/nvda or use tools like accessible name & description inspector ( andi phofhyperlink ).
testing with jaws: phofurl testing with nvda: phofurl dhs harmonized process for section 508 testing of web applications: phofurl dhs section 508 compliance testing tools: phofurl accessibility testing tools from the paciello group:
whenever a new live chat guest wants to initiate a chat, it takes a very long time for the message to be sent.
browser: traced it back to the it keeps "pending" for while, until it times out with a 504. the live chat guest can 't initiate new conversation.
server: in the mongodb logs i see slow query, taking over 70 seconds.
the `navigation.token` is the one of api call above.
rocket.chat experimental android application does not support pasting into any of the server connection input boxes.
my password is managed by a password manager and almost impossible to actually type on a mobile keyboard, so being unable to paste into the password input box is a big problem.
also, if the server url is long/complicated or involves a hash in it, being unable to copy/paste it is problematic.
when sending file with extension *.config, are added *.bin additional file extension
when disabling threads, the "threads" button keeps showing on room actions bar (top right).
the directory search should also search in the topic of channels / rooms, not only their name.
ldap sync and ldap login dont work
guest users can't access first public channel in the list
when creating new video conference it is having one video url all the time (no new room is generated )
the content of `admin_pass` environment variable is written to log in plaintext during first-time setup.
message searching appears to be optimized only to languages that have spaces between words.
message searching is nearly unusable in japanese, which does not utilize spaces between words.
presumably this also affects other languages with no spaces between words.
the drop to upload file overlay gets stuck when dragging a file into then out of the window running the rocket.chat webui on firefox.
desire to show custom fields on user info.
user 's are created by ldap, no local logins allowed
up arrow to edit is not functioning as it was in previous releases
we have successfully had jitsi integrated into our on premise instance of rocketchat since we launched with rocketchat 0.75. we have updated several time without issue but when we updated from 1.0.2 to 1.1.1 it seems to have broken a piece of the connectivity.
it will launch the jitsi window, but the link in the rocketchat window instantly is broken and reports call has ended.
after this has happened we also can attempt to start another jitsi session as it just constantly will report call has ended and won 't open a new window after first attempt fails.
as a work around we
hi guys, i have problems while opening filepaths (smb/unc/ etc.)
because the network drive name has a special character ("_") in the name itself.. works not in the client for windows nor in the webbrowser (chrome) **here 's a example filename:** also won 't work with smb.
same problem appears in mac osx, linux, windows and browser.
web client, version 0.73.4; tested in chrome and firefox when the app language is explicitly set to english ('en') and the browser preference is set to something different, e.g.
czech, then time/date strings will not be in english.
only works with english, no issues when app is in czech and browser in english.
(i will also point out that using the moment localization doesn't produce grammatically correct sentences.)
custom emoji admin pane capped at 50?
islashcommand interface has "permission" property <img width="811" alt=" 21 02 38" src=" phofurl but if you mention some permission client without mentioned permission can use this command.
this property isn 't used in registration of commands for custom apps.
phofurl but this property is used in default commands registration.
when using the web client, users are sorted in a case sensitive manner (users with capital first letters appear [a-z] appear before users with lover case first letters [a-z]
i add a user to the admin role and rocketchat displays in green: "der benutzer __user_added__ wurde hinzugefgt" but the user isn 't in that group afterwards.
when i deploy my app to test it following the tutorials ony your website it only calls the constructor and not executing init function or anything else.
here is the repo link: phofurl
i have a flask app which returns json when visiting phofurl image phofimage here is the snippet of my code from flask app: phofcode in rocketchat i have created a bot and added an outgoing webhook.
when i type a message to the bot in any channel, the bot responds but it returns infinite amount of answers.
i have to kill the server to stop.
have tested with latest version of rocketchat v1.1 and an older one v0.74.3.
the result object returned by event doesn 't include fname attribute
although deactivated by admin the threads icon is shown beside the room info icon.
the same issue as in #9316, which was fixed in #9343 appears again.
no tls connections to the ldap server are possible anymore.
when using the search function of rocket.chat in chrome, it doesn 't seem to load additional search results when the bottom of the view is reached and the endless spinner should actually show up to load more.
the z-index on tooltips is too low for the thread side menu.
in the rocketchat docs, it mentions that you can scale rocketchat to multiple dynos on heroku.
but practically it doesn 't work out of the box.
(i did configure the oplog and it 's working great.)
the issue is that instances can 't directly communicate with each other.
this is a network issue.
hi, in rocket chat is an issue.
after user logout, it status is still active.
i have checked on mongo db and i found that after logout _id: "user_id" }).pretty()"` still return session, but in sessionid: "session_id" }).pretty()"` this session has "logoutat" property set.
strange is that when i refresh browser, session disappear from "userssessions".
this issue cause that user status is incorrectly show and push masseges are not sending to mobile.
simillar issue when logout from windows desktop app.
when a user is logged out and opens a channel page, a white blank screen appears showing nothing, no messages and no option for the user to log in/sign in.
as you can see in the attached screenshot list of public channels are also unavailable.
currently, when you reply to a message, the original message replied to shows up _below_ the reply.
"discussions" item in "more" menu is not hidden when discussions are disabled by administrator.
as stated in title, "jump to message" is missing when clicking the message action button in "starred messages"
when search for messages and the results contain thread replies, said replies are empty and their message content is missing.
there 's no option to scroll within the composer window when it contains a big message that exceeds the max height of it.
<img width="648" alt="bildschirmfoto um 19 43 07" src=" phofurl
after migration v0.74.3 to v1.0.3, i have a problem with slowness when first connecting an ldap user.
when i log in with an ldap account the first time, it easily takes 1 to 2 minutes to get to the rocketchat homepage.
with a local account, i don 't have the problem.
in version 0.74.3, i had no problem.
i have an application server that hosts rocketchat in docker format in version 1.0.3 under redhat.
have a second server under redhat host mongodb in version 4.0.6. thanks for your help
i am working with univention ucs server and i had installed univention rocketchat app phofhyperlink .
everything was quite good until i had planned to use the saml single sign on with ucs as i had already done for the nextcloud by following this article phofhyperlink .
understand that there is related general saml documentation available here phofhyperlink .
but that doesn't help well for me as in univention ucs server the things are different, so am looking for a documentation which explains how to do this as it is here for nextcloud phofhyperlink .
after the last update the message box scroll disappears
updated rocketchat to 1.1.0 on my on prem rocketchat server and now when users log in using saml are not matchedon the right user in rocketchat
"user not found or incorrect password" trying to log in with ldap account and customfield set.
"discussions" label in sidebar is not hidden when discussions are disabled by administrator.
currently users which are removed/deactivated in crowd, resp.
do not have access anymore, will neither get deleted, nor deactivated in rocket.chat furthermore if the sync of one user fails, the whole sync fails.
when i use the `/me` command and add an emoji (either custom or builtin), the emoji is rendered as its text representation instead, e. g. `:d` instead of the grin smiley.
i 'm having trouble signing up for an account through "google oauth".
in "general -> robots.txt file contents", i put: user-agent: * allow: / in "meta -> custom meta tags", i put: phofcode however, i have waited more than 3 days.
my website appears by google search, but its desctiption says "no information is available for this page.".
so i went to google search console and tested url, it says robots.txt is blocking their bots so that they can 't create website description.
but above have allowed all bots into my website.
rocket chat never checks for emails.
when i direct message a user it does send an email out to that user, and i've test sending emails back for direct replies, but rocketchat never actually attempts to connect via pop and get those emails.
i enabled debugging and watched the rocket chat log, let the check time to 2 minutes and it does not ever even attempt to log into the email server check for new mail.
i've also configured it for imap, seem thing... neither rocketchat, nor the email server logs a connection attempt.
multiple users are being logged out and forced to log in again.
this can happen while the user is inactive or, more importantly, while the user is active and even typing.
when replying to a thread in a channel, the "username is typing" shows up in the main channel instead of the sidebar thread.
i 've noticed a few issues with "is typing..." sticking around even though a user is no longer typing.
when i paste a url with username/password inside the url (see userinfo in phofurl the automatic linking is wrong.
we have own jitsi server connected to rocket chat.
option "always open in new window" in jitsi configuration is set "true".
during starting/joining conference via windows desktop app, new window do not appear, only information "opened in new window" is shown.
after updating from 0.74.3 to 1.0.3 e-mail header and subject are changed.
the used (default) variable [user] is not set anymore.
we sync ldap attribute cn into username in rocket.chat.
since the upgrade from 0.74.3 to 1.0.3 every username with numbers in it, e.g.
'a1234bcd' is converted to 'a.1234.bcd'
"visitor info" is empty when clicking the name user in live chat room
when clicking on the last message of a thread in a channel, the auto-scroll doesn't always go all the way to the bottom.
the first line of a block message strips the first blank line
the delete button does't show up anymore: image phofimage the roles are not displayed correctly, users have the owner role while they're not owners: image phofimage
cant search some user that haven't chat before
service for snap application rocketchat-server does not auto start anymore.
deactivating an online user will keep their status as online
before emojione update, there was an emoji named `:hot_dog:`, now renamed as `:hotdog:`.
since it was in the recently used emoji list on emoji picker, the entire room template failed to render.
we use current 1.0.3 container with our custom oauth configuration.
beside interactive logins via browser, desktop- or mobile-client, we also generate access tokens to talk to rc api.
that api login seems to sometimes remove the user roles, if role-sync is enabled in the custom oath config.
without "user" role, you can eg.
role sync works fine for interactive none-api access.
so doing an interactive logout and re-login fixes the issue.
it could be linked to the issue i talked about with @geekgonecrazy that api-oauth login runs from a different code-path and eg.
does not set avatar either.
rocket chat does not update in edge browser.
rocket chat loads, all looks fine, but nothing updates unless you refresh the browser window manually.
i see this has been an issue since v73.
i am making a new bug report because this is a much newer version and the problem still persists.
as edge browser being the default browser on windows 10, i feel that this should get more attention.
also, when starting a private message, it often gets the "to many requests" error.
reacting to an old message brings new message indicator
sometime in the last couple months, the `theme.css` stylesheet started being included in the html head ** before ** the regular app styles.
this mean any css overrides flat out don 't work because regular app styles override them due to cascading nature of css.
everything would have to be marked with `!important`, which is not only bad practice but makes some things unwieldy.
this was only noticed when attempting to upgrade our staging server to latest version and everything broke.
wrong online users counter in big channels.
the online user counter counts only those users that are loaded to the list of users on this channel.
if there are more than 100 online users on the channel, the conter will show showing: 100, online: 100. if you then click the "show more" button, counter value will change to "showing: 200, online: 200".
if there are many users in the channel (> 100) then the search does not work correctly.
if the user is not present in the list of loaded users ("show more" button ), then he is not displayed in search results.
there is incorrect display of the button "invite users" in big channels.
the button become very small and not readable.
the problem is present in desktop client and in web browser.
channel names are being cut on small screens.
it's a front end error when i switch channels quickly , i encouter the following error .
cannot read property 'apply' of undefined ...
wrong text (probably missing a string) in the popup when reporting a message.
in a private group chat, messages sent in the new threads ui are shown as ***** * *
youtube broadcasting is not working.
after entering in: broadcasting_client_id: xxxxx xxxxx broadcasting_api_key: xxxxx i receive the following error: websocket connection to failed: error in connection establishment: where the is the stream name/key how can i get this to work?
when i try it says that rtmp:// is not allowed.
menu with the list of actions of the threaded reply shows 'jump to message' button twice.
rooms.upload api method fails to correctly process non-english characters in filenames
may be similar to phofurl regular users see the banner message "you must join to view messages in this channel" in all public channels despite already having joined the channel and having sent messages in the channel.
-the user is able to both see messages in that channel as well as that banner message.
-discussions, private groups, and direct conversations do not display this banner message.
-leaving and re-joining the room does not make message disappear.
-the messages appear public channels when users have logged via electron client (v2.15.3), firefox (v66.0.5) and chrome -restarting server does not alleviate problem.
-assigning users "preview public channel" permission makes banner instantly disappear from all public channels.
if the setting _delete intercepted emails_ (`direct_reply_delete`) is disabled, incoming emails will still be deleted by rocket.chat.
when posting an emoji url (e.g.
of the newest cisco vulnerability thrangrycat: https://.fm) rocket.chat does not identify the url as such and thus also doesn't provide a preview.
since upgrading from 0.74.3 to 1.0.3 the sweet little green key icon is missing, indicating the messages are protected by otr.
when running rocketchat in subdir, i can't download all files.
if the client drops connection it can cause repeat events before the client is aware of that.
related: phofurl when i clicked the authorize button rocketchat sent the email address of the logged in admin user to rocketchat's cloud marketplace.
at which point an email was sent.
an admin is unable to install free apps from the marketplace without registering their instance.
this creates a dependency on the rocketchat cloud.
instances should be allowed to be private without having to auth with a third party to download apps.
directory shows list of channels and number of users in each channel.
i am trying to create a room from my angular application using `httpclient` by following this post phofhyperlink but i am always getting an error as below.
error error: uncaught (in promise): httperrorresponse: failure during parsing for i am able to use the login api, and i am getting a correct response.
users coming from oauth service get "guest" role thanks to #5842 phofhyperlink but seems that since version 1.0.3, "user" role is also added
when trying to answer to some long running threads that have other messages in between on the channel, posting a reply in the thread pane fails with message error message '400 error' on the top right corner of the interface.
the state of thread stays broken until user scrolls up channel (not thread) view so long that original message becomes visible (at latest).
after this users can post messages again to thread.
when editing a message in a thread, the edit shows up in the main channel instead of the thread.
after setting more restrictive name validation by replacing `[0-9a-za-z-_.
disallowing uppercase letters) old users with usernames containing uppercase characters can no longer be mentioned (and doesn 't get notifications)
hi i try to use "custom script for logged out users" feature.
my goal is to logout from keycloak oauth during logout from rocekt chat.
my code looking like this: `window.location.href = " phofurl keycloak rocket chat url)";` after logout redirect works but is looping infinity, refresh page without end.
ther is any possibility to run this code once?
i just installed rocket chat on heroku and ended up with the oplog / replicaset is required to run rocket.chat error.
imagem phofimage on phofurl the solutions listed are for if you access to a vps server, which makes me thing this error should not be occuring with heroku.
when pasting long text (an html) in the message field and sending as attachment (i.e.
answer yes to the request of sending it as attachment), downloaded file is encrypted and not readable.
rocket.chat displays the 'you must join to view messages in this channel' banner for guest users even though they're subscribed to the channel and can view and send messages.
when a channel leader is setup, the leader's info shows up on the top of the channel.
when a thread is opened, the header gets in way of close button on thread.
`@alice` mentions `@bob` on a channel after some time `@bob` logs in, see he was mentioned, opens up list of mentions and see message from `@alice`, but it 's hard to guess what it was about without a context.
he wants to see it and use "jump to message" but this option is no longer there.
before upgrading to 1.0.2 we could see pdf previews.
rocket.chat is vulnerable to cross-site scripting reflected in command tracking case #: fg-vd-19-050 fortinet's fortiguard labs have discovered a security issue in your rocket.chat product.
we estimate its risk to 3, on a scale of 1 (lowest) to 5 (highest), in terms of its impact.
please advise of the appropriate contact person in your company to handle this issue.
if i use @ to mention a user, a selection of usernames is shown.
sometimes, maybe when i am too fast to press enter, not the username that is currently selected in the dropdown menu is taken into my message, but another username altogether (which might not even have the same characters in the username string).
after upgrading to 1.0.2 direct message email alerts are showing as "undefined" in the from field.
snap: rocketchat startup timings -> not really waiting for mongodb
if a user had talked to thousands of users, then the client tries to load all of those users' avatars at once (in the network tool of chrome i can see all the requests being launch at the same time) even when those avatars aren't being displayed.
this does 2 things: 1. crash server (because of all requests i suppose) 2. makes web client slow (it is unusable in most cases, depending on computer)
role labels are visible - but not everybody sees them - despite "hide roles" being true in settings
can't use google map as intended it fails with a 403 error.
dragging an image from the browser into a chat in the same browser is not handled well.
secure ldap connection is not working after upgrade to 1.0.0.
the mongodb persists the hash of every login token generated ever.
i'm running a rocketchat instance for little over 2 months and i use the api to generate login tokens for all of the users of my custom frontend.
per user there are already almost 400 records of hashes
after upgrading from .7x to 1.0.1 role tags are now displayed in direct message and channels where they had not been before.
in accounts > user prefs "hide role" is set to true and in layout > user interface "display roles" is set to false.
when opening an existing thread, i see the discussion but can 't enter any response.
the chat input field won 't show up.
we just got upgraded to 1.0.1. the view mode setting inside the user preferences stopped working.
if i understand correctly, then no matter what the setting is, "normal" is used.
when a user tries to sign in anonymously he/she receives an internal server error.
there are also problems creating regular new accounts, the account is created but the user isn't redirected and can't login either.
when editing a message in a thread, while message editing history is enabled, the message duplicates when you re-enter the thread.
even after switching off role display, roles still show in channels, threads and discussions (i.e.
email direct reply was working fine with 0.74.3. no settings changed.
just upgrade to 1.0.0 (1.0.1 same issue) and try to direct reply to a notification email.
email is moved from new to cur folder by rocketchat but the message is not shown as message in rocketchat.
starting in release 1.0, rocket.chat requires the use of mongodb replicaset to improve performance via meteor oplog tailing.
(see [break] require oplog/replicaset to run rocket.chat #14227 phofhyperlink ) instances that had not enabled mongodb oplog fail on startup.
oplog is required, which is a component of the mongodb replicaset functionality.
however, having actual replicated clusters is not, even though intimated in the link ( phofurl the requirement is to ** enable ** oplog functionality, which can be done as described in phofurl the error remediation is: 1. enable oplog (see [break] require oplog/replicaset to run rocket.chat #14227) and; 2. ensure the system variable mongo_oplog_url reflects url where it was enabled modifying referenced article in error message greatly clarifies both issue and resolution.
i did a mongorestore into the db-docker-container and the one user that had logged in before the restore ended up with no role.
starting up rocket chat for development is very slow and takes about 10 minutes.
we have been running rocket.chat with percona server for mongodb 3.6 for several months without any issues.
however, after upgrading to the latest release `1.0.0`, all of rocket.chat instances stopped working
after upgrading to 1.0.0 my log gets flooded by: ` at exception in callback of async function: typeerror: data must be a string or a buffer at hash.update (crypto.js:99:16) at at isuserauthenticated usercanaccessavatar meteor.bindenvironment runwithenvironment ` it does not seem to have an impact right now.
i enable `allow message bad words filtering` feature and it does not work as expected seem 2nd keywords or utf-8 keywords were not filtered.
after upgrading rocketchat to v1.0.0, it's not starting with `typeerror: cannot read property '0' of undefined` error.
on mobile web browser, whenever i move to any chat channel, keyboard automatically pops up, making hard to read chats before writing anything to catch up the situations in each chat room.
i 'm trying to post an mp3 or a wav file to a rocket.chat channel when someone calls and leaves a voicemail.
i 'm able to upload text files, images, etc., but for some reason, wav and mp3 files will not post.
i know image uploads work with this api because i have a door bell script that takes picture whenever someone hits the doorbell.
image phofimage sadly, i can 't use the same exact method to upload an audio file.
after logging in as an admin and/or a regular user, there is not a search field to the right of the "channel" header.
nor is there a "+" to add a new channel.
pressing enter in user search field at room causes reload.
the problem exists on web client and desktop client.
there is one user in our rocket.chat which is shown online all the time, even after the user has been logged out at all devices.
an error is being thrown everytime the user logs in/out.
i tried to manually set the status to "offline" in collection, but that didn 't help.
**a restart of rocket-chat-container fixes error.
when creating a personal access token, the list is not shown
after logging out via saml, a red error notification pops up in the upper right corner of the page reading "invalid user" if the saml session is configured to be terminated on logout.
shows internal server error and anonymous doesn't work when it is requested.
pressing button reacts nothing but shows the error.
on console, it shows 2 kinds of exception: ** 1.
** exception in callback of async function: typeerror: data must be a string or a buffer at hash.update (crypto.js:99:16) at 0) at at isuserauthenticated usercanaccessavatar meteor.bindenvironment runwithenvironment ** 2.
** exception while invoking method 'registeruser' typeerror: cannot read property 'facebo ok' of undefined .js:12:20) executebound accountsserver.bound [as insertuserdoc] function) 3:34) function) maybeauditargumentchecks 719:19) 717:46) promise new promise (<anonymous>) session.method
uploaded .wav files do not seem to play when displayed as attachments.
they play fine in the upload dialog, but not in the message attachment.
incoming hook integrations are not using the specified custom avatar for posting of messages, and are instead using the default rocket.cat avatar.
this issue is related to #14038 which seems to have been already corrected.
the term "block user" in the "user info" window translates to "lock user" which is misleading as it suggests a users account is actually being disabled on the server.
this has the potential to create security issues when accounts that are supposed to be locked are instead silenced to the administrator.
hi, i 've discovered a bug using incoming webhooks.
the bug occurs when a field with an value of type double is send.
then an error is thrown.
with wrapping the value in quotes it works, but the problem is that my system is not wrapping it.
also it works in slack without quotes.
just like in the topic: "+" button for uploading files works only at first time and after refreshing page/app.
doesn 't matter if it 's priv or channel / app or web.
when starting a new discussion or a thread, the timestamp in the original message starting it does not follow the clock format preference (preferences -> messages -> time format).
the same issue appears in the _threads_ sidebar.
this issue is only occurring on `open.rocket.chat` server.
it is working fine on the local server for 1.0.0-develop and also on problem is on both desktop app or browser.
"search" results in user panel are bugged.
not showing all users from requested patterns (for example searching users with same surname, name, department in name).
moreover same search request from different rocket user, gives totally different search results but also totally random, not complete.
if an image takes a long time to load (slow network, large gif, etc.
it appears that the message appears first with a small area allocated for the image.
later, the image loads and extends the message area down past bottom of scrolling area.
i am trying to authenticate rocket-chat with keycloak using openid connect.
i have been through all the related posts but can't work out what is wrong with my setup.
i am getting the same issue as #7418 but i have looked at the solution on that post and it matches up to what have.
am hosting in docker, both rocket-chat and keycloak are on the same `docker-compose.yml` file.
bug in phofurl version, not latest release!
when you have opened gif in a thread, autoscroll to new messages breaks.
<img width="554" alt="image" src=" phofurl
i use updatemessage via rocket.chat.sdk to update existing message.
a message has text in msg field with 1 button.
if i try to add 2nd button to the message without updating text in msg filed, nothing to occur.
the following error occurs just after the rocketchat container is started in a docker-compose setup phofhyperlink : phofcode here is the container log leading up to the crash with rust backtrace enabled: phofcode
phofurl probably related to #5028 in some way.
but this one has no good reason to be causing a refresh.
a reaction is obviously needing to re-render part of the dom.. this isn't touching any ui related to the message
when setting a member as leader, owner or moderator the tooltip that appears on the top right of the page shows the room id instead of name
the discussion name is not displayed when a user is being muted in a discussion
when necessary make some correction in step 1 of setup wizard, there is no button to back up.
the opposite happens from step 3 back to step 2.
the big difference between us and the people being brought to english.
in portugal avenged a first form, while in brazil one opted for the next one next to the french.
the two are correct, since at the same time a rest of text are in same standard.
as with "equipa/equipe" what happened to other words from french, such as "cabina/cabine" or "controlo/controle".
for form "equipa" for power to a conjugation of power equip, is a serial first word that that occur occur.
but it is also "equipe" that appears in conjugation of same verb, in third person of subjunctive (conjunctive, portugal): "que ele equipe".
the admin panel looses the navigation panel after first navigation when embedded mode is enabled.
custom css being ignored in rc1
when a user dm's himself, a nice message should be displayed like in slack.
roles are always displayed in chat
discussion for channel are not showing.
on a direct message with user, **view all members button** should not be there.
cause when clicked it goes back to a blank screen.
when i show me the room information, the button to leave the room is not complete showing in the window.
1. when i open a test page with livechat installation script provided from rocket.chat management console in internet explorer 11, the livechat widget has problems.
- when minimized, it shows maximize, alarm, and popup icon on the right side of the title bar.
- when maximized, those icons are now shown, precisely, they are located at much lower posion from the original position and seems invisible because of their white color.
style applied to .title class has line-height property which should be inherited to .title .toolbar class but not applied.
2. sometimes when i try to click toolbar icons whit chrome or edge, and sometimes when i move mouse cursor to widget with ie, then widget moves left and escapes from monitor scrren as if it hates tries escape from mouse cursor invation.
when we load rocket.chat webinterface the page stucks loading with the three loading dots.
rooms where a leader has been defined have that leader 's name, status, and "chat now" button floating over the message window like a banner.
messages scroll beneath this floating element.
after rc upgrade to 1.0.0-rc.0, the old menus are still visible like "hubot interne" & "livestream".
on open.rocket.chat 's version of today, the "join a channel button" in the message input looks weird (notice the blue "beitreten" on the right hand side): image phofimage
a new rocket.chat user with 'guest' role joins the default channel(s).
our 'guest' permissions are: - view-d-room - view-joined-room - view-p-room the guest can receive messages and invitations, but nothing else.
so he is not able to see other users except users in the same channel he is invited to.
if you attempt to translate a message using the translation action item in a discussion nothing happens.
verified still works in dm 's
the button at bottom of administration info panel display incomplete.
the apps system seems to be broken.
the apps listing shows `$nan` on status of not-yet installed apps.
attempting to install an app returns a 404 error.
also if imgur and giphy apps are already installed, using them generates a `no results found` message.
when using the helm chart to deploy rocket oplog is not enabled so scaling the rocket pod is not possible - which would be very helpful in most environments, even if no db ha is needed
when joining a room ( e.g.
#test-env ) i expect to receive a notification sound.
when checking the notification preferences it seems that the 'sound' under 'desktop notifications' is not set at all!
when a user sends a private message, beside the temporary notification popup, it's nickname is not lifted in any way to the visible portion of the screen, resulting in missed messages if the user is not at his desk when message arrives.
after clicking on the 'add emoji' icon for a message, there are two problems: * if you want to filter, you first have to click the filter box.
the way it is now, the popup is half-way pop-up, half-way pop-under.
* you can't press 'escape' to get rid if the pop-up should you change your mind.
messages are displaying out of order, if they display at all.
right now rocket.chats slack import only imports public channels, users and messages.
the coporate-export of slack gives the opportunity to also export: - private channels - direct messages (`dms.json`) - multi-user-conversations (`mpims.json`) the importer.js phofhyperlink is processing all the message-subfolders but only takes care about the public channels, described in `channels.json`.
(to me) it looks like the routines are already there to process other json-files mentioned above, especially because importer already handles all message-subfolders.
so it would be great if this could be implemented.
the "user info" panel has a button to show the list of users on the current room, but when accessing it on a direct message, this button will cause the panel to malfunction.
i believe there 's no reason to even keep the button visible there.
a channel on our rc server recently failed to load past the first few posts.
the error in the browser developer console was phofcode .
it looks like the issue is with reactions with custom emoji containing invalid mongodb key characters ( `.` in this case).
related to #12726 but different.
/api/v1/users.info with **fields={"userrooms": 1}** will only retrieve rooms if authenticating user user has role admin or permission " ** ** " ** enabled ** .
that 's kind of strange, considering user can see his active rooms in chat window, why rest-api is not giving same user rooms info??
is ignored in chat window, but it is checked if using rest-api??
please add a confirmation message when ticking to change a permission.
there is no "save" button, and when you click on any checkbox you don 't know if change was made.
comes from: docsissues 1155 phofhyperlink if you embed rocketchat in a second web, lets call it ** phofurl there is a problem: you cant specify more than 1 url in rfc says yes (delimited by comas ",") but most major browsers still say no and will throw a error.
the big problem is that rocketchat server will always include ignoring the option in administration -> general -> rest-api (see image) cors problem phofimage it doesn 't matter if you set it to ** true ** or ** false .
it will always include .
the thing is that this way you **can not** do websocket, rest-api or realtimeapi request.
they will fail when authentication is needed and a preflight option needs to be passed to rocketchat server.
you should allow to be specified in the apache2 virtualhost, nginx or whatever everyone else using.
if you try include the virtualhost file get error for duplicate, and it throws it with both true and false option selected.
remember that authenticated request cant specify "*" even if could its security breach if do it.
the text in the message box is not exactly centred which is kind of off-putting to the user.
when a user hovers over the back button of the discussion room, he/she is not specified of its functionality.
its functionality is to take the user to the parent channel or group.
there is no user feedback telling the user that his message has been pinned or unpinned
ldap authentification(ad) is set up and working for users in rocketchat group from my.domain.com.
when i add user from city.my.domain.com to user group rocketchat in my.domain.com, then ldap sync ignore that user and its not imported into rocketchat.
this is a big problem for us, as we just starting testing phase and heading to users and more than 80 percent of those users are in our subdomains.
there is no user feedback telling the user that his message has been starred or not when he clicks on star message option.
our rocket.chat is behind a router only accessible using the port 9000. the router is doing the port redirecting to 443. when using port 80 the request won't be redirected to the rocket.chat server.
when doing file operations (e.g.
sending a file to someone else) request url don't contain port which is causing that no file can be send.
when i try to upload an image file (jpg or png) i get an internal server error.
hipchat tar.gz importer from hipchat 2.4.3 fails with invalid tar header.
if you change the setting `show setup wizard` to `pending`, every user that tries to log in the server, will see the first page of the setup wizard.
since there is already admin users, first page of setup wizard will throw an error, locking out any user that needs to log in.
if last admin logs out, server will be piratically locked down and it will need to be restarted with appropriate env_vars undo setting.
when we try adding a user to channel, we just can simply add his name in search bar and add to him in the channel, now if we again search his name in add user we can add him again.
one additional ` character when only looking to use to indicate a code block
the 'marked' markdown parser does not render usernames in gfm tables phofcode `
when a user that only has the role "guest" assigned changes its email address and verifies his new address by clicking the link the role "user" is automatically assigned to him.
i believe this is a major security issue as guest users can upgrade their privileges by themself.
in case there is a setting in the adminstration area that determines this behavior i wasn 't able to find it.
inside on line 41, tabbar icon is set to `lightbulb`.
but it is missing from so add svg for it
voice message records, but when clicking on the green finished/send button, the loading symbol would never disappear and there is no progress of upload being shown and it will never appear on the server.
a user can start an otr with any user when they are online, but if the other user declines the otr if still shows establishing the connection.
when we use @all rc doesn't send all users an email.
the text of home page is always english and is not getting translated when user choses differenr languages.
after installing livechat code on website, i am defining an specific department visitors will go to with: rocketchat(function() { here department name - case sensitive '); }); i want to listen and treat visitors differently depending on which department they were assigned to.
however, there is no api call that returns information on which department visitor was assigned at.
when a livechat agent edits the visitor name and saves it.
it only gets updated on the top of the page.
visitor name on the sidebar remains same even after multiple tries.
** os: ** name="ubuntu" version="16.04.5 lts (xenial xerus)" **developement project:** finnish national wide tandem like application for students.
project info not yet published.
**rocketchat version:** branch: develop - last updated **rocketchat instance:** first build launched with original example-build-run.sh script.
next executions via custom script that skips deployment and launches application via `meteor npm start` command ** issue: ** when enabling voice recorded messages error is thrown about undefined roommanager variable in line 7. import is made from `rocketchat:ui` package, but roommanager is exported in `rocketchat:ui-utils` package **browser console.log:** phofcode
a user can start an otr with any user when they are online, but when they start otr with a ** rocket.cat ** or any bot, they won't establish the connection, so this should not happen.
also when the user ends the otr, modal button name is send, which should be ** ok ** .
livechat: new room created when send message to a closed room via livechat api
not able to install on my windows machine.
while in chat, sending a sound message always fails.
the circle never disapears until page reload.
there are 2 error messages in console (f12), pasted them below.
there should be a notification for the user, not only on console.
seems that rocketchat app does not ask for permission to use the microphone.
but even so, it should send a mute sound, not only let the circle spin.
happens in iframe and directly in rocketchat server domain.
user its automatically disconected and redirected to log in form, after a few seconds of loging in.
we use a script to auto login the user in a rocketchat iframe integration, after the user loges in the web that contains the iframe.
sometimes it is automatically disconected just a few seconds after.
registry is full of errors related to onlogin and onlogout.
proces of script that loges in user: 1. rest api try to login ( /api/v1/login ) 2. if succesful-> jump step 4 3. if unsuccesful -> try register user ( /api/v1/users.register ) -> try login again 4. get authtoken and store it 5. load iframe with src => i must say that "resumetoken" query its best thing in rocketchat!!
just kidding, took 2 days of reading code and code more code get it, since there is big problem: not working var iframe= t var iframewindow= iframe.contentwindow?
iframe.contentwindow : t t tevent: t t tlogintoken: '${authtoken} ' t t}, ' phofurl not working tried with many posibilities "event" - "externalcommand" - "login" - "logintoken" - "authtoken" "http" "https" and as much as i could find in rocket chat code, none are realy suposed work.
cant see another way integrate rocketchat into another web without: "resumetoken".
there should be more queries available docs (docs are great, but are written by people with lot knowledge, for people that are suposed have lot knowledge about meteor, node.js, rocketchat; problem i found myself its i dont have lot knowledge so if docs miss 1 word, have google several hours find missing word.
whats obvious for me, might not be obvious for others!
and whats obvious for rest, might not be obvious me!
creating docs its very time consuming, apreciate info arround, but docs realy lacking useful info.
quick start realy pointing nowhere.
and iframe integration desesperating, turn out it can be solved 10 lines code.
nobody considered docs maybe rocketchat login form own authetication shouldnt replaced by any other auth system, simply explain how autheticate using rocketchat own authetication method, make silent auto user authentication pass login screen).
please dont never take out "resumetoken" implement more similar querys.
its not person relevant information if used over https token should secure.
anyway token generated each time with rest api login, just before using query "resumetoken", can invalidated.
coming back user session problem: there should option change session storage: global browser, session, only valid tab, only valid 1 domain (when rocket chat accesed using several domains).
definetly good login once logedin all other domains point same server; but there situations where you dont want make login across all pages (diferent domains) has opened rocket chat implementation.
the server administrator should able modify this behavior.
rooms are not correctly displayed.
sometimes not all rooms are displayed, and other times rooms are duplicated.
in admin area, rooms are ok, its only wrong in the list of rooms.
since version 1.0.0-beta.1 when using #{cn} as a 'field name ' in ldap synchronization, username has bad name escaping with character "-" (only this one) inside: phofurl it should be "frank.white.hd", but now it 's bugged to "frank.white.-.hd" we are using this approach ( phofurl to get nice names in 'private messages list ' (name+surname+department alias): phofurl
the current ui of admin/permissions page is unsatisfactory and looks very poor.
especially where text in permissions is embedded in html twice, both name and _id.
also, the livechat permissions expand out of view.
in users tab inside directory, when the workspace scope is changed it will trigger a weird load behavior, sometimes overlapping header contents for 'domain' and 'created at' columns.
is necessary to scroll in order to actually see the loader, making it very difficult for a user to understand that loading is going on.
- custom oauth implementation does include the refreshtoken in it's call to registerservice(), as seen here phofhyperlink - rocketchat server seems to be handling the session lifetime on it's own, as opposed to respecting the accesstoken lifetime, using the refreshtoken to update accesstoken, and forcing user re-login in case that they have both expired.
according to embedded layout docs phofhyperlink left side bar must be hidden, but it's shown.
i have nextcloud and rocketchat on the same server.
i enabled webdav integration in rocketchat.
i added nextcloud via phofurl link -> worked fine i thought i'd try again with phofurl link -> rocketchat crashed completely (and sadly can't ssh into it right now)
the terms and conditions and privacy policy page is not scrollable on mobile devices.
when notifications in channels is set to all messages for channels and groups in admin, users cannot change a specific channel back to "hide counter" on an individual basis.
the mute all notifications switch works as expected and users can override the global admin setting.
for our org many users complained that they were not getting notifications, so we opted with the strategy of making all message notifications the default, and then allowing people to turn off notifications as they wished.
the base dn search pattern of functions, but ou=more does not.
posting this link makes the chat unresponsive: phofurl
push notification: log shows as sent but after few seconds fcm returns a mismatchedsenderid error.
i have already verified the fcm api key and fcm sender id.
i installed the server using snap.
i then configured it from chrome.
it is working fine in this chrome instance.
it doesn't render the login page in any other browser on any other machine i've tested so far:
when we add a custom sound we just have a play button.
we should have a feature to pause that sound.
the title of direct message push notification is 'undefined '.
if you try to save a webhook script which has a syntaxerror this error will be shown to user.
grafik phofimage if he updates the script and fixes the error and saves the now correct script.
the error message still persists: grafik phofimage
lingohub translation not got respected.
push notifications are not working.
testing the feature in the admin section results in an error message: "there are not tokens for this user" i checked issue phofurl but were not successful applying the hints given there.
if i type an emoji in the web app and try to view to view the chat thread without opening it, then the emoji is not rendered.
instead, it is shown as plain text.
when you try to send message as an image markdown for example ` disambiguation phofimage ) this is test 1`, this will be sent but image won't be shown.
there are 2 errors occuring.
when you enter new message in channel or dm , old message with same link are getting updated and image is not shown on first time, even after reload.
the user is not able to add multiple emojis by clicking on the emoji icon.
this is caused due to the absence of space between two inserted emojis.
when someone posts a link it will embed it and if you click the title of the embed it will open in the same tab.
the link that was sent was a spotify album link
the default styles for terms of service and privacy policy are hideous.
saml implementation works with login, not logout
i am getting the following error/results returned when using the curl command (when copied from the online documentation ) to register a visitor, please can you advise on how this is resolved image phofimage register visitor curl command curl -x post -h phofurl -d \'{"visitor": {"name": livechat visitor, "email": " visitor@rocket.chat phofhyperlink ", "token": "inke8a6k6cjbqwhwd", "phone": "55 51 customfields": [{ "key": "address", "value": "rocket.chat street", "overwrite": true }] } '
latest docker rocketchat container (i am locked out and can 't find the version number, still have ssh access) trying to set a new password during the forgotten-password flow will produce the error message: 'error changing password '
in order to achieve this goal, i see graphql ** subscriptions ** as the only suitable way.
- the keywords (from above) are: ** live ** update & **not part** of the channel.
- if the user is not part of the channel, there 's no way realtime api can push us new messages (-> realtimeapi subscription)
the server was crashed when the user logging in to chat.
can you help me understand why this appears?
where can i find error line to help you fix this?
cannot open the members list of any private groups and channels.
happens at least in the browser and in the windows client.
i received an unsolicited email to the address of the admin account on my self-hosted instance, inviting me to register the instance with rocket.chat cloud.
when importing a large hipchat history with attachments (~10gb) the attachments are added with the date they were imported into rocket.chat as their displayed date and not when they were actually created.
it would be great if the creation date could be taken from the hipchat history.
we 've created several departments for the livechat.
let 's call them x, y and z. for each of these departments we set show on registration page to no.
afterwards, we created three embedded seperate livechats windows using the function: phofcode and set under appearance "livechat offline--> display offline form: false" which is working fine.
the problem is that as soon as department x is offline and y goes online, the chat window is shown again and therefore the chats are forwarded, which not desired outcome.
can not use copy and paste for screenshots
just installed 0.74.3 server on fedora-29 and have created some accounts.
i went to validate my email address via "resend verification email" and it failed sending to localhost:25. i got tcpdump up and can see why.
i have dkim enabled on localhost and it rejects the email due to it having a from header of from: https:; invalid - so the dkim parser rejected it.
i have configured the from header to be a legitimate address under /admin/email - the "test email" button there works correctly get test email - but it looks like validator uses a different from: header - that 's not set?
when someone changes their name or avatar it will lag everyone who has the chat open
since updating from 0.73.2 to 0.74.2 (also 0.74.3) there is periodically at 02:00 in the morning an (see relevant logs).
with moving back to 0.73.2 the error message drops out.
as a rc_admin, i would like custom oauth config to accept combination of various attributes similar to ldap implementation so that non-nested attributes can be combined to provide username (ie #{givenname}.#{sn}) phofurl removed required functionality that was added with phofurl suggest logic be added to handle both use cases for getusername here is the code that was removed for our needed use case.
after upgrade to 0.74.0 even after setting the permissions for and switching the dev radio button in the general -> rest api section to turn off the rate limiter, endpoint for users.getavatar still rate limits.
when i open rocket chat on desktop, the page shown is the home page and there is no login button shown.
livechat triggers stop working after visitor opened and finished his first conversation.
when trying to enter a piece of code or text meant to be inline in monospace, a whole block is created, breaking the paragraph.
this used to work as intended.
a failed slack import cannot be canceled.
i am trying to run a simple loadtest on rocket.chat using jmeter.
in the test multiple users are registered , then logged in and post multiple messages to the general channel using the rest api.
after registering and logging in 10 users and posting 10 messages i get the error: "error, too many requests.
you must wait 60 seconds before trying this endpoint again.
after adjusting number of calls in api rate limiter or disabling it login seems fine.
however value of x-rate-limit-remaining seems unaffected for registering and posting messages.
image phofimage response header of first post message image phofimage
messages posted in slack are not all posted to rocket chat, afaik only one channel seems to come through which is a private channel, i 've setup other channels with the same name as how they appear in slack but only one channel seems to be "synced".
messageattachment shows december 31, 1969 7:00 pm when null
custom sounds added to the system through the administration are no longer showing as options on the user 's account preferences.
if a custom sound was originally set, they still play but they do not show up and you can 't choose another custom one.
this applies to both new room notification and new message notification.
there are no events fired by livechat when operators are available (at least one is online, not away / busy / invisible / offline) or not available (no operators online).
when creating users in rocketchat they are treated case insensitive, e.g.
i can 't create two users with the username "foo" and "foo".
but apparently when mentioning someone in a channel, it only gets converted to a highlight if one uses the correct case.
this bites a lot of our customers because to to pretty short names some of them just type the message including the highlight instead of using autocompletion dropdown.
<img width="225" alt="screenshot at 17 38 52" src=" phofurl
i was trying to upload a mp4 to a channel.
during that process rocketchat crashloops.
it does not recover even after a restart of rocketchat.
had to restore from backup.
live chat rooms in the left taskbar are still open even if the chat has been ended.
when markdown down "marked" is enabled in messages emojis are only around half the size as it would be normaly.
whenever we try to include two or more dollar signs inside a code block (single or multi line), the katex formatting processes the code.
in the web ui (of a self hosted server) i have errors 401 in endpoints `/api/v1/commands.list` and `/api/apps`.
and sometimes using the rest api when creating a new user with an admin user (this is solved by relogging, but it's quite erratic and can't replicate it whenever i want, just like phofurl the `/api/apps` endpoint error prevents me from installing apps.
custom oauth, for the identity path rocket chat requests html instead of json.
ddp rate limit affects first created admin user as well, breaking the setup wizard as it 's failing at the last step.
as one can 't finish update, it 's not possible to change the rate limiter settings via settings menu.
similar to #7182 deleted messages are still visible to other clients until they f5 refresh or otherwise reload the page.
editing a message, does result in immediate update of the message content.
i would expect delete to update immediately as well.
can`t close the description of user in chanel because of leader banner.
it happens only in client version, in browser works correctly.
i am trying to use the rest api to login anonymously from an app i 'm developing in js.
i get a 400 bad request response.
i have enabled anonymous login and can login to the server anonymously using google chrome.
it is impossible to create a channel with a name in russian in the desktop clients and in the web browsers.
clicking the button to record a video will trow an error instead of starting the recording.
when rocket chat is active and i connect to the wifi at mcdonalds the rocket chat window becomes the web browser sign in for the wifi
if you get invited to a encrypted group before you entered your e2e password and then reset it, youll not be able to read the messages in this group.
at the moment it is not possible to manage incoming and outgoing webhooks separately.
therefore giving a user permission to handle their own integrations means allowing them create both, incoming and outgoing hooks.
since outgoing webhooks are able to send everything written within a channel to an outside endpoint we cannot allow this from a compliance perspective.
we would allow having user managed incoming webhooks though.
therefore it would be great if the `manage own integrations permission would be more fine granular/resp.
extended specifically enable incoming, outgoing, none or both webhooks.
edit: the same happens with the official app.
edit 2: it works just fine with the open server the notifications never show up when the app is in background.
when app is in foreground notification is received but it shows that `notification.title` is null which reason why i think it doesn 't show notification in notifications bar.
we have retention policy enabled in our rc instance, with a maximum age of 7 days.
the settings are configured to include private groups, channels, and direct messages.
we don 't exclude pinned messages from this policy.
and we have "only delete files" set to false.
messages older than 7 days are getting successfully deleted.
however, old files are not getting deleted.
we have some files that still remain from as far back as 2016. but, to be clear, none of our files are getting removed.
the server hangs during the boot up procedure, when checking for updates and an error happens during that process.
see stacktrace at the end.
if you upload a file as a message attachment and then change the file contents, when you re upload the file as a message attachment it still shows up as the old file unchanged.
if you delete the message and re upload file, new is then actually displayed/uploaded
uploaded files without file extension are not handled correctly
when configuring a root_url for rocket.chat on a subpath (ex: phofurl the clustering feature does not seem to work properly.
the instances are discovered, but the broadcast status as displayed in the admin 's information page ("current status>connected") is always empty and the "current status > status" is either set to "waiting" or "connecting" but never "connected".
i tried activating debug & info logs in server settings and saw this: phofcode if i change root_url to phofurl i start to see these logs: phofcode and instances seem be communicating correctly again in admin 's information page.
heroku one click build is failing from master branch.
whenever try to open application after build error page is coming..
we had a new user log into our rocket chat instance today.
when this happened, rocket chat decided to modify every fname value in the collection, to that of the new user.
this resulted in the left panel index, showing every user in the company with this name!
this happened for every single user in our rocket chat instance!
in every user 's session, name under "direct messages" showed this new employee 's name.
however, only thing altered was fname value.
avatars didn 't change and actual accounts didn 't change.
we were able to fix this by dropping collection and restoring that collection from last night 's backup.
but we are extremely hesitant to add any other users.
it should be noted that our user accounts come from our ldap servers.
also, new employee is also a former employee.
in past, we deleted her rocket chat account.
finally, it should also be noted that until yesterday, we were running mongo 3.0. we upgraded 3.2.22 yesterday.
if i choose off setting to only enable slackbridge on one or two channels, the messages sent from slack will be displayed on rocket but the opposite ( message sent from rocket wont be displayed in slack )
when using a subdirectory calls to commands.list and others break
trying to update snap to latest version (candidate)
after the last develop update (commit existing dm rooms do not properly load, and the log displays the following message(s): phofcode
the least amount routing method is counting overall agent chats.
the counter is not the number of currently opened chats.
if one agent is out for a period (example: vacation), when he comes back, he will receive all chats until reach the count of other agents.
the permalink of a **pinned message** is not copied to the clipboard when the message is far away (old).
on microsoft edge, it is not getting new messages only after refresh.
i have set permission to "user" and "owner" to be able to create incoming webhooks as normal user, what works if i create a webhook for a public/private channel.
when trying to create an incoming webhook a user channel i get "invalid channel", i tried set "@myusername" at "post go channel" setting.
creating the webhook as admin works as expected.
when i set "manage inegrations" permission "user" it works too, but this is not what want, because every user can edit all integrations in this case.
on our production instance of rocket.chat i have an issue with the android app of rocket chat (3.1.1): it can 't receive push notifications.
i have now enabled push debug and i see the following for my user: phofcode the userid received is my proper userid: phofcode the userid in the push token (7smtd8qanzfowxbx9) is not found in the users rest.... when i try to test push notification, receive error: "error: there are no tokens for this user"
the latest/current image from dockerhub reports as rocket.chat version: 0.73.1 nodejs version: 8.11.3 - x64 within the log after start while according to the release information phofurl it should be node: 8.11.4.
internal server error [500] with webdav file upload.
the header message > **save your encryption password.
** > click here to view and copy your password.
<img width="419" alt="captura de tela as 17 38 49" src=" phofurl is shown for a user containing a valid e2e password if a previous user haven 't save it.
we use ldap exclusively for user data and authentication.
when an existing user logs in, any changes on the ldap side (avatars and data we map to custom fields), get updated.
when we perform a background sync -- manually from administration or from the cron job -- new users are added.
however, users that already exist do not have their data updated.
now that the legacy (non-native) mobile apps have been deprecated, we would like to be able to prevent people from logging into our rocket chat instance when using those older versions.
from what i can see, there is no way, currently, to detect and restrict those older mobile app versions from logging into the rocket chat server.
when posting links in rocket.chat, the oembed.geturlmeta does not currently send the `_escaped_fragment_` query parameter.
there is some code for it phofhyperlink , but the request is not formatted correctly.
since update to 0.73, when i start the server, it hang up to: updating process.env.mail_url no issue with 0.72.3.
deploying livechat doesn 't seems to be working properly while on chrome (tested version: throws a couple of exceptions in the console (see details below) and doesn 't show anything.
seems to be working fine on firefox (tested: 62.0.3) and safari (tested: 12.0 /
leaving and re-entering admin > layout shows emptied css and stock content.
when using the author_name field in attachments posted through webhook the ts field is automatically added with a wrong value (seems unixtime 1).
in the rocket chat windows desktop app, if you type 4 back ticks a space and then 4 more back ticks and hit enter, it will generate a random string similar to this =!=hadjbwxo6kaanw688=!=
currently the crowd plugin does working correct when allowing custom usernames (read: allow users to change username) via their rocketchat user settings.
it is quite a common feature to use this custom name as a mention name.
additionally the crowd plugin does not allow to login via email (even if the login ui suggests it would work), nor specifically the crowd_username (if username has been changed), but only by username in current implementation.
this means that after changing username in rocketchat, crowd login will stop working (since new username is not available in crowd).
therefore crowd plugin redirects to fallback login handler, which then logins user locally via stored hashed password.
a crowd sync will additionally override custom usernames their crowd_username pendants on syncing.
furthermore does not allow use email address - sync on other hand also tries sync on email address basis.
this is not a consistent behavior.
rocketchat 's irc bridge loses the ability to relay messages due to an unhandled promise rejection.
specifically, it has an unhandled promise rejection when calling the irc bridge.handlequit method due to not being a known function.
if a user tries to register, at the moment when the use clicks the "register new account" button, the message "please wait" appears, and whole system hangs there, without ever moving forward.
if i log in as administrator, i see that user has actually been created.
settings in admin panel are not showing the changed value after saving and reopening the admin panel without refreshing.
i just tried to mail a few messages to myself.
seems i cannot choose myself as a destimation.
other users are visible but not me.
adding my mail to "to additional emails" solves the problem for now.
the unread bar is not shown when the first unread message out of the screen.
users in crowd sometimes changes.
that's being said, if for example user get new e-mail address then crowd sync fails and next accounts are not synced.
meteor method `sendinvitationemail` always returns an empty list.
i'm using the official rocket.chat docker-container (with docker-compose).
after the version `72.1` was released, a bugfix release of an older major version (`70.5`) was released.
in the time (in this case only a few hours) between the release of version `70.5` and `72.2` `latest`-tag of docker container was set on version `70.5`.
this caused problems on our server, because we installed `70.5` over our `72.1` instance.
in this case it was only a few hours, but it could be also possible, that there is no point-release of latest major-version after a point-release an older major-version, leaving docker-container `latest`-tag on an old major version.
note: this may not be an issue that needs to be fixed server side, but i 'll post this here in case it is.
our users on pidgin began receiving messages from all public chat channels as direct messages (regardless of whether they 're in those chat channels) once our rocketchat server snap updated from 71.1 to 72.1. this bug only began after our on-site rocketchat server snap did an auto-refresh last night and updated our rocketchat server from 71.1 to 72.1 our pidgin users go here to get what they need connect pidgin our rocketchat phofurl from recent changes purple-rocketchat, it appears eion robb is making changes address something along these lines.
phofurl commit "further tweaks the unknown channels" commit 8c4cb9c "fix for messages from unknown channels appearing as one-to-one im \'s"
ios mobile app can 't connect to server.
the message is "oops, can 't connect to server"
i want to invite an user to a group.
we use emails as username (because of crowd...) so i type: phofcode and the response is: phofcode so the _at_ symbol is truncated.
backslash @ does not work either.
"__token __" and "__userid __" instead and in
as stated in the title the setting "use real name" does not affect reactions.
a message object only contains a list of usernames for each emoji.
when i enter a page with the livechat widget active in ie11, i get the following error: script1002: syntax error file: livechat.js, line: 27, column: 289 i went to that line and expanded it, it contains the following (i put a mark in the error placement): phofcode
connection to smtp server ignores proxy environment variables (http_proxy, etc.
), and as such fails to connect.
the button "mac app store" in the "desktop apps" section at phofurl links to the ios app store instead of opening the mac app store.
when going to the live chat widget, while no agents are offline, registerguest does not fill out the name and email fields of the form.
i want to send files with the .xjdf and .ptk extension, but when i select them, i get the error: "media types not accepted" *.ptk
if you open a non-existing channel in the embedded layout, the left menu is shown, besides the error message (about the lack of that channel).
if i do a global message search for a particular regex string, no results are returned.
if i search for a similar but longer string, results are returned that should match the shorter expression.
changing channels will always fail in almost all builds of microsoft edge.
the culprit is this line when exiting a room: phofurl in every browser but edge this will work fine, however in edge you can 't use the spread operator with a `nodelist` in certain edge (hah) cases.
you can try it for yourself, open rocket chat, open the console, and paste in: phofcode in edge you 'll get a "function expected", in all other browsers it will work.
replace `[...e.children]` with `array.from(e.children)` and it should work as expected all browsers.
i tried to update rocket.chat from 0.71.1 to 0.72.0 on our centos machine.
it is installed there as described in the official documentation phofhyperlink .
the server isn't starting because of missing`zlib_1.2.9` in the sharp-module.
issuing the prepacked `libz.so` in the `ld_preload` environment variable, as some google results suggest, is not working out.
after upgrading rocket.chat to 0.72 we have some viewing problems.
i've attached some screenshots with bugs, i think it describes my problems better than words.
when adding a reaction (emoji) to an image or gif that has been minimized (small black triangle) before, that media will get re-opened on * all * clients.
in webhooks you can define your own avatar by using an image url or by choosing an emoji in the next field.
this worked fine up to 0.71.1 starting with 0.72.0, theese emojis aren 't shown, neither in the webhook-setup-preview nor in the chat.
this is regardless of using a new or an old webhook.
`jump to first unread` and `mark as read` buttons are wrongly aligned to the top as shown on the image below: image phofimage
we have user with full name "sergey aleksandr".
"sergey" is surname, and "aleksandr" is name.
ldap is used for user backend.
so user with this name could not be found via "search" button (one with looking glass) in web application and in electron application.
user can be found by this name if you try to mention him ( @sergey ...) and he can be found via directory button (one with globe).
rocket.chat windows client doesn't include url's query string in automatically recognized hyperlink.
the part after the '?'
isn't clickable and, ergo, the hyperlink doesn't point to the correct site.
i upgraded my rocketchat instance on docker.
release version in administration is 0.72.0-rc.2 could you please help me ?
sometimes hitting the "mark as read" does nothing.
when you close the live chat, it shows "prompttranscript" as part of the conversation.
our internal users reported having to log back into their desktop rocketchat clients when they returned to work each morning.
some of our users lock their workstations at night while others actually log out of or shutdown their workstations each night.
the issue was reported in all cases.
in the rocketchat server admin gui, changes to "login expiration in days" and/or "forget user session on window close" don 't seem to take effect until the admin manually restarts the rocketchat server service.
rocketchat server version: 0.71.1 server os: ubuntu 18.04 desktop client version: 2.14.4 (electron client) desktop os: win 10 ltsb 64-bit (build 14393).
people are trying to open a chat with one of our colleagues that recently changed their surname - "j. schulte" became "j. kuettner" people that never have had any chat contact with him before don 't have any problems finding him and opening a chat window.
however people that have had contact before experience 4 different phenomenons: 1) if they search for example for "jku" and click on "kuettner" the chat tries to load a window, but nothing happens and the app freezes.
2) if they search for "jschulte" the window still appears (as they had contact before) and they can reload the window, but are chatting with jschulte (an account that shouldn 't excist anymore) 3) some people even click on jschulte but it opens a window with jkuettner 4) it says "jschulte" above window int contact list but above each message it says "jkuettner" time.
0.72.0-rc.0 introduced pr phofurl but it does not work because it don 't use request user id - caller user id is used to fetch subscriptions instead.
my chat is set to always receive chats, even when there are no online agents, but when there are no online agents, this error above occurs.
can someone tell me what i can do?
when uploading a file, and setting the filename as `..`, the file will not be saved and show up broken.
the german translation of a `reaction` ("you reacted with") is not correct.
it must read: "sie reagierten mit: ..." instead of "sie reagierte mit: ...".
newest code base fails with replica set
i am testing 0.72.0-rc.0 on my setup with mongodb and it fails to start: phofcode i don't have these connection issues with versions 0.71 and below
you can configure a (pre-)registration form to display when livechat opens.
we have it configured with both name and email address being asked.
this is an effort to try us help loosing livechat contact requests.
the registration form doesn 't display allows in the browser, that might be related whether there is some state present or not on a previous session.
it pops up reliably when using anonymous mode.
however, when you entering both non-empty and valid name such as john doe and john.doe@acme.com, the start chat button is the expected next interaction.
pressing it doesn 't trigger any change.
the console in chrome doesn 't display any javascript or network errors.
after some time (30 seconds or so), the chat is always replaced by actual chat window.
this chat window also displays after a similar time interval when you don 't enter any input.
the name and email address are used by livechat for duration of session.
only weird thing that a request on remains unanswered in status "101 switching protocols"
`meteor npm start` hangs at "starting email intercepter"
room setting "hide counter" does not work because counter is always visible regardless of the configured toggle: phofimage and yes, i 'm using not the latest version but i don 't see any fix in the changelog related to this bug.
when using cas for authentication, changing the user name in rocketchat prevents the user from logging in.
after the last develop update, a weird monospaced (courier-like) font appears in the message type box.
here's to hoping this is not a design decision.
ha install on kuberentes presenting odd behavior with singular pod in deployment
the user has the russian language interface.
after changing any parameter in the user account preferences and applying, their interface language changes to english.
but after a forced refresh of the page, the russian language of interface is returned.
error message when receiving messages with 2.14.2 when receiving messages on windows client a javascript error message pops up stating that "this.notification.show" is not a function at "notification.show"
we are running prometheus metrics in order to monitor some values but recently we 've started to receive that service is down.
after investigation we noticed that yes, metrics are available but there is so much of them that prometheus takes too much time to scrape them.
there is a lot of metrics like: phofcode it looks like when someone else, with different device will use our server then a lot of more metrics gonna be generated.
right now /metrics endpoint response is above 5m...
i have a android 5.0.1 with chrome browser.
if i am typing in "portrait" position the send button is not displayed, on "landscape" the button is displayed.
this seams to be an issue because of low resolution.
i have on a other smartphone with the button is shown in both situations.
a cloud user noticed that when if create a broadcast channel and then disable and reenable "read-only" (in the admin ui), editing of the channel in question is not allowed anymore: <img width="314" alt="screen shot at 13 28 23" src=" phofurl
imported users should receive an enrollment mail so they 're able to set their password.
at the moment they only receive a login request, where they have to use the "password reset" function to actually reset and get their initial password.
an actual invitation would make more sense in this case.
i am not sure if this is a bug or an expected behavior.
i am using hubot 2.19.0 (latest with coffescript) and node 4.8.3. i want to call the method "adminrooms" for getting a list of all rooms, but ther is no result delivered by rocketchat.
my code is: ` robot.respond(/api showrooms$/i, function(res) { 'gen ', [ 'c ' ], { console.log(result) }) `
i am using android 5.0.1 chrome 46 (not latest version, but upgrade fails) and rocketchat 0.71.1. i have not installed the rocketchat app.
when i write a message pressing "enter" creates a new line instead of sending the message.
keyboard settings is "swype - huawei swype".
i tried other installed keyboards, same behavior, also tried to change the enter key behavior in my profile but nothing worked.
when typing a message with blockquote followed by an inline code block, some random string appears in the final message instead of my inline code block (see screenshot below).
i've tested that on the web client and desktop electron app on windows 10, windows 7 and ubuntu 18.04.
it is not possible to change upper or lower case letters in a user 's e-mail address.
this will be blocked with the error "is already in use :(".
this is certainly a cosmetic problem, but a change should still be possible.
the admin sections to customize custom sounds and apps no longer work as of the latest develop update.
lost context "3 vertical dot" menu with parameters of dm or any pv ch after change notification in rocketchat windows app client, rocketchat web app client on any browser.
after a successful csv import the system is inviting users to the login page and not asking them to create a password.
the banner `new messages` is appearing every time on firefox
profile picture not loading intermittently when using google cloud storage bucket.
file uploads seems to be okay.
console log thrown error 400 from gcs (expiredtoken).
via api it 's possible for unauthorized users to post to a read-only channel.
this bug is related to #7241, which has already been closed, but only fixed the problem of posting as non-member to private channels.
when i am connected to rocketchat from multiple locations and one of those locations the screen saver starts, i am marked away.
i would expect rocketchat to require all locations to have the screen saver on for me to be marked away because i'm active on at least one location.
1. the `shift+escape` keyboard shortcut to mark all messages as read, clashes with chrome 's shortcut for opening the task manager.
2. afaics this shortcut is undocumented - i discovered it purely by accident.
i try generate post message with horizontal buttons but always are vertical.
i cannot send a photo to rocketchat and send it to my server when i click the "send photo" button.
the photos i took from my phone do not send the names starting with img_.
i 'm trying to change his name and send it, but i can 't upload it to my server again.
try wifi and mobile data but doesn 't work.
executing of `refresh oauth services` under `administration/oauth`, will break the `saml` login mask.
after a restart of rocket.chat the saml login is offered again.
other login types such as _github_ or _local login_ are not affected.
in case of an exclusive saml login, you have completely locked yourself out!
when the password policy setting is switched on and a password is automatically generated by an administrator during the user creation process, the generated password does not adhere to the specified policy, and thus fails to be saved.
cannot remove broadcast flag from a room via edit room info dialog
attempting to add users to a private channel that was previously deleted and re-created always fails
a previously deleted channel cannot be entered after it is re-created
i 'm unable to unset a channel moderator through the web ui
the new webdav integration (#11679 - introduced in 0.70.0) still shows up in the user preferences, even though it 's completely disabled in the admin ui.
pre requisite: someone posted a link to the chat.
a user opens this links, and see content on rocketchat native windows app.
after user see the source code, there is no way back to chat (or hard to find, because i haven 't found)
when using a client certificate to verify a client connecting to rocketchat, the rocketchat app does not use the certificate in the devices store to verify itself to the server.
this is incredibly hard to reproduce... i did it one time and accidentally overwrote my clipboard with the screenshot of it happening!
essentially, typing `/` shows a list of available slash commands.
while in the `?layout=embedded` view, i typed `/` and saw a broken list of slash commands.
it shows things like app description, then a guid instead of examples what to type.
i've spent the last 20 minutes trying to reproduce it, but i have not been able to.
links for uploaded files in any rocket.chat room don 't refer to the files and trigger a 404 page which can 't be dismissed without going back and refreshing the page.
we just rolled out rocket.chat with about 50+ people as a trial to switch from slack skype email.
i am tracking issues we are having on our own internal helpdesk.
this issue has come up the most for nearly every single person that has started using rocket.chat.
when you first load rocket.chat, (and sometimes after a first load this occurs), the action items in a channel or direct message only show "keyboard shortcuts" (see actual behavior below).
there are other issues like avatars not loading, settings not showing, emojis disappearing in chat, etc., that seems to be fixed by a simple view reload (cmd+r on mac).
simply reloading the client seems to fix the issue, but i have responded to nearly 40 chats in last 24 hours about not being able make video call because they only see "keyboard shortcuts."
the bad-words phofhyperlink filter, only seems to respect roman characters.
i could imagine this is because the default regex is used in the library: phofurl there is a mention of multi-lingual support with an example in the project readme.md phofhyperlink : phofcode
clicking "update to 0.0.3" in the app details page of the jitsi slash command (and other apps) doesn 't update the app successfully.
when logging into a server via a web browser, user avatars are not returned from the server to be displayed.
instead screen shot at 11 28 11 am phofimage is presented.
screen shot at 12 08 27 phofimage
hi, i want to change the userlanguage of a user via api-call.
here is my example call (i added convertasciiemoji for testing purposes):: phofcode and this is the response: phofcode the language in the response is missing, and the language didn 't changed.
the setting convertasciiemoji was changed by api-call
attempting to use otr and e2e at the same time just renders ` **** * * `.
name displayed in "direct messages" panel depends on who started first conversation.
if first conversation was started by local user, then full name of remote user is used for chat name, but if first conversation was started by remote user, then only username is used.
`true`/`false` settings in the admin ui can 't be switched back to their original states (once the "save" button is clicked) unless the page gets reloaded.
i tried with and `store_last_message`, so i 'm certain it 's not only those from the "accounts" section.
if the import file from hipchat includes deleted users, said users are still active after successfully importing into rocket.chat.
i have configured uptimerobot integration using incomming webhook: phofurl message in channel looks like this: phofcode but after i add user `bot` to channel, everything is ok: phofcode is is strange.
if user `bot` has no permission to post to channel how can post `undefined (undefined).
the mail messages shows "undefined" messages in the "subject" field when selecting messages you want to mail.
screen shot at 6 22 52 pm phofimage
attachment link parsing is messed up ` phofhyperlink ` is included when grabbing out the url, as well as any trailing characters before a space.
** example: ** go to this ** link ** , and this link will result in href="link)," and this href="ink)"
i am using rocket chat 0.70.4. when i use gridfs to upload files everything is fine but when i change it to file system paste from the clipboard fails with error 500 in browser.
upload with + still works.
i am running on lubuntu in a virtualbox that shares a windows drive to store the files.
understanding keyboard shortcuts is difficult with the current font size in the desktop app and in the web gui.
the font size is too small.
sending a string with escaped parentheses followed by a backslash produces a katex parser error in chat.
duplicate dialog is showing when user saves or cancel saving the file in the chat with one or many users.
unable to reset e2e if key and password are lost, this stops users from using e2e if they lose their password.
open `/graphiql` in firefox cause `securityerror` and displays nothing.
in chorme it works fine.
can not open message action menu using screen reader
when switching rooms inside the iframe through the "go" command ( phofurl - the top panel appears
in the web-chat, emoticons require need to be separated by spaces on both sides.
pasting links containing the colon character will render an emoji instead of the proper link text.
this is problematic for all linkedin post links that contains segments with `urn:li:`:
when adding a new role with the scope: room, users other than myself are not added to the list even though the "user added" bubble appears when saved.
this also appears to be a problem with an existing (default) role such as "owner".
the same "user added" but nothing shows up issue exists.
atlassian crowd auth failed after import from hipchat
when i download an image from a chat and rename it before saving it to my computer, the file type is changed to file as opposed to png image.
when downloading without changing the name of the image, it gets saved as png image.
i'm using windows 10 pro, version 1803 so and i work with an external monitor connect to my toshiba sattelite pro a50-e-11e, intel core i7-8550u, 1.8ghz, 16gb ram, 256 gb ssd drive.
after installing rocketchar version 2.14.0, after minimizing the app to the systray i couldn't get it back on screen.
i had to close the app and open it again.
the window simply did not appear on screen.
it flashes briefly and then disappears.
1. open rocketchat 2. minimize it to systray 3. go the systray and try open it again
users with special characters in real name are sorted incorrectly in the user directory.
in the case of german umlauts, user real names that contain an umlaut at the beginning of the name, for example, are sorted to end of list.
on starting up the rocket.chat client, i get a message an update is available.
i click to accept the update, install the update (for only this user) and it gets installed which restarts the client.
on next start of client, same update available message for same versions is shown again.
i send record video to friend.
video not play in iphone.
but it work in android.
video link: phofurl image in below: img_0002 phofimage img_0003 phofimage
we jumped from 0.63 to 0.69 and from now , we cannot invite users in room by simply using a mention @... when we mention a user it is 99% percent of the time intended for him to read it.
so in our configuration all users can invite others users in a channel (public or private).
since the upgrade (and as administrator i was not aware of this change) the mention do not invite the user.
so sender believe other user can read message with a notification, but in fact mentionned user has no clue that message is waiting for him.
i saw different issues related to this : #590 #7489 limiting view of users to room is not solution for me beacause it will be harder add user room.
can you tell me if fact that we cannot invite with only mention was intended ?
if yes, it would be great change highlight color of username wheter he is channel or not (blue if he channel, red or orange if for example).
so after mentionning we will see that have mentioned user.
i can 't access rocket.chat web ui, just simply blank black page
when initiating an otr session, after the other user confirms the session, they get an error message "404 not found".
the url changed from ` phofurl to ` phofurl <img width="573" alt="screenshot" src=" phofurl
in the per channel notification settings, there 's no way to select the "chime" sound.
it can only be selected if the "default" option is selected and the default, global account setting, is set to chime.
if a different sound is set in account preferences, there no way to select back "chime" for a specific channel (for example, you want "ding" by default, except one channel).
i 'm also having an issue when no sound is played with notification (macos electron app) when "default", or "use account preference", set in channel notification setting.
changing sound in channel setting (while keeping chime default one), produce sound.
i believe both issue could be linked, or at lest this second issue could be fixed if there was a way to specifically define "chime" as per notification sound.
a changed message that does not change its content (edit and hit `return` key only) is displayed as changed.
only on android it does not work because of certificate issues phofurl
starting from last friday i see an e2e bar on top of every page asking for the end-to-end password, even though e2e is not enabled for my installation.
this bar did not show up in any previous versions (my installation auto-updates every day if possible).
rocket.chat osx client does not restart with the same size and position.
the icon in the notifications window in windows 7 enterprise is not visible event though it exists and user can hover over it.
since the last versions of rocket.chat, my instance requests ldap with a normal filter by admin account and after that a new request, logging in by userdn directly.
i am not completely confident, but my expectation is, the login should not be with a distinctive user.
i my case, my ldap wasn 't allowing that either.
i believe the email changes in 0.70 release have caused mails to not render well in outlook.
we have an outgoing webhook integration, which should receive status 400 or 404 in some cases.
when it happens, we do not want to display any message to the user because of external rules.
but rocketchat remembers that and tries again to request external service in order to get http status 200.
if you edit the reply/quote to a message, it is multiplies.
i can 't build 0.69.2 from source any more.
a `meteor npm start` ends with an error.
we 've added some custom emoji (from hipchat) like this one: phofurl it looks like rendered emojis are too big and gif 's are very "laggy"
in the `stream-notify-user`, the `subscriptions-changed` event received when a room is left does not tell _which_ room was left
diverse users are getting in different times a session timeout although expiration day is set to 90 days.
after reconnecting there are several problems with sending and receiving messages in direct message and channels.
occurs in web browser as well as in rc-client.
deleted messages in an encrypted channel are displayed as " ** * * " message.
the "blue e2e info bar" at the top is not hidden after entering the password, although encrypted messages will be successfully decrypted.
when entering the e2e password to decrypt the key, the password is entered in a text field and not in a password field so that it is visible.
i subscribe user a for stream-notify-user multiple events, such as ** message ** , ** notification ** , rooms-changed , subscriptions-changed .when i send a direct message to user a on browser with another user b, and i get all events afore-mentioned except "message" event.
called the user.register api endpoint with the following command: phofcode the answer was: phofcode
the text input field sometimes changes its size.
unfortunately, the problem cannot be replicated reliably.
observed by several users with the rc desktop client version 2.13.3 and in firefox and chrome.
the problem occurred only since an update from rc version 0.61.0 to 0.69.2.
## web client screen shot at 09 44 36 phofimage ## ios screen shot at 09 45 20 phofimage
after updating to version 0.70.0-rc.1 if a user attempts to save their preferences an 'internal server error' is produced.
running desktop version and icon in taskbar indicates unread messages, but after i read them, the number does not decrement.
admin settings panel shows incorrect settings state after changes
the bug is not always reproducible, but i've had it on the web ui, desktopapp(win and linux).
the console shows a error and it keeps looping an a call saying that `tolowercase` is not a function.
all interactions with the rocket.chat search ui are channel specific.
if you search for something, this search is channel specific.
so if you change to a different channel the search state is lost.
while is is a minor issue when switching channels this becomes a major issue when jumping to a message of the search result.
if this message from different channel the will adopt state of of that channel.
if this state different you will get results for that search, which really confusing!
when pruning messages the warning field is empty on all non en localizations.
previous usage in channels was when @ mention a user it automatically added to the channel.
this seems to have stopped working.
when trying to upload a jpeg image through rocketchat ios app, a incorrect error comes up
we are currently testing the retention policy and we have the behavior that channels, rooms and private messages are not deleted if there is no new message/activity.
when someone writes a new message, messages older than one day were deleted after 30 minutes.
but without a new message, we can see messages older than 1 day.
settings: - quinscape chat phofimage - quinscape chat phofimage
as resolved by #5013, links posted inside formatted code blocks do not have link previews.
if this message is edited however (regardless of if any change is actually made to the message or the code block or the link), a link preview is then generated, despite it still not being appropriate.
when using ?layout=embedded in direct chats and jitsi meet , if one user invite another for video conference second user is unable to join , 'click to join ' button is not working.
this issue only happens in embedded layout.
when trying to import a decrypted tar.gz from hipchat getting an error extract error: error: write after end
some of our teammates have a problem, which does not depend on electron app - it happens even in the browser.
the bug happens even in newly created groups.
this bug is related only to private groups.
in public channels and private messages they have proper notifications.
they does not receive notifications about message - it looks like group name became ** bolderized ** but there is no: 1. real notification 2. any sound 3. no counter next to room name
error (400) while clicking save button for livestream settings in private channel
this is a following issue of phofurl which makes this even worse.
i tried to recreate the channel and do the same things again.
which makes the channel for some users and admins unusable.
if i create a write-protected channel - all users should be muted or read only in some way.
if i test this manually this works perfect.
(adding a user from the webgui) i tried to use the rest-api for this with a broadcast channel - the api seems to be not evaluating if that is a broadcast channel, results in writable channel for all users added via rest-api.
upgraded using standard steps on t2 instance with 40 gb (120 iops ssd) on september 5. since then, the write disk i/o has been growing considerably.
waiting i/o is typically now close to 100%.
typically when node is consuming cpu and memory.
resized instance to 120 gb to get some more iops since it was hardly possible to log on.
when logging in through the rest api using `post /api/v1/login` two authentication tokens are generated in the database.
one of them is valid forever and included in the response, the other one is inaccessible and only valid for a certain time.
rocketchat client under windows with version 2.13.2 if moving the window, an error will be displayed in a new window.
the older one version has no errors.
groups list displaying without names in condensed mode.
also, warning windows and security error occured when rocket.chat opening in internet explorer 11.
no unauthorised page displayed for the non-member of the private room.
if a member is removed from a private room, he/she should see a `not authorised to view this page` page(upon refresh).
instead a `start-a-conversion` page is displayed.
look below for the screenshot.
when using the unread on top feature, after selecting a channel with unread messages it is moved out of the unread list (this is good), but it does not get visually selected in the left sidebar, like when the channels are selected with mouse.
this makes it harder to realize what channel is active.
there are missing / wrong translations in prune messages panel: image phofimage there are 3 problems here: * missing translation for "prune" * mising translation in red box * weird translation of button ("suszona liwka" means "dried plum" :d )
channel(room) is buggy when removed from admin panel once.
when i launch the rocket.chat client, i am prompted that there is a new version, 2.13.2. clicking "install now" goes through an install process, but at its conclusion i am still on 2.13.1 and am prompted again.
app jitsi (/jitisi <--- typo?)
creates jitsi urls with hyphens which leads to 404 at jitsi
urls containing text that corresponds to an emoji display the emoji in both the browser-based and electron clients.
when building out locally with meteor i am running into a javascript heap memory overload when trying to build out this package.
here is the script i 'm using to build this out: #!/bin/bash set -x set -euvo pipefail ifs=$ ' t ' # requires node.js version 4.x # do not run as root
i am running a rocket.chat ha setup with multiple instances inside of kubernetes.
we are behind a corporate proxy.
for internet access i have to set http(s)_proxy settings for rocket.chat.
for using the provided push notification gateway ( phofurl ).
for the communication between the multiple rocket.chat instances i have set no_proxy settings as environment variables (i have tried all three kinds...): phofcode after deployment the rocket.chat instances can't communicate with each other.
streambroadcast does not respect configured no_proxy settings: 1 phofimage ... 2 phofimage **as you can see status is in state: waiting**.
for further analysis i have unset all http(s)_proxy settings for rocket.chat.
after another deployment all instances can communicate with each other and status is in state: connected: 3 phofimage
admins are able to get a list of all integrations by using however, if an integration uses a script, which makes use of quotation marks, the api does not return valid json anymore.
the quotation marks are not escaped by the endpoint and therefore destroy the structure of the json.
at the moment, we have hundreds of people on our rocket.chat server.
every single person is shown in my dms.
i have never had a conversation with most of them.
when this is the case, the client lags extremely badly.
this makes rocket.chat essentially unusable, which is very frustrating.
it appears that when the cas attributes contain a 'username ' attribute the 'username ' attribute map is ignored and the 'username ' attribute is used instead.
according to funcitonallity described here: phofurl some of the users are displayed with theirs names and some with usernames.
i and @nepoxx phofurl see this bug.
private group don 't have owner after last owner left the group.
i just tried to delete a user but was not able to do so because the user seems to be the last owner of one or more channels / rooms / groups.
this is a bit of a problem because the error message does not say * which * rooms.
how do i find those rooms?
i have hundreds of them.
when running the test in another language than english, the test suite fails at "it should be that the emoji popup bar title is emoji:"
after starting with normal registration we are now using the ldap sync against our corporate active directory, however it seems that the username of one user with some kind of extravagant name is converted wrongly.
his (here made-up) name is "michael zum holz-hacker" and our ad username for him is however when i start a sync i get the error `email already exists` because he registered with "our" username but the ldap sync is converting it to can 't find username, tries to create a new one but address already exists.
imho it should use `samaccountname`/`uid` and not create its own username.
app can not be installed either from file or from url and stay in install mode
when user is authenticated via crowd then he can 't save his profile.
the save changes button is inactive but the "username" is marked as invalid from the start: "your rocket.chat administrator has disabled the changing of usernames" probably save button is not active due this error.
disabling option to change username does not help.
if we are clicking on three dots near last user in room members list, drop-down menu looks like on attached screenshot.
if same user placed on top or in the middle of the list all is ok. checked in firefox 61.0.2 and google chrome
when rocketchat is running in subdir, channel avatar in sidebar is not shown.
i 'm using rocket.chat 0.69 deployed from docker, but rocket.chat 's own instance at phofurl exhibits the same issue.. the "register a new account" screen displays the field labels in a pale colour with not enough contrast, very difficult to read.
this was reported to me by someone using a projector to check out rocket.chat, which maybe made the problem worse, but i agree as the "front door" to application i think it should be more readable.
i looked through and couldn 't see this reported as a specific issue.
when running rocketchat in subdirectory, permalink get wrong url.
this issue is as to reopen #10732 .
neither download my data nor export my data under my data in user 's account/preferences are sending the email with link to download data file.
when deleting a room the browser still shows the room.
only the subscription gets deleted on the client side.
after creating a new room with same name it shows old room, including messages and open tab.
when getting messaged from a user for the **first time**, the name will always be displayed as the username, like _test.user_ instead of "test user".
where are two options: but in settings they have one display name - "hide avatars".
two push notifications are sent when all the notifications are enabled on that channel and the user is @ mentioned in a message.
when in a read only channel with reacting enabled users should be able to react to messages when if they are not able to create messages.
this appears to be some regression.
original issue: #8632 original pr: #8925
when i restarted rocket.chat server, all old (already sent) push notifications were send again to all mobile devices (ios and android).
while using ldap, user cannot login if we set : * * the following stack is displayed : phofcode seems that the var is cast to `string` instead of `number`.
i am using a svg logo which was resizing fine in 0.66.3. now my version is updated to 0.68.3 and the logo is too small in the side bar and too big in the responsive version above the login form.
setting max-width to 100% of logo class is not working too.
when user "a" presses the button to start a confidential conversation, user "b" receives a window with confirmation of the beginning of the conversation.
if user "b" does not confirm the beginning of a confidential conversation, then after a while confirmation window will close.
at same time, user "a" loses opportunity to initiate confidential conversation with "b" in future until client app reboot or until "b" begins confidential conversation with "a" and "a" confirm it.
authentication via ldap server user data field map { "cn":"name", "mail":"mail"} use real name true problem appeared after updating from 0.66.3 to 0.68.3 update to 0.69.0 not fixed the problem
css styles not working properly with search field, after updates (i dont remember witch version) my search field looks like at picture (after click search icon) its occurs on web and windows client
on macos 10.13.6, running rocket chat
when sending a get request to the mentioned endpoint it does not return any user at all.
however i 'm able to make requests to `im.list.everyone` without any issue.
when querying the im.members endpoint with a roomid (eg.
i 'm met with a 400 response and what appears to be an internal error outputted as the reason for failure: read property 'username ' of undefined"}`
using 0.68.3 installed with snap.
i switched on the retention policy, went to a channel and wanted to prune all my messages manually.
it does prune the messages but it leaves al the files.
running it again with only pruning files selected doesn 't help either.
files are still visible and downloadable through the webinterface and apps.
if the username is changed, another users cannot send some messages to the new 'username'.
the new 'username' cannot be seen in the 'direct messages' area.
the old 'username' can be get some messages from another users.
i tried to test external tool: phofurl which communicates via rocketchat using rest api (browser request).
there was an 500 http error while login.
the newly released rocket.chat+ (version 2.12.0) has an incorrect message count displayed on the rocket chat icon in the dock.
after a while i'm recognizing that the unread messages bubble is still present but i don't have any unread messages.
if i restart the app it's gone but again after a while it shows up and will not go away until i restart the app again.
i reinstalled the app already, still same issue.
the preview of small uploaded images is larger than the actual image.
rocketchat doesn 't proceed to login with correct credentials on samba4 dc 's own ldap implementation.
login proceeds with very similar setup on windows 2008 ad dc but not on samba4 ad dc.
yesterday (8/7) i downloaded and installed the latest rocketchat update.
since then, when i get a new message and the app icon in my mac dock gets a badge number, even if i read the new messages that badge number doesn 't clear.
i can hard refresh the application and numbers are still there.
the only way to clear unread badge icon is to completely exit app and reopen it.
i try to package application, which contains external libraries in package.json: phofcode finally these dependencies are not packaged into final archive.
if my cursor is in the chat message input field and i press the "page down" key on my keyboard, the whole rocket chat scrolls down.
this is caused by the following css: phofcode i fixed it by putting phofcode in layout -> custom css.
i'm getting notifications even if i'm not logged in any server
even when you don't have any unread messages in desktop application (osx), app's icon on launcher show unread messages counter.
hipchat export was created (export options: include files, include one-to-one chats) and decrypted as documented here: phofurl looking at the file the export is > 3g ` fhess@fhess-laptop ~/tmp/rschange ls -lah -rw-rw-r-- 1 fhess fhess 3,1g aug 6 15:11 ` trying to import the file as hipchat (tar.gz) results in tab crash - starting chrome with the arguments --no-sandbox or doesn't change anything.
using firefox takes a bit longer but tab also crashed.
exporting and importing data from same instance excluding one-to-one chats results in a file ~ 5mb which can be successfully imported.
rocket.chat server becomes unresponsive after posting the following multiline formatted message: phofcode posting this log-message as normal text works fine.
even after i have read all unread messages within my chats the notification counter in the app drawer remains to show 1 unread message.
formatting of attachments is appearing odd in desktop / web apps.
posting code directly after a quoted text scrambles it.
i have notifications after all messages set up on my windows version of rocketchat.
despite that, i don 't get notifications about messages appearing
we just created an incoming integration webhook url for a gitlab url and pasted the url details directly into a chat room.
clicking on this link, breaks the desktop client.
the desktop client only shows "{"success":true}" we had to delete the chat profile and create a new one.
pruning based on @svennd "at user" is removing all messages contrary to what the description says: "only prune content from these users (leave empty to prune everyone 's content)"
since 0.67.0 some settings radio buttons are not working.
the changes are not permanent, even after saving the change.
it happens not with all settings, but for example with settings ->messages -> allow edit of messages.
another example is settings -> video conference -> activate.
livechat is not usable from a mobile device.
collapsed chat widged too small, the caption is too small and also the 3 icons.
when the user clicks on the widget to start a conversation texts and input element are too small.
the users.list api return an empty result since rc 0.67.0 (again in 0.68.0).
after updating to 0.68.0 the **left sidebar** displays usernames instead of real names.
i already searched settings (twice) and as far as i can tell every setting is set to use real names.
have i overlooked something ?
** edit: ** just to be clear: before the update the sidebar showed the real names, not usernames.
snaps for 0.68.0 (perhaps 0.67.0 too, never managed to get it up and running) break immediately due to not being able to load the module `fibers`.
when trying to upload a file or paste the clipboard with a file, it stays stuck at 0% and doesn 't proceed.
my systemd service on ubuntu for was not running since i start using rocketchat rocketchat-mongo and server service run without an error
while using s3 / minio as upload storage uploading runs well.
but after deleting an upload in the chat the s3 object remains in the bucket.
when enabling 2fa with ldap the challenge isn't being provided and 2fa is just passed.
no channel history for any channel for any non admin user , may or may not happen (happens more often then not)
once a message is sent to a channel, none of the users, all using an android rc client (experimental version), receives a push notification, which happens when private messages or test notifications are sent to these same users (from rocket.chat web panel).
since the upgrade to 0.67.0 hubot instances have gone silent.
all bots are online, they receive messages, process and send a response.
however, no message is displayed in any channels or dms
not sure how i got this, but now if i disconnect all my clients (android, ios and web) my status remains the same and i don't receive any notifications because of that.
requests for a new outgoing webhook we created fails with in the log.
our rocket chat installation is behind a corporate firewall, where the company uses its own ca certificate.
i should be possible with node to use the node_extra_ca_certs environment variable to point to an extra file containing certificates, to be able include the corporate ca certificate.
~however, because we are using a snap app rocket.chat server, there seems be no opportunity insert environment variable anywhere, except perhaps by modifying environment of current snap version, but this would be modified when snap is next updated.~ we have tried both node_extra_ca_certs and cafile (suggestion from meteor) environment variables, by using service config override.
we can confirm they are set in running processes for rocket.chat service, but they have no effect.
the following forum ~discussion~ monologue refers: phofurl
the footer image is showing up as extremely reduced in size.
when a user is created either via admin, or oauth provider an email isnt required to create account, **(this is good, we purposely dont want emails, less info the better to avoid doxx )** the problem is when the new user goes to update their profile avatar, they cant save without adding an email.
this issue is reproducible on safari browser, platform macos.
once an audio message is sent, rocket.chat reloads itself a few times till it stops with a 500 error.
livechat does not appear on website.
livechat - widget do not end chat at client side
when pasting small images into chat that are less than 200 pixels high, they are resized in chat to have a height of 200 pixels, i.e.
they are scaled up and much bigger than they should be.
shows "unauthorized" after clicking on "authorize" on this screen: <img width="663" alt="screen shot at 7 46 48 pm" src=" phofurl
upon creating a notification channel in grafana using the slack channel, sending any notification over error are reported in rocket chat
since upgrading to 0.66.3 from 0.65.2 a direct chat with new ldap users is not possible.
separate rooms will be created for both users in which each user can write and not read and vice versa.
writing katex into inline or multiline code sometimes gives weird results.
refer to this issue: phofurl
two seperate users cannot create a private channel with the same name.
this makes no sense because for example, a family could make a private channel called "family" and no other family could make a channel with the same name.
it appears that the name of channel is used as an id and this is flaw in design.
this is mentioned in #5418. unique ids for channels could be generated number of ways, like with hashes, numbers, adding prefix/suffix to duplicate names.
we upgraded to version 0.66.3 yesterday.
now, private channels are only bridging one way (from slack to rocket, but not from rocket to slack).
if i create a new private channel it'll work fine (2 way) until i restart the service again, at which point that channel will also have the same issue.
public channels work fine (2 way); issue only occurs with private channels.
when you click on search messages, the focus doesn't go to the search box, so when you type something, it actually goes to the message typing box, instead of instantly searching what you're writing.
big images are during upload
on debian 9 with rocketchat running on snap.
rocketchat no more start after upgrade (via snap).
rocket.chat+ client(version 2.11.0) on macos(10.13.5) , crashes when pppoe connection is closed.
when sending a message to a contact in the list and the real name setting is turned on, the contact's short (user) name appears, replacing the real name.
the rest of other contacts remain with real names.
the real name setting remains true.
if you update a username of a user logged in as a admin user, then it is still delimited to 1 per 60 second.
toasts for errors messages in `administration` > `users` > `add user` have html escaped code instead of expected style.
please, mark as read all answers when click in a channel
if guest pool routing is enabled, and agent takes-up a livechat , it is redirected to incorrect url.
<img width="396" alt="screen shot at 9 04 27 pm" src=" phofurl
** edit: ** okay, actually i was just too dumb to read and didn 't expect the restore script to have a backup function.
nevertheless both are not very well structured so i am going to open a pr to try make it better :) i just tried migrate from one server another and restore the rocket.chat database via the provided snap function which can be found here phofhyperlink .
suddenly my rocket.chat windows client is mirroring the server list as shown:
when i go in the web interface i get the icon to add people to my room, when i am in the linux application, i don't.
cannot add users from linux app.
when mentioning a user in a room and the phofcode is the start of the message, it isn't being converted to the name in bold and blue.
when creating a channel, entering a name with spaces in the channel name input and then clicking "create" generates a name with dashes (-) in place of the spaces.
the channel appears in the list with the dashes but when opened, name is displayed on top as it was entered in input field.
also info side popup, appears with dashes but when clicking "edit", it appears as originally entered.
the url also displays dashes.
image phofimage trying to create a new channel but dashes instead of spaces will display an error saying already exists.
it appears this issue has been solved previous versions but has popped up again.
when root_url is set to a non-root path, e.g. '
phofurl client application calls localhost/api/bar instead of localhost/foo/api/bar.
i believe this is an issue with restivus but since they have stopped development, we should fix the issue here.
incoming webhooks from tfs are empty since the upgrade.
i know it's a rendering, not a parsing issue, because we did the update on 3rd july, but messages going back before that date are now being rendered incorrectly.
as per my post in the support forum phofhyperlink - please visit the link for more information.
we 've used the zapier integration for rocket.chat in some zaps and they worked perfectly.
a few days ago we recognized that the existing zaps still work as expected but we can 't activate any new ones that include rocket.chat.
using a container with version 0.65.2 i was affected by #11079. now i fully reinstalled rocket.chat with a container having version 0.66: it worked for a few hours, but then it broke.
it 's a publicly visible setup (meaning that everybody can see channels), but the channel list is empty.
you can see it at phofurl here 's what i have in the browser console: phofcode
tried to upgrade a 0.65.2 installation this morning but did not succeed.
the highlighting of mentioned names is behaving strangely and smileys are not always converted to images.
updated from 0.64.2 to 0.66.0 then to 0.66.1. same problem.
when accepting new livechat, error appears both in macosx app and in browser.
error:404 oops, page not found sorry, page you requested does not exists or was deleted!
this crash is happening since march, 2018. basically, if you open any room with video attachments (maybe other types of attachments too?)
there are other issues related to this problems: - phofurl - phofurl 11 11 59 phofimage
i'm running a small script that updates all rc users avatars from a database.
when i fetch the endpoint i get a success message, but the avatar doesn't get updated.
it looks like the server doesn't enter here phofhyperlink or if it does it is not accepting raw buffers.
i have tried changing the avatar with a hosted image (body containing userid and avatarurl) as in this example phofhyperlink and it does work.
the problem is with an image that has been uploaded.
i followed example in official rocketchat documentation phofhyperlink .
nevertheless, looking at testing folders found that this option is not tested.
the only function tested in set avatar is with photo from url phofhyperlink .
when you click on a channel and then at the right bar click on "members list" icon it will show all the users that are currently in this channel.
if a new users enters the channel, or leaves it, the list remains unchanged.
workaround: click one time on "members list" icon (to make right column disappear) and then click it again.
when the room leader is shown in a bar by scrolling messages in a room, the tooltips triggered by header buttons at top are "eclipsed" by the room leader bar.
when you connect to rocketchat using the realtime api and subscribe to messages in a room you still receive events from the channel after you have been kicked and you can still send messages.
error while logging in using saml as a new user
when markdown is enabled (under general->messages) - the following do not work: @mentions announcement text
after upgrading rocket.chat to 0.66.0, all my users have an "idle time limit" value of 0.9. i first thought this was an integer issue (requiring you to input an integer instead of non-integers like 0.9).
after fiddling a bit, it turns out that you cannot even input a value of 10 as it also says it 's invalid.
it seems like is checked against / 60`.
every value that is >= 60 seems to be valid (meaning a minute-value of 1 or bigger).
in addition to that, the input field blocks me from entering `,` in chromium (but doesn 't prevent me do so in firefox).
if i save the value and it 's bigger than 60 and contains a dot (e.g.
`60,2`), the after the decimal sign (either `.` or `,`) is cut off and remaining integer is used.
also page reloads, after saving value.
main take-aways are for me: * **do not do client-side prevention entering characters you don 't want.
this not limited ui we 're talking about, you 're doing similar stuff all around ui!
otherwise you always have write client-side check in ui and again on server verify that client-side check worked (or prevent somebody from injecting chars don 't want)
setting "show message in notification" to false sending any message and i receive in both notifications (desktop and mobile) the message.
administration -> custom emoji the permission to manage-emoji is set but there is no + sign on top right hand corner.
for us, rocket.chat does not work with more than 1000 active users.
rebooting a server, restarting apache or restarting rocket.chat after an update causes all clients to face serious issues connecting to the chat.
im/channel counters unreads & unreadsfrom populating as null until the user has participated in the chat room.
when i try to change username for user i get internal server error.
use 'meteor npm start' many times, but't always success
new users are receiving `internal server error` on first login on my instance of rocket.chat.
but on the second attempt authentication occurs without error.
in information panel for channel, markdown doesn't work.
when a new livechat session is started, the typing indicator is not displayed until the livechat widget interface is reloaded.
prometheus exporter did not start after redeploy (0.66.0-rc.1).
the error seems to have no impact, yet i wanted to report it.
it seems to be connected with the update of livechat history (disclaimer: i have never used livechat)
users can upload pngs with transparent backgrounds as avatars.
in the past, the transparency was displayed correctly.
currently, a transparent background is converted in a black one after upload.
when a user changes their username, the service will hang and/or crash hanging all clients connected to the service
when try to start rocketchat server(ver 0.66.rc-0), i got an error to say mongo_url must be set even if this environment var is there.
when you switch from `original` to `marked` markdown parser in the administration ui (messages markdown markdown parser), normal text emoticons (like `:)`, `:-(` or `:o`) won't be transformed into their corresponding emoji counterpart
usernames which don 't follow the default `utf8_names_validation` regular expression (`[0-9a-za-z-_.
]+`) in "admin info" step of setup wizard are ignored until the wizard finishes, where a "register username" modal appears.
we upgraded to rocketchat version .65.1 and now whenever anyone uploads an image it displays the image in giant form.
whenever i'm typing long messages everything starts to freeze and lagging
unfortunately our usernames have the form user@company.com which causes a from validation error in rc when trying to edit a profile.
our users are signing in via azure ad and rc successfully creates the account with the @ symbol in the username but it's not possible to modify users profile afterwards.
when a corrupted png file is uploaded, the back end reports exception while invoking method 'sendfilemessage' error: input buffer contains unsupported image format but the client doesn't report errors neither adds the file to the current room.
in latest firefox version 60.0.2, there are not svg favicon in the tab, while normal png is ok.
channels, private groups and direct messages disappear after beeing added to favorites.
only after a reload they suddenly appear again.
rocket.chat periodically shows stack trace like this: node[28740]: exception in defer callback: rangeerror: maximum call stack size exceeded node[28740]: at appendtoresult node[28740]: at node[28740]: at at doc array.every (<anonymous>:null:null) matcher.docorbranches [as _docmatcher] matcher.documentmatches _idmap.foreach runwithenvironment and after some time it really slows down, then it dies completly often with segfault: traps: node[23448] general protection error:0 traps: node[23656] general protection error:0 traps: node[23802] general protection error:0 traps: node[23965] general protection error:0 node[24122] node[24283] node[24464] node[24592] node[24774] node[24904] node[25077] node[26995] node[27118] node[27253] i tried different mongodb (3.2 3.4 3.6) and nodejs (8.11.1 8.9.4 8.9.3 8.9.2) versions but it does not help.
we use a plugin in our forum to display the online users in a chat channel.
it uses the rest api to retrieve its information.
we noted the post call to /api/v1/login with username and password takes around 10 seconds.
which makes some refreshes very slow.
the logs show no errors or other indications that something is wrong.
the rocket.chat was setup only a month ago using the docker images.
i was trying to get an "admin" bot to join a private room and subscribe to messages.
i am using driver.joinrooms() method from rocket.chat.js.sdk.
the call failed when accessing getroomidbynameorid().
this is done with [add-user-to-any-p-room] permission enabled for this user, which should allow any user to be added a room.
this (although still fix in progress #11010) however, does not enable the user retrieve details and also join the room for subscriptions, as performed in the js sdk.
either let this permission be inclusive of such cases or create new permissions allow this operation.
after updating rocket.chat+ pc client to 2.11.0, server list shows double icon of chatting server.
we are using a subdomain to connect to our rocket.chat sub.domain.com points to our public ip:3000, which is redirected via nat to our internal local ip:3000. after enabling caddy with auto ssl, it just doesnt redirect https and if i try use https, it shows an error in webbrowser.
my caddy file looks like: **sub.domain.com tls self_signed proxy / localhost:3000 { websocket transparent }** journalctl -xe tells me after restarting caddy service: activating privacy features... done.
phofurl warning: file descriptor limit 1024 is too low for production servers.
at least 8192 is recommended.
fix with "ulimit -n 8192".
since the addition of the new gdpr features - i find several log lines in my rc logs where the user zip file could not be found.
when a user is the ** owner ** or a ** moderator ** of a channel (privat and public) the icon for "list files" (paper clip icon) is replaced with the "add user" icon.
the "list files" icon is also not shown in the burger menu.
with the latest release we are not able anymore to create users.
the option to create a new user is not longer there.
we tried it with the desktop and the web app.
found while trying to get hubot working with latest.
at first hubot connected fine.
when logging into rc from a url that is different from the current root_url a modal pops up and prompts you to update the `site_url` which seems to be root_url (these should be homogenised).
after this point it is not possible to change the root_url when starting rc, or connect hubot.
server has been configured to perform authentication against an ldap server.
however, it does not seem that authentication is working.
the server seems to expect that there must be an admin service user available.
when trying to log on, a response as follows is given: `user not found or incorrect password` on the server log, the following entry appears: `ldaperr: comment: in order to perform this operation a successful bind must be completed on the connection`
we are unable to download or export my data.
@mentions break when usernames contain non-ascii letters, for example @stvel would not be recognised as a mention.
i have rocketchat version 0.65.1 installed(this issue also occurs for version 0.60.1) and the rocketchat android app does not work.
i tried multiple versions of the app.
it always errors out giving messages like: "this is not a valid rocketchat instance" and other error messages.
the server works fine on the ios app.
ssl is enabled behind an apache server.
changes made to livechat settings do not save.
when rocket chat is hosted from the `/chat` subdirectory.
avatar icons get requested from broken urls like: phofcode i.e.
the subdirectory is repeated in the request url.
seems similar to phofurl this seems to be a regression.
i did not have this problem until i upgraded to 0.65.1 from 0.62.2.
users are able to register via authentication services like saml.
you can set the user name based on the email address.
the real name and avatar image is not set by default.
we observed a strange behavior when an user tries to upload an avatar image after saml registration.
the user gets a preview of the uploaded image, however, the image is not saved.
when user presses "save" preview disappears.
i tried to login with local credentials and to upload a picture, but this did not work neither.
setting first a `realname` has no impact as well.
in contrast, i logged in as admin, added real name new user, changed password, and logged in with local credentials.
setting an avatar image worked in this case.
the itself is not corrupted and configuration allows uploading related file type.
i use windows version app.
when livechat sends message for me, notification does not show on my pc, i only get sounds.
when the livechat widget is loaded, a new ddp connection is started between the client and the server.
the client/visitor may never interact through the widget or just stop chatting, which will change their connection status to away.
in this case, ddp connection will remain active and consuming server resources, so it would be nice to handle livechat ddp connection, connecting/disconnecting according visitor's status.
i 've reproduced this bug on a newly installed server.
when doing an "@all" or "@here" mention in any public or private channel the desktop notification doesn 't show, however when mentioning someone directly "@username" it does show.
increasing the setting (admin > general > notifications > max room members before disabling all message notifications) doesn 't fix the issue.
we use rocketchat with our ad servers for ldap authentication.
but we experience some strange behavior on ios devices as our users can authenticate without giving a password (read: empty field).
as far as we can see the android, windows and webclient do work as expected, seems like the ios device has no check whether the authentication is correct.
this is already investigated by the ios team of rocketchat seems api is not validation credentials and just allow anoymous access on server side.
we have got anonymous binding only open for rootdse in ad as designed and adviced by microsoft (microsoft.png).
when connecting to ou where our ad users are in authentication is _not_ possible with anonymous binding.
since upgrading to the latest version, push notifications are not being delivered to ios devices.
through trouble shooting, determined that opening rocket.chat on our phones does assign a token as we can click the test under push and the notification will state sent to 1 device.
however no message is ever sent.
if clicking the test button a second time, notification states no token for user.
we are not using your gateway, however when we attempt to, same result is seen.
prior to 0.65 uploading an image, regardless of size was scaled down nicely into a thumbnail size.
now, the full size image is shown, regardless of size.
a giant image is only shown partialy as it will not fit into the chat.
katex parser tries kicks in when adding pre-formatetd/code snippets
after mention of current user e-mail contains _user_name except profile username
the "user info" function in a dm shows the most recently-viewed user 's info, which is not necessarily the current dm recipient
due to the new european general data protection regulation, gdpr (german: dsgvo) rocket.chat should be served with a default privacy policy for european rc instances.
when the option is set to `true`, rocket.chat should pick up the channel/room name based on the `fname` database attribute rather than the `name` one.
currently it looks like this doesn 't happen in global search and channel/room directory:
while using the font segoe ui, the characters descender (the part of a character (g, j, p, q, y) that descends below the baseline) are not correctly rendered: they are "cut", as you can see on the screenshot below.
image phofimage it happens on top header bar title and description.
i'm trying to use the livechat in my web application (otrs) and the widget is not displayed.
when i take a look on the chrome dev tools console, i'm getting this error message: refused to display ' phofurl in a frame because it set 'x-frame-options' to 'deny'.
the rocket.chat is installed on a different server of otrs.
i'm using https and this is configured in a nginx reverse proxy.
if i use only the rocket.chat via web interface or via desktop app, it works fine.
i already changed configuration on livechat to allow my domain, and did not work.
i leave it empty, did not work either.
saw some information on google regarding configuration nginx, using option `proxy_hide_header x-frame-options;` put this setting rocket.chat nginx config file (reverse proxy).
every user is getting emails for every message despite their configuration not being configured for this behavior.
when using our rest api to get the file list from a channel, sometimes the following message is show: **cannot destructure property `username` of 'undefined ' or 'null '** note that in fact a bad request (400) is thrown and the api comes with the following result: destructure property `username` of 'undefined ' or \'null \'.
i think it would be better and more consistent to show the @ when mentioning people even when real names are used
i 've tried to uninstall my appearcommandapp from our production environment, but it looks like it only happened for one instance.
every 4th reload i see that the app is uninstalled, but all the other times it 's still visible.
when i try to uninstall it a second time nothing happens at all (except being send to the top of the page).
at version 0.65.1, no longer see the "+" to add new custom emojis.
the ui appears to be missing this and so it is not possible to add new custo emojis.
our company recently updated its on-prem installation of rocket.chat to 0.64.1. users were instructed to download and install the latest version of the rocket chat app (version 2.2.0) for android and ios.
however, upon doing so and entering the url, the message an error has occurred while checking your server version, please try again is pushed for mobile users with android 7.x.
using experimental app yields message [chat server url] is not a valid rocket chat instance.
this does not appear to be an issue with android 8.x users.
direct messages tend to stack up over time.
easiest way to clean up is to hide all direct message rooms - this is not possible at the moment and all dms need to be hid one by one.
parsing the directory with firefox (52.2.0 and 60.0.1) only displays 6 channels and no scroll bar : capture d ecran - - 10 33 26 phofimage no problem with chrome : capture d ecran - - 10 31 35 phofimage
when we open the web page with rocket.chat ( phofurl on mobile (iphone 6), in any browser (safari, chrome, etc) - the page is blank-grey after loading animation disappears.
when uploading an animated webp file, it appears to upload successfully, but doesn't become available in the channel it was uploaded to.
no post occurs following the upload.
still webp images work properly; only animated variants are broken.
when uploading a psd file, it appears to upload successfully, but doesn't become available in the channel it was uploaded to.
no post occurs following the upload.
login via saml results in error: phofcode some details: we have a single rocketchat instance running via ubuntu snap.
we connected it to our winadfs server using saml.
everything worked fine until a few days back.
we didnt change anything on the adfs side.
but i think there was an automatic update via snap to v 0.64.2. since around then saml auth does not work anymore.
after upgrading rocket.chat from some version (can 't remember exactly sorry, let 's call it `0.5.late` (about 4 months ago) or `0.6.early` to newer ones `0.6.late`, at the same time of phofurl i was hoping on it getting solved through many upgrades, or that someone else would have the problem (and that i wasn 't uniquely having this issue) such that i could comment and add my information to it.
but sadly i have not been able to find a ticket that seems to be pointing on the same issue.
have always given permissions for everyone in the chat add emojis, and it has not been a special privilege for users.
2nd batch of ldap (ad) users synced however username was not populated.
rocket.chat window isn't showing up.
according to #10608, our instance of rc doesn 't show the image when we point at it.
is there a way to disable this lazy load feature?
i 'm trying to migrate our rocketchat server from a vm to our swarm clsuter and for that i found de docker-compse.yml from rocketchat github that creates a rocketchat server, a mongo instance, a replica set that start only to create the replica and the hubot.
but, in the example the version of mongodb is 3.2 and i 'm using 3.4 in our vm.
and, when i start aplication with 3 replicas of rocketchat and one mongo as example rocket chat launchs but i can 't login or do anything else.
important to say: if i do that do not use mongo as replica launch 3 instances of it works, but qhen enter admin page rocket chat warns they nedd replicaset work.
important say 2: if remove from instance it works well to, but its not recomended.
the url/domain of a rocketchat instance, including channels '/peoples ' names is seen in webserver logs of the domain from which you are embedding urls.
when changing profile properties, like name, you cannot store the information.
clicking the save button does not have any effect
it would be good to have additional apis to communicate with livechat iframe.
currently on the info panel the visitor's username is show bigger than the name.
but the visitor's username (always guest-xxx) is far less relevant then its name.
i am using docker-compose to deploy rocket.chat.
here are the environment variables: environment: - port=3000 - root_url= phofurl - - admin_username=huimin admin_pass=123 after i ran the command: docker-compose up, everything worked just fine.
and the admin huimin was successfully generated.
<img width="186" alt="unbenannt" src=" phofurl however, when i open the web interface: localhost:3000. it jumped to phofurl automatically.
i read instructions of setup-wizard.
this function will be called automatically, when there is no user in system.
and i don 't know what to do, because i can 't open home tab localhost:3000 to register for a new account.
or environment variables are wrong?
the energy consumption of the application in the background mode is unbelievably high.
and i am nearly not using the app.
any other chat is consuming literally nothing compare to rocketchat.
i noticed that rocket.chat had bumped the meteor version to 1.6.1.1 since 0.63.0, so i did a clean and fresh installation of meteor 1.6.1.1 on my environment.
however, i got the following error messages while i was performing **meteor npm start** at the root directory of latest rocket.chat: phofcode know there are several ways to solve these conflicts, such as clone each packages and modify those contraints in package.js manually according to the issue phofhyperlink and announcement phofhyperlink of meteor, but still wonder if there is a common way to solve this issue among rocket.chat developers.
create this issue here because default, clean and fresh installation of meteor 1.6.1.1 doesn 't work for rocket.chat while meteor version rocket.chat has been bumped 1.6.1.1 but some dependencies are incompatible.
just tried to change email notification setting to "disabled" and noticed after the page reloads the settings is back to "every mention / dm".
when select the option to layout= embedded and a user is writing a message the text "user is typing "is overlapped with the text box rocketchat-bug phofimage
the lazy load images pr broke some places where avatars are being shown.
microphone and camera buttons inaccessible in jitsi call applet
when running rocket chat behind nginx reverse proxy, under a path "/chat" and configuring the rocketpath root_url , i notice that the client code running in the browser is making occasional requests to "/api".
to be clear: 1. this isn 't making rocketchat inoperable -- i can still work with the software : admin, chat etc.. 1. requests that don 't obey root_url are problematic; in my case i have an reverse proxy routing /api to another backend which means rocketchat client requests are requests are being routed to wrong place.
when using the native ios app, gitlab authentication does not redirect to the given local gitlab installation but calls phofurl logging in in the browser or the android app with local gitlab oauth works fine.
should be an ios native app bug.
i have a list of allowed domains for user registration working great.
but i'd like to be able to create users manually with email domains not in the list.
so for manually created users i think i should be able to avoid this validation, and be able to add the users anyway.
i 've written a webhook script for pipedrive which converts the requests payload (json) into a valid rocket.chat message.
**the problem i 'm running into is the following:** as soon as there 's an array in the json payload, the payload is missing half of it 's content (cut of after array).
when attempting to export or download a user 's data, the system errors out.
no additional configuration has been done to user data download section, other than it is enabled.
when afrikaans is set as the user 's language, the hide buttons do nothing when clicked.
(both in the left side "three dots" menu, and the room 's "i" room info right side menu.)
in chrome 's console when clicked: on_click phofimage works fine with other languages e.g.
in the site latest stable version is `rocket.chat-0.64.1.tar` but when i want to update rocket chat using snap there is no update is available.
did not get email about new messages in channel.
for example: 1. we have a channel #test and all users have same preferences.
2. we need that if userx offline, but usery message in that channel then rocket.chat push email to user1 about that new message in channel.
there was something similar phofurl but it didn 't help.
when there are multiple links in a message, each one of them has a preview, however if at least one of the links is invalid, the other valid links do not have a preview.
when running rocketchat in subdir, permalink get wrong url.
when you open a room that is hidden, two exceptions are thrown: phofcode and phofcode
file upload have some serous problems and stuck in uploading and cancel button not work anymore !
this is some lines for one file with 12mb size :
when clicking on a channel's announcement, the modal that used to display the full text no longer displays anything.
when using internet explorer, i am unable to click the "save changes" button from the profile page when trying to upload a new avatar.
same issue when using a url for a new avatar.
the users/rooms search stops working after some time.
chat text input is laggy on high-dpi screens or when zoomed out.
this is reproducible in current chrome and electron app.
after pressing a key in text input there is a ~ 500ms delay before any input is displayed in textarea.
this was not present in previous versions.
when adding a new user to a private channel (that i do not own), i get an error pop-up, probably because i don't have the permission to invite new users to the channel, however i should get something more than a red box.
since my site was in portuguese, though this could be a translation bug, however this also happens in english.
when logged in to rocket.chat hosted via apache reverse-proxy over https, the six icons in the toolbar (for search, directory, etc.)
client browser is firefox 52.7.3 esr 64 bit on linux.
it * does * work on firefox 59.0.2 on android and chromium on the same linux machine as before.
it appears to be an interaction of the esr version of firefox with https proxy.
i 'm trying to add a registered user to a private group.
i 'm posting a request via api ( phofurl with admin credentials.
the admin is not a member of the private group but should be able to add another user with the add-user-to-any-p-room permission.
i keep getting as error type.
however the request seems to work when the admin is member of private group.
when starting rc it dies about 3-5 mins in by using 100% cpu.
this behavior seems to have started with 0.64.
upon logging in, users are seeing the app missing just about everything except the toolbar and the logo.
this happened in the chrome browser version one user was able to properly bring view into place: > also, i believe i have found issue.
it looks to have been an error in source code for screen size/resolution.
i inspected source code for border size.
though it was correct in source code, i refreshed it from to on my machine and chat screen expanded to full size.
i noticed issue with border size when i found, that a sliver of white at top of screen was actually chat room.
user's online/prescence status is incorrect on the left panel compared to what is being shown when you click into the user message.
it is showing many users are online although they are not online.
the user r2z2.api is one of the examples in the screenshot who impacted.
when requesting otr session another party does not receive any kind of notification and, therefore, most of such requests are being ignored.
you have to keep your chat window open to make sure you don 't miss the request.
in addition i suggest adding the option to start otr without any confirmation requests, as most jabber clients do.
you don 't need any user action to generate otr keys.
upgraded from release package from 0.63.3 to 0.64.0. now the log says: exception in callback of async function: typeerror: rtmclient is not a constructor at slackbridge.connect at at object.get at new slackbridge slackbridge.js fileevaluate require array.foreach (<anonymous>:null:null) function.run
after upgrading from 0.63.3 to 0.64.0 the rc instances get stuck after a while (30-90 minutes).
they still accept the http connection and the request but never deliver any answers.
the http connection stays open forever.
this happens with a single instance as well as a 4 instance cluster.
the info-level logoutput shows nothing special, the 'getting stuck' happens at different times / logoutputs.
no errors in mongo log either.
/api/v1/im.list.everyone does not return room usernames as before.
i consumed this endpoint in the previous version (if i am not mistaken it is 0.58.3) and json was in accordance with the documentation.
in latest develop build, at the language selection dropdown, we see some language not recognized by tap-i18n so they are displayed as: lc-cc (for example: vi-vn, th-th) instead of the human-friendly language name.
screen shot at 2 26 35 pm phofimage afaik, tap-i18n uses a language name lookup list phofhyperlink to infer the name.
if the i18n.json files are named with unregconized code, raw file name is displayed instead (so vi-vn.i18n.json -> vi-vn...).
my suggestion is to rename these files to comply with tap-i18n's table.
if this is not possible, maybe we have to add a tap-project.i18n file list languages explicitly.
i'm attempting latter approach in a fork but am getting error with tap-i18n and still figuring how get it work.
when pressing the ldap (manual) sync button existing (as in, already joined) users don 't have their avatar updated while users that never logged in to our rocket.chat server are joining the default channels.
reason/cause: some users are missing their (jpegphoto) ldap avatar synced, even when asking them to logout/login again.
effect: trying to synchronize manually (with 'add new users ' set to off) doesn 't update the avatars of existing users but does have every user that didn 't join in, join the default channels.
no harm done, since this happened before on a different occasion we did backup before hitting sync button and restored parties db ... but would definitely like manual button not add new channels + do intended work (sync avatars).
the chat now button text is shifted away from the normal button.
the used language is german in my case.
when i paste a quote link from a private channel into a public channel, the timestamp turns into a hyperlink (e,g., phofurl when i click it, the client stays in the same channel, but all history is erased and i have to log out and back in again to view it.
when i type a message that spans several lines, rocket.chat becomes very sluggish.
email notifications to users by reference not working
when a new user hits the email verification link he gets after registering a server error 500 is shown.
additionally in the rocketchat error log i see: ` exception while invoking method 'verifyemail' mongoerror: the positional operator did not find the match needed from the query.
unexpa nded update: emails.$.verified at ore/lib/error.js:31:11) at toerror at at 69:18 _combinedtickcallback `
for the last few weeks i have found that my instance of rocketchat crashes over night, every 24 hours (roughly).
i have to restart the mongod process on the fedora based server and then all is well again for another 24 hours.
i have upgraded rocketchat a few times but it made no difference.
i suspect the problem is with mongodb, but having tried a few fixes with that too that did nothing to resolve issue, am a bit stuck.
am seeing some messages in mongodb log regarding diagnostic file issues and read on another thread that i should just delete folder for diagnostic data.
did do and error went away until after next crash.
emails being sent from the application is not being correctly formatted to be precise the from : xxxxx (email address) from the application fails to correctly be sent as input to the mongodb ---- hence all mails being sent via any means ...have incorrect headers and land in spam --- others are stopped by mailers itself
it's not currently possible to provide connection settings phofhyperlink to the mongo driver with rocket chat.
this is required to provide a pem file and ca cert file if mongo is configured to only accept connections from clients with valid certs.
simply adding `ssl=true` the `mongo_uri` isn't sufficient because there's no way pass the `sslca` and `sslcert` parameters in the uri.
meteor supports passing extra options phofhyperlink underlying mongo driver.
rocket chat should provide a way for connection options be configured allow this usecase.
i cannot find any channel with an underscore in it's name when using the search nor can i find it through the directory list.
this only happens when special characters in channel names are allowed.
imo this happens, because underscores get replaced with dashes?
view mode disappear from user preferences.
when clicking on search button, search bar overlaps with buttons (search, directory, view mode, sort, create a new channel)
when trying to import slack zip file, i got an error.
i think it maybe an issue with slow file downloads.
channels and users were imported correctly, it starts to import messages, when encounters this type of slack export object, it stops with the error listed above: { "type": "message", "subtype": "file_share", "text": "<@u10k51q1e> uploaded a file: < phofurl and commented: <@u110amuet> comment here.
", "file": { "id": "f3utaqz7s", "created": "timestamp": "name": "xxxx_file.zip", "title": "xxx_file.zip", "mimetype": "application /zip", "filetype": "zip", "pretty_type": "zip", "user": "u10k51q1e", "editable": false, "size": "mode": "hosted", "is_external": false, "external_type": "", "is_public": true, "public_url_shared": false, "display_as_bot": false, "username": "", "url_private": " phofurl "url_private_download": " phofurl "permalink": " phofurl "permalink_public": " "channels": [], "groups": [], "ims": [], "comments_count": 1, "initial_comment": { "id": "fc3w9l5rhd", "created": "timestamp": "user": "u10k51q1e", "is_intro": true, "comment": "<@u110amuet> message text ...." } },
in the new android app, i can 't write to channels to which i 'm admin.
at the moment, when you invite someone to a channel or you want to reference someone in text, who has not yet "written" in this channel, you only see his username and not the "name" field.
when searching for channels using the search feature (+k), any text to the right of the cursor seems to be ignored.
rocket chat supports all sorts of nice formatting for messages.
i wanted to tell some colleagues about this, and expected the rc docs to explain this.
im not sure i fully understand what is going on there but i think the behavior im discovering is a bug.
i tried to make a request for `/api/v1/users.create` with `customfields` in body and didnt see my fields in user entry after that.
i discovered that no saving of `customfields` is performed if `accounts_customfields` is empty in `rocketchat.settings`.
also, where can read about all that settings?
because theres already a website running on apache with a valid lets encrypt certificate, i opted to use the subdirectory installation.
phofurl everything is working fine in browser and windows desktop client, but the native android app fails to login with an error message stating the ios app does nothing when i enter the site address.
unable to activate new users
when using markdown-style links in rocket chat, the link generated escapes the ampersands as html entities incorrectly, meaning that clicking on the link will navigate the browser to a modified version of link, not actual link intended.
the link preview seems correct, but actual is not.
can 't get 2fa backup codes due to language translation but you get a translated that shoudn 't be replaced instead.
i setup saml authentication for our demo system, all worked fine to the point there i hit an issue that sometimes the saml authentication seems not to work.
could debug this to the point there it seems that the loadbalancing without stickyness is an issue.
so if saml-requesta is created on backendserver1, but backendserver2 receives answer, it doesnt know something about this and prohibits user from login.
image phofimage this could be easily reproduced - if i enable session stickyness on loadbalancer saml authentication works - because requests going to one backend system only.
installing rocket chat with a helm chart, i'm specifying all the required variables to configure a custom oauth provider as environment variables.
i create env vars called: phofcode when i log into the rocket chat, no custom oauth provider called `keycloak` has been created.
but if i create one called `keycloak`, it populates all the fields from the env vars i supplied.
this is preventing me automating deployment of rocket chat with helm.
there seem to be two related issues: 1. the search sidebar closes on idle timeout 2. the user interface for idle time limit does not specify the unit in which the timeout is being configured the combination of these made for a very vexing issue that took a long time to isolate, where the search sidebar was totally unusable due to constantly closing every few milliseconds, making it impossible to search for and contact someone.
after getting an auth token via: curl -d phofurl any authenticated user can crawl all information about any other user, including the highlighted keywords, last active time and notification settings with curl -h "x-auth-token: -h "x-user-id: $insert_user_id_here$" phofurl this allows for massive scraping of user data, even if limited to 1 dataset per api call.
trying to set up ssl trough caddy and it the service just stops after a second of running.
it works fine with tls self_signed
when you change the ui language on user preferences the ui don 't reload and you need to manually reload the page to change language.
in the latest version of rocket.chat, the rest api authentication requests doesn 't work with facebook twitter and google.
reference to the rest api authentication: phofurl
if you sort your channels like "unread on top" the label of the menu group seems to be hardcoded, which leads to wrong translations in other languages.
label is also "unread" if i select german as my language)
for a semantic web interface, every input form needs a corresponding label.
that doesn 't need to be visible, but often it is better that it is.
the web interface for rocket.chat misses this.
empty buttons present accessibility problems for people with disabilities.
these should be explicitly hidden or not present.
this presents a problem for wcag 2.0 aa requirements.
in the web app the document language is missing.
for wcag 2.0 aa, the language of the document needs to be identified.
i 'm not sure what version i 'm using.
i 'm just a user.
really small issue and probably not hard to fix, if no one gets interested in it i'll look at the code to fix it tomorrow.
when i am viewing a room, #general for example, and leave another room via the sidebar, #sandbox, that i am part of but am not currently viewing, confirming the action has a small delay that lasts long enough to bother and i am redirected to the homepage even though i already in a room.
safari 9 gives a black screen after logging in.
this issue regards the menu that appears when clicking your avatar in the upper left corner of the ui.
the area that is clickable is reduced by the circle that shows your online status.
currently, you cannot click on area of online status.
the german translation of the user status "online" is incorrect since the latest release.
i am installing rocket.chat via: `$ sudo snap install rocketchat-server` and the chat server doesn't start due to mongodb socket permission error.
**this problem didn't happen on many other exactly identical deployments a few days ago.
something, for some reason is broken now.
** the problem is replicable 100% of the times.
if i remove the monitor from the multi-monitor configuration, the application stays on the non-existent screen.
expected behavior: content of code tags do not matter.
actual behavior: if the channel forbids using the `@all`-feature, then no code tag may contain `@all`.
in other words, i cannot write this: > huh, why is `@all` forbidden?
note that this doesn 't use the `@all`-feature, so it should be okay.
in the latest version of rocket.chat (0.63 rc1), the rest api authentication requests doesn 't work with facebook and twitter.
reference to the rest api authentication: phofurl
the first time a user synced from ldap signs into rocketchat, they cannot sign in using their username.
instead, they have to use samaccountname (or whatever has been specified in the "user search/search field" section of ldap).
after the first successful sign in, the username begins working.
on ldap configurations where samaccountname is the same as username, this would not be obvious, but otherwise, it is confusing.
edited messages don't appear as edited for others, only for the author.
even quitting and reopening the desktop app doesn't make it appear.
continual retries in browser connected to www.cloudstuart.com:3000 serving rocket chat snapped upon an ubuntu issue on aws.
error is "a problem repeatedly occurred with
we want to use internal hubot with set to `true`.
bot is responding on the channel where it 's invoked (with `replied to you in private!`), but direct message does not arrive to user.
we have `enable for direct messages` set `yes` in internal hubot 's configuration.
when uploading a mid-sized (~2-3mb) image file from rocketchat+ on android, the server throws an error.
the upload fails with some sort of "timeout"/"your connection seems off..."/"authenticating" loop on the client, and the server goes into a socket error loop.
when attempting to run the main.js file (after a restart) it doesn't give any logs or error output but gives a core dumped error.
this was happening on other pages before (like my account and admin pages), but now somehow it is happening on room page as well.
this is related a negative margin phofhyperlink on `#header` component without a container.
we allow the use of social logins.
users may come in from github, or google+, for instance and put a space in the username when they sign up.
i am unable to at-mention these users.
when trying to close a live chat it asks you to type a comment.
(personally, i don't really want to leave a comment and would like an option to just close the chat.)
but when you select the text field type your comment the cursor is stolen and drops the message box in grayed background.
it lets you type and send a message instead of typing your comment.
i can get letter or two in and get chat close but obviously this should be fixed.
we had an employee notify us that they were still receiving push notifications on their mobile device from our rocketchat installation.
this was surprising to us because their rocketchat account had been deactivated.
i tested this in our staging environment and was able to reproduce the issue.
when saving any changes to my profile (e.g.
customfields.phones) rocket chat displays an "internal server error".
but can save any changes.
some of the users on my server are affected but not all of them only old.
new users do not have this error.
we installed rocket.chat ubuntu-snap 0.61. then upgraded to 0.62.1 and 0.62.2. were set up customfields.
old users created before the upgraded 0.62.1, new after.
old users in mongodb have added fields customfields (phones, mobiles).
it seems that the katex engine cannot handle some of the functions given in the katex spec at phofurl in particular, we have tried using operatorname and implies, but they just give parsing errors.
i update from 0.60.4 to 0.62.2 and i started to have error r10 (boot timeout) -> web process failed to bind to $port within 60 seconds of launch in heroku when heroku restart the dyno (every 24h).
i am running rc in a stardard dyno.
after rebooting server rocket chat not available in the web browser.
used to work ok, but suddenly stopped.
i have to kill mongod process and restart mongo and rocket chat services, than chat is available.
i revoked the permission to create public channels for certain user groups.
the issue with this is, that there is no indicator that the user is not permitted to create a new public channel, the button is just not clickable.
when we upload an image that needs to be resized the upload hangs at 0% in the ui and our filesystem fills itself to 100% because of a broken file descriptor it seems.
the issue was persistent when graphicsmagick was used and we hoped it would be fixed when switching to the sharp module but it is still happening.
we are using storagetype filesystem for the uploads and avatar resizing is activated.
this issue doen't appear, if rocketchat runs directly at the url root i.e.
phofurl but having a url prefix ( phofurl seems to cause issues with the desktop app.
it isn't an issue with the proxy configuration, as it occurs by accessing rc both ways, via proxy and direct.
if you delete the channel #general and start your ldap userimport rocket.chat will create the channel #general again and every new user becommes a member of these channel.
request header field x-auth-token is not allowed by in preflight response for permissions rest api.
i am trying to enable emoji and audio
a livechat agent is still available after they close the browser.
rocket.chat won 't load when being run from a sub folder in apache (as per phofurl ).
this seems to be because assets are being specified with absolute references.
there are two categories of errors.
the first category is simple static urls that start with a slash.
i was able to work around these with the following apache rewriterules: phofcode these seem to be caused by line 102 of line 27 of and and lines 9 and 18 of unfortunately, the above rewriterules just got me to a new problem.
the browser console gives the error "there is no route for the path: /chat/".
i haven 't been able debug/work around this but it seems be related loading router.js in file
after clicking the verification link the user is redirected to the login page.
when the user tries to login it gets a message saying user is not found or password is incorrect.
when checking as admin, user is still unverified.
i 've juste update my rc server 0.61.0 to 0.62.2 and now i can 't login using saml.
i have an error on the rc webpage : "no matching login attempt found"
with default push settings, mobile push notifications have stopped working for all of our users.
by "stopped working", i mean that no one is receiving them, even when @ mentioned.
in testing myself, i have enabled notifications for all messages on desktop and mobile, and it didn 't fix the problem.
this is especially odd since they were working last week.
i 've tried toggling the options under push to no avail.
resetting to defaults and saving has no effect either.
our current settings: image phofimage fyi, everyone accessing our chat is using the native rocketchat + mobile app.
most of my testing has been done using the "send a test push notification"
after following the installation instructions on phofurl with a chat version greater or equals version 0.62.0 the server did not start.
we should not provide auto-fill values when editing smtp settings.
rocket.chat just shows whitepage after update to 0.62 in safari 10.1
i think there is some inconsistency about the terms "channel" and "room".
if you wanna create a new channel.
the optionpane is called "create a new channel" but to leave a channel you have to select "leave room".
i think this might confuse new users.
typing `@here` into message box brings up a tooltip that appears to give a random list of users, with the explanation "notify active users in this room".
when editing the profile, users have to wait for the "loading suggestions..." timeout to change their avatar, even if the option is disabled.
capture d ecran - - 09 25 31 phofimage
i have been trying to upgrade my docker installation from 0.58.4 to 0.62.2. on a direct upgrade, rocket.chart crashed shortly after start.
so i did a rollback and a step-by-step upgrade from 0.58.4 to 0.59.6 to 0.60.4 0.61.2 0.62.2. up 0.61.2 all worked and the data was migrated.
from 0.61.2 0.62.2, the same crash occurs: here's the only log: phofcode
a production instance running 0.61 was upgraded to 0.62.2. after the upgrade the server was/is unable to connect to mongodb.
a downgrade to 0.61 is possible and rc connects mongodb again.
when anonymous chat access is enabled newly uploaded images don't load thumbnail or image itself, if the option is disabled every new uplaod image is show and loads correctly
as a rocket chat administrator, i would like to be able to globally disable email digests of missed offline messages in order to prevent data exfiltration to 3rd party providers, e.g.
it is not currently possible disable email functionality that can leak private messages from channels within a closed community and still have functioning email for invites / password recovery.
an admin must choose between data security for his community and usability for his users' account management operations.
we enabled the option that new registrations have to be enabled by an administrator, the email gets sent out like it should be, but the email is missing the information like name or email.
when i click on the conversation open the conversation of another person.
rocket chat web and desktop allow for users to choose how to sort channels/dms by as well as how to group channels/dms.
the native rocket chat + android/ios mobile apps have no such control over sorting/grouping.
this is highly desired by our users and impacts the way they communicate from their mobile devices.
feature **highlight words** doesn 't work with more than one word for me.
**short version** when having a ** slow ** outgoing webhook integration for `sendmessage`, it 'll crash with a timeout.
that sometimes leads to a few further errors where messages are not sent properly.
** environment ** i 'm using both the rest & realtime api to create a custom chat integration to an existing platform.
for testing purposes, i fully checked this error with the standard rocket.chat ui.
details - i 'm using `sendmessage` webhook for sending message information to another project - in short, it 's special form of offline notification - the webhook checks several things while making calls `subscriptions` / `messages` model.
- if the message is suitable (the opponent should be notified), manual `http` call is triggered propagate that information different project usually, that (local area) request takes just few ms. but with high load, the script + request may take >3000ms i know current timeout of 3000ms phofhyperlink .
as far as i see (from code), hook should be very independent and should not affect sending of other messages.
there is a new button style, but the border color is not configurable new style which looks fantastic: image phofimage but if you adapt to your regular color scheme, the border color does not change (see below).
two options: 1. i do not find the color code which has to be changed 2. there is no way to change the border color.
import of slack zip fails
sidebar div rooms-list is misaligned with header and footer on mozilla firefox 58.0 (64-bit) on phofurl picture: phofurl this issue happens only in firefox in linux mint 18, chrome looks fine.
update: it happens on both open chat and my local server, still only on firefox (haven't test anything else than chrome).
screenshot shows a resolution, bug still happens at 1080p.
update: white background of scrolls mozilla firefox causes the dark theme to seem buggy.
when saving any changes to my profile (e.g.
client language) rocket chat displays an "internal server error".
i can 't save any changes.
some of the users on my server are affected but not all of them.
we only installed rocket.chat two days ago.
i think we started at 0.62.0 and after the first night it upgraded to 0.62.1. rebooting the whole linux server didn 't help.
when adding a new user i still face the same error
android rocket.chat 2.7.0 when i enter a channel the cursor is put in the message box.
this seems to pop up the keyboard which is really annoying since it then covers half the screen when all you want to do read messages first before you going to respond to anything.
this just started happening when our server go upgraded and i also was asked download a new client.
btw i have another user tell me they've seen this very behavior too so it's not just me.
this is on hyperledger fabric project.
sorry for the title, but i didn 't know how to describe it better.
after the update to 0.62.1 i experienced a new bug when trying to leave a channel as the last owner.
maybe you can try to reproduce it with the steps noted below.
a livechat manager would like to respond to a livechat if the designated agent has not answered in time (or for whatever reason), but currently nothing happens.
currently phone numbers are supported only on `customfields`, we should also support it on `phone` field, this way being retro-compatible with konecty.
directory does not list all channels when placing rocket.chat on a monitor in portrait mode (resolution based).
since version 0.62.0, new unread livechat no longer appear in the livechat queue.
livechat notification is only visible when' unread on top' is enabled and it is not queued.
in the 0.63-develop version, i don't observe that so i'm confused.
cannot mention other users after newline in message
if the username is long and does not fit into the left panel, it overrides the status icon to the left of itself.
a specific user of phofurl is alerted to every at-mention of every user in every channel.
we've set up an incoming webhook for our jira as per phofurl we've configured it to send messages for everyone issue action in jira, but none of them are making it to the channel.
no log output is seen within the admin console logs that is related to this integration.
uploading a file from a synced private channel in slack isn't working.
no users are able to save their preferences when going to my account --> preferences.
the save button does not seem to trigger any action, and preference changes are reverted upon reloading the page.
this is experienced with both regular users and admins.
currently every single message to offline users results in separate email.
it's the same when writing message in room with offline users.
by pressing any single letter and enter several times, we can result in multiple several emails to offline user.
it is a issue when offline user have non-gmail email inbox, for instance like me at work, which cannot display all emails in one row.
i hate to say it, but there is potential of ddos-like situation for internal company emails solution, because of this correlation 1 message -> 1 email.
after upgrade from 0.59.3 to 0.62.1, rocketchat log shows the following error: phofcode the native library in `linux-x64-59` folder of fibers is not present.
running node-gyp to build it: phofcode hwoever, graceful-fs is installed in both and
i'm unable to auto start rocketchat with docker-compose on ubuntu 16.04 because it don't use upstart there are any plans to update rocketchat_app.conf and rocketchat_mongo.conf to systemd?
currently the web app manifest definition located at contains two errors as reported by google chrome devtools: 1. manifest: property 'start_url' ignored, should be same origin as document.
2. icon downloaded from the manifest was empty or corrupted
jitsi meet calls do not respect the blocked attribute of a channel
can 't connect from mobile app, from intenet
teams can invite guests in order to collaborate with non-team members.
in the past, this works pretty fine.
since 0.61 guests do not see their channels in the left sidebar anymore (web app).
in mobile it works as expected.
single sign-on users cannot access a team, if = true`.
if users try to access the team, they get an error message.
however, the error message is not localized.
opening merge request in gitlab displays html code in rocket.chat.
trying to delete a user from rocket it throws this error exception while invoking method 'deleteuser' mongoerror: '$pull' is empty.
you must specify a field like so: {$mod: {<field>: ...}} at at toerror at at _combinedtickcallback
it is not possible to download files from "files list" of the channel.
this is valid for win-client only using web-browser as a client or apple-mobile-app - there are no such problem
directory view does not scroll nor does it have visible scrollbar in firefox 58.0.2. scrolling and scrollbar works on chrome and firefox esr 52.6.
after installation of rocket.chat 0.62.0 on centos 6 the installation failed to run.
this is due to the 'sharp ' module requiring a higher version of glibc than i have installed (required glibc 2.14 - installed glibc 2.12)
this issue is about two things in our markdown parsing: 1. it adds a new line to the markdown processed html; 2. it renders the images of thelinks that are inside of the code block; screen shot at 10 00 16 phofimage
if you resize the window, at some point the "create new channel" ui disappears below the sidebar.
i think the width of sidebar is not taken into account, as at some point disappearance of sidebar (in favour of "the burger menu") still triggers.
see gif below for further details.
this happens on firefox 58.0.2 as well as chromium
the personal option "sidebar channel list mode" is missing in 0.62.0 - no more unread room mode
the permission "delete private channels[delete-p]" seemed to be originally intended to allow private rooms to be deleted by their owners.
changing this no longer seems to have any effect, due the template having "candeleteroom" button commented out completely possibly due commit: phofurl
we should not provide auto-fill values when editing another's user profile.
screen shot at 16 02 05 phofimage
the message is displaying both unicode & emojione emoji image.
screen shot at 15 53 10 phofimage
password reset url is going to the login page.
removing custom oauth record isn't working on a freshly deployed rocket chat.
issue wasn't happening with 0.59 if i'm not mistaken
phofcode i just downloaded and installed 2.10.5, but i get this error when trying to run rocketchat: phofcode
when using stream-room-messages i get some response but the actual id is "id"
the user handling with active directory accounts works not as exepected.
if a user was disabled in or removed from the active directory, he can still log on to rocket.chat.
a (manual) ldap sync does not change anything.
a password change of an active directory user results in two available logins.
the user can log on to rocket.chat with the current and the last password.
if the was disabled in active directory he can still log on with his last password (the one before password change), but current one does not work anymore.
email settings are set and tested.
can send test email, can send messages by email reset password doesn't work.
typing registered email error is: **_cant send email all recipients were rejected_** typing dummy not existing email message is: **_if this is registered we'll send instructions..._**
i currently try to write a small shell "library" to send messages to rocket.chat instead of e-mails, however i am unable to list all existing channels on the server with a new bot user i created.
i did not find solution tls/ssl connection between the rocket.chat and mongodb.
mongodb working with ssl, but how can i create ssl connection with the rocket.chat?
the bad words filter seems to now be triggering on partial matches - eg it will now filter out the word 'hello', presumably because it includes the word 'hell'.
which i don't consider to be a bad word any way, but whatevs ....
whenever i try to leave a room/channel a small red overlay is popping up in the upper red corner saying "400".
so i need to remove myself from the channel.
here is the log output: phofcode
i have given the `[manage-emoji]` permission to normal users.
this lead to them having an "administration" menu with only one option: to add custom emojis.
with the new discovery menu, this option is not contained in the status menu and it is not available as extended options in the menu ("three-dots menu" - which isn 't even present, only add channel [+]).
so currently it is not possible to access custom emoji interface from normal menu despite having respective privileges.
admins / managers are able to send invitation mails.
currently this is just possible for full admins.
users who have the permission `bulk register user` are not able to do so.
changing values on mongodb doesn't update information on rocket.chat
livechat agents can forward conversations to other livechat agents.
this could lead to two implications on the customer side: 1. customer will be notified about the forwarding.
the customer will get an approriate message 2. customer will not be notified about the forwarding and think she/he is still talking with the same person currently, notification (1) is pretty ugly and (2) is not possible.
this hampers adoption of feature.
i 'm setup ldap sync between ad user and rocket.chat, but password i need to add manually, after sync.
password in ldap saved in field "description".
how can i sync password automatically when sycn with ad?
room counters aren 't displayed in the new sidebar when using the activity-based sorting.
they are displayed just fine when sorting in alphabetical order.
i 'm on a completely fresh installation of rocket.chat.
i 've seen this behavior in chome 64, firefox 58 and rocket.chat electron 2.10.5.
on starting up, rocket.chat throws an exception right after it says "checking for version updates".
since there is a 404 involved and given that context, i would assume, that you implemented some kind of version check to show something like "your version of rocket.chat is outdated!
!11", but the file on the rocket.chat infrastructure that provides the current version is not yet deployed.
we would like to be able to select which roles are displayed when we set "display roles" to true in the user interface section of the layout settings.
this way, we are in control of which set of roles are displayed, without disclosing or advertising admins, moderators, owners and other default and needed user roles.
if you `/invite` someone to a livechat session, if that person is not a livechat agent or livechat manager, it will not see anything.
but it he is, it will see a link to the room but will be able to open it.
searching for `b` (or other chars or also combinations) returns results that do not contain the search query (at least not in the channel/username).
this may have been the case in earlier versions - i haven't checked whether this was introduced in 0.62.0-rc.0.
in the past we used to be able to click on our profile image in the top to change our status, as of the new design we no longer can.
when using the cordova app it is not possible to do reactions on a message, this bug was introduced around 0.59 maybe earlier.
easiest way to replicate it is to download the cordova app and try do a reaction on phofurl have tested against 0.59 - 0.61.1 its seems like the event is not pushed to the server .
the emoji selector pops up but nothing happens when you click on an emoji.
e-mails are viewed in comma seperated numbers.
i have for example 2 e-mails attached to my accounts, sync'ed from ldap: image phofimage when i overwrite my e-mail to be readable, on the next background sync it just becomes numbers again.
seems to be stored in binary or so.
ldap is correct and shows the mails in plain text.
slack files fail to import into rocket.chat.
i have re-created the rocket.chat container with the default file size specified in admin | file upload, as well as both 20mb and 20gb to further isolate, but all attempts fail to import any files from slack.
if you remove an user from a channel, the channel user list is not refreshed.
the list still shows the removed user.
as a new user, with "view-history" permissions but without preview-c-room permissions, you aren 't able to see channels history once you join a new channel.
this behavior doesn 't happen when you have preview-c-room permissions enabled.
the thing is sometimes you create channels with password but they are visible even if haven 't joined if enable preview-c-room.
our agents are not getting notified when there is a new live chat.
no sound plays which is resting in livechats not being answered.
i've got management threatening to rip out our whole rocket.chat deployment because of this one issue.
over the past while we've had over 200 livechats fo unanswered because our agents get no notification that there is a new live chat that has entered the queue i've looked at the code and can't figure out where the notification code would go so that this happens.
this issue makes livechat unusable in a professional environment as there's no way to know when a customer has sent message or there is chat waiting.
the customers get notification when agent sends them message but not other way around.
hoping someone can point me in right direction as our executive team says i have 5 days to fix this or they are moving business to microsoft teams
when building a markdown link that includes a code block in it (`like this`) it will not render correctly on desktop or in web view.
when i start a chat from messenger, it shows as "wouter os" instead of "wouter van os".
facebook and messenger are both configured correctly.
for some channels no notifications are send out, which is for a while now.
when i force the notification preferences to always send notifications for that specific channel, it works.
also notifications for private messages and (sometimes) livechat sessions does work.
channels using the default settings, don't work.
the "jump to recent messages" link doesn 't go away after you click it.
after clicking "jump to first unread", i can 't scroll down to the most recent mesages.
since 0.61, the last message of a channel is displayed in the channel list (if property `store_last_message = true`).
but if the last message is a (custom) emoji, this looks a bit weird.
ps e: work meteor [[[[[ ~ e work ocketchat rocket.chat ]]]]] => started proxy.
=> meteor 1.6.1 is available.
update this project with 'meteor update '.
unable to resolve some modules: "underscore" in (web.browser) "moment" in (web.browser) "underscore.string" in (web.browser) "toastr" in (web.browser) "highlight.js" if you notice problems related to these missing modules, consider running: meteor npm install --save underscore moment underscore.string toastr highlight.js unable to resolve some modules: (os.windows.x86_64) "underscore.string" (os.windows.x86_64) if you notice problems related to these missing modules, consider running: meteor npm install --save babel-runtime underscore.string => errors prevented startup: while minifying app stylesheet: cannot find module 'postcss-import ' at makemissingerror at require at at array.foreach (<anonymous>) getpostcssplugins css.map.file array.map (<anonymous>) mergecss your application has errors.
changing my email address should automatically send me a a verification email.
as a result, i need to click the 'resend verification email ' button.
there is currently a bug that makes that resend button not work: for this see #7577 <img width="172" alt="resend" src=" phofurl
users are able to change their email address in their profile (if activated).
when editing, the new email address is not verified based on **this is a potential security issue:** imagine an user registers with a compliant email address (domain is specified in then changes the email address to a non-compliant one.
afterwards the user is able to register with the compliant another account.
the user then again able to change address, and can register a third account based on compliant address.....and so on.
by this an user able register an unlimited amount of accounts that have not compliant address.
adding new rooms is quite simple, but if i want to have a room name with capital letters inside, thats not possible.
but thats not a feature, because as admin i can edit room preferences and there i can use capital letters.
new user joins the server and sends admin a direct message, but user and message is nowhere to be found.
when pressing the leave button in the right info panel, an user gets an `400` error message.
the user is not able to leave the room.
leaving by using the channel context menu in left channel list works.
as it says in title, ldap auth not possible if username/login contents an underscore symbol (_).
if i understood correctly, underscore symbol is prohibited in login form.
in our organization we use lastname_firstname template as ad username (samaccountname).
i'm getting an error when we try to close livechat room (client side)
we have lost 3-days database history trying to load more users from ldap (that 's not the problem treated in this issue).
after that, channels created on that period of time cannot be loaded ("loading messages..." always on screen) or left (they appear again when reopening the app) on client apps, unless you logout.
i have enter my email id in live chat.
after chat end it prompting for email id to send mail, i have already already give at registration.
how can i use same.
is there setting in administration for same ?
or i need to do some coding.
when uploading/sharing a file without a file extension, the file is successfully uploaded, but results in a "404 not found" error page.
when adding custom emojis of varying widths/heights the image is cropped in the message pain as well as selection.
cannot change own password by rest api without permission:
i 've installed a fresh instance of rocket.chat 0.61 on ubuntu 16.04 with snapd and when i 'm in a private chat with someone, i can 't see the "call button" for start an audio or a video call anywhere (webrtc is set).
an admin is able to setup most rocket.chat settings by the api, e.g.
setting up the colors (layout -> colors).
in previous versions this worked pretty fine.
since 0.59 setting colors by the api does not work anymore.
image phofimage if you select a text in the chat text area (where you write messages) and want to mark it as inline code, it is not taken into account, whether the text that is selected is single-line or multi-line.
it only works as expected for single-line text.
unfortunately our usernames have the form `user@company.com` which causes several issues within rc.
for example if users are getting mentioned via `@user@company.com` then the username won 't be resolved to the user 's full name even though we 've enabled that feature.
i am using the google cloud storage option and was looking to set the expiration field manually.
unfortunately, the setting doesn 't seem to be an option.
i decided to check out the code to see if it 's set hardcoded and maybe just change it manually and put in this ticket.
however, i 've discovered that it is being set, but using expiration date used in in code below.
phofcode phofurl the good news is i can set it without modifying source code.
the bad news is it 's not correct.
notification about new message isn't human readable if it containes quote inside.
no way for quote and resend message from the bot.
code block is not parsing correctly
feature request for administration ability.
there is a need for the administration to be able to add users to both public channels and private groups.
this can be through the admin section.
i would like to always see the channel member list when entering or changing between channels.
the web application currently remembers whether the right panel is open or not, and maintains the last viewed option (information, search, members...), even on a per channel basis!
that 's cool, but after refreshing the browser we lose that.
it would be nice to have **an option to always keep panel visible** on a desired option (member list on my case).
i 'd prefer a global option, i don 't need it to be per channel.
moreover, member list always opens showing only connected users, while i 'd prefer see all of them instead.
but do what you do think it 's more useful, of course.
regarding direct messages, i also prefer see user information, including its picture.
a real name is missing in email header `to:` which could result in a higher spam rating e.g.
since name the email header `from:` contains the user's real name in offline notification emails, people start to answer those emails with their email client.
but those emails are sent to the global `from email` set in `user realname <globalfrom@domain.tld>`
new user here - first issue report, so please excuse me if i've not provided enough info.
we're evaluating rocket.chat in our organisation.
so i have set up rocket.chat using docker on windows 2016 server.
following the documentation, i've used iis as a reverse proxy to proxy incoming requests for phofurl to phofurl (my.rocketchat.url is for the purposes of this example, the real config is actually a valid domain).
this works fine, but then i came to setup saml.
my settings (altered to prevent disclosing actual server names): custom provider: myidp custom entry point: phofurl idp slo redirect url: phofurl custom issuer: (then valid certs) when i was testing the process locally, using saml login worked fine.
however, if i access rocket.chat externally (i.e from outside server, so via reverse proxy), saml is not working.
when trace what is going on in browser, this happening: 1. popup window opens with (where xxxyyyzzz an id) - so that looks ok 2. redirects the first url seems be fine... but redirect it generates in step 2 using wrong domain.
rather than using www.myidp.net, it's instead domain of rocket.chat server (my.rocketchat.url).
hence of course, it doesn't work.
i'm not sure where issue lies (our config or iis?
), but would welcome any input, as we'd really like test this system out see if it will work for us.
highlight: text entry box label indicates the use of comma separator instead of `<enter>`
email header `from:` is wrong fromatted in offline email notifications
a html formatted `direct reply` email is not displayed in rocket.chat.
the message is empty; the html content is eaten up.
this is a kind of bizarre, because the offline email itself created in html format and a lot of users create emails in html format by default.
if those emails are eaten up, the feature almost useless.
attachments are not support, as documented on phofurl "only text messages will be supported, attachments are not supported yet.".
but to my mind this should not end up, in discarding the whole content of an email.
currently - to my mind - `direct reply` feature completely buggy and a high risk loosing messages as one can 't handle what format or way users reply to messages.
i highly recommend to mark it as ** experimental ** .
direct reply: ports for imap/pop3 are limited/restricted to 110, 995, 143, 993 in some imap/pop3 setups ports for pop3, pop3s or imap, imaps are different from standards ports.
therefor it would make sense not to restrict the port selection.
in some imap/pop3 setups the login username is different from the account's email address or is not a fqdn email address.
therefore it would make sense to seperate the config field `direct reply/username` from the actual `reply-to` email address in headers.
creating a new channel that is public but write protected leads to owner is muted and nothing that is written afterwards is visible
this is a very minor issue, but i've noticed it several times now, and the rocket.chat behavior seems to deviate from several other markdown interpreters i've tested.
the problem is that rocket.chat won't display the following markdown code correctly: see steps to reproduce below.
i've tried several other markdown interpreters i've found online, and they all display it correctly: * phofurl * phofurl * phofurl * phofurl
when i upload a file using rocket chat app on ios, it prompts **file size is too small (min = 1) file-too-small]**.
it has no problem on desktop application.
collaborative/read-only toggle in room info is reversed.
1. custom user fields are missing since i 've upgraded to the latest version.
"view all members" margin doesn 't look right to me.
there 's no space between the button and the outer frame.
every electron client receives a certificate error prompt asking if the client trusts a certificate from cn_dnsbl.
(screenshots below) image phofimage image phofimage on our pfsense we have enabled dnsbl to block any ad 's, malware connections, etc.
since we have made this change this behavior has been occurring only on our electron clients.
any clients connecting via web browser have not been experiencing any issues.
dnsbl routes any of these hosts to a sinkhole lan ip address, and never reach the outside wan.
dnsbl automatically creates a self-signed ssl certificate for any https connections.
as such, we have enabled the option "allow invalid self-signed certs" under "general" in the administration settings, we did this using electron app.
image phofimage however these prompts are still appearing.
this seems to be a pretty massive security issue for iframe integrations.
passing no token to the postmessage 'login-with-token' event logs me in as an arbitrary user.
it is possible to edit otr messages after otr was ended.
in this case the message will be sent in clear text.
when in a jitsi call, the call ends when the user clicks on another chat.
i'm running rocketchat connecting to an ad server for ldap authentication.
i need to change the usermap, as our human readable name is stored in the ldap field displayname, not cn.
if i go to: administration -> ldap -> sync/import the user data field map is grayed out other than this issue.
ldap authentication is working properly.
sometimes when i search for a string and i click on the "jump to message" button, the channel view won 't jump the message i 'm interested in, but instead repeatedly jumps through the channel history until it finally arrives at most recent message in that channel.
from my personal experience, this occurs rather often, which makes to search pretty annoying to use.
i 've recorded a video that illustrates problem, but as i am unfortunately only able to reproduce this issue with out production channels, and i can 't upload it because it contains confidential messages.
executing background sync of ldap data imported hundreds of new users even though "background sync import new users" is set to false.
currently, if someone sends you an attachment, you have to click on the download icon.
it would be a better user experience if you could just click in the blue link as well as the download button, to download the attachment.
i like how images work in that clicking link shows a preview, but it feels to me as though attachment behavior could be improved as per above.
after update from 0.58.4 to 0.60.4 there is an error during connecting to chat.
there is no way to connect.
probably it is a problem.
our chat lives on https:// when i make a remark about phofurl chat will show a short preview blurb about that site.
the icon it pics for that it tries to pick from some <meta... line in the header of the html of that site - and those are http:// instead of https:// which leaves me with a "mixed content" browser warning.
when starting rocketchat menu is shown but rest of screen is white?
when assigning roles to a user, only some of them are visible in the messages list as the user writes a message.
we have an custom oauth-server.
while we try to login in the client via this oauth-server, the client opens a new browser-tab, so we can't use the client for rocketchat * operating system: windows 10 x64
i 've tried and cant get it working.
i 've seen a few others ask about it but have not seen the solution: phofcode in speaking with aaron ogle in the #support room, he suggested i open an issue.
i have attempted both name and id and neither one set the department as expected.
when reading settings of the type `code: 'text/html'` line breaks are replaced with `<br>`-tags.
this leads to empty spaces and incorrect html in e-mails.
the setting `invitation_html` uses a field of the type `code: 'text/html'`.
when this setting is read line breaks are replaced by `<br>`-tags.
this leads to unwanted line breaks within the e-mail body.
for this reason it is currently not possible to create mails embedding images as an attachment (content-type: multipart/related).
our ldap server doesn't contain any e-mail information and we're using sso via ldap for login.
hence when a user tries to login for the first time a new account gets created within rc which doesn't have any e-mail information.
as we're no admins of the ldap server we can't just add the missing e-mail information there.
now the missing e-mail information seems to cause various issues within rc.
the profile page can't be loaded and also my profile > settings and security settings can't be changed.
for debugging purposes we've manually added information to one of our users and then profile page was accessible again.
furthermore our usernames have form `ntuser@company.com` (which is not our actual address...) but profile page is complaining about `@` symbol in username greys out save button so no changes can be made to profile.
is there a way strip away `@company.com` suffix from rc username when doing sso via ldap?
the authentication with rocket chat users not works.
the ldap connection works fine, and the authentication of the user seems too.
but the result it's always: user not found or incorrect password what is wrong in my configuration?
web interface doesn 't work in ie 11 in intranet sites compatibility view, which is default internet explorer 11 behavior for intranet sites.
if someone uses `@here` while you are offline or away.. it shows as a mention.
it doesn't alert me in anyway(which is fantastic) but... it still shows as a mention which is not accurate.
because i was not ** here ** at time of message so i shouldnt even get a mention.
if i delete a user, the messages are removed, but this isn't reflected until clients reload the channel(s).
when entering text over a certain number of lines, the scroll bar appears and continuously makes all the text shift around when each character is typed.
running on arch linux, ff 57.0.3, using i3wm for window management.
i have my monitor in portrait mode, and when the channel topic is sufficiently wide, the chat window expands off the right-hand side of the screen.
blocking channel topic element (using ublock origin) fixes issue.
links are been displayed as links on menu when last messages is enable.
version 0.60 does not support centos as an operating system because of libstdc++ version requirement.
maybe rhel isn't supported either.
qualia:reval allows you to change front end while bypassing meteor reloads
some ascii emoticons in message are not correctly replaced with emoji variant.
i do have enabled emojis in preferences.
typing multi-line message after certain number of lines message box (textarea) does not scroll to last line and manual scroll-down is required.
if you have store last message turned on and then delete last message... that message still is on the channel.
i cant change the sidebar font color.
i seem to be unable to jump to a linked message if i view a channel anonymously.
on a private rocketchat instance that i use, i can't type the letter , which on my custom windows 10 us-international keyboard layout is accessible via altgr-p. instead, the cursor jumps to the search bar in the upper left part of site (which is labeled ctrl-k, and ctrl-k actually does same).
i can type a capital with altgr-shift-p. (i attempted to type an into message box on bottom part of site.)
i also can't type an into any other text fields, including username and password fields when not logged in.
the bug occurs in both firefox (57.0.3, 64-bit) and chrome (version official build, 64-bit).
connections to the ldap server using tls or starttls don 't work.
supercomper is required for fluid operation of the web chat interface on firefox.
on our current setup, rocket.chat is no longer delivering push messages to the mobile devices.
reason is not certain but i believe it to be linked with the amount of notifications sent, we must have passed the allowed quota.
we have a onesignal api account for our apps and we would like to use it as a notification gateway.
the push notification gateway is unclear as to whether onesignal would serve as a push gateway out of the box or whether we would need develop a proxy gateway.
deleted users are still listed as "favorite" rooms perhaps related to #9157
with accounts > registration > manually approve new users = true, new users signing up using a custom oauth providers are thrown back to the login screen.
they are not given any instructions or other indication that that login will not be available before the account is activated by an administrator.
to the user, it looks like a glitch.
i use ldap without pagination (by setting ldapp_search_page_size to 0), because my ldap server is not able to provide pragination.
when i use the ldap sync feature (by hand or by cronjob), 500 users are imported at maximum.
i guess this is because of the missing pagination feature, but my ldap sends all ~800 users.
can you increase the default value or make it configurable?
using ubuntu 16.04 and the snap setup, when the snaps refresh the mongo server starts up fine but the rocket.chat server terminates (probably too soon) due to unreachable mongodb
facebook messenger live chat integration loads indefinitely after enabling it; the '3 dots' loading animation appears in the 'livechat' panel.
can't disable or reload_pages, even after a server restart.
disabling facebook in administration's livechat area results in an 'enable' button in livechat and the loading stopping, however clicking 'enable' does nothing, just like clicking 'disable' and 'reload_pages' did nothing.
removing user from existing channel is not possible.
klicking on "userslist" and choosing user starts a converstation instead off showing menu with options.
deleting a user and recreating it afterwards results in unexpected behavior.
direct chats with this user cannot be created if they previously existed.
might be not a big deal as this should never happen productively.
we encountered the errors while testing.
this has happened before updating to the current release candidate as well and should have nothing to do with recent changes.
in microsoft edge, if i click the plus symbol and try to attach a file, the menu opens up for me to select a file, but once i choose a file and try to open it, nothing happens.
the usual screen that pops up that says "upload file?"
and allows me to send the file does not come up.
the process ends after clicking open.
this happens with any type of file.
i tried the same with firefox and chrome they both worked, but edge will not allow me continue next step.
using windows 10 version 1709 microsoft edge microsoft edgehtml
in safari mobile when i tap on the new icon to attach a file, nothing happens.
it used to be a paperclip, but was changed to a monitor icon (which does not seem as intuitive to me).
all 3 icons the left of it work, but tapping the fourth icon does nothing.
i've been unable upload anything from mobile because of this.
i'm using iphone 6 plus, ios 11.2.1.
in safari mobile when i go to type a message in the text box, the cursor floats one line above where the text should be.
this has happened for about a month now maybe.
it is confusing because it's difficult to know what line the text is going to appear on.
something else i've noticed is that sometimes when editing a message and moving cursor around, cursor will somehow end up more than one line above where it should be, sometimes two or three lines, which makes it impossible to edit messages.
picture included in link below... phofurl i'm using iphone 6 plus, ios 11.2.1.
in safari mobile when i tap and hold on a message to bring up the options menu, i can't delete messages as the safari menu bar at the bottom of the screen blocks delete button from view.
i'm unable to moderate my chat when in mobile now because of this.
i don't see a way to dismiss safari menu either.
picture included in link below... phofurl i'm using iphone 6 plus, ios 11.2.1.
selecting message notification does not open that message.
right now if you create a channel and make that channel default, it only takes effect going forward for all new users.
but does not make default for any of the existing users.
this should at least be an option
push notifications are not working with rocket.chat 0.60.0-rc.3
currently, all messages are public to all users who can view the channel.
when implementing a bot, this bot has to be able to interact with a particular user inside the channel: it needs to e. g. ask him provide further information or guide him through a process.
all this interaction (which happens only between the bot and one user) needs be hidden from other user's eyes in order make the channel readable.
this is particularly important with respect rocket.chat apps (#6890) which might also want provide interaction with one user.
i am seeing the same problem that was originally described in #6926 using rocketchat 0.59.3. we are running three rocketchat instances and have correctly configured `instance_ip` and `port` to allow for broadcast.
rocketchat phofimage broadcast phofimage we have configured rocketchat using the following environment variables: phofcode
when accessing a url phofurl , user gets redirected to phofurl
renaming a user doesn't get reflected properly in rocketchat.models.rooms
descenders of glyphs are cut off in the sidebar where the last message is shown below the channel name.
the lower half of the letter "g" is cut off in name diego.
hi folks, something that happened to me a few times: i clicked on a channel name and nothing supposedly happens.
the :hover area is bigger than the actual :link area which leads to me sometimes clicking in the :hover area but nothings happens because i didn't actually click the link.
currently, when a guest user tries to end the chat, livechat:closebyvisitor closes the room only.
in shared / public computers, this results in a security risk, since the initial guest user is not destroyed (or logged out), the new comer impersonates first user and can open a new session/room with initial user 's registration information.
we would need a way to "logout" guest user and reload registration form.
when setting up a whitelist of domains, its impossible as an admin to bypass this restriction when adding new users manually.
(bombs out with domain not allowed errors)
removing admin role to other users without the right and create a new admin without right.
on develop branch channel creation fails with "no private group with name "test3" was found!"
for admin with login e.g.
"admin" after someone registers named after him e.g.
the year 's end is approaching and we as consumers of and contributors to rocket.chat are thinking where we 'll be heading to in 2018. our setting: we 're a small group inside a big company providing rocket.chat on premise as alternative to saas-services.
we currently serve about 2000 users in about 30 clients - and it will hopefully be much more soon.
we act as kind-of reseller and get very immediate feedback from our colleagues - this sets the stage.
it seems that the s3 file storage functionality requires an access key and secret access key, although it's possible that i am doing something wrong given that the ui didn't seem to complain when i did not provide these values.
if you have a very small browser window or a small screen and you try to add a new channel, then the situation might arise, where you want to create the "create" button but cannot reach it, because you cannot scroll down.
might also be present for other dialogues - haven 't tested that.
i also haven 't tested, whether this is also present in earlier versions or whether this has been introduced only with 0.60.0-rc.0.
#8915 adds an "mark as read" option to the room list, is it possible to add an "mark as unread" option to the room list?
usernames with umlauts are not correct while been created via ldap sync.
i am using firefox 57.0.2 (64-bit) on arch linux.
i am aware of #9077 but i'm running 0.60.0-rc.0 and get no error in browser console nor server log.
also, this happens with firefox only.
chromium can create channels and groups.
problem with uploading any multibyte filename or japanese character filename.
using aws s3 for storage type.
for english character filename the upload is always successful, we are using this for almost a year.
but recently we need to upload this japanese character filename due to a client project.
this is were we notice this problem
running rocket.chat on safari (version 5.1.7) not loading.
hitting phofurl not opening rocket.chat
when solo owner leaves the group, group name removed from ui on warning prompt.
when i try to create new public channel, it is failed and shows this error message on consoel.
i was just wondering if anyone could help me with this?
it 's quite urgent and i 'm not really sure how to troubleshoot further.
it seems the recommended docker-compose file has been changed quite a bit phofhyperlink since i started so i wondered if there is some changes i should be incorporating into my own one.
i 'm currently using nginx to server the application via reverse proxy.
today the rest apis are returning with spaces and line-breakers.
we could remove everything and reduce the payload size with that.
api is returning error, but works for other rooms.
new ** sendmessage ** api is returning a ** developerwarning ** property that 's not related.
on chrome, firefox, and desktop client when you reply your cursor is after the reply.
on safari the cursor shows up at the beginning resulting in messages like this: image phofimage
image phofimage they say a picture is worth a thousand words
occasionally you'll reload and you'll just get a white screen.
some times it'll take several reloads before it loads the page.
boils down to this: phofcode taking a look at: phofurl this makes sense.
basically onrendered in this template is called before `chatmessages` has even been defined or populated.
some times data loading is fast enough that this doesn't happen.
but when there is a slight delay the data isn't there in time.
using the `port` environment variable for default rocket.chat port assignment is not a good idea.
it can either lead to unexpected behavior or unintentional automation in certain scenarios such as deployment of rocket.chat docker container using an orchestration engine.
i faced one issue when using dc/os for deployment of a hybrid container that contains rocket.chat and another service being run through supervisor phofhyperlink .
we try to use the hash sign as a trigger.
currently we work around this by using `!#` as the trigger which is not that convenient.
we are aware, that this would also trigger when mentioning channel names, but we would filter those out by an regex.
we are only interessted in numerical issue numbers.
when someone shares a url with emoji in it, it is not clickable.
you can still copy and paste the emoji into the url bar of a browser to access it.
using both web interface and desktop app.
if you open a tab tab on a medium screen size it does not have maximum height.
allow read and allow write as anonymous turned on.
you click sign in to start talking or talk as anonymous image phofimage clicking the button does nothing.
as a 3rd-party site owner i want to login rocketchat user to integrated live chat pop-up.
escaped parentheses in backticks break horribly.
when using jitsi meet for conference calls in rocket chat, it does not work unless it is used in a new window.
when the video chat is embedded in the rocket chat page, jitsi opens with two errors: "failed to access your microphone" and "failed to access your camera".
jitsi is open, but with no video or audio.
furthermore, there is no way for me to grant the page permissions to use camera or microphone (tested in chrome and firefox).
however, if i choose the admin option have jitsi open a new window, popup requests permissions for and it works fine.
how do i use embedded page?
ugly scrollbar in rooms list on firefox 57.0
we are trying to authenticate users of on-prem hosted rocketchat via google g suite sso and for that, we have successfully setup saml configuration in both idp(saml apps under g suite) and rocketchat app(under saml in * administration * control panel).
we did all the required setup and the setup is working fine through browser.
<img width="1034" alt="saml_login_cf" src=" phofurl
i am attempting to configure smtp settings.
i believe i have the correct settings, however, i get an error when clicking "send a test mail to my user".
the error message says, "error error trying to send email: in the log, there is no mention of an error, only sending test email to email@example.com"
we 've been investigating an issue with websocket on ios when user tries to authenticate with google+.
sometimes the connection is closed from websocket just after we send the login method and sometimes it responds with token information.
this is really annoying because we don 't know what 's going on, server suddenly disconnects with no reason.
the disconnection closes this code and message: > websocket code=1000 "normal closure" refer to docs: phofurl
using 0.59.3 with ldap authentication enabled, using "page size" causes all ldap based logins to fail with: phofcode
after leaving the video call session without exiting the full screen mode, i can not reach the input field for chat and right bar si missing.
when i resize the window input field can be seen but still unreachable.
i am using rocketchat win 10 application.
feature request: when clicking on mobile or desktop notifications, it would be nice if rocket.chat automatically switched to the user/channel that prompted the notification.
when using the android rocket.chat app (version 2.5, not rocket.chat+) or mac client (rocket.chat+ version 2.9.0), clicking on a notification opens rocket.chat, but does not switch to the user/channel that notification was from.
note: it works if you have rocket.chat open in chrome and you click on a chrome notification.
messages are not refreshed correctly if your device went offline and come back online.
this is tested on ios 10.3.3 browser.
i've done my own build of v0.59.3
im history api not working (both for username and roomid)
unable to list all existing channels (without performing a partial search of the individual channel name).
i am trying to setup authentication on the mongodb server.
i am having a issue very similar to phofurl but i am not using the snap.
i can 't write to one specific user in our team.
others can write to him, and when he is sending me an message, the push notification in bottom right pops, but if im not fast enaugh and want to check our history, i only get "room could not be found" and "there was no user found with the name "name of the user" image phofimage i have no problems with others users.
i reinstalled the rocketchat allready two times (without and with deleting all local data) important!
before installing rocketchat, he tried a rocketchat plugin for pidgin.
was triing tocomunicate with him, while he was testin gthis plugin.
i assume, something was flaged wrong while that test, now am unable to find him, others can write him, his pushup messages comes true, but we have no chat channel/history .... same in webclient.
posting a code block like phofcode it will be turned int phofcode this bug makes it impossible to post things where such character combinations are present (like shell scripts).
i 've deployed rocket chat behind a apache reverse proxy in a **server subfolder**, as per the instructions given in the docs.
the "out of the box" deployment seems to work as a charm, i can use the application with no problems whatsoever.
but i need sso access via cas and so i configured it in admin menu.
sadly, it doesn 't work, rocket chat does display popup with cas login screen but, after logging in with cas, popup just shows a blank page and sign on rocket chat never happens.
as of the new ui, counters for each room type are added to the navigation bar.
those counters show the total number of rooms per type subscribed to.
* version of rocket.chat server: 0.59.3 counter intuitive phofimage
we are storing several versions of avatars in our ldap.
ldapuser.thumbnailphoto and ldapuser.jpegphoto as you can see in this gist: phofurl at this moment the thumbnail is preferred: `+ var avatar = || ` i would like to have an option within the ldap configuration page, to select the source for the ldap avatar.
if there is an existing way to set mapping right, i'am interested to know.
* version of rocket.chat server: 0.59.3.
* operating system: ubuntu 16.04 * deployment snap + tar on different instances * number of running instances: 2
i 'm trying to use gifrocket in rocketchat but it doesn 't work.
i 'm sure the problem comes from rocket.
chat that can 't reach phofurl because we use a proxy.
i have configured the proxy in ubuntu (/etc/environment).
where do i need to configure this proxy to make it work?
after sending a message using the send button and reloading the page or restarting the browser the last sent message reappears in message input.
this only happens on chrome, including chromium and mobile browsers.
this only happens when using send button, not when pressing enter.
hey guys, since we update to 0.59.3 the save and delete buttons for channel and private groups disappeared.
i have installed rocket.chat server to an ubuntu 16.04 server via snap, and i went over administration to add my own smtp server from ( postmarkapp.com ).
once i did test smtp, i 've got the smtp test email just fine, i have set the "from" correctly, and i found the following bug that the verificaiton email function doesnt use "from" email from smtp settings.
and it was getting an error, some smtp providers are high strict to use specific "sender emails to "from"".
the text spacing in the field "enter user names you want to invite" in the create a new room screen is wrong.
and the text color is incorrect chosen.
the user who registers first is becoming rocket.chat admin.
the user is thereby able to use the rocket.chat api to configure the system.
hey guys, it seems like all integrations which have been saved after the url phofurl throws a 404 error are broken with the error.
even tho i only want to fire a console.log("").
i have an integration coming in from a webhook from gitlab.
the gitlab json body that gitlab creates contains a field called "user-avatar" and is mapped to the local location of the gitlab users avatar.
when this field is present in the json string rocketchat will not display the avatar of user i set up in integration.
setting "avatar url" to override default avatar used also does nothing and continues to ignore rocketchat user 's avatar in integration messages.
the json string produced by gitlab contains information like this: ` {"user_name": "joe user", "user_username": "joeuser", "user_email": "joeuser@joe.user.com", "user_avatar": if post is sent without "user-avatar" field, correct avatar shows as expected.
offline email notifications are disabled in account preferences, but rocket.chat sends emails when user is offline.
this problem appeared after upgrade to version 0.59.3. in 0.58.2 it worked normally.
when any user repeatedly copies and pastes the @here command it will completely lock up the chat room causing extreme lag and eventual failure.
since the update to 0.59.2, rocketchat is no longer querying ldap for user information.
newly created users in ad are not recognized by the system and users who change their passwords have to use their old password to access rocketchat.
i have tried changing the background sync options and manually running a sync, but it is not doing anything.
i am able to run ldap-utils on the server and successfully query ldap using same connection ldap that is configured in rocketchat.
when a user see a static text page (home, terms of services or pricavy policy), he is unable to select text.
this is not a good a good thing because he might want to select, copy and paste parts of it to ask questions.
as those are like texts of law or tutorials, users might want to be able keep some parts for their personal uses.
i checked the code of the userstyping() methods in this file shows : phofcode this code means displaying `username is typing...` when some users is typing above the text box.
it displays `username1 is typing` when a person is typing and it also displays `username1, username2 and username3 are typing` when 3 persons typing.
however, i'm wondering if this code better in the case that many people typing because this code use pop() methods only 1 time.
this maybe indicate that only the name of last person change to `others` therefore it caused that displaying like `username1, username2, ..., username99 and others are typing` when many people like a hundreds are typing.
right side panel is not open in ie with size more than 1600 px
if i have 2 intances of rocketchat turned on, then on some random users (not all of them, only this users logged to the second) i have problems with uploading files.
upload is at veeerrry low percent, and in the end can't upload.
in logs i have: [error: filenotfound: no file with id g9av3qcqngrmylp8l found] [error: filenotfound: no file with id 4qsnpqddxdfbzfne9 found] i tried changing upload directory, upload type etc - all failed.
only turning off second instance helps.
we can not login after setting login fallback: ** false ** in ldap.
it 's ** impossible ** to choose room type and save it.
frame is to close and also save buttons disappeared.. reinstalling app and reseting css doesn 't help.
scrolling page down and searching by "tab key" for this hidden options also no luck.
* i have this issue on one of my instances.
just like on the screenshot below, option "customize theme" isn 't there in layouts.
how can i force it to install again or to display it ?
there's no easy way to get the code of the topt in plain text while configuring 2fa.
when trying to dm one other specific user, the user is unable to load the room.
there are no errors reported in the log.
it only occurs with one specific user trying to dm one other specific user, they are able to open all other dm rooms, private rooms, and channels.
the problem being once after logging in with a ddp client, messages are subscribed smoothly and are received and sent smoothly but as soon as a second user logs in using the same ddp-login module, the socket displays a response message as follows:
there is not the room name key in the /api/v1/im.list phofhyperlink rest api result.
my instance updated to 0.59.1. since then i didn't see delete button in direct message and channel(both public and private).
i have admin role also.
this is an example of an email payload: > > content-type: text/plain > quoted-printable > hello, to reset your password, simply click the link below.
content-type: text/html quoted-printable hello, to reset your password, simply click the link below.
you'll notice that the html version has `/reset-password` where as the plain text version has `/#/reset-password` `/#/reset-password` is redirected to home page, where as `/reset-password` shows page desired.
here is where email is constructed it looks like: phofurl here where url built: phofurl not sure why html and plain text version differ.
also not sure why this used to work and now does.
i can only assume this happens with all other emails sent by accounts package.
ldap sync breaks nordic characters in user's full name after authentication in 0.59.2.
turning offline email notifications off doesn't help.
when sending a message with specific content inside a code block, rocketchat replaces the content of the code block with something looking like internal state.
since upgrade to 0.59.1 (db 104) in the members list when we click on a name it takes us directly to a direct message, instead of showing their profile and being able to assign moderator/owner priveleges of a channel.
if you choose 'guest pool' as the directing option, there is no way of accepting a user.
from a screenshot seen, there is meant to be a pop up saying do you wish to take on this user - however not getting this.
installed on digital ocean - snap - ubuntu 16
image can be send but not loaded in rocketchat.
i'm using the file system for stocking files and have no any error in logs.
chat setting for offline notifications was not taken into account.
when starting a live-chat from the widget on a website, the live-chat messages are coming from the name of the agent that you are connected too i 'm also not being asked to receive a e-mail transcript of chat even though setting is turned on.
global setting to merge private groups with channels does not have effect.
after upgrading to 0.59.1 the avatar settings were merged into profile settings.
to allow avatar updates i have to allow profile changes now which i am not intend to do.
i want users to be able update their avatars while maintaining the display name given by cas or ldap.
the `more channels...` link in left navigation bar is missing
my instance automatically updated to 0.59.1. since then all users receive offline email notifications again even if they have set "offline email notifications: disabled"
convert ascii to emoji does not work when marked markdown is enabled.
in chrome clicking a link opens it in the same window.
clicking link in the preview part opens up a new tab.
in firefox both actions open up the new tab.
the hot mistakes seen by us over the years of use
uploaded an extension-less file, when trying to download it i 'm getting an error.
when clicking on a quote a seconda time the whole chat history vanishes.
if a user gets a notification from a private message by e-mail, and clicks on it, an error message appears, that the room is not available.
but it is simply not visible, as the user is not logged in.
when channel with name of 3 symbols of 0-9 a-f exists, posing link to this channel using hash (#aaa) causes an html color highlighting
colors in the layout menu reset to "transparent" not to the default rocket.chat colors.
found this after i upgraded my demo system to rc15.
i 'm trying rocket-chat and set-up an instance on heroku for this.
i was trying to enable livechat-feature.
this is also working as long as i 'm running it without the javascript (f.e.
phofurl trying to embed the javascript always results in errors due to > x-frame-options 'deny ' i also tried using nginx as proxy for this.
but this also only works partly.
here also the direct-url works, but the iframe keeps "loading" and throws these exceptions on console: > there is no route for path: /livechat > websocket connection to failed: error during websocket handshake: unexpected response code: 404
we need to have a way to link all the social accounts available in the server into user 's account.
this feature was requested from the kde guys (@ruphy and @tomaluca95).
their need is basically to let the users that are using rc already login using their own oauth system.
i need to run a reverse proxy, using a subdirectory, from nginx (not apache) i found several closed issues, but i couldn 't find tweaks for nginx that worked.
even if the server returns the user is still registered without the invalid fields.
importing a hipchat (cloud, not enterprise) export file fails.
debug shows that the hipchat rooms have not been parsed (users and messages may be ok).
a complex issue of the password recovery showing an error when it should be working and showing an error and still setting the password, but not informing the user of it.
entered message text is getting displayed in the side bar.
we're working to add support to custom fields into the native ios app and in my tests, i can't have custom fields and create a new user from the web.
on demo.rocket.chat it's not possible to open a new channel form the search results.
it always redirects back to the home/welcome screen after few seconds of trying to load the channel.
i was still able to open a new channel from a link in a conversation by clicking on the #channel link.
once you have clicked this link and channel has been opened once (not yet joined), it's then also possible open it from search results list.
the total import is 4.6k users and messages: in the window before i start the import i am able to deselect all deactivate accounts but that doesn't work... error message: phofurl then i see in the import slack window just again source file selection buut its running in the background: phofurl there is no way to stop it... it will also only be able to import users but no messages will be added.
probably because size is too big?
should add a notice of what is too much for this system to handle.
the audio preview is not playing properly when changing the notification sound.
previously, when changing the notification sound for either new room or new message a preview sound was played.
now, nothing plays and a javascript error is thrown in the chrome console: `n.play is not a function`.
it looks like the issue is in on line 220. the current code attempts to call `.play()` on a jquery object, where it should be calling it on first element of object (`$audio[0].play`, rather than `$audio.play()`).
i can confirm that notification sounds themselves still work when triggered by appropriate event (e.g.
receiving new message), so this minor issue that seems to only affect preferences screen.
renamed rocket.cat to testbot and rocket.cat still shows up in the user list image phofimage also all system messages still show up as rocket.cat
we 're starting to use the rest api to list starred & pinned messages in the native ios app and we noticed that the mapping of the fields are different from realtime api.
i was thinking that we should do same, to avoid doing workaround on clients to map same model.
i understand that some of this fields are doing this way in realtime because of meteor 's implementation, but we need follow a pattern in communication.
the fields needs have same structure in order avoid hacks & workarounds code map same model.
server errors when closing or transferring a livechat client that was not answered
after a server crash rocketchat stopped sending analytics to piwik.
instance of piwik is fine and is still receiving analytics for all other sites.
tried to deactivate, reset, change site id, in the admin panel.
any idea on what could have gone wrong ?
there is no error message on the server side.
there is one error on the browser js console though: `exception from tracker recompute function: undefined` help !
users are being logged out even when timeout is set to default (90 days).
this is happening on the most recent stable release: 0.58.3 i am using a snap on ubuntu.
i also saw other users reporting the same issue in the #support channel.
using the multi line code () adds an extra line on top of its content.
this was detected on demo.rocket.chat
when mixing markdown and katex in the same block, you can end up breaking valid katex in favor of the markdown by using backticks.
when an email for a mention the preview in ios's mail app is incorrect.
img_1822 phofimage > demo serverokaygo to message powered by rocket.chat my assumption would be there is an image / css padding there that ios isn't properly displaying.
if you have an unread in favorites as well as unread mode turned on... you see this: image phofimage i thought this one had been added.
but looking over the issues we never opened one for this.
i attempted to change the password on the profile page, but i could not change it.
if you write msg on some channel with mention his username - @user.rocket.chat.name - he will be automatically added to channel and even if he leave, you still can do this action again (and again, and again :d ) and add him anytime you want - just by mentioning his username ;d.
**on chromium + firefox:** the color of an active private message in the sidebar is just "grey".
if you hover over it with the mouse, it looks like it seems to be intended.
only in firefox: the sidebar alignment error from #8129 seems to have re-appeared.
glyphs in sidebar are visible.
also on firefox, the descenders of glyphs in sidebar (for example @ from username handle is cut off on bottom, **this time only your own username at top of sidebar**)
when a user upload a file, in any channel or direct conversation, and once uploaded you download the file, the name of the file it 's a hash a not the one defined by user or file itself.
also, in desktop app, files lost extension when you download them.
i am integrating rocket.chat to our existing web application, which has a large user base.
after successfull rocket.chat keycloak integration (sso), it was decided to inject chat to the existing application using available iframe integration since it allows sending commands for authentication and simplifies rocket.chat events handling.
the actual problem is the fact that, iframe integration breaks site navigation, i.e.
klicking browser's back button doesn't navigate to the previous page.
i wrote message with @mention and @all to test email notifications in open channel, and rocket server sent emails what i expected, but it's not included email subjects, unfortunately.
it only happens @mention and @all.
new hide/leave rooms buttons require 2 clicks to select each option instead 1. this is very annoying because you waste your time clicking if you have many conversations with different people each day.
everyone in my team will hate this so i can 't upgrade to 0.59 if this function will work like that.. please make it like in 0.58.
when using the live chat feature, i invite another agent into the conversation.
once the agent receives the invite, they are unable to join.
hovering over channel makes mentions disappear and replaced by action button before hover: image phofimage during hover: image phofimage
if you click the action button on a channel to hide or leave it enters the room.
also in case of when in collapsed the side bar disappears when you click it and you get this: image phofimage
it 's a ui/ux design problem.
with the new ui, the reaction button has been redesign.
it had been pushed away to the other side of the screen.
it is pretty hard to see because it is a small light grey icon on white , and fact that it is on right side on screen while message is on left side makes it pretty easy for user to miss it.
currently it is not possible to quote a message from an incoming webhook without attachements.
send file attachment upload from rocket.chat to slack with slackbridge, instead of only message, how it's current been done.
when using iframe login, the client code checks for presence of "token" value in the response ( phofurl ).
but the documentation at phofurl says : > or you can respond with native account token using logintoken: > phofcode > the workaround is simple - the response needs to include both properties, but it takes time to figure out what 's problem.
either code or documentation needs to be fixed.
when importing a slack room, the importer crashes when replaying reactions applied by users which are not in the channel anymore
**on chromium + firefox:** the descenders phofhyperlink in channel names are not visible in the left sidebar.
only in firefox: sidebar does not align with top menu in sidebar
i'm actually not sure if it's related to gcs, but you cannot update avatars anymore on my server.
see here: phofurl phofimage it looks like it worked for a split second, then reverts back to the old avatar.
no errors on the server or on the client.
normal file upload in channels works fine, so i doubt it's a permission issue.
when an incoming live-chat message triggers the desktop notification, the user name of the live chat client is not being displayed.
instead g1, g2, ... is shown in the notification test.
when editing a message in rocket.chat the message is not updated on the clients side.
when sending an attachment from rocket.chat to a live-chat guest, it is not transferred to the client.
when attempting to authenticate via saml using simplesamlphp as an identity provider, it is not being redirected to the correct endpoint in order to successfully login.
after upgrade from 0.58.2 to 0.59.rc.4 a couple things have happened - css has changed, but that was easily solvable to reset our colours - but the main issue is that the compression of private groups and channels no longer works.
also, the unread messages bar no longer appears.
unable to update the livechat title background color from within the administration settings menu.
the livechat title background color drop-down box is missing all options.
when using a mongo cluster with multiple secondaries, and the option: readpreference=secondary in the connection string to rocket.chat.
login especially with authentication providers like oauth / saml etc fail.
removing this option causes the login to start working again.
when trying to upload an extension-less file or special extension file (.db, .anything etc...) you get an error saying that the media type is not accepted, although the allowed files list is empty (allow all files).
it seems that 'message' input box (where message is being composed) is silently swallowing ctrl+tab keypress event which prevents switching browser tabs.
seamless login is not working via cas as i would expect.
in the scenario where the user has a valid cas session (and tgt cookie), but no rocketchat session (and is logged out), the following url takes me to the rocketchat login screen: phofurl however, if user has a valid rocketchat session, then this call works.
i would expect it to work in both cases, however it looks like rocket.chat generates and verifies some sort of unique token in service url.
this unique token only seems to get generated when a user clicks cas login button (e.g.
there have been several issues raised by people who would like to integrate rocket.chat into their sites as an iframe, but are having huge difficulties around implementing seamless login due to the complexities of the supported sso methods.
i have also been having problems trying to integrate rocket.chat with our site.
we like to use our current users, and seamlessly log in rocket chat via an iframe (automatically creating users where they have not yet been created).
i had some success (eventually) using cas, but it adds a lot more complexity our architecture (something i am really keen avoid at the moment), and ran into many small issues with oauth and saml.
i would therefore like propose a simpler, bespoke integration solution for the iframe use case: 1) the users website generates (and stores) a unique, one-time use, token, which is passed in rocket.chat as a parameter in url when loading page.
<iframesrc=" phofurl 2) rocket.chat receives this request, takes usertoken parameter, and then calls server-to-server api validate this token e.g.
post /validateusertoken { usertoken: clientid: rocketchat secret: mypassword } 3) if key is valid associated with user, api then responds with users details: e.g.
{ fullname: bobby blue, username: ob, rooms: [efaultroom, obsroom] } 4) takes this response, creates user if they dont yet exist, logs them in.
will also update full name rooms of user if they already exist.
uploading a jpg file (probably other files too) with a -%20.jpg at the end of the filename will result in a picture not displayed properly in the chat
scrollbar on right is always visible on login page and because it is transparent/white, it stands out against the dark background.
it also means on the electron app, if you open a second servers login page, you can see the other server behind the scrollbar.
rocket.chat is able to sent an email to a new user in order to verify the email address.
the admin can switch this option on and off via the setting
thumbnail scaling is a bit off, if the image is much larger in width than in height.
we temporarily provided admin level access to someone in our organization and revoked the priveleges.
now they are reporting that the channel/group/dm listing on the left hand side is entirely blank.
upon restoring admin priveleges the left panel reappears.
impossible to delete a quote from a message when you edit it.
using ldap connection to an activedirectory.
it 's working fine for nearly all users, except for some: screen phofimage in these cases, it should be gs and es.
in my case the "use full name initials" setting doesn 't make a difference.
rocket.chat then either uses the username or full name in ldap as source.
it 's noteworthy, that in my case the username is nearly identical to the full name.
when using the **unread rooms mode** on *sidebar channels list mode* settings on the new layout, and some message is unread, you have it duplicated on the list: both unread and channels/dms section (screenshot).
screen shot at 09 55 53 phofimage
message action buttons overlaps message text : image phofimage
when importing a hipchat server backup (after preparing the data according to phofurl the import fails with parsing errors.
the reason seems to be a limit for json field lengths.
i was checking your website and, when hovering the mouse on the hosting menu, i 've seen that the "title" for hosting is set to "download", where i believe it should be set to "hosting".
i believe this is easy to fix, but very important in terms of accessibility for your website.
the users i add to a new private room does not receive offline email notifications even though they are @mentioned.
all the default notification settings for both the room and the user is set to receive email notifications upon being @mentioned while logged out.
this problem goes away the moment user goes to notification setting of room (on right toolbar), changes value of "notification > email" to 'mention ', and optionally sets it back default.
this prevents me from adding users rooms and trusting that they are receiving email notifications when they are offline.
phofimage we are getting these constantly on community server.
seems to be for every single message sent might be related to: phofurl maybe trying to execute client side code server side
both elements and functionality are missing on the new ui image phofimage
when restarting rc with systemd (`systemctl restart rocketchat`), the info page in the admin area does show two running instances, though it is expected, of course, that there's only running one.
if having a small client, clicking a user to start a conversation or block them won't allow scrolling down to the button options without expanding the client window
rocket chat was installed via snap on ubuntu, storage is filesystem, path is we had no issues till latest update.
now, download of a random big file (50+ mb) stops after a bit.
i tried a clean new installation of rocket chat via snap on a new ubuntu virtual machine and had the same issue after downloading test file.
the vm is on m2 ssd, so disk speed is not affecting this issue.
using gridfs everything works just fine.
rc is running fine for the last months but on it crashed with an error like "duplicate entry at in mongodb.
all users, messages, settings where lost.
2 weeks after that accident it hit us again.
they are duplicate entry 's in this document - should they be there?
0 secs index [conn393] build index on: rocketchat.users properties: v: 1, unique: true, key: emails.address: name: "emails.address_1", ns: "rocketchat.users", sparse: building using bulk method; may temporarily use up to 500 megabytes of ram done.
0 secs on: rocketchat.users properties: v: 1, unique: true, key: name: ns: "rocketchat.users", sparse: building using bulk method; may temporarily use up to 500 megabytes of ram done.
secs on: rocketchat.users properties: v: 1, unique: true, key: name: ns: "rocketchat.users", sparse: building using bulk method; may temporarily use up to 500 megabytes of ram done.
secs }` and so on... so... same shit - two weeks later.
can anyone tell me why i get duplicate entrys at and why is "something" deleting my entire database?
embedded mode is showing unintended parts of the ui: right tab bar and the _user is typing_ information above the message box.
gui bugs at my account -> preferences
drag and drop functionality still active even when file uploads have been disabled.
the eventual file upload fails with an accurate error message (file uploads being disabled), but it would reduce user confusion / efficiency to not allow the upload process at all.
there is a scrollbar shown in the message input field if your browser isn't at 100% zoom level / you use the build-in windows scaling set at 150% for example.
minor change to two english translation messages.
does not change the translation message "keys" (unsure of terms).
open a room and reloading the browsers page causes an empty conversation panel.
this behavior does not occur on each reload.
right now, when a user log ons chat anonymously, that name will still be registered in the database under the anonymous role (even if they have left forever).
i think we should have anonymous users automatically deleted after logging out or closing their browser or automatically deleted when a button is clicked in the admin panel.
(without having to delete them one by one which, for large sites, would take a very very long time)
after upgrading to 0.57.2 we cant login with our active directory accounts.
we only are able to log in via gitlab oauth which also uses our ad as backend.
also some private chats are not loaded when the page is loaded.
only seen some days and only by some users (running either the desktop app or the browser, in windows 10).
the channel name will go bold and notifications will come through, a sign of new messages.
but when going to the channel, there will be no new messages.
if the user then logs out and logs back in, everything will be back to normal, ie new messages be there in channel.
i have a feeling that this related to session timeout.
currently we have a session timeout of 1 day.
most users get logged out properly every 24 hours.
my theory is that, sometimes, rocket chat fails to log some user out, which is why they can see channel being highlighted and notifications coming through.
but session has timed out therefore they can't see any new messages.
i should also point out that when this happens, affected users can't send messages either.
they can type them in, but messages be grey-ed out.
if you enable the ldap profile picture sync, people are not able to login with their ldap credentials.
ironically syncing the ldap profile pictures does work if you enable it and click "sync ldap".
when sending a message, `` `@all` `` triggers mentions for everybody, instead of letting me communicate the idea of mentioning everybody.
note that the auto complete thing does _not_ trigger, and the output does not look like a mention, making me think it was not pinging everybody on the server.
after updating to 0.58.0 i am no longer to open the right sidebar in any browser, clicking the icons do nothing.
am getting no errors in the browser console either.
when members open the chat-windows (google chrome) they cannot open the general channel, but other channels work.
there is an exception in the browser console: see below.
deleting the local index db from chrome and refreshing page solves issue temporarily.
after a while issue comes back and one has to delete local db again.
a login via api doesn 't update user status, "created at" and "last login"
customers who like to use the livechat widget have to insert an username and email address.
afterwards, they are able to chat with an agent.
when a live chat agent uses markdown in order to structure and beautify its replys, the customer who uses the livechat widget will see the markdown syntax.
we added a role called user admin.
the user admin is allowed to administrate users (e.g.
adding new ones, activation, editing) and to administrate channels.
the user admin should not have access to other system options.
he should do the basic daily work.
the user admin has the following rights: - add-user-to-any-c-room - archive-room - ban-user - bulk-register-user create-user delete-c delete-d delete-message delete-p edit-message edit-other-user-info edit-other-user-password manage-emoji mute-user post-readonly remove-user set-moderator set-owner set-readonly unarchive-room view-room-administration view-user-administration
i have a bot to use outgoing webhooks.
when it processed the outgoing response it's properly tagged as a bot and i can filter by that to prevent a loop.
however when i post a message to the same channel saying that the message was processed at the server bot is no longer tagged as bot and i can no longer filter by it causing loop.
until recent versions (i don't remember which one, sorry), code markup could be done as follows: ` ` ` text ` ` ` which displayed as phofcode this behviour changed, as ` ` ` text ` ` ` now displays as phofcode and you need ` ` `text for phofcode this is really annoying all other markdown implementations (at least known to me), e.g.
githubs own ignore that newline after the ` ` `.
maybe this need discussion, i'm not sure of that.
channel is blank when coming directly from an url like phofurl this doesn't happen on the demo rocketchat, only our own internal one
if an agent uses a smilie / emoticon like ";-)" or "rocket", it is not converted in a graphic in the livechat widget.
the `focus` method doesn't work on the messages-box textarea if you open the developer tools and try to do for focusing the user on the textarea on main chat screen, it will not focus on textarea at all.
this impacts functioning of textarea, because it turns out that if you want to programatically focus it, it wouldn't be possible.
with option enabled to send chat transcripts enabled.
when a user ends the chat, it doesn't offer them to send an email.
but it does when the agent closes the conversation.
i started a video chat that failed as the other person never saw my request (that's a different bug though).
this bug is about the fact that after i hit stop, my camera (on my thunderbolt display) stayed active!
i couldn't reproduce after i restarted rocket.chat so this is an intermittent bug unfortunately!
when using atlassian crowd to let users login to rocket.chat, the password of the user is always stored in plaintext in the mongo database.
this does not happen when using ldap.
new users are not added to a servers default channel.
when clicking the userlist in safari, it does not show.
it works fine when tested on chrome.
- username not found in direct message
i have rc running under docker, and then also a hubot container as well set to listen to all rooms.
when i attempt to request information from the bot (ie help) rocketchat issues an exception.
when scrolling permissions down it 's hard to know which columns goes for which role.
is it possible to "freeze" header line of this table for easily identify matching role?
regression in rocket.chat server 0.58.0-rc.0 (works in 0.57.2): entering a multi line message does not expand area and renders all lines >= 4 below the fold and not readable at all.
commit modified which prepends i18n to the title of chat.postmessage api calls which do not necessarily have actual file attachments.
direct messages will notify on all messages regardless of mobile or desktop preferences for all messages or mentions only.
setting to no notifications for desktop or mobile does work.
channels seem to be working properly.
if i disable under admin/fielupload the file upload - users lose the button for video chat.
crowd integration fails with umlauts in password
when replying to a message with an alias that is a valid user 's name or id (e.g.
sent by hubot using `custommessage`) the reply is targeted at the bot only, but not to the alias.
rocketchat+ mobile app displays ad user logon name rather than [firstname lastname] we use ldap authentication to allow employees to log into rocketchat using their active directory credentials.
our issue is, that our ad account logon names are employee numbers.
when using the rocketchat desktop client, the web ui, or the rocketchat (non +) mobile clients, user names are shown as [firstname lastname].
but when using the rocketchat+ mobile client, user names are displayed using ad logon name, so it only displays user name.
if you are in a video call with someone and you click logout, the video call continues as long as the page is up.
users accessing rocketchat with browsers are not aware of direct messages.
adding a notification with a count of unread direct messages like in gmail would be beneficial.
something like `(1)` before the name of rocketchat instance on the browser tab.
currently all messages from all rooms are being logged to the database (mongodb).
we'd like to disable the logging of direct messages, so they are kept completely private.
when using rc via brave browser, ctrl + tab does not work as intended.
i am trying to login to iframe using the token.
i generated the token at the login page using the username and password.
now on page where i am trying to load instance nothing is loading .
i am not getting any error message on console.
the rocket chat is installed on google cloud server.
the dashboard where want to show chat is on other server here is code used generate token : t$data = array ( t"username" => "stacy", t"password" => "password@12345" t); t t$dats = json_encode($data); t$ch = curl_init(); curl_setopt($ch, curlopt_url," phofurl curl_setopt($ch, curlopt_post, 1); curl_setopt($ch, curlopt_postfields, $dats); curl_setopt($ch, curlopt_returntransfer, true); curlopt_httpheader, array( 'content-type: application/json ', ) ); $server_output = curl_exec ($ch); curl_close ($ch); t $json $authtok $json->data->authtoken; here chat page where need show rocket chat.
below js code : var y externalcommand: 'login-with-token ', token: }, "*") }); here html body with iframe and src <iframe src=" phofurl name="myframe" style="width:100%;" id="myframe"></iframe>
closespider_timeout settings 36000 run for five days... closespider_timeout settings 60 closespider_timeout(is ok)
my code was working in python 2, but you are ending your support to python 2 soon.
i am trying to migrate to python 3 but it seems you have some compatibility issues with binary in post request.
running selenium-webdriver javascript 's driver with the following code and getting this error:
i am using the documentation here phofhyperlink to try and instantiate an androiddriver.
however, i 'm getting a compiler error saying "cannot convert from appiumoptions to driveroptions() error when creating new androiddriver"
the empty `clarrifier` tags in the generated `pom` file of this project lead to artifacts not being copied to the classpath by `sbt-launcher`
hello, i am trying to use selenium to control a browser programatically.
i would like to be able to send the keys "cmd-" (or "ctrl-") zoom out.
i have tried every different way i can think of of sending these keys with no luck.
have tested this on both chromedriver and geckodriver on my macbook, and on geckodriver on my raspberry pi.
it looks like this closed issue was reporting a similar bug: phofurl
i cannot retrieve the firefox console logs, i get the following jsonexception when i try to do so: phofcode after debugging on it seems that the exception is thrown because the content of response is not a json but a text/plain that only contains "http method not allowed".
when checking what request has been sent, it seems that following post request is performed: > post so i guess there is two issues: - command wrong for firefox - error not parsed correctly don 't reproduce on chrome, only on firefox.
ubuntu 19.10 installs chromium/chomedriver as snap package.
chrome running in snaps has a separate /tmp directory and does not share the /tmp directory with the system.
therefore, the browser cannot see the profile that was created in /tmp when using default webdriver.
ubuntu provides a patched webdriver.
using the isdisplayed() method is returning this error: returned value cannot be converted to boolean: {} i find that this happens on several elements on the site i test.
the new bazel build doesn't build the chromedriver tests in
i have faced with an issue that drag and drop does not work for logic in my application.
i am using c# for triggering the tests.
to verify if it is issue with my project or with webdriver i have created simple project that tries to drag and drop in phofurl site.
it is reproducible for chrome, ie, ff (in chrome and ff it makes draggable element yellow but nothing happen, in ie - nothing happens.
the code is below: phofcode all these combinations does not work.
if not moving mouse to browser it throws 'the http request to the remote webdriver server for url phofurl timed out after 60 seconds. '
unable to load extension(crx file) using chrome options in selenium
i am getting when using the perform method of the action class chrome version : 78 build info: version:
when creating a new driver using the c# bindings on windows (specifically in this case chrome) when initialization fails, a chrome process is created without a chromedriver process.
the error is unknown error: failed to wait for extension background page to load`
** driver.findelements ** is expected not to throw any exception even if the element is not present on page.
however, with firefox if you have not yet switched to relevant iframe or default content and you try to validate element presence using ** driver.findelements ** , can't access dead object is thrown.
after the updating from the version of chrome 77 to 78 and, accordingly, the updating to the 78 chromedriver, we noticed problems when clicking on elements.
selenium clicks on an area that is a few pixels higher from top border of element.
this problem does not reproduce for all elements.
we did not find a pattern by which we could reproduce it for a specific set of elements.
but if this problem is reproduced for any control, then this happens on an ongoing basis.
we tested this with selenium 3.11.0 and - bug reproduces identically on both versions.
when creating a new driver using the c# bindings on windows (specifically in this case chrome) when initialization fails, the application exits with the chromedriver continuing to run.
(this combined with execution managed by gitlab results in a runner which does not complete)
failed to reuse remote webdriver browser, for chrome options and it failed with exception
#0 <unknown>: session not created: this version of chromedriver only supports chrome version 75 an error occurs when starting the test reinstalling and uninstalling programs did not help
adding the selenium dependencies to a lambda project (created through eclipse) corrupts the jar which causes aws to not recognise it.
once the dependencies are removed, the lambda jar is not longer corrupted and accepted.
** update: ** i just tried my reproducible in a windows 10 vm with a fresh install of openjdk 11 (red hat build) and maven 3.6.2 and i get the exact same issue.
this doesn't seem to be a problem with my system and more so a compatibility issue with java 11 jpms and selenium?
firstly, this is going to sound like an issue with the ide tools i'm using but i'm only trying to illustrate my experience.
since the issue seems to be happening throughout all tools i'm assuming it's an issue my system environment install of selenium java bindings.
whenever i add `module-info.java` project (either handwritten or generated by ide), ide build tools are unable resolve the selenium dependencies as java modules.
when i require other library modules, e.g.
guice, do not get module not found errors on those other libraries.
when remove module-info.java, turning it into standard java application w/o jpms get no static analysis, compile time, or run time issues.
maven (at compile time), eclipse, vs code (java extension pack extensions enabled) all have issues resolving selenium artifacts as modules on system.
as consequence also get linter errors in files.
i've nuked local maven repository re-downloaded artifacts many times already, i've ensured environment variables point right jdk.
in real project, i'm able eclipse run application (but maven doesn't compile) if set requires phofcode maven compiles (but eclipse won't run linter errors) if set requires to: phofcode in both cases vs code extensions just cannot resolve imports at all.
removing require statements entirely results in expected `type not accessible` errors when you have not defined dependency in your module-info.java.
for now, can remove module-info just write project as is but i'd really like modularize it future.
to reproduce i've created mini-project similar pom app structure below.
creating an action in java that simulates a click on (an element) or multiple elements while holding down the control key actually triggers context clicks instead of regular clicks in the browser.
elements with attribute 'fragment ' are not visible.
impossible to interact with child elements.
element displayed property is not calculated correct when the element is not in viewport.
when using `webelement#getcssvalue` the returned value is not necessarily a rgba value when the requested color is in fact an hexadecimal value, contrarily to what 's explained in the webelement javadoc: phofurl now i 've not been able to track down in the w3c webdriver specification if color values should be systematically rgba or not, so maybe it 's just a javadoc issue.
a clear and concise description of what the bug is.
a clear and concise description of what the bug is.
i 'm unable to launch edge in selenium with python.
when trying to create the driver i get: phofcode windows version: windows 10 pro, 1809, running in azure selenium version: 3.141.0 python version: 3.7.4 64-bit (the one from here: phofurl java version: edgedriver (from `microsoftwebdriver.exe --version`)
executing if the response is an object that contain an `error` attribute, it will crash the entire server.
webdriver driver = new chromedriver(); produce an exception at runtime: phofcode
script is failing to upload with unknown command: unknown command: ** se/file ** " error message.
when selenium tests that click on elements are run, the clicking is visibly below the actual element.
this happens for all elements tested and for all tests on which we tried this.
it only happens on apple mac/safari 13.0.1. was not tested on ios devices.
same apple mac machine runs tests correctly chrome.
other macs running safari 12.x also run correctly.
we tested this with selenium and 4.0.0 alpha-2 - bug reproduces identically both versions, when browser is safari 13.0.1.
selenium-4.0.0-alpha-3 fails to build (using readme instructions) on ubuntu 18.04
in my code i make a call to to mouse down on the x,y coordinates of an element.
x, the x and y variables in my code could be strings or integers.
this code used to work earlier this year, but i 'm guessing that was before all the w3c work was done, because if i start chrome with the code works without errors.
so the w3c driver is triggering in in actions_chains.py and move_to in pointer_actions.py that i think has a bug.
in many places in the code, both in comments and in error messages, links are made to phofurl it seems as though it would be more sensible to link to the actual chromium website for this at phofurl in case the chromedriver host changes and the url is no longer valid.
**i would be more than happy to fix and pr this but i want check that it wouldn't be better keep it as it is.
selenium-webdriver js bindings doesn't print all stack trace on error
we run selenium tests in maven using junit and remotewebdriver, and sometimes it fails with outofmemory error.
we got a heap dump of one of the failed builds, and eclipse memory analyzer shows that heap space is 95+% occupied by two char arrays.
these two arrays look like this: phofcode and contain both around 300m characters (xmx is 1024m).
here phofhyperlink is a gist with relevant java code thread stacktrace from the dump
for modal window that is opened by window.showmodaldialog in ie (other browsers don 't support it) it 's possible to find webelements, but calling isdisplayed() method throws nullpointerexception.
other methods like gettagname() are ok. isdisplayed() is called in some expectedconditions, so it leads to problems with webdriverwaits
in this moment requires rubyzip 1.2.x that has security problems.
selenium jar v4.0.0-alpha-2 doesn 't open edgehtml based edge when `webdriver.edge.logfile` path is specified while running jar.
hi, can you help me with following issue?
manager phofhyperlink correctly gets the driver and then it fails when jvm cannot find class i tried to google this class, but was not able to find out what maven dependency am i missing.
the links to the source code from the js api documentation phofhyperlink seem to be incorrect.
they point to the right repository, but the files and lines they reference are often incorrect.
thanks for looking into this!
when setting the `location` via `locationcontext` with a non-null altitude, subsequent calls to provide a null altitude value.
creating an instance of firefox using a large (as in file size) profile directory errors out with: traceback (most recent call last): file line 603, in urlopen chunked=chunked) file line 355, in _make_request conn.request(method, url, **httplib_request_kw) file line 1229, in request url, body, headers, encode_chunked) file line 1275, _send_request self.endheaders(body, 1224, endheaders 1055, _send_output self.send(chunk) 977, send self.sock.sendall(data) oserror: [errno 22] invalid argument which ultimately becomes ( 'connection aborted.
', oserror(22, 'invalid argument '))``
when creating a instance of firefoxdriver / chromedriver and proxy fails, it will throw a webdriverexception and null the variable.
so you end up with a open browser window, without being able to close it.
opening new tabs and using them behaves differently in chrome & firefox.
the problem happens with every website, not just google.com.
the provided code is only the relevant part, with additional lines missing.
the problem may be with how windows are handled.
code works perfectly with chrome, but in firefox usually two new tabs are opened, before switching tabs.
using from nodejs module will internally run a script to convert offsets when an requesting a mouse move relative to an element.
in internet explorer, this script will return [nan, nan], ultimately causing the mouse moveto command to fail.
in order perform parallel execution, i just ran selenium grid and triggered script couple of times.
for any single grid call the script executed properly in remote pc, but if i try to execute more than 1 iteration getting protocolhandshare exception.
urllib3 >= 1.25 can not parse selenium hub urls that are from commercial selenium platforms e.g.
please lock urllib3 to versions lower than 1.25
remote connection __init__ removes square bracket around ipv6 from the url
when doing consecutive uploads on firefox, the previous uploads are repeated;
i updated chromedriver from 74 -> 76 and got this error when started e2e tests of chrome extension: phofcode the error appears immediately on chrome web driver build here phofurl that is called by phofurl there was no error with chromedriver 74.x
iedriverserver should ignore 'unknown extension capability ' and not reject them if provided.
this behavior would match chromedriver and would still be complaint with w3c webdriver specifications.
i am using selenium 3.5.3 version and the chrome driver version is i faced the same issue which is reported in phofurl phofhyperlink .
to workaround the issue i have tried the below snippet of code `chromeoptions options=new chromeoptions(); desiredcapabilities chrome = new driver = new chromedrivers(chrome); driver.get(" phofurl driver.quit(); ` the above code is running fine, but chrome options which i set is not working.
many of users in my tool are using selenium 3.5.3 , can 't immediately upgrade it to selenium can you please suggest me any workaround (or) fix to set chrome options.
consecutive file uploads to an input[type=file] element with sendkeys duplicate files uploaded before in chrome v75 or later.
in chrome v74 this didn 't happen.
specifically uploaded a file will make all files be uploaded again.
so a 4th file upload will unintentionally upload file 1, 2 and 3 again.
unable to load webpage when a link on webpage results cors error [site has been blocked on the requested resource]
when i 'm trying find text element using findelements in context of webelement, then i 'm getting error: typeerror: expected an element or windowproxy, got: [object text] {} issue is with firefox geckodriver but in browser this xpath working as expected
selenium webdriver fails to open chrome browser in c#
the method always returns `null`.
a clear and concise description of what the bug is.
i was trying to set phofhyperlink as `"state": "all"` using `execute_cdp_cmd()` phofhyperlink method through selenium python clients.
but it seems passed to chromedevtools using `execute_cdp_cmd()` have no effect.
a clear and concise description of what the bug is.
we have observed two problems with buttons: case1.
a clear button does not become inactive again after a newly entered value in a field is cleared by pressing the clear button in a pop-up window case2.
pressing an ok button in pop-up window makes the button inactive but the window does not close
localfiledetector in combination with uploading multiple files not working as expected.
when elements are of the "input[type=file]" kind, selenium supports sending paths to files with the sendkeys() method.
this also works when you need to upload multiple files.
this is done by sending multiple paths on different lines (in a single string with line breaks), i.e.
(in java 8): element.sendkeys(" path/to/first/file path/to/second/file "); however, when using a localfiledetector, this functionality is not working anymore.
the error message is saying that one of the files is not found, whilst when i upload the files separately from same folder, they can both be found.
leaves sockets open to chromedriver in `close_wait` state.
a long-running process that opens and quits drivers can reach the system 's file descriptor limit, causing the system to become unresponsive.
returns float numbers with e-notation as long instead of double
when an oss-protocol client app uses selenium standalone server to connect to a w3c-protocol webdriver implementation (e.g., chromedriver 75 and above), the standalone server converts oss protocol requests to w3c format.
when some mouse related commands (e.g., phofhyperlink ) are converted, the specified `button` property is ignored, and `button: 0` is sent to the webdriver.
i came across phofurl while debugging performance issues with iedriverserver for screenshots that are one-color (white in my case).
the call to `takeelementscreenshot` takes roughly 8 seconds when an element is of a single color.
this is what i have in the iedriverserver.exe debug logs: phofcode the retry-behavior was introduced in in what i think is a workaround for an underlying ie issue.
here 's what the commit message says: phofcode
sendkeys is typing one by one character in text field in ie browser for windows 10 when running through grid node.
it is typing entire text for windows 7 for the same version of ie driver and selenium grid version.
when trying to send devtools commands inside a devtools "listener" context, web socket requests always timing out.
phofurl related to phofurl this leads to hours spent trying to figure out why the list is empty; i realize that the goal was to prevent the null reference exception however the code verifies it is not supported and then hides this from user by returning an empty list.
errors when upload file in input file form in remote browsers - chrome v75 and firefox v60 and v65
problem is described in detail here phofurl basically the problem is selenium can 't parse the html or text of the elements because the elements are invalid unicode characters.
i get same error using any of: driver.page_source, element.text, error looks like webdriverexception: message: unknown error: bad inspector message: (session info: (driver info: os x 10.14.0 x86_64) the offending characters are somewhere around you can see at phofurl screen shot where unicode characters (emojis) aren 't rendering.
the phofhyperlink is failing when the file contains multiple whitespace.
movebyoffset is not working when scrollbar is present in selenium.webdriver 4.0.0-alpha01 (works well in 3.141.0).
when a test attempts to send the key combination ctrl+space using the sendkeys method, the browser element receives only space.
this does not occur in chrome, but does in internet explorer.
currently string logging_prefs is set to "loggingprefs": phofurl i know, it was working in chrome 71. but it doesn 't work in chrome 75. chrome 75 only works when i manually use instead of ` 'loggingprefs '`
the selenium webdriver (4.0.0-alpha.4) were giving an error on build at node.js v10.15.3
when trying to get availablelogtypes from logs.
same happens on chrome and firefox.
basically same issue as reported while ago phofurl
selenium stops executing code after choose certificate pop-up.
even if i try to handle this window with other tools(appuium,autoit) i simply can 't, as no code will be executed pass moment when i click on link that triggers cert pop-up.
when i set-up chrome to auto accept certificate, pop-up won 't show but code will still hangs in exact same moment.
selenium ide keeps wanting to save to new file after every change.
selenium-node does not allow user to specify non-machine ip address to register
with chrome 75/chromedriver 75 and nodejs selenium 4.0.0-alpha.3 getting the chrome performance log fails.
i think it was introduced in phofurl together with the chromedriver switch to have w3c compliant as default.
this works with selenium 3.6.0
a clear and concise description of what the bug is.
javadoc for : > for webdriver extending takesscreenshot, this makes a best effort > depending on the browser to return the following in order of preference: > <ul> > <li>entire page</li> <li>current window</li> <li>visible portion of the current frame</li> <li>the screenshot of the entire display containing browser</li> </ul> but w3c spec phofhyperlink : take screenshot command to capture top-level browsing contexts initial viewport, if `getscreenshotas` method always return current viewport instead of entire page, javadoc should fit this behavior.
runnin selenium as windows service via nssm and the remotewebdriver is intiated and the connection is refused.
while executing the test on chrome 74 the following exception is thrown- `timeout (session info: (driver info: the same test works on chrome 73 and lower browsers as expected.
i 'm using custom profile for chrome in my tests, and in one test suite i have to logout from app, quit browser and then run following tests which starts with logging into app.
when i log into app, i recieve a token (that gives me permission to access the app) which is stored in localstorage.
after logout token is set to null.
the problem is - when i run following test that starts with opening the login site (or just simply re-run the previous one, which also starts with logging in app), it turns out that... i am already logged in.
what is more, the token i 've mentioned at beggining set to value from previous session while it should be null after logout.
since firefox 67.0 i 'm getting user prompt of type promptuserandpass is not supported) while invoking sendkeys() at a basic authentication alert.
stacktrace: exception in thread "main" user prompt of type promptuserandpass is not supported build info: version: revision: time: system info: host: 'ddea0489 ', ip: os.name: 'windows 7 ', os.arch: 'amd64 ', os.version: '6.1 ', java.version: driver info: capabilities {acceptinsecurecerts: true, browsername: firefox, browserversion: 67.0, javascriptenabled: true, moz:accessibilitychecks: false, moz:buildid: moz:geckodriverversion: 0.24.0, moz:headless: false, moz:processid: 12208, moz:profile: moz:shutdowntimeout: 60000, false, moz:webdriverclick: true, pageloadstrategy: normal, platform: windows, platformname: windows, platformversion: 6.1, rotatable: false, setwindowrect: true, timeouts: {implicit: 0, pageload: script: 30000}, unhandledpromptbehavior: dismiss and notify} session id: tat method) tat tat tat
upgrading to 3.142.2 made selenium-webdriver lose its interest in running my examples and depress me with throwing "`page.current_path` raised exception: expected browser binary location, but unable to find binary in default location, no capability provided, and no binary flag set on the command line" exceptions.
a clear and concise description of what the bug is.
after selenium upgrade to version the tests that i run from eclipse using testng 16.4.3 towards a remote machine create a session and then, for some unknown reason, immediately close it.
attached is the web driver debug log detailed steps to reproduce the behavior:
when trying to get the parent element using method returns parent 's sibling element.
a clear and concise description of what the bug is.
we use a combination of docker-compose, rails and selenium to perform integration/system testing.
the capybara/rspec environment is supposed to send commands to a remote chrome container: phofcode this is how we setup the driver: phofcode this setup works completely fine.
capybara connects to the hub and successfully runs our integration tests.
in order enhance our tests, we need make use of the `network_conditions` selenium endpoint test the application in an offline setup.
this seems not be officially documented, but it can be achieved using this call: phofcode instead of returning a success, call throws an exception: phofcode
ruby persistent client fails with wrong number of arguments error this is a new issue introduced with 3.142.0 and does not affect 3.141.0
a clear and concise description of what the bug is.
reach out direct to me and i 'll walk you through everything from scratch to build container.
bit of a long run to a crash.
github repo here - phofurl .
selenium c# webdriver inside a windows container fails with 'http request to the remote webdriver server for url phofurl timed out after 60 seconds.
everything works fine locally or in a clean windows server 2016 with ui.
if i build dockers container for windows and copy my tests in it fails with this message.
consistent on ff and chrome drivers.
a clear and concise description of what the bug is after selenium upgrade to version the tests fail to run with testng 16.4.3 on jenkins v2.138.3 errors like: testngclassfinder: warning: can't link and determine methods of class.... testngclassfinder: unable to read methods on class ... -unable to resolve class reference eclipse : when trying run the tests from eclipse , i get a message that either testng cannot find class in classpath or that no tests were found and nothing was run
logging to file not working with ruby and geckodriver.
as per the docs phofhyperlink i tried setting a proxy for a remote firefox running in a docker container on my local machine.
this resulted in a `net::readtimeout` error.
stack trace as follows: phofcode
when i try to add a cookie to the cookie container, iedriverserver.exe crashes.
driver.findelements(by); method couldn't locate element which present in dom
selenium tests fail randomly with "listen eacces: permission denied (port number varies).
this is quite infrequent, roughly 1% of the time.
the ie webdriver is stuck and no responding forever unless kill the script when closed a windows by press the customize button on the webpage.
the desirecapabilities class still uses capabilitytype.platform which is deprecated, instead of capabilitytype.platform.
this is inconsistent and at a certain point, we have to set up both capabilities making sure they 're all passed in.
we 're also not sure the intention of why platform is @deprecated.
detailed steps to reproduce the behavior:
installation of modheader extension in firefox through selenium (using below code) not working: phofcode however if i try to install through browser, i am able to install it successfully.
invoking `click` on an element located within an iframe that has an onclick handler that opens a new window opens the new window but returns a "no such frame" error on safari.
works fine on chrome and firefox.
cross-posted with apple bug reporter
mousemoveto on selenium 3.6.0 ff 55.0 i have tried with all combinations of selenium version and ff version -dbrowser.version=55.0 -dbrowser.version=60.0 -dbrowser.version=55.0 -dbrowser.version=65.0 -dbrowser.version=65.0 -dbrowser.version=65.0 i am getting same error for all the above combinations.
i tired with gecko version 0.18 and 0.23
when running tests in parallel under the internet explorer after some time i have a queue at the hub, and the number of queue items is much more than the running tests.
the node accumulates a browser with a start page of about: blank.
after session timeout hub kills hung sessions and starting new sessions from queue and situation repeats until nodes fall off by outofmemoryexception.
i started having problem when installing from npm this afternoon.
a clear and concise description of what the bug is.
websites with javascript enabled data loading, usually takes 1 (or) 2 seconds to load the pages.
after a sleep timer, the html page data can be seen(after writing to a file) but when tried in headless mode couldn 't get the complete html page data.
safari technology preview keeps scrolling up to the top when i try to run javascript executor script for scrolling and the element does not get clicked.
when using webdriverwait(driver, timeout) to wait until expected condition is met, it looks like timeout is not applied.
method until() just executes without waiting for element to became clickable.
elementtobeclickable() documentation: an expectation for checking an element is visible and ** enabled ** such that you can click it.
a clear and concise description of what the bug is.
openjdk 11.0.2 does not seem to support maven download of selenium-java jars in windows 10 os.
selenium is unable to interact with an element that is visible on the screen and enabled: the element is an input text field.
when retrieved, the element shows positive values on the rectangle: image phofimage querying for `is_enabled()` returns `true` but querying for `is_displayed()` returns `false` trying to send any action to the element throws an exception: `elementnotvisible` it has a unique identifier and there are no other elements that match.
i noticed that this started happening when 2 specific css properties were added to container of that element: `overflow-y: auto;` `display: contents;` this was added in order display properly on edge, but it broke interaction on chrome.
while executing the getlocation command on safari 12 os x mojave, ** ** is thrown.
when running in vpn configurations, the method used by selenium grid server to resolve the ip address of `localhost` returns a non-functional result.
consequently, local grid instances do not work in vpn configurations.
this is an issue in both grid 2 and grid 3. my code is able to communicate with the hub and node servers, but the node can 't communicate with hub.
the core issue appears to be in method being use to determine ip address of `localhost`.
i don 't know is this is a bug java http stack, but typical implementation fails gloriously when running a vpn configuration.
the code i use get ip address of `localhost` looks like this: phofcode as indicated by code comment, this implementation uses google public dns acquire ip address of `localhost`.
this code reports `localhost` as (ethernet adapter), but selenium servers insist on trying use (wireless lan adapter).
with a browser, i 'm able open pages with i generate with this code.
the reported by servers themselves non-functional.
if i disconnect from vpn, local servers work as expected.
> i want to run the kol.xml file with external jar but i don't know the exact command to run the xml file with external jar note- this jar file are required to take the screenshot of webpage and i have added all jars including external jar in libs folder external files -commons-io-2.5.jar, commons-io-2.6.jar, and commons-io-2.6-tests.jar
i started getting the error `could not convert 'text ' to string` on firefox.
i know there is an old issue about this but i have updated version of the selenium web driver and i am still getting this error (just from today).
a clear and concise description of what the bug is.
cannot set socks proxy type in firefoxoptions throws expected "socksversion" to be a positive integer, got [object undefined] undefined (sessionnotcreated) '`
i get this error when executing javascript that uses jquery and returns a jquery object.
interesting thing is ignoring the error is fine.
i am attempting to use visual studio for mac and i can't instantiate a chromedriver, or any driver for that matter.
i get this exception even though the driver is clearly in the directory: _test method threw exception: the file does not exist.
the driver can be downloaded at phofurl
i 'm trying to have an http and https proxy when running selenium with capybara.
i looked at the various gist/so answers and the documentation but i 'm on the most probably to work code i have.
when a bunch of concurrent requests to /grid/register are made, there is a chance that the following exception will occur: phofcode when this exception occurs, all further attempts to register fail, regardless of which node makes the registration attempt.
when i send the socksversion field to the server, i get the following error: `java.lang.long cannot be cast to java.lang.integer` the data payload is the following: phofcode i 'm using my own fork of golang package phofurl
the basic project's tests fail from scratch.
if i pass the property a path containing spaces, the log file path is not passed to `iedriverserver.exe` correctly.
installing the ruby `selenium-webdriver` gem fails on ruby `2.6.0` it throws an rdoc error, claiming that may not be properly documented.
however, the core gem seems to install successfully.
if i retry the same with `ruby 2.5.1` it is successful, so it may be a problem with `2.6.0` specifically
: browser test fails because of cygwin internal path when trying to run a browser test on firefox written in ruby (capybara, selenium webdriver), i get the following error: phofcode the problem seems to be, that when selenium is trying to locate firefox.exe, it is using the cygwin relative path (/firefox/firefox.exe) instead of the absolute windows path i 'm assuming this would cause a problem with other browsers as well.
since the code will not run firefox inside of cygwin platform itself, but on windows, it needs to get windows absolute path kick off browser.
to make a api request through httpclient without `headers` object in request object results in error `cannot read property 'foreach ' of undefined`
the file output stream provided to geckodriverservice via its static builder class is never closed.
i am running some junit tests using selenium, which will log the browser output to a log file in a folder foo/ .
after running the tests, the contents of foo/ are zipped and copied to another folder, passed/ or failed/ , and the foo/ folder is force deleted.
this delete operation is unsuccessful because log output stream held by geckodriverservice isn 't closed.
you get a `resourcewarning` for a socket from selenium python webdriver.
selenium ide tests which type into input fields do not fire the change event during playback in the ide.
in the case of the "type" command it will trigger a change event for initial clear but will not trigger change event after finishing typing.
in case of "send keys" no change event is triggered at all.
if same test is run using webdriver using side-runner these fire as expected.
insecurerequestwarning is issued even when the remote end has valid ssl.
a clear and concise description of what the bug is.
the webelement clear() command doesn 't work on certain inputs.
i believe it is related to react components.
using store text command in selenium ide (chrome v3.4.4), if there is a value it correctly stores the value, if there is no value then it fails to find the element.
a site contains popup that is written in js, that appears after clicking on a specific button element.
after clicking that button, the popup will appear and disables clicking on any other element in the page behind it (it is possible to click on the popup), also it holds the request of click until user interacts with popup.
while using geckodriver, after clicking on element that triggers popup, i can interact with popup (e.g.
while in other drivers (i.e chromedriver) 1st click request is pending and won't finish until popup times out or until i manually it.
when the ie webdriver encounters a 405 error it puts the error in the `allow` header of the response.
under certain circumstances when an exception is thrown within python in seemingly unrelated code, the firefox/webdriver instance becomes unresponsive & it is not possible to close open firefox instances.
when called, `driver.quit()` returns `none`, but does not close the active firefox instance.
additionally, `driver.close()` also doesn 't close the browser instance & instead produces the following error: phofcode if in "test script" below, i enter either a valid or invalid uri, then browser closes as expected.
in event of an invalid uri, selenium throws a but this is caught & terminates normally.
similarly, if i replace `input` statement with, `raise keyboardinterrupt()` or `raise eoferror()` then browser is also closed as expected.
using `pdb`, expected path of execution seems to be followed.
i posted this on so yesterday to see if i was just expecting / doing something incorrectly, but post didn 't get any bites: phofurl
grid cannot register appium node using capabilities (not desiredcapabilities).
at build time, jruby throws an error.
a clear and concise description of what the bug is.
when the binary location is set to either the directory of the chromedriver.exe or the path to chromedriver.exe exception for driver not found is raised.
a clear and concise description of what the bug is.
selenium grid not working as expected.
it is not connecting to nodes properly.
according to this commit you should be able to switch between safari and safari technology preview by using the respective browser name ( "safari technology preview" phofhyperlink ).
phofurl it seems whatever you specify as capabilities is discarded and reset upon creation of new `safarioptions` instance: phofurl simply put, it does not respect the specified `browsername` value.
a clear and concise description of what the bug is : the bug concerns an [ ** if ** ] command inside a [ ** while ** ] command.
specifically, it happens when [ if ]'s [ end ] is just before while ]'s end ], that is, when the two end commands are not separated by any other command.
i haven't tested the opposite (while inside if) , but you may want to check it too.
cookie cannot be set before navigating to a page.
document is cookie-averse is thrown.
navigating to the page before setting the cookie defeats the purpose of trying to set cookies.
also navigating, set the cookie and then re-navigating is only extending execution time.
this piece of code is opening chrome and accessing the web page though ie instance or firefox instance is created, as the path is pointed to chromedriver.exe.
there must be a checking whether the correct driver has opened.
in other combinations/vice versa combinations it is not occurring and the chrome prohibited from occurring.
detailed steps to reproduce behavior: import java.io.file; import org.openqa.selenium.by; import import public class main { tpublic static void main(string[] args){ t t t tstring path = t t t t+ file.separator t t t t+"drivers" t t path); driver = new t t t t//or t t path); t t t t//firefoxdriver driver = new firefoxdriver(); t t t tdriver.get(" phofurl t tdriver.quit(); t} }
for a real selenium grid (on two real physical computers, no vms), to get the linux node use the right network interface, i had to remove from it the docker and vibr0 (kvm) network interfaces.
can this info be added to the grid documentation?
not everybody is a networking expert.
is it possible to fix this so that node uses correct network interface?
in windows 10 ltsb and ie11, clicking with selenium on openlayers 3 canvas element does not produce the same result as human originated mouse click.
with a selenium originated click, nothing happens( it's not random but consistently nothing happens).
with windows 7 & ie11 the same click was working ok -with the very same test code, and selenium&ie-driver versions.
also, with cef, in both w7 and w10 the click is working.
we found a workaround for this problem: * by switching ie to legacy event model click started working ( ms changed event model in w8, more about this can be found on www) * registry setting is
while running test against a react webpage on chrome 71 + windows 10, 'clear text ' command does not clear the input box contents.
in chrome of win10, selenium ide only saves scripts with the suffix ".txt".
this prevents the script from being imported again.
object of action class not working for multiple times, which do not performed click.
if we use same object for multiple click event, it throwing staleelementreference exception which does not mean.
same thing is working, if we use different objects for each separate click.
in certain environments a command request could raise `econnreset` even if the command data has been already received and the `end` event processed.
that causes the same command to be executed twice.
i 'm trying to click on a webpage, which is loaded via pywb phofhyperlink so that all content gets recorded.
if i 'm loading the page directly without pywb, i am able to click on a botton on the page from python.
trying to do the same with webrecorder, just errors out.
a clear and concise description of what the bug is.
i recorded a selenium test via ide on firefox and every so often when i replay it (via selenese-runner in headless mode), it fails (timeout) on the first command "open" of the main url.
since i am collecting screenshots i can see that the page seems loaded but maybe not all resources (images, scripts) have completed.
this is annoying because my next command is to click on an link that can see is available to click on the screenshot.
there should be a way to define if open command should wait until all resources all loaded or not before proceeding to next command.
in this case don 't want wait for whole page finish loading before clicking an element can check is already visible.
when i use py binding to open the browser with remote_url=' phofurl following warning is always displayed when making a request.
insecurerequestwarning: unverified https request is being made.
adding certificate verification is strongly advised.
see: phofurl it requires certificates to verify.
the recommendation how to handle this is described at phofurl phofcode however there no way to manager this, no way pass parameters, etc, please have a look at phofurl
chrome setting startup page is invalid.
there appears to be an issue with initialising the remotewebdriver with driveroptions in selenium version 3.141.0 'unable to cast object of type 'system.string ' to type this is attempting to create a remotewebdriver session in browserstack -( in the example, the credentials i have replaced with 'xxxxxx ' but the code still displays error.)
when i switch to a newly opened window and close it i cannot switch back to the main window (which still is displayed).
a clear and concise description of what the bug is.
'share with qr' crashes the app
server config could be removed by swipe left, on certain phone model which do not have button/soft button,
enable shadowsocks in transproxy mode, redirect 53 port to 5450 to let all dns resolve requests are handled by shadowsocks, dns resolve become very slow.
cannot open router's page when using bypass lan / bypass lan&china.
router's page is however smb is accessible, which is weird to me
everything works well in the primary user, but when switching to the second user, vpn mode is connected, but by pressing test, it always shows failed to connect to google, nor does anything works through vpn.
i copy paste the app data folder from primary user to second user, so all the settings are exactly same.
after changed transproxy mode, it can pass connection test again, so i guess maybe it's only about vpn mode.
it worked well in android pie, maybe something changed?
(or is there something wrong with my phone?
can anyone help test it?
crash on not using vpn mode.
i have a server with `shadowsocks-libev`, `dnsmasq` and `nginx`.
dnsmasq configured with and available only for requests from localhost.
nginx configured with `server_name .my.domain`.
this allows me to connect to my private web-page through shadowsocks.
on my linux machines, all work well: i have local socks5-proxy and can use it in any software (ex.
but it doesn 't work on android: mobile firefox can 't connect to my secret page.
i enabled `--log-queries` in dnsmasq 's config and saw dns requests go to it.
and dnsmasq 's answers are correct (for linux-connections it looks similar): phofcode also, i tried ip tools phofhyperlink .
and its "lookup" tool gets the correct answer.
null point exception when test network in proxy mode.
i check /data/tombstones today, find out a lot of "out of udp buffer" error produced by shadowsocks libtun2sock.so.
since it happened several days ago, i have no idea how to reproduce it.
scan qr code: your device do not support google play service.
maybe it is not qr_scan integrated.
shadowsocks client does not work when run on stock google android pixel 3a phone using china mobile sim.
the setup uses a ipv4 address outside china which is otherwise reachable on the phone, thus this ipv4 address is not blocked.
most likely this may be because not only domain names but also ip addresses are resolved using google servers which are blocked in china.
qr code scan function will be interrupted by "google play services error" even if the awesome qr application is installed.
taping the "add" button on the top right corner of the screen and choosing scan qr code, then "google play services error" pops up and it asked me to go to ether google play or f-droid to download something but none of them actually have the app available.
a clear and concise description of what the bug is.
cannot connect to my own private ss server (
the commit phofurl hard-coded the app to bind `0.0.0.0` on chrome os and it stated it was safe at that time.
however, this doesn't seem true anymore because the port exposed is now accessible from other machines in the network.
chrome os version used for testing: version (official build) dev (64-bit)
the application crashes when trying to save apps vpn mode settings
when downloading app from google play, it will stuck at "download pending", app will never be downloaded.
swipe away the snackbar does not work, however, 'undo' buttons do.
dns packet is not forward to configured dns server after network switch.
once a plugin (in my case, v2ray-plugin) has been enabled for a profile, that particular profile can no longer be selected as a udp fallback profile.
it does not even show up in the list.
even if you disable plugin for that profile, it will not show up again.
a clear and concise description of what the bug is.
on android p, we make "start on boot" checked, then restart my phone, after rebooting, the vpn service not start automatically.
follow phofurl to use transproxy mode.
works well on the phone itself, but usb/wifi tethering won't work.
after a recent os update (9.0.3) phofhyperlink , it will disconnect after some time.
i had turned off optimazing battery for shadowsocks.
i also tried disable adaptive battery but with no luck.
a clear and concise description of what the bug is.
i hope to use ipv6+ipv4 like json.
the default timeout for shadowsocks-android client is 600s and not configurable.
it is reasonable if the connection is routed to the ss-server, however, even when the destination is in bypass list, the connection get teared-down after 600s.
profiles.json can not be selected from file.
the file is greyed out.
when dns forwarding is turned off, ss-android somehow uses opendns as the nameserver.
connected to server but no packets sent or received.
when exporting a profile to a qr code or to clipboard within the app, any apostrophes ( ') contained within the remark/tag/profile name are not url-encoded to %27.
this causes shadowsocks android to truncate the profile name after the first apostrophe.
i have a fossil q android watch which use bluetooth to connect with my phone, but the watch can't connect to banned website like google etc.
a clear and concise description of what the bug is.
it seems like the apps vpn mode is not functional on android pie.
for example, even if i select the wechat and then turn on the bypass mode, the wechat still need to go through vpn when it loads figures.
i just downloaded the latest version and compiled for tv version.
after installation on my tvbox, no application icon appeared on the desktop; i thus could not launch the app.
please check and fix it.
a clear and concise description of what the bug is.
if a hostname is used for the server, and that hostname has an a record and an aaaa record shadowsocks won 't connect if it has only an ipv4 address.
the application is stops if you click on the trash bin in recently apps.
a clear and concise description of what the bug is.
no internet after turning dns forwarding on.
can 't startup when set the route bypass lan & china and other mode, only startup when set to all or custom rules.
a clear and concise description of what the bug is.
just cloned the latest code from github, compiled it and install the compiled shadowsocks apk on my android device.
setting the proxy mode to gfw mode before started shadowsocks.
i repeated many times and check timestamp of gfw data, no any change.
however, when i install release version 4.6.1, everything worked fine.
so i wanna know, why version compiled by myself did not work?
any hints will be appreciated.
v1.9.4 reporting unidentified developer on macos 10.15.1
a clear and concise description of what the bug is.
i'm on mac os x 10.13.6 simple thing, when i switch to global mode, any website won't open on the chrome browser.
but all website works fine on safari
it appears that `kcptun` does not pay attention to the ssip003 environment variables that would allow it to receive information from `ss-local`.
this may be a bug with `kcptun`, i don 't know.
a clear and concise description of what the bug is.
a clear and concise description of what the bug is.
shadowsocks not working on osx, but working properly on android/ios.
ssserver log reports > error [errno 104] connection reset by peer but not sure if it related with the problem.
a clear and concise description of what the bug is.
shadowsocksx-ng the ssr server node works on my iphone, but not works on my macbook pro(10.12.6) with shadowsocksx-ng.
i'm trying to fuzz a login page which response with 401, but sqlmap shows an error.
i'm extracting data using an error-based vector: phofcode this injection extracts a password: phofcode but the extracted data has a wrong case, for example: - sqlmap extracted the string: `helloworld` - same payload manually in burp: `helloworld` - i've extracted the string with a custom injection `helloworld` (this is the correct password) using burpsuite databases names, tables names and columns names have correct case.
testing to do some ctf, (dc-3) from vulnhub, it is a joomla setup and the tables begin with #__ (using an osx machine with sqlmap installed with brew sqlmap version 1.3.10)
a clear and concise description of what the bug is.
sqlmap does not seem to actually listen to `set-cookie` headers when testing various sql injections (although it does when running heuristics).
this contradicts the wiki: > if at any time during the communication, the web application responds with set-cookie headers, sqlmap will automatically use its value in all further http requests as the cookie header.
second order injection using `--second-url` and the convenience option `--forms` chooses the wrong page to read the form from.
it incorrectly checks `second` rather than `first` (see below).
not sure if this is a bug but when running tamper scripts like this: `sqlmap tamper=base64encode --proxy= phofurl -r sql1 --fingerprint` there is no error but the tamper script does not run.
tamper scripts have to be run with this syntax: `sqlmap --tamper=base64encode --proxy= phofurl -r sql1 --fingerprint`
i don 't know if i 'm doing something wrong or i incurred in a bug.
i 'm trying to use sqlmap against the owasp juice juice shop phofhyperlink project but there is an issue when trying to expoit an sql injection using sqlmap.
connecting to tls 1.2 site defaults to using sslv3 and handshake fails.
mysql.user 'password ' column is now called (mysql version 5.7.26).
this breaks the --passwd option
if there is a sql query like this: `update users set age=1 where id=1` and the age is the parameter from outside like this: ` phofurl then, even if simple test payload `and 1=1#` will update all user data this is very dangerous
i've run sqlmap against an url before via `-u`, and after with `-r` because of some json data.
in the first case, it's all ok about connection, but in the second case i've a `connection timed out` error.
block app crashed when share stack dump
jq built for mips by using gcc+uclibc toolchain segfaults on any input.
`jq` throws a segmentation fault when `test` returns `true`.
relatively long input used with -r will cause jq to put 0a in a strange place.
phofcode outputs a unix timestamp 1 hour in the future (a value 3600 seconds larger than expected)
using jq to parse json and react to different responses, it acts like a bridge between modern rest apis and old fashionable bash tool.
however i find it painful these days to debug jq, what 's wrong with my filter here?
image phofimage of course it is simple enough to know that the error is that i try retrieve a key from a list, which is not allowed.
however the assertion message that jq prints merely is unuseful, and it always comes with an extra 'jq.exe.stackdump ' file.
i prompt that, jq should report more detailed and useful messages help improve the readability.and prevent the produce of 'jq.exe.stackdump ' everywhere.
a clear and concise description of what the bug is.
`fromstream(inputs)` filter always lose the first property
jq does not work inside docker without terminal attached
i get a compile error when trying to access a key that starts with a number.
i am getting an error in compiling using "compile-ios.sh".
the output of jq 's @base64d does not match the output of `base64 -d` for the same string
./configure make produces error output: gen src/builtin.inc gen src/version.h make all-recursive make[1]: entering directory `/root/jq-1.6' making all in modules/oniguruma make[2]: entering directory make[2]:
arithmetic operations combined with variable assignment leads to unintuitive parsing.
jq does not print the timezone correctly expanding the %z in the time format for strftime/strflocaltime when it comes to dst.
on windows environment jq doesn 't work for json key include "@".
if i extend an array with `|= .
+` there is an behavior.
if i use `--slurpfile` i got a nested array and without slurpfile i got a array as expected.
in msys2 nightly builds `halt_error` prints "jq: error:" before any output.
can "jq: error:" be removed from output?
the 1.6 release build from the official msys2 package repo doesn 't print "jq: error:", and niether do the linux builds.
the value of `input_filename` is not documented when input is read from stdin or when option `-n` is used.
when read from stdin, it turns out the value is not `null` but a string.
jq-1.6 behaves differently (and as i read the manual, incorrectly) when running map_values with a filter which includes an alternate `//`.
the readme file does not clarify where the docker image can be found.
i cannot tell which command in in my piped unix command emitted the error.
error is not properly raised when checking an assigned variable from the output of a previous try-catch block.
when i use jq like this : `foo=$(jq -n --arg bar "$toto" $test )` jq seems to add ' ' character at the end of $toto variable.
> "foo": ", i don 't understand why jq do that.
failed test on appveyor don't trigger a 'fail' on the test run.
formatting output with '@sh ' (or @text of course) changes the behavior of '--exit-status/-e '.
i wouldn 't expect formatting to change a 'true/false ' state.
i have a bug in my jq code (which i report to myself using jq 's error() statement).
but when i start trying to isolate the problem the error report changes.
caution: this is * not * a "jq bug" (in the sense of a hard error) this is "jq inconsistent behavior".
specifically, when processing what should be the same string, in one case i get jq: error (at <stdin>:1): expected '; ' at position 2546 got '} ' but in a different case (reading string directly from file rather than creating it using gsub()), get jq: error (at <stdin>:1): expected '; ' at position 1082 got ' ' (and string of other error() reports.
am not expecting that bugs in my jq code be solved here.
just want some hints about how can isolate problem.
(that said, am suspecting jq bug at root of this inconsistency, which is why am reporting it here.
and, if am right about that [sadly, often wrong], it would be good if that issue could be resolved within jq.)
invoking jq 1.6 for windows with no args in mintty (included with git for windows distributions) tries to read from stdin.
it doesn't show the help text like it does in 1.5 or in the windows command prompt.
building jq from git source shows the version as instead of some variant of `jq-1.6rc2-*`.
digging into the details, it appears that the file scripts/version phofhyperlink expects the tag to start with `jq-`.
jq doesn 't work managing arrays of more than 100 entries commands: command | jq '.invoices[100] ' i obtain "null" as output.
if i use command | jq '.invoices[99] ' everything is working fine my output provides an array of 108 records can anyone help me?
thanks to phofurl there is a way to specify the colours used in the `jq` output, but it 's not possible to change the field_color (used for dictionary keys for example).
in jq-1.5, square-bracket object property access produces a syntax error when the object is referenced via a variable.
this is a very obscure bug.
it appears to boil down to the type of apostrophe that appears in the text.
a ' (u+0027) versus a (u+2019).
this occurs when the character is in the data - not on jq script nor in sub pattern.
the simplest form of substitution is something like phofcode for data without apostrophe - (u+2019) - or with other, results are as expected: phofcode the "vx" is gone.
but put in (u+2019) apostrophe upstream and it goes wrong: phofcode note that v gone - but so are and space before it and preceding "s".
i 'm guessing this has something to do with character encoding, suggesting that multi-byte(?)
character messing with offset counts.
is there a recommended way of working around this, e.g., by transforming incoming text so it doesn 't corrupt substitutions?
the data looks odd because i 've trimmed down real case to bare bones.
the original data -which exhibited problem was this: phofcode surprisingly, neither square brackets nor colon played a role.
full scan pattern was supposed trim string down but instead ended up as:
the walk function says it, "applies f recursively to every component of the input entity."
however, it does not seem to apply to an inner object, after a match has been made.
a child object will not be matched if its parent matches.
when dst applies to the input time, the return value of `fromtime` is an hour later than expected.
how do you use storybook with a angular 5 project?
angular cli: 1.7.4 angular: 5.2.0
i 'm currently trying to develop an hybrid addon (working on both storybook web and storybook in react native).
everything worked fine until i used `useaddonstate`.
it still work in web but i get the `invalid hook call.
hooks can only be claled inside of the body of a function component` error when it run on the react-native app.
when using `npm run storybook`, storybook does not start and instead gives the following errors (seemingly related to typescript).
the application builds and runs normally via `ng serve`/`ng serve --aot`.
all titles inherit a position relative in the doc tab, this can be a problem in certain context where a previous component has an absolute position
the css resources tab does not consistently display the css resource selections specified in the global `.storybook/config.js` file.
on initial launch, the css resources tab is entirely empty.
subsequent refreshes have no effect.
the only way (in my experience so far) to force the css resources tab to display anything is to purposefully create an error in one of story files and then fix error.
the browser will refresh with resources available.
a subsequent browser refresh, however, will cause them to disappear yet again.
storybook does not work with yarn v2 at the moment, due to some lax-specification of dependencies and other not ideal practices.
this is discussed in detail in phofurl , and more generally in phofurl .
i think the effort on yarn's side has been done, the ball is mostly in storybooks side right now.
the full problem and workaround (which points to a solution clearly) is fuond here: phofurl
when using nextjs and it's styled-jsx storybook is rendering the `<style>` tags below each component in the dom which causes dynamic styles to be overwritten by what gets rendering in the last `<style>` tag.
in the following i have 3 buttons, i've selected first one and you can see its font-size 2.4rem which you can see is in 3rd (last) `<style>` tag.
if i set last button to small then all buttons would be small as that's what would be in last `<style>` tag.
image phofimage when rendering same normally there are no tags dom below component.
i 've been following this description phofhyperlink for setting up storyshots for a cra project.
i get this error message when running npm run test : phofcode
in the following example, the prop `onlydefault` will not be rendered by the props table.
when a component shows content that is absolutely positioned, the content is hidden behind a scrollbar.
a prop row shouldn't have top margin when there is no description image phofimage
in a javascript-based react application which uses prop-types phofhyperlink to specify the component apis, using `forbidextraprops()` from airbnb-prop-types phofhyperlink breaks the documentation of the props in the "docs" tab from docs addon.
another maybe related issue is that `prop-types-exact` is shown in props documentation.
but this isn 't that important.
this works: jsx const mycomponent = () => <div>...</div> mycomponent.proptypes = { /
using storybook 5.2.6 - 5.3.0-beta.3 with typescript the @storybook/addons-docs doesn 't show the propstable for any component wrapped in a hoc, for example material-ui withstyles.
the story error view does not escape the html tags properly, as a result the error is difficult to read.
i 've just upgraded from storybook 5.0.6 to 5.2.6. to get anything to work with typescript i 've removed all the definitely typed definitions and just rely on the built-in typings.
unfortunately doesn 't seem to have built-in typings yet, and if i include "3.4.8"` in the project (the latest available) it breaks the rest of storybook for ts.
it looks like storybook 5.3 will have typings for storyshots.
the workaround is to temporarily add your own typings file locally as e.g.
forwardref components receive `undefined` as `props` during `exractprops` step.
phofurl check out code snippets [1], [2] both are actually incorrect, since in react runtime you always have the `props` object presented, it just doesn't have any keys on it if no props were passed.
it throws an error when trying to view a components with react-router(s).
however, components works fine with the normal react-scripts start
whenever i modify a knobs field then try an action, there is an additionnal action emitted.
if i modify 20 times my knobs fields, i 'll have 20 events triggered for a single action.
source-loader produce warnings in the console when trying to use the following recipe : csf stories with mdx docs phofhyperlink .
the warning is raised when using : `<story
the interface/stories are not loading on internet explorer 11.
when removing the value from number knob a warning appears in console.
i use storybook for a typescript react component library for documentation and visualisation of the components.
at this point everything working fine except i cant see some code snippets in the storybook doc tab (see screenshot).
i use the csf for story description.
parallel we use mdx for doc only and some big or special components.
my codebase which previously rendered stories in version 5.2.5 is failing to load them in 5.2.6 and above, throwing the following error in the developer console: phofcode any idea what could be the issue here?
when exporting a component like the following, the docs from comments are embedded in the "docs" page: phofcode but it 's not the case if it 's exported like this: phofcode i 've tested it in new story style: phofcode
a clear and concise description of what the bug is.
i have just refactored storybook stories to be written in typescript.
now, the `select` add-on method asks for 3 - 4 arguments.
when i give it the third argument which is a default for color, the selection box no longer changes color / works / does anything.
typing a jsx element will prevent the documentation to render the story code.
phofcode upgraded storybook from 5.2.4 to 5.2.6. this warning message appears in browser 's console when i open the page in mobile view.
it doesn 't appear on desktop or in version 5.2.4.
jest doesn 't properly import `@storybook/vue` exports.
it shouts: phofcode if commenting out `addparameters`, then: phofcode
on a page rendered from a `stories.mdx` file with no stories defined (documentation only), i don't have a scrollbar even though the content is overflowing
running storybook locally `npm run storybook` doesn 't have any issues on displaying the all the props.
when trying to build for deployment `npm run build-storybook -s public --docs` the props data don 't have any description and is missing some props
adding a union type as optional seems to resolve to `any` in the props table.
story book is trying to add click listeners to all elements inside a panel addon.
this throws console warnings when the element is an iframe `backend.js:6 adding a click listener to iframe failed: domexception: blocked a frame with origin " phofurl from accessing a cross-origin frame.`
the alt+left arrow doesn't work right after a page load, but the alt+right arrow does.
however, after clicking on the canvas, alt+left arrow works properly.
the addon-docs uses a css class called `tag` which collides with css classes used in the style from the library it is documenting.
`addons-actions` failed to be triggered when in a `mdx` format of story
i am attempting to use colorpalette and coloritem from addon-docs but i keep getting this error.
the error is only visible in the canvas tab.
the story renders fine in the docs tab.
trying to run `build-storybook` under webpack 4.41 and babel 7.6 fails with the following: phofcode
i 'm not sure if this is a bug or something i 'm doing wrong but when trying to setup storybook and storybook add-on storyshot with jest i keep running into errors where components of storybook expect require storybook/react even though i installed storybook/angular.
i have a mdx file that renders the `props` for a component from a file with two components.
the default value for one of its props has the value from the `defaultprops` of the last component.
if i change order of them, it changes default value being rendered.
i am trying to use the latest version of `@storybook/addon-docs` within a vue app, and my storybook is erroring with the following stack trace: phofcode
when activating fast refresh on the device, modifying a story may (not all the time) cause the app to crash and display the following error : `type error: json.stringify cannot serialize cyclic structures` if i disable fast refresh and reload app manually (double r tap) it then works
upgrading `@storybook/addon-docs` from `5.3.0-alpha.33` to `5.3.0-alpha.39` gives the error: phofcode when using `<props of={ somecomponent } />`.
the default value of a prop is not rendered for a few typescript types: - func - symbol - array - tuple alias
sometimes it 's neccesary to show vanilla elements in a story to indicate.
however, when i do that, it 'll display verbose `<mdxcreateelement>` elements instead of the elements themselves.
i am using react, and some addons.
i was migrating from v5.1.11 to v5.2.5.
but type errors are occurred because `renderfunction` & `renderable` are not exported.
if we use `<source />` component phofhyperlink in .mdx file it doesn 't pass `dark` prop.
ts is throwing an error to compile in a mixed react/preact (private) repo.
i've nailed it down to the following line: phofcode apologies in advance for some lack of ts terminology, but the jsx namespace exists under react and preact, which leads to ts confusion.
an error is thrown because it expects stories to return a jsx.element, but without specifying that this should be a preact.jsx.element, it will resolve react.jsx.element (and there are some interface differences).
my proposal is the following: phofcode the change here would be declare the namespace of jsx.element more clearly.
i did attempt make a pr for this but was unable push my branch up origin.
do i need request access be contributor?
addon-actions does not work with the standalone approach in phofurl due to cross-frame constraints.
in addition, even without addon-actions, there are click listener warnings in console that suggest other things may be broken.
setting the "component" via `meta` in an mdx story.
that works phofcode this does not phofcode
functional components (vue components with functional keyword) do not render on storybook
in `extractprops` function for react, the code will always unwrap the component before checking if proptypes is assigned to the wrapped component itself (a relatively common pattern).
required column is missing in prop table
i have a storybook for my searchbar component, it will cause an error when i used storybook@5.2.4, but everything is normal when i used storybook@5.2.1 .
this bug is like this: phofimage
storybook throws an error if addon-viewport is used with csf format
i 'm trying to set up a basic webpack config for `scss` files.
i try to set up a custom webpack so i can use style-resources-loader phofhyperlink , i got some errors, i then tried to use the config provided in the documention phofhyperlink see my config as follow: phofcode but when running storybook get the following error (both on node 10.16.0 and 12.13.0): phofcode
i 'm using storybook in one of my packages in a monorepo using yarn workspaces and react.
storybook works as expected but i 'm having an issue when i try and run a basic storyshots test within this package.
i run my script `yarn test` which initiates `jest` and i receive an error that initstoryshots is an unexpected identifier.
if you happen to have styles defined using the `:host` selector in angular, they won't be applied if you're inside storybook despite looking fine everywhere else.
only the first change to a text or number field (probably other types as well) registers and causes the component to update.
it seems to be caused by there being a single `set` event (for which there is a listener) and no listeners for the subsequent `change` events.
there are two problems: 1) storybook starts with "no addons loaded" page.
2) after making changes to components "no addons loaded."
page appears again and warnings show up.
a clear and concise description of what the bug is.
when adding any kind of script (inline or src) to a story, it won't execute.
i found different issues telling that this is by design, but for quite a few use-cases this is a problem.
how can we make this work, or make it additional option to enable/disable script executions in stories?
i like storybook as it enables teams to do component-driven development a bit easier, but this only helps if storybook is as close as possible to production environment.
it doesn't make sense implement extra stuff because of technical design decision made by tool.
this is related to phofurl i disabled a story with: phofcode it works fine, the story is not visible anymore in the docs.
however the story is still available in the navigation menu and is clickable.
the `story` component in mdx only renders first child.
even the simplest storybook configuration throws error in the console if we are trying to use the addon-viewport (sometimes work after hmr).
tsconfig file path, using by storybook/angular tsconfigpathsplugin here phofhyperlink , is 1. taken from angular.json config and ignores 2. even that one from angular.json is wrong and is related to another application in workspace (app1 instead of app2 in example repo) console.log of phofhyperlink shows phofcode despite we're running storybook for app2 and have a file
i 've tried to get the following working with the docs addon, but compilation results in an error:
in yarn.lock file you are referencing a repository with the git scheme and get the following error when trying to run yarn command.
phofcode from phofcode to phofcode allows me to complete the yarn command.
trying to use the function export supported by webpack, which can take an env parameter and can allow passing environment parameters to webpack.
it is not clear from the storybook docs, how to achieve this
if a prop have a default value, it will be displayed in the props tables before a prop without a default value.
is not compatible with `@types/react@15` and it fails because it uses something from react 16. i cannot have both react types v15 and v16 because it fails really horribly so i had to use the `resolutions` prop to force the v15.
but then i have the error with those types that are only being used by image phofimage
my component define the following property: `initialvisiblemonth: oneoftype([momenttype, func])` the rendered prop in docs props table is: phofcode
my component define the following property: `position: oneof(positions)` with the following positions definition: phofcode the rendered prop in docs props table is:
i 'm trying to create a custom addon to allow theme switching from an addon panel using material ui.
this means using state shared between the panel and themeprovider wrapped story.
when using the `useaddonstate` hook from '@storybook/api ', `useaddonstate` inside an index.js file for a custom addon produces the error cannot read property 'getaddonstate ' of undefined.
the hook works fine in the register.js file
when using `<preview />` to render a component in a `mdx` file, it doesn 't show the code sample unless the sample also defines a story using `<story />` in the child.
when using mdx as a source of doc, not wrapping the html in a story component strips all classes.
when trying to use jsx from @emotion/core, it mess with the auto-generated documentation (docspage)
angular throws exception when hmr loads updated chunk of code.
in case new received component you will get no error, since it would be another function declaration / class (it physically placed another js file `*.hot-update.js` file).
in case old dependencies (which are not changed) you will get exception.
when using storybook with react-native, `yarn storybook` which runs `start-storybook -p 7007` prompting > port 7007 is not available.
would you like to run storybook on port 7007 instead?
my component have the following default props: phofcode with the following named function: phofcode the rendered default prop in docs props table is: phofcode
my component define the following property: `items: with the following item_shape definition: phofcode the rendered prop in docs props table is: phofcode
- i have a react ui library in typescript that is built locally using rollup.
then i am referencing it using `npm link` to a cra3 + typescript that has storybook integrated.
my storybook project is separate from the ui toolkit package.
i followed all the docs related to docgen to generate props table from my typescript component.
storybook provides an error while using empty row inside multiline template in mdx files (docspage, angular) phofcode
with the new docs addon, navigating to a story by clicking on a link from the menu always animate from the top of the page.
this is quite annoying when you have a long page.
is it possible to have a config to disable animation and maybe use browser native anchors instead?
weirdly i 'm getting "parameters" key inside my theme object in some levels?
none of this happened in 5.1.10. trying to figure out what has changed to make this happen.
i also now see this in my console... phofcode
`es module` story was added for each of my stories.
i am really not sure what's going on, but the thing is that i am building some *.stores.mdx files to document a project and some of my css classes are not rendering.
the weird thing is that some of them are correctly rendering, and some of them are not.
i set `ondeviceui` to false to avoid #8274. but `ondeviceui: false` causes error message `typeerror: json.stringify cannot serialize` when use `action` addons or run fast refresh.
phofcode react native > 0.61 storybook packages > 5.2.1
using ts with csf and source-loader (in both ways, directly using addon-storysource or using addon-docs), specifying
a clear and concise description of what the bug is.
invalid style prop being used by textinput, generating react-native error on it looks like this was introduced when converting from style template string to style objects in the following pr.
phofurl as the style was in the template string though, i 'd assume emotion did some filtering which was preventing this error in previous versions downgrading to "resolved" this error for us.
i was trying to contribute a preset as advised by @shilman for setting up tailwindcss, the first step towards that was to setup an advanced preset configuration and copy the working config from `webpack.config.js` to `my-preset.js` and import it to `presets.js`, everything else that was copied works except tailwind.
when defining a react component with a class extending from `react.component` the type and docgen description do not appear in the props table.
functional components seem to work fine.
edit: sorry didnt realize i couldnt tag the issue.
this pertains specifically to the docs page addon when i create a component like this: js export default class test extends react.component { static proptypes = { /
passing a context through a decorator doesn 't work as expected.
not able to see additional metadata of props in the props table, when using the addon-docs.
when you use a 'copy' button in knobs addon, if any of the input values contain symbols like `#`, `&`, `?` , it is added in the url 'as is' and breaks it.
i'm using storybooks with angular and would like to implement a custom serializer.
the reason is that some of our 3rd party dependencies are generating unique id's every time, so the snapshot changes on every render.
i would like to ignore these properties.
the documentation around snapshotserializers focuses on enzyme and react, but it does not describe how it may work for angular.
so, i analyzed the source code.
the storyshots renderer for angular phofhyperlink is using the phofhyperlink from jest-preset-angular, which is not configurable.
it looks like the only solution is to copy all render logic from here phofhyperlink , and make required changes.
the docs panel doesn 't seem to display a code preview when using a regular old `function` in component story format (csf).
instead, "no code available" is displayed.
looks like it only works for arrow functions.
not a huge deal of course, can work around it by just using arrows instead :)
in a react native app, launching `storybook-web` with `npm run storybook-web`, trying to get the story of a component using i get the error `(0 , is not a function` image phofimage
zooming in and out impacts the look and feel of the docs view zoom-in-out-bug phofimage
storybook with does not pick up my custom webpack.config.js when running `yarn storybook` (start-storybook).
this works when i'm doing it in web context but on react-native it will not load.
am i doing something totally wrong here or is this even supported?
can't find any documentation that this do not work on react-native.
i am using the knobs addon for my stenciljs project and it is technically working (if i set the component prob within the story it is changing it, for example: look at the story file and then component, you will see that it is setting it - and does).
but i cannot see addons panel.
i think have done all set up correctly (addons.js, package.json, etc).
i have tried selecting show addons option inside of running storybook but nothing is displayed.
how i am running with `npm run storybook`
create-react-app:3.2.0 has a bug where it will expect a "@babel/generator" that matches "7.6.4".
if it 's not there, it will ask the user to select a lower version.
this doesn 't prevent created app to run, but the msg gets prompted every time you try to do a yarn install.
when you try to 'npx -p @storybook/cli sb init ', it will throw an error: image phofimage this prevents me from being able init storybook onto my project.
i update the storybook in 5.0.11 to 5.2.3 and have a regression bug with knobs.
when changing values in knobs, react component not reloading with the correct value
when i click on the docs tab, i get the following error: phofcode *i think this error only started happening after `5.3.0-alpha.7`.
i tried to set my prop with a text knob to "me & you".
in the textfield of the knob it shows the ampersand perfectly, but not the prop itself.
the inclusion of storybook inside a react native app seems to remove the implementation of causing the is not a function error` to occur.
the problem is that i get runtime exception, when i open some story of some angular component.
the component is not starting.
if the variable has been set, it won 't be taken into account for loading the proper `.env.${build_target}` file as documented here phofhyperlink in the "file priority" section.
html/jsx tags in error messages are inserted into the dom as html.
error such as: > `invariant failed: you should not use <link> outside a <router>` is displayed as: > `invariant failed: you should not use outside a`
i would like to apply some global style (reset.css to be precise) to the stories.
but i don't want this style to affect the rest of sorybook, and be more precise, affect the docspage.
i updated `config.js` in order have each story in its own iframe in the docspage: phofcode i added reset styles in `preview-head.html`.
but reset styles are applied each story's iframe and docspage iframe
it doesn 't seem possible to overrule the styles for headers in markdown, that is injected via the addon `addon-info`.
following the learnstorybook tutorial, everything is fine until i use the following for `presets.js` for docs addon.
then every story has the following error: phofcode phofcode i have cleared the `node_modules`, and deleted `package/yarn.lock` file and tried reinstalling everything.
when using a select knob with _
i 'm using `addon-knobs` along with `addon-docs`, and i 'm having a hard time getting the two to work well together.
within my `component.stories.mdx` file i have the following: phofcode i 'm using `defaultprops` as a helper function for all of my stories in the mdx file as they all share the same props.
the problem i have is that when this renders in storybook docs page it shows function call instead of all of props.
<img width="873" alt="screen shot at 10 47 56 am" src=" phofurl if i don 't use a function to generate these, i still see `addon-knobs` function call instead of actual prop value.
<img width="846" alt="screen shot at 10 48 55 am" src=" phofurl
my angular application has the following config in `angular.json` phofcode when i build the app, i end up with 3 css files: `styles.css`, `theme-light.css` and `theme-dark.css`.
the 2 theme files get build into separate files.
`extractcss:true` tells the compiler to build separate css files and `inject:false` tells the compiler not to insert this css file into index.html.
at runtime, i insert related stylesheet according to user 's theme settings my intentions with storybook are now to use in order switch those theme files within storybook.
however, when i run storybook, it does not respect this setting from `angular.json` but produces one large `main.css` which contains styles from all those 3 scss input sources
when using `react.forwardref` the prop types table is not correctly generated.
from the moment i remove the forward ref stuff everything works as expected.
another thing to note, which might be related, is the fact that story source loader also corrupts and is unable to show component name when using forwardref.
we are using storybook 5.2.1, and have found our builds to be recently failing with `unable to resolve path to module with no changes.
happens locally and on the build server.
we recently upgraded storybook from v4 to v5, which was working before.
the branches on the old v4 continue build.
all branches on v5 have started fail with no changes.
i followed the manual setup in guide page phofhyperlink with empty project and got these errors.
when running the codemod script to migrate storiesof stories to csf format, the command throws the following error: phofcode i 've already tried everything suggested in #8267 but nothing worked so far.
button knobs get an extra callback added for each hot reload of storybook.
many source code changes results in button knob effects getting applied many times.
the default styles of the material-ui components are overriding my styles.it is happening only in the storybook.
i have a custom component using a custom hook.
the hook runs an assertion on the context at runtime.
i don't know why, but it looks like the source loader runs parts of its logic on _my_ context/hook which throws an error.
when a user loads a doc page, the page automatically scrolls to the bottom of the story.
it should scroll to the top or provide a way to disable scroll altogether.
storybook 5.2.x no longer works with react 15.x.
seems to be an issue with emotion
description related to the component or to the props are not displayed when component is based on styledcomponent.
by default media assets are handle with the `file-loader`.
phofhyperlink they are correctly hashed, but not served with a `cache-control` header.
if you use storybook as a live preview while developing a component this will often trigger multiple requests to these assets even though they weren 't changed.
this is the case with styled-components which trigger multiple requests for fonts, for example.
due to the way this triggers re-rendering of the fonts layouts can "jump" around.)
after upgrade to 5.2, all the image snapshot tests are failing.
it is because `filename` is `undefined` in `context` that is exposed from i guess it has something to do with a new way we call `configure`.
nuxt does not seem to run when `yarn run dev` is started a long with storybook.
i have a `// @ts-check` comment on top of every file and i 'm using `uglycommentsregex` to remove it from the story source.
this works, however the highlight for the selected story shifts by two lines, the same amount that was removed from top of file.
after upgrading to storybook 5.2.1 from 5.0.11 i was unable ot use storybook in ie11 due to a compilation error.
i was able to track this down to the bundled module from where there are arrow functions.
there is a mention of storybook 's own storybook page in this section: phofurl however, the link does not contain anything relevant
(both on `latest` which is `5.2.1` and the most recent alpha which is `5.3.0-alpha.4`) _works_ but is buggy on app launch out of the box on `react-native@0.61.1` and `react@16.10.0`.
on app launch you get 2 `yellowbox` warnings, one because has been renamed and the other for `componentwillmount`: yellobox error on the ios simulator phofimage which seem to be related to `gesturerecognizer` using deprecated lifecycle methods.
the bigger issue though is that app launch, after you dismiss yellobox errors, addons panel shown right above actual preview viewport even though it hasn 't been activated and bottom toolbar indicates preview what should be visible.
switching to navigator or addons then switching back to preview resolves issue.
it 's getting a little annoying now that react-native@0.61+ ships with "fast reload" which enabled by default so any file change causes app reload that triggers this ui bug.
installing storybook triggers a peer dependency warning: phofcode
text for `<code>` is rendered as white text on a white background.
a clear and concise description of what the bug is.
docs pages content disappear due and the following error is in the console `typeerror: "l.window.docsearch is not a function"`
when using the suggested configuration in the " typescript config phofhyperlink " section in the docs, it does not discover files that use csf.
when using the `?full=1` query parameter, storybook displays in full screen mode as expected.
however, if i use `addparameters()` in config.ts this seems to override the query parameter and storybook is not displayed in full screen mode.
this occurs even if i don't set the `isfullscreen` option
knobs don 't continue to update the component.
the plugin docspage does not take into account the docstring of my component's props.
building with `--docs` no longer just builds the docs tab.
it has the canvas tab as well.
after updating to storybook 5.2, the props section is rendering fine when running via storybook locally but after generating a static app with the storybook build, the props section either does not show up or the descriptions are missing.
attempting to use `<meta title={ 'title '} />` in mdx results in errors saying that no title was specified.
similar errors occur for <story /> tags.
instead mdx _requires_ use of the optional `<meta title="title" />` syntax
when using a component with a decorator, the component description and proptype descriptions do not show up.
removing the decorator from the component allows them to show up.
`a11y` parameters _at a story level_ affect other stories.
probably they aren't reseted correctly.
when trying to switch to csf none of my stories were loading.
looking at the docs it seems like you can now call configure a little differently: phofcode when i switch my `config.js` to this the csf stories load.
but when i use the old way i am greeted with no stories and no helpful error message.
this is more a question.
and possibly a bug report for ts typing.
before storybook 5.2, it was possible to return an array of elements from `storyfn` like this: phofcode after upgrade to 5.2 the code still works but typescript reports following error: phofcode in some other cases the error is different (but essentialy the same): phofcode the question:
this is under the assumption that flow is supported...if not then i guess we can close this!
using flow typing, docs seems to be unable to pick up on "enum values" for example: phofcode i noticed this in the docs phofcode but i 'd rather not use prop types since i 'm using flow
we have upgraded from `5.1.9` -> `5.2.0` however now we are getting a few errors regarding knobs.
has anyone else experienced this?
also are there changes we maybe need to implement for 5.2.0?
i have a react component with a callback as prop.
in my storybook i want to trigger an action from within this callback when a knop has a certain value.
unfortunately it only works when i wrap it in `settimeout()`
when composing a story using new csf format, all stories show `no code available`.
after upgrading to storybook@5.2 and adding mdx support to a vue application created with @vue/cli - the doc tab is is throwing following error: phofcode
the `<code>` tag is not correctly styled when using the dark theme from `@storybook/theming`.
the background is light causing it to be impossible to read.
for the first story after `storiesof`, any `storydescription` is not shown.
when you have a story with only disabled buttons, the color-contrast rule isn't triggered.
i'm noticing color-contrast is running properly on all other stories.
only not working on the story with 100% disabled buttons.
having two modules with a matching starting name, and one of them with a # symbol, makes one of the modules disappear.
i did two things and failed at it and i 'm not sure if it 's my fault or a bug in storybook.
first thing: i converted my existing stories to the new component story format using the codemod in the migration guide.
(this part worked mostly fine ) second thing: i used an es6 proxy for the first time, to toy around with proxies, with goal of having a little bit nicer syntax for abstracting my story titles away and to avoid string interpolation.
precisely, i used phofcode instead of phofcode this causes storybook to fail with a `typeerror: cannot read property 'tolowercase ' of undefined`.
was able narrow it down part where am using proxy.
can console.log it in story and it correctly say `layout|footer` can also use in old `storiesof()` format stories without any issues.
once use a default export like: `export default { title: };` fails with error message above.
every 1-5 times when i build my storybook it crashes to build with output saying that phofcode .
we'd like to move to csf and the `storiesof-to-csf` codemod would be very helpful in doing that, but none of our stories will load after running it.
when creating stories for a docspage with an mdx file, the code preview underneath the story seems to have the wrong indentation, even though it 's correct in the file.
the styles applied to `<hr>` tags in documentwrapper and documentformatting cause the element to render invisible.
see phofurl phofcode applying `border: 0 none` with any color results in nothing being displayed since a horizontal rule has no content and only the border is shown.
this should likely be setting border-top instead, similar to what is done in theming phofurl phofcode
when using a dynamic title for a story, storysource will not be able to find the corresponding source code for any given story.
in "canvas" view, storysource shows the whole file but does not jump to the correct line when selecting a component in the navigation.
in "docs" view, storysource gives up and says "no code available".
"no code available" is shown in docs preview when a variable, `parameters`, is declared at the top level in a csf file.
whenever i hit refresh the preview disappears.
the preview loads whenever i use the navigation to go between stories.
@storybook/components is using an older version of react-syntax-highlighter that imports old versions of babel.
i believe it is missing a peerdependency on the package 'babel-runtime' that isn't getting resolved correctly.
the updated react-syntax-highlighter references '@babel/runtime' and therefore builds properly.
i've tested this change and confirmed that builds pass, however the react-syntax-highlighter api has changed so the component needs to be rewritten.
first off, it 's my first time using storybook.
so i followed the tutorial in the documentation in the angular section as it is.
but storybook doesn 't work as expected.
since i 'm using scss for my angular project, i also extended the config with this code as stated in document as well.
the addon-docs preview block has a `withsource` prop that can take the following values: 'open ', 'closed ', or 'none '.
the `withsource="none"` prop doesn 't seem to prevent the block from trying to load the source code, and displaying a message if it 's unable to load it.
when i change contexts, the component story does not refresh to reflect the change.
i have to select a different component for the change to take effect.
if i write stories that use the contexts addon, and then switch to a story that does not, the toolbar icon persists.
if i load a story that does not use contexts add-on first, the toolbar icon is not present... so i would expect it to go away when the process is reversed.
the storybook server doesn't startup.
> warn broken build, fix the error below.
> warn you may need to refresh the browser.
during storybook install ( npx -p @storybook/cli sb init ) .
typeerror: cannot read property 'undefined ' of undefined
when a component with css `position:fixed` is displayed on the docs page, it's fixed to the viewport, leaks out of the preview box, and does not scroll with the page.
i've noticed that adding `transform: scale(1)` to parent of `position:fixed` component (tried it by pressing zoom button) clips and bound `position:fixed` element correctly.
an error is raised during the `yarn bootstrap` execution, from a clean repository clone.
actions not firing/appearing in action logger pane when `action` is added to a custom component (i.e.
i need to import html as a string into my stories, but by webpack config instead appends the imported html to the preview iframe, even in unrelated stories.
using create-react-app + typescript, with storybook and semantic-ui-react + fomantic-ui-less.
the less loading process with less-loader in the webpack override takes a long time, 2-3 minutes on start up and on change.
i 've followed the installation guide in the official document phofhyperlink .
i got the following error: <img width="436" alt="screen shot at 10 02 08 pm" src=" phofurl moreover , after i hit refresh on the app side, it shows `please open navigator and select a story to preview ` it doesn 't matter which preview i click, preview does not show on app simulator.
<img width="1374" alt="screen shot at 10 20 19 pm" src=" phofurl
notes are displaying from center of box.
in 5.2 it doesn 't look like the storysource webpack config works any more.
we should replace with a preset anyway: phofurl
in my current project, a vue app generated with the vue cli version 3.11.0 the renderer option appears to be ignored.
after upgrading storybook from 5.1.11 to 5.2.0-rc.0 i get an unsafe-eval csp errors in the console and the application doesn't render properly.
it happens both in development (start-storybook) and when running the production build.
i'm using an express middleware to add csp headers when serving files that looks like this: phofcode what i've got from looking at the stacktrace it seems to be due to calls `telejson`'s parse function.
let me know if you need some more info!
using `addon-docs` with `csf` components, that feature a dynamic title fails to load, throwing an error instead.
this happens if the `title` is using a function or a tagged template string.
the docs tab gives the following error on stories with react hooks: phofcode running the same stories in the preview tab does not give an error
following the release of legacy "hot module reloading" and "live reloading" have been merged in a single new "fast refresh" mode to hot reload components (more details in this blog post phofhyperlink ).
unfortunately, this new mode does not work with storybook as i get ` warn story with id button--default-view already exists in the store!` errors when fast refresh kicks in.
since livereload isn 't an option anymore, it makes developing components with storybook highly impractical as you don 't have any refresh anymore.
as you know, many companies are using storybook and some might have hundreds and thousands of variations in a single storybook (and even more spread across several storybooks).
storybook v5 is slower than its predecessors and has so far prevented us from upgrading to storybook v5.
to test the regression, i've set up a new with the latest version and minimal customization.
then i've run it with different amounts of variations.
each variation holds ten stories: - with just one variation (i.e.
10 stories), switching between stories happens nearly instantly.
- with 100 variations (i.e.
1000 stories), the animation frame task takes 400ms (see screenshot).
- with 1000 variations (i.e.
10,000 stories), my chrome tab froze.
i can not understand what it depends on.
sometimes it works, sometimes it doesn't work
my repo: phofurl unable to do storybook build: npm run build-storybook throws an error: phofcode
using gatbsy themes & typescript, i 'm trying to implement a storybook build to be able to view the components, however it 's falling over on the sass loaders and i can 't figure out which is missing or why it 's erroring, as the error isn 't clear.
i 'm not using css modules, but the files are written and imported in a similar (but not-scoped) fashion `button/button.scss`.
components with scss or less (probably others too) `styleurls` dont load in storybook.
the following error message is printed to the console: phofcode the referenced stylesheet seems to be loaded as a module, where it should actually be a string (see screenshot below).
the "in app" storybook navigator works just fine, but with browser, when changing the story, the app screen goes blank with `please open the storybook ui...` text.
updated from storybook 4 to 5. see details and screenshots below.
when you switch stories, the browser gets slower and slower; you'd have to be in a situation in which you'd easily observe the performance drop, see the steps below
my stories don 't appear in browser.
on (android) simulator i can see the stories i have also tried running `adb reverse tcp:7007 tcp:7007` this command and nothing happens i even changed the port then also nothing happened
i 've installed storybook in a gatsby project.
it was working fine after adding a custom webpack config according to this page phofhyperlink in the gatsby docs, but not anymore.
after adding postcss, postcss-import, and tailwind to the project, storybook throws an error phofcode on this line, and two others like it: phofcode the gatsby project itself runs fine, but it 's like storybook isn 't using my `postcss.config.js`.
it should use `postcss-import` to grab those files and tailwind to process them.
changing those imports `@tailwind base` gets it build successfully, but those directives are output as-is into a style tag.
that 's what makes me think it 's not seeing the config.
when using addon-docs, using a vue component in markdown throws an error.
just importing _addparameters_ into my story causes the build to break.
it does not launch when you run `yarn storybook` or `npm run storybook`
when switching between stories, if you never click back on the canvas the components in iframes on the docs page dont change.
the markdown does change however.
can 't run js functions alongside html of story.
i need to run a jquery function once the page loads, and none phofhyperlink of the methods phofhyperlink (using event listeners and `domcontentloaded`) i 've discovered seem to work.
it 's a quite strange error, but storybook doesn 't deal with external `defs` params from additional `svg` inside the same dom window.
more interesting to admit, that all works normally once `defs` params is inside `svg` icon itself.
i 'm trying to periodically log actions of deep objects.
because the default view is only one level deep, it 's stringified, however, this wraps a bit oddly in certain circumstances.
ideally i 'd be able to use the default object representation, but be able to specify it should be expanded n levels, as well as not having the wrapping array around it.
if it is something possible via a decorator, that would also be fine, but i couldn 't see how to do that.
function props not work with addon-knobs because the function is not properly serialized to json.
despite the known `:first-of-child` error from phofurl the latest `@next` throws phofcode
a clean install of vue and addon-docs preset doesn't work.
the storybook page in the web browser isn't updating when you click different stories.
it always shows the first (in my case, the welcome story that is included by default).
it does update on expo in the connected ios simulator.
i'm using 5.2.0-beta.25 as with 5.1.x, preview in navigator tab on ios wouldn't update from selecting stories.
latest storybook and angular doesn't work together @angular version: 8.2.0 @storybook/angular version: 5.1.10
when calling =>` as specified in the docs, story is undefined.
i follow the steps of storybook to react native but got this error when i run the app.
require cycle: node_modules egenerator-runtime untime.js -> node_modules egenerator-runtime untime.js require cycles are allowed, but can result in uninitialized values.
consider refactoring to remove the need for a cycle.
undefined is not a function (near undefined is not a function (near
the following usage (in phofhyperlink ) of `object.assign(...)` in the ejs template for the manager is incompatible with ie11: phofcode additionally, it 's ineligible for babel transformation since it 's embedded in a `<script>` tag
i am trying out the beta for 5.2 and have converted several stories over to csf.
what i 've found is that when running storyshots, all of the stories in the csf style end up using the generic snapshot path/file instead of creating snapshots adjacent to stories.
on macos catalina, when running storybook server with the `-h` option, without `www.` prepended to the domain, storybook works as expected, but the top bar with view options (a simplebar) does not show.
when i use a ul element in my story it is styled by storybook.
hello, i'm using create-react-app 3.0.1 and trying to setup the storybook.
i've set up automated snapshot testing of my stories and now i want to add context addon.
but when i run `npm run test` i observe the error that jest can't parse the file.
when used the new component story format with latest 5.2 beta, the hot reloading stops working.
reverting back to old format all works.
adding ends with displaying warnings below.
i use react in my project.
unable to create story, i'm using angular `8.1.2` and storybook `5.1.10`
using the proper parameters, the bottom navbar should start as hidden/collapsed.
however it does not seem to work.
if you use a title or a nested folder in your story name, `addon-info` shows an ugly title and does not show the documentation for the component
an error is received when attempting to embed markdown documents within a doc page story (mdx file).
error states `failed to execute 'createelement ' on 'document ': the tag name provided ( '# markdown file....`
changing a knob back to its default setting is not reflecting when opening canvas in a new tab.
when opening the story canvas in a new tab, the previous selection of the knob is still active.
so for example a boolean is still true instead of false (default value).
this is also reflected in the url parameters, witch shows true even after boolean set to false (default value).
i 'm trying to update a project to use latest beta (5.2.0-beta.18), but running into issues which i think i 've narrowed down to the knobs addon.
i 've stripped out all other addons and am still receiving this.
full stack: error: storybook preview hooks can only be called inside decorators and story functions.
at usehook ( phofurl at usememolike ( phofurl at useeffect ( phofurl at registerknobs ( phofurl wrapper
in `@storybook/addons` 5.1.9, addonstore has a bad import of this was fixed in commit 9fb7217 phofhyperlink , but doesn 't seem to have made its way into a patch release for users still on storybook 5.1. needs to be imported as such: phofcode but in `@storybook/addons`, in `index.ts` (the version on npm), it 's imported as: phofcode
calling `configure` from `@storybook/react` more than once in your `.storybook/config.js` file works just fine in dev mode.
all stories for each call to `configure` are present in the storybook.
but when invoking `build-storybook`, only the stories from the last call to `configure` are present.
when adding the context addon package to my project as suggested in the readme.
i receive the following warning from yarn: phofcode it appears that these two packages are listed as peer dependencies in the `package.json` of however readme doesn 't mention that these two package should be installed 'manually '.
using the notes add-on for the initial story that is loaded crashes the app and throws a js error any story selected after the initial one will not crash
as of `v5.1.9` i could use arrays or any custom type as an option value with the `select` knob.
this functionality is now not allowed as of `v5.2.0-beta.
we are trying to use storyshots with puppeteer to take snapshots of our storybook and integrate it to out ci jenkins pipeline, but are running into many problems when using it with docker, specifically these issues : screenshots are inconsistent, primarily each time we run the tests with the exact same project and storybook hosted locally, we keep getting these errors related to mismatched resolution and diffs show all pages are slightly misaligned the right.
image phofimage we have 107 stories and somehow this is what happens when we run in docker image phofimage 107 fails + 107 passes ?
i try to import an .md file in my `stories.js` file and use it as a context for notes.
but when i run `npm run storybook:serve` i get next message: phofcode
tsx is not supported inside of the .storybook folder.
on an azerty keyboard, there 's no dedicated key for `/` , it 's instead `shift+:`.
this means that the `/` shortcut for search does not work.
a possible solution would be to use the `key` phofhyperlink instead of the likely used charcode now
my storybook build is 238mb, it has tons of "docs" folders inside each other, it 's like a zip bomb.
storybook loads all components one by one (not all of them at once) and shows only the last one.
i try to create story for component which has a `changedetecorref` as dependency.
as result i got an error `can 't resolve all parameters for mycomponentname: (?).`.
if remove `changedetectorref`, all works well.
i can 't seem to get emotion 's phofhyperlink `css` prop phofhyperlink to work inside of storybook.
seems like emotion is now the dominant css-in-js library, and the `css` prop is emotion 's recommended primary way of styling components, so i thought i was choosing a well-travelled happy path here, but i 'm stuck.
i 'm very open to the fact that i 'm doing something dumb though, of course.
in my actual project repo i 'm getting the same thing described here phofhyperlink and here phofhyperlink .
i tried all of recommendations in both those threads, and still no joy -- and it looks like im not only one .
so, created a brand new react storybook repo to just hello-world using emotion css prop storybook.
and can 't get that work either!
wondering if someone could look at super simple repro repo made tell me where went wrong, here it is: phofurl i 'd be up for submitting a pr docs clarifying how do this, if someone can show me where messed up.
when running the on device storybook on react native, as soon as i select one of my stories, i get an error: `typeerror: cannot read property 'name ' of undefined`.
i have several components that use the redux store, functionally they work as intended.
however i am unable to connect to the redux devtools extension ( phofurl when using both basic (window.__redux) and advanced (npm package) setups for the extension in my store configuration.
i have a website on gatsby phofhyperlink .
one of the components contains such code: phofcode and because of this code, i get this error: image phofimage <details> <summary>error as text</summary> <br> <pre> error in 25:4 module parse failed: unexpected token (25:4) you may need an appropriate loader to handle this file type, currently no loaders are configured to process this file.
see phofurl | | return ( > <react.fragment> | {finaldata && render(finaldata)} | {!finaldata && <div>loading (staticquery)</div>} @ 79:0-30 @ @ @ ./src sync .story .js$ ./.storybook/config.js multi ./.storybook/config.js child htmlwebpackcompiler: asset size chunks chunk names 29.4 kib htmlwebpackplugin_0 htmlwebpackplugin_0 entrypoint htmlwebpackplugin_0 = 1.75 kib {htmlwebpackplugin_0} [built] warn broken build, fix the error below.
warn you may need to refresh the browser.
</pre> </details> i'm sure that error is only in storybook environment because when i run website using `gatsby develop`, everything works fine.
adding addon-info (dunno, maybe it concerns any addon, not just addon-info) phofcode to the configuration of preview makes it break - in the browser it shows infinite loading state and in console there is an error phofcode
most of the storybook examples have a white page with an error when `yarn storybook`
peer dependency for in the `@storybook/angular` package lists a required version of `>= 6.0` .
all versions for devkit appear to be `< 1`, with the latest for angular 8 being `0.801.2` at this current time.
if component contains any hand written service, storybook will throw an error > can 't resolve all parameters for ..
the contexts plugin works fine for me in the browser, but when run through jest via the storyshots addon a syntax error is generated.
when prop definitions arent set a box shows up saying "no component found".
this makes sense if it was a requirement to show props but some frameworks arent supported for that feature in docs yet.
therefore, i feel as though it should be removed.
i encountered an error while writing markdown in notes, the console suggesting that `children.trim` is not a function.
the strange thing is that only when i write the code block such as jsx will report an error, there is
when dark theme is enabled, markdown (notes) inline code is hard to read, because it is styled white text on white 'ish background.
when leveraging the docs plugin (@storybook/addon-docs) to render mdx files on an angular project that has pre-existing `*.stories.ts` files, an error is displayed when viewing the docs add-on.
console shows issue with styles.
upon upgrading to 5.2.0-alpha.39 the story type form @storybook/react started throwing a type error on build.
=> failed to build the preview err!
ts2322: type string | ((props: any) => reactelement<any, string | ... | (new (props: any) => component<any, any, any>)> | null) (new (props: any) => component<any, any, any>)>> ' is not assignable to type 'story '.
ok this is a fun one.
basically tsc complains about missing react typings, when trying to use `create` of `@storybook/theming`.
this is because: - `@storybook/theming` imports `@emotion/*` - which in turn imports `react` - which in turn requires `@types/react` - which would have to be installed manually which would then declare global `jsx` namespace phofhyperlink would then conflict with the `jsx` namespace of vue
prop-options are typed wrong imo phofcode knobs now only accept a key/value pair instead of e.g.
`string[]` my story with phofcode now fails with phofcode
storybook in react app isn 't loading emotion styles.
using storybook vue and notes addon, if any md has a code block with any lang specified, the app crashes.
i'm using markdown-loader for webpack to handle this files.
`yarn lint` fails after #6923 is merged
when building storybook statically, the stories using `rewiremock` crash.
storybook will not run if the project has a dependency on 'request'.
when upgrading to `@storybook/addon-info` `5.1.9` i receive the following error: phofcode
when using storybook, the user can type in the search input to filter down to matching stories.
if the user hits the enter/return key, app does a hard refresh.
when adjusting properties on an angular component via a knob, the angular component interactions start having issues.
storyshots require-context.macro causes start-storybook build to fail
i 'm creating a library with
addon centered causes component to show up in the center of the docs view which is not the expected result.
i'm develop a modal that uses csstransition to animate itself but when i make this storybook show me a error.
> invariant violation: element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.
you likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.
if you try and use storyshots while using the docs addon, jest will try and import the mdx file, which will result in syntax errors (it not understanding markdown code and all)
click sidebar get more menu icon button; at the console: warning: received `false` for a non-boolean attribute `loading`.
building docs fails when running storybook build inside the docker container.
it works on the local windows machine (storybook start, storybook build).
it creates build/docs and build/docse2e.
but as soon as ran inside the docker linux container, it fails at build step.
hard to describe, but the knobs are not working unless the options are directly defined in the props of the story.
i normally define a props variable i can share between stories for common data.
if i put any knob options in this props variable it will not display in knobs tab in storybook.
occasionally if i refresh page can see both select knobs, but if change `width` one it will just disappear completely.
the `widththatworks` has no issue and does update storybook properly.
after updated storybook 3 to 5 the 'actions addon' throws cors error when an action is performed.
figured out that setting the 'depth' option to 2 or less is a work around and no error appears.
posting bug report hoping any better solution may be found.
i am trying to integrate storybook and yarn pnp, without success.
when using cra and "jsconfig.json": if i set "path" property to solve imports alias, the app works as expected running cra, but storybook crashes saying it can 't resolve imports.
as reported by @rlecaro2 and @akaryatrh on #5183, jsx is not supported inside of the `.storybook` folder.
phofcode updated from storybook 4 to 5. this warning appears in the console when first loading the page.
on visiting other 'stories ' warning doesn 't show up.
i build a component in react using nextjs and use next-routes as the router.
so i create routes.js inside project and export by commonjs syntax for compatible with custom server.js to require modules.
the component in the project that runs by nextjs works well with import syntax.
but the same component that runs in the storybook environment cannot find modules that export from commonjs file (routes.js)
cli update message links to wrong changelog
when using `.mdx` to compose stories on the latest alpha release (`5.2.0-alpha.29`), renaming a story has the effect of creating a newly named story in the currently running storybook, but the old story and name still exists in ui.
a clear and concise description of what the bug is.
trying to import `withknobs` for the knobs on device add-on phofhyperlink fails; using code such as e.g.
phofcode does not work due to `withknobs` being undefined: screenshot iphone xs storybook github bug report import withknobs fails phofimage it seems this issue has come up before: phofurl importing `withknobs` from `@storybook/addon-knobs` instead of
`error: cannot find module 'raw-loader'`
when using a decorator to provide required modules to an angular component, storybook throws the error below: phofcode
running `yarn build-storybook` fails consistently after upgrading our dependencies.
the "compiling preview" step fails with this output (just a small sample): phofcode as one might expect, only test files that use jest globals are affected.
running the tests and the app, however, works fineonly storybook is failing.
in the pre-release `5.2.0-alpha.27`, the `stylesheetbase` for addons-info now has `height: 110vh` applied, which cuts off the proptypes table.
note: we are aware of the risk of using pre-releases!
in this case we are trying to get fixes from phofurl
addon-docs do not work for angular.
the docs tab throws an error and .mdx files do not load.
options knob throws `object(...) is not a function` error
attempting to update from `3.4.7` to `5.1.8` (also previously attempted update to `4.1.6` but had the same error)
just doing `yarn add @storybook/react -d` breaks our
one of the last storybook releases introduced a new behavior for ngmodules where storybook only declares components dynamically if they were not declared already inside of an imported ngmodule (see #6666 - thanks to @maximsagan for his awesome work!).
this new behavior also introduces an error with ngmodules imported by a static `forroot` method which is a really common pattern for angular apps:
i recently upgraded to storybook 5.1.3 and the notes addon no longer renders markdown from an external file.
when clicking on the notes tab i'm presented with a blank screen with js errors on the console.
first js error: phofcode next error: phofcode last error phofcode
not sure if this is a known bug already (didn 't see it as a pre-existing issue) but we don 't see our storybook rendering in ie 11. we suspect it 's related to `object.assign` not being transpiled somewhere: phofurl opening to see if others have experienced this issue, or if it 's likely a problem that 's locally scoped to our setup.
create the new project in angular with storybook ng new angular-storybook-app cd angular-storybook-app npm install @storybook/angular --save-dev npm install babel-loader @babel/core --save-dev i have follow the below steps mentioned in this site - phofurl
upgrade @storybook/polymer from 5.1.3 to 5.1.4 breaks storybook.
phofcode and some 4 more similar errors.
internal deps versions was not updated in 5.1.4 release
everything is working but i always have this error in my console.
it does not seem to be blocking at all but it's weird: phofcode
incorrect use of indexed properties resulting in ts2411 downstream when included by tsc.
trying to upgrade to 5.1.3 and my typescript based monorepo fails on definitions produced by @storybook/api, specifically ts(2411): phofcode
cannot use any addon because got the same error `unexpected value 'undefined ' declared by the module 'dynamicmodule '`
when one of my `storyshots-puppeteer` test cases fail, the storybook server prints an extra phofcode i believe this might be just that the storybook server is watching for changes in all of the files, including the ones on ?
as a result, my test suite isn't being ran successfully, it crashes with this oom error phofhyperlink .
maybe some kind of watch loop?
at the console: warning: received `true` for a non-boolean attribute `loading`.
the shallow rendered serialized snapshots broke after i upgraded from 3 to 4 and 4 to 5. it used to render the inside of my component: phofcode but now it 's rendering the ...outside(?)
js code snippet uses dark text when using storybooks dark theme, which results in the snippet disappearing.
when using the notes addon, there 's a react console warning: phofcode
after updating to @angular~8.0.0 and @storybook/angular~5.1.3 started to get unhandled promise rejections.
multiple can 't resolve 'core-js/modules/ ' errors, but only when using the .storybook/config.js to load all stories matching a glob method.
i'm using modulemetadata to mock some services in angular stories via knobs.
after updating to storybook 5.1, storybook does update the value from the knob via the service
at the console: the pseudo class ":first-child" is potentially unsafe when doing server-side rendering.
try changing it to ":first-of-type".
a clear and concise description of what the bug is.
the horizontal scrollbar is bigger than the chrome one and covers the addon titles: image phofimage
trying to debug via phofcode on windows, throws this phofcode
the "document components in markdown" link doesn 't work.
elements overlap (screenshots below) <img width="952" alt="screen shot at 11 10 42 am" src=" phofurl <img width="1792" alt="screen shot at 11 10 47 am" src=" phofurl
when writing stories like this: phofcode `ng update @angular/core` does not work correctly, throwing: phofcode `ng update` can't detect that the democomponent is in a dynamic module generated by storybook.
the issue is that the default viewport used is not implemented, when going to canvas to notes, then notes to canvas.
steps: 1. i added my own view port using the code below phofcode
storybook tsconfig does not point to the correct tsconfig to extend from
an anchor tag within a page in the preview panel iframe doesn 't take you to that position within the page, but reloads the top iframe with the page content.
if we use hooks within forwardref component, we receive next error: > invalid hook call.
hooks can only be called inside of the body of a function component.
this could happen for one of the following reasons: 1. you might have mismatching versions of react and the renderer (such as react dom) 2. you might be breaking the rules hooks 3. you might have more than one copy react in same app see phofurl for tips about how to debug and fix this problem.
after upgrading storybook-react-native to ver 5.1.3-rc, there is a lack of padding / margin around the app.
now i am not able to click on the add-on notes & knobs tabs.
the configured background only seems to 'appear ' when i 'm resizing the window.
had this problem since upgraded to angular 8 rc from angular 7, still getting it after upgraded to final angular 8 packages.
when trying to run newly added storybook (angular project with 2 angular libraries, which uses ng-packagr for build, and 1 angular ui app), getting this: phofcode when adding storybook to a fresh 8 project, getting this when trying launch storybook: phofcode
i am dynamically loading stories, but only the first 18 seem to get loaded.
the rest simply don 't show up on the left nav.
when running storybook in a package installed using yarn pnp, storybook does not start.
this is caused by the webpack config not using phofurl
when running `storyshots` the following error occurs.
running the storybook within the app on the device works as expected: phofcode
when using sotrybook within a yarn pnp project, we get this error: `trying to require the package "@emotion/core" without it being listed in its dependencies` here is how to fix this: phofurl fixes for phofurl do not fix this.
when installing storybook with a clean react-native 0.59.8 project storybook is not working due to react-native not being found in the haste module map.
here phofhyperlink is a repo to reproduce.
i can 't get the example code for background addond to trigger any console.log - phofcode
using vue framework initialized with typescript, typescript integration with storybook doesn 't work at all.
whenever one uses a gradient in the theme, the shortcut button will cause the entire app to crash.
notes add gets added to the top nav instead of the panel.
the reason i have qualified this as a bug is because the screenshot phofhyperlink on the notes readme phofhyperlink file shows that add on is part of a panel.
i can't find a way to disable accessibility tab in a single story.
in `config.js` i have defined decorator `adddecorator(witha11y)` and in some stories i want to disable this tab.
for example i have a simple component like input without label, so don't need to see violations related to missing label.
tried use `disable` option as in info addon (tab is empty there), but it doesn't seem work: phofcode and this code disables all rules not only in single story but every one phofcode and going further have a second question.
how pass specific axe rules for only single story?
i tried to use storybook in react native app but i got the following error.
can you help me to solve it?
if kind 's name clashes with an existing hierarchy, it 's not displayed.
there is a unknow tag around story source
can't use `hrefto` without supplying both kind and story
running `npm install @storybook/angular --save-dev` or `npx -p @storybook/cli sb init --type angular` in a new angular application always fails.
using addon-docs to showcase material powered menu, i get an unwanted padding caused by the docs `.12345xx ul{padding-left:30px;}` coming from the docs.
running storybook init (`npx -p @storybook/cli@next sb init`) on a project generated with `create-react-library` with next storybook version results with an error: phofcode difference between what generates `create-react-app` and `create-react-library` is where it puts `react-scripts` dependency.
`create-react-app` puts it in `dependencies` while `create-react-library` puts it in `devdependencies`.
it works if i move `react-scripts` dependency from `devdependencies` to `dependencies`after generating project with `create-react-library`.
it also works correctly 5.0.11: `npx -p @storybook/cli sb init`.
we use knobs a lot to check how components look with different translations/lengths of headlines, etc.
which are then tested by ux.
they prefer using the new tab view, without storybook ui, however in that view, all options changed via knobs disappear and go back to the default view.
when i start storybook, i get all my previews and everything 's fine.
but when i try to build, the only thing i get is a blank page with "no preview".
get a `typeerror: cannot read property 'colors ' of undefined` in the console.
tried to search further why, and played with the bundle from webpack.
found the culprit which is one `__webpack_require__(2)` that gives an empty object `{}` but can 't understand why.
i 'm unable to switch the theme back to "light" after using the dark theme.
the only resolution is the `localstorage.clear()` hack.
hi, i am currently using a storybook using the knobs button in `5.1.0-alpha.40` version.
i found a bug ... the first knobs button with a title that contains brackets does not render.
however, if the first button is exposed, it will render normally.
i set the `webpack.config.js` as follow, but it 's not work.
then, i found here phofurl it 's wrong for assigning the `devserver` options to cause the most of options only affect the behavior of `webpack-dev-server`.
is it possible to support webpack 's `devserver` options?
v `5.1.0-beta.0` simply doesn 't work.
will file a separate issue to address that.
this is a non-breaking bug.
filing because it causes confusion.
if nothing else, figure that it 'll help save someone else time.
storybook recommends that you update your "storybook" version even if you have already done so... what it really means to say is you should update _and_ @storybook/react-native to `5.1.0-beta.0`.
> also worth noting that this issue is persistent between @storybook/react-native v `5.1.0-beta.40` and `5.1.0-beta.0`
alright, so i have been trying to translate some of my docz .mdx files to storybook, with version v5.2.0-alpha.4.
and so far so good, i get the * canvas * tab to work, but when i navigate to the * docs * tab it crashes saying `cannot read property 'fromid ' of undefined`.
in previous releases, navigating to a new story using the sidebar seems to have only resulted in a js navigation event inside the preview iframe.
unfortunately, since 5.1.0-alpha.37 (specifically this pr: phofurl navigating to a new story has started to trigger a full page load inside the iframe, which can add quite bit of friction for large projects that have several mbs of js load, parse and run.
`process` is defined as `true` using the webpack define plugin phofhyperlink .
`true` does not match the expectation that `process` is an object.
this results in libraries, even when attempting to be defensive about the presence of `process`, attempting to perform object actions against a boolean and therefore throwing errors at runtime.
the specific example that is giving me trouble is with browser version phofhyperlink of `debug` phofhyperlink .
a clear and concise description of what the bug is.
when clicking the storybook 3-dot shortcuts button in the left panel, rather than open a menu of options for storybook, the page refreshes to a blank screen .
this same behavior also occurs if i press the 'change size of preview' button along top header panel.
- scrolling does not scroll - scrollbars remain visible when using an external mouse (i.e., in a desktop setup)
a clear and concise description of what the bug is.
there seems to be an issue in rendering the vue component, as i get alsway 'undefined variable ' for my scss variable from the style tag included in the vue file.
this variable comes from a global helpers.scss, which is loaded in the vue app from webpack as loader scss data.
i have a vuejs setup done withe vue-cli.
i have added storybook to it manually, done like in tutorial from learnstorybook.com the vue-cli-plugin-storybook did also not helped me.
in firefox, the sidebar no longer has any content.
moving the mouse over the sidebar reveals hidden areas of content (which trigger the "loading" mouse pointer), but nothing seems to load.
this problem does not happen in chrome or edge.
the about page has an invisible div that prevents user interactions.
you can't scroll or select text.
the sidebar menu and about page are both suggesting an upgrade to an older version.
phofurl in above code, storybook always require `architect.build` options.
this will work most of angular pojects, but when your making library which build from ng-packagr phofhyperlink , these options can be empty.
when creating a story i am trying to use the `window.store` as the store (i include a script in `preview-head.html` phofhyperlink which sets up `window.store` so it does exist in the `iframe`).
basically i am working on a site that uses decoupled `vue` components built as libraries which communicate data through a global `vuex` store on the `window`, unfortunately this prevents `mapactions` working with storybook because context of `this.$store` is wrong.
i have tried following based of this issue phofhyperlink and also this post phofhyperlink : phofcode unfortunately context of `window` is wrong at this point, i also tried setting up store in config file with `vue.use(vuex)` but because register modules dynamically phofhyperlink couldn 't get to work either as register them against `window.store` when module is loaded with following script: phofcode
i tried to use storybook addon-docs for my angular storybook project.
after creating my first mdx story, it fail with the message `syntaxerror: file: unexpected token (15:9)`, pointing to jsx-syntax: `return <div {...props}/>`.
thats why i installed `@babel/preset-react`.
now everything loads fine, my template also gets displayed, but unfortunately it fails when i click on docs with the following stacktrace phofcode
when attempting to navigate to the * notes * add on page via clicking the * notes * card a hover appears but clicking the link does not load the notes add on page.
forcing to reinstall storybook doesnt work to use @babel/core.
storybook/react 5.0.11 exhibits the exact issue [described in this ticket closed a few months ago.
][0] this imported svg is not loaded correctly by storybook even when using a custom webpack config phofcode this hacky import bypassing storybook's loader behavior does appear in storybook correctly phofcode [0]: phofurl
a clear and concise description of what the bug is.
out of the blue, the command `npm run storybook` started to throw this error.
didn 't change anything in between, besides changes of some stories of mine.
when using props on a component, the values of the knobs are not available in the component.
when i use `select` knob in a nested story: phofcode it throws an error in the console image phofimage if i go to root story first, reload the page and then go to the nested story.
it does not throw the error, but `select` knob does not work: when i change selection, it does not update component and returns selection to initial value in a half of a second or so.
there is a section below the preview screen intended to have additional panels which at the moment i 'm not in the need of using.
this panel cannot be collapsed, it doesn 't disappear on its own, and the information "no panels available" is not particularly useful.
this wouldn 't be a problem if it panel could be somehow dismissed, but as it is now, it makes very uncomfortable to work with console open, as multiple menus end up taking too much space, and this makes difficult to work on use cases involving a large screen.
i 've been working out through this by opening container iframe in a new tab, but this is hacky at best, as not default behavior of application, nor an available option/feature in ui.
when the first knob in a story has either a period or a square bracket in its label string argument, additional knobs do not display.
storybook stops working, after ejecting cra.
gives `module parse failed: unexpected token` error.
i do not feel comfortable building storybook manually, committing it to the repo and deploying the build from the repo.
i want to build it while deploying, as i do it with normal react apps.
but when i am trying to run the build script as a part of `heroku-postbuild` routine, it always fails with an error `sh: 1: build-storybook: not found`.
tried many approaches, even installing `@storybook/cli` globally on heroku machine, but nothing helps.
so only way to deploy heroku as a part of my actual project is build locally on my machine, push repo and deploy from there, which do not really like.
when you add a `button(label, action)` knob to a html story, clicking the button causes the story to rerender after performing the handler action.
with @babel/preset-env v7.4.3 and using `core-js` 3.x explicitly in babel config building storybook worked fine.
after upgrading @babel/preset-env to the latest release (being 7.4.4) an error is shown when `core-js` modules are used.
have no cancel option in ui if the context have no param even `option.cancelable` set to `true`.
when adding storybook to an existing project using `npx -p @storybook/cli sb init` it installs a set of packages.
these are appended to the list of devdependencies in package.json.
the yarn and npm clients usually insert new dependencies in alphabetical order, so storybook breaks that.
when running build-storybook with storybook 5.0.10, the paths in iframe.html to javascript assets and static/media assets have an extra `/` in them which makes the static storybook output not viewable.
this was not a problem with storybook 3.
use the following storybook addons "5.1.0-alpha.34", "5.1.0-alpha.34", "5.1.0-alpha.34", simply try and run storybook and you will get the error.
not sure how to describe it but it seems that if you 're trying to set something like a title after vue has mounted and you change the title in the knobs.. nothing happens.
addon-info throw prop type errors on chrome devtool
markdown with `'` is loaded by `markdown-loader` to `&#39;`.
and the `markdown` component used cannot decode it to `'`.
when using `linkto` to navigate to another story, navigation seems to occur and be registered in the navigator, but the component for that story is not rendered.
the bottom panel for addons remembers its position from run to run based on a measurement from the top of the page.
usage of `witha11y` of `@storybook/addon-a11y` is slowing down the storybooks and resulting in browser hanging
when there is no default value for a color knob, there is a fatal error of: `typeerror: cannot read property 'touppercase' of undefined` here is the source of this error: phofurl
i know somebody would say that this is not an error, but knobs 'number' dont work with default parameter values because it returns null instead of undefined on empty string.
when running multiple storybook projects, the logo from one project is shown in another.
investigation shows that the logo url is stored in `@storybook/ui/store` in localstorage, which explains why this happens.
even better here is a repro case -> phofurl
i 'm getting an error on remote platforms (on localhost runs without problems) `(node:901) error: => create a storybook config file in when using a custom configuration folder an setting it with the `-c` argument.
when you go to the "about your storybook" page you might see a message like: "storybook 5.0.9 is available.
upgrade from 5.0.10 now," in a green box immediately below the version number at the top of the page.
storybook 's internals rely on system time changes and if time is frozen (e.g.
creating date/time bound storyshots), storybook keeps loading stories forever.
readme images are broken across the board.
a clear and concise description of what the bug is.
ondeviceui: false causing build issues rn > 5.1.0-alpha.24
@storybook/addon-jest is displaying u001b unicode character (escape) in the addon panel on failed tests.
clearly it wasn't at some point, i couldn't pin down the exact version jest changed this but it is happening on the current version of cra (jest v3) and jest v4.
looks like a replace function could be added to message.tsx to remove all unicode characters before the final outputs.
the following story gives a in correct knobs:
even if i set `brandtitle, brandurl, brandimage` on theme object, it doesn't work at all(5.1.0-alpha.27)
groupid doesnot work in `files` in @storybook/addon-knobs
we use storybook v4 for several months now and use a lot of different stories.
we have a special kind of category for stories which we want to use with `storyshots`.
we run storyshots in a docker container.
so far this worked without problems for us - until we started to switch to v5.
in the last weeks i tried to update v5 multiple times with different versions, but they all seem fail in the same way.
1. some stories are clipped.
it loos like this happens a lot more on long stories and stories containing images.
(this error seems be deterministic for every run.)
image phofimage 2. some are not rendered as white page.
(this error doesn 't seem be completely deterministic.
maybe it is race condition.
maybe this was fixed in recent alpha version.
it looks like i can 't reproduce it with `v5.1.0-alpha.27`, but it was visible in `v5.0.7`.)
my react native setup fails to load after 5.1.0-alpha.25 (24 works) with following error: undefined is not an object (evaluating this is happening on device via metro: getqueryparams queryparams.js:19:47 <unknown> knobmanager.js:72:39 loadmoduleimplementation require.js:331:6 <unknown> registerknobs.js:19:49 loadmoduleimplementation require.js:331:6 <unknown> index.js:66:28 loadmoduleimplementation require.js:331:6 <unknown> panel.js:46:25 loadmoduleimplementation require.js:331:6 index.js:14:43 register.js:1:7 rn-addons.js:1 index.js:4 <unknown file>:0 guardedloadmodule require.js:197:45 global code <unknown file>:0
like in this phofhyperlink issue, but if you add jest addon you get a fatal error.
while creating an addon in `storybook/html` i cannot render childnodes.
in `storybook/react`, as far as i understood the code if you pass a child react component it will render the react children.
in storybook html we dont have react and therefore we need to be able to render childrens.
running an upgrade on storybook upgrades react-treebeard dependency to 3.2.0, which breaks storybook/ui.
can 't get addon-info to work properly with flow types when using @storybook with cra.
using the default flow typed button example from the official examples i am getting this props table <img width="1624" alt="screenshot at 17 24 06" src=" phofurl here is the code used for this story: phofcode on the official demo app i can see actual flow types being correctly parsed and placed in props table <img width="1623" alt="screenshot at 17 24 45" src=" phofurl
i was trying to follow the tutorial from phofurl but got a lot of trouble (the doc for jest-preset-angular is not up to date and hard to find the right way).
i 'm stuck with last step, i think i configured everything up but when i run the jest test angularshots.test.ts fail.
it look like it 's the import 'global ' which doesn 't work properly from
my stories don't appear in browser.
on (android) simulator i can see the stories, but action logger doesn't work.
typeerror: cannot read property 'default' of undefined.
after entering full-screen mode, the first press of `s` or `a` is swapped - `s` opens the addon panel, and `a` opens the sidebar.
subsequent presses behave correctly, but the issue repeats if "go fullscreen" is selected again.
i am using `customize-cra` to add a specific babel plugin for development and i have also added a `.babelrc` in the `.storybook` folder which has the following: phofcode the issue is it doesn 't read the babel config even though the terminal says: image phofimage but in end it shows following issue: image phofimage
npx -p @storybook/cli sb init --type react_native results in npm err!
notarget no matching version found for npm err!
notarget in most cases you or one of your dependencies are requesting npm err!
notarget a package version that doesn't exist.
notarget it was specified as a dependency of 'indie_proto'
attempting to use `action` from causes console errors and the output doesn 't match the docs, possibly due to how the react synthetic events are being serialized.
unable to load findsymlinkspaths: cannot find module error: unknown option `--projectroots'
when trying to install storybook with the most recent release of expo, the process fails at `installing dependencies` with the error `no matching version found for
for some reason, the following combination of things causes the gatsby build to fail: - `async/await` code - `@storybook` packages - `node_env=production` ## steps to reproduce repo with basic gatsby setup + @storybook devdependencies + async/await code: phofurl phofcode ### possibly related gh issues - phofurl phofurl phofurl
tree of stories loses order on hmr
i want to use the notes addon phofhyperlink to display relevant information about my component using markdown, see code below.
~~~js import mdnotes from module) .add( 'default with notes ', () => ({ component: cardcomponent }), { notes: mdnotes } ); ~~~ unfortunatly this results in `ts2307: cannot find module
a clear and concise description of what the bug is.
when using `action('click')` and passing an actual event object through, the json stringify takes about 200ms.
`action` claims to take an object that includes `depth` that should limit how far down the object is stringified.
instead, it is always ignored and 15 is used.
this is making our storybook representations of our components appear very sluggish.
when trying to do build-storybook it gets to 92% and then fails with the following out of memory error: phofcode the entirety of my source code is less than 1 mb so not sure why i would be oom.
i have a docker set up to install `node_modules` somewhere completely unrelated to my source folder.
if i set before starting storybook i get an error similar to the following: phofcode i think i 've tracked down the problem to here: phofurl there is a `cwd` call that assumes `babel-loader` will be installed somewhere near the current directory.
this appears ignore `node_path` completely and, therefore, it cannot find `babel-loader`.
if use `npm link` create a symlink the actual location of `babel-loader` then storybook loads up fine.
this isn 't tenable in my environment but it does seem confirm issue.
have use such a strange `node_path` because of quirks involving docker volumes and phofurl
when using the old url structure of storybook v4 in storybook v5 it 'll select the story in the sidebar (stories tree) and also will change the url to new structure of v5, but story view will not show selected story and will show an error of "no preview".
after registering the addon it's icon shows up in the storybook window but the behavior is odd.
whenever i try to chose a viewport i end up with the same thing.
i have `@storybook/html`, `@storybook/react`, and `@storybook/vue` installed and they use their own config files that i point to.
when i just run storybook, it runs just fine: start-storybook -s public -p 9009 when i build storybook as a static app: build-storybook -s public serve -s storybook-static -p 4000 i get no errors, it works - but each entry is nested inside itself.
i am trying to use the (`5.0`) with vue and vue chart.js phofhyperlink .
in terms of using vue chart.js phofhyperlink with the storybooks interface it all works as expected, however i am getting some issues related to `canvas` when trying to use the with jest.
my `storybook.spec.js` is as follows (see more on my file structure here #5537 phofhyperlink ): phofcode when i run `npm run test:unit` i get the following output (see below - output 1 phofhyperlink ).
so based on that output tried installing `canvas` (as well as `canvas-prebuilt`) with `npm`.
after a bit of research found this was related to `jsdom` see #1782 which recommended adding following my jest `setupfiles`: phofcode this helped reduce some of errors and produced following output (see below - output-2 ).
ultimately test cases do run, however there are enormous amounts of error output related `jsdom` and `canvas`.
also based on error believe issues canvas are causing some issues storyshot 's i.e `cannot read property 'length ' undefined`.
when an action is fired (using addon-action) that contains a circular object (ie an object that refers to itself), an error is logged which comes from the dependency `fast-deep-equal`.
this results in the action never being logged.
error in chrome: `rangeerror: maximum call stack size exceeded` error in firefox: `internalerror: "too much recursion"`
i have been trying multiple ways of incorporating global styles (scss) once for all storybook iframes and have been unsuccessful.
there doesn 't seem to be a clear concise way to do this.
the following error occurred when install storybook for angular.
notarget no matching version found for npm err!
notarget in most cases you or one of your dependencies are requesting npm err!
notarget a package version that doesn't exist.
notarget it was specified as a dependency of '@babel/preset-env' a complete log of this run can be found in:
when a component is class-specified, and that component has its change detection strategy set to onpush (see "additional context" below), the user is unable to manipulate the component 's inputs using the knobs add-on.
(i believe this issue is almost certainly due to angular/angular#14087, but i think there are ways we can work around it, such as manually triggering change detection when a knob is changed.)
_[clarification: by 'class-specified ', i mean that the component specified in story definition using `component: mycomponent` (referencing component 's class directly) rather than `template: (referencing component in a template via its selector).
a receive a runtime error and see the empty storybook state when attempting to use it with next.js.
the `additem` function in the vendor bundle is exceeding the call stack (some sort of inifinite loop?)
the documentation states: > the date knob returns the selected date as
resizing the browser to a small height so the addons-area toolbar moves behind the preview toolbar destroys the ui permanently.
the only way i found to get rid of this is to remove preview toolbar manually in dom and then resize addons-area back to a normal state
a component disappeared without warning!
i'm working on react@16.3.x components that use emotion@9.2.x.
i recently upgraded to @storybook/react@5.0.x, but when i boot it up i get the following runtime error: phofcode i dug into it and it appears that this is due to the fact that storybook is pulling in @storybook/theming, which is in turn pulling in emotion 10, which does not play nice with emotion 9.
setting `theme.color.lightest` and doesn't impact the color of selected items in the sidebar (they remain #ffffff regardless) from the sidebar component, it looks like `theme.color.lightest` should effectively color the component but it it looks like it is overridden by for some reason.
in one of my stories.
i used a custom component called
the knobs are not updating the component after change.
a story with a textinput that auto focuses will continually open and close the keyboard when selecting the story on the navigator ui.
after upgrading to react native 59.2, i 'm no longer able to run storybook the way i did previously.
whenever i try to load my app while the storybook server is running, i get the following exception: > error: bundling failed: error: unable to resolve module from module does not exist in the haste module map > > this might be related phofurl > to resolve try following: 1. clear watchman watches: `watchman watch-del-all`.
2. delete `node_modules` folder: `rm -rf node_modules && npm install`.
3. reset metro bundler cache: `rm -rf or `npm start -- --reset-cache`.
4. remove haste cache: `rm -rf at at at at object.resolve dependencies.map.result array.map (<anonymous>) resolvedependencies generator.next (<anonymous>) asyncgeneratorstep
wrapping a functional component with `react.memo` causes the info addon to display the story source as `<unknown />` and causes all the prop types to disappear
i've tried to use `addon-info` globally or locally but the error still occurs.
when using a component with a prop that has the prop-type node, causes an error if that node is a react fragment.
error message: cannot convert a symbol value to string thrown in propval phofhyperlink
after running static build the prop types table misses informations
i only see the "loading source..." text in the storybook tab
installation with `npx -p @storybook/cli sb init` does three weird things: 1. "
i am importing a css file, which is meant to be used in other applications across our organization, thus i don't want to make changes to it.
the css added by the backgrounds addons should have preference over imported css file.
starting from yesterady afternoon, a new installation and load of storybook@4 throws the following errors in the console while a blank page is loaded.
phofcode terminal doesn 't show any warning besides issues related to `core-js` phofcode
if `text` knob take a string like as a default value, it can give console errors.
this is due to internally it take this iso-8601 date string and parse it to give a date-typed object.
this is then output as, for example, `fri mar 08 2019 gmt-0500 (eastern standard time)` string.
kind of magic and surprise.
can 't do any local development on storybook until this is resolved.
does not work with static builds since v5.
it seems the register line in `addons.js` is the culprit.
without it, backgrounds doesn't work, but static build at least works.
crashes in firefox 66 on this line: phofurl `iframe.contentdocument == null` here iframe is from an extension phofurl image phofimage
when the story name is "map".
for example: storiesof( 'map ', module) .add( 'default ', () => <map/>) i receive the following console warning phofcode
storybook doesn't compile after upgrading `core-js` to version 3. this might have something to do with symbol polyfill required in phofurl
your deploy logs are publicly searchable on google; not sure if you want this to be the case.
unable to run storybook when importing svgs into a component.
i'm trying to setup addon-a11y, however it crashes if i use the `adddecorator` in my `config.js` eg: phofcode which crashes with: phofcode seems to me that the channel is not ready yet here phofhyperlink .
however if i move the to any story for example to a everything works as expected.
however i really want configure it in my `config.js`.
what am i doing wrong?
if more than one colour selection knob is added to a story the popoup selector is obscured by the subsequent colour selector knob control
files other than `*.stories.js` are imported by storybook.
when trying to pass in an object containing a function selectable through a knob the function gets dropped.
on initial render the value returned by the function is rendered, when a different option is selected the following error is shown: phofcode
unlike dev mode, the static build storybook is not loading story, leading a
the arguments are not longer decycled in v5.
the source code in v4 had a whole decycle function taking care of conficting arguments, this and is now gone in v5.
in the dev mode, no errors; however, after build storybook with `$ build-storybook -o build-storybook` script, only the first story is rendered.
all other stories gives an error like `failed to execute 'deleterule' on 'cssstylesheet': the index provided (1) is larger than the maximum index the problem is due to the component have loaded a global styled component generated via `createglobalstyle` styled-component api.
when using the backgrounds addon and have many different options on the select i am not able to scroll the select element.
this is causing an issue because i am not able to select many of the colours that i have used as options.
using css variables in theme breaks storybook.
the search box in the sidebar does not have a `<label>` or `aria-label` attribute set to be used by screen readers (only one is necessary).
this is important to meet wcag 2.1 (level a) 1.3.1 phofhyperlink and 3.3.2 phofhyperlink .
deque university also provides a good description phofhyperlink .
panel position is being reset to what is specified in the global options.
@storybook/vue not returning `template` string for a custom decorator in sb 5.0
addon-viewport tab does not show in storybook there are no issues in starting up storybook.
is there something i 'm missing in configuration?
when a rule is set to an open state, where you can see the details about the rule, it remains open in other tabs (pass, violation, incomplete)
in internet explorer, the theme logo is not being properly containing which is causing a weird display bug.
using @storybook/addon-knobs in a storybook created with react and experiencing performance issues, especially when editing text or number.
here is a simple example of a story that i used: module) .adddecorator(withknobs) .add( 'with editable text ', () => <div>{text( 'text ', 'some text ')}</div> ) `
setting global parameters with the `addparameters` function is apparently not changing parameters in my project.
react native's async storage has been deprecated phofhyperlink .
this means that when using storybook with rn 0.59, a warning appears (see screenshot).
i'm unsure if 5.x is affected.
when using actions, knobs and a11y, switching between stories, the selected addon tab is reset to actions tab.
unable to import media assets by importing (or requiring) them.
using old url pattern in storybook v5 will result in 'no preview' page, despite that the url is correctly changed to use story id.
this is not happening in iframe.html pages.
using the old url pattern works fine there.
storybooks not loading, using default config.
i created a custom addon whose purpose is to print the html of the current viewed story.
but it seems that i cannot import a css file nor use jsx in my addon.
adding a custom webpack config with `babel-loader`, `style-loader` and `css-loader` doesn't fix this issue.
addon-backgrounds overwrites the background color of the preview.
however, if the color is "cleared" or set to transparent, then the preview panel is also transparent and will not show default theme background color but instead reveal underlying addons-panel that should be hidden.
this is due to fact that "showing or hiding addons panel" does in fact not change size of addons panel but changes size of preview panel so it completely covers it.
when storybook is exported as a static app using build-storybook you can no longer browse directly to stories by their url.
browsing directly works as expected when running the storybook in dev mode.
while i am developing on storybook phofcode the panel shows perfectly but after building phofcode and serving the folder, the panel is not showing here are my configs: phofcode phofcode
i have a react component that use the onkeypress event and before the storybook version 5.0.1 was working fine.
however, after migrate to the last version, it stop working.
we can 't use markdown-loader together with html-loader.
when i only use markdown-loader some syntax is not correct.
returns / line feeds also only sometimes seem to be recognized.
throws `[react-ga] path is required in .pageview()` when upgrade to storybook 5.0.x
editing text fields in knobs seemingly lags behind key presses, and deletes any characters after one of such instances.
it 's like the state is updating in a convoluted manner, and previously entered characters are overwritten.
for example, quickly typing "kris tremblay" at the same speed i 'd normally type yielded "krisblay".
using preact@latest uses .mjs extensions and storybook 's webpack fail with the error:
when switching the background color of the iframe using the background addon, the results do not change even in worst case scenario for a11y addon.
the (generated) storybook url that contains the current knob configuration, is not correctly applied to the story when loaded.
only the last knob configuration from the url is being applied.
links to _"made for"_ sections on the front page of the storybook website phofurl point to a missing documentation pages (even while those pages exist on other url addresses).
knob categories displaying unnecessary scroll bar
if a project uses a `babel.config.js` file, there is no way to provide a custom babel config to storybook.
we have a react storybook set up with the `actions` and `knobs` addons.
running version 5.0.0 of each.
when changing a `knob` value, the addons panel jumps to `actions`.
when running `npm install babel-cli babel-core --save-dev` then choosing * yes * to _do you want to manually choose a storybook project type to install?_, then choosing * angular * the following error occurs.
`linkto` from links addon has incorrect behavior when it calls without second parameter
i am working in a lerna-managed monorepo with typescript.
originally, we had a separate storybook configuration in each package, which worked nicely.
we decided we wanted a root-level storybook that pulled from the `*.stories.tsx` files inside each package.
here is an example of the desired file structure: phofcode after following the fix in this issue phofhyperlink to solve our original `exports not found` error, we had no more error messages, but also no stories appeared.
after digging into the devtools for some time, we found that stories were being read, and correct paths were being generated.
it looked like at some point they were unexpectedly cleared from `storystore`.
is it possible to create a top-level storybook that reads from stories inside of packages in lerna-managed monorepo?
when upgrading from storybook 4.1.13 to 5.0.0, an attempt to run `start-storybook` results in the error message `error: cannot find module there is no folder.
the only copy that gets installed is due to the dependencies within so it's not at the top-level `node_modules` folder, but instead at
as in previous versions, only those stories showed up which contained a part of the input text.
along with the text highlighted.
right now, i am not sure how the filtering is done as completely unrelated text still makes stories pass the filter, as shown in screenshot:
it seems `import { create } from '@storybook/theming'` ends up requiring emotion.
the error you'll see is phofcode
after upgrading to storybook 5, the actions panel does not clear out when i switch between stories.
this happens both when omitting `clearonstorychange` from storybook config, and when setting it to `true`.
when theming the site in v5.0.0, the knobs description text shares the same text colour as the sidebar so when attempting to have a dark coloured sidebar with white text but a white value for `appcontentbg` text is impossible to read.
search doesn't search on staticly deployed storybooks.
with regards to using which style should be included in the iframe, sb5 by default gets the style from the default app.
looks at angular.json and gets the default app's styles.
is there a way to make sb look other way around?
like, instead of sb gettings styles written in
after upgrading to 5.0.0, addon-info does not render any code snippets given via the `text` key on the `info` parameter on the `addparameter()` function.
it successfully displays all the given text but fails and does not display given code under ~~~ ~~~ notation, i.e: ~~~ ~~~js function something(a) { return a; } ~~~ ~~~
i recently upgraded to v5.
i have a relatively simple storybook setup.
i can run the `start-storybook` and get a functional storybook environment no problem.
i can search components and everything but when use `build-storybook` and host the assets using `http-server`, everything loads up fine and all of my stories show, however when try to search, the components do not get filtered if peak in the console can see a couple errors: phofcode
when removing the value from the "number" knob, following error appears in the console: <details> <summary>full log</summary> <pre> warning: `value` prop on `input` should not be null.
consider using an empty string to clear the component or `undefined` for uncontrolled components.
in input (created by context.consumer) in input (created by numbertype) in numbertype (created by propform) label (created by context.consumer) styled(label) field) field propform) form context.consumer) styled(form) propform) propform knobpanel) div context.consumer) styled(div) knobpanel) knobpanel div styled(div) div styled(div) unknown unknown unknown unknown _default layout) div styled(div) panel) panel layout) main) main) main layout) layout withtheme(layout) resizedetector) resizedetector resizedetector) resizedetector manager) themeprovider manager) manager location querylocation) querylocation root) locationprovider root) helmetprovider root) root warning: a component is changing a controlled input of type number to be uncontrolled.
input elements should not switch from controlled to uncontrolled (or vice versa).
decide between using a controlled or uncontrolled input element for lifetime of component.
more info: phofurl input input numbertype) numbertype propform) label styled(label) field) field form styled(form) propform knobpanel) knobpanel) knobpanel _default layout) panel) panel main) main) main layout withtheme(layout) resizedetector) resizedetector resizedetector) resizedetector manager) themeprovider manager) manager location querylocation) querylocation root) locationprovider helmetprovider root </pre> </details> <br>
the following error appears in the console: phofcode
in production mode, typing two characters into the search fails with the error: phofcode typing > 2 characters leads to: phofcode in development, this is not an issue.
preview doesn 't render the svg files imported as a react component correctly even with the custom webpack config.
it always looks for the svg file under static/media.
ie11 doesn 't hot reload as you make changes.
when i upgraded storybook from `4.0.9` to `5.0.0`, by starting `start-storybook`, i give error (see screenshot below)
in the "webpack config simplification" phofhyperlink area, the code example uses: when it should be (modules should be module) the webpack config page phofhyperlink is correct :)
upgraded to sb5, build executes no problem, but getting these errors in console after the build is complete.
`brand` property in `@storybook/theming` `create()` function has no effect
i 'm getting that error when trying to add some component that uses styled components phofcode
hello, i have a few stories where i don 't need the panel because they act as content pages.
switching between stories pretty fast or multiple times results in phofcode
after building storybook components are exported as so: `button_button` setting `button.displayname = "button"` will fix the visual presentation but still on build file i see wrong naming.
this makes the knob addon showing : no knobs.
from the bundle file: phofcode devdependecies: phofcode
storybook packages are not declaring a dependency on core-js in package.json, unable to run using pnpm as a packager without adding core-js or hacking the core-js dependency in.
addon-backgrounds and addon-viewport do not display in any way
when starting up storybook 5.0.0-rc.8 see the following error: phofcode
overflow scrollbars in component views scale with the component as you zoom in, and the anti-aliasing scales as well leading to very ugly scrollbars.
the dev branch of storybook doesn't load: phofurl the error in the browser console is: phofcode
i keep receiving the following error when implmenting withknobs using storybook.
this is my current config.
i have it creating an '..example.js ' on the fly.
addon panel is moving to a max width when trying to switch from bottom to left
tried to import an umd bundle in stories file and got warning in webpack (v4) that cannot find exports from the bundle.
further investigation leads to "no exports provided" for the umd bundle when webpack tries to bundle the stories.
compare to other cases where i import from source code, i found webpack is using harmony-module.js instead of module.js process the module, which causing umd bundle put exported stuff on global (window) instead of exports object passed in.
the umd is not a harmony (es6) module.
it seems in this case webpack mistakenly think this is a harmony module.
since this is not happening in a different codebase, and i think storybook seems mixing its own dependencies one on host directory, i feel there maybe something wrong how storybook use webpack.
when using the a11y storybook addon, scenarios which should return violations but are not doing so.
crashes on initial render, which causes storybooks to render a blank page.
double expand icon showing up in top right-hand corner.
it continues to show after multiple restarts, uninstalling and re-installing node_modules, and cache clearing.
however, i 'm not seeing it on the next branch: phofurl
when using the `a11y` addon, i expect the tests for a particular story to run automatically on initial page load, and then on any subsequent story change.
i am using the global decorator, not individual decorators per components.
currently, i have to manually press
no accessibility tests or failures being produced after including a11y addon to my
there 's a visual bug where there are double "go full screen" buttons.
a custom babelrc with a custom presets which referenced through relative path will cause storybook server hangs forever.
the cmd `start-storybook` even will not show any errors.
the cmd `build-storybook` shows the errors, this is why i can report this bug.
we're using the package to set the theme of our storybook app.
this theme is not applied after loading the page, but is applied correctly after navigating to another story (one that's not selected by default).
after this first navigation, the theme remains applied.
i've noticed that the styling of code blocks in markdown files is rendered with syntaxhighlighter.
problem is i have some text that look like this: v5-markdown-notes phofimage
cannot use hooks directly in a story, fails with `hooks can only be called inside the body of a function component`.
see phofurl story is being wrapped in a `position: relative;` div.
combined with the centering addon, it makes it so absolute element are not positioned relatively to the window but to the story itself.
per documented behavior, i expect to see the id of each resource i have added in the addon panel interface.
however, it prints a `#` without any name value for each stylesheet.
if `component` has an element with `display: grid`, that style is retained for the `.component` div created when rendering stories for however, because storybook places the "story source" area as a sibling of `subcomponent`, "story source" ends up being put into the next empty grid cell.
defining an action, passing it as an event handler, and subsequently clicking it in storybook v5.0.0-rc3 seems to block for a noticeable (1-2s on my machine) amount of time.
not passing the action as an event handler doesn't cause the ui to block.
i'm using 5.0.0-rc3 for all my addons and storybook.
some options are no longer supported in 5.0. what's more, the `addparameters` api from obviates the need for having the addon afaict.
if the options addon phofhyperlink is deprecated, let's remove it or add messaging to direct folks to right place.
using lerna, each of my modules has it's own `node_modules` folder.
when webpack bundles `moment` (and other dependencies) from it does not get bundled correctly.
storybook is loaded successfully (i 'm using angular 7) but in dashboard this message is displayed: "sorry, but you either have no stories or none are selected somehow.".
i do have stories under `src stories`.
when typing garbage in `index.stories.ts` i do get an error in dashboard (that means the file is compiled and read by storybook lib).
`"@storybook/react": "4.1.12"` causes storybook not being able to run with the current cra2 project causing `uncaught typeerror: object(...) is not a function`.
below is a dependency list that
i start storybook use `start-storybook` and set some breakpoints in chrome sources, first time it works fine, but when i changed the code and save, the `webpack` rebuild and the breakpoints become not working.
i don't know which time happens when save code, but often happened.
i also custom `devtool` in `webpack.config.js`, but not woking too.
i am trying to use storybook with react-rails phofhyperlink which is configured to store reactjs files at the storybook project is outside the rails app, and have the files symlinked for files inside rails app at i got this error when starting storybook: phofcode however, if i use the file directly in storybook without symlink it will compile normally without any issue, in the error above, it shows source file location not symlinked file.
for certain components, the info source will show `<unknown>` for an element, and log the warning phofcode
the react native storybook navigator is completely black on ios.
the menu items appear to exist (they react to clicks) but are not visible (black text on black background?).
the story component is also visible on the right.
when storybook is initially loading a "no stories" message appears for some time.
sometimes between 100ms and 1000ms depending on the size of your storybook.
this makes storybook feel slow and sluggish.
i want to stop animations of my loader components so that my image snapshot tests don 't fail because the spinner looks different everytime.
none of these work: phofcode
i have a component that is passed a function as a prop that determines how the component behaves under certain css breakpoints.
there is a finite list of functions that can be passed, one for each site breakpoint in fact.
when i pass an object of functions they are not rendered in the dropdown
getting error: cannot find module 'babel-preset-env' when upgrading from beta.3 to beta.5
when a user changes stories the iframe scroll position is not reset.
if you scroll halfway down a page and change the story you will still be at the same scroll position in the new story.
icons in the toolbar should not have separators between each of them.
separators should only appear if there are more than two icons present in a feature or addon (i.e., like the zoom feature).
the "iconbuttons" for background and viewports should have active states when they are active.
maybe abstract this behavior so other addons can use it as well?
a11y add-on should highlight violations tab when it loads.
it currently shows the content for this tab but does not highlight the tab until you click on it.
i cant collapse the parent item (folder or component) when a story is selected.
this ends up being cumbersome when there are a lot of nested sibling stories because users have to scroll long distances to navigate the sidebar.
i was able to do this in 4.x which mirrors how file managers uis phofhyperlink in code editors behave.
open tooltips do not disappear when clicking into the preview iframe
when you click on a story in the sidebar, storysource does not update the code area that is highlighted.
tooltip stories no longer appear by default and are not clickable
a clear and concise description of what the bug is.
trying to run the provided test on the structural testing page of the storybook website ( phofurl fails with the error `syntaxerror: unexpected identifier` pointing at `initstoryshots`
when using markdown with the notes addon, in version 5.x, special characters are showing abnormal spacing.
action addon took surprisingly long time to response (freeze the screen >4 sec).
does not support react native >= 0.56 due to its dependency on my storybook in react native is working great until attempting to introduce knobs.
attempting to use knobs results in this error: phofcode phofurl this has been fixed/release in phofurl see merged pr phofurl and original reported issue phofurl upgrading to `6.0.0` should fix the problem.
the a11y extension always returns 0 errors 0 passes even when there are violations
a clear and concise description of what the bug is.
storybooks fails fails to load/find `.storybooks`.
storybook is totally crashed and printed out many `theme` related errors.
even though i removed all add-ons and stories, the problem persisted.
the bug can be resolved by upgrade everything to react 16.8.1 or rollback storybook to v5.0.0.beta.1.
if storybook is put into full-control mode, and eslint-loader is added without the option `failonerror: true`, storybook is unable to start up if there is an existing eslint error.
this feels a little backwards because failonerror set to false, so the build should continue.
an anchor tag within a page in the preview panel iframe doesn 't take you to that position within the page, but reloads the top iframe with the page content.
a react app with splitting code generates a webpack error that comes and goes randomly.
a little less than once in two the screen is empty and an error appears in the console.
i can work around the problem by customizing the webpack config with: phofcode
when ejecting from the storybook view and into the direct /iframe.html view, once it finishes loading, the browser url is set to the domain root so you can't refresh page to see updates.
somehow console.warn() was causing this problem when inside a render() component method: > typeerror: undefined is not a function (evaluating '_iterator typeof symbol === "function \'" ?
when installing and running storybook in a freshly generated angular 7 project (created by angular cli with css as the stylesheet format) i receive the following error when attempting to view my component in storybook ui: `expected 'styles ' to be an array of strings.`
i am using the knobs addon and only occasionally do the knobs appear in the 'knobs' panel.
when they do appear, changing them seems to have no affect on the component.
i know that they much be linked to component as default values are what show in component that renders on screen
storybook webpage is not resizing on safari-ios in iphone.
@storybook/angular does not respect .browserlist or any other way described in angualr story autoprexier phofhyperlink
the main actors are react native android application and storybook websocket server.
when the application is not containing js bundle it successfully connects to local websocket server and shares stories to websocket server.
in the case when the application is bundled with js inside, it does not connect to the websocket server.
when toggling addon panel there 's a jerky transition which causes the preview window to "hop".
when you initially run storybook, 'notes' do not appear in the notes tab until you change to a different story.
it's difficult to go back to the previous ui when you've entered the keyboard shortcut or about screen
i have use storybook + typescript + react-native .
getting issue with find appropriate loader to load the react-native component.
"you may need an appropriate loader to handle this file type".
i tried each an every loader need for typescript such as 'ts-loader ' , 'babel-loader ' and
i 'm using `@storybook/html` in a server-side project which needs to generate some html templates.
it works fine on 4.1.9 and before but on upgrading to 4.1.11 `start-storybook` stalls before showing the pink box and "storybook started" message.
when loading it in the browser it shows a generic `cannot get /` message.
`build-storybook` also fails but in a different way with the message phofcode
color control doesn't work in firefox at all.
popup opens but click to control just closes it, color isn't changed.
it looks like `safe-eval`, a module required by `telejson`, requires `vm`, which is a core node module and can 't be used in the metro bundler without some kind of polyfill, so maybe a different library should be used there or telejson should be modified
in react native 58+, the default background color is black instead of white, and so the default ui theming that comes out of the box with storybook ui is invisible
when an app tries to load the storybook for the first time, it fails with 'unhandled promise rejection'.
if error is dismissed, the storybook's ui loads with the stories in navigator, however preview is empty.
then, if i reload app, exception doesn't happen, i.e.
this seems to be linked to how storybook loads initially selected story.
the first time app runs there's no information of story selection, so it fails.
if error is dismissed and i click a story, then this selection is stored and running next time, storybooks succeeds loading selected story.
more specifically, i think _getinitialstory function phofhyperlink should be looked at to fix this problem.
following the quick-start options, it produced an typeerror, and starting up storybook give an error about not finding the config.js file, which is clearly present.
when absolute path output is given to build-storybook, the output will be relative to the working directory concatenated with the given absolute path.
when changing the components that i am using from my stories(), hmr is not reloading the content of the story. "
phofurl of my dev is causing "provisional headers are shown" in the chrome dev tool.
`react` and `react-dom` are defined in the package.json as dependencies and not peerdependencies.
this causes issues when installing it since i end up with multiple react in my webpack bundle.
for different story modules, the storybook within addon is showing same component name, props.
following the instructions ( phofurl ) i could not setup storybook on a react native project.
a clear and concise description of what the bug is.
when specifying type `desktop` for a custom viewport the `rotate` option is visible in the viewport panel.
it is not visible when you select the standard `responsive` viewport, which also has type `desktop`.
using `require` within on a commonjs module throws this red error in the preview window.
defining blur and change events with an action results in a runtime error (firefox) or no behavior at all (chrome)
when trying to run storybook with react native 0.57 on android emulator, i get the following error `undefined is not a function(evaluating '_iterator typeof symbol === phofhyperlink ` i can fix this by following this comment phofurl and update jsc android versions, but it feels like quite a workaround for having story book in our project.
upgrading to from `4.0.12` broke styling for prop tables.
when using phofcode and creating an object (for example: ), the following error is outputting to the console.
a clear and concise description of what the bug is.
using vanilla create-react-app, then add storybook, then run build-storybook.
here is the results: <img width="1373" alt="screen shot at 11 39 14 am" src=" phofurl
using `start-storybook` hangs forever without error if `.storybook/addons.js` is trying to import something webpack is unable to find.
`build-storybook` successfully reports the build error.
a contribution i made that updated the react native on device ui does not seem to have been transferred to the npm build when installing storybook alpha releases.
phofcode i can confirm the repo has the #4962 changes, but actual npm module does not.
two related bugs here: storybook "open iframe" ui pops up an iframe using the `path` parameter, however the iframe expects an `id` query parameter, so this should be changed: phofurl the iframe expects an `id` parameter, but it should also be backwards compatible with `selectedkind` and `selectedstory`: phofurl
knobs without groupid 's will not render in the knobs tab when one or more knobs with groupids are present.
in my specific case, i have a rtl knob in my default config of storybook which does not have a groupid.
i 'm trying to run the storybook together with expo.
but when i try to start storybook on web i get this error: `error in ./storybook/addons.js module build failed (from error: plugin/preset files are not allowed to export objects, only functions.
when starting the storybook application in an angular environment, the storybook compiles but when the page is opened in the browser, nothing is displayed in window and errors are seen in console stating regeneratorruntime is not defined.
in fullscreen mode, the left panel is still visible through transparent iframe background.
duplicate of closed ticket #4265
when you run sb5 on a default cra setup, no clickable stories show up in the tree view.
jest test results are not hot reloaded in the 'tests ' addon tab.
manual refreshing required to see updated test results.
using markdown in addon-notes do not work
when using the viewport addon, no rotation option exists for iphone 6. the rotation option appears for every other device i have tried.
phofcode demands babel-loader 8.0.4 and phofcode demands 8.0.5
addon-info throws an exception (when a story is rendered) if a mounted component defines a `proptypes.oneoftype` as a variable rather than an array literal.
having a `src/react` folder in the user sources breaks absolute imports with
i 'm getting the same error as #2362 `module @components does not exist in the haste module map` already have the `rn-cli.config.js` file from #2362 , app works fine - just storybook.
knobs date() throws maximum call stack exceeded error in angular.
i am able to see the output of the knobs date for a split second before the error is thrown.
if a group is used in a knob it prevents the number knobs from appearing.
this may impact on everything after the first number knob too.
if a consumer uses it 's own `defineplugin` or `environmentplugin` to replace environment variables, storybook replacing all of `process.env` introduces a potential point of conflict or breaking point if the environment variables are not resolved the same way.
for example, if you use something like node-config phofhyperlink , you may want to configure the define plugin as such: phofcode the above conflicts when storybook fully replaces `process.env` with its own environment variable handling phofhyperlink .
i don 't understand why storybook can 't just replace the keys it knows about as described in webpack documentation phofhyperlink so that it never breaks more complex environment variable logic as handled by consumer: phofcode
if you have a prop that expects more than one param inside of the story 's template, the dynamiccomponent throws an error for an unexpected closing tag: phofcode in my other use-case, i am trying to pass in 2 template references into a method for the story 's props to resolve.
dynamiccomponent throws an error that the method call is missing closing parenthesis after first parameter.
if i don 't pass in second templateref and make second param of method optional, dynamiccomponent does not throw an error.
when test running storybook with the shown command below, the details for the app being started with the urls is still displayed without app actually running.
`> start-storybook -p 9001 -c .storybook --quiet --smoke-test --ci`
i have a monorepo project with the following structure: phofcode the packages are not transpiled (this is imported directly).
it will be transpiled by the root project.
and each package has its own dependencies.
in the root project, i have a storybook configured and in the storybook i have components that use other components imported from packages.
when this packages import its own dependencies, bug occurs.
if run project directly through webpack, it works normally.
getter of default webpack config is broken.
`require.resolve` throws an error if a file doesn't exist.
try to wrap it into `try...catch` block or just remove it.
i am trying to connect to an existing chromium instance with phofhyperlink .
the docs provide the following snippet, which is meant to achieve this.
phofcode first of all, the `puppeteer.connect` phofhyperlink function takes an object, where you pass `browserwsendpoint`, not just a string.
however, once that is corrected there's another problem.
when you run the test, jest will not wait for the async operation to complete and will attempt run test blocks before they are created.
this results in error `your test suite must contain at least one test.`, followed by some more errors thrown in `initstoryshots` as a consequence.
my next attempt was use a `beforeall` hook: phofcode however, this still doesn't work and test blocks that are generated are executed before `beforeall` hook has completed.
i have a dockerfile based on node:10-stretch image.
running my tests locally on mac or with the docker image works fine.
if i use the same docker image in jenkins and run the tests, they fail due to different image size: `expected image to be the same size as snapshot but was different how can i enforce same size across environments?
i'm building a ui kit with react.
my build is just react, babel, and rollup to compile.
when adding storybook based on the slow start react guide- webpack doesn't fully compile and i'm left with a `cannot get /` error on the defined port.
i invoke npm run storybook and it freezes at at "webpack built in 8785ms".
i installed it on a gatsby v2 stack.
currently ` create-react-app --typescript` does not work together with `sb init`
a clear and concise description of what the bug is.
quick start with storybook with vue supported error.
when you adjust knobs, stories don 't update when they return a dom element but they do when you return a html string.
the story code is executed but is discarded due to a `forcerender` variable that is always `true`, possibly introduced in this commit phofhyperlink .
`@storybook/react` calls `reactdom.render` using the version of `react-dom` (16.6) storybook ships with, not the version that the user 's app uses.
this means if the app uses `react-dom` internally (e.g.
all heck breaks loose: phofcode
after upgrading from 4.0.9 -> 4.1.1, storybook no longer starts a server.
phofcode this just hangs there and recompiles on code changes.
when i run a build-storybook, i have new complaints about the manager: phofcode not sure if related to #4995 but i haven 't touched any manager code in the past.
`@storybook/core@4.1.0` broke (`<= 4.0.12` worked) the ability for to contribute to the `manager` webpack bundle.
this is important to us, as we have addons that rely on webpack features that we need to configure, this worked in versions before `4.1.0`, however, it appears that this behavior was removed at that time.
i need to change the storybook main html title on head tags.
first, i created a manager-head.html with `<title> test </title>`, didn't work.
after that, i created a preview-head.html with the same content, same result...
fail compiling on newly created react native project.
this is the error i get: phofcode
i cannot get storybook to compile vue sfc properly with laravel mix.
i cannot install babel-core or vue-loader, cause that breaks laravel mix).
and i tried to use laravel mix 's webpack.config.js , that did not work as well.
the (guide)[ phofurl here cannot be followed, because laravel mix handles vue-loader, babel etc.
currently using storybook with a cra setup.
on osx 'cra_confix.js' correctly identifies that react-scripts is installed and adds the required loaders for scss.
with the same setup on windows it fails when it reaches the first scss file.
in docs phofhyperlink `getstorybookui` has a param to hide ui `isuihidden`.
but in source code in
as shown in the following gif, the color knob is disappearing when clicking on the small modal window to select a color (or clicking anywhere within it, actually).
it works in chrome but not in firefox.
when switching between viewing stories, the <style> tags from previous style-loader outputs remain in the preview iframe.
i am trying to introduce storybook on a web app which use typescript and scss.
scss is still not working under windows out of the box.
we tested it on linux and it works ok, but with the same config(just initialized) on windows it fails with error `you may need an appropriate loader to handle this file type.` tested in the combination of storybook 4.0.12 and cra 2.1.1
i am currently upgrading my project from storybook v3 to v4 (coupled with a webpack 3-->4 and babel 6-->7 upgrade).
everything is working so far, except for storyshots.
with enabled, the storyshots test will infinitely hang with zero feedback as to why.
but, the storyshots work just fine without this option.
storybook is unable to require stories if their location is outside the root of the directory containing the `.storybook` config directory.
_i couldn 't determine if this should be filed as a storybook bug or as a feature request for support with mobx/mobx-react._ phofurl with most recent versions of react/mobx/mobx-react @observable variables are defined, after running `npm i --save-dev @storybook/react @storybook/addon-notes @storybook/addon-links @storybook/addon-actions @storybook/addon-knobs` all of those @observable variables become undefined leading to a failure to compile.
in mobile version, the bottom bar partially obscures stories list, making the bottommost in the list unclickable
i 'm trying to use `css module`s with `postcss`, but i 'm experiencing a lot of problem configuring `webpack.config.js` up.
`@storybook/addon-a11y` not reporting a11y test results on `next` branch .
it shows `0 passes` and `0 violations` on any story regardless of decorator being set or not.
when i pass an object containing a key of `symbol` as a component 's input, the key disappears inside the component.
a clear and concise description of what the bug is.
when installing any storybook plugin using yarn i get an error, it can't find the repository
styles are missing in storybooks when used with vue cli.
some styles are loaded, others are not.
when running storybook on a react app using flow, an optional spread type
i 've been using storybook for like two days and it seems the initial loas is very slow, it takes up to 2 mins!
i have 10 stories so far, when i change something inside a story it can take up to 10 mins to do a hot-reloading!
i 'd like to investigate this further and, if possible, improve this but i don 't really know where start.
side panel is empty: <img width="1280" alt="screen shot at 12 57 03" src=" phofurl in attempt go to component directly (copy link in other than ie11 browser) throws securityerror which pointing to phofurl (there no try/catch) <img width="1280" alt="screen shot at 12 58 20" src=" phofurl <img width="855" alt="screen shot at 12 58 57" src=" phofurl <img width="782" alt="screen shot at 12 59 10" src="
storybook webview and addons are not usable when rn57 is used.
ever since i 've started using the => req(filename)) pattern to load all of the stories in the directory, each time i change something in the component or story, all of addon-info details disappear from story.
if i put all of my stories under index.js it works fine.
i 've updated from react 15 to 16, and storybook 3 to 4 and i 'm getting no stories load, only the "no preview".
there are no errors in the console or anything that would help me debug why its off.
calling on a story or in the global config causes the app the throw a "decorator is not a function" error when trying to render the component.
indeed, `withknobs` is undefined after importing like so: `import { withknobs } from `withknobs` does not appear to be a valid import: <img width="733" alt="screen shot at 5 44 00 pm" src=" phofurl `withknobs` is not exported from package 's index.js phofhyperlink .
when i don 't call storybook runs fine and i do see empty "knobs" tab appear in device ui.
knobs no longer update components when using jsx render functions in stories.
i managed to get it working for standard string templates, but i have a large project using jsx for stories.
when running 'npm run storyboard ' few of my node_modules are not found.
and all of them is starting with '@abp/ '.
so basically it cant find modules that starts with '@abp '.
the path is added to tsconfig.json.
impossible to handle events for action logger, if use template.
action logger is empty after an event was executed
proptypes didn 't show up with styled-component.
instead i got error `failed prop type: invalid prop `type` of type `object` supplied to `proptable`, expected '` `function`
having a frozen lockfile prevents storybook from installing its dependencies during init.
a clear and concise description of what the bug is.
if a decorator itself uses child components, those components are displayed in the story source.
this can be seen in the following example, where the decorator uses a child component to handle the layout.
prop tables are also displayed for each of these components.
there is no way to exclude these components using `withinfo` addon as they are internal to component.
when updating `@storybook/react` to `4.0.7`, we are receiving the following error: image phofimage
massive cant resolve 'fs ' came up with storyshot config after jest already configed and storybook was running correctly.
when using --json and --watch together a infinite jest test loop occurs
memory leak and high cpu when using symlinks
running `yarn test` causes all my tests to crash on components that use styled components
the discord invite link in readme.md is broken: phofurl
the position of the addons panel position resets with each story or knob change
i can't reproduce it, but i can tell what happened: so i had two identical application repo (repo#1 and repo#2), repo#1 was running on 9001 already with a vue component call `hello` established, while the repo #2 haven't yet setup storybook yet.
so once i configed storybook in repo#2, then stopped the repo #1's storybook and started storybook for repo #2 afterward, for some reason the old change in #1 is showing up in the repo#2's instance on 9001 (i am like what in world?>???????)
so stopped #2 and change port to 9002 config.
it reports now, an error of depedency with babel was not found... while it did not have issue before and was running an old version of my component, after installed missing babel, now gets problem parsing sass inside vue component screen shot at 2 01 07 pm phofimage so wonder is caching itself somewhere that we should always clean it if we are having two with somehow similiar setup?
error when adding "withinfo" addon to storybook using angular 7.
*unexpected value 'undefined ' declared by the module 'dynamicmodule '*
in storybook 4, react devtools is now properly scoped to the story (rather than storybook itself).
however, the inspect button in devtools does not let you select anything within the story pane.
additionally, the scope is broken when doing a production build with storybook-build.
when adding the withoptions decorator, input from knobs became sluggish.
i 'm trying to setup a storybook using the guidelines here: phofurl but this doesn 't seem to be accurate (anymore).
when webpack configuration is used directly when cra, it causes `build-storybook` to mangle function names.
this causes issues that code source and prop types are not presented correctly.
as #3879 says, it could be solved by adding `.displayname` to each component, but since cra is now removing prop types in production builds ( phofurl prop types are not visible in static version of storybook.
in cra i 'm trying to use then new macros feature (emotion/macro) while requiring .stories.tsx in config.js.
babel-plugin-macros and require.context conflict, so tried adding `"plugins": > `.storybook/.babelrc` but than no stories are loaded.
this should be a common scenario so i 'll contribute docs when it 's resolved.
i added addon a11y to just 1 story but the accessibility tab is on all stories
i have two knobs, text input and select.
the text input is for accepting a json object.
the select dropdown will generate options dynamically according to the data input.
however, the select doesn 't update at all
in 4.0.2, it'll say the appropriate loader is missing.
the colour picker of the color knob is not rendering properly.
i cannot see the full colour picker to select the colour i want.
attempting to render a react component that uses hooks into a storybook staging environment throws an error `hooks can only be called inside the body of a function component`.
storybook is loading with stories and the styles are getting loaded when running in dev mode.
when running from storybook-static, the styles are not loading
storybook creates `.cache` folder in the root of my project despite my webpack config specifies a different location for `cachedirectory`
in full screen mode the vertical resizer shows up and can still be used.
i use storybook full screen mode for visual regression testing, i.e.
i take screenshots of components displayed in full screen mode.
storybook v4 creates and semi transparent background in full screen mode.
this interferes with visual regression testing, because you can see the normal ui semi transparently in full screen mode.
to solve the issue i tried modifying the `overlaybackground` variable of the `normal` theme.
it looks like this variable applies to keyboard shortcut overlay only, but it has no effect on mode.
error in ./.storybook/config.js module build failed: error: plugin/preset files are not allowed to export objects, only functions.
in storybook won 't load after a fresh install.
install with directions from here: phofurl add additional suggestions for a custom install because i 'm using next.js here: phofurl
when execute jest, if there is initstoryshots() in the test file, i will encounter `cannot find module from 'config-loader.js '` error.
when we start strapi manually (from the command line with `npx strapi start`) it seems to run fine.
however when we run it as a windows service with the same command line but a different user we get errors and no server is started: phofcode
graphql connection queries ignores public role permissions and don't return forbidden
all mongo internals are being returned via api.
strapi build doesn't work in macos phofcode
i have a content type, which has a upload field with many files
probably this is not a real bug but more an enhancement, even if it could be fixed easily i think it would make sense to add `<meta name="robots" content="noindex">` to the default `public/index.html` since most likely we dont want index of (lazy dev) apis being indexed.
i'm trying to get my jwt token using the api login method described in the documentation.
but i'm getting a 400 bad request error.
the code is exactly the same as the one in documentation.
i have a model `posts` that have a group `comments`, when creating the first comment it works fine, but adding new comments gives me this : `error: some of the provided groups in comments are not related to the entity` using sqlite works, the problem is when using mongodb
when you want to start the app by "yarn strapi dev" the console says that some model is unable to register.
but thats "somehow" not true in this case.
because this appears (for me) when the database is not running and i try to start the app.
`strapi new project --dev` fail with `error: unknown option `--dev'`
can't filter by `createdat/updatedat` created by mongo automatically.
i do filters like: phofcode but still i get results that are not relevant.
using api filter gives an error : `your filters contain a field 'id' that doesn't appear on your model definition nor it's relations` fo instance something like this url (replacing `id`by `_id` works fine : - ` phofurl or via the admin dashboard when using filters : - id [is]
i add user content a "avatar" field, media type, use /upload api , error!
image phofimage but i upload article content, "background" filed, success help me
when you search on phofurl clicking the result takes you to wrong address( phofurl
in auth module `register` lowercasing email, but `forgotpassword` is not.
using graphql, when querying a relationship + a group field inside the relationship the group field returns null.
for example... phofcode will be `null` but, if i query the `related_content_type` directly the `group_field` returns correctly.
strapi is a very good framework so far in our development environment.
however, we noticed an issue: it seems strapi stores date in database using the previous date.
this means all the dates are one day behind the actual date captured
creating a content type called "number" overwrites the javascript number global class causing server to crash with "typeerror: number.issafeinteger is not a function".
this is very inconsistent to reproduce but the most likely scenario is to go to a model that has relationships.
go to the relationship and attempt edit it.
eventually, the `save` button will never show and is the `...` loading indicator.
i 'm not sure how to work with this so i am trying to follow the online tutorial or whatever i can find.
according to a so post phofhyperlink , controller doesn 't seem to be needed any more.
so i think i would just add send, reply email and sendgrid api key in admin ui, then write something in the front-end.
in front-end console: am getting post phofurl 500 (internal server error) checkout:1 access xmlhttprequest at ' phofurl from origin ' phofurl has been blocked by cors policy: no header is present on the requested resource.
strapi server in node: error undefined assertionerror [err_assertion]: cannot wrap non-error object at function.boomify at at (node:25189) error: provide least one of to, cc or bcc mail.addto mail.fromdata new mail function.create mailservice.send new promise () object.send object.send async object.send async async module.exports async evalmachine.
:59:11 (node:25189) unhandled promise rejection.
this error originated either by throwing inside of an function without a catch block, or by rejecting a promise which was not handled with .catch().
(rejection id: 4) does this mean the "to" email entered front end is somehow not sent back?
if i try to name a content type "function," along with the aws provider plugin, the build process will fail.
the error in the console is: phofcode
throw error when `ctrl+s` save file using vscode.
i have to focus terminal and `ctrl+c` kill server and restart to see the update.
this bug only happen on windows.
this bug will not happen on macos.
global policies do not seem to be executing when included in the schema.graphql file for a specific model
my strapi system resides in port 443. when i'm sending a get request to phofurl it's working but a post request reutrns 404.
admin dashboard non-functional when host proxy name includes subdirectory.
after running a created project in production env we had this error error: the provider package isn 't installed.
please run `npm install strapi-upload-undefined` i 'm using a local provider.
do not work for graphql queries.
the same policies work for mutations and rest endpoints however.
cannot trigger custom middleware when edit contents in strapi ui.
unable to change properties in strapi api documentation plugin swagger.
i have created custom api called auth/google which verify google tokenid and generate jwt token for front end react.
now i like to have custom properties in swagger api.
currently it contains { foo: "string" } in request body and all responses
a lot of npm packages are outdated, moved or not secure to use.
trying to create a model entry through admin interface, but i'm getting an error: `undefined column(s): [categories.id] query: select categories.
* from categories where categories.id = ?
i have 3 models: news, categories, videos.
every model gives the same error on creation, except the field name: categories.id, news.id, videos.id.
i don't know why id is undefined?
it's working fine on my development environment and database (db is exact copy of development in a production).
impossible to disable tutorials in admin ui.
since a ".cache" directory is in a ".gitignore" and it 's being created during `npm run build` (when building an admin ui), there 's no way to set `show_tutorials = false` on production.
also has a comment in the upper section: phofcode why do not modify these options?
using npx create-strapi-app, i generated manually a project linked to a local mongo database.
while doing so i typed to quickly and set ssl to true (instead of false, since i 'm running locally).
the second attempt (with ssl: false) was successfully able to connect the db so my project generation ended up properly.
the issue is that when i used start the development server (`npm run develop`) it could not start because unable reach the database.
i noticed that my development `database.js` was like phofcode it looks like the first attempt 's settings were kept generate this file.
currently i have an "faq" group, which contain "question" and "answer" as fields.
this "faq" group is a repeatable field for a content type, "course".
when creating faqs in the content type creator, there is a mongoose error thrown: "mongoerror: e11000 duplicate key error collection: project.groups_faqs index: question_1 dup key: { : "what is a course?"
i really, really like the insert/paste image function in the markdown/wysiwyg editor, but as i am serving the website using your docker image `strapi/strapi` i get urls like: ` phofurl even though it is hosted at ` phofurl #
i have a model which name is `sku`.
so the collection name and associated db table are pluralized as `skus`.
the function returns `skus`, and this what is used when the column referencing the primary key of the `skus` table is created in join table between `skus` table and group tables.
phofhyperlink the problem is that when browsing in administration to list existing entries, i have following error : `unhandled rejection error: column skus_groups.sku_id does not exist`.
my guess that we don 't use `pluralize` lib for queries, but after searching for a while, i can 't find where `skus_groups.sku_id` field name generated for query.
strapi does not rename the field names in the database when i rename them in strapi.
i mean, if you change any fields name strapi will just ignore the old field no matter it contains any value or not.
the old fields will stay in database with their values.
what actually strapi is doing is creating a new field instead of replacing it in database.
required true/false option is missing for releated fields
in the search bar on the strapi admin interface, search does not filter items correctly
i created and removed the `category` field from `resources` content type.
you can't see the removed field in strapi ui.
but it is still in the database.
when we try to add a `resource` it gives us an error that says this: image phofimage we even tried to re-create the `resources` content type.
but it didn't fix it.
and when we looked at our database there was `category` field that we have removed.
you can see it here: image phofimage image phofimage
graphql server breaks if you create a content type with name `map`.
this will prevent any query sent to the server and return below error.
when running strapi in production mode, the configuration value for is ignored, and strapi is forced into ssl mode
i 'm trying to add a new user to my strapi project.
when i do i always get an error, even though there are no users with the username in the database.
strapi admin depends on a 3 year old package that is dependent on open@0.0.5 that has a critical security issue.
a clear and concise description of what the bug is.
when following the aws deployment guide, i receive an error at the end of step 6 phofhyperlink when i run `pm2 start ecosystem.config.js` error: `error impossible to register the 'core_store' model.`
renaming a content type that has media uploads loses the media associated with it
i have a user model like this phofcode it works on admin panel but when i upload from mobile device or post data from postman it doesn 't remove old relations so when i remove profile image, old profile image comes.
this took me a while to find out: querying for data in a many-to-many relation returns no data if related model includes a column named 'length'
after you login on admin ui, if you wanna open in a new tab (in chrome) with the same url of a content-type or any url of the admin you get redirect to the login.
the problem its that chrome dont store the session between tabs, but i dont know why dont store all in local storage like firefox did.
i have a mongo db authentication problem with my strapi installation.
strapi is running fine when mongo authentification is disabled in my config file /etc/mongod.conf but it 's not running when i try to enable authentication.
i provided my config files below - do you need any other info?
i provided the error generated by the nginx, mongo and passenger below - do you need other?
when using a custom upload service (with @koa/multer) the upload path is always my temp folder.
i created a repository showcasing my issue here: phofurl the following files are important: sample2.html (the upload html file) phofcode api/custom - services/myupload.js phofcode - controllers/custom.js phofcode - config/routes.json phofcode
queried nested objects still returning null with graphql.
with rest it 's working fine.
can 't aggregate count the user model
wrong url composition in view file and copy link of uploaded file
i 'm trying to use polymorphic relations in strapi however every time when i save a document strapi overrides the array with relations instead of adding new relations to it.
compile error when i use local dependency with
after running `npx create-strapi-app my-project` the installer hangs forever trying to install @buffetjs/styles@1.0.0
a url query that contains both a deep filter and a timestamp based param always returns zero results.
filtering using a where clause and a or folled by a array of filters are not working.
objects located deeper than 3 levels with "has many" one-to-many relationship always throw exception when querying using graphql.
after i create a data project aimed to reproduce it, the labels, descriptions and placeholders set on the "template project", and track then on a gh repo, they doesn 't appear on a repo clone (only the content type fields).
there is no way with the beta to make private some of the attributes through the model's json
as super-admin i can see the user password hash
i have an id (primary key) type set to uuid and a column referencing another table column with the association "oneway".
unfortunately, this second column (addressid) will take the type uuid instead of an integer.
a clear and concise description of what the bug is.
i have two contents created with the plugin, action and contentaction (see models below).
before, i could first create an action, then i could go create a contentaction and select the action i just created in the "action" dropdown.
now, when create the action, it is properly added in database (i use mysql workbench to visualize), but it 's not available in my contentaction dropdown (yet actions that existed prior to migration are available - this behavior feels like a big clue, but still failed to resolve it).
there is another clue: every time type a character in dropdown "search bar", ui makes a request to server that returns 500 (sample output below) phofcode
while adding content to any content type with a media field, the generated form does not have an option to select from the already uploaded files in the file upload section.
when i query my user object with `users(id: "2)` and access the relation of the subfield strapi throws error.
`your filters contain a field 'undefined ' ...`
after installing the graphql plugin, i can 't access the admin panel.
i receive an error of "an error occurred during models config fetch" (translated from my language).
api seems to be working with playground, postman, etc.
when editing rich text in the markdown editor, content inserted by various means will often appear in unexpected places.
further, depending on the scenario, the content that does appear is wrong while other existing content is deleted.
i saw that similar bug have existed before, this one is related to many-to-many (bi-directional) relationship only.
objects located deeper than 2 levels with many-to-many relationship always return empty array when querying using graphql.
after making changes to the content in wysiwyg editor and click save button, the page redirects successfully, but the modifications are not actually saved to the database when there is no latin characters or space included, for instance, when i add some chinese characters and save, these chinese characters are not saved.
my strapi installation has 3 users with `username` as one of the fields.
i am trying to lookup a particular user by username using the `where` clause in the `users` query.
this works fine if i pass a static value for the `username`, e.g., `where: {username: "jonsnow"}`, but `where` clause is entirely ignored if i pass value via query variables.
custom graphql queries are not working.
if you add custom query definition (in and than try to call this query, the request will fail (`cannot read property 'plugin' of undefined`).
i have tried to find the source of this bug and it seems that `globalpolicy` middleware is not called on custom graphql query request (located in regular graphql queries work fine.
the response of graphql queries with multiple models are wrong.
when i go to admin i receive a forbidden error in the console.
in a generated api that has a many-to-many relationship the json response from the api returns the attached relationship ids string as a split array rather than a string.
in my case the relationship is that product can have multiple collections and vendors attributed to it endpoint.
if you visit `/products` (e.g.)
result that each product has collection array of objects as expected: phofcode in alternative endpoint, e.g.
`/collections` id of product should follow same structure but instead is output as following: phofcode
cancel button does not work when adding a new role
on phofurl the admin panel should show.
but i only see die "welcome..." page.
lacking permission to for initial admin account setup console error ` phofurl 403 (forbidden)`
unable to update email templates, subject, from address from admin panel
if the model has two groups and the second group will be updated, and the first group is empty, then the second group will not save changes.
i recently updated to and switched from '_id ' to 'id ' in my graphql-queries.
now i 'm having a problem with my existing filters, that have been worked before:
enumerables don 't allow list items with non-alphanumeric characters.
perhaps this is the desired behavior?
if it is, the error label needs to be updated as it currently states: ### values should not start with a number or a special character.
i wanted my api to send default error messages in french on auth login when the user, associated with identifier and password sent, is not found or blocked.
after having strapi configured ( phofurl is doesn 't worked.
`strapi develop --watch-admin` as per phofurl is throwing: phofcode
language change does not cause text change in application.
when creating a local plugin that contains a custom model, installing strapi-plugin-graphql will break the build at runtime
a clear and concise description of what the bug is.
when `parser` middleware is disabled i can't log in into the admin interface.
a clear and concise description of what the bug is.
when adding multiple media files (jpg, svg, etc.)
inside a repeatable group element, only one remain after saving.
file upload api image url is wrong when using s3.
it still has the localhost url, however s3 has it's own url and doesn't need the localhost url be appended
starting strapi on heroku generates a error message and server wont start
api response of contenttype is showing irrelevant values for relationship contenttype
graphql query variables with where clause are not respected, instead of returning the searched item, the whole list is returned
when creating a new document with a group field, the lifecycle callback aftercreate/aftersave runs twice.
the first time it returns the result object with the group field as 'null'.
the second time, it returns with the group field populated with respective id.
applying any style on a text inside the
a linked image isn 't lockable (configurable: false).
content type builder always remove "autopopulate" options in models
when i call rest endpoint delete /upload/file in related item i have empty objects in that field for each deleted file.
the following error occurs when attempting to query a polymorphic field in graphql: phofcode
newly created strapi with mongodb giving me errors when going to the admin dashboard.
enumeration is listed as id in the listing screen instead of title or name
typeerror: cannot read property 'globalid' of undefined
i created a group with number fields.
i am setting the number fields default value and saving the group.
when editing the number fields of that group and resetting their default value to an empty value i am then getting the following error message when saving group: default must be a `number` type, but final value was: `""`
incorrect response when an email address is not confirmed with an incorrect password.
context object in controller does not contain user information (ctx.state.user).
i 'm evaluating whether to move my team 's project from 3.0.0-beta.7 to 3.0.0-beta.16, and in my exploratory test migration, i 'm seeing potentially blocking behavior - wondering whether user error is at play here, expected behavior has changed, or there 's a bug.
inside the admin panel, when viewing a user that has a relation, clicking on the relation results in a 404.
when adding a value to an enumuration field i got the following error: "values should not start with a number or a special character."
except, i am not using a special character.
the values are just text on new lines with no quotes or special characters.
this enum field was created prior to 16.3 beta.
enum fields created after do not seem to reproduce this error.
if you create a group and one of the fields is a relationship with a model which have inside more relationships, when you fetch this data, it shows the id of the nested relationship as a object with the order of character as key and character as value, in same way as if you do {..."idstring"}
it is not possible to set a `manytomany` or `manyway` relation to null.
it's trying to map on the nullable object that will cause an error.
adding a group that contain relation elements will cause application breaking <img width="685" alt="screenshot at 5 22 34 pm" src=" phofurl
clicking on the "settings" button on the plugincard for plugin content manager causes the admin ui to break with the error "something went wrong."
it 's basically same bug that has been reported in #3942 but in another place.
tried a delete request on but get a 404 not found.
i am able to download files, so i know the format should be good.
in new version beta 16.5, related content type is not showing the field name instead mongodb _id is listed.
this was working fine in version beta@14
when creating an enumuration as a field for a content type cant contain a special character.
currently, the `upload_file_morph` table 's `related_id` column defaults to a type of `integer`.
this caues an issue when a developer uses a string id type (uuid/nanoid/etc) on their user-defined model, becuase `related_id` only expects to receive integer id 's.
when table has no `id` property (e.g.
column_id) `idattribute` mentioned in model options phofhyperlink does not work, since it 's hardcoded here a clear and concise description of what the bug is.
when i do a graphql query to fetch one content type item graphql is responding really slow, from 3 seconds to sometimes 8 or 9 seconds.
when i try the same call with rest it 's response time is +/- 300ms.
can 't get more than 3 levels of complex childs.
since updating to version * * i somehow expirience an issue where the different icons in front of the content-type name are not aligned perfectly centered.
this is a totally astethic issue and does not effect functionality in any way, matter of fact it's unpleasant.
boolean field should set default (to false)
the yarn create strapi-app command fails on raspberry pi 4 running raspbian lite.
the installer crashes with error message related to mozjpeg module.
the app can be built and started after the crash but trying to install graphql then fails due to problems with dependencies and the app want start again without removing the node_modules folder and start over without graphql.
one of strapi's packages, `strapi-admin` , currently uses a dependency with a known vulnerability for stripping markdown: `remove-markdown@0.2.2`.
i noticed that i can use user mutations, f.e.
shouldnt that be secured by default?
otherwise user can randomly be deleted.
when i check the graphql schema in i see it should use the controller and actually permissions should be applied, no?
>await but in tests or apollo client no jwt token is provided and user still gets deleted.
maybe the policy needs to be applied?
when creating a relation between a group and another content type the server crashes
when i have a group that have a relation with the
the relation autocomplete doesn't work well.
after updating to beta16 (from beta 11) login using api and using login example in strapi documentation phofhyperlink is no longer possible because of error: phofcode
setting `mainfield` for a model does not affect the title displayed in another model with a relation to the former.
neither does setting the entry title.
default id of the document is always displayed.
after update from beta11 to beta16 following the only available beta update guide phofhyperlink i get this error on startup: phofcode full error output is below.
a clear and concise description of what the bug is.
see the `findone` controller `ctx.params` from http api (`id`) vs graphql query (`_id`): <img width="588" alt="screenshot at 14 50 46" src=" phofurl <img width="510" alt="screenshot at 14 34 31" src=" phofurl also if i change the `path` in the `routes.json` from: phofcode to: phofcode the http api returns `other`, but the graphql query returns `_id`.
in repeatable groups with relation fields, after selecting a value for the relation field and saving the content type that encapsulates the repeatable group then the data is persisted but relation field selected is not displayed in admin ui
i've updated strapi from beta.14 to beta.16.3 using migration guide and now i cannot create entries using lifecycle methods.
in my case for each purchase should be created first payment, so i do (simplified): phofcode creating purchase causes app to freeze after consoling 'before create payment'.
after a while i'll get: phofcode
renaming property in content type does not rename/recreate indexes properly
graphql authentication confusing error message: should be just "forbidden"
modal ui should not close if mouseup event outside of modal dialog
a clear and concise description of what the bug is.
date fields created in content type builder default to the current timestamp, but should default to null when no default was specified when this field was defined.
when i use filter on date there is no result with sqlite but with same data and mariadb this is working.
am trying to create field level permission, with strapi policies + graphql
it's impossible to create model with a date that is set to unix timestamp 0.
i can 't create new user from the admin dashboard with empty date field.
note that my user content type has a `birthdate` field: phofcode
(i consider this a bug because it deviates from expected ux.)
when saving a string field, strapi should automatically trim leading and trailing spaces before storing in the database.
this ensures data quality for these fields, and prevents issues such as a user copying and pasting a string into the input and accidentally & unknowingly (because it 's not visible) saving trailing white spaces.
(related & untested--and i can create another issue if desired--but enumeration field options should also have their leading/trailing spaces trimmed off of all options when setting up allowed values.
that 's not so much of data quality issue though, but would be best practice.)
a clear and concise description of what the bug is.
when i try to create a strapi app using the `npx` command, i get the following error: phofcode
upgraded to and on running _strapi develop_ and opening the content type builder in admin panel shows 'reload feature is required for this plugin.'
the error appeared after entering "%" symbol into the search input field
according to deployment guide phofhyperlink , if i have to run
_the strapi cli does not appear to be working correctly._ fyi: i am a relatively novice coder, but am really excited to try strapi.
i am familiar with running commands in the terminal and working with clis...i have run wordpress, react.js, next.js, and express.js locally for various projects and have not had any issues with the command line/node.js...
`cb is not a function` gets thrown during `strapi develop` after upgrading to beta 16. debug server wasn't able to start properly.
error typeerror: cb is not a function at module.exports.cb at execbootstrap at error command failed with exit code 1.
a simple scaffolding and creating a api on a plugin seems broken.
after updating to 3.0.0-beta16, the update user endpoint now requires `email`, `username`, `password` in the body.
note: if this is not intended, i believe it should take these fields from `ctx.state.user` rather than `ctx.request.body`.
eg: replace phofcode with phofcode let me know if you would like a pull request
related to this pr: phofurl (sorry @alexandrebodin i forgot to test with my own project :man_facepalming: ) error stack trace phofcode
sqlite option is missing in the database connectivity configuration.
when clicking on the settings gear for the content-manager plugin in the plugins menu a "something went wrong" appears and you have to close the adminui and reopen it
when running `node_env=production is_admin=true npm run setup --debug` the process fails because sqlite3 is not installed
a newly created strapi with postgres won 't start develop.
i 've got it running on sqlite
in firefox or safari, it 's not possible to submit a field that has a decimal value, due to html validation.
createuser mutation does not require a password and creates a user with a empty password.
updating strapi from beta-15 to beta-16 leads to an error: phofcode
impossible to find content type permission of a content type i created.
i tried to register a new user using graphql following the strapi graphql guide, i added a password field and while the user is created (inside the admin interface) the response does not contain a jwt token which is needed for future authentication
i have two table: terms & links "link" record is used to describe the relationship between two terms the content types can be saved without problem, but when i was trying to add a link record for two terms, i cannot save successfully.
i send a request with authorization and form-data including the file, but get a 500 internal server error: > error typeerror: cannot destructure property `refid` of 'undefined' or 'null'.
> at upload > at process._tickcallback
for accessibility purposes there should be scroll bars for the left menu and the main window as not everyone has the option for touchpad or mouse scroll wheel support.
i get a 400 response when trying to upload a file using aiohttp and python.
i have been successful with postman with the following process: "login" and retrieve jwt use jwt as auth header and post a form-data file however, with python and aiohttp, i cannot perform the second step.
i can successfully retrieve the jwt, but cannot find a format to send the form-data in.
i am currently using strapi with strapi-docker with mongodb database hosted on alicloud.
i build the api using content type builder on my local with local mongodb and development environment, and it's working fine as it should be, all files and collections are generated as they should.
but when i deployed it to staging and production, the collections/tables are not created i have to manually create the collection.
sometimes the collections are created, but more often they are not.
have access to database so can create collections myself, but this might be troubling in future.
any idea on why this happens?
am not sure if this is related to database, docker/kubernetes, or strapi itself.
trying to deploy strapi on heroku with mysql fails due to ssl settings.
strapi is no able to connect remote mongodb (mongo deployed on aws ec2), if mongodb security is enabled.
from command line able to connect but from strapi it is showing following error.
when i am trying update entry via api it returns unmodified entry.
but if the entry was updated via content manager, api works well.
when i try to make a query such as: phofcode it responds with 404 (not found).
if i do: phofcode it responds (correctly) with an array with my only entry for this.
as i 'm writing this i wonder if this is an expected behavior in order to require my field to be unique.
if that 's so i think it should be clearer in the documentation.
bookshelf search query builder strips unicode/cyrillic characters preventing search in non-english languages.
consider a get request with a policy to restrict the user to access his data.
when i try to set ctx.query.owner in an empty ctx.query its not reflected but when the ctx.query has any other values in it means its reflected.
after deleting a content-type, the created records for that content-type will remain
in model lifecycle hooks `afterdestroy` doesn 't include deleted data.
when add new content in admin panel, policies are not executed.
when trying to post new content to a content type, i get a "validatedmodel validation failed: path <variable> is required.
getting error 'your filters contain a field 'createdat' that doesn't appear on your model definition nor it's relations'
i've already updated all the plugins to the latest version 3.0.0-beta.15 without problems, but i can't update strapi-plugin-graphql.
according to this closed issue: #1657, when saving a json field it somehow escape the structure and save it to the database when using the strapi.request js command but does not when using the admin.
from my understanding, admin use formdata to send content, while strapi.request uses json.
when saving exact same data using these different approaches, one gets escaped (sdk) and one does not (admin).
during build, i get these two error below: the end result is build fails (error code > 0) and strapi continues and starts itself acting like it was successful (but sqlite is used and postgres isn 't altered by strapi in any way).
i believe sqlite is used because redeploying wipes out any data, such as new users, entered in the admin and then the start new screen is shown after every deploy.
when adding or editing a numer field of a content type, the minimum and maxamum values cannot be set to 0.
cannot start strapi with mongo connection
trying to filter a query with where, and _contains based on a variable doesn 't filter anything, and outputs all the data 1.- make this query: phofcode and variables: phofcode
it's not possible to edit favicon or meta titles.
date filtering through graphql not working as expected.
after a new strapi application install with a correctly configured connection to a mongodb atlas connection i am shown the message "the app has been connected to the database successfully!"
when i proceed into the project directory and run "strapi start" for the first time i receive this error "mongowriteconcernerror: no write concern named 'majority ' found in replica set configuration."
i have configured my mongodb cluster according to strapi docs instructions.
what is causing this error?
is it an issue with
attaching files we do not see their names and previews in the admin panel.
if there are several files, you need to open them to see what's inside and delete
when the date is displayed in the list of elements in the administrative interface, if the record has no date, current date is displayed
in the lifecycle callback for models, the fields representing relationships are empty despite setting them when creating.
i have tried `beforecreate`, `aftercreate`, `beforesave` and `aftersave`.
the relationship is correct when viewing through strapi admin
i followed this guide: phofurl to deploy strapi on digital ocean server.
i followed all the steps everything seem to be working just fine but when i cloned it to my server.
i installed everything did node_env=production npm run build but when i try to access the admin page is black.
im getting this errors in console.
from what i can see is trying access the files in /admin folder but i have no such thing there.
when did `npm run build` it generated all these files in /build folder
deleting an entry through graphql endpoint returns an empty object with all fields set to null.
when running a deletepost mutation i get an error saying: `"message": "cannot return null for non-nullable field post.id.
",` i have a content type post with two fields: * name (required) * comments when executing the following mutation phofcode the entry gets deleted from the database, but the following error occurs: phofcode the same error occurs when querying for the required `name` field.
when a not required field in mutation, it throws no error, but returns null: phofcode result: phofcode
it's quite hard to edit model which has many relations.
we have model `course` with relation `candidates`.
for the moment it is more than 3.5k related entries of `candidate`.
every time when i try to edit model (on every key press event) my laptop (which is high end macbook) stuck for few seconds.
if i remove `candidate` from displaying on `course` edit page, everything is going as expected.
also, there is ~1.3mb transferred data for each `save` request with enabled `candidate`
when deployed and heroku, after 24h the admin users and api permissions are reset.
you have to recreate an admin if you want to log in the strapi administration.
- during this 24h period, everything works without any issue.
- content types and database settings are still there, only admin users and api permissions are wiped.
link to plugin documentation settings not translatable.
all strapi-provider-upload-* on your github refers to version 3.0.0-beta.14.
however, when i npm install an upload provider such as i get version 3.0.0-alpha.15.
i had to manually change version in my package.json to get the latest version.
after first updating entry with json fields, json fields becomes strings.
the port 1337 is already used by another application.
after npm install strapi@beta -g and strapi -v shows 1.6.4 not v3
everytime when i try to create new project with strapi new command, i get error; when i choose custom installation, no matter what configuration i provide, i get error " connection test failed: cannot find module didn 't have such an error using strapi@alpha.
i 've tried to install strapi with yarn and npm also.
hey, i 'm using users-permissions plugin and i rewrite my user model on extensions to remove `username` attribute, because i have no interest in this.
i can create a first user with success, but from the second, i get error 'this username is already taken ', the same happens at ui.
i 've created a date field in a "news" page.
when administrator creates a new instance of "news", he can optionally choose the date, or omit it.
when he omits the date, i want to pre fill it automatically, using `beforecreate` hook in "news.js".
assigning "unique" to a content type string field but am still able to use non-unique values.
i have read phofurl which doesn 't mention sqlite.
as the title says, in quickstart project _q returns all entries.
example: with a field 'title' in content type 'blog', and creating 2-3 entries.
no matter what blogs?_q=query is, all entries is returned.
when we add user with strapi admin dashboard
a clear and concise description of what the bug is.
i can not use camel case (or underscores or dashes) in model names to separate words in multi-word name.
i have 2 models - question and questiontype and i want to create a one-to-many relationship between them.
when i generate `strapi generate:api questiontype` all seems working.
problems start when add a relation field to questiontype.questions (many : 1 ) question.questiontype.
it finishes without issues but then: 1. it breaks admin ui.
see screenshot (it renamed questiontype to questiontype and added questiontype which is a field!, not a content type).
notice inconsistency that "question type" in content type builder is still correct (but with space - which think is nice formatting but adds more confusion).
"questiontype" becomes unusable in admin ui.
when try add one record, screen loads indefinitely.
(see screenshot 2) (3. with graphql plugin, this will crash the server so had uninstall it) (4. generate:api allows using camelcase for model names, but admin ui doesn 't - it forces you all lowercase first time, but you can rename it later - which causes same issues as when generating.
graphql empty filtering returns all data.
mysql - update user in admin ui leads to er_truncated_wrong_value
a clear and concise description of what the bug is.
`strapi new project-name` will not allow me to create admin account or access register page and instead redirects me to login screen.
this is the same for quickstart and custom install (tested with local mongodb and mongo atlas)
while running cli command "strapi generate:model category --api product" it generate model folder inside api/product/model
i install strapi globally and run the command it throws error that command not found.
i went to the enviroment variables and added the path it throws error invalid character.
i do not know what more to do.
tried with 3.0.0-beta.13, same issues.
date filtering is not working through react-apollo, but it works in the graphql playground *this is not a react-apollo problem, more on that bellow*
error mongoerror: the dollar ($) prefixed field '$schema' in 'jsonschema.$schema' is not valid for storage.
after updating the deployed version with new types.
i can access the other types, but can't access the new added ones
_it is really hard to describe this bug, so i am sorry in advance if it 's not clear enough._ given a model (a) with the following fields: capture dcran a 23 39 14 phofimage and another one (b) which has a relation to the model a, if you set a a-model value in b-model entry, "invalid input syntax for integer" is thrown.
the cause is that instead of passing the id of the a-based entry, to passes value of "value" field of model a.
when i am trying to create a fresh strapi project by manually setting my database connection strapi failed to build test connection with my mongodb database.
there is no option to hide the content types in admin panel in latest version of strapi.
it was in alpha and i have choosed content types which i want to show and write them in layout.js file but now there is nothing like it and i cannot do it.
if the admin path is modified in config/environments/
i'm trying to extend the email plugin so i can use attachments in the template.
i'm using this plugin provides support for attachments, all i have to do is include an array of attachments to options.
the documentation for how to extend plugin phofhyperlink tells me that i have 'extend the plugin's controllers by create controllers with the same names and override certain methods' i create a file in and copy over code from original email plugin, modifying only options object but changing value of `options.subject`, then `strapi build` followed by `strapi start`.
when creating new entry with date field without date value it changes from undefined to current datetime.
at new projecrt creation, after creating the project it tryies to run and it crashes with this error phofcode
when starting my `strapi` project using `npm start ecosystem.config.js`, i will receive the error: `{ timeouterror: knex: timeout acquiring a connection.
the pool is probably full.
are you missing a .transacting(trx) call?`
i am trying to get strapi to pass facebook the correct callback url, but am unable to achieve this despite following the documentation.
i am running the login-react example phofhyperlink .
because eventually i will need to use this login flow with a react native app, i will need strapi give facebook a custom callback url instead of ` phofurl to simulate this, create a tunnel with ngrok localhost:1337. according this suggestion phofhyperlink set the redirect url in environments > development > server.json then `strapi build` then `strapi start`, but still callback passed facebook is localhost:1337. phofcode
- `enable email confirmation` is on, and email service properly configured - and database is sqlite for development environment - call register api to create an user, and check confirmation email.
by clicking that confirmation url, i see that, `isconfirmed` field/switch is `on` in admin panel, it means the user is confirmed.
- but i can not login, got error `your account email not confirmed`
when trying to start the cms in production i get the following warning: `the sql database indexes haven't been generated successfully.
please enable the debug mode for more details`.
i might be wrong :d but i am not understanding the usage of `amountlimit` is its results are unexpected
latest tag in npm regsitry is not consistent accross strapi packages and does not point to current beta.
my admin panel is stuck in infinite loading when i trying to add new content.
i'm using sqlite database and have some relation fields + havily use lifecycle callback methods (e.g.
for creating google calendar events or generate dotpay payments).
strange thing is happening when i set one-to-many relation.
lets assume that i have user (parent) with many articles (children).
when i update user, article lifecycle methods are called twice ([before/after] save, update), and then update on user entry is called.
i checked this for another relations and it works fine (even for many-to-many).
a clear and concise description of what the bug is.
1. go to content-type-builder 2. click on 'save ' after create content and field 3. see "error occur"
hi today i freshly installed strapi beta on one of my linux service.
all worked fine but when i tried starting server in production mode using this command : node_env=production npm run start it gave me error below is the log : phofcode
unable to set zh_hans language
re-rendering content manager edit component three times.
when setting a boolean value through the adminui and trying to create or update an entry the adminui doesn 't properly pass the required `1` or `0` value and instead sends the value as `true` or `false` resulting in below error
when creating a new project with strapi, it works, after installing graphql plugin according to the new plugins use system, it no longer works, i get an error: "typeerror: cannot read property 'routes ' of undefined" when trying to start with either strapi develop or strapi start command
in content with some boolean parameter isn 't possible to filter.
when i save a string value by using content-manager plugin, it force to convert string value into integer.
it is a very very old bug, and i'm sure it's a bug, not feature!
the "start the quick start tutorial" brings you to a 500 internal server error and whilst i am here, the blog and slack button on the documentation page doesn 't work
the strapi-plugin-cloudinary saves complete urls to the database for images, only the 'public_id ' portion of the url should be saved.
this allows for cloudinary to apply transformations and execute other manipulations to the image.
a graphql query that also contains images is very slow.
without images it works normally.
when i create a new record for my customer model, my field `user` is set to `null`.
i followed documents to add social login to api, i generated web client api on google developer console, and used those information to activate provider.
when i browser to ` phofurl i get the following error on browser and node logs: browser: phofcode node: phofcode capture phofimage
phofcode server logs show: phofcode
i installed strapi on my newly created gcloud vm instance.
graphql queries using a variable in a nested filter are giving do not apply the filter, where adding the string directly in the query gives the correct result
when doing a post to /upload to add an upload, it seems the content-type is required.
i was getting an error because of that missing.
the fix was to add `content-type: but would be nice if strapi can handle that and give some clear error.
when creating a field name in the following pattern: `title_en`, `title_gr` it breaks content filtering in admin panel.
when opening certain components in content manager, get the following error: phofcode occurs after upgrading from alpha.26.1 to beta.6.
graphql cannot search data based on a given user(s).
the demo server used is based on deliveroo tutorial phofurl phofhyperlink
while executing the simple light weight graphql query, this is the issue i faced.
the data is actually more than 16mb in this case.
i 've updated my strapi app from beta.6 to beta.7 (in order to fix some bug) but this new version has broken the facebook connection provider (and maybe other provider...).
when i tried to dump my all strapi database to restore it on new database/strapi all data was imported, even permissions but in admin panels the permissions are not set.
when i create a new admin, i set the password in plaintext and it gets encrypted with the hash and stored in the db.
but if i then go and edit that newly created admin, and set a new password, that password is now stored in the database as plaintext.
*note: this issue occurred using a postgres db from heroku*.
hello, i try to upload an image directly with graphql mutation but it doesn 't seem to work.
i am running an exsiting strapi project building it on docker i am not able to get the users table details in strapi admin showing error
webpack won 't finish loading.
building development environment for strapi with "yarn setup" resulted in following error: phofcode
with my project phofhyperlink if you override the `users` or `roles` models and change their default connection to another database (in my project both of these models are on the database connection `user` while the rest of my project is on the database connection `default`) and try to start strapi in production or staging it will crash due to documentation plugin.
(if moving roles and no documentation plugin it still crashes) removing these overrides for default connection allows application to start normally error message (with a console.log added): phofcode console.log of phofcode
`users-permissions` middleware always checks given authorization token, even when not required.
in strapi admin when attempting to uploading files greater than 2mb the upload fails.
when performing a post whose some fields are of json format i get internal error.
since many month, when i upload new files for an entity, all older files are removed from the relation table _upload_file_morph_.
i wait many new strapi update with the hope of this problem will be fixed, but not... i try to reinstall all from the beginning, but the same bug appears.
i 've found similar bugs fixed, but for other database system.
in i have papers collection and ids 7,9,10,...,m, but in the papers id change into 1,2,3,...,n. this leads to the relation error in other tables.
and i don't know how the ids change.
sqlite db phofimage sqlite db sqlite db phofimage sqlite db i removed some entries and backup the db, then next day all id changes, re-index from 1 to n. this leads to upload_file and other relations go wrong.
image phofimage the upload_file_morph and other table relationship went wrong.
i wonder why it happens how can avoid it.
i wanted to change connection name to something more descriptive (from "default" to "default local mongo dev".
the admin ui form passed this name but hang on rebuild and i 'v got an error in a console.
i have to discard changes build project again.
the `afterfetchall` lifecycle is triggered correctly after searching for some documents, with or without filters.
but when the filter is about a nested relation, then the lifecycle method will not be triggered anymore.
1. unable to remove request prefix, it was empty by default.
(can be solved by editing for now) 2. check boxes wrong behavior.
when selecting multiple entries in content manager (but not all entries) the multiple delete option says "delete all"
`strapi generate:api` prevents strapi from starting if used with attribute names containing "_".
based on the new pr to fix loading the documentation plugin settings, it appears that the doc plugin `config/routes.json` is being dumped into the file.
attempting to override the documentation plugin `settings.json` file via the extensions folder does not work as the file isn't loaded
in the alpha version, i was able to create a directory `config/environments/qa` and specify database connection settings in `database.json` (and obviously other settings but this was my specific use case).
i could then set the node_env environment variable to `qa` and the settings in the qa directory would be used.
this does not appear to be working same way in beta version.
was this functionality removed from beta version or is it a bug?
admin panel goes into infinite loading after installing the users-permission plugin
if proxy is configured in `server.json`, eg: phofcode this generates a confirmation url correctly, for example: phofcode however clicking on this link redirects to `localhost:1337` rather than the proxy url.
after crating a new data field i get this error on the terminal and strapi stop working: debug server wasn't able to start properly.
error error: sqlite_error: cannot add a column with non-constant default
hi, i'm installing strapi of the latest version in my aws light sail instance, but during the installation of strapi@beta, the process is just killed without any clue.
i have already installed beta version in one of my ec2 instance, but no luck with light sail.
when i create a settings.json file at it's not overriding the default settings.
if you create a `text` field and turn on the wysiwyg editor, the editor remains if you try to change that same field to a `string` field.
i added a custom route on a model and enabled the route in user-permissions.
(public) accessing the route via browser or xhr results in `403 forbidden` response
phofcode returns all records // amountlimit: 100 phofcode returns 150 records, should return 100 records it also will be useful to have this feature on the rest api.
we have just upgraded our project to strapi version 3-beta, and the custom graphql schema that we have defined for user model in is not working anymore, it 's like this file is being ignored, although i haven 't seen any change about this on the docs.
it used to work in the latest alpha version `#alpha.26`.
when setting up a many-to-many relation between to entities: a relation table is created (as expected) and the relation seems to work properly.
if strapi reboots it will not start again, giving this error: phofcode
failed to run in docker( cannot find module 'lodash')
i am unable to open a particular role to assign some permissions.
error typeerror: plugins.find is not a function at this seems to happen as phofurl is down which is called to fetch the information about plugins.
502 bad gateway nginx/1.10.3 (ubuntu)
i updated my strapi fork to the latest beta version.
after running the setup and run the global strapi command, there was an error message 'strapi: command not found`.
the same setup has worked before with the alpha version.
after upgrading to beta, we wanted to introduce our own user model, and once we did, everything was fine until we enabled the graphql plugin.
the graphql plugin seems to generate colliding schemas for the users-permissions-user model and our user model: phofcode
stack error: eacces: permission denied, mkdir err!
"/usr/bin/node" -gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library=" cwd node -v v10.16.0 node-gyp -v v3.8.0 not ok build failed with error code: 1 npm bootstrap@4.3.1 requires a peer of jquery@1.9.1 - 3 but none is ed.
you must peer dependencies yourself.
npm optional skipping optional dependency: fsevents@1.2.9 (node_modules/str npm notsup skipping optional dependency: unsupported platform for fsevents@ 1.2.9: wanted (current: ) npm code elifecycle errno 1 node-sass@4.12.0 postinstall: `node scripts/build.js` exit status 1 failed at the node-sass@4.12.0 postinstall script.
this is probably not a problem with npm.
there is likely additional log ging output above.
a complete log of this run can be found in:
i installed the new beta version.
then create a new project, but it can't be started.
a clear and concise description of what the bug is.
gatsby develop gives the following errors phofcode
development databases show as mongo, even though configured as postgres.
works on staging and production.
if you search something using the search field on the top of any list page in the backend, you cannot select records using the checkboxes inside list view on left side.
so its impossible to bulk delete these entries.
sometimes i can select one or more of checkboxes.
this problem affect all data types i have created.
when creating the deployable package in the ci pipeline it takes 13 minutes.
i 've successfully installed strapi on remote digital ocean server using the provided tutorial on medium.
i use subdomain, nginx is set to serve localhost:1337 on location /
this is a known bug, probably related to uglifying / minifying.
see phofurl phofurl and a lot of other google results.
when uploading multiple media images through the interface, using the it only uploads some of the images.
often times only uploading one of the photos.
the code errors on the first duplicate property.
works as expected copying type from parent to child does not work copying type from child to parent
no access token present in the parameter image phofimage
the whitespace between `foo` and `bar` is removed: phofcode
if a variable is exported from a module context and a variable with the same name is declared in a `<script>` element, the export is omitted from the module.
component binding from parent to child is ko when it has a reactive declaration in it.
i try to render a list of input element using keyed each block so that when enter key is pressed when an input is focused it will be swapped with the next input element.
likewise when shift+enter is pressed it will be swapped with the previous input element.
forward swapping works as expected and keeps the focus.
but backwards swap (shift+enter) causes the previous to be re-created and focus is lost.
i share a sample app written with both svelte and react.
react version work as expected.
a simple tight-loop of in the repl causes a message from svelte: "infinite loop detected"
when an each block follows a slot that uses a let directive that hides a variable of the same name in the parent then the each block incorrectly references the value from inside slot.
when bundling a svelte component into a module, then loading it dynamically, the `outros` function is missing and this causes a runtime error when the component is scheduled to unload.
the `{#each}{/each}` expression does not operate on a `set()`.
in dev mode, when a component exports a named function with the `function` keyword, then a warning "created without expected prop xxx" is issued in the browser console.
example: ~~~html <script> export function propornot() {} </script> ~~~
the content of an #each block that is only dependent on the number of items in the array being iterated doesn 't update when the array length increases.
bug was introduced in 3.6.0 (works in 5.4.0)
when giving a prop a default value of an object that uses a keyword as both key, and value (i.e `{true : true}`) the svelte compiler outputs invalid javascript, `{true}`.
`<datalist>` gets rendered oddly since it renders both the option 's value and the inner text of the option element.
(this is a browser thing which seems pretty terrible but nothing can be done about that).
it appears that attribute.ts#80 phofhyperlink is treating `<datalist>` `<option>` elements the same as for `<select>` and is
it's unable to define some attributes on 3rd-party custom elements.
when bundling in development mode the check for unknown props utilizes the array.prototype.includes method which isn't supported on ie 11. this causes a break on ie11
currently, css rules for `[slot="slotname"]` are discarded because in the source `.svelte` file there is no reference.
but on the created component, there is.
such rules are very important, because they enable the component creator to define the css inside component, and without need for extra markup.
when iterating over an array of objects with `{#each}`, one can bind values to a checkbox like this: phofcode however, if `todos` is a variable passed in a prop, checking/unchecking will not trigger a dom update.
passing an undefined variable to a component that uses `<slot/>` renders `undefined`
using an <i {...props}> results in an error.
remote cdn type css file not loading and/or being applied, through svelte:head tag
when i say `$: values = object.values(obj)`, `values` is not updated when a property is deleted.
i am not seeing my error message when i click the button with an empty input field.
`<svelte:window bind:scrolly={$y}/> doesn't update the `y` store.
when selecting a value from the `select` element, the selected `option` won 't have the `selected` attribute set as true.
@smui provides an `enhanced` select component which uses html to show the list of available options rather than the standard select type options.
these menu options display correctly against svelte `3.13.0-alpha.1` but disappear during the call to `flush()` when the page is being updated against svelte `3.13.0-alpha.2`.
please see issue raised against @smui phofhyperlink for some screenshots
if you download a repl with an external dependency, that dependency is conveniently added to the project.
unfortunately, the required dependency `sirv-cli` is also overwritten, causing `npm run dev` to fail.
when programmatically setting the focus to a button defined in app.svelte file the focus indicator is not shown.
howerver if you tab away and back it is shown.
the button is focussed as phofcode indicates.
have tried in onmount and setting css :focus but it seem focus just not getting shown.
when i run `preprocess`, with passing `{code, map, dependencies}` it seems the `map` object has no effect, as the has been lost and only contains the `<component>.svelte` file and no longer has `*.scss` files which were imported.
in my example i use a store to toggle between two distinct states, each containing a derived store with an array of distinct items.
the `if` statement using phofcode does not update the sub items in `content`, whereas phofcode does.
(for reference: cotent of `content.svelte` phofcode
spread properties on `<input>` tags can have an unexpected behavior on readonly attributes.
if a tag has `readonly={false}` along with a spread, then the readonly attribute is included in the tag as `readonly="false"`.
this results in a readonly input.
there is an `outer` component with a slot, which defaults to `inner` component.
`inner` component consisting of an input field bound to a store writable object.
if we now pass something to the slot, e.g the `inner` component surrounded by a div, input binding will break and log an "cannot read property 'value ' of undefined" error.
an exception is thrown from somewhere inside code-red when compiling a component that contains an import of both a default and named export.
when a prop (whose value is a store) changes, svelte does not unsubscribe from the old store and subscribe to the new store.
this seems related to #2014 and #2435, which were previously fixed.
via phofurl easier to show than tell: phofurl
svelte boilerplate that is been created with `npx degit sveltejs/template <app>` fails to load in brave browser tho it works as expected in safari and firefox.
components with an out:[transition] and a store subscription don't get destroyed if the store is updated while out:[transition] is in progress.
i 'll try set `list` and `form` with spread operator: phofcode it works in regular case: phofcode but fails with spread operator: phofcode
from stackoverflow [ phofurl phofcode the enablebutton (and enablebuttonrect) should cause taphere component to react when the promise is resolved.
if the div is not enclosed by {#await} it certainly does happen; but {#await} seems to prevent the reaction.
a stackoverflow question: [( phofurl raises an issue of a variable used as an event handler does not update.
phofcode from code, `handler` and `count` both are props and the h1 element uses, but handler does not update the on:click action.
note that this may just be a succinct example of #3040.
referring to this page: phofurl the sample code on the actual svelte.dev webpage does not execute.
none of the buttons work.
does not add or remove event listeners when updating a component
compound operators don't work in reactive statements, i suspect this has to do with the fact that there are no variables the assignment depends on.
so it is not run when the value of the left hand side of operator changes.
when trying to render a child component svelte will think that a destructured variable is undefined when another `export ...` statement comes after the destructuring.
wrong url format when query params clash with html special characters phofcode phofcode
i'm trying to build a system that loads external standalone components at runtime, and i want to use the `getcontext` and `setcontext` functions to share a store between all of the components.
i'm using webpack to build the main application which contains an `app` component that serves as the root of application, and then i'm using a completely separate project build another external standalone component (both an ssr version and a dom versions), which i then load in at runtime using `require` on node server-side, `<script>` tag on client-side within main `app` component.
the external standalone component does load render correctly, however within component any calls `getcontext` return `undefined`.
i'm not familiar with svelte codebase, but i assume this is due standalone being built as separate project getting its own versions of context related variables/functions at build time, rather than sharing same variables etc.
i assume this is bug, but if just doing something wrong please let me know.
writing a block comment before expression: phofcode compiler would throw `unexpected block closing tag (4:12)`.
---- writing a block comment after: phofcode compiler would throw `expected } (4:16)` ---- but this would be fine: phofcode
a web app fully developed in svelte (without ssr) displays blank because the framework fails to initialize.
with some effort of debugging, i found out the cause was here in `svelte/internal`: phofcode interestingly `htmlelement` is not undefined in ios 9 but its not a class (function) either.
`typeof htmlelement` equals to `"object"` in ios 9.this causes the script to throw and stop running before anything can be seen.
the error wasn 't that apparent actually.
i used babel to transpile es6 es5, which changes class functions.
after transpile there is a native function check: phofcode you can try this out babel repl by writing `class a extends htmlelement {}`.
and with this, the browser would run which is also faulty if htmlelement is not a function.
when the data is changed from the slot content via `let:` variable, it will not trigger rendering.
direct updates of the initial variable and binding from the component work just fine perhaps, this happens because slot parameters are not bi-directional bindings and there is no way to make them like that (`<slot bind:value={value}>` is not valid, according to compiler errors)
i 've been using the svelte template (from yesterday) and occasionally `yarn dev` or `npm run dev` just stops rendering new code.
i 've tried re-running `yarn dev`, resetting the browser cache, etc.
the only thing that works is changing the port in `package.json` eg.
`"start:dev": "sirv public --single --dev --port 5555"`
for phofcode or alternatively phofcode svelte generates code like `if ((show_if == null) || ) show_if = !!
you can see the exact same weird parsing behavior in the example below
just check this repl phofurl there are 22 000 empty text nodes that are really slowing down entire component on update.
in an attempt to use the flux approach in one of the projects, it turned out that reactivity is lost in certain cases.
i may not be using svelte correctly, but i think it 's a bug.
with ssr, this code: ~~~html <script> $: x = {} </script> {$x} ~~~ compiles to this: ~~~js // ... $x = get_store_value(x); let x = {} // ... ~~~ `x` is used before it is declared, and so it crashes.
(it does not work with an actual store either.)
if a store is created with a function as a second argument, that function is called when the subscriber count goes from zero to one.
in theory, the function returned from * that * function is called when the subscriber count goes from one to zero.
as of rollup 1.21.0, accessing unknown globals is now assumed to have side-effects, and our `if (typeof htmlelement !== 'undefined') { ... }` is now getting included in bundles, along with the entire `svelteelement` class.
i am making a component lib.
in one component (ssr mode) i was using ondestroy (imported from svelte) which called where it said on_destroy is undefined.
i guess that is a bug?
if i 'm abusing the use of generate ssr then that would be an explanation of undefined behavior.
trying to compare two numbers inline in html code blocks causes incorrect code to be generated, resulting in incorrect results.
`{1 === 1}` shows as false.
with this template phofhyperlink where we want eslint to co exist with prettier i have 2 problems when the plugins are nebale with this config phofhyperlink as described in the prettier docs phofhyperlink this enable eslint to call prettier 1) lint crashes in the svlte compile - see stack trace 2) prettier fails to format on save the app.svelte file - and error flashes up in status bar
it seems that after upgrading to svelte 3.12.0, using an @ in an attribute value causes a compiler error on the client.
this works as expected in 3.11.0
if a transition happens on an element that contains a slot, the slot does not properly update if it is rendered again immediately after the transition ends.
the media element binding phofhyperlink for setting is unreliable when setting single times.
for example a list of video position index markers.
clicking on an index, which sets the
using the spread operator in a #each loop in variable deconstruction and use the spread props feature along side other explicit props, makes the explicit props not reactive.
i cannot seem to bind a value returned from an await block to a custom component
if assign value to `toggle` in the condition, toggle classes happens only once.
if a component exports a property using an alias such as `export { alias as name }`, then binding to that property will fail.
on phofurl the server renders utc timestamps, but the client renders local timestamps
reactive declarations that depend on values that are initialised from bindings are incorrect during `onmount`.
when a variable is followed by a self-executing function, and no semi-colon, svelte outputs the error "`variable` is not a function."
using `{@html somevar}` to surround content with tags results in improper rendering of dom nodes.
this occurs whether the content is static, slotted, or comes from a variable substitution.
svg (in this case one rectangle with a gradient on it) shows up as a black rectangle (or whatever size the svg was set to) instead of showing the gradient.
this happens in ever version of ios mobile safari i've tested on thus far.
my ios is 12.4 but have been using crossbrowsertesting.com to test on other devices too.
in safari (12.1.2), when adding an `<input>` control with manual two-way binding - by using an 'on:input' handler for instance - changing the contents of the `<input>` control at any point other than the end of the word causes cursor to jump to end of control.
this does not happen in chrome or firefox (68.0.2).
i have not been able to test edge yet.
when nesting dynamic components that are imported via `await when the top-most component class is changed, the following error is thrown.
i'm importing two .js files.
one of globalstate, the other helpers.
- globalstate creates a store for erroralertmessage (writable), app.svelte imports it.
- helpers imports erroralertmessage too here is the repl: phofurl
compiler throw an error when using a iife as the key in {#each}.
transitions in await blocks cause duplicate dom nodes
when performed inside an inline function * with * curly braces, assignments to array items inside `each` blocks do not correctly invalidate the array but instead invalidate the array * item * .
a transition deep within some components makes both the true and false parts of an if/else render on the page.
when compiling a typescript code that uses `svelte/compile`, it fails because of missing libraries inside svelte package.
using babel with svelte seems to cause a bug that basically breaks the entire app with some older browsers, at least mobile safari 9 and ie 11. i can replicate the same problem with meteor's zero-config babel-powered bundler, as well as a custom rollup+babel setup.
when a prop is declared and its default value contain assignment, the compiler will throw up.
the compiler permits inline components containing named slots that appear inside other elements inside the component.
i don't think this means anything or should be allowed.
the currently produced code does not behave well.
if a bound prop is immediately updated as the result of state propagating upward, that update does not propagate downward.
i was playing around with trying to repro a bug i 'm seeing in ssr mode and happened to notice something weird in the output.
not critical, mind you, but still probably worth fixing?
repl does not allow user to update repl on mobile, it keeps deleting the typed character.
trying to migrate my project to vue to svelte encounter a problem (simple version below).
on mouse move mm object will update its coordinate.
i have also an array of objects (which currently just has mm).
the screen is displaying the mm coordinates both from mm `{mm.x} x {mm.y}` and from the array `{list[0].x} x {list[0].y}`.
however, coordinate from array is not updated.
it does not seem to make sense if i have recreate the list array every time mouse is updated.
- use an object property value as the value of an `input`, e.g.
`<input value={object[key]} />` - type something in the input, replacing what is displayed - replace `object` with another object that has the same
changes in $$props no longer causes a slot to re-render even if the slot has properties that derive from $$props.
if a component prop `foo` is modified by a reactive statement, and
this bug is already described in a few places, #3067, #1434, #3235, i added comment at the end of #1434
value passed to an event handler is not reactively updated under some conditions.
in an example below, a statement variable passed to an event handler is not updated depending on how the statements array is updated.
phofcode then, `statements[0].slug = 'one-updated ';` does update statement value, but `statements[0] = { id: 1, slug: 'one-updated '}` doesn 't.
interesting, that removing if/else part or adding stub like { statement.id ? '
' : ' '} resolves the issue.
it seems a value from a " let:" on a component with slots doesn 't trigger an update when used as a prop on slot... eg phofcode changes that "withcolourpicker" makes to "colour" aren 't causing the slot to rerender with new titlecolour.
attempting to `getcontext` in a component that's rendered inside an `{#await}` block returns undefined, instead of the context value.
i 'm testing how well vue components and svelte components play together when both are compiled to native web components.
it seems that svelte web components do not properly pass properties to vue web components, likely due to svelte 's heuristics checking for kebab-cased properties and not camelcased properties.
`data-foo={bar}` should, like other attribute settings, remove the attribute when setting it to a value of `null` or `undefined`.
the optimization (used unless `legacy` is enabled) of instead assigning to the `dataset` object prevents this.
i have a component that uses an input type image and it has an alt message also.
but the svelte compiler is constantly warning that it needs an alt message.
typing some umlauts such as `` in the repl's app.svelte and downloading it will mess up the umlauts to gibberish
a component with slotted contents will fail to render if it has a `let:` directive but the corresponding `<slot>` has no properties.
i have a component that is basically an `<svg>` with a `<slot>` the idea being that it 's easy to pass some svg tags to the component and have them all rendered the same.
this works fine as long as the svg is passed as an html string.
`{@html '<rect x=0 y=0 width=20 height=20/> '}` but if it 's passed as an element, it no longer works.
this doesn 't work: phofcode this does work: phofcode
a component can have a property like `<foo x-y-z={42}/>`, and it will ordinarily be quoted by the compiler: phofcode in ssr mode, we get this instead: phofcode this is somewhat contrived (you can only access that property via `$$props[ 'x-y-z ']`), but it 's a situation i 've managed to encounter, and it 's easily fixed.
inline styles with interpolations inside can behave very strangely.
this only seems to be the case when a whole css property name is interpolated.
this is very hard to describe with words and i probably haven't even grasped the exact cause for this error, so please take a look at the comprehensive repl linked below.
reactive declarations that refer to `$$props` should fire whenever any prop changes.
currently, this only holds true if the declaration doesn't reference anything else
1. if a component has a `<slot/>` 2.
..and in that slot we render something using `{@html}` 3.
...and then we render these components in `{#each}` and somehow cause re-renders, like changing sort order the contents of `{@html}` gets duplicated each time the `{#each}` loop is re-rendered
if i have a `$:` statement that updates a store based on a route param, it does not always fire.
if you have an element a with a transition:slide, and puts another element b with transition:slide inside it, the last child of element a isn't included in the transition.
instead it just pops up at the end of the transition.
this broke with version v3.6.4, as it worked fine up until v3.6.3.
cannot launch container image when filesystem is read-only.
this problem was initially detected in a kubernetes cluster where the default podsecuritypolicy has readonlyrootfilesystem set as true.
can be reproduced directly with docker.
the `pre` styles on `.opblock-body` make it very difficult to plug any component into the operation body that uses `<pre>`
_stream_writable.js:57 uncaught referenceerror: process is not defined at (_stream_writable.js:57) at webpack_require (bootstrap:79) at (readable-browser.js:4) at webpack_require (bootstrap:79) (index.js:28) webpack_require (bootstrap:79) object.
(swagger-ui.js:1) **i believe this issue is related to polyfills and related to angular, swaggerui versions incompatibility.
i tried with angular (7.2.0) and swaggerui (3.21.0) and it works perfectly fine.
for your reference, here is the link i followed for swaggerui (3.21.0) integrate with angular (7.2.0) phofurl
when switching between swagger doc apis via the topbar (input or dropdown), the authorization is not reset.
so the user provided authorization information for the first api will be sent to second api if user makes an api request on second api.
this only happens if authorizations of two apis have same name.
in example steps below this name is `api_key`.
in this case i log into petstore example, and after switching api this information is still preserved and sent with every request made.
normally, on the swagger ui, required parameters are checked on the form validation, like this (red background): image phofimage but when it comes to required `formdata` parameters, they are not checked on the form validation (no red background): image phofimage
when running the docker container with `-e validator_url=null`, the validator badge is not disabled and instead shows up as a broken link.
the documentation at phofurl says to use `null` to disable the validator badge.
it appears that an empty string does disable the validator (i.e.
i'm not sure which behavior was intended, but if an empty string was intended way to disable validator, documentation should probably be more explicit.
was fine until after upgrading to v3.23.0 onwards, it seem like that the `filter` object no longer show based on the example defined in the schema.
`response` object is still showing though.
the path definition that uses `$ref` renders in the `default` tag initially.
clicking on it (as if to expand) in the ui causes it to jump into the correct tag group.
according to openapi 3.0, and as the editor is pointing out: phofcode the uno and duo pets from `content/../examples` should be displayed as examples overriding the schema generated example.
when removing the `wrong` examples, only the schema generated remains, although spec specifies that `examples` should override it.
using `content/../example` (singular) - works as intended and overrides schema generated example.
per phofurl > examples of dictionary contents > you can use the example keyword to specify sample dictionary contents: > > type: object additionalproperties: type: string example: en: hello!
ui does not render any of these examples in the schema section, it only shows `{ < * >: string }`
with an older swagger 2.0 spec, i had a `parametermacro` phofhyperlink that would provide a default value for various request parameters.
after a switch to using an openapi 3.0 spec, that `parametermacro` function no longer seems to work and these default values aren't set.
it does seem to fire, but that seems to do nothing.
my api offers some root level routes such as phofcode and then versioned api routes such as phofcode i've defined a main base path using the `servers` block but then, for the root level paths i defined a path specific `servers` block.
this is not reflected in the ui however.
see image screen shot at 11 01 37 am phofimage
the color of the text and the color of the background are not in sufficient contrast to each other.
this can give problems for users with visual impairments & color blindness, but also can affect a lot of other users, leading to important text potentially being overlooked.
when the method is opened, nothing displays except a spinner.
when a * different * method is opened, nothing displays except a spinner.
when opening it up, the console prints: phofcode
description doesn't appear and some infos about scopes are displayed
the topbar plugin is not available in the `plugins` property of the swagger ui object.
it seems to live in its own directory and only gets imported in the standalone preset.
when loading the swagger ui, an error briefly appears at the top of the page, for a small fraction of a second.
no messages are left in the console log.
the following is logged on the chrome dev console: phofcode
it seems that log out functionality does not flushes authorization ** code ** received after successful oauth2 log in.
when you log out and logging in again token request sent again with the same code, not with the new one.
operations with very long paths and summaries render strangely.
the long path takes maybe 90% of the space, resulting in the operation summary rendering very strangely.
`swagger-config.yaml` is being overriden by default configuration: phofurl `constructorconfig` is filled with the defaults.
some of the schemas defined in the anyof clause are not rendering all info and their name, as shown in the image below.
there's no difference between the definition of events in yml file though.
image phofimage (unfortunately i can't share definition as it's an internal model).
here is developer console stacktrace.
every key press in the request body takes about ~800 ms to process.
the ui hangs and freezes while typing and opening operations also takes a very long time.
conditionally rendering the swagger ui (or the swagger editor) in the context of a simple react application creates a memory leak.
i just updated from using angular 5 to angular 7. after that, my swagger ui display the info section as escaped html rather than understand it as html tag.
but if i use dev mode with ng serve, it open swagger ui properly it doesnt happen with angular 5
example value of date property is not rendered correctly when provided as timestamp phofhyperlink value.
only strings (quoted or double-quoted) are rendered as expected.
unable to render query string parameter when using 'content' instead of schema.
i'm using 'content' because my query string is a json string, as stated in the example.
angular application compiles with an error: phofcode
local refs like the following that are used to prevent duplication are not resolved properly in `swagger-editor` or `swagger-ui`: phofcode
before i get too deep into filling out this report.....is `swagger-ui-express` also considered an app that is not using swagger-ui directly?
i'm attaching two files, that have exactly 1 difference: 1st file has as requestbody type.
2nd file has `mime/form-data` as requestbody type.
first file works completely as expected.
second file: - would not render the curl box - still sends data as
there is a present in the 3.18.0 npm bundle of ``swagger-ui-dist``.
in essence, #3366 is back, or had only been partially fixed.
the first time you instance the swagger ui, it works correctly.
after this, if you do it using swaggeruibundle variable again, it doesn't show the same information.
for example the requestbody of each request and oas3 badge are missing.
this always happens until you reload the page.
it is a big problem for spa pages.
if there is an enum query parameter, the user can select the parameter value from a drop down list in swagger-ui.
but the actual request made does not use the selected value, but uses first element in this drop down list instead.
enum value doesn't change in request if it's required.
when it's not a required value, it changes successfully.
running npm install followed by npm start (or serve-static) fails as http-server is not found.
error : `sh: 1: http-server: not found`
we have oauth2 authorization code flow implemented.
our api documentation is build using openapi v3.
using phofurl does not work for us, because there is a bug with the callback url.
swagger editor should either provide means to change the callback url required or should at least get it right.
newlines in the description fields are being converted to `<br>`.
since these fields should be treated as markdown, single newlines should be converted to an empty space.
double newlines would be converted to `<p>`.
for example: `system for storing beneficiaries' health insurance information for the third-party liability group.` is being converted to `system for storing beneficiaries' health insurance information for the <br> third-party liability group.`
the authorize popup is not clearing the apikey when logout button is clicked.
i have attached an example with two fields above.
1) the first 'working_field' i have a pattern and no default.
i see swagger-ui validates this correctly with no issues but doesnt apply the pattern agaisn the example.
2) the second field 'broken_field' has a default value and i can see that swagger-ui tags wtih a error message say 'string does not match :uber'.
this is incorrect, the string does match patter.
when compiling keras model with run_eagerly=true and passing 1d-inputs, model reshapes it into 2d.
when compiling with run_eagerly=false everything works as expected: layer obtains 1d-input.
when i run a tf.cast() including a division( '/ '), the change of random seed is different on python2 and python3 for example, if i run the following code phofcode i get following result on python2.7.10 phofcode but i get following result on python3.6.5 phofcode at first, py2 and py3 create the same random_normal.
but after run the tf.cast, they get different result.
when you return a created tensorarray from a function decorated with tf.function, the returned object is an empty tensor with an illegal state: object type is
when training lstms using the tf.keras api i get a warning: phofcode
it seems all threads are waiting in a deadlock behavior
i download a data from internet on loacl storage.
then i read the data and convert it to the tfrecord, and i bulid a custom model.
i use the tup like the tutorial shows.
but when run model.fit(), console shows this mistake.
attemping to save a model containing a stateful lstm to savedmodel format fails with the following error: > assertionerror: tried to export a function which references untracked object shape=(), objects (e.g.
tf.variable) captured by functions must be tracked by assigning them to an attribute of a tracked object or assigned an attribute of the main object directly.
when importing the tensorflow module with `import tensorflow` the following exception gets thrown > traceback (most recent call last): > file "import_tensorflow", line 8, in run > file line 98, in <module> > from tensorflow_core import * file line 403, in <module> if file line 401, in for dir_ _site_packages_dirs) 401, <genexpr> for dir_ _site_packages_dirs) typeerror: startswith first arg must be str or a tuple of str, not nonetype from phofurl the cause for this is phofurl because `site.user_site` can be `none` accordingly to the python documentation phofurl and this environment it happens to be the case.
a workaround for this is to call before importing tensorflow.
however, my opinion `user_site` needs to be checked here before it is used, or list _site_packages_dirs needs filtered `none` values.
when using a gradient tape in eager mode, if the gradient computation fails and returns `none`, the `apply_gradients()` function will attempt to log a warning using `tensor.name` which isn 't supported in eager execution.
the exact line can be found here phofhyperlink .
this is a breaking issue because it is simply a logged warning, and the code should continue to execute; however in eager mode it raises an `attributeerror` due to `tensor.name`.
a similar issue can be found above on line 1039 phofhyperlink however that one is less serious, as the code would terminate due to `valueerror` anyway.
using `tf.function` seems to work fine for autographing functions that take a `raggedtensor` as input and produce a `raggedtensor` as the output.
however, serializing such a module using `tf.saved_model.save()` seems to not work.
i'm using tensorflow.keras with tf 1.15 in colab.
i have custom loss function that loads vgg16 from tf.keras and does feature extraction from y_pred and y_true.
this feature extraction works if i pass as arguments either y_true or y_pred or any expression without y_true.
if i pass expression with y_true and something else it raises error: `you must feed a value for placeholder tensor 'dense_4_target' with dtype float and shape [?,?,?,?]
t [[{{node dense_4_target}}]]` the same code works when i change tensorflow.keras to just keras.
exception thrown: "keyerror: \'conv2d_input \'"
i am training a model in tf.keras with tensorflow 2.0.
i 'm currently using `imgaug==0.3.0` to augment images as part of a map function applied to a tf.data.dataset.
i 'm using `tf.py_function` to call the augmenter and it appears that autograph is incorrectly generating ops for some of the augmenters causing the pipeline to error.
i get a warning do not exist for variables when minimizing the loss.` when trying to backprop loss for a specific layer in my model.
the gradients keep turning out to be none regardless of optimizer.
i 'm not sure if this is a bug or a documentation issue.
the migration guide phofhyperlink recommends adding the `@tf.function` decorator to the `call` method of subclassed keras models or layers.
however, this causes problems when using the `layer.add_loss` method with input-dependent losses as described in the keras guide phofhyperlink .
in retrospect it makes sense that this doesn 't work since `tf.function` requires all outputs to be returned from function, but this is not made very clear in docs and resulting error message is not very helpful.
it seems that i can 't build a graph in which i assign dynamically some specific values in some specific positions of the filters during the training phase.
however i 'm not an expert on tf2.0 maybe i didn 't understand the new usage of the hidden placeholders, or some operations do not respect symbolic programming.
valueerror: tf.function-decorated function tried to create variables on non-first call.
valueerror: an `initial_state` was passed that is not compatible with `cell.state_size`.
received 100, 1), ndim=3)]); however `cell.state_size` is [100]
when calling a `tf.function` from within a `tf.custom_gradient` function a large delay occurs
fails: 1. when converting module with `tf.nn.embedding_lookup` and single gpu (of few in the system) is used (for conversion).
or 2. if module contains prebuilt layer.
i used the data-parallel mode to train my network.
for the require of research, i needed feed different category images to different gpu(all the images have same size, such as input dogs' images to gpu 0 and cats' images to gpu 1), so i initiated two tf.placeholder() and feed the different batch different gpu and started train the network.
it seems fine at beginning.
but after 4000 iterations or some uncertain steps, it hangs up!
originally, i built this model in tensorflow 1.1x and i transferred the model to tf 2.0 manually to use tf.keras.
it is working but it shows me this error message (e layout failed: invalid argument: size of values 0 does not match size of permutation 4.)
and its performance is worse than tf 1.1x.
i suspect that this error interrupts to train somehow.
i didn 't put any permutation layer in my model.
it is hard to find it.
currently when i compute jacobian with the option on conv2d layers, the gpu memory will explode.
for other layers like fc (with the same amount of parameters), there is no such issue.
when fitting an lstm model with a masking layer using keras, if you use binary_crossentropy both as loss and metric, the values are different.
in particular, the printed metric is correct, while the loss appears to be calculated without masking.
list of layers added to another `list` with the `insert` method are ignored by the model; it works fine with the `append` method.
this seems to be a problem with listwrapper.
import tensorflow as tf this gives false for tensorflow 2.0 and true for tensorflow 1.15
i 'm currently building a yolov3 model, the training was good, but when i try to save the model to h5 format, it throws out the "valueerror: unable to create group (name already exists)".
hi there, i want to use the stagingarea structure by using 'from import stagingarea ' in old version.
how could i use it in tf2, and i see the definition is here
i receive the following stack trace phofcode
i have a very complicated model solving an image-to-image problem.
i also use a custom callback which at some point generates some noise using `numpy`.
when i use `fit_generator` on this model, it manages to do the first epoch, then on the second, third or fourth it hangs at the beginning of the epoch.
i managed to see where problem was happening, and it happens here: phofurl basically, if put a timeout on second `get` it times out after a few successful epochs (sometimes just one).
there is no error thrown out so don't know why hangs.
furthermore, if debug at that point in code, can just execute function synchronously and everything will work just fine.
when creating a ragged tensor by using `tf.ragged.stack` on several regular tensors on the 0-th axis, the function crashes when the rank of the input tensors is 1.
when loading saved model through the tf.keras.model we get (tf=2.0.0): attributeerror: layer model is not connected, no input to return.
currently, the function closes the `train` writer, only to reopen it two lines later: phofurl this complicates sharing the writer with other callbacks, e.g., in my code below: this code throws a `runtimeerror: summarywriter is already closed`.
when compiling a `tf.keras` model without adding a loss, the `metrics` are not added.
i am incorporating tfrecords along with all the `tf.data` legacy functions in my projects.
i primarily work with images.
i am trying to develop a data input pipeline for an image classification project with the
when we create a custom said `mycustomlayer`, that returns a list/tuple of tensors in it 's `call` method, calling will break as `layer_test` does not expect list / tuple as outputs of the custom layer 's `call` method, and by tensorflow 's keras layer documentation here phofhyperlink , list / tuple of tensors are valid output.
i am trying to incorporate mixed-precision training in my `tf.keras` models.
after going through the instructions on the nvidia docs phofhyperlink , i used the following code snippet (full code is provided in the end): phofcode i do not see any speed up after mixed precision is enabled.
still there is no significant improvement to note.
on other hand, tried to experiment with but am kind of confused about how to appropriately use it.
am trying train following model on fashionmnist dataset: phofcode but when call `model.fit(x_train, y_train, validation_data=(x_test, y_test), epochs=10, batch_size=128)`, get following: in _apply_op_helper(self, op_type_name, name,
running the script: phofcode crashes the python interpreter (e.g.
`floating point exception (core dumped)`).
(likely as 256 overflows in `uint8` to 0, leading to an uncaught division by zero.
when running the aforementioned example inside the tensorflow `1.12.0-gpu-py3` container i get the following output: phofcode
the gpu memory is only used for 58%, detected by using limit_growth option: gpu total memory: gpu free memory: gpu used memory: memory percentage used: 58 phofcode training runs fine, but only when saving the model as a checkpoint, it crashes: phofcode log: traceback (most recent call last): file line 119, in worker result = (true, func(*args,
when listing file with `tf.io.gfile.glob` not all images are returned.
it seems it is not resolving the folders recursively.
when using the same path with gsutils we get the correct image count.
i used stagingarea to make data transferring and coputing as a pipeline.
but it turned out that memcpyhtod was not overlapped with computing.
currently it is not possible to use fit_generator.
instead we need to use .fit function.
using imagedatagenetor, i tried to fit the model but i got an issue : assertionerror traceback (most recent call last) in <module>() 5 train_gen.flow(x_train, y_train, batch_size=batch_size), # # 6 steps_per_epoch= ----> 7 epochs=3, 8 ) 2 frames in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
i create a fully convolutional simple model using tf.keras api.
i convert the model to tflite.
i resize the shape of the input tensor, but when i ask the interpreter to allocate tensors, get this error: `runtimeerror: t->dims->data[d] != t0->dims->data[d] (24 != 52)node number 12 (concatenation) failed to prepare.
with tensorflow 2.0, `resize_with_pad` does not seem to work when `tf.keras.input` is given as an input, although `resize` works nicely.
a copy of my model (model_copy) should be trained one step, then i need my meta_model to be trained with the loss of my model_copy.
it seems, that the graphs are unconnected.
it only works, if i use the meta_model for the training step.
`autocastvariable` variable forwards `assign` and `scatter` to the underlying `float32` variable: phofurl thus, the return value of `assign` methods with `read_value=true` is a normal `tf.variable` and not an `autocastvariable`.
this means that calculations directly depending on the assign operation, might run in `float32` instead of `float16`, or am i missing something?
_(note - also posted to nvidia developer forums)_ i'm following the tensorflow 2.0 instructions phofhyperlink for optimizing a savedmodel file with tensorrt.
i have my tensorflow model saved to models/mymodel.
when i run the following: phofcode i get the error (from second line): > w could not load dynamic library 'libnvinfer.so.5'; dlerror: libnvinfer.so.5: cannot open shared object file: no such file or directory; ld_library_path: f getinferlibversion symbol not found.
aborted (core dumped) looking at the thread here phofhyperlink , it seems like it may be an issue with needing to set ld_library_path.
however, when i google setting ld_library_path, it seems only necessary when manually installing tensorrt from tar.
have not built/installed tensorrt separately and am just using what's bundled in with tensorflow 2.0.
first, we need the two files below.
`cluster.py`: phofcode `task.py`: phofcode then one could use the following commands to run the experiment: phofcode * experiment 1 (failure): * run the above code without change.
it is programmed to all gather 4 tensors across `task:0/gpu:0/` `task:0/gpu:1` `task:1/gpu:0` `task:1/gpu:1`, but gets stuck.
if one turns on env , one will notice it successfully gathers values but gets stuck right after it, specifically after posttopeer ...` * experiment 2 (success): * run above code with `group_size=2`.
on each task, it is programmed to gather 2 tensors on 2 gpus of that task.
for example, on `task 0`, it gathers `task:0/gpu:0` and `task:0/gpu:1` and it succeeds.
experiment 3 (success): run above code with original `group_size=4` but with `all_reduce` op (as provided in commented code) instead of `all_gather`.
getting this error and the training accuracy doesnt improve <function at could not be transformed and will be executed as-is.
please report this to the autograph team.
when filing the bug, set the verbosity to 10 (on linux, `export autograph_verbosity=10`) and attach full output.
cause: warning: entity <function at could not be transformed and will be executed as-is.
please report this to autograph team.
when filing bug, set verbosity to 10 (on linux, `export autograph_verbosity=10`) attach full output.
i am training a model using multiple optimisers and am getting an error when the train function is decorated with @tf.function.
i 'm attempting to modify the current from the android object detection example phofhyperlink to use the experimental tensorflow lite android support library phofhyperlink i seem to be loading the input and output tensor buffers and running just fine.
getting a map of labeled probabilities crashes with error:` label number 97 mismatch shape on axis 1`.
i am using a custom quantized model and custom label file with 97 classes.
i am certain that this model works, as it runs perfectly fine with original example (with modifications to sizes of course).
when loading a model saved using `model.save('./model', save_format='tf')` without compiling it and executing an inference, using `model.predict()` the following exception is raised: bash attributeerror traceback (most recent call last) in <module>() 1 backend.clear_session() 2 model = compile=false) ----> 3 model.predict(x_data, batch_size=10) in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing) 907 908 workers=workers, --> 909 910 911 def reset_metrics(self): in predict(self, model, x, batch_size, verbose, steps, callbacks,
when using tf.function with a number of for loops on a raggedtensor, the function call hangs (i stopped waiting after half hour).
-when running the function directly (no tf.function decorator), the function executes immediately -when converting the ragged tensor to dense tensor, function executes immediately.
i couldn't pinpoint exact combination of operations that causes this autograph behavior, but i tried to reduce my code to simplest combination that still causes this behavior.
i struggled for hours with my own code, trying to get tf.function work, until i figured it was due ragged tensor + for loops + tf.function hanging kernel observed similar behavior on my machine and a colab machine as well.
this problem concerns and tf.train.checkpoint in tf 2.0. if the checkpoint directory contains square brackets (` ` or `]`), then loading checkpoints with fails.
checkpointmanager will save and track checkpoints as expected but does not remove them according to `max_to_keep`.
i see that square brackets are [not recommended phofhyperlink for google cloud storage blobs, however this happens for both checkpoints stored in google cloud storage and checkpoints stored locally.
as an example: valid exist in calling phofcode gives the error: phofcode
i am trying to get a network (with conv3d ops) to run on my android system using tflite.
i have followed all the steps mentioned here phofhyperlink , and i can convert the network without issue.
during runtime, i also appear to be able to load the converted tflite model without issue, however, during my call tflite crashes giving me a sibabrt coming from (full stack trace below).
when i fit a model that takes time to infer (either with a big enough data size, or enough parameters), the `tensorboard` calback doesn't log the training metrics (or just the first few epochs), or at least they don't appear on tensorboard.
although i first noticed the problem on gpu, it also appears on cpu.
phofcode in one session, if one runs the above graph second time with the feed in a size different from the first time, it will raise an error: `inconsistent output shapes, got [14], but expected is [16].`
phofcode we refer the above code as `a.py`.
step 1: we launch it by phofcode with the log phofcode and it is waiting for another server as described in the `cluster_spec`.
note that no `print` above has been executed yet.
step 2: we launch it as another process by phofcode with the log and first processor with `task_index=0` hangs forever.
a erases checkpoints in its directory path that were not written by it.
this is a different behavior from `tf.train.saver` in tf1.
this might not be a bug, but a change has happened in the recent days in the keras api that has led my models to either divergence to nans or reduced performance.
let me explain (long explanation): for the last 3 months, i have been training a dense u-net to solve the problem from 'digest challenge- conference miccai 2019 ':
same keras model trained in eager mode, but got different result compared to non-eager mode.
the model didn 't convergent.
when training a sequential model (embedding + lstm + dense layer) restored from savedmodel with load_model(`model = i am getting the following error : `lookuperror: no gradient defined for operation 'while ' (op type: while)`.
i am able to train the same model, if the model was previously saved in `h5` format 'imdb_model ', include_optimizer=true, save_format= 'h5` ).
however it should work with `save_format= 'tf`` as well.
it works for other models (e.g.
convolutional model) but not for this specific model: phofcode
outofrangeerror when training estimator with filter in the input_fn when i remove the `.filter(lambda x: x[ 'label '] == 0)` in the `input_fn`, everything works fine.
the same error appears if i use: train_spec_kmeans, eval_spec_kmeans)` or = lambda: input_fn(data_files) , max_steps=10)`
using a custom model with named outputs does not work in tf2.
exception raised (from numpy concatenate) when predicting sequence labels with variable sequence length batches.
my environment is based on nvidia ngc docker 19.10 [ngc] phofhyperlink , which uses tensorflow 1.14, tensorrt6, cuda10.1.
i tried to quantize a normal inceptionv3 155 classes classification model to fp32/fp16/int8 and test the top1 accuracy over a dataset of 17000 images.
it turns out that the top1 class accuracy of fp32 and fp16 is exactly 100% identical with the original inceptionv3 model.
however, the int8 quantized model is much different with original model, top1 miss rate is the int8 model calibrated by randomly selected 1000 imaged from image dataset.
so i 'm confused whether it 's a tf-trt bug?
do you have experimental record of int8 top1 miss accuracy?
my tf-trt conversion script: phofcode
with the following configurations: = json.dumps({"cluster": {"evaluator": "ps": "worker": "rpc_layer": "grpc", "task": {"index": "0", "type": "worker"})` running estimator.train(), the output from the command line is phofcode
when i try to run this phofhyperlink example, a segmentation fault happens during inference.
i just formatted my ubuntu 18.04 and did a clean install.
when using tf-trt optimized graph to do inference, it only works as expected when batch size >=7(i tested batch size from 1-16).
and the result is completely wrong when batch size <7
i have transformer model trained with tensorflow==1.5.1.
frozen graph is optimized and further quantized for mobile usage.
together with quantized model, i have tensorflow==1.5.1 library built for ios via models from iphone 6 up to 9 all works fine, but iphone xs, xr and beyond crashes during inference (inference is equivalent to running `m_psession->run`) .
when running the model n times, it randomly emits error as below : phofcode
when running following code: phofcode i got incorrect output: phofcode i have installed fresh conda enviroment with python 3.6 and tensorflow 2.0.0. gpu is disabled with ` export
2.7x slower in 1.15. :-)
in the backward propagation of the lstm gpu code, there's a broadcast operation included in the gradient computation phofhyperlink of `cs_prev_grad` involving `wci` and `wcf` phofcode just before this code, the gpu kernel phofhyperlink `lstm_gates_bprop` is launched which calculates gradient of `cs_prev_grad` using `wcf` and `wci` phofcode
run the benchmarking tests for `tf.matmul` operation under different tensorflow packages: 1.
i am training an rnn (gru) where my varying-length sequences are right-padded with 0s and a mask is applied.
_many_ sequences are more than half 0s (padding).
i compile the model with a loss of `'mean_squared_error'` and a metric of `'mean_squared_error'`, but the output is different when the mask is in effect.
phofcode or equivalently: phofcode example output (note the different values for `loss` vs. `mean_squared_error` for both training and validation): phofcode when i disable masking, i get following output: phofcode without mask, values for `loss` and `mean_squared_error` agree.
for validation set, values are not really improving value of 6.7e-06 seems to be what you get when you evaluate on 0s that would otherwise be ignored by masking.
comparing values between runs suggests that `mean_squared_error` calculations are not using mask when it is in effect, but `loss` calculations do use mask.
(we'd expect lower when we correctly ignore irrelevant time steps.)
error raised when trying to feed ragged/sparse tensors to model with tf.data.dataset
during validation phase of keras' `.fit()`, only one gpu is used (while all gpus are used during the training phase).
it is not possible to use in distributed training: `runtimeerror: `add_update` was called in a cross-replica context.
if you require this feature, please file an issue.`
importing tensorflow gives me following error.
i am trying to modify tf session parameters in combination with keras (e.g.
the allowed gpu memory) and use `set_session()` to store these parameters.
however, if `set_session()` is called before `fit_generator()`, it causes the training to freeze when using multiprocessing.
to reproduce the error use the following code.
the colab gist to reproduce error can be found here phofhyperlink .
the colab execution of code in question is not responding, so i stopped executing after 10 min, which ultimately gives me error.
this problems seems occur also in 1.14, but not 1.15 !?
as indicated in #33973. the gist might work when executed first time, but error can be reproduce after running script a few times.
i 'm running tensorflow on gcloud using the image.
i 'm attempting to train a subclassed tf.keras.model.
i can train my image both on my local machine and gcloud, provided the --runtime=nvidia arg is not provided.
when i add that argument, the gcloud image fails with the following error: no unary variant device copy function found for direction: 1 and variant type_index: t [[{{node mapdataset/_8}}]]
i need to generate a tensor of uniform randoms inside a custom op.
i basically copy the code for generating a tensor for zeros as is done here phofhyperlink phofcode inside my kernel i have something like the following phofcode when i compile this and run my op (which i 've defined in the python api) get something like this for (n,h,w)=(2,4,2) phofcode notice the first value is repeated every 4 elements.
the second value is also repeated every 4 values.
the rest are seemingly random.
i load data from a csv file to create the dataset for fitting my model.
after saving the model, i can 't load it again.
i get the following error message: `valueerror: ( 'we expected a dictionary here.
instead we got: ', <tf.tensor 'placeholder:0 ' shape=(none,) dtype=float32>)`
this is my model, from the tutorials phofhyperlink : phofcode but it train error on my computer: python cancellederror traceback (most recent call last) in <module> 6 train_batches, 7 epochs=10, ----> 8 in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
when calling a phofcode layer created from phofcode multiple times and calculate the gradients with phofcode , using phofcode may cause raise , depends on the number of times we call the same layer( error raise if we call it more than 4 times ).
without , everything is fine.
after build from source code: phofcode i run the unit test: phofcode it failed with the error message: _error: no such target target 'bonus_tests ' not declared in package (did you mean 'loss_test '?)
defined by info: elapsed time: 0.382s info: 0 processes.
failed: build did not complete successfully (0 packages loaded) failed: build did not complete successfully (0 packages loaded)_
running the code gets the following error: phofcode there is no error if running the code without @tf.function decoration, or without using while_loop, or without using tape.gradient()
if i define a keras model with named inputs i can use a dict as input with the original model or after saving to h5, but not with the new savedmodel format: the name of my input layer is changed from `x_embedding` to `input_1`.
i have a custom metric in my model and using with `compile=true` after saving it results in an error in almost all cases, whereas i use the `custom_objects` argument according to the documentation phofhyperlink .
i tried to pass my custom metric with two strategies: by passing a custom function `custom_accuracy` to the `tf.keras.model.compile` method, or by subclassing the `meanmetricwrapper` class and giving an instance of my subclass named `customaccuracy` to i also tried two different saving format available: h5 and tf.
here are my results: - with tf format: - with custom function: fail `valueerror` message `unknown metric - subclassed metric: fail `valueerror` message `unknown metric function: customaccuracy` - h5 format: function: success subclassed metric: fail `typeerror` message `must be str, not abcmeta` note that given complete error logs (see below), error h5 format and subclassed is in fact same as error tf format.
the `typeerror` occurs when code tries raise `valueerror`.
try to train with a simple model with and without an embedding layer.
in the former case the distribute training fails (see below).
the following code is executed on two workers with `tf_config={"cluster": {"worker": "task": {"index": 0, "type": "worker"}}` and `tf_config={"cluster": {"worker": "task": {"index": 1, "type": "worker"}}`, respectively.
i have an input of shape (1, 1, 1, num_channels), and i run it through a in training mode.
when running on cpu (fused or not) or gpu (not fused), the batch norm has the expected moving_variance of [0.99, 0.99 ...] when running on gpu with fused=true, the moving_variance is [nan, nan, ...]
state handling in rnns with a bidirectional wrapper has changed in tf.keras from keras with tf 1.x.
in the old keras with tf 1.x, using `stateful=true` in a bidi-rnn had no effect -- i.e., all bidi-rnn models behaved as if `stateful=false`.
therefore `model.reset_states()` did not do anything.
in the new tf.keras, `stateful=true` in a bidi-rnn does have an effect -- the fwd-rnn is stateful and the bwd-rnn is stateful.
this is a good change imo -- even though stateful bidi-rnns are unusual, this is best way to implement.
however, tf.keras, `model.reset_states()` does not do anything for bidi-rnn models (simplernn, gru, lstm).
doing a transfer learning with inceptionv3 model on a medium-sized dataset (tfds, catsvsdogs).
for the same code, when training with gpu, the code runs smoothly.
switching to tpu produces this (and often other various) errors phofcode
from the docs phofhyperlink : phofcode i adapted this (i hope correctly for multiple gpus) phofcode which prints `8 physical gpus, 3 logical gpus` as expected then, calling just this line: phofcode throws: phofcode
attempting to save lstm based tf.keras model to a savedmodel it fails with error: `valueerror: attempted to save a function which references a symbolic tensor shape=(none, 2048), dtype=float32) that is not a simple constant.
unable to save tensorflow keras lstm model to savedmodel format for exporting to google cloud and google ai platform.
error message: valueerror: attempted to save a function which references a symbolic tensor shape=(none, 1280), dtype=float32) that is not a simple constant.
the code at the end results in the following output.
when attempt from python using tf.keras lstm model to create a savedmodel get error (first load model from h5 file first) valueerror: model object at cannot be saved because the input shapes have not been set.
usually, input shapes are automatically determined from calling .fit() or .predict().
to manually set the shapes, call
if trying to use the `identity` initializer in the `build` method of a custom `layer`, passing the shape as a tuple of `dimension`s fails, e.g.
phofcode fails with `typeerror: num_rows and num_columns must be positive integer values.`.
however, exactly the same code, where we replace `identity` by `ones` works perfectly.
failure happens because `tf.eye` doesn 't accept `dimension` objects as inputs, only integers, e.g.
valueerror: shape must be at least rank 1 but is rank 0 for (op: with input shapes: [64,64], [2], [].
resourceexhausted at last k fold of a k-fold cross-validation.
regardless of the k chosen.
i 've tried 3 fold, 5 fold and 10 fold and it always happens at the last fold.
tensorflow returns an error when decorating functions calling `lstmcell.call` with `@tf.function` if dropout is non-zero (most common scenario).
when using a custom loss function, keras' `.fit()` produces incorrect results.
when instantiating multiple `tf.keras.sequential` models concurrently on different threads, i sometimes get errors in certain calls within tracebacks are included below.
goal is to build tf lite with the extended runtime to support non-tf-ops.
for this i followed the steps from the official guide ( phofurl i added the missing flex delegate dependencies to phofcode i ran configure script with defaults only and bazel build command with mentioned options: phofcode this builds without errors.
when building my c++ app, it also compiles without errors.
but when executing binary, i get an error: phofcode this is not a path problem because it lies in same directory as my other .so files.
the app works when using static library generated by shell scripts in same directory.
i can 't make run the tutorial described here: phofurl the example is crashing with the following tf_config phofcode in the other machine phofcode when the script start processing first epoch it crashes, i tested on a single machine and it worked,
when model checkpoint is stored in a directory containing `[[` in its name, the model fails to load, looks like the model files are missing, throwing notfounderror 'model'))` throws exception when for example, the
i am trying to modify tf session parameters in combination with keras (e.g.
the allowed gpu memory) and use `set_session()` to store these parameters.
however, if `set_session()` is called before `fit_generator()`, it causes the training to freeze when using multiprocessing.
to reproduce the error, set `if true` in the main function.
1. when restoring from a tf.train.checkpoint, training does not seem to resume from exactly where it was left off.
2. it is not possible to load pretrained weights to the same model with different output dimension, even with `skip_mismatch=true`.
i 'm using kubeflow to deploy a simple keras/tf model training job (two lstm layers, input from csv).
the dockerfile it produces is: phofcode ` ...and the output at the top of this issue is from within the resulting container.
the container has a cpu limit of 7 cores and a memory limit of 26gi (the host node has 8 cores and 30gi).
by the 3rd of 20 epochs, after about 50 minutes, container is killed by kubernetes with oomkilled.
looking at a graph memory use, it increases linearly over 50 minutes, and evidently ignores limits.
i have previously trained this model on my laptop (8 cores / 16gb ram), 20 epochs, without issue, so this looks to be related to docker or kubernetes environment.
i am attempting to evaluate my custom trained inception v3 model, but the variables to restore being generated by this call ` variable_averages = variables_to_restore = are not found in my checkpoint file.
i get this error: ` exception has occurred: notfounderror restoring from checkpoint failed.
this is most likely due to a variable name or other graph key that is missing from the checkpoint.
please ensure that you have not altered the graph expected based on the checkpoint.
a model is compiled and trained using `script a` on the google compute engine.
the weights are saved separately rather than altogether due to #33947 , using the `model.save_weights()`.
the weights are then saved as a zip, and transferred to a windows-based machine.
on the windows-based machine, the same code is run to compile model but instead of training model again - weights are loaded using `model.load_weights()`.
this results in a phofcode #
model is unable to be saved using `model.save()`
when running the script below on tf 1.15, it runs well throughout.
running in tf 2.0, it crashes on the validation stage of the first epoch.
if `validation_steps` in `model.fit` is included it does run throughout.
however, if it 's omitted (which is natural to assume, as the dataset itself is not repeated) a strange error message `typeerror: 'function ' object is not subscriptable` given.
cudnn faild to initialize after correct installation, cant make tf2 work
i got a incorrect loss from history returned by calling model.fit.
you can see the correct and incorrect result by change parameter "error " from my code.
clipvalue and clipnorm in optimizers does nothing!
the collective ops executor will fail with the following program.
some basic math ops like `tf.math.exp` and `tf.math.pow` don 't work on sparsetensors.
i can not train my image with shape
tansfomer, which uses keras custom layers, cannot learn on colaboratory 's tpu.
it shows the error below.
phofcode the code i used is from the following site and i wanted it to work with tpu.
when try to save the below model in keras format, we get the following error: valueerror: unable to create group (name already exists) this happens as this model has three layers with name as below: tf_op_layer_pad/paddings tf_op_layer_pad such name causes error in keras as described here - phofurl
using single gpu and tf.keras.layers.gru layer and model.fit with mirroredstrategy fails on error `invalid argument: var and delta do not have the same shape` tf.keras.layers.lstm works fine on one gpu.
on machine with more gpu, the gru layers works fine.
i know it does not make much sense to run mirrored strategy on only one gpu but it is good for testing your code before uploading it to multi gpu machine.
it works in tf 1.5.
loading functional model should pass in latest version of tf2.
everything works great in tensorflow==2.0.0.
when using distribution strategy, the following code runs in graph mode, but fails in eager mode resulting in an nccl error.
since i need persistent variables to normalize my loss, the loss function was implemented as a callable keras layer, instantiated as a property of the keras model for which is compute the loss.
phofcode phofcode if i change assign_add call to +=, model runs in eager mode, but yields following error graph mode phofcode is there a preferred way to have persistent variables within your model that are aggregated across multiple gpus?
my retrain ssd_mobilenet_v2 model with my own datasets--called detect.tflite input shape phofcode output shape phofcode it could run object detect app using ` phofurl projects, just modify path to tflite and labelmap.
however we want to using gpu delegate like phofurl so i just using which download from phofurl .
phofcode but report this error in android studio when using virtual devices pixel 2 to debug.
phofcode if i use my detect.tflite, error is and i modify to use gpu delegate:
i set the number of gpu to one to be sure and i set the configuration gpuoptions.
to not allocate all the gpu memory i set allow_growth option to true but the issue is still present.
to limit usage of memory i set parameter 0.2, 0.5 or 0.9 but nothing changes.
for training only use allow_growth option and there is not out of memory error.
for information use clientsession for this part.
getting when trying to run my tensorflow program.
> python classify_image2.py --image_file > tagging none image_vectors > warning:tensorflow:from classify_image2.py:144: fastgfile.__init__ (from is deprecated and will be removed in a future version.
> instructions for updating: use tf.gfile.gfile.
w1030 deprecation.py:323] from classify_image2.py:144: fastgfile.__init__ (from is deprecated and will be removed in a future version.
instructions for updating: use tf.gfile.gfile.
creating graph w op is deprecated.
devices: streamexecutor device (0): host, default version successful read from sysfs had negative value (-1), but there must at least one node, so returning zero xla service executing computations on platform cuda.
(0) unknown: failed to get convolution algorithm.
this is probably because cudnn failed initialize, try looking see if a warning log message was printed above.
t [[{{node conv/conv2d}}]] (1) unknown: failed get convolution algorithm.
this probably because cudnn failed initialize, try looking see if a warning log message was printed above.
t [[{{node conv/conv2d}}]] t [[softmax/_3]] operations.
during handling of the above exception, another exception occurred: traceback (most recent call last): file "classify_image2.py", line 345, <module> argv=[sys.argv[0]] + unparsed) 40, run _run(main=main, argv=argv, 299, run _run_main(main, args) 250, _run_main sys.exit(main(argv)) "classify_image2.py", 296, main "classify_image2.py", 162, run_inference_on_image image_data}) 956, run run_metadata_ptr) 1180, _run feed_dict_tensor, options, run_metadata) 1359, _do_run run_metadata) 1384, _do_call raise type(e)(node_def, op, message) 2 root error(s) found.
(0) unknown: failed get convolution algorithm.
this probably because cudnn failed initialize, try looking see if warning log message was printed above.
t [[node conv/conv2d (defined ]] (1) unknown: failed get convolution algorithm.
this probably because cudnn failed initialize, try looking see if warning log message printed above.
[[node conv/conv2d (defined ]] [[softmax/_3]] operations.
original stack trace for 'conv/conv2d ': "classify_image2.py", 345, <module> argv=[sys.argv[0]] + unparsed) 40, _run(main=main, argv=argv, 299, _run_main(main, args) 250, _run_main sys.exit(main(argv)) 296, main 149, run_inference_on_image create_graph() 129, create_graph _ = name= ' ') 507, new_func return func(*args,
i 'm trying to add a kl divergence regularizer which relies on 2 intermediate layers of the encoder model.
this custom loss in keras model returns a tensor instead of a scalar when using outputs of intermediate layers.
this appears to be adding operators to the graph at each iteration until i get a cuda out of memory error.
phofcode notice that "loss: " prints something like tensor("add_146:0", shape=(), dtype=float32) when i call train_on_batch.
previously this was just scalar.
when using a gpu, the mask operation of the embedding layer (with lstm layer) gives wrong result.
with mask_zero = true, anytime there is an input of 0 in one of the time steps, the output should be same as previous time step 's output.
which is what it does with a cpu.
however, using a gpu, it just gives a zero output (which is not expected behavior).
when i compile an rnn model with the metric the following error results.
no error occurs if i use instead.
traceback (most recent call last): file line 1610, in _create_c_op c_op = shape must be rank 2 but is rank 3 for (op: 'intopkv2 ') with input shapes: [?,?,10], [?,?
during handling of the above exception, another exception occurred: traceback (most recent call last): file "report.py", line 12, in <module> file line 457, in _method_wrapper result = method(self, *args,
i am following this tensorflow documentation phofurl when running the example i am getting the following error message: phofcode
when gathering a trace (via the supposedly only supported in tf2 method) the resulting trace file shows incomplete gpu op names.
validated in tensorboard and deserializing the protobuf message.
if the model is trained with onedevicestrategy on one gpu an accuracy of 0.9988 is reached after 150 epochs in 5h 24min.
if the model is trained with mirroredstrategy on two gpus an accuracy of 0 is reached after 150 epochs in 5h.
the loss does not significantly drop.
i try to use k as a tensor in intopkv2 however, it tells me the k must be a scalar.
this is my code `input = tf.constant([[0.1, 0.2, 0.3, 0.4], [0.5, 0.6, 0.7, 0.8]]) k = tf.constant([2, 3]) output = ` image phofimage
clean virtualenv with tensorflow==2.0.0 installed raises a sigbus when operating on large enough numpy arrays using tf_dataset = output_shapes=(none, 3)) with a function that generates and operates on medium sized numpy arrays triggers a sigbus signal.
i am trying to convert an variational autoencoder into a tflite model.
during the process, i stumbled across a weird bug.
when explicitly specifying the shape of the sampling layer like this: the model is convertible without any errors.
but in case of not hard-coding shape into my model, e.g.
by inferencing it from input vector(s) like so: phofcode i get error that tf.random.normal is not supported by tf lite runtime: > some of operators in model are not supported by standard tensorflow lite runtime.
if those are native tensorflow operators, you might be able to use extended runtime by passing --enable_select_tf_ops, or setting when calling otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or setting allow_custom_ops=true when calling here is a list of builtin operators you are using: add, exp, fully_connected, leaky_relu, log, mul.
here is list operators for which will need custom implementations: randomstandardnormal.
when trying to convert a keras cnn to tflite file i get an error at the following line: `converter =
cannot convert tf model to tf lite model, with this error: init node weights/assign doesn 't exist in graph
i 'm using a vgg16 model written in tf2.0 to train on my own datasets.
some batchnormalization layers were included in the model and the "training" argument were set to true during training time and false during validation time as described in many tutorials.
the train_loss decreased to a certain level during training as expected.
however, the val_loss behaves really strange.
i checked out the output of model after training and found out that, if i set training argument to true, output is quite correct, but if i set it false, result is incorrect at all.
according tutorials in tensorflow website, when is set false , model will normalize its inputs using mean and variance of its moving statistics learned during but it doesn 't seem so.
here is error --says save method is not available.
`model: "sequential_2" layer (type) output shape param # conv2d_4 (conv2d) (none, 148, 148, 32) 896 max_pooling2d_4 (maxpooling2 (none, 74, 74, 32) 0 conv2d_5 (conv2d) (none, 72, 72, 64) 18496 max_pooling2d_5 (maxpooling2 (none, 36, 36, 64) 0 conv2d_6 (conv2d) 34, 34, 128) 73856 max_pooling2d_6 (maxpooling2 17, 17, 128) 0 conv2d_7 (conv2d) 15, 15, 128) max_pooling2d_7 (maxpooling2 7, 7, 128) 0 dropout_1 (dropout) 7, 7, flatten_1 (flatten) 6272) dense_2 (dense) 512) dense_3 (dense) 2) 1026 total params: trainable params: non-trainable params: want to save converter = object at iopub data rate exceeded.
the notebook server will temporarily stop sending output to the client in order to avoid crashing it.
to change this limit, set the config variable current values: (bytes/sec) (secs) attributeerror traceback (most recent call last) in <module>() 13 14 #now save the tflite model to the file ---> 15 attributeerror: 'bytes ' object has no attribute 'save ' `
the gradient computed for bias in tf.contrib.slim.conv2d + and are different!
currently, i 'm getting `lookuperror: gradient registry has no entry for resizebilineargrad` when its computing tape.gradient(d_loss, d.trainable_variables) in the code below.
this issue happens when running the tensorflow model inference in a tornado server started as a thread.
2.0.0 behavior phofcode i am unable to import as above, but only `tensorflow.math.sin` works when i import tensorflow.
writing ~90 layers of batchnormalization takes around 8g ram before training when disabling eager mode, even with matrix dimension small.
like 100m per batchnormalization in python3.6.8, regardless of dimensions.
edit: i did some experiment and found that the memory usage is approximately linear to the number of `batchnormalization`s.
my use case was to use `tqdm` to track progress on a training loop over a `tf.data.dataset`: phofcode however, when the function `train_one_epoch` is wrapped in a `tf.function`, the autograph is stuck in an infinite loop.
during fitting the data, it gives cancelled error in the very first batch
when using the distributed mirrored strategy to train the network on multiple gpu 's, the predict step fails with this error code: > file line 76, in predict > prediction = self.model.predict(x, use_multiprocessing = false) > file line 909, in predict > file line 462, in predict steps=steps, callbacks=callbacks,
i can save the tensorflow keras model to an h5 file but, when subsequently try to convert to tflite using code below it fails.
following directions at phofurl to perform conversion tflite (see code below)
non_max_suppression gpu version is 3x slower than cpu version.
the `_call_wrapped_cell` method of the `dropoutwrapperbase` class applies dropout on both `c` and `h` states of an lstm cell.
its default method to determine if a state should take dropout, only works correctly with lstm states packed as a `lstmstatetuple` namedtuple.
this was fine in tensorflow 1.x, where the lstm state is passed around as a `lstmstatetuple`.
however, in tensorflow 2.0 the state is a python tuple, and the method returns `true` for both substates.
attempting to load a keras model which has been compiled with a loss dictionary fails, throwing the following error: valueerror: unknown entries in loss dictionary: ['myloss'].
only expected following keys: ['dense_1']
when training a model (which i can 't make public at the moment), i 've got an error: `<built-in function len> returned a result with an error set`.
debugging showed the reason was in phofurl namely, my code ended up with `grad` being an instance of `indexedslices`, but was `(none, 16)`.
changing code to phofcode by analogy with the `tensor` case appears to work and let my model train, but i am not certain whether that 's correct.
lstmcell get_initial_state went wrong when batch_size is a tensor
when automatic precision is active, 3d convolution ops are not converted to float16 and no performance gain is observed.
in the output of the provided example, we can see that most of the nodes are not converted to float16: `converted 9/854 nodes to float16 precision using 2 cast(s) to float16 (excluding const and variable casts)` apart from the warmup delay during first epoch of training without amp, there is no difference in duration of epochs with and without amp.
session fails to initialize iterable dataset on gpu with message no registered 'const ' opkernel for gpu devices compatible with node {{node compression_type}}`.
no such issue occurs on cpu.
in some cases, the dataset initializes, but fetching the next set of data causes a segfault.
i have been unable to create simple code which reproduces the second effect.
valueerror: unknown metric function: custommetric occurs when trying to load a tf saved model using with a custom metric.
if you look at the code for load_model, it is clear the load_model currently ignores the custom_objects dict for the tf saved model format.
when loading a keras model saved in the `savedmodel` format the output names are lost.
losing the output names causes loading to fail if using dictionaries for configuring loss or metrics.
tensorflow raise error (valueerror: when input_signature is provided, all inputs to the python function must be convertible to tensors:) when checking input signature of a tf.function if input shape is variable in a distributed training environment.
the training works without any error when i train it with single gpu or input with fixed shape, or i delete a path to cuda from my environment path.
when i quantize the graph with tf.reduce_mean, it makes huge difference in outputs, compared original tf function and tflite model (not quantized).
get the above error on placing the op in gpu.
i have a dataset i would like to train my own dataset to detect eye region human with landmarks.
in order perform a good prediction after training , i would like know if possible calculate gradient noise scale adjust this variable with tensorflow library get good value batch size?
similar to the unpack node issue in phofurl the new tfliteconverter post-training quantisation flow, as described in phofurl does not support quantization of pack/stack operation when only integer operations are requested in the output model.
when such conversion is attempted the following error is reported: > runtimeerror: quantization not yet supported for op: pack
using `profile_batch=1` for does not collect any compute calls in the profile/trace
calling 'read(x)' on the text files opened with gfile in python3 doesn't work properly (it fetches x bytes rather than x characters).
this often results with the unicodedecodeerror (as the read can happen in the middle of unicode character).
`tf.keras.model.fit` ignores `class_weight` when passed a `tf.data.dataset`.
when passed an instance of `tf.data.dataset` and a `class_weight` dictionary with nonsensical label keys, it runs without exception, whereas it correctly raises `valueerror` when passed a pair of `np.ndarray`.
file line 186, in <module> app.run(main) file line 299, in run _run_main(main, args) file line 250, in _run_main sys.exit(main(argv)) file line 132, in main model = flags.input_model_json, flags.input_model_yaml) 65, load_model model = img_size=(256,32), num_classes=11, max_label_length=26) 70, model y = bidirectional(lstm(256, return_sequences=true), merge_mode= 'sum ', # 32*512 437, __call__ return super(bidirectional, self).__call__(inputs,
i am training densenet121 on imagenet with standard keras code and custom dataset pipeline.
`model.compile` is called with the only "accuracy" metric.
i am using as described in the tutorial.
i had to erase ~7,000 warnings which are all the same: w opkernelcontext is tracking allocations but they are not being consumed by stepstatscollector.` compiling with rmsprop fitting... is not passed in.
the `worker_fn` will be used if an "evaluator" task exists in cluster.
the `worker_fn` will be used if an "evaluator" task exists in cluster.
no distribution strategy will be used for evaluation.
no distribution strategy will be used for evaluation.
w cannot find shardable dataset, adding a shard node at end of dataset instead.
this may have performance implications.
w cannot find shardable dataset, adding a shard node at end of dataset instead.
this may have performance implications.
i abandoning scopedallocatoroptimizer because input fusedbatchnormgradv3_99 output 1 already assigned to scope_id 132 w error: internal: abandoning scopedallocatoroptimizer because input fusedbatchnormgradv3_99 output 1 already assigned to scope_id 132 error: internal: abandoning scopedallocatoroptimizer because input fusedbatchnormgradv3_99 output 1 already assigned to scope_id 132 e internal: abandoning scopedallocatoroptimizer because input fusedbatchnormgradv3_99 output 1 already assigned scope_id 132 error: internal: e failed: successfully opened dynamic library libcublas.so.10.0 successfully opened dynamic library libcudnn.so.7 not found: ./bin/ptxas found relying on driver perform ptx compilation.
this message only logged once.
could load dynamic library 'libcupti.so.10.0 '; dlerror: libcupti.so.10.0: cannot open shared object file: no such file or directory encountered error while starting profiler: unavailable: cupti error: cupti could loaded or symbol could found.
train for steps epoch 00001: learningratescheduler reducing learning rate epoch 1/400 collecting 0 kernel records, 0 memcpy records.
e cupti cupti could loaded or symbol could found.
the memory footprint of a custom tf.keras.model object affects training performance by almost two orders of magnitude.
unable to import tf.broadcast_weights in tf 2.0.
observed within mellanox tensorflow ci phofhyperlink after phofurl commit.
we run tensorflow models example on a 2-node cluster (1 gpu per a host): phofurl phofcode
i use dataset.map to normalize images.
when using and batch_size of 1, memory consumption grows up till the program is killed.
the most intriguing part is that when setting the batch_size to greater than 1, the program works correctly this issue happens both with tensorflow 2.0.0 and tensorflow-gpu 2.0.0
wrong progress bar information overly long progress bar
if i sample many values from `tf.random.gamma` with shape=a and beta=b and compute their mean, i get a value which isn't close to a/b.
if i use the script below, computing the mean absolute difference between the empirical and theoretical mean, i get ~7.26 (with 500 tries, 50k samples from the gamma distribution each time).
and `global_step` can be fetched successfully when the operations are carried out _separately_ by a session.
nevertheless, the calling will trigger an info or occasionally fail when the two tensors are fetched _simultaneously_ in a session run.
regularly raise info: phofcode occasionally raise failure: phofcode full logs are attached below.
the weights of the kernel in layers 13 & 14 are different in tf.keras and keras: the weights of the layer 13 in tf.keras are the ones of layers 14 in keras and weights of layer 14 tf.keras are ones layer 13 keras: with tf.keras: layer 13: conv2_block1_0_conv [[[[ ... ... ... 14: conv2_block1_3_conv [[[[ ... [ with keras: 13: res2a_branch2c [[[[ [ 14: res2a_branch1 [[[[ this is with include_top=true but include_top=false gives same thing
when you create a `java.nio.buffer` and fill it with data you can't use it to create `tensor` with shape
tab-completions in ipython spam the console with `the name ___ is deprecated` logging warnings.
upload credential to tpu is failed.
therefore, cannot train on tpu using dataset from google cloud service.
i also tried to downgrade to tf 1.14 but still not working.
when using with tensorflow eager execution and gradient tape, the source code (see below) produces following error: phofcode operations tf.math.segment_max, tf.math.segment_mean and are working ok, though.
i need the unsorted version because in more complex code bases, i a using several segmented aggregations and concatenating them, so i need to have fixed sizes.
restoring a checkpoint with saved optimizer variables is not working.
the final goal is convert the saved_model to .tflite to port to an android device.
my model must use lstm layers.
my references are from : [tensorflow lite experimental examples phofhyperlink and supported functions to convert rnns phofhyperlink ] i have used a single basiclstmcell with static rnn with compat.v1.*.
mnist dataset is used provide a stand-alone code example.
when creating a keras model using a lambda function with specified output shape, the shape is not assigned to the resulting tensor: dense_net from the example below: `<tf.tensor 'lambda_6/identity:0' shape=(none, none, none) dtype=float32>` if used before another layer like dense the error appears: `valueerror: the last dimension of inputs to `dense` should be defined.
when running the test in the code below, one of the tests fail.
somehow, the argmax result of max_pool_with_argmax is different when running with interestingly, failing test behaves as if it was ignoring batch index in argmax.
running `update_state` on ,raises exception when passing in `sample_weight` even if sample_weight and y_true shape are the same.
weighting in other metrics works fine so not sure if this is a user error, in which case the docs could be updated, or an acutal bug.
i haven 't had time to look into this deeper but would be open too applying fixes if someone could point me in the right direction, thanks.
phofcode error: can not squeeze dim[0], expected a dimension of 1, got 4 [op:squeeze]`
using numpy to simulate the calculation formula in scaled mode of the dequantize operator in tensorflow, you can 't get the correct result.
when run the code below, conversion errors appear that are in the logs below.
when importing tensorflow from a function or object, the `import` statement somehow keeps a reference to the function and increasing it 's reference count.
the full `import` stacktrace is never freed, making it impossible for the object (and anything referenced from that object or function) to be freed from memory.
valueerror: if a rnn is stateful, it needs to know its batch size.
specify the batch size of your input tensors: - if using a sequential model, specify the batch size by passing a `batch_input_shape` argument to your first layer.
- if using the functional api, specify the batch size by passing a `batch_shape` argument to your input layer.
when training a canned estimator with multiple tf.train calls while using any tf.keras.optimizer the optimizer raises an exception.
training a custom estimator on tpu with a `tf.data` pipeline that reads from tfrecords performs well on v1.12.
profiling with the tpu profiler shows that very little of the step time is spent waiting for input.
after upgrading to v1.14, training is slowed down, and the tpu profiler reports that much more of the step time is spent waiting for input (~67.1%).
the global steps/sec falls from ~10 steps/sec to ~6 steps/sec.
not using doesn't seem to help.
our pipeline appears to follow `tf.data` performance guidelines phofhyperlink except for not using -- using this parameter doesn't recover performance either.
calls to `tf.keras.model.fit()` run slower and slower the more there have been.
the sample code below reports about 200 us/sample at the start but after running for 20 minutes report about 400 us per sample.
this continues to increase with no apparent upper limit.
it remains slow even when training subsequent models but resets to fast after restarting the program.
wile playing with `tf.print` as described in docs, the following error happens: phofcode
i am following the tutorials: examples/speech_commands python --data_url= python it failed with: (tensorflow) s-macbook-air:tensorflow liupai$ python i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2 fma warning:tensorflow:from checkpoint_exists (from is deprecated and will be removed in a future version.
instructions for updating: use standard file apis to check for files with this prefix.
w1013 deprecation.py:323] from checkpoint_exists (from is deprecated and will be removed in a future version.
instructions for updating: use standard file apis to check for files with this prefix.
parameters from i1013 saver.py:1280] restoring parameters from traceback (most recent call last): file line 250, in <module> argv=[sys.argv[0]] + unparsed) file line 40, in run _run(main=main, argv=argv, file line 299, run _run_main(main, args) file line 250, _run_main sys.exit(main(argv)) 176, main flags.start_checkpoint) 101, saver.restore(sess, start_checkpoint) 1302, restore err, "a variable name or other graph key that is missing") restoring from checkpoint failed.
this is most likely due to a variable name or other graph key that missing from the checkpoint.
please ensure that you have not altered the graph expected based on the checkpoint.
original error: tensor name "final_fc_bias" not found checkpoint files t [[node save/restorev2 (defined at ]] original stack trace u 'save/restorev2 ': 250, <module> argv=[sys.argv[0]] + unparsed) 40, run _run(main=main, argv=argv, 299, run _run_main(main, args) 250, _run_main sys.exit(main(argv)) 176, main flags.start_checkpoint) 100, saver = 825, __init__ self.build() 837, build build_save=true, build_restore=true) 875, _build 508, _build_internal restore_sequentially, reshape) 328, _addrestoreops restore_sequentially) 575, bulk_restore return names, slices, dtypes) 1696, restore_v2 name=name) 788, _apply_op_helper op_def=op_def) 507, new_func return func(*args,
the func read() does not work (it return noting) and terminates my program.
random seeds work in surprising ways in tf 2.0 when using `@tf.function`.
in particular, the value of the global random seed is only taken into account when a function is traced, not when it is called.
this is surprising and different from tf 1.x behavior.
using tensorrt version in: 5.1.5 when using trtgraphconverterv2 to convert a saved model and trying to calibrate with int8 support, it will raise the error shown as follow.
should be mentioned that, the fp16 and fp32 conversation is work fine but only the int8 is failed.
it seems that when the batch size is dynamic, every new batch size in the input creates a slew of trtengine_op nodes.
seems to be a very crude and non-scalable way to handle dynamic batching.
after much work i was able to build `tensorflow_cc.dll` and linking it to a custom application without errors.
however, the application using the `.dll` crashes whenever is called.
after inspecting the source code, i see that the macro `log(error)` expands to a constructor of class which inherits from a heap error occurs when destructor of base class deletes its internal buffer.
the error also seems to occur when calling any function in tensorflow api which in turn calls log function, effectively rendering `.dll` useless.
installation of tensorflow 2.0 cpu on windows 10 not working.
i 'm unable to import tensorflow.
i get a `valueerror` when trying to save a `tf.keras.model` with a layer wrapping another `tf.keras.model` that has convolutional layers.
i am using `tf.keras.model.save` with the default `save_format` (savedmodel).
there is no error when saving with `save_format='h5'`.
model.evaluate raises this error after training traceback (most recent call last): file "lstm.py", line 76, in <module> model.evaluate([left, right], labels) file line 833, in evaluate file line 456, in evaluate import typing steps=steps, callbacks=callbacks,
as described in introduction, tf will try to share memory between tf and numpy when possible.
however i couldn't figure out how to do this.
after creating a and performing a map and batch operaion, the dataset fails to raise a stopiteration after going through the entire database, and begins to repeat / recycle values incorrectly.
when model containing gru layer, dropout is set and activation= 'relu ', the model is not savable.
error: attempted to save a function which references a symbolic tensor shape=(none, 3), dtype=float32) that is not a simple constant.
'post-training integer quantization ' fails with tf.matmul() in a certain condition.
( phofurl following code is a testing code for converting a dummy tensorflow graph with quantization.
this code fails if shape_b[-1] > 15 for me.
when i analyzed the visualization result ((bazel run model.tflite visualized_model.html)), i think it is a result of graph transformation issue.
suppose that shape_b = (none, 16, 4, 5).
then each tf.matmul op is replaced by 16 fully_connected ops in the tflite model.
and each fully_connected op has its own bias tensor, with shape=[5], as third input.
in this case, tflite_convert works in both cases that quantization=true or quantization=false.
when suppose that shape_b = (none, 16, 4, 16).
when quantization=true, the interpreter fails at the allocation step with following output: phofcode but code still works if quantization=false.
when i check visualization result, i noticed that bias tensors for fully_connected ops are merged into single bias tensor, shape [16].
it seems tflite_convert try to remove redundant zero bias tensors when it becomes large.
however makes problem in quantization.
because case, quantization parameters of tensor is shared by all fully_connected ops.
thus check - bias_scale) <= 1e-6 * bias_scale) fails, since may be different some op, while 'bias_scale ' are same.
how can suppress transformation behavior?
think somehow if could prevent transformation merges all tensors, quantization success.
when fitting (.fit) a keras model on a tf.data.dataset, the dataset size is not inferred.
because of this, when setting `verbose=1`, during the first epoch the log becomes `current_step/unknown`.
also the following is thrown (though it does not cause crashing): phofcode
if i import something from
the code in the section bellow results in an error on this line: phofurl the test_function does not have fetch_callbacks defined.
the error i get is: phofcode
i have a savedmodel trained with tensorflow 2.0 which i use to make an inference as follows: phofcode the model predicts fast on a cpu but when using a gpu device, it scales linearly and gpu does not offer any advantage.
when logging the device placement, i see that gpu is used.
to compare, i have the same model trained in tensorflow 1.13 saved in frozen graph format.
use the model as follows: phofcode the timing of this model on gpu in the same environment is much faster than savedmodel format.
think this is a performance issue.
here are timing details: tf2.0 savedmodel batch of 64 images cpu: 23 seconds batch of 64 images gpu: 14 seconds tf13.0 frozen graph: batch of 64 images cpu: 25 seconds batch 64 images gpu: 5 seconds
during "fit" of the first batch it gives a cancellederror
with the following setup phofcode the following code phofcode produces two different outputs, specifically: phofcode
the outputs of the tflite model (*.tflite), converted by the tflite_convert, are totally different from the original pre-trained saved_model.
when i tries to fix that, i finally got the right outputs by suppressing of graph_transformations to do this, i removed operations from parts of source codes and built a package from it.
i compared two versions of tflite models, by using visualization tool (bazel run model.tflite visualized_model.html).
found out that when is turned on, tflite_convert removes a specific add op and its one constant input tensor from my graph.
then it was very reason got different output.
this seems a bug to me so that want to report this.
since my graph is too big, and cannot share my codes, models nor figures, want to share responsible part visualization results.
strongly recommend draw graphs for better understanding.
consider following as tables, columns are seperated by '| '.
the following error happened when i was convert my model to tf.lite.
it 's quite similar to #24525 .
python traceback (most recent call last): file "tfconvert.py", line 18, in <module> tflite_quantized_model = converter.convert() file line 455, in convert
my code takes 21s/epoch in tf 2.0.0alpha while it takes 76s/epoch in tf 2.0.0. i found that the problem is model.fit_generator().
when i replace it with model.fit(), the efficiency of the code is exactly the same in both versions.
but i need to use imagedatagenerator.
getting oom error when training vgg16 on imagenet with batch_size=256.
was able to get away with oom error with batch_size=8 or turning off eager execution.
error message i get is the following: phofcode
i am trying to restore the checkpoints and predict on different sentences nmt attention model.
while restoring the checkpoints and predicting, i am getting gibberish results with warning below: `unresolved object in checkpoint (root).optimizer.iter: attributes { name: "variable_value" full_name: "adam/iter" checkpoint_key: }` below is the additional warnings that i am getting and the results: phofcode the warning at very end says: 'a checkpoint was restored (e.g.
or but not all checkpointed values were used... ' what does it mean?
autograph not working properly with custom keras layer and eager execution.
i compile tensorflow 1.8 with mkl, and i use c api session to predict wide and deep model.
the parallel performance is very slow, avg reponse time is 40 microsecond in 60 qps, cpu load is only 200% export kmp_blocktime=0 export export omp_num_threads=64 export kmp_settings=1 mkldnn_verbose=1 in the opposite without mkl, the parallel performance is ok, avg reponse time 9 microsecond in 60 qps.
i don 't know why.maybe i use wrong!
when having model with two inputs, with shapes e.g.
(486, 3673), (486, ) and one output (87, 1), after calling `model.fit_generator()`, the training crashes: phofcode
when i run the code below the memory usage increases each epoch until my system is unresponsive.
upsampling 2d set to twice the size of the input always outputs the size set at convert time, even when resize inputs are called.
the training from this source compiled binary starts successfully, but dies after some iterations.
while using on a dataset of 9 elements, with the following arguments: - cycle_length = 2 - block_length = 1 - num_parallel_calls = 2 6 threads seems to be launched concurrently.
shape=(), dtype=float32) tf.tensor(30.0, shape=(), dtype=float32) tf.tensor(3.0, shape=(), dtype=float32) tf.tensor(1.0, shape=(), dtype=float32)
for tensorflow 2.0, stop_gradient() doesn 't seem to work properly.
for example, the code below update one model 's weight using output from another model.
in tensorflow 2.0, it will try to compute gradient for the stop_gradient() model.
the model defined which has layer cannot be save by model.save() function.
it shows the error below phofcode
when converting to pil format from array and back, tf silently rounds values to integers.
when using lambda layers with parameters generated in a loop, creation-time behavior of model is different from behavior of model re-loaded from a save file.
i am using a `tf.data.dataset` to train a `tf.keras` model.
my cnn input layer size is (72, 96, 1).
i find that if i input a tensor with size (96, 72, 1) (note the reversed dimensions), training completes successfully.
however, if i enable eager execution, a `valueerror` is produced as expected.
training keras model with convlstm2d stateful layer fails to train under distributed scope.
if i set stateful to false it distributed learning works.
error message: traceback (most recent call last): file line 17, in <module> model.fit(dataset, steps_per_epoch=1, epochs=1) file line 766, in fit file line 333, in fit total_epochs=epochs) file line 123, in run_one_epoch batch_outs = 86, execution_function 554, __call__ result = self._call(*args,
screenshot from phofimage the jupyter notebook that comes bundled with docker image won 't authenticate its own token
when i run load and freeze in two different python functions, i get a crash that says: phofcode but when i run both of load and freeze in the same python function, then it works as expected.
enabling eager execution or control flow v2 causes rnn training speed to decrease significantly.
- xla compiled model files are not saved in the desired directory, even though i declared the xla dump directory in an explicit manner - according to this link ( phofurl a compiled model must be saved as `module_xxxx.ptx` or something, which is not visible.
- meanwhile, i only can see the graph descriptions about the model under /tmp, even though i did already declared a different directory far from /tmp.
i have a error when i use if cond in tf 2.0. the error code is as follows: + markdown format does not work properly.
sry.... valueerror traceback (most recent call last) in <module> 2 multiboxloss = multiboxloss(8) 3 ----> 4 = 0.001), loss = metrics=[ 'acc ']) in _method_wrapper(self, *args,
see this gist for reproduction phofurl if a model has sparse input, they seem to be converted to dense tensors when `saved_model.save()` is called.
this causes model saving to fail.
minimal test script: phofcode output: phofcode
the model.evaluate is providing totally different results from the model.fit method.
to demonstrate this, i 've don 't this on colab : 1/ create a notebook with gpu setup 2/ create a dataset with only one image 3/ feed a training loop (tf.keras.model.fit on 100 epochs) with the image embedded as a tf.data.dataset.
as there are only one image, i got
while running using tensorflow 1.14 or theano backends this code works fine.
after upgraded to tensorflow 2.0.0 it stops working and memory usage increasing without finish the program.
attempting to use progbar as a callback to model.fit() fails.
when i try to use tensorflow 2.0 with cuda 10.1 i run into some errors.
previously i haven 't seen these errors with older versions of keras/tensorflow.
image phofimage code: phofcode error: phofcode
after migrating to tf 2.0 i tried to run the exact same model and got much worse results
dies due to memory constraints on tensorflow 2.0.0 (but not in 1.14.0)
please see attached jupyter notebook phofhyperlink .
i am going through francois chollet 's book "deep learning with python" and running the code in his jupyter notebooks in tensorflow 2.0.0 adapting the code to "import tensorflow.keras" instead of "import keras".
notebook 6.3, (under the heading "1.6 using recurrent dropout to fight overfitting") has a model with a dropout=0.2, recurrent_dropout=0.2, input_shape=(none, float_data.shape -1])).
the data is read earlier in the notebook from with tensorflow 2.0.0 and tensorflow.keras i get a loss of and val_loss: 1.1059 after first epoch and similar figures after subsequent epochs.
these figures are simply wrong (see below).
it also runs about 10x slower than its supposed to.
i interrupted kernel after 4 epochs.
the original notebook (from francois chollet) is here: [link to github phofhyperlink includes correct output.
hi, how can i access validation data within a custom callback ?
`tf.io.gfile.gfile` does not work correctly with the python built in `zipfile` module.
when writing to a zipfile where `file=gfile()` the resulting zip file is corrupt.
`tf.io.gfile.mkdir()` on linux does not throw an exception if the path exists.
this can cause problems if the path is a file, as you would assume that the path is a directory after calling `mkdir()`.
see the code below for an example.
when running a tensorflow program for the first time (in a fresh docker instance) it detects the gpu as expected.
when running the same program again (after stopping the previous run) it doesn 't detect any gpu devices.
this works as expected in tensorflow-gpu==2.0.0rc1 however.
conv, conv2d, and backend.depthwise_conv2d support dilation_rate, but depthwiseconv2d does not.
the training crashes with an error( valueerror: you must specify an aggregation method to update a mirroredvariable in replica context.)
if the model is compiled with the optimizer nadam along with a mirroredstrategy.
i have a multi-input network that uses a `tf.bool` `tf.placeholder` to manage how batch normalization is executed in training and validation / testing.
ive been trying to convert this trained model to `coreml` via `tf-coreml` library with no success, with below error: retval 26] does not have value` i 've also encountered: `notimplementederror: unsupported ops of type: switch,merg` i understand that this error states that there is a certain node thats missing a value so the converter can execute the model.
i also understand this error is connected to control flow operations (linked the batch normalization method creating operations like `switch` and `merge`).
the [source code phofhyperlink shows this: phofcode note that my error is `retval 26]` (ive gotten [24], etc.
im assuming it tests the `switch` ead branch, which should be non-used branch for inference.
the code also does same with `merge` ead branch.
is there any detail im missing may be causing this error (not first ive faced during conversion, of course)?
the way batch normalization implemented?
what ive done so far: - i know creates operations `switch` and `merge`, which are not coreml compatible - ive tried converting `tensorflow lite` with similar issues - follow `facenet` (this model uses same `tf.bool` logic for training, validation, testing) conversion process no success - tried [`graphtransforms` phofhyperlink library tried scripts remove / modify control flow created separate graphs avoid extra ops no success _note: abstracted big part of code and network post issue._
as i fit a custom model using the keras api.
i monitor the memory usage via task manager and i see that every .fit() call the memory increases until it eventually crashes the script with no warning whatsoever.
it starts off with allocated 5gb of memory and by time it crashes it as exceeded 16gb of memory.
the following code produces an array of zeros after running several times (for me it seems to reliably be on the fourth run): phofcode
tensorflow_transform throwing error when tf 2.0.0 version is installed.
17 # pylint: disable=wildcard-import 18 from tensorflow_transform import coders ---> 19 from import * 20 from tensorflow_transform.api import apply_function 21 from import * in <module> 42 43 ---> 44 gen_quantile_ops 45 quantile_ops 46 tensorflow.python.ops resources modulenotfounderror: no module named 'tensorflow.contrib '
if you try set_weights inside tf.function, your program crashes because keras attempts to convert tensors into numpy arrays phofcode
set tflite interpreter gpu delegate on androidit 's output is different without gpu delegate, and it seems that whatever data i fed, the model output is the same, is it something wrong with my code nd i have checked my code, it 's output is correct without set the gpu delegate.
attributeerror: module has no attribute 'attention '
i write a dynamic library with the tensorflow c sdk which can be called normally by a c++ program but when i wrap it as a jni and call it from a java program, it will crash: `a fatal error has been detected by the java runtime environment: sigsegv (0xb) at pid=26065, jre version: openjdk runtime environment (build java vm: openjdk 64-bit server vm mixed mode linux-amd64 compressed oops) problematic frame: c const*, ` what 's the reason for that?
i want to measure tensorflow inference time with different models on my 4-core armv8 cpu.
i downloaded quantized and float point models from phofurl then run benchmark_model to measure inference time.
please see attached picture for my benchmarking result.
from the result, you can see the inference time of the quantized models is always a little bit longer than the float point model.
i also did same benchmark with tflite, inference time of quantized models is much lower as i expect.
getting the error: `valueerror: unrecognized `embedding` layer names passed to `embeddings_metadata` argument: when passing embeddings_metadata to
when attempting to train a sequential model on the mnist dataset, the model remains at 11% accuracy.
this is only resolved when the inputs are scaled by 255.
importing tensorflow prints an error: > e hadoopfilesystem load error: libhdfs.so: cannot open shared object file: no such file or directory
my code is designed to determine gpus info and their indexes before import tensorflow by using nvidia-smi but tensorflow device indexes mismatch nvidia-smi indexes.
tensorflow log: phofcode nvidia-smi log: phofcode
gpu float32 implementations of `tf.matmul`, `tf.matvec` and `tf.einsum` all fail when applied to tensors with a `dimension >= 2
as per the comment in the function will use the underlying logits for better numerical stability if the last op is a softmax: phofurl but since keras adds an identity op to output of every layer, last node of a layer will always be `identity` so condition in above if statement will never fail for keras models and underlying logits are never used: phofurl using non-keras-layers like `tf.nn.softmax` will work, however.
on a tpu (colab) running model.evaluate on a tf.data.dataset build with tfrecords throw : compilation failure: dynamic spatial reduce window is not supported: %reduce-window.21 = %reshape.12, f32[] %constant.16), window={size=1x3x3x1 stride=1x2x2x1}, to_apply=%max_f32.17, ttpu compilation failed the fit method work perfectly with the same dataset.
evaluation working perfectly if i rebuild the model and load the weights on a cpu/gpu instance.
i don 't have this issue on tpu if the tf.data.dataset is not built from tfrecords
training steps use 100% of gpu as reported by tegrastats; validation steps use 0% of gpu and 350% cpu.
3.4gb of memory is used and 338k is free.
i am trying to deploy deepspeech 2 with on android.
inside the inference since the input audio is of dynamic length, i try to call `resizeinputtensor` in the c++ api on android to match the length of audio, which throws num_input_elements != num_output_elements` similar to #23600. in inference code there is a line of `reshape` which is from [-1, 1, 38, 25] [-1, 1, 38*25], (note that it collapses fourth dimension but doesn 't do anything with batch dimension.
after reading source code for `reshape.cc` it seems like even if batch size is indicated as -1, during conversion batch size explicitly computed and stored in model, which main cause of this bug.
optimizer increments the global step by 1 and stops without changing the network.
when invoking `keras.model.fit` with two `data.dataset`s, one is for training, and one is validation, so that the training one is infinite with `epochs` and `steps_per_epoch` provided to `fit`, and the validation one is finite without any additional parameters to `fit`, the progress bar shows incorrect number of steps after the first validation.
in particular, number of steps per epoch gets set to number of steps in validation set.
honor play and poco f1 phones give nearly same performance for tflite models converted using tensorflow (.pb) to tflite whereas tflite model converted using keras (h5) to tflite is behaving strange i.e.
runtime on honorplay(cor-al00) is 3 times higher than pocof1.
example: mobilenet-unet (converted from keras(h5) to tflite) average model runtime of mobilenet-unet(poco): 60ms average model runtime of mobilenet-unet(honor): 180ms simple - unet (converted from tensorflow(pb) to tflite) average model runtime of unet(poco): 50ms average of unet(honor): 60ms
`cat label.pbtxt` > some txt in the file 'label.pbtxt ', overwrite=true)` `cat label.pbtxt` > <empty text file>
i run a simple code to report on the system devices in a 2-worker cluster.
when unix system is the chief (task_id=0), it can communicate and establish session with windows worker and display cluster devices.
however, when the windows system becomes chief it can not establish session with unix worker (hangs on displaying ' createsession still waiting for response from worker: both system can reach each other in both cases via ping.
the monitored session hangs in there fetching the send/recv tensors of `collective_ops`.
the same code works well for fetching `all_reduce` tensors.
recently, we have designed a tool to monitor the communication of distributed training process in microsecond.
as we all know that the commnuication is hidden in the back-propagation progress; and that 's true in my monitoring, like the yellow line in figure below, that is with xla disabled.
but when we enable xla, traffic between gpu is suspend until finish of back-propagation my figure (blue line).
so, is there anyone can help me to figure out principle behind this phenomenon.
since traffic can not be hidden back-propagation progress, requirement of bandwidth for hardware, like nv-link server or infiniband network between servers goes up a lot.
i run this following code phofcode it print the good result in eager mode, but it return attributeerror: 'tensor ' object has no attribute '_lazy_read ' when i close the eager mode.
i think i do feed a tf.variable to scatter_update, but it still return the error message.
phofurl phofcode this code dies at model.compile with `recursionerror: maximum recursion depth exceeded while calling a python object`.according to the stack trace, it seems like it falls into an infinite loop with `hasattr` and `layer.trainable = value`.
i am trying to extract the features generated by the model 's densefeatures layer by creating a new model based on the inputs of the original model and outputs of densefeature layers.
when using this submodel i notice an inconsistency between model.call() and model.predict().
if we provide extra columns to model in model.predict() model behaves reliably by processing inputs using however if model.call() is used this doesn 't happen and orders columns based on alphabetical order as per nest.flatten(), thus crashes with type cast exception if extra columns are of a different format.
please see code provided to reproduce this issue.
i can work around this by using predict() method.
when using or on a layer with a `build` function, the `build(input_shape=...)` argument is always set to none.
i am doing data augmentations using dataset map method.
to ensure that the images and the labels (labels are images, too) are transformed in the same way (e.g.
the same rotation, zooming, etc.
), i set random seeds at same value.
in each of following test, i run test program for an adequately long time and use `tf.assert_equal` to capture bug.
if i do not set parallel in map method, it goes well and augmentation yields same random numbers.
but if set `num_parallel_calls=4` or assertion failure is soon triggered.
this inconsistency does not happen for all samples but happens brokenly.
training parameter to model passed as none
i train a model on windows (gen_test_train_data.py, then train_model.py), using the same tf version that 's available on rpi.
i can test the model on windows just fine using model_visual_test.py.
if i transfer the model to the rpi, i cannot load it.
get mysterious errors when running model_visual_test.py: phofcode it doesn 't work even if train model on rpi, by running gen_test_train_data.py, then run train_model.py, which takes forever.
it completes training, but then it fails to load with phofcode no, that 's wrong.
do have h5 module installed raspberry pi: phofcode in other words, a trained rpi fails to load rpi.
a trained win10 runs fine win10, but fails to load rpi.
this is with a code that works perfect windows 10 and macos with all kinds of tf versions between 1.13.1 and 2.0.0rc1, gpu or cpu versions.
when using the asset file is not exported in the savedmodel assets directory.
however, it is correctly saved when using
using conditional statements on tensors passed to keras subclassed models without `@tf.function` decorator leads to valueerror exception ` valueerror: incompatible shapes between op input and calculated input gradient.
input index: 0. original input shape: (64, 1024).
calculated input gradient shape: (32, 1024)` neither `tf.cond` or python's if statement work without decorator.
the model works fine if the call function is decorated with `@tf.function` decorator.
passing python boolean values instead of `tf.constant(true)` works fine, with and without `@tf.function` decorator.
the test_negative test in fails, as the bincount call with negative values does not throw an invalidargumenterror.
this behavior might be the result of the op being called on the gpu, as only cpu call is expected to throw error, as per comment here: phofurl setting cuda_visible_devices to be empty forces op to run on cpu and test passes (the invalid argument error is successfully thrown), but passing `use_gpu=false` as an option to session wrapper does not have this effect.
phofcode using this code piece, tensorflow throws an error: `attributeerror: 'nonetype' object has no attribute 'shape'`
model conversion from script errors unexpectedly with: f check failed: dim >= 1 (0 vs. 1) fatal python error: aborted current thread (most recent call first): file line 52 in execute file line 251 in _run_main file line 300 in run file line 40 in run 89 main 10 <module>
the behavior of `tf.nn.relu` when fed with `nan`-valued inputs is inconsistent: - if the input is a constant tensor, `relu` returns `nan`.
- if the input is a variable tensor (like `nan` wrapped into `tf.variable` or multiplied by a random tensor), it returns zeros.
this behavior can only be observed on the gpu.
on the cpu, `relu` consistently returns `nan`.
the behavior on cpu is also consistent with other activation functions.
when i load multiple inception v3 graphs into memory and afterwards unload all of them i get a memory leak.
with 20 inception graphs loaded and unloaded, the ram usage goes up to around 2gb.
with 100 inception graphs, the ram usage goes up to around 10gb.
if i load and unload inception v3 graphs one by one, there is no memory leak, ram usage stays below 1gb, does not matter how many v3 graphs i load.
tried to load this v3 graph multiple times for purposes of testing: phofurl .
in reality, need to load different into memory.
when i use tf version 1.13.1 to convert pb to tflite, it shows dim not matched error, but when i use 1.14 to convert, it succeeds to save the tflite file.
but when i use the test code in the tf doc, it just shows core dumped.
applying batch normalization on top of batchwise tf.map_fn results in retval[0] error.
note that this fails even when tf.map_fn operates over convolution filters.
in this latter case, we have a different filter for each batch element, and so cannot apply the normal tf.conv functions without a map.
in tensor_bundle.cc method getvalue if the tensor has entry.size() larger than 2gb the underlying hdfspread method accept a int32 type of size but entry.size() has 64 bit the static_cast will trigger a error of invalid param since it will cast the 64bit to a negative integer
i first create a dataset with an iterator, then create a tpu iterator with the dataset.
after that, the iterator is used as the second input of as i run the output of `experimental_run`, an error occurs: phofcode
phofcode results infinite flood: phofcode
i am getting an out of memory error during the training of a encoder-decoder model using the subclassing api of tensorflow 2.
keras tries to cast targets to the dtypes of the model outputs.
currently it assumes that every model output has a corresponding target, so when doing this casting it just matches outputs and targets up one-to-one.
but in the case where some outputs are not part of the loss function (i.e.
they were missing from loss dictionary passed to `compile`), this may match outputs to wrong targets.
then it casts targets wrong dtype, causing errors.
i am attempting to train the neural network in this repo, sketch2normal phofhyperlink every time i attempt to train the model, it always gives me an error message `segmentation fault (core dumped)` at epoch 0 sometime between 10/449 - 90/449.
i 'm also getting many warning messages saying that many of the methods being called, like `tf.summary.filewriter`, `tf.summary.merge`, and more are deprecated.
after attempting to train with multiple print statements, i found that the place where code seg faults is in train function: phofcode specifically on this line, where self.sess.run is called: phofcode
phofcode looks like response is a list and not a dictionary.
it 's not able to convert the lstm model to tflite format
when passing in `tf.function(..., autograph=false)`, console output indicates that `autograph` still attempts to autograph the function.
the current tensorflow java api (1.14 or 2.0) doesn 't seem to be able to do inference on tensorflow nodes created within a `@tf.function` signature.
on a related note, phofurl mentions that java is planning to stay `session` centric.
ideally, a signature inference centric api would be a good way to solve this issue and would be good addition the existing java api.
concretely, here is the python snippet defining `request` and `response` (full python code attached at the bottom of this ticket): phofcode after exporting my model `savedmodelbundle` and trying do some prediction in java via the `session.runner()` api, i am getting: phofcode where `request` is defined within `@tf.function`.
cloudpickle cannot unpickle `tf.keras` because the `deprecation_wrapper` introduced in 1.14. in one python session: ~~~python import cloudpickle import tensorflow.keras as k with open("/tmp/k.pkl", "wb") as f: cloudpickle.dump(k, f) ~~~ then start another python session: ~~~python import cloudpickle with open("/tmp/k.pkl", "rb") as f: cloudpickle.load(f) ~~~ error: ~~~ traceback (most recent call last): file "<stdin>", line 2, in <module> file line 148, in __setstate__ keyerror: 'tensorflow.keras ' ~~~
trying to save a model with a layer throws because it doesn't implement get_config().
notimplementederror: layers with arguments in `__init__` must override `get_config`.
when logits are computed in for the evaluation of `tf.nn.nce_loss`, the output related to the true labels from `out_labels` might be wrong.
let me provide an example.
assume `batch_size = 2`, `num_true = 1000`, `num_sampled = 20`, then `out_labels` will be a tensor of size `2 x 1020` (1020 is the addition of `num_true` and `num_sampled`).
according to following line: / num_true` (one of last lines function), first 1000 elements in each row `out_labels` are: 1./1000 = 0.001, while last 20 are 0. the potential problem is that output is then fed to a sigmoid cross entropy (
a simple toy example using gradient tape and a subclass-model cannot be transformed into a graph with autograph.
it works just fine in `1.14.0`, `2.0.0b0` & `2.0.0b1`.
i trained a fasterrcnn for point detection using tensorflow and its python api.
i was able to do the inference successfully in the same without any issues.
now for production requirements, i need to build a standalone application or library which can perform the inference in c++.
in order to achieve that i successfully managed to build the tensorflow library from scratch for c++ api and ran a few test programs.
steps followed for inference on my trained model: 1. method #1: freeze graph *.pb file using modified [freeze_graph.py][1] and restore it.
2. method #2: directly restore from checkpoint using metagraphdef and readbinaryproto.
tried both methods loading of model seems happen without any error.
printed node names as well.
after loading graph created a handler image input, previously input during training was getting handled by queuerunner, but because it 's just inference created handler myself with appropriate modifications it as can be seen below.
status unstack) { auto auto auto auto //auto //auto return iroot.status(); } note: iroot is private variable of fasterrcnn class-> scope used by graph loading images into tensors class fasterrcnn { private: scope iroot;//graph loading images into tensors const int imageside; const int imagechannels;//rgb //load image vars output filenamevar; output imagetensorvar; // std::unique_ptr<session> fsession;//file session graphdef; public: fasterrcnn(int side,int status creategraphforimage(bool unstack); status loadsavedmodel(string &filename);//via frozen graph status graph_fn,std::string checkpoint_fn);//via checkpoints predictfromfrozen(tensor &image,int&results);// file_name, tensor& outtensor); readfiletensors(string& file_tensors); };
if you create a distribution strategy like then create a tf.int32 variable var, then call tf will crash.
it crashes in values.py, line 1220, phofcode so what's happening here appears to be that tf tries to divide the int32 tensor by a float with no cast and blows up.
the code in the colab, when run on a gpu, results in teh following error: file line 885, in _bootstrap self._bootstrap_inner() file line 917, in _bootstrap_inner self.run() file line 865, run
if overloading the loss function in `tf.keras.losses.loss` the created model can be compiled, trained and saved but not loaded.
when using keras model with
using tf.summary.scalar in keras loss/metrics function, then use model_to_estimator to convert keras model to estimator, tensorboard get duplicate scalars with totally same value.
requirement already satisfied: markdown>=2.6.8 in (from (3.1.1) requirement already satisfied: setuptools>=41.0.0 in (from (41.0.1) requirement already satisfied: h5py in (from (2.8.0) installing collected packages: tensorflow successfully installed tensorflow-1.14.0 (base) python 3.7.3 (default, apr 24 2019, [msc v.1915 64 bit (amd64)] :: anaconda, inc. on win32 type "help", "copyright", "credits" or "license" for more information.
>>> import tensorflow as tf modulenotfounderror: no module named importerror: numpy.core.multiarray failed to import the above exception was the direct cause of the following exception: traceback (most recent call last): file "<frozen importlib._bootstrap>", line 980, in _find_and_load systemerror: <class returned a result with an error set importerror: failed to import importerror: numpy.core.umath failed to import f check failed: pybfloat16_type.tp_base != nullptr
<img width="345" alt="metric" src=" phofurl i am training a model with tf.estimator and it seems that the training metric (root mean squared error) is not divided by the batch size (for both training and validation the batch size is 100).
indeed, for comparison this is the mean squared error loss for training and validation: <img width="364" alt="loss" src=" phofurl
phofurl this code does not record anything in eager execution mode.
when using with `tf.keras.layers.rnn`, the rnn layer does not forward the `training` flag to the cell.
this is because the rnn code checks that cell explictly defines `training` flag as argument, which does not.
i receive an assertion error when creating a forward pass for an unrolled multi-layer lstm while using a mask.
tf gpu wont identify two gpus, only gpu 0 appears
when i use primitive type objects during building model with tf.keras functional api.
tensorflow mistake primtive type objects as tensors.
i am using tensorflow 2 on a cluster which limits the gpu hours per job.
therefore, i want to be able to load model weights and resume training the model from a checkpoint.
the model in question is a `tf.keras` model compiled with as optimizer, with momentum.
when attempting to resume training after loading weights that were trained with multiple gpus and tensorflow crashes with the following error: phofcode the error does not occur when the has been pre-trained on cpu, or only one gpu.
i am using tensorflow 's c api to train models created with tf.keras in python.
after training in my c program a checkpoint file is created from which a model 's weights can be restored for more training or prediction within my c program.
when trying to restore my model in python, trained weights can not be loaded neither by: phofcode nor with phofcode the model loads successfully with: phofcode but this is an untrained model.
to be precise, this model has the same weights as when the model was first defined.
during the train of the xgboosted tree, the kernel will abort and halt.
my objective is to measure the amount of gpu memory needed by bert during the inference process.
i have already set the (or a paraphrase thereof, i don 't remember the exact flag) to true.
nvidia-smi shows a usage of ~2500 mb for a batch size of 227.
1. even if allow growth is true, tensorflow allocation is taking place in steps.
i see same peak usage in nvidia-smi for batch sizes 16, 32, 64 and then it jumps up suddenly.
usage for batch sizes 128 through 227 is as above, while for batch size 228, it suddenly 4495mb.
hence, this measurement does not serve my purpose.
it clearly depends more on allocator behavior than network size + activations size.
2. timeline visualisation in chrome trace format shows a peak allocation on gpu_0_bfc as ~418mb size of 227. this way too low.
if i compare it with nvidia-smi trace (peaking at ~2500mb) this makes no sense.
3. tensorboard visualisation somehow shows bert node as using 175mb.
again, it makes no sense.
__for tensorflow 1.14:__ when defining ode function using the default `__call__` method of any subclass of `tf.keras.layers.layer`, an `valueerror` is raised, stating `varisinitializedop` has been marked as not fetchable.
to avoid this issue, the ode function has to be defined using either pure tensorflow functions, or the `call` method of the subclass instead of `__call__`.
__for tensorflow 1.15-rc0:__ the same code will run forever without error message.
the above solution (using `call` instead `__call__`) also applies here.
when i add multiple tensors with shape (), tf.keras.layers.add complains that > file line 680, in __call__ file line 1905, in _maybe_build self.build(input_shapes) file line 299, in wrapper output_shape = fn(instance, input_shape) file line 95, in build batch_sizes = [s[0] for s input_shape if s is not none] 95, <listcomp> batch_sizes = [s[0] for s input_shape if s is not none] indexerror: tuple index out of range
when doing inference using tf.keras batchnormalization, for a given input sample x, the output is dependent on the other samples in the batch.
i can modify the other samples in batch to influence output of x. this should not be case as all samples should be processed independently.
whether i run a sample x as a batch size of 1 or with other samples, its output should be exactly same.
i am seeing differences of 0.3 at times (see my output below).
it appears keras is also having this issue: phofurl
the rnn layer with an rnncell does not reset the states of dropout masks compared to the layer implementations of the cells.
thus the behavior of != this is especially problematic, because keras rnn api tutorial phofhyperlink states both approaches are mathematically equivalent.
we are using tensorflow java api to loaded a tensorflow model and a program exception is thrown.
the exception information shows that the dependent resource file (libtensorflow_jni.so : is missing.
we find that the tensorflow jar file contains this resource file, but the file failed to extract, resulting in an exception.
we suspect this is due to the program filtering files to be extracted by suffix names (.so).
the training is stuck after throwing the following warning: w allocation of exceeds 10% of system memory.
start training iteration: 0 elapse: w allocation of exceeds 10% of system memory.
w allocation exceeds 10% system memory.
i am using the fashion_mnist dataset to train a convolutional network, `fashion_mnist = (train_images, test_labels) = when i use a model with conv2d as first layer, more specifically: `model = keras.layers.conv2d(64, (3,3), activation=tf.nn.relu, input_shape=(28,28,1)), ...` then use the fit function: `model.fit(train_images, train_labels, batch_size=1, epochs=5)` an error pops up: ` valueerror: error when checking input: expected conv2d_2_input to have 4 dimensions, but got array with shape (60000, 28, 28)` so i changed the input shape to but another error pops up: `valueerror: input 0 of layer conv2d_6 is incompatible with the layer: expected ndim=4, found ndim=5.
full shape received: [none, 28, 28, 1, 0]`
some specific set of circumstances skip over assigning `packed` to a value.
using results in failed to create a directory.
i believe it 's an issue with how paths are created in tensorflow.
error does not occur if i use double backslash to join checkpoint_folder and model_filename instead of os.path.join.
the stock example of rnns with multiple inputs from here phofurl produces an error if you set `stateful=true`.
this seems to be a problem with any multi-input rnn with stateful=true.
running the below code in docker (version 19.03.2) causes the memory to grow without limit.
this is visible in `docker stats`, eventually crashing docker.
conversion of tf2.0 function containing `reshape` and `one_hot` ops to tflite format fails with the following runtimeerror.
source code of the program is listed in the `code` section below.
conversion of tf2.0 function containing `softmax` and `reshape` ops to tflite format fails with the following runtimeerror.
source code of the program is listed in the `code` section below.
passing a tensor to `sample_from_datasets` which depends on the global step causes a sigsegv.
when running the tflite model through python the results are very different to the original model when no quantisation has been applied.
also, the model does not load at all on android.
when i run the example code from phofurl i get this: phofcode
upon attempting to create a custom dynamic keras layer, keras seems to incorrectly interpret the output of `compute_output_shape`.
first issue was in `def preprocess_input(x,
when creating a custom optimizer, the optimizer keeps throwing `object has no attribute _create_slots` error.
calling tf.function from tf.py_function in dataset.map hangs the program.
by removing tf.function decorator or enable run_functions_eagerly, program runs as expected.
i'm working with our team on tensorflow.net phofhyperlink and we wanted to exploit c#'s multithreading capabilities with tensorflow.
our library is a port of close to 1-1 from python to c# with couple of changes to allow multithreading work.
we use a different session and graph for every thread so every thread is actually isolated from the other threads.
when calling `c_api.tf_sessionrun` from 10 parallel threads in an infinite loop for a minute or so - some sort of corruption occurs that causes tensorflow terminate with the following error code `code which is: > stack buffer overflow / overrun.
error can indicate a bug in the executed software that causes > stack overflow, leading abnormal termination of the software.
this does not occur every run, in-fact it might occur 1/10 and only after 1-5 minutes running.
in most cases, program will just terminate but even more rarely following message is printed: > f check failed: buf_ null buf_ non-zero shape size 15 we discussed issue in our repository: phofurl
`gradienttape.jacobian` is showing warnings about <function pfor.<locals>.f at could not be transformed and will be executed as-is.
when a large sparse tensor is reshaped using `sparse_reshape` on windows it fails, due to the fact that it uses `np.prod` to determine whether the number of elements in the old and new sparsetensor are the same.
this can fail on windows, due to fact that numpy converts python ints to dtype np.int32 on windows, which will overflow for large dimensions.
in 2.0.0-rc0, while using model subclassing of tf,keras.model and passing `dynamic=true`.
then when i call model.fit it throws `attributeerror: 'nonetype ' object has no attribute 'dtype '`
i created a tfkeras model and saved it to .h5 format using tf version 1.13.1. the model can be loaded and used for inference just fine in 1.13.1. after upgrading to tf 2.0 (nightly build), loading the model results in a valueerror (see traceback below).
i am using in case that might make a difference.
i created a session option with inter=1 and intra=1.
then i used this option to create a session and load a model.
when i run the model, the program used almost all the cpu cores on my server, and thread spawned to several hundreds.
and no matter what value i set to "inter" and "intra", there are still many cpu cores were used many threads were created.
i 'm trying to calculate the minimum index to take for extracting windows out of the dataset.
i 've got a constant `window_size` defined of which dtype defaults to `int32`.
after running the following code it throws assertion error.
1. i create model using keras functional api.
the model includes layer and feature_column.
2. then i save model by 3. finally, i load model by while loading i get the error message : > unknown layer: sequencefeatures
a constructor of a tf.keras model that uses with `virtual_batch_size` set and unspecified input shape dimensions throws an exception.
phofcode only accepts phofcode unless explicitly passing phofcode arg to phofcode .
when i try to save a trained model (keras) locally with params[ 'output_dir '] + '/savedmodel ', save_format= 'tf ')` it runs like expected.
however, when i try to do the same on ai platform, it fails: `not json serializable`.
when i rewrote my estimator-based model (dataset + feature columns) to keras i was able to run (train) it.
but when i converted it to estimator as shown in migration guide phofurl it fails with error python valueerror traceback (most recent call last) in <module>() 1 estimator = ----> 2 keras_model = model 3 ) 9 frames in wrapper(*args,
for long labels / logits, tf.nn.ctc_loss is unbearably slow, in a way that makes whole training very slow (tf.nn.ctc_loss_v2 is even slower) a standard gpu implementation with unbounded label length such as one offered by torch.nn.ctcloss is many many times faster
just running a basic image classifier with keras.
import data, create model, train, evaluate.
i run `python script-name.py` in the command prompt.
`model.evaluate()` prints out an insanely long progress bar at the end.
it 's many, many pages long, with command prompt already maximized (so one page is already a lot of characters).
i have to scroll waaay up to see the previous output.
phofcode fails with error phofcode this is because the lines: phofurl phofcode make a copy of the tuple instead of converting it to a list and later the lines: phofurl phofcode do not take care of the case when axis is a tuple.
when a stateful rnn is created and is given initial_state, it effectively resets the state to the initial state for every prediction.
see the "not expected" example in the code below.
: i am trying the newly released api.
in order to do an experiment, i thought of starting with fine-tuning a vgg16 model and seeing the api 's action in that case.
i am interested in using the `validation_data` argument while calling `fit()` on a model.
i tried to do two variants: first one: phofcode it throws: phofcode second one: phofcode it throws: python valueerror traceback (most recent call last) in <module>() 2 h = x_train, 'label ': y_train}, 3 validation_data=(x_val, y_val), ----> 4 batch_size=128, epochs=2, verbose=1) 5 print("took {0:.2f} - start)) 5 frames in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
- cannot load lcoal files when cifar-10-batches-py mannully put to ~/.keras/dataset/.
- it still try to download dataset online, while my network connection is restricted.
- similar behavior happens when using tfds.load with data_dir setted
do not see any inference speedup with xla enabled through
building a tf.keras sequence model when eager mode is enabled vs not results in different output nodes.
when running `model.evaluate` in tpu, each time it gets executed it takes longer and longer.
i started seeing this behavior when training (`model.fit()`) but only when providing validation data.
i guess `model.evaluate` gets called when processing the validation set, so i tried to have a minimum reproduction sample with just directly calling `model.evaluate`.
but please note this is also a problem when running `fit` with validation data.
each epoch takes longer and longer.
it seems setup time increases more than evaluation - reproduction example below has very simple data model, you can still see this behavior that.
but seems that more complex models takes for `evaluate` increases at a higher rate each gets called
i am running a tpu allocated by `ctpu up` in tensorflow 2.0 (i 'm aware this isn 't fully supported atm).
i have a subclassed model that i have been saving and deploying since tf-2.0.0b0 and after upgrading to rc0, it errored out with this message.
[save.py:136] skipping full serialization of object <__main__.mymodel object at because an error occurred while tracing layer functions.
error message: in converted code: typeerror: tf__call() takes from 2 to 3 positional arguments but 4 were given this is how the call method is defined in my class.
can someone tell me what went wrong, or what i need to change to make this work?
thanks, david class mymodel(model): def __init__(self, n_layers, h_dim, b_dim, activation_fn, kernel_init, batch_norm): super().__init__() ... skipping ... @tf.function def call(self, inputs, training=false): y = inputs[0] h = inputs[1] n_var = inputs[2] x = layers.concatenate([y, h]) if self.n_layers >= 1: x if self.n_layers >= 2: x if self.n_layers >= 3: x if self.n_layers >= 4: 5: # scale output by 1/n_var #return self.d_out(x) / n_var return
i am able to successfully build a model train, evaluate and run prediticions on a sequence model using nasnetmobile.
i can save my model using model.save in tf.keras and have a well formed h5 file with a graph, weights and inputs and outputs as expected verified in netron.
i wish to convert this model to pb.
using various techniques i will describe below, load the using tf.keras, introspecting the summary inputs outputs.
all is as to be expected (save slight difference in output tensor name).
saving the pb does not error, creates valid pb file but it lacks the final graph output, tools like tf_coreml netron complain of missing output.
i get an error when running the code on tpu because xla doesn 't support candidate samplers.
image: screen shot at 8 29 54 am phofimage
recently i switched from tf1 wrapped with native keras to tf2 using the built-in `tf.keras` implementation.
in my code i train my model like so: checkpoint = monitor="val_acc", save_best_only=true) steps_per_epoch=100, epochs=20, validation_steps=100, callbacks=callbacks) however, with that code i do get the following warning message: warning:tensorflow:can save best model only with val_acc available, skipping.
a full working example can be found as github gist here phofhyperlink .
`tf.boolean_mask` phofhyperlink does not accept a scalar `tf.tensor` phofhyperlink object as axis parameter.
tf.scatter_nd sums update values if indices are present multiple times.
i use this function for moving pixels in an image.
some pixels are present twice and this gives wrong pixel values in scatter.
tf.tensor([ 0 11 0 10 9 0 0 12], shape=(8,), dtype=int32) tf.tensor([ 11 10 9 24], shape=(8,), dtype=int32) tf.tensor([ 11 10 9 36], shape=(8,), dtype=int32)
during saving and loading model i face memory leakage.
eventually it crashes with `oserror: [errno 12] cannot allocate memory`.
during real training it happens quite fast.
original bug report: phofurl using tf 2.0.0-rc0 and constructing a simple keras model fails to train.
the issue seems to be due to batching in the maybe some default parameters were changed.
if this is the case, the tutorial colab has to be adapted: phofurl
google 's re2 library seems to be unable to handle rewrite patterns with characters like ` `, ` t`, etc.
the speed of fft2d operation `tf.signal.fft2d` is very unstable at different iterations.
here is an example output of time every 100 iterations (code is shown below): phofcode during the training, there is no other programs running.
bur when running the same code in my local machine (gtx 1080ti) with the same tensorflow docker image.
the speed fast and stable.
when trying to train a subclassed keras model that has a trainable parameter that is the values tensor of a sparsetensor weight matrix, the training fails with an error message saying that the parameter does not have gradients.
this problem reproduces only in eager mode.
without tfl converter optimization, prediction on
tfliteconverter converts the first convolutional layer of tensorflow model into depthwise convolutional layer if the input to the model has single channel (in my case grey scale images with channel =1).
sparse.placeholder does loses the shape entirely when batch is not provided.
this is inconstent with how tf.placeholder behaves.
invoking `xla.compile` in the function passed to as in the code below raises the following exception (full traceback below): phofcode
when i convert a keras model to a tflite model all outputs are named identity.
when you have a bunch of outputs that all have the same output size it becomes impossible to tell which one is which.
copied from phofurl since this might be a `tpustrategy` issue, since things work with `mirroredstrategy`.
sentencepiece phofhyperlink is a library that provides extremely fast and efficient utilities for text encoding during training.
it accomplishes this by providing custom ops written in c++, instead of userland code.
the custom ops are detected and work with regular tensorflow and in distributed gpu mode with `mirroredstrategy`, but are not getting detected when using `tpustrategy`.
the custom op makes training ~3x faster, compared to using something like subwordtextencoder phofhyperlink .
logging summary scalars (for review in tensorboard) leads to significantly increased training times.
does not broadcast the same value when using to the description of the method, it is supposed to mirror a tensor on one device to all worker devices
when i trying to remove training node with the function a identity node named " is not removed.
creating a layer and model, calling `add_metric` in both results in the metric values getting mixed up.
wrapping iteration through the dataset with tf.function move computations from gpu to cpu.
(1) the following code produces the same 'numpy_data0.pkl ', 'loss0.pkl ' all the times (which means same data, same parameter, same loss), but 'grad0.pkl ' changes.
i checked it with 'diff ' command between generated files.
(2) it seems only with tensorflow 2.0 gpu version, this happens.
i checked the code with (cpu version), it was ok. (= shows deterministic result) (3) using custom dense layer + tf.keras.layers.relu() was ok also.
(= shows deterministic result) custom dense layer was phofcode and net with phofcode (+) when 'use_bias=false ' option applied on hidden layers, is was ok. (= shows deterministic result)
calling `seek()` on a `tf.gfile.gfile` opened in write only mode raises
if a tf.keras.models.model uses customized loss added to the model by model.add_loss(loss), and a tf.data.dataset dataset which yields tuples (x, y, sample_weight) is used in model.fit(dataset), a typeerror will be raised.
code runs forever although nothing is to be trained (no parameters, no data).
when i call the model.summary() after define and the build model that is defined by the error occurs.
after some trial, i found the reason would be dropout layer.
error that gives us no information what is actually wrong: retval[0] does not have value
i'm trying to optimize a custom model comprised of 2d convolutions and batch normalizations done on an image.
the entire network has fixed dimensions.
i'm using the nightly docker tf image to perform tf-trt.
i've tried to create a trt model using both of the following functions: phofcode and phofcode in both cases, the tf-trt model is about 35x slower (20ms vs 700ms inference).
the results are the same regardless if i use graph_def from memory, or load tf-trt saved model.
here is respective trt output: phofcode since trt model only has 3 nodes, one of which is trt engine node, does it make sense to convert this via uff?
would that get me a speed improvement?
or, is there a bug in latest version of tf docker?
i 'm trying to convert the keras 's mobilenet model with float16 precision for gpu inference.
but when running tasks, i encountered the following error: caused by: internal error: failed to apply delegate: next operations are not supported by gpu delegate: mean: operation is not supported.
first 88 operations will run on the gpu, and the remaining 5 on bias->type != input_type (10 != 1)node number 90 (conv_2d) failed to prepare.
bias->type != input_type (10 != 1)node number 3 (conv_2d) failed to prepare.
previously when running the code from the cvae tutorial phofurl i used in the sample function `if eps == none:` which worked fine, however with rc0 it now throws an error from comparing a tensor to none and only works if the following is used `if eps is none`
i followed the document for writing custom training loop( ref phofhyperlink ), and caught an valueerror exception: > valueerror: input tensor 'const_1:0' enters the loop with shape (), but has shape (none, 110, 110, 1) after one iteration.
to allow the shape to vary across iterations, use the `shape_invariants` argument of tf.while_loop to specify a less-specific shape.
if i removed 'tf.function' decorator, code worked fine with a warning: > warning:tensorflow:using mirroredstrategy eagerly has significant overhead currently.
we will be working on improving this in future, but for now please wrap `call_for_each_replica` or `experimental_run` or `experimental_run_v2` inside a tf.function to get best performance.
when i run the following code from the latest python3 gpu build, nothing happens.
when i run it from the nightly build, i'm able to get a model with 1 trt engine node.
phofcode is there an issue with the latest gpu build?
python raises when doing a first read (no writes before it) on a nonexistent `tf.gfile.gfile` in `w+` mode.
when i run model.evaluate with verbose=true, i get too many "=======" signs.
i noticed this on ubuntu 18.04 when i upgraded from tf2.0-beta to tf2.0.0-rc0.
this is a mild annoyance when am running models with soft-warp enabled on the command line.
note: code worked fine with tensorflow 2.0 beta1.
changes introduced in rc0 caused this.
i've created a function, that reads large file and return batches of needed size, considering the number of replicas.
at the end of the file it return none (end of iteration).
this function is then submitted to phofcode is used to get the dataset and create iterator from it.
next(iterator))` is used to call a model on each replica.
i've printed a batch size for each call model and i see something like: phofcode which causes `check failed: work_element_count > 0 (0 vs. 0)` inside model call because empty batch.
when trying to use tf.nn.embedding_lookup during a typical training workflow, everything seems to work fine.
however when using the same code with the same tensorflow version/ tensorflow api version, etc.
while trying to serve the model an error is thrown.
the error seems to point a mismatch in the way embedding_lookup was defined in tensorflow serving.
one is expecting a batch_dims argument for gather_v2 while other believes this is an invalid argument.
when using dataset with estimator, the memory foot print of ram keeps raising when estimator 's train and evaluate apis are called in loop.
creating a boolean constant prints a deprecation warning: > w0828 deprecation.py:323] from _eagertensorbase.cpu (from is deprecated and will be removed in a future version.
instructions for updating: use tf.identity instead.
i 'm running asynchronous distributed training in tensorflow using parameter server strategy.
multi worker on multiple cpus with evaluator as a separate node.
when running a model that previously yielded no errors, i 'm getting errors of the form phofcode when using autograph with the tf.function decorator.
now code : python import tensorflow as tf import tensorflow.keras as k import tensorflow.keras.layers as kl import tensorflow.keras.metrics as km from fashion_mnist tfcfg = tf.configproto() = true sess = tf.session(config=tfcfg) (x_train, y_train), (x_test, y_test) = x_train x_train.reshape((-1, 28, 28, 1)) x_test x_test.reshape((-1, 28, 28, 1)) y_train 10) y_test 10) model k.sequential([ kl.conv2d(32, 3, 1, input_shape=[28, 1]), kl.batchnormalization(), kl.leakyrelu(), kl.conv2d(64, 3, 1), kl.batchnormalization(), kl.leakyrelu(), kl.conv2d(128, 3, 1), kl.batchnormalization(), kl.leakyrelu(), kl.leakyrelu(), kl.flatten(), kl.dense(512), kl.batchnormalization(), kl.dense(10) ]) class def __init__(self, name=none, dtype=none,
when running a simple custom-op on cpu adapted from the tutorial with multiple threads using work sharder it can find only 1 thread and segfaults.
hi, i am using this script resnet_cifar_main.py in phofurl to test parameter distributed strategy.
i have added some codes to configure cluster in this file as follows phofcode for the ps server, i have done the similar things.
i use the following command to run .
`python resnet_cifar_main.py --data_dir cifar-10-batches-bin/ --distribution_strategy parameter_server`.
it works when i set only one gpu avaiable.
that is, phofcode however, when set all gpu avaiable, it fails with the following error log.
phofcode how can fix this error?
i created a session option with inter=1 and intra=1.
then i used this option to create a session and load a model.
when i run the model, the program used almost all the cpus in my server(the cpu usage is more than 5000%).
and no matter what value i set to "inter" and "intra", the cpu usage is more than 5000%.
is making building networks much more pleasant in general by forgoing the need to wrap everything in `lambda` layers.
it 's failing for while loops without `lambda` wrapping, giving a very unhelpful error message.
a cross-device loop must have a pivot predicate: while/while_context`
the code below raises error: > tried to convert 'tensor' to a tensor and failed.
error: none values not supported.
as noted in comments, the bug disappears if we don't use `tf.function`, or set `persistent=false` in gradient tape.
i am attempting to build a custom tensorflow layer to perform k-means clustering across channels of a given image.
i am having difficulty creating this new layer to add to the model, as it seems that fundamentally, i don 't have the ability iterate over the batch size, which is unknown until runtime.
i have tried a few alternatives such as the `@tf.function` function decorator and `tf.scan` function, which have both been unsuccessful.
calling model.predict() includes calls to various non-prediction related things, in order of decreasing severity: * reset_metrics * get_progbar * standardize_user_data * in our project, this results in a 2x prediction speed regression: 35 ms per call for community keras 70 ms per call for tensorflow keras a snakeviz flamegraph for prediction of our network in tensorflow keras, showing unnecessary overhead: tensorflow keras phofimage
not a single reference to members of tensorflow can be found in ide(pycharm).
however, programs run as expected.
i am trying to parallel download some images.
i am using a `tf.data.dataset` with the image urls as content.
i want to store them in a gcs, so i am using functions from the `tf.io.gfile` package inside a `tf.function`.
this function will be called through `tf.data.dataset.map`.
when the different `tf.io.gfile` functions are called inside the `tf.function`, like `makedirs`, it raises an error indicating that it requires a binary or unicode string as input: phofcode if try to use `.numpy()`, it is not available, as expected.
the result is that cannot download images in gcs.
when the optimizer is specified in the form of a string (e.g.
`adam`) in `model.compile(...)`, everything works as expected.
when the optimizer is specified with non-default parameters, like: phofcode the application crashes with following error: phofcode this
i only got to run the demo app on gpu with gpu experimental but not the object detection app.
for the object detection app i had to add the gpu delegates, change some code, and use a self-converted ssd model.
the error occurs because of converted ssd model.
`gpu delegate does not support but this option is necessary to convert an ssd model successfully (with 4 outputs).
this is way i convert ssdlite mobilenet model from model zoo: phofurl this is also way which was recommended to me, because conversion did not work with frozen model provided by zoo (or by getting frozen with inference_graph script).
when i run `result = model.evaluate(x_train, y_train), my jupyter notebook crashed.
when using @tf.function decorator with tf.gradienttape to compute updates on a model, i find that it takes 110 seconds per epoch.
when i used model.fit(dataset), it only takes ~7 seconds.
i 'm not sure why it takes so much longer using the custom train function.
this is code copied over from the effective tensorflow 2 documentation on tensorflow.org.
to make sure this not specific to my personal machine, i used google colab with gpu enabled under notebook settings.
for my research work i need to build lots of different convolutional gan models and train them.
for this i build temporary models inside functions and test them.
once the function is done executing the models are no longer needed.
a simple example: phofcode however currently the models persist (can be seen in %tensorboard) and continue to fill up gpu memory.
eventually i start getting warning about gpu memory usage and start getting oom errors.
at this point i can 't build new or train any existing ones.
have already tried lots of different suggestions on how to release gpu memory phofurl phofurl phofurl several stackoverflow suggestions to no effect.
this problem is specific a jupter notebook based workflow (such as on google colab).
a workflow that uses python files will not encounter this issue since all the gpu memory is released automatically once python interpreter finishes.
i have created model from tf.keras.models for binary classification problem.
it is dense with sigmoid activation in the last layer and binary cross entropy loss.
i got different loss values whether my last layer was: phofcode or phofcode if -in the first case bce do apply sigmoid before computing loss.
-in the second case bce do not apply sigmoid before computing loss.
following the official guides ( [1] phofhyperlink , [2] phofhyperlink ), i was training psenet phofhyperlink for text detection.
even though train metrics did improve to almost perfect levels and the loss remained stable and low after a while, the inference i got was gibberish.
psenet works as follows: running the image through feature pyramid network to obtain segmentation maps, it then applies a custom algorithm to extract bboxes.
the images below show segmentation maps, with yellow regions corresponding to predicted text, and purple everything else.
after 186 attempts make it work on ai platform and $400 of gsoc credits, i realized that problem was deeper than implementation details, decided overfit on a single sample, using `tf.keras` implementation of fpn from `segmentation_models` phofhyperlink by @qubvel.
i have tweaked his implementation for psenet ran into same problems with `tf.estimator`, so it seems that `tf.estimator` is indeed culprit.
for this sample image sample image phofimage one of labels sample label phofimage after 300 epochs, same loss optimizer, predicted labels - with a pure `tf.keras` implementation: phofimage - with `tf.keras` model converted using phofimage - `tf.keras` model used in `tf.estimator` model function: have tried `tf.keras`-in-`model_fn` setup on 10 000 images for 30-50 epochs, results are much worse than this, which is itself not perfect.
the monitored session hangs in there fetching the `reduced_weight`.
the mnist.py script achieves a test accuracy of <85% after 12 epochs of training when using tensorflow-gpu=1.14.
the minimal working example below fails with the following exception: phofcode as a side note, the error message misses a space after the period: phofurl
image phofimage problem line 32 input_x[:,1] occurs the error.
some models(mtcc) uses prelu as an activation layer, and it will be split to small ops including relu, sub( phofurl it's hard to fuse and will impact the performance .
program crashes due to insufficient memory issue.
but with same code, can train the model without any problem.
setting tf_cpp_min_log_level does not work lateset tf 2.0. if i set tf_cpp_min_log_level to 2, sill tf shows information and warning logs (including libpng warnings) with this issue does not occurred.
keras.model.fit converts sparsetensors to tensors.
when eager execution is enabled, `tf.while_loop` uses a backend implementation suited for eager tensors only, which practically disallows the use of while loops with keras symbolic tensors.
specifically, the line `while cond(*loop_vars):` ( here phofhyperlink as of this date) is only valid when `loop_vars` is a list of `eagertensor` instances, thus enabling the `while` check on the `numpy` attribute of results.
now, my issue is that i actually need to implement a function that works on keras symbolic tensors and uses a `tf.while_loop`, which seemingly proves impossible (apart from disabling eager execution, which workaround i am comfortable to use in long term, but i does not feel like an actual solution).
intuitively, i would think way to fix issue would be to follow an alternative route within `tf.while_loop` 's source code when using symbolic tensors (_e.g._ that used when eager disabled), and keeping eager-suited one otherwise.
i tried nasty fix which consisted in adding `and all(isinstance(tensor, ops.eagertensor) for tensor in loop_vars)` `executing_eagerly = line at beginning `while_loop` 's body in source code, but this results raising `attributeerror: tensor.name meaningless when eager execution enabled.` within loop constructor (only with symbolic tensors - using ones, everything goes fine).
would be happy dig deeper and contribute fix if can find one, but first it would be nice know whether solution already exist (i might just be missing something, perhaps from keras backend submodule).
i am testing the benchmark tool found on this link: phofurl i am building and running in android to benchmark mobilenet v1 model on some devices.
i am interested in seeing the profiling information for each of the layers/operations and i am able to do that by adding the enable_op_profiling=true flag.
however, can 't see information when also add flag "--use_nnapi=true".
example with nnapi switched off: image phofimage example with nnapi switched on: image phofimage
the program exits with the following error: phofcode
an exception is raised when trying to stack multiple `tf.keras.layers.lstm`, while the sequence length changes across batches.
this behavior occurs if the `tf.keras.model` is built with model subclassing.
on the other hand, if the model is built using functional api, everything works as intended.
when using gru with bidirectional wrapper, setting, `return_state=true, return_sequences=false` in gru parameters and `merge_mode="sum"` in bidirectional parameters does not merge outputs.
this makes it impossible to use in a sequential model.
i have trained an autoencoder and want to convert it to a tflite model.
i successfully froze the graph and was able to convert the non-quantized 32-bit-float version.
when trying to convert the very same frozen graph file with the uint8 option, i get an error: runtimeerror: quantization not yet supported for op: fake_quant
current behavior on google cloud using `deep learning image: tensorflow 1.14.0 m33` is non deterministic.
during multiple runs the loss after performing backpropagation and updating a variable is different for different runs and does not match the loss of the non optimized standard tensorflow installation.
this behavior exists when using python2 and when using python3.
created instance with: `gcloud compute instances create "tf-1-14-cpu" --zone="us-west1-b" run 1: phofcode run 2: phofcode run 3: phofcode
python stopped working f attempting to fetch value instead of handling error internal: failed to get device attribute 13 for device 0: cuda_error_unknown: unknown error
i converted my tflite model with f16 quantilization, then i create gpu delegate to run my model, the source code version of tensorflow is r1.14.0.
i got the following error when running the inference: initialized tensorflow lite runtime.
internal error: failed to apply delegate: op_context.input->type == ktfliteuint8 || op_context.input->type == ktfliteint8 was not true.node number 1 (dequantize) failed to prepare.
dataset input to estimator is broken
the quantization scale in perchannelquantizebias() phofhyperlink in phofhyperlink appears to be applied incorrectly.
the floating point input data are multiplied by the scale value whereas they should be divided by it.
the corresponding tests in conv_test.cc phofhyperlink and depthwise_conv_test.cc phofhyperlink , e.g.
simpleperchanneltest appear to contain the wrong expected values.
shape mismatch for binary cross-entropy with logits for compiled keras when output shape is determined by model inputs (no error when using eager-evaluation): phofcode
i was trying to build a word2vec model by following this tensorflow tutorial phofhyperlink .
i've changed the code little bit, mainly in the parts where i have to load training data.
the problem is that the model won't learn anything.
the loss keeps fluctuating up and down, and the weights of my network stay constant throughout training process (i've checked this using tensorboard).
i am convinced there's something wrong with either code posted in tutorial or with `tf.nn.nce_loss` function, as i don't see any problem with code wrote.
the following `feature_column` creates the issue when subclassing `keras.models.model`, which works alright with `sequential` api.
i want to get values from output tensor with input an image to predict the eye region landmarks.
i have predicted image from frozen graph model and tensorflow lite using python script and it works fine.
the problem is with the android platform, i got false and different values compared to values from python script
in one of my research, i need to assign values to large sparse matrices.
since tensorflow does not support value assignment/update to large matrices , i have to use a lot of tf.stack()/tf.concat() functions.
i compared the same function implemented in tensorflow 2.0 and pytorch 1.1.0, and the execution time for tensorflow was much slower than pytorch.
the execution times are listed below: pytorch: 0.0036 secs tf 2.0 : 0.1734 secs
when i try to save a model, i obtain the following errror: phofcode
i've trained a model using keras (in google colab), then i've converted the keras h5 file to tflite using `tfliteconverter` (also in google colab) by using this code: phofcode after that, i've run the tflite model (in google colab also): phofcode the tflite model can be found here phofhyperlink however, when i run the tflite model in an android app (using the same input data) y get different outputs: (this code is based on this example phofhyperlink from tensorflow) phofcode the output values i get in android code are not same as outputs obtained with python code.
phofcode here results are similar, there is a small difference.
however i've also tried with a real input (comming from an image), and in this case, results android are totally different.
this is a to detect objects images (yolo v3 tiny) and constated that values obtained with python code are correct ones.
when i run python code with real input (an image) it detects objects.
- why do i get different outputs android?
- do have to do something special to run android?
- do have do something different conversion from h5 tflite?
- does it has something do way as java works floats?
should use quantized version of model?
i want to use debugging tf.keras model, but got an error message like: phofcode
when i am using the with multiple replicas, `tf.math` ops do not work on `mirroredvariables` when inside a cross-replica scope.
not able to call more than once to create tf-trt nodes for disjointed sub-graphs.
when a masked input is fed to a the mask is ignored
when i am using any distributed strategy, and i fetch a `tf.variable`, i get a result that looks like: `[array([( 10,), ( 44,), ( 47,), ...], dtype=[( 'resource ', 'u1 ')])]`.
instead, i have to wrap the variable in a `tf.identity` call in order to get its value properly.
i am training a small lstm model and until recently, i could use reading numpy arrays directly because all training data fits into memory.
unfortunately, after adding some new data, i ran into the 2 gb graph memory limitation and was forced to switch to using `tfrecord` and `tfrecorddataset`.
however, the actual training data still fits into ram and i want to make sure it is prefetched even when using the `tfrecorddataset`.
therefore, tried to use the `dataset.prefetch()` methodology achieve this, assuming a buffer will be created (constantly) filled with data.
however, it does not work - in fact, there seems be little no difference comparing a version with without a final `.prefetch(x)` in data pipeline.
see animated gif below: tf_prefetch phofimage the actual dataset is filtered in pipeline training stalls whenever sequence of values that is filtered out is occurring in data.
only few values each data/tfrecord file (of which many exist) are relevant.
to illustrate this further, data layout similar this: file 1: file 2: file 3: 4: ... ... where `-` denotes irrelevant `#` denotes relevant points time series.
when holding all values memory (as previously was case), filter rather fast irrelevant values are skipped unnoticeable.
the pipeline set up like this: feature_description = { "features": tf.float32), "label": tf.fixedlenfeature([1], tf.float32) } def return feature_description) ds = for f fs_train]) ds = ds.map(_parse_function) ds = ds.flat_map(lambda v: v["label"]))) # filter data, only allow ls[0] ls[1] ds ds.filter( lambda _, y: tf.equal(y, ls[0]), tf.equal(y, ls[1]) ), []) ) # relabel re-map labels 0 1 ds.flat_map(lambda x, y: tf_relabel(y) - base_label.value))) # create sliding window for lstm shift=shift, stride=stride, drop_remainder=true) ds.flat_map(lambda x, y: y.batch(window_size)))) # batch prefetch ds.batch(batch_size, drop_remainder=true) tried many values, nothing works
on tensorboard queuedequeuev2 operation's device is gpu:1. image phofimage but on timeline, it is cpu:0 image phofimage
i am not able to convert a savedmodel to a flatbuffer using tfliteconverter when the corresponding tf.keras.model contains a layer with a tf.gather op for which the params argument comes from variable that was initialized in the build method of that said layer.
when the params argument is from locally defined variable, or when using tf.nn.embedding_lookup instead of tf.gather, everything works perfectly fine.
it also applies to tf.gather_nd.
tf.signal.stft does not work in eager execution mode, producing the error: traceback (most recent call last): file "<stdin>", line 1, in <module> file line 83, in stft signals, frame_length, frame_step, pad_end=pad_end) file line 120, in frame num_outer_dimensions = file line 180, wrapper return target(*args,
tensor memory allocation fails for the same batch size (determined by n_acton_samples) as i scale the number of gpus in my strategy.
i installed tensorflow 1.10, and it worked fine.
after i installed tensorflow-serving-api 1.10, error occured.
phofcode and the result of dir(tf) is : phofcode it seems that the "__init__.py" under tensorflow has been cleaned.
before installation of tf-serving-api: phofcode after installation of tf-serving-api: phofcode
when i ran phofcode it will complain about: phofcode
calling model.fit_generator on a keras model in tf 2.0 or compat.v2
program ends with an unclear error, while trying to retrieve the bias gradients of the two dense layers in the model.
* writing to tensorboard (*console parameter = false*) train on 60000 samples epoch 1/5 i profiler session started.
i successfully opened dynamic library cupti64_100.dll - eta: 12:48 - loss: 2.2374 - accuracy: i collecting 81 kernel records, 14 memcpy rec ords.
- eta: 0s loss: 0.2971 accuracy: 0.9123traceback (most recent call last): file "c:/users/harald line 42, in <module> model.fit(x_train, y_train, epochs=5, callbacks=[gradient_cb, tensorboard_cb]) file "c: users harald line 643, in fit file "c: users harald line 664, in fit file "c: users harald line 439, model_iteration epoch_logs) "c: users harald 295, on_epoch_end logs) "c:/users/harald 32, on_epoch_end data=t) 77, histogram tensor = _buckets(data, bucket_count=buckets) 139, _buckets return tf.cond(is_empty, when_empty, when_nonempty) 1382, cond_for_tf_v2 return cond(pred, true_fn=true_fn, false_fn=false_fn, strict=true, name=name) 507, new_func return func(*args,
if i use a large u-net with an inception-resnetv2 backbone and eager execution is enabled,(default with tf 2.0), the machine runs out of memory.
if eager execution is disabled it works fine.
maybe this is a bug in google colab, as the code works fine with eager execution enabled on my machine with 8 gb of ram and a geforce 1060.
when i try to use `renorm=true` with under i get the following error: `handle` is not available outside the replica context or a call.
running the single-operation model given below using the metal gpu delegate gives a different output than when executing on cpu or with the full tensorflow interpreter.
second gradient with input is none
i am saving the biggan-deep-512 module from the tf hub into a savedmodel.
and when i try to convert it to a tensorrt module it fails
i want to do some operations like: 1. split the image into 12*12 squares.
2. for each sub square, split it into 6 * (2 * 12) horizontal & 6 * (12 * 2) vertical rectangles.
3. for each rectangle, calculate it's pixels horizontal & vertical gradient's mean and standard deviation.
so, for each sub square, i want 48 values, which is and now i have a 1920 1280 image with 3 chanels.
when executing the following lines of code, i get an assertion, because the result is not as expected, but actually the values [-29, -19, 1].
i would see how the -19 would be correct if i had a stride of 1 along y-axis, however, then it would not match up again with third number being 1 instead of -4. so it is not only that either dilation or stride is ignored, but actually providing for both non-trivial values results in some strange behavior, which i think is actually a bug.
import numpy as np import tensorflow as tf kernel = np.array([5, 5], 2, 1, 1]) bias = np.array([-4], dtype=np.float32) img = np.array([-2, -1, -3, -2, 3, -1, -2, -1, 2], 1, 9, 1]) strides = (2, 2) dilation (1, 2) depthconv2d_layer depth_multiplier=1, kernel_size=(1, 2), strides=strides, dilation_rate=dilation, padding= 'valid ', *args,
when i pass one-hot encoded labels as train and validation data into tensorflow keras ' model.fit() function, the metric (and tn, fn, fp) return wrong values.
if `train_labels` is this: `array([[1, 0], [1, 0], [0, 1]])` and the resulting `y_pred` 's are `array([[1, 0], [1, 0], [0, 1]])` then the sum of phofcode is 6.
i have written a custom estimator and wanted to train it on 2 gpus using submitting this job phofhyperlink to the ai platform.
unfortunately, after ~900 steps, the training fails with `runtimeerror: variable creator scope nesting error: move call to out of `with` scope.`
i 'm playing around with tf2.0 while mostly still working on tf1.14.
i have created two conda environments - one for tf1.14 and the other one for tf2.0 - so all hardware and drivers are absolutely the same.
tf1.14 is working good and uses gpu as it supposed to, but tf2.0 runs on cpu.
line 76 in except oserror: raise importerror( "could not find %r.
tensorflow requires that this dll be " "installed in a directory that is named in your %%path%% " "environment variable.
download and install cuda %s from " "this url: phofurl % the url directs you to version 9 but the current dll checks for version 10.
typeerror: ( 'not json serializable: ', b '
the return value of is mixed with string and bytes, where the bytes portion is in literal form of including the letter b and the quotes, these will then become part of the directory name created.
i 'm running the example code here: phofurl this runs successfully but if i try to make a prediction with the model by running phofcode i get the following error: phofcode
i am using the estimator api.
i have variable-lenght input (sentences), so i want to use raggedtensors in my `tf.data.datasets`.
however, it seems that when converting the raggedtensor back to tensor, the shape is not evaluated correctly.
it runs near 25 milliseconds each inference when the and and near 90 milliseconds each inference when the and i found that the first `sessionoptions` will determine all the following sessions' options.
for example, i created a session with `inter=1, intra=1` and close it.
then i create another session with `inter=1, intra=8` run my model in later session.
the inference speed of model is 90ms which corresponding to `inter=1, intra=1` but not `inter=1, intra=8`.
it seems first sessionoptions still control later session.
training a mobilenetv2 model , i see the loss is descending and becomes very small after a few epochs while the val_loss is not.
during my checking progress, i intentionally use the training data to evaluate the model, and i can see evaluation result is quite different from training progress shows.
the program output is attached as 1.log.
running the single-operation model given below using the metal gpu delegate causes the following error: > execution of the command buffer was aborted due to an error during execution.
caused gpu hang error (ioaf code 3)
in: phofcode returns [] to stdout
i use to get the prediction in a function.
but with the `tf.function` declared before the function, there will raise an attributeerror: 'tensor' object has no attribute 'numpy'.
calling `tf.image.encode_png` kills the process with sigabrt if you pass a tensor that has no elements.
on running the train method, it is throwing error despite initializing all variables before the optimize step.
i want to use a `savedmodel` to run batch inference in `spark`.
a few libraries implement this functionality, such as databrick 's spark deep learning phofhyperlink , however, they are implemented using `tf 1.13.1` or lower.
i am using `tf 2` to train and save my models, so i would like to use the same version for deploying my model.
to use an object in pyspark it must be serializable, but i am getting a pickle issue when trying use a `savedmodel` 's concrete function.
previously, this call was serializable phofcode now, this is giving issues phofcode this behavior can be reproduced without using `spark`.
you only need try `pickle.dump` the concrete function.
i just computed sqrt(2) 100 times in google colab.
the values are computed inconsistently, and a bit incorrectly, in a single tensor.
tensorflow matrix multiplication on cpu does not reproduce same result as numpy matrix multiplication for float32.
furthermore, (x @ y) and (y.t @ x.t).t produces different results.
is this a normal behavior, if it is, then which version of the matrix product should be taken as correct output?
`tf.numpy_function` works are wrapping numpy / python functions with tf 1.14 in eager and normal mode, but shape is lost phofcode
includes the header data in the dataset
can 't take gradients, fails with invalidargumenterror: operation has no attr named '_xlacompile '
i just created a virtual environnement to test tensorflow 2.0.0-beta1 with no other package installed.
just calling `import tensorflow` launched many warning messages.
it is strange that i already use 2.0.0-beta1 in other virtual environnements and never saw these warnings before.
behaviour of += operator on a tensor is different when called via tf.function and when called directly
non-tensorflow code gets executed only on the first run of tf.function
tflite output different result with pbfile when using only one convolutional layer ?
when i try to freeze my tf graph that uses phofcode layers i get the following exception.
traceback (most recent call last): file line 426, in import_graph_def graph._c_graph, serialized, options) # pylint: disable=protected-access nodedef expected inputs ' ' do not match 1 inputs specified; op<name=const; signature= -> output:dtype; attr=value:tensor; attr=dtype:type>; nodedef: {{node during handling of the above exception, another exception occurred: traceback (most recent call last): file line 100, in <module> export() file line 95, in export file line 146, in _ = name="") 507, new_func return func(*args,
if i run the code with directly phofcode if i run the code with `cuda-memcheck --binary-patching no python train_simple.py` phofcode
hi, i tried to use tf.gradeints to calculate `integrated-gradients` which is one of the explainability methods.
to do that, i have to treat ~30,000 x ~30,000 matrix(pred) like the following code.
phofcode however, i encountered `valueerror: cannot create a tensor proto whose content is larger than 2gb.`.
or are there some methods to avoid this issue?
thank you in advance, ref) phofurl
when calling a custom op from a python function with tf.function, i got a segmentation fault.
the op run normally without tf.function.
program crashes with error pasted at the bottom of this issue
if a tf.variable is passed as learning_rate to the adam optimizer, and the variable is later changed that does not seem to affect the optimizer.
instead, the optimizer seems to "cache" value of variable at time when optimizer was constructed.
the adam optimizer does not seem to keep calling the supplied learning_rate callable.
it seems like it 's being called once or a few times, but then a "cached" value is repeatedly used in updates.
i try to to fit model that contains
an error occurs when training an lstm with a custom loss function, using `sample_weight` and `batch_size > 1`.
the error does not occur if `batch_size = 1`, or if `sample_weight = none`.
the current `conv2d` and `dense` layers in the `tf.keras` package have `glorot_uniform` as the default kernel initializer which doesn't play well with advanced activations like `relu`, `prelu`, `selu`, etc.
given the fact that `relu` is a default choice for modern architectures, the kernel should be initialized from a different distribution.
segfault at exit when unloading the tensorflow plugin in autodesk flame 2020.0 error message phofcode stacktrace phofcode symbol at c++filt nsync::(anonymous see: phofurl
i have a simple test to serialized and deserialize a model which has a stateful lstm.
the 'tf ' version returns an error, the 'h5 ' version works ok.
i have a simple test to serialized and deserialize a model which has no compiled loss, just one added with add_loss.
calling `tf.gradients` with returns scalars for unconnected resource variables.
`momentum` in and `metrics` in model compilation cannot be used together when using `fit_generator`.
the problem does not exist when using `fit`
using tf.keras.optimizers.adam and updating hyperparameters results in hyperparameters not updating on the first update.
not able to call more than once to create tf-trt nodes for disjointed sub-graphs.
as the title said, it complains phofcode i follow the sample code of api doc phofhyperlink ,
when using class_weights in fit_generator causes the training process to continuously consume more and more cpu ram until depletion.
there is a stepped increased in memory usage after each epoch.
see below for the reproducible example.
to keep the reproducible example small, i decreased the size of dataset and batch size, which shows trend of increasing memory.
while training with my actual data, it depletes full 128gb ram by 70 epocs.
in code below, if you comment out class weights, program trains without depleting memory.
factorizing a small 4x4 (dense) matrix with walsmatrixfactorizaion results in the following error: > invalidargumenterror (see above for traceback): input matrix is not invertible.
> t [[node cond/matrixsolve (defined at ]]
the behavior of `sequencefeatures` layer is really different between when it's used with a feature column produced with and when it's used with a feature column produced with `embedding_column`.
i've already reported an issue phofhyperlink where the `call` method of `sequencefeatures` used unnecessarily requires its input to be a `sparsetensor` instead of a regular `tensor`.
today i was experimenting keras funcional api by building model using two `sequencefeatures` layers along both and `embedding_column`.
i got graphic depictions of the model using `tf.keras.model.summary` and and discovered that `sequencefeatures` gets decomposed in million sub-layers type `tensorflowoplayer`, as opposite to the clean to the point depiction `embedding_column`.
this has only effect overloading results `summary`and `plot_model`with not so relevant information instead having concise insight graph.
here is obtained plot: large complex plot model phofimage the upper part phofimage plot is due to conversion input into sparse tensor, so this is related previous issue phofhyperlink .
the focus issue i'm opening today this part phofimage which should not exist in my opinion.
hello, i have trained my custom dataset using the github project link phofhyperlink to create a model that detects eye region with landmarks.
i have converted the ckpt files model to pb and from pb to tflite model.
everything is ok here when testing with ckpt files and pb frozen graph in prediction it gives 75 %, 80 % predictions : that a result on ibug dataset resulttaa phofimage i have used ml kit firebase sdk to integrate tflite model and i have followed instruction for how use custom model.
for the first time, tried print just values (x,y) couples of points ( landmarks ) that can be drawn on the eye region contours
when analyzing a tensor in eager-execution mode in the "watches" of the pycharm debugger, the deprecated object tensor._shape is automatically evaluated.
this results in following warning in the console (two times for one evaluation).
when evaluating many tensor, this substantially spams console.
i am trying to move some of keras 's image transformation functions phofhyperlink into my dataset constructor function, e.g.
phofcode where at somepoint in `preprocess_fn` `np.rollaxis` is called, which in turns calls `np.transpose`.
the memory keep growing with given representative data set.
the problem doesn't come from how i load data, since no problem if i test for loop over my data.
probably something in quantization process is holding the data.
i am using tensorflow 1.12.0 with gpu rtx2060 with 6gb memory.
i am using reinforcement learning code to train the robot in a gazebo platform using ros.
the issue is that it is utilizing more cpu memory rather than gpu memory.
it takes a lot of time to train a robot.
i attached a screenshot of the code and the system memory status along with gpu status.
from the status, it is shown that it utilized whole 16gb system memory while it utilized 80% gpu memory but temp and utilization status is low.
its means not taking load.
screenshot phofimage screenshot phofimage screenshot phofimage screenshot phofimage
when using `tf.function` decorator for a function iterating over a dataset in multi-gpu, the colab notebook crashes and gives the following logs: phofcode it works perfectly without `tf.function` decorator
when trying to convert this model phofhyperlink the tfliteconverter fails with ` valueerror: invalid tensors 'matmul ' were found.`.
the matmul operation in general does work, whith the example from: phofurl phofcode
the kernel tensor for conv2d and conv2d_transpose layers (in contrib.layers) behave differently.
the number of outputs determines the number of featuremaps/filters and is at the last position (x,x,x,here) while for conv2d_transpose layers it is (x,x,here,x) as the following code example will show.
because when building in model where the input_dimensions and out_put_dimensions differ i need to manually transpose last 2 dimensions in order for model to be trainable.
i reinstall the certifi, openssl, cryptography, ca-certificates.
but it did not work.
i changed the mnist url from https to http.
but i don 't think this is a good solution.
i use openssl s_client command checked the connect to the mnist url.
so guess certification is installed and added to ssl.
but why do still get ssl error?
also checked: 'conda config --show ssl_verify ' it showed accert.pem file path
i performed transfer learning on pretrained model with tf custom training loop and keras fit.
both of the settings are the same but tf custom training loop performs worse than the keras fit .
i have no idea what 's the problem.
i have asked questions on stackoverflow but not got answer what i want phofurl
factoring out a train step function into our custom model lead to a memory leak due to continuously retracing the full autograph epoch dataset loop.
the root cause was that bound instance methods are not identical `model.step is not model.step`.
tensorflow 1.14 introduced a bug in keras models.
the specific change is the introduction of these lines: phofurl they make the assumption that a model 's inputs will be deeper than any other node.
when that is not true, any nodes whose depth is equal to or greater than the inputs does not get evaluated, producing an exception.
the problem is demonstrated by the following script.
it creates a model where an input and a variable have same depth.
in tensorflow 1.13 this runs correctly, but in 1.14 it throws an exception: traceback (most recent call last): file "test.py", line 17, in <module> file line 634, in __call__ outputs = call_fn(inputs, *args,
tf.matmul on tensorflow-gpu gave wrong results.
here is a simplified version of the code.
phofcode when i ran it on my tensorflow-gpu, here is the result: bug phofimage looks like it stops computing halfway through and gave the rest 0 as a result.
we are trying to train a bert model on google colab in keras with tensorflow hub.
the codes are largely copied from phofurl with slight modification.
the model after compilation failed to generate the prediction.
i continue to get the error message despite 'with tf.session() as sess:
an error is thrown when saving a keras model that has been compiled in using a mirrored strategy using more than one gpu.
model does not converge and training is extremely slow with distribute strategy, if tf.py_function called in dataset.map.
works fine without distribute strategy or implementing map function without tf.py_function.
training a model using dataset scaled to range 0..1 i am getting improbable metrics consistently phofcode i don't understand these metrics.
1. if accuracy is about the same as mae then what does it mean?
its not accurate at all?
2. if mape about the same as mae - how percentage can be equal to absolute value of error?
3. the data is scaled to 0..1 range.
how absolute error can be 76?
raise an error when fitting tf.keras model when the training dataset size less then batch_size and validation_split is 0.0. if using a batch_size less then dataset size or setting validation_split, the fitting is good.
using original keras, fitting is good in any case.
when creating tf.keras.model with functional api, dilated convolution of tf.keras.layers can 't estimate the output shape.
loading 1.4mil 100dim embeddings into the graph dim:100
raises an error when using in the callbacks_list when training using keras under the distribution strategy on a single machine.
when i run tf code on my rtx 2070 i have an issue about: e failed to synchronize the stop event: an illegal memory access was encountered e internal: error destroying cuda event in context an illegal memory access was encountered e internal: error destroying cuda event in context an illegal memory access was encountered f check failed: status == cudnn_status_success (7 vs. 0)failed to set cudnn stream.` and... sometimes that crach windows.
but, if i disconnect the power plug in my laptop, it's works.
after the program runs for a while, i receive the following error.
failed to clear function handle cache: invalid argument: failed to find functionlibraryruntime for device when releasing multi-device function handle 1
the graph only consist of phofcode , where i pin down to for this issue.
after quantization with phofcode , the interpreter fail to `allocate_tensor()`.
`runtimeerror: op_context.input->type == ktfliteuint8 || op_context.input->type == ktfliteint8 was not true.node number 0 (dequantize) failed to prepare`.
i assume phofcode cannot be quantize, and nothing to be quantize actually, since if i add phofcode fully quantize into int8, it tell me split_v is not supported.
so this simple graph should not have any quantize/dequantize at tf.split ops?
thus checking type if is int8 and has dequantize layer here seems not make sense?
trying to convert a graph containing a reshape layer followed by batch normalization appears to trigger an incorrect op reordering.
in particular, the toco converter relocates the mul operation from the bn layer to before the reshape layer, at which point layers do not have compatible dimensions.
this results in `check failed: dim_x == dim_y` error.
from looking at graphviz video, this change is introduced in frame 38.
it seems that tensorflow will increase memory usage when i compiled keras model serveral time.
there is some way to release unused compiled model
the result on the gpu is significantly different from cpu.
it is correct on cpu, but wrong on gpu.
the difference on gpu is much bigger than zero.
phofurl i am implementing resize op for onnx.
phofurl i don 't know why there is not "-0.5f" like vanilla halfpixelscaler.
the comments don 't solve my concern.
for example, if `(static_cast<float>(x) + 0.5f) * scale` equals 1.4, minus 0.5f or not will brings completely different result, no matter there is or is not `std::floor`.
i get an exception when computing the union of two string sets and trying to convert the output to a dense tensor (`typeerror: cannot convert 0 to eagertensor of dtype string`).
when convert to lite quantized model with representative_dataset, it throws `std::out_of_range`, when model includes `tf.split()` my model implement pixel shuffle with some split and concat operation, i narrow down to tf.split() which is causing the issue
if the first dimension of `x` is `n`, "row" `i` will get one value if `0 <= i < (n&-4)`, but a possibly different value for `(n&-4) <= i < n`.
(these c++/python style 0-based indices.
for r, 1-based, it 's `0 < i <= bitwand(n, -4)` versus `bitwand(n, -4) < i <= n`.)
the current behavior is that the graph first gets converted to a trt graph with trtengineops, but then when it gets calibrated for the int8 quantization, an error occurs.
while training a model with `tf.keras.layers.lstm` and having in callbacks, `model.fit` stops with an error message at end of last epoch, and no model weights is saved as `modelcheckpoint` should do.
i set inputs are tensors which contain only ones.
then, the output of `tf.nn.conv2d` is different when batch_sizes are 64 and 128.
function get_operations() from class graph() is not returning the operations from a namescope enclosing the tensorflow operations from respective namescope but is returning the operations for all the graph
tf-trt seems to return max_batch_size instead of returning the feed batch size.
this breaks current code badly.
i was trying to upgrade my tensorflow from 1.13 to tensorflow 1.14. i noticed that the training speed for my models dropped a lot.
then i tried the tensorflow custom estimator and reproduced the problem.
phofurl this is the speed with tf 1.13. info:tensorflow:loss = step = 0 info:tensorflow:loss = step = 100 (0.341 sec) info:tensorflow:loss step 200 (0.296 sec) info:tensorflow:loss step 300 (0.292 sec) 400 (0.292 sec) 500 (0.288 600 (0.287 700 (0.304 800 (0.338 900 (0.338 this is speed with tf 1.14. i0722 loss 0 i0722 global_step/sec: i0722 loss 100 (0.354 i0722 global_step/sec: loss 200 (0.306 global_step/sec: 299.99 loss 300 (0.333 global_step/sec: 400 (0.332 500 (0.337 600 (0.334 700 (0.341 800 (0.338 900 (0.337
when importing all keras callbacks or optimizers via `from import *` or `from import *`, the variable `__name__` gets redefined to and
training on mac os, with cpu only, with and without distributed scope for mnist example.
when passing an empty tensor as the second argument to the `tf.cholesky_solve` function a segfault is encountered.
valgrind reports the following: phofcode
when compiling the example custom op from phofurl with gcc 5, a segfault is encountered when running with tensorflow 1.14 and python 3.6 (on linux).
the same code works fine when running with either python 3.7 (instead of python 3.6) or compiling with gcc 4.8 (instead of gcc 5).
the code also works fine on mac.
valgrind shows the following: phofcode
computing intermediate values within a subclassed model doesn't work in graph mode.
i am using keras functional api phofhyperlink to create a model.
during training it has 2 inputs - one is actual input and second one is ground truth mask, i am applying using `lambda` layer (see code example).
when saving the model (not the weights) (via `modelcheckpoint` callback or manually) and loading it via i get model without second input.
when using `strategy = is crashing during training with ` runtimeerror: method requires being in cross-replica context, use
the dropout layer accepts a `noise_shape` argument.
if set, this shape has to include the batch size, which is usually not known at model construction time.
thus, this argument is actually only useful if `none` can be specified for any axis and is then expanded to the actual size of that axis in the input tensor passed to the layer.
this is currently perfectly possible in standard `keras` but raises an error in `tf.keras` (see below).
tf.saved_model.load cannot load compiled keras model, saved as savedmodel in graph mode.
when using the function using autograph the following error occurs: `valueerror: ( 'input has undefined rank: ', tensorshape(none))`.
the training data is pre-processed and loaded into memory.
the model is compiled and the correct model output is produced with model.summary().
see logs bellow... on model.fit(), nothing happens... the gpu is at 3% utilization and one cpu core at 100%.
when i use conv2d layer with dilation rate other than 1 output looses shapes
the following code was working with some earlier release but now it is crahsing phofcode
i downloaded the notebook from phofurl to test running on my local machines and also some ec2 instances.
the ec2 instances have ubuntu 18.04 and either 1 or 4 tesla v100 gpus.
i installed both local and ec2 instances from scratch, used anaconda on all of them, and installed the tensorflow 2 beta 1 binary as per instructions on the website.
the notebook runs faultlessly on the ec2 instances.
however, this is output of model.fit(train_dataset, epochs=12, callbacks=callbacks) my windows machines.
i just run walsmodel through gcloud ml-engine jobs i run it through my mac terminal, i didn 't change any code over here phofurl but it always has the following error: experiment_fn attributeerror: 'module ' object has no attribute `gcloud ml-engine jobs submit training --region=us-east1 --runtime-version 1.14 --python-version 3.5 --scale-tier=basic_gpu --runtime-version= -- --num_epochs=500 --nitems=39681 --nusers=38781 --topk=1000`
when i try to run one of the distributed examples, the model fails using the default nccl all reduce cross devices ops: <details> <summary> nccl all reduce error </summary> internalerror traceback (most recent call last) in <module> ----> 1 model.fit(train_dataset, epochs=50, callbacks=callbacks) in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
when running it seems the graph or session is somehow not properly destroyed when `max_steps` is `none` or less than the number of steps in the `input_fn`.
this can result in oom errors when running prediction afterward on gpu.
a note in `dense` documentation phofhyperlink says that > note: if the input to the layer has a rank greater than 2, then it is flattened prior to the initial dot product with kernel.
i don't see this happening in real life.
instead, `dense` behaves on a 3-rank tensor as it would behave if it was wrapped in a `timedistributed` layer, making me question the utility of `timedistributed` at all.
the script is in two parts : first few pictures are taken on phone to re-train a model with overfiting (ssd_resnet_50_fpn_coco) on the server, which produces a .tflite model, then sends it back to the device.
problem emerges when i try to run the inference with a newly taken image and the .tflite model as in associated tflite object detection example script : caused by: internal error: failed to run on given interpreter: - num_classes <= 1) was not true.node number 228 failed invoke.
at method) at at at
tftrt failed to collect calibration info and cannot create the int8 inference graph.
i 've been using t2t training script using cloud tpu.
after upgrading to tf 1.14.0 from tf 1.13.1, i 'm getting the error below: phofcode the training script continues w/o any further issue despite the error.
my iterate through a dataset that i created with some custom images and i set with the function and convert the frozen model to tflite with int8 quantization.
it produces the following error: > traceback (most recent call last): > file "./src/freeze_graph.py", line 100, in <module> > tflite_quant_model = converter.convert() > file line 908, in convert inference_output_type) file line 200, in inference_output_type, allow_float) file line 76, in calibrate_and_quantize 112, feedtensor return input_value) valueerror: cannot set tensor: got tensor of type string but expected type float32 for input 98, name: image_input i tried to only quantize the weights with tf.lite.optimized set to optimize_for_size and without setting representative_dataset option.
it can produce tflite model successfully.
doing a training with tf.keras results in out of memory after some time when including the `class_weight` parameter.
also there is a long delay between the start of each epoch.
if i omit the `class_weight` parameter, training proceeds normally with constant memory.
inside a distribution strategy scope, restoring a keras model (that has been trained at all) with raises the exception shown below (while handling the optimizer in particular, it seems).
(looks a bit similar to #28599 if you squint, but many details differ.)
i have noticed an issue while iterating over a distributeddataset (using a that contains data of type string, with eager execution enabled.
iterating works perfectly well, but a runtimeerror is raised once the end of the dataset is reached (cf logs below).
i run a keras adam optimizer with a cnn network.
the code works fine with cpu.
if i turn on gpu in the notebook, and rerun the same code, i get an exception.
i have an input pipeline that contains tf.py_function as one of its processing steps when training a model with tpuestimator.
when i run the code, i get the following error: phofcode according to the documentation ( phofurl "the input pipeline generated by your input_fn is run on cpu."
running the same input code with a standard estimator on cpu/gpu works just fine.
manually placing dataset + all processing steps on cpu with also fails with same error when training tpuestimator.
i have trained a model and then i 2 versions of frozen graph .
1) version 1 : single placeholder which takes in tfexample and rune the parseexample operator and does inference 2)version 2 : instead of single placeholder , i have about ~300 placeholders .
one placholder per feature (i.e since the features are already parsed , i do not create tfexample , but rather feed in individual tensors i.e a feed dictionalry where for each feature column i feed in the respective tensor) the number of ops in both graphs are approximately same (multiple placeholders being slightly less ) ~5-6k ops/nodes latency of version 2 is 2-3x higher then version 1
the output difference is non zero
- try to train a model based on get an - error attributeerror: module 'tensorflow ' has no attribute 'init_scope '.
same code works if i use
when i try to save a function of tf.module as saved_model that calls another function with different input shapes, it fails with the following error: w0717 save.py:129] skipping full serialization of object <__main__.outer object at because an error occurred while tracing layer functions.
error message: in converted code: * return layer_call(inputs), test_signature.py:32 call * return self.inner(x, dummy=dummy), self.inner(x_small, dummy=dummy) __call__ outputs = call_fn(inputs, *args,
since commit a `tf.keras.layers.conv2d` in my training code fails with the following error: traceback (most recent call last): file "./train.py", line 351, in <module> total_loss = train_step() file line 417, in __call__ self._initialize(args, kwds, file line 360, in _initialize *args,
using `tf.function` when enumerating a dataset will cause an infinite loop.
we use `fit_generator` with a custom build on but we also have seen similar behavior with namely, when we have the default the training process is slow but the memory usage saturates at some point and everything works fine.
when we use despite the number of workers or `max_queue_size` memory keeps growing linearly up to point when process gets killed by system.
see enclosed memory graph from gcp ai platform job monitoring: ai_job_mem phofimage the same code worked fine on tf 1.12, i.e.
memory saturated at some point, but broke from 1.13, and we see same effect with 1.14.
i am working with gan.
i have `trainer` class which has the following methods: `pass_one_step_gan`, `__pass_critic` and `__pass_generator`.
it looks like around that: phofcode i got the following error: phofcode i tried to wrap `__pass_critic` in `tf.function`, but it didn't help.
does anyone know how to debug the tensorflow source code with the test module; i have tried to use bazel build -c dbg while_loop_test, but it seems that it will compile all the project, and it will take much time.
anyone knows how to debug only a small module.
i know how to create tf.keras.model with functional api for sure.
i created a tf.keras.model with no input tensors with functional api.
when i call it, tensorflow complains that >attributeerror: tensor.op is meaningless when eager execution is enabled.
i have noticed that throughput of fasterrcnn type object detector is slower with tf-trt than just tf.
build a keras model, compile it, run it.
try and rebuild model with new parameters.
memory has not been freed or re-used.
when assigning to a tf variable with the `=` operator in a tf function, i get a really cryptic error message.
this issue is about the error message, not the error itself (i should have called the variable 's assign() method).
trying to convert a sparsetensor of type string into the corresponding dense tensor using tf.sparse.to_dense throughs an exception: typeerror: expected string passed to parameter 'default_value' of op 'sparsetodense', got 0 of type 'int' instead.
error: expected string, got 0 of type 'int' instead.
gpu device creation fails when the cuda malloc allocator is selected, with the error "no allocator statistics".
this is because of an allocator stats check introduced between releases 1.13.1 and 1.14 in the gpu common runtime function phofhyperlink .
this check fails when using the cuda malloc allocator because virtual allocator method getstats was never overridden.
i am trying to optimize (decrease) the inference time and model size of my tiny yolov3 model.
i currently have it as a frozen graph.
when i run the timing and evaluation script from here phofhyperlink , fps actually decreases as the optimizations are tried, and file sizes stay constant.
rnn layers have poor performance and low gpu usage when used with `mirroredstrategy`.
by monitoring `nvidia-smi`, part of the execution seems to run sequentially on each gpu.
imagine you extend the tf.keras.layers.layer with the class mylayer, which is a wrapper for the tf.keras.layers.dense layer class (this class extension could also be a model, but that 's not important).
now imagine you instantiate a dense layer `dense` (w/ no bias) and initialize two independent mylayer instances `dense1` and `dense2` using `dense`... now, we extend the model class to take two mylayer instances on init.
we do this because we want to use dense1 and dense2 to perform different tasks but we want their weights to be shared (in a realistic example, mylayer would be split into mylayer1 and mylayer2, which would perform different operations on `call` but would both depend on `dense`).
we run data through our model pipeline compute loss, gathering gradients by using either gradienttape or keras optimizers.
however, when we gather apply gradients with respect even though our model has one unique weight, kernel for `dense`, will return two variables, gradients will be calculated thus applied twice, which i would say is bug, insofar as it 's unexpected.
when `tf.reduce_mean` is called on the output of a `tensorarray.concat` which had a fully dynamic shape (including rank), it produces a `tensor` of scalar shape, but whose value is a 1-element vector.
`tensorarray` objects passed as accumulators to `dataset.reduce` lose inferred shapes.
subsequent calls to `tensorarray.concat` returns a fully unknown shape.
compilation error due in file included from from from from fatal error: wchar.h: no such file or directory #include_next <wchar.h>
i am using tensoirflow object detection api in c++ , trained model with version 1.8.0, now i am running it on a laptop with no gpu and in microsoft visual studio 2017. the readtensorfromimagefile function takes alot of time and i would like it if it can work faster.
i am loading 8k image and it takes around two seconds running through the function.
is there a way to make faster ?
it throws this failedpreconditionerror: error while reading resource variable name9/conv_linear/bias from container: localhost.
this could mean that the variable was uninitialized.
not found: container localhost does not exist.
(could not find resource: when trying to run the graph with a feed dict to get variable value
i am trying to convert a tiny yolov3 frozen graph into a frozen graph with some operations replaced with trtengineops so that they are run with tensorrt.
my graph has many nodes that are supported by tf-trt phofhyperlink yet none are simplified into a trtengineop.
after conversion, this is the count of different `node.op` in the resulting frozen graph: phofcode and, information regarding the conversion process: phofcode
i want to extract pbtxt file given an input of tensorflow frozen inference graph.
in order to do this i am using the below script : phofcode as an example, i am using ssd mobilenet architecture.
using the above code i get the output as pbtxt but cannot use it.
for reference see the image below <img width="1440" alt="screenshot at 6 34 05 pm" src=" phofurl > right: image of original pbtxt file of mobile-net architecture > left: image of pbtxt file obtained by using above script.
when use the official on right get correct results.
but, do not get any prediction when use left which generated using above script am these predictions on open cv dnn module `tensorflownet = how do convert mobilenet frozen inference graph into proper format so that can get inference ?
when i use `tf.estimator` together with for single worker multiple gpus training, i meet the following error if i try to define `tf.train.scaffold` for to configure the saver parameters.
everything works fine just i remove the scafflold and the multiple gpu training for estimator is referred this tutorial phofhyperlink .
when `.map` is called on a `tf.data.dataset`, some available imports are getting lost.
i 've stumbled upon this being unable to import after mapping a function onto a dataset, even though i can import it in ipython.
several other methods of `tf.summary` are lost as well.
i didn 't check whether any other tensorflow models apart form `summary` loose imports.
i have code that writes .npz files from multiple python processes.
python code is single-threaded, and each process writes a separate .npz file.
the files are sometimes corrupted on s3.
i checked a sha256 checksum of the data in memory, and they differ from the checksum of the written data on s3.
when i run my model (which is a partial implementation of transformer) using xla, i get an error message.
the error message is the following: phofcode
if you make any errors with input signature on autograph / tf.function, the error message is essentially useless: neuromax.py:396 train * change, total_change, episode, episodes_this_dataset = run_episode(type, n_atoms, target_positions, positions, features, masses, quantum_target, target_features, change, total_change, episode, episodes_this_dataset, gif) __call__ return
the output of decode_wav is tuple of (wav_data, sample_rate) sample_rate is int32 but expects a float32 sample_rate.
if the sample rate is cast using tf.cast(sample_rate, float32) and then a typeerror is thrown with the message: typeerror: using a `tf.tensor` as a python `bool` not allowed.
use `if t not none:` instead of `if t:` to test if tensor defined, and use tensorflow ops such as tf.cond to execute subgraphs conditioned on the value of tensor.
when running the example of creating a custom op from phofurl on a mac the compilation stage (see ( phofurl fails with the following error message: phofcode this appears to be because the specified linker option (returned by is not valid for `ld` on mac.
the man page for `ld` says following: phofcode i believe that correct format for this flag is (since linker will prepend `lib` and append `.dylib`).
a workaround for this is to replace this line phofcode with this: phofcode alternatively there is (i believe) a fix underlying cause here: phofurl
my issue regards a performance degradation induced by enabling eager execution, in a context when no eager tensor should be created, apart from the model 's weights (to which i do not need access).
as of now, my installation (compiled from source based on yesterday 's status of the r2.0 branch) does not have tf 2.0 behaviors enabled by default, thus i compared the run-times for a supervised learning task depending on whether i `enable_v2_behavior` or simply it turns out the former yields a significant decrease in performance.
on my initial example (which i do not include as it relies on custom data and model layers), run time went from two minutes to five.
in eager mode, first epoch was really slow, while following ones proved increasingly fast, stabilizing at 11 / 12 seconds (19 ms/step).
by contrast, without eager, all epochs ran at same speed, for 8 / 9 seconds (15 ms/step).
reproduced this issue on an example that uses mock data (i.e.
properly-shaped randomly-generated values, since learning performance is not at stake here) and uses exclusively layers taken from `tensorflow.keras` (no custom bits), whose code present below.
as it happens, enabling eager execution results in 13m49s runtime, while enabling it increases it to 19m17s, i.e.
an increase of about 40 percent.
the task at hand consists in fitting binary classifier that takes variable-length sequences of vectors as input.
for this, set up instance (which, for simplification, contains random data provided code) based pre-generated numpy arrays data, and use `padded_batches` method to format my inputs as desired.
in mock example, model consists layer 100 lstm cells with inputs masking (due to length variability) and default tanh activation topped with single feed-forward unit with sigmoid activation.
wrapped around a `tf.keras.layers.lstm` instance raises a `typeerror` when trying to pass it an initial state (through the `initial_state` argument of the `__call__`).
when include tensorflow header to use the c api in my project, it always gives me warnings warning c4190: 'tf_newwhile ' has c-linkage specified, but returns udt 'tf_whileparams ' which is incompatible with c. it is a bug introduced by the tensorflow c api header.
tensorflow attempts to colocate ops with incompatible devices (when the ops are related to `sparseapply*`, e.g.
`sparseapplyrmsprop`, operations), which results in an error.
this only occurs when using resourcevariables (not refvariables).
when following the transformer walkthrough phofhyperlink there seems to be an issue with the newstest2014.de 'download and preprocess datasets ' step the newstest2014.de doesn 't appear to be in valid text format.
when its unpacked it cannot be opened as a text file (looks like another archive file) as the newstest2014.en can and was in previous versions.
for example: when i run following command (after completing rest of requisite steps): _python3 transformer_main.py --data_dir=$data_dir --model_dir=$model_dir --vocab_file=$vocab_file --param_set=$param_set i get error ( see attached/below for traceback)
when enabling training on embedding layer using keras subclassed model, an error is raised during model.fit(): e constant folding failed: invalid argument: unsupported type: 21` this has a huge impact on training speed, that scales with the amount of data, in my full code, each epoch take more than 1 minute to complete(dataset of 869 tokenized strings, for train an encoder/decoder model), the code for reproduce this error dont have a noticeable impact because there is only one sample, already tokenized.
the error only is showed when an embedding layer with trainable=true, is followed by an lstm/gru layer
hi all, i know this problem has arisen on here but i have yet to find a discussion around the problem with regards to r; all i see are python issues and solutions.
in short i am using the keras library with tensorflow gpu as a backend in rstudio for deep learning, specifically convnets.
after a bit of trouble installing cuda/cudnn etc.
managed to get it all working, and installed tensorflow-gpu in anaconda (i am working within an anaconda environment).
this all worked fine and yesterday was running my models on my gpu in r with no problems.
without making any changes whatsoever, boot up today and run the same models get an error telling me that cudnn cannot initialise as tensorflow could not create a cudnn handle.
am not sure why this has emerged all of sudden as was having no problems yesterday.
when i tried to use `model.summary()`, the output shapes were printed as
when adding a custom op in c++, the shape function passes a null inferencecontext pointer.
is saved as padding is valid.
duplicateflagerror: the flag 'log_dir' is defined twice.
get the following error when using tf.case and slim.l2_regularization.
i run training phofcode this is only one step training and its goal is to visualize bounding boxes in tensorboard images tam.
on the "images" tab in tensorboard i don 't see all bounding boxes which are in the tfrecord file.
options provided in the pipeline.config phofcode have no effect on this.
i 'm currently working on a costum keras layer and need to use `tf.linalg.expm` several times.
while training my model i noticed that my system would be out of memory after a few minutes.
reducing the layer definition step by step i noticed that the error should be related to `tf.linalg.expm`.
every time the layers `call` method is invoked more and more memory get 's allocated.
replacing `return tf.linalg.expm(x)` in the following code example with e.g.
`return tf.matmal(x,x)` does not yield this extreme leak of memory.
i want to do validation after some training steps, so i choose `feedable iterator api`.
however feedable iterator api does not support tf.varlenfeature(namely `sparsetensor`), varlenfeature is useful for recommend system.
any suggestions to work around?
below is a code snippet.
`typeerror: input must be a sparsetensor.` when using rnnestimator phofhyperlink .
outside of `fit`, e.g in a custom training loop, results in an error.
i have provided a modified version of classifying structured data phofhyperlink which demonstrates this.
the error is `valueerror: column dtype and sparsetensors dtype must be compatible.
key: thal, column dtype: <dtype: 'string '>, tensor dtype: <dtype: 'int32 '>`
looping over in a continuous loop degrades in performance after a few hundred iterations.
the minimally reproducible example below starts at ~0.04s per loop iteration and within about a minute of running is near 0.5s per loop iteration.
this does not happen when passing in a numpy array to the problem is also less severe when passing in `tf.data.iterator` rather than `tf.data.dataset`.
if you pass an iterator the performance will continue to degrade at fifth to tenth the rate.
the cause of the difference between the dataset performance and iterator performance is likely at `training_utils.py:1314` where keras creates new iterator for each `predict` loop.
the issue is completely ameliorated when passing predict tensor produced from in this case no additional dataset operations appear be created by keras `predict` loop.
densnet169 crashes with memory error even with datagenerator and a batchsize of 8.
i build a with 5 * 1024 * 1024).
when passing model_dir with a local file system, it saved successfully.
when passing model_dir with a s3 path, it failed with exception entitytoolarge.
i am trying to use post-training quantisation with a calibration data-set to capture the activation ranges.
the network is an unrolled lstm-based model.
this model has multiple placeholders (3 ph) and the post-training quantisation process breaks because of that.
with beta 0 and 1 the training/validation history is as follows: beta 0/1 phofimage this is a very low validation accuracy.
this can of course happen, even with code based on an example, the issue is that this only appears with beta0 and beta1 builds, not with alpha0 (see below) when using the exactly same code and training data.
the output during prediction from rnn layers, i.e.
`lstm` and `gru` is dependent on the batch size when `stateful=false`.
i tried to use tpudistribution strategy to use tpuv2 pods for training xlnet, but it gave me error(mentioned in logs below)
the call() methods of tf.keras.layers.gru and others (e.g.
lstm) does not produce output as expected for "zero_output_for_mask" when the layer is created with "return_sequences=true".
regardless of the value "zero_output_for_mask", the result of call() fills zeros for masked timestamps.
unknownerror traceback (most recent call last) in <module> 1 import tensorflow as tf ----> 2 3)(tf.ones((1, 5, 5, 3))) in __call__(self, inputs, *args,
runtimeerror when convert frozen graph to tflite with `converter.optimizations = and = representative_data_gen` `runtimeerror: attempting to use a delegate that only supports static-sized tensors with a graph that has dynamic-sized tensors.no calibrator found for context.node number 0 (pad) failed to invoke.` i double checked the shape of the input array which is [1, 512, 512, 3] and i can convert it to a float tflite model without any dynamic-sized tensor.
i 'm not sure where and what raised this error...
i create a tflite interpreter and allocate a direct bytebuffer in java to process a sequence of images.
i then copy image data into the buffer for inference, which runs in an asynctask with a serial executor, so the interpreter and buffer are only used by one forward pass at time.
doing this the predictions sometimes (always?)
relate to an earlier (possibly always the first) image in sequence, not current image.
so things work reliably for first image, but not for following images.
i can circumvent this problem by allocating new bytebuffer for every frame.
i'd like to avoid these frequent allocations, but more importantly i am having hard time figuring out why am getting this behavior in first place.
it's almost like tflite doesn't use updated data buffer when it sees that buffer reference hasn't changed.
tensorflow with mkl-dnn (intel-tensorflow) throws exception "could not initialize a memory descriptor, in file
the code snippet below raises an error instead of printing something phofcode produces phofcode
error occurs when trying to compute the jacobian in the following code
error occurs when trying to compute the jacobian in the following code
error arises during concatenate when i run the following code: phofcode `valueerror: graph disconnected: cannot obtain value for tensor shape=(none, 256, 256, 16), dtype=float32) at layer "concatenate_8".
the following previous layers were accessed without issue: [ 'input_9 ', 'conv2d_29 ', 'conv2d_30 ']` this issue does not occur in a tensorflow 1.x environment, only tf 2.0
i am getting the following error: input to reshape is a tensor with 24576 values, but the requested shape has 1536
android library fails to load inceptionv3 model converted to tflite.
in eager execution, when creating a `tf.keras.sequential` model inside a loop and discarding it immediately, the memory increases over time.
the following code shows this by printing the used memory at each iteration.
python import psutil import tensorflow as tf for _ in range(100): input_dim=3000)]) / 2
when using multi_gpu_model (i.e., in tensorflow 2.0 to distribute a job across multiple gpus (4), only one gpu appears to be used.
that is when monitoring the gpu usage only one gpu shows substantial dedicated gpu memory usage and gpu utility.
if i look at the tensor before and after the depthwise_conv2d: phofcode
after converting a conv1d op to tensorflow lite the interpreter cannot allocate tensors: ` != kinputdimensionnum (3 != 4)node number 0 (space_to_batch_nd) failed to prepare.
tflite converted models seems to always run on cpu despite using gpudelegate, for example the simplest model from phofurl runs for hundreds of milliseconds per inference no matter whether cpu or gpudelegate is used, while stock mobilenet_v1 (no quantization, no manual tflite conversion, downloaded tflite model) runs ~80ms per inference on this device when using gpudelegate and on cpu.
when using supersimple network consisting of nhwc input, single tf.layers.conv2d() layer (constant initialized) and reduce_sum output, output for c=3 is the same for cpu (host tf and tflite and android tflite) and android gpudelegate are kind of the same (less than 2% difference).
when using c=1 cpu host (tf tflite) android on cpu are kind of the same (less than 10% difference), but android gpudelegate produces drastically different output.
the automatic naming of keras metric layers is not consistent.
example, if i create two `binaryaccuracy` metrics: phofcode whereas, if i create two `recall` metrics: phofcode after testing every metric class in `tf.keras.metrics`, i found that the same behavior as `recall` is produced by the following metrics: - `auc` - `falsenegatives` - `falsepositives` - `meaniou` `meanrelativeerror` `precision` `recall` `truenegatives` `truepositives`
does not correctly works with tf 1.14 and nightly when using it together with we get the error: phofcode
i've written a simple cnn to count number of fingers, works perfectly on my laptop (both the .h5 and tflite version).
when i load the .tflite model on android it fails saying; ` caused by: internal error: failed to apply delegate: tflitegpudelegate prepare: shader compilation failed: error: 0:6: 'unknown' : not a legal layout qualifier id` what exactly does this error mean?
model trains good for the first 3-5 folds but it eventually returns a out of memory error.
i 've tried deleting the model the end of each iteration also using and allow_growth with no avail.
i 'm also using my second gpu not the titan v used for display, its alos weird that error occurs in gpu:0 but i 'm using gpu 1 `
i 'm trying to reproduce the results from the tutorial example about "text classification with an rnn" provided by tensorflow at: phofurl phofhyperlink however, this warning message constantly appears that shows "skipping optimization due to error while loading function libraries: invalid argument: ... " i tried other optimizers, and lstm or gru architectures but nothing changes!
i 've trained a simple cnn to count number of fingers held up.
the model works really well (~99% accuracy on test images).
now, i 'm trying to deploy this model on the edge by converting the saved model (.h5 file) to a .tflite file.
using it converts and gives me a .tflite file with this error: init node conv2d/kernel/assign doesn 't exist in graph` now, when i load this tflite file and try to make predictions on the same input images, it always predicts 'zero ' which is the first class label and with probability = the rest of classes are always 0.00, i get same results when loading my tflite model in android image classification example app from tensorflow repo 's.
`tf.io.write_file` creates file in eager execution but produces no output file when decorated with `@tf.function`.
in eager mode, when a function is compiled with `xla.compile`, any constant arguments are auto-cast to tensors, but these tensors don 't appear to reflect the fact that they are constant.
certain ops, like `tf.range` are sensitive to constant inputs due to the need for static shapes.
in effect, the following code raises an error: phofcode phofcode whereas this code works: phofcode phofcode
i want to compute the gradients of a loss function with respect to a model (in order to do meta-learning) and use those gradients to define the same model with new weights.
i get none as the values of the model when i use input layers.
tflite converter incorrectly shapes the bias for fullyconnected operators.
specifically in my test case (see attached model below), in the original freeze graph model, `matmul_6` takes a product of 32x12 matrix and 12x1 vector then `add_7` adds a 32x1 vector to it as a bias.
the converted tflite model puts these two operations together into a fullyconnected op, and somehow its bias `matmul_6_bias` is incorrectly shaped as single-element vector.
consequently, the inference result of this tflite model is incorrect.
i am using tensorflow 1.13.1 with gpu rtx 2080. i am using reinforcement learning to train the robot in a gazebo platform using ros.
the issue is that it is running in cpu memory rather than gpu memory.
it takes a lot of time to train a robot.
i attached a screenshot of the nvidia smi which shows that it utilize 1.7gb only of gpu while use 16gb of ram.
type casting `tf.cast` from `tf.int32` to `tf.uint32` will make the tensor become 0.
in tensorflow keras, the `input_tensors`, `output_tensors`, `output_shapes` of `class node` was a list in tensorflow 1.13.1, even if it only contains one tensor.
now the behavior changes in 1.14.0, these variables are a single tensor (not a list any more) if there is one single element.
we are developing based on tf keras, then this behavior is not backward compatible .
devices: streamexecutor device (0): geforce rtx 2080 ti, compute capability 7.5 cpu frequency: hz xla service executing computations on platform host.
devices: streamexecutor device (0): <undefined>, <undefined> found device 0 with properties: name: geforce rtx 2080 ti major: 7 minor: 5 memoryclockrate(ghz): 1.635 pcibusid: libcudart.so.10.0 libcublas.so.10.0 libcufft.so.10.0 libcurand.so.10.0 libcusolver.so.10.0 libcusparse.so.10.0 libcudnn.so.7 adding visible gpu devices: 0 libcudart.so.10.0 device interconnect streamexecutor with strength 1 edge matrix: 0: n created tensorflow with 7784 mb memory) -> physical gpu (device: 0, name: geforce rtx 2080 ti, pci bus id: compute capability: 7.5) libcublas.so.10.0 libcudnn.so.7 e could not create cudnn handle: e could not create cudnn handle: w unknown: failed to get convolution algorithm.
this is probably because cudnn failed to initialize, try looking to see if a warning log message was printed above.
t [[{{node t w unknown: failed get convolution algorithm.
this is probably because cudnn failed initialize, try looking see if a warning log message was printed above.
t [[{{node traceback (most recent call last): file "advanced.py", line 84, in <module> train_step(images, labels) file line 428, in __call__ return
running on a object raises `typeerror: 'inputlayer ' object is not iterable`.
this problem seems very similar to #24622, where the same issue was reported for sequential objects.
`tensorflow.__dict__` prints out phofcode and `tensorflow.__doc__` does not print anything.
when training a model which contains conv2d_transpose layers (using the nchw format), the last 2 dimensions of the layers weight tensor swap when reloading the model.
example: - after building model: transpose_layer1 has weight tensor (3, 3, 63, 61) - when reloading model: transpose_layer1 has weight tensor (3, 3, 61, 63) after swapping two dimensions via numpys transpose method shape (3, 3, 63, 61) is restored and model successfully trains.
i have variable sized axis on the input for a dilated conv layer which fails when inputting the second batch(data is padded batch wise).
i have tried additional padding both for % dilation_rate == 0 and % 2 == 0 without luck.
this allows for some of the layers to work but not all, so it might be a simple calculation i need to figure out what additional padding to use but i cant figure out what this is.
memory leak when we put tensor into some numpy functions (ex - np.array(), np.zeros_like()).
following attached code continuously increases memory usage.
tpu distribution strategy does not support model.fit_generator, and repeated model.fit calls result in a 50x slowdown presumably because it adds operations to graph.
as described in tf.slice phofhyperlink , i tried to use `tf.tensor.getitem` to perform a slice in a more pythonic way, but ran into memory leaks.
i get an autograph error when running the following code (see the full stacktrace below): phofcode the error is `valueerror: failed to parse source code of <function <lambda> at
tpu estimator cannot function without steps or max_steps.
when provided, any value of `max_steps` raises an `iteratorgetnext: end of sequence error`.
however this error gets handled, and tpu session remains active even when there 's no more code to execute.
i use a model written with the functional api which uses a densefeatures layer.
the `call` method of the model and a custom training function work well even if the `input` layer is unnamed, but the `fit` method fails.
this forces me to name `input` layer same name as key of dictionary given as input.
i am note sure if this is intended or not, but as this works with a custom training function i tend to think it may be bug in `fit` method.
at the beginning of the program, the memory is only 190mb.
after running for 1 minute, the memory reaches 6gb.
memory leak is very serious
i try to restore previously saved checkpoint variables and i get a method deprecated error.
creating a numpy array with uint16 datatype and passing it to tf.image.encode_png() yields different results in eager execution mode.
the first time the array is passed it somehow gets transformed to a uint8 array and for the following encodings it works as expected.
using a tf.session the uint16 input is always transformed to uint8
using batchnorm inside a timedistributed layer results in poor validation performance.
a model trained and validated on identical data can reach 100% train accuracy but never reach that when validating against the same sample.
removing the batchnorm layer resolves the issue.
see the training results from a toy example: phofcode
i observed increase of cpu memory usage (and not releasing memory) when fetching big tensors with `sess.run` from gpu and also not releasing cpu memory when closing session and resetting graph.
i attached example and memory profiler logs.
i tested 3 situations: 1) create two variables on gpu and fetch them in one `sess.run` call: memory increases by 1057mib is not released after closing session resetting graph) 2) create two variables on gpu fetch them one by one with `sess.run` call: increases by 528mib is not released after closing session resetting graph) 3) create two variables on pu fetch them: isnt increased released after closing session.
1. cache a dataset 2. derive other datasets from it 3. zip the derived datasets into a single dataset 4. see cache error phofcode
this issue is very similar to #3628, but it only happens in non-eager mode in tf 2.0. you can save a model (having batch norm layer) in
calling the keras phofcode function in non-eager mode fails after one epoch, if specifying a tensorboard callback which has phofcode .
when i define the following: phofcode
when i try to import `tf.keras` or `tf.python.keras`, i get `attributeerror: module 'tensorflow' has no attribute 'keras'`.
i have tried various versions of tensorflow and tensorflow-gpu installed via pip.
using version 1.14 of tensorflow-gpu, it worked, however none of the submodules were available; i checked using `dir(keras)` and the module was completely empty.
based off of the network, found at, phofurl and after some additional modifications, i added layers before and after each convolutional layer that bitcasts the initial tf.float32 to a tf.int32 and back to a tf.float32.
this resulted in a average accuracy loss of 5% compared to passing the tensor through the layer unmodified
during eager execution, python lists are wrapped by tf 2.0 as `<class i see a weird issue with this data structure when using function composition to build a custom keras layer.
the code for the layer is as follows.
when called, it gives the error as ` typeerror: reduce() arg 2 must support iteration`.
i have checked that the second argument to `reduce()` is indeed a generic iterable with an `__iter__` method.
is using function compositions using `functools` package an issue in tf2.0 ?
tensorflow allocates more memory than specified.
when running multiple processes sharing the same gpu can cause one process to have out of memory exception.
for example, i specified it to use no more than 50% of gpu memory.
however, it actually allocates ~52% memory as in the screenshot.
generated a sample.tflite file with 0kb
in tf 1.14.0 the module spec in `tensorflow.__spec__` is none: phofcode
trying to apply a mask when calling a batchnormalization layer fails with: *typeerror: call() got an unexpected keyword argument 'mask'*
when using the function `tf.autograph.to_graph`, i see a memory leak which i don't see if i use the annotation `@tf.function`
segmentation fault in saving an initializable dataset iterator when entering the context manager.
i have used the exact same code from the tensorflow 2.0 distributed training tutorial as in phofurl phofhyperlink .
the model does not run on localhost and the code returns an error with
i am following the tutorial at phofurl
if you limit the number of threads with and tensorflow creates a threadpool with more threads than num_threads and runs maximal num_threads causing high amount of context switches, which is delaying execution.
when importing from tf.contrib a warning is raised to do with the sunsetting of tf.contrib, as expected.
however unlike every other error in tensorflow, it is written to stdout instead of stderr.
this causes critical problems for applications that require stdout to transfer data.
is inconsistent with its documentation and `tf.gradients` when computing gradients with respect to tensors.
it returns `none` rather than the partial derivative.
the -h, -help, -helpshort, and -helpfull arguments may cause exceptions to be triggered as opposed to displaying flags, default values, and programmer-provided information.
this seems to occur when the `tf.app.flags` abseil wrapper attempts to use implicit parsing.
if i create an input layer with keras and take a slice of it, the slice has unknown shape: phofcode this is a problem when i want to use this slice in something else, e.g.
here with a softmax: phofcode
tensorflow crashes when checking the input_signature of a tf.function decorator when using multiple gpus in a mirroredstrategy.
a valueerror is generated cause a perreplica object cannot be converted to a tensor (see the log below).
below you can find the minimum code needed to reproduce the error.
the code runs just fine when i only utilize one gpu `strategy = furthermore, if optional argument input_signature is discarded (only using `@tf.function()`) error disappears too (again using multiple gpus).
hence, specific combination of input_signature and multiple gpus causes problem (which i need for performance reasons in my work).
running tf.range(b), tf.range(c), tf.range(d), indexing= 'ij ')`` with the same amount of resulting elements can have high variations, for example sometimes 1 second, sometimes up to 8 seconds).
will fail with tensorflow 2.0.0-beta1
we are trying to write a multi-step decay function in tensorflow using as suggested here phofhyperlink .
however, when we tried running the code, it returned a typeerror.
it returns the same error even when lr() is used.
when doing transfer learning using pre-trained keras model (xception per say) with the imagenet weights and adding a classification layer there is an error when fitting.
if you use no weights there is no error during fitting, but if you fine tune the model, re-compile it and fit again the same error pops.
i trained a model with quantization aware training, froze the model and converted the file to a tflite file and then when trying to compile the file one the coral tpu website it fails to compile.
when i print out tensors of tfilte file i get: phofcode some of tensors aren 't being converted into uint8 and i 'm not exactly sure how that is supposed to happen (i assume that is reason won 't compile.)
i am generating a dataset using `from_dataset` that involves copying and decrypting data at read time, which takes some time to process.
once the files are copied the filenames are yielded by the generator function so they can be read in a reading function that i am trying to map.
however, the reading code doesn 't get blocked by copy operation, and tries to operate on garbage data containing `args_0:0` before generator function has actually run and yielded a filename.
additionally, when i add additional non-tensorflow code inside of my mapped function, that code only gets executed first time it is called.
this might be me not understanding intended behavior of `map` function, but making it so that file reads can happen correctly in a map function would be useful in cases like this.
by simply calling the `call` method of `densefeatures` and `sequencefeatures` defined with and feature columns (along with `embedding_column`), we get warnings that the deprecated attributes `_num_buckets` are used (instead of the non-deprecated `num_buckets` i guess).
also note, on the code example below, that a third warning about a deprecated method, arises.
i do not understand it but there are instructions for updating given in warning, see code below.
when i call a `sequencefeatures` layer on a dense tensor, like a tensor produced with numpy, a `typeerror` is raised because `sequencefeatures` `call` method expects `sparsetensor` as input.
when looking at the log it appears that the function producing the `typeerror` is so, `sequencefeatures` does expect `sparsetensor`, only to convert it to dense `tensor`, and fails if given `tensor` that is already dense.
hello, i am trying to parallelize a machine learning algorithm by using multiprocessing for my tensorflow session.
this way, i can delegate one gpu for each process (and it doesn 't allocate all of the memory and combine the two gpus into one at the beginning.)
however, my methods are currently yielding a
running the tf_upgrade_v2 script with a file containing the @ operator results in an exception (see below).
`tf.einsum` returns buggy values compared to `np.einsum` for identical parameters.
here is the current output (please find code below): phofcode please also note that the same code works as expected when running on the cpu.
it also works correctly on the gpu in tf 1.12.0, cuda/cudnn 9.0/7.3.1 and python 3.6.8.
combining tf.data.dataset with tf.keras.model fails since 1.14.0rc0 when using a dataset for training but a numpy array for validation data.
logs with errors for both 1.14 and 1.13 below.
when converting keras model to estimator it converts all integer inputs to floats or doubles.
this will result in data-type errors in the converted estimator.
i am not entirely sure if this is a bug or "feature" because this function is indeed called in the conversion: phofurl however, this is blocking using integer-inputs in the converted estimator.
upsampling using results in unnatural smearing of the right and bottom edges of the image.
this problem is amplified when the upsampling is repeated.
logging from the python 's standard library stopped working in tf 1.14. log file is not created and the output supposed to be written there is instead redirected to the stdout, which results in each logging message appear twice in the console.
i am trying to use a pre-made estimator with a dataset fetched from tensorflow_dataset.
i have followed the steps from the guide, but it gives an error: phofcode i have also looked at this other issue ( issue #24592 phofhyperlink ) but the solution provided there does not apply to me.
i built a custom activation function in keras' and call tf functions.
when i call the custom function, i encountered error: typeerror: using a `tf.tensor` as a python `bool` is not allowed.
use `if t is not none:` instead of `if t:` to test if a tensor is defined, and use tensorflow ops such as tf.cond to execute subgraphs conditioned on the value of tensor.
the line of code where the error happened is this one ` inputs = tf.where(orig > 0 and orig <= 0.25, 0.25 / inputs)`
when using reshape layer of keras and -1 is used to infer the shape, the output shape is incorrect.
i cannot build the code including stream_executor/rng.h on visual studio 2015 as following.
the keras code example in the documentation for the `tf.saved_model.load()` function raises an exception: phofcode
can 't build all tflite micro 's samples on windows or some embedded systems (requires visual c++).
i define a hook class which is inherited from sessionrunhook, and add an assign operation in the begin() function.
then, i run the assign operation in the end() function.
although the value is changed, results do not store into checkpoint.
so, if i restore model, i get model which is not changed.
the model accuracy is far off between virtual gpus and physical gpus.
the default is used for multi gpu training.
iterating on a batched dataset made from tensor slices of ragged tensors produces `tf.raggedtensor` that seem to be improperly formatted.
specifically, calling return the row index for every element in `raggedtensor.values`.
this is inconsistent with the output obtained from calling directly on the original tensor (or slice of the original), and also inconsistent with format expected by `tf.raggedtensor.
there is a large accuracy difference between running tensorflow in eager versus graph mode (i.e.
using @tf.function and not using @tf.function) for the same model, number of batches and epochs on the same data.
three different tests are run to measure performance on both a gpu and cpu if available.
each test uses tensorflow alpha 2.0, and trains using the mnist dataset provided/bundled by tensorflow.
each test runs for 1 epoch comprised of 1000 mini-batches.
a mini-batch contains 32 samples.
all tests use adam optimizer, sparse categorical loss.
test descriptions: - test 1: uses the keras 'compile ' 'fit ' function - test 2: uses tf.gradienttape does not use @tf.function decorator - test 3: uses tf.gradienttape @tf.function decorator.
the @tf.function decorator is applied to function training on mnist mini-batches
i am trying to use the create specifically constructed batches from a large number of datasets, ~7300.
each of the datasets i want to sample from is a tfrecord dataset.
it fails with a deadlineexceedederror (stack trace below).
the model is implemented as an estimator.
i attempted to adjust the operation timeout but that does not seem to have any effect.
a few observations: 1. i know may have pushed this a bit far.
if should actually build either completely custom dataset or custom operator that could take stream of examples and build the batches with some sort of internal buffer let me know.
1. it is much slower (~5x) create datasets in graph mode as opposed eager mode.
1. eager mode has no problem yielding examples if just loop over dataset and print them out.
1. the graph that is created by estimator extremely large (graph.pbtxt 2.5gb)
when using tf.dataset (tfrecorddataset) api with new tf.keras api, i am passing the data iterator made from the dataset, however, before the first epoch finished, i got an `when using data tensors as input to a model, you should specify the `steps_per_epoch` argument.` exception, even though i 've set this attribute in fit method.
when i try to fine tune a faster rcnn + resnet50 object detector i get a runtime error.
stack trace: `traceback (most recent call last): file line 109, in <module> tf.app.run() file line 125, in run _sys.exit(main(argv)) file line 105, in main train_spec, eval_specs[0]) file line 471, in train_and_evaluate return executor.run() 611, run return self.run_local() 712, run_local 358, train loss = hooks, saving_listeners) 1124, _train_model return hooks, saving_listeners) 1154, _train_model_default features, labels, self.config) 1112, _call_model_fn model_fn_results =
when using non-ascii character in the function with @tf.function, autograph failed.
> w0613 5776 ag_logging.py:145] entity <function train at could not be transformed and will be executed as-is.
please report this to the autograph team.
when filing the bug, set the verbosity to 10 (on linux, `export autograph_verbosity=10`) and attach full output.
cause: (unicode error) 'utf-8' codec can't decode byte 0x93 in position 1: invalid start byte (tmp9j9bce4r.py, line 6) temporary file is created by shift jis (japanese windows default) character code.
i have written a code performing inference on frozen graphs.
due to certain circumstances i must use the c api.
the code does exactly what i expect.
however as i must do the inference thousands of times during a simulation, at some point the simulation crashes as run out of memory.
so started to uncomment my code and rejoin one part after the other.
found out that memory leak only occurs if uncomment tf_sessionrun.
was unable to figure out what it does to increase required memory.
maybe it is also my fault but do not see an error in memory management.
another remarkable thing is that before inference get following warning 5 times: `w allocation of exceeds 10% of system memory.`
use the tool saved_model_cli to covert a severable model with tf-trt: ~~~ saved_model_cli convert --dir --output_dir "/path/to/trt-mask-rcnn" --tag_set serve tensorrt --precision_mode fp32 --max_batch_size 32 --is_dynamic_op true ~~~ ## while i got a frozen_graph model and the variables fold is empty, which is not severable!
~~~ variables/ null saved_model.pb ~~~
unable to train a model using mirroredstrategy with cudnnlstm.
fails with the following error: phofcode
gist link 1 phofhyperlink gist link 2 phofhyperlink i am trying to use tfe.pyfunc to combine eager block in the operation graph (see link 1).
there are four input arguments to the eager mode function of dtype tf.float32 and tf.int32.
when i try to calculate the gradient of a tensor w.r.t some variables that the calculations involving them are happen in eager block, error in link 2 is raised (typeerror: cannot convert provided value eagertensor.
provided value: 0.0 requested dtype: int32).
i tried to build fully quantized autoencoder model using tf2.0 beta and keras on colaboratory phofhyperlink but when i run tfliteconverter.convert method, the jupyter kernel crashes and the session is restarted.
error when trying to use 2 x tpus v3 in tpuclusterresolver
while training the model after a number of epochs, a memoryerror suddenly occurs with top error as `operation 'simple_rnn_1/while ' has no attr named '_xlacompile '`.
this occured while extending the training epochs by executing `model.fit()` subsequently.
however, restarting the computer resolves the problem.
_the problem occurred only once so far._
the script doesn 't finish.
i discovered that it halts after tf_closesession and even keyboardinterrupt can 't stop the script.
i also discovered that it exits normally if i pass `shared_name=""`.
so it looks like that this place phofurl contains the bug.
possible deadlock or session can wait for iterator to free resources.
i also can reproduce the problem with macos without cuda.
distribute strategy cannot properly handle dict/tuple type inputs in while there is no problem in non-distribute scenario.
what the interesting thing is that in tf2.0-alpha, the bug existed already, but later in the problem seems to be solved.
in that version, both scenarios works good with dict type inputs.
but i dont know why this bug appears again beta version.
i thought this problem is caused when distribute strategy trying to slice the inputs equally to all replica.
maybe the input parse method distribute strategy is not fully tested.
but since there no public change log for tf-nightly.
so i myself cannot dig this anymore without help of tf team members.
phofcode non-distribute scenario: phofcode distribute scenario: phofcode still not working even if i change dict to tuple: phofcode again, scenarios described above working good and again there no public change log for tf-nightly so i cannot dig this any deeper alone.
with use_tpu set to true, and loggingtensorhook is used by uncommenting the commented part (see the code below), training on gcp with tpu fails with 'marked as not fetchable ' exception.
adam and adagrad, both gives different losses, when initialized once (globally) and initialized every time train function is called.
running the tutorial step fails with the cudnn error: phofcode
`setshapefn` doesn't work when called for `register_op` for the custom operators.
whenever it is called by tf is gets `nullptr` instead valid value of the `inferencecontext` argument.
i write a custom loss function (dice coefficient) with following code: phofcode when i run code like this: phofcode i got the following error python traceback (most recent call last): file line 84, in <module> epochs=50) file line 21, in train callbacks=callbacks) file line 643, in fit file line 681, in fit 294, model_iteration batch_outs = f(actual_inputs) 813, execution_function return [out.numpy() for out 416, __call__ self._initialize(args, kwds, 359, _initialize *args,
i run the following snippet of code in eager execution: phofcode however, the call to gives me the following error: phofcode also, i am not able to find any documentation on `deferredtensor`s whatsoever.
can anyone link me to some?
it seems setting `allow_growth` to true takes much more vram than needed.
a simple classification inception_v3 network reports on nvidia-smi using 3705mib whereas if i set a to for example 0.02, there is not performance impact when serving and it takes only 600mib of vram.
going below 0.015 make it crash (as it obviously don't have enough vram to run).
it throws this error i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2 warning: logging before flag parsing goes to stderr.
w0611 23064 ag_logging.py:145] entity <bound method fe.call of <__main__.fe object at could not be transformed and will be executed as-is.
please report this to the autograph team.
when filing the bug, set the verbosity to 10 (on linux, `export autograph_verbosity=10`) and attach the full output.
cause: converting <bound method fe.call of <__main__.fe object at valueerror: unable locate source code of <bound method fe.call of <__main__.fe object at note that functions defined in certain environments, like interactive python shell do not expose their source code.
if that is case, you should define them in a .py source file.
if you are certain code is graph-compatible, wrap call using original error: could not get source code w0611 23064 ag_logging.py:145] entity <bound method lp.call <__main__.lp object at could be transformed and will be executed as-is.
please report this autograph team.
when filing bug, set verbosity 10 (on linux, `export autograph_verbosity=10`) and attach full output.
cause: converting lp.call <__main__.lp valueerror: unable locate code lp.call <__main__.lp note that functions defined in certain environments, like interactive python shell do expose their code.
if is case, you should define them in a .py file.
if you are certain is graph-compatible, wrap call using original error: could get w0611 23064 ag_logging.py:145] entity dc.call <__main__.dc transformed will executed as-is.
when filing bug, set verbosity 10 (on linux, `export autograph_verbosity=10`) attach full output.
cause: converting dc.call <__main__.dc valueerror: unable locate dc.call <__main__.dc note functions defined environments, like interactive python shell do expose their code.
case, should define them a .py file.
are graph-compatible, wrap call using original error: get w0611 23064 ag_logging.py:145] entity grl.call <__main__.grl transformed will executed as-is.
when filing bug, set verbosity 10 (on linux, `export autograph_verbosity=10`) attach full output.
cause: converting grl.call <__main__.grl valueerror: unable locate grl.call <__main__.grl note functions defined environments, like interactive python shell do expose their code.
case, should define them a .py file.
are graph-compatible, wrap call using original error: get
when run with more then one worker it fails: phofcode the negative value in check seems to depend only on `drop_remainder` argument to `padded_batch` method and not on: `num_inputs`, `batch_size`, length of dataset, `epochs`.
it equals to `-19` when `drop_remainder=false` and to `-16` when `drop_remainder=true`.
when running `fit_generator` on the main thread (i.e.
with and `workers=0`), `on_epoch_end` doesn't get triggered
`tensorboard --logdir "s3://[bucket]" --inspect` error log: `no event files found within logdir s3://[bucket]` i the operation failed and will be automatically retried in seconds (attempt 1 out of 10), caused by: failed precondition: not a directory`
i wrote a simple demo using tflite opengles delegate to run deeplab models from model zoo phofhyperlink .
i have tried your hosted model phofhyperlink , it works perfect on my device on cpu and opengles delegate.
however, when i tried the deeplab mode with xception65 phofhyperlink , the tflite perform differently on cpu and opengles delegate.
my input layer is sub_7, output layer is resizebilinear_3.
here is my result: test image: two_human phofimage result from cpu (correct): hp_nonflatten_cpu phofimage result from opengles delegate: hp_flatten2_gpu phofimage i believed that this issue is related to the space_to_batch_nd) that opengles not supporting thus fallback to cpu.
another issue phofhyperlink of mine described more detail.
flatten the unsupported ops using graph_transforms also failed.
it gives me the same inaccurate result or shows message like: `info: initialized tensorflow lite runtime.
info: created tensorflow lite delegate for gpu.
error: tflitegpudelegate prepare: program not properly linked: l0005 the number of compute uniform components (1261) greater than maximum number allowed (1024).
error: node number 199 (tflitegpudelegate) failed to prepare.
error: node number 199 (tflitegpudelegate) failed prepare.
when verbose=0, it should be silent, but it prints out multiple lines during validation.
it 's same for verbose=2.
i have converted the model to tflite and performed post training quantization in two virtual environments - one with (following the instructions from here: phofurl and one with tensorflow==1.10.0.
during inference, i have observed that the model converted with the latest tensorflow version is ~2x slower
when training an estimator which is got from a tf.keras.model instance, the method fails to log anything on the stdout.
phofcode however, if set the above flag, i can loss being logged (similar to that of api v1) phofcode
passing data with variable batch sizes to a training graph (as created by `tf.function`) causes the graph execution to be significantly slower than just executing the training in eager mode.
it's also significantly slower than executing the same inputs with graph mode in tf1.x while passing data with variable batch sizes is uncommon on most dl tasks, it is required for tasks on geometric learning.
for example, if your data is graphs, even if you fix the same number of graphs per batch, you can still get a varying number of nodes or edges.
i am getting two different variable names from keras layers when variables are built.
if i create a layer and call it on some input, everything works as expected.
however, if i create a layer and call the variable names are different.
tf addons is failing to link to the tensorflow core framework for our python 2 build: phofcode strangely this is only affecting our python2 builds.
see the build logs in phofurl
when calling `model.fit(dataset, epochs=2)` with a finite shuffled dataset, the model is trained on the same dataset order at each epoch.
when creating a model with sgd optimizer in eager mode and setting its `run_eagerly` attribute to true when i fit the model using some tf.dataset (created using phofhyperlink if that matters) as an input, i get the following error: phofcode
the mae and the mse should be correlated but the mse value used in the metric is not correlated see this minimal log for instance phofhyperlink
-using tf 2.0.0b-gpu on google colab.
while using the subclassing api for a subclassed layer and model, i was unable to use the model.save_model() function for h5 or hdf5 file types, but i could successfully save and load the model if it was saved as h5py file type.
in the toy example being used it worked correctly, although this may not be case.
note that get_config method was implemented in custom layer and custom model.
i was using the code below with 1.12, 1.13.1 and tf2.0 alpha.
but it fails to run in the latest tf2.0 beta.
as you can see there is nothing fancy going on in the code.
this is the block of code that produces this error phofcode strangely shapes of y_pool, y_1 are correctly inferred , complete code to reproduce issue available below phofcode
there is a mismatch in the name of and the name.
as an example tf-addons uses this to link phofhyperlink with tensorflow core.
- reference version: '1.10.0 ')` we are experiencing the issue on our models, that used to be trained using tensorflow 1.10, where there was no issue, but since we upgraded to 1.13, it appeared.
i have constructed an artificial, as simple as possible example, showcasing the issue.
the example in the attached zip file is using `imports85` data.
the "true" label is `price < price_cutoff`, with `price_cutoff` set so that the resulting label mean is `0.0146`, making it significantly unbalanced.
the ftrl optimizer in example code has bizarre coefficients set to demonstrate issue more graphically.
in our models we have them in reasonable range and still get wrong behavior.
if model is trained and evaluated using * 1.10 * , results (given all constants as set in code) are following: phofcode now, results above are pretty bad, but it 's due to really small dataset, used train model, but it 's not significant from standpoint of showcasing wrong behavior: our models, predictions, done with 1.10-trained model are pretty on-point.
when model trained and evaluated using * 1.13 * , model with optimizer applied starts show unreasonably high predictions: phofcode these results above consistent with what we see our models, where predictions became overwhelmingly positive once 1.13 was used for training (since we do use optimizers).
this does not seem be an issue with ftrl optimizer itself, since have tried several of them, all showing significant skewing of predicted results towards one or other end, if label dataset not balanced.
the example code should allow easy reproduction of issue.
zip file also contains two requirements files: `requirements_1.10.txt` and `requirements_1.13.txt` streamline setting up virtual environments test issue.
the documentation of tf.scatter_add phofhyperlink states that it requires the following: phofcode however, no exception is thrown when i run the code below.
in this code, the terms in the condition above have below values.
phofcode this makes it harder to understand behavior of function phofcode in case phofcode is a matrix.
specifically, what is difference between and when is a matrix.
i 'm trying to train my own deeplab model using this code phofhyperlink and convert it to tflite.
my target is to get a model similar to this phofhyperlink however, the model is obtained contains operations like: image phofimage spacetobatchnd and batchtospacend operations are not supported by tflite + opengles backend, they reduced the model 's performance on my device.
in your hosted deeplab model, those three ops are replaced by depthwise_conv_2d v2, which has options set dilation factor.
this would be the best solution for me but i 'm not sure how convert into a singe depthwise_conv_2d v2(dilation=2).
fyi, i have tried the graph_transforms tool under flatten atrous conv.
it upsampled kernels instead of space_to_batch + batch_to_space.
but this transform leads much more computations that i cannot afford.
however, what is observed in tensorboard is: - training loss behaves as expected - validation loss is different in the beginning, slowly converging towards the constant value of the training loss - increasing the learn rate seems to reduce this effect significantly.
in plots below all is same apart from learn rates which are 0.001 and 0.1 my question is if this a bug or this behavior expected and if so what underlying mechanism driving this?
lear_rate = 0.0 image phofimage learn_rate = 0.001 image phofimage learn_rate = 0.1 image phofimage
i have a fairly large, complicated estimator-based model that i want to train using a tesla p100.
previously, performance has been okay: phofcode but starting from tf 1.11 and up (as of writing newest is 1.13.1), performance has been much worse: phofcode using `tf.train.profilerhook`, i have generated the following performance profile for tensorflow 1.13.1: profile phofimage .
the last part of the profile is several applications of `applyadam` and the operations they depend on (reshapes, sums, mul, etc).
it seems that these adam applications and intermediate operations are completely serial with no parallelism.
i would imagine it to be as parallel as the model itself is (i.e.
a model with many sequential dependencies would have many sequential dependencies when computing gradients).
unfortunately, as `tf.train.profilerhook` is a fairly new addition have no execution profiles for tensorflow versions older than 1.13.1. there are few differences in optimizer error/warnings that might explain why this difference in training speed happens: - arithmeticoptimizer fails in 1.11 and up phofhyperlink .
the warning disappears if use nightly tensorflow docker images, but model training still slow.
a similar warning logged in 1.10, but with slightly different wording.
- dependency optimizer fails 1.11 up, but not 1.10: phofcode this issue phofhyperlink mentions slowdown caused by additional graph optimization 1.9. do not think that this case here, as it steps of itself slow.
when trying to use a custom * layer * into a new custom * model * , the model 's call method doesn 't work when i am initializing the custom layer in the model 's constructor but when instantiating this layer directly in the call method it works
the following test case fails.
phofcode if the input batch is 2: phofcode however, the test case passes if the batch dimensions are identical.
i expect to do a forward pass with a model with a bachnormalization layer in training mode, when using the but i can't, because it reises the following exception: > runtimeerror: `add_update` was called in a cross-replica context.
if you require this feature, please file an issue.
why it is not expected?
i was trying to study the behavior of tf.control_dependencies when training resnet50 on distributed cpu, with the benchmark script ( phofurl i have modified this script to load the same dataset on each run, and removed the random params from model (for predictable repro).
i have written a dummy custom c++ op where i 'm simply printing input tensor and returning.
i have also modified benchmark_cnn.py in above repo to call my custom op, instead of hvd.allreduce.
have also added control dependency between layers to ensure that my custom op gets called one layer after another.
following are code changes for this: phofcode and custom_op_cpp() function is defined as follows: phofcode custom c++ op is defined as: phofcode this works as expected, see same gradients for each run (1 iteration), since i 'm loading same dataset each time.
now, if reverse control dependencies from benchmark script as follows: `for i in reversed(range(0, len(grads), 1)):` then see that gradients coming into dummy op are different for some of layers, and they are random from run run.
however, if add a `sleep(4)` in my dummy op 's compute function, then this issue is no longer seen.
hence, i 'm suspecting that there may be a race condition, wherein dummy is getting invoked even before gradients are properly updated in backprop phase.
i 'm trying to run crossshardoptimizer with tf.optimizers.adam, however, tf.optimizer.adam is updated to v2 (with no global_step_parameter), and crossshardoptimizer is still in version 1 and still have that global_step parameter.
so, crossshardoptimizer is failing badly.
timedistributed wrapper around depthwiseconv2d fails with attributeerror: 'tuple ' object has no attribute 'dims '
i am trying to load a model (hdf5) which has a keras custom layer.
i also see the same error when creating a keras model from scratch.
is there a modification needed for custom layer?
however, the script fails with the following error: traceback (most recent call last): file line 558, in make_tensor_proto str_values = [compat.as_bytes(x) for x in proto_values] file line 558, in <listcomp> str_values = [compat.as_bytes(x) for x in proto_values] file line 61, as_bytes (bytes_or_text,)) typeerror: expected binary or unicode string, got 1 during handling of the above exception, another exception occurred: traceback (most recent call last): file "try.py", line 82, <module> out = netvladlayer( num_clusters=16 )(input_img) 538, __call__ 1603, _maybe_build self.build(input_shapes) "try.py", 21, build trainable=true ) 349, add_weight aggregation=aggregation) 607,
i want to use to check whether my code is right by step by step debugging while inference.
however, when i add like tutorial phofhyperlink , it occurs this error: unicodedecodeerror traceback (most recent call last) in <module>() 20 convert_start = time.time() 21 # hyps, src_frames, en_frames, scores = 'src_frames ', 'encoder_frames ', 'scores '], wav=read_data) ---> 22 hyps, scores = 'scores '], wav=read_data) 23 convert_end = time.time() 24 diff convert_end - convert_start in run(self, fetch_keys,
when using tf.keras models and layers to build a simple lstm and train on the penn treebank dataset a long list of errors are thrown of the form: w op_requires failed at variable_ops.cc:104 : already exists: resource however, when just importing keras and building the same lstm, no errors occur.
memory leak when model has flatten or bn layer.
memory usage keep increasing and never down after gc collection.
when we define multiple methods for a class and only decorate one of them with `@tf.function`, the nested methods are not automatically transformed and some errors raise.
in rnns, the dropout masks should be reset after every call.
however, in training mode (where the dropouts are activated) gru and lstm implementation in tensorflow 2.0 seems to be re-using the same dropout masks, leading to deterministic behavior.
simple rnn seems to be doing the right thing, re-sampling dropout masks after each call.
i have noticed that mixing-and-matching keras and tensorflow.keras imports can cause some issues.
i am therefore in the process of changing all keras imports in my projects to tensorflow.keras imports.
i have now stumbled on the following problem: the function `load_weights` for a keras model does support the argument `skip_mismatch` in keras, but not in tensorflow.keras.
is this feature the making?
i have an `gcp instance` with t4 gpu with same `tensorflow` `keras` `cuda` version as `gcolab`.
however, for the same piece of code, my gcp instance is more than 3 times slower than `gcolab`.
can anyone please give any clue that what should i do to improve the performance of my gcp instance.
#### log on my gcp instance phofcode #### log on gcolab phofcode
i am trying to run the faster rcnn inception v2 model in a docker container.
i follow the instructions from phofurl and in the past i was able to run training on their dataset (not inside a docker container).
now, when i try to run training, i get a "killed" message after "recording summary at step 0".
the proccess is very demanding in terms of memory and reaches over 19 gb just before it stops.
when running with xla on, the code given below fails with the following exception: i cpu frequency: hz i xla service 0x4df19b0 executing computations on platform host.
devices: i streamexecutor device (0): <undefined>, <undefined> i xla service executing computations on platform cuda.
warning:tensorflow:from colocate_with (from is deprecated and will be removed in a future version.
instructions for updating: colocations handled automatically by placer.
e internal: ret_check failure shapeutil::e inst->shape())
except error when run data type mismatch at component 0: expected int32 but got variant.
t [node: iteratorfromstringhandle = output_types=[dt_int32], phofhyperlink ]] <dtype: 'int32 '>
model saved as tf.keras .hdf5 converted to tensorflow model using and when using freeze_graph to get a single .pb file running into error
using together with keras to train models as described in phofurl results in gpu out of memory errors appearing after several epochs of training.
we excluded our custom written code as the source of the memory leaks and made sure that the model actually fits into memory with enough headroom.
it seams that either `tf.data` or `tf.keras.metrics` have a memory leak that starts showing up after several epochs of training and evaluation.
i created a model phofhyperlink with only tf.keras functional api.
i can load parameters from checkpoint phofhyperlink (download password: bpy9) and inference with the model correctly.
i convert the checkpoint to hdf5 model (graph with weights) with this script phofhyperlink .
when i load from the hdf5 file phofhyperlink (download password: w2k6) the code phofcode get error messsage that > successfully opened dynamic library libcuda.so.1 e failed call to cuinit: cuda_error_no_device: no cuda-capable device is detected retrieving cuda diagnostic information for host: xieyi-desktop hostname: xieyi-desktop libcuda reported version is: kernel reported version is: kernel version seems to match dso: cpu frequency: hz xla service executing computations on platform host.
devices: streamexecutor device (0): <undefined>, <undefined> traceback (most recent call last): file "landmarker.py", line 140, in <module> landmarker = landmarker(); file "landmarker.py", line 18, in __init__ self.model = file line 146, in load_model return custom_objects, compile) file line 215, in load_model_from_hdf5 model.layers) 749, layer, weight_values, original_keras_version, original_backend) 374, weights = 350, convert_nested_model 374, weights = 350, convert_nested_model 374, weights 350, convert_nested_model 374, weights 350, convert_nested_model 362, 455, if != weights[0].shape: indexerror: list index out of range it is worth noting that serialized model is 92 mb while checkpoint is over 500 mb.
`dict` objects wrapped around `_dictwrapper` by `autotrackable` are not serializable by pickle.
when working with one hot encoding,
some of the gpu supported tflite ops, does not run in gpu properly.
on cpu it behaves properly and each time with a different combination even with supported ops, the behavior of the model changes and even not able to benchmark it to find the issues.
moreover, fall back mechanism is also not followed, if it is not running in gpu.
model.summary() prints 'multiple ' as layer output shapes
phofurl doesn 't implement variables() method (because it doesn 't call base class `__init__` nor override it), so it fails when used within keras model training with the following stack trace on model.fit_generator call: phofcode
a `tf.data.dataset` created using `from_generator()` is consumed and not recreated/repeated even when explicitly invoking the `repeat()` method.
exception raises when trying to feed sparse/ragged tensors to keras model.fit().
but that is an ordinary pipeline for estimators.
besides, method mentioned in error (`self._add_inputs`) does not exist in tf source code.
i'm running some experiments using tensorflow 2.0 nightly.
i decorated the train step with `@tf.function`.
in the meantime i'm modifying the file involved in the training.
after some time i get a random error in a function invocation (inside function decorated with `tf.function`.
if i do not modify any file error does not happen.
i guess it's something related to implementation of `@tf.function`, probably `tf.function` creates some temp file and updates them.
the file update however is not managed well since modifying files training should not be affected.
the random seed set via is not set in the context in which the functions passed to `tf.data.dataset#map` are invoked.
even for the single thread case.
installation of keras from source fails by doing the following.
running the commands as per the keras installation instructions in a virtual environment.
sudo python setup.py install ... file line 31, in runtimeerror: python version >= 3.5 required.
freeze phofhyperlink from this model zoo phofhyperlink using: phofcode resulting `.pb` is 157mb.
convert `.pb` to `.tflite` using `tflite_convert`.
just 1mb smaller than the `.pb`.
i implemented the custom metric shown in this page phofurl i think it is full of bugs, it has some comments saying (#todo: fix this).
any way, here what 's particularly wrong about it.
the accuracy of the nn approaches 99%, yet, this metric says: binary_true_positives: (as shown on the website too).
if number of samples in mnist is 50,000, then at least 45k of them should be true positives.
i messed with it once and i got 49k true positive (which makes total sense).
then reran it and returned to 8k.
i 'm trying to run a c++ demo of tflite+opengles on my aarch64 android 8.1 board.
i have tried to build benchmark_model tool with bazel, it ran the phofhyperlink model successfully on my device.
now i want to integrate a simple demo of tflite (similar to benchmark) my codes, which is built by cmake.
i spent some time extract all the static libs of tensorflowlite from bazle-out folder and linked them in my cmake.
i built the code successfully with ndk standalone toolchain r17c.
but when ran this new demo on device it shows me errors like: `info: created tensorflow lite delegate for gpu.
apply delegate for gpu next operations are not supported by gpu delegate: average_pool_2d: expected 1 input tensor(s), but node has 0 runtime input(s).
conv_2d: expected 1 input tensor(s), but node has 0 runtime input(s).
conv_2d: expected 1 input tensor(s), but node has 2 runtime input(s).
conv_2d: expected 1 input tensor(s), but node has 3 runtime input(s).
depthwise_conv_2d: 2 depthwise_conv_2d: 3 resize_bilinear: 2 first operations will run on the gpu, and remaining 69 cpu.
tflitegpudelegate prepare: readvalue: value is a constant tensor: 183 node number 70 (tflitegpudelegate) failed prepare.
delegate setting done node number 70 (tflitegpudelegate) failed prepare.
` the model here is still which have been proved working device.
also have tried build new demo code in bazel, which perform correctly.
when running a `tf.function` on 3d inputs (a batch of sequence), i found that the execution is slower on unseen sequence length even if a compatible `input_signature` is set.
on a large graph, this results in a low gpu usage and growing cpu memory usage for several iterations until most sequence lengths are seen.
it is as if new graphs were compiled internally even though the function does not seem to be retraced.
this effect does not affect eager mode or v1 graph mode where the execution directly runs at its target speed and memory usage.
i want to create unet using the keras model subclassing api: the current code is: phofcode when i evaluate the model using an input and check the trainable variables they are empty: phofcode
the mobilenet v1 1.0 phofhyperlink model in the guide phofhyperlink contains a squeeze operation that isn't supported by gpu, but the mobilenet v1 1.0 phofhyperlink at tensorflow/models phofhyperlink does.
afaik, squeeze isn't a supported operation, but both of them contain at least one.
how come the operations are different even when the models are of same version?
is one in guide deliberately modified?
if so, would it be a better idea to have it noted in guide?
the page on tensor/models claims 569mil macs, but number of macs this modified 1.0 has is unclear.
what i've found is that one provided in guide contains 89 tensors but one tensorflow/models 88.
in the `stack` op, the allowed range for `axis` is `[ -(r+1),(r+1) )`.
however, if you take a strided slice over the result with `axis=-(r+1)` or `axis=r`, the arithmeticoptimizer will fail with a warning.
it also fails for scalars with any value in `axis`.
the results are still correct, but this disables arithmetic optimizer for some (all?)
see repro code for an example.
the output of the `tf.sigmoid` function seems abnormal when the input has nans.
shared_embeddings phofhyperlink not surport eager mode, so i call it with @tf.function, but still throw exception: valueerror: variable already exists, disallowed.
did you mean to set reuse=true or reuse=tf.auto_reuse in varscope?
find the reason is that the function will be traced twice after add line `df = the print will run twice.
first time stack: phofcode second time call stack: phofcode the only difference is before `_maybe_define_function, function.py:1596`.
the code in second time fails, because it is new obj , so there 's no cache in self._embedding_weights, then will run with no reuse: phofcode
when using `tf.function`, the cpu memory usage increase forever.
an unexpected error occurs when training an lstm with `sample_weight` and `batch_size > 1`.
the error does not occur if `batch_size = 1`, or if omitting `sample_weight`.
in 1.14.0rc0, the dataset passed to the `reduce_func` function of is a `datasetv2` instance instead of `datasetv1`.
currently, the `autograph.to_code` covert the query function in the following code piece phofcode to this: phofcode but note that in the converted code phofcode this is causing an undefined error: nameerror: name 'random_id ' is not defined reason i 'm calling to_code to this class method is because i used it in a tf.function so i think autograph is going to convert this
using `tf.data` as `validation_data` without defining `validation_steps` fails with `typeerror: 'datasetv1adapter ' object does not support indexing`.
using `tf.data` without `steps_per_epoch` works as expected when using it as training data instead.
i created a keras model that takes as input 2 feature columns named 'store ' and 'loc '.
converting it to an estimator and then training it throws an exception because it assumes the input names are 'input_1 ' and 'input_2 '.
when we are trying to run a tflite model with element-wise operations like add and sub (appended via custom code) on an android application (
in a deeprl setting, using a dqn implementation in tf2.
after a certain number of calls, the custom training loop with gradient tape is not able to compute gradient for the sparsematrices used in the model (weights inside the sparse matrice), gradient for biases is computed without any issue.
the model can still be called, weights are not zero.
the gradients in are not none, and seem ok. that is, a_values_grad and b_grad are not none (also none in _gradient_function) `(none, a_values_grad, none, b_grad)` but output of `imperative_grad` has none for weights sparsetensor.
it is worth noting that if i do call model before first training loop, gradients are ok. next loop they become none.
model fails to train, raising a `runtimeerror: replica-local variables may only be assigned in a replica context.` i was able to reproduce this issue just by using the official tutorial, so that 's the code given below rather than mine.
i have a keras model that has an embedding column as a feature.
i can train and save the model 's weights just fine.
making predictions immediately after training works too.
the problem is when i recreate the model and reload the weights.
making a prediction from that model gives a shape error.
if using a dictionary to pass input to a `keras.model` with named inputs, the `steps_per_epoch` argument appears to have no effect.
instead as many steps are performed as needed for a full epoch.
the aws s3 implementation can 't handle weird path
calling `model.predict(x, steps=n)` on a `tf.keras.model` instance with two inputs fails with many errors: 1. if the model is not compiled, i get a runtimeerror as follows: phofcode 2. if i do compile the model (even though this is not necessary, since `predict` should not compute any losses), i get a valueerror (see `ds1` below): phofcode 3. if i further provide a target in the dataset (see `ds2` below), the predict method works and produces an output of correct shape.
when i attempt to load my .tflite model on the android (after applying the gpudelegate), it fails saying "internal error" (see traceback below).
what does it mean for this error?
and what shall i do?
i have created a simple regression model and trained it using keras and also using a custom training loop.
what i noticed is that the model only converges when using the keras fit function.
if i use the custom training loop, which manually computes gradients and applies them via an optimizer, the model does not converge.
the same problem occurred not only on this very simple regression task but also on a model trained on utk faces data set for age regression.
when using to distribute train on 16 workers with 2 gpu each, my job always failed with os error or socket closed after running for several thousands of steps.
i also tried 8 workers and different batch size, the failure always reproduce.
files generated by `tf.data.dataset::cache` consume considerably more disk space than the original tfrecord files.
mnist from `tensorflow_datasets` uses 21mb split into 10 files.
`tf.data.dataset::cache` generates a single file with size 45mb.
is there a specific reason why `tf.data.dataset::cache` files use a lot more disk space and don 't split the files into chunks?
this might be acceptable for mnist size datasets but when using imagenet `tf.data.dataset::cache` will create a single cache file with well above 350gb vs 144gb of original tfrecords.
my custom conv2d layer shows the following error message.
phofcode i 'm not using any common ops (k.argmax, kround, etc.)
explicitly in phofcode what am i missing?
if you use python3 type annotation such as x:tf.tensor = tf.constant(0) (i aliased tf.tensor for various shape to keep my sanity for reinforcement learning problems) in a @tf.function and the function contains a for loop to be translated to tf.while_loop (that doesn 't even have to use the tensor that 's annotated), the code will fail as if you did not turn on eager execution.
the code snippets works fine on colab but gives the following error on windows: overflowerror: python int too large to convert to c long the above exception was the direct cause of the following exception: traceback (most recent call last): file line 3296, in run_code exec(code_obj, self.user_global_ns, self.user_ns) file line 44, in <module> file line 36, in demo file line 660, in __call__ outputs = self.call(inputs, *args,
the following code causes a segfault: phofcode
generating several models with no input shape specified results in normal memory occupancy: phofcode no_shape phofimage this is the behavior expected when the input shape is specified.
however, when multiple models are generated within the same program life cycle, the specification of an input shape seems to produce a memory leak.
if input shape is specified when models are created, they pile up in memory, without being destroyed.
also execution time seems to increase quite a lot.
i have a dataset containing 592 examples, but `tf.dataset.map` only processes one of those, as evidenced by a global counter, which i increment in the function given to `map()`.
why is it not processing all examples in the dataset?
i run in eager execution, but code inside `.map()` is not executed eagerly.
when calling `tf.make_ndarray()` on a tensor (`<class dtype `uint8`, shape `(?, 1000, 1500)`), i get the following error: `file line 563, in makendarray shape = [d.size for d in tensor.tensor_shape.dim] attributeerror: 'tensor ' object has no attribute 'tensor_shape '` i call the function inside a function given to `tf.dataset.map()`, which is not executing eagerly.
however, the error also occurs when using eager execution (as tested by using a for-loop on the dataset instead of `.map()`).
when using valgrind massif on label_image tf lite example, it reports 400 mb of virtual memory, even though the model's size is only 14 mb and i do not understand where this overhead is coming from.
here is the profiling information at peak: 100.00% (page allocation syscalls) mmap/mremap/brk, --alloc-fns, etc.
->89.83% 0x6b8e6b9: mmap (mmap.c:34) | ->48.74% 0x6b0a3cf: new_heap (arena.c:438) | | ->48.74% 0x6b0ac1f: arena_get2.part.3 (arena.c:646) | ->48.74% malloc (malloc.c:2911) ->48.74% operator new(unsigned long) (in ->32.49% 0x4bdd65: ???
(in ->32.49% 0x5bbe6b8: start_thread (pthread_create.c:333) clone (clone.s:109)
i am trying to train a face detector by using the object detection api.
specifically, i am using 4000 images from the wider faces data set for training/validation, and using for fine-tuning.
i split the train set images into 5 shards, and in the .config file, i changed `min_dimension` and `max_dimension` to 300 and 512, respectively, in hopes of faster training.
after kicked off training, noticed that gpu memory usage was about 95%.
gpu volatile-utilization cpu utilization on other hand were behaving oddly.
specifically, during very first ~3k steps, gpu volatile-utilization was between 60% 95%, cpu utilization was only around 8%.
global_step/sec essentially plateaued around 8 steps/sec within first 3k steps.
from ~3k steps onward, cpu utilization increased to 80-100% whereas gpu volatile utilization oscillated between 0% to 30%
the "predict" signature definition is lost when running the `saved_model_cli convert` command against a resnet model.
multiplying two tf.float64s together is giving me a substantial error over multiplying two np.float64s together.
any attempt to run one of the tf lite utilities (e.g.
label_image, benchmark_model) or use the interpreter via an import in python will generate error messages at time of loading a flatbuffers tflite model file.
when i try to save my model using model.save() where model is a tf.keras.model instance, it throws a _typeerror: ( 'not json serializable: ', <tf.variable 'variable:0 ' shape=() dtype=float32>)_ .
i am using a in loss_weights in model.compile.
optimizer: tf.keras.optimizers.adam interestingly, when i try to save my model weights only using model.save_weights where model is a tf.keras.model instance, it works fine, no error.
`tf.data.dataset::cache` doesn 't cleanup unused `lock` and `tmp` files if the iterator doesn 't complete a pass over the whole dataset or if the process exits before cache has been completed.
this means subsequent runs of the same code with an incomplete cache will fail with: phofcode
using keras validation data and will fail with ` 'batchdataset ' object is not subscriptable` in tf 2.0 nightly.
padded_shape[0]=68 is not divisible by block_shape[0]=6 [op:spacetobatchnd]
error message is as follows: linking of rule failed (exit 1) undefined symbols for architecture x86_64: referenced from: const in tfcompile_test.o referenced from: const in tfcompile_test.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) target failed to build` the problem seems to stem from constructing or matmulandaddcomp objects in `tfcompile_test.cc`.
these two classes are graphs compiled by xla.
disabling the relevant tests in `tfcompile_test.cc` makes the issue go away.
alternatively, .../aot/tests/build, removing tfcompile_flags from and setting enable_xla_hlo_profiling to false makes the issue go away.
this problem seems happen only macos.
i could run the same command without issues ubuntu 16.04. this problem seems be related linking of dependencies.
i could successfully run individual `tf_library`s and get compiled graph classes bazel_genfiles/, and both undefined symbols are "extern c" variables found graphs ' header files, and it seems root definition is not found somehow.
as a result, graph objects cannot be constructed.
using `tf.data.dataset::cache` and will fail with `cache should only be read after it has been completed.
when gets a dtype of uint32 or uint64, it fails with error: `unimplemented: copyslicetoelement unhandled data type: 22` (this is uint32) this is an issue for using tensor_slice_dataset_op, which can calls this function and should also support these dtypes.
tensorflow 1.14 changes the relative call order of building the model and the set_model callback in the tf.keras fit_generator path.
(as of commit cd701ec in r1.14 branch).
the keras/engine/training.py `_make_train_function` adds optimizer update ops / aka, backward prop phase, and fills out model 's graph.
callbacks that need full graph visibility need their `set_model` function called after full graph is created.
the order of operations are as follows: tf.keras fit(): 1.
`_make_train_function` keras_team keras fit(): 1.
`set_model` keras_team keras fit_generator(): 1.
2. the tf.keras fit_generator() path stands out as being different from rest.
commit phofurl fixed this for non-eager mode case and added a test case to help prevent future regression.
commit phofurl regressed this order, and also removed test case that was intended to catch regressions.
another side effect of current code is that is called from `model.train_on_batch` so in fit_generator path this is now being called on every iteration.
while majority guarded by a check that won 't do actual work, there are somethings in method will run waste cycles on every iteration.
when i want to have a look at the weights of conv2d filters in tensorboard, only their biases get logged (see attached image).
i looked for the corresponding source code and found the following snippet: phofurl the problem seems to be that conv2d weights have a 4d shape [h_kernel, w_kernel, c_in, c_out], which is not intended as convolutional layers case in the above code.
running the tflite demo phofhyperlink , average inference time for 1 thread is
progress-bar is displayed regardless of `verbose=0`
when i use tf.gradienttape to compute gradients, it will use all gpu memory even though i use gpuoption in session.
during the converting the quantize aware trained mobilentnetv2 model from tf.keras, it will raise the follow error massage phofcode
tensorflow.keras .fit training time is way faster than tensorflow gradient tape
setting the `steps_per_epoch` parameter in `model.fit` (`tf.keras`) to for example 10 should only perform 10 updates per epoch.
when passing numpy arrays as inputs to `model.fit` this works as expected, but when using a custom instance `steps_per_epoch` does not have any effect.
using `defun` in eager mode, this very simple function seems to cause havoc.
in particular, the first run takes a * long * time and a * lot * of memory, both scaling seemingly exponentially with the `n_iter` parameter below.
phofcode replacing `x = tf.random_uniform((d,))` with `x = tf.ones((d,))` eliminates the problem, as does replacing `x = x + x` with `x = 2*x`.
in graph mode the problem does not occur: phofcode
i am following this tutorial: phofurl and using a model i created in tfv2.
i am able to create the saved_model in my colab using the following code: phofcode this created a folder with the pb file and assets and variables folder.
i then upload that to my bucket in the google cloud.
then ran command to predict: `gcloud ai-platform local predict --model-dir=$model_dir --text-instances ci.txt --framework tensorflow` the ci.txt is a comma separated list of my input numbers.
get following error that shows my values: > traceback (most recent call last): > file line 184, in <module> > main() > file line 179, main file line 102, local_predict predictions = model.predict(instances, file line 268, predict preprocessed, stats=stats,
random output should be different on each call.
that is true for graph mode, but not for eager one.
applying to a dataset that just contains one tensor (in contrast to a tupled pair of tensors) leads to an incorrect error (from the example below): valueerror: tensor 's shape (2,) is not compatible with supplied shape (none, 2) the supplied shape seems to be incorrectly derived.
this works without problem when the dataset contains two tensors (see example.)
maybe related: #17439. i noticed some slow variable creations.
it happens when the initial value is a tensor with complex dependencies.
after some digging, i found that it may be caused by the algorithm used in the cycle detection code: phofurl
when i attempt to load my .tflite model on the android (after applying the gpudelegate as described here phofhyperlink ), it fails saying that 'mean' is an unsupported operation (see traceback below)
much higher (mse) loss with tensorflow 2.0.0-alpha, running 500 epochs of 'sgd' using model.fit() of a 1-layer tf.keras.sequential model, implementing a simple linear regression (6 data points), when running the same code first with tensorflow 1.13.1 (performance well/as expected) and then with 2.0.0-alpha.
results running on google colabs shown below (cpu only), similar performance difference on my local machine, on which i used the specified python version (windows 10, 64-bit, i5-7200u cpu) - phofurl 1.13.1 ... epoch 6/6 - 0s 238us/sample - loss: 2.0.0-alpha ... epoch 6/6 - 0s 542us/sample loss: 0.2409 as you can see, the (mse) loss is several orders of magnitudes worse for 2.0.0-alpha.
build gpudelegate failed on android p java demo
use the following command to compile (without running of `./configure`): phofcode use the following command for benchmarking: phofcode | tf version | 1-gpu | 2-gpu | 4-gpu 8-gpu |:-:|:-:|:-:|:-:|:-:|
i run the code on my local machine : the tf 2.0 alpha train your first neural network: basic classification.
there is all right with the code before i call : model.fit(train_images, train_labels, epochs=5).
the errors are: valueerror traceback (most recent call last) in <module> 1 # ----> 2 model.fit(x_train, y_train, batch_size=50, epochs=50, validation_split=0.1, verbose=1) in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
when i try to train_on_batch, tf 2.0 allcaotes memory endless and finally crashes.
using can be temporary solution, but this trick doesn work with lateset build
when running provided code it fails only when fit_generator executed in graph mode.
in other cases fit() and fit_generator() work well.
python typeerror traceback (most recent call last) in <module>() 61 # fails 62 model.run_eagerly = false ---> 63 in fit_generator(self, generator, steps_per_epoch, epochs, verbose, callbacks, validation_data, validation_steps, validation_freq, class_weight, max_queue_size, workers, use_multiprocessing, shuffle, initial_epoch) 1513 shuffle=shuffle, 1514 -> 1515 1516 1517 def evaluate_generator(self, in model_iteration(model, data, steps_per_epoch, epochs, verbose, callbacks, validation_data, validation_steps, validation_freq, class_weight, max_queue_size, workers, use_multiprocessing, shuffle, initial_epoch, mode, batch_size, steps_name,
i run the webvision train code in tf 1.8.0 with horovod (nccl), in 4 (nodes) * 8 nvidia v100 gpu cluster, but the trainning job rang at the middle of training.
and one of the nodes processes info are phofcode ps-ef-info.txt phofhyperlink and i print `1965` process python call stack it shows thread file line 884, in _bootstrap self._bootstrap_inner() file line 916, in _bootstrap_inner self.run() file line 864, run
modifying the example code given here phofhyperlink to have `stateful=true` leads to the following error: traceback (most recent call last): file "tmp.py", line 6, in <module> y = layer(x) file line 701, in __call__ return super(rnn, self).__call__(inputs,
after getting tf.shape() on a tensor that 's on the gpu, the resulting tensor says it 's on the gpu.
calling tf.cast() has an error saying it 's on the cpu.
explicitly calling .gpu() makes tf.cast() work, even though .device tells me it 's gpu.
the tflite gpu delegate benchmark tool provides support for sub operator to run on the gpu of the mobile.
i have this bug but i don 't know how to fix this
since phofurl it is required that there not be tensor computations in a layer's `build` method.
we noticed this because our layer serialization failed phofhyperlink after this commit.
the fix was to move tensor computation into `call` method, though it was a silent fail and would have been very difficult to troubleshoot if it didn't fail on a nightly.
i 'm using tensorflow hub to restore a model from a savedmodel, i do expect the restore to work even if it executed inside a distribution strategy scope, but instead it raises an exception.
in tf 1.13.1, using a dataset api pipeline that parses a sequenceexample phofhyperlink with phofhyperlink exported as a savedmodel with `strip_default_attrs` set to `true` (which is the default behavior for estimators) fails with the following error: phofcode see the full stacktrace below.
when deeplab phofhyperlink is run on a sample image using gpu delegate, the result is significantly different to that generated using cpu.
the tflite model was converted using: phofcode and, here's the tflite model phofhyperlink used.
cpu gives the following (using random colours): phofimage gpu delegate gives the following (using random colours): phofimage basically, all pixels here are (wrongly) identified to be of same class (at index 0) because scores for class 0 are always highest.
similarly, if mobilenetv2_ade20k_train phofhyperlink is used, two also give very different results: cpu gives following (using random colours): phofimage gpu delegate gives following (using random colours): phofimage here's tflite model phofhyperlink used.
indeed, models use operations like `space_to_batch`, but as far as i know these operations should only affect speed performance.
during (see the tensor feeding a `relu` operator shows that its minimum value is 0 instead of a negative number.
this may lead to a quantized model that produces erroneous results; however, i currently cannot confirm if the said behavior is causing erroneous quantization.
different behavior while using tfbdg responding to catching outofrangeerror required for iteratively looping on dataset iterators from the tf.data api.
using tfdbg command 'run -t 100 ', we get execution as normally expected.
using tfbdg command 'run -f has_inf_or_nan ', we get a cascade of errors.
i 'm trying to use contrib/quantize module to perform quantize aware training and convert the trained model to quantize tflite model.
when run `converter.convert()`, the following error will be raised: phofcode when adding relu op after the bn, it will be converted without the error massage.
but in tensorboard graph, i cannot see any differences on fusedbatchnorm part with and without relu.
does not truncate the destination file before overwriting.
that means if the src file is shorter than the dest file, the resulting dest file contains mix of two.
`embedding_matrix[2]` is not equal to
can 't enter debugging mode with enable eager execution
i freeze a ckpt file into a pb file in python and want to load it in c++.
since the pb file includes tf.contrib.resampler, it fails loading the model saying resampler op is not registered.
i would like to load _resampler_ops.so generated by bazel to fix the bug ( i am not sure am i doing the right thing or not, if not, what should do to fix this bug?). ")
also tried error is same: load library fails.
then tried rebuild tensorflow using --config=monolithic and load error is: segmentation fault; core dumped.
tensorflow c++ code compiled using libtensorflow.so file is showing memory leaks using valgrind.
phofcode you can see there is bytes of memory leak occurred.
also tried tcmalloc and found the same issues: $$$ heapcheck=normal ./bin/main.out phofcode i compiled the tensorflow code and got the .so file using the following commands: $$ git clone phofurl $$ git checkout r1.12 $$ ./configure warning: an illegal reflective access operation has occurred warning: illegal reflective access by to field java.lang.string.value warning: please consider reporting this to maintainers of warning: use --illegal-access=warn to enable warnings of further illegal reflective access operations all illegal access operations will be denied in a future release --batch mode is deprecated.
please instead explicitly shut down your bazel server using command "bazel shutdown".
you have bazel 0.17.2 installed.
please specify location of python.
[default is /usr/bin/python]: found possible python library paths: please input desired python library path to use.
default do you wish build tensorflow with apache ignite support?
[y/n]: n no apache ignite support will be enabled for tensorflow.
do you wish build tensorflow with xla jit support?
[y/n]: n no xla jit support will be enabled for tensorflow.
do you wish build tensorflow with opencl sycl support?
[y/n]: n no opencl sycl support will be enabled for tensorflow.
do you wish build tensorflow with rocm support?
[y/n]: n no rocm support enabled for tensorflow.
cuda [y/n]: n cuda download a fresh release clang?
(experimental) [y/n]: n clang not downloaded.
mpi mpi specify optimization flags use during compilation when bazel option "--config=opt" specified [default -march=native]: would like interactively configure ./workspace android builds?
not configuring workspace android builds.
you can use any below by adding "--config=<>" your command.
--config=mkl # build mkl support.
--config=monolithic # config mostly static monolithic build.
--config=gdr # build gdr support.
--config=verbs # build libverbs support.
--config=ngraph build intel ngraph support.
adam optimizer does not update embeddings when they are initialized to zero
the tutorial *tf.distribute.strategy with training loops* fails on the call when i run it on colab, as does any other attempt on my part to use checkpoints with mirrored strategy in colab with custom loop.
the vm still has lots of disk memory so no problem on this part.
i also tried to make it save a mounted google drive with no more success.
i am trying to benchmark a custom tf lite model on android and ios devices with the gpu delegate option.
on the android device(google pixel 3), i am able to successfully benchmark the model using the tensorflow provided benchmark utility ( phofurl running same model on ios device (iphone x) without gpu delegate option works fine.
however when i try to run it with gpu delegate option i observe following error:
update: i tried the latest nightly building, still no luck and now more error info showed: phofcode
i recently had the requirement to code a slightly different version of the convolution layer.
the first choice for me was to build a custom layer using your article here phofhyperlink .
i coded a naive version of 2d convolution using a o(n4) code just for basic prototyping.
i used lot of low-level operations like tf.ones, tf.concat, tf.tile, tf.reduce_sum and matrix slicing.
to measure inference time i decided to call the object manually by supplying (256, 256, 3) image as input to the overridden call() method.
however, before calling included call at starting of code by mistake.
the code takes 50 seconds execute on gpu(i monitored gpu usage so know it is using gpu indeed).
the peculiar part is that when omit it seems run on cpu rather inefficiently, in about 980 seconds.
to have yardstick for cpu execution, re-wrote same o(n4) using numpy exclusively and it takes just 210 seconds.
also included custom layer as part tf.keras.model and simply printed model summary.
the issue in this scenario is that it seems execute entire call routine print summary which essentially means that takes 980 seconds just print summary!
if i want to specify, for example, a reduction method of the loss function, i will need to explicitly create an instance of and pass it to `model.compile()` instead of passing the keyword.
however, compiling a model with an instance of results in the following shape error when calling `model.fit()` afterwards: phofcode
traceback (most recent call last): file "<stdin>", line 6, in <module> file line 179, in sparse_image_warp grid_locations = image_width) file line 34, in _get_grid_locations y_range = np.linspace(0, image_height - 1, image_height) typeerror: unsupported operand type(s) for -: 'nonetype ' and 'int '
phofcode the code above is what i copy from tf docs phofhyperlink which will result an error like: phofcode at first i thought i had a wrong build of tensorflow without gpu support.
however, when i re-installed the whole env exactly as the guide in the official site.
and i found that if i uncomment mirror strategy part, code is working good phofcode and another found is that myself only have 2 gpus however, when tensorflow init, it prints "adding devices" 3 times which i thought should be 2: phofcode
dataset in tf2.0 lack of key properties and methods which already in tf1.13, for example: properties: output_shapes, output_types methods: make_one_shot_iterator
the output shape is not inferred correctly anymore for a keras conv1d with dilation_rate != 1 (it is ok when dilation_rate = 1).
shape inference used to work as expected in
running simple classification example with keras interface
upgrading from tensorflow 1.12.0 to 1.13.1 shows a large performance regression.
training goes from 2100 examples/s & 8.2 global steps/s to 860 examples/s & 3.4 global steps/s.
when using model.fit it throws an error: > cast string to float is not supported [op:cast] name: cast/
for some images, not for all 108, 56) gives an output size of 109 by 56
calling after `tf.executing_eagerly()` fails with: valueerror: must be called at program startup.
note that this happens * at * program startup (after runtime restart on colab).
calling by itself does * not * result in the exception.
not to confuse with issue #21893
if you use trtgraphconverterv2 to convert a function in a saved_model to use trt it does not preserve the output names in the signature_def of the saved model.
if the saved function (decorated with tf.function) returned a dict {'output_a': a, 'output_b': b} names 'output_a' and 'output_b' are in saved_model.
after conversion with trtgraphconverterv2 they are changed to default names 'output_0' and 'output_1'.
when using the `fit` method on a custom model (the model in the guide writing layers and models with tensorflow keras phofhyperlink ), a simple `meansquarederror` metric seems to be improperly computed.
when fitting, the metric is always greater than the loss, whereas loss is computed as mean squared error plus a custom error defined as a kl divergence in model.
i have created `.tflite` with single `conv_2d` op with bias tensor index `-1`(= optional).
when supplying bias tensor `-1`(for making bias optional), it raises runtimeerror when running it in python interpreter as shown the below(or seg fault/asan error in c++ interpreter) supplying zero-valued bias tensor(i.e.
use valid tensor id for bias) passes `allocatetensors` and `invoke` without any problem.
fyi, we cannot omit tensor(i.e, `len(inputs) = 2`) since in such case we 'll hit another assertion: phofurl
using tf.saved_model to save session does not save the state of the random number generator associated with the graph that the session executes.
sum is on the blacklist phofhyperlink for the auto_mixed_precision grappler pass.
unfortunately, sum is used in the gradient of tf.add phofhyperlink , if non-static shapes are used.
this greatly slows down resnet50 phofhyperlink , from 709 to 551 images/sec.
the sums are done in fp32, and relus and batchnorm gradients are fp32 as well.
using static shapes fixes this issue, but many users use dynamic shapes with tf.add.
sum was added to the blacklist in the justification is "the dice loss function used in u-net uses sums that overflow fp16"
we are using distributed tensorflow as described here with parameterserverstrategy: phofurl basically we are starting the tf server on every worker and then running train_and_evaluate on each worker.
the estimator function is serialized, sent to each worker and then executed to create the estimator, create the graph and start the training.
this works with standard estimator models but doesn 't when using keras models with model_to_estimator (doing this still seems advised way to do distributed learning with keras phofurl (we also tried new standalone mode without any success) some nodes are failing an io error when trying to save first checkpoint concurrently when creating estimator on each worker it calls model_to_estimator on each worker which calls _save_first_checkpoint l457 phofurl
when running "flaskapp.py", after loading the model and trying to classify an image using "predict", it fails with the error: > error while reading resource variable softmax/kernel from container: localhost.
this could mean that the variable was uninitialized.
not found: resource does not exist.
running the tflite demo phofhyperlink (the link is the head of master branch as of now) on , average inference time for 1 thread, _mobilenet v1 quant_, on cpu is
pixel values should be the same regardless if loading the image by pil or by tf
when using embedding layer inside a subclass model with variable length between batches, during training (model.fit), errors out as expected list of [batch_size, previous_batch_seq_len], received [batch_size, current_batch_seq_len].
looks like it is unable to backpropagate correctly to the embedding layer with variable length.
however there is no error when the embedding layer is set to trainable=false, or to use the embedding layer in a functional api.
using tf.py_function which has tf.string type input generates warning like this: > w0429 13252 backprop.py:820] the dtype of the watched tensor must be floating (e.g.
tf.float32), got tf.string this warning did not shown with 2.0.0-alpha0, but does.
using tf.io.decode_image() and tf.image.resize() in dataset.map() generates valueerror: 'images' contains no shape.
but using it from normal python code, it works without any problem.
using preserver_aspect_ratio flag generates deprecation warnings.
0429 23940 deprecation.py:323] from > to_float (from is deprecated and will be removed in a future version.
w0429 23940 deprecation.py:323] from > to_int32 (from is deprecated and will be removed in a future version.
after migrating to tf 2.0, when compiling a custom model i wrote i get an error `attributeerror: tensor.graph is meaningless when eager execution is enabled.` the model compiled as expected in tf 1.13
given a tensor x with shape (1, 1, 256), matmul gives slightly different output for matmul(x, w) and matmul(tf.tile(x, [1, 2, 1]), w)
i have created `.tflite` with single `add` op.
it has two inputs and one output.
when reading this `.tflite` with interpreter(e.g.
phofcode phofcode code using c++ interpreter also reports duplicated outputs(2 2), even though outout of add(builtin code 0) shows one output.
the tf.tuple can 't be indexed by tensor in graph mode.
when is set to `1` the `iterations` variable in nadam optimizer from always starts at `1` when the optimizer is executed; when is higher than `1` then `iterations` sometimes starts as `0`.
the higher the is set to the higher chance that `iterations` will start at `0` instead of at `1`.
(i know this because i `tf.print` 'd everything inside of nadam optimizer.)
this makes training results non-deterministic since nadam optimizer depends on current iteration number when calculating weight updates.
fft2d produces non-sensical results on complex64 datatype.
when passing multi-dimensional time input into a phased lstm cell, i am presented with an arithmetic error; phofcode this appears to be caused by the following line in `rnn_cell.py`, which seems to make the assumption that `time` has one dimension; phofcode
when i run the simple mnist script below (with the tf.summary.scalar line commented out) it runs fine.
when i try to log a scalar inside model.call() i get an error message that seems to indicate tf.summary.scalar is seeing the original tensor--somehow--as opposed to the numpy-summed result that i am passing to tf.summary.scalar.
when trying to train a model that has multiple input layers using keras (eg.
ctc) on a tpu, tensorflow throws an invalidargumenterror claiming that i didn 't feed a value for a placeholder tensor.
for the script below import tensorflow as tf import tensorflow.keras.layers as nn from import get_graph from import to_snake_case from unique_layer_name module = tf.keras.models.model # class module(tf.module): # def __init__(self, name=none,
it works fine when run this in one console phofcode and then the other phofcode if you change 200 to 20000, you will see errors on load phofcode phofcode
when `tf.keras.layers.lambda` is created without `mask` argument, it does not support masking ( phofurl however, when a mask is passed, it is silently ignored and `none` is returned as the output mask ( phofurl
we have an image classification model trained from scratch in frozen graph format and: 1.
.tflite model converted without post-training quantization works well on cpu and nnapi.
.tflite model converted with post-training quantization works well on cpu.
.tflite model converted with post-training quantization fails on nnapi with following error message: phofcode we share the same code across all cases.
tflite conversion from h5 file increases in size from 141kb to 508kb
when called repeatedly, compute_output_shape may return incorrect results due to a faulty caching implementation in keras.network
the `testconcataxistype` test in `concat_op_test` is failing on an assertion for s390x: phofcode
i get the error below when i try to import tensorflow on windows 10. also, i don 't know if it is related but i upgraded my gpu.
tf 2.0 was working fine when last tried 3 weeks ago with my old gpu.
is a new keras layer added in tf2.0a0.
this is the first layer for tf.keras.model that accepts dict of tensors as the input.
if is used as the first layer in a keras model created by subclass tf.keras.model, model.build(input_shape) will fail with any type of input_shape.
evaluating tf 2.0 keras model allocates twice as much memory as tf 1.x or cntk.
when i tried the following code from the sample: phofcode it failed with error: phofcode according to the change of numpy in phofurl the default value of allow_pickle was changed from true to false.
please update sample code accordingly (may pass in allow_pickle=true explicitly to np.load).
we are attempting to run a distributed job.
8 workers and 1 parameter server.
we are using this benchmarks repository phofurl inside the container.
we are running the workers with this invocation: python3 --num_gpus=8 --model=resnet50 --batch_size=16 we are running the parameter server like this: "python3 --model=resnet50 --batch_size=16" having some workers fail due to this error message: recvtensor expects a different device incarnation: vs. your worker job was probably restarted.
check your worker job for the reason why it was restarted.
i have done some debugging and i do not see a restart of running container.
also do not necessarily see any networking issues.
i will attach a full log to end of this issue
i added monitor= 'val_loss ', verbose=1)" as part of tf.keras.model.fit callbacks, but it never gets triggered.
other callbacks like modelcheckpoint with the same monitor works fine.
however, the same code works on tensorflow cpu version.
i tried: 1. reducelronplateau as only callback 2. set mode to min 3. different monitor
i am trying to migrate 1.12 code using estimator to tf 2.0 using everything from keras as it is suggested.
unfortunatley there is no example yet in tf 2.0 documentation.
here it is only partially using new keras functions: phofurl phofcode
`tf.saved_model.save` does not work on keras model when the output layer produce multiple outputs.
tried very simple transfer learning on inception v3.
training finished, prediction works fine.
saved the model with model.save_model().
when trying to load it with model = load_model(), i get this error: valueerror: unknown entries in loss dictionary: ['class_name', 'config'].
only expected following keys: ['dense_73']
i commented under issue #26255 but the original poster closed the issue as his problem was solved by updating to tensorflow 2. i am opening a new issue because updating to the pre-release is not an option and i have no way to even trap this error to try handle it, plus it is an unknown error code so no hint as how proceed.
unknown error and failure initialize gpu.
phofcode my configuration: windows 10 home tensorflow 1.13.1 python 3.5 gtx 1060 mobile max-q it doesn 't happen every time i run my program.
have localized it running load_model from keras, before reaching that point have imported tensorflow and verified that gpu is available.
phofcode is there a way catch this error or check for it and recover/attempt reinitialize?
if using normal `map` and `batch`, one get phofcode
i am using tflite for semantic segmentation.
i have a model trained to segment objects from background, this model is trained on deeplab.
i have converted this model(frozen inference graph) into tflite format using the below code: phofcode the model loads on android, but when i try to run inference it gives me this error: phofcode
i was going to implement the android repository(i edited the androidmanifest.xml a little so only the detectoractivity is going to launch) in android things when it failed to open the camera
logger throws warning, that the use of 'tf.keras.layers.lstm' is not optimized for performance on gpu.
suggests instead, but module attribute 'cudnnlstm' doesn't exist.
with tf.control_dependiencies does not execute the dependant nodes before the nodes in the with block
i trained model with tf.keras 's functional api with tensorflow 2.0 and save model with tf.keras.model.save() and convert the h5 model with when i try to serve the model the command phofcode i get error message >runtimeerror: the session graph is empty.
add operations to the graph before calling run().
when running `tf.estimator.estimator` model that registers to `evaluation_hooks` of in distributed environment, an error `attributeerror: 'perreplica ' object has no attribute 'begin '` occurs at the beggining of evaluation.
this error does not happen if i do not register sessionrunhook to evaluation_hooks.
registering sessionrunhook to `training_hooks` does not trigger the error even if it is in distributed mode.
i ran my estimator with the distribution configuration i used is the whole error log is attatched at the end.
as documented function assert_equal phofhyperlink accept any dtype.
but it raises an exception internalerror with type: uint16, 32, 64. test with cpu and gpu.
when i used tf.keras.activations operators in my keras model, serialization of model was failed due to not json serializable error.
i have been trying the demos of tensorflow 2.0, particularly the transformers example.
however, the current transformer example is not working anymore.
this is the error output: valueerror: weights for model sequential_3 have not yet been created.
weights are created when model is first called on inputs or `build()` is called with an `input_shape`.
seems like latest tensorflow version has changed a way how to call inputs or set weights.
it was working with tf version in conclusion transformer demo not working anymore, there any way to get installed in colab version?
running the provided code on gpus leads to error message during variant host->device copy: non-dma-copy attempted of tensor type: string` without feeding the tensor to the convolution layer, `summary.image` would succeed.
the two following layers give different number of variable in `model.variables`.
keras duplicates shared variables in the variable list: phofcode the first print: phofcode the second prints: phofcode
i use python3.5 predict the same one sample speed: phofcode ` i use java1.8 predict the same one sample speed: phofcode
the loss value returned from `keras.model.evaluate()` is an arithmetic average over losses for each batch.
however, when the last batch has a smaller batch size than previous batches (e.g.
a dataset has 101 examples, with batch-size=10), the calculation is incorrect because it will mistakenly give higher weight to the last batch 's loss.
simple program wroks with cpu, but crashes when nnapi is turned on, with words: e/tflite: op code 67 is currently not delegated to nnapi e/tflite: returning error since tflite returned failure nnapi_delegate.cc:739.
i sent some data from one model 's loss function to another model.
the other model starts with a rnn layer.
in tensorflow 1.12.0 and before, the variable y_pred is shape (32, 10, 10) or (20, 10, 10) as first dimension is batch_size, and the model trained normally in tensorflow 1.13.1 and 2.0.0-alpha0, it shows that the shape is (none, 10, 10) then throws this exception phofcode probably because it changed the behavior to use a dynamic batch size tensor, then tensors of unknown batch size don 't have numpy method?
if rnn layer is not present, and data 2d (like (none, 10) ), model can train normally.
cnn flatten seem to also have problem.
i am unable to restore the weights of any of my tf.keras models only when restoring from a new initialization of the model.
if i change the weights then restore without reinitializing the model, it will properly restore.
furthermore, a silent error is being thrown when this happens, requiring me to print status of restore to see it.
this documentation suggests there are 4 ways to load an optimizer: phofurl however: (tf_35) mark@science:~$ python tf_optimizers.py traceback (most recent call last): file "tf_optimizers.py", line 7, in <module> opt4 = tf.optimizers.adagrad attributeerror: module 'tensorflow ' has no attribute 'optimizers '
trying to load .tflite file on android device.
getting error "tensorflowlite: failed to load native library: library tensorflowlite_jni not found; at /system/lib64".
it is not able to find the tensorflowlite_jni.so at /system/lib64 path.
if i push the file to /system/lib64 path in device it works
i am trying to load a model saved in 1.x in 2.0.0. here is the model: phofurl this is the error i am getting: keyerror: <tf.tensor 'map/while/switch_1:0' shape=() dtype=float32> the same model loads fine in 1.13
using different `tf_random_seed` values for `tf.estimator.runconfig` produces the same model performance and parameters for
a code below works well on python 3.6 with tf 1.12. on python 3.7 with tf 1.13, however, the code crashes.
i have an error while import tensorflow (cf screen)
cannot convert provided value to eagertensor when applying keras constraint on variable in tf2.0 eager mode.
phofcode i have find a bug when use exponentialmovingaverage with codes work fine without using a distribution strategy.but when using a distribution strategy (such as mirroredstrategy), an error is reported: phofcode by debugging i can see that it works fine when ema.apply() is executed on the first gpu.but when executed on the second gpu, it will report an error.this is because has been created building the model in _model_fn().so on the second gpu, tf tries to create variable it doesn 't exist at all, 'replica ' should appear at end of variable name.
i found a temporary solution by modifying shared_variable_creator: python def *args,
i am training a straightforward keras stacked lstm model, using model.compile and model.fit.
when i train using nvidia-smi with persistence mode off, gpu utilization is at ~5-10% and training eta goes up 3x.
when i turn on persistence mode, gpu utilization goes to 60% and stays there.
i train a keras model and let it be saved by the after the training is finished, i want to continue it from the saved checkpoint.
therefore, i load the model with and run `fit` again.
unfortunately, it seems that steps/epochs counters are not restored.
when i try to run estimator in distribute with strategy, the train_and_evaluate api do not run evaluation after model save checkpoint.
i get the following error message when i use tensorflow in gpu mode.
when i use tensorflow in cpu mode, such error message doesn 't occur.
>attributeerror: module has no attribute 'summary_scope '
when passed to different function, tf.variable dtype doesn't cast to _ref type.
for example: phofcode output: `<dtype: 'float32'>`
phofcode gives the error: phofcode
derivatives of non-holomorphic functions are incorrect when compared both against ad and finite differences.
phofcode during the second initialization (the depth branch), tf complains about shape of the logits layer as if it was never removed: `valueerror: shape of variable ((3,)) doesn 't match with shape of tensor ([1000]) from checkpoint reader.` the problem doesn 't occur when i initialize only one branch, and is tied only to the first of the branches defined - if i change order branches, above error would change to
i've convert my keras network to tensorflow eager and this network dosn't learn anything.
the network predicts only the same values.
the performance is 2-3 times slower as the keras model.
with tensorflow graph without eager execution everything works fine.
when eager execution is enabled, gpu resources are consumed significantly with only single calculation.
following are two simplified versions of the problem, the first one comes from phofurl phofhyperlink and the second one is my problem.
1. huge gpu consumption when running a simple matrix multiplication.
2. blas sgemm launch failed error when running loading the inceptionv3 model and feed with a zero vector(same error when feeding with dataset samples).
i write some preprocess code which can only be executed eagerly in map function for dataset formating, but i find that the code can 't be executed properly.
even if the main function is executed in eager mode, the map function is still executed in graph mode.
running the following code for the first time show no warning.
however, running it the second time results in this warning message: phofcode
i am trying to port mnasnet's tpu implementation to the gpu.it works fine when using fp32.but when using mixed precision training, the speed is very slow.by using the profiler to track the training loop, i found that consumed too much time.i tried adjusting loss_scale but it didn't work.i want to know if depthwise convolution does not support backpropagation at half precision, or there are performance issues.
computing gradients for some graphs involving `raggedtensor`s causes an error
load_weights throw exception on a doubly nested model
i have a quantization-aware trained static rnn lstm, with unstack.
i used tflitelstmcell defined in this file: phofurl i manually inserted fake quant nodes in the graph and generated a .pb file.
when i want to convert my .pb file to .tflite model in toco with = got this error below: f unimplemented: this graph contains an operator of type unpack for which the quantized form is not yet implemented.
sorry, and patches welcome (that 's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).
the below code has been taken from the tensorflow without phd series - rnn time series prediction.
futurewarning: conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated.
in future, it will be treated as `np.float64 == np.dtype(float).type`.
from ._conv import register_converters as _register_converters { 'batch_size ': <absl.flags._flag.flag object at 'c_dim ': <absl.flags._flag.flag object at 'checkpoint_dir ': <absl.flags._flag.flag object at 'epoch ': <absl.flags._flag.flag object at 'h ': 'help ': 'helpfull ': 'helpshort ': 'image_size ': 'is_train ': 'label_size ': 'learning_rate ': 'sample_dir ': 'scale ': 'stride ': warning:tensorflow:from colocate_with (from is deprecated and will be removed in a future version.
instructions for updating: colocations handled automatically by placer.
warning:tensorflow:from initialize_all_variables (from is deprecated and will be removed after instructions for updating: use instead.
[*] reading checkpoints... warning:tensorflow:from checkpoint_exists (from is deprecated and will be removed in a future version.
instructions for updating: use standard file apis to check for files with this prefix.
parameters from [*] load success testing... an exception has occurred, use %tb to see the full traceback.
when convert freezed pb to tflite, the following problem happened: valueerror: nodedef mentions attr 'half_pixel_centers ' not in op<name=resizebilinear; signature=images:t, size:int32 -> resized_images:float; dt_uint8, dt_int16, dt_uint16, dt_int32, dt_int64, dt_bfloat16, dt_half, dt_float, dt_double]; nodedef: {{node resizebilinear}}.
(check whether your graphdef-interpreting binary is up to date with your graphdef-generating binary.).
anyone has any ideas to solve it ?
using more than about 10 minutes, keep running demo app, but not working inference.
normal inference time: about 50ms (pixel 2) abnormal inference time: about 3ms (pixel 2) the same problem occurs in other phones.
(galaxy series ( >= 6), xiaomi redmi note series)
as of custom plugins fail to build with the following error: phofcode this seems to be related to phofurl it appears that not all the files are placed in the proper locations after the installation.
i am using a keras model with tf 2.0. i am converting the model to estimator: ` then it is crashing when running when using (after migrating the code to tf 2.0 of course).
it works fine when using `none` as strategy i tried to follow the instruction: phofurl
i 've downloaded an inception model from tf-hub (specifically this one: phofurl i have added to it two keras layers (a dropout layer and a dense layer) and during the training, i 'm trying to save the model using the `modelcheckpoint` keras callback.
unfortunately, after one epoch and during the model saving i receive following error: phofcode highlighting error:
quantized is 4x slower than un-qualtized version (both testing on tflite)
a custom, deep convolutional model, with batch normalization, does not converge.
it is a recreated version of a keras model that reaches accuracy of > 0.8 on the same data, whereas the tensorflow model built from tf.layers gets stuck under accuracy of < 0.3. presumed issue is lack of the moving mean and variance operation in the update ops, but all recommended methods including them ( phofurl have failed.
when using tf.data.dataset.shuffle and iterating through the dataset multiple times the shuffled order is always the same.
when using dataset.map to parse tfrecord, the tensor is not eagertensor
i trained a model with python and save it as ckpt files, and then transform it to pb file.
i make the tensorflow to a stastic library and then try to load the model on c++.
i can create the session and readbinaryproto, but when i run this code ,it fails return theis message: `tensorflow::status status_create = > invalid argument: no opkernel was registered to support op 'sin ' with these attrs.
registered devices: cpu], registered kernels: > <no registered kernels> > > [[{{node = sin[t=dt_float, _device="/gpu:0" phofhyperlink ]]
the session return an ndarray [[value_estimate]] instead of value_estimate.
input shape = [?, 128, 128, 8] output = depthwise_conv2d(input, filters=8, kernel_size=3, strides=(2, 2), dilation_rate=(3, 3), padding= 'same ') output shape = [?, 65, 65, 8]
i have a model that accepts two string features, say 'subject ' and 'body ', and predict if the string content is spam.
when trying to test the inference with `saved_model_cli --input_examples`, it produced error message.
here is the model 's signature def info: phofcode here is the cmd line and error: phofcode the problem occurs at saved_model_cli.py line 487 ( phofurl phofcode it checks if list `feature_list` contains string values, and then try to append list to feature 's `bytes_list` which expects element to be bytes, not string.
the following code results in the gradient being `none`: def f(x): return x
i have previously running code that explodes on import prior to any runtime execution.
i 'm trying to optimize tf model ' phofhyperlink ' with graph_transforms tools.
optimize for inference ` --input=frozen.pb --output=stripped.pb --frozen_graph=true --input_names="sub_7" ` graph transforms --in_graph="stripped.pb" --out_graph="flatten.pb" --inputs= 'sub_7 '
i 'm trying to run tflite model ' phofhyperlink ' with gpu delegate on android devices.
according to pr for label_image #27464, i modified the label_image code to support the gpu delegate and removed the code from 205 phofhyperlink to 251 phofhyperlink lines .
as given in this page : phofurl i am trying to change the code in seq2seq as follows: in decoder.py : `class however, while running the pylint stage of sanity_checks it produces the following error: [e1102(not-callable), my_decoder is not callable [e1102(not-callable), my_decoder is not callable `
tested on jupyter notebook jupyter --version 4.4.0 and google colab
and crashing with the following error messages "runtimeerror: is not supported when eager execution is enabled."
my code is provided below.
running this code gives a directory called logs.
the code executes normally, but raise valueerror when computing gradients (`tape.gradient)` if i decorate the training function with `@tf.function`.
the traceback is as follows: <pre> valueerror traceback (most recent call last) in <module>() 80 for batch_id in 81 batch_data = # v2 ---> 82 loss, outputs = # v2 83 # _, loss, outputs, inputs = sess.run([opt_op, loss_, outputs_, batch_data]) 84 if loss_metrics is none: in __call__(self, *args,
sparse tensor operation inside a custom keras layer should not affect outside behavior if returning the expected type
unexpected and undocumented runtime exception/error when handling malformed data.
unexpected and undocumented runtime exception/error when handling malformed data.
i follow the example classify structred data phofhyperlink as below: phofcode and it shows an error: `valueerror: passing a dictionary input to a sequential model which doesn 't have featurelayer as the first layer is an error.` however, i found the reason that `sequencefeatures` doesn 't have a property `is_feature_layer` as below: ## # todo(rohanj): this is a hack to get around not depending on feature_column and # create cyclical dependency.
figure out cleaner solution def is_feature_layer(layer): """returns whether `layer` is featurelayer or not."""
return getattr(layer, '_is_feature_layer ', false) ## class def __init__(self, feature_columns, trainable=true, name=none,
i am trying to use `tf.train.nantensorhook` to prevent my training script from halting with an error.
(specifically this is to do hyperparameter optimization on cloudml, but i observe this bug on my local machine as well).
my instantiation looks like: phofcode
but the output of `seed` does not stays the same and changes over different executions.
the output is like: phofcode
> line 69, in get_json_type > raise typeerror( 'not json serializable: ', obj) > typeerror: ( 'not json serializable: ', b"
i try to fit a sequential model with both a training dataset and a validation dataset with fit_generator function.
after of running it shows - 'sequential ' object has no attribute 'total_loss '-
using an op decorated with `tf.custom_gradient` prevents the `tf.graph` it was created in from being garbage collected later.
so if a script creates multiple such graphs in a row, it will use more and more memory unnecessarily.
i believe it 's due to the `graph` being held as an indirect reference to the custom gradient registry.
if torch is imported before tensorflow, tensorflow is unable to use the gpu.
it throws the following error: phofcode which is not very helpful for figuring out what the problem is
durring running of this script, the computer shutdown crashes and reboots.
when training `tf.keras.fit(dataset)` with eager execution, where dataset is a `tf.data.dataset`, i am finding a ~10x performance loss as compared to turning off eager execution.
there are 2.7 hundred million variables in my embedding files.and instread of adamoptimer,i used lazyadam.but it cost the same time as adamoptimizer
i built a keras model with only a `tf.nn.relu`, but the gradient seems to be `none` after being decorated by `@tf.function`
when creating a custom rnn cell containing a few layers (created in the constructor), these internal layers are not properly built the first time the cell is used.
i use tflite model (quantization-aware training and fully quantized with toco) and deploy on android for segmentation task.
i got correct output of the model, and the inference time is 30ms(1 thread), 17ms(2 threads), 15ms(3 threads).
however, when i add some post-processing with c++(jni), the inference time (only the function `interpreter.run(input, output)` run time)increases to 47ms(1 thread), 34ms(2 threads) , 30ms(3 threads), respectively, and i got same inference time even though i didn 't use post-processing (just put jni code in my project).
when use post-processing with java code, inference time is 30ms(1 thread), 17ms(2 threads), 15ms(3 threads) again, so guess jni would influence time.
when a layer class is used as attribute, the code will throw a `typeerror` exception when calling it appears that the layer class is tracked.
run the test code below.
for gpu 0 the behavior is normal, but for gpu 1 the output becomes zero.
the value estimate became an array instead of scalar float after 8000+ steps
tf.gather throws error in presence of another independent tensor inside tf.function
i followed the guide: classify structured data phofhyperlink .
the author used tf feature column and tf data alongside a sequential model, which worked out just fine.
then, i 've tried implementing the same using keras functional api, but was greeted by the error message below: attributeerror traceback (most recent call last) in <module> ----> 1 inputs = name= 'features ') 2 x = layers.dense(128, 3 x = layers.dense(64, 4 5 baggage_pred = layers.dense(1, name= 'baggage ')(x) in input(shape, batch_size, name, dtype, sparse, tensor,
when testing my model, i had several batches of images with batch size equals to 10. as the images are large, i loaded them from hard drive every time.
my code is structured as <br /> phofcode here each of my `images` is a numpy array with a size of [10, 1536, 1536, 2].<br /> while the code running, the memory usage is growing fast -- every image set it read in stayed there in the memory.
on cpu, `tf.transpose()` can be 10 times slower than depending on the dimensions of the tensor.
in my example case, the speed can be fixed by sandwiching the `tf.transpose` in reshapes that reduce dimensionality for transpose.
-d_glibcxx_debug compiled example code gives: invalid argument: must specify at least one target to fetch or execute.
compiled without this flag: run session successfully tensor<type: float shape: [] values: 6> output value: 6
tensorflow transform throwing error indices out of bound when processing large number of records (> 1mio) but running well on small records (< 10k).
note that this tensorflow transform run on beam pipeline on google cloud dataflow.
`history = model.fit_generator( train_generator, steps_per_epoch=8, epochs=15, verbose=1)` if train_generator is a instance of sequence.
( in my case, coming from flow_from_directory), steps_per_epoch is overridden by len(train_generator) in this file training_generator.py phofhyperlink this doesn 't happen in keras.
in keras, steps_per_epoch is kept.
i use the benchmark_model to run the inference of models with tflite, but the speed of mobilenet is rather slow on snapdragon 845, which is nearly
sequence generator as validation_data not working if flatten() layer involved in model
i am fine-tuning the pretrained ssd-mobilenetv1 phofhyperlink model using the config file phofhyperlink for detecting the bounding boxes of objects in an image.
phofcode after training, i am freezing the model using phofcode after is being generated, i 'd like to convert model to a model format that is compatible with iphones.
i tried following approaches: ### approach 1 - convert to mlmodel phofcode the conversion code looks like: phofcode tried above with faster rcnn resnet101 and ssd mobilenet - both give same error.
not sure why `output_feature_names` has to be a `softmax` as its a detection problem.
### approach 2 - convert tflite also, tried following: ` tflite_convert --input_arrays=input --output_arrays=` but, i am not sure what last layer is, as is fairly convoluted.
tried visualizing with netron but
tf.name_scope does not effect the name of weights created by keras.layers output in tf 2.0.0-alpha0 phofcode
exception is reported to stdout, with stack trace, when testing under `self.assertraises()`: i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2 fma failed: 1] [[{{node = assert[t=[dt_float], summarize=3, phofhyperlink ]] caused by op defined at: file line 184, in _run_module_as_main "__main__", mod_spec) file line 85, in _run_code exec(code, run_globals) ... file line 600, in run testmethod() file line 19, in testraises sess.run(foo()) 7, foo max_assert = 1.01), [max_val]) 189, wrapped return
the depthwise separable convolution, unlike the normal convolution when used with floating point 16 is slower than floating point 32, but more importantly when it is used with batch norm and an optmizer (sgd, adam, etc.
), it becomes very much (~40 times) slower than floating point 32. another unexpected behavior is getting "core dumped" with most of the filter sizes, that only happens in case of separable conv with fp16, but not the other combinations.
following is what i am getting from the given code: phofcode
sometimes, during training process , i get this error: e error polling for event status: failed to query event: cuda_error_unknown: unknown error f unexpected event status: 1 this happens sometimes when i am not connected to that machine.
for some reason, when i am working on that machine, i 'm not getting that error.
a code below works well on python 3.6 with tf 1.12. on python 3.7 with tf 1.13, however, the code crashes.
multiplication of complex numbers typically requires 6 floating point operations (4 real multiplications and 2 real additions) and not just 1 floating point operation.
the functions that calculate the flops statistics phofhyperlink do not seem to distinguish between floats and complex numbers.
under tensorflow r1.13 my single node multi-gpu training code produces a phofcode error when constructing the model, before a single forward pass has happened.
the towering code i am using is based on the example: phofurl
when using `@tf.function` on a function that involves abstract classes (e.g.
for instance layers or other nn abstractions) tensorflow fails with the error: i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2 fma i cpu frequency: hz i xla service executing computations on platform host.
devices: i streamexecutor device (0): <undefined>, <undefined> traceback (most recent call last): file line 87, in <module> main() file line 81, in main loss = train_one_step(params, data) file line 426, in __call__ self._initialize(args, kwds, file line 370, in _initialize *args,
the following code worked fine with tensorflow-cpu 1.12.0 but not with the gpu version.
i got error: phofcode here 's the traceback: > traceback (most recent call last): > file line 1334, in _do_call > return fn(*args) > file line 1319, in _run_fn options, feed_dict, fetch_list, target_list, run_metadata) file line 1407, in _call_tf_sessionrun run_metadata) another thread on parallel threw: traceback (most recent call last): file line 52, in <module> sess.run([train_op]) 929, run run_metadata_ptr) 1152, _run feed_dict_tensor, options, run_metadata) 1328, _do_run 1348, _do_call raise type(e)(node_def, op, message)
output has correct values without gpu delegate, but contains only zeros (0.0f) when using gpu delegate
compiling the with bitcode support enabled slows down model inference on the sample model from ~72 ms (without bitcode support) to ~1200 ms (with bitcode support).
trying to run simple example on cpu in distributed mode according to the documentation.
tf2.0 documentation phofhyperlink if i run the code using only python py_file.py then it is running fine.
if i run it by setting tf_config environment variable with only 2 different node or even a single node then it is hanging.
it hangs after generating this information: i this tensorflow binary is optimized with intel(r) mkl-dnn to use the following cpu instructions in performance critical operations: avx512f fma to enable them in non-mkl-dnn operations, rebuild tensorflow with the appropriate compiler flags.
i creating new thread pool with default inter op setting: 2. tune using for best performance.
warning: logging before flag parsing goes to stderr.
w0327 deprecation.py:506] from calling variancescaling.__init__ (from dtype is deprecated and will be removed in a future version.
instructions for updating: call initializer instance dtype argument instead of passing it constructor w0327 `eval_fn` not passed in.
the `worker_fn` will be used if an "evaluator" task exists cluster.
w0327 `eval_strategy` not passed in.
no distribution strategy will be used for evaluation.
initialize grpcchannelcache for job worker -> {0 -> localhost:3002} started server target: grpc://localhost:3002 server already started (target: grpc://localhost:3002) w0327 `eval_fn` not passed in.
the `worker_fn` will be used if an "evaluator" task exists cluster.
no distribution strategy used evaluation.
workers need restart training if any fails.
reincarnation of bug #25327 for different layer type (lstm rather than embedding).
after applying fix cebce4a phofhyperlink for bug #25327, the code provided below results in `valueerror: input 0 of node was passed float from lstm/kernel_1:0 incompatible with expected resource.`.
when attempting to run a session via c api on a tensorrt-using graph, it is possible for exceptions to not get caught and abort the whole process via `std::terminate`.
stack-trace of one such exception, which happens when cudnn initialization fails, is provided below.
then the execution fails with: phofcode
running a tutorial sample python3 classify_image.py` causes error: phofcode
the example given for tf.keras.metrics.meaniou returns `attributeerror: 'list ' object has no attribute 'shape '`.
if i convert the lists to tf arrays as input, it runs without error.
the code linked at the bottom calculates a matrix exponential (`expm`) using a taylor series phofhyperlink .
it outputs the following when running with the latest tf1 and tf2 installations from pip: phofcode i 've included some profiling information for the function of interest (`taylor_v2` in tf 2) which shows that it spends all time in
in summary, i created a custom model in model subclassing style, which contained only 1 custom layer.
after initial, i dumped its trainable weights to file and then restored it, by using save_weights and load_weights functions.
the trainable weights before and after saving were different.
i also ran the same test on tensorflow 2.0.0a0, and it turned out the latter version did not get this phenomenon.
i used tf.keras built a facenet model and try to deploy it in android tflite, the processing of the transforming(from tf.keras to tflite) was smoothed, but when i try to deploy it in android tflite, whatever i feed any image, the interpreter always send me the same result
i use tf.dataset.cache to cache data and it will run out of my computer 's memory
i 'm trying to do tpustrategy for tensorflow 2.0 with disabled eager execution.
i 'm using keras for the cnn model.
when i try to run the .fit function on the model, i get an error: nodedef mentions attr 'explicit_paddings ' not in op<name=conv2d; signature=input:t, filter:t -> output:t; dt_bfloat16, dt_float, dt_double]; attr=strides:list(int); "valid"]; "nchw"]; 1, 1, 1]>; nodedef: {{node conv2d/conv2d}}.
(check whether your graphdef-interpreting binary is up to date with your graphdef-generating binary.
a function which correctly works when in eager mode does not work anymore when annotated with `tf.function`.
in particular, it complains about `valueerror: tf.function-decorated function tried to create variables on non-first call.`, even though the function is always called with different parameters.
this is a continuation of phofurl
on a range dataset, window followed by flat_map works as expected, but on a dataset of tuples (originally encountered using a csv dataset), flat_map fails, complaining that the input argument to the mapped function has multiple components.
i 'm trying to optimize a tensorflow model to tensort optimization.
i 'm using the example of object detection given by phofurl so the tensorflow model loads perfect but when i try to optimize it a segmentation fault raise.
in the self-contained test below, i am expecting to initialize `my_dense/dense/kernel` and `my_dense/dense/bias`, which should be checkpointable, but it does not, as can be seen from the error message.
when the request comes the execution hangs indefinitely when it hits the access to the passed model reference.
i 've searched for a solution and found that sessions cannot be shared across process which is cause of hang.
i 've tried several solutions which are mentioned lower.
however only changing back end to theano solved issue.
is there any other solution for this issue or i have to keep loading model in worker who uses it for prediction?
or i am doing something wrong?
tensorflow fails with segmentation fault when using custom ops built with gcc5.
the segmentation fault originates from usage of `std::function` on the interface boundary, introduced in phofurl
i run the transfer_learning.ipynb phofhyperlink tutorial on/r2 for tensroflow 2.0 on jupyter notebook in anaconda windows 10 and i get the error on step: phofcode
loading a model with produced with , and resuming training produces different results from running the training without save model + restore model in the middle.
user-defined subclasses of `tf.module` do not recognize and include variables from keras layer object members.
i wanted to implement an eager mode version of the large margin code from google-research code phofhyperlink .
in other words, i computed a second order derivative.
if my model/network didn 't contain/enable the batch norm layers, it was fine.
but if i enabled the batch norm layer, it said that "tf.gradients is not supported when eager execution is enabled.
however i didn 't use tf.gradients and other layers didn 't raise such an error.
the static/graph code work fine on both cases(with or without batch normalization)
the official tensorflow lite segmentation model ' phofhyperlink ' cannot be run on andorid 9.0, using nnapi.
it seems some operators are not supported currently by nnapi.
i implemented waveglow model, in the model it contains dilated convolution, so in early time i used tf.nn.conv2d to implement the dilated convolution model- -- wavenet, i used the default data format nhwc, but after many experiments, i found the model does not convergence.
even after 700k steps with a small learning rate, it did not convergence.
have tried many hyper-parameters settings.
so changed dilated convolution to a native implementation from tensorflow-wavenet phofhyperlink .
then waveglow model convergence quickly after 50k-80k steps.
then, want to understand what's wrong with my usage of tf.nn.conv2d, but no clue.
then tried data format nchw, model convergences quickly after 70k steps.
so doubt there may be a bug in tensorflow's implementation of dilated convolution with data format nhwc.
loading a saved .h5 model which includes a densefeatures layer fails: `valueerror: unknown layer: densefeatures`
after the model has been loaded from a checkpoint, the following messages appear: phofcode
i am trying to use tf.summary at the same time as using distribute strategies.
however, the call to seems to end the scope of the `summary_writer`.
i have initialized it properly, but it is not available to me.
i have tried passing summarywriter object directly as another parameter of train_step but it does not work and fails with error message.
somehow, scope seems be lost through experimental_run call.
phofcode for most part, i followed this guide on how work with duplicatestrategies: phofurl
tensorboard crashed when keras finish training the model and do a record in tensorboard
when i am trianging my model with tf.estimator and tf.data, this issue occurs: `invalidargumenterror (see above for traceback): concatop : dimensions of inputs should match: shape[0] = [128,64] vs. shape[1] = [127,16]` the batch of data is 128, so the first feature ' s is correct, the second wrong.
does anyone else have the same problem?
i have a graphdef and checkpoint i am trying to freeze.
i am able to do so from the command line, but not from a python file.
using an lstm with the keras package works great until i try to fit my data.
this error appears: phofcode a similar error appears when i try to use cudnnlstm
when a `py_function` op is defined for gpu (the default if one is available), and it calls a function that takes a string argument, a `runtimeerror` is raised if one attempts to access the value of the argument by calling `eagertensor.numpy()`.
if the `py_function` op is defined for cpu no error raised.
when loading a custom model using the tf lite api for android, the output tensor dimensions become malformed.
this causes an exception: phofcode it is a custom model, see attachment.
various validation scripts have shown no anomalies in the model.
i have spent some effort on debugging, validating the behavior of api.
however, i get stuck at native methods.
the code below shows that before execution, tensors do have right shape.
phofcode it seems like in size of output tensor is corrected after model execution, near line: phofcode it seems like this method checks output dimensions with c++ backend code, and corrects this in java part.
at this point, mismatch arrises.
however, if i perform check before model runs, mismatch is already present.
in the linked [colab] i try to train a walsmodel, with a sparse matrix with shape 44000)` when i try to run it locally on my quadro i get: phofcode which, ok, i have a 16gb memory card, that makes sense, guess.
since this is run on gpu it kills the process.
so set my session config as follows to use the cpu which has 100gb of ram.
surely enough for the 17.32gib that tf tried to allocate: phofcode and lo and behold: phofcode get that sparse matrix is not exactly small, but it is not excessively large either.
storing coordinate form on disk is <2 gb.
so what with rampant memory usage?
full logs in last cell of colab [colab]: phofurl
compiling concatenated networks with keras metrics causes an invalidargumenterror in the input of the second network (you must feed a value for placeholder tensor 'dense_5_target ' with dtype float and shape [?,?]).
this used to work in 1.12.0 but broke with 1.13.1. without metrics it 's not an issue.
when i try to use `model.fit_generator` or `model.fit_on_batch`, i get the following error: phofcode here 's the details about the model: it 's a custom classifier which uses xception phofhyperlink as the feature detector and a custom feedforward network for a classifier.
phofcode the two models are combined with following code: phofcode the issue seems to occur no matter what input values are.
it seems to me that my inputs x and y (coming from my generator) are correct shape: phofcode for sake of completeness, training data generator is set to read in images from a directory with some augmentation:
the python interpreter crashes with sigsegv (segmentation fault); according to gdb the fault occurs in phofcode .
when collecting batch-level metrics, epochs are incorrectly numbered with the current `_samples_seen`
the model can be converted only when global step variable and custom cross entropy implementation are used (but it cannot be run on android).
without one of them or both the converting process crashes.
given the following code: phofcode i get the following traceback: phofcode
running `tf.svd([[]])` leads to a segfault.
when i run a simple code snippet i get the following error `attributeerror: 'module' object has no attribute 'session' phofcode * output * attributeerror traceback (most recent call last) in <module>() 5 c = tf.matmul(a, b) 6 # creates a session with log_device_placement set to true.
----> 7 sess = 8 # runs the op.
a function that correctly works in eager execution can't be decorated with `@tf.function` if declares a `tf.variable` in the function body.
the error message, reported below, is misleading since it talks about a non-first invocation when the function is invoked only once.
if custom layers are used weights of the model cannot be saved using model.save_weights() or exported to the savedmethod.
i am using the code provided in the custom layer code provided in documentation at phofurl
when a `sequential` keras model contains `inputlayer` and it is saved, it cannot be loaded and fails with a message phofcode
there doesn 't appear to be any way to unroll a loop statically when using `tf.function`.
in tensorflow 1 i was able to create lots of nodes in a graph using a for loop, when using `tf.function` autograph replaces this with a `tf.while_loop` which seems to be slower in some cases.
i run into the following error when trying to run a tflite model.
`runtimeerror: params->depth_multiplier * sizeofdimension(input, 3) != sizeofdimension(filter, 3) (0 != 6)node number 7 (depthwise_conv_2d) failed to prepare.` the code runs fine normally, just not after exporting to tflite.
phofurl -> states that the op is supported.
i know it has been used for the mobilenet variants before.
i specified rate=[1,1] and the input kernel is constant (tf.constant).
this error has also been reported in comments of phofurl i have tried with tf v1.12.0 and v2.0.
code annotated with `@tf.function` behaves differently depending on whether functions are called and captured as variables, or called and passed directly to other functions.
in particular, it seems the autograph magic doesn't get applied to functions that are only called within the parameter list of other functions.
i may be misinterpreting what exactly is going wrong, but certainly the behavior shown in the colab below is incorrect.
i am trying to add a trainable variable y to my model.
the following code adds a trainable variable y to my model in tf 1.12. it does not work in tf 1.13 currently the operation y = k.variable([0.0], dtype=tf.float32, name= 'y ') add_y = lambda(lambda x: tf.math.add(x,y))
the below code (using zero l2 regularization) fails with phofcode
currently, mobilenet_v2 keras in references the function `decode_predictions` from here phofhyperlink
while trying to train a neural network with my gtx960 after installing tensorflow-gpu, and choosing my gpu with the below code, i can see on the windows task manager that it 's only using about 10% of the gpu, and thus making it way slower than training it with the cpu.
i want to try tensorboard from keras, it work if tensorflow-gpu=1.13.1 & tensorboard=1.13.1, but get the error if tensorflow-gpu=2.0.0a0 & as below: epoch 1/50 - eta: 11:31 - loss: 2.3852 - acc: 0.1562 notfounderror traceback (most recent call last) in <module> ----> 1 model.fit(x_train, y_train, epochs=50, 2 3 model.evaluate(x_test, y_test) in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
when running transformer within the tensor2tensor library with via little customized change for distributed training in t2t only, it reported below error: info:tensorflow:graph was finalized.
warning:tensorflow:from checkpoint_exists (from is deprecated and will be removed in a future version.
instructions for updating: use standard file apis to check for files with this prefix.
parameters from i start master session with config: device_filters: "/job:worker/task:0" device_filters: "/job:worker/task:0" gpu_options { 0.95 } allow_soft_placement: true graph_options { optimizer_options { global_jit_level: off } rewrite_options { on scoped_allocator_opts enable_op: "collectivereduce" enable_op: "collectivereduce" enable_op: "collectivereduce" enable_op: "collectivereduce" } } experimental collective_group_leader: warning:tensorflow:from get_checkpoint_mtimes (from is deprecated and will be removed in a future version.
instructions for updating: use standard file utilities to get mtimes.
strategy info:tensorflow:saving checkpoints into i successfully opened cuda library libcublas.so.10.0 locally i filling up shuffle buffer (this may take a while): 387 of 512 i shuffle buffer filled.
w invalid argument: upper bound check fail input 1 from node to node input bounds = backing_tensor bounds = t [[{{node w invalid argument: upper bound check fail input 1 from node to node input bounds = backing_tensor bounds = t [[{{node t [[{{node _send_add_1_0}}]] invalidargumenterror: invalida...nterror()
numpy operations on a list of tensor is considerably slow.
commands to reproduce the results and corresponding time are shown below in the screenshot below.
i wanted to define a custom metric that is the combination of 2 metrics: python import tensorflow as tf class f1(tf.metrics.metric): def __init__(self,
when training a simple neural network (one embedding layer, one lstm layer, one dense layer) with `return_sequences=true`, the computation of crashes.
the reason of the crash seems different in tensorflow 1.12.0 from one hand, and in tf 1.13.1 and tf 2.0.0 from another hand.
the setting is simple and common for each tensorflow version.
see the notebooks in this dedicated repository phofhyperlink for the complete code.
i generate 640 sequences of 5 random integers between 0 and 11. and i want to train an lstm to predict 5th element of a sequence given 4 previous ones, with a batch size 64. hence code looks like this: phofcode
when using python internal "logging" module with tensorflow, a logging module emits below warning message.
> warning: logging before flag parsing goes to stderr.
also, it prints out duplicate logging message with my own formatter and something internally defined format(i guess) as below.
> $ python3 test.py [info|test.py:29] >> hello world.
warning: logging before flag parsing goes to stderr.
[info|test.py:30] >> this is message 1 i0314 test.py:30] this is message 1 when i try without importing tensorflow, then it works properly.
> $ python3 test.py [info|test.py:29] >> hello world.
[info|test.py:30] >> this is message 1
can't convert the dataset/iterator to its graph representation: i'm forced to loop in eager mode, but i want to have a graph representation of the loop too (since i need to export a savedmodel that contains the loop itself).
repeatedly allocating a graph and making a summary writer leaks memory.
> typeerror: 'datasetv1adapter' object is not an iterator
`tfrecordoptions` 's `compression_type` argument expects an int (defined in while `compression_type` must be a string.
imho, tensorflow 2.0 should eliminate this sort of inconsistency, it would be more pythonic: phofcode
no differences in performance for samsung s9+ between cpu and gpu versions.
using tf.keras.layers.rnn does not work in place of tf.nn.dynamic_rnn, or at least not in a way that i can find.
everytime i attempted to use it, i would get `shape must be rank 2 but is rank 1 for (op: 'matmul ') with input shapes: [1024], but as soon as i swap to dynamic_rnn, it executes perfectly.
however see that dynamic_rnn will be removed.
gradient computation fails with the message: "tensor.graph is meaningless when eager execution is enabled."
the gradient becomes an indexedslices through the second gather_nd operation.
on the indexedslices the check in phofurl evaluates to true and in line 5965 .graph attribute is called which in eagerexecution causes error mentioned above.
phofurl a workaround/fix for problem can be achieved by adding another check to if clause making sure that op_input is not an indexedslices: `and not isinstance(op_input, indexedslices)` phofcode
cannot create a `savedmodel` with a `densefeatures` layer, i get an exception: `attributeerror: 'str ' object has no attribute 'shape '` (see full stacktrace below).
i am trying to quantize a model that is made using tfslim library.
i froze it using function and tried to convert it to tflite formate for quantization.
i am using win 10 and tf-nighlty.
the following error appears: toco failed.
i before removing unused ops: 221 operators, 366 arrays (0 quantized) before general graph transformations: 221 operators, 366 arrays (0 quantized) f check failed: start_array.data_type == arraydatatype::kint32 range op inputs must be int32.
fatal python error: aborted current thread (most recent call first): file line 33 in execute file line 251 in _run_main file line 300 in run file line 40 in run 59 main 9 <module> unpy.py", 85 _run_code unpy.py", 193 _run_module_as_main
in the tensorflow 2.0 preview, the and wrappers are incompatible with it raises an "unknown layer" exception.
* when using a "built in" loss function, the "accuracy" metric is
it takes a while for me to generate a `sparsetensor` phofcode how can i save it just by itself?
i have tried pickle and npy without success.
using the keras model subclassing api, dense layer cannot be instantiated at any point in `__init__` after instantiation of conv2d layer.
defining the same model using the sequential api gives no errors.
similarly, functional api gives no error message.
reverting to tf 1.13.1 with eager execution enabled shows the same results.
receiving a segmentation fault when i run this code
after installing tensorflow 2.0 in colab, on executing command 'import tensorflow as tf ', i get and error message "
error occurred when try to run the colab notebook shown in tf 2.0 alpha: distributed training in tensorflow phofhyperlink for tpustrategy: phofcode i had enabled colab runtime to `tpu`, and even checked there indeed is a tpu available: phofcode
when using `@tf.function` a function with a ragged input it will return the dense equivalent of the ragged tensor.
when the decorator is omitted it returns a ragged tensor.
running `toco` with or without arguments throws this traceback: phofcode
`tf_upgrade_v2` fails if the file contains f-strings
trying to write any tensor as histogram summary: > in _buckets(data, bucket_count) 89 if bucket_count is none: 90 bucket_count = default_bucket_count ---> 91 with tf.name_scope('buckets', values=[data, bucket_count]): 92 93 tf.int32) typeerror: __init__() got an unexpected keyword argument 'values'
we trained a segmentation model using deeplab with mobilenet with tf 1.13.0 to replicate the segmentation model by tensorflow i.e sample code in repo for pascal voc).
however there was significant time difference for average running time for 'depthwiseconv2d', when we benchmarked the two tflite models with 'tflite android benchmark tool'.
in the official model avg time was around 28 ms; whereas in our own model it was around 103 ms. the only difference between the two float models being quantization levels i.e ours was 0-255 and official has -1 to 0.99.also, there is a difference in size(official:2.7mb vs. ours:3.3mb).
it seems official is using a newer kernel for depthwiseconv2d and hence runs significantly faster compared to our trained model.was official trained or optimised using tf2.0 tools?what could be done to achieve similar speed (depthwiseconv2d) using tf 1.13.0 or do we have migrate and retrain our tf 2.0?
during my experiment with binary classification, i 've noticed a significant discrepancy between built-in metric of _precision_ from the one computed by _tf.metrics.precision_.
in order to make sure that my crusty old tf 1.x code works on tf 2, i'm using the `tf_upgrade_v2` script as documented phofhyperlink .
however, on the first bit of code phofhyperlink i tried i was told that it 'detected 0 issues that require attention', and the report it gave was essentially blank.
additionally, the diff between old file and new file showed no changes!
this would have been great, except there's a few things that are very obviously incorrect.
- on lines 42 and 43, there's a use of `tf.contrib.lookup` which should be moved to `tf.lookup`.
- on line 63 there's a call to which should be moved to `tf.sparse.to_dense` - on lines there's a tf.session context and `tables_initializer` which no longer exist.
the distribution to the pod fails with 1.
`attributeerror: 'tpucontext' object has no attribute if passing a user-provided instance to the `tpuestimator`.
use `--use_hparams` argument in the demo script.
`attributeerror: 'dict' object has no attribute 'batch_size'` if no `hparams` are provided.
use `--nouse_hparams` argument in the demo script.
a syntax error is raised.
in python, calling leads to a segmentation-fault.
evaluation of `tf.nn.conv2d` in a `tf.data.dataset.map` call fails during `session.run()` call of with error: phofcode see the full error log and the attached code below for the full example.
it seems that the graph is successfully created, but evaluation of `tf.nn.conv2d` call (which is implicitly placed on gpu) is not possible.
this is somehow related to fact that this `tf.nn.conv2d` call wrapped in a `tf.data.dataset.map` call.
setting `data_format="nhwc"` or `use_cudnn_on_gpu=false` procudes same error.
the internal `build_info` module can be used to query information about the build, importing it like: phofcode however, while in previous versions you could get for things like or now the only available relevant attribute is (and in tensorflow 1.13.1 also
fails to run because of an import error whenever i try to import tf-gpu,
i'm using python to build a graph (using tf.keras.layers) that contains cudnnlstm, timedistributed, dense layers.
it crashes the rtx 2060 (there's a bug report for that already, this is not this issue) if i don't set options allow_growth or limit ram usage.
i'm using the model for inference from c++, my batch size is known as soon as the program starts but it can vary each time it's started so the graph doesn't have a fixed input size.
i'm creating several threads with one session on each.
tensorflow gpu usage is low (38%) and it eventually gobbles up all gpu ram available if it's not manually limited, i can't simply increase batch sizes, because different weights are loaded on each run().
now, issue here is that it doesn't matter much how many parallel sessions i run in multiple threads, gpu utilization still low,
a function decorated with `tf.function` cannot return a variable by reference.
this makes it impossible to write accessors, so we end up having to access variables directly, which leads to ugly code & hard to maintain.
for example, this is the root cause of #25754. this might be considered a feature request, rather than an issue: i grant you that it's debatable!
i am running the sample rnnlm code phofhyperlink .
i just added timeline logging code in the given tutorial for training ( modified code here phofhyperlink ) to analyze the sequence of low level operations being executed as well as the time each operation is taking.
there are a lot of operations which are placed on gpu and they have just kernel queue/launch times recorded in timeline in compute` streams.
i am unable to find actual time to execute those operations in streams.
to identify these operations, i used this script phofhyperlink .
is this a bug, or am missing something my understanding of timeline?
list of operations with kernel queue times reported, but no execution times can be found here.
phofhyperlink want to do this because am trying do model parallelism for this rnnlm (reccurrent neural network for language modeling) code and want place ops after running a heuristic graph partitioning algorithm which takes as input estimated compute time as well dependencies for each operation.
as described in the third example in the documentation for keras models phofhyperlink , a boolean `training` parameter can be used in the `call` method of subclassed models.
however, the parameter is passed as `none` when it should be `true`.
i am running a custom code using tf.
part of the code includes a 2d convolution using tf.nn.conv2d.
the problem might not be connected to convolution operation but it fails after increase size this tensor.
can you help me solving this issue?
thank you very much, gilad
when calling a tf function multiple times with the same arguments, the function keeps getting traced and more and more new concrete functions get generated.
this will hinder performance and waste ram.
i trained the model on the server and deployed the same version of tensorflow on tx2, but when i run the trained model with gpu on tx2, i get a lot worse than on server, but running model cpu of tx2 does not cause this problem.
it gives an error when i am calling the unknown shape tensor into the dynamic_rnn function
when using a `for` loop in a @tf.function (with autograph), such as `for i in tf.range(10)`, `i` is undefined after the loop ends, unless it is defined in the global scope, in which case it takes this value.
if i run list_local_devices() in order to get the number of gpus available while almost all of memory is already allocated on all the gpus, the process crashes due to there 's no problem at all if at least one gpu has substantial amount of free memory.
error message: > i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2 fma > w unable to create streamexecutor for cuda:0: failed initializing streamexecutor for cuda device ordinal 0: internal: failed call out of memory; total memory reported: > w unable create streamexecutor for cuda:1: failed initializing streamexecutor for cuda device ordinal 1: internal: failed call out memory; total memory reported: > f attempting fetch value instead handling error internal: no supported devices found platform cuda
when creating a custom model with a `build()` method (e.g., if one of the model 's layers has a size that depends on the input shape, such as a reconstruction layer), the model cannot be trained unless i explicitly call `build()` with `tf.tensorshape()`.
moreover, i cannot specify an `input_shape`.
when calling `keras.model.fit` on a custom model, it seems the model is passed a graph-mode tensor instead of an eager tenser, even when in eager mode.
this is a followup to the issue phofhyperlink raised in mit 's tensorflow labs.
when i use a tensorflow tensor created using `tf.constant` as input to keras `model.predict` it gives an error.
however, when i directly feed in the same tensor to the keras model it gives output as expected.
when creating a custom model, simply creating a `mean` metric in the constructor and setting it as one of the attributes leads to an exception when fitting the model.
moreover, if i use the metric, it seems to burn batch size into model, so it behaves like a stateful model.
on gpu adamax from appears to apply nans to variables.
seems fine on cpu and bizarrely if any ops are put as a control_dependency to the apply_grads call then everything seems fine.
`multi_gpu_model` fails to parallelize lstm model.
things i 've tried without success: - setting `cpu_relocation=true` parameter - disabling eager mode
training a model defined on the cpu raises a when using a machine with a gpu in tf 2.0 nightly.
there is no usage of op named _
global_step)` may not be recording summaries unless `global_step % n == 0`, however, it is running the code within its block anyways.
in my opinion this is a huge waste of resources, especially when image logging is being done and transformations are required.
furthermore, there is no information of this behavior on the documentation.
finally, it defeats the purpose of the function.
i have standard ae network with pixel shuffler layer.
on `tf.1.11.0-cuda 9` maximum batch size for my gtx 1060 6gb is `132` but after upgrade to `tf.1.13.1-cuda 10` tf cannot handle same batch size it produces oom error and maximum now `90` for my card.
currently i am using distributed tensorflow to connect two machines one with only a cpu(ps) and one with a cpu and gpu(worker), the worker machine runs only the cluster and server commands followed by a join command and then remains idle, the training algorithm is run on the ps machine after defining cluster server then training is run but i get "e not found: tensorflow device gpu:0 was not registered" between each epoch of training it is not run on gpu (the delay is very big)
estimator model fails if passed a as a parameter to the runconfig object.
our text recognizer is based on crnn model and ctc.
it was developed based on tf 1.3 and performs well.
recently we tried to upgrade the tensorflow to tf 1.9 and find the recognizer inference time increases a lot.
we identified the slow down is caused by op using this way: for this line of code: decoded, prob = seq_length) running time for session.run(logits) is fine, however session.run(decoded) is very slow we verified the problem occurrs on tf versions 1.12, 1.9, 1.8, 1.5, 1.4 we also verified model ckpt trained with tf 1.9 running inference fast with 1.3. similarly, model ckpt trained with 1.4/1.5 also running fast with 1.3 it looks there no big change for beam search decoder op between 1.3 and 1.4. googling problem got no luck either.
can you please take a look?
could provide pb file a small inference script if needed.
since pb file size big, do not upload it at this point thanks.
iterating a shuffled dataset returns elements in the same order each time it is iterated over, and the order is unaffected by the random seed.
i follow "quantization aware training" tutorial in tensorflow to retrain my already trained floating point model.
and i wrote a muli-gpu version to do the stuff.
actually, i have written two snippets of training code, the first code snippet is : phofcode the second snippet of the training code is: phofcode
running estimator training as follows, should only keep 1 checkpoint file version (latest) instead all checkpoints are kept.
session_config = tf.configproto() = true run_conf = runconfig( model_dir=out_dir, save_summary_steps=400, keep_checkpoint_max=1, tf_random_seed=none, train_distribute=none, device_fn=none, protocol=none, eval_distribute=none, ) estimator = tf.estimator.estimator( config=run_config, params=params )
i train neumf model in distribute environment, and i find that tensorflow hang all the time when training finish.
below is some detail about distributed training: model : `neumf` dataset : `ml-1m` num_worker : `2` num_gpu_each_worker: `4` strategy : reduce_alg replace `pscpu/pscpu` with `nccl/xring` nccl version the distributed training run 120 steps then tensorflow quit when use default all reduce alg `pscpu/pscpu` of `mirrorstrategy`.
and when replace default all reduce alg with `nccl/xring` , distributed training run 120 steps, but tensorflow hang all the time.
below is screen output of two conditions: log when normal exit: phofcode log hang: phofcode compare two log, tensorflow do not continue to save checkpoints and output final loss use `nccl/xring` reduce alg.
how to solve this problem, thanks.
toco converter is throwing an error when trying to convert resizenearestneighbour op.
tensorflows raises warnings like: phofcode
there seems to be some issue with `tf.function`.
the decorator transformation of the function for some reason leads to a wrong behavior in one of the reshape operations, but it is unclear why that happens.
here is a colab demonstrating the issue.
when `feature_columns` argument is specified, `tensorforestestimator` will throw the following error during a `fit()`: phofcode
i cannot load a model containing a custom initializer, or a custom regularizer, or a custom constraint, if they are defined as regular functions (rather than by subclassing the appropriate classes).
receive an attribute not found error on
if you download the python 2.7 cpu-only official whl file (following phofurl phofurl you will see that it requires protobuf>=3.6.1.
however, after you extract it and see the include files, they are protobuf==3.6.0.
i get an exception when i try to create a metric based on a symbolic tensor when using the functional api:
when i call a method decorated by `@tf.function`, i get an error if it uses `super()`: `runtimeerror: super(): __class__ cell not found`.
traceback (most recent call last): file "t.py", line 16, in <module> model(data) file line 620, in __call__ outputs = self.call(inputs, *args,
gradient operations on ragged arrays requiring an implicit raggedtile op result in operation has no attr named '_xlacompile'.
even a script as simple as below have thrown 3 deprecated warnings phofcode phofcode phofcode phofcode
run_metadata is empty when a session run fails.
when trying to build a simple model in eager execution mode using sgd as an optimiser the following exception is thrown: phofcode
conv3dtranspose layer is producing an error message when the input layer dimension size is given none.
when fitting a model with `loss="poisson"`, i would expect reported `loss` and `poisson` values to be identical.
profile data of language model: node name | requested bytes | total execution time | accelerator execution time | cpu execution time
using tf lite with gpu developer preview, when i run inference on my mobilenetv2 retrained model (with two outputs) on most devices it works nice.
however on galaxy j5 (odler device), it crashes with: e/androidruntime: fatal exception: inference process: bazinac.aplikacenahouby, pid: 12367 internal error: failed to apply delegate: warning: op code #40 cannot be handled by this delegate.
only the first 67 ops will run on the gpu, and the remaining 10 the cpu.gpudelegate prepare: no egl error, but eglcreatepbuffersurface failednode number 77 (gpudelegate) failed to prepare.
i have written a face classification code which uses mobilenet (depth 80) model.
but when i ran the model after 8-10 min, tensorflow is throwing oom allocation error.
raises a `valueerror` when the model to be loaded uses a `keras.losses.loss` subclass, such as `keras.losses.huber`.
i 'm trying to feed tensors produces by a parseexample op when inference an exported graph to avoid tf record of input examples.
i have got the correct prediction results.
but the performance is not consistent with my expectation.
there is several idle time in the timeline.
and the feed tensors are not processing in parallel.
while using eager execution keras convlstm2d seems like not initialized.
after that we tried implement our model using gradient tape and it seemed fine but after loading checkpoint results was different than expected.
the second issue probably has something in common with the first, so i 'm posting code to reproduce first one and logs.
generates random jpeg quality on graph creation, which is then fixed.
depending on the batch size, during training there is eventually (after 1000 or so steps, sometimes a lot more steps with smaller batches) a cuda-related crash, with one of a number of error messages.
when the crash happens, sometimes the entire display on my computer goes black and resets.
this happens despite: - no oom errors on startup - using a bare-bones example cnn - trying with and without limiting the available memory with option allow_growth=false)` - restarting machine reinstalling latest nvidia drivers reinstalling cuda trying cuda 9 (tf 1.12.0, conda env) and cuda 10 (tf 1.13.0rc2, manual installation) i 'm beginning to suspect that this is hardware issue but gpu has never had any problems and can still run high intensity games for hours no problems.
there are also no abnormal temperature or other sensor readings in diagnostics when this happens.
is there anything i can do to narrow down whether this is hardware problem?
the reproduce code as below: phofcode the photo below is the behavior in my computer.
model inference time is the same for gpu and cpu (~5500 ms)
the runoptions and embedding_lookup will lead to cpu memory leak.
this will only happen in tf 1.12, tf 1.10 didn't have this problem.
i thought `tf.gather` have almost same functionality, so i test it and it seems no problem at all.
i'm not sure if #21348 is related to this problem.
my problem will only occur with runoptions.
i couldn 't open cuda library cupti64_100.dll f attempting to fetch value instead of handling error failed precondition: could not dlopen dso: cupti64_100.dll; dlerror: cupti64_100.dll not found
here is the code below which should work (it works with keras-team/keras).
i write a very simple 2 layers lstm model working on 2 gpus.
the model has no specific meaning, and i just want to test lstm network.
i randomly generalize some data as inputs, and take reduced sum of logits as loss.
then i compute the gradients and loss.
would get some warnings like below.
and the same situation happens when run tensorflow neural machine translation tutorial phofhyperlink , which is the reason why tested this simple code.
phofcode if don 't set would get error.
i am using keras bundled with tensorflow.
when i apply my own (rather obscure) loss i get a
when using phofcode with phofcode during forwarding validation data it still makes use of random which changes the state for the next train operation and so the training procedure is not deterministic.
i want to convert a model to tflite with quantized uint8 as inference type.
i add the min/max nodes to the graph by calling then i load the trained values (both the weights and min/max values).
i try to convert model with tfliteconverter, but get errors of this kind: `array conv2d/biasadd does not have minmax information, and is not a constant array.
cannot proceed with quantization.` look at my graph (the one modified by and don't see min/max nodes for biases.
so i'm teaching a course and decide to use `tensorflow.keras` instead of keras.
i then noticed how the two systems handle the `placeholder` and `variable` are different even though they are using the same backend.
i was trying to compile a simple adding function: phofcode until this line, both keras and `tensorflow.keras` allow me to run without errors or warning.
however, for the following code, keras can pass while `tensorflow.keras features an error: phofcode the error is: invalidargumenterror traceback (most recent call last) in <module>() 10 print(a, b) 11 ---> 12 13 14 # notice that add_function created is independent of variables in __call__(self, inputs) 3074 3075 fetched = -> 3076 3077 3078 return in __call__(self, *args,
on gpu, the _conv3d_transpose_ operation shows a huge spike in terms of execution time when increasing input size from `(1, 128, 128, 128, 16)` to `(1, 256, 256, 256, 16)`.
this particular change makes average execution time without the first run change from
when training a keras model containing a custom layer whose behavior depends on the training phase, `training` is not set by the `fit()` method, and `k.learning_phase()` is `0`.
i can work around this issue by calling before creating the model, but oddly this does not work if i call _after_ creating and compiling the model, and just before calling `fit()` method.
it looks like `learning_phase` is "hard-coded" into call() method 's graph when model is built?
), 0)` returns `nan + nan j`
when i uninstall tensorflow 1.12 and install tensorflow 1.13 via: `pip3 uninstall tensorflow` `pip3 install tensorflow==1.13.0rc1` then run my model, i get a very strange error which looks like this: phofcode
when running the code in > caching the features extracted from inceptionv3 attributeerror: 'tensor ' object has no attribute 'numpy '
swapping the position of operands gives different results: - `1e-8 + 1.0 - tf.identity(1.0)` results in `0.0` - `1.0 - tf.identity(1.0) + 1e-8` results in `1e-08`
i am running a toy matrix multiplication example ( code here phofhyperlink and timeline can be found here phofhyperlink ).
if u look at the timeline, operations named
first changes computed variables to constants, then converts readvariableops to identity node.
however, in rnn models such as gru and lstm, some variables are attached to enter op which are incompatible with the generated constants.
i tried to train the model by using image datasets
segfault when running an estimator test
the estimator apparently does not learn the data, which can be observed by a constant loss (in evaluation) and a stagnant loss during training.
i am trying to add to tf.nn.rnn_cell.grucell.
before adding the wrapper, the program is completely running normally.
after adding the wrapper, the program reports an error shown in traceback below.
the error `tensor objects are only iterable when eager execution is enabled` is confusing me, since i have tried enable eager execution and results are same.
i have changed grucell to lsmmcell or other rnn-related cell and results are same.
i have tried multiple tensorflow versions and results are same.
the code am modifying is same as this code phofhyperlink , and what am trying to add attentioncellwrapper between 126 127 lines.
i am trying to build the tf lite detect app phofhyperlink with using nnapi, but when i set usennapi to
using the following code snippet to create an interpreter with gpu delegate phofcode calling the run() of the interpreter with following lines of codes: phofcode if these two code snippets are called in two different threads, the thread which calls interpreter.run() will be blocked.
if these two code snippets are called in same thread, interpreter.run() will be executed properly and output correct results.
i deployed one chief, one ps and one worker with protocol 'grpc+verbs '.
this case uses only cpu device.
the master and ps works properly.
the worker meets an assertion, and exits.
switched to protocol grpc, the code works well.
the result of rping shows that rdma configure is good.
in the tensorflow 2.0 preview, the `tf.rnn.dropoutwrapper` and `tf.rnn.residualwrapper` wrappers are incompatible with cells from `tf.keras.layers`.
it raises an error for missing a `zero_state` method.
i want to be able to compute the top k results for different values of k in a batched evaluation metric.
for sample 1, compute top 2, sample 2 compute top 1, etc.)
tf.nn.top_k is throwing a `valueerror` despite clearly using the `topkv2` op under the hood.
the following toy example illustrates problem: phofcode i get following error: `valueerror: this input must be scalar but has rank 1 for 'topkv2_20' (op: 'topkv2') with input shapes: [3,4], [3] and with computed input tensors: input[1] = <2 1 2>` diving into source code, it would seem that topkv2 op is _precisely_ intended for varying values of k, however, something at a higher level is preventing my code from utilizing this functionality.
additionally, there is a `top_kv2` function in `gen_nn_ops.py` that not exported use.
lines 1235, 1326, 1459, 2535 of nn_ops.py includes the following error check: if isinstance(output_shape, (list, np.ndarray)): however, if output_shape is a tuple instead of a list, then the error check is skipped.
file line 3496, in _fused_batch_norm message), none) file "<string>", line 3, in raise_from could not find valid device for node.
node: {{node fusedbatchnorm}} = fusedbatchnorm t=dt_double, data_format="nhwc", epsilon=0.001, is_training=false phofhyperlink all kernels registered for op fusedbatchnorm : device= 'xla_gpu '; t in [dt_float] device= 'xla_cpu '; t in [dt_float] t [dt_float] t [dt_float] device= 'cpu '; device= 'gpu '; [op:fusedbatchnorm] $
i 'm currently testing the avx512 builds.
there are some tests that are known to fail on these builds.
patches are pending for these issues (#21676) but they are not yet merged.
the weird thing is that the tests have been passing on my machine for the last two weeks even though they should fail.
i did some digging and it turned out that the tests only pass if sharding is enabled.
they fail as expected if sharding is disabled.
so if, on an avx512 build, i do bazel test --config=opt --cache_test_results=no -- test passes and if i do bazel test --config=opt --cache_test_results=no -- test fails, as it should.
it turns out that is passing when sharding enabled as not all of sub-tests being run.
this issue seems to have been caused by commit #87cc788 which changed unit framework.
as far as i can tell, filtering for sharding now happening twice, once in googletest.py and once in absltest.
the issue can be reproduced on my machine, a 10 core skx core i9 follows here 's how to reproduce issue phofcode then check shard 18. see phofcode note 0 tests run.
with tf 2.0 preview, the converter is not able to convert a tf.keras model to tflite either through python or command line
a keras custom callback typically has an access to the "model" object.
there are many use cases where the access to model in a callback is required.
when mirroredstrategy is used there is still access to "model" object however its type is not `tf.keras.models.model` rather it `distributedmodel` when training such a model tensorflow generates following warnings - phofcode inside the custom callback in this scenario self.model.layers set to [] i.e.
reference: phofurl according to reference, it draws samples from a truncated normal distribution centered on 0 with stddev = sqrt(2 / (fan_in + fan_out)) where fan_in is the number of input units in the weight tensor and fan_out is the number of output units in the weight tensor.
i generated them with fan_in = 100, fan_out = 100 and ploted their histogram.
i printed out smallest and largest from sampe and i got these should be 2!
i am using golang enviroment to load tensorflow model and run.
my tensorflow model is mobilenet.
i faced issue in memory allocation.
following the phofurl tutorial, which is based on phofurl all the compilation steps succeed.
i am also able to invoke the compiled graph, producing correct prediction results.
a non-compiled predict of a single image using restnet50 takes 5ms, a compiled version takes ~140ms.
note: i have ran ./configure via a terminal to use force cuda support (such option is not accepted in the example).
during the training of a simple "toy-example" classificator using tensorflow 2.0 and tfds, i 'm trying to use the keras callback in order to log the results and to be able to use tensorboard.
when the first epoch of training ends i get following error: resource does not exist.
calling normal.log_cdf(x) with a float64 raises a typeerror exception.
when i run tf.gather, it returns invalid argument error.
i found a document saying that tf.gather returns zero when there is an invalid argument on gpu.
even though i am using gpu for running my code, it produces an invalid argument error when i put -1 as an input of tf.gather.
i trained `ssd-mobilenet-v1-fpn` from tensorflow object detection api with default configurations.
as its inference was pretty slow on cpu, i checked using tensorflow 's profiler advise and found out the main time consumption was from batch normalization(took 140 ms in total).
therefore, i tried to use tensorflow 's graph transform tool phofhyperlink to make if faster.
but the inference speed actually slowed down after the graph transformation.
to be specific, inference takes * 0.53 seconds for original inference graph * 0.56 seconds for optimized graph why is the case?
an additional information is that size actually increases too: original is 43mb and optimized is 44mb.
not sure it will be useful.
here code i used: phofcode
i am trying to use weight normalization with data-dependent initialization as reported in salimans kingma 2016 phofurl i use two approaches: 1 sharing the variables between initialization and convolution, 2 creating initializers that will be used in convolution to create the variables accordingly.
it seems there are substantial differences in tf0.12 and tf1.12.0 in terms of initialize a variable throught the value of another tensor.
for example, the following code (with 6 layers) is very slow newer tf1.12.0.
approx 2 sec tf.0.12 approx 70 sec tf1.12.0 the creation of graph tf.1.12.0 is progressively getting slower for each extra added layer..
type in the code below and watch memory usage increase.
unnecessary access to gcp metadata endpoint, 10 retries, and lots of logging.
tflite outputs don 't match with tensorflow outputs
following code is a snippet from dataset.window documentation phofhyperlink phofcode calling `iterator.get_next()` throws following error: phofcode
in phofhyperlink hann window is calculated as blow: `(*window)[i] = 0.5 - 0.5 * cos((2 * pi * i) / window_length);`
after successfully training and exporting the trained wide and deep model from here: phofurl tried to freeze the exported model using freeze_graph.py.
the frozen graph got generated without errors.
however, when tried to load the frozen graph using the call got following error: file line 430, in import_graph_def raise valueerror(str(e)) valueerror: input 0 of node was passed float from incompatible with expected resource.
after inspecting frozen graph, we found that resourcegather op is receiving float form const node (which used to be varhandleop before freezing) but resourcegather is expecting 'resource ' data type.
the issue was resolved after changing this line phofurl by removing if statement and calling convert_to_tensor() unconditionally.
if x is a list of any size, or a tuple of size >= 2, which contains tensors, np.array(x) is unusable as it runs exponentially longer than the tensor.numpy() function.
passing flattened tensor into rnn results in an error: "shape (608, ?)
must have rank at least 3" more: i have been trying to find some way to squash down my data via cnns.
i keep hitting strange dimension issues, where tf complains about none.
tf.keras.utils.multi does not work with wgan-gp model i also try on keras(not tf.keras) and it was work!
creating a dataset using tensorflow_dataset and passing it to a function decorated with `@tf.function` gives the error: phofcode
tf.layers.flatten uses shape, stridedslice, pack ops to build the new shape for reshape.
these ops are not constant folded.
when run in the debugger, if there is a nan in the loss, the debugger crashes.
calling `tf.linalg.solve(a, b)` with `b.shape == (n,)` causes a segfault.
assume that there is tf.assert inside of decorated function, which is independent of input argument (then defun get same graph function from graph cache, right?)
however, after assertop invoked once, following function calls are not be called.
it directly raise `cancellederror`, which is described as below log information.
gradienttape.gradient() returns gradient for only the last variable in var_list, which is a strange behavior different from tf.gradient()
attempts to restore a frozen keras model including an "embedding" layer fail.
the same problem appears when and `tf.import_graph_def()` are used.
the error is: traceback (most recent call last): file line 3, in <module> tf.import_graph_def(sg) file line 507, in new_func return func(*args,
when using a custom metric, the metric is computed on training data and validation data together.
if using the code expects non keras optimizer, if using "standard" behavior (compiled graph) the code runs fine.
see the code and logs below.
tflite_convert fails to convert simple conv2d model with batch norm file to .tflite.
the trained model was frozen to a .pb file using freeze_graph.
it fails with the following errors: tflite_convert traceback (most recent call last): file line 426, in import_graph_def graph._c_graph, serialized, options) # pylint: disable=protected-access input 0 of node was passed float from during handling of the above exception, another exception occurred: traceback (most recent call last): file line 10, in <module> sys.exit(main()) file line 442, in main app.run(main=run_main, argv=sys.argv[:1]) file line 125, in run _sys.exit(main(argv)) 438, run_main 122, _convert_model converter = 109, _get_toco_converter return converter_fn(
can 't be loaded by tf.saved_model_loader - it states phofcode
running the `train()` procedure provided below breaks while using the `@tf.function` decorator.
we load tabular data from a database to a training script, and this tabular data contains quite a many columns (30 - 40), most of them scalar.
we observe performance that seems slow, given the simplicity of the data.
to demonstrate and isolate the performance bottleneck, i created a simple c++ dataset op that returns just specified number of int scalar tensors, and we get only about 1000 - 1500 entries / second (calls of get_next) with this fake data.
these overheads lead to high cpu utilization and limit the throughput our training.
my code with more results can be seen here: phofurl the key code is simply: phofcode the c++ op is compiled with -o2 optimizations.
i am suspecting overhead is due to tensor allocations, because throughput changes almost linearly with number tensors (when n sufficiently large).
i am looking for advice if using different allocator would help, for example.
buid a simple sequencial model using keras.
it works well with keras `model.fit()`.
now converting this model to be used with estimator` then using `train()` then the code crashed with: 'meanmetricwrapper ' object has no attribute '__name__ '
submitting on behalf of @victordibia.
keras model.fit() does not reset validation dataset iterator between epochs.
thus, when specifying `validation_steps` < `validation_dataset_size / batch_size`, then every evaluation will be performed on a different set of examples.
i tried to build deeplab (input_image + float32) and succeeded # modified export_model.py # line:77 phofcode s. i converted below command and succeeded tflite_convert --output_format=tflite --inference_type=float --mean_values=128 --std_dev_values=127 but.
when i try to run on android, i saw below issue.
` internal error: failed to apply delegate: warning: op code #38 cannot be handled by this delegate.
only the first 32 ops will run on the gpu, and the remaining 88 on the cpu.gpudelegate prepare: first dimension is supposed to be batch and always equal 1.node number 120 (gpudelegate) failed prepare.` what 's wrong with my model?
# can you tell me about how can i do that?
# can you tell me about your tflite_convert command?
the documentation phofhyperlink of the `tf.saved_model.save()` function shows a code example to save a custom model with a `serve()` method, but it fails: 1. when subclassing the `keras.models.model` class, it is compulsory to define a `call()` method (or else you get `notimplementederror: when subclassing the model class, you should implement call method.`.
2. when saving the model as shown in code example, i get `valueerror: exporting an object with no tf.saved_model.save(..., signatures=...) argument specified, and with more than one @tf.function-decorated method attached to it: 'serve '].
the signature keys for these functions are ambiguous.
specify signature functions explicitly.` however it works if i define `call()` method and i specify signature explicitly.
saving a keras model with `tf.saved_model.save()` works, but the `method_name` is empty, so deploying the model to tensorflow serving fails.
import tensorflow.keras,code can not work.
import keras,the same code run perfectly.
- using tf hub to retrain inception v3 for mnist images - converting the retrained model to quantized model - deploy the converted quantized model to android app - the quantized tf lite works wrong like below: image phofimage
notebook1: save the keras model like this (abbreviated steps): from import inceptionv3 base_model input_shape=input_shape, classes=nb_classes) base_model.layers.pop() base_model.outputs = output = output = new_model = model(base_model.input, output) notebook2: load the keras model with tf.keras new_model attributeerror: module has no attribute 'slice '
first you should know that this piece of code is compiled with the gcc flag : whenever i am compiling for the raspberry-pi target because i was not able to build tensorflow for arm32bit with the new abi version.
i 'm having troubles running a piece of code on my raspberry-pi that actually works just fine on my local computer.
the error comes from the declaration of a tensor::tensorshape supposed to contain dimension of my input tensor, prior to filling a tensorflow::tensor with my data contained in a cv::mat.
it crashes on declaration line with error phofcode it seems i am giving wrong input dimension.
which is weird as exact same line works juste fine on local machine : phofcode (sparing you variable names).
the 64 are uint16_t while 1s are int 4 bytes.
could error come from 32bit architecture raspberry-pi ?
looking at tensor_shape.cc phofcode the (crashing) 249th line is check : `check_le(0, new_num_elements);` so it looks that something doesn 't pass....
i am using tensorflow_probability (0.5.0) to sample points (random walk metropolis algorithm) that i want to use as inputs for my neural network.
the sample points are shape=(), dtype=float32) so i use tf.eval() to get the actual float number.
after multiplying the input with my first layer i get as an object shape=(1, 16), dtype=float32).
because i assumed that protobuf files were much slower than .tflite files i tried to converted a .pb to a .tflite: thus i downloaded the r1.95 branch of tensorflow and converted the from ( phofurl to a .tflite using phofurl and phofurl this worked well!
the .pb file worked well with my android app, but after copying the .tflite model to the app/assets directory of tensorflow mobile demo app (from phofurl and replacing .pb file in code with ` private static final detectormode mode = detectormode.tf_od_api; private static final int tf_od_api_input_size = 300; private static final string tf_od_api_model_file = private static final string tf_od_api_labels_file = following runtime error appears: ` e/androidruntime: fatal exception: main process: mypackage.myprocess, pid: 15491
when i try to run (and any other code that imports from `contrib`) i get the following exception: phofcode
from tensorflow 1.13, there is integration between autograph and tf.eager.function.defun (alias of tf.function in tf2.0 maybe?)
the logic flow is if programmer enables `autograph` option as `true` in `defun` decorator, function in will be called with `autograph=true`.
inside that function, it will call `converted_call` which is defined in `autograph.impl.api.py` and convert py_function to graph_funcion via autograph lib however, inside `converted_call`, it should shows some log information about conversion current version, but my simplest example, it does not actual execution.
moreover, if i add some redundant print statement inside converted_call, it prints nothing.
i think rewrapping autograph wrapper line inside of does not wrap autograph's `converted_call`
using `xla.compile` on a gradient coming from a while loop within `tf.custom_gradient` seems to generate an inverse permutation op with undefined shape.
while all intermediate tensors appear to have fully defined shapes, `xla.compile` will still raise an exception: phofcode
i have a dataset contains labels with true and false, and a column of english test.
labels are converted to 1 and 0 as below: phofcode the data are split into train_df and test_df then created an input_fn for training.
phofcode when i reach phofcode it shows unsupported feed type` but after i change the label to floats by df[ 'review '] = df[ 'review ']*1.0 phofcode the train function works again.
but this problem occurs occasionally, estimator.train works well if i have review labels in integer with 0 1 as the data in the first table.
program exits with the following error message: w op_requires failed at retval_op.cc:70 : internal: error evaluating input 0 as a compile-time constant.
error: unsupported type for iota w op_requires failed at xla_ops.cc:408 : internal: error evaluating input 0 as a compile-time constant.
error: unsupported type for iota t [{{node = _retval[t=dt_float, index=9 phofhyperlink ]] traceback (most recent call last): file line 1334, in _do_call return fn(*args) file line 1319, in _run_fn options, feed_dict, fetch_list, target_list, run_metadata) file line 1407, in _call_tf_sessionrun run_metadata) error evaluating input 0 as a compile-time constant.
error: unsupported type for iota t [{{node = _retval[t=dt_float, index=9 phofhyperlink ]] t [{{node = targs=[dt_int64, dt_int32, dt_float, dt_int64, dt_int64, dt_int32, dt_float, dt_float, dt_float, dt_float], tconstants=[dt_int32, dt_int32, dt_int32, dt_int32], _xlanumconstantargs=14, _xlanumresourceargs=0], phofhyperlink ]] t [{{node = tensor_type=dt_int32, phofhyperlink : file line 446, in <module> tf.app.run(main=main, argv=[sys.argv[0]] + unparsed) 125, run _sys.exit(main(argv)) 356, main flags.bleu_threshold) 274, train_schedule 354, train loss hooks, saving_listeners) 1207, _train_model return hooks, saving_listeners) 1241, _train_model_default saving_listeners) 1471, _, loss estimator_spec.loss]) 671, run 1156, run 1255, run raise 693, reraise raise value 1240, return self._sess.run(*args,
when i try to use a layer as an activation function in a `dense` layer, i get an `attributeerror: 'tensor ' object has no attribute 'numpy '`.
this did not happen a few days ago in tf 2.0-preview.
it failed on importing tensorflow
i followed nmt_with_attention.ipynb phofhyperlink on tensorflow tutorial.
saved the weight by phofcode then i load the weight on my mac.
over multiple iterations with a re-compile of model, fit() time continuously increases.
if the re-compile is commented out, fit() time remains constant.
i found a similar bug in the js project but not sure if it's related: phofurl
does not do weight decay when using `mirroredstrategy` along with `tf.get_variable`
tf.estimator using mirrored strategy takes forever to start training.
details are provided here phofurl after asking the question i additionaly tried different versions of tf/cuda, no changes.
also i was finally able to see the start of the training, it took about 40 minutes!
when using the api for training models on the tpu, providing a `validation_split` parameter does not remove the validation samples from the training set.
this causes reported validation loss/metrics to be artificially high since we are training on samples that should have been withheld.
when converting a pb model file (that includes batchnorm layers) to tflite, the resulting tflite graph continues to contain batchnorm layers in the form of mul and add ops.
i have the following issue when importing tensorflow in python3 since some days ago: phofcode
tensorflow can build graph successfully, but when it comes to flow the data into model and update parameters, it always gives the segmentation fault error.
the error is as the following.
(float32_ref 256) [256, bytes: 1024] (float32_ref 1) [1, bytes: 4] (float32_ref bytes: (float32_ref 128) [128, bytes: 512] 128) [128, 512] 128) [128, 512] [73728, 64) [64, 256] 64) [64, 256] 64) [64, 256] 3x3x64x3) [1728, 6912] 3) [3, 12] total size of variables: total bytes of variables: [*] reading checkpoints... [*] failed to find a checkpoint [!]
load failed... segmentation fault (core dumped)
i 'm using api and trying to make it work in a distributed environment.
according to the doc, the configuration should be simple: set correct tf_config and pass the distributestrategy.
i have 1chief, 2worker, 1ps, 1evaluator, the training starts with no error, everything seems right, but training does not stop correctly.
based on my observation, when training data is not balanced distributed among workers and chief, more specific, when chief has fewer data.
it will exit without waiting other workers.
i draw a picture to show problem: phofimage
the load does not get shared by all the available cores(mostly one core at a time), as a result the performance is poor.
error in below is outcome of before and after the optimization.
dimension of final output for vgg is [?, 3] dimension of final output for yolo is [?, 1, 1, 3] `softmax = labels=y, dim=-1)` print(softmax) run 1 vgg output [ 0. after optimization [ 0.
0. yolo output [[[ ]] [[ ]] [[ ]] [[ [[ after optimization
when using using a batchsize which equals to the number of samples, i get an out of range error: phofcode i think this due to the iterator wanting to construct a second batch, but there 's nothing left due to the size of the first batch.
in other words, it 's impossible right now (i think) use tf.data pipeline without minibatching.
train model using tf and tf.keras
note: while the example code is python, this problem also exists once the graph is deserialised and appears to be language independent.
this issue originates from trying to serve a tensorflow model containing to check the occurrence of a word in a vocabulary.
the memory usage of the model when making predictions increases to ~8x size of vocabulary on disc (350mb vocab on disc, 3gb+ total memory usage when running).
the cause of this seems be size hash table created when initialising index_table_from_file.
using debugger, memory increase occurs on initialisation.
but instead it throws this error: > assertionerror: called a function referencing variables which have been deleted.
this likely means that function-local variables were created and not referenced elsewhere in the program.
this is generally a mistake; consider storing variables in an object attribute on first call
when using `tf.while_loop` (v1), we are able to call gradients in the body of the while loop.
in other words, we were able to embed the training into our tensorflow graph.
if we replace `tf.while_loop` with `while_v2.while_loop` then we end up getting an error: `in op input types ([tf.float32, tf.float32, tf.float32]) are not compatible with expected types ([tf.float32_ref, tf.float32, tf.float32])` since this shows that gradient descent is being fed a list of length 3, but the placeholders have a length of 2, i think it might be something around counter getting added.
however, i'm not certain and any insights you guys have would be useful!
`attributeerror: 'mirroredstrategy ' object has no attribute 'read_var '` when trying to use mirroredstrategy.
i was switching in the app between cpu and nnapi and checked the execution time.
in case 1 the cpu was faster then nnapi in case 2 both cpu and nnapi gave approximately the same execution time.
no real difference in was seen.
the tensorflow will raise `the graph couldn 't be sorted in topological order` error when executing the optimizer.
while the error doesn 't occur on tensorflow 1.10.0. this error is also posed here phofhyperlink by another user.
the code below produces a `typeerror`.
the bug seems to rely on a combination of: 1.
`tf.cond` 2. a `tf.contrib.summary` in one of the branches 3.
i have tried to optimize my custom frozen model to run on tensorrt using however, the output was larger than the original model (my model is around 200mb, but after converting it's more than 2gb).
when i increased `minimum_segment_size` to 30 or 40, the size was samller but still slightly bigger than the original one.
`tf.function` raises an `oserror` exception with the message `"could not get source code"` when i run it in a python shell.
the error does not occur in jupyter or ipython, and it does not occur when i revert back to tf 1.12.0.
`tf.function` converts almost identical functions into completely different graphs.
it seems like a bug, but perhaps it 's just a bit too complicated for me.
if it 's working as expected, then i think the documentation really needs to be expanded, with detailed examples and clear guidelines.
float16 matmul is way slower than float32 matmul on cpu
my use case is running tensorflow as a c-library using go interface.
i am performing an image inferencing task using a model (`.pb file`).
i see that my `libtensorflow.so` build works fine on arm7 but fails on arm6 with the following error: phofcode
when called, this function creates a concrete function to call for the specific types and shapes of the arguments, by calling and subsequently, it reuses the same concrete function when it encounters the same types and shapes again.
unfortunately, when passed python scalars or arrays of scalars, it seems to create a new function for each different value, instead of each different type (see code example below).
similarly, it creates a new for [1.0, 2.0], and [3.0, 4.0].
i understand that there may be good technical reason for this, but even if there is, i fear that users will pass python scalar values or arrays (instead of tensors or numpy arrays) to @tf.functions they won 't understand why their system blows up (slowed down by all traces new concrete functions piling up in ram all time).
i used seq2seq to train an rnn model, and during training the process randomly hangs.
it seems to be associated with randomshufflequeue or fifoqueue because they seem to create threads.
phofcode to debug, i start another thread to print the current stacks.
when it does not hang, it prints: phofcode when the process is hang, seemingly in deadlock, the only change is main thread 's stack, with top of stack being `join`.
phofcode i am not quite familiar with python multi-thread.
perhaps due gil, this info was not printed when process hanged, but when i interrupted process with ctrl+c.
if you have any ideas on these kind of debugging, will be very grateful hear.
it returns : [[[nan nan] [nan nan] [nan nan] [nan nan]]]
high-level: i 'm trying to built a tflite interpreter in c++ running on a pixel 2. i have successfully loaded my model.tflite binary using the buildfromfile() api.
however, i now want to read the model from the assets/ directory.
to do this i believe i am supposed to use the buildfrombuffer() api.
i 'm using buildfrombuffer() api in model.h using a mmapped buffer and not getting a valid model back.
am supposed to supply some other kind of buffer?
get an error about bad model identifier.
i tried to test some autograph 's features with rnn.
at first, i tried tensorflow 's official example phofhyperlink with python 3.6 colab notebook with tensorflow version as r1.12.0.
however, it emits type error as typeerror traceback (most recent call last) in _apply_op_helper(self, op_type_name, name,
i am running a keras model within a custom estimator and giving the size of a hidden layer as a parameter.
after each run with the estimator, checkpoint is stored, saving the weights of that run.
however, if the architecture of model is changed between runs, instead of receiving an error due to incompatible checkpoints, tensorflow is loading old checkpoint into new model even though new dimension is being considered.
iterating over the elements of a `raggedtensor` results in an after the last element.
i got the tflite model which is of size 85 mb and built an apk file which comes with size 113 mb and i quantized the model with following command phofcode it gives me a tflite model of size 21 mb and when i use this quantized model to build an apk it generates an apk file of size 135 mb
tflite app crashes with log shown below.
i implemented a spectral normalization regularizer that can be passed as the [kernel_regularizer] argument in the [tf.layers] module.
this implementation causes three problems which are not expected.
1. slows down the first epoch of the training process by around ten-fold.
2. training process gets slower after every epoch by around 1.5 times.
(no new ops are being added in graph and this was made sure by using finalize() method of graph within session.)
3. eventually crashes after a few epochs and throws following internalerror caused by op defined at: file "main.py", line 70, in <module> gran.initialize() file "main.py", line 33, in initialize config=self.config) file line 32, build_network file line 45, build_model training=self.training) 38, build_model = reuse=false) 37, build_model _x = filters=256, kernel_size=[7,7], nstraint, strides=1, padding= 'same ', 417, conv2d return layer.apply(inputs) 817, apply return self.__call__(inputs, *args,
it is only available in `tf.math.log()`.
the use of the param 'max_value ' in phofurl produces the a quantized graph with the fakequant op just after the relu op and not after automatically inserted clip op.
the official keras api is documented at keras.io, and it shows an example using `model_to_dot()` ( here phofhyperlink ).
the example uses however, this example does not work when using `tf.keras`, since there is no package.
i can work around this issue by using: `from import model_to_dot`, but i believe importing from `tensorflow.python` is frowned upon and may break in the future.
i am trying to use tensorflow gpu version to train and test my deep learning model.
but here comes the problem.
when i train my model in one python file things go on well.
tensorflow-gpu can be used properly.
then i save my model as a pretrained on as `grapg.pb` format and try to reuse it in another python file.
then i got the following error messages.
using tf.keras in jupyter (or a python shell) with the `tensorboard` callback, some problems occur if i interrupt training.
these problems did not occur in tf 1.12: 1. i get an exception if i call `fit()` again on the same model: phofcode i can workaround this problem by recompiling the model.
2. also get an exception if interrupt training, then delete the logs directory, then try to use `tensorboard` callback on same logs directory again: phofcode this one is more severe: sometimes it recovers by itself after a while.
sometimes is doesn 't and cannot find any way to manually recover from this error, other than restarting jupyter kernel (or python shell).
the `model.summary()` method does not display the
raises `typeerror: 'inputlayer ' object is not iterable`
i wrote a custom estimator to implement fm algorithm and used train_and_evaluate to perform distributed training (4 ps and 100 workers).
when i set partitioner to none, the training process quickly converged to an expected test auc 0.87. however, when i either used fixed_size_partitioner or with modified min_slice_size, the test auc stayed below 0.64. different learning rates and batch sizes didn 't help.
am i missing anything in distributed tf?
when evaluating a keras model, the progress bar randomly stops before 100% (however, the loss and metrics returned by the function are correct).
also, it does not end with a newline.
say you train an estimator using phofhyperlink .
the `input_fn` to your estimator returns a tf.data.dataset phofhyperlink .
you may want to write a small program to make predictions over a subset of data to sanity-check model training and gain more insight into how your estimator makes predictions, without having go through the trouble of deploying your model.
you may want to, for simplicity, use eager execution do this.
something like: phofcode this currently throws the following error: phofcode
i use yolov2 to train my model,and transplant it to mobile phone,in office demo phofurl it crash,output this bug: failed to run tensorflow inference with inputs: input], outputs:[output] e/androidruntime: fatal exception: inference process: org.tensorflow.demo, pid: 17423 concatop : dimensions of inputs should match: shape[0] = vs. shape[13] = t [[{{node concat_9}} = concatv2[n=19, t=dt_float, tidx=dt_int32, phofhyperlink ]] at method) it confused me long time,can anyone help me ,thanks a lot
i try to fit a `sequential` model with both a training dataset and a validation dataset.
works fine in tf 1.12, but the same code now fails in (`total_loss` attribute not found).
i get a `typeerror` exception when i call a `dense` layer which was created with
when using `from_generator` to create a `tf.data.dataset` instance, reading from a one_shot_iterator and not explicitly closing the session object, i observe a warning: phofcode
i was following the keras tutorial on tf website and i was trying out my custom layer, which was basically the same as in the tutorial.
class mylayer(layers.layer): def __init__(self, output_dim,
internalerror: cudnn launch failure : input shape
i used to quantized trainning a cnn network, , and used freeze_graph.py to generate frozen pb file successfully but when i used toco to convert the pb to tflite ,,error occured shown below array slice, which is an input the conv operator producing the output array conv1/relu, is lacking min/max data, which is necessary for quantization.
either target a non-quantized output format, or change the input graph contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about accuracy of results it seems that toco can not support tf.slice op ??
there are automatically generated wrapper classes for graph operations that provide a neat interface and consistency in practice.
however, we found that for certain operations that required multiple inputs (i.e.
merge, concat) the generated class was incorrect as it took a single input instead of an inputlist.
for example in merge.java: phofcode
the output `a_sqrt_1` of tf.sqrt phofhyperlink in the provided snippet is incorrect.
concretely, when `a` is a tf.variable phofhyperlink and `a_sqrt` is run together with `a_scaled`, the output `a_sqrt_1` is `a_sqrt_2
i'm trying to feed a cloud tpu (v3) some data.
however, whenever the total feed size goes above 2gib, i get the following crash inside libtensorflow: phofcode
code runs for a while and then suddenly generates nans.
code runs normally when xla is disabled.
cuda-memcheck caught a bunch of these: ========= invalid __global__ read of size 4 ========= at in fusion_514 ========= by thread (959,0,0) in block (10,0,0) ========= address is out of bounds device frame:fusion_514 (fusion_514 : 0x880) saved host backtrace up to driver entry point at kernel launch time phofhyperlink
i am using go api for tensorflow on raspberry pi.
`go test` fails with following error mesg: phofcode
variables copied using have unknown shape.
this make this function unusable and useless.
meta graph exported by export_meta_graph cannot be imported by import_meta_graph
returns nan when used with float16.
multiple call to same sess.run(op) return different results.
calling `model.predict()` with a `tf.data.dataset` as input is only possible when compiling the model first and also providing labels.
the `predict` method is supposed to not require compiling before use, but the method `_standardize_user_data` ( called at phofurl raises the following exception if model is not compiled, and a (x,y) tuple is returned from the dataset: > runtimeerror: you must compile a model before training/testing.
if datset only returns input tensor(s), x, another exception raised: > valueerror: please provide model inputs as a list or tuple of 2 or 3 elements: (input, target) or (input, target, sample_weights) received <next_element>
1. is not restoring the input checkpoint if there is multiple "estimator.train" method calls.
probably because the restore of the input checkpoint is done during the init of hook.
it restarts from beginning of dataset.
2. if both mirroredstrategy and are used, one step is by passing when input checkpoint restored.
it restarts from (state step + 1).
currently, i trained tensorforest on a relatively large train data (1.5m examples, 1024 features) with 500 trees, max_nodes.
moreover, i compared its performance with scikit-learn implementation.
it seems that the tensorforest is inferior to scikit-learn extratrees implementation both in time and space.
i retrained a ssd_mobilenet_v1 as described in this guide phofhyperlink .
so i converted my model to .tflite as shown under "running on mobile with tensorflow lite" when i try to run it on my phone, the app just crashes.
so i installed android studio and tried to run it from there.
now i got following error: `process: pid: 12449 cannot copy between a tensorflowlite tensor with shape [1, 10, 4] and a java object with shape [1, 4, 4].
at at at at the important line, think, is
i am trying to run an .pb file on c++.
the objective is to run and get the prediction result.
however, after the `session->run` is performed, i try to make an flat of the output: when i try to do the flat, system execution is interrupted, error are:` check failed: dtype() == expected_dtype (9 vs. 1).` to understand result of output, i tried print content of my output, but i cannot.
hope that estimation result is tensor output, but cannot read result.
process finished with exit code 139 (interrupted by signal 11: sigsegv);
the formula to compute the trace of a matrix with `einsum` computes instead the sum of all the elements of the matrix.
in the predict fuel efficiency: regression lesson and use ml->regression), the normalize method is called to normalize the entire dataset, including the one-hot columns.
gives a phofcode when called on a foldl operation.
does not manages foldl operation.
maybe it is because of the recursive structure of the operation.
i am using java api for prediction and i tried to create a tensor of string type using the following java api: phofcode however, when calling i got the following excetion: phofcode i looked into the code: phofimage it uses as the size of element in byte array.
however, size of string element is not fixed.
i'm running tensorflow.keras through a docker container and displaying the output in a jupyter notebook that is outside of the container (using amazon sagemaker notebooks).
regular keras printed progress bars correctly, but switching to tensorflow.keras now spams my screen with control characters when trying to print progress bars.
for example when keras is downloading imagenet weights for a model it outputs this: phofcode
copying from keras issue 11858 phofhyperlink , as requested by @ymodak.
hi, not sure this can be labelled as a bug, but it's problematic.
batchnormalization seems to silently produce nan weights when training a `multi_gpu_model` if the training dataset size is not a multiple of `batch_size`.
for example, with a training dataset (1825, 401, 401, 3), validation dataset (140, 401, 401, 3), `epochs=1`, `batch_size=16`, `gpu_number=2` phofcode the training apparently goes fine phofcode but the weights have nans, e.g.
phofcode i think this happens because the dataset of 1825 gets split into sets of `batch_size=16`.
so there's going to be set of 1 image, and maybe that doesn't work with batchnormalization.
inference with the trained model gives phofcode a solution is to make sure that number images is multiple `batch_size`.
i created a custom keras model (cnn network with resnet layers).
i defined the input to accept variable sized grey scale images (none, none, none, 1).
when i created tensorflow lite model i was forced to provide input shape parameters (eg., per documentation should be able to change the input size using method.
have to do this accept variable sized images.
however this is not working ... keep getting this error in android studio.
internal error: unexpected failure when preparing tensor allocations: d1 == d2 || d1 == 1 || d2 == 1 was not true.node number 21 (add) failed prepare.
keras model with ctc on tpu gives error
when a layer has multiple nodes (shared layer) in calling the method `layer.output` or `layer.output` returns only the first node created.
in tensorflow 's guide about feeding a model with dataset: input tf.data datasets.
the way given by the example to use dataset to train and predict cannot work properly.
i am not able to access any data from my private s3 bucket, i just keep getting this error notfounderror: object s3://bla/bla does not exist i have checked that my local machine has aws credentials in ~/.aws/credentials not only that i have also tried setting environment variables phofcode it still doesnt let me access my data from s3
i have a custom metric `def y_pred): return - y_true)))` while training i get the following output: > train on samples, validate on 40385 samples > epoch 1/5 > - 132s - loss: 3.6781 - root_mean_squared_error: 3.6781 val_loss: 3.6463 3.6463 > epoch 2/5 129s loss: 3.6528 root_mean_squared_error: 3.6528 val_loss: 3.6287 3.6287 epoch 3/5 143s loss: 3.6352 root_mean_squared_error: 3.6352 val_loss: 3.6210 3.6210 epoch 4/5 134s loss: 3.6223 root_mean_squared_error: 3.6223 val_loss: 3.6369 3.6369 5/5 after running val_label, verbose = 2)` i get the following output: for `model.metrics_names` [ 'loss ', after running `from sklearn.metrics import mean_squared_error batch_size=256))))` i get
while using a `tf.estimator.estimator` class, each separate call of `.train`/`.evaluate` results on extra cpu ram permanent usage.
in my use case, every time i call `.evaluate` i get another 200mb ram allocated on my cpu (even though i 'm training on the gpu) ram, which then never gets free.
this ultimately results in `memoryerror` since after a few training/validation rounds the ram gets full.
checked out the release 1.12 branch of the tf repo, configured bazel (configuration is below) and ran `bazel build -c opt --config=opt compilation fails at error c2338`, it seems a static assert is failing: phofcode
i am trying to load a 1.4gib binary saved model and am getting an error saying that the protobuf message is too big i.e.
i've created a tensor set to zero, except a single entry at [:,-1,-1,0] that was set to a large number 1e10.
i've then convolved the tensor with a random kernel.
when the batch size is small (e.g.
5) then the output at [:,0,0,:] is zero (because the input array is zero there), but when batch size is large (e.g.
100) then these entries contain numbers significantly larger than zero.
this only happens on gpu.
session run cost 4s on gpu: phofcode session run cost 4s on cpu: phofcode
importing tensorflow causes cpus allowed list to single core on main thread.
that is, when i import tensorflow (even not using it).
it will break down multi-thread computing of numpy and gensim (only using single core for matrix multiplication or learning model)
i want to use the tensorboard callback in keras to show the embeddings in the projector view
when initiate the runconfig in the following code with only chief and ps, a error happends.
environment variable: {u 'environment ': u 'cloud ', u 'cluster ': {u 'ps ': u 'chief ': u 'worker ': []}, u 'task ': {u 'index ': 0, u 'type ': u 'ps '}} phofcode error tracing, phofcode
there are two documented ways to use the tpu infeed ops: 1. place them on the cpu device and set device_ordinal to the requisite device 2. place them on the tpu device and leave device_ordinal empty the first way works fine, second way does transfer data to device, but then blocks, never returning control to client.
of note, this deadlock only happens if there is currently an op running on tpu device (via xrtexecute, but potentially others).
when applying a keras layer 3 or more times using within the run config, training with a tensorflow estimator hits an exception when applying the layer at graph build time: file line 314, in __call__ output = super(layer, self).__call__(inputs, *args,
attempting to receive multiple outputs from a lambda layer.
when passing them through the model api, causes them to have an unexpected behavior.
if all the outputs of that lambda layer are stored into a single variable, passing that variable as output for model fails with `assertionerror: could not compute output tensor...` using index[0] gives me behavior i would have expected when receiving with no index specified.
using index 1 or 2 gives same error as not giving an index.
tldr: index 0 gives behavior you would expect from not having an index.
index 1,2 give error same as no index
throwing the error same as the header of this issue phofcode
i 've added gpu tracing for distributed training to get more accurate gpu trace.
profiling is not working when two machines(workers) run with full_trace in a distributed mode(ps).
however, if only one machine tries it then it works.
i 've seen this line ( phofurl is it related to this issue?
only one process can profile for a distributed job?
i have a 1d convolution layer whose weights are using weight normalization (salimans & kingma, 2016).
the weights to the convolution are processed using the following equation: `w = g * v/2-norm(v)`.
after running the constfold optimizer, these operations on the weights are still present, even though they should be folded.
i use to make my code be able to run on tpu,but it took 170 hours to finish an epoch while cpu took the same time and gpu took only 40 hours per epoch.i tried to adjust batch size but nothing changed.and i 've tested the input function may take up 20% of the run time when running on gpu, so i think it 's maybe not the main reason.
when multiplying (`*` operator) a sparse tensor `s` with rank `n` with a dense tensor `d` with rank `m`, where `n > m` and `s` and `d` have different but broadcast-compatible shapes, then tensorflow attempts to perform the multiplication producing and incorrect sparse tensor as a result with the shape of `s`.
when using the pre-canned `dnnclassifier` together with i noticed that a `tf.graph()` instance is left allocated in memory _after_ an `estimator.train()` call terminates.
when running `estimator.train()` in a loop n times, there will be n `tf.graph()` instances allocated in memory.
therefore, calling `estimator.train()` in a loop will lead to unbounded memory growth, and eventually, an oom error.
to track down the root cause of this behavior, i have used the `objgraph` phofhyperlink dependency together with the `iris premade estimator` phofhyperlink example.
the script is attached code section.
after 5 iterations of `train()`, following is a visualization of all `tf.graph` instances that exist memory (a total of 5): iter-4 phofimage you can clearly see that root cause is `_slots` attribute on that saves reference to some variable associated with graph every time `train()` runs.
i have noticed this behavior with and i would be willing to bet most provided optimizers save some state optimization procedure run into this same issue.
have observed this issue does _not_ occur optimizers _do not_ save state (see below).
would also be willing to bet issue not specific `dnnclassifier` and occurs many different pre-canned and custom estimators.
however, have not yet investigated reproducing issue on other types estimators.
i get the following error message when i set tf_cudnn_use_autotune=0: e the primary convolution algorithm failed memory allocation, while a secondary algorithm is not provided.
i found that setting the same base_random_seed for tensorforest generate different classification performance.
conversion to fp32 using tensorrt fails on with: phofcode with conversion to fp32 fails with: phofcode for conversion to fp32 succeed but with int8, the error is similar to `vgg19` with fp32: phofcode
inference accuracy for resnet50 and densenet has dropped to zero on cpu.
this commit phofurl was found to be causing the regression.
i 've built a tensorflow custom estimator using keras layers, and it worked fine initially when i used `train_and_evaluate`, but i 'm seeing now that when i am using `train_and_evaluate`, it just checkpoints at step 0, the loss being `none` and moves to the evaluate phase.
i 'm not sure why this is happening, and any suggestions about what to look for would be great
when creating a custom `tf.keras.model` with custom `build()` function, the variable name scopes seem not to propagate correctly in `tf.keras.dense` layers.
eager execution isn 't working on a jupyter notebook with gpu.
have tried restarting the kernel multiple times.
i get a valueerror: must be called at program startup.
i have an image and 3 points.
i want to rotate the image and the points together.
to this end, i rotate the image by some angle a and the points by same angle.
when a is fixed to a python scalar (say pi/3), rotation works fine (cf.
image below, blue dots are on dark squares).
rotation phofimage when angle is randomly chosen with `angle = tf.random_uniform([])`, there is an offset between rotated and rotated points.
we compile a .so file, loosely based on the docs in phofurl we can then compile a binary using that .so however, at runtime it hits a segfault.
_however_, if we build the .so with `--compilation_mode=dbg` the binary works as expected.
i get the following error message only under
start from yolo-v3( phofurl meet correctness issue, the tf output did not consistent with the previous version
i implemented the same model (2-layer fully-connected neural network + batch norm to reduce initialization effects) using 1. low level apis (graphs and sessions), and 2. high level apis (estimators) i tested the two implementation and tested it on the mnist dataset.
the estimator shows a much slower training and a significantly lower final recognition error.
(estimator: first epoch~92%, final~96%, sess+graph: first epoch~96%, final>98%)
my model runs out of memory, but just after 3 epochs.
when i run this code, it is super slow.
it takes minutes to generate the model input1 = x_a = input1 for i in range(6): x_a = tf.keras.layers.conv1d(8 * (2
when i tried to convert scalar shape placeholder tensor( shape = () ) as an input, converter triggers "indexerror: list index( shape list idx ) out of range"
my use case is the build the graph using python interface for tf and export that graph as a pb file.
this graph is then imported in go environment using go interface for tf.
it seems tf.layers.flatten is inaccessible using the name, when name is provided as part of tf.layers.flatten 's argument.
however, assigning name to it using tf.identity works.
i build the tensorflow1.4 with gpu and -c dbg version, but when run test code or some example, meet cuda memcpy failed, but if you build with -c opt and work normally and no issue found.
i have already test with ubu14+ tensorflow1.4, or ubu16 with tensorflow1.2/1.4, both of them are failed, the faild log as below, can you give me some help.
------ jensen @ubu16 alexnet_imagenet$ python myalexnet_forward.py warning:tensorflow:from initialize_all_variables (from is deprecated and will be removed after instructions for updating: use instead.
w the tensorflow library wasn 't compiled to use sse4.1 instructions, but these are available on your machine could speed up cpu computations.
w the tensorflow library wasn 't compiled to use sse4.2 instructions, but these are available on your machine could speed up cpu computations.
w the tensorflow library wasn 't compiled to use avx instructions, these are available on your machine could speed up cpu computations.
i successful numa node read from sysfs had negative value (-1), there must be at least one numa node, so returning numa node zero i found device 0 properties: name: geforce gtx 750 ti major: 5 minor: 0 memoryclockrate (ghz) 1.1105 pcibusid total memory: 1.96gib free memory: 1.92gib dma: 0 0: y creating tensorflow device (/gpu:0) -> (device: 0, name: geforce gtx 750 ti, pci bus id: tenpython: void const void*, std::size_t) const: assertion `err == cudasuccess ' failed.
consider the following setup (see the code below) 1. create a dataset using 2. use it to initialize a iterator 3. repeat the previous step several times in a single session observed behavior: memory consumption grows linearly with number of iterations
i am trying to optimize the speed of my code when training on imagenet and started by looking at the data pipeline.
i am using tfrecorddataset(), and use both prefetch() and num_parallel_calls for mappings.
here i just load in the batches without performing any action on them.
i seem to get reasonably good results on aws p3.8 (32 vcpu, 4 nvidia tesla v100 gpus), although it's still a bit below the ~3000 images/second that i've seen mentioned elsewhere.
however, if run exactly same code on aws p3.16 (64 vcpu, 8 gpus), throughput * decreases * significantly, even while cpu use is higher.
*the two systems perform as expected other tasks.
* did some very elementary benchmarking of both systems: - calculating number of primes, spawning a number of threads using as expected, performance between p3.8 and p3.16 appears to be identical when n_threads < 32, 3.16 performs better when n_threads = 128.
- reading a file with lines (and repeat 100 times): identical performance this suggests to me problem is with tfrecorddataset, but if there is any other benchmarking that makes sense, please let me know.
both systems allow two threads for each cpu.
launched another p3.16 instance with a single thread per cpu, so that number virtual cpus is identical p3.8 instance.
this did not appear make any difference.
i try to import graph from a metagraphdef proto that contains a cudnnrnn cell, the error below raises: traceback (most recent call last): file "test.py", line 21, in <module> saver = file line 1674, in import_meta_graph meta_graph_or_file, clear_devices, import_scope,
phofcode prints phofcode when run in a graph, the output is the same.
tensorflow raises a typeerror when creating a dynamic_rnn with tf.int32 type in its input and state.
when changing the type to tf.float32 the error is not raised.
i 'm migrating my codebase to a tensorflow 2.0 compatible version, thus i 'm replacing all the `tf.layers` call with their `tf.keras.layers` counterpart.
i want to continue using static graphs and monitoredsession to train my models (since i do have all the input pipelines defined with tf.data.dataset and all the training script defined to work in this way).
however, there 's a huge problem when a layer adds some update operation (like the batchnormalization layer).
the actual behavior is that update operations (of moving mean and variance) are not called when training model.
this can be ok in a full-keras solution, where connection among models, update operations and so on, are managed by `train_on_batch` + `model.compile` + `model.fit` call (that do some magic in background).
in fact, @fchollet said this is by design: phofurl but since i don 't want migrate full keras-based solution, how can i handle updates?
found some theoretical workaround (collected update operations `model.updates` + collect inputs `model.inputs`, loop over inputs, feed correct input execute with sess.run updates), but those are really ugly they don 't work: can trigger parameter update, but time-step of execution is wrong solution does not converge: moreover, when model becomes complex (like in example of bigan below) it can be real mess code become unmaintenable.
the test program throws an exception retval[0] does not have value` in session run.
however, it completes normally if `episode_length` is halved, the `simplernn` layer is commented out or the `batch_normalization` layer is commented out.
the problem also goes away if i replace the `randomdataset`-derived dataset with one built with `from_tensor_slices` from constant data.
i created a custom tensorflow model and converted it tflite with `converter = [img], [out])` `tflite_model = converter.convert()` the process was fine.
then i tried to test the file with interpreter.
but when i run `interpreter = i get the following runtime error: numdimensions(input0) < 4 was not true.node number 14 (pack) failed to prepare.`
i optimize a tensorflow graph with precision_mode = 'fp32 ' # "fp32","fp16" or "int8" graph_def =
i train a model using slim in tensorflow models with the flowers dataset and the large nasnet.
this were run on the official tensorflow docker images.
on my tesla v100 for tensorflow 1.8.0-devel-gpu-py3 i got around with tensorflow 1.9.0-devel-gpu-py3 a maximum at with the current 1.12.0-devel-gpu-py3 a maximum at
when i want to train my own dataset (without url).
i already commented --data_url but i got positional argument error.
when running mobiletnet int8 model, starting from the third tflite's output mismatches with another framework.
i looked into it and found that phofhyperlink generates unexpected results with the calculation `multiplier = input_scale * weight_scale / output_scale`.
by * unexpected * i mean the math result is wrong, on my machine at least.
log example of parameter of is as below.
since `input_scale` and `output_scale` are the same, `real_mulpliter` shall be same as `filter_scale` - more even, these parameters shall be same for most conv ops in quantized mobilenetv1.
x: tf.random_shuffle(x), num_parallel_calls=1)` is non-deterministic.
different runs of the test program produce different output.
it's as if the `random_shuffle` is ignoring the random seed.
although adding a seed argument to random_shuffle makes the problem go away, random_shuffle should still use graph-level random seed when seed argument is unspecified.
following the docs at: phofurl when using `ds_file = the docs works as expected, but when using function then then the first statement in the print loop is repeated infinitely.
it can be seen from phofurl that the `cudaroot()` function is used by tensorflow to: 1. get the path to libdevice library 2. get the path to ptxas binary however, the return value of `cudaroot()` function is a constant that's determined during compilation.
as a result, tensorflow's xla cannot work properly, if it is used on a machine where path to cuda is different from compilation machine.
i am trying to add adversarial training to my `tf.keras` model.
for this, i added a custom loss function, which feeds the model the adversarially perturbed input and adds the cross-entropy to the loss.
the problem is that feeding model a tensor in custom loss function leads to a `typeerror: argument of type 'nodependency ' is not iterable`.
i have reduced it a minimal example that simply feeds model zeros below.
if i call `model(model.input)` before custom loss function is called, it surprisingly works.
the loss calculation is not correct when working with `tf.keras.`.
after building the model, `tf.keras.fit_generator` phofhyperlink should accept `(inputs, targets, sample_weights)` as inputs.
however, if i multiply the `sample_weights` by 10000, the loss doesn't change.
the bug seems to appear from 1.10 version of tensorflow onwards e.g.
i build a model with this code: phofcode then i froze the model.
in the first try i converted it to tflite directly, in a second try i set the = true` option in the conversion process to quantize my model and in a second try optimized my model for inference before converting and quantizing.
the code for tflite conversion is following: phofcode the code for optimizing for inference was following terminal call: `python -m --input alex_frozen.pb --output alex_frozen_optimized.pb --output_names=output` all my models, including plain, unconverted model is uploaded here testing: models.zip phofhyperlink
typeerror traceback (most recent call last) in <module>() 17 18 ---> 19 line_thickness=8) 20 21 plt.imshow(image_np) typeerror: takes at least 7 arguments (8 given)
see below, which i ran on a osx mojave macbook pro (early 2015), ipython running python 3.5, tensorflow 1.10.0: in [1]: from tensorflow.keras.models import model runtimewarning: compiletime version 3.6 of module does not match runtime version 3.5 return f(*args,
- prepared & trained a keras sequential model based on this example script phofhyperlink , which contains dropout layers - passed the trained model to a kerasmodelwrapper phofhyperlink , a class provided by the cleverhans phofhyperlink library - instantiated a saliencymapmethod phofhyperlink attack object on the wrapped model, and attempted to craft an adversarial example with it - tensorflow encounters this error: phofcode removing the dropout layers from keras model prevents this error from occuring.
the import library is missing.
i tried to regenerate it myself from to build my custom operators, but tf.load_op_library throws the exception and does not find the library given in argument.
the exception appears in tf_loadlibrary.
when i use tf.load_op_library to load my library with two ops, only one of them appears in the loaded module.
so i am trying to get checkpoint path, but i am unable to.
error: instance of 'checkpointstate ' has no member
when i save and reload a model that has multiple inputs, but some aren 't fed into any layers (they are used in a custom loss function), not all inputs are created in the new model.
opening the hdf file of the saved model shows that the input layers aren 't saved in model configuration.
getting this error when i am tring to start the training in images.
`tf.scatter_update` keeps failing with typeerror
scatter_max does not work with mirroredstrategy since v1.11.0.
just to test after installation, i tried importing tensorflow in python, but got an unexpected error (see code section) .
when taking the gradient respect to a variable and reduce mean the outcome should be 1 - (1/(# of reduced dimension)) however it does not happen.
i am using the functional api of keras models, and tpu does not yet support multiple inputs layers.
originally was not an issue.
tensorflow now creates multiple devices, see log.
i installed baseline for openai and this started after that.
i reinstalled tensorflow and the issue persists.
my scripts no longer execute because of this.
after the release that allow a different output shape from the input in code that applied this function stopped working with a value error.
for exampleon previous versions, using eager execution this worked: `image = random_translation, 'nearest ') ` but after this change i get a `valueerror: the truth value of an array with more than one element is ambiguous.
use a.any() or a.all()`` on on the condition of the line of where this condition is triggered (caused by empty output shape call in phofcode
datasetb does not correspond to the order of shuffled dataset a.
both trainable and untrainable variables are updated by the optimizer
when i run the following program, which is supposed to be able to differentiate between images of cats and dogs using a convolution model, the program gets stuck at the fit method.
it is returning a value error: dimension -3 must be >= 0. i believe all the information in fit method is correct...
the distributed training is conducted with one ps and three workers.
i deliberately slow down one worker (add some sleep in the program of the worker), then i find the other workers can surpass the slow worker by 1~3 iterations
when i run this command to compile using a `libtensorflowlite.so` i built: -std=c++11 minimal.cc -ltensorflowlite -lflatbuffers` i get an error `undefined reference to >*) '`
source code: main.py phofcode when run `time python main.py 1` and `time python main.py 2`, get 4.6s and 1.2s
there's three issues here: 1. missing propagation of error messages, crashing the tpu host 2. it not compiling for shapes other than `u8[1024]` or multiples thereof 3. it crashing on infeed even for `u8[1024]` at the moment, compiling (via xrtcompile) crashes the tpu host for anything that uses uint8 datatypes, unless it's one dimensional and the size is a multiple of 1024. using julia frontend: phofcode phofcode and though compiling succeeds for one dimensional uint8 vectors of size 1024, trying to infeed crashes: phofcode
fp-16 multi-gpu training with cpu as local parameter server is converging in single process mode, but diverging loss value (nan) adding another loopback ps process with grpc.
consistent behaviors for both resnet-50 and vgg16.
i convert model to .tflite, i know the model 's training input size is i want to use different input tensor size, such as so i use the resizeinputtensor() function,
tf.manip.roll executes on cpu and is very slow
i 'm working on image segmentation, with 5 classes.
after computing logits, i want to compute softmax activations : `probabilities = tf.nn.softmax(logits)` with logits of shape which shouldn 't be a problem since softmax internally reshapes it to a 2d tensor.
however, i get the following error.
> check failed: ndims == dims() (2 vs. 4)asking for tensor of 2 dimensions from a tensor of 4 dimensions i cannot reproduce the issue outside of docker on ubuntu18.04 and tensorflow 1.11, everything works as expected.
this happens at inference time, using a frozen model.
`dataset.window` documentation has a few examples of which all crash in the process of graph construction (i.e.
i 'm using tensorflow speech_command example 's tiny_conv model from here phofhyperlink .
i 've trained it and froze it (with quantization set to true) following the official tutorial phofhyperlink .
the model itself is simple: one conv2d layer and one fully connected layer.
now, i send the froze .pb file to tensorflow lite.
i can successfully get the .tflite file.
however, when i check the model, original tiny_conv model 's conv2d layer becomes a depthwiseconv2d layer.
( i have tried several toco converts on other models, they do not have this behavior. )
i 'm wondering how could this happen?
have .pb model shown below, followed by .tflite model: freeze phofimage tflite phofimage as you can see, conv2d layer becomes depthwiseconv2d.
when using the concat operation with mkl_dnn, the operation fails if run after a convolution with the following error message: phofcode
my model 's accuracy and loss are evaluating to 0.
i built a neural network with the following code: phofcode i loaded the weights from a .npy file and saved the resulting pb file.
i saved the resulting pb file with this code: from tensorflow.python.tools import freeze_graph phofcode
tensorflow conv2d with nchw with mkl slower than nhwc wihout mkl on cpu platform.
in eager mode, training a linearregressor estimator calling `model.train(..)` fails with the following error: phofcode
tf.matmul is failing to multiply matrices above a certain size, with error: `failed to run cublas routine cublasgemmbatchedex: i have confirmed using `nvidia-smi` that the gpu is nowhere close to running out of memory.
i 've set up a cnn and have created callbacks for model checkpointing, tensorboard visualization, and early stopping.
i have ~408k samples in my `tf.data.dataset`, am using a batch size of 256, and train my model with 1,000 steps per epoch with 1000 epochs.
when i do this, everything trains correctly on ml engine but i don 't get logging like i normally do.
the time taken per epoch hugely varies from 10 min to 2 hours from 1st epoch to 2nd.
below are the accurate arguments used in `tf.dataset` creation and its consumption by `tf.keras.model`.
when using tensorrt to convert a graph that contains a specific structure, the output of the graph would be wrong compare to the output of from the original graph with same input.
sometimes output can be as large as infinity or some very big numbers.
when xla is enabled, cuda contexts are created on every device visible to the cuda driver (excluding devices with cuda_visible_devices works, but in configproto does not).
during inference of variable sized examples with tensorflow mkl system memory consumption gradually increases.
if a server application is running long enough to go through a lot of examples of same rank but different shapes it would eventually run out of system memory.
after further investigation setting the phofhyperlink to either 0 or 1 does not help.
most mkl primitive factories ignore and even some that know about it may choose to ignore it based on other heuristics like batches smaller than 32 phofhyperlink for example (i am not sure this is intended behavior).
these "do_not_cache" heuristics phofhyperlink on the other hand don 't seem to follow the described logic in the comments above replacing "or" for "and".
cannot save a tf.keras model if trained with mirroredstrategy either by calling save_weight or by a but does work if mirroredstrategy is not used.
i 'm porting a ml model ( phofurl ) implemented in pytorch to tensorflow (using the keras layers, knowing that tf 2.0 will come soon).
the first implementation was using the eager version to do the train, but the model collapses, nothing works.
the same model definition has been reused but it has been used to first define a static graph and then train model: it works perfectly.
configuring tf to build with cuda support and choosing all the default option for all the other questions in ./configure including the default for nccl "please specify the locally installed nccl version you want to use.
[default is to use phofurl build fails with "/bin/bash: cuda_toolkit_path: unbound variable" this has been broken since this commit: phofurl running in docker container: (for ease of setup) export tf_need_cuda=1 "" | ./configure bazel build --config=opt --config=cuda failed with: error: executing genrule failed (exit 1) /bin/bash: cuda_toolkit_path: unbound variable target failed to build use --verbose_failures see command lines of failed steps.
info: elapsed time: critical path: 93.66s info: 3606 processes: 3606 local.
failed: build did not complete successfully
flops is always 0 when specifying batch dimension
pypi packages for tensorflow-gpu didn 't work for me on ubuntu 18.10, but i (somehow) managed to compile the latest tensorflow.
i then tried to run some code that i was working on before (and which used to run fine) and got the following error: using tensorflow backend.
tensorflow: 1.12.0-rc0 traceback (most recent call last): file line 10, in <module> model.add(cudnnlstm(64, input_shape=(10, 39), return_sequences=true)) file line 165, in add layer(x) file line 532, in __call__ return super(rnn, self).__call__(inputs,
i 'm trying to run an official resnet model on cifar 10 dataset from phofurl where i replaced mirroredstrategy by parameterserverstrategy in phofurl as following phofcode it throws an exception phofcode
when a matrix multiply is called such that one of the input tensors is of data type fp16 and declared sparse, the function returns incorrect results.
this error causes the failure of the sparse_matmul_op_test (found at
the betainc_op test (within fails because one of the gradient values is nan.
i have two models that i have trained using keras.
the two models use the same architecture (keras' densenet169 implementation), however have a different number of target classes (80 in one case, 200 in the other case).
* converting both models to .pb format works just fine (identical performance in inference).
* converting both models to .tflite format using toco works just fine (again, identical performance in inference).
* converting the 80-class model to .tflite using quantization toco works reasonably well (<1% drop top 3 accuracy).
* converting the 200-class model to .tflite using quantization toco goes off rails (~30% drop top 3 accuracy).
i'm an identical conversion process for both models.
`toco --graph_def_file frozen_graph.pb --output_file quantized_graph.tflite --inference_type float --inference_input_type float --output_format tflite --input_arrays input_1 --output_arrays output_node0 --quantize true`
the script runs slow but fine.
however, cpu memory of the system is slowly clogging up and system will fail.
tensorflow automatically replaces my maxpoolingop by one using another data format which is not supported, subsequently.
this throws the `invalidargumenterror` as seen below.
the problem arose when upgrading from tensorflow 1.8 to 1.11 and from the error it seems to be caused by a when isolating the issue to reproduce it, it seems that `max_pool`, `dataset` and `squeeze` are involved to raise the error.
the only related (closed) issue i could find: #19497 "nhwc convolution sometimes incorrectly considered nchw" ` invalidargumenterror (see above for traceback): default maxpoolingop only supports nhwc on device type cpu t [{{node label_image_dilated}} = maxpool[t=dt_int32, data_format="nchw", ksize=[1, 1, 3, 3], padding="same", strides=[1, 1, 1, 1] phofhyperlink ]] t [[{{node oneshotiterator_2}} = output_shapes=[[?,?
on gpu, tf.scatter_update does not update the variable if the type of the variable is defined as float.
however, the same code works without a problem if code is executed on cpu.
if you run code i provided here for you, you will get random values like one that comes in following every time you run code: , dtype=float32), 6] this problem does not happen on a cpu, or if variable type is set to integer.
`tf.nn.conv2d_transpose` with the same inputs produces different outputs on different calls on gpu.
incorrect gradient computation when placeholder weights are involved.
in a situation where two variables are involved, optimization of one of the variables leads to wrong gradients for the other variable when placeholders weights are used.
when using `tf.keras` with `eager` execution enabled, i don't have the control over learning rate of the optimizer i.e.
i am unable to change the learning rate on the fly.
if you are using pure `keras` with no `eager` mode, then you can change learning rate of keras optimizer in following way value)` but as `keras` optimizers aren't supported in `eager` mode, i don't have any control over learning rate of my optimizer.
`cumsum` has small (possibly rounding or something similar) errors, and these errors accumulates quickly as the sequence length increase, e.g.
a time sequence of length 1000.
i 'm trying to process pixel images real-time on a low-powered pc.
i 've been profiling my code by programmatically recording millisecond timings.
we 've created a cae.pb file and it seems to run properly, and the time that the session.run() call is made in rapid succession (using the same session each time), the time it takes decreases (up to a certain point).
specifically, when i process first image takes 1400ms, second image 1150ms, third image 900ms... at 7th our 8th image it levels off at 350ms per processing.
the problem is that this speed increase only increases if i push images to tensorflow in rapid succession.
if i pause for more than approx 350ms, then time it takes process next (with *same session* being reused whole time), jumps back up 1400ms.
i 'm assuming that decreasing time is due autotune running.
however, autotune seems "forget" it 's session values if i don 't keep running and fed with new data constantly.
am doing something wrong or is this a bug?
is there runoption or sessionoption that i 'm unaware of controls how long until autotune (or what i 'm presuming autotune) "forgets"?
a very simple model with `bidirectional` layer will stop work after we enable the eager execution mode.
`toco --output_format=tflite --inference_type=float --std_dev_values=1 --mean_values=0` failed traceback (most recent call last): file line 11, in <module> sys.exit(main()) file line 320, in main app.run(main=run_main, argv=sys.argv[:1]) file line 125, in run _sys.exit(main(argv)) file line 316, in run_main 121, _convert_model output_data = converter.convert() 309, convert 225, toco_convert 107, toco_convert_protos (stdout, stderr)) runtimeerror: toco failed see console for info.
i before removing unused ops: 135 operators, 224 arrays (0 quantized) i after removing unused ops pass 1: 127 operators, 212 arrays (0 quantized) i before general graph transformations: 127 operators, 212 arrays (0 quantized) f check failed: bn_op->inputs[1]) && bn_op->inputs[2]) && bn_op->inputs[3]) batch normalization resolution requires that mean, multiplier and offset arrays be constant.
running deep model and some wide linear models.
inference performance is very bad.
2-4x slower relative to running inference without mkl
gpu memory is very high when using init_from_checkpoint and reuse=true with resource variables, in certain cases.
tfprof unable to parse the profile generated by profilecontext.
training stops with the attached error log when retraining mobilenet v2 ssd model.
when verbs support is enabled, getting phofcode
i have trained a 2 classified resnet18 when i use it for inference on different machine, the time is as follow: about 2.0s on my conputer about 1.6s on my workmate 's computer (win10, tensorflow-gpu of version 1.9, python 3.6.6, cuda9.0, nvidia geforce gtx 1080 ti 11264mib) about 0.65s on a server (ubuntu16.04, tensorflow-gpu of version 1.9, python 3.6,2, cuda9.0, nvidia geforce gtx 1080 ti 11171mib), about 0.22s another server (ubuntu16.04, tensorflow-gpu of version 1.8, python 2.7.13, cuda9.0, nvidia geforce gtx 1080 ti 11171mib).
the code is exactly the same, only change is the model path and data path.
why there is so huge difference?
current behavior in 1.11.0, 1.12.0rcx is that the included script segfaults (11: sigsegv).
when using the metric with an estimator, a `typeerror` is raised when calling the `evaluate` method on the estimator if the evaluation is configured to be distributed with the evaluation is successful if estimator is not configured for distributed evaluation.
run the test code, the program throws abortederror, info is: phofcode
i am trying to convert a model.h5 keras model using tflite.
command used: `tflite_convert ` error: tflite_convert traceback (most recent call last): file line 11, in <module> sys.exit(main()) file line 412, in main app.run(main=run_main, argv=sys.argv[:1]) file line 125, in run _sys.exit(main(argv)) file line 408, in run_main 100, _convert_model converter = 87, _get_toco_converter return converter_fn(
i 'm training a 3d u-net model with a tensor size of in order to develop models for brain mris.
it works for a batch size of 8 and less.
when i move to a batch size of 16, the size is larger than the int32 index can handle.
i have sufficient ram (384 gb) to allocate the tensors because i can run 2 such processes on the machine without problem.
hi, i have written a python script to read bmp image from local drive using tensorflow and trying to display the image.
for example consider 00001.bmp image(attached attachments) size: height=351 width=572 channels=3 is for second case.
additionally all images works fine without tensorflow for example: used scipy read image and try print shapes of all images which no channels are 3 4. the image which i used is one images form waterloo exploratory dataset.
in first 50 have faced above issue 5 tf.image.decode_bmp works remaining 45 images.
please use below link if you like download waterloo exploratory dataset : phofurl
i have built a tensorflow keras sequential model (see predrnn.py phofhyperlink ) which consists of several keras layers including my custom layer (see phofhyperlink ).
the model by itself runs very well when is not applied.
the model can be created, compiled, and perform the training (by model.fit method) without any warning or error.
however, if is applied to replicate the model on several gpus for multi gpu training, warnings like the followings are raised.
phofcode phofcode i think here is not being able to properly assign the convolution ops to other devices which they are initially created for "model_creation_device" (see line 97 in predrnn.py phofhyperlink ).
actually, moodel behaves different with different selection of "model_creation_device".
i was trying to match information between graph definition and timeline but they didn 't match.
for example, below is a node in graph definition.
`node { name: op: input: input: "const_35" input: input: "toint64_107" device: attr { key: "_class" value { list { s: } } } attr key: "dtype" value type: dt_float } attr key: "has_known_shape" value b: true ` however, runmetadata contains below node stat for the node.
the inputs in timeline_label are different with information in the graph node.
i want to know the policy or rules to match two different information.
` node_stats node_name: all_start_micros: op_start_rel_micros: 10 op_end_rel_micros: 12405 all_end_rel_micros: 12418 memory allocator_name: "cpu_rdma_bfc" total_bytes: peak_bytes: allocator_bytes_in_use: allocation_records alloc_micros: alloc_bytes: allocation_records alloc_micros: alloc_bytes: timeline_label: "[cpu_rdma_bfc 2.5mb 2.5mb] = const, toint64_2)" scheduled_micros: memory_stats `
when i run "./algo" i get an error message.
i have followed the steps in the read me to a t..
despite installing python3 and running the install certificates command per the documentation (downloaded python3 per docs + ran the install certs command + commands for prereqs)
on a 18.04 vm local install, during the initial install, the `./algo` script fails on `task [strongswan : revoke non-existing users]`
i deployed algo with ten users, and then added one user by editing the config and running algo update-users.
on a second attempt to add a user and run algo update-users, the script errors when trying to create a new private key for ipsec configuration.
the error looks like a collision/off-by-one error of some sort.
phofcode i ran algo on my mac (10.14) using digital ocean & ubuntu 19.04. i was sure to install the dependencies & opted to retain the keys during initial run.
all usernames in my config just use lowercase a-z.
in my output below i have added yet another user config.txt, and error appears twice.
i can't delete old algo ikev2 profile since there is no delete(remove) button in settings.
is there another way how one can remove it?
docker image just fails on startup using example startup command from phofurl the mounted directory contains the `config.cfg` copied from the repo root.
image id docker for macos version `19.03.2`
below error when deploying algo on vultr task [common : check the system]
--> please include the following block of text when reporting issues: algo running on: ubuntu 19.04 (virtualized: vmware) created from git clone.
last commit: update changelog.md python 2.7.16 runtime variables: algo_provider "ec2" algo_ondemand_cellular "true" algo_ondemand_wifi "true" "x251bgw=" algo_dns_adblocking "false" algo_ssh_tunneling "false" wireguard_enabled "false" dns_encryption "true"
standard install from macos to do droplet fails on `strongswan : register p12 payloadcontent` task.
services such as apple ios software update do not connect.
some apps are extremely unreliable.
error while deploying on do and vultr a clear and concise description of what the bug is.
=> {"changed": false, "content": "", "msg": "status code was -1 and not [200]: request failed: <urlopen error [ssl: certificate verify failed (_ssl.c:727)>", "redirected": false, "status": -1, "url": " phofurl included: for localhost
algo fails at `[wireguard : generate public keys]` task on aws with the following message: `failed!
=> {"msg": "unexpected templating type error occurred on (set -o pipefail echo "{{ lookup( 'file ', wireguard_pki_path + '/private/ ' + item) }} " | wg pubkey): coercing to unicode: need string or buffer, int found"}`
no internet access and latest handshake timer going up when using wireguard
os : macos mojave 10.14.5 (18f132) with algo 's vpn on when i check status of dns security here phofurl i get below screenshot <img width="1164" alt="screenshot at 8 12 18 pm" src=" phofurl
when attempting to deploy algo to a local ubuntu 18.04 server using the ./algo script, the script crashes when attempting to restart the dnscrypt-proxy service, and the script states that it is unable to start service dnscrypt-proxy because control process exited with an error code.
this bug happens for every script run with different settings.
running macos 10.14, fails to ask for api token and location
running docker and answering steps to create on google compute engine.
i ran algo prior to this but targeting digitalocean with success, however the same image + params fail for gce.
i've got instance behind firewall.
it has only 22 port connections open everywhere, 80 port is opened for few ips(mostly debian repo's).
when im trying to update-users - ansible is getting stuck after display the invocation environment.
after debugging i figured out that last thing that ansible does is running ansiballz_pip.py && sleep 0. so i think its ansible pip related issue while it's the last module called.
i wouldn't like to open whole egress traffic just for updating users..
`./algo` gets stuck at "gathering facts" after creating the server.
=> {"changed": false, "gid": 0, "group": "root", "mode": "0755", "msg": "the directory configs/localhost is not empty, refusing to convert it", "owner": "root", "path": "configs/localhost", " size": 4096, "state": "directory", "uid": 0}
when connecting via ipsec to the vpn on windows where my physical network is ipv4 only, i do not end up with a dual-stack connection.
hang on "saving wireguard private keys"
when you use the setting to specify an eip the returned list is empty.
error encountered while trying to run ./algo
tried to create do droplet with algo, everything defaults except selected ad blocking.
i was on another do droplet while doing this.
got the following error: task [delete the ca key]
when moving from wifi to lte either by disabling wifi on the iphone (xs ios 12.2) or moving out of wifi range, the vpn tunnel shows connected, but will not pass any traffic.
the same is true when moving from lte to wifi, no traffic is passed such as dns or even reaching 1.1.1.1
the network connection between your computer and the vpn server could not be established because the remote server is not responding.
this could be because one of the network devices (e.g.
firewalls, nat, routers, etc) between your computer and the remote server is not configured to allow vpn connections.
please contact your administrator or your service provider to determine which device may be causing problem.
a clear and concise description of what bug is.
algo fails to generate wireguard private keys, then fails to generate public keys because they 're missing.
this is without changing any configuration values, and answering with default settings for everything except server ip.
dependencies have all been installed, virtualenv is active.
while the existing issue 1161 seems related, i 'm failing with the current-latest algo (commit db34d55).
> algo running on: ubuntu 18.04.2 lts (virtualized: xen) zip file created: +0000 python 2.7.15rc1 runtime variables: algo_provider "local" algo_ondemand_cellular "false" algo_ondemand_wifi "false" "x251bgw=" algo_local_dns "false" algo_ssh_tunneling "false" algo_windows wireguard_enabled "true" dns_encryption "true"
when i try to install algo vpn on a proxmox ct vm using a ubuntu 18.04 template the linux headers are not found because of the name pattern is different from the algo installation script requires.
after a reboot of the server, dnscrypt-proxy no longer works on vultr.
i believe it's related to phofurl but that one was closed and the problem is still occuring for me.
algo fails installing in debian on scaleway.
i don 't understand the error message.
it 's odd algo is identifying the os as ubuntu 18.04, whereas 'uname -a ' is phofcode
wireguard request timeout on macosx using client
towards the end of the tasks running i get the following failed error: task [vpn : create links for the private keys]
i input my home wifi ssid to exclude from on-demand when building my config.
i double-checked this was correct.
i then used the qr code to add the config to my iphone.
this all works fine, connects, etc.
however when on-demand is active and i'm connected to my home wifi ssid, it immediately connects wireguard.
does the wifi network exclusion functionality not work with the wg client, is it ikev2 only?
documentation in cloud-amazon-ec2.md section set-up-an-aws-user phofhyperlink suggests it is possible to use a mfa enabled iam user.
though even if mfa is activated according to instructions, the ansible cloud-ec2 tasks do not follow the proper steps to execute the ec2 modules using mfa.
secondly the document must include additional instructions for creating aws permissions policy phofhyperlink if mfa enforcement is desired.
after successfully installing vpn (and confirming via macbook) i sent the user.mobileconfig to my iphone xs max via imessage and gmail.
when i click the attachment a window opens that shows what looks like an xml file.
somehow, my ipv6 was partially disabled in /etc/sysctl.conf (i found out because my wg-quick was failing and fixed it with these lines: phofurl this meant that setting up the first time would work but then updating the user list would always fail, and this time not because of missing headers or so.
when one enters a wifi with emoji in its name (yes, that 's possible - my wifi is called wf), subsequent calles to algo update users fail with a "unable to read yaml" error.
provisioning in ec2 causes the error `ec2instance create_failed: the requested configuration is currently not supported.
(service: amazonec2; status code: 400; error code: unsupported;}`.
tried a couple of times.
the algo installer gets stuck on the common playbook gathering facts.
`lan-passthrough` configuration in `/etc/ipsec.conf` is not working as expected on raspbian stretch and not connecting ssh port including other ports via local network e.g.
wrong url to vultr config documentation when you try to launch a vultr server, also found the same incorrect url on the docs
when the freebsd instance is rebooted the ipv4 address for lo100 is not setup and dnscrypt-proxy fails to start.
running the docker version ended with `rsync` permission error and did not sync any config files.
when installing algo on a local server that has ipv6 support disabled, installation fails because it cannot set ipv6 settings in sysctl.
failed to deploy to do using image "freebsd-11-2-x64-zfs".
install algo 's remaining dependencies failed a clear and concise description of what the bug is.
ubuntu18.04lts local installation unknown error
i am getting a failure at the task [common : include_tasks] phase.
apparently algo has a bug when deploying to a win10 client.
when the install script is run as a user who is an administrator all is good (elevation prompt and everything works).
when its run as a non-admin user with admin creds provided for elevation the certs are installed to an incorrect but hard coded location and misleading error is presented.
mobileconfig does not install on ios (iphone x); error that password is invalid despite using what was generated during the algo install.
the password does work on macos mojave when double clicking the mobileconfig file to install the profile on a mac.
i am able to ping the server and everything resolves correctly but i am unable to visit a website that is hosted on the server via https.
wireguard android app does not connect.
i have now set up 2 cloud service to try and see if that might gave been the problem, but still can seem to get pass a certain stage.
i am a complete novice at this so any help will be greatly appreciated.
trying to install algo on centos 7.x by following instructions for centos 6.x on phofurl so far the givens steps work also for centos 7.x except that python 2.7 comes by default with 7.x., so you do not have to software collections (scl) package.
i don't have an android phone, or a wireguard client for that matter, and can't reproduce this.
gitter.im report: krzysztof szromek @szromek sep 26 06:21 hi guys!
i've run into one issue - every time i update list of users, all android clients stop working and they need to upload new wireguard configs which is really hideous process.
is this something we can avoid?
i tried running algo installer script on raspberry pi running ubuntu.
output is "unexpected exception, this is probably a bug: [errno 13] permission denied".
trying to read a large cached entry (3141 laravel* models) with rdm, but it segfaults.
i'm caching a costly database query using redis, and trying to view the entry within rdm.
unfortunately it crashes with segfault(core dumped) on the terminal.
_*laravel is a php framework._
~ cannot perform operation: mount --rbind /mnt permission denied
a clear and concise description of what the bug is.
issues: error: expected member name or ';' after declaration specifiers pytype_slot *slots; /* terminated by slot==0.
crash when viewing the value.
users need to reselect ssh private keys all the time due to app store sandboxing
a clear and concise description of what the bug is.
when i open a zset key twice at the same time, it shows me two blank windows.
when i set a zset member 's score, i usually got "syntax error"
i need to login every time i start the application
after having updated to 2019.3 i got a popup asking me for credentials.
when i enter them i got the following message reported below i'm under proxy so maybe it's due to that, but i don't know where to set it up.
a clear and concise description of what the bug is.
using redis desktop manager attempting to connect to an old redis server it looks like it gets caught in a loop and then crashes; when attempting to send the crash report it gives this error: phofcode
app crash when manually adding row in zset.
this behavior is reproduced if one or two app windows are open
a clear and concise description of what the bug is.
after connecting to the redis cache server.
expand the tree node to see that the duplicate keys are shown
when i try to expand a group of nested keys that have a large number of keys the app crashes.
it was working fine in previous version.
choose "view as" to "hex table" and then change to "json",the data will be chaos.
we have two clusters in elasticache, each with just one node for now.
we connect to each cluster for local testing via a nat server using different ports to route traffic.
cluster a is accessed via nat port 6379 : internal port 6379 cluster b is accessed via nat port 6380 : internal port 6379 upon first connection to cluster b, we see the correct keys in rdm.
however, after refreshing the connection.
we see the keys from cluster a. this means it is dangerous to work with rdm because sometimes we might think we are working with cluster b, but really we are working with a.
how to use custom value view formatters
a clear and concise description of what the bug is.
1. subscribe channel on console window 2. receive very long messages (in my case, over 5~6,000 column) 3. can not drag received text block, and can not copy to clipboard and horizontal scrollbar not working.
so, can not do anything
for buffer of popup window sign_place has no effect at all: image phofimage
i used tablet pc with windows home 10 with last stable vim.
when i split window, i can scrolling only right window by mi finger on touch screen.
if i try sroll left window, is scroled again right window.
when setting `&syntax` within a popup buffer, then assigning a text property to a portion of the text, any text after the text property is not highlighted according to the syntax rules.
i have a mapping which toggles capslock when pressed in insert mode (it installs/removes an autocmd to automatically uppercase any inserted alphabetical character).
i include a flag in my status line to know whether the capslock state is on or off.
when i toggle capslock, the cursor is temporarily drawn inside the status line.
when the current working directory is in wsl, and potentially when its on a network drive of other types, `expand("%:p")` and the likes are slow.
this is a problem because many plugins which know how to do the work they * expect * to be slow asynchronously, but still use `expand(":p")` a number of times synchronously to begin with, expecting it to be extremely fast.
the consequence is that things like vim-airlines branch indicator and vim-gitgutter can cause switching buffers take one or two seconds, rather than a very small fraction of second.
call me naive, but i dont expect `expand("%:p")` touch the file system at all, and i expect it complete in well under millisecond.
i have a mapping in help files to jump to the next help tag; it sometimes unexpectedly skip a tag.
this is because my mapping searches for a pattern describing a tag then it checks the syntax under the cursor; if the latter is not `helpbar` nor `helphypertextjump`, then mapping searches again for pattern, until it finds match with right syntax.
the issue is due to `synid()`, whose output is sometimes id of `helpexample`, while it should be id of `helpbar`.
the fix for #5183 (_vim vi ' sometimes does not select anything_) introduces a regression when not selecting from the second ` '`.
on my machine, having `set guioptions-=t` in my `.vimrc` causes start up to hang for 25 seconds.
i found that test_helpgrep() in fails on my bench.
this causes when &column >= 160. found errors in test_helpgrep(): function line 42: expected ['col', [['leaf', 1067], ['row', [['leaf', 1066], ['leaf', 1065]]]]] but got ['row', [['col', [[ 'leaf', 1067], ['leaf', 1066]]], ['leaf', 1065]]] function line 42: expected ['col', [['leaf', 1075], ['row', [['leaf', 1074], ['leaf', 1073]]]]] but got ['row', [['col', [[ 'leaf', 1075], 1074]]], 1073]]] makefile:75: recipe for target 'test_quickfix' failed make[1]:
when vim is invoked with the flag `-d`, `-o` or `-o`, during the startup, none of these events seem to be triggered: - `bufleave` - `bufwinleave` - `winleave` this may give unexpected results.
text selection with the mouse does not select text to the end of the line, if only selecting text within a line.
:mf command in netrw doesn't select files with glob patterns
somewhere between vim 7.4 and vim 8 (or at least the vim 8 that ubuntu ships), the ability to write to files created by nautilus in directories mounted over gnome 's virtual file system (gvfs) was lost.
see this ubuntu bug from a few months ago that nobody noticed: phofurl and see also this ubuntu bug i went to report again today, having forgotten about the first bug because nobody ever responded to it: phofurl
i found that the statusline flickers when scrolling with `<c-f>` or `<c-b>`, with `syntax` and `number` set to `on`.
the color is not right if wincolor in popup window has `reverse` attribute.
`popup_create()` doesn 't accept buffer-local text-property types, contrary to what is recommended in `:h popup-textprop-pos` (under "some hints").
instead the following error is emitted: phofcode
`redraw` will let the key be discarded
when pressing `$` to move the cursor on the last character of the line, the cursor jumps beyond latter if some text is concealed on line.
cursorline in popup window makes the signcolumn show up
endofbuffer color in popup window seems not right.
when editing a remote file via netrw on windows 10, the name of target temporary file is in bad form (starting with slash `/`) and makes scp complains about "no such file".
the `]m` and `[m` motions in java: phofcode this also affects related motions like `]m` and `[m`.
running `:redraws` upon `bufunload` breaks the tab line.
when a tab is closed, the tab line is not correctly updated.
highlighting with `matchadd()` and `matchaddpos()` etc.
totally overrides existing text highlights, where it should be able to merge with them.
when a highlight group defining `cterm` and/or `gui` properties only and no is applied with `matchadd()`, it should apply the `cterm`/`gui` properties without removing the colours of existing text properties.
with `set formatoptions=tqcal`, entering text in a line longer than ` 'textwidth '` (or 80 if `textwidth=0`) automatically reformats the line.
when double clicking in gvim, word-wise selection begins.
however, when selection is set to exclusive, double clicking on a word and then moving the cursor backwards leaves the word that was double-clicked unselected.
the normal mode commands `vi '`, `vi"` and possibly other related commands malfunction with selection set to "exclusive".
this only happens with some cursor positions, not all.
when calling setreg under specific conditions, gvim crashes with the following output to stderr: phofcode
when running vim inside xterm with `'noesckeys'` set, typing a capital letter in insert mode does immediately exits insert mode without entering the character.
it's actually more generic than the title.
actions with `y` or `>`, when used with forward motions (like `e`, `)`, or `}`) don't move the cursor, but backward motions (like `b`, `(`, or `{`) do.
maybe this is intentional, but i figured i should report it if it isn't.
i've been using vim for years and it felt unexpected when i noticed it a few days ago, so i don't know if it's always been like that or if something's changed.
if it's always been like that, then think perhaps it's best left as-is to avoid breaking plugins and other people's expectations.
however, notice that vi[1] doesn't move backwards, and vim does even in compatible mode.
it is impossible to keep the popup window at the same width when `wrap` and `scrollbar` are enabled, even when `minwidth` and `maxwidth` are set to the same value.
the width changes as wrapped lines show up during scrolling.
this does not happen when `scrollbar` is disabled.
`prop_clear(1)` does not work as described in doc as per the doc, phofurl `prop_clear(1)` should remove all text properties from line 1, but it does not work.
`prop_remove()` has the same issue.
color in popup window seems not right.
as per the doc, phofurl if the guibg color is set as `none`, it indicates "no color (transparent)", but in popup window, the color is the same as `normal`.
when there are no x11 headers available at build time, the `clipboard` feature is diabled, but the `mouse_xterm` feature is enabled.
while the `mouse_xterm` feature indeed technically does not require on the x11 headers, resulting behavior is when running vim in an xterm, you can now make a selection with mouse, but have no way to send selected text to system clipboard.
it is a risk if just scp (save) to remote failed but no warn, somehow network was bad, the content was not really saved to remote.
in gvim/cmd terminal (windows 10), if i terminate a job with job_stop(), this calls the exit_cb callback, but with a status of 0 (in linux for the same event it is -1), so a terminated job runs the callback as a succesfully ended one.
in git bash mintty (windows 10), `exitval` is -1 as in linux.
in fortran code, an empty string represented by two consecutive double quotes seems to be recognized as a beginning of a multi-line string.
with and ``comments=fb:..`` for ``rst`` text (which seems to be correct ``comments`` settings imho) both vim and neovim doesnt indent the comments, so instead of phofcode i get phofcode moreover, vim is rather weird state, where i cannot insert space before the arrives word (just nothing happens), and even when i force there space with ``ctrl-v<space>`` it gets removed on next ``gqap``.
when i use ctrl-p insert-mode completion, as i repeatedly hit ctrl-p to iterate through matching items, the cursor jumps around to the length of each completed entry but the text of the entry to be inserted doesn 't show until i hit escape or tags scan completely finishes.
i have about 2 gb total of tags files, and so tags scanning takes upwards of 5 seconds.
still, this worked perfectly in vim 8.0.776 but is basically so bad in vim that have to disable tags scanning.
popup window can not scroll with mouse wheel in gvim in terminal vim, it works as expected.
popup window is not considered to be a window?
vim/gvim cannot use a shell command if the shell variable includes a space.
different escaping methods methods do not resolve the problem.
when calling `screenpos()` for a position close to the right edge of the screen, the return can have `col` of `0` even though the character is visible.
this happens when `number` is set (and possibly when `signcolumn` etc.
`:resize 0` fails to squash a non-focused window to zero lines, even when ` 'winminheight '` is set to `0`.
when leaving the command-line window, the height of the entered window is reset to an unexpected value if the geometry of terminal has changed after command-line window was entered.
when a line start with `.sh`, and whatever characters are after, the line is considered as a blank line.
`:h expandcmd()` says that the function expands special characters anywhere in the string.
this is not true for `~`.
when `~` appears somewhere in the middle of the string, it won 't be expanded as opposed to `%`.
cursorline should not be displayed other than the popup window
popup window has one line gap when call popup_create() at the first line.
`invoke_listeners` does not seem to compute the total number of lines added, just the last: for (li = li != null; li = li->li_next) { ... t added = (char_u *)"added"); }
when execute external command, include `:!cmd`, `:call system('cmd')` and `:terminal`, the current directory is always jump to
`:cdo` is expected to stop when it encounters an error.
as far as i ( and others phofhyperlink ) can tell, it does not.
additionally, the test phofhyperlink for this seems, well, broken: phofcode i cannot see how the given `:cdo` command is expected to fail performing the substitute; further, the test actually wants it to succeed, and only "fails" if substitute is not done!
this to me is not "abort on failure" but rather "succeeds at this particular substitute operation."
under certain circumstances, vim will segfault upon closing.
i have noticed this with vim 8.1 in debian unstable and reproduced the issue with current git master.
the circumstances required appear to be: * vim configured with: `--without-x --enable-gui=no` * `autocmd terminalopen * call term_setkill( '% ', 'hup ')` * at least two terminals open, with at least one on an inactive tab page terminals running bash the segfault is not 100% reproducible; i get it about 70% of the time.
my hypothesis is that there is a race condition between when vim checks to see if the terminal process has died and when the process actually does die.
hi, i have a problem with some additional syntax.
it seems that providing the `contained` option when defining a new syntax with the `syntax` command, does not prevent the corresponding item from being highlighted at the top level as expected.
if the terminal uses 24-bit color before starting vim, the colors are not restored correctly.
this happens because vim uses screen scraping to save the screen and those legacy console apis do not support 24-bit color.
one possible fix is to use the alternate screen buffer.
i tried this myself and it seems to work.
it also seems to be what linux version of vim does as problem does not reproduce if you run vim from wsl.
somewhere in-between and highlighting calculation are done wrong and now visual selection has normal foreground colors even it doesn 't define any.
"e730: using list as a string" when using `popup_setoptions()`
when ` 'cursorline '` is set, sometimes, the syntax highlighting takes a lot of time, which adds a lot of latency.
a tab character is sometimes wrongly highlighted by the syntax group `helpnote`.
the resulting highlight region of `v_gn` and `v_gn` with a search pattern that generates a match of length 1 doesn't include the matched string itself if it is on the left end.
it works correctly for patterns that match longer strings.
in the output of `:cno`, `:ino`, `:nno`, ... all mappings using the control or alt modifier are printed twice.
inside an `if` block, a list is assigned a heredoc regardless of whether the relevant test succeeds.
when text properties are used to provide further highlighting on top of standard `syn match` and `syn region` highlighting, the first character that should be text-property highlighted actually has the highlight of the preceding character.
set cursorlineopt to 'number' - but it still would show 'line' still.
when writing a heredoc to assign a list of strings to a variable, sometimes, a line beginning with backslash is unexpectedly joined with the previous one.
i have a problem, when using the file viewer and pressing "i" the list of files is re-sorted this didn 't use to be this way in older versions of vim.
setbufline failed if the buffer is added by bufadd function.
a clear and concise description of what the bug is.
(issues related to the runtime files should be reported to their maintainer, check the file header.)
`vim.eval` changes all numeric keys/values into string.
for example `:py prints `{ '0 ': '0 '}`.
this affects both python2 and python3.
calling `appendbufline()` against an empty file will introduce an extra unexpected line.
if there was no ":substitute" done since starting vim, `:help expr-!~?` and `:help expr-=~?` do not work.
they fail with `e149: sorry, no help for expr-=~?`.
these commands start to work only after doing a `:substitute` command.
and even then they work only if there was nothing wrong with the search pattern of the `:substitute` command and the replacement part of the command was a literal, i.e.
this is about searching for a string in a window that has less then 11 lines and the line of the match contains characters that are concealed via syntax or via matchadd().
one can hit this issue typically when running vim in a 24x80 terminal and splitting the screen horizontally to have 3 or more normal windows plus a help window and having all windows have the same height.
searches in such small help window are affected by this.
sometimes, i have a buffer which is folded thanks to fold options (`'fdm'`, `'fde'`, `'fdt'`) set from a filetype plugin.
if i load this buffer in a second window, the fold options are correctly set again (copied from the first window).
but for some reason, they are not correctly set again if the buffer has been restored after sourcing a session file created by `:mksession`.
i was trying to prevent the command line window from opening without the use of `<nop>` mappings.
it seems i should simply be able to quit it upon `cmdwinenter`, but this does not appear to be the case.
sometimes, the local value of a window-local option is not copied from the last window where the buffer was displayed.
sometimes, the `'cursorline'` option is set in a window, but the text line of the cursor is not highlighted.
1. c-v the first one phofurl 2. c-s i still got randomly phofcode if delete it then press c-s again, it is before cusor again.
if keep it then press c-s again, there 's no more it and save sccessfully.
3. installed with `left click` -> `visual select` but actually is `select` 1 and 2 are really annoying but not happen every time.
1 feels 10% and 2 feels is 40%.
but once encounter, it 's >90% keep be there until reopening gvim the only thing contains the related text is mswin.vim and its dependency.
sometimes, `gk` doesn 't move the cursor on the previous screen line, but at the start of the line.
in a popup window with filetype `diff`, adding a text property with a highlight breaks the diff syntax highlighting from the end of the text property to the end of line.
in a normal, non-popup window syntax highlighting following text property is as expected.
`pum_getpos()` function is written on the `:h functions` but not on the `:h completion-function`.
a clear and concise description of what the bug is.
certain cnoremap mappings seem to not work when ` 'wildcharm '` is set to `<c-z>` but do work when set to `<tab>`.
when editing a scheme file, and the `omnifunc` is phofhyperlink , attempting to use omni completion after a quote character (`'`) causes an error: phofcode
i 've exhausted all options and followed the documentation but am unable to get `:!
{cmd}` to work with the following shell configuration: phofcode i 've also the tried the following and more: phofcode
is 'cursorline ' local to window or local to buffer?
we can conclude from the python api that 'cursorline ' is local to window: phofcode as per the doc, phofurl 'cursorline ' is local to window.
it seems that vim always resolve symbolic-link directory to physical directory!
in a quickfix window, the `quickfixline` highlighting starts from the end of the text, instead of the beginning of line.
when displaying popups with `set completeopt+=popup` where there are long `info` parts causing line wrapping, 'showbreak ' characters are displayed with the background colour of the window below, not the popup background colour.
a clear and concise description of what the bug is.
(issues related to the runtime files should be reported to their maintainer, check the file header.)
editing a simple help vim file (help filetype) with vim-airline, after 3 o 4 saves with ":w", some errors are printed in vim output, and in the next save, vim crash.
errors are: phofcode i test without plugins and clean config and don 't happens.
with this simple config it crash: phofcode i test in archlinux, debian buster 10.1 and gvim in win10.
in all, vim crash with core output.
in windows, with general protection error.
`expand("a \'")` is noticeably slower than `expand("a")`.
this does not appear to be the case for `expand( 'a ')` vs `expand( \'a" \')`.
if a text file containing a bom is opened and wordcount() polled, the editor crashes, saying "vim: caught deadly signal segv "
i tried replacing the terminal from `cmd.exe` to `git-bash.exe`.
now, when using `:term` it will behave similar to `:sh` although different.
a window outside of vim is opened, however a non-responsive and uninitialized split buffer is also created with the cursor locked in the top left corner.
it works fine for `cmd.exe`.
in case i set shell to `bash.exe` no commands are found and the terminal shows a message "bash: cut: command not found" when starting.
when executing steps below however, commands are found but terminal behaves in a very buggy manner constantly overwriting previous text with new text etc.
i have fo+=an, tw=75 and autoindent set, and select 2 lines and press gq, and the word moved to the next line ignores the numbering-indent, only after a further edit the indent jumps in correctly.
undoing a change to end of buffer (`cg`) with a `listner_add` callback function that itself includes a function call fails with: phofcode
when `completeopt` includes `popup` and there is `info` to display: * the default highlight group appears to be `pmenusel` as opposed to the documented `pmenu` * setting an alternative highlight group via `completepopup` has no effect
the netrw file listing gets corrupted when cycling sort order with the `s` key, in the long listing and with `let g:netrw_sizestyle = 'h'` for human-readable file sizes.
there 're still some crash cases with nested map/filter functions.
using filter function twice against an object causes sigabrt.
in the example below, an effort has been made to add simple navigation to a popup buffer.
this is done by filtering certain normal mode commands, and running them with `:normal` in the popup window.
each of these examples (`g`, `g`, `<c-e>`, `<c-y>`) causes a segfault, as the filter function appears to enter an endless loop.
e363 error occurs when opening json file containing long lines.
following from #4876. if a popup is opened to display part of a buffer (for example, displaying quickfix errors in a preview popup as described in the linked issue), the popup cannot be programatically scrolled if there are signs in the buffer.
note that this only applies to buffers which are _currently_ displayed, in a window the current tab.
if buffer is hidden or open another tab, popup can still be scrolled.
it also doesn 't matter whether sign is actually visible - this still happens with `set signcolumn=no`.
in an html file, when i press a key to insert a character or move the cursor, the keypress is sometimes consumed by the html indent plugin.
after pasting a line above the current one, while `'cursorline'` is set, the previous line is sometimes wrongly highlighted by cursorline.
when `completeopt` contains `popup` and the following are set: `set the preview popup can leave drawing artefacts on a non-current window.
originally mentioned on vim-dev, here 's a repro case.
since `:source` doesn 't accept a range, i started using the following command to execute a selection: phofcode when a popup window was created through executing the content of a register, and the window is closed with the mouse, vim throws an `e342: out of memory!` error.
the error doesn 't occur when mouse selection was made inside popup window before it is closed.
the popup-filter function `popup_filter_menu()` and the option `#{close: 'button '}` do not work together.
the popup window cannot be closed with the mouse when `popup_filter_menu()` is used.
`popup_create()` uses `number` and `cursorline` settings of the current window and displays both in the popup window.
this happens only when a buffer number is passed to `popup_create()`.
it doesn 't happen when a list of strings is passed.
2. when the `#{cursorline: 1}` option is passed to `popup_create()`, the popup 's cursorline is also visible in window that displays buffer that was passed to `popup_create()`.
the sign column also appears suddenly.
when putting something into the system clipboard using e.g.
"+yy, its content is lost once the vim instance is put in background using ctrl+z (or when vim is closed).
i have a plugin which provides a custom `*` normal command.
it takes 'smartcase ' into account by pressing the keys `/ up enter c-o`.
the implementation involves these `<plug>` and `*` mappings: cno <plug>(up) <up> nmap <expr> * func() fu!
func() return "*/ <plug>(up) " endfu the `<plug>` mapping is ignored in any terminal whose `term` value is `xterm` (or some derivative).
while trying to remove a fold, the error `e315` is raised and some text is wrongly removed in addition to the fold marker.
when i run vim in a tty (no x server) and click using my mouse (using a text mouse cursor from gpm) cpu usage reliably goes to 100% until vim is closed.
vimsubst highlighting is selected when ` 's '` appears in an array in a function.
this happens in gvim and vim on windows 10.
i have remapped my movement keys `hjkl` to `jkl` with langmap.
this works fine everywhere except in terminal mode, where commands like `<c-w>j` ignore the mapping and execute their old command.
when `set nohidden` is used and a text property is applied to a hidden buffer, the text property is not persisted and various errors can occur.
there is no mention of `'hidden'` in `textprop.txt`.
`term_getline` function will contain space at the end of the line in macos but will not contain space at the end of the line in windows.
i 've been running into ` 'redrawtime ' exceeded, syntax highlighting disabled` a lot working with large files with 8.1.
a spellfile path cannot contain a @ character.
i opened a file containing some zlg tex, and vim crashed.
running `:pedit file` always opens an empty popup window with the message: phofcode closing the window with the mouse * sometimes * echos the message: phofcode (one time vim even crashed).
when closing popup window with `<c-w>z` no messages appear ever.
the `popup_*()` functions that create a popup window, ignore the `normal` highlight group and use `pmenu` instead.
when trying to preview a tag in a popup window for which a swap file already exists, vim opens an empty preview popup window.
the cursor is positioned inside the popup window and can 't be moved out of it (when going into insert mode, text will be inserted into the popup window).
closing the window can be done only with the mouse and results in a `segmentation fault`.
the title of the preview popup window exceeds the popup window width for long file names.
showing the file name in the title was added in commit 90f3e7a.
i may get a truncated undo file due to disk full.
vim then hangs here when reading it: phofurl `getc` returns `eof` but vim doesn't check for that.
filereadable() won't return _true_ for filepaths relative to users home directory e.g.
vim the system update from 16.04 to 18.04. in the 16.04 vim is ok, but in 18.04 the vim current cursor auto append 'p ' when open file.
but input some word in this line 'p ' is disapper and input word in no init line is 'nt disapper the insert mode.
'p ' not save file
ctrl + c will not trigger keyboard interrupt in terminal(cmd) of terminal vim when set termwintype=conpty
border and padding of popup windows, like after calling `popup_atcursor()`, are always cut off on the right side when the content doesn 't fit on the screen.
text added to a displayed buffer by `job_start({cmd}, {'out_io': 'buffer'})` isn't always displayed.
this happens only when previously the window was scrolled up such that the first line of the buffer isn't visible anymore, and `deletebufline(buf, 1, '$')` was called prior to the job output.
related: #4718 (and closed in
quitting a tab changes the size of a maximized window in another tab.
the latest vim has updated to a newer version of netrw, which seems to have broken the `gx` functionality.
in the past, positioning the cursor on an url and press `gx` would open the url in a web browser (using `open` command).
the updated netrw would instead try to curl it, which seems wrong.
when `matchdelete(id, winnr)` is called from another window, the match `id` is deleted but the highlighting of the match remains until a `:redraw!` or `<c-l>`.
this occurs only when the focus is on another window.
calling `matchdelete(id, winnr)` while window `winnr` is focused, everything works fine.
`e154: duplicate tag "test-functions"` occurs.
the cursorline is not drawn correctly in a `popup_menu()` window.
the popup window returned by `popup_dialog()` is drawn wider than it needs to be.
the window width depends on the number of characters in `showbreak`.
using :set relativenumber and :set norealtivenumber lets the whole screen flash.
vim reports an error when a large buffer is passed to `job_start({cmd})` and `{cmd}` is outputting some text before the input is processed.
this happens for example when `{cmd}` outputs an error because of wrong usage, or when `--help` is passed to it.
it was suggested to create an issue here, originally reported on phofurl and phofurl i had vim version installed where `gpush` command worked without any problems.
after i have upgraded vim to `gpush` fails to push.
when `formatoptions` is set in a vimrc file, it will still be edited by ftplugin, creating undesired behavior.
the `netrw_gitignore` plugin doesn 't work with the pattern `.
this rule is used (for example) in the linux repository: phofurl
in 63b74a8 a change was introduced in for which if you add text as tag content on a new line the indent applied is twice shiftwidth().
a call to `getbufline` in a `listener_add` callback appears to getting incorrect line contents for _some_ of the lines involved in the change.
i have tried but failed to reduce this down to a simple example that does not involve a plugin.
possible clues: * this appear be sensitive the size of the file in question.
* there also appear be two callbacks made, when in reality there could (i think) be one
i tried using `autochdir` when i started using vim during the 7.x days but it didn 't work for me; i think it interfered with things like `find` and `vimgrep`.
so i put an autocmd into my vimrc to `lcd` on bufread and bufenter and it was fine but at some point in the 8.x series it started printing directories to the output.
the bug: `autocmd bufread * silent!
lcd %:p:h` issues message output with a directory name while executing `:vim /something/
it appears that the presentation width of a tab character is not used in the width calculation of a popup, hence popup contents appear clipped: clipped phofimage
when using: `"borderchars": [ ' ', ' ', ' ', ' ', ' ', ' ']` in popup arguments.
the last top and and bottom border chars are not shown.
setting: `:set doesn 't make the "@" character (code 64) to be recognized by the completion (e.g.
if you have tiny vertically split windows and use `windo`, then the tiny windows get expanded.
when using the coc.nvim plugin and toggling its extensions, i get a sigabrt from a double free.
if a file extension is in &wildignore and a file with this extension is opened by gvim with the additional parameter `--remote-tab-silent`, then the error message "e479: no match" appears instead of opening the file.
the result of `:hi` command has no space between highlight name and "xxx" if the length of the highlight name >= window width - 1.
(i 'm not sure if we call this minor issue "bug", though.)
in alacritty phofhyperlink (under both x and wayland) and wterm phofhyperlink at least, it won 't start.
it seems to occur under these conditions: 1. mouse support is enabled (+mouse) 2. the mouse option contains n (also the situation with `set mouse=a`, of course) 3. the ttymouse option is blank.
[also, if you 've already started vim without a ttymouse value and set `:set mouse=a` while it 's running, it 'll just hang there, unresponsive to mouse or keyboard] not only will it not start, but ctrl-c won 't terminate it.
currently, i 'm working around these mouse woes in my vimrc file: phofcode however, i 'd be willing to try to fix the code in vim itself, negate the need for special vimrc-file code.
i see a couple solutions, but am not sure which one would be the best: 1. if mouse support is enabled and ttymouse isn 't set (either explicitly in vimrc or guessed by vim itself), gracefully exit tell user manually set ttymouse.
2. try figure out what exactly blocks vim in first place, make it try continue, even if support isn 't going work properly.
sigabrt (double free or corruption) occurs when changing mintty screen size after calling popup_create() with 'pos ': 'botright '.
`getbufinfo()` is not updated in accordance with various events, such as `bufhidden` and `bufwinleave`.
a clear and concise description of what the bug is.
(issues related to the runtime files should be reported to their maintainer, check the file header.)
vim freezes in the insert mode when i hit an enter.
start_col seems to be wrong for textprop.
i updated vim today to `vi improved 8.1 (2018 may 18, compiled jun 17 2019 and now i get warnings when i open a file.
running :copen should, according to the docs make the current quick fix window current.
as of some recent patch, it is opening a new one.
when vim is run with the `-t` argument, the first call to `:argedit` with a single file does create a new buffer with the, but the new buffer is not focused.
the canberra library is linked in when making a tiny build (also normal, and probably small).
in a tiny build, the sound feature is disabled, so i don 't think it 's necessary to link with libcanberra which deals with playing sounds and "sound themes" as far as i know.
running rm command with job_start behaves differently than running it in the command line.
a clear and concise description of what the bug is.
(issues related to the runtime files should be reported to their maintainer, check the file header.)
in a plugin, i 've encountered a `e488: trailing characters` error in a code path, but only _if an exception was thrown in previous lines_ of the function.
foo() let l:var = 0 try " this triggers the problem: "throw 'something ' " problem occurs in the next line: let x = wincol() || l:var catch /something/ endtry endfunction call foo() this surely is valid vimscript.
if you uncomment the `:throw 'something '`, however, there 'll be an `e488: trailing characters: l:var`, even though that line 's execution is skipped (it 'll proceed with `:catch` block).
the `let x = wincol() || l:var` originally was a much more complex `:if` statement.
many seemingly trivial changes make `e488` disappear: * there has to be function invocation (e.g.
`wincol()`, or custom function); simple expression (`42`, `g:var`) works * if `l:var` is put in parentheses `(l:var)`, it works _(that 's my preferred workaround for now)_; putting entire right-hand side parentheses `(wincol() || l:var)` does _not_ help * if (superfluous) `l:` sigil is dropped, it works * if `l:var` has different scope (`g:var`, `s:var`), it works so it looks like rather obscure problem parser.
this was spotted in the context of `govim` phofhyperlink - i haven 't managed to find a smaller reproduction.
the setup is as follows, `main.go` initially populated with: phofcode we are in insert mode, with the cursor at position `(4,5)`.
now we trigger the omnifunc with `<c-x><c-o>`; in the context this results in a single completion result, `main`, which duly completes to give us: phofcode the sequence from vim channel log corresponding to this is: phofcode ~note:~ * ~two callbacks to single `listener_add` callback~ * ~each called with multiple, identical changes~ ~otherwise,~ all is well at this point.
if, still insert mode, we now hit backspace remove `n` on line 4, all is fine: we see following vim channel log: phofcode all is still well at this point.
full log can be found phofurl
`runtime/gvim.desktop` contains duplicate esperanto translations for genericname and comment.
phofcode i see that `src/po/gvim.desktop.in` contains these translations, as well as this comment: phofcode but evidently they are not * overwritten * : instead, duplicate translations are added.
i suggest that the `.in` files should not contain any translations; they should contain only the source strings, and only the `.po` files should contain the translations (#3085).
in meantime, i suggest adding a step to whatever process generates & commits these files that validates results, to avoid this recurring again (cf #4313).
vim crashes when resizing the terminal with a popup visible.
getcurpos()[4] (curswant) returns after $ motion
currently the growing array (`garray_t`) uses a constant growing size which is specified by `ga_init2()`.
this is not suitable for some use cases.
sometimes the calculation order becomes o(n2).
visually selecting from the bottom up, while wordwrap is on, and then unselecting still leaves the appearance of selected text if the last displayed line extends beyond the length of window.
manually setting the `@/` regiser via the `let` command with `nomagic` on gives unexpected results for two tokens: `*` and `~`.
i use vim config below to map <f5> to run python, python2 is ok, but cursor always go first line after running python3.
within `govim`, a format-on-save is achieved by adding a `bufwritepre` autocmd that makes a call to `gopls` for any changes that need to be applied pre-save.
however it seems that when applying those changes (within the autocmd), multiple `listener_add` created callbacks are made for the same event.
in the following test, phofurl phofcode it appears that `let t_f2` should be `let &t_f2`, a simple typo.
osc-52 escape codes (used to send text to the host clipboard) aren 't working from inside a vim `:terminal` window.
up and down key don 't work on vim terminal bash.
calling `:redraw` after `:echon` a partial line doesn 't make that text visible to user with gtk 3 gui.
can no longer use _bash_ as my shell on windows, as _gvim_ builds the wrong command-line.
the failure happens somewhere between version 8.1 patch 978 (where everything works), and 8.1 patch 1298.
the new search stats feature (issue #453 and recently implemented) appears to cause excessive "press enter or type command to continue" prompts, because the number on the right appears to be positioned incorrectly.
this happens when typing '* ' over identifiers that are 24 characters or longer (e.g.
when window size is 80 columns or less.
'de') does not work well when ft is 'vim'
phofcode produces no output in the file `output`.
two of my plugins collect match information with since patch stuck in sandbox with ":s/../ =function/gn" problem: stuck in sandbox with solution: don 't skip over code to restore sandbox.
(christian brabandt) the buffer is left `nomodifiable`.
so it looks like the sandbox is mistakenly kept active after the `:substitute` ends.
the above patch (that supposedly should correct this exact issue) does not test ` 'modifiable '`, and only deals with error cases (normal error and `:throw`) inside `function()`, but not the normal, successful execution.
vim versions prior to patch work fine.
vim wrong data when saving text which can 't be converted.
when `f` flag is present in `shortmes`, some autocmd does not work properly (the `echom` command does not display messages)
recover from swap file failed on windows ?
when i using `:set dir =$temp//`
vim in the terminal doesn 't seem to support the `focusgained` or `focuslost` events.
but in some terminals (like xterm and st), it 's possible to restore them by setting ` 't_ti '` and ` 't_te '` appropriately.
however doing so makes vim redraw the screen and clear a multi-line output of an ex command when focusing a different program window (like the one of web browser for example).
when a standard search (no re in my case ) hits the start or the end of the file (i.e.
when the corresponding "continuing at {top|bottom}" message appears), search "lags", i.e.
it takes some time until cursor moves to next match.
this behavior is not seen when above message is not displayed.
vim crashes (sometimes) with segv when clicking a winbar in a non-current window and the menu command closes the current window.
the 'cmdheight' option effectively has tab-local values (the `:help` says _global_, but then clarifies _the value of this option is stored with the tab page, so that each tab page can have a different value._) as such, it should be possible to query the option's current value with `:echo gettabvar(2, '&cmdheight')`.
that doesn't work at all; nothing is returned (supposedly the `&optionname` syntax isn't supported there (yet; i think it should)).
okay, try `:echo gettabwinvar(2, 1, '&cmdheight')`.
that one returns a value, but it's always the one for _current_ tab page, so not good either.
didn't quit alternate screen on recive sigtstp send with kill
doing `make clean` after a `make test` should (and historically has, afaict) cleaned up all the test-file debris.
but lately there is new test debris, specifically from the testing of indent files.
at least some of these aren't cleaned up by `make clean`: phofcode
as part of phofurl i have a `cursorhold,cursorholdi` autocmd setup the populates the quickfix list via `setqflist` if any diagnostics have changed.
this works well apart from the fact that there appears to be a changing of buffers that happens that causes a flicker on screen... and for the "current" window (excuse almost certainly loose terminology) to not be restored.
this is best demonstrated by a video in which i 've slightly changed code to _always_ call `setqflist(entries, 'r ')`, regardless of whether diagnostics have changed.
in between cursor holds, i am simply moving up and down document with `j` and `k`: phofurl as you can see "active" window changes to quickfix window and doesn 't return where cursor is.
however when i press `j` or `k` again focus shifts back where i 'm expecting it be.
in a terminal vim session of phofurl balloons quickly disappear after being shown, but in gvim they remain until the mouse is moved: * terminal: phofurl * gvim: phofurl
i have a test (for phofurl that feeds `<cursorhold>` via `feedkeys` over a channel in order to test and trigger some behavior.
phofcode (in these test scripts, `vim` is a special command that communicates with an already running `vim`/`gvim` instance over a channel.
the format of the testscript is described at phofurl this test passes locally when run in docker container.
but bizarrely fails when run via travis ci, using exactly the same docker image: phofcode the failure above indicates the autocmd was _not_ triggered, because the quickfix window was empty when written to `errors`, hence comparison failed.
i 'm totally stumped however on what might be causing this.
it happens for both `vim` and `gvim`.
a clear and concise description of what the bug is.
(issues related to the runtime files should be reported to their maintainer, check the file header.)
when i put the below into my vimrc , py3 import os;import it show below error .
fatal python error: initfsencoding: unable to load file system codec modulenotfounderror: no module named 'encodings ' but i input "py3 print( 'hello world \')" when i opened vim and delete "py3 import os;import ", it show "hello world " , i think problem is python3 is not init finish when vim open vimrc file .
after patch phofhyperlink , `test_term_gettitle` fails when vim built with `+autoservername` feature.
build fails due to `xgettext`/`msgfmt` incompatibility in rhel 6.5 after patch
i have python3 installed via homebrew and i 'm trying to compile vim so it has the `+python3` option enabled, but the compiled binary does not have the expected flag set (it 's `-python3` instead).
test fails when terminal has many columns (>= 203 columns).
when `gvim` is started from a terminal, its default behavior is to fork, thereby "detaching" from the terminal (this can be overridden with `-f`).
when starting `gvim` with `govim` phofhyperlink which is a channel-based plugin, it fails to fork/detach from the terminal.
i 'm not aware that `govim` is doing anything special here; indeed i 'm certainly not trying to change/override this behavior in any way so anything i might have done unintentional.
raising as a bug because i couldn 't find anything that described this behavior.
per `:help complete-functions`, two calls are made to a designated `omnifunc`, distinguished by the value of the first argument.
if an unhandled exception occurs during the first call the second call is still made.
this may be by design but i couldn 't find anything that confirmed behavior one way or other so raising as a bug for confirmation one way or other.
i 'm looking to run `gvim` via `xvfb` in a docker container to give extra coverage for phofurl however i get the error message: phofcode
when there is a textyankpost autocmd, visually selecting text can cause erroneous syntax highlighting to appear.
if i had to guess wildly, it could be another regex recursion issue similar to #3175, since the regex for the autocmd during visual selection might interfere with the regexes used for syntax highlighting.
phofhyperlink introduced a small regression.
actually, i 'm not sure if there 's an official format for tags files, but before that patch, tags files without a trailing newline would work as well.
now, after the last line isn 't read anymore if there 's no newline.
i cannot find a way to configure cindent to make c# array initializers that are the first argument to a function and span multiple lines give each line the same indent.
i want cindent to indent code like this: string[] defs = finddefs( new string[] { "postprocessing.editor", "recorder", }); but instead, it does this: string[] defs = finddefs( new string[] { "postprocessing.editor", // unwanted indentation "recorder", }); i believe this is a bug in how cino-jn is handled.
