1. gif3 phofimage 2. gif4 phofimage
1. set a custom font in base theme 2. open the dialog
1. open dialog(it will open with todays date selected).
select any other date and click ok. 2. open dialog again(it will open with last selected date).
press "cancel" button 3. open dialog again (it will again select last date of the current month).
` datepicker(currentdate = startdate, maxdate = enddate, datecallback = listener)}` 2. user selects date greater than max date 3. user presses positive button phofcode
1. you need a long layout with edittext 2.
`materialdialog(this, bottomsheet())` 3. scrollable = true)
1. create an input dialog with `noautodismiss` and show phofcode 2. touch outside the dialog
1. my code: { title(text = "") = false) { _, datetime -> val time = "yyyy-mm-dd hh") activity!
!.tv_time.text = time } }` 2. click the month to select,then you will see two "",actually,one is ""
1. create a dialog with `bottomsheet` behavior 2. include an input, by calling `dialog.input()` 3. show dialog by calling `dialog.show()`.
1. change the sample project method `showcustomviewdialog` accordingly: phofcode 2. create a test layout with a scrollview as the root and set the item backgrounds to some color: phofcode 3. run the app and click on "custom view" button
phofcode try to long press on the edittext to paste something in the clipboard.
this happens only when the text is empty.
if a type a char and retry it pops up.
1. create an app theme `<style name="theme.app" 2. add `<item to the theme.
1. create a fragment (and some elements to test the behavior) 2. open a dialog/bottomsheet with a customview (the view being the fragment) 3. modify a property of an element (for example, the text on textview or the image on an imageview) inside class of fragment.
i 've used this code to test behavior (inside `override fun oncreateview`): (for an image) `textview.text = "test"` (for text)
my code is basically this: phofcode
1. make a datepickerdialog using library version 2.7.0
1. build a date picker 2. show it 3. rotate to landscape
1. create a dialog with just the message property set.
1. display a dialog with stacked button (long text on button)
1. use a customview for the dialog 2. add a positivebutton where you get the values from your custom view (this works).
my use-case is getting the selected dates from a custom calendarview.
1. use a dpad, there is one in the emulator settings.
2. open a "yes / no" dialog or something similar.
3. click around to find and lose focus on the buttons
after starting the weex project locally, scan the qr code with weexplayground and open the page written with wxc-swipe-action component
<div :class="[ \'ring \']" :style="ringstyle4"> <image class="ring" </div> <slot></slot> </div> </template>
just open the profiler ,and open a weex page.
when weex page renderthis crash happens dealloc also cause this crash.
double click on the image to get the video effect
just load weex pages with some events and check behavior.
the same source code behave defferent,i only changed targetsdkversion
phofurl **1. element class "flickering"** 1. click a 2. click b 3. click b again ( no background!
4. click b again ( still background!
5. a 6. a again (okay) 7. a again (so, only first element works well) **2. invalid class for first element** 1.
2. b 3. press and move finger to screen border (you should see the same as screenshot below: two elements are "selected") 4. you can click b-d, but first element(a) still "selected"
$ weex create my-project installed 1 packages linked 0 latest versions run 0 scripts all packages installed (used 372ms(network 370ms), speed 7.19kb/s, json 1(2.66kb), tarball 0b) start checking package, please wait ... compelied, cost 6.206s error: cannot find module 'decompress-tarbz2 ' at at function.module._load at module.require at require object.<anonymous> module._compile module.load trymoduleload function.module._load module.require require object.<anonymous> module._compile module.load
run weex app when use wxsdkinstance to render page report error by weexsdk 05-30 e/weex: [wxbridgemanager] invokeinitframework no implementation found for int java.lang.string, boolean) (tried and at method) at at at i think this may be due to the failure of loading so files or the incorrect loading of so files.
because the method in native could not be found when prompted in the error report.
and i tracked source code and found that there seemed to be something wrong with these places.
image phofimage image phofimage image phofimage image phofimage the so file loaded in code does not exist in lib directory
for basically,use weex create course in cmd or bash in win10-ubunto
for a brief explanation, if i try code like follows, method ``get:`` and ``get:callback:`` should be called correctly, just add enter in each line: phofcode unbelievable,right?
demo: < phofurl it is the official websocket demo of weex from < phofurl the demo works in my pc chrome browser.
but it cannot work in the weex playground app in the same wifi network.
i also tried taobao app and dingding app.
it did not work in them.
phofcode i reduces item of row in function 'changedata ', the length of row changed, but the number of children which displayed didn 't change.
steps to reproduce the behavior.
include a mcve using phofurl , crash stacktrace or share your app project.
please follow the guidelines for providing a mcve: phofurl
1. removeallitems, by getallkeys and removeitem.
2. getallkeys again, oops; callback is not called.
steps to reproduce the behavior: 1. start with a clean install of 18.04 lts on x86 system with nvidia 1050 gpu 2. install all drivers (nvidia drivers v430), tools, sdk (cuda), etc.
3. follow the official guide to build apollo.
4. attempt to verify the build by running the demo as described at end of guide here phofhyperlink .
i could see a little car advancing on screen but no lanes or obstacles.
i assumed that perception module was not working and tried to run it standalone following this guide phofhyperlink .
this didn 't work either.
steps to reproduce the behavior: 1. run bash apollo.sh test 2. see error as image below
steps to reproduce the behavior: 1. run ./apollo.sh build
steps to reproduce the behavior: 1. follow github instructions to download, build images, start docker containers, and build apollo inside container.
2. follow github instructions to launch apollo by cyber_recorder play ... demo_3.5.record -l 3. open dreamview and see the update.
4. if now we keep switching the setup mode from one to another 5. a lot of traffic lights will be spawn during those switches.
1. select sunnyvale map with two offices 2. select sim control 3. select routing and planning 4. go to default routing and select any parking space
there is inherited relationship between the class "lateralqpoptimizer" and "lateralosqpoptimizer".
if you define "delta_s_" in "lateralosqpoptimizer", the "delta_s_" in "lateralqpoptimizer" will be never changed.
add phofcode to run phofcode
steps to reproduce the behavior: 1. i processed the img to mapping the cityscapes,but i did 't found the sky class in your dataset, but in description it does has, did you forget to label it or did i deal with it?
2. dataset: road02_seg/colorimage 3. label: road02_seg/label
use the demo talker/listener example to reproduce this bug/issue.
steps to reproduce the behavior:
steps to reproduce the behavior: warning: logging before initgooglelogging() is written to stderr i0522 17580 [planning] i0522 17580 global_data.cc:150] [planning_test] host ip: xxx note: google test filter = [==========] running 1 test from 1 test case.
[----------] global test environment set-up.
[----------] 1 test from sunnyvalelooptest [ run ] e0522 17580 [planning_test] requires to be set f0522 17580 check failed: feedtestdata() failed to feed data
steps to reproduce the behavior: 1. create a python script and import cyber_time: `from cyber_py import cyber_time` 2. make repeated calls to `cyber_time.time.now()`.
the following script can reproduce the behavior: phofcode the last lines of the output are something to the effect of: phofcode
steps to reproduce the behavior: 1. download the source code.
phofcode 2. start and enter the docker.
phofcode 3. build the apollo project.
phofcode 4. convert bag file to a record file.
phofcode 5. modify file as follows: change to and add a line: 6. modify file as follows: change to 7. start dreaview: 8. replay record file:
steps to reproduce the behavior: 1. launch apollo 3.0 system with lidar, camera, radar perception mode 2. open the dreamview
steps to reproduce the behavior: create a box2d instance with negative corner coordinates values, then call max_x(), max_y() to check the values.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. go to '...' cyber_recorder play -f --loop 2. click on '....' 3. scroll down to '....' 4. see error
currently the method "bool voxelgridxy<t>::set()" is not called, so the compiler does not compile this buggy snippet.
but i am trying to compile the code on arm platform, and will have to call this non-sse4-optimized "bool voxelgridxy<t>::set()" method, and thus the compiler will report compiling error.
steps to reproduce the behavior: 1. write a new can message inside the protocol folder which has an incremented alive counter.
every time it is called, the data is incremented.
2. run the canbus module separately, or run full-stack.
3. log can message output.
4. change can message's period, and log can messages again.
5. when message's period is low and control_command's update rate is higher, i will see discontinued alivecounter.
steps to reproduce the behavior: 1. follow the wiki, and execute bash apollo.sh build
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-tag>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-tag>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-tag>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-id>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-id>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-id>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run `./build_dev.sh dev.x86_64.dockerfile` from docker/build 3. run `bash -l -t <image-id>` 4. run `bash 5. run `bash apollo.sh build`
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run ./build_dev.sh dev.x86_64.dockerfile from docker/build
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run ./build_dev.sh dev.x86_64.dockerfile from docker/build
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run ./build_dev.sh ./dev.x86_64.dockerfile from docker/build
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run ./build_dev.sh ./dev.x86_64.dockerfile from docker/build
steps to reproduce the behavior: 1. remove any old docker images to start fresh 2. run ./build_dev.sh ./dev.x86_64.dockerfile from docker/build
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to function double quaternion quaternion) { double theta = std::atan2(2.0 * quaternion.qw() * quaternion.qz() + quaternion.qx() * quaternion.qy(), 1.0 - 2.0 * (quaternion.qy() quaternion.qy() + quaternion.qz() quaternion.qz())) + std::acos(-1.0) / 2.0; return theta; }
if i understood correctly it should be changed in this way, phofcode
i guess, this ` = is needed to be changed into this:` = camera_to_car_;` `
try adding more than one camera subnodes, `subnodes { id: 3 name: "cameraprocesssubnode" reserve: type: subnode_in } # visualization node with opengl subnodes { id: 41 name: "visualizationsubnode" reserve: } # camera node.
publish pb with non-zero int subnodes { id: 4 name: "cameraprocesssubnode" reserve: type: subnode_in }`
steps to reproduce the behavior: 1. run conti_radar 2. rostopic echo 3. the attribute
trying to follow the directions here: phofurl step #5 directs you to: phofurl which has a choice of english or chinese, and a login with sms, but after i login with sms (actually works here, no problems like map), i end up at: phofurl and this particular page is only in chinese.
here is use case in order to reproduce this issue.
let 's say there are two cameras which need to be connected to two visualization sub nodes.
e.g, ` subnode_config { subnodes { id: 3 name: "cameraprocesssubnode" reserve: } subnodes { id: 41 name: reserve: } subnodes { id: 4 name: "cameraprocesssubnode" reserve: } subnodes id: 42 name: reserve: } }` this both are trying to initialize
after typing > cmake .. instruction tell > #backup pcl lib > mkdir -p > mv /usr/local/lib/libpcl* #replace with our build cp -a lib/* /usr/local/lib/
pass in an `httpsagent` with an invalid configuration, which should cause `axios.request` to reject.
in `0.19.0`, it rejects; on `master`, it does not.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
phofcode note that the url at the end there is ` phofurl
js import baseaxios from 'axios'; import axiosretry from 'axios-retry'; import reader from '@/libs/filereader'; const axios = baseaxios.create(); axiosretry(axios, { retries: 5, retrydelay: (retrycount = 0) => ( (2
i use of protobuf in my project.
i must set the content-type in the headers.
when i send get requests, the data is undefined and this cause content-type to be deleted.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
in my case i wanted to get a pdf as an array buffer.
create the following script in node.js 12.6.0 and run phofcode
just run axios on ie9 and set responsetype to 'json' phofcode reponsedata always undefined on ie9
follow this tutorial phofhyperlink phofcode
here 's my client code: phofcode here 's my server code: phofcode all the certificates have been generated following this tutorial phofhyperlink .
the pkcs12 certificate has been generated using the following command: phofcode (with `password` as password)
i tried to send get request using axios, using `axios.request(options)` method.
here 's the look of my `options` object { data: {}, ... } as can be seen, there 's `data` with empty object.
if i don 't remove that `data`, then axios just doesn 't do anything.
there 's no error, nor the promise ever resolved.
i haven 't tried this on actual ios device though.
here 's the wrapper function i use to make the request phofcode notice that i need to check if `request.data` is empty in order to not include an empty object into `data`
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
i tried to write a crawler to crawl the chinese website and then transcode it.
i don 't know how to reproduce it since it 's randomly occurred.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
there are 2 services required to reproduce; the react app (portal) sending the request and an expressjs4 server side running node v10.
the nodejs server simply defines a module export and uses it via app.use() as the first used module the chain.
the cookies are sent by node using a simple res.cookie() call.
react code phofcode sample post request headers phofcode and corresponding post response phofcode expressjs code phofcode it should be noted that i have an /etc/hosts entry pointing api and portal.sampledomain.com ->
1. install fiddler phofhyperlink (will act as proxy for testing) or set a proxy on windows 2. start fiddler and capture network traffic.
make sure to capture https traffic from tools | options | https.
this will create a temporary proxy, for testing.
2. create new electron hello world app 3.. call from electron renderer process (the website code part): phofcode
create a simple test file containing this at the start: phofcode this produces the following error: phofcode
- open: phofurl - attach axios 0.18 (uncomment line with `axios@0.18.0`) - run fiddle (console show true) - attach axios 0.19 (uncomment line with `axios@0.19.0`) run fiddle (console show undefined)
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
any request that returns a response with content-type: 'application/json '.
typeof response.data === 'string '
runkit example phofhyperlink the example shows that the `geturi` method only returns the `url` parameter in the request interceptor but in the response interceptor full url is returned.
send a cross-domain requests with axios in ie9
i can 't reproduce it outside the work vm.. since it 's work code i prefer not upload anything, but i will write specific code if neccesarry
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
catch an error from an api.
create an axios adapter and set to it a default authorization header, nothing is sent in the query.
phofcode phofcode what happens is that the request param object overrides the instance default param object.
the instance no longer has a query param of `q`.
set system envariable: phofcode phofcode
this is in a react process with jsx set to preserve, it is a tsx file imported by a js.
1. create a web server which writes a few bytes and then stops : phofcode 2. make a get request to the server with axios, with a timeout setting.
phofcode 3. the request will never timeout.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
i couldn 't try out the code in ie11 because runkit doesn 't work in ie, but this should be able to reproduce the error.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
code snippet to reproduce, ideally that will work by pasting into something like phofurl a hosted solution, or a repository that illustrates the issue.
reinstalling core and running it without the .conf file.
i 'm not sure how to reproduce it.
1. using macos, run `make deploy` 1. once finished, run `./src/qt/bitcoin-qt` 1. ctrl+c to quit `bitcoin-qt` process 1. run `make deploy` again
run bitcoin qt with `disablewallet=0`.
go to settings/options/display and specify a tx url.
in windows, open bash prompt of windows subsystem for linux (ubuntu 18.04).
install the required packages to build bitcoin, set the default mingw32 g++ compiler option to posix, etc.
(in other words, do all the standard preparation steps for compiling bitcoin on windows.)
3..) run the following: phofcode 4.)
now wait until it gets to "checking for clock_gettime monotonic clock...", and then you will get following application error prompt: !
*in alpine linux 3.10*: phofcode
first create a network so containers can communicate with each other by name: phofcode start cockroachdb in single node mode: phofcode run my database migration container against the cockroachdb container: phofcode although the error doesn 't result in a failing container you 'll see the following error in the logs: phofcode
cockroachdb: phofcode postgres behavior: phofcode
decimal: phofcode timestamp: phofcode once you make ::timestamp(4), the second (and any column afterwards) will also have the projectexpr $2 :: timestamp(4) so the truncation does not work properly.
describe in your own words.
describe in your own words.
i load data to a table(load like batch insert a large number of rows ) which has auto-increment, after 25hours later, the replica running gc old version for the table, but there are too many version, and when running gc we copy all version into memory.
i known auto-increment is not recommended in cockroach, but i think it is a bug.
and i found another problem, when a key has to many version to gc(more than 256kb), it will increase normal read and write request latency in that key since the latch.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
1. install postgres locally phofcode 2. start single node crdb instance phofcode 3. create a pgbench database in crdb phofcode 4. execute local pgbench against crdb docker instance phofcode
attached are system.descriptor, system.namespace and system.jobs as well as debug zip, all files can be dowloaded here phofhyperlink .
1. set up 19.1.5 cockroachdb cluster 2. connect to sql shell and run the following: phofcode
consider the following valid postgresql schema phofcode when creating `table d`, user is required to use a workaround due to the redundant foreign key references.
phofcode foreign key `d_b` is detected to be a partial duplicate of `d_b` and is rejected.
however, when we inspect the current state of `d`, we see... phofcode ...which is not valid syntax for this version... phofcode
run this statement: phofcode i 'm expecting it to be ignored, but i 'm getting: phofcode
like in native postgresql, the following is not supported in cockroachdb: phofcode while postgresql reports this error: phofcode ... cockroachdb reports a more misleading one: phofcode specifically, issue phofurl has nothing to do with this.
to reproduce - just do `cockroach workload init tpcc --warehouses 3500 --data-loader import` here is what saw as the number of handles open: phofcode the limit in my case was a default and set to 1024 phofcode if possible, provide steps to reproduce the behavior:
use the management console and click "our docs" under the connection parameters.
1. start a secure cluster 2. try to access the admin ui, but do not log in with a sql user.
3. observe the logs for the cockroach node (of which you accessed the ui from)
1. create a database and a table with geo partitioned rows 2. verify the location of data with: show range from table ${table_name} for row ($row) (this outputs the desired replica_localities) 3. backup a database with: backup database 4. drop the database 5. restore the database with: restore database 6. verify location of data with: show range from table ${table_name} for row ($row).
now all rows in table are distributed (not geo partitioned)
try to backup an empty database to s3 and then restore it.
create a multi-region cluster create a database with a large number of tables (>10) create a user grant that user permissions on all tables in the database.
1. connect to laughing-ladybug as a non-admin user (confirm the `kv.rangefeed.enabled` cluster setting is set to false) 2. create changefeed `create changefeed for table epics into with updated, resolved= '5m '` 3. changefeed is created successfully.
data appears in the above s3 bucket.
4. the web ui will then eventually show an error on the changefeed: <img width="1319" alt="image" src=" phofurl
as mentioned on cockroachdb documentation, tried to load the pgdump file using: import pgdump ' phofurl if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster on aws london 2. logon to the cluster (ssh -i key.pem ec2-user/(ipaddress) ) 3. see if dump file is accessible on aws s3 (aws s3 ls) from within the cluster 3. run import command above 4. see error : pq: result is ambiguous (error=unable to dial n13: breaker open [exhausted])
1. start a three node cluster 2. kill one node and add a new node 3. wait until the node killed in #2 is declared dead and all the ranges are rebalanced 4. kill one and add a new at that point all ranges (that are with replication number of 5) will add an extra replica to the added in #4 and will end up with 4 replicas total - 3 on the live nodes one on dead node.
shutting down any of live nodes at that point will lead to loss of quorum ranges will become unavailable.
- setup cockroach cluster using v19.1.4 - below we will create a table `foo` with an index configured on column `timestamp1` phofcode the `foo_timestamp1_idx` index is used in this example.
however, if we configure another table `bar` with a jsonb column, `data`, the behavior is different.
phofcode we can see that instead of the expected we are doing a scan on the primary value, and thus the span is all.
even if we try to force index: phofcode we see that an index-join is performed on primary keys for our table `bar`.
if perform a select on timestampz column: phofcode we see that index used, as expected.
start transaction; create table blog_posts ( blp_id serial not null primary key, blp_title varchar(25) not null, blp_slug varchar(25) not null unique, blp_intro varchar(100) not null, blp_text text null, blp_category varchar(20) null, blp_picture varchar(256) blp_author int null references users(usr_id), blp_created timestamp with time zone null default now() ); select * from blog_posts; commit; ``
for my testing scenario, im looking at one of our most troublesome tables, which can be characterized by: - about 1700 new records per second, append-only and written in micro-batches.
there are up to 44 different columns that can be set.
for any one record about half of the values are not null.
- our users can query across this in various ways, but the vast majority are doing ordered scans over two timestamps with some filter combinations after that - in aurora, were working with daily partitioned tables and while it works were wondering if we can get better performance with other databases for testing out cockroach i looked at the documentation and got myself a 3-node cluster on aws.
i started out with 3x`i3.xlarge` in insecure mode, just to keep my own testing simpler.
and i downloaded the latest version of cockroach as recommended from download page: `ccl v19.1.4 @ (go1.11.6)` i also set up 6x loader processes that wrote 2000 records as fast as it could, evenly split across all nodes.
in my mind, this to both see what kind of performance to expect, but also simulate a dr scenario where had load as fast possible.
ran this same tests multiple times different ec2 instances since figured maybe was running wrongly sized nodes.
tried `i3.2xlarge` and then switched `c5d` type that is mentioned in documentation ones you use for your own internal testing, `c5d.4xlarge` get enough disk space for one week data.
below are log excerpts from three machines my test cluster: `.123` phofcode `.74` phofcode `.217` failed dial context canceled; please retry.
have been waiting 1m0s attempting acquire lease 144 gossip/gossip.go:1499 [n2] first range unavailable; resolvers exhausted [n2] disk stall detected: unable write within 10s
`cockroach.exe start --insecure` 2. setup a license to allow backup/restore 3.
`backup database defaultdb to 'nodelocal://1/ ';`
1. create an aws eks cluster and configure kubectl to use that environment 2. run helm server locally as recommended by aws phofhyperlink 3. follow the instructions to install cockroachdb on k8s phofhyperlink , using helm chart 4. approve all of the csrs as instructed.
5. observe the pods not starting 6. kubectl logs showed the following errors: `sleep 5 + /cockroach/cockroach init --port 26257 1 cli/error.go:229 ssl authentication error while connecting.
initial connection heartbeat failed: rpc error: code = unavailable desc = all subconns are in transientfailure, latest connection error: connection error: desc = "transport: authentication handshake failed: x509: certificate is valid for node, not
run the test under stress (be sure to remove the code the adds the 5 second delay).
1. start `cockroach.exe start-single-node --insecure` 2 run `cockroach.exe quit --insecure` and confirm that you get ok 3 verify that the node didn't terminate and that you can't connect to it anymore.
another way to try to terminate the process is to press ctrl-c in a terminal window.
this has the same result.
the node doesn't terminate and stops responding.
the only way terminate it is with task manager.
1. ran a single node like this: `cockroach.exe start-single-node --insecure` 2. ran the script that is listed in #37315
1. create a table with a composite primary key and a non-unique index on a primary key field 2. insert one entry 3. upsert another entry with one matching primary key field 4. see error
i can create, rename and add: phofcode but the reverse does not work: phofcode
1. start cockroach using: phofcode 2. login by cockroach sql, create test table and turn on audit on table: phofcode 3. generate more audit data phofcode 4. list log file in directory: all log files are retained and won 't be deleted even if dir max size is larger than value of flag '--log-dir-max-size ' phofcode
test table and data phofcode crash query: phofcode in sub-query count(
setup steps: phofcode sql: phofcode when i check the ui, i see the read took 800+ ms despite being connected to the leaseholder as my gateway node: <img width="1446" alt="image" src=" phofurl this is unexpected.
when executing this via an implicit txn, i see the statement executing much faster: phofcode (side note: why is second run so much faster?)
subsequent executions yield some strange results in other ways.
i see that latencies for planning phase on insert are extremely high (this is also true on read, but closer to 100ms instead of 400+): <img width="1127" alt="image" src=" phofurl it is unclear why timings for reads so different inside of vs outside of transactions.
cc @rkruze and @jordanlewis as we spoke about this in person
describe in your own words.
1. i deployed a cluster with 3 nodes on k8s, following the instructions in phofurl phofcode 2. after the cluster is available, i created a database and then trying to create a lot of tables without data, the script is something like: go.sh: phofcode create_table.sh: phofcode 3. after several hours, i can see about 10,000 tables created, and then the cluster turned unavailable: phofcode there 's also an error message from ui: image phofimage i can see some warnings from logs but i 've no idea what happened:
1. define an environment with a lot of vars or long var values.
i found that a long `$path` and `$pwd`/`$oldpwd` (specifically, with deep directory depths) triggers the problem reliably.
2. run `$roachprod create local -n 5` 2. run `$roachprod start local` 3. run `$roachprod status local` 4. observe: despite the fact the processes are started (as revealed separately by `top`), `status` does not find them.
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster in ec2, using auto scaling groups 2. terminate one of the nodes, wait for the asg to launch a new instance, and let it join the cockroach cluster 3. observe that logs are looking for terminated node 4. decommission terminated node via `cockroach node decommission <nodeid>` 5. wait a few hours, and observe that logs are still looking for terminated node
`roachprod create knz-gce -u knz -c gce --geo -n 10` 2.
`roachprod run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc this fails within 1-2 minutes.
- search sentry for issues with "firstseen" less than 1 month: observe that there are many recent issues; none of them have an accompanying github issue - search github for issues with label `o-sentry`.
no issue was auto-filed since june.
i am batch executing upsert (~500 rows) to import data into crdb.
since, some of the data is already in the database i am using upsert to avoid getting errors for the batch execution when doing inserts.
the upsert is executed periodically.
1. set up cockroachdb cluster 19.1.4 2. create a database "mydb", run the script, then try to drop db.
i don't really know how to reproduce, since this does not happen in our two other clusters.
i have developed a go project directory which contains the test and will exhibit the problem.
i am only able to reproduce the problem using this particular test which contains a small amount of proprietary code.
i will send the directory privately to andrew deally at cockroach labs; please contact him to obtain it.
the directory contains a `readme.md` file with directions for reproducing issue.
the test executes in one of two modes: * savepoint - all transactions are retried when appropriate, and phofurl library is used for retries in order to demonstrate that problem is not necessarily limited library i typically use for retries * non-savepoint - test executes using library that typically use configured use client-side retries without savepoints the execution time in "savepoint" mode is about 45-60 seconds on my development machine, whereas execution time is about 1 second in "non-savepoint" mode.
the problem is easily reproduced and a workaround has been found copying the `--certs-dir` to another location while removing the `node.crt/key` files from it.
good case scenario (non-fatal error) v2.0.7: phofcode bad case scenario v2.1.8: phofcode good case scenario v2.1.8: phofcode
the following `cockroach.yml` file is the configuration of a 3 instance cluster of my cockroachdb: phofcode deploy the above configuration with the following command: `docker stack deploy database -c cockroach.yml` now open interactive shell against any of the containers running cockroachdb using: `docker exec -it container_name sh` run following in container to initialize cluster: `./cockroach init --insecure --host=cockroach` as you can see we initialize cluster using load balanced name.
now, if you run following in container everything works ok and you get your results: `./cockroach workload run bank --init --drop --duration=1m ` but if you only change workload to `kv` and run following: `./cockroach workload run kv --init --drop --duration=1m will get error: `error: dial unix connect: not a directory`
1. set up cockroachdb cluster ... 2. add store to existing node with one or more stores 4. see error
i found these issues using static analysis, so i'm afraid i cannot provide reproduction steps
1. set up a 3 node cluster in roachprod, running 19.1.3.
2. run a tpcc workload (~10 warehouses) 3. enable an enterprise license on the cluster 4. backup tpcc table into an s3 bucket or another cloud hosting 5. set up a rust app like this phofhyperlink 6. connect to your clusters public ip address (take note of this when setting up cluster) 7. execute the following in the client: phofcode
steps to reproduce the behavior: phofcode i shortened the output for readability, find the full log here: phofhyperlink
i dropped some indexes, and recreated.
not exactly sure when it started.
1. create a local cluster 2. create a new user 3. log in to cluster as that user 4. try to create a database.
select count(*) usertable; if possible, provide steps to reproduce the behavior:
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. run the django test suite once using the crdb backend - phofurl 3. after the tables and indexes have been created, rerun tests and say yes to dropping database.
4. this will fail with an error like: `split failed while applying backpressure to [txn: 97a88a2b], put put on range [(n1,s1):1, (n2,s2):2, (n3,s3):3, next=4, gen=1]: could not find valid split key`
this bash script fails reliably on my machine: phofcode
just run `build/builder.sh mkrelease arm64-linux-gnueabi`, nothing more
export cluster=andy-3node roachprod create $cluster -n 4 --clouds=aws roachprod run $cluster -- "sudo umount /mnt/data1; sudo mount -o /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-3 cockroach roachprod stage $cluster:4 workload start $cluster:1-3 adminurl --open $cluster:1 sql $cluster:1 create database movr; use movr; phofcode phofcode phofcode alter table vehicles add constraint fk_city_ref_users foreign key (city, owner_id) references users (city, id); alter table rides add constraint fk_city_ref_users foreign key (city, rider_id) references users (city, id); alter table rides add constraint foreign key (vehicle_city, vehicle_id) references vehicles id); alter table vehicles validate constraint fk_city_ref_users; rides validate fk_city_ref_users; rides validate phofcode
the same as in the above linked ticket: filling up some tables.
i 'm experimenting with a 6 node cluster on 3 physical machines (two nodes per machines to see foreign keys ' impact).
i set up some tables and started to insert data.
after some time, the queries hang and crdb processes settle (using minimal cpu) except one, which spins on one cpu (6277, 6276 is the other node on the machine): phofcode i 've just started experimenting with crdb but could see different errors.
this is one of them, so i 'm not sure i can reproduce this.
anyways, the ingest connects to all nodes on 256 threads total (equal number of connections and queries are load balanced between them).
the tables are: phofcode data is inserted with following python functions: phofcode these are called in threads with helper from here: phofurl
this bash script fails reliably on my machine: phofcode
case 1: phofcode result: `pq: type of array contents string doesn't match column type int` case 2: phofcode result: `pq: type of array contents int doesn't match column type string`
1. set up a geo-disributed cluster with a node each in aus, us, eu 2. place some load on the system (tpcc works fine) 3. attempt to load the data distribution page; this will often take longer than 30s to load and time out
we are not providing a full reproduction because this is a lot of effort and we believe that the description may be clear enough for the problem to be understood.
however, if the description is not clear enough for a change to be made, we will create and share such a reproduction.
1. log in to the admin ui 2. delete the sql user you are logged in as
1. create a fresh cluster with 3 nodes with ssds.
cluster settings are 3 replicas.
2. fill a table using import from postgres - works well, 20m rows, approx.
2gb data 3. create second table.
we fill this table using scripts that transfer data from a similar table from a postgres database.
7tb big, so import from did not work.
30 python scripts in parallel to insert data, around 10 on each cockroach cluster host.
they take row after row from postgres database, trim the row to < 1mb (if necessary) and insert it into the table.
5. after ~1 tb data inserted (around 10 million rows), the cluster stops reacting.
the nodes at one point restart but they don 't form working cluster again.
the steps to reproduce are as follows: 1, start the three nodes of cluster1 node1, node2, node3 create table in cluster1's node1, keeps inserting data 2, kill cluster1's node3 localhost:28253 process, clear node3's data keep cluster1's node1 inserting data 3, start the three nodes of cluster2 node1, node2, node3 at this time, the node3 (localhost:28253) ip port seen by cluster1 has not changed.
it is considered that is still the of cluster1 (actually is cluster2 at this time), cluster1's nodes will send grpc heartbeat to node3, receives cluster1 grpc heartbeat after detecting clusterid inconsistency and return error to nodes, then think node3's connection (to localhost:28253) is unhealthy, no, nodes will not synchronize raft logs to node3.
however, instantaneous clusterid that just started has not been obtained yet.
phofurl at this time, correct pingresponse will be returned cluster1.
after receives feedback, raft log will be send node3.
leading raft process panic of
start a new cluster: phofcode start a second node that can reach the first, but where the first can 't reach the new node.
phofcode the second node will join the first one, and both will show as ready in admin ui.
screen shot at 4 27 23 pm phofimage but notice that new node has 0 replicas, it will never be able to sync.
the first node will show logs similar to phofcode phofcode return 200, but that is not able to perform any queries:
as of yet, unable to reproduce this issue on the system config range if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
phofcode testing for an element in an array works: phofcode but the opposite does not: phofcode
setup several clusters as it only sometimes repros.
on each one run this until one fails: phofcode
1. set up secured cockroachdb cluster (all default configuration of 3 node with rf=3) in kubernetes.
cockroachdb version used is the latest v19.1.0 2. start benchmark run from the go client pod.
if requested can share the client code over support email channel.
3. the go client pod logs would indicate the write throughput degrading over period of time.
for the following schema phofcode running the following query yields different results in cockroachdb (v19.1.0) and postgresql v10.0 (example in this db fiddle phofhyperlink ) phofcode postgresql will output phofcode while cockroachdb will output phofcode the same behavior can be observed using json_agg
1. set up cockroachdb localhost cluster and run it insecure: cockroach start --insecure --listen-addr=localhost 2. connect to it: cockroach sql --insecure --host=localhost:26257 --database=custom --user=custom 3. execute command: show schemas; 4. see problem: schema_name +-------------+ (0 rows) time:
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. download source code on s390x system and extract it 2. cleanup slice.s file (to fix go compilation error: slice.s:1: error: junk at end of line, first unrecognized character is `/) 3. run `make build` 4. run `make test` following failures are observed: 1. testcases failed because of small difference in float value.
also discussed at group_link phofhyperlink `pkg/sql`:testlogic 2. one failure in `pkg/server`: testreportusage.
set up the following schema: phofcode then execute this query: phofcode removing either the `left join` or the `select` subquery fixes it.
my company is trying to migrate an application to cockroach, and it 's currently the only application using the cluster.
cockroach was running slowly when i came in today, so i performed a rolling restart of the clusters, which typically solves the slowness issue.
after doing this, i am now getting this error, although i can 't say for certain if this was an issue before restart.
do not know of any specific instance of us "writing to same row a lot", although was making a fair number of schema changes and reloading database as part this pending migration so potentially.
if possible, provide steps to reproduce behavior: unknown, as do not have a scenario for what caused error nor can tell from message what problem area is.
1. set up cockroachdb single server 2. send sql batch delete and insert per 1000 rows tx 3. see crash error happened * * error: reported as error * 145 failed to update store after merging range: io error: failed to remove dir: 0xxxx 22: goroutine 145 [running]: 0x1b) +0xdb 0x54cd41d, 0x1b, 0x2a7, 0xe8) +0x961 0x4, 0x2, 0x2e, 0x1, 0x1) +0x2df 0x1, 0x4, 0x2e, 0x1, 0x1) +0x93 0x2e, 0x1, 0x1) +0x85 0x3c2cb20, 0x0, 0x0, 0x0, 0x0, ...) +0x10ec 0x3c2cb20, ...) +0xb1 0x3c2cb20, 0x8, 0x6, 0x6812, ...) +0x8f2 0x3c2cb20, ...) +0x13e6 +0x13e 0x15) +0x12f +0x25f +0x45 +0xe8 created by +0xaf
i produced this specific crashing running a 3-node cluster of n1-standard-8 gce vms running a highly concurrent version of 3 of the following tpc-h queries with data loaded for scale factor 1 and vectorized execution enabled.
queries: phofcode workload command: phofcode
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. create database with crdb v2.1.6 2. create table with a check constraint 3. upgrade crdb to v19.1.0 4. run sql `show constraints from <table_name>;`
user is able to reproduce each time the import, they have provided their ddl, as well as goroutines from when the import stalls, it can all be found here phofhyperlink .
user is deploying us on gke, using n1-standard-4 machines, total of 12 nodes.
if possible, provide steps to reproduce the behavior:
follow the docs ( phofurl up to point (c).
job yields an error: phofcode the manifest relies on to initialize cockroach whereas gke generates different node host names, causing the job to fail.
what i was trying to accomplish is: - set up a 3-node cluster with west, central, and eastern regions.
- by default, queries against the token table should generally run on the western node, with central as a backup.
- if the query is coming from central, and the leaseholders are in central, it should prefer central and east indexes, in that order.
- if query is coming from east, and leaseholders are in east for that data, it should prefer east central indexes, in that order.
(all of above presumes that write traffic from e.g.
central node will cause leaseholders for data to be moved to node.)
expectations: 1. it will use or east indexes, order.
2. doing writes node means leaseholders are on node explain select access_token, refresh_token from where token_id actual output shows west indexes used despite leaseholder prefs (?)
tree field description render zigzag-join type inner pred @1 scan table token@token_id_west_idx fixedvals 1 column scan table fixedvals 1 column (10 rows) time: 754s ``
phofcode then run tpc-c: phofcode then make the index: phofcode then crash!
unclear if this can reproduced reliably yet.
i spun up a 3 node cluster using docker and forgot to forward the ports on 2 of the 3 nodes.
1. check out and build 2. start a 1-node local insecure cluster 3. in emacs, enter the following configuration: phofcode 4. start the sql shell from emacs by entering the command `m-x sql-cockroach` defined above 5. execute a longish-running `import` statement.
phofcode 6. interact with the sql shell buffer (i think i hit enter) 7. see crash (maybe) phofcode
phofcode then run the test: phofcode
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
phofcode then in another terminal: phofcode wait 5 minutes and in a third terminal: phofcode
i'm not certain how to reproduce the error.
in our case we had a foreign key constraint on a table ~10gb in size.
i altered the table to drop the constraint and then attempted to drop the index.
table db.foo has 1 million keys (each key is an int), total disk usage 26 gib.
when i tried `delete from db.foo`, memory usage on the gateway node went up by 2 gb.
is that command loading all keys in memory before issuing deletes?
the command was fast enough that i believe that it does not put an individual tombstone on each row, but the memory usage is unexpected.
truncate does not seem to exhibit this problem.
i could be using truncate here, but truncate is treated like a schema change for privilege purposes which is giving us some trouble given the way we setup privileges in our services.
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
index that was being created: `create index <index name> on <table>(geo_key, expiry_timestamp) partition by list (geo_key) (partition eti_mt_idx values in ('mt'), partition eti_be_idx values in ('be'), partition eti_de_idx values in ('de'))`
queries that were running at the time of the node crashing: queries phofhyperlink
export cluster=andy-schema roachprod create $cluster -n 7 --clouds=aws roachprod run $cluster -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-6 cockroach roachprod stage $cluster:7 workload start $cluster:1-6 adminurl --open $cluster:1 run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc" run $cluster:7 "./workload run tpcc --ramp=10m --warehouses=5000 --active-warehouses=3800 --tolerate-errors --duration=10h --split --scatter {pgurl:1-6}" then, in another terminal i created an index: phofcode while creating that index, in a third window i pkilled cockroach: pkill cockroach` cockroach handled this well.
i went to clean up the cluster to try a new test: phofcode and then started the node i pkilled: `andrews-mbp-2:~ andrewwoods$ start $cluster:2` this is where saw the large latency spike.
then verified that node 2 is reconnected with: phofcode
i attempted to reproduce, but it appears that the schema we have may be outdated as when i ran the create index query after creating all the tables it gave me an error that a specific column did not exist, we have the schema for db here phofhyperlink .
using dbeaver 1. create tables 2. send sql ... create an user 3. execute query above 4. see error using crdb sql client 1. send sql notice it works.
connect to cluster with `cockroach` command with special character such as ">" in password part of connection url.
: > cockroach sql --url
export roachprod create $cluster -n 7 --clouds=aws roachprod run $cluster -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-6 cockroach roachprod stage $cluster:7 workload start $cluster:1-6 -e adminurl --open $cluster:1 run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc" run $cluster:7 "./workload run tpcc --ramp=10m --warehouses=5000 --active-warehouses=4000 --duration=10h --split --scatter {pgurl:1-6}" post error, i 'm now running: $cluster:7 "./workload tpcc --ramp=10m --warehouses=5000 --active-warehouses=4000 --duration=10h --tolerate-errors --scatter {pgurl:1-6}"
unfortunately, i wasn't able to reproduce it outside of our code.
table structure: phofcode two statements (they are executed inside single transaction, one after another): phofcode there is an error in the second statement (in where clause, should be `sample.value`) which, i think, triggers the crash.
if this error is fixed, everything works fine.
1. start up a local cluster.
2. open the sql shell.
3. set an enterprise license.
4. create a database: phofcode 5. create a table with partitions: phofcode 6. create replication zones for partitions: phofcode 7. view the replication zone for one of the partitions: phofcode 8. try to use an alternative syntax to view the replication zone:
1) download cockroach source code from below url: phofurl 2) extract the package and execute "make build", it failed, there are too many errors from the output, the first error comes from the output of "go install": runtime/internal/sys internal/cpu runtime/internal/atomic runtime/internal/sys archfamily redeclared in this block tprevious declaration at undefined: wasm bigendian redeclared in this block tprevious declaration at cachelinesize redeclared in this block tprevious declaration at defaultphyspagesize redeclared in this block tprevious declaration at pcquantum int64align hugepagesize minframesize uintreg too many errors
export cluster=andy-tpch roachprod create $cluster -n 4 roachprod run $cluster:1-3 -- 'sudo umount /mnt/data1; sudo mount -o /dev/sdb /mnt/data1/; mount | grep /mnt/data1 ' roachprod stage $cluster:4 workload roachprod adminurl --open $cluster:1 sql $cluster:1 create database tpch; restore tpch.
* from with into_db = 'tpch ' run $cluster:2 "./workload run tpch --queries --scale-factor=1 {pgurl:1}"
we have the cockroach cluster in gcp.
we upgraded the cluster to 2.1.4 (from 2.1.0).
nodes are showing the right versions in the dashboard, but we still warning.
is cockroach considering old decommissioned/dead nodes?
roachprod create $cluster -n 8 --clouds=aws roachprod run $cluster -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-7 cockroach roachprod stage $cluster:8 workload start $cluster:1-7 -e adminurl --open $cluster:1 run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=10000 --db=tpcc"
export cluster=andy-hints roachprod create $cluster -n 2 roachprod run $cluster -- 'sudo umount /mnt/data1; sudo mount -o /dev/sdb /mnt/data1/; mount | grep /mnt/data1 ' roachprod stage $cluster:1 cockroach roachprod stage $cluster:2 workload start $cluster:1 sql $cluster:1 create database tpch; restore tpch.
* from with into_db = 'tpch '; adminurl --open $cluster:1 run $cluster:2 "./workload run tpch --queries --scale-factor=1 {pgurl:1}"
i can 't isolate the problem to a simple example what did you do?
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error sql phofcode ` and the error phofcode `
setup six node cluster like normal for tpc-c (no partitioning).
roachprod run $cluster:7 "./workload run tpcc --ramp=10m --warehouses=5000 --active-warehouses=4000 --duration=10h --split --scatter {pgurl:1-6}" in another terminal: roachprod ssh $cluster:1 ./cockroach quit --decommission --insecure phofcode
setup sql 20 and compelted the initial restore.
did not run any load.
describe in your own words.
ran the latest beta and sent some test load using phofurl checked the webui and saw a bunch of unknown events.
phofcode output is `pq: unable to encode table key: *tree.djson`
version: v2.1.2 my database table name | size | ranges | # of columns | # of indices -- -- -- -- customer 33.4 gib 523 9 3 lineitem 1.8 tib 27763 17 9 nation 29.0 kib 1 5 3 orders 268.9 gib 4381 10 4 part 27.0 gib 510 10 2 partsupp 182.5 gib 3231 6 5 region 0 b 1 4 2 revenue0 0 b 1 2 0 supplier 2.1 30 8 3 cluster setting :default hardware: 5 machine(3 replica) with 16core/ 108g mem/ 1.5t ssd/ 10gb network card.
query: phofcode and print the storeside.
i have change the from 64mib to many different values (such as 1gib/5gib/10gib...)
normal steps for tpc-c (no partitioning)
roachprod create $cluster -n 7 --clouds=aws roachprod run $cluster:1-6 -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-6 cockroach roachprod stage $cluster:7 workload start $cluster:1-6 adminurl --open $cluster:1 run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=2000 --db=tpcc"
this is during tpc-c 10k on a 15 node cluste
roachprod create $cluster -n 31 --clouds=aws roachprod run $cluster -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-30 cockroach roachprod stage $cluster:31 workload start $cluster:1-30 --racks=10 -e adminurl --open $cluster:1 run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=10000 --db=tpcc" run $cluster:31 "./workload run tpcc --warehouses=10000 --partitions=10 --duration=1s --split --scatter {pgurl:1}"
describe in your own words.
run the set of statements posted above.
using cockroachdb 2.1.4 kubernets 1.13.2
there is no steps to consistently reproduce it
- clone: phofurl phofcode phofcode related to: phofurl
phofcode gives this error message (there are less than 20,000 rows in the table) phofcode ` and this in the log file phofcode `
export cluster=andy-60 roachprod create $cluster -n 61 --clouds=aws roachprod run $cluster -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-60 cockroach roachprod stage $cluster:61 workload start $cluster:1-60 --racks=20 -e run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=10000 --db=tpcc"
i won 't include the entire schema but neither of the combined views have an ordinal 12 the combined view phofcode the first view phofcode second view phofcode what did you do?
describe in your own words.
phofcode views work individually but not when combined into a union if possible, provide steps to reproduce behavior: this is running on a kubernetes/google cloud platform.
the log file shows this in conjunction with this error 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
roachprod create $cluster -n 31 --clouds=aws roachprod run $cluster -- "dev=$(mount | grep /mnt/data1 | awk '{print $1} '); sudo umount /mnt/data1; sudo mount -o ${dev} /mnt/data1/; mount | grep /mnt/data1" roachprod stage $cluster:1-30 cockroach roachprod stage $cluster:31 workload start $cluster:1-30 --racks=10 -e adminurl --open $cluster:1 run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=10000 --db=tpcc"
here is a simple repro that demonstrates the issue: phofurl (it has the instructions to run the code in the readme.)
this is the query that caused the issue: phofcode if possible, provide steps to reproduce the behavior: 1. run the query 2. run `cancel query <query_id>` 3. check cpu usage graph and disk write ops
we will need to discuss with @bramgruneir and @tim-o to identify exact reproduction steps and to grab logs from the cluster as some of the discussion happened via conference call.
1. setup a crdb cluster.
my instance was a 3 node local cluster on my local laptop.
2. start up two crdb sql connections using the cockroach command line.
3. create the following table: `create table myseq (type_id int not null primary key, seq int not null);` 4. insert one record into the table: `insert into myseq values (1, 0);` 5. run the following commands across two sql connections: phofcode i confirmed that no lease transfers happened at time in which i was executing this sql.
1. export cluster=andy-nolbs 2. roachprod create $cluster -n 16 --clouds=aws 3. roachprod run $cluster:1-15 -- 'sudo umount /mnt/data1; sudo mount -o /dev/nvme1n1 /mnt/data1/; mount | grep /mnt/data1 ' 4. roachprod stage $cluster:1-15 cockroach 5. roachprod stage $cluster:16 workload 6. start $cluster:1-15 --racks=5 7. sql $cluster:1 8. set cluster setting = false 9. adminurl --open $cluster:1 10. run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=10000 --db=tpcc"
what i did: docker run --rm -d --name roach start --insecure docker run --link roach --rm -ti -e --name grafana grafana/grafana with the second command repeated a few times, while 'fixing ' the `drop index` migrations by manually dropping the index with `cascade` and recreating a similarly named index without any constraints.
a simpler case: run any crdb and issue a query like: select 'value: ' || 42; the result of that query is the following: select 'value: ' || 42 as v; pq: unsupported binary operator: <string> || <int>
1. to monitor the i/o, run # iotop -opa -d 2 2. from another terminal, starts a cockroach instance.
observe the i/o of "jdb2/sda2-8" 3. then start 2nd one, observe the i/o of "jdb2/sda2-8".
it starts to jump, ranging from 6% to 14%.
4. close them them, eventually it goes down to the normal level.
1. export cluster=andy-base 2. roachprod create $cluster -n 7 --clouds=aws 3. roachprod run $cluster:1-6 -- 'sudo umount /mnt/data1; sudo mount -o /dev/nvme1n1 /mnt/data1/; mount | grep /mnt/data1 ' 4. roachprod stage $cluster:1-6 cockroach 5. roachprod stage $cluster:7 workload 6. start $cluster:1-6 7. sql $cluster:1 8. set cluster setting = false 9. adminurl --open $cluster:1 10. run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc" 11. run $cluster:7 "./workload run tpcc --ramp=5m --warehouses=3400 --duration=15m --split --scatter {pgurl:1-3}"
1. export cluster=andy-base 2. roachprod create $cluster -n 7 --clouds=aws 3. roachprod run $cluster:1-6 -- 'sudo umount /mnt/data1; sudo mount -o /dev/nvme1n1 /mnt/data1/; mount | grep /mnt/data1 ' 4. roachprod stage $cluster:1-6 cockroach 5. roachprod stage $cluster:7 workload 6. start $cluster:1-6 7. sql $cluster:1 8. set cluster setting = false 9. set cluster setting = false 10. adminurl --open $cluster:1 11. run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc" 12. run $cluster:7 "./workload run tpcc --ramp=5m --warehouses=3400 --duration=15m --split --scatter {pgurl:1-3}"
run a workload which creates a large number of distsql flows.
1. export cluster=andy-base 2. roachprod create $cluster -n 7 --clouds=aws 3. roachprod run $cluster:1-6 -- 'sudo umount /mnt/data1; sudo mount -o /dev/nvme1n1 /mnt/data1/; mount | grep /mnt/data1 ' 4. roachprod stage $cluster:1-6 cockroach 5. roachprod stage $cluster:7 workload 6. start $cluster:1-6 7. adminurl --open $cluster:1 8. run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc" 9. run $cluster:7 "./workload run tpcc --ramp=5m --warehouses=4000 --duration=15m --split --scatter {pgurl:1-3}"
we do not currently have a reproduction.
a proposed strategy is to create a transaction with a large number of intents due to a large number of transactions and see how big we can go.
ideas on how to test potential solution would be appreciated.
1. export cluster=andy-base 2. roachprod create $cluster -n 7 --clouds=aws 3. roachprod run $cluster:1-6 -- 'sudo umount /mnt/data1; sudo mount -o /dev/nvme1n1 /mnt/data1/; mount | grep /mnt/data1 ' 4. roachprod stage $cluster:1-6 cockroach 5. roachprod stage $cluster:7 workload 6. start $cluster:1-6 7. adminurl --open $cluster:1 8. run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc" 9. run $cluster:7 "./workload run tpcc --ramp=5m --warehouses=4000 --duration=15m --split --scatter {pgurl:1-3}"
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. export cluster=andy-nolbs 2. roachprod create $cluster -n 7 --clouds=aws 3. roachprod run $cluster:1-6 -- 'sudo umount /mnt/data1; sudo mount -o /dev/nvme1n1 /mnt/data1/; mount | grep /mnt/data1 ' 4. roachprod stage $cluster:1-6 cockroach 5. roachprod stage $cluster:7 workload 6. start $cluster:1-6 7. sql $cluster:1 8. set cluster setting = false 9. adminurl --open $cluster:1 10. run $cluster:1 -- "./cockroach workload fixtures import tpcc --warehouses=5000 --db=tpcc"
try set/read the cluster settings in `cockroach sql` ` show cluster setting invalid syntax: statement ignored: syntax error at or near ".10" detail: source sql: show cluster setting `
`docker run -d -p -p start --insecure` and check out the pr phofurl and run `./test_cockroach.sh`
phofurl see this repo and run `run.sh`.
this spins up a 9 node cluster across 3 regions, creates tables and then applies constraints.
the table `central_west` should be constrained to the `central` and `west` localities.
however the above command does not work.
`central_west_json` executes the alternative command and table is properly constrained
> /usr/local/bin/cockroach dump labs --certs-dir=/var/certs | bzip2 > dump.sql.bz2
if possible, provide steps to reproduce the behavior: run the following script on cockroachdb v2.0.6 (or on v2.1, but you need to add `set optimizer = off`, problem does not reproduce with optimizer): phofcode here is what i see for two explains.
the first explain is before i create another index.
for some reason, instead of using `idx0`, which will cover `column0`, `column3` and `column5` it decides to scan primary key (which only does `column0`): phofcode however, after creating a slightly better index covering `(column0, column3, column5, column4)` (added `column4` at the end), it starts to do index scan: phofcode
describe in your own words.
i have a test program that creates some tables and then performs a sequence of database upgrades.
the code is working with sqlite, which allows database upgrades inside of transactions.
i have read the documentation ( phofurl and i suppose i may have to rewrite this part of the software, but the sql panic is concerning.
if possible, provide steps to reproduce the behavior: phofcode phofcode using latest postgresql java driver from: phofurl
1. checkout v2.1.3 tag 2. run `make buildoss` 3. run the cockroachoss binary like `cockroachoss start --insecure` 4. go to the webui - phofurl
we had loaded the tpch database and tried to take backup and restore the data into another environment having same cockroach version of 2.1.3 .
but we are facing below error message: backup test #1 phofimage phofimage restore error when trying to restore tpch database: phofimage backup test #2: phofimage restore error: source server details: source database: source table details: phofcode target details : even tried to restore into the same source environment with a different table name but still same error :
if possible, provide steps to reproduce the behavior: 1. download source code to a ppc64le machine with proper environment.
extract it 2. run `make build` 3. after a while an error will pop out and the process stops -- build files have been written to: scanning dependencies of target build_version [ 0%] building cxx object c++: error: unrecognized command line option '-march=native'; did you mean '-mcpu=native'?
recipe for target failed make[5]:
describe in your own words.
- start cockroach 3-clusters - kotlin async connect and query singleton.kt(singleton connection) object dbone { val pool: by lazy { url =
* execute `cockroach debug zip` on 3 node cluster running in docker * copy file locally and unzip
phofcode phofcode if i select it instead of count, it return correct result: phofcode
i think that 's the hard part: i had cockroach running for several days (with several system pauses in between).
after a restart, everything was fine.
1. start crdb server 2. start pgweb 3. navigate to the internal table (nothing happens in the browser) 4. check the pgweb console, observe stack trace
describe in your own words.
n/a if possible, provide steps to reproduce the behavior: n/a
there are 3 nodes in my cluster (2 windows server 2016, and 1 debian 9).
i had just updated them to version 2.1.2 yesterday.
this is an evaluation only cluster, so no real activity against it yet.
describe in your own words.
brought up the cluster yesterday afternoon and then left it running over night.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... two windows server 2016 and 1 linux (debian 9) all running cockroachdb 2.1.2 2. send sql ... / cli command ... not applicable 3. look at ui / log file / client app ... not applicable 4. see error (above)
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
1. start docker 2. git remote add timveil phofurl 3. git fetch timveil 4.
./run.sh 5. open localhost:8080 and observe that inserts in the cluster have stopped.
navigate to the databases page: image phofimage 6. docker-compose exec roach-source-0 /cockroach/cockroach sql --insecure --execute="select count(*) from ycsb.usertable;" phofcode 7. results should show about 10k records, however there is no indication these exist in the ui this does not seem to be a repro of #9433 as there is no interleaving on the table: phofcode
unclear whether it is reproducible.
the cluster was idle except for a periodic cron job running backups when the problem started, and it contains little data.
the problem came to our attention because one of these backups hung for several hours (and is still hanging as i write this).
the backup is being executed on node 2.
when spring batch is configured with the default options, the error will happen.
1. set up cockroachdb cluster 2. set up a spring boot project and use jpa to manage the schema of the database.
3. set a non-unique index on a column 4. start the java program, stop it, and start it again.
jpa will try to validate the schema and leads to exception.
execute: drop database oph cascade;
use the script here (crdb only): phofurl
if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster (3 nodes.
2 windows server 2016 and 1 debian 9 linux all on same esxi host).
the only databases in the cluster are the system database and the startrek db.
3 node cluster, all have each other 's ips in --join 2. add 4th node, set repl.
factor to 4, wait until synced 3. set repl.
factor to 3, shutdown unwanted node 4. decommission unwanted node through one of the live nodes 5. check logs on other nodes a day later the replication factors likely don 't have effect.
phofcode what did you do?
describe in your own words.
the result included these two lines phofcode if possible, provide steps to reproduce the behavior: 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error
start single or multi-node cluster.
run `import` of 6gb csv file containing 26m rows.
run 'delete' command filtering on a single column with 2 possible values, which should remove about half of the data.
the node connected to the client will slowly run up memory usage until it crashes.
1. create a new cluster that spans multiple regions.
2. create database 3. have flyway try to create tables within database
1) attempt to import and create an index, get a sst creation error: phofcode 2) remove the inverted index, complete import: phofcode 3) create the index without an issue: phofcode
the stall was observed while running the kv workload at high concurrency on large machines.
the stall can be reliably reproduced with the following steps: 1. set up cockroachdb with 3 database nodes on large nodes (i was using 64 core, doesn't seem to really reproduce on 4 core machines) 2. put load on the cluster using the following workload: `roachprod run ${cluster}:4 -- ./workload run kv '{pgurl:1-3}' --init --read-percent=95 --concurrency=1024` 3. while cluster in under load, execute following sql command to trigger lease change: `alter table kv.kv scatter;` 4. watch throughput tank and command hang
start a one node cluster at the sha above.
set up an enterprise license.
try to grant the `admin` role to that user.
describe in your own words.
data in mysql mysql> select * from account444; +------------+ | lastipnum | +------------+ | | +------------+ 10 rows in set (0.00 sec) mysql> show create table account444 g
import mysqldump " phofurl what did you do?
describe in your own words.
import mysqldump " phofurl if possible, provide steps to reproduce the behavior: import mysqldump " phofurl 1. set up cockroachdb cluster ... 2. send sql ... / cli command ... 3. look at ui / log file / client app ... 4. see error error phofcode
export databases and import into a new cluster.
i've attached a sql file taken from our test database (sorry, i didn't clean up column names and such) that you can use to reproduce.
backup.txt phofhyperlink phofcode then run the query: select * from cr_users u left join cr_relationships r on u.user_key=r.user_key and r.deleted = false left join cr_user_emails e on u.user_key = e.user_key and e.deleted = false where u.user_key=any array error: detected badly ordered input: [
`roachprod create andy-tpcc-16 -n 4 --clouds=aws `roachprod stage andy-tpcc-16:1-3 cockroach` `roachprod stage andy-tpcc-16:4 workload` `roachprod start andy-tpcc-16:1-3` sql andy-tpcc-16:1` `set cluster setting = false;` run andy-tpcc-16:1 -- "./cockroach workload fixtures import tpcc --warehouses=2500 --db=tpcc"` logs.zip phofhyperlink
describe in your own words.
if possible, provide steps to reproduce the behavior: i have distilled the problem to these simple sql statements - 1. start crdb 's sql client 2. execute `select and note the error you are greeted with: phofcode
phofcode `bin/roachtest bench --wipe=false --user=andy`
phofcode `bin/roachtest bench --wipe=false --user=andy`
run a restore using tpcc-bench on varying node configuration sizes.
phofcode `bin/roachtest bench --wipe=false --user=andy`
i'm not sure exactly what causes this but it looks like when a context is cancelled that's passed to `querycontext` the `cancel` function is invoked from `watchcancel` to cancel the original operation.
create a systemd file like so: phofcode and then observe that memory limit is reported incorrectly.
phofcode `bin/roachtest bench --wipe=false --user=andy`
update many bools from false to true, not touching other columns, eg: 1) table with a bool_col `bool not null default false` and text_col `text` 2) populate with 60k rows, all bool_col all `false` 3) populate text_col with blobs 13kb each (total 800m.
i don't know if this contributes, but ideally it wouldn't) 4) `update tbl set bool_col=true where bool_col=false;`
i 'm not sure what steps exactly caused this since i 've dropped/created indexes before without issue.
this doesn 't reproduce easily, but did result in 4 errors today for the customer during routine migrations.
phofcode then `make bin/roachtest` and finally `bin/roachtest bench --wipe=false --user=andy`
phofcode then `make bin/roachtest` and finally `bin/roachtest bench --wipe=false --user=andy`
`create table t(i int primary key);` 2. insert some data into `t` 3. note timestamp from `select now();` 4.
(optionally) `alter table t configure zone with 5.
`drop table t` 6. wait gc period until the `drop` job has completed 7.
`select * from t as of system time '{timestamp from 3}'
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. set up a 3 node cockroachdb cluster using roachprod (us-central1-b) 2. run kv workload using the `--sequential` flag, with the `--min-block-bytes` set to 1024, `--max-block-bytes` set to 2048 and `--read-percent` set to 0.
3. the admin ui then shows the behavior.
(i also notice that number of splits due increased block sizes are
use roachtest from two days ago change test to: phofcode run: `bin/roachtest bench --wipe=false --user=andy`
ruing `$ cockroach start --insecure` in fedora 28
use roachtest from two days ago change test to: phofcode run: `bin/roachtest bench --wipe=false --user=andy`
modified to use roachtest from 2 days ago: modified test to use partitioning and 6 nodes: phofcode ran: `bin/roachtest bench --wipe=false --user=andy`
phofcode what did you do?
describe in your own words.
i started `cockroach` 2.0.5 using in-memory storage, and it crashes on `sigint`.
started up cockroachdb after upgrading the binary from to this happened on 2 of 3 development instances so it doesn 't seem to happen all the time.
1. start server with `cockroach start --insecure &`.
2. run `cockroach sql --insecure` 3. press the tab key
ran `bin/roachtest bench --wipe=false --user=andy` noticed that a restore wasn't working: image phofimage then went to investigate status.
note that my cluster appeared to have no problems: image phofimage i knew based on previous experience to click on problem ranges--but nothing clued me into this.
clicked all problem ranges, then observed an invalid lease.
clicked the invalid lease and saw: image phofimage inspected cs and saw: image phofimage
ran `bin/roachtest bench --wipe=false --user=andy` we set ramp duration to 8hs: `+++ @@ -414,7 +414,7 @@ func loadtpccbench( // generation doesn 't actually run.
cmd = fmt.sprintf("ulimit -n 32768; "+ "./workload run tpcc --warehouses=%d --split --scatter %s "+ - "--duration=3m --tolerate-errors {pgurl:1}", b.loadwarehouses, partargs) + "--duration=8h --tolerate-errors {pgurl:1}", b.loadwarehouses, partargs) if out, err := c.runwithbuffer(ctx, c.l, loadnode, cmd); err != nil { return errors.wrapf(err, "failed with output %q", string(out))` observed: the restore took 48 minutes.
`: exit status 1 : exit status 1skipping cluster wipe --- fail: pq: setting updated but timed out waiting to read new value fail`
1. ran `bin/roachtest bench --wipe=false --user=andy`
1. increase ramp dur from tpcc-bench `@@ -414,7 +414,7 @@ func loadtpccbench( // generation doesn 't actually run.
describe in your own words.
if possible, provide steps to reproduce the behavior: 1. export fullname="andy-test" 2. export 3. export 4. ssh-add 5. roachprod create ${fullname} --gce-zones --geo --nodes 9 && crl-stage-binaries ${fullname} all scripts && crl-stage-binaries ${fullname} all release && roachprod start ${fullname} --sequential 6. roachprod pgurl --external 7. cockroach sql --insecure --url -e "create database movr;" 8. docker run -it --rm natestewart/movr --url load i see: server closed the connection unexpectedly this probably means the server terminated abnormally before or while processing the request.
(background on this error at: phofurl i checked logs and see lots of context deadline exceeded: phofcode
compare internal statement statistics phofhyperlink (crdb only) to the screenshot below.
screen shot at 2 17 27 pm phofimage note that roughly 1/3 of the queries in the table had latency >1s, yet the sql p99 latency graph shows latency of ~100ms, while distsql p99 latency shows 10s+.
1. please put some log (or some way to print) to show the tiers key and value in function diversityscore().
2. now start a cockroach cluster with two nodes with the reverse order of locality: nodea is started as : node b is started as: then nodea's locality's tier index 0 will point to <region, us>, while nodeb's locality's tier index 0 will point to <datacenter, us-west>.
3. so func diversityscore() is comparing region and datacenter value with each other, which may not be correct.
refer to doc phofurl what did you do?
ran sysbench harness with a few configurations changes, with and without index on sbtest1.
found the index overhead was more than a 2x reduction in qps.
in the above document you will find the details of the test and system metrics.
review chart below using no indexes as baseline to compare image phofimage if possible, provide steps to reproduce behavior: setup a 4 node roachprod cluster n1-highcpu-8 ssd installed sysbench - curl -s phofurl | sudo bash - sudo apt -y install sysbench - sudo apt -y install make automake libtool pkg-config libaio-dev libmysqlclient-dev libssl-dev libpq-dev - sudo apt -y install haproxy more details in phofurl
phofcode this left me wondering whether the logic for parsing index specifiers was broken
create table cb_1 (id int, unique(id)); insert into cb_1 (id) values (1), (1) on conflict do nothing;
try to put any select2 component on the screen
hover over a sidebar navigation item.
text colour is always blue.
it does not consider the accent colour.
steps to reproduce the behavior: 1. clone the fresh repo 2. add attribute phofcode to index.html line 192 image phofimage 3. run phofcode 4. inspect sidebar image phofimage
steps to reproduce the behavior: 1. go to any page with sidebar-mini 2. click on collapse the sidebar clicking at burger btn 3. click on accordion element (or any other element at collapsed sidebar) to get the sidebar opened 4. see the sidebar-mini class doesnt change from 'sidebar-collapse' to 'sidebar-open'
steps to reproduce the behavior: go to phofurl or phofurl
steps to reproduce the behavior: create a google virtual machine with 6 cores and an tesla v100 and 10 gb ram download tesladriver and install faceswap create a new model.
after 100 iterations press terminate and wait till the process stops.
press train again after the message: enabled tensorboardlogging the error comes.
steps to reproduce the behavior: 1. run python3 faceswap.py gui 2. click on train tab 3. set input and outputs parameters 4. click on train bottom 5. see error - os: ubuntu 18.04 - python version 3.6.7 - commit id 5887cb5 phofhyperlink
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1- 2x amd vega gpus in crossfire 2. high vram trainer ( i think normal ram has to be getting closed to maxed out) 3. ping pong and amd enabled.
4. let it run and when switching sides memory will randomly get dumped into gpu2 until vram usage in gpu2 reaches 100% and the trainer crashes.
steps to reproduce the behavior: run extraction.
switch to latest commit including changes from july 16. resume existing model.
produces error: file line 61, in str(shape1) + ' ' + str(shape2)) valueerror: operands could not be broadcast together with shapes (30, 30, 512) (32, 32, 512) see included log.
steps to reproduce the behavior: open the installer on windows 10 with all updates
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
i 'm using this command to generate the video.
steps to reproduce the behavior: 1. start training with any param 2. if files selected for a batch has some invalid characters in its path or name, program crashes
steps to reproduce the behavior: 1. run setup.exe 2. error
train a dfaker model with the default settings, i.e.
run the windows install without chocolatey installed
1. just run it... 1. change the installer folder.... 1. it will get the source.... 1. display the error...
steps to reproduce the behavior: 1, run `python setup.py` on windows 10 environment
1.train,ok 2.convert,ok 3.add more images to trump folder 4.convert,error
steps to reproduce the behavior: when i used the gui for training, the number of gpus was 3, and i found that the training was slower than 1 gpu.
then i tested using 2 gpus and result was same.
steps to reproduce the behavior: when i used the gui for training, the number of gpus was 3, and i found that the training was slower than a card.
then i tested using 2 gpus and result was same.
steps to reproduce the behavior: 0.when i set up the program,it doesn 't work by normal way,the setup program cannot identification the correct version of my runtime cuda(version 9.0) and cudnn.so i followed the guidance of this issue > phofurl i replaced line 404 :`self.env.cuda_path = chk[chk.find("=>") + 3:chk.find("targets") - 1]` with`self.env.cuda_path = "/usr/local/cuda"` at file name "setup.py".
here is my "setup.py" log after canged line 404. there is a strange place that is after canged line 404 gcc and g++ version cannot be correctly identified,and cuda version here still 10.1(version of runtime cuda library actually run on my computer is 9.0).
phofcode 1. at first time, i have installed a cudnn(version : 7.5.0), so when run: `python faceswap.py extract -i ~/faceswap/photo/trump -o ~/faceswap/data/trump` program seem to be entered an dead loop,the following last output log information: phofcode 2.then try to replace my runtime cudnn library(version : 7.5.0) with lower version (version 7.0.4) ,run ` cat | grep cudnn_major -a 2` to confirm it replaced successful.
3. but when restart "faceswap.py" again, the same situation show up.
steps to reproduce the behavior: 1. nvidia-docker run -it --rm -v deepfakes-gpu /bin/bash 2.`python3 faceswap.py train -a data/... -b data/... -m model... -bs 16`
steps to reproduce the behavior: 1. run extract command - python faceswap.py extract
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. install the git only on d drive.
it would find the git is installed but would try to run git under c drive regardless.
on windows 10: run python .
tools.py alignments -j manual -a alignmentpath -fr framespath
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1.
`docker build -t deepfakes-gpu -f dockerfile.gpu .` 2.
`nvidia-docker run --rm -it -p --hostname faceswap-gpu --name faceswap-gpu -v /opt/faceswap:/srv deepfakes-gpu` 3. then should see the error
steps to reproduce the behavior: 1. mvn clean install -dskiptests 2. failed to collect dependencies at xf
1. npx create-docz-app docz-app-typescript --example typescript 2. move button.mdx and button.tsx from /src/components into /scr/components/button 3. npm run dev phofcode
please try to build a small repo with a repro of your problem and provide a link to it.
doing that allows more people to quickly help you.
if you can 't provide a repo then provide clear steps describing how to reproduce the issue.
`yarn create nx-workspace` 2. enter workspace name 3. select empty workspace 5.
`npm i -g @nrwl/cli` 6.
`yarn add -d @nrwl/react` 7.
`nx g @nrwl/react:lib test` 8.
`nx g @nrwl/react:component --project=test button` 9. add the following mdx next the button component file phofcode 10.
`yarn add -d docz@next` 11. run `npm run docz dev` 12. see the errors in console phofcode after installing `gatsby-plugin-emotion` error comes from it trying compile my `readme.md` file.
phofcode followed by bunch of these errors phofcode
1. create-docz-app my-docz-app && cd my-docz-app 2. change src/index.mdx to above example 3. run npm run docz dev 4. see error in browser: phofcode
phofurl 1. install rc.72 2. go to `thing` component 3. you'll see component undefined error 4. install rc.58 5. everything will work phofcode 4. run npm run docz dev 5. see error in browser image phofimage
this is the file content for buth mdx files: button.md phofcode page-header.mdx phofcode
to reproduce get the same error as mine, clone this themesdir example phofurl add a index.js under theme/gatsby-theme-docz/ folder, index.js content: phofcode yarn, then yarn dev, you'll get error message.
or you can clone from my sandbox phofurl please notify me if there's no error on your side
1. create-docz-app my-docz-app && cd my-docz-app 2. change the following files: phofcode phofcode phofcode 4. run npm run docz dev 5. see error in the terminal (the doc is not rendering so no web ui available)
1. follow the steps in phofurl use docz typescript example.
image phofimage 3. rename to 4. edit phofcode 5. npm run dev.
image phofimage 6. undo rename and edit.
`npx create-docz-app docz-app-basic` 2. change src/index.mdx to phofcode 4. run `npm run docz dev` 5. see error in browser phofcode
git clone phofurl checkout docs/doczjs branch run: yarn docz phofcode
i have built a small sandbox to reproduce the issue: phofurl run `yarn docz:dev`
`$ npx create-docz-app docz-app-typescript --example typescript` 2. create a random exported component in the file `src/index.tsx` (either named export or default export) 2. change `src/index.mdx` to phofcode 4. run `npm run docz dev` 5. see error in browser
`$ docz dev -p 3001`
create default site override theme set colors.background
a slightly modified version of the basic example repo with the bug can be found here: phofurl the core issues comes down to: phofcode this results in the error: phofcode
1. clone this repo phofhyperlink 2.
`yarn workspace test-dev-1 start:docz` to reproduce error.
`yarn workspace test-dev-2 start:docz` to see it is working correctly with docz 1.x
import props from docz ( `import { playground, props } from "docz";`
this my code phofcode and this file index.md : --- name: breadcrumbs menu: components --- phofcode phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. make sure you have clean cache by removing .cache inside .docz 2. run `docz build` 3. try to serve the statics, e.g.
`docz serve` 4. see error
1. run the build command for docz
`yarn serve` 5. broken playground code preview
`## playground <playground> {() => { const demoimage = ' '; const data = [{"id":0,"title":"slide 7","image":demoimage}] let componentref = react.createref(); return <pgdemo> <animatedslider ref={componentref} id="pgdemo" data={data} slidestoshow={4} slidewidth={170} slideheight={170} unpinslide={1} pinslide={3} leaveup={() => console.log( 'leaving up ')} leavedown={() => console.log( 'leaving down ')} leaveleft={() => console.log( 'leaving left ')} leaveright={() console.log( 'leaving right ')} selectmethod={(data) console.log( 'selected >> ', data)} /> </pgdemo> }} </playground> ` shell success run static queries - 0.017 s 1/1 169.38 queries/second configuring yargs through package.json is deprecated and will be removed in the next major release, please use the js api instead.
error unhandled rejection unknown: adjacent jsx elements must be wrapped in an enclosing tag.
did you want a jsx fragment <>...</>?
(54:9) 52 | selectmethod={(data) console.log( 'selected >> ', data)} /> 53 | </pgdemo> > 54 | `}</code></pre> | 55 <p>{` }}`}</p> 56 </playground> 57 </mdxlayout>/
1. install `docz@next` on a fresh create-react-app 2. run `yarn docz:dev` 3. the following warning is repeatedly outputted: phofcode 4. before it eventually fails: phofcode
1. go to phofurl 2. scroll to the bottom of the screen 3. click any menu item 4. see that the page loads in the same bottom position.
1. start the development server 2. open browser to localhost:8000 phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. copy the typescript example from the docz repository 2. extend `tsconfig.json` 3. install dependencies 4. run `yarn dev` or `docz dev` phofcode
1. yarn init 2. yarn --pnp 3. yarn add docz@next react react-dom 4. yarn run docz dev yarn will then complain and kill the process.
when using the above pattern while using `styled` from `@emotion/styled` as below, i'll get the error.
phofcode when the `mystyleddiv` component is defined in another file and then imported into the readme.mdx, it works just fine repro repo link phofhyperlink
1. clone phofurl 2. npm i 3. npm run start 4. see the error *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. follow the instructions here: phofurl 2. run project 3. click on the links in the menu
1. create a dummy component, testcomponent <img width="304" alt="screenshot at 11 06 40 am" src=" phofurl 2. create the documentation for this components in testcomponent.mdx for docz and include the props component.
<img width="644" alt="screenshot at 11 08 48 am" src=" phofurl
1. go to phofurl phofhyperlink ' 2. clone the repo read the readme for install dev dependecies phofcode
`mkdir parent && cd parent && npm init` 2.
`npm install --save-dev react react-dom` 3.
`mkdir site && cd site && npm init` 4.
`npm install --save-dev docz docz-theme-default` 5. this will install `react` & `react-dom` in `./site/node_modules` (which it should not).
create this component phofcode with this documentation phofcode
1. docz dev 2. view the file .docz/app/db.json , component props exists 3. broswer the page, props rendered correctly 4. click a menu to other page , and then back to this , props lost 5. refresh page , props display again
<someofcomponent someprops={` line 1 line 2 line 4 `}></someofcomponent> an empty line between 2 and 4. phofcode
1. create a playground component.
2. inside the playground create a styled-component 3. try to return the component
create a new file mdx file: `import { reactcomponent as logo } from "@icons/bookmark.svg"; import { playground } from "docz"; const app = () => ( div> {/* logo is an actual react component */} logo /> /div>> );` i left the opening less than sign off of the div/logo.
just a simple trying to show the log.
phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. create a documentation project.
3. open it on the browser.
4. enable the mobile viewport.
`npx docz dev` 3. the docz site opens in the browser
1. go to yubabajs.com on a mobile browser (chrome) 2. try to scroll down the page 3. notice that you can't
1. go to any docz site 2. scroll down 3. navigate 4. notice you won't be scrolled to the top of the new page
1. go to install docz and configure on any cra app 2. run docz dev server.
3. see error (when relative file-paths) phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. clone this repo phofurl and cd in folder 2. yarn && yarn start (or npm i && npm start) 3.
1. go offline 2. open generated docz site with code block in markdown 3. see codemirror syntax highlighted pane empty (white background)
here is a minimal example to reproduce the issue.
phofcode navigate to localhost:8000 in your browser.
you will notice that docz is running successfully and is displaying our index.mdx file as expected.
next, navigate to our test page where we called the hook: phofcode you will likely notice that the docs array is empty.
this can be checked in the console where docs array logged or alternatively in dom where contents inside our `<div>` are empty.
1. create a component with styled-components 2. use the default docz config 3. load docz page 4. see console for warning
`npm i && gatsby build` 5. see error phofcode
1. create a module that default exports an object that contains an attribute that is a javascript reserved word: phofcode 2. import that module into an `.mdx` file.
3. see error: phofcode minimum reproduction: phofurl
using docz's `basic` example project: 1. set `base` in `doczrc.js` to `/foo/` 2. run `yarn dev` 3. hover over menu items and `docz example basic` title
1. create an empty folder, for example: `docz-test` 2. go into `docz-test` 3. install dependencies `yarn add docz docz-theme-default --dev` 4. create a `home.mdx` with content described in getting-started-using phofhyperlink 5. start dev server with `npx docz dev` 6. once open ` phofurl you will see the above error in console *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. create a working docz site with component, e.g.
: phofcode 2. create an exported object in the component 's module, e.g.
phofcode 3. run site and see error see working example at phofurl specifically the datetime component phofhyperlink
you can see it if you run my repro in latest branch; props component doesn 't display until you create folder called `src` and move it in there.
the reason that this is such problem that we strictly separate documentation and source code by respective top-level folders `docs` and `src`, so make propstable work, i have do this: phofcode phofcode this works, but frankly not great explain when onboarding new devs ("oh yeah just import it into document pass it props" vs "well, you export your props interface, import them from file has be in docs folder, then create an empty dummy component, then import _that_ into document pass props") this problem persists across versions too (0.13 -> 1.2
1. go to phofurl 2. change from phofcode to phofcode
1. start in an empty folder 2. follow the guide on phofurl 3. add an .mdx file "helloworld.mdx" in root following the guide 4. run "yarn docz dev" 5. go to localhost:3000 (the default page says "page not found check if you haven 't changed the document route or deleted it!"
"hello world" link appears in the menu, but it links to page " phofurl 7. click "hello world" link, navigates to non-existing page
1. install laravel installer: `composer global require laravel/installer` 2. create a new laravel project: `laravel new blog && cd blog` 3. install js deps: `yarn add react react-dom && yarn add docz@next docz-theme-default@next --dev` 4. add src config option to show that it 's not relevant for this bug: `echo "export default {src: \'./resources/js \'}" >> doczrc.js` 5. start the docz server: `yarn docz dev` phofcode see here for a repository i 've prepared earlier: phofurl
1. put a random string into doczrc.js as value for property `indexhtml` 2. run `docz dev`
1. write a couple of `.mdx` file(s) 1. check if it's working c run `yarn docz:dev` and see it in the browser 1. create production build c `yarn docz:build` 1. check the generated bundle: phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
* it's internal repo, can't provide a link
1. open `doczrc.js` 2. set the contents to be: phofcode 3. go to the docz style guide 4. inspect the page using chrome dev tools 5. observe no `<link rel="stylesheet ...>` matching the above font url
1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error phofcode *in order to allow us to quickly reproduce you issue please include a link a reproduction repository.
1. create a complex wrapper for your docz project.
perhaps one that uses several providers.
2. click the open in codesandbox button -- the url generated for this should be long.
in my example it breaks 5k characters.
3. see the 414 (uri too long) error thrown in the browser.
1. open a docz-generated site 2. open browser dev tools pinned to the right and increase size of dev tools window until viewport width is less than 1120px 3. attempt to click on hamburger menu to view sidebar here's a test repo: phofurl check out the repo, run `yarn docs`, and open generated site to reproduce the bug.
1. create component file 2. create an object on another file, which contains the info 3. import the object in the component file, use object keys as 4. try to check possible values on propstable
1. create a `readme.mdx` 2. add a table as content: phofcode 3.
`npm run docz:dev` 4. scale your browser window 5. see table not being 100% wide
2. make your window really tall (i have a vertical monitor).
3. see that when the content ends it reveals a white bg.
1. take any docz site.
2. find an <h2> ( ## ) tag.
3. hover over the text 4. no icon is displayed.
1. run docz build 2. inspect console to find screenshot 21 35 17 phofimage
this throws an error... phofcode but this works just fine phofcode stack trace: screenshot 16 58 14 phofimage
1. run `npm run dev` in typescript folder under examples folder of this project.
2. go to phofurl 3. click "open in sandbox" image phofimage 4. sandbox displays this error: > invariant violation > element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.
you likely forgot to export your component from the file it 's defined in, or you might have mixed up default and named imports.
phofcode *in order to allow us to quickly reproduce you issue please include a link a reproduction repository.
* you can use the typescript folder under exsmples folder as sample.
`npm i` `npm run bs` `npm run packages` node module installed -> `libundler 1.8.1` `libundler@1.8.1 | mit | deps: 33 | versions: 34`
1. create a new project 2. install `docz` with `pnpm install docz --save-dev` 3. run `npx docs dev` 4. see error phofcode
just running docz causes this error to appear.
<details> <summary> my `doczrc.js`</summary> <br> phofcode </details> <br/>
docz versions: `docz v0.13.7` `docz-theme-default v0.13.7` (i also tried with on both but still doesn 't work.. this is my component file `test.js` phofcode and my `test.mdx` file phofcode
1. npx create-react-app my-docz-app 2. cd my-docz-app 3. yarn add docz docz-theme-default --dev 4. yarn install 5. yarn docz de
1. run `build` 2. fix paths on index.html 3. open in the browser 4. see error image phofimage
1. update the dependencies of a project to include webpack 4.29.0
a clean docz install doesn 't appear to have this problem, so there must be some interaction with our dependencies causing this (styled components?
i 've included all our dependencies below phofcode phofcode
i am assuming this bug comes from how i import my modules.
i used resolved path to import my module, but docz thinks it is a node module missing dependency version?
build docz in a non-tty environment (e.g.
1. go to playground 2. clicked expand code 3. click coding area
upgrade to emotion 10 run docz:dev *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. install the latest version of `docz` (`0.13.7` for example).
2. run `docz dev` through an npm script.
this is just the latest error where i gave up: phofcode this is the before installing `@emotion/core` myself: phofcode
1. clone examples/typescript 2. yarn & yarn build 3. serve .docz/dist
in a shared utils file, i have props types like this: phofcode in a separate component, i import the proptypes phofcode and the proptable only renders with someprop2 and prop1 is missing
1. create a styled-component 2. import it into an .mdx file 3. start docz dev server 4. see error
*in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
just wrapping my components in phofcode my mdx code: phofcode more information: i already see this issue: phofurl and i already install the docz-theme-default and still crash edit: i did this example app to simulate the problem, take a look: phofurl
just wrapping my components in <playground> phofcode i 'm using styled-components and typescript?
but if i just use: phofcode it still breaks..
`npx create-react-app my-app && cd my-app` 2.
`yarn add docz docz-theme-default --dev` 3. create a basic mdx file 4.
`yarn docz dev` 5. a blank page appears 6. see this error in console: phofcode
1. clone and install test repo phofcode or create two markdown files like this: phofcode 2. search in menu by typing `m`, then `m1` 3. backspace and repeat 2 over and over again.
install docz and try to start dev.
1. upgrade docz 2. run `docz dev`
given the following component: phofcode (i 'm aware that switching the statement around would solve it, but i 'd rather not change the logic of the component just to get `propstable` to render.)
1. install the most recent version - - `docz@0.12.16` 2. run `yarn docz:dev` 3. open the docs 4. see error phofcode
1. clone the repo 2.
1. install docz package 2. run `yarn docz:dev` which is `=== docz dev` 3. typeerror: cannot read property 'tap ' of undefined during compilation phofcode
1. add to doczrc.js phofcode 2. add to a mdx file: phofcode 3. open file in web browser 4. see that there no "lastmodifieddate" prop on each doc logged out in the console 5. manually add an arbitrary key to the frontmatter on that same doc 6. reload and see that the manual key is present on the doc that was logged out in console
reproduction repository phofhyperlink (optional: 1. generate a fresh create-react-app and install docz as usual) 2. run `yarn docz:dev` 3. see error phofcode phofcode
1. run docz dev 2. see error this dependency was not found: @/components/link in to install it, you can run: npm install --save @/components/link
1. git clone phofurl 2. cd ./examples/typescript 3. npm install && npm i docz@0.12.5 typescript image phofimage
`mkdir <your-docz-project> && cd <your-docz-project>` 1.
`npm init` 1. add `"docz:dev": "docz dev"` to your scripts 1.
`touch any-name.mdx` put some text in the .mdx file.
i used the markup from the getting started guide: phofcode `npm run docz:dev` i wind up with this: pic at 3 44 05 pm phofimage
1. run docz:dev on a larger codebase 2. allow it to compile 3. trigger hot reload by editing a file 4. control+c the docz cli (sends sigint to the docz cli process) 5. docz cli process is killed due to the node.js default sigint handler 6. observe that the subprocesses are still compiling and logging to stdout/err
`npm i babel-plugin-emotion` and create a .babelrc like: phofcode then, add `<div css={{ backgroundcolor: 'blue ' }}>stuff</div>` into an mdx file and watch it make a blue div then, try adding `<div css={{ backgroundcolor: 'blue ' }}>stuff</div>` inside a `playground` and watch it be not-blue
1. clone the repo, install dependencies, and start the dev server phofcode 2. navigate to localhost:3000 in your browswer 3. your page source or open dev tools 4. observe `<svg><symbol id="mydot" width="10" height="10" viewbox="0 0 2 2"><circle cx="1" cy="1" r="1" /></symbol></svg>` in the body (it is expected in the head) *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
phofcode `basebutton` here is just a semantic ui button whose styles have been overwritten using styled-components.
i also tried just a div, it didn't work either: phofcode phofcode
see phofurl deployed at phofurl image phofimage when i add an `order` key to my docs in the api section, nothing moves around *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. go to phofurl 2. open to "basic example" from navigation bar.
3. return back to "actions example" from navigation bar again 4. this is not same actions example with first page initialized.
press f5 to see difference.
additionlly codes after 11th line is not showing till you click 11th line.
1. create a basic .mdx file 2. import `playground` from 'docz' 3. add a `<playground>` section 4. compile 5. load the page 6. see the error
i guess this is self explanatory.
1. clone repo 2. run `npm install` 3. run `npm run docz:dev` 4. open browser to phofurl and open developer tools 4. see error if, however, `yarn` is used in step 2, issue does not appear.
this issue only appears in version 0.12.x, 0.11.x works fine with npm.
phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
* i created a clean project here: phofurl
1. include a `<playground />` element in an mdx file.
the component(s) need to be longer than 11 lines (in my case) for it to be cut off.
2. view the page in the browser and the code should be cut off.
3. click inside of the `playground` and code should then appear.
1. install `emotion`, `react-emotion`, `babel-plugin-emotion` 2. put `{ "plugins": ["emotion"] }` in `.babelrc` 3. styling component by phofcode 4. create `mdx` file for that component 5. from docz ui click code sandbox button 6. see the error
i'm not 100% how to reproduce this reliably.
you could try starting docz and before it finishes starting, try to stop it it doesn't stop and continues to try to compile.
i'm fairly certain that this also happens when it's been running.
maybe only when it's recompiling.
*in order allow us quickly reproduce you issue please include a link a reproduction repository.
* sorry, closed source :-(
`npx docz dev` 4. see error phofcode
add an enum prop with a lot of options to one of the first proptypes in a component.
show the `propstable` of that component.
1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error phofcode *in order to allow us to quickly reproduce you issue please include a link a reproduction repository.
1. try headings with link type nodes in the ast instead of just a text node
1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error phofcode *in order to allow us to quickly reproduce you issue please include a link a reproduction repository.
1. set `hashrouter: true` 2. create a simple `.mdx` file with a local link: phofcode 3.click the hashtag link `hello` 4. you will be navigating to the "page not found": `localhost:port/#hello`
1. clone my repo phofhyperlink 1.
`npm run docs` 1. install docz `npm i docz -d` on pre-existing project phofhyperlink 1. add to scripts package.json ran `docz dev` loads nearly completely see error phofcode here's a link to my repo's docz branch: phofurl
1. go to '...' 2. click on a page from the sidebar menu multiple times to see the modal toggle 3. scroll down to '....' 4. see error phofcode *in order to allow us quickly reproduce you issue please include a link a reproduction repository.
1. go to ' phofurl 2. see the auto scroll not happen
1. have a simple project with headings in mdx files 2. run `npm install`, and `docz dev` 3. headings don't appear as a submenu item 4. stop project 5. remove node_modules, purge any lockfiles 6. run `yarn install` and `docz dev` 7. headings _do_ appear as submenu item if yarn installs, everything's groovy.
if npm installs, things are broken.
header links: 1. open an application page with headers like `## header name` 2. there is no link to the header in the sidebar closed submenu after refreshing: 1. open an application page, go to submenu page 2. refresh the page 3. sidebar submenu still closed
phofcode phofcode phofcode phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
* not available at the moment
1. go to any mdx file 2. inside <playground> place an async function 3. see error overlay example code : phofcode link to repro phofhyperlink
phofcode phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. go to phofurl 2. you will see the error message here 's the repo phofurl
1. run `docz:dev` 2. create a new `.mdx` file 3. navigate to that newly created `.mdx` file 4. reload the page 5.
1. updrade from 0.7.1 to 0.9.5 2. run `yarn docz dev` 3. see error phofcode
1. clone provided repo 2. install dependencies 3. run `npm run docz:dev` 4. see console output phofcode
1. upgrade docz from 0.8.0 to 0.9.3 2. run `docz dev` 3. see error phofcode
1. make any `playground` on docs.
2. click `html` output button.
4. paste the copied text on anywhere.
1. import a component from `*.tsx` file 2. navigate to this component 3. see the docz app hanging there reproduce repo phofhyperlink note that if i import component from `input1.js` everything works fine
in order to 1. git clone phofurl 2. yarn install 3. yarn dev
1. clone that repo 2. install dependencies 3.
`npm run docs` 4. look at the menu order
1. docz dev 2. see that node_env is set to production, but should be development
phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
here is what i used to test - first i load the `typography` page successfully by using the sidebar nav, it loads successfully.
next i try to refresh the page and it 404 's.
then i navigate to the `colors` page and it loads successfully.
next try to refresh page and it 404`s.
example: phofurl note that the page belongs to the menu "components", but it 's closed.
1. go to phofurl 2. click on provider --> facebook 3. refresh page (f5 or cmd+r) 4. see 404 error phofcode
`npm run docz:dev` 2. go to ` phofurl 3. type some words in search field 4. see error on console phofcode
1. run `docz dev` 2. open `localhost:3000` 3. view console error phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. create a styled-component with type declaration phofcode 2. import it in a `.mdx` file 3. see a blank page for that route
1. yarn add docz --dev phofcode *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. create a laravel 5.6 project 2. add some scss content, update, etc all this stuff 3. install docz 4. launch docz 5. see error
1. install docz on windows 2. make a mdx file and run docz phofcode phofurl it is on the docz branch
add custom element component, preferably polymer based (not mandatory) 1. go to 'localhost://3000 ' 2. open dev-tools console 3. error: `uncaught typeerror: class constructor polymerelement cannot be invoked without 'new '` *in order to allow us to quickly reproduce you issue please include a link to a reproduction repository.
1. run `npm install` 2. run `npm dev` phofcode
1. install cors phofhyperlink following its guide
1. npm install 2. npm test
1. clone the showcase demo 2. install packages and init the test database 3. run the test
1.create a workpad with an empty first page 2.add a second page with an element on it 3.generate pdf
1. have data set with 2 distinct ip ranges in it and that follows ecs or some standard that shows server (originating) and client (responding).
in my data set i have a lot of public ip's and my test environment 2. apply a filter for `server.ip is between to 3. apply a second filter for `client.ip is not between to
1. create a transaction with a span that has a long name 2. open the transaction in the apm ui
1. open kibana with ie11 2. content will be remdered, menu (left sidebar) will be missing, probably due to the above error
1. create new map (/app/maps) 2. click edit button of the `road map`layer 3. click add layer 4. click edit button of the `road map` layer => nothing happens the user would have to click `cancel` first to get back to editing
not able to figure out how to make it reproduceable
1. open phofurl 2. wait a bit on slower connections for a 43 mb animated gif to load and a 28 mb animated gif to load
1. create a new platform plugin 2. use and provide it an invalid api route 3. analyze the response in the browser network tab - html is returned see this branch for a working example: phofurl
1. navigate to "snapshot and restore" 2. you must have some snapshots present 3. click "delete snapshot" 4. and i get an error
1. upload a geojson file containing polygon or mutipolygon features 2. on preview, move the mouse to hover over a single polygon feature 3. move the mouse to a different feature (it doesn't update the tooltip)
1. set true` in kibana.yml 2. start kibana
1. create a new visualization (in this case pie chart) 2. split the visualization into multiple slices.
3. disable one of them and try to remove it while it's disabled.
4. you can not remove it or re-enable until you click on any of the other dimensions (the one you click gets removed)
1. create new pie chart visualization 2. add a slice parameter on term count 3. add another slice parameter on term count 3. add a third slice parameter on term count
with the sample ecommerce data 1. create a tsvb chart with group by: filter, with `customer_gender: "male"` as the filter.
2. change to group by: terms, on the `customer_gender` field.
3. notice that only male customers are displayed in the chart.
4. go back to group by: filter and remove `customer_gender: "male"` filter and then return to terms.
5. now all data is displayed properly.
1. on `siem-dev`, look for user `bob` in the authentications table and drag it to the timeline 2. try to drag the `test.py` to the drop area
1. create a plugin that cannot be used with the current kibana version.
for example, a plugin for `7.4.0` 2. start kibana 3. kibana crashes
1. follow the instructions for " adding a choropleth layer phofhyperlink " 2. at the layer style step, instead of choosing a gradient color, choose `customer color ramp` 3. after completed, go to the legends and the custom color levels are not displayed.
1. install 7.4 elasticsearch and kibana 2. load some data.
same data should do here because the splash screen in kibana only shows up if there's no index pattern saved objects and it wouldn't be the normal case for someone to upgrade when they don't have any kibana index patterns.
3. upgrade to 7.5.0 4. start kibana and see if any banner or notification appears
1. install the logs sample data 2. open the `[logs] web traffic` sample workpad 3. click on `manage assets` at the top 4. observe the missing images
1. start kibana with a non-english language, i.e `i18n.locale: en-xa` 2. navigate to canvas 3. create a workpad 4. add an
1. set false` in kibana.yml 2. search for "telemetry" in the advanced settings page.
3. search for "afasfg" in the advanced settings page.
1. add ecommerce sample data, go to discover 2. add `order_date` and `products.created_on` fields and save a search 3. create dashboard, add this search and save the dashboard 4. click gear on search -> export csv ... check downloaded csv file, `products.created_on` field will be missing values
1. ingest documents into es with the following mapping and create index pattern in kibana phofcode phofcode check to make sure this search works: phofcode 2. create index pattern in kibana, go to discover ensure that documents are showing up and search works on ip_addr 3. create a filter and pick ip_addr and try to give the value of
1. create the following indices in console: phofcode 2. create a rollup job based on `foo*`.
all the default options will suffice.
3. try to clone the rollup job with the new index pattern `bar*` and in second step "date field required" error will occur and user cannot proceed in wizard.
1. go to management => index lifecycle policies => create policy 2. type a policy name 3. activate the cold phase 4. save as new policy => error (a number is required) 5. set timing for cold phase to 0 => error (only numbers above 0 are allowed.)
1. helm fetch stable/kibana --untar 2.modify the values.yml , set image tag to 7.2.0, enbale plugin, add open distro for elasticsearch plugin, values.yml phofcode 3.helm install
1. set up heartbeat with some monitors for es/kibana 7.4 2. navigate to the uptime ui 3. expand the integrations popover 4. click a link, like `view in infra ui`
1. install kibana from rpm 2. execute systemctl start kibana 3. execute systemctl status kibana
1. create dashboard 2. share => embed code => snapshot => short url 3. embed iframe in .net application or navigate to referenced url in a different browser 4. kibana displays dashboard with full header and nav drawer, not removed
1. download & extract tarball for macos 2. start up elasticsearch 3.
1.create a custom map using upload geojson vector file 2.cretae a layer 3.click on term joins 4.select a field wih field_name.keyword 5. select rigth index and field
1. create a dashboard with a visualisation that has an error which prints to the screen (see below example screenshot) 2. attempt to generate a report from the dashboard
1. create a user with a long string as the full name, i.e.
2. log into that user 3. click on the user icon in the top right corner
1. have one elasticsearch kibana environment and some data.
2. have kibana proxied via apache.
https only with a permanent redirect to https on apache: phofurl redirects to phofurl phofurl is proxied to 3. create a a new horizontal bar chart 4. edit the view 5. go to panel settings 6. the panel settings panel stays empty
1. create a multi line chart with kibana 2. zoom into a interval 3. observe the sclale in y-axis and metric shown for a line does not match.
1. setup winlogbeat 2. turn on process creation audit logging 3. look at the siem ml job: 4. look at the data feed and see: create (rule: processcreate)"}}}}` 5. look at the influencers and see "host.name" "process.name" and "user.name"
this is more of an implementation mistake than a bug that breaks functionality.
there should be no noticeable difference in the user's interaction with kibana after the issue is fixed.
1. add `agent.type` from custom fields 2. add `host.os.name` from custom fields 3. search for `agent.name` (or anything else) 4. click `add`, notice that the dialog didn't close.
keep pressing `add` multiple times.
5. close the dialog and click the group by dropdown again.
6. you should see a lot of duplicates of `agent.name`.
7. at this point you have two selected groupings and tons of duplicates.
unselect one of the applied grouping and select `agent.name`.
notice how all duplicates are checked.
1. add `agent.type` from custom fields 2. add `host.os.name` from custom fields 3. search for `agent.name` (or anything else) 4. click `add`, notice that the dialog didn't close.
keep pressing `add` multiple times.
5. close the dialog and click the group by dropdown again.
6. you should see a lot of duplicates for `agent.name`.
7. at this point you have two selected groupings and tons of duplicates.
unselect one of the applied grouping and select `agent.name`.
notice how all duplicates are have a check.
1. create a tsvb visualization 2. change the title of the series or split the series by a term aggregation 3. save the visualization 4. after clicking save, sometimes page refresh with a default visualization, some times no.
5. when opening visualization from a dashboard visualization displayed is default tsvb one
1. install a new version of kibana, metricbeat and es from source.
2. launch the stack monitoring application and enter setup mode.
3. start metricbeat and verify that it ships data without errors.
4. observe that the final step of the wizard where it should show the successful receipt of metricbeat data never completes.
1. go to inventory page (with dev console open) 2. switch to metrics explorer 3. see error
1. open metrics app 2. start typing in the kuery bar
1. open timelion tab 2. click on the button on the right upper corner of tip to collapse the tip
1. follow steps to render ecommerce sample data workpad in an external site.
2. check the settings > autoplay dialog 3. see screenshot below
1. install ecommerce sample data set (the browser doesn 't matter here) 2. open workpad `[ecommerce] revenue tracking` (the browser doesn 't matter here) 3. click icon for `share this workpad` 4. click `share on a website` 5. click `download an example zip file` 6. extract the zip file 7. run either `python -m simplehttpserver 9001` or `python -m http.server 9001` depending on your system 8. open phofurl chrome (works) firefox (works) edge (works) ie11 (doesn 't render)
i am actually not entirely sure... in my test environment i searched after a pipeline, and after clearing the search, i saw duplicates.
in my production environment, i simply upgraded elastic stack (from 7.4.0), and went to the page, discovering duplicates
1. state field has valued "open", "open", "closed", "closed" 2. open visualize and create new visualization 3. click "add filter".
select field "state" and operator "is one of" 4. start typing "clos" - notice the display is wrong - strings overlap 5. select one version of the value.
- no matches are displayed and there is no way to add the second version
1. navigate to the uptime app, with some monitors loaded (ping me if you need assistance configuring heartbeat).
2. navigate to the _monitor_ page for one of your monitors.
3. look at the link the breadcrumb provides in upper left.
1. open a map in maps app 2. click on filter icon and do any of the actions 3. maps app tries to fetch new data
1. load up latest `master` with some heartbeat monitors.
2. apply some filters, say `port`.
3. look in chrome console for the relevant network call, you'll see it void of `filters`.
1. start up master/7.5 kibana with some uptime monitors 2. navigate to the monitor page 3. observe the bug in the bottom table's ip column
1. open analysis tab on logs ui 2. open date picker
1. run `7.5` or `master` kibana with some uptime monitors 2. navigate to _monitor_ page 3. observe the bug
1. base64 encode a >1mb image ( here 's one!
phofhyperlink ) 2. create a markdown visualization and copy/paste the linked base64 image (your browser will likely hang a bit as you try to apply it).
3. try to save the visual.
1. query"field: f-*" in kql mode
* create a cloud instance based off of `7.4.1.` * start an auditbeat and push the mapping to your `7.4.1` like so `./auditbeat setup` * checkout a local tag of kibana 7.4.1 and connect it to your cloud to get the backend stack traces.
* post this sparse message below <details> <summary>click for post message</summary> phofcode </details> load up network panel and go back in time to 1 year ago in kibana and you will see this error on the front end: <img width="457" alt="screen shot at 6 49 43 pm" src=" phofurl on the backend you will see this stack trace: <details> <summary>click for stack trace</summary> phofcode </details>
1. collect some data with an index mapping that has `dynamic: false` 2. hit the refresh button in the index pattern management and nothing happens 3. update index mapping via `put`.
4. index mapping is fixed.
1. scroll up or down through the logs until you hit the edge of the data 2. wait for `loading additional entries...` to disappear 3. notice that no additional entries appear 4. use the log minimap or toolbar to change timestamp, and notice that additional entries are actually present earlier or later than currently loaded data
1. create a saved search 2. share saved search via csv -> copy post url 3. use this url to create an advanced watch
this is one example of how to get the out-of-memory error loop going.
1. change the value of `devtools` ( here phofhyperlink in searchprofiler) to a _non-existent_ file.
2. run `yarn start` 3. wait for optimizer to kick in alternatively: if a non-existent module is imported into a `ts` file in combination with `// @ts-ignore` the same result is achieved.
why would you ever do this?
primary reasons i can think of: - np migration - using "legacy" `js` in new `ts` - building a new plugin
1. query timeline with bars and width as shown after derivative.
2. bask in the loveliness of incorrectly drawn negative buckets.
1. switch to a timezone like america/new_york 3. reload the page in ie11 4. open discover in ie11
1. start a new es cluster 2. in kibana, set to a low value (like 90000 ms) 3. start kibana 4. log into kibana, enable spaces, and create a new space 5. log out 6. log into kibana, and remain on the space selector page for > 90000 ms 7. observe that no session timeout notification is displayed 8. select a space, and you will be redirected to the login page because your session is expired
1. deploy in k8s, use and with ha mode(es 3 node, kibana 3 replics, set elasticsearch_hosts with 3 es headless service) 2. kill es mian node 3. visit kibana, do search
1. have a dataset with at least two document types that share at least one field name.
example: all documents contain a person.name.keyword field, but they have different person.gender.keyword.
2. create a control visualization and add a control for the field of person.name.keyword with no parent control and multiselect enabled 3. apply filter to the visualization for person.gender.keyword is male.
4. the drop down list does not actually do any filtering.
it's still showing all possibilities in the drop down, rather than just the documents with person.gender.keyword = male.
1. find monitor with current status:down (monitor should be shown as "down", also specific time frame can be used to get the same from recovered monitors) 2. check the links for "show host metrics", "show host logs" (probably others too)
1. create an index with 2 date fields (`timestamp` and `other_ts`): phofcode 2. create an index pattern matching `test_index` and choose `timestamp` as a "time filter field name".
3. edit the `other_ts` field in the index pattern, select the `date` formatter and use this moment.js format pattern: phofcode <img width="1680" alt="screenshot at 15 09 15" src=" phofurl 4. create a "pie" visualization with `test_index` and "split slices" with a date range aggregation on the `other_ts` field with a range set from to <img width="1676" alt="screenshot at 10 28 05" src=" phofurl 5. click anywhere "pie" <img width="1677" alt="screenshot at 10 23 15" src=" phofurl a new filter is set wrong date range: `other_ts: to
1. create a job with a significant amount of data and a short bucket span to make sure job running will take some time (e.g.
full cloudwatch data with 20m bucket span).
2. immediately open a single metric viewer, no matching anomalies should be found because the job is still running.
3. wait for while, click "refresh" button.
4. to make sure anomalies data exist, duplicate the browser tab and check the anomalies table.
the same applies to the anomaly explorer.
swimlane doesn 't fetch updates on "refresh".
1. have a data set with two distinct metric types - i'm using average timer duration and count of timers 2. create a line visualization with both metrics applied, one on the left axis and the other on the right axis 3. apply an x axis (over time, so you can use any time series related field here) 4. split the series on a term that has two or more unique entries in it (mine has four)
1. apm-server setup 2. get some data from apm-server (maybe something like a website that adds some cookie values) 3. see that warning bang in the kibana discovery tab 4. hit the index refresh button in the kibana index pattern 5. nothing happens
1. go to the logs settings tab and change log indices to include an index pattern that doesn 't exist 2. try to create the ml jobs in the analysis tab, notice the error message 3. refresh page without changing log indices to remove non-existent index pattern
1. create a job using farequote data set providing airline as an influencer 2. open the single metric viewer 3. re-apply an airline value from the detector control until it doesn't affect the criteria fields for anomalies table data
1. collect some data from beats with monitoring enabled 2. go to the monitoring ui and beats tab 3.
1. create index pattern for `.kibana_1` 2. go to discover and select `.kibana_1` 3.in the field list, click `type` field to expand it.
4. start filtering out types like dashboard, visualization, etc while watching the browser console
1. create some heartbeat data 2. stop heartbeat 3. observe the bug
1. create a scripted field 2. create a data table visualization 3. split rows using a terms aggregation on the scripted field 4. select to group other values in a separate bucket
1. turn on autoplay on a workpad 2. wait a few seconds 3. try to add a new workpad page
1. create a (few) regression job or outlier detection via the ml ui 2. delete the job(s) 3. go to kibana management / index patterns and see deleted destination indices still listed 4. use the data frame analytics ui to create a regression job and see the error toasts pop up image phofimage
1. create a new lens visualization 2. set timepicker to last 15 minutes 3. drag a date field into the view (you should get a date histogram with 30 second intervals) 4. click on the x-axis link `date histogram of @timestamp` 5. click the `customize time intervals` toggle - the interval changes to `d` (day)
1. go to kibana flight demo dashboard (l ink phofhyperlink 2. click to edit filter 3. notice the upper value is not saved becuase it is `lte` not `lt`
1. allow leading wildcards in query to false 2.
`{ "analyze_wildcard": false }` 3. search in kuery ` * error * `
1. install kibana, using discover search is ok, can view the data.
2. configured filebeat on 6 nats servers to forward nats server log, the file is about few kb each, quite small.
3. soon the kibana discover search cannot view any data, and there is a dialog box showing: searcherror: internal server error at phofurl at processqueue ( phofurl at phofurl at scope.$digest ( phofurl scope.$apply ( done ( completerequest the server that installed the kibana, also runs elasticsearch, memory is 4gb, 2 nproc.
linux load average 0.17, not busy.
1. change query string in kql search bar 2. click "refresh" 3. look into javascript console
1. have utc datetime data stored in an es index, accessible via a kibana index pattern 2. have the kibana dateformat:tz setting set to something other than 'browser ' 3. use the discover pane to view data in the index -- data reflects the (expected) system tz 4. view a vega visualization that uses timeformat() function to render a text mark for data in that index -- reflects browser tz, not (expected) system tz
1. send a log with stacktrace to apm server (the go/python/ruby variants of opbeans all have such log messages 2. open the error detail for the given log message repro url: phofurl
1. load management > index patterns 2. click on the index you wish to delete 3. message pops up saying `no indices match pattern "your_index_pattern"`
1. launch and configure cross-cluster search with multiple remote clusters 2. configure the siem:defaultindex to reference those clusters, without a local index pattern 3. navigate the to siem network page
1. search something in the "logs" view.
2. after entries are loaded, click on the list on any entry.
3. this causes the entries to be reloaded.
1. create an input control vis with two list controls, one being the parent of the other one 2. select values for both fields 3. apply the changes 4. press clear form 5. both inputs are empty 6. apply the changes 7. the value for parent control re-appears
1. load sample flight data 2. go to visualize 3. select the `[flights] controls` visualization 4. scroll to the `average ticket price` range control 5. change the `decimal` value to 2 6. hit save changes and notice the console errors (see below for errors)
1. open discover 2. click to change index pattern 3. scroll the index pattern dropdown list, but don 't select an index pattern 4. collapse the left hand panel 5. dropdown list is still visible
1. create multiple long index names with similar root name 2. use discover
open the demo and look at the numbers beside the male and female pants drawing.
use the default query and try to add the `track_total_hits` option.
get _search { "query": { "match_all": {} } } ``
1. create a metric visualization 2. specify a top hits as metric aggregation 3. choose a field different from timestamp 4. see the warning logged in the es logs
1. open metrics explorer or click on a metric detail page of any waffle map item 2. hover over chart 3.
i 've give it a quick shot on my own cluster, but i failed to trigger this effect, even after marking `.kibana_task_manager` read-only.
1. go to lens visualization for `kibana_sample_logs` 2. under `y-axis` select `drop a field here` 3. select an aggregation (eg.
`average`) 4. click on field selection; get a list of fields 5. click on a greyed-out field (eg.
`agent-keyword`) error appears on the screen: <img width="354" alt="screenshot at 14 14 32" src=" phofurl and there is a console error.
1. go to management app > index management > indices 2. click on index 3. go to edit settings tab 4. change `"index.priority": "1",` to `"index.priority": "2",` 5. click save, return to edit settings tab 6. remove line with "index.priority": "2",` 7. click save, return edit settings tab 8. setting is still there with its old value 9. bonus bug: click on another index name, settings form disappears.
precondition: no saved objects 1. create a matching index patten for your data.
2. go to discover module -> everything is working fine as expected.
the created index pattern has become the "default" index pattern (see also management -> kibana index patterns) 3. export this index pattern as saved object.
5. import the saved objects file with the pattern inside.
6. got to discover module -> error occures - "in order to visualize and explore data in kibana, you 'll need to create an retrieve data from elasticsearch."
even after setting manually as "default" in managenent -> kibana index patterns, you can 't use any discover / visualize / dashboard / ... module of kibana.
1. create a saved query with a query, a filter and set the time filter.
2. set the time filter to something other than what the saved query was saved with.
2. in discover, load the saved query you from 3. observe that query portion of isn't applied.
4. additionally, from dev tools tab for network calls or on console, observe that network call was aborted.
1. load a kibana sample data set.
2. create more than 20 saved queries (you can do this manually or save and import these phofhyperlink ) 3. go to management -> saved objects and filter for a query type.
observe that there are 22 saved queries.
4. go to discover, visualize, dashboard or maps 5. click on the '# ' next to the query bar input to access the saved query management popover.
6. observe that only the first 20 are available.
1. follow steps in tutorial phofhyperlink to load sample data.
2. create an element and change data source to be phofcode 3. change display to be
1. open lens visualization with 2. for y-axis select `document`.
by default, `count` aggregation is selected.
3. change aggregation to `filter ratio`.
the aggregation changes but there is an error in the console.
1. in case the the button is disabled, e.g.
save a search in discover, then the button should be enabled 2. click on the button 3. nothing happens image phofimage
1. could be done manually but easiest to just run this x-pack test once it 's merged; phofurl
1. create more than 200 indices with names starting with `.` 2. index some other data into elasticsearch 3. go to the index pattern creation page
1. as root user install kibana rpm package (don't start kibana) 2. as kibana user which was created by the rpm install, try to install the java-langserver for the code app.
in my case it looked like this; phofcode * i don't know if there's a problem with the plugin and it's not even supposed to write to `data` dir?
* or if we expect users will start kibana first (which presumably creates `data` dir, and then install plugins?
i haven't tried this way yet.
* or if rpm install should create `data` dir and set it's ownership to kibana user?
or owned by root but with open write permission?
1. starting from your workspace root, create a new git worktree: - `mkdir ../new-kibana-worktree` - `git worktree add ../new-kibana-worktree master` 2. navigate to the worktree directory, and attempt a bootstrap: - `cd ../new-kibana-worktree` - `yarn kbn bootstrap`
1. start kibana 2. query the kibana uri shown in the above example 3. observe the incorrect `location` header in the 302 response.
1. it's pretty hard to say where the problem is going to appear in ie11, and since many users click with their mouse and continue to move the mouse, they may not notice a problem.
users navigating with the keyboard would more easily experience these problems.
`yarn test:browser` from command line
1. open the expression editor in canvas 2. type `tsvb` or other things 3. things will be offered
1. make a change to the query text 2. save your query (
1. adjust local computer 's dns to use to prevent access to the elastic map service 2. add an entry into `/etc/hosts` so you can route to `idpgis.ncep.noaa.gov`: phofcode 3. open kibana in a private browser tab (to avoid any caching) and create a coordinate map visualization.
the basemap shouldn 't load and you 'll be met with a blank visual.
4. populate the wms options tab directly in the visual: phofcode base_layer phofimage 5. hit the blue apply/play arrow and observe no wms layers are loaded.
if you open your browser 's network console, you won 't see any calls wms server.
6. if you run through same motions again, but with working dns, basemap from ems will load and should be able apply wms panel options without issue.
(note: i also ran through above on a machine without internet access + locally running server results were same.)
1. import kibana_bug_dataset.txt phofhyperlink that was kindly attached to older related issue #36328 by another user.
this is a simple text file two columns of floating point values.
2. create a bar graph visualization 3. x-axis histogram aggregation on float field "a" 4. set minimum interval to 1.5 5. click bar 4.5 6. see that the filter applied is 4-5.5 instead of 4.5-6 7. remove the filter and repeat with minimum interval 0.25 8. see that the filter applied is set to 4-4.25 instead of 4.5-4.75
create a visualization plugin like so: phofcode phofcode that's it.
1.enable xpack security at elasticsearch 2.setup elasticsearch password 3.modify kibana.yml, set 4.visit kibana by phofurl 5.use elastic and password to login kibana 6.kibana login failed, redirect to logout and msg=session_expired
1. create a new error, with only one occurrence 2. go to apm error group detail page for said error 3. there is no step 3
1. visit your kibana url using microsoft edge.
it never loads and shows this error in the developer console: phofcode
1. open a sample data map and have your dev console open 2. click on shape filter -> click on maps - the tooltip about vertex shows up - zoom in or out 3. kibana logs phofcode
1. i think i manipulates with index patterns - deletes "winlogbeat" and than create again.
2. i change index pattern string in saved object, so now it correct.
3. maybe i do some another things, but i do not change indexies or another parts in visualisation or saved object.
this is the json of the visualisation i 'm using: beats metricbeat system diskio read bytes windows disk name time beats metricbeat system diskio read bytes windows disk name time : and host.os.family : 2. the above visualisation is ordered desc by system.diskio.name 3. ordering does not make sense
different messages occur at different steps in the process, depending upon the missing privilege.
missing `monitor` or missing `view_index_metadata` on the source index or missing `all` on the dest index.
1. in kibana, as the elastic user, load sample data.
2. in discover, add a query and a filter.
3. save the query using the saved query management popover.
4. go to management -> saved objects and filter for query 5. click on the you saved 6. observe that saved does not load.
1. create `foo_readonly` kibana role (management -> roles) i) readonly index privileges to 'foo-* ' indexes ii) for the `foo` space create a role with read privilege access all space features (discover, visualise, dashboard etc..) 2. create a `foo_user` that uses the `foo_readonly` role create above (management -> users) 3. logout as kibana super user 4. login to kibana as `foo_user` 5. an error appears on the kibana screen.
the only way to get out of the continual login attempt loop is is to clear browser session, as error message suggests.
1. go to discover with an index pattern with data 2. mouse-over some fields in the field pane and add them to the doc table view 3. mouse-over the right right minus magnifying glass icon.
1. go to advanced settings 2. turn on pin filters by default 3. pin a filter in discover or viz 4. filters is pinned except on maps app
1. get kibana from head on master and any recent version of es.
2. load the stack monitoring application.
3. click the `enable` button and observe the behavior described above.
1. navigate to the node listing page for a cluster with a lot of shard changes (this should be simulate-able by just making a bunch of indices manually over the course of a few minutes).
2. observe the inaccurate count per node.
1. create custom space and role, with limited access to space features and role 2. apply space and role to new user, with sufficient indices privileges 3. use new user to attempt to access indices fails
1. restore a snapshot of an index of an older version 2. upgrade the index using the assistant 3. delete the index and restore the snapshot again (effectively downgrading index again) 4. assistant will think is already upgraded
1. start official kibana docker image with in environment 2. notice no code app
in console 's editor when i use a string starting and ending with an escaped double quote: phofcode auto-indents gives me here: phofcode which generates an error, as we now have something starting and ending with four quotes, which is interpreted as a string "triple, followed by an unexpected extra double quote.
1. be an ml admin or super user 2. click on the ml anomaly detection button and then click on a job id <img width="790" alt="screen shot at 11 13 51 am" src=" phofurl then click on any job id and you just go to the details page.
1. open the canvas "my workpads" page 2. open any workpad in a new tab 3. look at the new tab that opened
1. run es, kibana, heartbeat 7.4 2. allow significant documents to accumulate (~40 minutes ideally) 3. specify a different date range, like `last 4 hours` 4. you will see the data displayed in the charts does not have pleasing or useful sizing
having two different index patterns, let's say _temperature_ and _twitter_, each one has its own fields and they are not related at all.
1. open discover 2. select a field to add a column.
the field exists in the first index pattern but it doesn't on the second index pattern.
3. change the index pattern.
4. the column is still applied.
0. create a kibana /elasticsearch 7.2.0 environment with some data.
using docker-compose 1. make a dashboard with a bar chart that has a filter in lucene syntax.
i use bucket sum and then filter.
2. export that dashboard and its dependencies using the new ndjson format 3. create kibana/elasticsearch 7.3.2 environment using docker-compose.
it should have the same data 5. import the exported ndjson file
1. fetch a canvas workpad via 2. post the obtained json to 3. try to open the workpad in kibana canvas
1. have a large number of users, creating a large number of scroll context or 1. set the setting to a low number and refresh canvas screens until error occurs
1. resize the bottom of your browser window high enough until you can see the timeline tab being cut off.
2. next, reset your kibana index to show the "help us improve the elastic stack" banner at top and notice odd effect of it pushing kql search bar far enough that timeline tab is being cut off due to its z order.
1. click the anomaly detection button to install all jobs 2. go to the ml site by clicking on a job title 3. delete a job 4. go back to the siem page and click the anomaly detection button again.
see error below: <img width="815" alt="screen shot at 9 17 08 am" src=" phofurl
1. install winlogbeats-7.4.0-bc4 3. run winlogbeats for only a few seconds and then open up siem 4. click on the anomaly detection button 5. go to the second page and toggle <img width="417" alt="screen shot at 2 19 28 pm" src=" phofurl you will see one of these two errors popping up about mapping issues: `winlog.event_data.path` mapping error <img width="590" alt="screen shot at 1 54 58 pm" src=" phofurl mapping error <img width="596" alt="screen shot at 2 19 11 pm" src=" phofurl
1. have 2 or more index patterns (you can include system indices and use `.kibana*` and `.kib*`) 2. go to discover and select a non-default index pattern 3. click `new` menu item.
notice the focus highlighting stays on the button until eventually the index pattern changes to the default and focus moves to query bar.
1. block network access to from the kibana host 2. generate a report using maps
1. sample data: phofcode 2. create index pattern for `testindex-timestamp1*` and `testindex-timestamp2*` setting time filter name as `body.timestamp` and `body.senttimestamp`, respectively 3. in discover tab, if you select `testindex-timestamp1*` any time before `testindex-timestamp2*`, the sorting always remains on `body.timestamp` instead of `body.senttimestamp` kibana url also remains showing however, if you have some other index pattern loaded that does not have the `body.timestamp` field (ie: packetbeat for exampe) and then switch to `testindex-timestamp2*`, sorting will be correct.
2. navigate to a registered route with trailing slash at the end.
for example ` phofurl `.
1. run kibana server 2. perform a request to an unregistered route
1. get this gml file from spanish cadastre and unzip phofcode 2. convert to geojson stripping some fields and adjusting precision to reduce file size phofcode 3. open a new maps session and upload 4. an index is generated but not populated phofcode
1. go to add data -> auditbeat, or just this link 2. notice that the screen shot is outdated
1.send example document to logstash 2.open kibana -> visit logs page 3.error
1. set `logging.dest: kibana.log` and `pid.file` in kibana.yml 2. start kibana server 3.
`kill -hup "$(cat pid.file)"` 5. verify that kibana keeps writing to both `kibana.log` and `kibana.log.1`
if you select 1 gig of ram for your ml node (which is the default) like so: <img width="880" alt="screen shot at 5 29 29 pm" src=" phofurl and then go to siem page you will get errors on every page load and every time you click the anomaly button.
<img width="772" alt="screen shot at 5 38 08 pm" src=" phofurl stack traces from the error toaster: phofcode phofcode
1. create a new tsvb visual 2. populate the graph 3. select 6 month query range using date picker 4. notice the time on the graph is now 23hr instead of 24hr 5. select 5 or 7 month query and notice the graph is 24hr as expected
1. click on a job from the anomalies table while using a relative date time.
2. notice that it changes on the ml page from relative to absolute date time.
1. delete index-pattern 2. create index pattern 3. your saved objects are broken.
1. create two indices with the same field name but different types: phofcode 2. create an index pattern which matches both indices `test-*`
1. start metricbeat 7.3.1 on a kubernetes node with kubernetes modules enabled 2. enter to infraestructure -> metric explorer 3. the error is displayed
1. load up anomalies 2. go to ml anamalies 3. right mouse click on each of the actions such as host details by process name and you will see we need to update them as it loses the kql and does not select the anomaly table.
1. go to hosts details for a host such as `suricata-iowa` 2. notice that you get more than just suricata-iowa anomalies
1. create an index where `mappings._meta.version = 1` 2. go to 8.0 upgrade assistant 3. open indices tab 4. see failure message
1. click on # in discover next to search bar - save queries opens up 2. click on save - and kibana lets you save the query without the name 3. the no-name query shows up as an empty title in the save queries list
1. open master 2. login and go to details 3. see that you have the same host name column
1. load maps app or network page of siem app 2. observe tiles are not loaded and errors in console
1. install es and kb, but don 't "start a trial" 2. go to the hosts page, anomalies tab screenshot at 15 30 18 phofimage
1. go to advanced settings and look for "custom banner notification" 2. add some input text 3. save it - refresh the browser - it doesn 't display.
logout and login and it doesn 't display
1.create index with a value with spaces 2. try to edit the value in kibana.
1. launch 1 or more docker images of kibana, using the default settings 2. visit `/api/status`, or if connected to elasticsearch, the x-pack monitoring page 3. observe the name of all instances are the same ("kibana")
1. open workpad 2. visualize data through sql request 3. set setting: 5min refresh and 10sec cycle (reproduced with other values, too) 4. run full screen
1. added 2 or 3 columns without issue.
then add 1 more and error pop-up.
can 't remember which index field.
1. install elasticsearch, kibana, auditbeat 2. navigate to siem app, observe error when trying to create ml jobs.
the browser stops responding eventually due to the number of network requests being sent.
notes: 1. another minor issue: when you click the error in kibana the expanded error message says 'your visualization has error(s)'.
2. after killing the browser and restarting it does not run ml job creation again, however if you go and delete jobs from ml app and go back to siem, it will recreate jobs and error is reproducible.
screenshot from phofimage screenshot from phofimage screenshot from phofimage
1. in discover apply a filter 2. navigate away from discover, ex: to dashboards 3. navigate back to discover, notice the error is thrown in console.
aborterror: the request was aborted.
at searchrequest.abort ( phofurl at phofurl at array.foreach (<anonymous>) at ( phofurl [as next] ( phofurl scope.$eval ( scope.$apply callindigest "possibly unhandled rejection: {"name":"aborterror"}" screenshot from phofimage
in discover, click view surrounding document, notice the error is thrown in console.
typeerror: cannot read property 'get' of undefined at (commons.bundle.js:3) at filterbarui.render (commons.bundle.js:3) at qg at og tg bi ci di yh xh (anonymous) @ (anonymous) @ $digest @ (anonymous) @ (anonymous) settimeout (async) browser.self.defer $evalasync foreach firestateorurlchange dispatch elemdata.handle screenshot from phofimage
1. navigate to the logs analysis page.
2. select "now" as the end date.
4. observe how the "now" is replaced with a specific timestamp.
5. observe how reloading the page or clicking "refresh" does not advance end date.
1. go to the visualization tab 2. click the button to create a new one 3. from the list of visualizations select `controls` 4. click the `add` button to add a `control` and you will see menu with options to appear and disappear after 2-3 seconds
1. open a visualization 2. try to filter on data display
1. logstash pipeline with filters 2.
`enable_metric => false` for each filter 3. activate monitoring logstash 4. run the pipeline in logstash 5. go in kibana 's monitoring page 6. monitoring logstash - pipelines 7. choose the pipeline (it will be empty)
1. set index mapping in dev-tools: phofcode 2. index a document: phofcode 3. set index pattern.
4. go to discover and try to manually add the filter on this field.
image phofimage this is considered invalid due to this code: phofurl so as you can see, we are using moment here for date fields but that 's not how elasticsearch works.
due to this, even if a user wants manually add the correct filter, it would be impossible save/apply it as kibana would consider the "correct" value be invalid.
1. login to kibana 2. using dev tools of the browser or using a plugin or interceptor like burp, copy the "sid" cookie 3. logout of kibana 4. in another browser or in private/incognito mode, open kibana.
add new cookie with key: sid and value as copied earlier.
5. refresh the browser, you 'll now be logged in as the user cookie was generated for.
1. boot up apm-server, elasticsearch and kibana 2. open apm ui 3. see the error in console
1. load discover from any other tab, or switch between index patterns, the process appears to repeat between either.
1. open canvas 2. add an element 3. open the expression editor 4. paste in this expression: phofcode
1. load suricata data 2. query suricata data in timeline using `suricata.eve.alert: *`
1. start entering aggregations query in dev tools app.
this will automatically populate template as below <br> `"aggs": { "name": { "agg_type": {} }` 2. while replacing name with desired string, kibana starts suggesting available aggregations.
3. no suggestions / template population happens while replacing agg_type
1. have a field with value null 2. click in search results (discovery panel) on magnifying glass for this value (shown as -) 3. boom
1. load the ecommerce sample data 2. go to the `[ecommerce] revenue dashboard` 3. note the rendering of the map; image phofimage 4. share > pdf reports > generate pdf 5. open completed pdf report and check that maps isn't completely rendered; image phofimage 6. try again but select `optimize for printing` 7. check report, still not completely rendered (several other visualizations also didn't render completely); image phofimage 8. remove all other visualizations from dashboard except map.
generate a new pdf report 9. i thought there was a chance that this map only dashboard might render completely if it was just a timing issue, but map still looked same, data layer but no borders; image phofimage
1. generate a post url for a canvas workpad pdf report 2. delete the workpad 3. run the post url
1. open visual builder 2. create a new visualisation and switch to gauge 3. create to tophit aggregations of to vars from the same index 4. add a bucket script using those vars like "params.var1 / params.var2" 5. the preview should now feature the same error as shown above.
1. create new visualization of type line 2.
(i chose an elasticsearch source) 3. add a metric.
(i chose an average of a float value) 4. add an x-axis bucket of date histogram 5. enable the y-axis option "scale to data bounds" and set the bounds margin to a positive value (i used 5).
6. apply changes 7. observe that the upper extent of the y-axis is max value metric
1. manually (using rest api) create a new search object in the .kibana index with `_id`: 2. try to load the saved search.
1. create 2 scripted fields to extract.
last value and first value from a field based on delimiter (ex: electronics >> mobile>>apple>>iphone 8).
first column will extract "electronics" and the other column will extract "iphone 8" 2. create a visualization using the scripted columns (2 columns) and few other columns, we have around 7 - 8 visualization in the dashboard 3. in dashboard keep clicking the visualization (faster) to filter values and similarly delete filter from dashboard.
if we continue for few seconds entire elastic will hang start giving timeout errors 4. if we verify long running search calls in elastic it will keep increasing start throwing timeout errors.
1. install the ecommerce 2. navigate to canvas 3. create a new workpad 4. click on `embed object` 5. add the `[ecommerce] average sales per region` visualization 6. click on a country 7. observe the error.
1. save a search with no fields selected (_source will be displayed) as test2 2. add saved search test2 to a dashboard 3. export test2 by hitting download csv
1. insert a pipeline containing with `@` in it 's name via api.
`pipeline@green` 2. confirm that it was added successfully on kibana > management > logstash > pipelines.
3. try to add a pipeline with the same name via kibana 's ui on the same menu mentioned on the last step and clicking on "create pipeline".
4. confirm that this message was shown: >please address the errors in your form.
>pipeline id must begin with a letter or underscore and contain only letters, underscores, dashes, and numbers
1. mapping phofcode 2. sample documents: phofcode 3. sort in discover (format in the index pattern is switched to *date nanos*): <img width="1273" alt="discover-nanos" src=" phofurl
1. add nginx access.json into filebeat.yml phofcode 2. unzip following file and put it in /var/log/nginx/.
access.json.zip phofhyperlink 3. login kibana, go to visualize -> create new -> tsvb 4. use "top n" 5. use follow configuration(attached screenshot) "metrics" aggregation: count group by: terms by: nginx.access.url "options" filter: and and (nginx.access.url:/blog* or screen shot at 2 46 15 pm phofimage screen shot at 2 46 29 pm phofimage
1. go to visualize, create a new visualization 2. choose line type, choose source "[flights] flight log" 3. add bucket x-axis, aggregation on date histogram, select field timestamp 4. add sub-bucket split series, aggregation on terms, select field descityname, choose size 5, change size again
1. create threshold alert using watcher in kibana 2. configure webhook and use port 443 and save alert.
3. view elastic config for the above created alert using watcher api
this request takes 20-30 seconds to complete.
1. add a icon using the __filter for value__ icon in the events 2. add a second filter using the step above.
1. open timelion 2. read the error
1.make an essql request, get at least one number column (for example, a count) 2.create a bubble chart in canvas 3.select the number column in the "color" dropdown
1.metricbeats sends all 1 second a value to elasticsearch 2.create a line view that shows the data from metricbeats and set the "minimum interval" to "minute".
consider the following map where points are randomly distributed across france.
at zoom level 7 many more than 10k points are within the map border.
when points are downsampled for display on the map they are all contained within a narrow latitude band image phofimage
i can 't test this, but i think the behavior is related to kibana/elasticsearch version 6.8. so i 've created in the past on elastic stack 6.8. some beats enrollment configurations.
since the update to 7.3.0 the behavior, described above, is present.
1. create two saved objects.
let (1) have a relationship that points to (2) 2. delete saved object (2) 3. find (1) in saved objects management and click "view the relationships the saved object has..."
1. on either coordinate or region maps, as a test url, enter ` phofurl for the wms 2. for wms layers enter `gebco_latest_2` 3. for version, enter `1.1.1` 4. press play button
1. create a data table visualization 2. split rows by date histogram (`@timestamp` monthly) 3. click on 'export formatted"
1. create a workpad with multiple canvases 2. please a date/time filter on each canvas 3. put the canvases in full-screen mode 4. select the date/time filter on the first canvas, and change the date/time parameters 5. go to second canvas and select date/time filter.
6. attempt to change selection in this second filter element.
note that if you do this same set of steps, but not in full-screen mode, filter elements work fine.
also not that same issue seems to occur with drop-down element as well as element.
1. go to job management tab (or any tab with the datepicker refresh) 2. expand the datepicker and change the refresh interval value 3. see the datepicker gets set to off state
1. configure kibana (no other settings): phofcode 2. start kibana via `./bin/kibana` 3. observe logs flowing into `kibana.log` 4. move log file to `kibana.old` and observe logs still flowing into same file (as expected) 5. send sighup by `kill -hup $(cat kibana.pid)` 6. the following message is logged: phofcode 7. logs continue to flow into `kibana.old`
1. load ecommerce sample data 2. kibana > management > advanced settings: disable "allow leading wildcards in query" 3. kibana > discover: search (kql) for category : *ccessories and category : ?ccessories
1.create a timelion expression with split and a color with gradiant expression(gradiant of color fails) ".
1. management > spaces 2. create a new space, assign a custom color, like #e20074 3. receive error message
1. create a co-ordinate map 2. uncheck the option
1. open a local kibana with logs data 2. try to load this path: {kibana 3. notice the time stamp is probably "now" and not this included one (the included one is tuesday, august 13, 2019 pm gmt)
1. create vis for an index pattern 2. put vis on dashboard 3. create filter pill on dashboard 4. save dashboard 5. remove vis from dashboard 6. add a vis from other index pattern 7. save dashboard, go to listing and back 8. click edit on filter pill or 1. create for an index pattern 2. put on 3. create filter pill 4. save 5. go to management 6. delete index pattern 7. go back to saved 6. click edit filter pill
1. create a role that doesn 't have index privileges on `.apm-*`.
2. create a user for that role and sign into kibana.
3. go to apm agent configuration and be stuck here: <img width="831" alt="screen shot at 3 16 12 pm" src=" phofurl
1. install filebeat 2. enable iptables module 3. try to create a data transform
1. enable `verbose` logging 2. run a pdf or png reporting job 3. see a single message (debug level) for a csp error in the browser: image phofimage
1. create a saved search and dashboard that has a saved search panel in kibana 7.3.0 2. upgrade the stack to 7.4.0 and retain kibana saved objects 3. follow the instructions in #34571 and add true` in the kibana.yml.
4. open the dashboard 3. click `download csv` in saved search panel
1. setup two clusters, say `es1` and `es2`.
2. designate one of these as the dedicated monitoring cluster, say `es2`.
3. setup an `http` exporter on `es1` to forward monitoring data to `es2`.
4. enable monitoring on both clusters via the cluster setting.
5. enable the trial license on both clusters.
6. configure kibana to point to `es2` and start it up.
6. visit the stack monitoring ui.
you should see cluster listing page with both your clusters listed.
9. navigate elasticsearch node listing page.
1. setup two clusters, say `es1` and `es2`.
2. designate one of these as the dedicated monitoring cluster, say `es2`.
3. setup an `http` exporter on `es1` to forward monitoring data to `es2`.
4. enable monitoring on both clusters via the cluster setting.
5. enable the trial license on both clusters.
6. configure kibana to point to `es2` and start it up.
6. visit the stack monitoring ui.
you should see cluster listing page with both your clusters listed.
7. click on any one of two clusters.
8. click "clusters" link at top in breadcrumbs navigation.
1. view any page with charts in stack monitoring.
2. observe deprecation warnings in the logs.
1. open kibana and select the infrastructure app.
1. create a new role 2. attempt to set cluster privilege 3. observe the error preventing it from being accepted / selected
1. set true` in config 2. create an index pattern with a time column 3. create a saved search on that index pattern 4. create a dashboard with that saved search 5. filter the time so that the dashboard have rows 6. click on "..." for the saved search panel, and then on "download csv"
machine learning > import csv > 1000 lines were successfully imported > advance > changing mapping (text -> keyword) changes were not reflected.
1. provision new elasticsearch in aws 2. setup the kibana on new vm 3. configure kibana to use elasticsearch from aws 3. on same machine the kibana is running, setup the apache2 with basic auth 5. set up new index index (e.g.
`filebeat-*`) and make it default 4. add new index to kibana (in our example, streaming logs from cloudwatch to aws elasticsearch - `cwl-*`) 5. clear browser cache 6. close the browser 6. open in browser and authenticate using basic auth 7. you should get a warning that default index is not selected and you must select one 8. select default 8. repeat steps from 7 to 11 and you should always get same error message about default
1. use stack monitoring to monitor beats 2. go to the beats view in stack monitoring and select any monitored node.
that the alignment is not correct.
1. navigate to: phofurl 2. create a custom vega visualization using the example for a line plot with tooltip at the bottom of the page (see image below) image phofimage 3. this running the visualization will cause browser to crash
1. go to "discover" 2. set up more than one filter 3. enjoy
1. open kibana 7.4 in ie11 2. the loading kibana indicator spins forever
1. follow what i wrote in the bug description.
this is a bit lenghty
1. click on the discover icon to go to discover; wait for it to load.
stop any refresh to not confuse things.
2. add a filter by any means desired.
manually `add filter` or click on any `filter (for|out) value` magnifying glass.
3. wait for filter be applied 4. add a second filter by any means.
5. observe errattic flipping behavior.
filter dos not seem be applied.
1. queue a job in reporting 2. wait until the job is executing on the kibana instance 3. ctrl-c the kibana job 4. the job remains claimed and `processing`, meaning no other instance can re-claim it.
the will remain stale until the cleanup phase of polling marks it as failed.
1. click on the discover icon to go to discover; wait for it to load.
(use a kibana index with a time field to ensure you get the histogram) 2. click on a bar in the discover histogram.
(period above it changes accordingly but no refresh the period occurs)
1. i created monitor, which has id and no name: phofcode 2. i opened uptime kibana application and i see it has name for it: "unnamed - phofurl 3. click that link: phofurl 4. browser is trying to open the page to show details of that monitor, but it shows "loading wheel", which never stops loading.
1. download and install a vanilla es 7.3.0 and ki 73.0 2. in kibana.yml, set: phofcode 3. start es and ki 4. in ki, navigate to machine learning 5. a blank page is displayed and a javascript error is logged on the server-side
start the functional test server, then run the following commands at a terminal phofcode after deleting alerts, you may see one or both of these messages in the kibana log: phofcode
1. edit pipeline configurations in kibana ui 2. sort columns by last edited data
1. set the following in your running elasticsearch cluster: phofcode 2. run `tail -f <path to.
es slowlog> | egrep logstash` 3. load.
any page in the stack monitoring application which does not have to.
do with logstash, for example, the elasticsearch nodes page.
4. observe that the command in step 3 shows logstash indices being queried.
1. create an index pattern 2. go to graph 3. you will see a 'no data source' message, although other apps see the index pattern
1. configure uptime (heatbeat) 2. attempt to use uptime integration links
1. create an index pattern 2. create 6 visualizations e.g.
metric visualization 3. go to management -> kibana saved objects -> you will have 8 objects shown 4. select them all 5. press delete button
1. use kql 2. type `test-123hello` in the query bar 3. click "update"
1. go to management - index patterns and create a scripted field 2. delete the scripted field 3. kibana displays fatal error "uncaught typeerror: (filter || "").tolowercase is not a function ( phofurl
1.set up a visual builder visualization that sums values.
set up the chart so that some of the incoming "terms" should be a subset of other terms, like is a subset of group the aggregation by terms, and display the top 10 terms.
2. display chart with data.
3. click on shorter term in legend.
it is correctly displayed on chart and other values are grayed out in legend and not displayed on chart.
4. click on longer term in legend.
while shorter term is grayed out in legend, both short and long term values are displayed chart.
1. in kibana, select infrastructure, then metrics explorer.
2. then click on logs, then click back to infrastructure.
the infrastructure tab opens in metrics explorer again, but the page heading is "logs".
1. create a new visualization 2. add a filter and pin it 3. save the visualization 4. delete the pinned filter 5. re-open the visualization
2. in the search box, start typing `ho` then, using your mouse, scroll down the dropdown list of suggested options to reach `host.name`.
(see screenshot) 3. using your mouse, click `host.name`.
the dropdown of suggested options disappears, but the selected option isn't added to the search box.
you will see a hosts view showing six nodes, three with names starting with `filebeat`, and three starting with `gke` (see first screenshot) 2. in the search box, start typing `host.name:` then wait to see what options you are supplied (second screenshot).
1. start kibana from master 2. open a workpad 3. click on 'add element' 4. click on any element 5. modal closes; nothing is added
1. in discover, the saved object which is having @timestamp field is opened 2. share -> csv reports -> generate csv selected.
3. the downloaded csv file contains the erroneous timestamps.
1. build simple single node cluster with kibana on same node 2. enable `xpack.security.enabled: true` on elasticsearch, run setup passwords 3. configure `kibana.yml` to use the `kibana` user credentials in the `elasticsearch.username` and `elasticsearch.password` settings 4. start kibana, it will connect fine.
5. stop kibana and set 3000`, true` and true` 6. start kibana, the above error should appear along with a long list of other authentication failures for `missing authentication credentials`
1. have some apm data (very few) 2. open kibana app and go to 'apm ' tab 3. if you don 't get error immediately, refresh tab.
1. create cloud cluster 2. open kibana and goto data visualizer 3. upload csv 4. change settings to use header row for field names 5. try to import it
1. donwload kibana 7.2.0 windows 2. extract 3. run bin kibana.bat
1. create more then 10 tag 2. enroll a filebeat , applying settings.
1. installed and ran elasticsearch on local host with default port 9200 2. downloaded and ran kibana 3. kibana threw a timeout exception when installing .kibana_task_manager index template version:
1. open an existing workpad, or create a new one 2. click the canvas breadcrump near top left of the screen (see gif) 3. note that the url changes but just doesn't navigate
i 've tried various combinations of quotes, `[` operator, spaces etc.
`docker run --name kibana5 -p -e phofurl -e "server_name=localhost"
1. create any tsvb visualization type with a metric and "overall <something>" of that metric 2. it fails to render 3. apply a group by and it will recalculate
1. create new visual builder visualization and set to table 2. bucket results by something 3. add a count metric, and filter that by some field value, e.g.
1. copy the watch json from phofurl 2. click "create watch" 3. there are form validation errors image phofimage
1. click elastic office layer dot 2. see error
1. open dev tools, then console 2. start writing some mappings json 3. initiate autocomplete on a field 's properties
1. start typing something in the search bar (i was going for `container.name`) 2. once it comes up, click it
1. go to logs ui 2. click in search bar 3. click above search bar
1. import the sample data.
2. co to saved object and select multiple saved objects including the `advanced settings [7.3.0]` one.
1. login as admin - create a space c - create a role called spacey - give it index privileges on one of the sample data - sample ecommerce orders and add space c with custom privileges on all.
( so this role is associated with space c) 2. create a user called test and add role spacey to that user 3. login with user test you can see that only sample ecommerce orders can be added from kibana home 4. go to maps app 5. click on create new map and add a layer and select upload json file add australian states json file 6. the maps look like its handling it ok 7. but after few seconds kibana displays "error fetching fields ...." message.
1. go to dashboard 2. create new filter 3. disable filter 4. edit filter, change something and click save 5. filter becomes enabled again
1. create tag cloud visualization 2. insert any aggregation 3. uncheck the "show label" button, and press apply changes
1. create a tag cloud visualization 2. select significant terms aggregation 3. insert any size 4. press apply changes
1. install elastic, kibana, logstash normally.
2. install any compatible kibana plugin 3. start kibana
1. create a canvas workpad with 1 page and 1 element 2. export to pdf 3. report will fail after 3 attempts, which each time out.
my verbose debug logs show that reporting navigated to the page and loaded the workpad: phofcode therefore, it could be a problem with the expected `data-shared-item` attributes on the visualizatio
1. install ecommerce sample data 2. open maps saved object supplied by sample data 3. make sure you 're browser is less than 1320px wide 4. enter full screen mode
1. create an index called `commodity` 2. in the dev tools console, type: `post commodity/_up`
1. click the infrastructure tab.
2. click on one of the hosts/pods/containers in the "waffle map".
this shows both a menu of possible actions, and an info box about the item that was clicked.
the latter covers part of former.
1. go to the infrastructure tab.
2. in this example, i selected kubernetes, but the problem is the same if you select hosts or docker.
then click on a pod, and select view metrics.
1. starting with kibana default distribution (mine is installed via rpm packages on centos 7) 2. we have elasticsearch configured with an email address, security enabled, self-signed certificates but i 'll try to reproduce without the email part.
3. we use the watcher api to create the 1st watch which has a 5 minute interval.
then we wait 5 minutes and start checking if the watch has been successfully executed.
the we delete that watch.
4. we create next watch with only difference being report generation url so we get a png instead of a pdf.
wait 5 minutes, check until it 's successful, and delete watch.
1. create an index in 5.6.16 and close it.
3. open the upgrade assistant to prepare the cluster for an upgrade to 7.x 4. use the reindex button to reindex the old closed index.
1. create a user with a username like `foo:bar` 2. grant the `kibana_user` role as well as any additional roles you desire 3. log out and try to log in as that user
1. generate pdf or png reports from a dashboard with multiple visualizations on it.
the larger the time range and more data, the more likely to reproduce this issue.
2. check the report to see if it has the thin pink progress bar at top 3.
1. install 6.8.x kibana, elasticsearch, and metricbeat and run the metricbeat setup to install the dashboards 2. create a watch with the reporting url to this metricbeat dashboards and have the watch email report to you (i can provide more details if someone is going to work on this); phofcode 3. check report for a tooltip in upper-right corner reading "click apply"
1. create tsvb visualization 2. moving on the markdown section 3. on the markdown section moving on `data` section and set the variable name for the first series 4 switch from `data` to `markdown` section
1. open safari browser -> preferences -> check the option for always block cookies and website data 2. open kibana 3. kibana can 't run and displays phofcode browser logs: phofcode
1. insert a document with a text field and the character "/".
2. kql expression with a keyword present before the "/".
3. kql expression with a keyword present after the "/".
1. install a sample data 2. get a post url for a dashboard 3. delete the dashboard saved object 4. run the post url
1.create an index with date_nanos as a field: phofcode phofcode 2. create an index pattern using the date field as a time field.
3. open one of the documents in discover and select: "view surrounding documents"
1. create a pie chart 2. split slices over terms: domain.keyword (ordered by metric: count; order descending; size 100)
1. load sample data from load sample data kibana tutorial for logstash - create logstash-* index pattern phofurl 2. import the attached json and associate the saved objects - phofcode with logstash index pattern 3. open the dashboard all_the_viz 4. metric viz fails to display and logs [esaggs] > cannot read property 'doc_count ' of undefined on screen
repeat visits still take 10+ seconds to load the app.
2. click another area of kibana such as timelion, management, monitoring, etc.
1. set an autorefresh interval of 1, with a large cardinality (30000+ monitors) 2. wait for things to back up
1. install sample data 2. go to `[ecommerce] revenue dashboard` 3. klick add filter and open "index pattern" dropdown
1. added filebeat as a source.
2. set y-axis to count.
3. setx-axis to time-histogram 4. split chart by agent.hostname.
1. install kiaban via apt 2. run server behind a reverse proxy 3. run server behind several firewalls with no direct internet access 4. load apache templates from filebeat 5. open "unique ips map [filebeat apache] ecs" coordinate map
`ps -ef | grep elasticsearch` there is no elasticsearch process appear
1. create an index containing documents with very long field names.
i used numeric values for these.
2. create a histogram using this index with x-axis on the field in question.
3. mouse over a vertex on the graph created.
the popup will show a truncated version of the field name only, with no value.
1. set up your system so you have some metrics to monitor.
2. in kibana, go to the
1. apm-integration-testing: scripts/compose.py start --snapshot 7.3 2. create apm agent config in the ui 3. query the apm server 's `/config/v1/agents` endpoint
1. open metrics explorer 2. group by `host.name` or any field with long values
edit phofurl to throw an error before returning the `infrasnapshotresponse`
1. setup kibana repository phofcode 2. generate plugin phofcode 3. wait until the plugin generated 4. build the plugin phofcode 5. setup kibana distro phofcode 6. install the generated plugin
1. create docker-compose.yaml (removed elastic as it doesn't matter for this error): phofcode 2. run `docker-compose up`.
1. open a new discover window 2. click add filter 3. input field and value you want to filter on 4. click sav
1. install and run elasticsearch 6.5.4 from elastic website using msi installer 2. download kibana 6.5.4 from github as zip 3. rename extracted folder to "kibana" and use node version 8.14.0 with "nvm use 8.14.0" 4. inititate git repository with "git init" 5. remove modules "chromedriver" and "geckodriver" from "package.json" and "yarn.lock" as they are unable to be installed due to a proxy 6. run "yarn kbn bootstrap" 7. generate plugin with "node scripts/generate_plugin my_plugin_name" 8. run the command "yarn start --oss" in the generated plugin directory
1. install and run elasticsearch 6.5.4 from elastic website using msi installer 2. download kibana 6.5.4 from github as zip 3. rename extracted folder to "kibana" and use node version 8.14.0 with "nvm use 8.14.0" 4. inititate git repository with "git init" 5. remove modules "chromedriver" and "geckodriver" from "package.json" and "yarn.lock" as they are unable to be installed due to a proxy 6. run "yarn kbn bootstrap" 7. launch open-source kibana dev server with "yarn start --oss"
1. open canvas on a cloud instance of kibana 2. click on the `templates` tab.
3. click on `pitch` to clone the workpad.
4. observe the long pause and a timeout error.
1. download windows default distro from artifacts and unzip and run es/kibana 2. open ie11 and launch kibana 3. nothing happens other than spinning logo logs are clear and i can 't see any browser console logs <img width="1440" alt="screen shot at 2 35 03 pm" src=" phofurl <img width="1440" alt="logs" src=" phofurl
1. install es/kibana 2. stop kibana 3. install java lang server plugin 4. start kibana - observe error attempting to transfer from phofurl transferring transfer complete retrieving metadata from plugin archive extracting plugin archive extraction complete plugin installation complete fatal error: enoent: no such file or directory, lstat
1. open a sample workpad 2. use option + [, space, or -> to go one page forward - it doesn't work 3. use option + ], space, or <- to go one page back - it doesn't work cc @cqliu1 note: the following shortcuts are broken in fullscreen mode:
1. install elasticsearch, kibana, metricbeat and filebeat 2. load the default dashboards for metricbeat and filebeat 3. visual builder dashboard elements don't work.
given a dummy search like this: phofcode position the cursor to the left of the `n` in `"name"` and press
1. navigate to uptime 2. open the url filter drowdown
1. freeze the kibana sample index in 6.x (i was using 6.8.1).
observing the index settings was added following: phofcode after that, even unfreeze, the settings are still there.
2. upgrade es/kibana from 6.x to 7.2.0.
3. run kibana > `8.0 upgrade assistant` > `indices` > click `reindex` for `index created before 7.0`, then it would fail with errors.
1. choose some metrics to graph.
2. fill in the "graph per" with `host.hostname`.
3. click on the `actions` dropdown for any graph.
4. should be able to see the `view metrics for host` action, but it 's not there.
1. create and start a continuous data frame transform 2. while the transform is running, delete the source index
1. create a deployment in ess that does not have apm enabled.
2. launch kibana 3. open the apm setup instructions page and the broken link will be visible
1. click "add tag" 2. don 't select a color 3. add a module 4. click save
1. start with kibana 7.0.x or 7.1.x 2. start upgrade to 7.2.0-1 3. start kibana after upgrade
1. crate new index phofcode 2.the above index tries to generate visualize, but the following errors occur.
as you can see "follwers" is long type.
<img width="333" alt=" 4 41 50" src=" phofurl
1. go to dashboard, create an empty dashboard 2. click edit button 3. click add button
1. create the following index: phofcode 2. create the associated index pattern 3. in kibana, create a visualization -> area.
4: configure the visualization with metrics: aggregation "sum" on "value" field (it 's actually irrelevant what the agg is) buckets: split series, term aggregation, term1.keyword split series, term aggregation, term2.keyword split series, term aggregation, term3.keyword on leaf aggregation (`term3.keyword`) enable `group other values in separate bucket` 5. select a date range that includes timestamp of indexed sample document.
the following error will appear: phofcode <img width="1160" alt="screenshot at 10 27 48" src=" phofurl
1. add `i18n.locale: "ja-jp"` on the bottom of kibana.yml and launch kibana 2. go to
1. install kibana 2. create a config like [root@node01 ~]# cat /etc/kibana/kibana.yml elasticsearch.url: phofurl 3. start kibana [root@node01 ~]# -c /etc/kibana/kibana.yml --allow-root --verbose fatal error: [elasticsearch.url]: definition for this key is missing
1. open the dev tool 2. write the uri query with "}" or "{" in q param 3.
0. specify a static timerange in the past (where data doesn't change) 1. create a data table 2. configure the metric as percentile 3. apply 4. click refresh, you will see that some percentile will change its numbers or alternatively use demo.elastic.co phofhyperlink
1. auto interval screenshot 18 16 36 phofimage 2. minute interval screenshot 18 16 27 phofimage 3. check response screenshot 18 15 33 phofimage 4. response screenshot 18 15 11 phofimage 15 07 15 03
1. install kbn-action phofhyperlink 2. start the functional test server 3. run phofcode 4. get the action id from the response, to use in the next commands 5. run (changing from using config `service` to using `host` and `port` instead) phofcode 6. run phofcode `kbn-action` logs: phofcode
1. load up the stack monitoring ui in kibana.
visit a page that has charts on it.
note the times shown on the x-axis by default they should be in your browser's time zone.
2. in kibana, visit management > advanced settings.
find the `dateformat:tz` setting and change it to something other than your own time zone.
3. refresh page with charts on it from step 1.
1. install kbn-action phofhyperlink 2. start the functional test server 3. run `kbn-action create .slack "bad webhook slack" \'{"webhookurl":" phofurl 4. get the id from the response, to use in the next command 5. run `kbn-action fire ${id from response} \'{"message": "hello"} \'`
1. go to license management 2. click start trial 3. confirm the modal 4. the modal doesn't close and you can see an error in the console log.
the license however is enabled.
same issue occurs when trying to revert to basic license.
1. go to the 'configuring kibana' page phofhyperlink 2. search for `server.cors` 3. no results found
1. create the space via api phofcode 2. in the browser, check the monitoring site: phofurl 3. kibana returns: server error","message":"an internal server error occurred"}`
1. add a filter to change the underlying view (inventory, metric explorer).
2. mouse-select the filter text and delete it.
3. switch mouse focus from filter field.
4. the filter doesn 't reset.
1. run the docker image 2. watch it crash 3. get the logs
1. go to the logs ui 2. using the log minimap, look for a high-density time that's at least several hours away from the currently visible range of entries and click on it (try clicking exactly on a place demarcated on the time ruler so that you have an easy point of reference to observe new timestamp, e.g.
12pm exactly) 3. wait for new entries to load
1. create a visual builder graph (or a dashboard with visual builder graphs) showing anything.
1. switch to inventory tab.
2. select a metric with long name, e.g.
1. generate a graph, fill in the "graph per" field.
2. open the graph in visualise.
3. switch to panel options.
4. the filter value in panel filter is not in quotes.
1. collect logs with the sematext logagent 2. add index with these logs to infrastructure ui log indices 3. open metrics for random container
1. create a new space without access to the index pattern management feature.
2. navigate to that space for the first time.
3. kibana immediately redirects to the index pattern management interface, causing an infinite loading+error loop.
1. click on reporting on your chosen fav visualization or dashboard 2. don 't navigate to reporting - just stay on the page and wait for the report is ready click on it notification 3. click the link
1. click on add remote clusters 2. give a name "sds
1. create a pie visualization 2. hover over a pie slice
1. select new dashboard (or modify old one) 2. push add function 3.
1. disable ml in space via kibana management (/management/spaces/edit > customize feature display) 2. enable anomaly detection via the apm ui for a service 3. note that job is created successfully 4. visit the created job via the provided link and see 404
1. set `xpack_ml_enabled=false` in kibana process environment 2. navigate to apm ui and select a service 3. notice page start to load and then abort with: phofcode
1. set up heartbeat with a simple monitor: phofcode 2. send to the cluster 3. visit the uptime app
1. fresh install elasticsearch, kibana, heartbeat version 7.2.0 2. start heartbeat, elasticserach and kibana to get some data 3. create a new space in kibana and switch to it (name does not matter) 4. go to the uptime module 5. click on the integrations button for a row 6. click on "show host metrics" 7. it takes you to a url that is missing the kibana endpoint, on localhost this url is set to: phofurl
1. on the kibana homepage, click "add log data", then "cloudwatch logs" 2. follow the instructions 3. on step five, observe that the functionbeat `deploy` command fails
1. create new tsvb visualization or open existing one (index pattern should be empty) 2. set 'terms' value for group by combobox 3. try to expand 'by' combobox
1. log into kibana in ie11 2. you will be redirected to the "something went wrong" screen
1. install kibana 5.6 2. create some dashboards over an index pattern targeting some data and test you can filter by some keyword 3. upgrade to kibana 6.6 4. access the same dashboard and the same indices: the filtering is not applied
1. create a kibana instance with `>100` index patterns that have a shared prefix, e.g.
`s-hk-` 1. create a `s-hk*` index pattern.
1. open visualize to create a new data table vis.
1. search to select index pattern `s-hk*` no results are displayed you can observe the same behavior in other places using react/eui autocomplete to search index patterns, such as the controls visualization.
it seems caused by mapping type of `index-pattern.title` in `.kibana` and too many patterns.
- control visualization tries to find patterns using find objects api phofhyperlink like - kibana tries search using simple_query_string phofhyperlink query with `search=s-hk*` as `query` and `search_fields=title` as `fields`.
- `s-hk*` query is parsed into wildcard query, but it doesn't work as our expectation because `title` field in mapped with `text` type.
- kibana needs search with `s*` or `hk*` query, but we have too many patterns starting `s` and `hk` then page size that has fixed value `100`.
1. create a rollup job on any index such as a sample data index 2. attempt to create an index pattern for that rollup after there is data 3. get an error messag
1. create a scripted field called date on kibana_sample_logs data with 2. use it as your x-axis date histogram aggregation with hourly intervals and create a chart with count on y-axis 3. try to do a filter on chart by dragging 4. kibana logs errors.
found this while testing: phofurl and phofurl
1. go to index management 2. select some indices using the checkboxes 3. perform an action 4. see popup with bad display string
1. create an index and index-pattern, index some documents with multiple values in one field.
example: phofcode 2. go to "discover", add the field "tosearchon" to the selected fields 3. click on "filter on value" next to document 1 (foo, bar, baz)
1. go to visualize > data table 2. select split table under the buckets config 3. click `rows` or `columns`
1. create a scripted field which accesses two of the document fields, e.g.
: phofcode 2. ingest two documents, one with both fields (`total_bytes`, `request_time`) present, the other one with the `request_time` field missing.
3. go to kibana->discover, list the two ingested documents.
1. create a new policy with warm phase enabled and a min age value.
leave move to warm phase on rollover disabled.
save the policy 2. edit the policy to enable move to warm phase on rollover.
save the policy 3. edit the to enable move warm phase on rollover again.
the last change has not been saved.
1. open kibana 2.1 go to 2.2 go to management => remote clusters
1. in discover, save a search (lets call this `saved search 1`) 2. create a new dashboard and add `saved search 1` to it 3. view the new dashboard
1. deploy an environment with metricbeat + logstash + elasticsearch + kibana note: here logstash simply forwards metricbeat events to elasticsearch (it's there because we use it for other purposes, but it's not relevant for this issue) 2. manually upload metricbeat template in elasticsearch (we have our reasons not to use the metricbeat feature) 3. enable the system module in metricbeat, launch it and wait for some data to be available in elasticsearch.
4. try to create the _metricbeat-*_ index pattern from kibana notes: - other index patterns on different data are created without errors.
- the timeout is fired in about 10-15s, definitely less than the configured elasticsearch timeouts (30000 ms).
we also tried increase timeouts ms, but behavior was same.
1. ingest metricbeat data with the `system.cpu` metricset enabled.
2. navigate to the metrics explorer and set the following criteria: * metric: `system.cpu.total.pct` * group by: `host.name` 3. follow the "open in visualize" link.
4. observe that user is redirected to index pattern creation screen.
1. add makelogs data to es 2. try to create a logstash-* index pattern 3. notice there is no option to select a time field
1. clone kibana repo and bootstrap 2. cd x-pack 3. run node --config 4. notice an error thrown on stats collection.
phofcode also see ci console: phofurl the message displayed as error and warning.
discussed with @marius-dr who brought up it might be nice to have a cleaner message not just stack dump.
we would like to know why it is happening, it appears to be just in our test environment and is not causing test failures, so it is probably nothing of concern.
1. add a markdown component to a page 2. add text settings via the sidebar 3. click on any of the text style or alignment controls
1. install the ecommerce sample data set.
2. create a data frame transform using the wizard on the machine learning page that pivots the data by grouping on order_date and aggregating on cardinality of order_id.
note: i explicitly change calendar_interval of date_histogram to "1y".
under covers, i see that it 's also adding `"format": "yyyy"` to date_histogram.
3. confirm that preview shows a single result with a value of "2019" for date.
4. start data frame transform and let it run to completion.
5. confirm that when you search contents of destination index, it shows correct value ("2019").
6. examine mappings were created for destination index.
in my case, "order_date" has a type `date` and format 6. examine results in discover tab.
the date there is shown incorrectly as `dec 31, 1969 @
1. try kibana 7.x on ie 11 (i only tried default distribution at this point, not oss) 2. kibana "k" just spins 3.
1. create a simple query and generate a short url.
it will open correctly when you navigate to it.
2. create a new query and keep adding `and` conditions until it reaches ~1000 characters.
3. generate a short url and navigate to it.
it will result in 500 error.
1. install a plugin with a dependency that is not in kibana 's root.
`yarn start` 2. load `localhost` in ie11.
1. add any element to a workpad 2. select that element 3. rotate the element 4. observe the tooltip
1. install the kibana deb package on ubuntu 18.04 2. create a problem in your kibana.yml file like having an unknown setting or duplicate setting (i had a duplicate of `elasticsearch.hosts:`) 3. start kibana service 4. check `journalctl -u kibana` to see logs
1. from kibana console execute the following: ` put test ` ` put test/_doc/1 { "time": "value1": } ` 2. create heatmap visualization with x-axis using "time" and y-axis using "value1" 3. hover over heatmap bar to display tooltip.
note that the value for "value1" only displays the first digit
1. create a heatmap 2. apply a filter 3. confirm that the legend ranges do not update
1. create a pie chart with two bucket types and save it 2. insert the saved chart into a visualization 3. attempt to click one of the categories in the inner ring/pie
1. open kibana 2. go to discover 3. hover over time range as you can see it at the screenshot
1. create 105 transforms 2. view data frame list, set paging to 50 3. observe that there are only 2 pages
1. open visualize and click on create new - click on visual builder 2. click on date picker - set the time to 5 years ago 3. drag on a peak of the chart and drag it again 4. instead of the chart - i see all shards failed.
1. create a visualization 2. choose any `parent pipeline aggregation` 3. click the apply button
1. install es/kbn cloud 2. load sample data into dashboard 3. observe errors: unknown time-zone id: browser and internal error pop-up in console: moment timezone has no data for browser.
see phofurl searcherror: "internal server error" _construct phofurl wrapper phofurl searcherror phofurl searching processqueue scheduleprocessqueue $digest $apply done completerequest requestloaded possibly unhandled rejection: screenshot from phofimage
1. edit your index pattern to add a formatter to any field 2. use that field in a sql query or docs query in canvas 3. the result is not formatted
via direct `.kibana` index manipulation 1. get the current settings using phofcode 2. update the setting injecting a custom settings: phofcode 3. refresh kibana browser page 4. open the advanced setting and you will see a new advanced setting like the following: <img width="822" alt="screenshot at 17 29 28" src=" phofurl the same behavior happens if you add a new custom setting via saved object api: phofcode
1. ingest apm data to es 2. navigate to curated apm ui and ensure services are listed 3. hit refresh button 4. empty page, no services showing up any more.
phofcode the `/_search` returns: phofcode i then create an index pattern based on `foo` and accept all the defaults, then go to `discover`, select that index pattern, and i see: <img width="856" alt="foo_bar" src=" phofurl checking chrome developer tools ' network panel i see: phofcode which then results in: phofcode note that the value above is the incorrect not everything seems fine in elasticsearch, or even when querying in devtools in kibana.
i 'm only seeing this happen in discover.
install geoserver and point to a default layer.
coordinate map: image phofimage maps app image phofimage
1. create any line graph in kibana 7.x 2. set y-axis to median aggregation 3. go to metrics & axes tab and be sure "show line" is checked
1. create a new visualization (e.x.
`area`); 2. choose one of `parent pipeline aggregation` as a metric (e.x.
`cumulative sum`); parent phofimage 3. create a bucket (e.x.
`x-axis` type bucket), choose a `histogram` aggregation for it;
1. using ie 11 go to management > saved objects 2. select one or more saved objects 3. click the delete button
1. ingest metricbeat data with the `system.cpu` metricset enabled.
2. navigate to the metrics explorer and set the following criteria: * metric: `system.cpu.total.pct` * group by: `host.name` * filter: `system.cpu.cores > 1000` 3. observe that a "no data" message is shown as expected.
4. remove the grouping criterion.
5. observe that a chart with data is shown.
1. ingest metricbeat data with the `system.cpu` metricset enabled.
2. navigate to the metrics explorer and set the following criteria: * metric: `system.cpu.total.pct` * group by: `host.name` * filter: `system.cpu.cores > 1` 3. observe that a graph per host is shown as expected.
4. click the "open in visualize" action link.
5. observe that no graph is shown and panel filter contains a kql expression.
1. ensure metricbeat data with sufficient cardinality are present (here: the `system.process` metricset) 2. set the metric to 3. set the grouping field to `process.name`.
4. observe the chart arrangement.
1. open the `create data frame` wizard 2. select a comma-separated index pattern (e.g.
`some_index-2015 * ,some_index-2016 * `) 3. select a `group by` field and an aggregation 4. notice that the data frame pivot preview shows an error.
1. install over 100 visualizations (i have the metricbeat, packetbeat, and filebeat visualizations installed) 2. go to the visualize app
1. ensure log data are present in elasticsearch 2. navigate to the logs ui 3. open the flyout for an off-center log entry 4. click the "set filter" icon for a keyword field, e.g.
`host.id` 5. observe that a loading screen is shown and the marked log entry is sometimes not centered in stream
1. generate a png report 2. see temporary files accumulate in the tmp directory
1. load logstash data from load sample data tutorial phofurl 2. go to maps app and add the layer with elasticsearch documents with logstash index pattern from step 1 3. add the machine.os field for tool tip and edit layer and add a filter for machine.os keyword: 'ios ' 4. tool tips are getting displayed jumbled up <img width="1440" alt="screen shot at 5 19 10 pm" src=" phofurl 5. its better if the filter is on win xp?
<img width="1440" alt="screen shot at 5 23 09 pm" src=" phofurl
1. start es with basic license (7.2.0) 2. start kibana with oss license (7.2.0) 3. navigate to home page.
1. create some sample docs in an index.
use fields with lower case values and mixed case.
for example: phofcode 2. create a dropdown with a sql query like so: `select name from "ddd"` 3. set values column and filter column like so: image phofimage 4. create a bar chart with the following sql query: phofcode 5. bind its dimensions like so: image phofimage 6. select "abc" in the dropdown, and you 'll see a chart like this: image phofimage
1. click on visualize and add new visualize and - select region map 2. select your index pattern and give terms field 3. kibana doesn't display the results like it used in 7.1.1 bring_back_default phofimage 4. click on options in visual editor and then select world coutries 5. kibana displays the results
1. ensure metricbeat data with at least one host ip address are present 2. navigate to with a non-existing `ip_address` 3. observe the error message 4. change the `ip_address` in the url to match the host ip present in data and press enter 5. observe that error message updates, but user is not redirected
1. create a painless script in discover.
3. click to edit filter.
1. load > 100 visualizations into kibana
1. start 7.2 bc4 with 2. navigate to discover and see prompt for index patterns even though some already exist, though none are starred.
1. i imported filebeat, metricbeat, and packetbeat saved objects so i had over 600 saved objects but i think this can be reproduced with only a few 2. go to management > saved objects 3. don't filter on any type 4. note how many total saved objects you have in the link `export ___ objects` 5. select all with the checkbox in the header row.
the first item in the list will probably be something like `advanced settings [7.2.0-snapshot]` 6. open browser console so you can catch errors 7. click delete button 8. confirm delete 9. for me it hangs here 10. refresh browser to recover 11. check how many saved objects you have vs. how many you thought were deleting
1. set up a heartbeat monitor with a space in the name, and at least one other with a different name: phofcode 2. once there is data there, from the uptime ui in kibana, select the `name` dropdown, and select your new name 3. see that it is quoted properly in the filter box 4. notice that it isn 't actually filtered
i can reproduce it while running from source view page to search page can go back and forward phofhyperlink functional test locally.
1. attempt to create index pattern "filebeat-*" 2. error pops up with "failed to fetch" 3. index pattern management is unusable until removed from saved objects.
1. navigate to phofurl or phofurl
1. go to log ui 2. add filter `stream : *` 2. add `stream` field column 3. start scrolling to new documents 4. new documents are missing `stream` entry
1. go to log explorer 2. open a log line in the flyout 3. try to scroll, if all the content fits on the screen resize your browser then try again
1. go to any metric detail page 2. open date picker quick select 3. click on `today`
1. load enough sample data to product multiple groups in side groups 2. go to infrastructure ui 3. group by 2 levels 4. notice that the grouping don't wrap properly (like screenshot below)
1. see screenshot comparison of chrome, firefox, and ie11 2.
* ', label="inbound $1") 2. the above query gives me this graph.
screen shot at 5 37 37 pm phofimage
1. upload a logfile in data visualizer 2. override grok pattern is a non-matching one
1. download 7.2.0 bc3 for es and kibana.
start kibana 3. open kibana, navigate to code app.
enter the elasticsearch repo and click clone: ` phofurl 4. repo clones, then moves to indexing phase.
5. errors begin rapidly showing in the kibana log until kibana crashes.
1. mouse-over or inspect the link url and see that it's to 7.x docs 2. click the `go to documentation` link and see that it opens 7.x docs instead of 7.2 3.
1. create an index with a long field name for example 2. add a long value for example wellhistorydashboard 3. add that to a map and see the tooltip (or screenshot)
1. add a line string 2. change the colour (to red for example) 3. save the map 4. the linestring will have changed to white.
this is the case for the saved map too
1. create an index with field names that contain spaces at start/end 2. navigate to the data frames wizard and start creating a data frame by selecting a group by field to be one of the field names that contain a space 3. click on the pencil icon to edit the field name 4. ui won 't let you save your changes (for example to number of intervals if using histogram group by), until you delete space at start/end of name.
1. disable apm, infra, or logs 2. start heartbeat and navigate to uptime 3. attempt to follow an integration link from uptime to another page
1. include some data with arabic text ( sample included below ) 2. make tag cloud visualization 3. arabic letter expected to be from right to left attached, not separated letters from left to right
1. add image in custom plugin scss file example: .workbench_logo { height: 32px; width: 32px; background: no-repeat; background-size: contain; } 2.in browser resolved path is not correct image phofimage
1. generate a pdf report using system stats above
1. create docker-compose file like this (see below) phofcode 2. docker-compose up 3. see logs
1. download kibana 2. extract and modify config to point to es cluster 3. run kibana
1. make sure you have shared-item visualization areachart 2. go to visualize and open that saved viz 3. check element with `viseditor__canvas` class in dom the easy way to reproduce it is by running `node --grep 'data-shared-item '` in `kibana` directory phofcode
1. create new tsvb viz 2. click colour picker
1. navigate to the ml > data frames page 2. set refresh rate to 1 second 3. create, run & delete ~5-10 data frames programatically using the es `_data_frame` apis.
repeat until step 4 occurs.
4. a toast notification will show up saying `an error occured getting the data frame job list: {}`
1. install default distribution (i used windows 2012 server but it 's probably only dependent on the browser) 2. open kibana in ie 11 3.
1. add a dropdown filter 2. add a filter group to the element
1. call the stats api as shown above.
1. have a rollup job currently in "indexing" status 2. forcefully stop the job via an api request to /_stop/ endpoint 3. check kibana rollup jobs page: it will be blank
1. load the sample data 2. create a new coordinate map visualization 3. open the options tab and notice the layers select box is blank by default
1. create a new metric visualization 2. in the buckets section, split group, terms 3. try to click on any metric count of label.
1. setup ilm policy with time unit `second` and byte size unit `kb`.
2. navigate to kibana lifecycle policies_ and click on the configured policy.
this shows a wrong unit for the configured options.
1. go to console and paste the above.
2. put cursor between the brackets and use ctrl-space to auto-complete.
1. open metrics explorer 2. set aggregation to rate 3. set group by to `host.name` 4. click on actions for a host and apply filter 5. change metric to rate of 6. change grouping to 'system.network.name` 7. click on actions for the interface and "open in visualize" 8. look at panel options, the only filter is the group by
1. choose an aggregation type of 'median' 2. select a field 3. make sure it should display with a line; any line mode will work.
any line width (or blank) will work.
4. no line is shown
1. choose an aggregation type 2. select a field 3. choose a different aggregation type 4. field is reset
1. create new timelion visual 2. add query with line graph as step 3. select non auto interval from interval drop down (e.g.
1. upgrade to kibana 7.x from 6.x 2. go to discover 3. expand a document
1. login to kibana 2. click "discover" 3. click "add a filter"
1. go to infrastructure ui 2. look at the page title
1. for kibana 6.6.2, this _docker-compose.yml_ file works fine: phofcode 2. with the same environment settings, kibana 6.7.2 cannot connect to the monitoring cluster.
3. using the new environment variables in _docker-compose.yml_ fixes this: phofcode
1. dev console: phofcode 2. position your cursor at line phofcode 3. click phofcode + phofcode + (on mac) or + + (on windows) with a keyboard layout that only makes available requiring a key modifier (like shift) 4. no browser tab will open with the reference documentation
1. configure kibana to use saml sso 2. create a dashboard 3. open the link to the dashboard on a system where you're not logged into kibana
1. create a visualization with histogram aggregation with metric set to a numeric field.
2. set histogram aggregation interval to 0.5 3. click apply button 4. browser tab freezes indefinitely 5. breaking execution shows javascript stuck in a loop inside orderxvalues()
1. install es, kibana and a beat 2. in beats central management, enroll a beat but don't add a label, then try to delete.
1. install es/kibana 2. navigate to management -> beats central management 3. navigate to discover, visualize or dashboards notice error occurs in console.
vm14 typeerror: cannot read property 'unsubscribe' of undefined at vm94 kibana.bundle.js:2 at scope.$broadcast (vm14 at scope.$destroy (vm14 at cleanuplastview (vm14 vm14 publiclinkfn (vm14 lazycompilation boundtranscludefn update (anonymous) @ vm14 (anonymous) @ vm14 $broadcast @ $destroy @ cleanuplastview (anonymous) publiclinkfn lazycompilation boundtranscludefn update $broadcast (anonymous) processqueue $digest settimeout (async) browser.self.defer $evalasync scheduleprocessqueue $$resolve doresolve promise.then (async) $$resolve resolvepromise deferred.resolve promise.resolve vm15 commons.bundle.js:3 find vm15 commons.bundle.js:3 indexpatterns vm94 kibana.bundle.js:2 invoke vm15 commons.bundle.js:3 processqueue $digest foreach firestateorurlchange dispatch elemdata.handle screenshot from phofimage
1. open kibana to any tab that 's pointed at a cluster with a large mapping 2. open dev tools to network tab 3. observe a bunch of mapping data being downloaded every minute
1. install the dataset 2. create the simple visualization as shown in the attached image 3. execute this query in the devtools: get { "size": 0, "query": { "bool": { "must": [ { "match": "originairportid": "uio" } } ] } }
1. set as default index pattern 2. create a new tsvb visualization 3. you will see a flat green line on the timeseries visualization (check `api/metrics/data` api call via devtools, the `panel` object is issuing a that call with the `@timestamp` wrong date field.
4. now click on the panel option and visualization will disasppear showing an error message `the request for this panel failed` 5. check last `api/metrics/data` call, `time_field` value is `null` and es is complaining about `[date_histogram] field doesn 't support values of type: value_null`
1. install es/kibana 2. go to devtools console 3. type and backspace - causes error screenshot from phofimage
1. install default distro for kibana and es and activate your trial license on license management 2. install sample data 3. expire your trial license by changing system clock 4. click on maps - maps app displays unable to find ems tile configuration id: road map error.
1. create a monitor with a trigger 2. link it to a slack channel 3. navigate to alerts->monitor
1. on trial license create a role with fls and assign it to user 2. login to kibana with that user and everything is fine 3. logout and login as elastic user and downgrade the license to basic - notice that role from step one is disabled 4. logout login with user from step 1 5. kibana displays without giving any details about the error.
disabled role: <img width="1440" alt="screen shot at 1 44 38 pm" src=" phofurl <img width="1440" alt="screen shot at 2 21 59 pm" src=" phofurl
1. error happened if kibana was in folder - check out/elastic/kibana` 2. no error if kibana is moved into 3.
1. index a document with the following source: `{"state": "ma"}` 2. create a region map with the following configuration: -
1. run `yarn start` 2. change anything in `src/legacy` 3. the changes do not cause server restarting
1. have a trial license 2. enable monitoring 3. go to watcher - a list of cluster alerts appear 4. click edit on any of them
1. start kibana / upgrade elasticsearch from 6.7 to 7.0
1. load sample web logs 2. view sample web logs document in discover 3. observe that `utc_time` is months behind `@timestamp` field
1. start kibana in non-english locale _config/kibana.yml_ image phofimage 2. create a new tsvb visualization 3. set the 'duration' value as a formatter for y-axis 4. set some value for 'to' and 'from' fields 5. change value for 'to' fields
1. create saved objects with title "analysis "dashboard "analysis "dashboard 2. open management --> saved objects 3. search for --> no results
1. create some different saved objects (dashboard, search, visualization) 2. open management --> saved objects 3. select 1 or more objects.
4. change type selection --> the "delete" & "export" buttons are greyed out, even though the objects are still selected
1. create a role that is as close to the system `superuser` role as possible: phofcode 2. create a kibana user that uses this role, and log into kibana with that user, so that the user definition looks like this: phofcode 3. go to any dashboard in kibana and click share -> pdf report -> generate pdf report an observe the error on the bottom right.
try again with `elastic` system user and observe this user/role has no issue, and it works fine.
1. configure numerous monitors, most of which are `down`.
3. you may see less monitors in the list than what the snapshot view displays as its count.
1. profile a query that 's complex enough to produce enough text that will go outside the visible screen area when clicking more detail on a component (like a large bool query).
2. click `view details` using one of the affected browser versions.
3. try to find the `close`button if the text flows off visible screen area.
1. in the beats central management ui, click
1. make sure to have several index patterns 2. navigate to management -> index patterns 3. check table sorting
1. click on advanced watch creation 2. give the name and id 3. add <from sdh> in the watcher 4. click save kibana does nothing and console displays the error below
1. just upgraded docker from 6.7.0 to 7.0.0 and kibana refuses to start because of too many shards open (limit seem to be 1000) docker pull docker pull 2. deleted a lots of shards
1. have metricbeat data from a kubernetes cluster sending to elasticsearch 2. go the infrastructure ui and select the table view from the kubernetes tab 3. click on a pod with a short name
note: it's usually hard to reproduce manually, but can be done with automated tests 1. create a new visual builder viz 2. set the absolute time range to & from 3. click metric/top n/etc.
tab (before time series is rendered) result: new tab is opened with time series viz been displayed
1. create an index with a geo_point and a text field phofcode 2. populate it with a document with large amounts of text phofcode 3. add this as a layer in maps
1. install 6.7.1 of logstash, kibana, and elasticsearch.
2. configure logstash for stack monitoring.
3. load up the stack monitoring ui in kibana.
4. navigate to the specific logstash node in the stack monitoring ui, then click on the pipelines tab.
1. hover over the type of a field in discover.
2. notice that the name of the field (rather than the type) pops up.
1. create a new kibana plugin with the generator.
2. in the uiexports add multiple links: phofcode 3. add a `<router>` for those links: phofcode 4. implement `<potato>` and `<ketchup>` page.
6. notice when you click potato in the navbar it will load page and it will be active in navbar, but when you click on ketchup it will load page but potato will still be active.
1. have an elasticsearch environment with security enabled.
1. set a url field formatter on an ip field to a relative hyperlink.
for example: `/relativehyperlink` 2. view the resulting formatted ip field on a dashboard.
3. the field will not be hyperlinked and thus not clickable.
1. have a remote cluster with data available 2. add remote cluster to local cluster 3. attempt to create index pattern in kibana - find index and then use <remote-cluster>: syntax
it 's easily reproduced with a long dsl query like the one in the screen capture: <details> <summary>long query</summary> phofcode </details>
1. go to visualisation 2. add timelion graph
1. go to infrastructure 2. click on a host 3. select view metrics
0. set browser to 1200px x 600px or so 1. kibana -> visualize -> [new] -> line chart -> [source] 2. change your y-axis aggregation 3. if your browser size is similar, it 'll open upwards and it isn 't possible to scroll to the top entry.
1. install kibana behind nginx 2. attempt to reach app.
3. see error on page and in developer console.
1. visualize app 2. create new vis (coordinate/region type) 3. any ip or search 4. vis editor loads with error and no map is displayed
1. open your kibana instance and create a new tsvb visualization; 2. turn on the auto update; 3. open network tab in dev tool (needs later); 2. go to panel options and try to fast typing something in input field (you can reproduce it for all input fields); 3. in dev tool select the last request
1. create a document with arrays of objects containing geo_point, such as a list of stops with departure times: phofcode 2. create index pattern in kibana 3. add layer in maps app., select the correctly suggested geo_point field
1. visit the stack monitoring ui and enable monitoring (if not already enabled) 2. configure logstash for stack monitoring.
3. start up a sample logstash pipeline like so: phofcode 3. visit the stack monitoring ui > cluster overview > logstash node list
1. just upgrade 6.7.1 elasticsearch and kibana to 7.0.0 2. from browser, go to kibana url and you get an error.
(kibana is using default conf)
1. create map with vector region of world countries 2. populate "terms join" with a valid mapping (i.e.
iso code <> 3. observe odd error (though i can 't get this to occur consistently, oddly even if using the same fields it sometimes occurs and sometimes does not)
1. create a map with a vector shapes or other joinable layer 2. populate the "term joins" fields for that layer 3. purge the entry for "left field" 4. observe that the entry for "right field" has also be purged
1. load maps 2. add a "world countries" vector shapes layer 3. set borders to "0" 4, observe think 2px borders drawn between the countries
1. load almost any kibana page
1. run `node scripts/build --oss --skip-os-packages` 2. examine the notice.txt of the build.
it should include something like `this product has relied on <product name> licensed under <license name>` during the build, the logs show that visitors.js file is not found.
info [kibana-oss] generating notice.txt file info generating notice from source debg vfs.src globs [ '
1. start an instance of kibana 7.0.0+ 2. navigate to or 3. some plugin ids will look like not having a correct version.
1. create a filter and give it a custom label "foo" 2. check how it looks => rendered in white color 3. negate that filter and check how it looks => it 's still rendered in white color, no visual clue
1. create a percentile aggregation with mode band and a fill of x percent.
2. the legend doesn 't show any item 3. using line mode the legend shows one element
1. create a new threshold alert 2. add `metricbeat-*` to `indices to query` 3. change control focus
1. add an element to the workpad 2. click the `data` tab in the sidebar 3. click `elasticsearch raw documents` 4. observe the toast errors
1. deploy elasticsearch inside kubernetes and expose it wiht an ingress 2. try to connect from the kibana docker image to elasticsearch using the ingress url phofurl and you get this error: phofcode 3. try now to connect the same docker image to the service exposed as a loadbalancer and all works fine.
1. edit heartbeat.yml for type: tcp 2. schedule: '@every 5s ' 3. added hosts as below: hosts: 350 more servers... "] 4. started heartbeat by: ./heartbeat 5. checked kibana uptime.
6. can only see first 50 servers.
1. go to devtools 2. double-click `history` option 3. repeat as necessary
1. create visualization, add it to a dashboard.
2. change timezone to utc from kibana settings.
3. dashboard reports data in the same timezone which was when you created visualization (#1)
1. create a rollup job with an average and count metric.
it follows an example using monitoring indices: phofcode 2. start the job 3. create the rollup index pattern 4. create a visualization: `vertical bar`, `y-axis: the average`, `x-axis: timestamp`, `split the series by term`, `sort by average descending` at this point, there is an error: phofcode
1. load 7.0 bc2 create a space and add data.`[ecommerce] orders by country` 2. navigate to maps app and click on [ecommerce] orders by country 3. observe that it loads as intended and navigate back to maps app.
when you do so, you see the error in the console.
( as shown in the screenshot below) <img width="1680" alt="screen shot at 9 09 20 am" src=" phofurl phofcode @elastic/kibana-gis
*needs to have logstash with monitoring enabled *make sure you have you're console open 1. click on `stack monitoring` side menu item 2. click on `overview` under logstash 3. click on the `nodes` tab 4. click on a node in the table 5. the `pipelines` tab
1. add multiples metrics (in my case probe_ssl_cert_expiry) in the same dashboard 2. add multiples mattermost alerts with or query(x,5m,now) 3. when the second, or the latest no matter, matches alerting contains the a metrics value (in my case a website) like this: [alerting] ssl expiration alert a.com <- website from first metric, but match is about 3 grafana phofimage
this is an indicative way to reproduce the issue using sample data.
add the flight sample data per docs here.
go to the [flights] global flight dashboard create a range filter on say flightdelaymin image phofimage after it is created and applied, disable it image phofimage go to the [flights] delay buckets dashboard further down image phofimage and brush-select a range of flight delay minutes, say we choose roughly 300 to 330. visually nothing appears happen, which is because filter we had previously configured is updated but it remains disabled.
image phofimage thus, new values don 't apply and pre-existing disabled filter "mutes" effect of active selection in dashboard.
1. apply an exclude filter in any kibana dashboard 2. switch the theme to dark mode 3. notice the highlight color of the exclude filter
1. create tsvb visualization 2. select 'static value' aggregation
1. add a number (13 seems to be enough) hosts with some overlapping tags (mine are all tagged by ansible groups, some of which are nested) 2. use the group by button in infrastructure and choose "tags"
1. create a tag 2. add a configuration block with type metricbeat modules, module->apache, and attempt to add to hosts.
(tried formats phofurl phofurl https://${hostname}, http://${hostname}, 3. apply tag to a metricbeat beat 4. tail -f <metricbeat logs> 5. should see something like: > error [centralmgmt] cfgfile/list.go:96 error creating runner from config: 1 error: missing required field accessing 'hosts '
1. set the timezone in the 'advanced settings ' of kibana to 'europe/amsterdam ' 2. create a new 'metric ' visualization.
3. split group and select the 'date range ' aggregation 4. select a date field 5. set from to 'now-2d/d ' 6. set to to 'now-1d/d ' the label of visualization displays "april 2nd 2019,
1. turn on monitoring 2. turn on usage data 3. create new workpad 4. insert an image element, upload an image
1. open an existing workpad that has elements, or create one and add some elements 2. note the element stats in the sidebar 3. create a new workpad without navigating to the home screen (use the workpad loading modal) 4. note element stats in sidebar are now wrong
1. create a new ilm policy 2. enter a `0` in the number of replicas 3. error displayed
1. add the web logs sample data set.
2. open "[logs] total requests and bytes" map in "maps" app 3. ems tile configuration and vector shape is unavailable.
- make an empty workbook - add a shape element - delete the single existing page - it throws
1. select two shapes, keep holding the mouse button (don't release) 2. hit the `g` key 3. the elements (or new group) may jump; error may be signaled and/or the group becomes impossible to hover or select
1. use fls to make a geo field inaccessible for a user 2. although the field is invisible in discover (as it should be), it is visible in add layer in maps.
1. save workpad name to non-english in canvas.
1. open maps app 2. add a layer 3. try to modify the max size of either the `border width` or the `symbol size`
1. build a visualization (i have seen it in pie, and vertical bar) 2. place the visualization into a dashboard.
3. it may look like the visualization did not render until you collapse the legend.
1. start with a fresh install of kibana and elasticsearch 2. from the license management ui, upgrade to a trial license 3. from the same ui, downgrade back to a basic license
1. open a ml job in the anomaly explorer 2. in the anomalies list click some + and - buttons to add and remove filters 3. after a few clicks the error occurs sometimes the same error is thrown when datepicker applied on dashboard.
1. create a saved search.
2. create a dashboard with dark theme enabled and add the saved search.
3. expand one of the documents in the saved search and notice that the detail shows in light theme instead of dark theme.
1.go to kibana --> infrastructure --> docker 2.<ip 3.
1.management -> index patterns 2.create index pattern 3.wait for timeout
1. ingest auth logs using the system pipeline described in phofurl (or with filebeat's system module) 2. log entries should show up with set to the various programs referenced in the auth log 3. view the logs in `/app/infra#/logs`, observe `[system][auth] undefined`
1. create an index template to keep down the number of shards: phofcode 2. run a shell script to create several thousand indices phofcode 3. go to "management -> elasticsearch index management" in the kibana console.
4. test some numeric and text filters that should work.
5. test with the characters "bx" (which matched no index names in my cluster)
you then change data (by adding a time filter), but cache is never updated.
now when you update "view" function, previous cached values for "data" and "model" end up being used, and data in element now out of sync.
1. create/open a workpad 2. add at least one element if none already exist 3. delete all elements on all pages 4. check the element stats in the sidebar
1. use a rollup index 2. create a visualization - i picked area chart and used a larger time span as shown in the screenshot.
3. now observe that as soon as the bucket size and the interval is reduced, you see an internal server error on the screen <img width="1667" alt="screen shot at 11 05 00 am" src=" phofurl console error: phofcode network error: phofcode <img width="1672" alt="screen shot at 3 15 09 pm" src=" phofurl
1. select cell from overall swimlane 2. add a filter (with results for that time-range) 3. refresh page and see swimlanes loaded correctly but anomalies table has no results
1. created a consistent data feed using logstash generator input 2. used kibana discover to get accurate count of events in 5 second buckets 3. created threshold watch in watcher through gui utilizing graph to determine a good threshold to start with.
5 second buckets were displayed.
1. configure the time picker as: from `any relative date` to `now` 2. close the time picker clicking outside 3. open the timepicker clicking on `from` or `to` 4. the focus is on `absolute` tab header but selected one, with a blue bottom border is `relative` or `now` one.
1. yarn build --skip-os-packages --skip-archives 2. cat the server reference object_hash because we created a subprocess here: phofurl and this package has a reference to `object_hash`, since the content is empty we see our functional test fail: phofurl but not long ago the tests are fine
1. on elk instance 1, create an index pattern and make it your default.
2. on elk instance 2, create the same index pattern (but it will have a different id) 3. export the index pattern from elk instance 2 4. import it (with automatic index pattern replacement enabled) into elk instance 1.
5. on one, try and open the visualizations or dashboard tabs.
the 'no default index' error should appear.
1. get 6.7.0 stack going 2. get beats dashboards using setup dashboards - this also creates the beats indexpattern 3. check the upgrade assistant - there are no issues with any of the indices 4. go to saved objects ui and export the beats dashboard/saved searches and visualizations 5. download 7.0.0 stack for stack 6. create metricbeat index pattern manually 7. import exported saved objects from step 4 8. associate missing index pattern in saved objects with metricbeat 9. go to dashboards and open
1. choose "discover" tab 2. sort by paramaters 3. generate report
use version 6.7 elasticsearch and kibaba, with an older version of chrome somewhere between 51 and 65.
you need to be on a monitor with a higher resolution than the workpad to see this 1. load sample data 2. go to the canvas app 3. pick one of the workpads 4. hit the "enter fullscreen mode"
1. create a visualization in table 2. add an offset
1. node scripts/generate_plugin my_plugin 2. in plugin directory: `yarn start` uses development files and works correctly 3. in plugin directory: `yarn build` 4. kibana-plugin install 5. kibana fails to start
1. create a visualization and position the legend at the top or at the bottom.
any standard kibana visualization with a legend should work.
timelion, tsvb and vega are not affected.
2. create an empty dashboard and add the visualization created in step 1.
3. enable dark theme and inspect visualization legend.
1. open the maps app in kibana 2. add a new wms layer 3. enter ` phofurl as the url, `latest` as the layer and `default` as style.
4. open browser dev tools and review the url in network tab.
1. secure kibana with an apache "require valid-user" directive, e.g.
<location /> authtype basic authname "restricted" authbasicprovider file authuserfile /etc/apache2/passwords require valid-user </location> 2. open in firefox esr 3. kibana throws an error saying that it received a 401 for "translations"
1. enroll a filebeat 2. add the necessary configuration block 3. click save & continue 4. check your browser 's debug console
1. start with a time filter element expression: `"timefiltercontrol compact=true column=@timestamp | render"` filter: `"timefilter column=@timestamp from=now-24h to=now"` handlers.getfilter(): `"timefilter column=@timestamp from=now-24h to=now"` 2. change the expression to just `demodata` expression: `"demodata"` filter: `""` handlers.getfilter(): `"timefilter column=@timestamp from=now-24h to=now"`
1. a job with an annotation: image phofimage 2. delete the job: image phofimage 3. create a new job with the same name image phofimage 4. old annotation re-emerges image phofimage
1. enable monitoring 2. go to elasticsearch 3. browse to jobs
1. install es, kibana, populate with some demo(web logs) data 2. set kibana config values phofcode 3. to simulate long-running query behavior install plugin phofurl with some modifications to work with 6.6.0 es: phofurl 4. restart es with installed plugin 5. open discover app in kibana 6. open dev-console in browser and hit refresh button in discover app 7. capture request to copy it as curl 8. change request body ("query" subtree) to phofcode 9. execute in shell(bash): phofcode observe closed connection after 120 seconds.
1. create es cluster in cloud with `v7.0.0-rc1` 2. use filebeat, metricbeat, etc.
to create dashboards and visualizations 3. export saved objects via the api endpoint provided above.
1. create a dashboard and set it to auto-refresh.
2. inspect a visualization from that dashboard (be on the request or response tab).
3. wait until a refresh happens.
1. go to /app/monitoring 2. enable monitoring 3. read es logs
1. add an element 2. add container style under element style in the sidebar.
3. observe missing color pickers
1. store heartbeat data in es, access uptime page 2. navigate to uptime's _monitor_ page 3. check kibana server log
1. open a logstash pipeline in the pipeline viewer 2. resize the browser window
1. send the following request to kibana: phofcode this returns an http 200 (ok).
2. switch from the default space to the newly created space: image phofimage 3. we get the following: image phofimage note that if we specify space id in lower case, everything works as expected.
1. create multiple index patterns with long names (>25 characters say) 2. view in management > kibana > index patterns 3. try to figure out which one is which
1. shutdown kibana and elasticsearch services 2. startup elasticsearch so that it is in red (maybe don 't start the nodes that have `.kibana` shard) 3. startup kibana and see it crash
this can be reproduced in any env using any install method without having to run through upgrade steps.
1. deploy kibana and elasticsearch 2.
`mkdir dummy_module` 4. open ml kibana app, click "create new job" 5. check kibana stdout log for error
1. create new tsvb visualization 2. go to panel configuration and configure percentile rank aggregation 3. create a pipeline aggregation by pressing + button and selecting derivative aggregation
1. create any visualization (let 's say pie chart) with other or missing bucket.
image phofimage 2. delete the index which this visualization is based on, in this case: `delete cpacorrection*` 3. open this visualization or any dashboard where it 's used.
1. setup hb + kibana + es 2. attempt to filter without using kql
1. start heartbeat 2. start kibana + es 3. navigate to the monitor view
1. set browser width 2. cringe
1. add an element with the expression `filters | render as=debug`, so you can see all the filter values 1. add a datatable element to your workpad 1. change the expression to `timefiltercontrol compact=true column=@timestamp | render` 1. note that the filter value in debug element does not change, or is invalid
1. enable monitoring 2. create monitoring index pattern `.monitoring.
*` 3. ingest docuemnts into the cluster using kibana data samples 4. run the query on timelion phofcode 5. see the graph 6. go to canvas create a new workpad.
add a linechart with timelion datasource and run the same query 7. the graph shows no changes (flat line on 0) looking at preview, you see null for all buckets
1. open apm ui, select a service and a transaction.
some have result 2xx, some 5xx.
2. note the 'result ' of the transaction sample 3. enter `"transaction.result : "http 5xx"` (or `"http 2xx"`), opposite to what 's in the sample.
hit enter, observe that the sample changes to one matching search criteria.
4. select a bar in distribution, observe that sample changes to one in that bucket.
5. change search bar filter to opposite result ("http 5xx" if it was "http 2xx", and vice versa).
6. the sample remains unchanged.
1. set up a dashboard.
i used a metricbeats docker overview dashboard 2. copy the embed code for the dashboard 3. paste the code in html 4. resulting iframe shows an artifact of an element that should not be there.
it shows on page load, and keeps popping up.
1. host kibana on port 443. example: ` phofurl 2. make sure elasticsearch is not reachable from the browser: hence running elasticsearch in a docker network and not exposing port 9200 to the host os.
2. try to load discover 3. fails with: `discover: unknown error` image phofimage
1. in kibana, load the sample flights dataset 2. create a new vega visualization using the following spec phofcode 3. hover over one of the rectangles, and you will see a clipped tooltip.
1. on discover, use the relative dates to select - from: `75 years ago` - to: `70 years ago` 2. displayed date of `to` reads `69 years ago`
canvas is a good example since it also includes an (outdated) image in the specified location.
1. comment out the `euiicontype` in the canvas export so that the nav should fall back to using specified `icon`.
phofurl 2. load kibana and notice that in nav bar, there is no image, and in console you get following 404: `get phofurl 404 (not found)`
1. log in as user with kibana user role 2. go to management 3. click index management
1. log into kibana with user kibana 2. go to management 3. click ilm
1. include some data with some metrics ex : id, method, status(pass, fail, skip) 2. select metric status as "skip" 3. observe that system not showing count as "0"
search in the _search bar_ does not work - until the option is turned
1. enter kibana 2. click "add a filter" 3. check `host.name` `is` 4. see only two hints - where i have many more
used to receive logs from metricbeat 6.6.1, infra ui was working in kibana 6.6.1 newly installed beats 6.6.2 es+kibana upgraded from 6.6.1 in the cloud to 6.6.2
1. start es/kibana 6.7.0 in your local 2. forget that you started 6.7.0 stack and run 7.0.0 es/kibana 3. stop es/kibana 6.7.0 and restart es/kibana 7.0.0 4. es cluster remains red and kibana exits with a fatal error es logs: phofcode kibana logs: phofcode cluster status: phofcode .kibana documents are zero: phofcode
1. go to machine learning -> file data visualizer (experimental) 2. drag and drop csv file with values like etc.
1. open a new kibana dashboard 2. the timepicker is hidden behind/beside the refresh button
1. create a geo aggregation layer 2. select a long field name for the metric
1. create a bar chart for data with single digit values.
2. hover over one of those single digit values.
3. you will no longer be able to click in the dark grey area to show the magnifiers.
1. create user with no permissions 2. log in as that user 3. click "connect to your elasticsearch index" from the home page, or navigate to the index pattern management page
1. create a new visualization with the visual builder 2. select "percentile rank" for `aggregation` 3. choose a valid numeric `field` 4. input an integer for `value` 5. no results are returned
1. create a new user with `kibana_user` role 2. access 7.0 upgrade assistant 3. observe error
1.create a line chart visualization 2.add a "dot size" metric 3.change the "dot size ratio" slider
1. open a bar chart visualization 2. click on one of the values, which will open the color palette 3. notice there are no +/- buttons to filter on that value
1. use the `to` function (prior to phofurl 1. alternatively, register a function (new or existing) in both registries and `console.log` the value of `handlers.environment`, it will always say "server"
1. access to management > elasticsearch > rollup jobs > create rollup job > click 'learn more about cron expressions' 2. it links to ` phofurl which is not exist anymore
1. create a dashboard made up of several visualizations 2. wait for some time to pass and data to accumulate 3. maximize a panel
1. go to canvas tab.
1. image phofimage 2. image phofimage 3. image phofimage
1. navigate to dashboard tab 2. edit an existing dashboard/create a new dashboard 3. go to the menu bar and click edit.
4. click options in the menu bar.
1. generate a new policy that has `set_priority` present 2. edit the policy and attempt to remove `set_priority`.
3. check generated json to see `set_priority` action present
1. load a workpad 2. delete a page with at least one element on it 3.
1. go to monitoring -> indices 2. click on some index 3. scroll down and try to find shards allocation.
1. go to monitoring -> nodes 2. click on a node 3. check breadcrumbs at the top - there is node id such as "meaogftqte2hffb1rltklq" instead of node name such as "c04-eshot01-qa1" (see screenshots)
1. run elasticsearch and kibana with ssl/tls enabled using self-signed certificate 2. use a self-signed certificate 3. access kibana using chrome
1. go to any url in kibana 2. manually add a query param to whatever url appears, like `&a=b/c`, press "enter" 3. watch as the url is updated to include an encoded copy of everything after the '# ' in the original url note: it will continue to copy everything repeatedly as you update the url, copying last copy in a recursive way.
1. try to reindex indices, where _source was not stored
1. open kibana and go to the apm dashboard (see img1) 2. click a transaction / route ending in a `/` (see img 1) 3. the resulting screen does not find the correct data and shows "no transactions were found."
1. add sample data for flights 2. open dashbaord, add a filter "machine.os.keyword: osx" (by clicking the pie chart) do not pin it 3. save dashboard 4. open the viz "[logs] article tags" in the viz editor 5. add a filter "machine.os.keyword: osx" (by clicking the pie chart) 6. pin that filter 7. navigate to dashboard by clicking dashboard tab 8. attempt to add a new filter (e.g.
by clicking on a country on map) => this new country will not appear 9. click on different country => this new country will not appear 10. uping "osx" => both filters will suddenly appear
1. set logalias to include many indices 2. go to the logs ui and click on "stream live" 3. look into the network console (two or more pending requests at the same time)
1. create an element with the following expression: phofcode 2. note error 3.
1. create an element that uses `to` with a server function, like `demodata | to type="null" `
1. cloud instance with kibana and es 2. try and remove selected tags from the configuration tags list 3. ui keeps state, but console shows permission failure mentioned above.
1. load a workpad and perform a bunch of changes (moving elements around, adding and removing elements, adding and removing pages, etc) 2. undo many changes at once (cmd+z, ctrl+z, or the browser's back button) 3. the number of undo requests required will vary greatly based on the size of the workpad, latency between kibana and elasticsearch, latency between the browser kibana.
1. create an advanced watcher 2. add a name and id 3. add an index action 4. click save and nothing happens
1. load a workpad 2. load another workpad 3.
1. create new workpad 2. add a time filter 3.
1. add a remote cluster to your current cluster.
2. confirm it works ok and monitoring page loads just fine.
3. close the remote cluster.
4. open the monitoring page again.
1. create new tsvb visualization; 2. go to panel options; 3. set 'd' as a value for the
1.open uptime 2.hover over monitor history histogram from left to right 3. observe how the tooltip is getting trimmed
1. create an element with this expression: `essql query="select username from not_an_index"` 2.
1. start elasticsearch, wait until it listens for connections 2. start kibana 3. kibana crashes
1. run manually the query generated by discover view (last 4h and setting `"profile": true`): phofcode the result is as follows: phofcode 2. run the same search query, but w o `date_histogram` section: phofcode the result is as follows: phofcode
1. use array as value to `elasticsearch.hosts` 2. launch kibana
1. create a metricbeat index on your local cluster.
2. set up a remote cluster that has a metricbeat index too.
3. try to create an index pattern with ` * :metricbeat * `.
only the index from the remote cluster will show up.
1. create an index pattern without a date field 2. create new visualization 3. select date_histogram aggregation as x-axis buckets 4. errors get logged: angular.js:14800 typeerror: "field" is a required parameter at (field.js:146) at agg_params.js:98 at aggparams.foreach (<anonymous>) at (agg_params.js:96) bucketaggtype.makelabel (date_histogram.js:93) aggconfig.makelabel (agg_config.js:329) series.js:61 aggconfigs.map (<anonymous>) $scope.changevalueaxis (series.js:60) scope.$digest (angular.js:18372) ``
1. create a line graph using a `date histogram` for the x-axis.
2. select `yearly` for the `interval`
1. create a 5.x cluster which uses watcher.
2. upgrade to 6.7 without reindexing watcher via the 5.6 reindex helper (or migration upgrade api phofhyperlink ) 3. load the 6.7 migration assistant
1. install 7.0 2. import visualization into 7.0 3. see `"no objects imported"`
1. insert documents in elasticsearch on a single index until kibana presents the primary storage size with `gb`.
2. access index management page.
3. compare presented value in with the one presented in the `size_in_bytes` in the `get _stats` api (see screenshots below).
1. load a workpad and watch the network tab 2.
1. create a main bucket as histogram 2. create a split series with an alphabetical ascending sort 3. make sure one of the item of the split series does not appear in the first range of the main histogram
1.checkout 6.7 2.launch es and kibana 3.open uptime app image phofimage
1. add an element 2. resize the element until it has 0 width or height 3. click outside of the element to deselect it
1. open discover 2. play with the time picker 3. observe the lockup
1. create a simple boolean scripted field 2. create a new "controls" visualization using the previous scripted field.
focus input click on a value ==> nothing happens image phofimage image phofimage
1. load `sample web logs` data set 2. go to `management`> `advanced settings` and increase `max_buckets` to 3. create e.g.
a line chart with following settings: metrics > y-axis > aggregation: `max bucket`, > bucket > aggregation: `date histogram`, field: `timestamp`, interval: `custom, 5m`, metric aggregation: `sum`, field: `bytes`, buckets x-axis aggregation: `date histogram`, field: `timestamp`, interval: `auto` 4. change the time range, e.g.
from `last 4 hours`, `last 24 hours`, to `last 7 days` and observe changing scale of y-axis as well as changing interval in the request body that should stay constant.
1. add a new wms layer to the maps app (for example, phofurl 2. enter a comma separated list of layers in the layers text box (ex.
1,6) 3. also try adding a style (ex.
1. visualize -> visual builder 2. add a simple dataset, no aggregations or anything, just some timeseries data 3. duplicate the dataset with the "duplicate" button 4. go into options -> offset series time by: 1d 5. make sure the timepicker at the top is set to : past 24 hours
1. load 6.5 metricbeat data 2. visit infrastructure ui 3. notice there is no data available.
1. add new pages with image element 2. for each new image element, drag and drop the image into the import image control 3. image loads just fine 4. save workpad 5. leave space 6. come back to space 7. open workpad 8. errors
1. checkout latest 'master' branch 2. execute the following command in your console `yarn kbn clean && yarn kbn bootstrap` 3. start es and kibana instances ` yarn es snapshot --license trial yarn start ` 4. open phofurl
1. create a new visualization 2. save it using a special unicode character (co) subscript 2 is unicode u+2082 3. create a new dashboard 4. try to add the visualization to the dashboard by searching for co or co2
1. select an applicable dashboard or visualization 2. click on plus sign.
3. values of your applicable index may not appear
1. click on management 2. click on beats central management 3. click on enroll beats
1. i install any "sample logs" kibana demo data 2. i go to "discover" tab 3. i click on timepicker editor button (clock icon)
i was able to get my results by putting my equation in a parenthesis and then multiplying that result against 0.1, looking something like: `(doc[ 'units '].value / 7500) * 0.1`
1. on a workpad with at least 2 pages, select and element 2. change to another page while that element is still selected 3. select an element on the new page (this step isn't really required) 4. go back to the first page you were on
1. configure custom time range in `timepicker:quickranges` 2. use in the rest of kibana 3. not seen as an option in the uptime monitoring solution
1. add an index pattern (optionally set as default) 2. open the discover pane and set to the new index pattern 3. remove index pattern 4. open the discover pane to receive warning about indices
1. create a monitor 2. navigate to status page 3. view `ms` count that is much too low
1. create an index pattern with a `-` in it.
for example "metricbeat-*" 2. serach for it in the saved objects page with any of the following terms: `metricbeat-*` , `metricbeat -*` `"metricbeat-*"` the requests looks like this in all the cases:
1. open one of the maps from sample maps 2. click full screen in the top nav bar 3. use the browser back button to go back to the listing page 4. kick on another map 5. kibana opens it in full screen mode
1. open one of the sample maps 2. click on add layer and add grid aggregations 3. edit show as to heat map - kibana crashes with cannot read property of getid fatal error
1. open one of the sample data maps 2. add phofurl and the url and layers as osm-wms 3. maps logs this error to browser console phofcode <img width="1440" alt="screen shot at 3 01 15 pm" src=" phofurl
1. click on maps and on sample orders map 2. on the sample orders map - click on add layer and select grid aggregation 3. kibana autoselects the geospatial field.
4. clear it 5. you will still be able to add that layer add_layer phofimage <img width="1920" src=" phofurl
1. start up heartbeat with an icmp monitor (you 'll need super user privileges) 2. load the uptime ui 3. attempt to filter by monitor type: icmp
1. add `xpack.cloud.enabled: false` in kibana.yml (or kibana.dev.yml in development) 2. start kibana 3. server crash due to fatal error
1. create this document post gps_test/_doc/1 { "poslist": t{ "type": "linestring", t"coordinates": t t} } 2 add gps_test as an index pattern go to the kibana maps app.
select option to add layer from an elasticsearch index.
seect the gps_test index, it correctly suggest to use the field poslist.
3. it does not work
1. load the uptime app 2. refresh the page
1.create a line/bar/area chart visualization.
2.place the visualization on a dashboard and size it so that the height is just large enough to show the full legend.
3.select one of the items in legend.
1. open a workpad in canvas 2. click on full screenmode 3. use the browser back button 4. user is in the canvas listing page without any nav items <img width="1920" alt="screen shot at 10 50 13 am 2" src=" phofurl 5. click on another workpad in the workpad 7. kibana retains the full screen mode retains_full_screen phofimage
1. add the 2. edit the `[flights] flight count and average ticket price` visualization 3. pick a small interval that will includes some missing values between data points 4. mouse over one of this points
1. create ilm policy and fill in some number for "number of replicas" in either warm or cold phase 2. save ilm policy 3. edit ilm policy and clear "number of replicas" box 4. new, empty value is not saved.
1. narrow down your screen to 1280 px wide 2. create a rollup index 3. open the index pattern page under management
1. go to advanced settings and change the date format to dddd, mmmm do yyyy, h:mm:ss a which should display date as "sunday, february 14th 2010, 3:25:50 pm" 2. go to canvas and add a data table element to canvas 3. add timefield as one of the fields -canvas still displays it in the default format.
1. download from page 2. extract 3. run
1. load a csv file with crlfs in one of the fields
1. open kibana monitoring app 2. click on `overview`, `nodes` or `indices`.
the `ccr` tab is here.
phofimage 3. click on `jobs`.
1. start 2 elasticsearch nodes 2. read the logs.
when you close all nodes but one, no more logs like this
1. install elasticsearch 7.0.0-beta1 2. install kibana 7.0.0-beta1 3. see that when kibana starts up, the following warning message appears: phofcode elasticsearch version from `get /` phofcode
1. install elasticsearch 7.0.0-beta1 2. install kibana 7.0.0-beta1 3. see that when kibana starts up, the following warning message appears: phofcode elasticsearch version from `get /` phofcode
1. start up kibana 2. load the uptime app with no data
there is no step to reproduce.
sometimes, passing from dashboard to tsvb editor the query bar is shown.
1. create a dashboard, discover or visualization filter using a valid scripted field 2. update the field's script to return a different valid value.
3. refresh the dashboard/discover view/visualization
1. add multiple filters to the filters bar 2. resize your window manually by dragging it smaller
1. i don't think this is related to the fact that i upgraded from 6.7.0 2. use ie11 on windows 10 to open kibana and navigate to discover with a time-based index.
3. no timepicker sometimes when i refresh i get this so it could possibly be related?
1. create a remote cluster index pattern 2. discover -> select a keyword field in the "selected field" section with multiple values
1. using microsoft edge browser on windows 10, open kibana 2. load sample ecommerce data 3. go to maps app and open `[ecommerce] orders by country`
1. checkout the 7.0 or 7.x branch as it 's required for the dataset provided 2. download the sample dataset: phofurl 3. start elasticsearch with the provided dataset.
example: `yarn es snapshot 4. browse to upgrade assistant: phofurl 5. expand "index created before 7.0".
you will notice panel is cut off, hiding pagination.
1. create an elaticsearch cluster which is relatively idle and enable stack monitoring for it.
2. navigate to an elasticsearch node page inside of stack monitoring 3. observe that the values in the gc count may be < 1.
1. click create on tsvb 2. try to change the index pattern and timefield 3. kibana logs the error which is not formatted
1. enable stack monitoring app 2. navigate to any page which contains a time-series graph 3. quickly, before data flows in, hover over the left-hand side of a graph and observe the values in the legend for that graph.
1. load sample data and use kibana sample data ecommerce 2. keep dragging and dropping so you can navigate to one document in the histogram - my document id is snlp6ggbiggdmnhk3d3j 3. go to advanced settings and change the time from browser time to portugal 4. ensure the doc in discover is getting displayed with correct timerange 5. click on save share and print csv csv doesn 't print with the same timezone as advanced settings.
1. run elasticsearch 6.6.0 2. generate a plugin and set the following answers phofcode 3. after the build is finished, go to the plugin and start it phofcode
1. create vertical bar chart 2.date histogram on x axis 3. splis series on geo.src, enable other bucket 4. in legend select the other bucket and filter it
1. load a csv with a lot of columns into the visualiser 2. open `override settings` 3. try to pick a field
1. upload a csv file with a lot of columns 2. override settings 3. pick a field, like date
1. install 6.7 kibana and elasticsearch and load data, check upgrade assistant 2. upgrade elasticsearch to 7.0, check upgrade assistant again 3.
1. open the stack monitoring applicaiton 2. in the overview page for elasticsearch, select and graph and brush across it to sub-select a time period.
3. repeat step 2 a couple times, most likely between three and six.
1. input several lines of text into the sample data field.
2. input a grok patter in to the grok pattern field.
3. add some custom patterns to the custom patterns (i am testing custom patterns) field.
4. click the simulate button.
5. observe: the "structured data" field only contains structured data from _first_ line of text in sample data.
_all_ of inputs in sample data _will_ be parsed correctly - but only if they are _first_ line.
1. click on a legend entry of a visualization 2.
1. management -> index patterns 2. create index pattern 3. wait for timeout
1. install es 5.5 or 5.6 2. create and run an ml job 3. do a full cluster restart upgrade to 6.7 4. install kibana 6.7 5. run the migration assistant and reindex all indices that were created in 5.x 6. upgrade to es 7.0 / kibana 7.0 7. run the migration assistant and click on the reindex button of the `.reindexed-v6-ml-state` index 8. note that reindex procedure for it _doesn't_ say it's going to pause and resume ml jobs
1. navigate to the anomaly explorer 2. click to the left of the `view by` swimlanes 3. error page appears
1. select the time-period jan 2 to jan3 2.
1. apply phofurl or update some typescript code to use an `async import()` 2. attempt to load the code in the browser 3. see the error in the console
1. see steps 1 and 2 in #30739 2. create an alias field for the `geo_point` field phofcode 3. refresh index pattern in kibana 4. do the things in maps
1. create mapping with dot-including field phofcode 2. add doc (point is somewhat near nyc) phofcode 3. create index pattern in kibana 4. do maps stuff to try and view it
1.install kibana and elastic search 2.have an index that doesn't use the default @timestamp field 3.go to timelion help and validate config
1. add global flights sample data 2. make sure you can view the data 3. delete one of the data sets using index management 4. go back to home and add sample data set for the deleted index pattern 5. kibana doesn 't really add the and displays this in dashboard please note this is happening for all sample and you can reproduce it using remove button for deleting index pattern on sample screen <img width="1440" alt="screen shot at 12 27 29 pm" src=" phofurl
2. aggregate the x-axis as a date histogram 3. aggregate the y-axis by terms
1. download default distro of elasticsearch and kibana from staging 2. start kibana and elasticsearch 3. task manager starts logging errors
1. launch test_runner 2. launch test for markdown 3.
`no variables available for the selected data metrics.`
1. configure a pipeline 2. configure logstash for monitoring 3. hover mouse pointer over "number of nodes" in monitoring: clusters -> cluster_name -> logstash -> pipelines
1. kibana plugin that registers a task type and schedules a task.
see the demo repo 2. schedule a task that returns a promise that never resolves.
test run function: phofcode 3. eventually kibana will repeatedly log: phofcode
1. export visualization and saved search 2. import json file 3.
1. create a filter by clicking a "filter for value" or "filter out value" icon 2. edit the filter 3. click "edit as query dsl" - there doesn 't seem to be any way to "save" my dsl.
4. click on the filter again, and the dsl i entered has not been saved.
1. navigate to as above 2. look at bottom of page, the shard legend no longer has a display of the location and state of the shards of the index
(make visual builder) add 3 datas (today, yesterday, 2 days ago) 2. in 'yesterday' data, set offset to '1d' and in '2 days go' data, set offset to '2d' 3. hover mouse and check date
1. fire up kibana 6.6.0 2. go to rollup jobs 3. try clicking the link to documentation.
1. install es/kibana 2. add element to canvas workpad, i was not doing anything at the time, the page was idle and i came back and it had an error.
uncaught typeerror: cannot read property 'prop ' of null ( phofurl version: 6.7.0-snapshot build: 19845 error: uncaught typeerror: cannot read property 'prop ' of null ( phofurl at window.onerror ( phofurl at window.onerror ( phofurl <img width="1596" alt="screenshot at feb 06 src="
1. set `xpack.apm.enabled: false` 2. kibana crashes: phofcode
1. have kibana 6.7.0 on the add sample data page 2. upgrade elasticsearch from 6.7.0 to 7.0.0 3. click add on one of the sample test sets (i used 4. check elasticsearch.log for error like this; `failed to parse mapping [_doc]: root mapping definition has unsupported parameters: [doc : {dynamic=strict, (full log below)
1. install kibana and elasticsearch 6.7.0 2. upgrade elasticsearch to 7.0.0 3. check kibana status page phofurl
`$ git clone phofurl 2.
`$ git checkout 6.6` 4.
`$ nvm use` 5. yarn kbn bootstrap` 6. node scripts/generate_plugin my_plugin_name` 7. cd 8. yarn test:server`
1. find a dataset with `long` fields in discover 2. click the (+) loupe to filter on a field of datatype `long` 3. edit the filter
1. create a new "coordinate map" visualization 2. configure a custom wms server for this visualization, e.g.
wms url: phofurl , wms layers: osm-wms , wms version: 1.1.1 , format: image/png 3. change the "wms attribution" setting e.g.
to "test 1" and apply the changes 4. change the "wms attribution" setting e.g.
to "test 2" and apply the changes the attribution text is now " openstreetmap contributors, elastic maps service , test1, test2"
1. create a date histogram based on a date value 2. set the interval manually 3. change time span on the time picker
1. open the advanced settings page in kibana 2. attempt to set any of the notification lifetime settings to "infinity"
1. add any of the sample data sources and objects 2. delete the index pattern for that sample data 3. go to the dashboard created by the sample data
install es/kibana and load beats dashboards , some of the visualizations are getting impacts filebeat and metribeat error: could not locate that index-pattern-field screenshot from phofimage
1. open management-index patterns 2. edit the `@timestamp` field and set "relative date" as the "format" 3. open the discover tab 4. save the current view as a new saved search.
5. click on share - csv reports - generate csv
1. navigate to the waffle map 2. start typing in the filter bar to trigger the suggestion popup 3. observe the waffle map/table view switcher
install es/kibana load sample dashboards create another space, go to that space and load sample data try to load dashboard for that sample data when loading visualization - the typeerror occurs and the visualization does not open uncaught (in promise) typeerror: cannot read property 'create' of undefined at (commons.bundle.js:4) at trycatch at generator.invoke [as _invoke] at function) [as next] ( phofurl step (commons.bundle.js:4) commons.bundle.js:4 new promise (<anonymous>) (commons.bundle.js:4) (commons.bundle.js:4) hi screenshot from phofimage
1. stop elasticsearch and kibana, if they are running 2. start kibana without starting elasticsearch 3. after several plugins report no living connection, you'll see the message from `task_manager`
1. open kibana in a new tab or refresh the kibana webpage.
2. create a new region map visualization.
3. as soon as the ui is available, switch to the options tab.
4. wait for select boxes to switch to blank options.
1. load sample e-commerce data 2. open `[ecommerce] promotion tracking` with type `visual builder` 3. open `markdown` tab 4. write in `markdown` text editor text: phofcode
1. have a apm service with two or more transaction types 2. create the first ml job for the first transaction type using the integrations context menu in apm (integrations -> enable anomaly detection -> select the first transaction type at drop down menu -> click "create new job") 3. create second ml job for second transaction type using integrations context menu in apm (integrations -> enable anomaly detection select second transaction type at drop down menu click "create new job")
1. install `polyglot` safari extension and enable it 2. start kibana and hit `discover` 3. start entering a text in the search field.
1. create rollup job with `asia/tokyo` date_histogram time zone 2. run job 3. create rollup index pattern from new rollup index 4. create area chart visualization using that rollup index pattern 5. observe that no visualization is rendered and error appears in console the same error occurs when sending the query from console: image phofimage
1. go to infrastructure ui 2. click on group by 3. click custom field 4. don't choose a field but submit the form.
the same as describe the bug
1. create a field formatter for a string, with the format "truncated string" 2. set the field named "field length" to "1.2" 3. view a visualization that makes use of the formatted field.
4. observe that the formatted values are all literally "..."
1. start kibana 2. navigate to infrastructure ui 3. add a grouping 4. remove groping via x on badge 5. watch it just open the context menu instead.
1. install es, kibana, metricbeat and dashboards 2. go to dashboard metricbeat golang overview an error is thrown post phofurl 500 (internal server error) (anonymous) @ sendreq @ serverrequest @ processqueue @ (anonymous) $digest (anonymous) (anonymous) settimeout (async) browser.self.defer $evalasync scheduleprocessqueue then chaininterceptors $http $http.
(anonymous function) commons.bundle.js:4 handler commons.bundle.js:4 commons.bundle.js:3 step __awaiter commons.bundle.js:3 commons.bundle.js:3 commons.bundle.js:3 complete vendors.bundle.dll.js:32 delayed vendors.bundle.dll.js:32 settimeout (async) debounced vendors.bundle.dll.js:32 promise.then (async) embeddedvisualizehandler commons.bundle.js:4 commons.bundle.js:4 promise.then (async) _callee$ trycatch invoke prototype.
(anonymous function) step componentdidmount hi fi gi ii xg li mi ti.render wi render $digest settimeout browser.self.defer $evalasync scheduleprocessqueue $$resolve doresolve promise.then $$resolve resolvepromise deferred.resolve promise.resolve get processqueue $digest foreach firestateorurlchange dispatch elemdata.handle error: error: max buckets exceeded: of 2000 allowed.
choose a larger interval or a shorter time span step rejected promise.then step __awaiter complete vendors.bundle.dll.js:32 delayed settimeout debounced embeddedvisualizehandler _callee$ trycatch invoke prototype.
(anonymous function) componentdidmount hi fi gi ii xg li mi ti.render wi render $digest browser.self.defer $evalasync scheduleprocessqueue $$resolve doresolve $$resolve resolvepromise deferred.resolve promise.resolve get processqueue foreach firestateorurlchange dispatch elemdata.handle screenshot from phofimage
1. install kubernetes kubeadm cluster v1.12.3 2. install metricbeat kubernetes yaml v.6.5.3 3. open infra ui 4. open metrics of each host
1. download kibana from the website 2. disable a plugin in `kibana.yml` 3. start kibana
1. install es/kibana 2. install web traffic sample data 3. go to maps -> zoom into a certain region, save as new map, sometimes the error happens.
typeerror: "this._checker is undefined" tcomponentwillunmount phofurl thh phofurl tih phofurl thi phofurl tfi tgi tii txg tli tmi trender twi tji t3290 tbroadcast tdestroy tstop tstop tstopcoresystem tonfirsterror tfatalerrorsservice t_next tnext t_next tnext t_next tnext tnext tadd tfatalerror tonerror error: "typeerror: this._mbmap is null ( tonerror navigated to error: typeerror: this._mbmap is null ( typeerror: this._mbmap is null[learn more] unhandled promise rejection typeerror: "resizechecker must be constructed with a single dom element."
tvalidateelarg tresizechecker tassignsizewatch t_callee$ ttrycatch tinvoke tmethod tstep tstep trun tnotify screenshot from phofimage
1. install es/kibana/heartbeat 2. load heartbeat dashboard
1. install es/kibana/logstash 2. enable monitoring 3. go to, logstash pipeline - click on the table to sort for example will throw an uncaught error uncaught typeerror: cannot read property 'dateformat' of undefined at [as xvalueformatter] (monitoring.bundle.js:2) at sparkline.rendertooltip (monitoring.bundle.js:2) at sparkline.render (monitoring.bundle.js:2) at ah $g eh ai bi fi gi tooltipxvalueformatter @ monitoring.bundle.js:2 rendertooltip @ monitoring.bundle.js:2 render @ monitoring.bundle.js:2 ah @ $g eh ai bi fi gi ii xg enqueuesetstate g.setstate onhover monitoring.bundle.js:2 debouncedonhover.leading debounced vendors.bundle.dll.js:32 dispatch elemdata.handle trigger (anonymous) each each trigger triggerclickhoverevent commons.bundle.js:3 onmousemove commons.bundle.js:3 dispatch elemdata.handle screenshot from phofimage
1. install es/kibana 2. enable monitoring, change date range, it flashes this error uncaught error: minified react error #170; visit phofurl for the full message or use the non-minified dev environment for full errors and additional helpful warnings.
at e at object.updatecontainer at at object.unbatchedupdates pg tethercomponent._update hi fi e @ updatecontainer @ (anonymous) @ unbatchedupdates @ pg _update componentdidupdate hi fi gi ii bc ee screenshot from phofimage
1. open a kibana tab 2. under `visualize and explore data` - click on `machine learning` 3. select a job and click on `anomaly explorer` tab 4. if no data shown due to time range defaulting to last 15 minutes - select job dropdown on top left and ensure `also apply time range` checkbox is checked then click `apply` 5. see that page elements load except for swimlanes - which are empty (both `view by` and `overall`)
i can reproduce this issue in trial licence: yarn es snapshot --license trial 1. open management -> index patterns page 2. press on the 'create index pattern' drop-down and select 'rollup index pattern (beta)' option image phofimage
1. create a date histogram using a terms agg as a sub aggregation.
image phofimage 2. switch from `bar` to `line` in `chart type` 3. switch from `normal` to `stacked` in `mode` the `true` line is drawn incorrectly as `100%` normal mode: image phofimage stacked mode: image phofimage
1. kibana management 2. select kibana saved objects 3. select a few objects to delete 4. click delete
1. checkout master branch 2. yarn kbn bootstrap 3. git clone phofurl 4. modify the package.json to have matching versions of kibana, node and yarn with kibana.
5. run the step 2 command again under kibana_calendar_vis/ 6. run yarn start under kibana_calendar_vis/
1. create a new threshold in management watcher 2. select `*` for `indices to query`
1. goto kibana -> management -> advanced 2. change your timezone (might have to be set to browser to start with).
3. go look at some different visualizations.
i'm not sure what the common feature was between the ones that failed and the ones that didn't.
1. add xpack.graph.enabled or any xpack.service.key to a service.yml file and the docker container will not run
1. add a shape with a border to canvas in chrome 2. add the same shape with the same border to canvas in ie11 3. observe the different border thickenesses
1. load canvas in ie11 2. hold down `shift` and click on an element.
3. observe all of the highlighted text.
1. install kibana default distribution.
i used a w2012 vm, but i don't think the server matters, only the browser 2. use ie11 to install all 3 sets of sample data 3. use ie11 to switch between the workpads for a few minutes, clone a workpad, make tiny edits, etc.
eventually, ie just locks up.
it might restart on it's own, or it might pop up an error message that a script on the page is not responding.
1. create new time series visual builder visulalization 2. change aggregation to "static value" 3. enter or other suitably large value 4. observe error given back saying to use 5. try and use 6. value is reset back to 0.
1. run the following in dev tools to setup some example indices: phofcode 2. create a dashboard with two metric visualizations with a simple count aggregation, one for each index.
3. add a filter on one of the fields, notice that both visualizations get filtered 4. enable the advanced setting 5. go back to dashboard and create a filter again.
notice both visualizations are still getting filtered.
1. create any visualization 2. hover over tooltip 3. graph flickers
1. add a time filter component 2. add any other element (like a datatable) 3. move the datatable once 4. undo the action by navigating back a page or hitting `ctrl+z` 5. observe the error in the console.
6. hit undo again 7. observe filter returning back to normal.
8. redo by navigating forward or hitting `ctrl+shift+y` 9. observe error again in console.
1. with multiple workpads loaded (sample data is good for this), load the one at the bottom of the list 2. open the workpad list again (home page, or modal) 3. the workpad you just opened is now at top of list, with a new updated timestamp
1. generate a report 2. use ie11 to go to management > reporting 3. click the info `i` icon on a report
1. using ie11, create a new input control 2. try to set the index pattern field with the mouse 3.
1. install elasticsearch on a centos 7 2.
`systemctl status kibana` should show elasticsearch running 3. restore original user/group of kibana by using `rpm --setugids kibana` 4.
`systemctl status kibana` shows that kibana fails to start
1. authenticate to kibana and close your browser 2. change password in ldap authentication backend 4. wait some time for ldap resync ( to be sure wait >24h) 3. re-open kibana in your browser 4. basic-auth prompt comes up
1. go to kibana infrastructure tabe 2. screen flicker when you group by machine type 3.
1. send nginx data to elasticsearch for a host 2. visit metrics page for host 3. notice there is no nginx metrics
1. add a deprecated setting to the `kibana.yml`, e.g.
`yarn start` the kibana server 3. observe the kibana process
1. install oss build from 6.6.0 2. in advanced settings set to on 3. load sample flights data 4. open `[flights] destination airport` coordinate map visualization 5. zoom in about 10 levels, try more, look for message, keep panning map while you zoom so you can tell you're on the map vs blank ocean.
1. on a 6.6.0-bc1 kibana add a remote cluster to a 6.5.4 cluster.
2. on a 6.6.0-bc1 kibana add follower index for metricbeat-*.
3. on 6.5.4 cluster, start metricbeat 4. on 6.6.0-bc1 kibana you will observe that the follower index is not created.
1. add remote cluster with http port, e.g.
localhost:9200 2. the ui shows that it failed, but gives you no indication why
1. phofurl 2. vary the browser zoom level
1. es/kibana cloud 2. add sample data - ecommerce 3. go to average sales price and click on side menu, error is thrown and shows many times in the console typeerror: "event.datum is undefined" tfilter phofurl tcanfilter phofurl tfn phofurl line 434 > function:4:229 tdigest phofurl tevalasync ttimeoutid
1. install es, kibana, and metricbeat with default configuration.
2. start up es and kibana.
3. run `./metricbeat enroll phofurl foobar`
1. create a boolean scripted field 2. create a filter on it for the value `false` using the add filter ui 3. notice the text in the filter pill that gets created
when creating the graph, a filter checking the existence of a field was applied, and the graph renders as expected.
when the visualization is placed on a dashboard, filter is ignored and 'unknown' entries are drawn like they were before filter was applied.
1. generate transactions using the rum agent (by default it has some agent marks)
1. resize firefox to a small window 2. add a new layer to the maps plugin 3. choose a data source and layer then click next 4. try to scroll to see all layer properties
1. view any host log in logs ui that contains events as described above.
this breaks streaming of logs, because the latest event in the stream is a future date.
1. create a short url except for default space phofimage 2. access to the link 3. doesn't work phofimage
1. open the single metric job creation page 2. refresh the page (f5/cmd-r) 3. attempt to create a new job.
the chart loading spinner doesn't disappear.
visit the iot or canvas demos in the sa demo env (ping jamie.smith on slack for the address of them if you don 't know them)
1. create an area chart with a date histogram and then do a split series with terms on that.
2. click on the terms in the legend.
1. search with a daily index pattern over multiple days time range (would execute sequential _msearch requests).
2. d3 visualization would throw an exception for invalid negative width
`curl -xpost -h "kbn-xsrf: header" " phofurl 2.
1. start a gcp instance of centos 7 2. download kibana .tar.gz and untar 3. try running the binary for the headless browser directly, using the command-line parameters that kibana reporting uses internally: phofcode
1. create a role with `cluster:monitor` and 2. create a user with that role, and log in as that user 3. this user can 't create a `metricbeat*` index pattern and the index pattern ui won 't even show that such an index exists 4. but the index management page does show all indices.
so it seems like this leaks information.
5. index management page shows this error if there are any indices that this user doesn 't have privs on; image phofimage
- ingest data on a regular interval (like every 5 minutes) - create a visualization with labels and add it to the dashboard - show/hide the labels on the visualization - notice that a request was made for this visualization that doesn't match the dashboard request for other visualizations.
thus making what it displays out of sync from every other visualization on dashboard.
1. latest master (kibana) 2. try to start it up on windows/ie 3. see error page
1. load sample data or create other indexes 2. click on index management no indexes displayed and an error toast appears on the bottom right
1. build system containing apache2 and nginx indices, with a `filebeat-*` index pattern 2. edit apache2 manifest.json e.g.
add an extra comma to make json invalid 3. in ml app, create new job and select `filebeat-*` index pattern
1. go to management, then watches 2. add a new advanced watch 3. click on "simulate" tab, then "condition overrides" section 4. you can see a checkbox alone, without its associated label
1. i create a user with a role, where he can only write in kibana space "space1" (and cannot do anything in other spaces) 2. i go to dev tools and do a `get .kibana/_search` => i get all documents whatever the space 3. then i put a document in .kibana index with another "space2" namespace, and it works
1. click to visualize 2. click to visual builder 3. create a new visualization
1. add a data table to a workpad.
2. change the data source to es raw documents.
3. try to select anything from the index, sort field or fields dropdowns.
the data that i had installed were all 3 of the demo data indices.
1. create an index template with a placeholder alias.
second example on this page: phofurl 2. create a rollover-enabled lifecycle policy and assign it to this template.
3. create an index that matches the template and check for the policy error.
1. create and index policy with \'?"
or some kanji in the name.
2. apply it to an index.
3. select the "view indices linked to the policy" for your policy.
1. install web logs sample data set 2. open dashboard `[logs] web traffic` 3. notice how the vega visualizations are blank
1. click on canvas in the upper right menu 2. see blurry loading screen
1. clone 6.x branch and yarn bootstrap, yarn start 2. access gis app from "maps" link 3. display error message
1. create a test_space role - give it all in cluster privileges, give it all on logstash index and all on space b 2. create an user test and assign the test_space role 3. logout and login with user test 4. navigate to index management page under management 5. kibana shows index not found exception
1. set an number argument to a string value, like "cats" (font size on the plot function in canvas is one example).
2. the value of `args` passed into the function is the string `"nan"`
1. create a multi-metric gauge 2. add to dashboard as wider, horizontal panel 3. try to resize as vertical panel
1. install kibana (or the others), or look at the packaging: phofurl
1. create a co-ordinate map 2. uncheck desaturate tiles option 3. save the map and click reporting 4. reporting fails <img width="1440" alt="screen shot at 1 59 07 pm" src=" phofurl
1. load beats dashboards and start a beat 2. open one of the dashboards and try to print a report of it 3. kibana tells the user to save the dashboard before printing it
create a random watch, for instance this one triggered every 10 min: phofcode
1. open maps 2. add tms xyz layer 3. add ` phofurl as url 4. click next 5. click cancel 6. crash
1. open maps 2. add layer 3. select datasource geohash aggregation -> show as point 4. goto vector style 5. disable dynamic fill 6. click on either fill color or line color
1. create a service that only collects metrics but does not report transactions or errors (spans could be reported) 2. visit apm ui and note service is not listed though it is creating metric documents
1. load the ecommerce sample data 2. load the ecommerce workpad 3. open the page manager
1. bootstrap kibana 6.4 2.
`node scripts/generate_plugin my_new_plugin` (target 6.4.4, no to all other options) 3. add a `vistypes` plugin in the index.js `uiexports` 4. add `tsconfig.json` to root plugin according to documentation (extends 5. add `random.ts` file into a public folder and attempt to import react (`import react from 'react'`) 6. error in resolution: `cannot find module 'react'` (as it does not exist in plugin node_modules but ts cannot find the kibana node_modules) 7. troubleshoot with `tsc --traceresolution` 8. notice that `kibana/node_modules` is never scanned (just `kibana/react`)
1. create a dashboard with a visualization.
2. setup elasticsearch behind a proxy and send the /_msearch path to unreachable address to make sure requests remain in-flight till they timeout 3. open up the dashboard and resize the browser.
1.download kibana 6.4.2 from git 2.follow contribution.md to setup the development environment.
3.create a custom plugin using node scripts/generate_plugin <plugin_name>
1. i don't know if/why i'm only seeing the errors in the backport tool `node scripts/backport.js` 2. i did change a group policy on my windows machine to enable long paths as described here and rebooted; phofurl 3. i tried the backport tool in windows powershell, cmd, and git-bash, and get the same error in all 3.
1. add some elements to the workpad 2. group the elements 3. resize the group
1. i haven 't reproduced this locally yet, but it has failed several times in integration-test 2.
1. setup new cluster on elastic cloud 2. setup kubernetes 3. setup metricbeat as per phofurl
1. open any visualization 2. open the inspector (data view) 3. resize the width of the browser to less than 768 px
1. create a remote cluster and edit the same and delete the cluster after clicking remove in the confirmation dialogue box 2. the cluster gets deleted successfully, but the confirmation dialog box which appears after deletion, has a typo - `removeed` <img width="429" alt="screen shot at 8 44 41 pm" src=" phofurl @cjcenizal @jen-huang
1. open debugger console 2. load kibana (or canvas once #27175 is fixed) 3.
1. login as user a 2. write some code in ide 3. log out 4. log in as user b 5. view commands from user a in dev tools ide
1.index a document 2.create a control options list and add it to a dashboard.
3.index another document with a new value for the category in your control options.
once the refresh interval passed, this new value does not come up in the drop down list.
although the rest of charts updates fine with new category.
1. test the following vega visualization (it fails) phofcode 2. test the following vega visualization (without the `bar` mark) phofcode 3. test the following visualization (only `bar` mark): phofcode
1. yarn kbn clean 2. node scripts/kibana --dev
1. create a space b 2. click on canvas 3. canvas page says loading
1. create a space b 2. load sample data 3. open the dashboard - you cannot view visualizations 4. try to create a visualization - nothing happens
1. filter saved objects 2. export filtered saved objects 3. import into other space 4. import all visualizations of type, but not filter
1. open index management page.
2. click on the index management breadcrumb.
1. open dev tools 2. run a simple query 3. open the history tool at the top right of the page
1. git checkout tags/v6.5.0 2. yarn kbn bootstrap 3.
./bin/kibana --dev 4. open browser at phofurl 5.click dashboard on the side bar 6.click on "create new dashboard" button 7.click on "add" button 8. error page
1. embed kibana dashboard in an iframe loading in other domain 2.enable block third party cookie and site data ( phofurl ) 3. error occurs and no dashboard is loaded
1. i don 't know how much of this is actually required to reproduce the problem, but i 'm describing my current setup.
1. configure 2 elasticsearch nodes to not be part of the same cluster by setting different cluster.name.
since i run them on the same machine i also give them different ports; phofcode 3. configure cross cluster search (note that i think this persistent "search" setting is now deprecated and should be replaced with persistent "cluster" setting in 6.6) by posting this to the local "admin" node; phofcode 4. enable security 1. load some test data like makelogs (which by default writes to a logstash index name) into both clusters 1. create a role for logstash_reader with privs on logstash* also create that role in remote cluster create a user with kibana_user role and that logstash_reader role.
log in kibana as that new user and try create an index pattern (note: even though you may only want have data on remote cluster, you may have have data in your local cluster so kibana ui will let you an index pattern.
this is apparently issue 6.6 was addressing which can lead this error.
1. create a horizontal bar chart with count on the y-axis 2. set the x-axis to use a filters aggregation, where some filters are currently empty 3. add a split series aggregation on the x-acis
1. create a scripted field for an index pattern with the following painless code: for(int i=0; i < 2;i++){} return "test" 2. create a visualization of that field (e.g.
a tag cloud) and add it to a dashboard 3. click on one of the values to add filter to the dashboard 4. an error bar flashes up with null pointer exception
1. create a kibana visualization, using filters to split the buckets 2. in advanced -> json input, add `{"other_bucket_key": "label_here"}` 3. observe that the other bucket does not materialize in the kibana visualization
1. install elasticsearch and kibana w/ basic license 2. add sample data: web logs or ecommerce 3. open corresponding canvas workpad 4. observe the error on the workpad.
click into the element to see error message: expression failed with the message: [esdocs] > unexpected error from elasticsearch: [1:25] [sql/query] query doesn 't support values of type: start_object details: { "error": { "stack": "error: [esdocs] > unexpected error from elasticsearch: [1:25] [sql/query] query doesn 't support values of type: start_object at at <anonymous> at "message": "[esdocs] > unexpected from elasticsearch: [1:25] [sql/query] query doesn 't support values of type: start_object" } }
1. load a visualization that includes a discover search 2. load test code via the browser console: phofcode 3. use the tables paging buttons to force a refresh 4. observe ~101 lines logged to the browser console using an alert() in the test pauses things with each iteration that seems to show it occurring as each row is rendered
1. have an expired trial license 2. go to management > index patterns 3. observe that the create button and list are not displaying
i managed to nail this down for you.
in the video of the issue now only in the table vis.
what show is the exact same vis as it is in 5.6.1 vs 6.5.1. on exact same index 's in each.
1st i show 5.6.1 with a alt f5 to refresh data to show time to render with task manager up.
then i jump into 6.5.1 using same data and visual but this time i step thru different metrics and show task manager as you will see it gets worse and worse as add columns.
believe it has do with average buckets, to point where it will hang, sum buckets are working fine.
then jump back 5.6.1 and exact same adding of columns so you can get a visual of time took in 5.6.1. both of my deployments are also using sizing 8gb 2 zones.
1. startup a working kibana and elasticsearch 6.5.2 environment 2. navigate to the dev console and use `delete .kibana*` 3. try to load timelion 4. this will try to load ` phofurl which will now produce a 400 bad request with a response body: application privileges must refer to at least one resource"}`
1. load canvas 2. restart the server 3. see error in browser console once the server is up
1. create a space, and assign a custom pdf logo in that space 's advanced settings.
2. create role with access to the space created in step 1. do not grant access to the `.kibana` index.
3. create user, and assign role created in step 2 along with the `reporting_user` role.
4. login as this user, and generate a pdf report
1. i created a nurse_s_health_study index: phofcode 2. i have this query in kibana dev tools.
here is the screenshot before i run the query: kibanabefore phofimage resourcesbefore phofimage processbefore phofimage 3. i click the green play button.
here are the screenshots several seconds after clicking button: kibanaafter phofimage resourcesafter processesafter in resources tab, can see chrome process memory steadily going up.
(now it hovers between 1.8 and 1.9 gib).
1. have a working kibana 6.3.0 instance 2. update with rpm package the current package 3. start kibana server
1. upgrade from elastic stack 6.4.2 to 6.5.1 2. login to kibana, and go to monitoring -> logstash nodes 3. see that the top summary stats bar is not being displayed correctly
1. create a region map 2. select the option _group other values in separate bucket_ and press apply 3. kibana doesn 't handle it and displays "ensure that each of these term matches a shape on that shape 's join field: __other_"
i have a basic auth proxy in front of kibana, and a basic auth proxy in front of elasticsearch.
each proxy has a _different_ username and password: for kibana, `kuser`, and elasticsearch `euser`.
i have set kibana to strip my auth header via a null requestheaderswhitelist, per the documentation, and use customheaders to supply the correct base64 encoded password for the elasticsearch proxy: phofcode
1.just navigating in the dashboard through ie11 2.
1. install 2. create a workpad, and add a data table 3. choose index and "timestamp" and "destcountry" fields 4. add a time filter 5. set column setting to timestamp 6. choose any period 7. no data is shown in data table
1. define two pipeline aggregations as metrics on the same underlying bucketing aggregation 2. kibana will ask both aggs to be calculated
phofcode 2. you can see that you get no `urlid` in the response.
phofcode 3. the curl version works.
1. open discover 2. select a time range in the timeline 3. observe the results are not updated.
if you open console, there is an error shown
1. create/open canvas workpad 2. add another page if the workpad only has one 3.
1. start kibana default distribution with monitoring initially disabled.
2. create a user with kibana_user role.
this user could have other roles, as long as they don 't have superuser, cluster:monitor, or cluster:manage.
3. log in as that user and navigate to monitoring
1. visit apm setup instructions 2. start an apm server with no agents 3. note agent check passes
1. start kibana `yarn start` 2. visit `/api/status` phofcode
1. on a multi-tenant cluster, with role-based index restrictions 2. use a different `kibana.index` directive (e.g., `kibana.index: ".kibana-tenant4"`) 3. upgrade from 6.4.3 -> 6.5.1
1. create date histogram visual in 6.1.2 2. upgrade to 6.3.4 3. visual does not work 4. request to elasticsearch failed: or negative time interval not supported},
1. open expression editor 2. type `| pointseries` to get the function hint popup for `pointseries`.
3. click the hyperlink in: `currently we differentiate measure from dimensions by looking for a tinymath function.`
1. generate a vertical bar visualization with a split series including blank "" values.
2. mouse over the legend for non-blank values and see highlights applied.
3. mouse over the legend for the blank value, all highlighting disappears.
1. clone repo on windows machine 2. run yarn kbn bootstrap i am getting the following error: error command failed.
exit code: 1 command: node install.js arguments: directory: output: downloading phofurl saving to received 781k... received 1568k... received 2352k... received 3136k... 3499k total.
extracting zip contents if (this._error || this._hasdata) throw new error("unable to resolve or reject the same promise twice") error: unable to resolve or reject the same promise twice at promise.reject at request.<anonymous> at emitone (events.js:116:13) at request.emit (events.js:211:7) request.onrequesterror ode_modules equest equest.js:877:8) emitone (events.js:116:13) clientrequest.emit (events.js:211:7) (_http_client.js:401:9) emitone (events.js:116:13) tlssocket.emit (events.js:211:7) info visit phofurl for documentation about this command.
[bootstrap] failed: error: command failed: yarn install --non-interactive makeerror promise.all.then.arr <anonymous> process._tickcallback error command failed with exit code 1.
1. create a test index with just 2 documents as follows: phofcode 2. create its index pattern `test*` 3. create a new canvas workpad 4. add a pie chart element for the pie chart, configuration is as follows: - in data, select: - elasticserach raw data - index: `test*` - query: `*` sort field: `string` fields: `string`, `string.keyword`, `with.dot`, `with.dot.keyword` in display, select: slice angles: count of any of the possibilities (it does not matter) value: select, one by one, all of the possible 4 values only `string` shows a pie chart with 2 values, 50% each.
all of the other ones show single bucket, `undefined`, 100%.
1. install kibana 6.5.0 2. upgrade to kibana 6.5.1 3. systemctl status kibana phofcode guessing something within run_fpm.js phofhyperlink section though i do not know fpm and this javascript interface enough to know for sure if this is possible
1. go to the "host" view.
2. enable auto-refresh 3. point and drag a graph to "zoom" 4. graphs go back to showing the "unzoomed" after a couple of seconds when auto-refresh runs
1. go to visualize / new visualization 2. select pie chart type 3. add two aggregations 4. expand both aggregations 5. scroll down till you see the "add sub-buckets" button 6. try to drag the second aggregation
1. go to visualize / new visualization 2. select a chart type 3. make some error in the configuration (e.g.
split series before splitting charts) 4. hover the error symbol next to the disabled "apply changes"-button
1. create a visualization, e.g., a pie chart.
save it and export it.
2, edit the resulting json file and change the visualization type to "dashboard".
3. import the visualization back into kibana
1. create an index that has a field "message" mapped as text 2. create a second index that has a field "message" mapped as object 3. create an index alias that points to the two newly created indices 4. try to use this index alias as data source for a canvas visualization
1. provision a new cloud cluster 2. open kibana 3. try to create a role 4. click the link
1. log some records that include the field name "$error" and subitem "message" 2. choose from drop-down add filter menu: $error.message 3. select relationship 'is ' 4. fill in a string value that should match some $error.message fields.
1. go to visualization page 2. click the add button
1. configure filebeat to enable monitoring 2. verify in kibana you are seeing increments in "output bytes"
1. load metricbeat dashboards 2. go to metricbeat host overview 3. failure is occurring on the disk io(bytes) traffic: the request for this panel failed.
java.lang.integer cannot be cast to java.lang.double
install kibana 6.5 navigate to dashboard click pie or heatmap visualization filter is not applied to underlying search
i can't reproduce this on demand but usually if i leave it running for 20-30 minutes it will happen.
1. create a space 2. create a "short url" permalink to some view phofcode 3. after opening the permalink, kibana redirects to default space phofurl
1. create a visualization with any pipeline metric on a date histogram 2. set a small custom interval, like 1m 3. expand the timerange to a few days so the time interval will be scaled
1. create new table vis using the sample logs data set (or `node scripts/makelogs`) 2. under 'metrics ' select a sibling pipeline agg, e.g.
'average bucket ' 3. under 'buckets ' > split rows > terms aggregation > field geo.src 4. add sub-buckets > split rows terms aggregation field machine.os.keyword 5. click 'apply changes ' 6. now go to options check "show metrics for every bucket/level" or "show partial rows" (or both) so that the disabled "calculate metrics for every bucket/level" is checked.
7. click 'apply changes ' 8. boom (kibana gets a 400 back from elasticsearch).
sample error output from the browser console: phofcode some data from the es logs that corresponds to request above: phofcode
1. bug_step_1 1 phofimage 2. bug_step_2_2 phofimage 3. bug_step_3 phofimage 4. bug_step_4 phofimage
1. install a cluster with kibana and elasticsearch 2. let it run and read the logs
1. install metricbeats on 2 docker nodes with docker module enabled 2. start 2 docker containers with the same name 3. check the infrastructure ui
1. load the sample datas and navigate to canvas 2. open logs work pad 3. click on element which displays 446 4. kibana displays - something went wrong
1. load sample data 2. go to canvas and open one of the workpads 3. switch to full screen - workpad gets displayed to the bottom left
1. create a dashboard (e.g.
id: awcdpzl8ovsosle3vie4) 2. create a markdown panel.
on the left side: key in 3. run.
the result is not right.
part of the url is not getting right.
result is: expected result on the right side of the panel should be a clickable icon.
testlink5 4. we confirmed this url is working in browser phofurl we tested same with version es 6.4 and kibana 6.4 and it is working fine without this issue.
reproduce steps: 1. create a dashboard (e.g.
id: 2. create markdown panel.
on left side: key in 3. run.
result on right side of panel clickable icon.
1.load sample data like flights or web logging data 2.open canvas
### fatal error: call_and_retry_last allocation failed - javascript heap out of memory phofcode
1. open workpad in internet explorer 2. ensure window size is just big enough to view workpad 3. open page list, or expression editor
1. create a visualizationwith special character ("diria") 2. go to management / saved objects 3. filter by "diria"
1. open kibana, and go to management => advanced settings 2. scroll down to formatting locale and note that it is set to
1. create a dashboard 2. export via management > saved objects 3. reimport the exported json file via the api.
1. set up three clusters.
2. set up third cluster to store monitoring data from the first two clusters.
3. set up dedicated kibana instance for the third (monitoring) cluster.
4. set up first and second clusters to send monitoring data to third (monitoring) cluster.
in my case, i did this via metricbeat per phofurl 5. configure leader index for cross cluster replication on first cluster.
6. configure second cluster to connect first cluster (i.e.
7. configure follower index on second cluster.
8. add documents the leader index.
confirm that they are replicated on the follower index.
9. confirm that there are ccr stats on monitoring 10. try view ccr stats in kibana.
11. no ccr data is shown.
it might be related fact that id also disappears when you go ccr page.
if you want more specific details for each of these steps, please let me know.
1. install 6.4.x (or probably any version previous to 6.5.0) with security enabled 2. make sure kibana.yml contains `elasticsearch.username: kibana` 3. upgrade to 6.5.0
1. set up a cloud instance using old version 2. upgrade instance to 6.5 3. go to canvas and create a new workpad 4. create an element using timelion data source -> error appears
1. put false` in kibana configuration 2. start kibana 3. kibana stop while optimizing
1.clone 6.4.2 branch from github repo 2.setup accordingly 3.run functional test "node
1. clone 6.4.2 branch from github repo 2.setup accordingly 3.run functional test "node
1. create a index with a field called ``host`` or anything else you want.
the mapping is: phofcode 2. insert a doc to this index with empty value in ``host``.
3. show the index in discover page.
click the ``filter for value`` button beside ``host`` 's empty value.
1. in kibana, create a new bar chart visualization.
select an index containing data you wish to visualize.
2. in left sidebar, select "x-axis" bucket.
select "terms" aggregation and select a string field from your index.
sort and size it however you wish.
3. click the "apply changes" button.
4. x-axis bars should be sorted in the expected order.
5. click "add sub-buckets" button.
select "terms" aggregation and select a different string field from your index.
sort and size it however you wish.
6. click the "apply changes" button.
7. sometimes, data may still be ordered properly.
manipulate the amount of data through date range query box.
typically becomes apparent when some x-axis bars would have a zero count.
2.install kibana 6.5 3. start trial license 4. enable the security feature in elasticsearch.
5. create an index in elasticsearch 6. try to create a new role that has manage_follow_index index-level privileges for that index.
1. git clone 2. cd opbeans-go 3. docker-compose up -d 4. visit phofurl 5. wait a bit 6. in apm ui navigate to the opbeans-react service, and then to the "dashboard" page-load transaction 7. observe the first opbeans-go transaction 's name is swapped around
1. set up the apt repository from the documentation phofhyperlink .
2. install kibana-oss: `apt install kibana-oss` version 6.3.0 is installed.
4. enable the security feature in elasticsearch.
5. try to create a new role that has read_ccr or manage_ccr privilegse.
1. on 6.5 branch, with your local computer set to something other than utc 2.
`node --debug --grep "visualize app area chart" ` 4. as soon as the test does the date histogram aggregation i can see the data is wrong and the tests which check that data will fail.
1. create index with one doc in dev tools phofcode 2. run search phofcode this outputs all on one line: phofcode <img width="1454" alt="screenshot at 14 33 52" src=" phofurl 3. usually and for any other data whereby no field has data ending with phofcode the output we get is same as what you get when forcing elasticsearch to do the pretty json rendering: for reference this looks like this
1. create es/kibana cloud deployment 2. add sample data 3. generate pdf report from dashboards
1. install the "flights" sample data 2. create a workpad, add an image repeat 3. change the datasource to "sql" 4. make the query: phofcode 5. go back to the "display" pane 6. in "measure" box, try to change value dropdown - there are a bunch of occurrences of word `value` in there
1. open sample ecommerce dashboard on 13 inch screen 2. try to change scale of quantity on input controls 3. the dashboard panel border overlaps on the scale
1. go to create a role 2. add an index pattern and then add spaces in the fields 3. remove privilege to spaces 4. try to save the role - kibana displays application privilege error
i ask because if understand .kibana_1 is copy of .kibana .kibana is deleted when migration is finished.
so if delete as requested .kibana_1 .kibana was already deleted may lose all dashboards/visualization stored?
restart kibana time everything works, kibana is back on browser, logs logs: @bhavyarm
going to the docker tab caused this error.
the other tabs didn't have data at the time, so i assume it has to do with the data.
after some time, while more data has streamed in, i cannot make it do this again.
1. go to advanced settings and find that there 's no indication that is deprecated 2. set an email address in 3. check log for deprecation warning (nothing yet) 4. trigger one of the built-in watcher alerts (starting up another node is one way) 5. check that you do get the email.
6. check that you also get the warning about the deprecation as shown below.
1. go to management 2. click rollup jobs 3. click create a job 4. follow the wizard creating a job for metricbeat index 5. when you get to the metrics tab look at the table
1. install kibana 2. install certbot 3. generate let's encrypt ssl certs for standalone server 4. create symlink: => 5. create symlink: =>
1. add flight sample dataset 2. click visualize and open a piechart, vertical bar or a region map 3. click to dashboard and create a new dashboard 4. now click again to visualize: before opening the visualize page, the text of the dashboard loose some style and it's moved to the left of screen.
1. install elk 6.3 2. enable x-pack reporting in kibana.
this is done by adding xpack.reporting.enabled: true in kibana.yml 3. restart kibana 4. open kibana in browser ( phofurl 5. navigate to discover tab, you can see reporting option available near the top right side as shown below.
image phofimage 6. navigate to discover tab, reporting tab will not be available.
1. add image element 2. upload your own image 3. note the annoy red error dialog, which will just crash kibana in production mode
1. create a role with read only and view metadata_index privileges on an index pattern 2. create an user and assign that role 3. login with that user - infra home page says to the user
1. create a rollup index name with * in rollup job creation 2. fill other details 3. kibana doesn 't validate the name of the index till the last step
1. add the sample flight dataset 2. open the global flight dashboard 3. open the dev console 4. move the input control range slider to right 5. the error/warning appear on console
it displays log in page.
it redirects to saml idp 3. go to `/login`.
1. open up a kibana page, and grab the url 2. craft your curl statement like the docs indicate, as such: $ curl -u -x post " phofurl -h 'kbn-xsrf: true ' -h 'content-type: application/json ' -d ' { "url": } '` 3. it correctly yields the 32 character string: 4. i navigate through the browser to: ` phofurl
1. go to canvas 2. open an existing non-blank workpad (see loading icons)
1. create a vego visualization 2. use a layout with row/column for example eg.
phofcode 3. no scrollbar to view the complete visualization.
i set up a demo graph where you can see the issue: image phofimage phofurl
1. create an option list on a controls visualizacion 2. choose a date field for the option list 3. use the visualization and select some dates.
you'll see they are shown in milliseconds.
1. add the sample web log data 2. go to discover and create a saved search 3. go to share, csv reports, generate csv
1. go to saved objects ui 2. click on a page and select all and delete all 3. notice that user is still on the empty page after the deletion goes through
1. create tilemap vis 2. change "color schema" 3.
- create an object field, either using repro from the bug above, or mapping a field as `disabled` - csv report will fail with error ` field [fieldname] isn't a leaf field` representing the field value works in discover, presumably because discover has a request body that uses the `source` option.
csv generation fails, presumably because the request body uses `stored_fields` in request body.
asking for stored fields is currently potentially problematic because not all fields have stored fields.
to quote @colings86 > asking for stored fields on an object field itself will never work because you can't enable a stored at that level hence why we throw an error
1. visualize > create > vertical bars 2. set time filter to last 15 days 3. add date histogram buckets, set interval to millisecond, run 4. note that the interval warning shows that it has been scaled to
1. navigate to on your kibana instance 2. notice that the 'jobs' link in the menu under the breadcrumbs is not listed.
1. create a tsvb visualization with the makelogs/logstash generated logs 2. add one annotation, specify all the required paramenters.
3. in the `fields` field add one or more field that has a `.keyword` in the name like `agent.keyword` or `xss.keyword`.
4. on `row template` specify one fields with `.keyword` like `{{agent.keyword}}` <img width="1153" alt="screen shot at 12 21 32" src=" phofurl 5. now hover over an annotation and kibana will crash with following screen: <img width="834" alt="screen shot at 12 14 10" src=" phofurl
1. create a tsvb visualization with a simple timeseries 2. add one annotation, specify all the required paramenters, but specify on the `row template` a wrong field like `value: {{unexistent_field}}` 3. now hover over an annotation and kibana will crash with the following screen: <img width="735" alt="screen shot at 12 07 15" src=" phofurl
1. use voiceover 2. tab through canvas workpads listing page 3. import dialog box gets announced as choose file instead of import workpad json <img width="1920" alt="impor_workpad" src=" phofurl
1. create 2 spaces 2. add sample data to both of them 3. remove sample data from one of the spaces 4. the other space has only saved objects and but no data index management page before removal of sample data: <img width="1920" alt="before" src=" phofurl index management after removal of sample data: <img width="1920" src=" phofurl dashboard with no data: <img width="1920" alt="failed_dashboard" src=" phofurl cc @leedr
1. add a scripted field 2. delete a scripted field
1. create the simple timelion query ( only count the data) with interval 1d image phofimage 2. in the elasticsearch query, the data will return like this: { "key_as_string": "key": "doc_count": 1448, "count": { "value": 1448 } }, { "key_as_string": "key": "doc_count": 0, "count": { "value": 0 } }, "key_as_string": "key": "doc_count": 0, "count": "value": 0 } }, "key_as_string": "key": "doc_count": 3860, "count": "value": 3860 } 3. in timelion chart, value is shown wrongly.
it showed value of following date for example : it show data from to is 1448, this value is actually belongs to image phofimage the other date is also shown wrongly image phofimage image phofimage it happend same if you run with interval hour/week/month....
1. select an element on a workpad 2. open the expression editor (see bar above expression editor)
`npm install && npm install -g gulp` 4.
`npm start` 9. open a web browser and put this url phofurl
1. index a transaction with `transaction.name` containing `~` 2. find the transaction group in the list and click it 3. the ui will throw an error
1. add documents to elasticsearch phofcode data.txt phofhyperlink 2. create new scripted field.
name: date, language: painless, type: date, format: default, script: `return 3. create new vertical bar chart.
aggregation: date histogram, field: date, interval: hourly.
4. select some date range using mouse.
5. select some date range again.
popup appears with the text phofcode
1. go to a url like phofurl 2.
1. go to a kibana index mgmt page, bring up mapping for an index.
2. open the find dialog using command-f or equivalent on your system.
3. search for a string that occurs multiple times, and not just on the visible text on the screen.
4. observe that clicking the `>` arrow does not autoscroll to next match.
1.install default dashboards for kibana with metricbeat 2.open in kubernetes dashboard visualization "cpu usage by node" and change the time period for it.
3. if you will change the time period from 15 minutes to 30 minutes, 1,4,12 hours you will see how cpu usage will dramatically increase from each node( and current cpu usage for 12 hours perid (as for 4,8 and etc) on graffic is not correct, i checked it on the real node by top, load average from last 15 minutes near 0,1).
1. from job management tab: click `create new job` 2. select gallery* index pattern (for and so on) 3. select multi-metric job wizard 4. under `fields` select `bytes (mean)` 5. under `split data` select `method` 6. give job a name, etc then click `create job` 7. go to `view results` -> anomaly explorer 8. click on 3 of 4 cells from the `overall` swim lane ( in 'anomaly timeline' ) (only happens on overview) 9. see something went wrong message (call stack size exceeded) same error every time screen shot at 1 03 56 pm phofimage
1. have a dashboard with maps and other visulaizations 2. select request in map visualization to see the elasticsearch request.
3. wait a bit, it will show a very long request at first, but after several seconds, this text will override other elements of the dashboard.
1. add time filter to canvas workpad 2. use time filter to change months
1. i navigate to visualize tab and select visual builder 2. i select the time series tab & specify the index in "panel options.
3. i take an average of int type field "total_time".
4. i then add a sub math aggregation specifying the average of total_time as my variable and naming it "time".
5. then do params.time * 1000 for my purposes.
6. now want the 99th percentile of this new calculation, so add another sub aggregation , this time percentile aggregation.
7. the second select a "percentile" aggregation get an error flashed for a split second.
1. open a workpad 2. add a gauge
1. sample data: phofcode 2. create index pattern 3. search in discover: case insensitive search: `my_fieldname:my_term` - 1 hit `my_term` - no hits wildcards: `my_fieldname:my_t*` - 1 hit `my_t*` - no hits searching all fields does kind of work in general, but only if the exact term is being searched for.
1. load a canvas workpage into the browser 2. switch to full screen mode 3.
1. open the visualize editor 2. select add visualization 3. click the vega button 4. the error is logged on the console cc @bargs @timroes
1. create a horizontal bar chart 2. set a maximum number of x buckets less than the total number of possible values 3. select the "group other values in separate bucket" checkbox (and optionally set a label that isn 't the default) 4. render the graph
1. spin up canvas in safari 2. create a new workpad 3. drop an element on it.
i used just a square (why is there no rectangle??)
4. align it to the left side 5. hit that fullscreen toggle <img width="339" alt="kibana" src=" phofurl
1. go to dashboard page.
2. pick a dashboard to view.
3. pink status bar animates and dashboard loads.
4. click on search button (no action happens).
5. put a query and click (works) 6. click again (no action happens) 7. change query (works)
i did not have time to reproduce, but these steps should work: 1. have expiring license that triggers the cluster alert 2. apply new license 3. refresh monitoring page
1. ingest the sample data sets 2. switch to management/saved objects 3. try to filter by any single type and observe the failed network requests.
1. install sample data set 2. create new canvas workpad 3. add an element that pulls documents from the sample data index.
4. notice the warning message
1. click the sample data link on kibana home page 2. install any sample data set by clicking `add` button.
wait for install to finish.
3. return to home page by clicking the kibana icon in left nav.
4. notice the fatal error screen flash as kibana reloads itself.
you can catch the error by putting a break point in `fatal_error.ts` `fatalerror` method
1. using firefox, go to index management page in kibana, pointed at an es cluster that has indices 2. try to select the name of an index
1. perform initial load 2. either blank screen appears (as below), or a watch face appears in place of each element 3. it takes several seconds to see rendered element content
1. open dev tools 2. resize shape to zero 3. see console
1. unzip snapshot 2. try to start 3. boom: error above
1. open job management page in chrome 2. reduce chrome to 80% 3. select one job
1. on the beats list tag, click the beat name to drill down into the details.
3. on the config tag, click link for a configuration type (for example, output).
1. on the welcome page, click enroll beat.
1. load metricbeat dashboards 2. go to metricbeat system overview 3. failure is occurring on the in/out traffic: the request for this panel failed.
java.lang.integer cannot be cast to java.lang.double <img width="636" alt="screenshot at oct 17 src=" phofurl <img width="1472" alt="screenshot at oct 17 src=" phofurl
bring up kibana using tar regular package.
kick off functional tests either shakespeare or context ones.
notice you get the failures statuscode: 400, error: "bad request", message: application privileges must refer to at least one resource", the status page is still accessible and the way to clear the error is to restart kibana.
<img width="1521" alt="screenshot at oct 17 src=" phofurl <img width="1349" alt="screenshot at oct 17 src=" phofurl <img width="1044" alt="screenshot at oct 17 src=" phofurl this appears to be an issue with esarchiver which is only for oss right now.
for this reproduction scenario you need to pick a query which takes a moment before displaying any results: 1. in discover search bar submit a query , let's call it `search1 ` within index pattern (`pattern1`) 2. while the above search is ongoing, switch to another index pattern (`pattern2`) from the drop down list.
3. submit a new query`search2` 4. you will get results from `search1` but for the current index pattern (`pattern2`)
1. go to infra ui 2. choose docker containers 3. choose "view metrics" for any container
1. phofcode 2. image phofimage 3. image phofimage
1. create a new job based on an index pattern with a nested date field, for example `metadata.timestamp`.
2. click "validate job" 3. validate-job modal will report an error
1. open the rollup list with at last one rollup job available.
2. open the details flyout for that job.
4. change the sorting of table or number of results per page.
5. the flyout should have opened by itself.
1. set up a fresh kibana instance 2. open the monitoring page on ie.
1. run curl as described without the optional parameter phofcode 2. you will receive this error phofcode
1.clone 5.6.7 branch from github repo 2.setup accordingly 3.run functional test "npm run test:ui".
1. close some elasticsearch index.
2. go to management, index management.
3. click on the table header "storage size" 4. boom.
1. select an element on a workpad 2. open expression editor
1. open a canvas workpad 2. create an element 3. add a css style to the element (via _element style_) without an ending semicolon
1. clone an element 2. position the cloned element 3. clone the cloned element
1. use custom region maps as described in phofurl 2. the cors is working properly on chrome.
data is loading and joined for region maps visualization.
3. there's a cors issue in firefox
1. create a region maps visualization 2. data is loaded and joined correctly / is true 3. the icons in the region maps is missing
1. use voiceover 2. have more than one space 3. try to navigate to a space using keyboard 4. screenreader doesn 't let the user know that she is in that space.
1. turn on monitoring 2. visit the elasticsearch node listing page 3. click on a node 4. visit the advanced tab for the node
1. spin up 2 node cluster with mismatch versions of kibana and elasticsearch 2.
/status page throws 503 3.
1. create n visualization of different types - pie chart, area chart, data table etc and add them to a dashboard 2. launch the dashboard and enable auto-refresh (5 seconds).
make sure live data is pulled by kibana.
3. observe in chrome task manager the memory growth for kibana tab 4. after disabling auto-refresh the memory stays in the current level (no increase/decrease)
1. go to discover view and search the button to get inspect/spy feature 2. go to one visualize view, then click on a visualization and search the button to get inspect/spy feature
1. create a space b 2. load sample flight data and access the dashboard 3. switch to default space 4. go to recently viewed items - flight data dashboard is still displayed 5. click on it - kibana displays saved object not found message
1. create bar chart 2. measure color with e.g.
eye dropper of chart 3. compare with selected color on the color menu
1. visit the internal apm demo site 2. go to ml job manager 3. see the states (note- @formgeist got one of the jobs restarted)
1. install elasticsearch and kibana on the server 2. install a kibana plugin (logtrail for example)
`yarn es snapshot --license oss`
1. index some audit log data 2. enable autocomplete under query options 3. search for a range of values in a particular field > response : [400 to 499] 4. submit search and repeat without autocomplete for good measure
1. select a cell in the anomaly explorer that has no chartable jobs.
in this screenshot the selection is from the 2nd of feb. no charts show.
<img width="1138" alt="nochartsshowing1" src=" phofurl 2. next, select a cell that has chartable jobs.
in this screenshot the selection is from 3rd of feb. charts correctly show up.
<img width="998" alt="chartsshowing2" src=" phofurl 3. now, go back to original selected cell with no chartable jobs (from feb 2nd).
the charts are still showing up.
<img width="1158" alt="chartsstillshow3" src=" phofurl
1. load the sample flight data and sample data workpad from here: phofurl 2. open the workpad in ie11 3. workpad shows up with invalid expressions 4. workpad looks fine in firefox/chrome/safari no console error in ie dev tools
phofcode last command returns: phofcode
1. i tried to print just a simple visualization but it failed with that error 2. generating csv report from discover works 3.
1. install latest version of the stack 2. index some data 3. try using the kuery feature
1. use ie browser 2. open canvas 3. open the browser dev console and refresh the page to see errors.
1. setup es, kibana, metricbeat locally 2. import metricbeat dashboard phofcode 3. export to file (populate `enter_dashboard_id` with correct id) phofcode 4. inspect file for `index-pattern`.
1. use default installation 2. start kibana 3. try to access kibana on `localhost:5601` using ipv6.
1. create indices big enough so timelion queries are expensive 2. set the following properties - only the shard timeout should be needed, but in the test the other 2 were also included phofcode 3. create an expensive multisearch timelion query (across several big indices) 4. run query in a fixed time interval, and auto-refresh.
5. the different executions provide different charts.
1. use 6.4 kibana default dist (with reporting) and save a report generation url 2. start kibana 6.x (6.5) and try to use that 6.4 url to generate a report pdf.
i was using a watcher watch, but i think you can also post it with the proper headers and such.
3. my test looks at the .watcher-history index to see the actual error.
the .watches inidex would only show it successful or not, but doesn 't show the detail of why it failed.
1. go to kibana-ci jenkins server 2. look at x-pack jobs on master branch 3.
1. spin up a 6.4 instance 2. navigate to dev tools and create several request blocks 3. attempt to press ctrl+alt+0 to collapse all request blocks
1. look at the baseline report pdf checked in (same in master and 6,x).
phofurl 2.and/or run the reporting tests and see the session pdf 3.
1. log in to fresh install of kibana (with no sample data installed) 2. you will be routed to the welcome page asking if you want to try sample data.
here you will see the darker background graphics as below... <img width="1276" 29 06_pm" src=" phofurl
1. load data with geo info 2. show data in coordinate map 3. use "fit data bounds" to zoom in at the data (for example after using a filter)
1. create a few dashboards in kibana 2. open the landing page where dashboards are listed.
-> the dashboard list is ordered in order dashboards were created.
1. create index with replica count of 2 2. wait for all primaries and replicas to be allocated 3. open monitoring -> indices -> [created index], and look at the shard legend panel 4. open dev tools, enter `get /_cat/shards/[created index]`, and look at the output
1. create more than one data series using a "separate y-axis" assigned to the right side.
_note: this also applies to the left side_
1. start with a 6.2.4 kibana 2. create a tsvb with 2 data series =m, where one of them is on a secondary y axis 3. upgrade to 6.4 (on ess) 4. check the tsvb and see that the secondary y-axis series gets assigned to the primary y-axis.
1. upgrade to 6.4.0 2. curl the endpoint
1. create index pattern for the index with boolean field 2. create control type visualization and add a control of the boolean field 3. click dropdown and select either true or false values
1. open management -> kibana -> advanced settings 2. change the to 'it' and save 3. click to reset to default, now the default is `be-nl`
mean(metricvalue) by metricname 2. add multiple rules to a single detector 3. then try to delete some rules
1. create a visualization in ie 11.
2. open the advanced pane in the buckets panel.
3. mouse over the ?
note: this also happens when tabbing over to the tool-tip.
1. create 2 index patterns ( `.kibana` and `metricbeat-*` in my case).
2. set .kibana as the default index.
3. open tsvb and go to panel options.
4. change the index pattern from the default to `metricbeat-*`.
now it won't show any fields in the time fields selector.
5. change timepicker to another interval.
now time fields selector will be populated with date fields from `metricbeat-*` index pattern.
it seems that request to es is not sent after index pattern field is updated, even though it should be.
1. open a metricbeat system dashboard.
it should let you generate a report.
3. click on "edit" in the dashboard toolbar.
it won 't let you generate a report unless you save.
5. without saving, change the range in the timepicker.
it will now let you generate a report.
1. create a simple derivative graph with a date histogram image phofimage 2. make any "mistake" (i thought it was possible to create a split chart with derivative...) image phofimage 3. then i fix the "mistake" by removing the split aggregation, but the error state is still showing: image phofimage the tooltip just shows: image phofimage and hovering over the red box doesn 't show anything.
whatever i do i can 't repair that error.
if i create a new visualization from scratch without doing any mistakes same visualization works again.
1. create a data table 2. configure a top hit metric on _source and hit apply 3. observe error screen
1. i think the comma character should be removed 2.
1. make sure data exists in es.
2. navigate to visualize->time-series -> visula builder -> data table.
3. make sure date parameter is selected in the panel options for a index.
4 group by any parameter and provide any aggregation.
1. click "surrounding documents" on any document in any index phofcode image phofimage [ecom-app02-test] all shards failed for phase: [query] failed to parse date field with format [date_time] tat tat tat tat [?
:1.8.0_45] caused by: parse failure at index [9] of ``
1. go to management -> index patterns 2. create a scripted field of type `number` with the following script `return -math.random()` and save 3. on the scripted field list click edit on the created field to see the first error 4. click on `discover` to se second error 5. try to create a visualization with created field find third error
1. set to 100k in kibana 's advanced settings ui 2. click on the dashboards or visualizations
1. install kibana 2. open kibana 3. click "yes" into help us improve the elastic stack by providing basic feature usage statistics?
we will never share this data outside of elastic.
1. go to the home page 2. scroll past the bottom or the page 3. quickly mouse over the nav bar, try again if it didn't work, it doesn't happen every time
1. create a visualization who's legend extends past the visible browser area.
2. scroll down on visualization frame.
1. close an index (with curator in my case) 2. go to kibana "management" > "index management" 3. click sort by size ===> crash
1. go to management > saved objects 2. type netflow (if you have the netflow dashboards) 3. it shows a rough amount correct to the search 4. export all 5. check the file, its everything.
1. open tsvb, do not change any settings.
the default "count" aggregation with the default index pattern is rendered correctly.
2. switch to the "panel options" tab, change the index pattern name to a different one.
the "count" aggregation is working as it should with this new index pattern.
3. switch back to the "data" tab, select a different aggregation from "aggregation" drop-down list.
4. try to select a field from "field" drop-down list.
tsvb displays a "there arent any options available" message.
take this invalid json and paste it into dev-tools phofcode then move your cursor before the `org` of the logger name and hit `{`.
this will result in a fatal error like this phofcode this happens on cloud, on my localhost 6.4.0 install, no matter if in private window or regular one.
1. assume es 6.4.0 is running with at least two indexes and can be reached at phofurl 2. docker run --name=kibana-test -p -e elasticsearch_url= phofurl -e 3. go to phofurl create two index patterns and set one as default index 4. docker stop kibana-test && docker rm kibana-test 5. docker run --name=kibana-test -p -e elasticsearch_url= phofurl -e 6. revisit and click 'discover ' -- you have to set the default index again.
1. install react developer tools extension in firefox 2. visit a kibana page
phofcode the query generated by the
1. enable autorefresh with a 5s period 2. go to a different browser tab, wait some time longer than 30s 3. tab back to kibana.
with a bit of (bad) luck, it will show the timeout error screen after a fraction of second
1. set `server.host: "::0"` in kibana.yml (or any other local ipv6) 2. start kibana
1. set to some short time like 20 second 2. restart kibana to get this in effect 3. login to kibana 4. open some visualisation.
5. wait util your session ends and you got logged out 6. malformed login url is present in address bar like this one ` phofurl note that next parameter does not contain actual next page.
7. log in again 8. you end up on kibana home page instead of last opened visualisation.
1. open discover app, open any index (the document count doesn 't seem to matter).
2. start adding fields from the "available fields" panel.
3. if you 're not pausing for 2-3 seconds after every field then the following error is displayed via a standard kibana popup: "_unable to write index pattern!
refresh the page to get the most up to date changes for this index pattern._" 4. the field appears in main table, there are no further issues with it.
1. index a bunch of docs.
i did: phofcode 2. create a datatable with a date histogram.
use the advanced json to force a small time interval.
phofcode 3. mess around with the time picker.
the issue happens inconsistently so you may have to play around with different time ranges.
1. try to define a color formatted field that displays properly in both light and dark dashboards.
1. run this pr phofurl 2. on this commit 3.
1. set environment variable in docker compose file: 2. set elasticsearch url, username and password variables 3. run kibana 4. login to kibana 5. wait a few seconds
detailed steps: 1. in visualise, create a new visualisation of type "controls" 2. add an option list with the label "test" 3. select a relevant index pattern, plus relevant field based on your setup 4. press the play button to view the visualisation 5. save the visualisation with name "test controls" or similar 6. click dashboard and create new dashboard 7. click add, then add "test controls" visualisation you defined above.
result: observe that dashboard has horizontal scroll bar, even though no scrolling is necessary.
the scroll bar persists no matter how wide panel is made.
1. navigate to "monitoring" 2. click "turn on monitoring" 3. click 'instances: 1" 4. select first instance 5. refresh screen until you encounter the error (seeing this 20% of the time) error appears to be the same thrown in phofurl
1. create custom visualization with specified `responsehandler: 'tabify ',`; 2. filter data to get empty request;
load packetbeat dashboards navigate to packetbeat -> web transactions the page is pausing on the debugger
1. go to kibana home - click on load sample data 2. click on add sample data 3. sample data gets added and there is a notification shown but screenreader is not accessing it same with notifications elsewhere on kibana.
<img width="1440" alt="screen shot at 10 00 05 am" src=" phofurl
1. use the vega sankey diagram from this blog: phofurl 2. replace url section with this phofcode 3. examine the results
1. go to management 2. click on saved objects
1. get 5.6.11 bc3 going from the staging - with kibana/elasticsearch and metricbeat.
<img width="1440" alt="export_less" src=" phofurl 8. if user imports again you can see count of going up.
<img width="1440" alt="export" src=" the json: export.json.txt phofhyperlink
1. create a watcher that periodically fired alerts every 30 seconds 2. try to fetch the watch history in the last 7 days 3. kibana crashed
run these in the dev tools console phofcode to understand the issue, check the execute watch api calls.
the first one will actually try to send an email, but fails because no email server is listening on the remote port.
thus action is marked as `successful: false`.
the second watch execution is just not trying to send an email because condition was not met.
the last execution thus is now older than last run of watch, but still has information that this particular execution has failed - which seems to mark watch as error in ui.
1. create vertical bar chart visualization 2. put count on y-axis 3. put terms aggregation on x-axis 4. set order by to custom metric with max aggregation on field of type date (each record in term bucket has same value of this field, but each bucket has different value) 5. vertical bar chart has correct orders - first screenshot 6. add split series as another term sub aggregation (not every bucket on x-axis contains all subbucket terms) 7. vertical bar chart has incorrect orders.
it seems that only buckets not containing all sub-bucket terms are incorrectly sorted
1. start with a browser size wide enough so that none of the management page items wrap 2. make the browser window narrower and watch how the kibana section wraps text vs the elasticsearch section
1. start an nginx reverse proxy for elasticsearch 2. connect kibana to the proxy to talk to elasticsearch 3. click "start my trial" in license management the proxy is not able to forward the request, and sends a 400 error.
nginx logs: phofcode the problem is the request should be: `post this is similar phofurl image phofimage
1. download shakespeare dataset 2. create an area chart with count on y-axis - and terms of play name on x-axis and split the chart by terms on speaker name - keep the default 5 3. chart display doesn 't really work
1. set the kibana time zone under management settings.
any value: (choosed)browser, (choosed)ect/gmt,... 2. generate a line diagramm with date histogram on the x-axis 3. generate a dashboard and embed the line chart inside it 4. set filter on the dashboard (example: from: now-1m to now ) 5. send data to elasticsearch
1. for line diagrams where date histogram type is on the x-axis 2. timezone under kibana settings is gmt +0 , no time shift.
3. add filter to line chart (e.g.
from: now - 2m + 2h --> to: now +2h) .
time shift is here considered.
4. enable current time marker.
1. create a scatter plot 2. add a metric on y axis 3. run the kibana
1. load the data via the `add data` card in the homepage to add the flight data.
2. while data is loading, navigate to discover app - this console error is seen while data is still loading .
<img width="1676" alt="screen shot at 7 53 28 am" src=" phofurl
1. select a visualization 2. click reporting 3. click "generate pf"
1. go to index patterns and set the format for a string to url and audio format (a searchable string, not a aggregatable keyword) 2. open the index pattern in discover 3. in chrome (and firefox) it shows the audio control; image phofimage but not in ie 11; image phofimage
1. create an index with a long field name 2. go to discover in ie 3. mouse over the long field.
1. create an index with a single document with 10,000 fields.
2. try to create an index pattern in kibana matching this index.
1. add enough filters so you have more than one line 2. click on "collapse to hide filters" arrow 3. the first line of filters remain visible
1. try changing the options and see if the status.data is set, the first time it should always change 2. try saving a visualization or first time resize the frame, it will trigger status.data and actually response data is not updated, but still previous data.
1. checkout 6.4 branch 2.
./bin/kibana-plugin install phofurl 3. the console logs errors after a while
phofcode returns phofcode running curl however shows, that the data is properly indexed into elasticsearch phofcode evaluating such a number with node returns the same, when running on the console # node -e ``
1. start a new dashboard 2. click the "add" button in the "this dashboard is empty" dialog near the center of the screen
1. in ie browser go to a dashboard 2. click add in menu 3. click new visualization button in the panel 4. one time i briefly saw the red error banner at the top of the page but then quickly went on to show all new visualization types.
i wasn't able to capture that.
but if browser console is open i do catch error.
also, get same error when removing a visualization from a dashboard.
1. go to dev tools > search profiler 2. just run the default query 3. there's some partial tab `query profile` overlapping other fields 4. some wacky `selftotal%` and `timetimetime` and the time underneath that 5. it could depend on the size of the window if you see these issues.
i'll experiment with resizing and see if things get better or worse
1. create a input control and use a step value greater than the field value 2. try to operate the slider 3. it doesn't work and there is no warning
1. start the default distribution with basic license 2. install gold license 3. check prompt
1. import a plugin path, like 2. run eslint
1. load the sample flight data.
2. open the sample dashboard on ie or firefox.
1.select index in dropdown left menu
1. add the sample data set.
2. go to the discover tab and open the index pattern.
3. add filters for destweather and destairportid.
4. create a new index pattern for a different index.
5. go to the discover tab and open new index pattern.
6. the page still tries to show information for destweather and destairportid.
1. navigate to reporting under management and see that the table is mis aligned.
<img width="1666" alt="screen shot at 1 59 27 pm" src=" phofurl cc @elastic/kibana-design
1. run kibana from `yarn start` 2. go to visualize page, choose a visualization 3. set different time ranges and click on `recent` 4. open up console to see the error
1. create a visualize set a label use chinese such as 2. add to dashboard 3. generate the pdf
1. go to saved objects - select a object/objects - note that delete and export are enabled.
2. select a type in search filter type 3. notice that delete and export buttons are still enabled - click on them - the previously selected objects will pop-up
1. start creating an advanced job, move to the "analysis configuration" tab and click "add detector" 2. with the "add new detector" modal being open, start hitting the "tab" key until you see buttons focusing in the background, continue hitting "tab" until you reach "job management" in top breadcrumb.
3. with focus on "job management" hit "enter" key 4. the background main view of app switches to job management page but modal for creating detector stays open
1. use ie 11 2. go to management > saved objects 3. see total count
1. visit the apm sandbox (ping @jamie.smith on slack for that url) 2. visit the discover tab, make sure there is no search criteria and on the apm index
1. create a line visualization with any y-axis metric ( aggregation: average...) 2. for bucket x-axis choose "date range" and choose a field of type date.
1. select saved objects and click on delete - kibana changes the delete button to
1. export your saved objects first and delete everything in saved objects including index patterns 2. re-import the saved objects 3. kibana displays "in order to visualize and explore data in kibana, you 'll need to create an index pattern to retrieve data from elasticsearch."
1. load the default dashboard from the flight data( in built) 2. generate a report out of it .
( i chose optimize pdf for printing) 3. report generation fails with the following message phofcode <img width="1499" alt="screen shot at 2 14 40 pm" src=" phofurl the report generation took a long while - i checked the network tab of console and this was shown phofcode i tailed logs and it was stuck at this line phofcode and finally it timed out : phofcode attaching full logs : reporting logs.pdf phofhyperlink
1. open a time series index pattern in discover 2. set the auto-refresh to something and then try to turn it off 3. kibana looks like it keeps sending queries to es and time counters in histogram keep changing 4. only way to stop it is refresh the browser.
1. from management page > navigate to watcher and create an advanced watch.
2. check the console for the error stated above.
<img width="1680" alt="screen shot at 11 35 53 am" src=" phofurl @bmcconaghy/ @chrisronline any thoughts?
1. open a visualization 2. print a report 3. only the viz editor is being printed.
1. go to kibana 2. go to discover 3. wait for rows to load.
4. once rows load, browser tab freezes up entirely and has to be closed.
this seems happen on graph load or something before that.
{ "location": "kadapa", "comments": [ { "commentor": "rand@gmail.com", "comment": "not as expected.. its too sweet and too much milk", "cmnt_id": '
1. go to advanced settings and set to 'true ' 2. go to discover page try to change the time filter values
note: i've observed this behavior in the options panel and with several types of config, these steps are just one way to trigger the bug.
1. start a new visualization 2. add a date histogram aggregation 3. apply the changes 4. change the interval, apply button should not be enabled 5. change interval again, apply button should become enabled
1. create a bar chart in kibana 2. assign one y axis with percentage type to chart and add another y axis in e.g., double format to it 3. in axis section, separate two y axis (for example make the second y axis in the right)
i am unable to reliably reproduce this bug.
1. go under "management" -> "saved objects" -> "visualizations" -> edit visualization 2. add "fontsize" field with a value under "visstate" -> "params" "categoryaxes" "labels" example: phofcode 3.
1.yarn kbn bootstrap 2.yarn build 3.
1. enable keury in kibana: image phofimage 2. create and save a kibana saved search with a filter using keury (i.e.
`total_amount < 200`) image phofimage 3. create an ml job using that saved search as the basis of the job 4. after ml job is saved, notice that the datafeed 's query is the default `"match_all": {}`, thus not obeying filter made with keury
1. import phofurl from phofurl 2. follow steps here phofurl 3. fail at step "set aggregation to geohash and field to geo.coordinates."
1. index some documents with a japanese prefecture name with a value like below.
it could be through geoip filter of logstash or geoip ingest node process when ip addresses are available.
phofcode 2. create an index-pattern 3. create a new region map from visualize tab.
the message on below the screenshot appears.
_note: elastic maps service expects `hokkaid prefecture` instead of `hokkaido`._
1. create a coordinate map visualization in kibana and save it 2. add it to a dashboard and save it 3. click on reporting and try the two different reporting options.
the "optimized for printing one is affected by the bug afaik.
1. create docker-compose.yml with those environment settings.
phofcode 2. startup the container with `docker-compose up` command.
3. open kibana, create a new visualization with region map.
2. create a coordinate map 3. the coordinate map will show some circle markers 4. put the search value in search bar (please be sure that this search value will not return any result) 5. the circle markers still there, not disappear.
but if i refresh the web page, the circle markers will disappear
1. create a job using and using `mlcategory` as a `by_field_name` 2. click on "validate job" button
all the steps were reproduced in the dev console.
it is particularly important for step 3, as executing it with curl wouldn 't display the erroneous behavior.
1. create an index using the following command: creating_index.txt phofhyperlink 2. populate index with following command: populate_index.txt phofhyperlink 3. search index with following command: search.txt phofhyperlink
1. add option list with parent/child inputs to a dashboard 2. squash it vertically to fewer than 9 grid snaps 3. select a value from the option list
1. run a pr with only a docs change (nothing that should impact this test) 2. this test failed :-(
1. enable xpack monitoring collection on es nodes 2. sort by name in kibana monitoring 3. nodes are not ordered
tar with the minimal plugin to create bug: minimal plugin to reproduce: test.tar.gz phofhyperlink 1. create a plugin with an empty visualization.
2. add angular-material (version 1.1.10) and its dependencies (version 1.4.7) to the package.json 3. import angular-material and its dependencies in the plugin controller file.
4. add ngmaterial to the module's visualization.
5. open kibana 6. go visualization home page 7. go discover page angular-material as dependency
1. open 'dev tools ' 2. paste in the following query: phofcode 3. get results: phofcode 4. open 'discover ' 5. set time range to "last 24 hours" 6. set index to 'fluentd-prod ' 7. create a filter with the following query dsl: phofcode 8. get no results for leads-api 9. change to using the standard query input, which generates: phofcode 10. get: "no results match your search criteria" 11. paste the new query into 'dev tools ' and get an exception: 12. remove type line: 13. get results:
1. try create `pie chart` visualisation 2. select `term aggregation` 3. select field which is longer than left panel with
1. build the kibana dashboards 2. embedd the iframe url in any web application(i used python-django) 3.once you embed.
try maximising the any single visualization
1. create a saved search 2. create a visualization that uses the saved search 3. export the visualization 4. delete the saved search and the visualization 5. import exported visualization.
the import dialog says success but that it imported 0 objects and does not provide any messaging as to why object could not be imported <img width="1002" alt="screen shot at 8 41 38 pm" src=" phofurl the problem is that check for [savedobjectnotfound errors] ( phofurl only looks for index-pattern errors and not search errors.
in code snippet below, it is impossible for to ever be reached.
if (err instanceof savedobjectnotfound) { if (err.savedobjecttype === 'index-pattern ') { if (obj.savedsearchid) { } else { obj, doc: otherdoc }); } } } ``
1. click visualize 2. create a visualization 3. select vega
the steps below written for logstasgh sample index (generated with node scripts/makelogs.js) 1. create new table visualization.
2. in editor panel, click on "split rows" 3. choose "date histogram" 4. click on "add sub-buckets" -> "split rows" -> "terms" 5. in field textbox choose "machine.os.keyword" 6. apply changes 7. disable histogram bucket 8. open browser consloe 9. apply changes at this point the visualization stay the same as before, but the console print error: "uncaught (in promise) typeerror: cannot read property 'key ' of undefined" 10. enable histogram bucket 11. apply changes - works without errors.
12. define new metric: click on "add metrics" 13. in aggregation choose "max" 14. in field choose "bytes" 15. apply changes 16. disable term bucket 17. all rows in max bytes columns show only "-" value.
1. phofurl 2. make elasticsearch.
1. import metricbeat dashboards from unified staging build #534 ( i am also attaching the saved objects json) 2. go to dashboard listing page and try to open | [metricbeat system] host overview 3. nothing happens _i think kibana needs to warn the user that there is a problem with the dashboard._
1. create a pie 2. options / labels settings 3. tick show values : nothing happens 3. tick show labels : you can see labels & values (eg "quarter1 (15%)") 4. untick show labels : no more labels nor values :-(
1. complete filter in the following: phofcode 2. result looks like this: phofcode
1. create advanced watcher in json 2. add slackage without the `text` field but add an attachment 3. save phofcode
1. open index management 2. change browser zoom to 90% 3. view row separators
1. use the vega sankey diagram from this blog: phofurl 2. create this once in a version prior to 6.2.4 and once in 6.2.4 or 6.3.0.
3. compare how many of the rights side blocks are visible and functionable (can be clicked) in the earlier version, but not in 6.2.4 or 6.3.0.
1. set kibana advanced setting to true.
screen shot at 08 28 59 phofimage 2. add a filter to the dashboard using `add a filter+` screen shot at 08 27 36 phofimage
1. start `yarn es snapshot` 2. put this in kibana.yml: phofcode 3. start `yarn start` (yes, using the default --dev flag which enables base-path)
1. manually install elasticsearch from rpm and start service 2. echo "xpack.ml.enabled: false" >> 3. manually create the index using the curl command from step 2 on phofurl
1. use voiceover 2. use keyboard and navigate to ml->settings -> calendar -> new calendar 3. it gets announced as create new dashboard button
1. create an area chart with two buckets 2. save the viz 3. reopen the viz - the arrow is not visible.
1. click on the management tab 2. click on index management 3. sort on the first 6 columns => ok 4. sort on the last two columns => ko
1. download kibana 6.3.0 from phofurl 2. unpack the download 3. run `./bin/kibana`
1. start elasticsearch 2. start kibana 3. stop elasticsearch 1. wait for kibana to go red 1. start elasticsearch again 1.
_sometimes_ kibana won 't go green again, even though x-pack main updates it 's license information and things like login are possible.
1. create a new visualization based on some data with multiple fields 2. create a date histogram x-axis def 3. create a split series bucket 4. run the query 5. observe the expected graph 6. disable the series split and re-query 7. observe a flat line
1. install kibana 6.2.4 and x-pack plugin from rpm (`rpm --install`) and ensure it is working with an instance of elasticsearch 2. upgrade kibana to 6.3 (`rpm -uvh`) 3. attempt to start kibana to see the log entry provided below 4. attempt to remove the x-pack plugin using remove x-pack` see a message indicating that you can 't remove x-pack
1. install kibana/elasticsearch and ensure telemetry banner is getting displayed 2. use voiceover and try to access the banner 3. only read-more, yes or no are getting announced 4. once you choose an option - the banner goes away silently without any announcement about whats going to happen.
1. create two indices as follows (only difference: first one with `time_format` explicitely set to `epoch_millis` and second one with automatic `time_format`): phofcode 2. create the same document with epoch millisecond date in both indices: phofcode 3. create two corresponding index patterns: `test_epochmilli_1` and `test_epochmilli_2` (with time field `@timestamp`) 4. open `test_epochmilli_2` in `discover` (or render a data histogram in `visualize`) - => this works 5. open `test_epochmilli_1` in `discover` (or render a data histogram `visualize`) -
1. built gauge visualization on 5.6.8 2. did migration phofurl (from 5.6.8 cluster to 6.2.4 cluster) 3. launched new kibana on 6.2.4
1. navigate to advanced settings and type something in the search bar or change the category 2. the page crashes
1. create an index pattern, populate with a lengthy field 2. create a visualisation, split by the lengthy field, set "metric" to count (average is the same) 3. rows are not showing
1. type the name of the index pattern in kibana 's "configure an index pattern" page 2. click create.
3. instead of creating a new index pattern, kibana throws a fatal error.
1. start kibana up with a an array type configuration 2. take and action that will call elasticsearch
1. create a visualization 2. edit it, or create a new visualization 3. save it with the same name and confirm overwrite you now have two visualizations with the same name
1. go to menu discover (kibana) 2. select an index 3. two ways("add a filter +" or "click (+) icon") to query document with value (i.g:
1. run kibana test server 2. use curl to make a get request to 3. the `/visualization` and `/index-pattern` endpoints do not exhibit this behavior.
1. install es/kibana on server 2016 2. execute command seen in screenshot (happens for any plugin install, not just the one pictured) 3. wait
1. git clone phofurl 2. git checkout 6.3 3. yarn kbn bootstrap
1. use voiceover 2. go to discover and try to save a search with the same name as one of the existing searches 3. kibana shows a warning prompt 4. but that action is not announced in screenreader
1. create a dataset including the above countries 2. create a region map visualization using vector map: world countries, join field: country name.
1. go to license management when running a basic license 2. start a trial 3. refresh (not sure if this is actually necessary to reproduce) 3. click revert to basic and accept the modal
1. start up the default distribution (basic license) 2. do not start up elasticsearch 3. attempt to access kibana
1. on discover tab, click to add a new filter 2. select a date field like `@timestamp` 3. select `is not between` (so you can see it create a gap in the date histogram) 4. enter date/times that would be within your date picker time range 5. if you make the mistake of entering a value without the `t` between the date and time you get big red error notification
1. use voiceover 2. go to index management and click on an individual 3. the euiflyout which opens up is not announced in the screenreader - only tabs within it are announced.
1. use voiceover 2. click on edit on dashboard ->go to panel actions -> edit or reset the panel title 3. screenreader announces where the user is but once the user completes the action - there is no indication.
1. use voiceover 2. click on full screen button on dashboard 3. screenreader doesn't announce that user is viewing the dashboard in full screen mode
1. use voiceover and navigate to watcher and create new watch 2. create new watch is not announced by screenreader.
only threshold alert and advanced watch creation is announced.
1. cloud instance running bc6 2. click on import to import a saved dashboard from saved objects page.
3. when you click `no prompt for each object dialog ` in the modal, you see a 409 conflict error in the console .
doesn 't affect the functionality of importing the objects.
<img width="1387" alt="screen shot at 5 14 48 pm" src=" phofurl phofcode
1. maximize a view that is below an input-control.
3. click on the input-control that is above the display.
1. create 10-15 indices in your node.
2. open the monitoring - node details page and scroll down to the shard legend table.
ie: ie_shards phofimage edge and other browsers: edge_shards phofimage it doesn't seem to be a recent regression as it's the same in 6.2.4.
1. create a dashboard with only tsvb, markdown, input control, and/or vega vizs 2.
~share the dashboard with an iframe link~ (that step isn't even required) 3. click on add filter - it has only fields from the default index pattern of kibana
1. index document with really long field names 2. try to add a filter on that field in 3. filters don't handle long names and layouts break
1. update your license management to trial using license ui 2. notice the cluster alert for expiry date 3. get the trial license from internal elastic wiki and upload it 4. both monitoring and license ui update the expiry date 5. cluster alert remains the same and doesn't have new info
1. create a visualization 2. get the embedded iframe link and create the html 3. open the viz in browser 4. filters don't work please note they work on dashboards
1. open index management page 2. click an index 3. click "edit settings" tab 09 02 56 phofimage
1. create a kibana readonly user with the following "kibana_guest" role phofcode user: phofcode 2. remove all indices matching a index-pattern in kibana.
3. access kibana dashboard that utilises pattern from 2 - expect no data or "no matching indices error" 4. add data that causes creation of indices that match the pattern from 2.
5. access the dashboard - an attempt to modify the pattern is made
1. create a new vertical bar chart visualization with a time range that includes some data 2. add an x-axis date histogram aggregation on your timefield (eg, `@timestamp`) 3. click to add a new filter, use the timefield (eg.
`@timestamp`), i used `is not between`, enter 2 timestamps that are within your time picker range 4. you would expect to see a gap in the histogram, but there isn't.
5. check the spy panel and look at the request and we see filter isn't being added
1. using ie 11, copy/paste that vega script from the pr into a new vega visualization 2. click play 3. see error 4. try the same thing on chrome, it works 5. try the same thing on firefox, it works (i don't have edge browser available at the moment to try)
1. pull the container and bind the internal port 9200 to 80.
2. pull the `kibana-oss:6.2.4` container and specify the `--elasticsearch` flag to host where es is hosted 3. read logs from kibana.
post my_index/doc { "create_date": } get to *]
1. running kibana with x-pack and a trial license, create and save or open a saved visualization 2. open the reporting dialog, note the ability to generate a pdf 3. open the visualization's spy panel, reporting dialog tells you to save your changes
1. i don't think the os that kibana is running on is important, but i was using windows 2012 server 2. use ie 11, set advanced settings true` 3. navigate to a visualization with a long url.
add a couple of filters to make it even longer.
it doesn't matter if it doesn't work or if it gets any data.
i don't think it even matters if you save the visualization.
4. navigate to dashboard and open some dashboard.
again doesn't matter if loads any results.
5. open the ie browser dev console so you could see errors 6. click the visualize link in nav bar.
1. add an input control vis with multiple fields to a dashboard 2. size the input control vis so that fields are aligned vertically 3. generate a report.
1. use ie 11 browser.
1. set advanced settings true` 1. open visualization `cpu usage [metricbeat system]` (or any visualization with a long url) 1. go to dashboard and open any dashboard click the visualize link (should open the visualization but throws an `access is denied` error in the browser console and stays on discover).
1. use chromevox or voiceover 2. go through create index pattern page 3. screenreader doesn 't announce details of include system indices checkbox
1. use esarchiver to load this set of logstash* and .kibana index (unzip it); phofurl `node scripts/es_archiver load ./data_dashboard --es-url phofurl 2. export the dashboard and all dependencies; phofcode 3. inspect the json output file to see if it has the closing `} ] }` at the end 4. and trying to import like this; phofcode output is: request payload json format"}`
1. use voiceover or chromevox 2. go to kibana management - tab through sections 3. screenreader announces - users, roles, index management, license management ..and continues on 4. screenreader doesn't announce which section to which those list items belong
1. create metric with aggregation : "unique count" 2. field : "sysloghost.keyword" 3. switch to options and check: "auto extend range"
1. enable voiceover or chromevox 2. click on license management 3. screenreader goes through the top padding and then jumps immediately into update license and revert to basic links.
4. only if you click on the license info block - screenreader will announce the license information i ran the axe tool for accessibility and error seems to be axe help phofhyperlink : phofcode
1. use chromevox or screenreader on kibana home page 2. once the screenreader announces apm and add data - only add data is read out for subsequent solutions.
1. use either voiceover or chromevox - they won't announce that user is in recently viewed section 2. you can tab through the links though and they get announced.
1. set your to a low value so that your report generation will fail 2. make reporting fail at least twice 3. go to the reporting page on management and click on failure button - max attempts error message will get displayed but failure button will move up or down on which row you are.
1. create a bar chart as in screenshots 2. notice that for min byte range - elasticsearch is returning zero 3. kibana logs svg error in the console
1. install elasticsearch, kibana, load data 2. go to add visualization -> histogram 3. show/hide legend, throws a type error.
i am currently seeing to different errors: 1) typeerror: cannot read property 'handler ' of undefined 2) typeerror: cannot read property 'prop ' of null <img width="2019" alt="screenshot at may 09 src=" phofurl related to #18792
1. create a simple gauge in visual builder/ gauge as shown in the screenshots 2.
1. go to advanced settings - search for 2. notice that default is 1000 - change it to 25 - go to listing pages under objects and verify the listing behavior 3. go back to advanced settings and delete 25 and save it.
notice the default 1000 again for the value 4. try access viz listing table - you cannot.
5. go back advanced settings and explicitly set the value 1000. listing table works fine.
1. create data table visualization 2. for a numeric value, pick mean, min, max and median 3. view results of visualization
phofurl this originally surfaced in phofurl as a different issue, this is just one example based on the task event loop was processing when we originally saw the crash but we have explicit microtaskscope spread out in a couple of places in the renderer and depending on the task queue at time of debugger pause, they will cause a similar issue.
i am using an url which converts your speech to text.
even if you load google.com and try to use microphone for search it says no internet connection.
run this project: electron-same-origin.zip phofhyperlink <img width="769" alt="screen shot at 11 05 56 am" src=" phofurl
phofcode `browserview` is instantiated here phofurl phofcode
1. run this electron fiddle gist phofhyperlink 2. after initial page load open the devtools 3. in the devtools console type: 4. the value returned is: `true` 5. now navigate to any other page (for example, click the about link in the footer) 6. again, type in devtools console.
7. cookies are now broken.
the value returned is: `false`
1. run a gatsby local server, like phofurl 2. launch this fiddle with electron@6, and see that all 6 iframes load the site: phofurl 3. launch the fiddle with electron@7, see that none of the iframes load anymore 4. remove two iframes, launch with electron@7, see that the iframes now do load
a snippet to get printers phofcode phofcode
check ffmpeg.dll bundled in any electron release package for windows.
i use electron installed by vue-cli.
in a store, i've this code: phofcode if i replace `const configpath = by `const configpath = './';`, my tests pass.
when running the app with `contextisolation: true`, i start interacting with the app and after a number of clicks on different channels the renderer process crashes.
if either contextisolation is disabled, i am unable to bring about a crash
here is my code: phofcode 'set-window ' is called from my application 's main window, which also sends the time to be displayed electron-shadow phofimage on this image, you can see the shadow (artifact or whatever is the correct term) appearing and then "updating" when i change the workbench again.
i hope this is enough, but if you need anything else, i 'm here to help
1. clone and launch nodejs-based sample server, that accepts client certificate based authentications: phofcode 2. open second terminal and clone electron-based sample client: phofcode 3. import the included client certificate `client_no_password.p12` to your operating-system 's certificate store - no password is required.
on macos you can simply double click the file.
4. run electron-based sample client - after launch it will automatically sign-in with the server: phofcode 5. in the client 's ui click on **clear auth**, console output should be: phofcode 6. in client 's ui click on ** refresh ** , this will reload server page, with electron > 7 there should be no console output.
7. modify `package.json` of client as follows: `"electron": "7.1.1"` -> `"electron": "6.1.4"` 8. redo steps 4 through 6 - this time after hitting ** refresh ** console output should look as follows: event: -> available clientcerts for localhost:8443: client1; -> using certificate: client1 event: clear-auth (electron) the 'options ' argument to 'clearauthcache ' is deprecated.
beginning with electron 7, clearauthcache will clear entire auth cache unconditionally.
-> clearauthcache() done event: available clientcerts for localhost:8443: client1; using certificate: client1 ``
in my case i'm trying to run this from a node enable web worker, but you can also trigger the error just from a node enabled renderer process.
try running this code in the renderer process.
`setinterval(() => ({}), 0).unref()` here is a gist that highlights the issue.
forked electron-quick-start phofhyperlink : phofcode then, when you find yourself in the `recent` tab, select any directory, and click on `open`.
phofcode after `npm start`ing, in the devtools, run `location = " phofurl notice that we log it.
then run `location = "about:blank"`.
notice, that there 's no log
create an electron app with following code: phofcode start the app from console (keep the console in sight).
wait for "show()-*" messages to appear on the console.
second window will appear at the same time (ok) or after ~1s (bug).
both messages, "show()-before" and "show()-after", always appear at same time.
i was unable to reproduce this issue on windows/mac/ubuntu 18.04 (gnome).
create an electron app with following code: phofcode start the app, put cursor over the window and press left mouse button.
hold it down until modal window appears.
at this point ui is frozen.
the key to reproduce this bug is to have mouse pressed (inside an electron window) while modal is opening - this can happen even when user is just clicking.
another example visual code (electron 4.2.11) - use ctrl+o while holding down left mouse button.
i could not reproduce this bug on windows/mac.
for me, just update electron version.
run this command: `npm install electron --save-dev --save-exact --verbose`
- download the official electron-quick-start repo at phofurl - in the package.json, change "main": "main.js" into "main": "electron.js" - rename main.js into electron.js - run start-script (npm run start) crash with error
open and minimize any electron project with version 7 using the icon the you will see the background color of the frame for a sec before content is displayed do same with v6 and content will be shown directly see included gif first 2 open and close is correct , open/close 3 and 4 is showing bugg
basic demo of the issue (can be reproduced in electron fiddle): phofurl to reproduce with voiceover, start voiceover (cmd+f5), navigate to the tray (vo + m m), and attempt to click the icon (vo + spacebar).
voiceover will announce that the icon was pressed, but no click event will be fired
1) make sure your secondary screen is bigger than the primary (in my case the secondary screen is oriented vertically, so the height is bigger than the height of primary screen) 2) try to create a fullscreen browserwindow on secondary screen: phofcode 3) observe that created window height is cropped to height of primary screen (to
1. dock a window to the right side of the monitor.
2. call the window.show api from the main process.
phofcode in this repo, we test this by launching a simple http server and 2 proxies, and running a simple script against them using multiple versions of electron.
when running this, we can see that in electron@4, the requests correctly go through the proxy.
however, starting with electron@5, the requests do not follow the proxy at all.
requests that should go through simple unauthenticated succeed anyway, but there is no log from proxy, and those that should go through authenticated proxy fail when setting proxy works (because credentials are not provided), but succeed on electron@5 and greater.
phofurl `npm install && npm run start` on the exemple the header has a fixed height of 40px and width 100% when resizing on the width drag works fine after it but after resizing on the height not.
you can edit style in index.html to test different behavior, like: `height: 100%; width: 40px;` = not working after resizing on width.
1. unzip electron-21032.zip phofhyperlink 2.
`npx electron .` 4. press `cmd-o` 5. double click file works when the dialog is opened by clicking on the menu item and not using the shortcut.
run the following fiddle to see the behavior change.
in electron < 7.0.0-beta4, the page can make an ajax request to the custom scheme in a loop and print contents.
in electron >= 7.0.0-beta4 page can occasionally make a few ajax requests, but it will eventually halt when one request never reaches a `xmlhttprequest.done` state.
phofurl good console output (7.0.0-beta3 and bellow) looks like: phofcode bad console output (7.0.0-beta4+) looks like: phofcode
gist for electron fiddle phofurl previous version
in a window execute the following code: window.open(" phofurl "_blank") a new window will be created with google.
then execute: window.open(" phofurl "_blank").
instead of a new window being created, the google window will navigate to youtube.
according to the specs: phofurl "_blank" should open a new or tab.
my assumption is that this is not being considered and treated the same way as any custom name would be, therefor navigating instead.
**_self - url replaces current page:** this is also not working, it opens a new instea
my application was written with reactjs and i first try ** fetch ** in react but it failed.
i aslo used ipcrenderer, ipcman to handle the request but it only ran correctly on dev mode.
is it a problem about cors or something like that which happens when packing app ?
please load the electron fiddle: phofurl phofhyperlink and follow instructions in the opened window.
phofcode check the console after toggle fullscreen or maximise.
if browserwindow transparent is set to false, behavior is correct and it returns the good value.
you'll need a proxy server to reproduce the missing `login` event, which might be a somewhat difficult to get.
in our testing, the issue exists regardless of the proxy server used (even a simple basic auth proxy fails just like a fancy ntlm one).
fiddle: phofurl js const {app} = require('electron') const path = require('path') app.on('ready', () => { const desktoppath = app.getpath(`desktop`) const logpath = app.getpath('logs') console.assert(logpath === desktoppath, `expected ${logpath} to equal ${desktoppath}`); app.quit(); }) ``
you can reproduce using a small utility repo here: phofurl the `package.json` starts with a working electron v6.0.7.
phofcode test that window stays above other focused windows, and toggle a few times with `ctrl`+`shift`+`x`.
`rm -rf node_modules` and change the electron version in `package.json` to `7.0.0` phofcode toggle with `ctrl`+`shift`+`x` and focus another window.
the electron window loses focus.
to see the problem immediately you can use the executable from the releases page here: phofurl v0.2.12 uses electron v7 and exhibits issue v0.2.13 uses v6.0.7 works as expecte
phofurl (instructions are in the readme file) (the example website can load normally on first startup, so please reload it using `ctrl+r`)
1. install angular cli (npm install @angular/cli -g) 2. generate new angular app (ng new electron-angular-app) 3. install electron in app (npm install electron@latest --save-dev) 4. configure electron and start 5. open dev tools and navigate to sources tab 6. notice available directories under webpack://
clone ` phofurl checkout branch `v2`, install packages and run the `start` script.
phofcode after the app starts open developers tools.
phofcode * setalwaysontop works * click with left mouse button on tray to hide * click with left mouse button on tray to show * setalwaysontop does not work anymore
run the default code in electron-fiddle or electron-quick-start against electron v8.0.0-beta.1 (on linux -- not sure about other os).
i got the following code in my renderer phofcode and the following code is injected in my webview.
phofcode both console.log("post...) are executed using electron 5.0.11 and below, but after updating to 6.0..0 or above not any longer.
the `count` variable is not send back to the renderer.
i 've checked phofurl to see breaking changes from electron 5 to 6 - but haven 't found something explaining this behavior change.
maybe i am misinterpreting something here, but so far i just don 't understand why the code which worked without issues on v5 series is broken since electron v6.
phofcode if you provide a url, please list the commands required to clone/setup/run your repo e.g.
phofcode when prompted, allow terminal to control the computer, restart the app and repeat the test.
use the following snippet in `main.js`: phofcode or use this example repo: phofcode
phofcode with electron 6 or 7, you see the following messages in renderer console: image phofimage it means that the preload loaded successfully.
but with electron 7, you also got the message error from above printed in the main console
unfortunately these screen model is required for reproducing the issue.
thus it makes no sense to add code here.
in case somebody indeed has such devices, it is just required to call: ** screen.getalldisplays() ** and look at the returned id in the json structure
install and build electron from source on windows 10 / vs 2019 using instructions provided.
any sample app with dorita980 that is run through the electron command line runner seems to return this issue.
thanks for any ideas, including how to build electron with this cipher, or how to add a cipher in some way.
run following snippet: phofurl phofcode
clone the electron-quick-start repository, and insert the javascript code above into renderer.js file.
don 't forget to set nodeintegration = true for the main window, otherwise buffer won 't be found.
electron fiddle gist of the same: phofurl
`npm start` the code below (in main.js).
in the devtools that opens up, run `window.onbeforeunload = () => true;`, then close the window.
in the working case, window will not close.
in broken case that uses `browserview`, it will.
phofcode maybe related to [this comment]( phofurl
try embedding this flash website in an electron project ( phofurl following this tutorial: phofurl
**when we run the following command** _electron-packager ./ --appname=utilitytool --build-version=1.0.0 --no-asar --no-prune --platform=win32 --arch=x64 --out ./dist/elenpm --overwrite_ **we are getting an issue** perm: operation not permitted, lstat ** ** npm err!
build-win32: electron-packager ./ --appname=utilitytool --build-version=1.0.0 --no-asar --no-prune --platform=win32 --arch=x64 --out ./dist/elenpm --overwrite npm err!
exit status 1 failed at the build-win32 script.
this is probably not a problem with npm.
there is likely additional logging output above.
a complete log of this run can be found in:
phofurl - `npm start` - then open the "network tab" in dev tools and click the "send xhr request" button
1. install electron 7 phofcode 2. navigate to phofcode and see declaration of _getsystemversion()_ in line 13270
after upgrade, the error occurred.
node : v10.x => v12.x (lts) electron: v6.0.2 => v7.0.0 additional problem: there was no v140 error => it was solved by installing v140 using visual studio
i tried: * the code in phofurl (webview/browser) phofcode sample-app.zip phofhyperlink * the tutorial from phofurl phofcode tutorial.zip phofhyperlink
prereq: enable classic theme on windows 7 1. using electron fiddle, set up a frameless browser window app with titlebarstyle set to hidden and some default title.
2. in page, set up a button with a handler that changes the window title in some way.
i just have `document.title = document.title + '!
'` 3. run the app and spam the button.
you will be able to see the flicker of window chrome.
config in my zshrc: phofcode
set your left monitor to primary with 200% scale set your right monitor to 100% scale then run this gist.
based on the resolution of your monitors, you might have to adjust the x position: phofurl
check out the following electron fiddle phofurl
i 'll try to get a fiddle up later, but any app using devtools extensions (like ones using updating to 7.0.0 will not show devtools extensions anymore.
example repository phofhyperlink phofcode ...and follow the instructions.
set the following up in sdl: phofcode
get a standard 80mm or 72mm wide html/css pos receipt.
no images, no complex elements, just texts and lines generated by table borders.
this is how i print it within the application.
do a request using the net module as described here: phofurl to any site that will return cookies.
1. set aspect ratio with an added custom height of 38px: { height: 48, width: 0 })` 2. try resizing it from the bottom right corner (resizing from bottom center works fine)
const { app, browserwindow } = require('electron') async function createwindow() { tconst mainwindow = new browserwindow({ width: 500, height: 500 }); 700); // size only increases to this after moving the window } app.on('ready', createwindow) ``
- on fiddle, add `frame: false` to the `browserwindow` options object.
- (optional) add an element to tab into easily (like `<a> test </a>` into html code.
- run fiddle and start voiceover - focus on the window.
try to navigate using caps lock arrow buttons.
you can see what should happen by removing `frame: false` or going back to 5.0.11 electron.
easy to reproduce with fiddle, trying different versions.
- add () => to main process.
- add a simple input element to html.
- start the fiddle and windows narrator.
- navigate to the input box using narrator (caps lock arrow keys).
when the narrator gets the input box, "blur" will be logged console.
phofcode for reference, here are the macos headers for these colors and their availability in the macos 10.14 sdk phofcode all three are available in macos 10.14 (one is deprecated, but still available).
but even if they weren 't, the electron docs don 't specify limitations on the macos version for this function.
shouldn 't i expect * some * value rather than throwing an exception even when colors are not available on user 's system.
or perhaps documentation should reflect that in some cases function will throw an exception -- and what those cases are.
a fiddle for such basic stuff seems overkill, but it also took me about 1 minute -- so why not.
* go to dev tools * select some text (elements, sources,...) * press cmd+c
with the following code phofcode
* simply register a simple shortcut like this : phofcode * run the app * keep pressing <key>numpad7</key> and notice all the `num7` console logs.
a simple browser window will provide a repo later.
phofcode (making sure to add the proper entitlements files and such as listed in the readme) submit the resulting dist/mas/ pkg file or install it locally.
there is small electron app that show memory leak.
phofurl it based on electron quick start example app.
code creates browserwindow with offscreen true.
and subscribe to paint callback.
also loadurl with some page that constantly update to induce paint events.
has no effect on memory leak for me.
there is no memory leak if code moved from renderer.js to main.js.
for reproduce `web workers` error: ` for( let i = 0 ; i < 250 ; i ++ ) { new // need provide a path to file } // 240 = no crush, 250 will crush `
the stack seems to imply that it's all happening in some electron process.
const { app, browserwindow } = require( 'electron ') async function createwindow() { tconst mainwindow = new browserwindow(); tconst childwin = new browserwindow(); // commenting this out will fix the issue } app.on( 'ready ', createwindow) ``
run the example code: phofcode observe the delay after clicking on "ok".
sample app: phofurl to reproduce, you must have multiple monitors on windows with different dpi levels.
the primary monitor on your desktop should be a high dpi one, while a secondary monitor should be lower dpi.
sorry, i'm not able to reproduce it on-demand nor provide a small example.
you could try running keybase ( phofurl and waiting a few days.
i saw an issue that reported trap on mac os x, but it seemed unrelated
1. implement a simple react component in typescript 2. name the file with the extension *.tsx 3. build it with webpack source-map and open electron devtools.
it looks similar to the screenshot below
* `export next_root=1` * start electron
i have other windows in my application that work perfectly using the same, very basic: phofcode i also tried phofcode
run this fiddle with electron 6.x and observe that the size is wrong.
do it with electron 7 and things will be peachy again.
run from cmd.exe: phofcode after the crash there will still be a electron.exe renderer process running in taskmanager.
note: if you run it in bash on windows, use the following command to run: phofcode
step 3: lock your window screen (window + l).
lock your screen at least 10 minutes.
step 4: unlock your widow screen and see the dialog box popups with the below error message.
`npm install electron` on windows
run this command in js console of installed electron app.
`navigator.getusermedia = navigator.getusermedia || || if (navigator.getusermedia) { navigator.getusermedia({ audio: true, video: true }, function(stream) { console.log(stream); }, function(err) { console.log("the following error occurred: " + err.name); } ); } else { not supported"); }` code links $ git clone phofurl $ npm install $ yarn build then install the dmg from the dist/ open the install app and check the console log problem in this area phofurl
my demo repo phofurl 1. start e.g.
notepad.exe 2. paste its pid into `main.js` 3.
`npm run start` 4. close electron window - main process doesn't exit until you kill notepad.exe
upload an electron mas application signed with the documented scripts (which previously worked where nothing else did for me!)
$ git clone phofurl && cd electron-lag $ npm install electron-packager -g
just following the build instructions: phofcode
1) open the electron api demos app 2) click on getting started 3) open jaws, and enable virtual pc cursor 4) once enabled, use it to navigate to a text block in the rhs (for example, `browserwindow`) 5) once highlighted on a text block, press shift+down 6) the text should be selected.
via phofurl > 1. install signal on linux mint or ubuntu > 1. run the command xdg-mime query default text/html > 1. the output should be signal-desktop.desktop as shown below: > $ xdg-mime query default text/html signal-desktop.desktop ``
just try out the getting started example by following the instructions.
`process` will not be defined before being used and the error will come up in the console.
my code: js "use strict"; const {app, browserwindow} = require("electron"); // keep a global reference of window object, if you don 't, window will // be closed automatically when javascript object is garbage collected.
let win; function createwindow() { // create browser window win = new browserwindow({width: 800, height: 600}); // and load index.html of app open devtools emitted when window is closed win.on("closed", () => { dereference object, usually you would store windows in an array if your app supports multi windows, this is time when you should delete corresponding element.
win = null; }); } this method will be called when electron has finished initialization and is ready to create browser windows.
some apis can only be used after this event occurs.
app.on("ready", createwindow); quit all windows are closed () => { on macos it common for applications and their menu bar to stay active until user quits explicitly with cmd + q if (process.platform !== "darwin") { app.quit(); } }); app.on("activate", () => on macos it 's common to re-create a in app dock icon clicked there are no other windows open.
if (win === null) createwindow(); } }); ``
$ git clone phofurl $ cd electron-quick-start $ npm install $ npm start
1. create a window (this is the creator window) with following webpreferences set: > preload: some preload file which at least requires the electron remote module > nativewindowopen: true > sandbox: true (can be false when is true) > true (can be false when sandbox is true) _when at least one of sandbox or is set to true the problem occours._ 2. load a website which opens a new window on a click (i used phofurl 3. open new window by clicking link which should open new window.
4. close the new window.
5. try to select some text in creator window, when problem occours any interaction should not be possible.
`yarn start.crash` 4. wait 1-10 seconds for the crash.
all the example does is create and terminate an empty worker on an interval.
`yarn start` starts the app with false`, demonstrating that things work fine when it is false
example, see `main.js` for the menu setup.
run the following app in 4.2.11 and 6.0.10
phofcode i 'm serving a simple index.html on 4000: phofcode i 'm really happy to look into this and patch it, i have electron pulled locally and all set up for debugging.
if anyone knows the "area" to look for i 'll spend a day poking around.
maybe it 's not clear where this goes wrong, if so i likely can 't spend enough time to find it.
install the signal app on elementary os and receive a new message.
not exactly my case, but a similar behavior can be reproduced via: phofcode it logs `{ x: 0, y: 0, width: 2560, height: 1350}` which is the maximum size of the monitor on which it was launched.
the first time i launched it, i guess it was going to create it on the second monitor instead of the first, and so width/height was set to second monitor's bounds even though window was moved to first monitor (0,0).
now this might due to fact that chrome clamps window bounds, so if you try launching a window via `window.open` with a width/height greater than monitor, window's size will be clamped monitor size.
so if there is a bug, bug is that browserwindow's size is initial monitor's size, not size of that we've repositioned window
see this branch on my fork of quick-start: phofurl it launches two windows with the same affinity and closes one of them.
the remaining window goes blank and content never shows.
remove sandbox: true from the config makes things all work fine.
follow the build instructions from: phofurl to build with visual studio community edition 2019. fails for both the debug and release builds.
_see forked repo:_ phofhyperlink phofcode in window, run `process.hang()` or `process.crash()` from console.
you should see console messages when each event should get triggered, but there are none.
git repo url: phofurl phofcode
start scanning by calling requestdevice() in an environment with no ble devices (or with a filter that does not match any devices).
**`git clone phofurl **`npm run v6`** -> will install electron v6 and start app move mouse around the black sidebar as the window is resized and repositioned, see window flicker.
this flicker also exists on electron v5 **`npm run v5`** and electron v7 **`npm run v7`**.
i 'm running a minimal app compiled by webpack.
only the frontend is compiled by webpack, the renderer(index.js) is untouched.
if necessary i 'll upload an example later.
see my electron fiddle gist phofhyperlink
attempt to change the menu inside a menu click handler.
fiddle project phofhyperlink using the above, open menu>>full screen.
i 've found that sometimes i need to try it 3-5 times before a crash happens.
stick window on a side then trigger reload.
this issue is readily reproducible for me with the following steps: 1. run: `git clone phofurl 2. run: `npm install` 3. run: `npm start` 4. observe your process list with a tool like process explorer (tree view is best) or task manager.
notice the single renderer process and pid, along with other electron processes.
5. close electron 6. observe that the `electron --type=renderer` process remains after all other processes exit.
the orphaned process doesn 't use much cpu, but holds quite a bit of ram until its forced terminated.
1. open electron window with control buttons by `new browserwindow({ frame: true })` 1. change close logic to default mac behavior - hide app on close, not quit.
can be done by phofcode 3. set fullscreen mode 4. click close button
run () => console.log("test"))` in the preload script in a window with sandbox mode on phofurl
run the following app phofcode
create sample app and load whatsapp web via `win.loadurl(' phofurl {useragent: myuseragent})` is this something i've spoiled?
i have created a minimum repo that reproduces the error: phofurl i am using windows 10 (1903), with node `v12.10.0`, npm `v6.10.3` and have the windows-build-tools npm package installed.
run `asar extract app.asar` command on asar file.
jsfiddle to test in web browser: phofurl electron fiddle that reproduces the issue: phofurl
`mainwindow = new browserwindow({ width: 10, height: 200, frame: false })`
phofcode or use the following code phofcode
<!-- if you provide a url, please list the commands required to clone/setup/run your repo e.g.
phofurl `npm i && npm start` 1. drag the window smoothly from left to right.
this should trigger aero-shake 2 out of 5 times.
2. drag the window to the left-most part of your left-most monitor.
this will trigger aero-snap 100% of the time.
`npm install && npm run start` 4. try to drag the window.
** code: ** main.js: phofcode
putting the following two files in a folder on windows 10 and running `electron .` in the directory with electron 6.0.x globally installed should demonstrate the issue: ** package.json: ** phofcode ** index.js ** phofcode
i made repository with reproducing - phofurl please run it, and when you 'll see github home page, please click any link with relative path.
for example, it 's a green "sign up" button.
run the test suite on a 6-0-x woa build on woa hardware, specifically the command: npm run test -- --ci -g
run this code in the console of any electron app: phofcode where it fails is this code: phofcode when creating an array, and allocating memory for a long string.
1. create a `browserwindow` with `frame: false` 2. add the following to the page 's html: phofcode 3. run the app 4. hover your cursor over the top of window electron fiddle example: phofurl
open child window and then close it
try to change zoom factor of any child window <!-- if you provide a url, please list the commands required to clone/setup/run your repo e.g.
- clone the electron quick start from here: phofurl it's currently using electron 6.0.6.
- `npm install` - `npm start` - press ctrl+shift+i or select from the menu to toggle the dev tools nothing happens uncommenting line 23 in main.js does not help either.
older version: in package.json, set devdependencies/electron to 5.0.10 `npm install` `npm start` dev tools open just fine.
move browserwindow to second screen
try installing electron@7.0.0-beta.3 on windows.
1. switch to 30 bit color depth by editing xorg.conf 1. open any electron application
run the test suite on a woa build on woa hardware, specifically the command: `npm run test -- --ci -g "due to dns not resolved"`
put &lt;input &gt; in the page, call window.alert('xxx').
ive set up a repository phofhyperlink with the above minimal example.
to reproduce the issue, run the following commands on a machine running macos 10.14: phofcode
1. open dev tools in any electron based application 2. open dev tools, and go to the javascript console 3. type `print();` in the console, and hit enter 4. click the "cancel" button on the print dialog 5. attempt to interact normally with app
create a simple electron app with react, trigger a js alert.
have an app with a custom title bar emit the maximize() function on a custom placed maximize button.
the properties of the window should be `frame: false` and `transparent: false`.
1. window not maximized 2. window maximize 3. window minimize 4. window reopen clicking the icon on taskbar 5. unmaximize <!--
1. create new browserwindow 2. create new browserview 3.
6. trying to resize browserwindow crashes the app
open a hello world app and add this code: phofcode click on another app.
the window is not focused.
it works fine with electron 4
on the command line, add schemes for one of the argument switches handled in
app crashes when calling app.dock.hide() but only when running as root, e.g.
started as a service by launchd.
package.json: { "name": "electron-dock", "version": "1.0.0", "main": "main.js", "scripts": { "start": "electron ."
}, "devdependencies": { "electron": "6.0.3" } } main.js: const {app, browserwindow} = require( 'electron ') app.dock.hide() process.exit(0) as non-privileged user: $ npm start > electron-dock@1.0.0 start /path/to/app > electron .
reached as root, via sudo $ sudo npm start > electron-dock@1.0.0 start path/to/app > electron .
reached as root, via su - (or via launchd) $ sudo su - root# npm electron-dock@1.0.0 /path/to/app electron .
-[__nscfconstantstring objectatindex:]: unrecognized selector sent to instance
- run the app phofcode - eval `await 'microphone '})` in the devtools console
phofcode gist to reproduce issue: phofurl
kill renderer process and try to restart it from webcontents 'creshed' with browserwindow.loadurl.
yarn install and yarn dist of phofurl then run the executable: dll error yarn install and yarn dist phofurl then run the executable: works as intended only difference (assumed) between the branches: new electron version.
phofurl put the app in the background for a while and focus main window, the issue will be reproduced.
clone reproduce repo and start with electron@5 or electron@6 phofcode in the subwindow, the webview isn't rendered.
in the devtool of subwindow, a error `uncaught typeerror: cannot read property 'loadurl' of null` occours.
i logged the behavior: phofcode result: phofcode the dimensions come from phofcode i have the problem happening in my app, in `master` - tracking with phofurl can be reproduced by cloning the repository, running `npm install`, having _angular cli_ installed (`npm i -g @angular/cli`), and running the app `npm start`.
needless to say error occurs in built version of app (`npm run electron:windows`).
_note:_ error does _not_ occur when window is _maximized_, minimized, and restored.
error might not occur on mac -- can't be sure because mac has a stupid minimize/maximize animation thank you _electron team_ for your amazing work my app would be impossible without you
1. clone and install source code.
phofcode 2. click <input type="file"> -> show file chooser dialog.
3. click cancel button of the dialog -> close the dialog 4. click <input type="file"> again -> can 't show file chooser dialog.
sample in attachments to reproduce: phofcode reload document (cmd+r) click "new child window" observe child window console electron-quick-start.zip phofhyperlink
add these two lines into your preload script: `const { webframe } = require('electron');
`setinterval(()=>{ win.setbounds({ x:1079, }) },100);`
- add the following img tag to reproduce: < img id="chapter" class="novelcover" src=" phofurl border="0" alt="" /> - css just in case .novelcover { width: 240px; height: 300px; border-radius: 5% 5% 0 0; }
started on a fiddle but this is a super complex fiddle, is there a simpler one?
may not work... phofurl phofcode
phofcode output: phofcode **there are only the leaf and intermediate certificates in the _request_ object above**
create a menu with accelerators, buildfromtemplate and after this, call test out application and see that keyboard shortcut is still handled globally.
from the render process, try to connect to any secure web socket which uses a self signed cert.
**main process** phofcode **render process** phofcode
here's a fiddle that i tested on all three platforms.
windows works perfectly, linux work with a caveat that it doesn't pick up keyboard changes made while the app is running, and mac is broken.
phofurl to test this, add dvorak to your keyboard layouts.
if set to dvorak, the `l` is in the position of the `p` on a qwerty layout.
if you press `ctrl + p` on a physical qwerty keyboard but are using dvorak layout that should correspond to `ctrl + l` and pressing it should give console.log in fiddle.
see fiddle: phofurl the console output is: phofcode electron_run_as_node should not be set!
phofurl if you provide a url, please list the commands required to clone/setup/run your repo e.g.
have a firefox session open and launch visual studio code v1.37.0.
the cpu usage will spike immediately.
add into `index.html` in *electron fiddle* phofhyperlink .
set the scale to anything other than 100%, listen to `will-resize`, call `getbounds` and you'll se the diff is off the chart.
install this plugin: phofurl try to inspect a component or a vuex state.
1. clone the electron quick start phofhyperlink project 2. update `main.js` with the code below 3. execute `window.location = ' phofurl 4. note navigation occurs and no `console.log` output
simply listen to `will-resize` of any window and log the `newbounds` argument.
1. register `custom://` protocol via 2. add `will-navigate` or `will-redirect` event listener 3. trigger a navigation/redirect event `window.location = custom://foobar` 4. event listener(s) are not called
e build the application for windows platform with arch type as ia32
repo link phofhyperlink phofcode printing window in version 5.0.8 (repo default) or 6.0.0 will trigger electron crash.
it appears to have been fixed in a previous version, as seen in #15188, but the bug has returned in recent versions (listed above).
* x] i have read the [contributing guidelines phofhyperlink for this project.
* x] i agree to follow the [code of conduct phofhyperlink that this project adheres to.
* [x] i have searched the issue tracker for an issue that matches one i want to file, without success
install electron@6.0.0 in the network mapped folder, start electron, try to open devtools.
include the usual trimmings in main.js: phofcode also handle checking if the app is already running: phofcode package with phofurl and install, then try clicking on the app 's desktop shortcut after it 's already running.
the event is handled, but there is also an electron error popup.
double click on the app in linux .
it works from terminal, but not from file manager.
just created a most basic electron app (just loads a single page that says "tab" in h1 tags).
check out my electron fiddle to see what i mean: phofurl
using the electron quickstart repo: > git clone phofurl edit the quickstart ``main.js`` file to enable ``nodeintegration``: phofcode once started, open the developer tools, and enter into the console: phofcode create above view multiple times with following combinations, to see bug: phofcode
this fiddle reproduces the bug: phofurl as soon as i move the absolute positioned div below a few pixels, it starts working properly: phofurl # edit any dom element intersecting the phofcode div breaks the drag behavior.
looks similar to #11768, but i think that it is a different problem
$ git clone phofurl $ npm install $ npm run dist run
use my code below in any version >=3
set up a crash reporter and run `process.crash()`.
**updated repro** (see comment history for original version) 1. ensure windows "choose your color" setting is set to "dark".
2. clone and install repro and launch electron: t phofcode t*the first time, electron will launch normally.
* 3. once electron has launched, close it.
4. launch electron again: t phofcode t*the second time, electron will hang and never display a window.
* the above repro contains the following changes from : phofurl
i don't have any js code to share and i'm not a js dev (i use f# and compile to js with fable).
i think the issue should be easy to reproduce though
setup instructions for macos can be found here phofhyperlink phofcode
* hide the menu * trigger fullscreen mode * leave fullscreen-mode
1) maximize window 2) minimize window 3) restore window (click on the icon in the taskbar) 4) unmaximize window
create browserwindow open dev tools console and run: phofcode
nothing special just call above native addon in basic electron app go to fiddle link
`npm install -g @vue/cli` `vue create vue_app` `cd vue_app` `vue add electron-builder` in `background.ts` i add this: phofcode the file-loader module looks like this: phofcode the test.worker file is empty for the test.
the last step is: `npm run serve:electron`
install an electron based application
the best way to reproduce this is to build my project phofhyperlink .
all instructions are in the readme.
then try to add some bookmarks, close the app and restart it and see if they appear under the address bar.
also as i mentioned before, sometimes web requests doesn't work so you may not see the weather card.
then try to reload using `ctrl + r` and you will see that everything works correctly.
go to any website that request push notification pemission and subscribe.
then, go to **dev tools > application > service workes** and click on ** push ** .
just open any electron app on the affected versions.
i think the difference is * more * noticeable when having a coloured text.
image phofimage for the above screenshot, i have used electron fiddle and the following code in renderer.js html <style> .sample { font-size: 20px; color: orange; } </style> <div class="sample">sample text</div> ``
i have provided a simple example repo: git clone phofurl phofcode
phofcode phofcode the practical impact of this is that the different hash algorithms are available in the different versions making code fail that runs in v12.0.0 of node, just in electron.
try to use `recentdocuments`-role on a menuitem
the app crashes as soon as this line is called: phofcode we have included a in our `info.plist` as described here phofhyperlink .
here is the full function we use to request media access.
it is called when the permission request handler is invoked with the `media` permission.
the app does not reach the `catch` block, so error not logged.
we tested this behavior on 3 different machines.
ts async function askformediaaccess(): promise<boolean> { try { if (platform !== "darwin") { return true; } const status = await log.info("current microphone access status:", status); if (status === "not-determined") { const success = await log.info("result of microphone access:", success.valueof() ?
"granted" : "denied"); return success.valueof(); } return status === "granted"; } catch (error) log.error("could not get microphone permission:", error.message); } return false; ``
this issue is happening whenever you try to make a cors request from the chrome extension content script.
i have tested this in the chromium and was working fine there.
after enabling cisco webex scheduler(id: and navigate to google calendar new event page and check the developer tools.
phofcode you will need to update the _secrets.js file with a valid mapbox token.
1. open this test repo: phofurl 2. type process.crash() in devtools console and wait for window to recover 3. type again process.crash() in devtools console
1. install macos version of electron 5.0.6 2. clone and enter the demo repository phofcode ` 3. run the first instance and note the displayed times: phofcode ` 4. without exiting, run the second instance and note displayed times: phofcode `
install electorn@5.0.6 and check electron.d.ts
phofurl sudo npm start (with above configuration)
reproduced in repo: phofurl phofhyperlink i'm not sure if this is the intended behavior with context isolation enabled.
check out and build electron 5 on windows.
observe that the pe timestamp (dumpbin /headers) has an exact minute/second of 00:00, which is weird.
if you wait a day or longer, and rebuild, the time/date stamp will be identical, even though the day has changed.
1. launch the following app in 5.0.6 ** `index.js` ** phofcode ** `preload.js` ** phofcode 2. in the devtools console for the main world, enter: `foo = 1` 3. switch console context to the electron isolated context 4. eval 5. it prints `1` 6. repeat 1-5 with electron 6.0.0-beta.12 7. it prints `undefined`
the code is available here: phofurl phofcode or you can fork electron-quick-start ( phofurl -> add an input or something that will open the keyboard (windows 10 osk); -> change the background.
`$ git clone phofurl -b emoji-and-symbols-bug` 1.
`$ npm start || electron .` 1. click the * edit * *emoji & symbols* menu or press to open the popover select any character from the popover
build a native addon (ex the attached minimal repro) using node-gyp for electron 5 using the following command line: phofcode this is just as documented here: phofurl i 've been building native addons for ~2 years and never ran into this issue until i switched to electron 5...
git clone phofurl npm install electron@latest jquery npm start than go to plazma burst 2 for example and you will see it is unable to load the flash plugin.
close it than do npm i electron@4.1.1 than npm start and do the same thing and you will see it works with older version of electron and breaks on the current version.
see this branch of my fork of electron quick start: phofurl use `npm install` and `npm start` to build and run.
link to open the dialog.
then, when you use escape to close it, notice how the count goes up (count is incremented when an escape key keyup event is fired on the browser window 's window, see `renderer.js`)
unfortunately, we are not able to reproduce this on the `electron-quick-start` repo to provide a repro procedure.
however, i'm sharing the crash report from our app symphony in the **additional information** section below.
download the electron quick start app and set the electron version to 5.0.6 in the package.json.
set main.js to: phofcode set index.html to: phofcode add a style.css file with: phofcode if you look at this fiddle phofhyperlink , you will find the clicking on document will immediately replace grab cursor with grabbing cursor.
when you run app above via `npm start`, clicking on body does not replace cursor with grabbing cursor until you release mouse button.
my example above loads `"about:blank"` to hide previous page (as may be apparent, my actual app isn 't immediately loading same index.html two times in a row, but loads another page in response to a user action).
i haven 't tested performance implications of not loading `"about:blank"` page into window (which fixes issue), but it feels wrong to do that, because then i have a page sitting around in background that isn 't doing anything, and especially if there are timers firing for that page, i might observe subtle problems down road by keeping that loaded.
--- extra investigation: the problem is that chromium is calling `windowfrompoint` phofhyperlink get hwnd beneath cursor see if it needs update cursor.
the hwnd beneath it turns out refers browserwindow, which it turns out has higher z-order than browserview.
observations: 1. a new hwnd is created during every call `loadurl` and `loadfile` and is put on top of other windows 2. when we finish navigating not replacing an existing (this first navigation), page 's hwnd not pushed top of z-order.
if replacing an existing page, * * pushed top.
so what 's happening browserwindow 's navigation pushes top of z-order when completes, which happens * after * browser view starts its navigation index.html.
when browserview finishes navigation, its pushed top, because first one we 're loading.
it replacing an existing page.
run this in the console of any electron window: phofcode (this returns a `uint8array`, which when assembled into a hex string yields a value like the ones shown above in "actual behavior")
- install the latest version of microsoft visual studio code (vscode) for mac phofurl ** or ** the latest spotify desktop application for mac phofurl - open vscode ** or ** spotify - press command shift / on the keyboard - observe the help menu is not opened edit jul 1: slack desktop app version 3.4.2 also has same issue edit jul 5: the `electron-quick-start` application shows same issue phofurl at time of testing, app displayed these versions `we are using node.js 12.0.0, chromium and electron 5.0.6.`
- run `tccutil reset camera; tccutil reset microphone` to clear permissions for the macos terminal.
- run electron-quick-start ( phofurl - open developer tools - in the console, run: phofcode observe that the promise resolves with a `mediastream` before you click "don \'t allow" or "ok" on the dialog that pops up.
you can download the pia 2.1.0 version at this url phofurl then: * create a new pia * click on the ** preview ** icon * click on the ** printer ** icon (wait for the printer dialog box) * click on cancel button try to go on another page of application
phofurl phofcode then open on windows and you 'll see it crashes straight away.
then in `src/index.html ' remove then following phofcode then re-package and it will work.
similarly the see the http requests issue these can be uncommented in
use any electron version with #18666 fix, create a tray icon using a template image
end-user case, reproduced only locally.
using typescript setup, write: phofcode ts will detect this error at the last line: "element implicitly has an 'any ' type because expression of type '0 ' can 't be used to index type property '0 ' does not exist on type
run xxhash phofhyperlink using child_process from electron
: 1. on windows 7, create a packaged electron build and run it.
2. go to shutdown the machine as you would normally (click windows icon -> shutdown).
3. a breakpoint error will pop up which hangs the shutdown of the machine until the user clicks "ok".
this only occurs while running a packaged electron build, locally running apps quit as expected.
tested with older versions of electron (v4.2.4 and below) and issue does not happen, it first appears in v5.0.0.
tested with 5.x.x patch versions and issue still appears.
clone this project phofhyperlink to reproduce.
if you provide a url, please list the commands required to clone/setup/run your repo e.g.
noticed in phofurl when running the desktop version.
the code that makes it happen: phofcode phofcode in system preferences, change the appearance mode from its current setting to dark mode.
wait for the change to take effect on the window, then change it to auto mode.
i can 't find a pattern to reproduce the issue, it just happens suddenly and without any apparent reason.
i 've been able to catch the issue on multiple occasions and received reports from customers.
- clone sample app phofurl - run electron app phofcode
from vscode phofcode in vscode, vscode.env.openexternal maps onto phofurl @jrieken commented that there is "little we can do" and that i should forward this issue to electron.
unclear, just filing in case someone else has similar issues.
** main.js ** phofcode ** index.html ** phofcode webview.html - will be loaded remotely using index.html phofcode
1. clone ` phofurl 2.
`node update` 4. start node server by executing 'startserver.bat' 5.
electron fiddle gist: phofurl phofcode
- have foo v1 located in `/applications/foo.app` - open it - have foo v2, still named `foo.app`, located somewhere else - open it use instead of moving the app the currently open foo v1 window will be focused, and returns `true` instead of throwing.
this is an example : phofurl you can run commands below to reproduce.
the following can be opened in electron-fiddle to reproduce the issue phofurl
* run the attached test electron fiddle app.
* in the first window (iframe) click on the button under "notifications" to which will emit a device permissions request on the content.
* in second window (webview) click same button under "notifications".
* look at console output
example repo - phofurl 1.
`yarn make` 4. go to and run setup.exe` 5. wait 5 sec, and click on notification when you see it 6. after clicking on notification app should close itself
phofurl download and run, then try edit and view menus.
this uses 5.0.1 i have same problem in my own app using 5.0.3. problem eliminated by downgrading to 4.2.4.
clone this repo ` phofurl phofcode
i use the method to download the file and `downloaditem.pause()` to pause it and `app.exit()` to exit the app.
unzip any electron 4 distribution zip phofhyperlink and check locales directory on windows.
1. change system language to japanese 2. clone and run phofcode 3. clicking lower triangular arrow this app shows <input type="date"> element.
clicking lower triangular arrow on <input type="date">, nothing happens.
phofurl git clone phofurl -b master cd electron_crash_test electron .
from a render process, using the console: phofcode output: > vm885:7 view id at creation is: 1 > vm885:8 view webcontents id at creation is: 3 > vm885:11 response id is: 3 > vm885:12 response webcontents id is: 3
in a main script: phofcode in a renderer script: phofcode
clone this repo ` phofurl phofcode
phofcode after sending notification(s), close application (app.quit()) and the error will appear.
to no longer have the error after quitting app, i do not use the function close () but my application generates a lot of notifications and i would have preferred to handle that.
<!-- if you provide a url, please list the commands required to clone/setup/run your repo e.g.
this comes up when creating new browserviews and calling window.setbrowserview multiple times.
<!-- if you provide a url, please list the commands required to clone/setup/run your repo e.g.
install an electron-based application from the app store (trello would work), log in, use shift+cmd+n to open a second window, and then use cmd+~ to try to toggle between the two windows.
i verified that this occurs for multiple applications before opening this bug.
create `.npmrc` with the following content phofcode `npm install diskusage` for example
1. create a window with `display: false` and call `win.minimize()` when `dom-ready` event is fired.
or clone the repository and run sample app: phofcode 2. wait till window is displayed in the taskbar and click on it to open.
yarn electron:serve / refresh the dev tools
reproducible trivially with electron-quick-start phofcode
1. clone this repo: phofurl 2. checkout branch `slow-webview` 3. run `npm install` and `npm start` 4. open devtool to see the time took to set new src
as root run: phofcode no output.
again as root run: phofcode warning message appears
unable to share the repository because code is private
- git clone phofurl - cd electron-issue - npm install - npm run start
`git clone phofurl `cd sampleelectron` `npm install` `npm start`
1. clone the repo (window-flash branch), install modules and start the project: phofcode 2. minimize the smaller window 3. click 'flash toggle' button (it calls `win.flashtoggle(true)`, you can see it in the console) 4. wait for 10-12 seconds (window in taskbar is orange all time) 5. click 'flash toggle' button once again (it calls
phofurl or just add textarea to index.html :
create window and run any ppapi plugin inside phofcode
here is the minimal code that reproduces the issue: phofurl here are the commands required to clone/setup/run the repo phofcode
seems related to this issue phofhyperlink , but i can reproduce it without sandboxing.
turning `nativewindowopen` off resolves the issue, so it appears related to that.
download the electron quick start app and: main.js: phofcode index.html 's body: phofcode renderer.js: phofcode after `npm start`ing the app, execute the following in devtools: w = window.open(" phofurl "a", "width=500"); w.focus(); observe that window doesn 't get focus.
similarly, `w.close()` doesn 't close window if it points to a cross-domain site, but it sets `closed` to `true`.
turning off `nativewindowopen` makes work.
tried in chrome, and works there.
electron 5 and 6 also appear be broken, while canary (which uses chromium that electron 6 uses i believe) works.
same issue when using browserview instead of webview
unfortunately, not sure how to reproduce yet.
maybe i can take the private repo, and clip all the code except for the webview, and try reproducing that.
i think i may have better luck refactoring not to use a webview.
i really hope webviews will be un-deprecated, now that oopif 's will be a thing.
machine a: desktop, 16gb memory, full hd monitor, nvidia gtx 970 machine b razor blade, 2017, 16 gb of memory, 4k touch monitor, gtx 1060 *repro steps* _machine a_ 1. enable rdp 2. start fiddle with gist _machine b_ 3. rdp to machine a 4. quit rdp session 5. start new rdp session 6. observe display added loop electron fiddle for repro: phofurl
create a menuitem with `role: service` in a context menu (or anywhere other than in the main menubar).
download vscode and try to update behind a mitm proxy.
create a child window with native chrome window.open (scriptable window) as shown here phofurl , then set backgroundcolor constructor property of browserwindow to some color.
the result is that it is ignored.
the color is set just fine if i do not use the window.open.
phofcode the menu bar has a 'test' menu which contains a disabled submenu.
the disabled submenu has 2 other (enabled) menuitems, with the shift+h and shift+j accelerators assigned.
inspect the terminal for console logs when the shortcuts are pressed.
on macos nothing will happen while there will be console logging for windows and linux
just use the spellcheck api anywhere.
- start signal desktop, link to an account - have running, but not in focus - receive a message install signal desktop v1.24.1.
or build this tag: phofurl
clone phofurl and click the "click" button.
build a native addon using node-gyp for electron 5 using a command line such as: phofcode this is just as documented here: phofurl
* clone `electron-quick-start` * download `mksnapshot` from electron 3.1.9 * generate an empty snapshot with `mksnapshot * run copy the generated `.bin` files into run electron-quick-start via `npm start` then, either: in the devtools, run click anywhere in the page content or: in the devtools, run: phofcode click anywhere in page content
prepare a ready-to-update app, restart in a second
try using the typescript: phofcode
phofcode or download installer for the sample app phofhyperlink .
then install and run it.
2. the app shows mozilla 's page with example for <input type="file"> .
3. click "choose file" and select a local file.
it can not select file.
it keeps to show "no file choosen."
press-and-hold a key to trigger the accented character picker (for example `a`).
when the picker appears, choose a number (for example `1`), then type any letter immediately afterwards (for example `q`).
the result will be `aq` instead of `q`.
waiting for some amount of time before pressing `q` will avoid the issue.
this can be reproduced in any electron app.
examples include slack 3.4.2-beta4 head/79ae6a5, github desktop 1.6.6, and discord 0.0.255. it does not happen in non-electron apps.
go into finder and locate a directory that is in icloud and not downloaded locally, as indicated by the cloud symbol screen shot at 7 34 38 am phofimage then use showopendialog in electron and select that directory phofcode and filepaths[0] will contain the parent directory instead of the selected director
phofcode phofcode the `getinfos` method will be executed automatically after the app is opened for five seconds.
so you just have to wait.
i also tried execute exact same code make by writing separate script and running it using command *node script.js*.
this worked without any issues.
from what i've read electron is using boringssl implementation which doesn't support this.
is there some kind of way skip renegotiation or bypass it
always reproduce with the code below.
'use strict'; var electron = require('electron'); var app = electron.app; var browserwindow = electron.browserwindow; let mainwindow; function() { if (process.platform != 'darwin') { app.quit(); } }); app.on('ready', function() { mainwindow = new browserwindow({ frame: false, show: true, transparent: true, resizable: false, skiptaskbar: true, }); + __dirname + '/index.html'); mainwindow.on('closed', function() { mainwindow null; }); }); ``
js const { app, browserwindow } = require('electron'); app.on('ready', () => { const win = new browserwindow(); win.destroy(); settimeout(() => { // execution never reaches here console.log('here'); }, 500); }); ``
install electron v6.0.0 beta 3 add input type file click on upload file input **repo fork:** phofurl !
1. clone and start sample app phofcode 3. click a download link in the app -> crash electron app
1. clone and start sample app phofcode 3. click a button in the app -> crash electron app
phofcode chrome inspector can be attached and `require` exists in the devtools console.
phofcode chrome inspector can be attached, but `require` is not defined in the devtools console.
upgrade electron to v5.0.1 in phofurl and try "open external links" demo
not be able to reproduce yet.
i've created a fiddle here: phofurl you can see that i set `fullscreen: false`, and then output `isfullscreen` in `console.log`.
upgrade electron to v5.0.1 in phofurl and try "open external links" demo
you can pull down signal desktop v1.24.1 right now and repro this.
you can also repro this when you use expos.
signal desktop appears to believe that it has focus when this happens as well.
just open an external url in the new `browserwindow`, where youtube video is embedded with an iframe.
you can test it in my own testing repository here: phofcode clone above repository.
the navigate to folder phofcode then click to any link you want to test.
try with two version of electron, change electron version in `package.json` with version `4.1.4` and `5.0.1`
replace the renderer process script in electron quickstart / electron fiddle with the following, and click the refresh button (with `webviewtag: true` in webpreferences).
run and will return undefined
i forked electron-quick-start to demonstrate the issue i found.
phofurl phofhyperlink you can then use `npm run buildwindows` to create the appx.
if you 're unfamiliar with appx deployment, appx files need to be signed to be installed, even in developer mode.
this is basically how do that (from microsoft 's docs) phofhyperlink `process.windowsstore` is undefined in both the main and renderer processes when installed as an appx
doing this requires node, python and a working c and c++ compilation toolchain.
phofcode note that replacing `5.0.0` with `4.1.0` results in a successful build.
you will need a mqtts broker setup?
i 'm using ibm mq on a corp network.
i 've made an example project that shows how my code is setup: phofurl code doesn 't run without a mqtts broker to connect to.
here phofhyperlink is a commit that demonstrates the preload script loaded properly when run with electron 4.1.5, but not loaded when run with electron 5.0.0, and here is the branch: phofcode
may be hard to reproduce since the app needs to be packaged.
phofurl on mac: phofcode workaround: phofurl
phofcode play youtube video in the webview.
the iframe is reloaded, but the former iframe is still existed.
the video in former iframe is still playing, and the memory of former iframe is not recycled.
on a win7 pc without visual c++ redistributable, try to load a .node file.
according to this page ( phofurl phofhyperlink ) - search for the text `before (<= v4.x)` - the registering of schemes changed in electron v5.
typescript has a compilation error while using the format shown on that page: phofcode
using phofurl svg in `background-image` doesn 't render anymore with electron v5.
in this exemple the grid doesn 't show in the red square.
changing to v4.1.5 will show the expected svg grid.
1. run electron with `--inspect=9229` or `--inspect-brk=9229`.
2. attach with a debugger (such as visual studio code).
3. quit electron without detaching.
below is a repo that reproduces the issue: repo that reproduces the issue phofhyperlink phofcode
please clone the following branch from my repo: phofcode working branch with electron 3.1.8: phofcode
probably to download polar , open up a pdf and then load dev tools i'm can take screenshots of our webapp vs electron version too
difficult; i can provide an executable if needed.
clone this repository phofcode then, in the `renderer.js` file, put: phofcode finally, while keeping the app opened, lock your screen and you will notice on the login screen the binoculars icon, even though there aren 't any apps recording screen.
this icon will be seen on your lock screen as long as you have electron app opened.
this involves cloning the official package sources for archlinux, checkout the last commit for electron 1.8.x and building it.
- `git clone phofurl - `cd - `npm install` or `yarn --pure-lockfile` (yarn is preferred) - `npx asar p app
run the following electron fiddle: phofurl it will remove the iframe after 6 seconds.
the gif should then freeze on the latest beta (9) and in some cases, closing the app is impossible unless force exiting.
main.js: phofcode index.html: phofcode renderer.js: phofcode ** however ** , if i load the url on a `settimeout`: phofcode `window.opener` is set correctly when i open windows... what is going on here?
why does navigating the webview inside of a `settimeout` work, but not when navigating it when the webcontents have finished loading.
it looks like electron needs a little more time to set everything up correctly.
i 'll also note that logging `win.opener` from the window that opens new window shows an opener.
logging it from new window doesn 't: main window: var w = window.open(" phofurl w.opener // correct window i just launched: window.opener // null --- additional info: replacing `webview` with `browserview` appears to resolve issue.
* however * , there is a peculiar inconsistency it seems between `browserview` and regular chrome.
if i navigate my browserview to an `http` google.com, and open an `https` google.com window, `window.opener` is null, but can 't reproduce that behavior from chrome when open an https site from http one.
if navigate my browserview to https site and open https window there, `window.opener` set.
side note: as can be seen last working electron version bullet point, this used work for me (when was on 1.7; tested on 1.8.8 and works there too).
believe started seeing this issue cleared cache
new a browserwindow and load url to any webpage which can download a file.
when the file download dialog is open, it's not parented to current page which is not ** modal ** .
based on the electron fiddle test with below code.
the printing code: `win.webcontents.print({ silent:true, devicename:'hiti_p510s' }, (callback) => { if(callback) console.log('callback true') else console.log('callback false') })` the style phofcode
* `git clone phofurl * `git checkout * `sencha app watch` (see contributing.md phofhyperlink to see build requirements in another terminal: * npm start
here is a repo showing the issue: phofurl instructions: phofcode when running this on a retina screen, i expect the first image in each section "adaptive image" to be the same as the third image "hardcoded 2x".
when on non-retina, i expect first image to be same as second image "hardcoded 1x".
in short: 1. prepare a 1x and 2x version of a png 2. use passing filename without suffix.
3. use returned image 's `todataurl()` and set its return value to `src` attribute of an `<img>` tag.
the same issue is also present when using `app.getfileicon` as shown in second section of repo 's demo page.
nb: this bug appears from version ** 4.0.0 **
no specific repro steps yet... trying to find out more info.
it's not systematic as i tried to reproduce at least 100 times with no problem.
i've also tried upgrading to 4.1.4 in case bugfixes between 4.1.0 and 4.1.4 will fix this issue but reading the release notes i doubt it.
create a link to a download in `index.html`: <!doctype html> <html> <head> <meta charset="utf-8"> <title>hello world!</title> </head> <body> <a href=" phofurl link</a> </body> </html> ``
use `dialog.showmessagebox` and see that electron has no space to the left of the message box title.
here 's the situation: i have custom keyboard shortcuts used in my app, not global shortcuts, but "local-global" shortcuts (related to: phofurl problem is that developer tools, for some reason, adheres to the same shortcut definitions as the main window :/ to recreate the issue, create a menu template and remove copy & paste commands, assign menu to window, and open developer tools: const menu = // create browser window.
win = new win.setmenu(null); mode: 'detach ' }); ``
simple try to use ipcrenderer.send in a javascript file that is a class, and call it in some function and attempt to catch it in your main.js.
create a class file with 'use strict'; and module.exports = classname, create it on the app ready as a variable.
create a hidden browser window and set the screen sleep timeout to 1 minute under windows power options.
let the screen go to sleep and return.
if this does not work, showing the window and hiding it again, and then allowing the screen to go to sleep should definitely produce issue.
just make simple html file and put an audio element in it (&lt;audio&gt; &lt;/audio&gt; is enough).
phofurl phofcode * click on the button "send notification" * click on the notification and notice the log messages that indicate the click-handler fired * click on button "send notification" * click on notification and see that this time onclick-handler did not fire the same occur when you just wait for notification to close from timeout: button "send notification" wait for notification to be closed automatically button "send notification" and notice that onclick-handler did not fire
phofcode and build a signed version with the mas versio
not really anything to do to reproduce, just look at the documentation, the parameter isn't there: phofurl phofurl
phofurl the error code appears to change randomly: image phofimage image phofimage
i've written a small test app off the electron-quick-start to reproduce the bug: phofcode when run the program will attempt to call in sandbox mode and will print out the exception thrown and available functions on process api.
use a wacom tablet with either gitkraken or visual studio code
1. make container of `<webview>` have both `overflow: hidden` and `border-radius: 1px` (or any value); 2. make a div cover on this container 3. make cover div `pointer-events: none` and ensure it will be rendered (such as add `background: rgba(0, 0, 0, 0.01)`) phofcode
run any electron-based application on affected hardware and os version.
phofcode when the app finishes loading press the `alt` and the app crashes
1. fork `electron/electron` and make a branch 2. upload branch to personal fork 3. make a pr 4. wait for circleci 's `build-mac` workflow to run
would love to strip the app down and provide a means of reproduction.
but i've yet to identify what specific area causes the crash and i'm not entitled to release the overall project.
- simply switching from 2.0.9 to 4.1.3 in my app.
i 'll create a repository if necessary, later.
run the following electron fiddle: phofurl
* npm -g install serve * git clone phofurl * `electron .` ==> works as expected, display "we are using node.js 10.11.0, chromium and electron 4.1.1."
* quit server -s .
open another window and run `electron phofurl ==> display the content of the index.html, but does not exectue the apps, displays: "we are using node.js , chromium , and electron ."
a sample application based on the electron-quick-start repo has been created that demonstrates this.
in the index.html, some code has been added that runs on web page instantiation that makes an http get call to the rest server running in the main process.
when message is sent on start up, 20 second delay is logged when reply comes back from server.
an express server has been added to end of main.js that provides a 'test ' rest message api.
a button has been added to gui to allow for message be sent.
the elapsed time is logged console.
the code is available at: phofurl phofcode **main process rest server:** phofcode **renderer process rest server:** phofcode
with electron 3.0.14 (the last version signal desktop used), 755 permissions are in place for key framework files.
thus, you can pull down the zip and expand it as one user, and run it as a different user on the machine.
with electron 4.1.1, 744 permissions are used for those same key frameworks.
thus, you get an ugly macos crash error when trying to start it as a different user than the original installer.
you can reproduce this by downloading the electron.app files available from official releases.
download and expand, then run them with a different user.
- phofurl - phofurl phofcode
fork phofurl phofcode the actual modifications in `main.js` phofcode - ran the project with `npm start` - minimized the window and observed the cmd window's output
this is my script in my index.html; t tsetinterval(() => { t t let webview = webview=null;//it 's no use doing that; t}, 100); so who can tell me what 's the matter on here?
it should be that the memory of the main process keeps increasing.
why can 't this destroy webview
**clone the repo:** phofcode **to build the node addons use:** phofcode **to run the example requiring the addon on phofcode **to run example requiring addon on phofcode **to configure** edit in package.json: * electron version * config.generator: the target generator cmake will use, per platform * config.runtime.target: electron runtime * config.runtime.version: electron version config.runtime.arch: target architecture after change and reinstall and rebuild:
clone: phofurl install with $ npm install create build using electron packager $ electron-packager "folder/to/project" ajaxtest --platform=win32 --overwrite --prune=true - -arch=x64 --out=release-builds --electron-version=4.1.0 copy build to shared network drive attempt ajax call with test button
use phofhyperlink and use it to install any chrome devtools.
then remove that code from your project.
the extensions will still be available and only deleted by specifying
this * should * do it, but i don't have access to a mac to try a standalone example: 1. download electron-quick-start phofhyperlink 2. add in `main.js:createwindow` 3.
`npm start -- --disable-gpu` 4. observe the output in the console
1. download electron-quick-start phofhyperlink 2. add in `main.js:createwindow` 3.
`npm start -- --disable-gpu` 4. observe the output in the console output when using `basic` mode (it also happens using `complete`, but i 've been unable to capture the output just now due to #17187): phofcode
1. download electron-quick-start phofhyperlink 2. add in `main.js:createwindow` 3.
`npm start -- --disable-gpu` 4. observe the output in the console
the distribution works fine except on this particular user.
the following can be loaded in electron fiddle to demonstrate the issue phofurl
run electron app and close it immediately before the content was loaded.
tested with the quick start example ( phofurl and an html5 website.
simply load this url on any electron v5.0.x phofurl it will show it is supported and the output in the page shows that a window is created.
captura de tela as 11 26 22 phofimage
there is a webchat page, it has a `beforeunload` event listener: phofcode it works well in browser, but in electron, it got a error: image phofimage **blocked attempt to show a 'beforeunload' confirmation panel for frame that never had user gesture since its load.
** but the window still stay there and can not be closed anyway i can not modify the web chat page, i have to solve it by electron's way
using java and current selenium bindings: phofcode
example that calls popupcontextmenu twice: main.js: const {app, menu, tray, nativeimage} = require( 'electron ') function main () { tray = new label: "test" }])); settimeout(() => tray.popupcontextmenu(), 3000) tray.popupcontextmenu()
- go to page with findinpage functionality - go to any other page - go to page with findinpage functionality again and try to search somethin
install vs2017 or vs2017 build tools, cmake 3.12.0 and cmake-js (global and apply patch phofurl in package.json "devdependencies": { "electron": "5.0.0-beta.5", } "cmake-js": { "runtime": "electron", "runtimeversion": "5.0.0-beta.5" } cmakelists.txt must include the line ${cmake_js_lib})" which will direct to the node.lib included from: phofurl (x64) or phofurl (ia32) both files point to node.exe
package an electron app (eg.
electron-quick-start phofhyperlink with electron-packager or phofhyperlink with built-in electron-builder) and give the electron app accessibility permissions (on macos: security & privacy > privacy > accessibility).
open the app and it will hang/freeze for a few seconds before opening.
phofurl phofcode sit back and wait for a few seconds for the app to crash with exit code 127.
(or exit code 1 if started from npm or yarn).
1. install current flash player for chrome on your system (ppapi - flash player 2. run the electron fiddle example from my gist phofurl 3. right-click on the flash content in the flash about page, that is automatically loaded in the browserwindow, context menu should be open now 4. wait ~1-2 minutes until context menu automatically closes -> the application is now unresponsive and context menu cannot be opened again
1. use macos 2. clone this repo: phofurl phofcode 3. enable the "british" keyboard layout 4. start the app 5. use cmd + ` to toggle between the two spawned windows 6. switch keyboard layout to "british - pc" 7. try to use cmd + ` again, but note that the windows no longer toggle (nb - backtick key will have moved; verify you 've got right key by trying to type it somewhere) for completeness, here is simple code in repo: phofcode
1. turn on `nativewindowopen` 2.
`const newwindow = window.open("", "_blank", "");` 3.
`newwindow.onload = () => {...} //onload is not defined` image phofimage see phofurl for a quick example
just run the code line above
open devtools in electron and run phofcode
$ git clone phofurl $ electron .
master branch(commit: follow electron build instrunctions in widows 10
/ code phofcode edit: not sure if helpful: phofcode
$ git clone phofurl $ npm install $ npm start || electron .
just run the electron-quick-start example.
$ git clone phofurl $ npm start
just create new browserwindow, then right click on the app icon in the dock.
(see phofurl at least it should be a way to control that, this can be achieve for top level window with: `[window_ indeed [window returns false by default, see phofurl `use the method of nswindow if you want the item to remain excluded from window menu.` phofurl
const axios = axios.create({ baseurl: proxy: false, httpsagent: new https.agent({ requestcert:false, rejectunauthorized: false, ca: cert: key: }) }); = `centri-username centri-key => { console.log(response); })
//renderer await { fxname: "printtopdf", fxargs: null }); //main global.printtopdf = async () => { let out = await new promise((resolve, reject) => { { marginstype: 0, printbackground: false, printselectiononly: false, landscape: false }, function(error1, data1) fs.writefile(rootdir + "/ui/temp/print.pdf", (data1, error1) => resolve("success"); }); } ); } }); return out; }
to reproduce, take a windows 10 laptop with 2 monitors and use this docking station phofhyperlink to plug the two monitors in while operating the laptop in clamshell mode in this case you will also notice that the id printed by `.getsources` is `screen:3:0` while traditionally if 1 display is available it would return `screen:1:0` which seems quite peculiar you can see the issue being logged out in this custom built version of our loom application: phofurl
this happens randomly, but also when i open the app and open another one on top if, so the previous app is in the background, and i resize the app that has focus, app in background gets blurry.
and it also happens when has focus, but only focused part works and other parts of gets blurry, like menu or other grid panels etc.
phofcode i don 't have right now more websites to report, but i saw that this happens not only navigating to ` phofurl
1) download this phofurl 2) create `mine.js` like this phofcode 3) run `electron .
--inspect` from command line 4) in command line you see 11, 11, 11 5) but in chrome dev tools you dont see none
create 2 webviews on main window with different session partition.
try to insert a record into a table from a webview and then select it from another webview.
simply copy the example code to a fresh javascript file and run it using `electron file.js
use electron-packager or electron-builder with electron version mentioned and build your executable.
1. use the code from expected behavior in any electron app with version starting from 3.0.13, and test it multiple times (a lot), observe a random issue described in actual behavior.
phofurl phofcode 1. click "copy to clipboard" 2. paste image to different app (like gimp etc)
if you provide a url, please list the commands required to clone/setup/run your repo e.g.
phofcode and set any printer name to silent: true, printbackground: false, devicename: 'hp laserjet 1020' }) set any installed printer name
just begin an application and setup a menu.
this is a part of my menu setting code: phofcode
build a python binary with pyinstaller (i can supply mine if you trust it) and try spawning it this way
phofcode webview dev tool console in top context phofcode webview dev tool console in extension context phofcode
open a window of an electron app, put it on a secondary monitor, and then maximise it.
as far as i can tell, the icon doesn't show up on linux when your package.json name contains underscores.
i managed to isolate this and just removed the underscores from my name but this doesn't feel right so i'm reporting it
create directory with following 3 files, then run `electron .` from command line: 1. package.json: phofcode 2. main.js: phofcode 3. index.html: phofcode
code is unfortunately proprietary for now.
phofcode essentially it does the following things: 1. installs a chrome plugin (i.e.
vue.js devtools) 2. inlcudes a `<webview>` tag in the app with the attribute.
2. opens the devtools of webview (e.g.
package.json phofcode startup part of electron.js phofcode
phofcode version 5 will randomly crash, version 4: doesn't
try compiling typescript such as: phofcode tsc throws an error: phofcode i was unable to see how types are generated, so a pr isn't forthcoming.
clone this minimal reproduction repo: phofurl to reproduce, do the following: # reproduction steps phofcode **observe that the expected and actual output match in electron 4.0.3 and differ in electron 4.0.4!
1. run code from this electron fiddle phofurl main logic is in `renderer.js` 1. open developer tools console to see logs
phofhyperlink link issue#16156 phofhyperlink link issue#16413 phofhyperlink
- configure fiddle to run phofhyperlink - add to main process code - add `<input type="checkbox" />` to html code - run the app
create a browserwindow with a fixed height and log the height before and after minimising/restoring on a windows machine.
phofcode the application will create 3 windows.
close the main one and the grandchild will remain opened.
it does however gets closed on windows and macos.
define an url scheme like described in phofurl and open the electron application with another like so: myelectronapp:// phofurl
git clone phofurl cd electron-quick-start npm install npm start -- -u superuser --env environment --manifest " phofurl --token dev ``
only updated electron to 5.0.0-beta.2 just open
this is a tricky one to reproduce, the bare minimum would be: phofcode and packaged as an `appx` with `electron-builder` or with this guide phofhyperlink .
run an interval with on a printer while it is printing
manifest.json snippet: phofcode code where i 'm adding the browser extension: phofcode
i also get main env by using but due to nothing in process.env webpack not find any external modules from node_modules image phofimage image phofimage image phofimage
const nightmare = require('nightmare'); const nightmare = nightmare({show: true}); dologin() async function dologin() { ttry { t tawait nightmare t t .goto(' phofurl // actual url is different t t t} catch (e) { t throw (e) t} }
this issue was first observed in a pdf.js-based viewer embedded in our application.
i have created a simple application that emulates pdf.js printing behavior, here: phofurl the readme contains details of the testing that i have conducted
play with this repo phofhyperlink and change the delay.
you can test this out with my application at phofurl or just add to your own code and see that electron 4.x.x does not disable vsync, $ git clone phofurl $ npm install electron@latest $ edit main.js and remove // from and save $ npm start from directory now open the terminal in the directory and do npm install electron@3.1.3 npm start in the directory again you will see the disable vsync argument not in effect a massive jump in game webgl performance instead of being capped at 60
enable and load any content in a subframe.
create any browserwindow instance, and execute a console log of the return value of `isvisible`, move the window behind other application windows, so that it is no longer visible on the user screen.
the values returned will always return `true`, unless the window is minimized.
`<webview src=" phofurl width:640px; height:480px" ></webview>`
add the menu item to a menu (replace ${nav})` with = 'none '` to make it even simpler
phofurl there should be one menu item visible (zoomin) and zoom out should also work but it doesn't.
(my issue is with zoomin but since that is kind of broken i did the demo with zoomout) menu code looks like phofcode phofcode
1. create a app using cra 2. npm run build 3. terminal will show build result
i 've produced a freshly squeezed reproducible test case to illustrate this problem 1. clone phofurl 2.
`npm install`, `npm start`, and observe the button firing web worker code in dev 3.
`npm run build` and observe no files being build into the `build` directory.
4. remove the import from the worker and associated code in `app.js`, and observe that it now builds as expected.
1. create a new app which has a dependency on react-app-polyfill 2. leverage another dependency which happens to use some version of 'core-js' 3. build using a webpack duplicate package checker plugin such as phofurl alternatively: 1. create new react component to be used by a downstream app (partner team).
2. use react-app-polyfill in your component.
3. note that your component now has pinned dependency on 'core-js' 4. downstream partner team uses the webpack duplicate package checker plugin ( phofurl 5. downstream partner attempts to integrate your component, but their build fails because react-app-polyfill insists on specific (potentially older) version of core-js than they are using.
error such as: > `multiple versions of core-js found:` >` 2.5.7 from d: code ... >` 2.6.10 from
1. run create-react-app referencing a template in a scoped package: `npx create-react-app@next --scripts-version=@next app-name`
1. run `npx create-react-app <app_name>` 2.
(write your steps here:) 1. create a new cra app.
2. open `app.css` and add `opacity: 70%` to the .app-header class.
inspect the header element and confirm that the opacity is 70%.
once the build is finished, open minified css file in `build/static/css`.
search for `opacity` and observe that it is 1%.
(write your steps here:) 1. create a react app 2.
'yarn add @material-ui/core ' 3. import the module somewhere 4.
'yarn start ' the bug: image phofimage
1. create a global enum 2. compare a value against it 3. get a stern warning
1. create two cra apps and build them.
they have to have chunks 2. deploy both apps on a single index.html 3. open the index.html.
only one app will show up
1. find an svg such as this one ( phofurl 2. write a simple react component phofcode 3. try to build notice the error is thrown while importing the svg.
step 1 - this is what my package.json looks like.
<img width="525" alt="screenshot at 10 39 50 pm" src=" phofurl step 2 - i run my code on local machine using `npm run start`.
everything works fine without any errors or warnings.
<img width="377" alt="screenshot at 10 40 20 pm" src=" phofurl step 3 - hence, i go and create a production build using `npm run build`.
which creates a `build/` folder for me.
this is what it looks like.
<img width="583" alt="screenshot at 10 41 02 pm" src=" phofurl step 4 - so, i check how my build folder looks like using serve.
<img width="429" alt="screenshot at 10 41 28 pm" src=" phofurl 5 but!
this happens when i open `localhost:5000`.
width="1680" 42 18 do not have enough expertise to debug the issue, hence decided to post here.
am guessing this has something to do with babel-loader or babel.
1. visit phofurl 2. inspect a link element via dev tools
(write your steps here:) 1. go to create-react-app.dev 2. in the navigation bar, change the sun toggler to ** night ** 3. the dark theme will appear 4. scroll down on the home page to see the **get started in seconds** section 5. observe that this section ignores dark theme
(write your steps here:) 1. npx create-react-app hello-world 2. cd hello-world 3. npm start
(write your steps here:) 1.
`yarn add node-sass` 3. create `common.module.scss` and write a class with some scss in it.
4. create app.module.scss and write some scss in it, with an element that composes the class from `common.module.scss` 5. import the class from `app.module.scss` and apply it to an element 6.
(write your steps here:) 1. npm install react-scripts 2. npm audit 3.
after use "npm run reject", i found there is no svg loader defined in webpack.config.js.
i transform svg image to png format, then no issue in production load.
below is what i found: phofcode
1. run `yarn create react-app app`
(write your steps here:) 1. yarn install 2.yarn build
1. create a folder and a sample .gitignore file 2.
`cd` into the folder and run `npx create-react-app .`
(write your steps here:) 1. open serviceworker.ts phofhyperlink 2. click on the link: phofurl
1. initialize app with cra 2. add .env.development file (see contents above) 3. npm start
** package.json ** phofcode run `test:coverage`, the console shows a message that test coverage failed, but the test passes.
(write your steps here:) 1. create a new project 2. create an mp3 inside src 3. set homepage in package.json to "./" 4. import the mp3 5. console log the url in watch mode and in build mode
1. try out `react-scripts test --ci` and `cross-env ci=true react-scripts test`
(write your steps here:) 1. you can clone the github repo of the project i made (a simple minesweeper app for learning react) phofurl (or you can just go to my application phofhyperlink and skip step number 2.
2. create a new heroku app and deploy the project.
3. run "ctrl + shift + i" while your looking at the application in chrome.
4. go to "sources" tab in developer tools.
reproduce 1) npx create-react-app sample 2) it will then post image phofimage image phofimage 3) it will default to select 7.6.3 4) cd sample 5) yarn install image phofimage image phofimage
`npm install --save enzyme enzyme-adapter-react-16 react-test-renderer` 2. created `src/setuptests.js` and configure adapter.
phofcode 3. use `npm test` to run tests where enzyme's `shallow` is used.
(write your steps here:) 1. create new app using npx: `$ npx create-react-app error-test`.
make sure `yarn` is not installed.
2. go to `error-test/src/app.js` and add following code to the end of the file: phofcode 3. run `$ npm start` from `error-test` directory
i have my structure setup like this phofcode phofcode i used to have the path setup as phofcode however this caused other pathing errors and the application wouldn 't load in the browser.
so i changed to the new path, and now fonts fail to load, however app is running now.
the previous error i was getting, using `$font-path: "./assets/fonts/icons" !default;` as path.
create a new project and insert a line of comments like this: phofcode then try to build or start the app.
1. clone cra locally 2. run e2e tests via docker 3.
1. have a project that contains for.. of loops 2. upgrade to react-scripts 3.1.1 to address security vulnerabilities in previous versions 3. eslint fails because of false positives, unused variables in the for .. of loops
(write your steps here:) 1.
(write your steps here:) 1. mock a dependency in 2. write a test that depends on the mock 3. run tests
`npx create-react-app test_app && cd test_app` 2.
`yarn add node-sass` 3. create `b.module.sass` with phofcode 4. create `a.module.sass` with phofcode 5. in `app.js` add as the first line `import './a.module.sass'` 6.
`yarn start` and observe the error --- 7. rename `b.module.sass` to `b.module.css` and replace the contents with phofcode 8. in `a.module.sass` change `b.module.sass` to `b.module.css` 9. observe that the error is gone
1. an application may have a folder structure where separate `/node_modules` and `package.json` files exist, such as the following : phofcode 2.
`cd` into `~/my-app` and setup a `create-react-app` project called `client`.
3. introduce some lint errors in the main `app` component: phofcode 4. observe that the linting rules included with `create-react-app` do not work in the `/client` subfolder where project was created.
however, linting does work if project was created as root, or if project 's subfolder is opened as root in vscode.
1. create a mock for a node module in `<project root dir>/__mocks__`, as explained in the jest documentation for mocking node modules phofhyperlink 2. use the mock in a test
1) write a custom sass function and import and use it in others module.scss files.
2) modify any module.scss file.
1. after creating a react application with cra, create a js file with some jsx code.
2. create a corresponding module.css file and import in js file from 1.
3. add styles and edit.
1. add some cli argument for `setupfilesafterenv` to your `package.json` e.g `"test": "react-scripts test 2. run `yarn test` and see that the setuptests file is not being executed
use the ie9 polyfill inside a webworker, loaded by worker-loader ( phofurl
(write your steps here:) 1. running `yarn build` 2. getting build error as described above
1. create a new app with create-react-app 2. add dependencies so that the total amount of files in the project (including node_modules) is larger than the file watch limit (`cat my project doesn't even have many dependencies.
mostly added with `npm i apollo-boost graphql react-apollo -s`.
and it already created three times as many files as the maximum currently allowed by system to watch.
i would expect this problem to be quite common on some systems.
(write your steps here:) 1.
(write your steps here:) 1. create a new cra ` yarn create react-app test` 2. build and run it : `yarn build && serve -s build` 3. add this line at the top of index.js (the entry file) `// `__webpack_public_path__ = ' phofurl
1. create a test file suffixed with `.test.
{js,jsx,ts,tsx}` within your `src` folder 2. build your project: `yarn build` 3. search the `build/static/js/*` files for either the name of your test file or the name of a test within your test file and you should find it included in the compiled js files i had also tested locally without typescript and found same behavior occuring.
1. have `app.module.scss`, as a stylesheet using sass features (such as variables for background colour) 2. have `other.module.scss`, as a stylesheet, with a class name that composes something from `app.module.scss` 3. import both `app.module.scss` and `other.module.scss` 4.
1. add `prisma-client-lib` as a dependancy 2. insert your generated types/schema from a `prisma` project.
`import { prisma } from 4. use `prisma.
[x]` in a react component, so it gets called at any point in time.
(write your steps here:) 1. yarn create react-app my-app --typescript
create a simple function in your cra project with something like: phofcode ` run `npm start`
1. create a new app with "npx create-react-app" 2. add test.module.css file and import in in app.js 3. try editing the css module file, it will reload the whole app.
`touch .eslintrc.js` (or `.eslintrc.json`, `.eslintrc.yml`) 4.
`extend_eslint=true yarn start` ~note that in step 3 the contents of eslintrc doesn 't matter.
a valid eslintrc will also fail.~ edit: this is a bit more nuanced.
the following works: phofcode this does not: phofcode but this does: phofcode
`yarn add -d eslint-config-prettier` 1. phofcode `echo "/* eslint-disable prettier/prettier */" >> src/app.js` `yarn start`
(write your steps here:) 1. create a manual mock of any node_modules package 2. put it to __mocks__ directory 3. run your test
`npm run build` to create the production build 2. run the production build in the browser and see the error in console
`npm i react-scripts typescript` 3. look at the "npm warn": phofcode 4.
`npm i eslint@5` 5. look at the "npm warn": phofcode
1. i am trying to run create-react-app and it keeps deleting the folder that 's created because of an error
1. install the latest `core-js` 2. polyfill `promise.allsettled` from 3. try to call `promise.allsettled` in edge
(write your steps here:) 1.
`create-react-app test --typescript --use-pnp` 2. cd test 3. yarn 4. yarn start
1. create a new app with `create-react-app`.
2. edit `public/index.html` and add a the snipped below after `<body>`.
3. run `npm run build`.
1. npx create-react-app my-app 2. cd my-app 3. npm run build 4. serve -s build 5. browse to phofurl 6. redirected to google.com
1. npm install -g create-react-app 2. npx create-react-app my_app 3. cd my_app 4. npm start
1. create a react app 2. add `"proxy": " phofurl to `package.json` 3. observe console - `the connection to was interrupted while the page was loading.`
that brings in the vulnerable dependency.
see $7164 for a trivial reproduction of the issue.
1. run the build script 2. run the source-map-explorer on the production js files
1.create react app 2. run npm run eject 3. write a js file with es6 features 4. create a spec file and import it
1. go to folder you want to create the react app in -> cd testreact 2. run create-react-app app-name -> create-react-app react-test-app
(write your steps here:) 1. run create react app `npx create-react-app bug-demo` 2. create a file called `setupproxy` directly in the src directory 3. install the npm package `http-proxy-middleware` and then paste the code below in `setupproxy` phofcode 4. create a file called `servicecontext.js` in the src directory.
and past below code in it phofcode 5. file `app.js` import `servicecontext` and paste below code immediately after app component declaration phofcode 6. try to make a change to component body;
(write your steps here:) 1. setup lerna mono repo.
2. create cra project as a package.
3. create a normal javascript package with jest as devdependancy.
4. try to start the cra.
(write your steps here:) 1. create new project using react-scripts from master (after #6060 was merged) 2. make the app component import and use an images larger and smaller than 10,000 bytes 3. add a `.env` file containing 4. run `yarn build`
copy/paste this lines in a react component and try out var ipc = require('node-ipc'); ipc.config.id t t= 'example.server'; t tipc.config.retry t= 1000; t tconsole.log(ipc); function(){ function(data){ t t t tvar err = data.error; t t t tdelete data.error; t t t t//cb(err, data); t t t}); function(){ t tipc.log('## connected to example.etl ##', ipc.config.delay); t t}); });
1. remove chromium from your system.
2. npx create-react-app anyapp 3. cd anyapp 4. npm run start
(write your steps here:) 1.
1. npx create-react-app app --typescript 2. cd ./app 3. npm start 4. in the `src` folder create file `test.ts` with the following content: `export { default } from "./app";` 5. in the `src/index.tsx` change the 4th line to: `import app from "./test";`
3. copy my `launch.json` code from above into `.vscode/launch.json` (create it if it doesn 't exist yet).
4. run `npm start` in the integrated terminal.
don 't start chrome debugger yet.
5. open `src/todolist.js` and set a breakpoint on line 23 (`const { todovalue, items } = this.state;`).
notice how the breakpoint has moved down to line 25.
`npx create-react-app cra-bug` 2. add `"proxy": " phofurl to package.json 3. run a web server on port 5000 (ideally one that logs requests) 4.
1. create a new cra app with `npx create-react-app reproduction` 2. paste this code into `index.js`: phofcode 3. start in dev mode with `yarn start` and observe a blank screen.
4. start in prod mode: `yarn build && serve build` and observe word "hello"
1. run command npx create-react-app my-app 2. open project directory by using comment cd my-app 3. run the app via comment npm start
1. npx create-react-app my-app 2. examine 3. open the link in the comments
1. i 'm using postcss-modules-values library for creating variables for my css-modules 2. variables isn 't working on a regular / non-modules css/scss files, i could use css variables but i don 't want to refactor my codes because i 'm already using postcss-modules-values, in my previous project i 'm using gatsby and it works fine even with non-module css/scss files 3. it works without an error but the variable values aren 't there, 4. as much as possible i don 't like to eject my project, it 'll be last resort if ever.
i am not sure how to reproduce this.
1. i added some variables at project start, then i worked on app without changing it.
2. today i tried to change some of these variables, but nothing change when start my app ( development or production have same result )
1. write any react app that imports the file linked in the gist e.g.
`import {helloreply, hellorequest} from './helloworld_pb';` 2. you can make use of this, instantiate the class etc.
3. see the compilation issue thrown by eslint 4. add eslint disable command and see that all works fine as expected note: i am using react with typescript here btw, but don't think that makes any difference here.
1. create a new app using `create-react-app myapp`.
now go to app directory using `cd myapp`.
2. add `dotenv` as a dependency by `yarn add dotenv` and configure it into your `app.js` file by writing the following code: phofcode 3. now create a `.env` file in root folder of the project and put an example environment variable:- page` .
4. now create a new file called `callback.html` into the `public` folder and add following code to this file: phofcode 5. now start the development server and go to page 6. you can see that `title` of page is
`npx create-react-app test-app --scripts-version (though i suppose you could generate the standard template and remove the `optionaldependencies` key just the same) 2.
1. install gatsby and initiate a new gatsby project 2. follow these steps phofhyperlink to add a custom `.eslintrc.js` to a gatsby project the error should pop right up if you use vscode for example.
`create-react-app minification-test && cd minification-test` 2. replace `app.js` with phofcode 3.
`serve -s build` (`npm install serve -g` if needed)
(write your steps here:) 1. add a new markdown doc 2. enter the following phofcode
1. mkdir -p bug/gitlab-pages 1. cd bug/gitlab-pages 1. npx docusaurus-init 1. cd website yarn start
add an escaped html tag to an `h3` header
1. open devtools and focus on styles (body eg) 1. open home page ( phofurl and we can already see that the styles are duplicated!
image phofimage 1. alright, go ahead, click on docs ( phofurl in navbar and check the styles in devtools again, now the styles are duplicated several times (**+3 new**)!
try this code within a docusaurus md file phofcode
(write your steps here:) 1. add doc link in `sidebars.js` code phofcode 2. run `npm run start`
(write your steps here:) 1. clone phofurl 1.
`yarn` you 'll see that the highlight on the front page works.
however, remove this fix from me in package.json: phofcode and remove `node_modules` and `yarn.lock`, then `yarn` again.
it 'll install a newer highlight.js, which gives plenty of cli errors in docusaurus and the snippets fail to highlight
(write your steps here:) 1. go here: phofurl 1. notice when you change pages the "docs" navbar item is not "active".
1. open a web browser 2. go to phofurl
trying to swizzle the navbar from the classic theme.
this is can be achieved by following the `swizzling theme components section` of the v2 documentation phofhyperlink .
the changes introduces by these steps can be found here on our docusaurus v2 implementation phofhyperlink the motivation behind swizzling this element is that we want to be able to switch our logo from navbar from dark theme to light one.
in former case we would use one source while using another one for latter case.
1. add a `<h2 html tag anywhere in a documentation markdown file.
2. notice it does not show up in the right toc.
(write your steps here:) 1. visit phofurl and toggle dark mode
1. doc page with a markdown
(write your steps here:) 1. go to phofurl 2. type "with" or "use" into the searchbar.
3. the styling for the search result is broken image phofimage
1. go to docusaurus ' documentation site here: phofurl 1. in the search box, type query such as `version`.
the search result might look like this: - image phofimage 1. click on the result that matches the title/heading of this page (the first result in the above screenshot): phofurl 1. you 'll be taken to a page whose url looks like this: phofurl
(write your steps here:) 1. clone this repository: phofurl 1. run `yarn build` and observe that there are no build errors 1. run `yarn build --skip-next-release` and observe that there are following warnings about broken relative links: phofcode
1. docusaurus-init 2. add a folder `sub1` with two files `inner1.md` and `inner2.md` phofcode 3. in `doc1.md` link to `inner1.dm` and `inner2.md` doc1.md: phofcode inner1.md: phofcode inner2.md: phofcode 4. make a version 5. move `inner2.md` in a new folder `sub2`
(write your steps here:) 1. go on phofurl or any website generated thanks to the latest v2 version of docusaurus 2. inspect the dom 3. search for these meta tags within the dom phofcode 3. none of these variables are available
execute phofcode on some nontrivial amount of docs (e.g.
(assuming i haven 't worked around it by the time this issue is read:) 1. visit phofurl 1. click "cheatsheet" at the bottom of the page.
1. now visit phofurl 1. click "cheatsheet" at the bottom of page.
(write your steps here:) 1. create a new document 1. write an id different to `doc*` 1. witness how the sidebar doesn 't show up.
1. phofcode 2. phofcode 3. phofcode
1. i 'm starting a fresh install 2. yarn global add docusaurus-init 3. docusaurus-init .
3. yarn start --host --port 3000 the port 3000 is available phofcode
1) i set up my docusaurus application using docusaurus-init (see phofurl 2) i added a custom page as described here phofurl i.e., i added a js file to the pages/ folder.
1. go to phofurl type 'cleanurl ' in search box, click first search match, which will be: phofurl 2. go to phofurl type 'cleanurl ' in search box, click second search match, which will be: phofurl the gist of this issue, is that it doesn 't seem algolia should show matches twice for the exact same material, even though they have two urls.
(with html and without) the same issue can also be seen with the 'icon ' string as of today 8/7/19
at the windows command prompt: 1.
`cd` to the website directory of a docusaurus repository.
1. type `git_user=githubusername current_branch=master use_ssh=true npm run publish-gh-pages` replacing `githubusername` and press enter.
(it fails on my system.)
1. type `git_user=githubusername current_branch=master npm run publish-gh-pages` replacing `githubusername` and press enter.
(it fails on my system.)
`cd` to the website directory of a docusaurus repository.
type `git_user=githubusername current_branch=master use_ssh=true npm run publish-gh-pages` replacing `githubusername` and press enter.
(it fails on my system.)
type `git_user=githubusername current_branch=master npm run publish-gh-pages` replacing `githubusername` and press enter.
(it runs on my system.)
1. goto phofurl 1. navigate between two pages in the `the basics` group
1. in git bash or at the windows command prompt, `cd` to the website directory of a docusaurus project.
1. run `yarn examples versions`.
1. attempt to run `yarn version n.n.n` where n.n.n is a version number.
1. attempt to run `yarn version --new-version n.n.n` where n.n.n is a version number.
run `npm run n.n.n` where n.n.n is a number.
create a page wherein the first sentence contains markdown.
here 's an example from my site: phofcode
(write your steps here:) 1. create a folder `/website/static/foo` 2. create a `.css` file within `/website/static/foo` 3. start the development server 4. confirm that the css bundle contains the css content from `/website/static/foo`
(write your steps here:) 1. write `
1. add a cjk tag to blog 1. visit /blog/tags
1. download test projec: phofcode 2. start server: phofcode 3. navigate in chrome, -> docs -> contribute > help translate
(write your steps here:) 1. i installed docusaurus and tried to create new content, but it is not appearing in the side menu.
1. visit phofurl 2. scroll to the bottom
1. open phofurl in safari 1. scroll down
(write your steps here:) 1. just follow installation instructions and add an accent to any word in example website (even in a page, help.js for example)
(write your steps here:) 1. create a new docusaurus 2.x site 1. paste the above markdown snippet into a file 1. visit the doc page.
just add something like this in any md file: md
without yarn installed (when yarn is installed, it defaults to using yarn for the underlying commands).
note that both the following sets of steps exhibit the same behavior: 1.
`npm i -g docusaurus-init` 1.
`docusaurus-init` or `mkdir test-site` `cd test-site` `npx docusaurus-init`
1. npm install --global docusaurus-init 2. npm start inside the website folder
1. create a custom page using react in doc/pages/en e.g.
`custom-page.js` 2. add newly created page to sidebars.json phofcode 3. run docusaurus i 've tried adding `filename`, `filename.js`, `{ page: 'filename ', label: 'filename ' }` and `en/filename.js` none seem to work.
(write your steps here:) 1. create a doc with header like this markdown
(write your steps here:) 1. visit phofurl 2. hover over the chain svg for the `dispatch` heading and the content jumps ohno phofimage the markdown for this file is here: phofurl and the actual markdown looks like this: markdown
(write your steps here:) 1. add a `subcategory` to the sidebar for a subdirectory phofcode
(write your steps here:) 1. go to phofurl 1. go to the bottom of the page and click on "general"
(write your steps here:) 1. have a sidebars.json with some nested sections 2. view page on mobile 3. the outermost nav heading appears as the breadcrumb, e.g.
"frameworks" in instead of "dom testing library"
1. clone this repo phofhyperlink 2. install dependencies 3. build the page 4. check the built pages in ** **
(write your steps here:) 1.
`npm install --global docusaurus-init` 2.
`docusaurus-init` also tried it using command `npx docusaurus-init` but results are the same.
1. run `git clone phofurl on your terminal.
1. run `cd 1. run `yarn install`.
1. run `yarn run start`.
open < phofurl page on your browser.
click `foo_bar` link on the page.
make sure you are working on a docusaurus repository with versioning enabled 1. create a new page under `/docs/` directory with proper front matter (i.e.
`id`, `title`, `sidebar_label`) 1. add the new page to the `website/sidebar.json` file
please clone the repository at phofurl and follow the steps in the readme phofhyperlink file.
**example #1:** <pre><code> 1. do this &lt;!--tab1--&gt; phofcode &lt;!--tab2--&gt; phofcode 1. do that </code></pre> **example #2** <pre><code> 1. do this &lt;!--tab1--&gt; phofcode &lt;!--tab2--&gt; phofcode 1. do that </code></pre>
(write your steps here:) 1. follow the steps mentioned here: phofurl 1. create 2 documents (`doc1.md`, `doc2.md`) 1. create a link in `doc1.md` (` link to document 2 phofhyperlink `)
1. use the following markdown: phofurl 2. run docusaurus and view page.
(write your steps here:) 1. create multiple directories in `docs` 1. each subdirectory has a `index.md` (including the root `docs` directory) file and each of them has `id: index` as the frontmatter yml value and set the `sidebar_label` and `title` to be different from each other 1. configure your sidebar to show documents from each of those index files.
the `docs/index.md` should be the first page everything should be working as expected at this point.
now, create a new version by running `yarn run version 1.0.0`.
now, very first page of doc has title of `index.md` file from one subdirectory that is configured as first item in sidebar.
the `sidebar_label` is also changed accordingly.
however, contents pages are coming from `docs/index.md` as expected.
checked behavior in latest docs (i.e.
`docs/next/`) and that is working properly.
checked behavior other pages in latest version (i.e.
`docs/`) those seem to be accurate.
(write your steps here:) 1. put image under docs/assets folder 1. write md file to reference this image 1. run docusaurus-version to back up current version of documents 1.
.md file is backed up, but the asset folder isn 't.
note: i 'm using a local jest repository using docusaurus 1.7.2 to reproduce this 1. add some markdown formatting (such as bold, italics or code) to a h3 header on a document.
2. use a responsive website size small enough to have this ui: issue_23_first phofimage 3. click the vertical three dots button to see all references: issue_23_second phofimage 4. attempting navigate h3 section formatted with markdown will not hide the page, although it correctly redirects the url: issue_23_third phofimage
(write your steps here:) 1.
(write your steps here:) 1. visit phofurl 2. search anything 3. hover algolia logo
just roam around the sections in the official docusaurus phofhyperlink docs page.
this also happens after initial project bootstrap.
1. create a new site using docusarus 1. set `cleanurl` to `true` 1. set `url: ' phofurl 1. build the site
1. create a markdown page that has lots of h1/h2 tags with different names.
2. view the table of contents on the right hand side 3. scroll down in chrome and view that some of them are cut off.
1. add the example page on docusaurus docs phofurl 2. remove comments (docusaurus_code_tabs, javascript, and the link `[link][test-link]` will work.
i am running docursaurus phofhyperlink on chrome 71 for windows 10 version 1809.
(write your steps here:) 1. add `docsurl: ''` to `siteconfig.js` 2. i then followed the following instruction and created an `docs/assets` directory with my images.
phofcode the site does not render the images in the docs.
at first, i thought it's because i'm referring to the assets from markdown files that are in subdirectory.
trying to manipulate url to images in markdown files didn't help.
then i tried it from markdown files that are directly under `docs` directory.
images still would not render.
removed `docsurl: ''` config from `siteconfig.js` and now image links are working even from markdown files that are in subdirectories of docs.
(write your steps here:) 1. mess up link in md 1. deploy app with translations 1. watch in horror as most translations are deleted from `gh-pages`
1. for example, define a gridblock component like described in phofurl (without `imagealign`) 1. render the page and verify the image is not shown.
1. start with a file `docs/sub1/doc1.md`, with `id: doc1`.
it is accessible as `/docs/sub1/doc1`, as expected.
2. run `yarn docusaurus-version v2`.
1. initialise a new docusaurus project.
2. rename the example docs directory to `docs`.
3. yarn install the modules in the website directory.
4. delete the example blog directory.
5. remove blog entry from `headerlinks` in `website/siteconfig.js`.
6. add `docsurl: ""` setting to `website/siteconfig.js`.
7. add `docs/assets` directory and put an example image in there.
8. link to your example image in a doc document: ` phofimage `.
1. run the following script to generate a starter versions page listing all the site versions: `yarn examples versions` 1. this creates the `pages/en/versions.js` file.
1. run the script with a command line argument of version you wish to create.
: `yarn run version 1.0.0` 1. start server: `yarn start` visit site on your local host: phofurl try "documentation" and "release notes" link
browse to a docusaurus mobile site on an ios 12 device.
1. create a docs within a subdirectory.
in my case: phofcode 2. create a version 0.0.1 using `yarn run version 0.0.1` 3. see the following generated file in website.
in my case: phofcode 4. compile the project.
it fails with the issue described above: phofcode
a couple months ago, we set up the initial docusaurus config for redux.
that 's been sitting on a branch since then, and i 'm just now poking around at it further.
the redux docs have numerous inter-page links.
examples from the current docs: - "store" phofhyperlink -> "glossary" phofhyperlink , using this link: ` state tree phofhyperlink `.
- "reducers" phofhyperlink -> "actions" , using this link: ` actions ` in our test deploy site at phofurl , it looks like most or all of the internal links are broken.
1. clone the redux repo at phofurl 2. check out `docs-rebuild` branch, specifically as of commit phofurl 3. start docusaurus 4. inspect internal links such as those pages, and note that they point to something like `/basics/actions.md`, instead of `/basics/actions`, even though file has an id, has been added to sidebar, and is correctly linked from sidebar.
(write your steps here:) hard to show since it 's in a private repo, but: 1. create a new version 1. run a dev server 1. change some mark down doc file (any title or content) in the current version, add to sidebar 1. add a new page in the current version, also add to sidebar restart dev server
1. add some docs 1. edit the sidebars.json 1. run with `npm start`
sidebar definition `sidebar.json` phofcode yields after running `npm run version oryos.9` in phofcode
`git checkout -b reproduceme` 3.
`npm run start` (check that everything works, then sigkill/sigterm the task) 6.
`npm run example versions` 7.
`npm run version 1.0.0` 7. run version 2.0.0` 9. build` fails completely: > error: processing the following `doc` field in `headerlinks` within `siteconfig.js`: 'index '.
check the spelling of your `doc` field.
if that seems sane, and a document in your docs folder exists with that `id` value, then this is likely a bug in docusaurus.
docusaurus thinks one or both of translations (currently set to: false) or versioning (currently set to: true) is enabled when maybe they should not be.
thus my internal id for this doc is: please file an issue for this possible bug on github.
`docusaurus-init` a new folder 2. make two files, `a.md` and `b.md` in the docs directory, with ids `a` and `b` respectively 3. create a link in `a.md` as such: ` click me phofhyperlink `
1. start the webserver 1. edit anything see that the page refreshes.
1. edit the same file again.
1. run `npx docusaurus-init` and `yarn start` 2. visit `/docs/doc1` 2. the pagination is `next ` 3. downgrade your docusaurus version to `1.3.2` 4. the pagination is `documentation 2 `
1. start any of your doc.md files with markdown formatted text including i.e.
pictures, links, bold/italic text, etc.
2. run your application to render the changes.
3 .navigate and then copy a url address of the doc that you just prepared.
4. check <meta> tags in header of your doc file inside your browser dev tools or paste url link, that you copied in previous step into the open graph check phofhyperlink and look for _og:description_ meta tag.
node 8.11..4 yarn 1.9.4 docusaurus 1.4.0 os: windows 10 1. create new github repo 1. clone repo 1.
`npx docusaurus-init` 1. rename docs and blog `cd website && yarn start` to verify it is working locally edit `siteconfig.js`.
- projectname: `moddingslaythespire`, - organizationname: `alexdriedger`, set `git_user` to `alexdriedger` as environment variable on windows `yarn run publish-gh-pages`
1. initialize a new repo on windows 2. try to publish the repository
1. curl phofurl 2. you can see phofcode 3. source code is here phofurl <img width="515" alt="screen shot at 3 28 39 pm" src=" phofurl
(write your steps here:) 1. go to any docsearch page 1. make sure it has #989 deployed 1. see it's overly spaced
1. go to any page on the docusaurus website 2. resize screen < 1024px 3. type anything in the search bar
(write your steps here:) 1. clone phofurl 1.
`yarn start` (to run site locally) 1. run the publish script to publish to `gh-pages` see problem (you may be able to see it if you just do a `yarn build` and run the site form the `build` directory).
we guys tried to update the title of a markdown file but we can't do it.
for the previously(before 05 sep 2018) created markdown files title are working fine but for newly(on 15 sep 2018) created markdown file it has some issue with displaying the title.
our markdown file is presented folder inside a folder which for our understanding and convenience.
1. syntax was given as which has correct title structure 1. saved the file and necessary changes were made in sidebar.json 1. restarted server 1. title and sidebar appear as api/login
1. in `siteconfig.js`, in the `highlight` field, add this: phofcode where `reasonhighlightjs` is an existing callback that adds a new highlighter.
1. run dev, see that the custom highlighting works
1. create folder (eg: test-pages) 1. run `npx docusaurus-init` (installing and then executing globally yields the same error) 1. rename folders to /docs and blog 1. run `yarn start` yarn --version 1.9.4 npm --version 6.2.0 node --version 10.9.0 macos 10.13.6
1. i honestly don 't know - there 's no difference that i can see between the docs that are doing this and the docs that aren 't, other than being in a different subdirectory.
i thought it might be video embeds at first, but the post in the third screenshot has no video...
1. create a subdirectory of website/static, e.g., website/static/api 1. put a few html and css files in there.
ideally run doxygen to generate a documentation tree in static/api.
1. run the build command, the
1. checkout a storybook app 1. generate a static version of storybook 1. put that folder in assets/*
1. go to phofurl 1. click on blog title original issue: phofurl
1. choose a value for `id` for a page 1. use the same value of `id` for `sidebar_label` as well 1. use a `title` that is not the same as `id` or `sidebar_label`
1. go to phofurl 2. see that it does not contain the changes from phofurl
1. set `onpagenav` in `website/siteconfig.js` to some value other than 'separate' (to hide the right side nav menu).
1. go to phofurl phofhyperlink
1. create a new website 2. set `siteconfig.js` as phofcode 3. take a look at the generated `sitemap.xml`.
1. set cleanurl to `true` in siteconfig.js 2. reference an image from the `assets` folder within your markdown file 3. browse to the clean url, e.g.
`docs/contributing`, instead of `docs/contributing.html` 4. image in clean url is broken, in .html document image will work.
1. open safari, make sure browser is vertically small 1. go to phofurl 1. scroll the main area til the bottom 1. try to scroll sidebar
create a `.md` file with the following content: phofcode text function $inithighlight(block, cls) { try { if != -1) return process(block, true, 0x0f) + ` class="${cls}"`; } catch (e) { /* handle exception */ } for (var i = 0 / 2; i < classes.length; i++) { if === undefined) } } export $inithighlight; phofcode js function $inithighlight(block, cls) try if != -1) return process(block, true, 0x0f) + ` class="${cls}"`; catch (e) /* handle exception */ for (var i = 0 / 2; i < classes.length; i++) if === undefined) export $inithighlight; phofcode `
1. create an assets folder within the docs folder and add an image there 2. add a new document and link to that image ( phofurl 3. add a baseurl to the siteconfig (/test/) 4. yarn start
1. set up a new docusaurus project using the stable version.
2. edit siteconfig.js to add githubhost.
4. load any page inside
1. new docusaurus 2. add cdn script 3. run locally 4. see the console
`npx docusaurus-init` 1. cut a new version.
phofcode 1. the sample `doc2.md` has a link to `doc3.md`.
so we can rename `doc3.md` to something else and update the link in `doc2.md`.
start docusaurus now and you 'll find that in the "next" version: phofurl the link works correctly, but in the current one: phofurl it does not.
use typescript 2.4.2 install react 15.4 install jest with jest types for typescript 2.4.2 install enzyme with enzyme adapter 15.4 in tsconfig compileroptions use target: es5 write a simple test which does only following: describe('enzyme basics', () => { beforeeach(() => { } )); }); aftereach(() => { }); it('should be ok', () => { }); });
1. clone this repo phofhyperlink 2. checkout the `jest-github-issue` branch 3. run `npm install` 4. create `.env` file containing `node_env=test` 5. run `npm test`
when there is any difference detected with the `tomatchobject()` matcher a `localdate` from `js-joda` is always reported as changed even though the values are the same.
observed result: phofcode steps to reproduce the behavior: phofcode
1. go to phofurl 2. click on an entry with an equal sign
- create a component that uses react-redux.connect - create a test that does a shallow rendering of the component - use tomatchsnapshot steps to reproduce the behavior:
steps to reproduce the behavior: phofcode
this code in a test module causes jest to wrongly think a promise rejection isn 't going to be handled.
phofcode output: phofcode note that nothing in the output conveys the real reason this test failed.
steps to reproduce the behavior: 1. install `@types/mocha` 2. install `@types/jest` (looking for expect only types without jest) 3. add both of them to tsconfig in order to use `expect` types with mocha runner
steps to reproduce the behavior: 1. create an async function with a throw condition.
2. create a test for that function that throws the error.
steps to reproduce the behavior: phofcode
add this code to a project and place a test in the server/ directory: phofcode
steps to reproduce the behavior: - create a project: `npx create-react-app jest-test1 --typescript` - modify `package.json`: `"test": "react-scripts test --env=node"` (because `textencoder` is not available at all in jsdom) - create a test like the one below
just create a file call 'test.js' and run test, then you will see.
create a project where you are using `string.matchall()`.
setup `babel` with `babel-node` to make it runnable.
setup `babel-jest` to make the same code runnable in tests.
write a test for the same code.
run the test and see the error above.
**see updated reproduction case in my below comment** phofcode phofcode
mkdir test-jestjsdom cd jestjsdom npm init --yest npm i -d jest npm ls left-pad
phofcode steps to reproduce the behavior:
phofcode using config in the root of the project: phofcode
steps to reproduce the behavior: the following test reproduces the behavior.
i 've also created a repl.it demo phofhyperlink illustrating the issue.
phofcode this produces the following output: phofcode
phofcode phofcode <details> <summary>other variations that also do nothing</summary> phofcode </details>
jest.config.js: phofcode gif-image.js: phofcode spinner.js: phofcode spinner.test.js: phofcode
just go to the link
steps to reproduce the behavior: 1. execute jest with `--watchall` flag 2. you can then observe that the number of workers created is equals to `number_of_cores - 1`.
create test file with only one test, call mocked function before test starts, in created test check if this function have been called.
test fails when `clearmocks` is set to `true`; it pass when `clearmocks` is `false`
feature file (written in cucumber): scenario: i am scenario given i am given step when i am when step then i am then step step definitions: test( 'i a scenario ', ({given,when,then})=>{ given( 'i given step ', ()=>{}); when( 'i when step ',()=>{}); then( 'then then step ', ()=>{}); //this is a wrong declaration of definition }); **the main issue is jest is not identifying the issue and skipping these type of tests and not running at all in a test suit.
steps to reproduce the behavior: 1. create an object with matcher a: `{ createdat: expect.any(string) }` 2. create a matcher b using the previous matcher under two different keys: `{ foo: timestampmatcher, bar: timestampmatcher }` 3. create a value that satisfies the matcher b, but has additional values for one one of the values for a: `{ foo: { createdat: "def" }, bar: { createdat: "def", baz: "ab1" } }` 4. test
steps to reproduce the behavior: testing function phofcode test file phofcode
steps to reproduce the behavior: - use `subst r: c: foo bar` where `c: foo bar` is the root of your watchman project - cd to `r:` - attempt to use the watchman crawler from this virtual drive mapping and see that it generates invalid paths such as:
- clone this repo phofhyperlink - run `yarn` - run `yarn test sample.test.js`
there is no mention in the documentation of the behavior phofhyperlink described.
it is working fine in my mac and the docker containers (eg.
awslinux2, ubuntu) in my mac.
but in aws amplify, it 's occurring sometimes, maybe (30% probability);
this is basically what i have in a project phofcode
steps to reproduce the behavior: take a look at this repo and try out the three approaches.
create a new angular 7.x project, write a
command: phofcode jest configuration: phofcode
1. install package ' @google-cloud/firestore ' (version 2.4.0 ) 2. obviously you need a google account, and a firestore database with some data in it.
- on a windows system.
- create a folder containing `{}` chars.
- checkout any project containing jest test in this folder.
i've produced minimal public repo as i've spotted the issue at my work and i can't share the code here.
simply create a class which imports to another classes, creates its instances and uses them.
then write tests for a given class with mocking class constructor.
** prerequisites ** * node.js version at least 12.0.0 is installed * yarn is installed **steps to reproduce the behavior** clone this repository: phofurl phofcode checkout branch * jest-issue * : phofcode install npm dependencies: phofcode change directory to workspace backend : phofcode run tests: the console shows the following error: if you delete line 7 in the module `scenebuilder.js`, the tests run without error.
steps to reproduce the behavior: i 'm afraid i don 't have a reproduction.
i 'm using `lerna` and `material-ui` in jest.
the library i 'm experiencing the issue with is dependent on another library in my mono repo.
steps to reproduce the behavior: create empty spec file.
run watch mode, see the failure.
run watch mode with `--passwithnotests` still receive the failure.
steps to reproduce the behavior: just follow this guide from scratch - phofurl (i did this on two different systems and got eslint errors in both cases)
steps to reproduce the behavior: 1. run jest on the following file phofcode
i have a sample provided to test
steps to reproduce the behavior: `repo.spec.js` phofcode
launch jest cli command with `-u` instead of `-u`
phofcode then create a js file with the following code.
eg `commitperftest.js` phofcode run the code.
on my macbook pro this takes around 400ms phofcode now run the above code in a jest test.
eg `commitperf.test.js` phofcode now run the jest test assuming you have jest installed globally on my laptop, last `params.commit(gexp, hexp, bn128.randomscalar());` line takes around 60000 milliseconds.
i 've also tested with jest 23 and 22 and they also take around one minute.
try to have project structure as: image phofimage steps to reproduce the behavior: then import action type by: `import { actiontypes } from and write a test for the component which using this actiontype.
use my trick to remove a file from an `input[type='file']`, and have jest run the function that does so.
1. npx react-scripts test --coverage --watch
steps to reproduce the behavior: you can produce this by running the tests in my repo: phofcode
steps to reproduce the behavior: steps phofimage
steps to reproduce the behavior: 1. install redis `npm i redis@2.8.0` 2. create a test file `mocking-redis.test.js` with following content phofcode
<img width="961" alt=" 15 29" src=" phofurl
having alias configuration in `package.json` and same in file name.
phofcode steps to reproduce the behavior: * run the tests
steps to reproduce the behavior: 1. choose a testcase 2. annotate it with .only: phofcode 3. run jest
steps to reproduce the behavior: -in some place place code folder (ex: -create link to this folder in your home(ex: /home/denis/code) -open project in webstorm (ex: -try to run tests
steps to reproduce the behavior: phofcode
i don 't have a public repro for this issue.
our repo is large and proprietary, and the issue is non-deterministic.
however, some aspects we believe are relevant: * we run jest with `--maxworkers=4` * we use ts-jest 24.0.2 * the jest config includes the following possibly-relevant parts: phofcode * once jest has been run and passes, subsequent runs won 't hit this issue unless the jest cache is cleared (not surprising, since the code path from stacktrace isn 't hit if cache is used)
1. run test phofcode 2. confirm there is no fails 3. uncomment all `userid` lines and run test again 4. see it fails and `ts` field highlighted as mismatch.
image phofimage 5. comment all `ts` fileds and run test again 6. now failed on `userid` image phofimage
phofcode phofcode logs a message that it cant find the module changing it to a relative path fixes it.
steps to reproduce the behavior: perform an assertion via `tomatchobject()` or `toequal()` as done here: phofurl phofcode
steps to reproduce the behavior: 1. create a named export.
2. attempt to mock it without any custom mock -> works just fine.
3. attempt to mock it with custom mock like so: phofcode 4. get error something like: phofcode 5. google around for a while and find solution as above.
i import code this way phofcode coming from this file phofcode and this is my stub: `domainparsestub = 'parse ');` spy also fails.
i have made a repository that reproduces the issue : * repository : phofurl * github actions failed jest run : phofurl the code phofcode run this code twice to see the error output phofcode you see that it 's the call to snapshot from the first test that ends in second test.
in any test, include an unref'd timer: phofcode this test will exit happily with no problems.
run this test without the `unref()` line though and it won't, and you'll see a `jest did not exit one second after the test run has completed` warning.
however, if you run this test with `--detectopenhandles` then regardless of `unref()`, this `setinterval` will always be reported as an open handle.
there 's a sample project to demo this bug: phofurl following the `readme.md` instructions and running tests should reproduce this error.
steps to reproduce the behavior: 1. create `src/index.js` phofcode 2. create `test/index.test.js` phofcode 3. run `npx jest test`
steps to reproduce the behavior: phofurl
you can clone my repo at the given commit: phofcode * you can see the logs never appear * comment out lines `13`, `17` and `22` of (the refernces to the spy) * see that the logs appear
steps to reproduce the behavior ( see example repo phofhyperlink ): * module `./a` depends on module `./b` * module `./b` is mocked in the test of './a` * you change **the mock** of module `./b`
steps to reproduce the behavior: 1.
`npx jest --findrelatedtests ./problems/001-sum.js` result: phofcode
install jest and then run `jest --testurl " phofurl
read the repository phofhyperlink 's readme.md (`npm install && npm test`)
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: see this repository phofhyperlink ---- at the root 's jest.config.js phofhyperlink : specifying `projects` as only `[ 'packages/p1 ']` makes "jest-config" fails to read phofcode but if i specify `projects` as `[ 'packages/p1 ', 'packages/p2 ']`, both configs are successfully read phofcode
steps to reproduce the behavior:
steps to reproduce the behavior: related to phofurl but we have a web project, not a rn.
phofcode </details> test</summary> phofcode </details> phofcode </details> <!--
steps to reproduce the behavior: create several test files that import the `mathjs` library.
<img width="442" alt="screenshot at 19 49 40" src=" phofurl <img width="691" alt="screenshot at 19 46 02" src=" phofurl <img width="658" alt="screenshot at 19 46 16" src=" phofurl
macos 10.14.3 node 10.14.1 node-notifier@5.4.1 jest@24.8.0 make sure one test __fails__ then run: `$ jest --watch --notifier` next run `top -o cpu` you should see a terminal-notifier process that never ends.
steps to reproduce the behavior: phofcode phofcode run `jest`.
if you run it with `jest --notifymode=failure` it will work.
(it doesn 't show the notify window) <img width="1278" alt="screen shot at 17 45 24" src=" phofurl
the test phofcode the returned value phofcode the rsvpstatus key is missing.
steps to reproduce the behavior:
clone this repo phofhyperlink .
jest v22.4.4 node v10.15.0 running jest without any flags.
in jest.config.js phofcode run `jest --config=<pathtoconfig>`
if i have the following in root `jest.config.js` and run `jest --coverage` the `collectcoveragefrom`, `coveragethreshold` are ignored and no files are detected.
phofcode however if i move the `collectcoveragefrom`, `coveragethreshold` to the top, then it works: phofcode
steps to reproduce the behavior: 1. use winston logger for logging 2. run jest test for multiple test files which use winston logger 3. notice in stdout wrong file name is displayed.
notes: the behavior is **correct when using console logging** but **incorrect when using winston logging**.
i noticed that there is snapshot test - which also exhibits this incorrect behavior (added as part of phofurl also, it appears that the issue only happens when we use winston with jest.
winston by itself when used with node works well.
i think there is some issue with jest-console package we use winston e.g.
below code: phofurl seems to return `console.log always whenever used (it works as expected using console logging)
1. in `jest.config.js` set `setupfilesafterenv` to 1. in `tests/unit/setup.js` add this line `jest.settimeout(30 * 1000);` 1. create an async test that takes longer than 30 seconds to run 1. error message states it exceed the 5 second limit, even though the limit was bumped to 30.
run this test (tried both jest 24.7.1 and 24.8.0): phofcode results: phofcode
i'm using `svelte` with i'm not sure i can explain how to reproduce it.
i don't have a concise repro repo at this moment.
try run `jest` from project located in the network mapped folder on windows.
use the `projects` option, define `testpathignorepatterns` in the root.
see that paths that should be ignored still run.
running such script phofhyperlink causes this: phofcode i 've managed to dig deeper and i 've discovered that this is "caused" by using execa package to run different scripts (i.e.
git one) which in turn uses signal-exit package internally.
the latter one adds sigterm listener to the current process (jest) so it can call a callback before process exitting which execa listens to so it can clean up after itself (its spawned commands etc).
this is all good and expected - also the listener in question gets removed appropriately, but somehow this breaks default sigterm handler and original terminal settings are not being restored.
after analyzing this problem - i 've managed come up with a simplified "fake jest" phofhyperlink (those exact steps are executed by jest): phofcode the key culprits are: - using raw mode - adding & removing sigterm handler
create a new vue client project.
verify that unit tests work.
currently vue_cli installs babel-jest v23.6.0 upgrade to phofcode .
verify that unit tests no longer work ( you get the error above) note that attempts to downgrade to 23.6.0 will not work unless you 1. rm -rf node_modules 2. rm package-lock.json 3. npm install after these steps the unit testing begins to work again.
`yarn add jest-circus` 2. attempt bundling it for a browser env using a setup like this phofhyperlink .
`git clone phofurl talloc-test` 1.
one example is: i am writing a test file called activity.test.js importing activity.js for testing.
in activity.js, i am importing a helper function named formatampm as phofcode .
it generates this error when running test: phofcode whereas when i console.log(formatampm) in activity.js, it displays a function declaration.
steps to reproduce the behavior: jest.fn((a,b) => 1) //returns a function of length 2.
=> 1) //returns a function of length 0.
=> 1))(1) //returns a function expecting one param (length 1) => 1))(1) //returns 1
jest run through cli with command like `npm test -- sometests` i was trying to debug the jest and in places where jest uses `collectcoverage` option it trying to access it from `globalconfig` that pointed to root `jest.config.js` when i moved all coverage options from project config to root config - coverage working.
this is my modulenamemapper config: phofcode this is how i use it in my example.vue: phofcode but i come accross the problem as follow: phofcode actually if i change the config as follow: phofcode it can work successfully.
can someone tell me why
steps to reproduce the behavior: 1. change package.json to break tests 2. run with changedsince master 3. no test failures are reported
jest-config.js phofcode package.json: phofcode it should be at least 2 tests and jest cache cleared to trigger parallel build.
steps to reproduce the behavior: execute it according to the code i provided.
steps to reproduce the behavior: - install `jest@21.x.x` or higher - add a configuration for `modulenamemapper` phofcode - run any test using `jest` - the error described above will show up
steps to reproduce the behavior: add true," to the jest configuration along with the "html" and "cobertura" reporters and start debugging.
look at the source map (either in vs code or in your browser) and observe all markup.
stepping through logic in vs code will jump your view to last line of active document after entry debugging line/breakpoint.
phofcode should produce the following output: phofcode also see attached npm audit report in json format
in package.json: phofcode in source/setup-jest.js phofcode
have a react-native app inside a react-native npm module (as an `example` app).
give both a `react-native` dependency.
run the test with `npm test` relevant section of `package.json`: phofcode
i don 't have repo, but i use this configuration: phofcode phofcode
- first eject create react app then add this code to alias section in webpack.config.js, yarn add i18next, then create test then yarn test phofcode - then inside locales there is file yml translation phofcode - here is my jest config setup and setup and package json phofcode phofcode
steps to reproduce the behavior:
1. install jest with every config default.
2. just run the code above.
phofcode the commit phofhyperlink in my fork adds a test case for the broken behavior.
_jest.config.js_ phofcode _setup.js_ phofcode _test.js_ phofcode running `npx jest test.js`, results with failed test as: phofcode
steps to reproduce the behavior: 1. clone `jest` 2. install `hg` 3. install dependencies 4. run tests (`yarn test`)
run a test suite with the `--coverage` flag on terminus for windows.
install jest, jest --init a jsdom environment, and run the following test, which fails.
steps to reproduce the behavior: - install jest - run the command in bash to show all config and build info files: phofcode
- install dependencies - execute coverage tests with `npx jest`
try to run test: phofcode
phofcode the second test case above fails with the first test case is present, but passes if the first test case does not exist.
if you console log / debugger this, you 'll see that the first test is adding a new method to b 's prototype, and `restoreallmocks` "restored" the mock from first by assigning `a.test` to `b.test`.
the following test file exhibits the issue: phofcode output: image phofimage
in one of the files import variable from `constants` module: phofcode set up an alias with `modulenamemapper`: phofcode run tests
steps to reproduce the behavior: 1. change one line in local 2.npm run test --changedsince=<current branch>
steps to reproduce the behavior: 1) create a folder with a `index.js` file inside.
2) export an object with a method from `index.js`.
3) require the file in a source file required by jest test using the `./folder/` syntax.
4) call the method on object.
when i remove `import 'typeface-nunito';` from the project it works (see more phofurl
run test individually and run all the suite.
1. write a test consisting of 1. run jest.
1. write another test under the existing one, again consisting of 1. run jest again.
the new snapshot is inserted correctly, but the first snapshot 's indentation gets increased.
pasting these commands into a bash script is an easy way to repro: phofcode then take a look at `index.test.js` - you 'll see the indenting is inconsistent: phofcode @scotthovestadt from poking at the code, this was most likely introduced in phofurl
in an empty directory: 1.
`yarn add jest` 2. add `"test": "jest --passwithnotests"` to scripts in package.json 3.
this assertion fails: phofcode phofcode
phofcode gives the following error: phofcode
steps to reproduce the behavior: 1. navigate to the custom-matchers-api (this.utils) phofhyperlink section of the documentation website.
steps to reproduce the behavior: phofcode set `"types": ["mocha"]` in the tsconfig file to avoid eagerly loading unrelated `@types`.
phofcode you 'll see the following typescript error: phofcode
setup any vanilla nodejs installation with the below jest configuration in your packages.json file.
`"jest": { "collectcoverage": true, "coveragedirectory": "../coverage", [ "/node_modules/" ], "coveragereporters" : ["json"], "verbose": true, "coveragethreshold": { "global": { "branches": 50, "functions": 50, "lines": 50, "statements": 50 } } },`
enable jest with the following configuration file "jest": { "collectcoverage": true, "coveragedirectory": "../coverage", [ "/node_modules/" ], "verbose": true, "coveragethreshold": { "global": { "branches": 50, "functions": 50, "lines": 50, "statements": 50 } } }, then call your jest script.
run jest with `--maxworkers=20%` and it will default to 50%
clone this repo: phofurl 1. npm install 2. npx jest --coverage there are only two files that matter, though: phofcode phofcode
describe( 'test ', () => { let myarray = [ '3 ']; beforeall(() => { myarray.push( '1 ', '2 '); }); myarray.foreach(endpoint => { it(`${endpoint}`, async () => { console.log(endpoint); }); }); });
code that triggers the bug: phofcode
consider the following code snippet: phofcode when i modify _dep.js_, `jest --onlychanged` do not detact the change and re-run the test.
steps to reproduce the behavior: - have a configuration that has a root set to a different drive than the project itself is on - start jest
create a project like this: phofcode phofcode phofcode run `yarn run jest --projects packages/* --show-config` and you get phofcode the
rename root directory to start with a dot (`.stryker-tmp`) try run jest phofcode
1. if my test file with path like 2. one test case inside call tomatchinlinesnapshot function 3. when code run into jest-message-util, this pattern 'const jest_internals_ignore = / s+at.
* will filter my test file path 4. result is error: jest: couldn't infer stack frame for inline snapshot.
steps to reproduce the behavior:
in `jest.config.js`, set `testmatch` to: `[' ** /foo/ ** /*.test.js']` create the following file in your project: `<project
steps to reproduce the behavior: 1. set up a mongodb docker container 2. create the following files + code: **package.json (test part):** phofcode **jest.config.js :** phofcode ** jest.setup.ts ** phofcode
steps to reproduce the behavior: run the following test.
phofcode the output is: phofcode
the function code: phofcode the test code: phofcode
steps to reproduce the behavior: setup ava and jest in the same directory and create a snaphshot in each test.
1. checkout the branch phofcode 2. run tests phofcode
steps to reproduce the behavior: run jest --watch --coverage, updates a file, see that no * new * coverage info gets updated.
press 'a' to run all tests in watch mode, no coverage info shows up.
try to run npm install on jest on macos (got it from trying to install react-scripts here)
- clone repo ( link phofhyperlink ) - run "npm install" in folder - run "npm test" in folder two test files have been created in the ./tests folder.
as i see it, of these two, only the test that is tagged with @run should be executed, and have a custom test environment created.
sample jest config: phofcode `globalsetup` and `globalteardown` does work, but `testenvironment` doesn 't: phofcode
i am trying to check the `users` object i receive against my `expectedusers`.
the received object coming back from mongodb contains the fields `"__v"` and `"_id"` which i do not want to check for (they always change for every test).
as such, i am using `.tomatchobject()` and cannot use something else like `.toequal()`.
my test snippet is below: phofcode (`request` is made with `supertest`)
steps to reproduce the behavior: - make a new directory and run `yarn init --yes` inside it - run `yarn add jest` - create a test using the `tomatchinlinesnapshot` matcher, eg: phofcode - notice that the test fails with an error indicating that prettier cannot be found.
component: phofcode test (i use react-testing-library but i 'll try to convert it to a normal jest test.
sorry if the code is incorrect but you should get the point): phofcode test will fail as it receives textcolor as `"#ff0000"`.
steps to reproduce the behavior: - clone my repo: phofurl - `yarn install` and then `yarn test` - all tests should pass.
- in `setuptests.ts` comment out the dummy export phofhyperlink , then uncomment the imports one at a time.
run `yarn test` you will see the tests throwing referenceerror 's.
steps to reproduce the behavior: here is my package.json.
phofcode as stated, i installed jest using `npm install --save-dev jest` .
it looks like that created a duplicate `babel-jest` entry in my package-lock.json with conflicting versions.
phofcode && phofcode i 've gone through the steps detailed in the error message, but then i don 't have jest anymore and its back to square one.
file `rewired.test.js` phofcode file `rewired.js` phofcode
situation can be reproduced via executing such test on node.js v12.
steps to reproduce the behavior: phofcode
clone phofurl checkout branch upload-lts `npm i --@brightside:registry= phofurl `npm run test:unit` or `npm run test:unit -- -u`
steps to reproduce the behavior: 1. upgrade to the latest node: `> npm install -g node` 2. create a test file `test.js` like: phofcode 3. run test `npx jest ./test.js` this will fail with phofcode
import a json file in js like phofcode with 24.8.0 json files are transformed as well.
but the resulting json file import results to following content `module.exports =
steps to reproduce the behavior: given this test file and we're running in watch mode: phofcode upon save, both snapshots are written: phofcode now i update the first test and save.
the snapshots get rewritten: phofcode now i add another test and save: phofcode notice how the snapshot for test `2` slowly drifts to the right.
this can get super annoying after many test-update-save cycles.
run this test with or without circus: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: create a default angular test with testbed and provide a mock with useclass like this: `{ provide: someclass, useclass: jest.fn(() => someimplementation) }`
in any project using jest with at least two test files using `jsdom`, override the virtual console setting: in jest.config.js: phofcode then run: * jest
code: phofcode test: phofcode the test passes with both variants of this assertion: phofcode
steps to reproduce the behavior: package.json: phofcode .bablerc phofcode jest.config.js phofcode
steps to reproduce the behavior: 1. create two snapshot tests in two different spec files.
2. run all tests using jest.
check that the two tests have produced two different snapshot files 3. try updating the snapshot by using 'jest -u -t <pattern> ' 4. observe that the snapshots for other tests are deleted
1- please, use this repo phofhyperlink 2- try to run `tests/vue.tsx` with jest
run a test with `requireactual` and compare it to one without it mocked.
i made a basic test case in this repo phofhyperlink .
run `jest` & `jest --watch` in the reproduction repo
just use same source in manual with jest-jasmine2 or jest-circus
steps to reproduce the behavior: you need to input this one: `electron_run_as_node=1 ./node_modules/.bin/jest --watch ` or in my repository, `npm run test:watch`
steps to reproduce the behavior: phofcode outputs: phofcode
steps to reproduce the behavior: os: windows 10 babel-jest: 24.7.1 jest: 24.6.0 ** .babelrc ** ` { ... "only": [ "client/", "test/" ] ... }` ** jest-config.js ** `{ ... "transform": { ".+ .jsx?$": "babel-jest" }, [ "/server/", "/node_modules/" ], ... } ` command `jest test/ --coverage --verbose
in types of build missing a comment `// @ts-ignore`, check here: phofurl
steps to reproduce the behavior: function console1() { console.log(1); } function console2() { console.log(2); } beforeall(async () => { await console1(); await console2(); console.log( 'beforeall ended now '); }); it( 'run test 2 ', async () => { const x = v: 1, test: }; object "test": "v": 1, } `); });
view startup docs: using typescript: **npm install --save-dev test-jest**
not exactly sure, but in my case it must have been an update and i'd already been using the old types.
1. write a test file that errors outside of an `test`/`it` block, that is inside at least one `describe` block 2. run the test specifically using a parameter like `--testnamepatten`
1. install `jest` and `typeorm`.
phofcode last string causes error: `argument of type 'sale' is not assignable to parameter of type '{}[]'.
type 'sale' is missing the following properties from type '{}[]': length, pop, push, concat, and 26 more.
steps to reproduce the behavior: * clone: phofurl * `npm i` * `npm test`
i had a config with the following (this worked fine): <img width="437" alt="screen shot at 12 15 04 pm" src=" phofurl with a command that looked like this: <img width="379" alt="screen shot at 12 15 47 pm" src=" phofurl i removed the `collectcoverage` and `collectcoveragefrom` options from the jest config, and created a separate command that looked like this: <img width="688" alt="screen shot at 12 17 12 pm" src=" phofurl i realize now that the above command never worked for all files.
regardless, after reverting to original setup, jest no longer works way it used to, and is instead "stuck" on just reporting coverage for tested files only.
even though it displays "generating coverage for untested files" message.
i guess it could only be re-produced on circleci or a similar ci environment which is overloaded and has a good number of cores.
the most basic example i could create to demonstrate phofcode
steps to reproduce the behavior: phofcode phofcode note that i added a `console.debug()` statement because the message from the custom matcher is not actually shown (as discussed in #7492).
create the following monorepo structure with configs that reference each other: _/jest.config.js_ phofcode phofcode phofcode
consider the following jest test: phofcode running it produces: phofcode the title parameters have not been substituted as expected.
the first one, `%s`, has been substituted by the (non-)number `nan`, suggesting some confusion with the actual injected value of `%d`, and the second one, `%p` has not subtituted at all.
from what i observed, two conditions must be met at same time for this to happen: - having test arguments looking like parameter placeholder themselves: `%d` in my example - having certain object arguments - does seem to happen with all prototypes, perhaps presence of a `tostring` function matters
the error with the current version of jest is verbose but as helpful as it could be: > error: timeout - async callback was not invoked within the 5000ms timeout specified by jest.settimeout.
timeout - async callback was not invoked within the 5000ms timeout specified by jest.settimeout.error: timeout - async callback was not invoked within 5000ms timeout specified by jest.settimeout.
phofcode same behavior when using the iterator of data property: phofcode both result in phofcode
steps to reproduce the behavior: first, get a jest environment ready, i 've used jest@20.0.4 & typescript@2.4.0 and jest@24.7.1 & typescript@3.4.1, and i was able to reproduce the same bug in both environments.
typescript code: phofcode i get below error messages phofcode however, on a standard babel setup with the exact same code (except for the type declarations), i cannot reproduce bug at all.
please check out phofurl and run `add_test.js`
i created a repo to reproduce this issue here phofhyperlink .
you can then run `yarn test` to see the test fail
steps to reproduce the behavior: 1. run `jest --watch` 2. remove any ran test file 3. see the issue
`npm i -d jest` 3. add the following to `sum.js`: phofcode 3. add the following into `sum.spec.js`: phofcode 4. run `npx jest --coverage`.
** ** phofcode ** ** phofcode phofcode *** phofcode steps to reproduce the behavior: 1.
- clone phofurl - `yarn install` - `yarn run test`
`node --expose-gc node_modules/.bin/jest --detectleaks repl.js`
checkout my repo phofhyperlink to directory like and run phofcode example: image phofimage
steps to reproduce the behavior: 1. enable jest retries in your config.
`jest.retries(3)` 2. throw some kind of failure in a beforeall of a test.
i used a reference to a variable that didnt exist also created test repo.
you can use the link below and run test in
steps to reproduce the behavior: in your code set up a string template like so: phofcode when running `expect(url).toequal(' phofurl it will fail.
steps to reproduce the behavior: phofcode index.ts phofcode
1) update the entry in your package.json file to either `"babel-jest": "24.3.0",` or `"babel-jest": "24.0.0",` 2) `npm install`
given a repository: - execute `jest` - execute again `jest` and take note of the execution time - execute `jest --runinband` and take note of the exeuction time - execute `jest --maxworkers=1` and take note of the exeuction time
clone phofurl copy .env.development to .env run `npm test`
steps to reproduce the behavior: - `react-native init jestbugdemo` - `cd jestbugdemo` phofcode phofcode running `yarn test` outputs: phofcode so it seems the automocking of lodash failed.
write a test like this: phofcode
1) `cd /home/david/source` 2) `jest --runtestsbypath phofcode 3) `jest --runtestbypath phofcode
steps to reproduce the behavior: 1.
i 've created a reproduction repo to show off what i 'm talking about.
phofhyperlink to reproduce: phofcode notice that a test fails.
the first test has `thingfour` set on the object under test and saved in the committed snapshot, but `thingfour` is missing from the nested property matcher.
this seems to be the expected behavior for jest.
the second has `thingfour` set on object under and saved in committed snapshot.
however, `thingfour` is not specified in property matcher object nested within an array.
this fails because jest seems to be doing an exact match on this property match object, rather than a subset match.
my understanding is that in order to be consistent, this should subset match nested object, and pass.
after doing some debugging, it looks like underlying jasmine passes for both tests ( `propertypass` is `true` phofhyperlink ), but for second test, `snapshotstate.match` results differences `actual` and `expected` values phofhyperlink .
steps to reproduce the behavior: does not work: phofcode does not work: phofcode works: phofcode works: phofcode
i config the module name.
`'so-ui': '@souche-ui/so-ui',` and my so-ui package index.js `require (so-ui/lib/index.js)`.
if the jest-resolve cant find the path.
its not change so-ui to @souche-ui/so-ui
a clear and concise description of what the bug is.
hello, when, i have the following components: phofcode phofcode and test `app.jsx` with the following: phofcode i get the following snapshot: phofcode
steps to reproduce the behavior: 1. install the latest version of jest
install the latest jest 24.4.0 packages.
pull down this branch and run `npm run coverage` or `npm run test:ci` to see the error run `npm run test` to see the tests pass just fine.
steps to reproduce the behavior: 1. create a config by importing `defaults` from `jest-config` 2. run jest with said config.
steps to reproduce the behavior: 1. clone phofurl 2. set the version of jest (and related packages) in package json to 23.6.0 3.
steps to reproduce the behavior: go to this page phofurl
add in package.json: phofcode and then clear everything with `rm -rf node_modules yarn.lock` and then install the new ones with `yarn` finally run `jest` with `--changedsince` flag: phofcode
trigger a travis build on phofurl revision (which is before
see included repo link below: phofcode
link to a github repo with sample files is included.
steps to reproduce the behavior: make a worker fail by creating a test that reserves memory indefinitely and see how jest hangs.
.babelrc: phofcode package.json dependencies: phofcode `npm run test` where `test` is a script that runs `jest`.
1. create a a new drive from a folder on the `c:` drive using subst ( phofurl 1. open vscode 1. create a react app within the newly created drive 1. create jest test run jest with coverage from the new drive put breakpoint in the jest test run jest debug config * coverage paths are wrong * breakpoints aren't hit
use the following test describe( 'basic ', () => { it( 'should match ', () => { expect("wibble "base"); }); }); note that without the additional arguments to `.tomatchsnapshot()`, this breaking behavior is not seen.
using (to specify a name) also works.
however, the docs ( phofurl do not imply that the `propertymatchers` argument is optional.
spy on or mock out `date.now()` and write an async test
steps to reproduce the behavior: setup any projects using winston and use the local version of jest and set `verbose: false` in the jest config
steps to reproduce the behavior: phofcode image phofimage > no tests found related to files changed since last commit.
> run jest without `-o` or with `--all` to run all tests.
start `jest` in watch mode, press on `caps lock`, try to run all tests when pressing on `a`.
add any `modulenamemapper` config, eg: phofcode create mapped module at destination path phofcode `require.requireactual` the source path phofcode
run the test in the provided repo with `--coverage`.
1. follow the getting started guide phofhyperlink and create a simple test suite 2. create ram drive using imdisk phofhyperlink tool (b: in my case) 3. point windows temporary directory (%temp% env variable) to a directory on ram drive (b: temp) (a reboot may be required) 4. open command line, go to where you created test suite and run `npm run test`
clone my minimal repository phofhyperlink , `yarn install` and `yarn test`.
steps to reproduce the behavior: 1. create a nodejs program that include page.evaluate from puppeteer.
this code is evaluated in a separate environment and causes test cases to fail.
export interface car { name: string; key: string; count?
: number; } async getcars(): promise<car[]> { const results = await somelongcall() // async call const c: car[] = [...results]; // return is of type car[] return c; } in the tests we have const c: car[] = [ {name: 'aaaaa', key: 'aaaaa', count: 10}, {name: 'bbbbb', key: 'bbbbb', count: 20} ]; // this fails _wspy1 = 'getcars') .mockresolvedvalue(c); <= error here ?
// but this works _wspy1 'getcars') .mockimplementation(() => promise.resolve(c)); the error we get is: we get this error: error: argument of type 'car[]' is not assignable to parameter of type 'promise<car[]> | property 'then' is missing in type 'car[]' but required in [2345] lib.es5.d.ts(1383, 5): 'then' is declared here.
the signature of mockresolvedvalue below.
can't value not be on array?
/** * simple sugar function for: => */ mockresolvedvalue(value: t | promiselike<t>): mock<promise<t>, y>; steps to reproduce the behavior:
given a test containing this expectation, phofcode this is the result: phofcode
steps to reproduce the behavior:
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode > pass __tests__/index.js > should warn about open handles (128ms) > > test suites: 1 passed, 1 total tests: 1 passed, 1 total snapshots: 0 total time: 3.497s ran all test suites.
the problem persists with latest jest release (24.1).
steps to reproduce the behavior: 1. create new dummy npm project with package.json (jest 23): phofcode 2. running `npm i` outputs: phofcode 3. create another dummy npm project with package.json (jest 24): phofcode 4. running `npm i` outputs: phofcode 5. upgrading to **jest 24 costs more than 57k new packages**, ides get much slower because of the indexing overhead.
steps to reproduce the behavior: 1. include a globalteardown module that takes a few seconds to return.
set invalid value for a property in the style attribute of an element: phofcode
phofcode screenshot from terminal: <img width="564" alt="screen shot at 2 52 06 pm" src=" phofurl
steps to reproduce the behavior: 1. clone: phofurl 2. run --runinband --watch --onlychanged` 3. change any test file = all tests are always run
install __jest@24.1.0__, create a simple test file `true.test.js`: phofcode create a `jest.config.js` file and add this content: phofcode run jest from the __package.json__ test script: phofcode
steps to reproduce the behavior: - yarn add antd@3.8.4 - write a jest test which import `form` or `drawer` from 'antd' - run test
steps to reproduce the behavior: - create a component using react.memo.
- render that component inside some other component.
- then write a test for that component using the shallow renderer of react and create a snapshot out of it.
steps to reproduce the behavior: phofcode
here are my configs: * `package.json`: * phofcode * `jest/js-loader.js`: * phofcode
steps to reproduce the behavior: this is my jest configuration: { "verbose": true, "clearmocks": true, "restoremocks": true, "setupfilesafterenv": [ ], "collectcoverage": true, "collectcoveragefrom": [ " ** / * .
** /node_modules/ ** ", "!index.js", "!config/**", "!coverage/**", "!client/index.js", "!client/store/**", "!client/reducers/**", "!client/sagas/**", "!client/style/**" ], "testmatch": [ " ** /__tests__/?
)(spec|test).js" ], "modulenamemapper": { " .
(scss)$": }, "snapshotserializers": [ ] }
steps to reproduce the behavior: - checkout this repo phofhyperlink - run the commands in the project's readme - see the console for error message
use config with custom jest runners and run few times.
go to mobile mode on browser, or open jest docs phofhyperlink on your phone.
click on the menu, next to `api reference`.
activate depshield phofhyperlink in any repo using jest 24.1.0 steps to reproduce the behavior: once you activate depshield in any repo using package.json, you will get a new issue with the vulnerability notice.
phofcode the test should be failed.
steps to reproduce the behavior: phofurl
steps to reproduce the behavior: phofurl
run a test suite containing a `describe.only` block with at least one `it.only` and one `it`.
please see the above screenshots.
create a large project with big imports, and test the entry-point of the application.
that test file will take several seconds to complete, even if you mock the files using the single parameter.
clone repo npm install npm run test
clone repo npm install npm run test
either in a setup script or in a test, add and run an asynchronous test that either takes a while or never returns.
when running the test, it fails with the message `timeout - async callback was not invoked within the timeout specified by jest.settimeout.` (in the case of that's 285 millennia and change.
obviously i didn't wait that long.
in fact, i waited default 5000ms or possibly less for it to throw this error.
the reason i did this in first place was because i didn't see any way to turn off test timeouts completely and had a test that was taking longer than 5000ms.
knew my test would complete eventually and was curious how long it would take.
so set timeout to in end, able to see how long my took complete by giving it an absurdly long wait time that less than
phofcode in order to see what 's going on i tried running only this test: phofcode the first time i tried this i was still getting an error message and it said to try adding `--detectopenhandles`.
so i added that, and now the test passes.
did not change the code at all.
included the complete console log of this below: phofcode
1. create a component that uses several subcomponents (we're using material-ui, but we've seen similar results without libraries) 2. run test and record speed 3. add jest.mock with factory function example: phofcode 4. run tests again and record speed.
steps to reproduce the behavior: **jest v23 setup:** .babelrc phofcode package.json: phofcode **jest v24 setup:** .babelrc phofcode package.json: phofcode jest config is not changed between v23 and v24:
run `npm test -- --coverage` will get all test case run but little file coverage: phofurl
compare results between v24 and v23 of `pretty-format` for a shallow component render.
phofcode same comes for `pick<typeof import("module"), "prop">` to check, run `yarn test` in provided repo
steps to reproduce the behavior: phofurl
use `"testenvironment": "node"` and run this test phofcode the most likely culprit in my opinion is this region where it was determined per duck typing that the things to compare are dom nodes and then an unguarded `instanceof element` check is run phofurl
steps to reproduce the behavior: * check out the `dev` branch.
* `npm install` * `npm t`.
the examples/react phofhyperlink in the jest monorepo itself actually does exhibit this bug.
the bug is hidden because of `babelrcroots: [ 'examples/* ']` phofhyperlink in the higher-level babel.config.js.
you can reproduce the issue using node@10.15. we expect a state change after awaiting an async function, but the function is not awaited: phofcode note that changing `await to `await results in expected behavior, so it is only bare `.resolves` that has this problem.
clone the latest commit from phofurl steps to reproduce the behavior: in terminal run: `yarn install` and then `yarn / npx jest --no-cache --runinband` or `yarn` / `npx jest --no-cache --maxworkers=1`
steps to reproduce the behavior: 1. set up more than one test suite with `beforeall` and `afterall` hooks 2. run watch mode with `-t` or with a test name regex filter in the interactive cli 3. observe that `beforeall` runs for all test suites, but `afterall` only runs for un-skipped test suites
steps to reproduce the behavior: 1. import `const { defaults } = in a config 2. export `defaults` 3. validate the config via jest validate by running `yarn jest` on something 4. see the following error phofcode
steps to reproduce the behavior: phofcode
git clone phofurl npm i npm test _notice that the coverage summary is wrong_ npm uninstall jest npm i jest@23.6.0 --save-dev test _notice that the coverage summary shows the correct metrics_
steps to reproduce the behavior: run a set of tests in jest 23.6.0. run that same set of tests in jest 24.0.0.
using a preset, add `setupfilesafterenv` property to it.
* visit homepage phofhyperlink * observe link to angular
steps to reproduce the behavior: see repl link below.
local test server works as expected without jest.
`index.js` will execute the same logic without jest first and the header is as expected.
it will then execute the code through a jest test file which then munges set-cookie header value when multiple cookies are sent.
steps to reproduce the behavior: go to any example `yarn install` `yarn test`
steps to reproduce the behavior: run this test with jest 23 and jest phofcode
phofcode here is a reproducible example with writeup: phofurl
steps to reproduce the behavior: 1. run these commands: phofcode this repository contains several times the same tests: * `testcasex.test.js` mocks * `defaultx.test.js` doesn 't mock this method * all files `testcasex.test.js` have the same content, so they should have the same result * all files `defaultx.test.js` have same content, so they should have result also, configuration contains: phofcode but this doesn 't seem to make a difference in result.
what _does_ make a difference is these changes: phofurl so maybe issue is implementation for `resetmocks` and not test environment?
for me this fails nearly 100% of time, but because this is likely a frequent intermittent you might need to repeat test several times.
here is error i get: phofcode
steps to reproduce the behavior: - clone boost: phofurl - install deps: `yarn install` - build: `yarn run setup` - run tests: `yarn run jest`
open above urls with your browser.
steps to reproduce the behavior: 1. create a test that takes a snapshot 2. run `jest` like normal 3. rename the test file, but not its snapshot file 4. run `jest --no-cache --watch`
steps to reproduce the behavior: in a test file, do: 1. import a type from somewhere 2. mock a module, and provide a factory which uses that type 3. run the test
anyone with a windows desktop machine.
if you run following code, you will see what i mean.
`createserver` returns `promise<express>`, an express app.
this snippet currently ** passes ** when running `jest` phofcode this snippet (almost identical to docs and blogs) ** fails ** because `jest` can 't find any tests in the file.
steps to reproduce the behavior: 1. clone phofurl *note that there are some files already present in node_modules in order to imitate mocking npm packages* 2.
`npm install` to reproduce problem 1 checkout the `npm-mock-failure` branch and run `jest`.
you will see an error because the required helper is defined on the original implementation and not mock to reproduce problem 2 checkout `mocks-clash` branch and run `jest`.
use the new feat snapshotresolver.
steps to reproduce the behavior: change babel version, run tests using jest.
change babel version back to old version.
jest cache is not busted.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1.
`git checkout jest-find-related-tests` 1. follow steps defined in readme.md
steps to reproduce the behavior: **simple functional component using react hooks in alpha** phofcode **simple jest test** phofcode
you may run this test case, it will fail: phofcode the failed error message is: image phofimage
a like to a minimal repo needed to reproduce the bug is provided in the next section with reproduction instructions.
i present the most relevant excerpts here.
`zsh | awk -v rs= -v ors= ' ' | tac` phofcode observe from the piped script output that `jest` process maintains watches in `node_modules` files despite it being blacklisted in configuration option in `package.json`.
add `new xmlserializer();` to a test.
there's no reason to want to do this specifically, but it does reproduce the issue.
steps to reproduce the behavior: run two tests against two mock functions, running .mockclear on each phofcode
1. pull repo: phofurl phofhyperlink 2. yarn install 3. yarn test phofcode 4. remove "haste" from jest configuration phofcode 5. yarn test phofcode
i prepared a repo phofhyperlink to reproduce steps to reproduce the behavior: $> git clone $> cd test $> yarn $> yarn test
steps to reproduce the behavior:
run `jest --watch` with `babel-jest` set as the transformer on a file that contains the following: phofcode
steps to reproduce the behavior: phofcode
my example is in typescript method: phofcode test: phofcode steps to reproduce the behavior: * create a promised form of fs.readfile * attempt to read a file that does not exist * observe the thrown rejection is not caught by jest
add iconhouse@3x.png to the folder.
require in the app iconhouse.png run jest tests.
create a repo with the following structure: phofcode add the following jest config to `repo/package.json`: phofcode add any jest config to phofcode add any dummy test to such as: phofcode run jest and verify that it ignores the project config, and instead attempts to run the `package.json` files in both root and `packages/a` as tests (which fail), in addition `test.js` (which passes):
simply try to run the example from illustration, but force it to fail (the one above succeeds so no error messages have to be shown): phofcode
function getredirectbase (state, siteid = { // #if !static2 return '/' + siteid; // #endif // #if static2 return '/' + ?
'm.react.html' : 'd.react.html'); // eslint-disable-line no-unreachable #endif }
phofurl 1. create a simple react form that adds a span element to the dom upon submission 2. test that the said element shows up upon successful submission with jest and reactdom
steps to reproduce the behavior: install native module like this: phofcode reproducible example: phofcode
steps to reproduce the behavior:
steps to reproduce the behavior:
have a jest test that call `const res = await foo();`.
however `jest` complains with `syntaxerror: await is a reserved word`.
change directory into the folder and then use `node phofcode
using jest v23.6.0, testing a vue application with `babel-jest` v23.6.0 (based on the below jest configuration as part of the package.json file): 1. delete the `/coverage` folder 2. run npm test jest configuration: phofcode
steps to reproduce the behavior:
steps to reproduce the behavior: install `react-navigation": "3.0.4"` install `"@babel/core": "7.1.6", "7.1.0", "babel-core": "7.0.0-bridge.0", "babel-jest": "23.6.0", "jest": "23.6.0",` write one small snapshot test
code to reproduce the behavior: phofcode
steps to reproduce the behavior: in `package.json` `scripts ` section: test-unit-coverage= "environment=test jest test/ --coverage" after `scripts` section: phofcode then run the script.
steps to reproduce the behavior: using mobx and mobx-react, create an `@observer` react component that receives props including an `@observable` object.
write a test file that mounts this component and takes a snapshot
steps to reproduce the behavior: 1. write test file and save it in `src` folder as `app.test.js` 2.
`npm run react-scripts test --env=jsdom --no-watchman` or 3.
`npm react-scripts test --env=jsdom --coverage`
2. visit phofurl 3. can not to see sidebar.
1. clone down this repo phofhyperlink 2. run `npm install` 3. delete the file `src/index.js` 4. run the command `npm run test-bug`
* `git clone phofurl * `npm i` * `npm run test` * try to read the results of the tests
yarn install a fresh project containing jest 23.6.0 (the latest version at time of writing)
steps to reproduce the behavior: 1. install deps: phofcode 2. create a jest config: phofcode type: phofcode run a test: phofcode content of the `a.test.js`: jest cli doesn 't output any log ....
steps to reproduce the behavior: - navigate to the configuration page
steps to reproduce the behavior: 1. check the `mocking functions` section of the official guide - phofurl 2. check the latest docs in repo - phofurl
specify the `prettierpath` option in a config file or `--config` json object.
please see this test suite phofhyperlink in the repository.
don't know what exactly causes this issue.
simply run `yarn jest` or `yarn jest --watch`
create a new react app with typescript support (create-react-app v2.1 or higher required): `npx create-create-app jest-test --typescript` add a new test file named "classes.tsx" to the src/ folder containing this code: phofcode edit the existing src/app.test.tsx file, adding this import: `import { base, derived } from "./classes";` .. and this extra test: phofcode edit package.json and add a new script below "scripts" to run tests with coverage: `"test:coverage": "react-scripts test --coverage"` from a command line in the project directory, run `npm run test:coverage`
this is very difficult unless you have a network drive with a symlink for `c: developer` to point to the root of your network drive.
jest.config.js file is provided below: phofcode and when running in `--debug` mode the value of my `rootdir` is: `"rootdir":
steps to reproduce the behavior: - create a simple jest test - create a script like this: `"test:output:watch": "jest --json --watch"` - see infinite loop on console when running `npm test:output:watch`
assuming you run in the default `document` is all you need to provoke this behavior: phofcode demo phofimage
steps to reproduce the behavior: go to phofurl
the test: phofcode you can find `arraybuffertoblob` and `str2ab` implementation in the codesandbox.io snippet below.
i have tried with the new `tostrictequal` and i receive the same output.
it is worth to note that before upgrade `jest` to 23 and babel to 7 (from beta 37) it was working for me.
so, looks like a regresion in version 23.
neither of this transforms works: phofcode phofcode i think the problem here is that `babel-jest` resolution strategy is failing to find the correct babel.config.js file only creating a custom babel transformer the transform works, like the below: phofcode steps to reproduce behavior: run `jest` on root of this project phofurl modify transform config from custom transformer to babel-jest another problem is that when using only `projects` option on jest.config.js root, it won't use a different jest config per project, it is looks like all config should be on root jest.config.js instead of jest.config.js inside each project
this is my code: phofcode
steps to reproduce the behavior: phofcode then make sure to run tests with and without watch mode using the same number of workers.
steps to reproduce the behavior: i have been working for two days to try and figure out a method to reproduce this, but it almost appears random.
steps to reproduce the behavior: 1. create a bunch of angular components with tests using "ng g c my-test-cmp-1", "...cmp-2", etc 2. run "jest --runinband --logheapusage components/" so it runs all the tests 3. observe heap size grow as many times there are tests.
also, if you take a heapdump, you could see a bunch of "global > __proto__ :: window" entries.
4. observe that environments for each test are not torn down until all test complete.
if you have enough of those tests or if you lower allocated memory with --max_old_space_size, you 'll it running out of memory
1. write a simple function that uses rest parameters destructuring.
2. call it from another function that is actually being tested 3. it should throw an unexpected token at the first function declaration
i created a repo to reproduce the bug.
phofurl in that repo, the file brandtable.jsx uses es6 and the empty coverage generated for it is not correct.
1. test case phofcode 2. after running with `--updatesnapshot` phofcode 3. running without `--updatesnapshot` (throws error) phofcode
i have a function that need to make a request to external api, and in the same method just save in the database without waiting for a response.
i don 't want to wait until the saving process is done, but i 'm forced to change the behavior of my application get it tested through jest., or i need close connection, stop server for my code work.
this is the test suite and the component being tested: phofcode this is the component being tested phofcode when `submitform `is called on the innerform, `handlesubmit` method is called.
on node 11: phofcode `make test` is running this command: phofcode no config file
steps to reproduce the behavior: yarn yarn test:watch
** test ** phofcode ** stylesheet ** phofcode jest.config.js phofcode
given the following directory listing: phofcode using the following `package.json`: phofcode none of the tests in a folder staring with `.` are found: phofcode using the following `package.json`: phofcode none of tests in a folder staring with `.` are found:
steps to reproduce the behavior: create a simple function that returns a text with a new line character.
phofcode execute the function and generate a snapshot: phofcode
1. using a simple project, configure a snapshot resolver to move your snapshot files to a different directory-structure.
2. run `yarn test` notice all your tests pass, and snapshots are in their new location 3. notice that it says `45 snapshot files obsolete from 45 test suites.` 4. run `jest -u` to remove obsolete snapshots, notice that * all * your snapshots are gone.
issue phofimage steps to reproduce the behavior: vscode configuration: phofcode
use nodenv or nvm, switch to node 4 and create a project with jest.
steps to reproduce the behavior:
i have the problem 100% of the time, but cannot reproduce it on a small system that i could share.
we are using typescript and use `ts-jest`.
versions are: - jest: 23.1.0 - ts-jest: 22.4.6
steps to reproduce the behavior: run jest with the following spec file (not setup or actual production-code required): phofcode
a very simple end to end test can be created in phofhyperlink to reproduce the issue: phofcode
i've provided a repo phofhyperlink that have this set up and issues.
_for the git hook:_ 1. make a change.
2. try to commit it.
3. will fail and in the jest outputs there will be transpile errors.
_for vscode-jest extention:_ 1. install the extention.
2. won't work correctly and the jest outputs will have same transpile errors as git hook.
steps to repro: - create two snapshot tests (different names), write snapshot - run one test by matching `testnamepattern` - observe non-matching test is skipped - add snapshot names, update snapshots run same test matching on `testnamepattern` observe non-matching test is now listed as obsolete
on a setup with only one cpu, use jest-worker with numworkers option left to default.
no workers are started: phofcode
use a `.babelrc.js` like this: phofcode
steps to reproduce the behavior: here is my test code: phofcode here is the stdout: phofcode
add a setupfile to your jest repository, with a console.log statement in it so you can see when it runs.
you'll notice that the console.log statement prints once per test file (test suite) in your repository, not once per test as the documentation states.
steps to reproduce the behavior: 1. run `npx envinfo --preset jest` on windows.
steps to reproduce the behavior: 1. start with version 11.12.0 of jsdom.
2. upgrade to 12.2.0 and `yarn install`.
* clone example repo + `npm install` * run `jest --coverage` (should show unknown coverage) * remove line `11` in `package.json` * run `jest --coverage` (should show correct coverage)
use rewire with jest in typescript
steps to reproduce the behavior: phofcode
i have a file called src/layouts/index.js phofcode it utilizes webpack `require.context` so i am trying to mock with jest.mock.
i have another file... say file util.js phofcode in my test i'm trying to clear the mocks after each test phofcode
steps to reproduce the behavior: * start `jest --watch` * change the access time for a file and nothing else.
steps to reproduce the behavior: 1. set up a component that produce the above text snippet 2. write a snapshot test for the component
my source code looks something like this: ` phofurl but instead of the require i do: `import * as abc from './add`.
this test passes since its using the babel 6 transpiled version, but with babel 7, it does not work.
environment: it works when used with babel 6, but does not work with babel 7. it looks like has made this import * syntax such that the variable cannot be overridden.
i have tested overriding the module works with default imports, but does not work { foo } object destructured imports nor import * imports.
say, i have a globalsetup.js phofcode and a data.test.js phofcode where the buidlings.js has phofcode the problem (or maybe its by design?)
is quite clear, `import xxx from './buildings.csv';` is executed first and the asny function in globalsetup will be executed after all sync process finished.
add this to a static page: phofcode it _almost_ works, with the sole exception that the very last line fails: `module.exports = expect` because there 's no global `module` object.
steps to reproduce the behavior: 1 write the function registerusername as mentioned:- function { if (!username) throw new error('username is required.
'); return { id: 0, username: username } } 2 write a testcase as mentioned:- describe('registeruser', () => { it('should return a user object if valid username is passed', () => { const result = lib.registeruser('abhi') username: 'abhi'}) }) }) 3 now run the test.
example (given package b depends on package a and they are both es6 modules): phofcode in b 's package.json: phofcode jest runs fine in isolation within a, but fails when running in b which depends on a.
steps to reproduce the behavior: 0. checkout phofurl 1. install dependencies phofcode 2. run the tests phofcode 3. remember the following line in `async-test.ts` phofcode 4. update the snapshot using phofcode 5. now check line again
phofcode `this.expand` throws the ts2339 error mentioned in the title.
follow the jest documentation for babel 7.
1. clone the test case repository phofhyperlink .
here is a utility method that i've created to create class mocks: phofcode however when i use `jest.resetallmocks()` mocks created by this function are not reset.
here is a code example: phofcode
steps to reproduce the behavior: test case: phofcode jest config phofcode run npm test
steps to reproduce the behavior:
given the example in the docs, i get the following output: phofcode <img width="385" alt="screen shot at 18 17 24" src=" phofurl
i 'm not sure exactly how envs are specified in jest; i got the error by running `yarn jest` in the `create-react-app` repo, which doesn 't have any special kind of configuration.
take this example: phofcode it results in this error being thrown: phofcode
create an entity with relations decorator phofcode
1. create a test file with this content : phofcode 2. run `$ yarn --watch my.test.js` 3. tests pass, snapshot are written for the first time 4. modify all asserted objects (you can just copy/paste following code): phofcode 5. tests break, hit `i` key to enter interactive snapshot mode 6. hit `u` key to update first failing snapshot 7. hit `u` key to update last failing snapshot 8. snapshot successfully updated : phofcode 9. hit `enter` key to end interactive snapshot mode 10. shell goes back first failing because jest didn't actually updated on filesystem phofcode
use this branch: phofurl after you clone and `npm install`, run `npm run watch`.
you will see no test is executed (expected result): phofcode now, do the following: 1. edit `src/index.ts` to add a function, e.g.
: phofcode 2. create a copy of `src/r2/index.spec.ts` as `src/r2/index2.spec.ts` now if you run `npm run watch`, you will see the test in `src/r2/index.spec.ts` is executed while `test is suspended on start.` is printed: phofcode the code that prints the "test suspended on start."
here: phofurl you can see that it returning false.
but in the example above, test still being executed.
open phofurl and install dependencies.
run only needed exact test file path to speed up the test run: phofcode function `nodecrawl` ( phofurl is called (`options.roots` contains the project root).
jest repo: `yarn jest --changedfiles=master`
steps to reproduce the behavior: upgrade jest to v22.0.0 later and this previously working test will break with below message: phofcode ** package.json ** phofcode ** moneyinput.test.jsx ** phofcode
steps to reproduce the behavior: - set a global property to be `identity-obj-proxy` - call jest.resetmodules() during a test
- `react-native init ${appname}` (i was using react native 0.55.4) - `npm test` (works fine) - install any new package, like `npm install --save moment` - `npm test` (this fails) steps to reproduce the behavior:
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: my package.json: phofcode
steps to reproduce the behavior: phofcode run this with jest --detectleaks --runinband
i can 't reproduce it locally.
see link of travis build run below.
the only difference between the ci builds and my local environment is the operating system.
travis ci is using **linux (trusty)**, and appveyor is using ** windows ** , whereas i 'm using ** macos ** high sierra 10.13.4. but i 'm guessing it 's not a problem with the operating system, as **both work fine** when using **node 8**.
relevant packages: phofcode phofcode (which doesn 't seem to be running when under node 6 in the ci): phofcode
add `<>` syntax to a jsx file, run `jest -coverage`
steps to reproduce the behavior: run the steps in the contribution guide without python installed.
phofcode it 's also unclear whether python 3 or 2 is needed.
create a test, import react native `statusbar` and make a snapshot of it.
the snapshot will be `null`.
phofcode here is a result of execution: phofcode
install `bable7` install `babel-core = 7.0.0-bridge.0` use object destructring in any component.
steps to reproduce the behavior: - install jest with `yarn add --dev babel-jest babel-core@7.0.0-0 @babel/core` - create a test - run `yarn test`
steps to reproduce the behavior:
steps to reproduce the behavior: 1. set []` and `automock: true` in your config 2. test if the module that should has been automocked (it won't) 3. add whatever non-empty string item to e.g.
['mock']` 4. the automock will start working
i have made a simple repo to reproduce phofurl just run ``npm i && npm test``
* open jest source code in vscode (tested in vscode 1.26.1 on ubuntu 18.04.1) * open any test file (tested with putting breakpoint at on line 28 of is_valid_path.test.js phofhyperlink ) * go to debug mode in vscode, and click "debug jest with current test file" * notice that debugger stops at line 22 instead
run jest using babel-jest in a project with: - babel 7 (release, which uses scoped packages) - a dynamic `babel.config.js` (i.e.
a module which resolves to a function which returns the babel options).
- a tested module using syntax that isn 't supported in nodejs (like es6 imports) it will error.
<details> <summary>test output</summary> phofcode </details>
relevant `package.json` dependencies/config phofcode `.babelrc` phofcode `jestsetup.js` phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: create the following file named `demo.test.js`: phofcode running with jest produces the following output phofcode
steps to reproduce the behavior: phofcode results in: phofcode
the following outputs null: phofcode
steps to reproduce the behavior: - create new application using create-react-app - execute `npm install` - execute `npm install --save-dev jest` : fails with error phofcode - excute `npm install` execute `npm install --save-dev jest` : passes this time
steps to reproduce the behavior: 1. follow the getting started guide phofhyperlink and create a simple test suite 2. create a network drive e.g.
`net use x: 3. open the command line in `x:` and run `yarn test` / `npm test`
setup a good test and a wrong test (in 2 different files), then run the ``jest``.
setup jest and friends with the following versions: phofcode
1. create a custom class that extends the `error` object.
phofcode 2. create a custom error object using class constructor.
phofcode 3. in the code that needs to be tested, throw that custom error.
phofcode 4. in the test, try to pass a new instance of that custom error object (created in the test file) and pass it to `.tothrowerror`.
steps to reproduce the behavior: run a test suite with the following case: phofcode this test case should pass but print something like this on the stdout: phofcode
steps to reproduce the behavior: 1. clone this repo phofhyperlink .
2. create a new branch from `master`.
reset head to the commit before head ("add package.json and yarn.lock"), but keep the changes, and unstage them.
so now you have `a.test.js` uncommitted, and `package.json` has `"name": "test"` uncommitted.
you will get the same error.
i assume cause is because: 1.
it has to be via jest config `collectcoverage: true`, and not cli `--coverage`.
`watch` is enabled (and it possibly also occurs with `watch-all`), so only uncommitted changes are watched.
in order to reproduce this bug, there needs be changes a test file, changes in a non-js file, like `.eslintrc.json` or `package.json`.
3. this is actually a pretty common scenario, at least for me, so i get this error lot.
using the following code: phofcode i have the following error: `expected mock function to have been called one time, but it was called zero times.`
install jest 23.5.0 set style{"test":"jest"} in package.json file run npm test
i am using: "prop-types": "15.6.2", "react": "16.4.1", "react-dom": "16.4.2", "react-native": "0.56.0", "@babel/core": "7.0.0-beta", "babel-core": "7.0.0-beta", "babel-jest": "23.4.2", "5.0.2", "babel-runtime": "7.0.0-beta", "enzyme": "3.4.1", "1.2.0", "jest": "23.5.0 ", "jest-fetch-mock": "1.6.5", "jsdom": "11.12.0", "react-test-renderer": "16.4.1", my jest configuration is in _jest.config.js_ phofcode and my babel config in _babel.config.js_ phofcode i tried making a simple repo using the awesomeproject from the react-native project creator but i couldn 't reproduce it.
have set custom testenvironment for jest.
jest-environment.js phofcode jest-config.js ` "testenvironment": "./jest-environment",`
steps to reproduce the behavior: 1.
`npm install jest jsdom` 1. run the following test: phofcode
create a simple test with `expect(<async fn>).resolves.tobe(x)` and it passes, whilst also giving a reason why the test failed.
screen shot at 10 23 06 pm phofimage
steps to reproduce the behavior: phofcode
i create a minimal reproduction repo for that: phofurl phofcode all the detailed output has been included in the repo 's readme phofhyperlink .
steps to reproduce the behavior: run phofcode this results in: phofcode
create and error class with it 's own tostring method.
phofcode try testing the above file.
phofcode use this jest config (thought it probably isn 't really required) phofcode test just running jest with no values.
phofcode try running with coverage.
* access to jest delightful javascript testing phofhyperlink * click docs * check 404 page not found github pages phofhyperlink this bug is not only japanese.
example chinese page not found github pages phofhyperlink is 404.
1. create new empty project directory : `mkdir foo && cd foo` 2. init `package.json` : `npm init` with the test script `jest --forceexit --detectopenhandles` 3. install `jest` : `npm i jest --save` 4. append jest config to `package.json` : phofcode 5. create and edit a new test `nano test/foo.spec.js` phofcode 6. run test `npm test`
simply run a test suite with tests that require in a file that creates a closure over an imported variable: phofcode phofcode while every worker leaks memory and will eventually run out, it is easiest to see with `--runinband`.
note that we are not doing anything with `require` to force a reimportthis is vanilla `require` in each test.
when run with `jasmine`, we can see the issue go away as there is no custom `require` implementation for mocking code.
we also see the issue disappear if we release the variable reference for gc by setting to `null`.
i believe the closure is capturing entire test context (which also includes other imports like `jest-snapshots`) which quickly adds up.
* `create-react-app myapp ; cd myapp` * `rm -r node_modules package-lock.json` * `pnpm install` * `pnpm test` outputs: phofcode manually adding `slash` as peerdependency of `jest-runtime` using `pnpmfile.js` like this phofhyperlink fixes the issue.
try to put your coveragethreshold inside the glob of projects.
steps to reproduce the behavior: 1. create an array containing objects: `const arr = [{ a: 1 }, { b: 2}];` 2. try to `expect(arr).tocontain({ a: 1 })` error message is displayed: phofcode but mentions nothing about how identity is being used for equality checks, leaving you scratching your head since it plainly displays "the same" object literal in both places.
* create a javascript file to test with a top-level variable set as a const and a simple test function * create jest test file, use rewire to import the above module, use rewire.__set__ to change the const value see my repo below for working example.
steps to reproduce the behavior: 1. install jest.
2. write a simple class that leverage `localstorage.setitem()` or `localstorage.getitem()` 3. try to spy on it -> jest.spyon(localstorage, "setitem"); and it will *throw an error*
hmm well you could try phofurl update jest in package.json, and run `gulp test:unit`
phofurl has a simple config that has this issue, but it only crashes when there are a lot of tests (as the memory keeps increasing).
this happens with and without --runinband option
i think you need just specify `projects` field in config as array of paths to jest configs in monorepo.
and have differences in `transform` and `roots` fields (i didn 't check other fields)
steps to reproduce the behavior: 1. install latest jest 2. make a clean yarn/npm install 3. setup a basic test case 4. run it
steps to reproduce the behavior: phofcode but it throw the following result.
clone and run code from this github project following the readme: phofurl manually: create a class a which uses a type from b type b imports type c type c imports and is assigned class d class d extends class a in the example: - layoutengine imports graphviewprops from graph-view - graphviewprops uses layoutengineoption from layout-engine-config - layoutengineoption is assigned none - none extends layoutengine
steps to reproduce the behavior: 1. have a test with a `describe.skip` 2. have a `beforeall` inside this skipped describe 3. add some code inside the `beforeall` to check if it is being executed
use assert in an async test function: phofcode
clone and execute the test on this repo phofhyperlink (it was created using create-react-app phofhyperlink ) phofcode
follow the documented phofhyperlink steps
steps to reproduce the behavior: 1. have a test subject that calls `process.exit(1)` 2. have one file with a test running that code, and (at least) one other test file which does not run any code calling `process#exit` 3. run the test files using workers (that is, without `--runinband`) 4. hope for the best: the run will sometimes simply terminate (possibly due to invocation order).
example: run that simply terminates phofimage a run of only file with failing always terminates immediately after `process#exit` is called, and same applies when running multiple files in band.
created two modules `a.js` as empty file, and `b.js` with content as: phofcode when run through `jest` this module exports `undefined`
steps to reproduce the behavior: 1. have 2 projects 2. have the resolvers in each project resolve to different files e.g.
test.a.js and test.b.js 3. have a test file in each project that requires the same file e.g.
'test.js' which you want resolved to .a and .b 4. run the projects together - first resolution gets cached 5. run projects seperately - each project gets a different resolution
steps to reproduce the behavior: 1. run jest with `--watch` and `--coverage` 2. stop initial run by pressing enter and filter tests using the `p` option in the cli prompt.
3. command + c 4. run jest again with `--watch` and `--coverage`.
5. note the persisted filter values and coverage running before completion of tests outputs no coverage info.
this is what terminal looks like when this happens: image phofimage
in empty project create `some.test.js`: phofcode after running `jest` output is as follows: phofcode
in empty project create `some.test.js`: phofcode after running `jest` output is as follows: phofcode it obviously fails with lack of tests, but that 's irrelevant.
the point is that `console.trace("foo")` is not logged properly, same way it 's logged within well written tests, still i wanted to keep this test case minimal.
steps to reproduce the behavior: i cannot define specific steps to reproduce the problem, only run jest tests.
create a `.ts` file, test it, run `jest --coverage`
steps to reproduce the behavior: from a windows shell with a lowercase drive letter by default e.g.
cmder, run jest coverage make sure that you specify paths in collectcoveragefrom in your jest config e.g.
phofurl `git clone` `git checkout madness/jest` `npm i` `npm test` i prepared a file, called `sum.tsx` as dummy file for testing: - if you comment out on `sum.test.tsx` the only test available (not the whole file, just the test), the `sum.tsx` file appears on coverage report.
- if you change filename of `sum.tsx` to anything else, coverage appears for `sum.tsx`.
similar issues appear to every other file.
video of first case: phofurl
steps to reproduce the behavior: 1. visit this codepen phofhyperlink and see that the html can be queried with the selector ` '#test-one tbody tr:nth-child(1) td:nth-child(3) '` and logs: phofcode 2. create this jest unit test with the same html and selector and see that it logs `dom node: null` when run: phofcode 3. change query to ` '#test-one tbody tr:nth-child(1) td '` see that `dom node: htmltablecellelement {}` is logged, appearing to indicate issue is with inner `nth-child` query in selector.
phofcode run that test and the snapshot is saved.
change to phofcode and the snapshot will be added inline, but the original snapshot (in `__snapshots__`) will not be deleted.
steps to reproduce the behavior: 1. create a custom transformer that's referenced by `transform` in the jest config: phofcode 2. run jest 3. modify the value of `babeloptions` (for example enabling babel preset-env's `debug` option) 4. run jest again
i've created a very detailed project to reproduce and profile both jest and jasmine on the same test suite in this project: phofurl the environment is the same.
the configurations are very similar.
both use the same babel setup.
additional instructions are contained therein.
- make a project whose test file will be "accidentally" ignored: mkdir ignored cd ignored npm init -f echo > my.test.js - in package.json, add an ignore pattern matching a parent folder: "jest": { ["ignore.
*"] } - run `jest` and observe unhelpful error message: no tests found in c: dev ignored 2 files checked.
testmatch: ** /__tests__/ ** / * .js?
(x), ** - 1 match testpathignorepatterns: ignore.
* 0 matches pattern: 0 matches `jest --version`: 23.4.0
steps to reproduce the behavior: use node.6.9.1 or other 6.version and run jest tests.
phofcode that test will fail the last assertion.
minimal set of files are in this repo: phofurl with jest `21.2.1` in the `package.json` file, `docker-compose run test` which runs `jest`, finds files and passes.
with jest `22.4.4` in the `package.json` file, `docker-compose run test` which runs `jest`, fails to find test files.
- run these terminal commands (including install of babel-core to avoid a "peer dependency" warning): mkdir temp cd temp npm init -f npm install --global jest ts-jest typescript babel-core - add package.json configuration for ts-jest: "jest": { "transform": { ".+ .tsx?$": "ts-jest" }, "testregex": "modulefileextensions": } - run `jest` to get "module ts-jest in the transform option was not found."
steps to reproduce the behavior: i put our code that causes this above.
because it 's using nested promises it seems hard to create a small sample to pre
1) save your project with jest to hidden folder 2) run command in `yarn test --coverage` result: phofcode
the `package.json` used is the following: phofcode
phofcode phofcode however if do following it works as expected: - phofcode phofcode
steps to reproduce the behavior: phofcode phofcode change the above test to use inline snapshots: phofcode phofcode now both a file and an inline snapshots exists.
the file snapshot is completely ignored, jest doesn't report that it's obsolete and doesn't remove it with `jest -u`.
in `jest.config.js`, if we set: phofcode also tested with coma (as stated in another closed issue) phofcode please also note, using that kind of syntax: phofcode without alternate, also produces errors.
1. create a worker using the node `worker_threads` library 2. do any console output inside the worker
run jest with `--detectopenhandles` and require lodash.
i 'm not sure what the exact conditions going on here, but it 's pretty reliably reproducible with the repo below.
the behavior looks like this: phofcode
create a simple test with the code above
follow the instruction to set-up jest with babel v7.
make sure that you have jest 23.3.0 installed.
interestingly it seems to fail with node v8/v10 only.
v6 seems to be fine (windows + unix): - travis phofhyperlink - appveyor phofhyperlink installation happened with npm v6.1.0, not yarn.
i 've created a repl here: phofurl
steps to reproduce the behavior: how to reproduce phofimage
this test using with objects has a false failure report phofcode the test fails because the second mock.titi call received new bar( 'not b at all ') instead of new bar( 'b ') as a parameter.
**but the error messages says it was called with new bar( 'c ') which is the last call.
1. create angular project using @angular/cli in version 6.0.8.
3. in `package.json` add jest settings: phofcode 4. in `src` directory add `setupjest.ts`: phofcode 5. test.each() in test.
steps to reproduce the behavior: * use the following jest config on windows with a test under `src file.test.ts`: phofcode
steps to reproduce the behavior: phofcode
- create a new angular project with cli - add `jest` - import file from outside project: `import {name} from '../../../shared';` - use import in component: `@input() name: name; // @input() cause error` run `jest` error is: phofcode
see the screenshot code above or repl link below.
steps to reproduce the behavior: 1. go to phofurl 2. click on any link in the "browse the docs" category.
create test file which uses both functions to create tests.
phofcode run jest with config phofcode and phofcode
steps to reproduce the behavior: phofcode with jest 23
debug test case of react using vscode.
refer to the included code snippet.
install latest jest and run tests.
i 've created a repo with the smallest repro case i could find.
see steps in readme: phofurl
this can be reproduced at least with jest 23.2.0. an empty project with a dependeny on jest and the jest extension installed will exhibit this problem with any test being executed.
$ git clone -b $ yarn $ yarn run jest unfortunately i wouldn't know how to reproduce this in a fresh repo...
steps to reproduce the behavior: - run the repl.it provided
use es2018 promise `finally()` in your application (importing `babel-polyfill` for example) and try to test it with `mockresolvedvalue()` and `mockimplementation()`.
i have following testmatch in jest.config phofcode example of test file location
change case of a mock module path
steps to reproduce the behavior:
* clone repository phofurl * install dependencies : `yarn install` * run `yarn test`
> ** alt: ** run phofurl **1. create `foo.js`** phofcode **2. create `foo-test.js`** phofcode **3. create `config.json`** phofcode **4. run `npx jest --config config.json`** phofcode
` phofurl clone it and run jest with and witout coverage.
steps to reproduce the behavior:
steps to reproduce the behavior: launch.config (vscode) with below config and hit f5.
phofcode image phofimage image phofimage
create a `jest` configuration file and run it using `jest error log phofcode
subscribe to an observable and execute an expect-statement that should fail.
you can reproduce the error if you try to run the tests from phofurl phofcode as you can see here phofcode but it works fine if i do this: phofcode phofcode
steps to reproduce the behavior: go to phofurl and see a link to phofurl click on it and get a 404. search google for "jest" and click on the main link to get this repository.
1. clone the repro repository phofhyperlink 2. run `npm install && npm run bootstrap` 3. run `npm run test:nocache`, and note in stdout that `project1/index.js` and `project2/index.js` both have 100% coverage.
this is the result of running the tests with the `--no-cache` flag 4. run `npm run test:cache`, and note in stdout we only see code coverage for 1 project.
this is result of running tests with no flags 5. run `npm run test:ohno`, and note in stdout we only see code coverage for 1 project.
this is result of running tests with `--no-cache` `-i`
phofcode phofcode results to: phofcode test2 is not obsoleted.
run this test first phofcode it will pass.
now, run the following test: phofcode this will fail with the following error on the console: phofcode
use create-react-app version 1.5.2 to create a new app within root app directory, run yarn install open app in vs code.
almost immediately app.test.js shows an error, before i have modified any files in the app.
phofcode phofcode phofcode 1. run "npm install" 2. run all tests initially with => 1 passed, 1 failed as expected.
3. rerun failed tests only with --onlyfailures`.
unexpectedly, all tests are run again.
1 - clone the repository.
2 - type 'yarn test' in the command line to execute jest tests 3- see that the antd test fails and the test without antd component passes.
steps to reproduce the behavior: 1. register chai's `should` helpers on the global object by importing `chai/register-should` or calling `chai.should()`.
2. attempt to make an assertion with chai's fluent language chains.
steps to reproduce the behavior: 1. create a property matcher for a nested object, example: phofcode 2. resulting snapshot will not include `bar: ' '` .e.g: phofcode
original test is pretty straight forward.
the code formatting in question is on happening on the header of a react-table component: phofcode
1. git clone 2. cd node-jest-err-demo 3. npm install 4. cp .env.example .env 5. npm run test .
steps to reproduce the behavior: 1. create project based on ts.
2. add `jest` and `jest-each` typings (`yarn add jest @types/jest-each -d`) 3. try to import default export `each`.
initiate a test run that matches only a single test.
- create two test files, `__tests__/test.js` and fill with a placeholder test.
- set `testmatch` in jest config to `"testmatch": " ** /__tests__/ * .js", "!
** / * .noop.js"]` - run jest a minimal repo to repoduce is provided [here phofhyperlink
steps to reproduce the behavior: run jest for this test case: phofcode
- clone phofurl - run `npm i`, - run `npm test`, - touch the `__tests__/a.spec.js` file to get the test running, observe a correctly reported exception line, uncomment the second line of the test file to let babel transform import.
save file, observe an incorrectly reported exception line.
view the page sources on phofurl and you'll notice the feed urls are: - phofurl - phofurl
steps to reproduce the behavior: clone my repo ( phofurl and run the following commands in both `/v22` and `/v23` directories: phofcode they both run the same tests and apply `-t false` so that it only runs tests with the string 'false' in their title.
v22 skips suite which has no matching tests whereas v23 throws an error instead.
change one of the reducer files in your project and check coverage for the rest of the files.
steps to reproduce the behavior: my global setup file looks like this: phofcode and then my custom environment: phofcode
steps to reproduce the behavior: 1. clone phofurl 2.
`yarn` - install dependencies 3.
`yarn test` - fails 4.
`rm .babelrc` - remove babel config 5.
just create a component like above and a test too.
the action called is just a regular function that receives 2 parameters.
dispatch should be called with that function.
don't know if i am testing it the wrong way.
don't know if it is relevant but i am running the tests in npm with the following; `jest --verbose --setupfiles ./jest.config.js` <details> <summary>here is the action if needed</summary> phofcode </details>
run `jest`, `jest --runinband` or `jest --runinband --no-cache` with the following two test files.
** note ** : when using `jest` the first execution will success, subsequent ones will fail.
phofcode phofcode phofcode the real world test case provided a bit more context that might be helpful.
i am not sure why it did not show up in the reduced example.
**package run command** `cross-env node_env=test jest --silent --config jest.config.js` **config for jest** phofcode 1. create a single test and run jest phofcode 2. watch jest fail image phofimage
have a typescript project that transpiles js into a folder that is ignored by `.gitignore`.
update a ts file while haven `tsc` and `jest` both running in watch mode.
steps to reproduce the behavior: 1. npm install react-native-onesignal 2. run jest
steps to reproduce the behavior: configure tsconfig.ts with a path.
in that path, change the import { component } from './component ' to import { component } from 'at app/component ' (same note, at symbol doesn 't get printed) and welcome to the dance...
create at least two angular test suites for two components, each component having a @hostlistener.
run the test suites together.
- run the project & run jest in watch mode - try to modify app module - after some modifications jest task is crashed with error: jest1 phofimage
steps to reproduce the behavior: 1. create a test file within a directory 2. on windows, run `jest` or any flags variant that runs that file 3. copy & paste the file contents from the reporter as a matcher to `jest` on the cli 4. observe no matches
steps to reproduce the behavior: - setup react project with babel transpilation with babel config in webpack loaders section - run the project & ensure it works - setup jest and create transformer.js like this: phofcode - register it in jest config phofcode here is the config phofcode run test and see the error : phofcode
although i 'm experiencing this in an express/swagger project where simultaneous autorebuild and autotest make dev much faster, that code isn 't ready for consumption yet.
however, i can replicate the issue with the provided repo: - check out repo at: phofurl - `npm install` - in one terminal, run `npm run test --watchall` (want to force longest test run possible) - in another terminal, run `npm autobuild` edit any ts file under src & save -- this should kick off a rebuild & retest jest should crash at some point with enoent on a file in `dist`
create a styled component in one file `export const styledcomponent = styled.div``;` import it in another file `import { styledcomponent } from '../../component';` extend the imported component `const extendedcomponent = write a snapshot test for component phofcode run the test.
steps to reproduce the behavior: 1. run jest with `--watch --notify` 1. save a file that is untested 1. notification like so shows up and console says `no tests found related to files changed since last commit.` <img width="340" alt="screen shot at 5 14 50 pm" src=" phofurl
don 't have time to create a proper repro right now, but i can work on it later if you 're not able to repro separately.
phofcode create a file test: phofcode the error says: phofcode windows node v: 8.9.4 jest: 22.4.4} node-jt400: 1.6.
1) windows and package with `:` in it 's name (like edgee:slingshot package).
sometimes a tests succeeds; not sure when those cache files are written or renamed.
i assume that writing the files works, because the file edgee exists, but then renaming it will probably fail.
see instructions for running circus here: #4362. then one can run the following test (which should fail, but it passes): phofurl
create a file called `string.test.js` with the following contents.
phofcode then run the following.
consider the following test: phofcode in jest 22 the resulting snapshot was: phofcode running the same test in jest 23 produces: phofcode the `target={undefined}` has been removed, causing the test to fail.
i could not find anything related to that in changelog.
is this an intended change
steps to reproduce the behavior: this may be affected by my usage of projects.
i have the following configs.
phofcode so i assume that when i run `yarn test --watch` which is `jest --coverage` it would run with the `jest.config.js` as its configuration.
create a test file with the following in it: phofcode
execute the test given above using node v10.0.0 on macos.
steps to reproduce the behavior: * add babel plugin that alters component `displayname` to your `babel-jest` configuration.
* have code that triggers a `displayname` injection to your code.
* write a test that relies on that `displayname`.
* run `jest --coverage` and watch your test fail.
steps to reproduce the behavior: go to the jest website.
direct url, via the facebook.github.io website, via google, etc.
steps to reproduce the behavior: run `yarn test --coverage`
run jest on a single using the default `"testenvironment": "jsdom"` then specify the `node` environment for a test.
phofcode the second test will fail: phofcode
steps to reproduce the behavior: - import an es-modules using library like `lodash-es` into your project - write a jest test that imports the file you import the es-modules using package - setup a recent version of babel ** 7 ** - configure .babelrc to use the env preset to transpile es6 modules to commonjs configure jest transform .js files with `babel-jest` and not ignore es-modules using package
test(bug repro, done => { bugrepro(); } if we check the coverage report only log statement is covered not the constant values
steps to reproduce the behavior: 1. commit changes to a function that is tested via snapshot _without updating the snapshots_ 2. run `jest --watch` and input `a` when prompted to run the full suite 3. the tests will fail (as expected) on the out of date snapshot 4. input `u` to update snapshots 5. jest will log that no changes were found and not update any snapshots phofcode
this code snippet is valid and runs tests without errors phofcode this code snippet throws `syntaxerror: await is only valid in async function` phofcode
- set up a stylemock and a globalsetup file - import a react component that imports a stylesheet in globalsetup file
steps to reproduce the behavior: 1. press `f` to run all failing tests first.
you should get "unexpected behavior image 2" 2. now press `a` to run all tests.
you should get "unexpected behavior image 1"
steps to reproduce the behavior: create a top level project with the following file: phofcode create a child project with the following file: phofcode
because the project is not very large, the effect is not as pronounced as in other projects.
in our production test suite we have 44 angular tests that trigger an out of memory after 3 runs (1331mb).
however it does show that the heap size grows after each test run: **log growing heapsize** 1. checkout phofurl 2.
`yarn run jest --runinband --logheapusage --watchall` 3. modify a character in a testfile to trigger another test run, the heapsize will keep on growing **detect leaks** 1. add a dependency on weak in order to run --detectleaks: yarn add --dev weak 2.
1. delete all test files e.g.
*.test.js 2. run `jest --config=jest.json --coverage` with below configuration in `jest.json`: phofcode
todo find out how to consistently reproduce / minimal project hoped that does it, but nope: _if you push f5 in the browser few times too fast / working in multiple tabs this bug often occurs:_
steps to reproduce the behavior: `error` argument is a `fastifyerror` instance.
we need to cast to node.js `errnoexception` to get code property.
can 't scope the issue properly.
phofcode phofcode all work with an encoded path param: phofcode
steps to reproduce the behavior: ajv config: phofcode i also tried modifying the source: phofurl (didn 't work) phofcode in route: phofcode
steps to reproduce the behavior: paste your code here: phofcode
steps to reproduce the behavior: 1. run the following code - it should throw a `fst_err_sch_build` error.
2. comment out the custom ajv instance and run it again - no problems.
paste your code here: phofcode
i have followed the docs for a simple typescript setup phofhyperlink phofcode however types are not being passed when http2 types are used [!
[enter image description here][1]][1] using http1 types like so phofcode are passed and work correctly [1]: phofurl
steps to reproduce the behavior: 1. create a new folder with the following `package.json`: phofcode 2. create a new file called `index.js` and add the following code: phofcode 3. run `npm install` and then `npm start`.
here is a minimal pnpm workspace can reproduce the issue.
unzip it and follow the readme to install packages then run the script, warning will be alerted.
for example this will ** not ** work: phofcode as a ** workaround ** it can be declared like this (see the type value): for example this will work: phofcode example: phofurl
clone this repo phofhyperlink : `npm i` `npm run dev` call the `/v1/attendances//` rout using postman or similar.
removing generics (`<server, incomingmessage, serverresponse>`) typescript pops a compiler error: `generic type httprequest, httpresponse, query, params, headers, body> ' requires between 3 and 7 type arguments.` phofcode
steps to reproduce the behavior: 1. clone this phofhyperlink repo.
2. install deps 3. export to aws lambda or try with serverless framework 4. see, it not registers plugins paste your code here: phofcode
steps to reproduce the behavior: use `fastify.addschema` paste your code here: phofcode
steps to reproduce the behavior: paste your code here: phofcode
steps to reproduce the behavior: phofcode opening `/throwasync` will correctly show the error handler.
opening `/throw` will crash the app.
run this code with fastify 2.0.0 installed: phofcode then run (or use a browser): phofcode
steps to reproduce the behavior: run the example code and make a get request to phofurl phofcode
steps to reproduce the behavior: add schema with simple item.
then add schema for items array and use first schema `$id` in `items`.
then use the first schema in some route.
paste your code here: phofcode phofcode
( i used only one prehandler hook, but showing three examples to demonstrate the issue/expected ) phofcode phofcode phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: paste your code here: phofcode
steps to reproduce the behavior: paste your code here: phofcode
phofcode paste your code here: phofcode
this was not intentionally produced so i sadly have no reproduce steps.
i am using fastify-http-proxy and in beforehandler, trying to set multiple cookies on reply like phofcode
create the root route / and register it with prefix: phofcode
steps to reproduce the behavior: just create a route and return an invalid response.
phofcode the app hangs up with "reply already sent" and nothing is sent to the client
steps to reproduce the behavior: paste your code here: phofcode
try this: phofcode i have it running over here: phofurl
have a fontawesome pro version and try to install with the .npmrc alias and the token
package.json phofcode .npmrc phofcode run npm i
insert a url to your test case - use codepen.io, jsfiddle.net, jsbin.com, codesandbox.io, or whatever.
phofurl basically, the svg's use element always makes the icon a tad smaller than the svg element itself.
one other curious thing is that the font icon always overflows i element.
insert a url to your test case - use codepen.io, jsfiddle.net, jsbin.com, codesandbox.io, or whatever.
phofurl describe any details about the test case that we need to know like "whatever you do, don 't click the red button."
apply font to any project
i created a plunk so that you can try it out; phofurl
simply insert a kit script on your page `<script type="text/javascript" and it will load those files without browser caching shots to help explain your problem.
this code: phofcode raises a compiler error: phofcode
use font awesome from behind a proxy describe any details about the test case that we need to know like "whatever you do, don 't click the red button."
download phofhyperlink and compare content of `package.json` and `license.txt`.
phofurl api refrence: phofurl this is not a duplicate of phofurl which was for another issue in the ts definition that got fixed temporary fix: phofcode
in the head: `<link rel="stylesheet" href=" phofurl in the body: `<i class="fab `<i class="fab fa-google"></i>`
insert a url to your test case - use codepen.io, jsfiddle.net, jsbin.c awesome-font-performance phofimage om, codesandbox.io, or whatever.
describe any details about the test case that we need to know like "whatever you do, don 't click the red button."
this custom element displays no icon, but looking at the dom you can see the zero-sized `svg`: phofcode glitch: phofurl
cant reproduce through external apps as this is a font awesome pro issue.
to replicate use a duotone icon when using the `fa-li ul` class structure.
insert a url to your test case - use codepen.io, jsfiddle.net, jsbin.com, codesandbox.io, or whatever.
phofcode describe any details about the test case that we need to know like "whatever you do, don 't click the red button."
i use affinity designer and fontawesome works well with other icons, but when i copy the glyph for icon "phone-laptop" to the clipboard and paste it into the text field, the icon does not appear.
i also installed latest version of fontawesome in case i missed an update, but this doesn 't fix behavior.
test case: phofhyperlink see bugzilla for steps to reproduce.
describe any details about the test case that we need to know like "whatever you do, don 't click the red button."
go to phofurl and scroll to the faq question "why do i have to pay for font awesome icons now?"
the word awesome is spelled aweosme in one instance.
it's difficult to reproduce since you have to have an old version of a script cached in your browser.
steps to reproduce the behavior: 1. build a simple html page 2. embed the testing javascript the head of that page
steps to reproduce the behavior: 1. go to ' phofurl with darkmode enabled.
2. click on the input labled 'your card number:' and enter some numbers.
3. the entered input is not readable as the color of the input text is same as background-color of input.
4. same bug applies to credit card expiration and cvc inputs.
steps to reproduce the behavior: 1. sign in to fcc (successfully) 1. navigate to project to be submitted _i see this error in the console_ image phofimage 1. press "run the tests" 1. press "submit and go next challenge..." _i see this error in the console_ image phofimage _and i see this error on page:_ image phofimage i press freecodecamp logo on top middle of page in order see my progress on lessons and i am suddenly logged out _i this page after pressing logo:_ image phofimage
1. go to any challenge.
2. try to scroll inside the code editor.
3. it does not work.
steps to reproduce the behavior: 1. go to the settings page 2. make sure you have accepted academic honesty policy 3. hover over "you have accepted academic honesty" button
steps to reproduce the behavior: 1. go to profile page.
2. hover over the github icon below profile image 3. the background colour will not cover the icon on hover.
steps to reproduce the behavior: 1. select a word or a character.
2. press ctrl + d until you've selected the desired words that you wish to change 3. when trying to deselect with esc, the editor loses focus.
steps to reproduce the behavior: 1. visit profile page and view footer
steps to reproduce the behavior: 1. go to phofurl 2. try to trigger success state in `email settings` (`your internet presence` client validation is currently not working as described by related issue) 3. refer to
steps to reproduce the behavior: 1. go to phofurl 2. try to fill `email settings` and `your internet presence` 3. refer to
steps to reproduce the behavior: 1. go to /donate 2. click on 'show other ways to donate' 3. see: showotherdonate phofimage
steps to reproduce the behavior: 1. go to `/settings` 2. scroll down to 'your internet presence' 3. enter ` phofurl below 'twitter' 4. click on something else to remove focus 5. see the green border.
steps to reproduce the behavior: 1. go to a challenge phofhyperlink 2. click on run the test 3. scroll down to the output 4. see: outputdefault phofimage in the default theme and outputnight phofimage in night mode.
1. go to phofurl 2. click on freecodecamp logo
steps to reproduce the behavior: 1. go to the challenge 'create a controlled form ' 2. click on submit in the output window 3. see the new challenge window render
steps to reproduce the behavior: 1. go to any code challenge page (for example: phofurl 2. click on challenge description (left part).
3. try to scroll description with keyboard up and down keys.
4. it is not working.
1. go to any project section where url is required 2. type 'n' or 'p' in the url field
1. go to the settings page 2. put a long description in the portfolio item 3. check out the public portfolio (hard refresh it ctrl+f5; this update bug is under triage)
steps to reproduce the behavior: 1. as a logged out user 2. go to the first challenge 3. complete it 4. press ctrl+enter 5. it marks as solved also the following challenge and you can go ahead
steps to reproduce the behavior: 1. go to `guide.freecodecamp.org` 2. click on `help our community expand it`
steps to reproduce the behavior: 1. go to phofurl 2. complete the challenge 3. ctrl-enter 4. see the success modal 5. navigate back 6. go to phofurl 7. see that the modal is still present
1. open firefox 2. open a console from a site that is not freecodecamp.org 3. attempt to execute phofcode
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to the markdown for any challenge 2. replace the description section with the following: phofcode 3. see following in browser: markdowninconsistency phofimage
steps to reproduce the behavior: 1. go to phofurl 2. enter `console.log(undefined)` into the editor.
3. run the tests 4. see phofcode
appears to be an account-specific issue.
steps to reproduce the behavior: 1. using chrome go to ` phofurl 2. click on `say hello to html elements` 3. open the dev console 4. see error
1. be logged in at www.freecodecamp.org 2. click on the button 'go to the coding curriculum' 3. open up browser tools and enable xhr logging 4. see errors
steps to reproduce the behavior: 1. go to phofurl 2. click `signin` and wait for the redirect to
steps to reproduce the behavior: 1. go to 'submit and move on to next challenge."
steps to reproduce the behavior: go to phofurl
steps to reproduce the behavior: 1. create an account using a github account.
2. change your username on github.
3. try to sign in to the platform.
4. see you're being registered as a new user.
steps to reproduce the behavior: 1. go to any lesson page (ex: phofurl 2. click on the search bar at the top 3. type a search term or phrase that contains "e" (ex: "search for me") 4. see error
steps to reproduce the behavior: 1.
`npm run develop` 3. log out of your local freecodecamp (either via settings or just go incognito) 3. go to phofurl 4. see that you get redirected to phofurl with a message 'something is not quite right.
a report has been generated and the freecodecamp.org team have been notified.'
steps to reproduce the behavior: 1. go to ' phofurl 2. click on 'solution input bar and submit any arbitrary link... for example: google, facebook, amazon.com (will require full phofurl 4. accepts the link as a solution and checks it off in your curriculum only if your press advance, if you press back nothing happens.
steps to reproduce the behavior: 1. go to ' phofurl 2. make sure you have dark/night theme enabled.
3. scroll all the way up and notice a white space visible just under the navigation nbar.
steps to reproduce the behavior: 1. go to fcc forums.
2. click on your profile image on top right and select preferences.
3. click on interface on bottom left.
4. select dark-theme under theme and see how the background is not working properly.
steps to reproduce the behavior: 1. go to freecodecamp profile 3. scroll down to the heatmap with zoom at 100%.
steps to reproduce the behavior: 1. go to phofurl 2. search any term 3. now type in another term in the search bar 4. click on magnifying icon
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to any lesson 2. open the dev tools 3. inspect the editor 4. observe the `role` attribute
steps to reproduce the behavior: 1. setup freecodecamp locally, using docker, following the steps at phofurl 2. to use what you just installed, run `npm run docker:develop` 3. this is when the error happens.
steps to reproduce the behavior: 1. go to ' default props challenge phofhyperlink ' 2. type `<shoppingcart />` instead of `<items />` 4. see error
steps to reproduce the behavior: 1. go to challenge link phofhyperlink 2. click on 'solution input box ' 3. enter " phofurl 4. the solution gets accepted.
5. enter " phofurl 6. see error
go to this curriculum phofhyperlink then try to scroll down.
steps to reproduce the behavior: 1. go to www.freecodecamp.rocks 2. reduce the browser width until the menu button appears in the top right 3. navigate to 4. click on top right menu button 5. click on top left logo the final click can be on any link that doesn't cause a page load.
steps to reproduce the behavior: 1. go to freecodecamp.rocks or refresh the page if you're already there.
1. go to either the 'learn' or 'settings' page with a wide enough window that the logo should show up 2. it doesn't show up - it does show up if you shrink window and then expand it again.
steps to reproduce the behavior: 1. go to freecodecamp.rocks 2. oops!
steps to reproduce the behavior: 1. locally open the project 2. install node js and npm 3- run npm test
steps to reproduce the behavior: 1. go to ' phofurl 2. click on 'search bar in header' 3. type 'd3.js' (well you can type anything).
4. see error (alignment of search result is improper)
steps to reproduce the behavior: 1. go to ' phofurl 2. see the progress heatmap
steps to reproduce the behavior: 1. go to phofurl 2. try to extend campsite component 3. after writing any part after the first curly braces, the cpu usage spikes to 70-80% and memory goes up 80-85% occupied 4. browser freezes
1. open a challenge page on a local site.
phofurl 2. edit and save the corresponding markdown file.
3. the page may not update and/or not reflect the changes when reloaded.
steps to reproduce the behavior: follow the steps in the guide.
after installing and cloning everything, in summary: 1.
steps to reproduce the behavior: 1. go to any challenge and complete it 2. click the submit button or use ctrl-enter to submit.
steps to reproduce the behavior: 1. go to learn.freecodecamp.org and type in any query in the search bar.
you will be redirected to a new tab.
2. click on the search bar and press enter or write any new query and press enter.
3. you will see that the query in search bar disappears and no result is given.
steps to reproduce the behavior: 1. go to the main site learn.freecodecamp.org 2. click on the search bar and type a query 3. there is no typehead
steps to reproduce the behavior: 1. go to learn.freecodecamp.org 2. type in a search query on learn platform and press enter 3. a new tab opens with a trailing quotation in the query
steps to reproduce the behavior: 1. go to freecodecamp.rocks phofhyperlink via mobile 2. scroll down to '....' 3. see error
steps to reproduce the behavior: 1. go to phofhyperlink 2. click on run tests 3. open console 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. sign into fcc on google chrome.
2. clear your cached images and files on google chrome (found where you clear history).
3. sign back into fcc on google chrome if necessary.
4. go to curriculum and find that you are signed out.
steps to reproduce the behavior: 1. go to fcc page and log in 2. click on any challenge and start solving it 3. after solving [1 || 2 || 3] challenges, the pop-up will be visible 4. this is repeating problem ( more challenges, same pop-up )
steps to reproduce the behavior: 1. go to the challenge on local 2. enter the correct solution `[a, b] = [b, a]` 3. click the "run tests" button 4. results window shows test fails (see screenshot below)
steps to reproduce the behavior: 1.open this link phofhyperlink .
2. paste any url in the solution input 3. ctrl + enter 4. and it passes
1- go to phofurl (this is where i found it but it's not strictly necessary to reproduce it) paste the following code in the editor: phofcode it works in codepen.io phofhyperlink , jscomplete.com phofhyperlink , jsfiddle.net phofhyperlink , and the native chrome console.
steps to reproduce the behavior: 1. go to "settings" 2. change your username 3. click "save" 4. switch on/off "night mode" 5. oops, there is some bug :wink:
steps to reproduce the behavior: 1. go to free code camp phofhyperlink 2. click on 'sign in with google or github' 3. you will see that my account is not the correct one and you will see that i still have the old and new username.
steps to reproduce the behavior: 1. locally use the latest development version of the "learn" platform with the monaco editor (not production version).
2. go to any lesson where you can enter javascript.
phofurl 3. enter code below into editor.
phofcode 4. look at console to see code does not finished executing, per console messages.
steps to reproduce the behavior: 1. from root - `cd api-server/ && npm run babel-dev-server` 2. after db has loaded go to browser url `localhost:3000` 3. error will appear in node console
enter a wrong (or no) otp
steps to reproduce the behavior: 1. go to for example phofurl 2. in code area replace code with phofcode
steps to reproduce the behavior: 1. go to any challenge with an editor (e.g: phofurl 2.
3. observe the console 4. see error
1. go to challenge page like this - phofurl 2. try to drag separator (which is between a code panel and a description) 3. very hard to catch it by mouse because ff draws a scroll-related ui controls.
steps to reproduce the behavior: 1. go to phofurl
1. submit a minor pr change 2. check build in travis ci (ie: phofurl
steps to reproduce the behavior: 1. execute `npm run bootstrap` /cc @raisedadead
steps to reproduce the behavior: 1. go to challenges linked above 2. see error, also you can see horizontal scroll bar
steps to reproduce the behavior: 1. go to ' phofurl 2. type text in search input at the top navigation bar 3. see the auto-complete dropdown, the block width is out of screen
steps to reproduce the behavior: 1. log in to freecodecamp.
2. go to the "settings" page.
3. see the "save" button is truncated next to the "username" field.
steps to reproduce the behavior: 1. go to my public profile ( phofurl 2. notice the heat map does not contain any colored boxes, even if there is data on october 17th to 19th upon hovering.
3. open the browser console and notice the error.
steps to reproduce the behavior: 1. go to ' phofurl ' 2. scroll down to ' hint 3 ' 4. see error (it will auto scroll upto the position (see the screenshot))
basically, we need to click orum and then click the menu image.
then from the drop-down list, we can see faq.
<img width="1439" alt="screen shot at 17 24 42" src=" phofurl phofurl
steps to reproduce the behavior: 1. clone project locally 2. follow the guide here phofhyperlink to set it up locally.
1. type in search query on learn platform, notice no typeahead 2. press enter, redirect to search platform - notice trailing quotation in query 3. enter new search in same tab (search platform), notice typeahead works 4. press enter when finished with query, notice query and results disappear 5. search for min heap and follow dead link, repeat!
steps to reproduce the behavior: 1. go to 'learn.freecodecamp.org' 2. type 'min heap' in the search bar 3. click on the first link in the results list image phofimage 4. see 404
steps to reproduce the behavior: 1.
`git fetch upstream master` 2.
`git reset --hard upstream/master` 3. see error
steps to reproduce the behavior: 1. go to any lesson in the curriculum.
2. enter the code editor, set focus to it.
3. press alt+f1 to show accessibility help for the editor, and choose enable screen reader mode 4. complete lesson, advance next, and repeat steps two and three
steps to reproduce the behavior: 1. go to any repo of your choice 2. click the pull requests link 3. create new pull request using "<>" in title 4. see error
steps to reproduce the behavior: open an issue with an image (or create a new issue and upload an image) - the image attachments are not shown.
tapping on them opens a new tab with a 500 error.
steps to reproduce the behavior: 1. create an ssh key or use an existing one.
2. go to a repository, go to "
steps to reproduce the behavior: 1. be sure not to have a `public/css/custom.css` file 2. logout 3. login 4.
404 page, with url <server>/css/custom.css
1. go to a repository without a master branch 2. go to the pull requests tab 3. hit "new pull request" 4. observe 404 error
steps to reproduce the behavior: 1. install gogs as per guide 2. start in manually to confirm all is looking good.
3. attempt to launch gogs as a daemon / background service.
steps to reproduce the behavior: 1. go to 'settings->webhooks' on a repo 2. add a new one and then click 'test delivery' 3. see that nothing happens and the browser log shows a 500
steps to reproduce the behavior: 1. i followed docs for upgrade phofhyperlink 2. process is pretty simple, everything was fine till start 3.
/etc/init.d/gogs start do nothing, status after start/restart returns fail 4.
./gogs web return just this: `$ ./gogs web` [trace] custom path: /opt/gogs/custom` [trace] log path: /opt/gogs/log` [trace] log mode: file (info)` [ info] data nothing more logs are empty after stop&upgrade when deleting upgraded gogs folder and replacing with original one from backup runs back again so the problem should be somewhere in new files.
* create a repo with a `readme.md` * put an image in the repo (for example `/img/example.png`) * create an image ink in the `readme.md` (for example ` phofimage phofhyperlink `)
steps to reproduce the behavior: 1. try to perform a `git push` or `git pull`
steps to reproduce the behavior: 1. go to 'new repository' page 2. set repository name 3. click on checkbox 'initialize this repository with selected files and template' 4. after 'create repository' i see error 500 phofcode
steps to reproduce the behavior: 1. pull from multiple git repositories simultaneously 2. receive errors from several of the pulls 3. pull again, usually works fine (maybe since one has already been updated locally?)
steps to reproduce the behavior: 1. run gogs container : `docker run -d -v /root/gogs:/data -p -p gogs/gogs` 2. create a repository in gogs 3. stop and remove the container 4. repeat step 1 and gogs container run successfully but will not be accessable.
when i try to go phofurl it do not exist but if i know the sha1 hash visiting phofurl it still exist
steps to reproduce the behavior: installed, changed port, and tried to set to https only, both failed once installed.
see left section of screenshots in #1415 / #1416
steps to reproduce the behavior: 1. console run ./gogs backup 2. backup succeed!
archive is located at: size 2.79gb 3. move file to new server, new server is docker run gogs, run "docker exec -it gogs" 4. run ./gogs restore --from 5.after a few seconds throw error:
steps to reproduce the behavior: 1. just create a pr.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
turn off your router turn on your router try to pull from repo git pull origin master fatal: unable to access ' phofurl failed to connect to repo.domain.com port 6000: connection refused
steps to reproduce the behavior: 1. having a working gogs on macos at (
steps to reproduce the behavior: 1. after building a docker instance per the instructions, open page at * .
* :10080/install 2. set your parameters in the fields following the guidelines.
(mysql is db choice i selected) 3. click install gogs button after you are done with settings.. 4. see error connect: connection refused" - my host ip is - i did not open a port to 3306 on host as it was not in guidelines.
steps to reproduce the behavior: 1. login/create with active directory user 2. logout 3. try login again
steps to reproduce the behavior: 1. create a fork of a fork on some gogs instance, e. g. phofurl (just forked the first fork i could find on explore) 2. create an api token via settings 3. try to get the list of repositories of the user that created transitive fork, so e. g. `curl -i --header "authorization: token <token>" phofurl 4. see error 500
create repo with two images: phofcode
put a securitycontext on a deployment specification inside a k8s
steps to reproduce the behavior: 1. create an authentication source (say a smtp auth source with id 2) 2. change user to the new auth source in admin panel 3. change auth source to local (id 0) with api `http --print hhb patch "authorization: token ${gogs_token}" source_id:=0 login_name=$gogs_user password=$gogs_user` 4. server response 200 but auth source not changed (per admin panel and login error message)
steps to reproduce the behavior: 1. go to 'create repository' or 'create organization' 2. give name 3. click on 'create repository/organization' 4. see error
steps to reproduce the behavior: 1. get a repository a in gogs 2. fork repository a as b 3. enable pull requests in repository b 's settings 4. press "new pull requests" in b 's gogs page
- install on windows 2012 r2 with external openssh - try checking out with ssh
steps to reproduce the behavior: 1. start creating a new repo.
2. click on the help icon next to the `readme` field.
steps to reproduce the behavior: 1. sign in as the admin user.
2. go to the admin panel -> users -> create new account.
3. enter information and an email address in the aforementioned format.
4. gogs responds with "email address is not a valid email address."
steps to reproduce the behavior: 1. go to 'your settings' 2. click on 'applications' 3. click on 'generate new token' 4. enter a token name and then click 'generate token' 5. use the generated token to clone a private repo e.g.
`git clone phofurl 6. navigate to 'your settings --> applications' 7. note that the token you used clone the git repo doesn't show as ever being used.
steps to reproduce the behavior: 1. just add "*.proto" file to project 2. edit it and paste this text into file phofcode 3. save changes 4. what you see are those strings with no coloration and highlighting phofcode
steps to reproduce the behavior: assuming that the server runs on ` phofurl 1. from a terminal 2. type the following command `curl -s phofurl | grep csrf` 3. copy the csrf token from command above 4. create a file with following content named request.txt phofcode 5. type following command.
note: replace `<token>` with csrf token from step 3.
`curl -kis -x 'post ' -h 'x-csrf-token: <token> ' -h 'content-type: multipart/form-data; boundary=boundary ' -b 'lang=en-us; _csrf=<token> ' --data-binary @request.txt ' phofurl the command will make a multipart request to `releases/attachments` endpoint with data from file request.txt from step 4 6. the server will reply with an uuid for attachment file, visit page at ` phofurl to see it
steps to reproduce the behavior: go to any repo (in russian locale)
steps to reproduce the behavior: 1. go to 'registration ' 2. click on 'fill inputs ' 3. click on 'register ' 4. see error
steps to reproduce the behavior: post api call with curl, for example: curl -vvv -x post -u username:password -h "content-type: application/json" phofurl
steps to reproduce the behavior: 1. create commit message `throw exception if confirmation contact was parsed incorrectly #in2-1433` 2. push 3. see gogs log (server side)
steps to reproduce the behavior: 1. go to
fetch and install any package from packager.io and attempt to use either a sqlite database, pam authentication, or self-signed certificate generation
steps to reproduce the behavior: 1. present grouped tableview as modal 2. click first text field cell 3. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: - submit any application that uses your code to the app store
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. in a view controller 's `viewdidappear` method, set `enableautotoolbar = true` 2. tap on a text field in that view controller
steps to reproduce the behavior: 1. link iqlayoutguideconstraint to bottomlayout guide 2. try to build project ### versions
steps to reproduce the behavior: 1. go to your otp sender screen 2. then come back on other screen which have a textfield 3. then taps on textfield opens up the keyboard with last message 4. see error in screen shot
steps to reproduce the behavior: 1. create xib file 2. add stackview with vertical axis 3. add 2 textfields to vertical stackview 4. add 2 stackviews with horizontal axis to stackview 5. add 2 textfields to each horizontal stackview 6.
2 textfields vertical stackview 7. run app 8. select first textfied 9. select next button multiple times
steps to reproduce the behavior: 1. take two uitextview.
2. focus on 1st textview.
4. don't move to the next field.
steps to reproduce the behavior: ran this command: `xcodebuild -workspace [name].xcworkspace -scheme [name]-qa -sdk iphoneos -configuration release-qa archive -archivepath
steps to reproduce the behavior: 1. go to textfield and open keyboard 2. the view in moving up.
3. scroll down to dismiss or click on done.
4. the view keeps on top like the screen shot.
steps to reproduce the behavior: 1. open and run the demo project 2. click on `search bar` at the top of table view 3. scroll down to the end of table view 4. see error - odd gap between table view content and keyboard
steps to reproduce the behavior: 1. take text field with numpad keyboard 2. open keyboard and then dismiss with done button 3. check behavior black screen will display at bottom 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to collectionviewcontroller 2. click on uitextfield 3. tapped "done" button on keyboard 4. see error after keyboard was hide (the same issue on other iphones with ios 12)
in your xcode project scheme, check 'main thread checker', 'malloc scribble', 'malloc stack' now run the application.
click on the memory tool in the project group folder.
click on the 3 circles icon at bottom, app stops, and loads allocations, click on box !
icon, now just shows leaks, and you'll see your framework is leaking lots of memory.
steps to reproduce the behavior: 1. create an uialertcontroller with custom view using library: phofurl 2. add uitextfield inside.
3. when you tap the uitextfield everything looks fine.
it moves the ui to the top so you can enter text.
4. when you click done keyboard dismisses, but ui doesn't go back from top.
i am have using iqkeyboardmanagerswift for multiple apps recently i have updated pods and installed 6.2.0 version.
its not showing keyboard toolbar and not focusing to correct textfield in scrollview / tableview
turn on voiceover & navigate to a place where iqkeyboardmanager is up & the toolbar is visible with buttons.
tap once on a button to hear "toolbar done button button"
steps to reproduce the behavior: 1. create an app for ios 12. enable iqkeyboardmanager in the app delegate.
2. create a viewcontroller that has a uisearchbar at the top (ours is added to a uinavigationcontroller), and a uitableview laid-out below.
3. launch the app, tap in search field.
you will observe keyboard being displayed, and uitableview being shifted down, exposing horizontal black bar.
4. if you explode view hierarchy in xcode debugger, you will see that black is coming from uiwindow.
steps to reproduce the behavior: 1. tap start 2. tap textfield to open the keyboard 3. swipe back or tap back button 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
just open the keyboard it come seldom but some time all navigation bar got hidden some time status bar background color change to white
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
i was able to reproduce this in all data entry viewcontrollers of one of my apps i was updating.
5.0.8 this is reproducible with one of my app store apps.
steps to reproduce the behavior: 1. set up a search bar controller with a tableview, all underneath the navigation bar.
2. when selecting the searchbar the searchbar animates up, as expected, as navigation bar (and title) disappears but search bar immediately animates down to its original position, leaving a big white space between top of view and search bar.
3. this problem appears on devices that are not at least ios 11.
4. in simulator, you only get this bug if you disable 'connect hardware keyboard' - i.e.
where simulator keyboard is visible on simulator.
- to simulate what happens on an actual device.
steps to reproduce the behavior: 1. scroll to bottom to let view controller title become small.
2. tap textfield to show keyboard.
3. tap outside dismiss keyboard.
steps to reproduce the behavior: add `pod 'iqkeyboardmanager'` to your pod file.
use `pod update` from the command line.
within xcode on the product menu, select analyze.
steps to reproduce the behavior: 1. create an empty project.
2. create a view controller a, add child view controller b for it.
3. in childviewcontroller b, add a scroll view, vertical stackview, some text fields.
4. if you try to scroll several times wrong insets will appear.
steps to reproduce the behavior: 1. create extension phofcode 2. use extension phofcode 3. run the app 4. tap the button 5. frozen
steps to reproduce the behavior: 1. select iphone xr 2. run build 3. click on text box 4. keyboard attempts to come up but stops after the word "done"
steps to reproduce the behavior: 1. pin a text field to the leading and trailing safe area 2. add it to enabled classes for iqkeyboardmanager 3. open project in landscape on phone with notch 4. touch the field to present the keyboard, see safe area snap `cgrect.zero`.
5. dismiss keyboard with cmd+k and rect goes back expected value.
steps to reproduce the behavior: add a collectionview to controller's view add a containerview for the textview and constraint left, right and bottom to controller's view, set a height constraint.
add a subview of textview to the containerview.
steps to reproduce the behavior: 1. composing a view controller using masonry.
2. adding a uitextfield to view.
3. calling "becomefirstresponder" of the uitextfield in viewdidload.
4. clicking "done" button of iqkeyboard
steps to reproduce the behavior: 1. build ipad app.
2. build multiple textfields inside storyboard.
3. set return key value of every textfield to "next" except of the last one, set it to "done".
4. implement iqkeyboardreturnhandler as described in the docu.
5. start the app and look at returnkey of last textfield.
steps to reproduce the behavior: 1. setup a uicollectionview with horizontal scrolling 2. activate the keyboard on a cell that would be covered by the keyboard 3. the uicollectionviewcell is relayed out in the uicollectionview
steps to reproduce the behavior: 1. set `autofocus` is true in textinput and use iqkeyboardmanager in one page 2. navigate to this page from other page, the keyboard accessory is missing
steps to reproduce the behavior: 1. open the test app.
tap "go to detail" 2. tap on the ipsum-lorem text (preferably near the bottom) 3. observe that cursor is hidden behind keyboard.
1. add a uitextfield at the bottom of a view which have navigation bar, when the textfield became first responder, iqkeyboardmanager will make the view move up.
2. make the application enter background and back to foreground, view just moved restored.
steps to reproduce the behavior: - generate a pki secret engine - open api explorer in ui - go to "[post] <your pki secret engine>/sign/{role}" - use a request body like this: ( is used between begin certificate request and end certificate request) `{ "csr": "-----begin certificate request----- -----end certificate request-----", "format": "pem" }`
steps to reproduce the behavior: 1. run `vault_cacert=not_found vault operator init` 2. run `vault operator init -ca-cert not_found` 3. see different outputs
steps to reproduce the behavior: phofcode
i followed the documentation here - phofurl
1. access the web interface using firefox 2. try to select an auth method with a screen reader 3. you have no idea what method you selected
steps to reproduce the behavior: 1. demonstrate that vault requires -ca-cert to be set using cli:
steps to reproduce the behavior: 1. with aws auth configured: phofcode 2. and a suitable policy: phofcode 3. create a iam role auth: phofcode 4. having generated a token, use the token to login: phofcode note `identity_policies` is empty.
5. try and access the data the token should have access to.
6. using a userpass token for same identity shows service_common policy appears: ` 7. verify token can access path as per policy.
i have a script that recreates the issue: phofurl you may need to run this multiple times to see the issue.
steps to reproduce the behavior: 1. setup a vault docker container that should use a config file without region identified.
see below for the config file 2. try to boot the container, assuming you have already access set up for this iam role to vault.
steps to reproduce the behavior: phofcode * server operating system/architecture: - freebsd 12.1r with go 1.13.4 compiler
select `oidc` in authentication dropdown.
click `google sign in` button to login with google.
see problem cleanup `kill %1; rm nohup.out` and delete created google api key
both cli and curl clients fail with a 1045 error: phofcode phofcode
steps to reproduce the behavior: pre-requisites: having a running vault server.
steps to reproduce the behavior: 1. deploy pod with vault 1.3.0-beta1 image in agent mode with flag `-log-level=info` as an example, here is what you can see: phofcode
pre-requisites: having a running vault server with some secrets under steps to reproduce the behavior: 1. deploy pod with vault 1.3.0-beta1 image in agent mode with configuration as provided below (see additional context section) 2. tail vault agent container logs.
the pod will run ok for a short while then will fail then restart and so on.
error in vault agent container log: phofcode
i don 't know how the secret got created in the first place.
steps to reproduce the behavior: 1. use vault `1.3.0-beta1` 2. run `vault login -method=oidc role=woop 3. redirect uri is still set to "`lolcahost`
steps to reproduce the behavior: 1. replace vault tls certificate and key 2.
`pkill -hup vault` 3. see `==> vault reload triggered` in the log 4.
`curl -v phofurl look at the certificate information 5. see that the old certificate is still presented 6. restart vault, new certificate is presented
steps to reproduce the behavior: 1.
`curl -h 'x-vault-token: ... ' phofurl -xpost -d
when following the oracle database secrets engine found here phofhyperlink , i get the following error log: phofcode this error appears after running the following command: `vault write connection_url="
steps to reproduce the behavior: phofcode
create a few credentials using a script.
i 've been using only 200 credentials which is enough to make it fall over: `x=1; while [ $x -le 200 ]; do vault read x=$(( $x + 1 )); done;`
steps to reproduce the behavior: 1. create an auth backend with a leading whitespace 2. run `vault auth list` -> auth backend is shown without a leading whitespace 3. check auth backend in the ui -> in the overview it shows it without a whitespace, but in the details view whitespace is prepended with `%20` 4. run 'vault disable ...' with either path including / excluding whitespace -> backend is not disabled
steps to reproduce the behavior: 1. create a vault pki root with an rsa 2048 key 2. generate a separate self-signed root with an ec key via some means 3. submit the ec root to to be signed.
observe error as noted above.
steps to reproduce the behavior: 1. setup ldap auth with a group filter that will return more than 1000 groups 2. attempt to login 3. login fails with `ldap search failed: ldap result code 4 "size limit exceeded"`
steps to reproduce the behavior: we use the following software for building: * go with enabled pie (1.13.1) * git 2.23.0 * yarn 1.19.1 * python2 2.7.16 bower 1.8.8 nodejs-lts-dubnium (nodejs 10.16.3) npm 6.12.0 zip 3.0 further more we use `govendor fetch` to fetch the following tools for building: phofcode the build command is: make static-dist bin`
try to use any of hyperlinks from list above
steps to reproduce the behavior: 1. run phofcode 2. run phofcode 3. see error cli phofcode log errors phofcode
steps to reproduce the behavior: 1. configure `delete_version_after`.
run `vault kv metadata put secret/test` 2. add some new versions of the secret.
run `vault kv put secret/test message="data1"` 3. open the secret in the ui
steps to reproduce the behavior: 1. define windows service using i.e.
ansible: phofcode 2. run `ps c: program files vault> sc.exe start "vault agent"` 3. see error phofcode
steps to reproduce the behavior: run the following set of commands to make the required api calls to vault.
phofcode the following are payload files used in some of commands.
rabbitmq-payload.json: phofcode rmq-payload.json: phofcode rmq-role.json: phofcode
vault pki tidying up procedure phofurl
steps to reproduce the behavior: 1. deploying 3 etcd nodes and 3 vault nodes, 2. confirmed that vault secrets list -detailed is working.
3. shutdown one etcd node(most likely the first one in endpoints list) then vault command is not working properly with below error context deadline exceeded or local node not active but active cluster node not found
steps to reproduce the behavior: 1. a) provision the template policy with terraform: phofcode 1. b) create the entity with the alias phofcode 1.c) create user phofcode 2. cli test phofcode 3. web ui test
just sign any certificate with ssh vault secret engine.
steps to reproduce the behavior: 1. create policy as above and secret backend.
create token with policy as above.
2. run `vault lease revoke -sync 3. notice that the token is allowed to revoke lease.
4. use the documented api and use `payload.json` to supply `lease_id`.
5. notice that you get a permission denied as policies only work on paths, which is apparently what the vault cli uses.
1. configure vault to run in ha mode.
2. run 'vault server' .... 3. on the machine that obtains leadership, trigger performkeyupgrades to return an error
steps to reproduce the behavior: 1. create static role phofcode 2. get password phofcode
1. store a key with multiple fields in vault, eg `vault kv put /<some>/<key>/<path> fielda=dataa fieldb=datab` 2. fetch only one field from that key and redirect to a file, eg `vault kv get -field fielda /<some>/<key>/<path> > my_file.file` 3. examine contents of `my_file.file`, will include metadata for key and both fielda/fieldb key and data
steps to reproduce the behavior: 1. run a single instance of vault locally with a file backend 2. run initialize the vault with `vault operator init -key-threshold=1 -key-shares=1` 3. unseal the vault as normal 4. run `vault operator rekey -init -key-threshold=2 -key-shares=0 -pgp-keys=` phofcode
steps to reproduce the behavior: 1. run consul locally.
2. create an azure key vault: phofcode 3. create an unseal key with all operations enabled: phofcode 4. create a service principal: phofcode 5. use this config with values from azure: phofcode 6. run `vault server -config <hcl-file>`.
steps to reproduce the behavior: 1. enable github auth and assign policies to a github team.
phofhyperlink assign policies with `token_policies` instead of `policy` (deprecated in 1.2.0) 2. run `vault login -method github` 3. the token should only have the default policy attached.
steps to reproduce the behavior: 1. run `vault agent -config /etc/vault/agent.hcl` 2. the output pushed to `stderr` is: phofcode
steps to reproduce the behavior: 1. create policy 2. create token using policy 3. test path with vault read after setting environment variables for url and token
`vault write app/db/config/app s-my-role-2"` the following command runs in a loop for the different roles: 1. run `vault write db_name="app" all on * .
* to '{{name}} '@ '% ' identified by \'{{password}} \';" username="my-role" rotation_period=24h` and with some (not all), the command errors with the following message: `error writing data to put phofurl net/http: request canceled (client.timeout exceeded while awaiting headers)`
steps to reproduce the behavior: 1. run `vault write ...` 2. run `vault login....` 3. see error [error] enable auth mount failed: path=k8s1/ error="plugin not found in the catalog: kubernetes" error: error making api request.
url: post phofurl code: 400. errors: * plugin not found in the catalog: kubernetes url:" phofurl statuscode:400, rawerror:false, errors:[]string{"plugin not found in the catalog: kubernetes"}}
this reproducible time-to-time in our low-level environments.
steps to reproduce the behavior: 1. vault auth enable approle 2. vault write secret_id_ttl=10m 3. create policy phofcode 3. create token vault token create -policy=testpolicy 4. read with kv get and that token phofcode vault read works: phofcode
with default configuration phofcode with custom sts endpoint phofcode
i 'm running in kubernetes with the following configuration: <details> phofcode </details>
i 've followed these guides: phofurl phofurl phofurl that is, i 've run exactly these commands (pulled from my history): phofcode i 've also created a "combined" or "full chain"(???)
file by running: phofcode (this was in kelsey hightowers guide) additionally, i 've used openssl to verify my vault certificates: phofcode for my vault configuration, the listener looks like so: phofcode note that for tls_cert_file tried both vault.pem and vault-combined.pem.
both of them cause the "signed by unknown authority" error.
for my local environment, set: note that tried commenting/uncommenting those vault_client_cert/key values and both fail.
steps to reproduce the behavior: on an aws instance not in region with an iam role assigned 1. run vault login -method=aws role=dev-role 2. see error error authenticating: error making api request.
url: put phofurl code: 400. errors: phofcode
steps to reproduce the behavior: 1. run `docker run -p vault server -dev` phofcode
steps to reproduce the behavior: 1. post-reboot, during process startup, said error was observed.
steps to reproduce the behavior: from root, login using web ui, create a policy that allows policy creation for a entity other than root.
this policy is from the tutorial, phofurl with the minor change of, phofcode will work.
1. create a userpass auth method.
2. add entity without policy.
3. create group using policy from above and add entity as member.
4. login with new entity using web ui and create a policy.
i used the provisioner from link above.
steps to reproduce the behavior: 1. initialize vault with s3 backend 2. run `vault operator migrate` from s3 source to another backend
steps to reproduce the behavior: 1. export https_proxy= phofurl export https_proxy= phofurl 2. vault write gcp/roleset/terraform project="terraform" 3. tcpdump -nni any port 80 (proxy port) ==> no traffic connected to proxy server 4. see error phofcode
`vault server -dev` `vault operator unseal` `vault login` `vault audit enable file operator seal` operator unseal # with a wrong unseal key, like operator unseal # with the correct unseal key` login # with correct token` login # with incorrect token
steps to reproduce the behavior: 1. login to vault using oidc 2. in user menu click "renew token" 3. reload page 4. see white blank page
steps to reproduce the behavior: 1. obtain self-signed ca to be added to vault pki enabled mount path 2. run vault write ca/root/sign-self-issued -pem_bundle=@ca-cert.pem 3. see error put phofurl code: 400. errors: *
steps to reproduce the behavior: 1. run `curl -kv against a standby node 2. see that it returns status code 200 (even though the json body payload returns that the node is a standby)
run: curl -v -l -h x-vault-token:
`docker run --cap-add ipc_lock -d --name=dev-vault -p vault` get the root token and export it to vault_token.
`vault write auth/token/create ttl="120s" explicit_max_ttl="240s"` 3.
`export key=$(vault list | tail -n 1)` 4.
`vault write sys/leases/renew you will receive a permission denied.
steps to reproduce the behavior: 1. clone phofurl 2. run tests 3. see error
this is the swagger generated phofcode this is the documentation from ` phofurl phofcode
steps to reproduce the behavior: 1. run `vault server -dev` 2. run `export vault_addr=" phofurl 2. create a file called `config.hcl` with the contents: phofcode 3. run the vault agent with `vault agent -config=config.hcl` 4. see error: `error loading configuration from config.hcl: error parsing 'auto_auth ': one and only one "auto_auth" block is required`
steps to reproduce the behavior: 1. echo "my-token" >> `/tmp/my-token` 2. use ioutil.readfile to get content of `/tmp/token` 3. use `settoken` to set the token 4. perform a request to vault
steps to reproduce the behavior: 1. run `vault auth enable radius` 2. run `vault write auth/radius/config host=radius.internal dial_timeout=10 nas_port=10 port=1812 read_timeout=10 secret=supersecret` 3. run `echo -n "$password-$token" | vault login -method=userpass -path=radius username=$vuser password=-`
steps to reproduce the behavior: 1. run `vault read 2. see error
[vault@vault-002 ~]$ vault operator raft join -tls-skip-verify phofurl error joining the node to the raft cluster: error making api request.
url: post phofurl code: 500. errors: * failed to join raft cluster: error during bootstrap init call: put phofurl x509: certificate signed by unknown authority
steps to reproduce the behavior: 1. open the vault web ui init form 2. input 1 for key shares 3. input 1 for key threshold 4. develop the "encrypt output with pgp" section 5. input pgp data by choosing a file or entering as base64 text 6. notice that the pgp form part disappear 7. click on "initialize" 8. notice that vault was initialized without encrypting output with pgp
steps to reproduce the behavior: we just started vault freshly on a node and observed the issue.
i use hvac and hashi_vault to retrieve the vault secrets for my ansible playbooks.
steps to reproduce the behavior: 1. enable an audit log device 2. attempt to read the problem endpoint: `vault read
steps to reproduce the behavior: 1. initialize vault: phofcode 2. seal vault: phofcode 3. try to unseal vault, see error: phofcode
steps to reproduce the behavior: 1. create database static-role <pre> <code> root@vault:/# vault write db_name=mariadb10_2 rotation_statements="set password for '{{name}} '@ '% ' = username="test_wi" rotation_period=1m success!
1. install a 3 node vault/consul cluster (as described here: phofurl ) 2. create a fresh vault instance 3. unseal all 3 instances 4. create auth -> userpass 5. create acls 6. create a userpass-user with the new acl assigned 7. log into vault with that user -> all should be fine 8. issue "vault operate step-down" 9. log into the new active vault node -> receive http 500s
steps to reproduce the behavior: 1. run vault with consul backend and proxy_protocol_behavior = "use_always" 2. use haproxy as loadbalancer and set send-proxy in the server segment 2. or use curl to emulate the proxy protocol (`curl -v --haproxy-protocol phofurl same result 3. client is unable to communicate via proxy and the aforementioned error message can be seen in vault logs
steps to reproduce the behavior: 1. enable an ldap auth method 2. attempt to set a certificate for the method in the ui (eg
1. set `gopath` and `gobin` environment variables 2. run `made dev` 3. vault binary is installed to bin/ under first gopath entry
steps to reproduce the behavior: 1. reading the documentation
_auth/oidc/config_: phofcode _auth/oidc/role/reader_ phofcode azure ad callbacks phofcode command issue to login phofcode
steps to reproduce the behavior:
1. create a policy with the permissions to read (and, optionally, create, update, and delete) entities.
i 've provided below the relevant part of the policy i 'm using.
2. attach the policy created in step 1 to a group.
3. add an entity to group created in step 2.
3. login to vault ui using entity created or modified in step 3.
4. use vault ui 's built-in console verify that entity has permission list entities by id and name: `vault list the same can be done with standard vault cli, using a token pertaining entity created or modified in step 3.
5. navigate "access" tab and confirm that "entities" is not shown on sidebar navigation, despite having permission list entities (as verified 4).
steps to reproduce the behavior: 1. run `vault operator init` 2. run `vault operator unseal <unseal key 1>` 3. see error phofcode
steps to reproduce the behavior: 1. run `systemctl start vault` 2. run `vault operator init` 3. see error phofcode
steps to reproduce the behavior: 1. run `vault server -dev &` and run "vault secrets list" 2. run `vault server -dev and run "vault secrets list" there is secrets path enabled
steps to reproduce the behavior: 1. cd into an empty directory 2. execute `go mod init example.com` 3. execute `go get
steps to reproduce the behavior: 1. create a vault user with a space in the name 2. run `curl --header "x-vault-token: ..." phofurl
have a mysql storage backend at azure with mysql config for vault.
set the root_username and root_password start vault with the config below.
steps to reproduce the behavior: 1. start up vault 2. post a request to 3. verify that you receive "204 no content" 4. post a request to 5. now you receives "404 not found" with following body phofcode this indicates that dash in the end of the key fails.
it 's also possible to reproduce the exact same problem with dash in beginning of key.
steps to reproduce the behavior: 1. create a tls certificate role/user, name client-demo-test.
2. echo '{ "name": "client-demo-test" } ' > demo-payload.json 3. try to authenticate.
curl --request post --data @demo-payload.json phofurl 4. get the erroneous response: {"errors":["missing client token"]}
steps to reproduce the behavior: 1. initialize and setup vault (consul backend) with approle with no token ttl or token max ttl.
2. trigger large number of requests to vault.
3. core shuts down and vault seals itself.
steps to reproduce the behavior: 1. enable file auditing.
run `vault audit enable file file_path=/dev/null`.
2. add a k/v secret.
run `vault kv put secret/foo bar=test`.
3. read the secret at a high rps.
run `vault kv get secret/foo`.
steps to reproduce the behavior: 1. run `vault secrets enable azure` 2. run `vault write azure/config 3.
`vault read -field=client_secret azure/config` 4. error field "client_secret" not present in secret
steps to reproduce the behavior: 1. start vault with azure app gateway endpoint as the backend storage
it 's difficult to reproduce because it 's a timing problem.
steps to reproduce the behavior: 1. run `vault write 2. ensure the user `user1` is in the `scientists` group within okta 3. run `vault login -method=okta username=user1` 4. unable to see policy `nuclear-reactor` attached to entity with alias `user1`
steps to reproduce the behavior: 1. open vault ui 2. log in 3. enable a ssh engine 4. create an ssh role, click on more options, change ttl or max ttl with some other vaule than the default 30mins 5. click "create role" 6. try to sign a key with it 7. run `ssh-keygen.exe -lf example.pub` to check the actual cert ttl
steps to reproduce the behavior: 1. run `vault read sys/capabilities-self 2. see error
steps to reproduce the behavior: 1. start a fresh vault process with config below.
steps to reproduce the behavior: 1. start two nodes/processes with config below.
2. shutdown/kill the active node(node a) 3. run `vault status` on the standby node(node b), it 's still standby.
4. start original active node(node a), it 's also in standby mode.
5. none of the two nodes will become active mode anymore, even i kill them all and start a single node only.
steps to reproduce the behavior: 1. curl <headers> phofurl 2. no response
steps to reproduce the behavior: -
steps to reproduce the behavior: 1. run `vault operator rekey -init -pgp-keys="./key1" -backup -tls-skip-verify -key-shares=1 -key-threshold=1 -target=recovery.` 2. complete rekey process 3. run `vault operator rekey -backup-retrieve -pgp-keys="./key1"`
steps to reproduce the behavior: 1. install and initialize postgresql 11 server 2. configure the backend and plugin per published hashicopr documentation 3. attempt to start the service 4. view error with `systemctl status vault`
steps to reproduce the behavior: 1. with the web ui enabled turn on userpass or database engines 2. observe they are greyed out and unusable via the web
steps to reproduce the behavior: 1. run `vault write ...` 2. run `vault login....` 3. see error
steps to reproduce the behavior: 1. run `vault server
1. setup an approle according to phofurl 2. use `vault` to login with your `role_id` and `secret_id` as follows: phofcode 3. there you can 't find `entity_id` field.
4. use `curl` to directly send a request for rest api phofcode 5. response body contains `entity_id`
- step 1 - create a secret with any one of the following patterns: - step 2 - secret created, and able to show the secret page step 3 go back to the parent folder to list the secret
consider the following structure in the kv2 secret engine: kv/application/app3/ kv/application/test where app3/ is an empty folder.
executing a list via the http api on kv/application/ returns the following answer with http status code 200: { "request_id": "lease_id": "", "renewable": false, "lease_duration": 0, "data": { "keys": [ "app1/", "app2/", "app3/", "app4/", "test" ] }, "wrap_info": null, "warnings": null, "auth": null } according to this answer, folder kv/application/app3/ should exist.
executing a list via http api on kv/application/app3/ returns following answer with http status code 404: { "errors": [] } according to this answer, folder kv/application/app3/ should not exist.
steps to reproduce the behavior: 1. setup vault in a cluster with one active and standby servers.
2. enable prometheus metrics endpoint.
3. scrape in prometheus all vault servers.
4. standby servers are forwarding the "/sys/metrics" calls to active server.
5. metrics in prometheus for standby servers are showing the same values as the active server.
steps to reproduce the behavior: 1. open a new directory off the gopath.
2. run `go mod init foo` to get a module-enabled repo 3. create a file with the following contents: phofcode 3. run `go mod tidy` 4. run `go get` 5. see error: phofcode
1. you need to have the current setup, which is not easy to reproduce here: * _machine a_ with vault server * _machine b_ with vault agent connected and authenticated to _machine a_ vault server 3. run on _machine a_: `vault kv put kv/mydir/mykey name=value` 4. run on b_: `vault kv list kv/mydir`.
it returns: `no value found at kv/metadata/mydir`.
this doesn 't list the directory.
5. run on b_: `curl -xlist -s phofurl this does list the directory.
- create some secret `vault kv put secret/test test=test ` - attempt to generate a curl request output for a patch `vault kv patch -output-curl-string secret/test test=newvalue` result: `curl -x get -h "x-vault-token: $(vault print token)" phofurl
steps to reproduce the behavior: 1. make sure no audits are enabled (vault audit disable
with version v1.0.2: `vault write database/roles/role-dba user {{name}} identified by {{password}}; grant connect to {{name}}; grant create session to {{name}}; alter user system grant connect through {{name}}; grant select_catalog_role to {{name}}; audit create session by audit all by audit insert table,update table,delete table by audit select table by ' default_ttl="1h" max_ttl="1h";` result: phofcode with version v1.1.2: `vault write database/roles/role-dba user {{name}} identified by {{password}}; grant connect to create session to alter user system connect through grant select_catalog_role to create session all insert table,update table,delete table select table ' default_ttl="1h" max_ttl="1h"; ` result: phofcode
steps to reproduce the behavior: 1. create a pki secret engine and role definition with terraform.
2. run clients creating several active certs/keys with leases (~1,000) 3. delete the pki secret engine with terraform destroy.
the destroy operation will take up to 1 minute cleaning up all leases etc.
terraform destroy will succeed, but vault server shows error message like: phofcode 4. recreate the pki secret engine with terraform apply.
5. restart the vault server and startup will fail error: phofcode
steps to reproduce the behavior: 1. run `vault secrets enable database` 2. run `vault write allowed_roles="my-role" username="root" password="root#"` 3. see error phofcode
steps to reproduce the behavior: 1. add a policy to consul 2. add a role to the consul secrets engine that uses the consul policy 3. do get request to phofurl 4. get request fails with 500 error and message about max ttl must be greater than 0
steps to reproduce the behavior: 1. curl phofurl 2. note the 429 response if the agent proxies to a standby node.
steps to reproduce the behavior: 1. start vault with: phofcode 2. make any http request to vault from a whitelisted ip, ie.
`curl phofurl 3. make any http request to vault from a non-whitelisted ip, ie.
`curl phofurl --max-time 5` 4. make any http request to vault from a whitelisted ip, ie.
`curl phofurl --max-time 5` (it will fail)
steps to reproduce the behavior: 1. create an ldap auth method without any groups 2. log in with that method `vault login -method=ldap ....` 3.
give the user an entityalias and assign to a identity group.
4. try to renew the token with `vault token renew...`
steps to reproduce the behavior: 1. create a secret using the web ui.
2. add a key-value pair including leading/trailing whitespaces in the key.
3. try to access the value via api using key without any leading/trailing whitespaces.
`go get under a gopath directory
steps to reproduce the behavior: as part of #6252 i also created a test that reproduces the issue phofhyperlink .
this test emulates a slow backend to simulate what happens while the tidy process is running and has a lock preventing logins.
if you wanted to easily reproduce this at scale it would look something like: 1. setup vault with one of the slower storage backends (we are using gcs) 2. create ~100 approles.
the magic number is to make sure that amount of time list all of backends sequentially exceeds 60 second timeout 3. login one approles a few times generate some accesors that will need be tidied up.
one should be enough but makes window where timeouts will occur smaller 3. delete approle 4. watch logs and wait for next "listing secret id hmacs" event occur which signals that dangling accessor tidy process has started 5. attempt login with one other approles while this process is running 6. get timeout error because approle backend is locked error writing data auth/approle/login: put [
steps to reproduce the behavior: 1. run `vault login` against vault 1.1.2 2.
`export vault_addr= phofurl 3. run `vault login` against vault 0.11.4 4. see error 5. run `rm ~/.vault-token` 6. run `vault login` and succeed
1. move your ca.crt to a path such as `$home/.certs/ca.crt` 2.
steps to reproduce the behavior: 1. vault operator rekey -init -key-shares=5 -key-threshold=3 my screenshot: phofurl 2. vault operator rekey -nonce=<nonce number> and give it 3 unseal key nothing shows up on the screen.
steps to reproduce the behavior: 1. not sure to be completely honest?
steps to reproduce the behavior: 1. go to the aws dynamodb console and delete the leadership entry 2. keep refreshing to see that they key is being deleted and recreated by different vaults 3. tail logs from the vault instances to observe leadership exchange
the api states that the typical response from this api is phofcode whereas the actual output is phofcode the actual difference is in the "policies" key.
in documentation it is specfied as a comma separated string, actual output an array
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. run `vault kv put secret/test foo=bar` directly to vault without passing thru the agent 2. run `vault read secret/data/test` with `export vault_agent_addr= phofurl 3. see error
steps to reproduce the behavior: 1.
`export vault_addr= ' phofurl 3.
`vault auth enable userpass` 4.
`vault login -method=userpass username=testuser password=test` 6. write password=newpass` 7. you get permission denied
steps to reproduce the behavior: 1. run `watch vault status` 2. observe flappy leaders
steps to reproduce the behavior: * preparation 1. run `docker run --rm -ti -p -e vault:1.1.0` 2. run `vault login 12345` 3. run `vault auth enable userpass` 4. run `vault auth enable approle` 5.
`vault write password=12345 6. write password=12345 7. write auth/approle/role/my-app policies=default` 8. create file `hardcode.hcl` with phofcode 9. create file `wildcard.hcl` with phofcode 10. create policy policy write hardcode.hcl` 11. create policy policy wildcard.hcl` 12.
-force 15. list * hardcoded 1. login -method=userpass username=hardcoded password=12345` 2.
`for idx in {1..20}; do curl -sk -x post -d -h "x-vault-token: $(cat ~/.vault-token)" sleep 0.1; done` 3. see phofcode * wildcard 1. login -method=userpass username=hardcoded password=12345` 2.
`for idx in {1..20}; do curl -sk -x post -d -h "x-vault-token: $(cat ~/.vault-token)" sleep 0.1; done` 3. see phofcode
steps to reproduce the behavior: follow the steps shown in this tutotial phofhyperlink
setup a vault pki role for client authentication: `vault write my-int-ca/roles/client allow_server=false allow_client=true allow_any_name=true allow_bare_domains=true max_ttl=1440h` issue a barename cert works fine `vault write my-int-ca/issue/client common_name=foo` issuing a cert with a comma in the name fails `vault write my-int-ca/issue/client common_name=foo,` the error message is phofcode this also fails if you provide valid dn (e.g.
steps to reproduce the behavior: 1. run vault dev server with the kv v2 secrets engine enabled at `secret/` 2. run `vault kv put secret/foo/bar/baz value=data` 3. run phofcode 4. create a token with that policy: `vault token create -orphan -policy=policy` 5. using that token, run the following commands and receive the following results: phofcode
steps to reproduce the behavior: 1. set $vault_token environment variable to root token value 2. execute _vault login_ command 3. system asks for token value despite the fact the $vault_token is set: phofcode 4. provide a non root token value 5. vault instance open session as non root context with warning of expected behavior that does not reflect reality phofcode this can be reproduced by setting a non root token in $vault_token and executing _vault login_ command providing the inline.
the session is open in context with warning of expected behavior that does not reflect reality.
only way to use $vault_token is to execute command as _vault login token=$vault_token_.
if this is official way, then warning message should be removed and documentation updated.
steps to reproduce the behavior: i have only tested with the idp i have at hand (azure ad).
`vault auth enable jwt` 2.
`vault write auth/jwt/config oidc_discovery_url= ' phofurl 3.
`vault write auth/jwt/role/test-role policies= 'dev ' registration id} ' user_claim= 'oid ' role_type= 'jwt '` 4. phofcode 5. phofcode 6.
`vault write auth/jwt/login role=test-role jwt={jwt which has the group alias name in the groups_claim}` 7. validate that user is in member of external group - which it is!
_what does not work_: 1. auth enable oidc` 2. phofcode 3. write auth/oidc/role/test-role policies= 'dev ' registration id} ' user_claim= 'oid ' role_type= 'oidc ' phofurl phofurl 4. same as above 5. same as above 6. login -method=oidc role=test-role` 7. validate that user is in member of external group - which it is
steps to reproduce the behavior: configure the ad secrets engine as per the documentation 1. vault secrets enable ad 2. vault write ad/config binddn=ad_account_01 url=ldaps://ad_url insecure_tls=true ttl=86400 (note: max_ttl is 10 times more than ttl) 3. vault write ad/roles/account_02 ttl=86300 (note: 100 seconds less than default ttl) 4. use either root-token or user with appropriate policy to read/write at ad/creds 5. use the command vault read ad/creds/account_02 or curl command curl --header --request get phofurl to check password
steps to reproduce the behavior: set vault_token to the root token and vault_addr to your vault, then run: phofcode
steps to reproduce the behavior: 1. setup a consul node / cluster with acls enabled / configured 2. setup a vault node / cluster with a consul secret engine enabled and configured to create consul acl tokens 3. create simple vault role mapping to consul acl policies name `my-role`.
4. tune vault 's secret engine mountpoint with `-default-lease-ttl=48h` and `-max-lease-ttl=72h` 5. confirm the new settings were applied via `vault secrets list -detailed`.
my output was: phofcode 6. issue a new acl token via vault: `vault read consul/creds/my-role` and capture the `lease_id` output 7. setup cron job to renew the `lease_id` lease every 15 minutes running `vault lease renew 8. verify in vault that lease is being successfully renewed.
8. in less then 2 hours (randomly), lease will be revoked and acl token will be removed from consul.
from a systemd file, have an `execstart` value like so: phofcode `etc/vault_agent.hcl` should include: phofcode
steps to reproduce the behavior: 1. given any code using namespaces, setting or clearing exported `vault_namespace` has no effect.
2. using has the desired effect.
steps to reproduce the behavior: 1. launch vault 1.1.0 instance in k8s with autoseal configured via env variables.
2. vault instance fails to function.
1. setup a consul backend storage with upper case : phofcode 2. restart / unseal your vault 3. check on consul ui your `vault` service, the `host` define in vault configuration became `host`
steps to reproduce the behavior: 1. enable the vault totp secret backend `vault secret enable totp` 1. attempt to write a key with a secret/key value that is already in base32, but lower case.
steps to reproduce the behavior: 1. run `vault secrets enable ssh` 2. run `vault write ssh/roles/everyone default_user=ubuntu key_type=otp` 3. run `vault write ssh/config/zeroaddress roles=everyone` 4. run `vault delete ssh/roles/everyone` 5. write ssh/roles/everyone default_user=ubuntu key_type=otp` 6. delete ssh/roles/everyone` 7. see error
phofcode firstly, i want to directly login with the sts token return from the instance metadata server, so i curl ' phofurl on my ecs, got the tmp ak/sk/sts token, write into auth/alicloud/role and try to login with cli: phofcode it failed with response as: >error authenticating: error making api request.
> >url: put phofurl >code: 500. errors: > >* entry for role $role_name not found it make me confuse cause i think i have write it into and can find it in my backend oss store, should use some other cli cmd or write another role?
please help to look if missed any required steps.
then try to generate the alicloud sts getcalleridentity request with signature and can success request directly from browser, but still failed from vault cli as below: phofcode error writing data auth/alicloud/login: error making api request.
phofcode seems auth plugin did not request alicloud sts valid format, so want know should just base64 on url for identity_request_url, and what is required format for
steps to reproduce the behavior: 1. provision a vault cluster on gcp using kms per the linked tutorial.
1. ssh into one of the vault nodes to perform the initial unseal.
`# vault operator init -address= phofurl -key-shares=1 -key-threshold=1` 1. observe that this succeeds, but vault reports `recovery key initialized with 5 key shares and a key threshold of 3.`
steps to reproduce the behavior: 1. try to put an empty key in s3, maybe using `aws s3 cp somefile.txt 1a.
it sounds like some people have been able to accidentally do this with the aws java api.
here phofhyperlink 2. run `vault operator migrate` with this bucket as the storage source.
3. command hangs on the previously successful key and prints no output as to what command is actually doing.
steps to reproduce the behavior: 1. on latest std freebsd 12.0p3, install vault from freebsd packages or download the 1.0.3 hashicorp binary 2. make a simple config file that is * not * dev mode* (as mlock warning is not shown in dev mode) 3. run vault and get spanked by mlock error phofcode
in windows with openssh, set the token and addr variable, run the command: vault ssh -mount-point=path -mode=ca -role=default admin@serveraddress i receive the error "load key invalid format".
ssh-keygen -l -f on that file shows it as valid.
this same setup works fine from a mac
default policy with the following content: phofcode provisioner policy with the following content: phofcode assign provisioner policy to a user that logs in from some other backend via an external group: phofcode
1. create admin policy from guide phofhyperlink 2. create user 3. add user to group 4. attach admin policy to group
steps to reproduce the behavior: 1. create a lot of entities in vault.
2. enable the syslog auditing.
3. see the error coming from the api endpoint.
steps to reproduce the behavior: 1. configure ldap authentication with an binddn account from the web ui ( phofurl ) 2. attempt to login via ldap, see the authentication 3. see `error authenticating: error making ap request` message (reproduced in full below).
4. configure the ldap same way, via vault cli, i.e.
steps to reproduce the behavior: 1. generate the necessary ram user, custom policy to assume role, and ram roles with proper trust actor 2. run `vault secrets enable alicloud` 3. run phofcode (change ram_user_access_key_id and with proper credentials generated earlier) 4. run phofcode (change uid and role_name with proper values generated earlier) 5. run `vault read alicloud/creds/test` 6. error mentioned above will be returned here
steps to reproduce the behavior: 1. vault server -dev & 1. export vault_token=mytoken ; export vault_addr= phofurl 1. vault kv put 'secret/1 /2' 3=4 1. vault kv list 'secret/1 /' phofcode
use the code below on an ubuntu 16.04 machine with the docker image `vault:0.11.5`.
steps to reproduce the behavior: 1. login using root or with delete capabilities token for kv v2 2. navigate to 3. select any secret and choose option permanently delete
steps to reproduce the behavior: 1. open vault ui 2. create new secrets engine, open "method options" menu and check for values of 30 minutes 3. check config of engine again after creating
steps to reproduce the behavior: 1. run `docker run --rm --name=vault --network=host -t -e vault:1.0.2` 2. run `vault login` 3. run `vault write sys/config/cors allowed_origins="test"; vault read sys/config/cors` see phofcode 4. repeat step 3 and see phofcode 5. run `vault write sys/config/cors allowed_origins="*"; vault read sys/config/cors` see phofcode
steps to reproduce the behavior: 1. write a kv secret to a v1 kv store with a key of `ttl` and a duration value (e.g.
`60m`) 2. read the kv secret using the cli `vault kv get
1. run `vault status --format=json (or yaml)` 2. the ha information is missing from the output phofcode with default format: phofcode
steps to reproduce the behavior: 1. enable okta authentication per instructions phofurl 2. require mfa in okta for user/groups 3. log into vault ui with okta with `username` or `username@domain.com` and approve mfa push to okta verify app 4. wait a period of time and try to browse vault ui - verify app will pop up a message requesting approval, and will continue to do so.
verify app notifications building up: image phofimage vault ui message that appears even though it seems like it 's attempting auto-renew the token: image phofimage
added the following test case to phofcode running the tests for the package results in a failure: phofcode
steps to reproduce the behavior: 1. run `vault secrets enable ad` 2. run `vault write ad/config binddn=$username bindpass=$password ttl=60 3. run `vault write ad/roles/poc.test ` you see the below error
to reproduce, run this script i put together phofhyperlink (it assumes you have docker and jq installed).
the script will set up vault in docker, batch encrypt an empty string, batch decrypt the result, and output the result of the call to `/decrypt/key`.
steps to reproduce the behavior: 1. run `vault write auth/aws/role/some-role 2. run `vault login -method=aws role=some-role` 3. see error
steps to reproduce the behavior: 1. start a new vault with auto-unseal configured 2. initialize the vault via the web ui with one key and threshold of one 3. after a while the page shows "vault is sealed" 4. after a few more seconds it changes to login page, but i don 't have any tokens or recovery keys
steps to reproduce the behavior: 1. set up an stunnel to the google ldap instance config: phofcode 2. set up the vault ldap auth backend phofcode 2. enter password 3. no groups are found.
steps to reproduce the behavior: 1. set up an azure sql server and a "vault" database within it 2. set up a mssql storage setting to point to it in `/etc/vault/config.hcl` 3. run `vault server -config /etc/vault/config.hcl` 4. see resulting error above
steps to reproduce the behavior: 1. run `vault namespace create dev/` 2. run `export ns=dev` 3. run `vault secrets enable -namespace=$ns database` 3. run `vault write -namespace=$ns allowed_roles="my-role" username="vaulttest" password="6abmc * {de * f1ypnyu"
hcl with inferred "type": phofcode phofcode json with explicit "type": phofcode phofcode
steps to reproduce the behavior: 1. log into vault web ui 2. open interactive console 3. execute command `read sys/health` or `sys/seal-status`
steps to reproduce the behavior: 1. configure vault ldap auth backend 2. find out accessor phofcode 2. write appropriate policy using admin token phofcode 3. run `vault login -method=ldap phofcode
steps to reproduce the behavior: 1. log into vault web ui 2. open interactive console 3. execute command `read -field=policies auth/token/lookup-self`
steps to reproduce the behavior: 1. run `touch foo && docker run --rm -it --mount -e skip_setcap=true vault:1.0.1 login -address=<a valid vault server> -method <the method and args necessary>` 2. complete the steps to login dependent on the method (e.g., enter one 's okta password) 3. see the container exit `0` as expected.
observe that `foo` file is unchanged and still empty.
i 've created a docker-compose test case with some scripts to ease reproducing the issue.
steps to reproduce the behavior: 1. set up an instance profile for an ec2 instance with an instance profile and associated role that allows access to the kms key that will be used for auto unseal.
do this in a region that is not the default (not `us-east-1`).
2. configure the vault server on instance with `awskms` seal type.
3. start vault and observe that vault fails to start because it uses default region `us-east-1` instead of reading region from profile.
steps to reproduce the behavior: 1. assume there 's a kv (v2) store available at the path `a/b` 2. using the python `hvac` library, you can get hold of the keys using 3. however, throws up a `permission denied` error.
the policy used to issue token is like so: phofcode note: i have also tried with acl set to path `secret/data/a/b/*` c to no effect.
steps to reproduce the behavior: 1. setup a policy as specified in the hcl section below 2. login with user having that policy 3. from the ui, you get "not authorized" if you access something at devops/zyx (but you can navigate there) phofcode
we his this issue several of times now.
the time between issues is about a month.
these commands show two certificate signing requests, one that works and one that fails.
this issue affects a wide variety of paths throughout vault.
this particular example shows the difficulty in creating a policy that allows creating an approle and getting its secret.
these are the configuration steps to create the token: phofcode then, you can verify that the parent token is denied access to approle endpoints: phofcode the command reports `permission denied`.
strangely, parent token is allowed to create child tokens that are given access to approle endpoints: phofcode
steps to reproduce the behavior: 1. attempt to configure vault to use mssql as backend storage 2. build configuration file 3. specify server without instance 4.
"port" is not an option in config file, and when attempting to start vault, it tries find databases using default port of 1433
steps to reproduce the behavior: 1. install `vault` using `postgresql` backend 2. check the size of vault table in postgres after initializing and unsealing vault phofcode 2. create a short-lived token using following commands phofcode 3. save some data into `cubbyhole` mount using the short lived token phofcode 4. wait for 2 minutes for token to expire 5. check cubbbyhole phofcode
i am running grpc-proxy (v3.3.8) with this configuration: phofcode then trying to connect to it with vault: phofcode disabling tls and sniffing the connection with tcpdump, i realise that vault is trying to access the `/version` api endpoint: phofcode to which grpc-proxy replies: phofcode
- visit phofurl - notice the missing entry for approle in the auto-auth methods section on the sidebar
steps to reproduce the behavior: 1. create a database mount 2. create a database connection restricted by role 3. create a database role does not match one of the allowed roles 4. try to use that role.
steps to reproduce the behavior: 1. run `vault server -config...` 2. see error
try to login in the ui using a valid or not valid token with the github auth method.
steps to reproduce the behavior: 1. call phofurl 2. call link again 3. see results (taken from ansible output here): phofcode
steps to reproduce the behavior: 1. run setup an okta backend with a read only admin token.
setup a user with okta push setup.
2. login via the ui with okta auth 3. see error > authentication failed: okta auth failed: http method: post - url: phofurl - http status code: 403, okta error code: okta error summary: you do not have permission to perform the requested action, okta error causes: []
steps to reproduce the behavior: 1. run vault on kubernetes with consul in cluster as the backend.
2. enable cassandra database secrets backend phofurl 3. runs for about 4 hours ok and then cpu spikes to double and vault crashes beyond its resource limit on k8s.
what should be the limit if we are generating alot of roles and credentials?
100 's of credentials due to creating credentials for a keyspace per git branch deploy.
steps to reproduce the behavior: 1. create a policy called "some.policy" with any content 2. try to delete it (from the web ui) 3. see error in console: phofcode
1. create a rds mssql instance, configuring vault with the master login and password.
2. configure vault mssql w/the sample custom revocation script 3. log in with the vault provided credentials 4. attempt to revoke the lease 5. observe user retains login and query permissions.
steps to reproduce the behavior: 1. login to vault 2. open web ui cli 3. write `fullscreen` 3. see error
steps to reproduce the behavior: 1. vault write aws/config/root access_key=abcdefghijkl region=eu-central-1 -- above entry is dummy keys.
vault write aws/roles/my-role credential_type=iam_user { "version": "statement": [ { "sid": "visualeditor0", "effect": "allow", "action": [ "iam:deleteaccesskey", "iam:getuserpolicy", "iam:updateaccesskey", "iam:getuser", "iam:listrolepolicies", "iam:createaccesskey", "iam:listaccesskeys" ], "resource":
steps to reproduce the behavior: 1. set vault address parameter in listen tcp stanza using a fqdn instead of ip address 2. start vault `systemctl start vault` 3. every vault api request will create a socket which will stay in close_wait state 4. once number of request to vault api reach the max open file limit, process become unresponsive.
steps to reproduce the behavior: 1. generate a csr with windows security .net api 2. use rest to sign-verbatin the csr 3. see error
when i 'm asking the ` phofurl endpoint with an unauthenticated client on both instances one of the instances returns `"is_self": true` in the answer, and the other returns `"is_self": false` when i 'm using an authenticated client (where token is set) field is `"is_self": true` in both cases, always.
steps to reproduce the behavior: 1. run `vault list /identity/group/id` or `vault list /identity/group/name` when no groups exist.
steps to reproduce the behavior: 1. set up the policy file phofcode 2. launch vault phofcode 3. mount a kv secrets engine at the path `ssh` phofcode 4. write the policy phofcode 5. create a token that has policy assigned 6. attempt to read path `ssh/roles/any`, which is covered by policy in place 7. by including required parameter `max_ttl` parameter, request is allowed.
i haven't seen this in production.
however, you could theoretically trigger it by: 1. set your table wcu to something low.
2. create an item in kv with a long path so that it generates many prefix items phofhyperlink .
3. this should exceed the wcu of the table and not write all the prefix items.
steps to reproduce the behavior: 1. setup a vault server behind at least 2 redirects, example, i have a vault server listening over ` phofurl and the following snippet: phofcode 2. properly configures a vault auth over kubernetes, for example: phofcode 3. run `vault write auth/pupernetes/login role=vaultd -address= phofurl phofcode it 's also an issue with `vault agent` because it panics: tested on * master * : phofcode in our production, vault agent `v0.10.4` text url: put https://
1. start 2 vault instances - one backed by `etcd_api=v2`, another with `etcd_api=v3` 1. init and unseal both instances, write some data to the `v2` instance 1. create a `migrate.hcl` file like: phofcode 1. run `vault operator migrate -config migrate.hcl`
steps to reproduce the behavior: 1. create a new secret in a kv2 backend that has `check-and-set` as a required parameter
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. run `vault write ...` 2. run `vault login....` 3. see error start vault issue a list on sys/plugins/catalog
steps to reproduce the behavior: 1. establish an aws account setup that uses mfa and role-switching 2. run `vault server -dev` with credentials to utilise `aws` auth 2. run `vault auth enable aws` 3. run `vault write auth/aws/config/client 4. run `vault write auth/aws/role/admin auth_type=iam max_ttl=8h` 5.
`aws_sdk_load_config=1 aws_profile=admin vault login -method=aws role=admin` 6. see error
provision vault using terraform: phofcode run: phofcode this produces the error message, which is the same when running `vault secrets disable gcp`: phofcode
steps to reproduce the behavior: 1. click on the "introduction section" link in readme.md.
steps to reproduce the behavior: 1. checkout phofurl 2. change dir to plugin/pki 3. run test - go test -run testbackend_importtotpp 4. see error: phofcode
steps to reproduce the behavior: 1. call the encrypt endpoint of the transit backend in a tight loop (ideally in parallel) with key upsert (i.e.
a new unknown key per call)
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. call remember `ttl` value 2. call `/auth/token/renew-self` with `increase = 10` 3. call `ttl = 10`
steps to reproduce the behavior: (in go) 1. read a secret from a location using the kv secret engine v2 2. on the secret object returned call the tokenmetadata() method 3. the error value returned from this call will error with either: ``unable to convert metadata value false to string`` or ``unable to convert metadata value 1 string``
steps to reproduce the behavior: 1. run `vault login -method=aws`
steps to reproduce the behavior: 1. enable totp 2. try to create a key (with the %40 intended to replace the @ symbol) 3. see error: status 404 1 error occurred: * unsupported path
steps to reproduce the behavior: 1. let 's say i 'm creating a policy like this: phofcode i 'll name it
steps to reproduce the behavior: 1. in vault ui, click `create new version` for a kv v2 secret.
3. change some feature of the secret.
4. click save 5. observe the new version is identical to the old version.
steps to reproduce the behavior: 1. run `brew install vault --with-dynamic` 2. see warning `warning: vault: this formula has no --with-dynamic option so it will be ignored!` 3. run `brew options vault` 4. no formula options are provided
steps to reproduce the behavior: 1. here 's our policy that we use with our approle: phofcode here 's an attempt, while being logged into the approle that has this policy applied: phofcode and a corresponding log entry: phofcode
steps to reproduce the behavior: 1. start a vault dev server.
2. create an entity within the identity backend.
3. create a group within the identity backend with the above entity as a member.
4. create 20-30 groups with group created in step 3 as a member.
5. attempt to read entity created in step 2 via identity/entity/id/... 6. observe memory usage of vault server.
small script for above, phofcode
1. authenticate a new machine via the aws auth method (we used the ec2 sub method).
2. repeat step #1 approximately times (i managed to find unique id's in my identity database when the system was in the broken state)
steps to reproduce the behavior: phofcode in practice when using with consul-template, `range secrets "certs/" ` will return "" and "subkey" while reading `certs/` with the same policy is not possible.
steps to reproduce the behavior: 1. follow example in docs phofhyperlink to set up a db config and role.
we used the mysql-legacy plugin for shorter usernames.
2. create spring boot application with integration (version 2.0.1.release) 3. bootstrap the application to hit the endpoint 4. interact with db via application to show credential creation at startup is working 5. when ttl approaches tail logs, watch 403 forbidden response lease renewal request
define a dns setup with a name responding on srv record (like what you could have with consul if you registered it as a service) phofcode have a loadbalancer configuration matching on host header to load balance requests use the vault cli to target it
steps to reproduce the behavior: 1. vault write auth/aws/role/xxxx auth_type=iam policies=xxxx max_ttl=500h period=24h 2. run vault agent with like: pid_file = "/opt/vault/vault_pid" phofcode 3. vault keeps getting phofcode every ten minutes or so.
steps to reproduce the behavior: 1. run `vault vault write auth/userpass/users/foo password=bar` 2. go to access -> entities (in the web ui) 3. see error
we have long-running vault cluster starting from version ~0.4 steps to reproduce the behavior: 1. setup vault 0.10.4 with pki secret engine (we upgraded from thath wersion) 2. configure pki role: phofcode 3. upgrade vault to 0.11.2 or 0.11.3 4. request new cert and key from pki endpoin phofcode
steps to reproduce the behavior: 1. in a separate terminal session, authenticate with root token: `$ export vault_token=xxxx` 2. enable userpass, write a policy, and create a user phofcode 3. open new terminal session 4. login as `mount.admin` phofcode 5. return to session as root and attempt to disable the userpass backend: phofcode 6. list auth mounts phofcode 7. return to terminal session where i was logged in as `mount.admin` and try login again.
8. return terminal session as root and attempt enable the auth backend game over.
using the vault ui, but i see the same behavior in api.
* create an identity group with name 'child group' * create an identity group with name 'parent group' * add 'child group' id to 'parent group' member group list * verify 'parent has 'child as member -> ok remove 'child from member group of 'parent group?
1. start a vault dev server 2. enable the userpass auth method.
3. create a user with username "first.last".
5. attempt to revoke the token returned in step 4 via auth/token/revoke-self.
steps to reproduce the behavior: 1. run `vault mount -path=pki_example -description="example root ca for bug reproduction" pki` 2. run `vault write common_name="example root authority for bug reproduction" key_bits=4096 key_type=rsa max_path_length=1 ou="zombie emergency response organization" organization="defense communication agency" country="us" province="foo" locality="bar" street_address="123 fake street" postal_code="12345" emergency response organization"` 5. see error: phofcode
steps to reproduce the behavior: 1. set up a vault server to use a tcp listener with tls with the certificate and the key 2. start the vault server.
3. tail system logs 4. replace certificate and key with a new, valid certificate and key set.
5. run `pkill -1 vault` 6. check for `... ==> vault reload triggered`, e.g.
`oct 01 vault[54493]: ==> vault reload triggered` 7. check for any changed certificates presented in ui and `curl` responses, as they should be, according to phofurl phofurl .
10. file bug report in case it 's something that doesn 't just affect me.
steps to reproduce the behavior: 1. run a vault server using gcs as backend 2. authenticate and read keys from many clients in parallel.
in our case we have ~1000 clients performing authentication (kubernetes auth backend) and reading ~5 keys each over 15mn (but since this happens during a kubernetes rolling update, we have 3 batches of ~300 clients that perform these operations over 1-2 minutes)
steps to reproduce the behavior: 1. run `vault write auth/okta/config base_url=<baseurl> org_name=<org> token=<token>` 2. run `vault login -method=okta username=arusso` 3. see error message saying invalid token: phofcode
use a config such as: phofcode where the content of `key.json` is base64-encoded json :)
scripted - phofurl manual steps to reproduce the behavior: 1) launch dev vault server 2) enable approle auth 3) create a policy granting read/write to an arbitrary path (e.g.
secret/approle_test) and populate it with a secret 4) create an approle with a token ttl and period of 60 seconds, and a max token ttl of 0 5) attach the above policy to the approle 6) login with the approle 7) renew approle every 30 seconds for 2 minutes 8) attempt to read arbitrary secret from above, this should work 9) attempt login vault ui, this should present an error stating 'your auth token expired on <datetime >.
three ecs instance cluster, efs backend, consul 1.0.6 and vault 0.9.5 on aws.
steps to reproduce the behavior _note: while userpass doesnt support groups, it appears to exhibit the same behavior that we observed in our ldap/okta setup, and so was used for simplicity._ 1. setup our auth backends (2x userpass) and record their accessors: phofcode 2. create our group and 2x group aliases for that group phofcode 3. observe both group alias objects were successfully created using the same canonical_id despite violating the 1:1 relationship between group/group-alias.
phofcode 4. observer considers 2nd alias ($up2_gaid) as it 's alias: phofcode at this point, we have a few ways to make things fail: 1. attempt to create a new and fix canonical_id on first alias, observing that we are unable do so: 2. attempt delete alias observe it does not delete despite success message: 3. attempt a 2nd delete observe an eof error along with a stack trace on vault server: example stack trace output from vault server: 4. attempt delete observe grp2 alias is deleted but grp1 still exists:
steps to reproduce the behavior: phofcode
1. mount a kv v2 secrets engine at `secret/data` 2. do a post request at `/secret/data/key` with payload `{"data": {"foo": "bar"}}` 3. get a 204
steps to reproduce the behavior: 1. run `strace -f -o trace.txt vault version && grep execve trace.txt ` 2. see that an external program, `uname`, is exec'ed 3 time by the alibaba sdk even for the the simplest of commands.
steps to reproduce the behavior: 1. create aws secret engine 2. add a aws role 3. create a policy with read permission to `aws/creds/role` 3. log into ui with that policy active and try to generate aws credentials.
4. receive error `error 1 error occurred: * permission denied` it will work if the update permission is added to `aws/creds/role`
steps to reproduce the behavior: 1. run `vault server -dev...` 2. add new auth method and select "list method when unauthenticated" 3. go to " phofurl 4. you are redirect to "other"
steps to reproduce the behavior: 1. restart docker container 2. unseal vault
1. run vault with gcs storage support 2. write until gcs returns "error 503: backend error", which happens quite often
steps to reproduce the behavior: 1. run vault 0.11.0 on phofurl 2.
`export vault_addr= phofurl on home machine 3. run `vault status` on home machine where the vault binary is 0.10.4
1. stop vault `systemctl stop vault` #we have a service script, so basically sending sigterm 2. upgrade vault by downloading the new binary and copying to the appropriate location 3. start vault `systemctl start vault` #the service script executes: `/usr/local/bin/vault server 4. unseal vault 5. check the logs for errors * after * a request for secrets via the client `cat /var/log/messages | grep ".
*"` > sep 3 <host>: [error] core: failed to construct acl: error="failed to get policy: failed to parse policy: failed validate policy templating: unbalanced templating characters" > sep 3 <host>: [error] core: failed construct acl: error="failed get policy: parse policy: validate policy templating: unbalanced templating characters" > sep 3 <host>: [error] core: construct acl: error="failed get parse validate policy templating: unbalanced templating characters" >
run a nomad 0.8.4 server connected to a vault 0.11.0 cluster/server.
`curl --header "x-vault-token: $vault_token" --request get and `vault read -format json sys/mounts` sometimes does and sometimes doesn 't return any information about jwt mount point.
webui and cli (`vault operator unseal`)
steps to reproduce the behavior: 1. setup vault with aws, without giving it iam permissions to create actual users 2. create a role for aws within vault 3. try to generate a account through the web interface (might also work through cli) you 'll get this error: phofcode 4. afterwards, check the cloudtrail logs and see that vault tries to revoke the user every minute
steps to reproduce the behavior: 1) start the vault process with an updated ld_library_path variable phofcode 2) enable and configure the oracle plugin as defined in the below documentation.
phofurl 3) the vault logs report they are unable to locate shared library files because they are not in standard paths.
steps to reproduce the behavior: add the following policy to a new token: phofcode
steps to reproduce the behavior: 1. log into vault ui 2. create a secret with the `json` toggle enabled 3. paste this into the text box phofcode 4. notice that vault has replaced the array with objects: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. enable s3 backend with minio cloud configuration 2. perform typical vault operations
steps to reproduce the behavior: 1. run `vault apply` twice.
one to create one to update 2. see error
steps to reproduce the behavior: 1. login 2. run `vault secrets enable database` 3. run `vault write allowed_roles="test" host>:5432/postgres" username="root-user" password="root-passwd"` 4. see error
secret 's path: kv v1: kv v2:
steps to reproduce the behavior: 1. add a vault node and some other machines to an infrastructure orchestrator like terraform 2.
`terraform apply` 3. change config that forces the recreation of all machines and `terraform apply` 4. if another machine gets the vault server 's old ip address, it is still considered a vault node in the service catalog.
steps to reproduce the behavior: 1. enable a vault tls auth backend, for example at `/auth/cert` 2. use the following command to call the api: `curl -k -l --header "x-vault-token: <root-token>" --request list phofurl -v` 3. get a 404 error.
steps to reproduce the behavior: 1. policy details phofcode 2. write the policy phofcode 3. create token phofcode warning here is because of the wrong duration mentioned.
4.login to vault getting error as mentioned in the description.
steps to reproduce the behavior: 1. have existing ldap auth method.
2. set on the ldap method using the ui.
3. start new session to ui and see the new lowercase ldap method.
4. try to log in as ldap user but fail.
steps to reproduce the behavior: (this is what i * think * happened) 1. start vault in ha mode with the dynamodb backend with separate aws credentials.
2. revoke the aws credentials on the vault leader 3. the leader refuses to service requests, but does not step down either.
- vault server -dev - browse to vault webui - log in via root token - click on "secret/" click on "create secret" enter "path for this secret": dst/service/ad/foobar provide some random key and value (i used "some" and "value" for my tests) hit save -> error message appears: "error [object object]" interestingly enough, the same error can be caused by using "dst/service/ads/foobar" instead of only "dst/service/ad/foobar" (ad replaced by ads), but not by using something like ada.
some ad* combinations work, some others won 't.
steps to reproduce the behavior: 1.)
using the go api, set up a loop that reads the same secret repeatedly with a low timeout (i used 1 second) on the same system that's running instance of vault you are testing against.
track whether secret is returned.
steps to reproduce the behavior: 1 .
enable db secrets backend with terraform.
2. create role without revocation_statements phofcode 3. create a login - `vault read database/creds/role` 4. server will panic when trying to revoke token 5. this prevents deletion of the backend, and after token expiry period servers fail immediately after unseal - as the server retries revocation immediately on startup.
- deploy 3 units of vault.
in my test case use 1 mysql unit for storage and 3 units of etcd for ha_storage.
- initialise and unseal vault and validate api with "vault status" - shutdown the etcd unit that corresponds to the first ip in the 'address ' list (in the 'ha_storage "etcd" ' section) - run "vault status" with vault_addr pointing at any of vault units phofcode
steps to reproduce the behavior: 1. write payload to plugin `vault write customplugin/action @large_28mb_payload` 2. see error: `[error] core: failed to run existence check: error="rpc error: code = resourceexhausted desc = grpc: received message larger than max vs.
phofcode the server logs do not reveal any extra information.
after a restart of our vault: phofcode
steps to reproduce the behavior: 1. intialize vault with gcp storage backend, 2. enable radius auth method under auth/radius path, 3. run `vault login -method=userpass -path=radius username=xxx` (xxx shouldn 't have any policies assigned, should only use those configured with in such case, after successfull authentication context is cancelled due to: phofcode after that cancellation another request to radius is being made.
the latter fails as otp was already used.
below is a tcpdump showing requests being made during authentication process: phofcode
steps to reproduce the behavior: 1. add secret 2. update secret 3. delete latest version of secret 4. in the gui go to the path of the secret and you will see a 404: unable to find secret/.
1. run a vault server with the ui supported and enabled (e.g.
macos binary does not seem to contain it).
2. run `curl` to upload some test data (no shell prompt included below for easier copy & paste): phofcode 3. see error open the various secrets display pages in a web browser and try the _json_ switch at the top right: + works as expected + switch does notthing + switch does notthing + switch does notthing
steps to reproduce the behavior: phofcode it 's worth noting that if i try and use `vault write ad/roles/foobar`, i get an error saying that the user doesn 't exist in ad, so the ldap connection is working.
generate a token (or perhaps any wrapped secret), and then follow these python lines: phofcode
1. mount the secret backend and generate a root cert: phofcode 2. revoke the freshly generated root ca cert: phofcode 3. grab the crl and see what it says phofcode
1. create a boolvar flag with default: false and an envvar that is not the empty string.
2. run the command with the above flag with the environment variable having value "true".
steps to reproduce the behavior: 1. start vault in server mode.
2. attempt to start a rekey operation.
`vault auth list -format=json` (get the accessor of any backend, for example token) 3. create an entity in vault : `curl -h "x-vault-token: ${vault_token}" -k -x post -d '{} ' and save the id 4. lauch in parallel: for i in $(seq 1 100) do curl -h "x-vault-token: ${vault_token}" -k -x post -d \'{"mount_accessor": "
phofcode error: `error encountered setting up default configuration: both client cert and client key must be provided`
steps to reproduce the behavior: 1. create temp db creds (psql in this case) via database backend 2. tear down the database
steps to reproduce the behavior: 1. set 2 vault servers + consul like describe in official documentation : phofurl 2. enable transit secret engine : phofurl 3. we generate 2 files which will resend us data to provide to secret engine : 1 small (some bit), 1 large phofcode 4. test the small file on the active node and the standby, both should work and respond with a valid json response: phofcode 5. test large file.
on active node, you get correct response, on standby node, connection terminates with 307 redirect: phofcode we don 't have any message on active server log, but we have this in standby server log: phofcode
(this is summarised, so apologies if i miss something out, but the root token is being provided in the header) secret has three versions: phofcode request version 1, v3 returned: phofcode
steps to reproduce the behavior: 1. run vault dev server`vault server -dev` 2. grab unseal and root token 3. grab test script from phofurl and populate unseal and root token variables 4. run the script 3. see error at the last step, renewal of self token
steps to reproduce the behavior: 1. run dev server phofcode 2. get secret/foo via curl `curl -h "x-vault-token: -x get phofurl 3. see error path for a versioned k/v secrets engine.
see the api docs for the appropriate api endpoints to use.
if using the vault cli, use 'vault kv get ' for this `
1. start with the example plugin from phofurl and apply the following patch: phofcode 2. run vault with a config that specifies an appropriate `plugin_directory`.
(i used the repo root, full config file below.)
3. run the following commands to build and enable plugin: phofcode 4. run following command to invoke broken plugin code: phofcode
steps to reproduce the behavior: 1. open vault ui in browser 2. navigate to a listing of a secret path and refresh the browser or navigate directly to that path by pasting the url into the address bar
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. enable a new authentication method (eg ldap).
2. enter details (eg under sections 'ldap options', 'customize user search', etc).
3. click 'enable method' 4. edit auth method.
5. only 'method options' is available.
steps to reproduce the behavior (for the aws auth backend): 1. run `vault auth enable aws` 2. run `vault write auth/aws/config/client access_key=foo secret_key=bar` 3. run `vault read auth/aws/config/client` 4. see the `access_key` field but not the `secret_key` field (correct behavior but not documented).
below, i have the outputs of the process.
first, the status os each machine before unseal process.
phofcode then, i started the rekeying process on active instance phofcode proceeded with rekey operation entering 2 keys required.
the status of each instance.
note instances 1 and 3 with different status than 2. phofcode tried to unseal instance 1 phofcode after first old key entered.
after second old key entered.
it doesn 't matter which key i enter first.
the second key always produced same error above.
i don 't have clear repro steps.
this occurred as an improbable incident.
steps to reproduce the behavior: 1. run 2 vault instances (1 leader, 1 standby).
in this case, i am using the `pki` backend to issue short-lived certs.
the storage backend is postgres and the ha backend is dynamo.
3. vault smashes the db to 100% cpu load in a lease expiration hot loop serves 500 error codes to client requests.
steps to reproduce the behavior: 1. run `systemctl stop vault` on the active node.
2. there 's the following output in the log, and then nothing until vault is killed by sigkill: phofcode i 've attached a full log of vault process incluing is a trace retrieved by sending sigquit.
steps to reproduce the behavior: 1. run `vault kv put secret/foo test=1` phofcode 2. run `vault kv get -wrap-ttl=60s secret/foo` phofcode 3. run `vault unwrap <wrapping-token>` phofcode 3. decode the http_raw_body phofcode
1) open vault ui with firefox.
2) go to any checkbox and click it to check it.
3) notice that only the surrounding line changes from grey to blue, there is no "checked" mark.
steps to reproduce the behavior: 1. create a secret: phofcode 2. create a wrap token: phofcode 3. unwrap phofcode decode the error: phofcode
steps to reproduce the behavior: 1. run `vault operator init` 2. see failed to unseal barrier: vault is not initialized
steps to reproduce the behavior: 1. create an `ssh_config` that specifies a non-default known_hosts location phofcode 2. ssh to the host and accept the known hosts entry phofcode 3. make sure the known hosts entry for this host doesn 't exist in `~/.ssh/known_hosts`.
running normal `ssh should prompt to accept host key phofcode 4. use `vault ssh` to connect host phofcode
phofcode then login using the token given and go to any dir.
press refresh button or directly load an url like phofurl try to click on an item -> links to secret/a/bc/
1. phofcode 2. phofcode 3. phofcode 4. phofcode 5.
steps to reproduce the behavior: 1. install latest vault 0.10.1 2. git clone the sample auth plugin code from phofurl 3. build plugin using golang 1.10.1 4. deploy the plugin as normal using a mostly spartan vault.hcl configuration i use for dev 5. call the plugin as expected: vault write auth/example/login username=foo password=bar
steps to reproduce the behavior: 1. run a `vault write` command many times repeatedly 2. observe a 5-second delay in some cases
steps to reproduce the behavior: - start all 3 consul instances - check if consul leader is chosen - start 2 vault instances - init and unseal from vault instance 1 unseal vault instance 2 check if vault leader is chosen write data to list data in
create a new vault installation.
mount a secrets engine on /web.
try to insert a key.
use the documentation phofurl 1.
`vault secrets enable mongodb` 2.
`vault write (you need to use a real database and password ) 3.
`vault write mongodb/roles/readonly db=foo roles= '[ "readwrite", { "role": "read", "db": "bar" } ] '` 3. see error `failed to parse k=v data: invalid key/value pair " "readwrite ",": format must be key=value `
steps to reproduce the behavior: 1. run `vault write database/roles/my-role user '{{name}} '@ '% ' identified by '{{password}} ';grant select on * .
* to default_ttl="20s" max_ttl="1m"` output: phofcode
phofcode (i 've also tried escaping ` "` a bit with no luck.)
`vault write test-pki/roles/user ....` 2.
`vault read test-pki/roles/user` returns: phofcode 3. try to sign an ec csr using `vault write test-pki/sign/user`.
4. get error `* role requires keys of type rsa`
steps to reproduce the behavior: 1.
`model = 3. see just below phofcode 4. see just below phofcode
steps to reproduce the behavior: 1. run the attached script.
2. observe phofcode 3. wonder why.
phofcode `>>> text with percentage %`
steps to reproduce the behavior: just run the code above, you should get the following error: phofcode
from transformers import autotokenizer encoder = '[pad]', 'sep_token': '[sep]'}) print(encoder.sep_token, encoder.sep_token_id) print(encoder.pad_token, encoder.pad_token_id) print('all special tokens:', print('all special ids:', encoder.all_special_ids)
steps to reproduce the behavior: 1. load config file and add summary info phofcode 2. load the model phofcode
steps to reproduce the behavior: 1.when i try to reload the weights for tfbert by using: model = 2. i got the error valueerror: expected floating point type, got <dtype: 'int32'>.
3. does anybody know how to fix this?
when i use the official `run_lm_finetuning.py` and `run_glue.py` scripts with `roberta-large` on my own data, i run into out of memory (`oom`) issues during `evaluation`.
`training completes successfully` with a `batch_size` of `1` and a `max_senquence_length` of `512`.
however, when `evaluating` the 4th or 5th checkpoint, i get an `oom` error.
i tested using `distributed` training with `fp16` on `2 tesla p100-sxm2 16 gb` and `2 tesla p100-pcie 12 gb` with the same results.
i'm currently testing on `2 tesla m40 24gb`; however, don't always have access to these gpus; so, this is untenable long term.
steps to reproduce the behavior: apply the three line change to the `run_generation.py` script: phofcode phofcode
steps to reproduce the behavior: phofcode this is the output that i see phofcode if you see the lm decoder did not change the embedding size, hence won 't ever predict new tokens.
the expectation would be that handles fc inside lm decoder.
i tried also using bertconfig phofcode which naturally results in error while loading `state_dict` runtimeerror: error(s) in loading state_dict for bertformaskedlm: tsize mismatch for copying a param with shape 768]) from checkpoint, shape in current model is 768]).
tsize mismatch for cls.predictions.bias: copying a param with shape from checkpoint, shape in current model is tsize mismatch for copying a param with 768]) from checkpoint, current model is 768]).
steps to reproduce the behavior: 1.
steps to reproduce the behavior: 1. copy the following script into a file name `run_glue_task_tf.py`: phofcode 2. run the following command: phofcode 3. experience the following error: phofcode
steps to reproduce the behavior: 1. fix line 542 in to address #1692: phofcode 2. run `run_tf_glue_xlnet.py` script: phofcode 3. see the following error message: phofcode
steps to reproduce the behavior: 1. use the attached run_tf_glue_xlnet.py script phofcode
steps to reproduce the behavior: phofcode this only happens with the 'gpt2 ' shortcut, not others ( 'gpt2-medium ', etc.)
564 magic_number = pickle_module.load(f, **pickle_load_args) 565 if magic_number != magic_number: 566 raise runtimeerror("invalid magic number; corrupt file?")
unpicklingerror: invalid load key, '< '.
phofcode this will yield an error: phofcode
current seems not updated cause returning null result in tokenizer.tokenize when input some special utf8 string steps to reproduce the behavior: 1. phofcode 2. phofcode 3. phofcode
steps to reproduce the behavior: 1. start run_ner.py with 2. during evaluation the error will happen
steps to reproduce the behavior: 1. clone the repo 2. navigate to transformers/examples directory 3. prepare custom train and test datasets (.txt files) 4. create ./cache directory 3. run the following command in terminal (with replaced custom_ arguments): phofcode
steps to reproduce the behavior: 1.
just run the colab from the link i posted above the main part of the code is: phofcode
steps to reproduce the behavior: here is the code phofcode 321 (result, consumed) = self.errors, final) 322 # keep undecoded input until the next call 323 self.buffer = data[consumed:] unicodedecodeerror: 'utf-8 ' codec can 't decode byte 0x8b in position 1: invalid start byte for convenience, here is a colab notebook with the code that you can run phofurl
steps to reproduce the behavior: 1. use a tpu runtime on colab 2. python resolver = strategy = with with strategy.scope(): # model = = (len(le.classes_))) model 2) print( 'model loaded ') inp size=(12800, 64)) inp[:,0]=0 inp[:,63]=2 labels np.random.randint(2,size print( 'data generated ') optimizer epsilon=1e-08, clipnorm=1.0) loss metric loss=loss, metrics=[metric]) print( 'starting fitting ') # 3,batch_size y_test),verbose=1) 2,batch_size 64,verbose=1)
steps to reproduce the behavior: 1.
steps to reproduce the behavior: 1.
one shell script (there are others) that had worked before: python ./run_squad.py --model_type bert --model_name_or_path bert-base-uncased --do_train --do_eval --do_lower_case --learning_rate=3e-5 --num_train_epochs=2 --max_seq_length=384 --doc_stride=128 --save_steps=2000
steps to reproduce the behavior: 1. running the run_lm_generation.py on the wp dataset.
python run_lm_finetuning.py --model_type=gpt2 --do_train --do_eval --block_size=128 --save_total_limit=100 error: traceback (most recent call last): file "run_lm_finetuning.py", line 538, in <module> main() file "run_lm_finetuning.py", line 485, in main train_dataset = tokenizer, evaluate=false) file "run_lm_finetuning.py", line 97, in load_and_cache_examples dataset = textdataset(tokenizer, if evaluate else args.train_data_file, file "run_lm_finetuning.py", line 80, in __init__ attributeerror: 'gpt2tokenizer ' object has no attribute
steps to reproduce the behavior: it is possible to load checkpoints saved from roberta directly?
from the documentation, it looks like it should be possible, but when i run the following code phofcode i get phofcode i 'm guessing since the checkpoint is in a binary, i need to first convert this to a json format.
it looks like it should be done here phofhyperlink .
however, when i try run that script, get an error phofcode from what can tell, those imports are dated and will need be fixed anyways.
steps to reproduce the behavior: 1. use pytorch-tranformers library (1.2) 2. use sample_sequence from run_generation.py on gpu 3. use tranformers library (2.0) 4. use sample_sequence from run_generation.py on gpu 5. step 4 is running 5 times slower than step 2.
steps to reproduce the behavior: 1. i was followesd this issue phofurl 2. i tried to reduced batch_size = 1 3. i tried `cuda_launch_blocking=1` it is throwing, `runtimeerror: cuda error: out of memory` > cuda_visible_devices=2 python run_lm_finetuning.py --output_dir=output --model_type=roberta --do_train --do_eval --mlm 1 1
steps to reproduce the behavior: i have trained a bert model on older pytorch-pretrained-bert and it works just fine.
recently, i switch the code to the latest version of transformer.
i use the following config: > bert_model = './my_model' > max_seq_length = 160 > doc_stride = 160 > predict_batch_size = 20 n_best_size=20 max_answer_length=30 verbose_logging false no_cuda true seed= 42 do_lower_case= true version_2_with_negative true max_query_length 64 thresh_hold 0.95 i import 2 class: `from transformers import bertforquestionanswering as bqa1` `from import bertforquestionanswering as bqa2` and load 2 model as following : `model1 `model2 and input to models with same tensors: `input_ids torch.ones((1,160),dtype torch.int64)` `segment_ids torch.ones((1,160),dtype torch.int64)` `input_mask torch.ones((1,160),dtype torch.int64) ` `model(input_ids, segment_ids, input_mask)` also check if 2 model has same weights or not by using following guide phofurl phofhyperlink .
seed randomness of torch before inference 2 model by using: `seed 0` `if ` but models still produce difference results
steps to reproduce the behavior: download the wikitext-2 data, and then run: phofcode this is basically what 's recommended in the examples phofhyperlink
steps to reproduce the behavior: run the following: phofcode the last command gives this error: phofcode
steps to reproduce the behavior: corpus = delimiter=" ") "text8") traceback (most recent call last): file "build_xl_corpus.py", line 26, in <module> "text8") file line 521, in build_corpus os.path.join(path, 'train.txt '), ordered=true, add_eos=false) file line 187, in encode_file file line 246, in convert_to_tensor return nameerror: name 'torch ' is not defined
steps to reproduce the behavior: 1. create a random classification train,test set 2. get the pretrained model 3. call fit() on the model for finetuning phofcode phofcode
steps to reproduce the behavior: 1. pred_mask is matrix with 0,1. operation token_ids[pred_mask] seems to make some same matrix, instead of masking token_ids
steps to reproduce the behavior: 1. go to phofurl 2. change `mrpc` to `sst-2` 3. boom!
steps to reproduce the behavior: pretrain_model_dir = 'roberta-large-mnli ' # 'roberta-large ' , 'roberta-large-mnli ' model = num_labels=2) it will have error message as follows: > model = num_labels=num_labels) file line 411, in from_pretrained " runtimeerror: error(s) in loading state_dict for tsize mismatch for copying a param with shape torch.size([3, 1024]) from checkpoint, the shape in current model is torch.size([2, 1024]).
tsize mismatch for copying a param with shape torch.size([3]) from checkpoint, the shape in current model is torch.size([2]).
this only happened yesterday when i used the pretrained 3-way roberta-large-mnli for a 2-way classification task; seems like a bug initializating or neglecting classifier 's parameters <!-- add any other context about problem here.
steps to reproduce the behavior: in the documentation for the tokenization_roberta.py, it says in the robertatokenizer class phofcode however, with using new transformers library, when i run this example i get phofcode the leading space seems to no longer present as it was in pytorch_transformers, however if (per source code) if i add arg add_prefix_space = true, then it outputs with leading space.
just a tiny fix to hopefully help out anyone else who gets confused by it.
thanks and love new updates to library!
steps to reproduce the behavior: 1. when i run without amp, training works as intended.
if i train at amp level o2, training runs as intended.
2. running with amp level o1 leads to an error: runtimeerror: expected scalar type half but found float 3. i have verified that there is no model.eval() and that scaled_loss and clip_grad_norm_ calls are the same as prescribed in the example.
3. examples of model initialization, train loop, and error are below.
steps to reproduce the behavior: 1. omit parameter never_split when invoke phofcode modify phofcode to phofcode wolud solve this problem.
steps to reproduce the behavior: 1.
steps to reproduce the behavior: 1. from pytorch_transformers import bertforquestionanswering 2. model =
steps to reproduce the behavior: 1. create tokenizer: tokenizer = 2. try to decode index 4: tokenizer.decode(4) 3. you get empty list [] although expected is a string
phofcode this script produces the following error: phofcode
steps to reproduce the behavior: 1. create a new notebook with a python 3.7 interpretter 2. type in the following code: phofcode 3. run & receive the error: phofcode
steps to reproduce the behavior: 1. change the seed 2. results does not change, and keep for every seed
when i load the gpt2-large model, in the same way as gpt2 and gpt2-medium i get an nonetype when loading the tokenizer.
phofcode at this point in the debugger self.tokenizer == none is true the issue is clear when i try to use tokenizer.
steps to reproduce the behavior: 1. run the following code: phofcode 2. currently, i get the error: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1.
3. error message i got is error - - using sep_token, but it is not set yet.
and then the next sentence that it predicts has nothing to do with my given sentence.
the compute nodes of the cluster i am working on are air-gapped, so i downloaded the `roberta-base` model weights, config and vocab files likes so phofcode steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. upon running glue.py with the following : python --task_name cola --do_train --do_eval --do_lower_case --data_dir ~/bert-data/ --model_type roberta --model_name_or_path roberta-base --max_seq_length 512 --learning_rate 2e-5 --num_train_epochs 1.0 --output_dir ~/data/roberta-1/ getting the following error: phofcode 2. trying the same as above with xlnet and xlm, gives following error: phofcode
phofcode the above method only save the current vocab json without any of the new tokens being added.
when save_vocabulary is replaced with save_pretrained(filedir) a new file called special_mappings.json is created with only 3 special tokens `{"bos_token": "<|endoftext|>", "eos_token": "<|endoftext|>", "unk_token": "unk_token"}`
steps to reproduce the behavior: 1. have a tensorflow checkpoint.
2. convert it with `python pytorch_transformers gpt2 path/to/checkpoint path/to/save/model` 3. run `python run_generation.py --model_type gpt2 --model_name_or_path path/to/saved/model --top_p 0.9 --prompt "hello huggingface"` this results in the following error: `traceback (most recent call last): file "run_generation.py", line 195, in <module> main() file "run_generation.py", line 175, in main context_tokens = attributeerror: 'nonetype ' object has no attribute 'encode '`
steps to reproduce the behavior: 1. finetune a cased model with `--do_train` and `--do_eval` (the latter is optional) 2. use `--do_eval` to make predictions.
steps to reproduce the behavior: 1. run the glue example from documentation on a multi-gpu machine with 4 gpus (the only change i made was switch the base model to bert uncased base) and number of gpus to 4 2. training completes fine 3. script tries to evaluate - hangs at: - info - __main__ - loading features from cached file
steps to reproduce the behavior: phofcode this is from the documentation of gpt2doubleheadsmodel phofhyperlink the error: > traceback (most recent call last): file "<input>", line 6, in <module> file line 547, in __call__ result = self.forward(*input, **kwargs) file line 718, in forward mc_logits = file line 547, in __call__ result = self.forward(*input, **kwargs) 774, forward output = hidden_states.gather(-2, token_ids).squeeze(-2) # shape (bsz, xx, hidden_size) runtimeerror: invalid index gather at using cls_token, but it is not set yet.
using mask_token, but it is not set yet.
using pad_token, but it is not set yet.
using sep_token, but it not set yet.
`select "srssi" from "2" where time >= now() - 30m` returns all datapoints which i want, but when i use this query `select mean("srssi") from "2" where time >= now() - 30m group by time(1s) fill(none)` some of the latest datapoints are missing.
1. data is directly ingested from collectd.
2. show measurements >show measurements >interface_rx 3. show all series from that measurement.
with tag keys filled with values >show series from interface_rx >key 4. show all tag keys from interface_rx > show tag keys interface_rx > name: interface_rx > tagkey > host instance type 5. now i would expect in the host tag to get values.
>show values with key="host" no output!
**this does not work for any value key.
list the minimal actions needed to reproduce the behavior.
1. open settings > members
list the minimal actions needed to reproduce the behavior.
1. create a user and add a password for it 2. load ui and sign in with said user 3. view page
list the minimal actions needed to reproduce the behavior.
1. delete all buckets 2. select the purple "influxdb output plugin" button on the telegraf page 3. error
list the minimal actions needed to reproduce the behavior.
1. start influxd from scratch, fresh install, no users or anything * `influxd --bolt-path --engine-path /srv/influxdb/engine --log-level debug` 2. go through the web-based initial setup 3. try to log in
list the minimal actions needed to reproduce the behavior.
1. create a new variable called `resolution` of type `map`.
for example, using the csv format: phofcode 2. create a flux query that references this variable phofcode 3. view the results using the raw data format
when you clone a cell and edit the flux query, the single stat on the dashboard view is cached as the previous query 1. clone cell 2. edit query 3. view dashboard
list the minimal actions needed to reproduce the behavior.
1. create a cell 2. resize cell 3. clone cell
imagine a measurement where i have power measurements, each datapoint has a name tag on it.
the name tags are one of: phofcode steps to repro: 1. execute query `select integral("power", 1h) from "sonoff" group by "name",time(1h)`
list the minimal actions needed to reproduce the behavior.
1. influxdb standalone version 1.7.9 on ubuntu 16.04 2. create backup: influxd backup -database core -portable -start -end /var/tmp/backup 3. try to restore on temporary database that doesn 't exist; influxd restore -portable -newdb temp /var/tmp/backup
1. go to data explorer 1. select your telegraf local bucket 1. select `cpu` 1. try to scroll to all the fields in the `filter` panel
list the minimal actions needed to reproduce the behavior.
1. create a new task that uses flux 's `sleep` function: phofcode
list the minimal actions needed to reproduce the behavior.
1. download a slightly modified version of the noaa data.
most likely the noaa data used for 1.x examples works, but i wasn 't sure if escape sequence for strings was same so it was easier to remove it.
2. use `influx write` and have it read from file using `@`.
3. the write will probably fail with very strange error messages.
see log when pr checks fail.
here is a screenshot: <img width="1633" alt="image" src=" phofurl
list the minimal actions needed to reproduce the behavior.
1. change node version to be below 10.13.0 2. run `make` in the root of the influxdb project
see the failing test for the first commit here #15731
from the load data > telegrafs page 1. click create configuration 2. choose a bucket and a plugin (have been using docker but issue also appears with others) 3. click continue 4. configure the plugin 5. add a name and description 6. click create and verify
run query: `select myvalue, difference(myvalue) from mymeasurement`
list the minimal actions needed to reproduce the behavior.
1. run query "select derivative(mean(value)) from mv where matpunkt= '30 ' and "fastighet"= \'8080 \' group by time(60m), "uuid" limit 100"
i 'm not sure on how to reproduce the issue, so i will try to explain how to create a setup like mine.
1. install influxdb 1.7.8 2. create a database named telegraf 3. insert 50 entries in a measurement `loopingd` with following labes: `host`, `path`, `server` and a field named `rtt` 4. perform multiple queries `select count(rtt), mean(rtt) from loopingd where server= '$server ' and time >= '$start_ts ' and time < '$end_ts ' group by time(1d)` and measure cpu usage on server 5. upgrade to influxdb 1.7.9 6. execute the same queries measure cpu usage
1. use influx cli client to create a database phofcode 2. create a measurement phofcode 3. insert into a measurement, quoting the measurement name phofcode 4. check points in measurement phofcode point is not there.
1. install influx db on ubuntu 18.04 server.
for me its on amazon 's ec2.
2. create a database, and add entries using python.
3. then delete the data base and try adding the same entries again into a new database.
1. go to dashboards page 2. default page is sorted by name, click "modified" 3. sorting by modified does not sort by last modified date, continues to sort by name
list the minimal actions needed to reproduce the behavior.
1. create a variable 2. save it 3. create another variable
list the minimal actions needed to reproduce the behavior.
1. create a task that uses flux's `http.post` 2. execute task
list the minimal actions needed to reproduce the behavior.
1. in settings > templates - import a user template 2. in the newly created card, click the '+ ' add label control (with a fresh install no labels are shown) 3. type a string into search field - a dropdown item "create new label" appears 4. click "create new label".
the create label popup loads 5. accept default color and save new label.
preparing to write test covering this use case
list the minimal actions needed to reproduce the behavior.
this issue is showing up intermittently, so try the following steps maybe a dozen times.
it shows up in one out of every five or six runs of import template tests.
1. open settings > templates 2. click "user templates" 3. click import template in the list header (top right) 4. in system dialog browse to a valid template.json file and upload it 5. click submit button (page reloads to static templates - issue #15514) 6. click "user templates" again (work around for #15514)
1. start influxdb and write these points to the launched instance (`one measurement - different tags`): phofcode 2. execute this `flux` query to validate that all series have been written successfully: phofcode the result should contain two rows with data: phofcode 3. execute this `flux` query: phofcode
list the minimal actions needed to reproduce the behavior.
1. in the templates page switch to user templates 2. click import template 3. upload a template through system file controls 4. click submit (i.e.
1. install docker, docker-compose on a rpi 3 running raspbian buster 2. install the whole stack with the sandbox project 3. with chronograf, try anything related to flux (list measurements, execute script, etc), nothing works.
list the minimal actions needed to reproduce the behavior.
1. open load data telegrafs.
the wizard loads 3. choose nginx 4. click continue 5. in the plugins list click nginx.
a panel to configure nginx urls loads.
list the minimal actions needed to reproduce the behavior.
1. create a label that is associated with a dashboard and do not add properties to the label (done through api in my case) 2. load up the dashboards list page in ui 3. observe that no dashboards will render b/c of an exception getting thrown 4. exception is found here phofhyperlink
list the minimal actions needed to reproduce the behavior.
1. run the code on running influxdb database 2. note that tag value with character is inserted in database
list the minimal actions needed to reproduce the behavior.
as suggested here: phofurl 1. influxd backup -portable -database telegraf -host analytics-dev:8088 -start -end +%y%m%d-%h%m-%s` 2. influxd restore -portable -db telegraf -newdb telegraf_bak 3. phofcode
list the minimal actions needed to reproduce the behavior.
1. install influxdb on an armhf device (e.g.
raspberry pi 3) 2. enable flux 3. run any flux query
i get no results for almost any commands like show series, show measurements, etc.
i have a 44gb database with records from the last year on a default autogen retention policy.
this is the first time in maybe 8 months that i 've tried to do much with this so its been running un-monitored.
running `show measurements`, `show series`, etc returns no results.
the only data i can get out is about the shards which i 'll share here: phofcode
run queries with a group by time($interval) in which $interval equals the collection time of a metric.
list the minimal actions needed to reproduce the behavior.
1. backup database with: `influxd backup -host ${influxdb_host} -portable -database ${db} ${db_backup_dir}` 2. upload files to the new host 3. try to restore database with: `influxd restore -portable
list the minimal actions needed to reproduce the behavior.
1. create a bucket 2. create a token to read/write scoped to that bucket 3. verify that the token works 4. delete and create a new bucket with the same name 5. the previously created token does not work ; there is no way to re-add new bucket existing token
list the minimal actions needed to reproduce the behavior.
1. open settings > labels 2. click create label.
the create label poup loads 3. clear the color input.
the preview swatch disappears and a warning notice appears indicating the format for string required by input.
4. input a new string value "e.g.
list the minimal actions needed to reproduce the behavior.
i have a simple time series like this: time id area 1 us 1 uk 2 canada 3 us 1 canada i want to get count the areas for last point of each distinct id, so the result should be something like this: area count us 1 canada 2 since last point for id is canada, i want to ignore all previous points for id 1. how do i query for only most recent point each distinct id?
edit: here is actual data i am working with.
name: click3 time area id value ---- ---- -- ----- travel session1 travel session2 vtc session3 health session1 claim session4 health session3 area and are indeed tags.
when do a simple select last(value) with a group by, get following: > select last(value) as value, area, from click3 group by name: click3 tags: id=session1 time value ---- ----- ---- -- health session1 name: click3 tags: id=session2 value ----- -- travel session2 name: tags: id=session3 value ----- -- health session3 tags: id=session4 claim session4 which is correct - last point each unique session id.
list the minimal actions needed to reproduce the behavior.
1. open a dashboard 2. reduce window width
1. execute the abobe queries over any data of the database
simply go to data explorer and display a graph
list the minimal actions needed to reproduce the behavior.
1. import line protocol data via the influxdb_v2 ui from a .txt file/ through settings>buckets>import data 2. navigate to data explorer and set appropriate time range 3. no tags found
list the minimal actions needed to reproduce the behavior.
1. create a few telegraf resources cards with distinguishing names and place them variously into two or more buckets which also have distinguishing names 2. sort the cards by name ascending and descending - works fine 3. sort the cards by bucket.
try clicking sort a number of times.
list the minimal actions needed to reproduce the behavior.
1. create a few telegraf cards in the load data > telegrafs view 2. filter for one of the cards by name
1. open dashboard in cloud2 1. select "configure" from blue pencil icon in dashboard cell (graph, etc...) 1. choose the "x" in the top right (next to green checkmark) 1. observe missing cell contents
list the minimal actions needed to reproduce the behavior.
`select min(value) from measure1 where time >= and time <= and generator='abs_error' and asset_id='abc'` returns the value image phofimage 2.
`select top(median, 20), asset_id, min, max from (select min(value) as min, max(value) as max, median(value) as median, from measure1 where time >= and time <= generator='abs_error' asset_type <> 'blah' group by asset_id)` has values missing min image phofimage
list the minimal actions needed to reproduce the behavior.
1. open data explorer 2. reduce size of the browser forcing the ui to redraw itself 3. enlarge size of browser.
the data explorer controls only redraw to a limited extent leaving empty space at bottom of browser view area.
redrawing of rest data explorer is only triggered when hovering over navigation menu.
list the minimal actions needed to reproduce the behavior.
... create a new query 2.
... create a new check 3.
... try to save the check
create `notificationrule` without `name`: phofcode
list the minimal actions needed to reproduce the behavior.
1. create a telegraf configuration for a new org 2. go to `load data/telegrafs` in the nav 3. click either the telegraf config name or `setup instructions` 4. see a 404 page 5. verify that changing to shows expected instructions for telegraf config.
i 'm writing data to influxdb in bulk using python library.
if i push data for some specific period it 's giving me error saying that `400: {"error":"partial write: points beyond retention policy dropped=1"}` i did little dig-up to find out why it 's giving error for this specific period and found that some shards are overlapping.
can it be the reason?
i tried writing data one at a time and it 's working for the same duration same data.
phofcode also check retention policy which is set to infinite.
phofcode i did changed shardgroupduration multiple time.
list the minimal actions needed to reproduce the behavior.
we made upgrade from 1.4 to 1.7 and we saw not nice change in grafana graphs.
so i wanted to move from inmem to tsi.
i run buildtsi, put tsi in configuration and restarted influxdb.
this was done few months ago.
now i realized that i cannot drop files.
so i removed oll index subfolders in shards and run buildtsi once again.
did upgrade latest influxdb and restarted again.
issue persist when do drop in influx cli can see: err: cannot delete data.
db contains shards using both inmem tsi1 indexes.
please convert all shards use the same index type delete data.
list the minimal actions needed to reproduce the behavior.
1. in the ui > loaddata > buckets list create a few new buckets 2. define for each bucket various retention policy lengths 3. sort the list of buckets by retention policy sort appears to occur by alphanumeric value not by length of retention policy.
list the minimal actions needed to reproduce the behavior.
1. create new bucket 2. give the bucket a retention policy of 1 day 3. name it and save - bucket appears in the list of buckets however its field "retention: " shows "1 day_s_"
list the minimal actions needed to reproduce the behavior.
1. open the load data > buckets tab 2. click create bucket 3. name the bucket 4. toggle periodically 5. toggle back to never 6. click "create" an error message appears "failed to create bucket: unknown error"
1. start the latest nightly build 2. try find not exists bucket: phofcode
create an organization, the user creating the org should be the default owner.
add another owner to the organization.
this should return with an error `user to resource mapping not found`.
list the minimal actions needed to reproduce the behavior.
1. start up docker nightly build image 2. complete onboarding to the final step (ignore fields disappearing #14833) 3. click the advanced button a 404 page is loaded... the url is to phofcode it should be to new url phofcode
list the minimal actions needed to reproduce the behavior.
1. start the docker nightly image 2. open the onboarding wizard 3. in initial user setup page add basic values.
4. click on or tab to field initial bucket name and add first letter.
all controls suddenly disappear and * continue * button is activated
list the minimal actions needed to reproduce the behavior.
1. run influxdb 2. run telegraf from a number of remote hosts 3. stop remote hosts, start, stop (repeat a few times) 4. run `lsof -p | grep influx | awk -f':8086' '{print $2}' | awk -f':' '{print $1}' | sort uniq -c sort -nk 1` on the influx host to see increasing number of open connections to influx from telegraf agents
1. delete from ruuvi_measurements where mac !=
list the minimal actions needed to reproduce the behavior.
i need to produce multiple quantile data for the latency data we are measuring.
for each quantile type, i have to call a different query and consolidate the value in code.
is there a way i can call multiple quantile value at once.
list the minimal actions needed to reproduce the behavior.
list the minimal actions needed to reproduce the behavior.
1. set templates = [ "system.
*.loadavg "measurement*" ] observe that metrics such as "system.foo.loadavg.1m" end up in the system.loadavg measurement with tag host=foo and field=1m.
2. set templates = [ "system.
*.loadavg "measurement*" ] observe that metrics such as "system.foo.loadavg.1m", "system.bar.loadavg.1m" end up in a new measurement called "system.foo.loadavg.1m" and "system.bar.loadavg.1m" respectively - on other words, the first rule never matches.
note that this bug is referenced in two closed previous issues but nothing has been done to fix it: phofurl phofurl 1. create database with values and tags 2. attempt to show tag values but exclude a specific value 3. try with the tag value wrapped in single and double quotes
1. create task with a token that doesn 't exists: phofcode
list the minimal actions needed to reproduce the behavior.
1. import data attached in ** query.txt ** 2. go to `data explorer` 3. try flux query: `from(bucket: "my-bucket") |> range(start: v.timerangestart, stop: v.timerangestop) |> filter(fn: (r) => r._measurement == "tweets") |> pivot(rowkey:["_time"], columnkey: ["_field"], valuecolumn: "_value") |> last()`
1. go to the tasks page 2.
`create task` > `new task` 3. go to our documentation page for creating the example task phofurl 4. copy the full example into the tasks editor 5. give task a name and schedule (e.g.
name: foo and every: 1h) 6. click `save`
list the minimal actions needed to reproduce the behavior.
1. connect telegraf 2. open data explorer 3. build a query to filter a measurement e.g.
cpu 4. open script editor 5. filter for the function 'quantile ' 6. click the end of pipeline and then click on 'quantile ' - function is added to query 7.
(as a preliminary check ) click submit - an error is returned phofcode the `quantile` parameter should be `q`.
8. after fixing parameter click submit again.
-- a second error is returned phofcode the compression value should be of type float
1. attempt to create a new bucket on influxdb 2.x from the command line following the documentation: phofurl 2. run the example given in the documentation `influx bucket create -n my-bucket -o my-org -r
list the minimal actions needed to reproduce the behavior.
run latest influxdb docker image (1.7.7), and setup your db this way : phofcode wait 2 hours so rp_1h shard is discarded.
list the minimal actions needed to reproduce the behavior.
1. start a fresh influxdb 2. complete onboard 3. create a templated system dashboard 4. view cells are broken 5. open network tab to verify that request payload does not include `bucket`
list the minimal actions needed to reproduce the behavior.
1. changed retention policy 2. drop measurement.
i currently can't reproduce the issue with certainty, it only happens from time to time when trying to run several delete queries at once.
1. have a measurement with over 40m points 2. select * from measurement limit 1 offset
list the minimal actions needed to reproduce the behavior.
1. create a measurement `test` with 10 points 2. launch the following query: `select * from test limit 0`
list the minimal actions needed to reproduce the behavior.
1. install influx 2. from a terminal, run phofcode
`curl -v -h "accept: application/csv" --data-urlencode "db=somedb" --data-urlencode "q=select * from blabla; select * from blabla" -g " phofurl
software involved: influxdb v1.7.7 (git: 1.7 prometheus, version 2.10.0 (branch: head, revision: prometheus is sending metrics to influxdb via a remote write configuration to phofurl every few seconds i see the following errors in the influxdb output: phofcode there is no striking output in prometheus
1. setup docker container of `version 2.0.0 (1e461ad)` and create user, org and bucket 2. choose quick-start option so default scraper is created 3. submit the following flux query with a missing time unit via the data explorer: phofcode without the `aggregatewindow` no memory leak occurs.
list the minimal actions needed to reproduce the behavior.
1. ensure telegraf is running and collecting system metrics into an input bucket.
create a second bucket for output.
2. generate a task that looks like this: phofcode 3. run the task and confirm that outputbucket is indeed collecting your downsampled data.
4. check 2.0 logs and see an error like this repeating, despite the task having run successfully: phofcode
1. one process inserts data 10-50 lines every 2-50ms.
2. one or two processes query the db for new data every 10-250ms, asking for data that has (time > last_seen_time - 50ms)
list the minimal actions needed to reproduce the behavior.
1. create a gauge 2. set the range from -120 to -10 3. enjoy the results.
reproduction steps are given in this issue: influxdata/flux#1206.
basically, assign a variable to a string literal and use that string literal in a filter that should be pushed down to storage.
1. open data explorer 2. click variables 3. hover over map variable 4. see values rather than keys
list the minimal actions needed to reproduce the behavior.
1. create a database 2. create 2 retention policies 3. write one value to the same measurement name in both policies 4. try to delete the measurement from one rp and not other * `drop measurement rp1.cpu`
list the minimal actions needed to reproduce the behavior.
1. set the viewport to 1024 x768 (this can be simulated by sizing the browser to these dimensions) 2. open dashboards 3. create a new dashboard 4. create a cell 5. define data from an existing bucket and submit, data loads and is rendered to curve 6. click time select dropdown 7. select 'custom time range '.
the date picker popup loads.
`$ docker run -p -v influxdb` 2. populate with any data (sample python script below) 3. docker exec -it b56 influx -precision rfc3339 4.
`> select mean(*) into test.autogen.test2 from test.autogen.test where time > 0 group by time(1d),test_tag fill(previous)` 6. docker container runs out of memory, query times out.. python script to populate with sample data: phofcode
1. create a database and create a non-default retention policy on it 2. try to insert some data in a measurement and specify the retention policy from step 1
list the minimal actions needed to reproduce the behavior.
1. open settings > labels 2. create 5 or more labels including various descriptions 3. sort by name ascending - ok 4. sort by name descending - ok 5. sort by description ascending - looks like the result is sort by name 6. sort description descending - no change
list the minimal actions needed to reproduce the behavior.
1. open settings > labels 2. click create label, overlay dialog 'create label ' loads 3. click the 'create label ' button
list the minimal actions needed to reproduce the behavior.
1. open settings > labels 2. add three simple labels e.g.
{asdf, qwerty, zcvb} (see screenshots attached below) 3. click on the filter field 4. attempt to type 'asdf '
list the minimal actions needed to reproduce the behavior.
1. use a regex that starts with a ``, ends with a `$`, and has a character class that is finite, but very large.
2. it panics due to stack overflow.
example: `select usage_user from cpu where host =~ /server[ab]$/`
list the minimal actions needed to reproduce the behavior.
1. create a task writing to bucket 'a' 2. update the task to write to bucket 'b'
i don 't know, it just happened in the middle of the night, i have no idea why
list the minimal actions needed to reproduce the behavior.
1. create a task in chronograf, set the internal and offset 2. edit the task in chronograf and remove offset
1. install influxdb from rpm on rhel 7.6 2. install yum-verify package 3. run 'yum verify influxdb'
list the minimal actions needed to reproduce the behavior.
1. change run level from graphical.target to multi-user.target 2. shutdown and remove video card.
3. restart system and remotely log in with ssh.
list the minimal actions needed to reproduce the behavior.
1. settings > variables 2. new variable 3. select csv or map type and enter variable contents 4. save variable and see the type as `query`
list the minimal actions needed to reproduce the behavior.
1. go to variables tab in org settings 2. hover over variable and click rename 3. click i understand, lets rename
list the minimal actions needed to reproduce the behavior.
1. open the data explorer 2. switch to the script builder 3. search for and click `math.abs` function
1. startup two different influxdb v2 and run through the configuration of creating a user, org, and bucket 2. using one of the influxdb instances setup the a new source and configure the other instance.
3. click connect to remote source 4. open data explorer screen
1. create database phofcode 2. write some data points phofcode 3. delete some rows using >= operator on tag phofcode 4. query remaining records from the measurement phofcode
1. select mean(value),host from "measurement1" where ("host" =~ /aa./) and time >= now() - 30d group by host err: mixing aggregate and non-aggregate queries is not supported 2. select min(value),host from "measurement1" where ("host" =~ /aa./) and time >= now() - 30d group by host will have a correct results
1. configure telegraf to write a single set of cpu data into influxdb 2.0 phofcode phofcode 2. run this query from the repl (or wherever): phofcode 3. notice that it returns instantly 4. configure telegraf to send more than just a single metric in: phofcode 5. run the same query as before: 6. notice it takes much longer
unknown; start influxdb with >~1000 databases and/or >~30000 shards?
1. start influxdb 2.0 platform: phofcode 2. do onboarding phofcode 3. get all authorizations for logged user by http endpoint ** /api/v2/authorizations/ ** .
> select mean(so2) so2, mean(co) from group by year_month slimit 1 tags: time ---- --- -- 0 we can see i got all series
1. insert the following points: phofcode 2. run the following query: phofcode returns the `cpu` measurement.
[first step] this is the original dataset: phofcode 2.
[second step] this is the cq that runs to downsample this data.
we are using wildcards as per documentation here: phofurl this are the cq that downsample data into another rp: phofcode 3. this is the new rp: phofcode
after a fresh start of the pi3 all seems to work.
after 2h influx starts to use 90% of the cpu and finally crashes.
after the crash i am unable to restart influx or grafana.
only things that helps is to restart the raspi.
1. have existing prometheus installation with default retention period (15 days) and some metrics already in it 2. configure prometheus to use the remote storage apis: phofcode 3. make a grafana graph panel with any request to the prometheus data source with a time interval of more than 15 days, e.g.
`topk(5, by (job))` with interval `last 30 days`.
1. create database with 1000 measurements with 1000 data points each if a single database is not enough create multiple databases, including a database with measurements with ~100k and ~1000k entries.
the leak is reproducible by querying the smaller databases 2. write a script to query all series of all measurements of a database (to make it worse spawn multiple threads) 3. the used memory should increase fast and will not be freed completely afterwards while our influxdb utilizes ~8gb of memory after startup, the allocated memory increases to ~18gb when running the queries and remains there for few minutes after last query has been run.
about 10 minutes later it drops to 13.5gb allocated memory and remains there.
repeatedly running this kind of queries reliably grinds to halt after all 24gb available are filled.
[first step] bring up a brand new influxdb instance with 2cpus and 8g ram restore the backup using -portable flag.
the size of the data is around 5g.
this finishes up in less than a minute 2.
[second step] side load the restored data into an existing database using select * into mydb..:measurement from /.
** we are collecting metrics data from heapster.
it's exporting huge amount of data(rp: default).
after processing the data, we are deleting it.
and storing processed data in same same database but different measurement (rp: autogen).
sporadic sigsegv after upgrade from 1.6.4 to 1.7.1
[first step] run batch insert 20000 records every 200ms i have 50 measurements, and 40 field per measurement.
all measurement have same structure phofcode 2.
[second step] after insert more than 10 hours.
run: select count(*) from "gateway-1"
1. within powershell (or command line) execute `influx.exe -type=flux`
1. promethus collect metrics native write to influxdb bout 200qps refer: phofurl 2. when the influxdb data dir come to 15g or higher, memory usage problem become very obviously.
my machine have 16g memory, the influxdb may restart to occupy 7-8g, then it consume more and more memory as promethus keep writing data into it unit it oom killed by os.
image phofimage 3. i already configure influxdb.conf to reduce memory usage.
but it seems no effect.
index-version = "tsi1" this tsi feature has been released in version 1.3.0 and kept optimizating version 1.7.0 image phofimage by this blog: phofurl
1. run influx command line interface using import option `influx.exe -host x.y.z -import -path test.txt` 2. specify path to file with windows line endings ( ) test.txt phofhyperlink
1. run a command like "delete from "somemeasurement" where time = 0" (so that no data should be deleted).
2. will be evaluated for each shard and deleted from filestore, wal and cache.
3. if somemeasurement" is not in the filestore, the series will be rebuilt.
the problem with 3) is that it does not check the cache #10502 and it does not check if it existed before the delete started.
influxd will then rebuild index because it was never in shard.
1. start influxd with tsi1 2. run `insert somemeasurement value=1` in the influx client to create a new series that only lives in the cache.
3. run `delete from "somemeasurement" where time=0` in the influx client (which deletes nothing because i do not have any data with time=0) influx now decides to rebuild the series index files because series "somemeasurement" does not exist in any tsm file so it is considered "deleted".
if i do a restart of influxdb between 2. and 3. it will not rebuild series on delete.
this issue is related to #9015, because it causes deletes to be very slow when only exist cache.
i get profile below when running a query like `delete from "somemeasurement" where time=0` a loop.
note that this bug is referenced in a closed previous issue: phofurl 1. create database with values and tags 2. attempt to show tag values but exclude a specific value 3. try with the tag value wrapped in single and double quotes
1. snapshot.tar.gz phofhyperlink 2. drop database noa 3. show databases
> select * from channel_site_count where time > time name: channel_site_count phofcode > select mean(count) from channel_site_count where site =~/sip%%730/ and time > time group by time(2m), site fill(previous) name: channel_site_count tags: site=sip%%730 phofcode
i upgraded from 1.6.4 a few days ago, i also needed to drop some measurements (i dropped them while running 1.6.4 but some leftovers remained).
after the upgrade to 1.7.0 everything seemed fine, then i tried to drop one such measurement which would not go away (seems like #9694).
after that operation (which hanged) influxdb seem to be stuck in a continuous full compaction process on the latest shard.
even after several restarts all shards had a successful full compaction (pretty fast, in a couple of minutes) but the process never finishes on the current shard.
1. run retention on huge db 2. check memory consumption
1. clone the current master 2. execute `go run cmd/influx/main.go -version` and note the wrong behavior 3. checkout a released tag, like 1.6.4 - `git checkout tags/v1.6.4` 4. execute `go run cmd/influx/main.go -version` and note the right behavior
1. start influx cli session 2.
`create continuous query test_cq on cq_anomalies resample every 3s begin select sum(count) into group_by_m from test_m group by time(15250w), tag_k end`
in a select into statement, use the stddev aggregation function over a bucket containing exactly one data point, as in the following test case: curl -x post ' phofurl -d 'q=create database test_case ' curl -x post ' phofurl -d 'weather temp=10 curl -x post ' phofurl -d 'db=test_case&q=select mean( * ),stddev( * ) into weather_daily from weather group by time(1d), * fill(none) ' curl -x post ' phofurl -d 'db=test_case&q=show field keys '
1. use telegraf to send procstat to influxdb 2. write query to select and group by stats from procstat for example: select max("pid") from "procstat" where ("host" = 'at1lkam01s ' and "systemd_unit" = 'kamailio.service ') and time >= now() - 1m group by time(20s) fill(0)
0. run two machines, run two influxdb containers with two telegraf instances capturing docker engine metrics 1. take a backup of influxdb01 's data 2. restore influxdb01 's backup to influxdb02 as a temporary database 3. merge the temporary database into the primary database
1. make a request to ` phofurl with a flux query as the body
1. deploy an influxdb container on a remote instance 2. deploy an influxdb container on your local machine 3. create a backup on your local machine 4. restore your backup to the remote instance: `influxd restore -portable -host $hostmachine:$hostport $(pwd)`
`explain select count(tot) from (select count("foo") as tot from "data" where $timefilter group by "bar" fill(null)) where tot != 0`
i have two influxdb instances which normally uses a floor of about 50gb of ram during runtime.
as it runs, the heap is normally between 50-100gb of ram.
this seems like a lot; there are lots of queries running but few live beyond a few seconds, normally show queries is empty.
occasionally the memory spikes up much higher; this usually doesn't show up in the heap stats, it happens much faster and just runs the server out memory.
in our environment this results in an oom kill service.
1. have measurement with metrics **only for several days** 2. run query with "group by" and absolute time not a nanoseconds epoch time (in seconds) phofcode > .
select execution_time: planning_time: total_time: it 's the same if choose big time range like `where time > now() - 9999d`
it happens intermittently and not reproduceable.
this is the command we ran show tag values from erilte01_kpi with key = cell where market = 'new jersey ' when i change the market to different value e.g.
new york it returns result.
so, it does not work only for certain tag.
1. run a query like: phofcode 2. run a query like: phofcode
1. create suitable dns name for instance (we are using aws route53) 2. create let 'sencrypt certificates (for apache on ubuntu 16.04) using certbot 3. edit permissions of certificates basically as described here phofhyperlink : phofcode 4. edit to point to these certs: phofcode 5. restart: `sudo systemctl restart influxdb`
query (the data doesn't matter, what matters is the 30 days aggregation) `select count(user_id) as result from measurement1 where time > and time < group by time(30d) fill(0);`
1. run telegraf on a freshly migrated system using a gpt+lvm partition a new series is sent to influxdb with these tags : please note `id_model=` with a bunch of escaped spaces phofcode ` also, before this data was inserted, the following series for the same host were already present and correctly working.
phofcode ` 2. query influxdb (directly or through grafana) with anything that will have to parse the id_fs_type tag
try the phofcode function with descending time order: phofcode
`docker pull influxdb:1.6-alpine` or `helm install stable/influxdb`
[first step] backup existing database: "influxd backup -portable -db <db-name> /tmp/backup.full 2.
[second step] restore to new db: influxd restore -portable -db <db-name> -newdb <new-db-name> /tmp/backup.full 3.
[third step] several verifications if the contents are equal
use telegraf to prefill some data.
choose a small range like 1 minute and set the time range to that minute.
make sure there's data before the interval you are querying.
use something like the following: phofcode
1.use python-influxdb write data to measurement 'ts121' 2. drop measurement ts121 3.use python-influxdb write same data to measurement 'ts121' again 4.drop measurement ts121 5.use python-influxdb write other data to 'ts121' again 6.drop ts121 7.select * from ts121 limit 1
1. create admin user 2. login as admin user using influx cli 3. create database sampletest 4. create sampletest admin user using following command `create user sampletestadmin with password 5. grant all privileges for sampeltestadmin on sampletest database using `grant all on sampletest to sampletestadmin` 6.logout from cli and login as sampletestadmin 7.try creating retention policy on sampletestadmin database using `create retention policy "one_day_only" on "sampletest" duration 1d replication 1`
1. log data points containing multiple fields with each timestamp, say 3, until the tsm file rolls over to a new one.
2. use influx_inspect dumptsm to show the tsm info.
note the number of points and the time range 3. in influx, run a count query on measurement using time range given in step 2 to count number of "points" as defined in phofurl
1. configure prometheus with: phofcode 2. use the default influxdb config 3. watch prometheus spit out `http status 400 bad request: {"error":"proto: wont wiretype = 2 for field starttimestampsms"}`
1. curl the attached file to write test data into your db float_int_test.txt phofhyperlink 2. run query `select sum(*) from (select last("field_float") as q1 from test_measurement where test_tag = '1 '), (select last("field_float") as q2 from test_measurement where test_tag = '2 ')` 3. run query `select sum(*) from (select last("field_int") as q1 test_measurement where test_tag = '1 '), (select last("field_int") as q2 test_measurement where test_tag = '2 ')`
i 'm running these queries on a normal timeseries.
for some reason the last query returns results all over the value range.
i reported this before in #9015 for influxdb 1.3.x, but the issue remains: deletes are very slow.
i get a lot of the following in the log: phofcode
1. have a running 1.5.2 with `index-version = "inmem"` 2. build tsi index files phofcode 3. restart influxdb
1. edit influxdb.conf and set unix-socket-enabled = true 2. restart influxdb daemon
i have a db with discharge measurement values, with a value every three minutes.
the query `select mean("value") as "mean_value" from where time > and time < group by time(24h, 8h) tz( 'europe/zurich ') ` yields phofcode as you see from the query results, the timestamps during dst transition are irregular and include a gap.
1. start a database the matches the config and details above 2. wait for a full compaction to begin (~1h after start time)
1. have one entry of datas 2. request this data with mean() function, and group by time(720h) or group by time(30d) (trying to group the results by month, have tried (4w) too but bad results)
1. my schema consists of 50 measurements with 1000 different tag values (so 50k unique series) and field values contain 1 float, 3 int and 1 timestamp value.
the timestamp values are in microsecond ('u') precision.
i have adhered to all the recommendations given to migrate historical data.
the retention policy for the db is 3years, the shard duration is 52w and i have changed the to 10s.
2. i have used influxdb-python client to pick up points from csv and use default json format call write_points api with 6000 points in json body.
1. install 1.4 2. start data flow 3. upgrade to 1.5.4 4. change indexing to tsi in config file 5. rebuild index to use tsi 6. restart influxdb service
i ran the following from the command line: phofcode
1. create some measurements with continous data 2. run the following query with subquery: phofcode
1. querying one series data phofcode 2. querying 100 serieses data phofcode 3. querying 1000 serieses data phofcode
1. set `max-row-limit = 0` in `[http]` section 2. query 100k samples at once
install influxdb, create database and write to the measurements every 30 seconds
1. i execute the `select ... into` query from the cq: phofcode new series are downsampled as expected.
2. then i create the continuous query with: phofcode
on linux: phofcode on mac os x: phofcode
1. i just tried to run javascript code.
"><img src=x tried and worked.
3. phofurl 4. screenshot : screenshot from phofimage
i have no idea how to reproduce this, but we have data sitting in a common database called "equipment" this includes both server data, and data about the enterprise network, as well as data from mobile equipment.
1. uncompress backup into /tmp/recent (`tar xvjf 2. stop any active services (`sudo service influxdb stop`) 3. restore in metadata (`sudo influxd restore -metadir /var/lib/influxdb/meta /tmp/recent`) 4. restore the datbase (`sudo influxd restore -database mydb -datadir /var/lib/influxdb/data /tmp/recent`
with our existing data, the following query used to work without issue: phofcode
1. prepare a database with whatever values you want, each one separated by 719 seconds (~12minutes) 2. make a query of any percentile above 25 while gouping by 15 minutes windows.
3. make a query of any percentile bellow 25 while gouping by 15 minutes windows.
0. send data to influxdb using collectd 1. seed a new table with data using this query: select value as newname into tablea from tableb group by host,instance 2. create a continuos query as follows: create continuous query mycq on collectd begin select distinct(value) as newname from tablea group by time(1m),host,instance end 3. run a query on the data select * from tablea group by host,instance
2. enable auth: `auth-enabled = true` 3. run query: phofcode 4. disable auth: `auth-enabled = false` 5. run query: phofcode
1. insert this data in a database: phofcode 2. execute this query (workaround for time-weighted average): phofcode results, as expected (before the first value in the db, null is returned for each hour): phofcode 3. now execute this query, reducing the range of the outer query: phofcode
i have a table with 85 fields and one tag, tag is device id where i have 2000 devices means 2000 series.
15 fields and tag are of string type and other are of float type.there are total of 79 million packets in db.
1. run the following queries: `select max(float_value) from may_data where time >= and time < and float_value >= 0 and float_value <= 9999 group by dev_id my_data ` `select min(float_value) from may_data where time >= and time < float_value >= 0 float_value <= 9999 group by dev_id my_data ` `select count(float_value) from may_data where < 0 <= 9999 group by dev_id my_data ` the response i got was around 160 seconds for each.
2. now run these queries repeatedly 6 to 8 times and the response becomes 1200 to 1600 seconds.
3. leave the db running without any query for almost 1.5 to 2 hours again becomes normal but after doing above queries repeatedly, it become 1200 to 1600 seconds.
from the `influx` cli: phofcode
1. in standalone influx 1.5.3, insert 5million measurements.
2. after approximately, 1.16 million cardinality , write is failing with the log of "timed out"
1. create table with data 2. query for data with time range before table exists
1. start new and empty instance of influxdb 2. create database to have a database to write into 3. continuously write 7000 points/second data into this database via http 4. power-reset the vm to simulate loss of power, via command "vim-cmd vmsvc/power.reset 92" to the vsphere server 5. restart vm, start infludb again and goto step 3.
* create a influx instance with tsi1 enabled.
* create a database * insert a sample * do a kill -9 on influxd restart influxd query for the measurement -- nothing is there.
all tsl files are of zero length.
if we stop influxd normally, one of the influxd has data and the measurement is available.
i belive this is the same issue as reported in #9957 by @mikaanes, but with more details and reprosteps.
does this make sense, @jwilder , @benbjohnson , @e-dard ?
:-) i think fix would be to add fsync after .tsl file is written or with certain interval (like for wal) in .
`drop series where "host" = 'thisisokhost '` 3.
`show series where "host" = 'thisisokhost '` >> does not list results(correct) 4.
`drop series where "host" = 5.
`show series where "host" = >> lists results (error) 6.
`show >> lists results (error)
1. start a clean instance of influxdb phofcode 2. create some dummy databases phofcode where `dummy_data.pl` is phofcode 3. backup everything phofcode 4. try to restore the database `test`
see poc.go phofhyperlink file: * passing user-controlled data to the client usually works fine: spaces, quotes, etc.
are escaped * however, a tag value containing a newline character will not get escaped * this results in a second point being written (although the first one will not get inserted) phofcode this results in the following line protocol payload being sent to the http api: phofcode the second line actually writes a point to `admin` measurement.
run `go run poc.go` locally to reproduce this example.
if tag value comes from user-supplied data, **this allows malicious user insert points with fixed field names (and possibly values) and no tag in an arbitrary measurement** and may lead security issues in some very specific cases.
it also allows create measurement with arbitrary names.
1. inspect tsm file and read number of data points phofcode 2. run query phofcode
1. run "show tag keys" on a relatively large database (16 tags and cardinality estimation:
1. start influx 2. starts loading all tsm files 3. influx fails to start and i see an exception
- start influxdb 1.5.2 with inmem index (default for 1.5) - `curl -i -xpost phofurl --data-urlencode "q=create database mydb"` - `curl -i -xpost ' phofurl --data-binary 'cpu load value=0.64 - `show measurements` shows measurement name with spaces and no backslashes (expected) stop influxdb `influx_inspect buildtsi --datadir=path/to/data --waldir=path/to/wal` change influxdb config to `index-version = "tsi1"` start influxdb
currently unknown how to reproduce
i think the following happened: 1. run influxdb.
2. submit query that needs to load a lot of old data, the database is killed with signal 9 (oom) 3. the database is automatically restarted :+1:
1. run a query using the `log2()` function
trying to run a query like: phofcode
1. run a query using one of the new math functions passing a literal string as the field key.
2. run a query using one of the new math functions and pass the same field key but as a regular expression, not literal string.
1. insert a few points 2. run a raw query using the `top()` function 3. note that the results are ordered by time and not the field selected by `top()`.
1. kill whole system hard 2. cannot write to influxdb after system start
[first step] added graphite as datasource and config is below [[graphite]] enabled = true bind-address = ":2003" protocol = "tcp" database = "graphite-test" templates [ ] 2.
[second step] send data to influx like below echo "example.foo.bar.gama 3 `date +%s`"|nc localhost 2003 3.
[and so on...] when i switch to chronograf, a database called "graphite-test" gets created(as expected), but actual data like measurements are shown in _internal database.and i do not see field values too.
1. launch influxdb 1.4.2 2. generate some data 3. migrate to 1.5.0
starting from the example that shows how to write multiple points at the same time here phofurl phofhyperlink , i slightly modified it to increase the number of points written.
1. using http api write the following: value=0.55 value=2.0 value=0.55 value=2.0 value=0.55 value=2.0 value=0.55 value=2.0 2. using http api write following: (i just added an extra line at bottom.. actually even few characters (e.g., a longer tag) would raise issue).
[first step] > show series from /huge.
*/ where host =~ /jtcl.
*/ limit 10 err: %!s(<nil>) > show series from /hugepages/ where host =~ /jtcl.
*/ limit 10 err: post phofurl dial tcp getsockopt: connection refused
(given docker is installed and port 8086 is unused) open command shell and run "docker run -p influxdb:1.5" (now the latest influxdb listens on port 8086, log output is dumped to the shell) 2.
(optional, given tcpdump is installed and user has permission to run it) open another command shell and run "sudo tcpdump -i lo -s0 -a port 8086" (this will dump the http communiction with the server) 3. open another command shell enter following four commands: phofcode (note: in last line, utcoffsettag was quoted \'" \'+0400 \'" \', because we are running on a shell; effectively, '+0400 ' will be transmitted, as can be checked in tcpdump output enabled with step 2)
1. i use query to influxdb ` select ask1price as price, ask2price as price from exchange limit 2;` 2. and subquery after it ` select price from (select ask1price as price, ask2price as price from exchange limit 2);`
adding "group time(0s)" does not change the behavior.
if run this query: `select bytes last("value") "filecount" 'bytes ' "instance" /db1 mysql/) instance)),(select entries last("entries") "db" 'dbtype ') instance)) instance ` then there is no output
try to run `show tag values cardinality from "database" with key = "database" where time > now() - 1d`
1. start empty server 2.
`create database test` 3. run `while true; do ./influx -database 'test ' -execute 'insert test,tag=value field=1 '; sleep 10; done` to create a stream of data (`select 10s) from httpd where time > now() - 1m` -> 1 point in 10 seconds) 4.
`create continuous query test_cq on test resample every 10s for 20s begin select mean("field") as "field" into "test_agg" from "test" group by time(10s), * end` 5. wait some time (see below) 6.
`drop continuous query test_cq on test` and `create continuous query test_cq on test resample every 10s for 1m begin select mean("field") as "field" into "test_agg" from "test" group by time(10s), * end`
1. attempt to delete/drop specific measurement
1. create database and user, grant it access to db 1.1.
`grant all on test to hi` 2. make a full backup 2.1 `influxd backup -portable /tmp/influx_backup` 3. drop user and database/purge your influxdb installation 4. restore `test` database from '-portable' backup 4.1 `influxd restore -portable -db test /tmp/influx_backup`
the query that includes `difference(distinct())` like this.
1. run `influxd backup /tmp/backup`
1. sudo apt-get update 2. sudo apt-get upgrade
1. backup: `# /usr/bin/influxd backup -portable 2. enable tsi in config: `index-version = "tsi1"` 3. restart, stop and build tsi: phofcode build_tsi.txt phofhyperlink tree.txt phofhyperlink log.txt phofhyperlink 4. disable tsi: `# index-version = "inmem"` phofcode 5. no users shown: phofcode 6. create users manually: phofcode
[first step] on windows 10, i have configured config file by making below changes [meta] dir = "c: users [data] dir = "c: users wal-dir = "c: users 2.
[second step] [http] # determines whether http endpoint is enabled.
enabled = true bind-address ":8086" auth-enabled false log-enabled true 3. tried running : influxd -config influxdb.conf - no error observed 4. on browser : phofurl
1. trying to run a simple query to get 50-100 records based on time and tags
stop influxd run influx_inspect buildtsi start influxd
1. docker run fires up the server 2. create a shell, start influx cli, create db mydb 3. start sending data with a node app: phofcode
1. download rpm at phofurl 2. try to install using `zypper` package manager.
1. run an influxdb 1.3 server that binds to `:8088` 2. setup another influxdb server with e.g.
influxdb version 1.5 3. execute backup from the server in step 2 to the server in step 1
works: phofcode doesn't work: phofcode
1. install influxdb 1.5.0 (new install - no existing data) 2. set `index-version = "tsi1"` in 3. create many databases (2000 in this case) and fill with a small amount of data: phofcode
1. show tag values with key = "host"
1. start influxdb service 2. try to connect to the http service or check bound ports (8086)
phofcode bootstrap.sql contains various `create`, `set password` and `grant` statements.
the relevant ones are: phofcode
1. first test in 1.3.5 phofcode 2. second test in 1.4.2 phofcode 3. third test in 1.5.0 phofcode
1. take a back up in v1.2.2 and restore it in v1.4.2 2. no change to the retention policy, keep the default behavior
run the following command on the influxdb machine: phofcode
1. create measurements with a tag with underscores > select * from testseries name: testseries time
1. create a workspace on aarch64 machine 2. built influxdb 3. launch influxd
(wait 10 seconds before querying `_internal` to make sure updated statistics were gathered) 1. start empty influxdb 2.
`select nummeasurements, numseries from "_internal".."database" where "database" = "test"` --> 1 measurement, 1 series as expected 6.
`select nummeasurements, numseries from "_internal".."database" where "database" = "test"` --> 0 measurements, 0 series as expected (see #8198) 8.
1. choose java or dotnet project, phofurl 2. run project 3. run query phofcode java phofhyperlink dotnet phofhyperlink and then click on table view.
1) install same influx on two identical machines, (8 cores 32gb ram) 2) import the same data on both instances, 3) wait until both have done full compaction, 4) run the same query ("select count(value) from..") on both machines and time them.
hello, i am seeing a continous high cpu usage running this container on a raspberry pi 3 image phofimage also, the memory usage is a bit odd i am hosting grafana, influxdb and home-assistant here.
i have noticed this when i started to get monitoring from this containers using telegraf.
phofimage have tried to stop grafana and home-assistant, and the spikes of cpu usage continue.
create a dummy data table, e.g.
via influx cli on some db: phofcode now, for a standard aggregation like `max`, i get the result as expected and documented: phofcode now i do the same with
1. run aggregation query on foreign time zone that includes a dst change.
in this case group by time(1w).
for example: select count(menge) from where time >= and time < and tag=~/tag_value/ group by time(1w, +4d) fill(null) tz( 'europe/berlin ')
2. tested manually the rest api to ensure it's working 3.
(from my mac or even from a docker container) influxd backup -host localhost:8086 -database test-database-example /tmp/backup
1. create a database and store some data in it.
2. create a retention policy such as `create retention policy "56_weeks" on telegraf duration 56w replication 1 default` 3. add some more data.
4. try something simple like `select * from <series>`.
make a script like this in a file and execute like a sudo bash script: phofcode
1. create 2 databases, a and b. both have a retention policy 1000w and 7d 2. live data feeding into database a with tag=name, fields like price, quantity and customized timstamp 3. down sample data from a to b with aggregate command first, max, min, last and group by time name
1. install influxdb 1.4.2, activate the collectd receiver, enable the "join" mode and start influxdb 2. configure collectd to run on a host and to send ipmi messages 3. observe influxdb behavior
1. create database test; 2. create retention policy "inf_10y" on "test" duration inf replication 1 shard duration 520w default;
1. install influxdb on centos 2. install grafana.
add & configure influxdb datasource.
validate if connection is ok. 3. create a new db and measurement with integer value records 4. query data using above provided query
1. create a `rsyslog` configuration file for `influxd` phofcode 2. restart `influxdb` and `rsyslog`
insert a point into each phofcode 2. export with influx_inspect phofcode this gives phofcode 3. drop databases phofcode 4. import with `influx -import -path ...`
just wait for a compaction to run, and in some cases the error is shown in the log.
1. create a database, create measurement, load data 2. select * from meas limit 1;
1. go to github influxdb repo 2. create new issue 3. cut and paste curl -o profiles.tar.gz " phofurl command to the influxdb host.
4. execute the curl command
1. series with 8 fields, 4 tags and ~20m points, out of which 9 have `f1` = `-1`.
`select f1 from m where f1=-1` // returns in ~15 seconds 2.
`select f1, f2 from m where f1=-1` // returns in ~20 seconds 2.
`select f1, f2, t1, t2, t3, t4 from m where f1=-1` // returns in ~20 seconds.
no penalty when adding tags 3.
`select * from m where f1=-1` // times out after ~60 seconds, even though = "30s", not 60.
3. f1, f2, f3, f4, f5, f6, t1, t2, t3, t4 times out after ~60 seconds 4.
`select * from ticks where bid=0` never times out (waited ~2 minutes before c)
1. set up source in 2. run `apt-get update`
1. add new telegraf host
execute query: `select count * (1 / 1) from measurement` or `select * from measurement where 'a '= 'a '`
we are sending two series to a measurement, `account_winbacks` one representing the total, using the standard `value` name, and a second series `by_duration` for which all records include a `duration` tag value (the `value` series does not include this tag).
some sample data: phofcode we are using `group by "duration"`, and displaying a single chart with multiple series in grafana.
here 's simplified version of our query that exhibits the problem: phofcode
1. create a measurement with 10m+ points (can 't tell how many due to this bug itself) and a schema including 4 tags, 6 floats, and 2 strings.
2. run this query from the cli: `select count(*)` two other clients insert <300 points of data every 10 seconds each.
on my database: `select sum("btu_hr") from (select mean("value") as "btu_hr" from "modbus_value" where ("type_instance" = 'firing-rate ') and time >= now() - 1h group by time(5m) fill(36)) ` from scratch: phofcode (note first timestamp, use that in next query to work around other parsing bug(?))
phofcode note the incorrect value and the very long wait.
make sure a "full compaction" of the shard has ran.
phofcode when i then run influx_inspect dumptsm, i get the following suspicious data: phofcode as you can see, the block in the midle almost spans six days, covering multiple other blocks.
however, third block is just a few minutes after first block.
to me it looks like full compaction is not done properly.
it looks like this is causing oom in phofurl .
it is unclear if problem that block has wrong index or if block actually contains values that should have been moved to other blocks.
the output of command below available here: phofurl phofcode
create a series with incrementing counter, but have a single item significantly lower, e.g.
: phofcode phofcode 2. ask for the of this series phofcode phofcode 3. observe that the second value is clearly crazy (~400 trillion)
create a shard with a block the covers a few days (six as below) and then write new values in the same time period with 1 second sample time.
phofcode run a few queries where you ask for say 1 hour of data (must be covered by the first block) in parallel (16), and do this forever.
phofcode ` this causes influxdb to oom.
for my query this returns only 4217 values: phofcode `
uninstall the 1.3.2 version, and then install the 1.4.2 version
1. using go client for influxdb, write the data to influxdb.
since the upgrade for certain files i 'm seeing the error "request entity too large" based on the document listed under following link: " phofurl this is a configurable option.
i modified influxdb.conf with following max-body-size = 0 after change database influxdb process was restarted.
but it hasn 't made any difference.
1. verify influxdb is running (systemctl status influxdb) 2. restart journald (systemctl restart systemd-journald) 3. this may take a few minutes, but influxdb is then killed ( systemctl status influxdb)
1. insert 10 data lines ever 5 seconds where line looks like `curl -i -xpost ' phofurl --data-binary <timestamp>'` 2. look up count for data<n> 3. then attempt to `delete from series0 where 0uniq0=uniq`
1. spin up a cluster with 3 or more meta servers 2. shut down or break all meta servers 3. start 1 meta server
1. send a post request to influxdb with a valid database but a retention policy that doesn 't exist e.g.
phofcode this responds with something like phofcode
run concurrently many query- and write-requests againts the http endpoint.
i was able to reproduce the problem with 3 parallel treads doing select-queries and 2 parallel threads doing writes against the same set of series.
unfortunatly i can 't easily provide a shell script to reproduce, because i 'm running a windows .net-application as http client.
but i will provide a wireshark file with the observed behavior.
this is a followup issue on phofurl , occurred today, approx.
1 month after upgrading to 1.3.7.
1. write data to default database 2. delete data in a few different series rapidly
1. create default retention policy for one year: `create retention policy one_year on winner duration 365d percisreplication 1 default;` 2. insert point: phofcode
phofurl with a `addr` like ` phofurl like behind a proxy server or so
any query with offset in grouping by time set to `now()`: phofcode
1. run a query counting and averaging response times: phofcode 2. run the same query but within a subquery, selecting some or all elements of the query: phofcode
1. shut down existing influxdb instance 2. install new binaries 3. restart influxdb
we have custom collectors that receive nginx access syslog in a specific format and then pushes this data into influxdb through telegraf.
then we use a continuous query to aggregate this data for long storage in a seprarate table with different retention policy.
we 're successfully ingesting the data in the initial table, it 's indexed correctly: phofcode then the following cq kicks in: phofcode and in the resulting table we get nightmare: phofcode here we have a * ton * of some weird extensions that are not original table.
we have separate database that deals with phone numbers and i suspect that tag values are somehow leaked from there.
however we don 't have any overlapping cqs can push data from db to another db - i 've checked twice.
and what 's most interesting - with corresponding tag values isn 't table: real tag value: phofcode leaked tag value: this behavior is 100% reproducible on my setup.
i 'm dropping both measurements, pour again and here it is.
hint: different table this database which differs only few fields/tags and it 's cq only differs by tables names - this table does not exhibit mentioned behavior.
1. create measurement and insert data phofcode
1. attempt to start influxd
1. mount a windows fileserver 's smb export into a folder on the docker host 2. run the influxdb docker image with /var/lib/influxdb bind mounted to the mounted samba folder 3. wait a while
1. run a query with a regex such as `select mean("usage_idle") as "mean_usage_idle" from where "cpu"=~/cpu0/` and notice that it has a parse error 2. add a space after the regex operator `select mean("usage_idle") as "mean_usage_idle" from where "cpu"=~ /cpu0/` and notice it succeeds 3. run query with an equals operator and notice that there is no space `select mean("usage_idle") as "mean_usage_idle" from where "cpu"= \'cpu0 \'` which succeds
1. have data in some db (shard size 52w), inf retention 2. use grafana to query influxdb concurrently with multiple dashboards 3. oom killer triggers and kills influxdb instance 4. after bringing instance back querying the db with grafana results in less points being displayed 5. using export tool to export db content reveals that all the data points are present.
6. using verify tool to scan influxdb data files shows nothing is wrong with any of them
background: i 've time series data from icinga2 and i want to identify stalled machines, e.g.
machines with no updated series since the last 30 days.
to achieve this, i select the last value for each series, and i wrap this in a subquery.
now, the outer query uses a where clause, but this is somehow "magically" applied to the subquery - which is logically wrong.
1. sub query: phofcode 2. full query: phofcode
influxdb is very slow when querying using the last() aggregate on time series with many shards (~500).
the same behavior is observed when using order by time desc limit 1. the query is much faster when the time range is limited downwards.
1. export database to line protocol file in compress mode (the output file must have more than 600mb) 2. try to import this database using influx import command
1. issue query `select usage_user as idk from cpu where time > now() - 10s`.
2. issue query `select usage_user as idk, usage_idle as idk from cpu where time > now() - 10s`.
we are trying to sample our data.
we have millions of points and want to fetch every nth point in a given interval.
we have implemented a solution that calculates the time difference in this interval and then groups by it to receive the correct amount of points.
`select last(value) as value from measurement where time >= '... ' and time <= '... ' group by time(calculated_time) fill(none)` the amount of points returned seems to be correct, but the dates are not.
1. setup nginx proxy to influxdb 's http endpoint 2. don 't actually run influxdb (so the requests to the proxy fails with 503 or similar) 3. make a request via the client to the proxy
1. run: *influxd config > influxdb.conf* 2. run: *influxd --config ./influxdb.conf* 3. configuration file parsing fails with the following error: phofcode
1. do not set license parameter in either configuration file or environment variable.
2. run `service influxdb-meta start` in case of meta node, or `service influxdb start` in case of data node, or run corresponding binaries directly.
1. start influxdb 2. fill the hard drive with data
1. write data to default database (starting using influx 0.10) 2. upgrade database and continue to write 3. change shard duration from 1 week to 3 months 4. change retention policy to 3650d 5. continue writing
1. create a subscription 2. write data at a high rate on a single connection
1. set http_proxy environment variable: export 2. try to connect to remote influxdb instance: influx -host 'remote.host.com' -port '8086'
1. install influxdb and run it 2. archive 66.9gb of data per node
create a set of dummy measurements in line protocol and import them to influxdb: phofcode and phofcode now query on that data using regular expressions for measurement names like so: phofcode
perform the following query from the shell: select p from (select p51 + p55 + p57 as p from l11)
1. enable the telegraf plugin (i was using telegraf when i ran into this issue) 2. on the influxdb client (same issue on http api too) say 'use telegraf ' 3. confirm that a simple query works: select * from ntpq 4. the following queries must either work or report errors, but they do neither: - select host from ntpq - select "host" from "ntpq"
1. curl phofurl -o noaa_data.txt 2. influx -import -path=noaa_data.txt -precision=s
1. create user ** admin ** with password ** pass ** as admin 2. set **http auth to true** 3. try to call: `curl -g " phofurl --data-urlencode "q=show databases"` `curl -g " phofurl -u admin:pass --data-urlencode "q=show databases"`
1. configure inflxuxdb to run as collectd server 2. send collectd data to influxdb 3. observe influxdb log
1. create database "with space" 2. use "with space"
1. start the container 2. load in the noaa sample data via the http api 3. sit back and wait
1. upgraded my server from 1.2.4 to 1.3.4 2. server started getting killed by the os due to oom 3. added 50gb swap file just to get version 1.3.4 to load 4. verified that it used almost 30gb of memory (18gb swap plus all resident memory on my vm) but was working as expected, returning valid results and accepting writes.
6. downgraded version 1.2.4 and verified that it used less than 3gb of resident memory and no swap and still contained correct data.
1. push some data with the 'cpu '-plugin of telegraf to the db 2. query this data 3. resulting field data types vary in a single column from row to row
`curl -i phofurl -u root:root --data-urlencode "q=create database mydb"` 2.
`curl -i -xpost ' phofurl -u root:root --data-binary value=25 3.
`delete from temperature where instrument_id= '1 ' and time > phofcode
i have multiple dbs all of the same type on different vps.
i have a "create script" where i replace {database} with the name i need and it does: `create database "{database}"` `create retention policy "1h" on "{database}" duration 1h replication 1 default` `create retention policy "2d" on "{database}" duration 2d replication 1` `create retention policy "4w" on "{database}" duration 4w replication 1` `drop retention policy "autogen" on "{database}"` `drop "default" on "{database}"` after that it creates identical continuous queries to downsample data into the different retentions.
consolidate 15m from "1h" into "2d" and consolidate 2h from "2d" into "4w".
on the vps where there is only a single database everything works flawlessly.
now have one vps where have three databases as they don 't receive data with such a high frequency.
however only one initially created has data in all 3 retentions.
the other two receive data allright into "1h" but other two retentions remain empty, thus suspect that cq of other two databases are not running.
checked `/var/log/influxdb` but it 's empty.
in order to recreate the issue, create a docker-compose file like that: phofcode and fire up the stack... phofcode
1. insert two or more points into the database.
phofcode 2. execute the query.
1. create an admin user containing non-ascii password (e.g.
`influx`) 2. try to authenticate with cli or url basic auth phofcode
1. insert some data around the shift from normal to dst.
2. query using a grouping that causes one of the buckets to fall exactly on the switch.
the easiest way to do step 2 is to use `group by time(2h)` since the dst switch happens at 2 am in us.
in other time zones where boundary may fall on a different area, other groupings may pop up as problems.
this also does not appear happen when bucket does not land directly on edge between time zones.
so a grouping of `1d` ends up being fine and was primary mode that this was tested against.
1. create a continuous query using a time zone with `group by time(1d)`
start influxd on remote machine start influxd on local machine run backup service on local machine to backup remote database phofcode
1. start influx cli phofcode
1. insert data with unicode characters and random time phofcode 2.
`select count(*) from "test"` 3.
1. pull latest phofcode docker image, run on ubuntu box and assign 8gb of memory: phofcode 2. use the following client phofhyperlink to push data to influxdb.
the client fetches real-time data from a nats.io server via subscriptions.
below is the stack trace of the error: phofcode 3. trying to push any other data to influx via curl also fails: phofcode
once in every insert operations, i get an error without a description / message / stack trace 1. use many times, eventually i get an error.
1. configure influxdb to use `index-version = tsi1` and start `heapster` service (with no database existing yet) 2. wait for create db and pushes from `heapster` 3. query for expected datapoints (e.g., `select * from where type = 'node ' limit 1`).
1. create a continuous query with a group by period of either 1w or 7d 2. check the downscaled data and note that it is missing data
"docker pull " 2. docker run -d --restart=always --name influxdb -p -p --link=kapacitor -v -v -v 3. docker exec -it influxdb /bin/bash 4. influxd backup -database telegraf /tmp/telegraf 5. influx -precision rfc3339 connected to phofurl version 1.2.2 influxdb shell version: 1.2.4 6.
> drop database telegraf 7.
> exit 8. influxd restore -database telegraf -datadir /var/lib/influxdb/data /tmp/telegraf restoring from backup /tmp/telegraf/telegraf.
* unpacking unpacking 9. influx -precision rfc3339 connected to phofurl version 1.2.2 influxdb shell version: 1.2.4 10.
> show databases name: databases name ----- _internal 11.
> exit as you can see no database telegraf restored.
1. insert data at a high rate 2.
`select * from test where time > now() - 100ms` script for # 1: phofcode
1. insert data with different tag values.
1. upgraded from influxdb:1.2.2-alpine to influxdb:1.3.0-alpine 2.
13.5 hours later, all requests to one of my db 's resulted in error 500 's [httpd] - service_metrics +0000] "post http/1.1" 500 20 "-" [httpd] - service_metrics +0000] "post http/1.1" 500 20 "-" [httpd] - service_metrics +0000] "post http/1.1" 500 20 "-" [httpd] - service_metrics +0000] "post http/1.1" 500 20 "-" all other db 's continued to work.
nothing else was logged before or after the error 500 's as the the cause of the issues 3. restarted container to restore everything working behavior
1. get influxdb docker image v1.3.0 phofcode 2. start the image phofcode 3. start the cli phofcode 4. paste the following commands into the cli phofcode
extensive comments posted at phofurl cmdline used: phofcode
1. insert 2 groups of point data into the database.
- group 1: sampling interval = 15mins.
that is, the point data are in timestamp order of 00:00, 00:15, 00:30 and so on... - set2: sampling interval = 30mins.
timestamp will be like 00:00 00:30, 01:00, 01:30 and so on... **sample data set:** phofcode note: you can use the nodejs influxdb driver to insert the data above.
dataset screenshot phofhyperlink 2. do a select query with group by time and fill(linear) option.
phofcode 3. influxdb returns http code 200 (ok) but invalid json.
influxdb admin result phofhyperlink if a curl command is used on postman you get **_unexpected 'j'_** postman-screenshot phofhyperlink
> create database testdb > use testdb > insert load=2.0 > insert load=3.0 insert load=1.8 insert load=2.8 load=1.0 load=3.1 now select using an `as` alias, which works exactly as expected: select load, host_name as host from example name: example time load host ---- ---- ---- 2 "host_1" 3 "host_2" 1.8 "host_1" 2.8 "host_2" 1 "host_1" 3.1 "host_2" but, use this query in a subquery and try to group by `host`.
select mean(load) from (select load, host_name as host from example) group by host
1. insert test v=1i 0 insert test v=2i insert test v=3i 2.
`select difference(v) from test order by time desc`
1. set up telegraf on windows with these lines in the config file phofcode tested the config.
output like: phofcode 2. setup influxdb as usual and "write" is using "`http`.
1. follow the directions on the installation page phofhyperlink to add the influxdata repository.
1. follow the directions on installation page phofhyperlink to install telegraf.
#### 1. write some data phofcode #### 2. run a `bottom()` and `top()` query with no tag argument `bottom()` returns nothing, but `top()` returns results.
phofcode phofcode #### 3. run a `bottom()` and `top()` query with a tag outside the parentheses `bottom()` returns nothing, but `top()` returns results.
phofcode #### 4. run a and query with tag argument both and return results.
gopath=${pwd} go get golang.org/x/sys/unix go get github.com/sparrc/gdm go get ( cd gdm restore ) go clean install
1. run `influxd backup` for any database
1. the only difference between these two commands is the '# ' character in the measurement name.
not a single error/exception when inserting them.
phofcode 2. check measurements phofcode
1. show tag values from cpu with key in (host) 2. compare this between v1.3.0 and v1.2.3.
1. enable collectd service in influxdb 2. enable df plugin in collectd, configure collectd to send data to influx collectd service 3. check measurements created in influxdb 4. use types.db with: `df
1. clear data and wal directories 2. start influxdb 3. let it run for a while 4. this error starts to appear on the log phofcode 5. leave it running for 6 hours, and it consumes 100gb of space
1. insert point which has a timestamp > now().
`test,id=123 value=2 2. try to delete this point.
`delete from test where time > now()` or just `delete from test` 3.
`select * from test` to see that the point is still there
clean databases and wal directories start influxdb let some metrics be captured stop influxdb start it again (out of memory error)
1. we feed influx with statsfeeder data from vcenter.
this data is stored in a database named statsfeeder 2. connection command: influx -precision rfc3339 -database statsfeeder 3. successful example: phofcode 3. crash: phofcode after this in syslog apears: phofcode
once a time period is impact, i can reproduce at 100% the behavior described below, however, it is still unclear on what triggers it.
on the impacted database, during on one of the period impacted: the following query return a count of 81252: select count(*) from cpu where time >= and time < while this query return nothing at all: select count(*) from cpu where time >= and <
1. leave running 2. system runs out of disk space
1) insert data into influxdb 2) reliase that some of that data is wrong 3) delete some of the data from a series from a specific time period 4) confirm data is gone with select query 5) use a web application such as grafana to view that time period 6) see returned when "zoomed out" 7) narrowing returned to a small time window shows no problem.
1. select a range of time series values from a measurement select * from measurement where mac = many more values 2. delete all values after a specified time delete from measurement where mac = and time > 3. examine the remaining values, notice the value that should not remain (**emphasis added**)
* create an empty database named 'test ' * generate some test data phofcode * upload data to influxdb over http api phofcode
1. use noaa_data sample data like in docs.
2. perform a query with a where clause and a function.
in my case: phofcode i.e.
rougly "amount of time between water levels that are above 9.5 feet".
3. now try to get the sum of those values using subquerying: phofcode
1. output the configuration file and change `query-timeout` to `200ms`.
2. create database and write to it.
4. create database again and write the same data to it.
5. perform a query that should go over the 200ms.
6. you must get from step 2 to step 4 really quickly.
1. populate database phofcode 2. execute a query with aggregate functions and a query with aggregate functions and some arithmetical operations phofcode
1. insert data with an interval of 1m, but start 30s after a full minute example: insert data at 2.
`select mean(value) from data where time <= now() group by time(1m)`
please see the two queries below.
this is counter based data that i collect to track bandwidth utilization.
> select inbytes as inbytes, outbytes as outbytes from data_usage where time >= and time <= and account_id='2265' group by * order by time asc name: data_usage tags: account_id=2265, (2265), (1), data_type=surfer* speed (474) time inbytes outbytes ---- ------- -------- this appears to be incrementing correctly and as expected.
now here are the results when i run a 'difference' query.
select difference(sum(inbytes)) as inbytes, as outbytes from data_usage where >= and <= and account_id='2265' group by *, time(1m) order by asc name: data_usage tags: account_id=2265, (2265), (1), data_type=surfer* speed (474) inbytes ---- ------- -------- you can see there are two majorly different calculations within the data, one where it rocks up to an unrealistic high value, and then flips in the other direction.
i'm guessing issue here is 'sum' call inside difference function, but i did not see this kind of behavior prior to 1.2.x.
my expectation in this call was that data would be grouped uniquely, and sum would not overlap boundaries (e.g.
it would never sum data from same timestamp in two different groupings.)
my only guess here is that this is what happening.
test data: phofcode query: phofcode
we have some planned energy production processes that have plannings.
we are injecting the forecasts up to 5 days in advance.
the day after is always filled with non-zeroes data and the last 4 days are often zeroes.
exemple: on the 22nd (@14:00), we are filling the data for 22nd midnight to 26th midnight.
the 22nd and 23rd are filled with non-zero values and 24, 25 and 26 with zeroes.
on 23rd (@14:00), data for 23rd 24 updated with non-zeroes 25, 26, 27 filled zeroes.
it is quite difficult to reproduce because it seems to be dependent current server date/time.
when writing window is getting on "summer time" change (march 27th this year) zeroes not overwritten we get duplicate data into measurement.
when selecting data, if 27 is not in selection, only zeroes selected otherwise, both are.
remark: it more visible zero non zero values, but could potentially happen any value.
1. start influx cli shell from - say - an interactive bash session 2. hit ctrl+z (which instructs your terminal to send sigtstp to the influx shell process) 3.
1. show there are no series prior to executing commands ~~~bash $ ./influx -execute 'show series ' -database=opentsdb -precision=rfc3339 key --- ~~~ 2. post the following payload via ** opentsdb ** api.
note the values for the tags `apple` and `a foo` ~~~json {"metric":"test.cpu", "timestamp": "value":18, "tags": {"apple":"orange", "a foo":"bar"} } ~~~ ~~~bash $ curl -x post -h "content-type: application/json" :4242/api/put -d "timestamp ": $(date + '%s '), "value ":18, "tags ": "a foo ": "bar "} }" ~~~ 3.
~~~bash $ ./influx -execute 'show series ' -database=opentsdb -precision=rfc3339 key --- test.cpu,apple=bar,a foo=orange ~~~ 4.
~~~bash $ ./influx -execute 'select * from "test.cpu" \' -database=opentsdb -precision=rfc3339 name: test.cpu time a foo apple value ---- ----- ----- ----- orange bar 18
1. install collectd and influxdb to the versions listed above.
2. enable `loadplugin network` in collectd with typical configurations to send to influxdb in `collectd.conf`: phofcode 3. configure influxdb to receive data in collectd format in `influxdb.conf`: phofcode 4. use `curl_xml` or `snmp` plugins collectd (possibly others)
1. fill database with hour by hour data phofcode 2. make select using ** difference() ** or ** ** or derivative() , does not matter phofcode
1. start influx cli shell 2. enter e.g.
> select * from my_measurement where time > now()-1m and db='mydb';
select 1m) from measurement where $timefilter group by $interval
1. install package (`yum install influxdb`, `apt-get install influxdb`) 2.
`grant write on doesnotexist to user` 3.
`show grants for user` phofcode
open the influx cli and run: phofcode it yields no results even though no error was raised.
1. create user 'root ' with command create user <username> with password '<password> ' with all privileges 2. use this client lib to create client, authenticate and create db.
phofcode phofcode 3. run code for user root.
i 've loaded gigabytes of data, not sure i can reproduce at this time with a small amount.
but the cli vs json should show something.
1. run select query: `curl -g ' phofurl --data-urlencode "db=stats" --data-urlencode 'q=select from measurements where ne_name =~ /a3$/ and operator =~ /b$/ and time > now() - 12h group by time(30s) fill(null) '`
trying to select one timestamp : phofcode now trying with another values : phofcode it seems that when the timestamp is followed by the timestamp value + 1, the engine returns the timestamp selected + 1.
1. create example database 2. insert the following data: phofcode 3. execute 1st query: phofcode 4. execute 2nd query: phofcode
`select time, my_value, difference(my_value) from my_data group by time(1h) fill(previous)` 2. say the 1h aggregated data for my_value is [10, null, null, ** 11 ** ] 3. or with fill(previous) that would be [10, 10, 10, ** 11 ** ]
the issue can be easily reproduced using curl: 1.
[first step] curl -i -xpost --data-binary 'http_status, component=def error="error111 'connection refused \'."
1. send http/1.0 post-request with line protocol in request body to the /write endpoint
1. write some data phofcode 2. run a subquery that includes just a function in the main query phofcode (this is fine) 3. run a subquery that includes just a where clause in the main query phofcode (this is also fine) 4. run subquery that includes both function and where clause in the main query phofcode (unexpectedly - no results)
1. create a measurement starting with an underscore.
: _data 2. reading from the measurement.
: select * from _data
1. configure influxdb to use a typesdb directory in collectd section 2. restart influxdb (fails with a go stack trace)
1. fill database with more than 10000 points 2. set environment variable (the actual value is not important, just that it is larger than the number of points you want to request and larger than the default 10000) 3. query points: `http get db==default q=="select value from test_measurement where time >= and time <= and sourceid= '300 ' order by time asc"`
1. insert the following data (daily increasing values from to gist link: phofurl 2. view inserted data (for sanity check) phofcode 3. call `difference()` function: phofcode
1. create continuous queries with interval of 1 minute: phofcode 2. observe in logs, that those continuous queries are not ran that often.
3. compare last value timestamp of raw data with the result of continuous query timestamp.
follow the influxdb 's documentation.
1. every 60 seconds we run 8 queries to pull data from influxdb and present it in a grafana dashboard.
then many queries fail to render anything (including null values).
we need to see data in snapshots or chunks of time for all supported ranges in grafana (up 5 years).
[first step] docker exec -it influx bash 2.
[second step] $influx 3. type anything
1. go to phofurl and select ubuntu unstable amd64 2. press download and copy the link 3.
** write some data to a non-default retention policy phofcode ** 2.
** query the data in the `alternate` retention policy using the `rp` query string parameter phofcode 3. query the data in `alternate` retention policy by fully qualifying measurement phofcode
1. create database `test` 2. create user `tiger` with password `scott` that is allowed to access database `test` 3. enable authentication 4. authenticate with query parameters: phofcode 5. authenticate with query parameters while http basic credentials are also present: phofcode
1. influxd 2. influx_stress 3. influxd 4.
`ls will show tsi files now
1. create a backup of a database, with parameter "since" 2. stop database 3. delete existing data 4. restore backup 5. start database again 6. retrieve data by date
1. create a test database 2. populate with test data water_level=10 0 water_level=12 water_level=11 water_level=13 3. attempt to use a case-insensitive regular expression with anchors: select * from h2o_feet where location =~ /(?i)santa_monica$/
1. start up influxdb and wait.
1. generate a query with a moving average i.e: `select all_night_hrv_index from "sleep"` or even `select all_night_hrv_index from "sleep" order by time asc`
(bear with me, it has taken many, many hours to get to this point).
1. load test data (real, anonymized data): test_data.txt.gz phofhyperlink phofcode will create a 'pct_calc_test' database with a 'interfacestats' measurement.
2. calculate interface utilization using the derivative of the in/out counters divided by the interface's' bandwidth (ifhighspeed * = bandwidth in bytes), group by device and interface.
phofcode this results in incorrect percentages - easiest to catch where it's > 100%: phofcode 3. repeat the query, but specify device (agent_host) and interface (ifdescr) for one of above results: phofcode those percentages are correct.
4. examine raw data - nothing is amiss: however, a different interface on that same host is missing some field data: this seems to be cause of issues.
5. load version of test data where missing fields values have been set 0: test_data_filled.txt.gz phofhyperlink 6. calculate utilization and inspect (correct) data
i just know they are broken.
i'm not really sure how yet.
1. set a `[coordinator]` / `query-timeout` in the influxdb configuration (for example `"0.01s"`) 2. execute a query with a regex measurement, for example: phofcode
1. write data to influx 2. perform queries with different group by time intervals on 1.1.1 and 1.2.0 version of influx
two measurements, m1 and m2 with same fields: a and b. these are fields, not tags.
1. select "a","b" from /m1|m2/ =>empty 2. select a,/b/ from /m1|m2/ => correct result for b 3. select /a/,/b/ from /m1|m2/ =>correct result a,b
1. create a database with a retention policy called `first` phofcode 2. create the same database with a retention policy called `second` phofcode
1. install influx as instructed at phofurl i.e.
`wget phofurl && sudo dpkg -i 2.
1. write some data: where `color` is a tag and `value` is a field.
phofcode 2. run one query with a subquery and `group by *` in the main query: phofcode 3. run another query with the same subquery and `group by` a specific tag key in the main query: phofcode
1. start with a clean database 2. insert an hours worth of second resolution data 3. query 1000 data points with offset 0 and the start time equal to the start time of the data 4. query the same 1000 data points, but with a start time a few weeks or months earlier and offset equal to number of seconds difference between new start time and in 3 above
1. startup influxdb and create a database.
`curl -xpost " phofurl --data-urlencode "q=create database "test1 ""` 2. add content to create measurement.
`curl -xpost ' phofurl --data-binary value=0.64 you should see the /var/lib/influxdb/data directory with test1 and _internal sub-directories.
3. execute 'drop database ' without a name specifically like the following: `curl -xpost " phofurl --data-urlencode "q=drop database " ""` no error is returned or logged but the entire /var/lib/influxdb/data is gone (including _internal).
i have an instance for testing and it has a lot of databases and shards.
this database is tested rarely, making it full of expired shards.
with the latest master, i ran into this issue.
so, if you have at least one of the following conditions, this could also happen to you: 1. have more than one database or 2. deleting more than one shard group at once
1. create database sandbox 2. use sandbox 3. insert some data insert m1,t1=aa insert m1,t1=aa insert m1,t1=aa m1,t1=aa m1,t1=ab m1,t1=ab m1,t1=ab m1,t1=ab 4. run these queries a) select t1,max(f1),min(f2) from m1 group by t1 b) select t1,max(f1),min(f2) from m1 where t1='aa'
1. install `influxdb` from the above-mentioned repo and `collectd-core` from the official debian repositories.
2. configure collectd to send encrypted packets to influxdb (see config below) 3. configure influxdb collectd module to only accept encrypted messages and give it an auth file (see config below) 4. set udp buffer sizes according to instructions phofhyperlink .
5. restart collectd and influxdb apply the new configuration.
1. create a measurement, for example "mes" 2. insert some data: phofcode 3. run the following query: `select sum(total), sum(errors) as "errors" from mes where time >= and time < group by org, time(1h) order by time desc`
1. issue "drop database foobar" statement within cli or web admin
1. install using homebrew 2. edit config file to enable admin interface.
1. we upgraded from influx 0.12.2 which worked ok 2. during startup, we have following error: phofcode
1. i need to configure two graphite listeners, one on udp (port 2004) and other on tcp (port 2003) 2. i set some env variables (not all because lots of them are defaults): phofcode 3. i run `influxd` and in logs i can see phofcode 4. if do it via config file it works
1. create docker container using influxdb image and map data volume 2. load a lot of data (i'm currently loading 8 x 1kb/100ms) 3. if load is high enough, you'll start seeing error with tsm1 adding new tsm files 4. if you stop then start the container again, you get another error (even if you got the one above first or not) on invalid files, non-existing files or similar
1. unknown, it happened randomly and unexpectedly.
1. insert some points 2. delete by a time range
1. create a retention policy with infinite duration and `1d` shard duration 2. insert data at time `0` 3. restart instance the `1d` shard duration isn 't important, but it ensures that the start time of the shard including the unix epoch will be unix epoch.
1. enable https with a self-signed certificate.
2. importing previously exported data with influx cli with the command `/usr/bin/influx -ssl -unsafessl -import -path influxdb-data.txt`
1. make backup on windows 2. restore backup on linux
1. write some data phofcode 2. use `*` in the `sample()` function phofcode
1. install influxdb with http.auth_enabled on and create admin user 2. use influx tool to authenticate using password prompt and execute query without output redirected to file
1. load influxdb http client 2. click documentation link at top of screen
1. create influxdb database via influx enterprise web console 2. create influx enterprise role with read-only permission to database in step 1 3. create influx enterprise cluster account tied to role in step 2 4. navigate to influxdb http web client and login with limited, non-admin cluster account
1. setup influxdb-server with selfsigned certificates 2. import using the -unsafessl flag: `influx -import -path=myexport -pps 10000 --unsafessl --ssl`
** write some data phofcode ** 2.
** run an `soffset` query without `slimit` phofcode 3. run an `soffset` query with `slimit` phofcode 4. run an `soffset` query with `slimit` and `group by *` phofcode
** write some data phofcode ** 2.
** run an `offset` query without `limit` phofcode 3. run an `offset` query with `limit` phofcode
1. build a docker image in which influxd is launched in background and the influx cli is used to execute a query (or import a file) 2. design a docker-compose file containing an influxdb service and other services depending on the influxdb service 3. start the influxdb service (docker-compose run influxdb) 4. stop it (docker-compose down) 5. start an other service depending on influxdb (docker compose run sut)
** write two series to a database: phofcode ** 2.
** run an `slimit` query with no `group by *` phofcode 3. run an `slimit` query with `group by *` phofcode
** create two databases and write data to them with different tag values of the `tagtag` tag key phofcode ** 2.
** query the `dog` database for tag values of the `tagtag` tag key without `on`, with `on pluto`, and then query the `pluto` database for values of `tagtag` key.
`show queries` elapsed times use incorrect units
unfortunately, i cannot give a complete example of this because it is a private project but, if needed, ask and i will try and give you all the possible information.
add an ion-infinte-scroll element at the bottom of the page and scroll down.
start with tabs starter and build for debug and production.
in case of debug the border-color styled via css variable works but in case of production apk, the css variable does not work.
> ionic start test sidemenu --type=angular > cd test > ionic serve 1. open safari phofurl 2. choose a ios user agent from "developer" menu 3. edit and add a <ion-spinner> wherever you want.
4. now in the menu click "home" "list" "home" "list" until you see the spinner gets frozen and the menu item gets with the background frozen in gray...
click pop button in example project and not console.log.
create a ionic/react starter project with sidemenu and add the following card to the `home` component: phofcode then navigate back and forth using the side menu and the routerlink on component.
install ionic react sidemenu app and check default navigation
1. download the ionic tabs project 2. add home page with button navigation to tabs page 3. add back button to tabs page
1. go to phofurl 2. navigate in browser pane to phofurl 3. click button "to root" 4. page 2 opened ( phofurl in console pane you could see the warning.
* create a next.js app (with typescript in my case) * add `@ionic/react` as a dependency * import a ionic react component like `ionheader` and use it
navigate from one route to another.
on the target route, create component with ion-nav, set root and push another component to that ion-nav.
click ion-back-button on that newly pushed view.
phofcode this generates a `app-debug.apk`.
if you do phofcode it properly generates a release apk
create ionic tab application, select ion-tabs from your class then create a dynamic way of changing tabs without clicking the tab icon.
in my case i used android hardware back button
create `<ion-select multiple="true">` with number of options - then select enough so they wont fit in one line.
i was *not able* to reproduce the issue using this ionic angular stackblitz (using test bugsnag account): phofurl - i believe this may be related to the change detection strategy or some similar setting...
use the code: `<ion-button expand="full" fill="outline">the sad button</ion-button>`
create an app that tries to use the `getselected` methods from `iontab`
make sure ionicmodule.forroot() is just called once.'
chrome (mac os x 10.14.6): executed 1 of 6 success (0 secs / 0.465 secs) warn: 'ionic angular was already initialized.
make sure ionicmodule.forroot() is just called once.'
(mac os x 10.14.6): executed 2 of 6 success (0 secs / 0.698 secs) 10.14.6): executed 4 of 6 success (0 secs / 0.954 secs) [web-server]: 404: /svg/md-flash.svg /svg/md-apps.svg (1.07 0.995 total: total: ``
create an app that tries to use the `ondidpresent` event as a prop on an `ionmodal`, it will fail when ts does its compile step.
create an project using "modal", emulate in genymotion (or other emulator like android studio) the device nexus 5x with this version of android: 4.4 or 7.1 (< 8)
demonstration here: phofurl change commenting on lines 39 to 41 to see the different behaviors: phofcode you can also change the mode by uncommenting lines 30 to 32 (and refreshing app).
1. start a ionic react project with tabs as the 'starter template '.
2. add the following line for each page tab component before the return statement phofcode 3. switch between the tabs.
this is what i have in my .html file `<ion-select slot="end" interface="popover" | translate}}"> <div *ngif="cities.length > 0"> <ion-select-option *ngfor="let city of cities" [value]="city.id"> {{city.name | translate}} </ion-select-option> </div> </ion-select>` and this is what i have in my .ts file ` onclearfilter(){ false}); }`
you need to add an `ion-slide`, fill one slide from content and add a button at the bottom, so you'll need to scroll to the bottom of the slide to see the button.
you have add following style in slide style scss: phofcode
put an ion-select on the page and select one of the options.
1. initialize an ion-input on the page.
2. listen to the ioninput event.
3. inside the inputinput event, set the input 's value to a trimmed version of its own value.
repo : phofurl 1. download above repo and switch to picker branch 2. click on go to form page.
3. open any ion-select and select any of the item from list.
1. press enter again and again after opening the picker.
set --background-focused property to any color (other than primary) for ion-fab-button
add an ionbackbutton to the page, give it a default href, navigate around the page, click on the back button.
note that it goes to the default href.
see stackblitz for this example.
assuming a 3 item list: 1. drag item from top position to bottom position slowly.
note that the change should be from 0 to 2, as 0 is the first element, and 2 is the last.
2. drag item from top position to bottom position quickly.
note that the change should be from 0 to 2 again, but is instead 0 3 because while item is being dragged, it still considers that in list in its original order.
as noted above, this is tricky, but i do know what the problem is, so see below.
- create a page with a collapsible header - create another page (also with a collapsible header) with an ion-back-button, but ion-buttons is placed in the primary slot - navigate from page one to two
place a collapsible header in an otherwise empty ion-content, run it on an ios device and try to scroll the page until the point where the scroll header should be hidden and the main header should be visible.
on any of the sample apps, replace `<ionpage>` in one of the tabs with `<div>`.
when the user clicks the iontabbutton to switch to that tab, it silently fails to switch.
(however, if user navigates directly to tab, it will render properly on page load.)
ionic cordova build android --prod
deploy the react code example code on the ionic framework api page: phofurl click the button 'show toast 1' or 'show toast 2'.
wait for the toast to dissappear or dismiss it.
click same button again - toast does not reappear.
phofcode please add the following code block to main.js phofcode buld the app and run on android 5.1
i have just done prod build i.e.
ionic build --prod --release and deployed to aws
1. in ionic native app on ios (that has menu with "reveal" type) navigate forward to a child page so that back button is displayed.
2. click on the back button (animation starts) and then while animation is still in progress click on the menu 's hamburger button (menu animation starts).
3. try clicking on the menu button to open the side menu once both animations finish.
- create an application - on one component disable the menu with based on a condition.
- once condition has been met be navigated elsewhere with - sidemenu will still be disabled
1. add <ion-img src=" * url * "> to your vue page or component 2. run ionic build with `"ionic:build": "vue-cli-service build"` 3. run `"cap-copy": "npx cap copy"` 4. run app in android studio to start app on your real device (mine was huawei p20 lite) 5. check if img is shown
to illustrate the problem, i have taken the sample starter tab app of ionic and extended it with a second tab page.
this is the setup: first tab page (tabspage): * /tabs/tab1/ * /tabs/tab2/ * /tabs/tab3/ second tab page (othertabspage): * /other-tabs/other-tab1/ reproduce the problem like this: open tab2 click button ("open nested tab") to go to new page (other-tab1) now click back button on top left, you will end up on tab1 instead of tab2
clone the test repo: phofurl run `npm i`, then `npm run start`.
open test page from the menu.
if you open the console, you'll see that `ionviewdidenter` event fired only for the component d, and not for other three components.
similar behavior can be seen, if you wrap testpage in `withionlifecycle` - only page will fire event, and not components inside it.
very easy to reproduce: 1. assuming you are starting from page 1, use the button on the bottom to go to page 2 2. use the button on the bottom of page 2 to go back page 1.
3. the app will crash.
you can also start from 2 and it will crash when you return 2.
1. run `ionic start` and choose react as your framework 2. select the `side menu` template (which comes with an `<ionlist list="none">` by default) 3. when the project has been created, run `ionic serve` 4. notice that the `<ionlist>` still shows lines under each item in the side menu, even though property `list` is set to show `"none"` (no lines) screen shot at 1 53 25 pm phofimage
phofcode phofcode and phofcode work fine
src : phofurl apk: phofurl open below apk in android phone and try to close with back button.
1. enable ios mode 1. go to `/tabs/tab1` page 1. tap button `tab one` 1. tap link `navigatebyurl page1` phofurl phofimage
in our code we have a global loading status in the redux state, and the loader uses that to control whether or not it is displayed.
this generally works ok when it is shown, then some time passes, then it is dismissed, but if we show it and then immediately dismiss then will stay on the screen.
for the other issue, have some code that displays loader with `isopen` set to true, waits a little while, and changes `isopen` to false.
before loader is displayed on screen, switch to a different tab, wait a little while and switch back.
you may find that still displayed.
1. make first page 2. make second page 3. routing pages like phofcode 4. access the first page with query parameters `/users?name=test` 5. push the second page `routerlink="/users/1"` 6. the query parameters are gone
link to repo: phofurl 1. run app.
you will start on the page a.
2. click the + icon in the fab button.
this will bring you to page b. notice the ionbackbutton that is visible.
3. click "go to child page".
this will bring you to page c. 4. click ionbackbutton.
this will bring you back page b.
5. notice that ionbackbutton on b no longer shows up.
it is still in dom, but has `display: none` set.
1. just create a new app follow the instruction: phofurl 2. change the codes as described on above page.
4. click the plus button, navigate to the newitem page.
6. click back arrow back to home page.
7. click plus button again.
i just created blank app using ionic cli, and used code below, which contains two pages, home page and first page.
1. open app ( which will open home page by default ) 2. go to first page 3. use back button inside first page
screen recording at 7 49 49 pm phofimage
in there are ion-item with ion-label and ion-radio.
it should reproduce with any multi-page application.
- take an ion-select - do an api call (or big delay) to fill in the select options and the default value - this bug can not be reproduced in the browser, it needs to be on android or ios - chrome shows the bug on mac os when an android or ios device is selected in dev tools
try to use ion-split-pane with ion-menu normally.
1. clone repo phofhyperlink 2. npm install 3. ionic serve open console to check the tabs exception being thrown by the tabs.entry.js file.
the image is fetched from a rest service, the response is taken and just like it comes it passed onto a component variable which then is used in the components template
make a simple app with multiple ion-slides.
put an html5 audio player with the controls attribute set on each slide.
the first slide will show an audio player with pause/play button, and the time control slide.
subsequent slides will briefly show the time control slide, but it will disappear leaving only a play/pause button.
detailed description: phofurl phofhyperlink repository of related code: phofurl phofhyperlink phofurl phofhyperlink
1. in stenciljs add ion-router: phofcode 2. try to navigate to "/home?p=1"
1. make an app with nested routes.
2. push a page 3. pop the page with `history.goback()` 4. push the page again then, a blank page will be shown.
start with the react tabs project, add the ionmenu portion.
notice that the menu icon does not appear in the header and you get a warning in console that `menuid` is now deprecated and you should use `containerid`.
i did try to update code to use `contentid="first"` and then added an `id="first"` to menu `<ioncontent>` element.
that removed warning and icon actually appeared but clicking button didn 't do anything.
i 'm sure i 'm just missing something from docs but it 's not entirely clear how to add a menu item a page.
- create infinite scroll example according to the official documentation ( phofurl ) - run on apple ios device as app with most recent ios version - scroll down to load more data - the view jumps back to the top as soon as data is added to the view
1. access phofurl 2. click tab2
take the generated tab app and do the following
phofurl 1. clone 2. npm install 3. run it using android emulator (api 28)
1. pick up the picker column.
2. move it to the option to select.
3. release the picker column while not moving the finger up or down.
start a sample project and put my code with some sample data.
and run it in ios device.
create a react tabs app, make sure you are on android or emulating android, click the tab2 button in the tab bar, click details, click the tab2 icon again in the tab bar (the page will navigate back), then click details again, details page will be hidden.
the problem doesn 't exist on ios.
1. ionic start myapp sidemenu 2. ionic g page popup 3. after the homepape page card, we add <ion-button color = "primary" (click) = "loadpopup ()"> load popup </ion-button> in home.page.html in home.pase.ts: public loadpopup() { tthis.presentmodal(); } async presentmodal() { const modal = await component: popuppage }); return await modal.present(); } 4. in home.module.ts we import popuppagemodule, as indicated in the documentation of ion-modal / ion-modal-controller (lazy loading): import {popuppagemodule} from and add popuppagemodule to imports array.
now, clicking on the home menu option, the popuppage page is loaded, instead of homepage.
put an ion-slides with 2 or 3 photos in a modal page and present it, try to drag left or right, you will get stuck between photos.
before open: 1. have an `ion-list` with `ion-item`s containing `ion-item-options` on the right side of the screen (i.e.
you swipe left to reveal them) 2. if you repeatedly tap on the far-right side of the screen and trigger right-most `ion-item-option` will eventually be triggered.
before close: 1. have an `ion-list` with `ion-item`s containing `ion-item-options` on right side of screen (i.e.
you swipe left to reveal them) 2. swipe to reveal options of one item.
3. tap another item (to trigger "close" transition "open" item).
4. quickly tap in area where options were visible.
they can still be triggered for even a couple hundred milliseconds after it appears "closed" here 's a video reproduction: phofurl notice that i can trigger color picker even though item appears closed.
using the sample application, select one of the list items and watch the background of the footer on page.
1. create animation with several elements 2. open in safari (css animations only) 3. record timeline and run animation 4. notice the number of raf calls that are made
1. create an animation with infinite iterations 2. open dev tools and record timeline 3. play animation 4. notice on timeline that `settimeouts` are created for the animation
unfortunately there 's no easy way to reproduce the problem.
i suppose this may have something to do with android 6 but i 'm not sure about that.
just wondering if anybody else has experienced the same issue or if anybody knows what could be wrong and how it could be fixe
create a ion-item with a checkbox at start with a label
`npm start` 4. steps 2-7 from
1. add `ion-alert` with inputs 2. run the app on ios and open the keyboard by focusing on the input field of the `ion-alert`.
i see this issue on all my slide input fields since ios 13 (also 13.1), tested iphone7 device and iphone 8 / 11 pro emulator.
android, all browsers and ios12 works fine.
trying to workaround this issue, the only way i could make the cursor appear was setting position:fixed on the parent element
you can try it on my beta website: phofurl visiting in on mobile
i haven 't touched my app for long so it 's difficult to say how it happened.
i haven 't even changed anything.
1. create split pane app 2. add large title 3. run on device where split pane is visible and try to collapse the header
* create new ionic app * subscribe to the pause and resume events and console log ngzone.isinangularzone()
- create a stencil component which uses shadow: true and custom styles - use an ionic component somewhere within the render function - note: the issue only happens with ionic components which use shadow: false (eg.
ion-list) - integrate the component into a vue app which uses @ionic/vue
- start app on home page - click on button on homepage at the bottom "list" - navigated to listpage - click on "item 1" navigated to homepage ->
imagine an ionic/stencil component, such as refresher.
use it in this way phofcode , where slot is a variable defined as ` 'fixed '` in the component class.
you can also directly set: phofcode while this works in android and the web without problems, in an iphone or iphone simulator i will get the following error: `[error] - make sure you use: <ion-refresher slot="fixed">`.
the refresher does not work at all on this device.
the only way to make the refresher work on ios is following: phofcode it is not nice to use constants within templates, thus i usually use variable binding for all input properties.
as this does not work on ios, i consider a bug.
if is not a bug, probably docs would need to specify that properties need to be constants within template?
i suspect issue has something do with change detection.
the component probably initialized before property variable passed and thus property ignored.
<ion-radio-group disabled> <ion-radio value="-1"></ion-radio> <ion-radio value="0"></ion-radio> <ion-radio value="1"></ion-radio> </ion-radio-group>
generate new sidemenu app and run on android 5.1
start a new project on a page, put the code below
create an ionic app with the ios platform and add an ion-menu that includes an ion-item that uses routerlink to navigate to another page.
create an empty page with the above ion-textarea code.
see warning appear in the console.
in a stencil app define your `ion-router` with different routes and `ion-router-link` to navigate between.
(see example code below on repo)
create a popup with this template : ` <ion-header> t t <ion-button expand="block" appnodoubleclick color="light" | translate | uppercase}}</ion-button> t </ion-header> <ion-content color="primary"> t <ion-list> t t <ion-item *ngfor="let item of t t t <ion-label>whaat?
{{item}}</ion-label> t t </ion-item> </ion-list> </ion-content> <ion-footer> <ion-toolbar> </ion-footer> ` invoke it: phofcode try to scroll with the mousewheel on chrome (latest version).
then remove the ion-header and ion-footer, and it works.
phofcode ionic: ionic cli : 5.2.6 pm ode_modules ionic) ionic framework : @ionic/angular 4.10.0 : 0.801.3 8.1.3 @angular/cli 8.1.3 @ionic/angular-toolkit 2.0.0 cordova: cordova cli 8.1.2 (cordova-lib@8.1.1) cordova platforms not available cordova plugins not available utility: cordova-res not installed native-run 0.2.6 system: android sdk tools 26.1.1 nodejs v10.16.3 (c: program files odejs ode.exe) npm 6.11.2 os windows 10
start project and then refresh home page
<ion-tab-bar in the template and tabslotposition set to 'top ' in the component.
sample code below, just the default example from the website.
phofcode 2. put input area at page moved by push.
phofurl slack chat reference with @manucorporat: phofurl
insert a ion-progress-bar to your page.
open a new page from the page.
go back to the previous page using the back button.
the progress-bar will stop animating.
tap twice on a tab in a tab bar or open a page from a side menu and then open the side menu again and open the same page again.
then open page from the selected page.
you can just use the ionic tab starter, add new page and navigate to this new from within one tab.
it will work, but if you go back and tap another time on tab then new back button is disappeared.
sample app: phofurl note there are two `ion-list`s with a direct child `ion-reorder-group`.
the difference between the two is that one uses `ion-item` as a child, the other a custom component.
the `ion-item` version works fine, but the custom component version does not.
create a `ion-range` and append `ionchange` event.
create an empty ionic project, `ionic build --prod` and take a look at the common-es2015 file
phofurl 1. open datetime picker, change value and select 'cancel '.
2. datetime displays original value (10:00), which is an expected behavior.
3. open datetime picker, change value and select 'cancel ' again.
4. datetime displays the changed value.
add a property named `mode` to a component and check its value in dev & prod builds: phofcode
we can found this by checking platform.is() phofhyperlink in desktop browser, device browser i.e.
"mobileweb" and in ipad, iphone or android
run ionic serve, and click on "present modal" button on landing page
<!-- please explain the steps required to duplicate the issue, especially if you are able to provide a sample application.
run 'ng build --prod ' and publish the project
1. create a blank app 2. create a module named menu 3. create a module named tabs 4. create 4 modules named 1 through 4 5. make the first three modules childs of the tab module.
6. make the fourth module direct child of the menu module 7. navigating to fourth page will play transition animation.
8. navigating to third page will not trigger transition animation.
- download the latest conference app as a base - integrate cordova and the ionic wkwebview plugin >= 4.0.1 - do an optimized prod (--prod) build - integrate slides as below and wait for the render problems to happen (you may need to try a few times thus i integrated everything into the schedule modal) sliderefreshbug phofimage
1. clone and serve repo below 1. visit all three tabs (or at least tab2), but leave the menu on tab2 closed 1. go to tab3 or tab1 1. swipe from the left go to tab2 note that the menu is open even though we did not swipe on * this * page
1. scaffold the new app with the side menu template 2. install capacitor cli and core 3. run the app in a real device via xcode 4. swipe left to right in the main home pag
n/a just want backwards compatibility (ie there should be an option to allow datetime to behave as it did before all the changes with respecting timezones).
1. get a windows machine if you don't already have one... :) 1. clone the app below on your windows machine 1. npm i, npm serve, etc 1. load app in chrome, edge, and ie11 note that the paragraph in chrome and edge is blue.
in ie 11, it is still black, and the styling of the header bar is also messed up.
the easiest way to reproduce is with a "not found" route that matches anything.
this is included in the stackblitz below.
- clone this repo: phofurl - run `npm i` - run `ionic build` - run `npx cap sync android` run `npx cap open android` on the device, click any of the items on the main home screen (after the tutorial) focus on `ion-input` on top of screen ("click here to focus input") tap navigation back button on header toolbar of app bug happens, also when you tap "yes" you return to previous screen which is empty because it 's virtual scroll
add virtual scroll and add image inside each item, then scroll trough to see wrong image displayed for short time.
1. render modal from parent with conditional 2. set conditional to false (see stackblitz)
open the sample with google chrome 71 on android.
- in an app with ionic 4.9 and wkwebview plugin >= 4.0.1 - create a modal dialog with enough content to enable scrolling.
- scroll, and close the modal.
- you can observe that the page beneath has also scrolled down
in the form below, press the "enter" key and observe that the form does not attempt to submit.
phofcode in a typescript aware ide, you will see that the `htmlfor` is underlined and generating the error: phofcode
1. create a page with anchors using `routerlink` with `fragment` directive to different sections.
2. try clicking on anchors.
1) create a new ionic 4.x application.
2) create a fab container with a fabbutton and a fablist with buttons inside it.
and use viewchild to get reference from the fabcontainer.
4) use the fab container activated property as render condition to any element on the template.
show the loading and run the http fetch.
after the promise resolve or reject, i need to hide the loading
add a custom back icon through the config.
the icon hasn 't changed.
use the control type ion-select with interface="popover" and dynamically render the same control type ion-select 5 times in the web page with each element having 1500 options.
in our ionic/angular application we are seeing a quite strange behavior and are not able to solve it.
when we navigate in our app to e.g.
this route: ` phofurl and wether if we route in our html like or in the component over { relativeto: this.route});` then it adds 'add-report ' to the route, so the route looks like this: ` phofurl but the component is not loaded and not displayed.
either if we use routing like: `{ path: ':projectid ', component: children: [ { path: 'add-report ', component: addreportcomponent } ]` with a `<router-outlet>` or router-module, it is not working.
if you need more information please ask.
- create a new ionic project with a simple menu or blank start page - on any page, add a link to a new page - on this new page, add tabs with an `<ion-back-button>`
1. create a html page with <ion-input> 2. it 's component.ts file at the init
run the program on ios and android.
i get two completely different results.
app.component.html: <ion-app dir="rtl"> <ion-router-outlet </ion-app> home.page.html: <ion-fab vertical="top" horizontal="start"> <ion-fab-button size="small"> <ion-icon name="menu"></ion-icon> </ion-fab-button> </ion-fab>
- create a new project: ionic start fixedpostest tabs --capacitor - on tab3, i added a div to the ion content tag with class="floating-button" and some random text - in global.scss i added: ` .floating-button{ position: fixed; bottom: 20px; right: 20px; background: red; }` - run project in chrome, show the mobile layout and switch orientation
the following snippets demonstrate the problem: html <ion-list class="scroll-y striped" <ion-item *ngfor="let item of filteredlist; let zi = index" <ion-label>{{ item.fullname }} - id: {{ item.id }}</ion-label> </ion-item> </ion-list> component: async beginreport(item: group) { } output js: return "click" === n && (t = !1 !== && t), t this code works in debug builds.
when built with --release, the term "l.component.select" is undefined.
"l.component" corresponds to "this", and all the expected local variables exist.
however, there 's no "select" property in the object or prototype.
create an ion-item-sliding with two ion-item inside it which you toggle with an *ngif
to reproduce all i have is a map with the sliders on top of it.
from there i have a listener "map.on" for and
1. use an `ion-searchbar` inside a tabs page 2. click on the searchbar so the keyboard opens 3. click on an `ion-item` in the search 4. app routes to detail screen 4. tab-bar stays in the middle of screen
step 1: select an input step 2: click ion-select
just run the following application in an android device, open the console inside the inspector and trigger the keyboard directly from code.
copy the code below into your @ionic/react project and run
create a project with the ionic start command and just add a button
create ionic project with @ionic/angular@4.9.0 version create popover and then try to open popover twice
- open the app and click the login button - press the device home button to put the application in background mode.
- open app from background after 20-30 second - you will see text is not rendering behind alert, also after a click on login when you come to home page, it will show blank initially
1. create an application with the newest version of ionic and cordova 5.0.1 2. create elements and associate them with touch events 3. run the app on a device that has ios 13 4. scroll, stop scrolling, and immediately touch any of the elements that react to some touch event.
- generate the ionic conference starter - upgrade to ionic 4.9.0 - swipe around and notice the issue
on master open the ion-modal basic test and add `animated: false` to the `createmodal` function.
open the test url phofurl in safari on ios (a simulator works - ios 12.2 or 13).
the modal will be inserted into the dom, but won 't display :( from initial investigation... the `.modal-wrapper` on ios seems to have a transform on it to prevent flickering phofurl when you disable animation with 0ms phofurl on ios safari it takes translate3d into account, causing modal to be hidden off screen.
create an ionic app and a button with these styles: phofcode now resize the browser window on chrome v76.
1. clone example repo 2. npm i 3. ionic serve 4. open dev-tools 5. on tab1 click on "push page with radio-group" 6. navigate back to tab1 7. click on "push page with radio-group" again 8. check console -> infinite loop
please see the demo below in
right menu bug from ios browser or running on an ios device/ simulator.
click the right menu button in the toolbar and then try and click on backdrop to close the menu.
works in browser but not on ios device/simulator or ios browser.
1. build this: phofurl 1. install on android device 1. in system menu, increase the system font size up from default a few times 1. eventually you will get the ellipses
tabs are affected heavily because all of their views are cached and reused it happens on all platforms and on both, virtual devices and real devices.
screen recording at 1 08 00 pm phofimage
create a tab view with four tab-buttons long press any tab button that is currently not active for about 5 secs then release.
create an application with two components.
navigate from one component to the other with a root-navigation and use the value `back` for the `animationdirection`.
1. start a page in small size so the ionmenu is collapsed 2. open the left menu and click something it it to open a modal 3. close the ionmodal and collapse the ionmenu 4. make browser size larger so ionmenu becomes visible 5. you should now clearly see bug in ionmenu
navigate through multiple pages and use the hardware back-button to return.
when on the root page, click the hardware back-button again multiple times.
show the loading and run the http fetch.
after the promise resolve or reject, i need to hide the loading
create a virtual scroll list with ion-virtual-scroll, create several virtualitems within that list, and add (tap)="test()" or (press)="test()" to them.
then try to scroll with touch in the chrome simulator (make sure that it 's in touch/mobile mode) by dragging on the list.
the easiest way to reproduce it is by repeatedly navigating between two pages while monitoring the dom nodes count.
simple demo app which easily reproduces the problem: ionic navigation dom node leaks phofhyperlink .
steps to reproduce inside the demo app: - open app in chrome while keeping the devtools `performance monitor` open - repeatedly perform following steps: 1. click "navigation leak" link 1. use browser back button to navigate back to homepage 1.
* optional * : press `collect garbage` button in chrome devtools (found inside performance tab) notice how each iteration of opening and closing demo page increases number of dom nodes reported by `performance monitor`: phofimage the staircase pattern seems suggest there 's a memory leak that happens while navigating between pages in an ionic app.
- create a new react based project with `ionic start sidemenu-react sidemenu --type=react` - serve the project and open in browser - click the external links to documentation in the home page - notice the url updates to ` phofurl
below is a link to a page with a bunch of components that i 've thrown all about for testing.
ui/ux designers should avert your eyes.
to reproduce this i 've just been navigating to the page and refreshing.
create a simple ionic picker and click on twice.
modals created do not animate or open properly.
using the simple tabs starter.
i 've been able to reproduce this problem.
by modifying tab2 and tab3 to include an ion-segment with (ionchange).
both do a simple console.log output of the event.
1. open the app phofurl phofhyperlink 2. open the console 3. click on tab2 and verify that no ionchange event is shown in console 4. click on tab3 and verify that an ionchange event is shown in console (unexpected).
5. restart app and open console 6. click on tab3 verify that no ionchange event is shown in 7. lick on tab2 verify that an ionchange event is show nin (unexpected).
1. create an empty component and write a basic button like this: phofcode 2. in the components definition file add this: phofcode 3. try to toggle it and check out inspector for ``button-has-icon-only`` class.
create an ion-input with type = "date" or "time" and run it on an ipad pro (device or simulator).
create a new project, add ion textarea with autogrow attribute and insert text
1 display ion-fab[edge] 2 navigation push 3 navigation pop
ionic start put `<ion-input clearinput value="clear me"></ion-input>` on html set color on app.scss: phofcode
1) set up datetime with display/picker format to `hh:mm a` 2) assign model with current utc string 3) open datetime picker and change hour
use navigation to push a page, then close it use back-button.
have an ion-toggle, set the color for the two parts (background and handle) and the two states.
the example has been stored in github phofcode and the steps required to duplicate the issue are explained in the readme.md file.
the web component has been built with @stenci/core1.3.0
transition between pages in mobile view.
1. insert an ion-refresher in a page with content in it.
2. build on ios device or simulator.
3. start pulling to refresh slowly.
4. see that the content makes a little jump before the refresher appears
1. checkout conference app, add translucent="true" to `ion-header` and `fullscreen` to `ion-content.
2. click a link to go to another back 3. go back 4. observe title is blurred until transition/animation is done
in the code example press the button `make pic three active` with the setting phofcode it will not mark the third slide as active.
with setting phofcode it will correctly mark third slide as active.
start a new ionic react app with `sidemenu` template.
add the footer after `ioncontent` in `scr/pages/home.tsx` phofcode
1. just focus-in input field.
2. without focusing-out field click on select field.
just using the sidemenu starter template with no changes at all.
tried that with capacitor and cordova, and the i got the same problem.
`ionic start myapp sidemenu --capacitor` `ionic build` `ionic capacitor add android` `ionic capacitor copy android` capacitor open android` run the application from android studio
easier to show with the navigation on the demo conference app.
1. start from a page without modals, let's say the login page: phofurl 2. navigate to the schedule page.
3. press settings button in top-right corner.
the modal will be available to user.
4. press back button in browser.
the empty frame still stays on top of application.
the issue is critical for users on mobile devices (no backdrop available to click, just a blank screen) or if `backdropdismiss` is set false.
create a blank ionic react app, and add `<notifications />` component with the code from here: phofurl
1. in any component or service, import loadingcontroller like so: `import {loadingcontroller} from '@ionic/angular ';` 2. add dependency in the constructor: `constructor(public loadingcontroller: loadingcontroller) { }` 3. add the following method to the component/service: phofcode here is a screenshot of the error in ide: present method is missing phofimage
in a stenciljs app start the app and then navigate to the button, press it and thus the lag.
- add `text-wrap` attribute to `ionlabel` - `text-wrap` attribute not in final html output
i create a popover this popover has wrong value for 'top ' on popover-content.
if i resize the screen, then the top value is sometimes calculated correctly.
the popover contains a different component, and that component contains a ion-list (not virtual) which is populated through an observable (async).
installed latest ionic cli and inited a react project using `ionic start myreactapp --type=react` then added `isplatform` to the import list: phofcode
create an application with a page rendered in a router outlet and dom elements adjacent the outlet and the ion toolbar from inside the outlet will overlap the status bar.
click the react readme link on the main readme.md page.
use 'class ' with any ionic/react component as of the version in this report.
try to execute the code below:
add alertcontroller to ts file.
example app: phofurl steps to reproduce: 1. launch app 2. touch input field - keyboard appears 3. touch button - loading controller appears, keyboard dismisses but page does not resize leaving a blank space on the page where the keyboard was until the loading controller is dismissed.
as can be seen on example app, the slide with 0 index (red background) flashes for number milliseconds, before it is set to index set in options property (yellow background)
see above, simply create and run an app using the "blank" template.
1. ionic start myapp tabs --capacitor 2. ionic cordova plugin add 3. npx cap init [appname] [appid] 4. ionic build 5. npx cap add android 6. npx cap open android 7. ru
start up the sample project, on the homepage there is an icons example section which will show 5 icons which only 2 are displaying.
in a react app, add a floating action button and set the vertical alignment to "bottom".
run the code below in two different phones: an android phone and an ios phone.
notice that, on the ios phone, the loading animation closes after 100ms seconds, while in android, it never disappears.
1) create a blank project by: ionic start androidproject blank --cordova 2) install the by: ionic cordova plugin add --variable app_id=xxxx npm install 3) ionic cordova build android --release --prod
insert a footer with a toolbar inside and execute this on e.g.
try it out by yourself here : phofurl
open an ionic app on an ipad with ios 13 (sim or native)
on ios open a modal panel and dismiss it, try to open another on android open a actionsheet and close it, try to open it again
`cordova platform add cordova-electron` 2.
`cordova run cordova-electron` 3. in` app.component.ts`
run any `@ionic/vue` app in chrome with emulation on.
toggle between iphone 6/7/8 and nexus 5x, refreshing between each toggle.
navigate through the pages in the app and observe animations on android but not on ios.
1. create a page that uses the slides component that uses a scrollbar: `<ion-slides scrollbar="true" ... </ion-slides>` 2. in page component, set `slidesoptions = { scrollbar: { } }`.
3. observe that a scrollbar div shows up, but does not function as a scrollbar and does not track the current slide.
generate new ionic 4 project with stencil.
1. attempt to create an action alert with a number of buttons that defined an "icon".
- use the latest ionic - ionic start app-test - use the navigation or tabbed template - cd app-test ionic build --prod (crelease is not necessary) serve/deploy www access root url -> works ensure that the route has been appended (like /home) refresh crash
get code from: phofurl npm init stencil ionic-pwa build steps: - npm install - npm run build - copy www folder to server
we have `<ion-button>` elements inside a `div` with some `overflow-x`
run ionic application on device with chrome version 76.x
clone this phofurl or create a brand new project with `tabs` options, edit `tab1.page.ts` and `tab2.page.ts` with this code: phofcode run the code on an ios simulator/device
go to any page with an <ion-range> on it and press the slider and make a vertical swipe gesture.
the knob will immediately move to the new position, even though the gesture is clearly not intended to do this.
0. start a new project ("ionic start myapp blank" will do as it already contains a link) and serve it.
2. close all tabs - this is important.
3. open the new project on the ipad with safari.
4. click * on * the link on the page to open it - this works as expected.
5. close new tab by either clicking back or by clicking on "close" button.
6. click * * link again to open it - nothing happens.
7. click below link - link will open...
1) create a new ionic app 2) run ionic serve 3) check out the developer tool console 4) find the red error: phofcode
it 's random, not exactly sure why appflow decides to fail with certain wifi networks and its not that the internet is not connected because everything else loads perfectly besides specifically appflow updater.
use an ion-label with position stacked nested inside ion-item
1. create a template with an `ion-textarea` in it 2. create a windows build `ionic cordova build windows` 3. run the app with visual studio 4. type in a text into the `ion-textarea`
install the latest ionic with cordova on android
`ionic serve`, `ionic build`, `ng serve` and `ng build` all give the same error.
this is the application i 'm trying to build : phofurl
- create starter app with cra - import ionreactrouter
repo: phofurl 1. clone, build and deploy the repo on an android device.
2. press the "add"-button to increase the counter.
3. press the "hardware back button" to show a toast with counter value, but content-view is not updating.
## ionic info phofcode i hope you can help me guys
1) create a new ionic react project from `blank` template.
2) replace code in `/src/pages/home.tsx` with this: phofurl
an example app has been provided (see related code) when navigating to schedule a navigateforward is triggered to simulate a fast user response to navigate forward (this could also be achieved by clicking on a session while entering the schedule page * if * there is an entering animation).
the scree-capture.webm file in the main directory shows the bug.
create a new ionic 4 project using the `tabs` template.
modify `tab2page` to have some dynamic content.
a button incrementing a counter and the value of the counter shown on the same page.
run application using `ionic serve`, click tab two, start clicking button.
the rendered counter value doesn 't change.
press f5 in browser to refresh page so that it now automatically opens on tab two.
the rendered counter value increments as expected.
see phofurl run the app in the browser and try to click the "agent" drown.
* create new ionic project (sidemenu) with capacitor * copy code below to home.page.html * build and deploy to mobile phone (android.
phofcode typescript // main.ts import vue from 'vue '; import app from './app.vue '; import router from './router '; import store from './store '; ionic '@ionic/vue '; vue.use(ionic); vue.config.productiontip = false; new vue({ router, store, render: (h) => h(app), }).$mount( '#app '); ``
migrate an app from an old version of ionic.
you can reproduce this using the sample ionic projects: start a new ionic project (for example a sidemenu sample project); - migrate to the new versions; - add capacitor to the project; - build the project as prod; - copy files to electron project; run electron app.
you will see a white page.
- create an angular application - inject ionic `structure.css` - inject `ionicmodule` - do not include any `ion-` component => blank screen add any `ion-` component => app displayed
have an ionic 4.x angular 7 application and run the update commands.
you only need the code that i leave below
declaring my slides options variable inside constructor or ngoninit
example function to load an array phofcode phofcode
just add an `ionbutton` component and set the `href` attribute.
the path should be added as a `route` within the `ionrouteroutlet`.
* create any react boilerplate.
* import @ionic/core * extend jsx namespace in react app to obtain access to html custom elements in jsx.
* ide doesn't complain for any custom elements except for `<ion-icon>` this is the snippets that fixes the behavior.
i have pull request ready to be submitted phofcode
place a logo inside the ionic header.
create a toast with a 'top ' position
1. create new ionic project 2. add ion-input type number inside home.page.html phofurl
1. create ionic starter-app 2. add " <base href="./">" to index.html 3.
$ionic build --prod --base-href=./starter" 4. deploy ionic starter-app to a subdirectory of a server.
5. visit app and reload.
6. copy and paste any route into a browser tab.
7.visit on browser, view 404 's for routes that link to images.
1. create new ionic project using
1. create an new tabs project 2. create a empty page 3. add the page as a sub page inside the `tabs.router.module.ts` file 4. navigate `forward` to the child page
0. clone sample app, cd into folder, npm i, ionic serve... 1. open the application phofurl 2. click "metagame" on the app menu 3. click "works once" 4. click the (x) at the top of detail outlet to close it (or click "metagame in menu again) 5. click "works once" --- *nothing happens* --- we should re-open detail/secondary outlet here but it does not.
"works every time" -- outlet opens like it should have.
but we should not need to specify fully qualified urls to routerlink, that 's horrifyingly leaky and a maintenance nightmare now.
in app.component.html, replace `<ion-router-outlet main with `<router-outlet main repeat steps 1-5: the outlet opens as expected.
this is a blocking bug in ion-router-outlet.
the only workaround is to hardcode fully qualified router urls in entire application, rather than properly targeting named router outlets directly via their proper relative url.
which would immediately break everything as soon as a single route in middle of hierarchy is changed.
i 'm using node 12.2.0
use ion-router-outlet and open page with routerlink="/page" step by step to open the next page.
if many pages will be slow.
i open page use routerlink="/page" if open too many pages will slow.
- create ion-item or ion-card - add (click) event - assure implicit button is rendered in dom - press item, hold and move out of item release mouse out of item (or even on item itself) -> no click triggered (correct), ripple-effect not removed (incorrect)
just write the following markup
have some view that changes when the app resumes.
add a text input on the dom -> focus -> when the keyboard opens on ios try to scroll
ionic start add `<ion-range [(ngmodel)]="distance" to the html and move the slider.
* use ionic input with any non-english input wong behavior: (@ionic/angular 4.6.2) wrong phofimage correct behavior: (@ionic/angular 4.4.2) correct phofimage
1. ionic start blank 2. ionic serve 3. ionic platform add windows 4. replace index.html base href with: `<base href="./" />` 5. replace home.page.html ion-content with: phofcode 6.
`ionic cordova run windows -- --arch="x86"` 7. type something into the textarea
for the 1. visit phofurl directly 2. a blank page is shown.
or 1. visit phofurl directly 2. a page is shown with the content missing.
navigating to either via the root page works fine.
open a modal/alert/bottomsheet and navigated back or forth from browser using browser buttons (navigation url should be of same application) .
1. clone the repo listed in
write something wrong in the ion-textarea.
- run ionic start "new project" - choose tab app - run in android platform example image phofhyperlink
1. start a new react blank project: `ionic start slides blank --type=react` 2. use the following `home.tsx` template: phofcode 3. run `ionic serve` 4. click on the "add slides" button.
1. start a new react blank project: `ionic start slides blank --type=react` 2. use the following `home.tsx` template: phofcode 3. run `ionic serve` 4. click on the "remove first slide" button.
please run the demo from the repository linked below to reproduce the bug.
1. start a blank project 2. add ion footer
1. create html template with <ion-content> 2. in between place a <ion-grid> with <ion-row> and <ion-col> 3. make a `new mutationobserver()` instance and try to observe dom change
create a form with `ion-datetime` and some `ion-input`
use this as routes for the tabs component: phofcode add multiple children, and try to navigate between them in the tab bar, nothing will happen
on this occasion i am using ion-select in a header component to present a list of languages.
when a user logs in, they may not have the full array of languages available to then you the list is updated.
i can see that in the html markup that the ion-select-options are updated but ion-items in popover aren 't.
1. create 2 pages (view and edit) 2. handle viewpage routing manually by overriding ionicreusestrategy and make sure that view handles its own routing 3. do the previously described steps 4. the view should be recreated after navigate back
1) enter a tabs page to tab1 (tab1 must have inside in it 's content a link to another page) 2) click to the link from the tab1 which opens the new page, and press back button.
it returns to tab1 page who still has the back button, everything ok here.
3) now go from tab1 tab2, and then go back tab1.
4) enter link once again in and press back button.
it returns page but it 's button has dissapeared.
install any application in some sub directory of the web server.
add an ion-infinte-scroll element at the bottom of the page and scroll down.
the function defined in ioninfinite is never called
compile an ionic app with ``ionic build -- --base-href "/subpath/"`` and put the content of the `www` folder to the subpath `subpath` of a http-server.
check if an `<ion-icon>` is visible.
i tried creating a sample app, but could not reproduce the issue.
as i mentioned, the images load fine in electron/capacitor, but do not load in native chrome.
and load better in safari, but not 100%.
* create basic ionic angular app * run it on a device * try to inspect it via chrome (open image phofimage
this is a very simple page with 1 input field, it can be tested on ios and safari and then on chrome.
inputting text works on chrome but won't work on safari and ios (even chrome in ios) phofurl
i tried to load the app on my android phone (xiaomi redmi note 7 with miui 10, android 9) using `ionic server --devapp` and it is the same using `ionic cordova run android --device` however it is working fine using the emulator (the image is well displayed).
- create a `sidemenu` starter from cli `ionic start myapp sidemenu` - append the related code to `app.component.html:19` - run `ionic serve` - open the menu hover over the list items in the side menu
- clone project below - run `npm install` - run `ionic serve` - open both safari and chrome
this minimal code example doesn 't show an icon: phofcode source looks like it 's missing the `svg` element.
move from top to bottom on a page where the content does not exceed the space on the page
add to an ion-button component.
use ionloading in a component where isopen is initially set to true, or set to true in componentdidmount.
just have a `ion-item` with some child inputs.
simply start a new app, follow the native http installation from the doc and try to do an http request while using `ionic serve --devapp`.
phofcode please see the launched application on your pc.
run the conference app in dark mode.
put loop:true in the options of the ion-slides
upgrade from 4.5.0 to 4.6.0 version, building ionic app with `ionic build --prod` and publish it in prod environment <!--
- create a starter app with `ionic start searchbug sidemenu` - add the ion-searchbar content inside an ion-toolbar tag to the homepage header phofcode now run the app with `ionic serve` the app starts with the homepage.
now navigate to listpage then navigate back to homepage (with sidemenu).
follow [this walkthrough] ( phofurl until the part of "getting started" where vue.use(ionic); is added to main.js.
at that point, run the app, and you 'll get the error in the browser.
1. git clone phofurl 2. cd ion-slider-sorting-bug 3. npm install 4. npm start 5. see the slide is at zero.
6. slide forward and you see a 1.
7. slide forward again and you see a 3, but it should be slide number 2 as printed in the console log.
array is: 0: {photoid: 0} 1: {photoid: 1} 2: {photoid: 2} 3: {photoid: 3} but elements are: <ion-slide class="md swiper-slide swiper-zoom-container hydrated" style="width: 924px;">0</ion-slide> <ion-slide class="md swiper-slide swiper-zoom-container hydrated swiper-slide-prev" style="width: 924px;">1</ion-slide> <ion-slide class="md swiper-slide swiper-zoom-container hydrated swiper-slide-active" style="width: 924px;">3</ion-slide> <ion-slide class="md swiper-slide swiper-zoom-container hydrated swiper-slide-next" style="width: 924px;">2</ion-slide>
create a new project, create a reorder-group and use an item wrapped in a reorder, and then build for ios.
tap one of the reorder items and they will disappear.
please take a look on demo phofhyperlink we starting from landing page, then going to tabs (tab 1), then click on tab 2. now click back button (browser or hardware).
actual result: you are on tab 1. expected result: you are on initial landing page.
from ux point of view, single tab should not be considered as a separate page - it should be just a state of tabs-holder page.
phofcode phofcode phofcode => add cordova dependencies phofcode => add www folder but empty => www folder is still empty => throws an error saying www/index.html not found.
- clone sample application, `npm i`, `ionic serve` in the sample application: 1. keep "simulate fast navigation" enabled 2. click "navigate via root outlet" 3. back navigation is triggered 4. click "navigate via tab outlet" 5. page is empty, but three cards should be rendered (`*ngfor` structural directive not evaluated) 6. disable "simulate fast navigation" 7. click "navigate via root outlet" 8. click "back" 9.
"navigate via tab outlet" 10. page is rendered as intended
1. create a new project using the ionic cli and select the conference app 2. follow the steps listed here: phofurl 3. open the xcode project, sign app and deploy it to device.
4. let it be installed on device for one week.
phofurl 1) go forward to an item 2 page from item 1 page in tab one 2) go forward to a global page from item 2 page in tab one 3) go back from the global to the item 2 in tab one with navcontroller.pop() 4) try to go back from the 2 in tab one the 1 with navcontroller.pop() (doesn 't work)
run ionic cordova run android
1. cd into cloned github project directory 2. run ng serve 3. open website in browser 4. click rendered ion-datetime element 5. try to change am/pm input 6. see "error parsing date: "[object object]".
please provide a valid iso 8601 datetime format: phofurl in console
load a split-pane menu using a small screen preview 'iphone 6/7/8s ' with firefox.
angular.json use {... "basehref": "/en/" }
1. create new ionic 4 project with tabs template 2. create pages: page1, page2, page3 3. add button in: - tab1 redirecting to page1 - page1 redirecting to page2 - page2 redirecting to page3 - page3 redirecting to page2 4. run project 5. now click one all buttons untill you click on the button in page3.
6. now click on back button (hardware or <ion-back-button>) 7. page1 will be shown instead in page3
create a tabs app and add a ion-back-button on a tab subpage with a defaultback to the tab parent page.
open the app directly on the tab subpage (to keep history empty) and click on the back button.
we have built the following for web deployment: ionic cordova build browser --prod
use any ion-title contained in ion-toolbar
this will open in different positions in web and android: <ion-fab-list side="end"> </ion-fab-list>
1. add an `ion-datetime` wrapped inside an `ion-item` to a page.
3. observe how the `ion-item` has the class `item-has-value` prior to being set to anything.
add `<preference name="keyboardresize" value="false" />` to config.xml, create a page with a long form that uses more than half of the screen
combine an ion-input with a floating label and give the label a color property.
set focus on the input element -> color of label changes back to primary
an email is send to client and clicks the url (in iphone x using yahoo native app), ionic app is opened by yahoo using "in app browser" then header and footer hides error 1 phofimage error 2 phofimage
open an app with a menu in ms edge, open the menu, click the backdrop area.
put in ion-tabs in a project that has to be scrolled horizontally
- have two tabs with routes: /tabs/tab1/main/page1 /tabs/tab2/main/page2 - from page1 navigate to page2 using a button inside page1 - press back in page2 (back will not appear due to #18311 currently, but the point stands) - you land to /tabs/tab2/main instead of /tabs/tab1/main/page1
create a page with an ion refresher and some elements with fixed position.
try to scroll up and down where the fixed elements are
<ion-grid> <ion-row> <ion-virtual-scroll [items]="students" <ion-col *virtualitem="let student" size="4"> <ion-card> // content </ion-card> </ion-col> </ion-virtual-scroll> </ion-row> </ion-grid>
when using <ionrouteroutlet>, return <redirect> from a <route> 's render prop (see code)
1. implement `app-list`, that renderes `app-entry` using `ngfor` like this: phofcode and add a button/infinite scroll that will call this method: phofcode 2. load more data and the app will reload after a while.
if the `app-entry` consist of a single `div` then it may take a while, but if it 's more complicated it will happen quickly
1.any page with ion-header and ion-content 2. add fullscreen property to ion-content, so it 'll be: ion-content fullscreen (or fullscreen="true" doesn 't matter) 3. set in sccs: ion-toolbar { --opacity: 0.5; } 4. voila!
there 's nothing changed on the page.
5. go to developer tools and set for entire ion-content position: absolute; and now you 'll see the content of ion-content beneath ion-header.
i can reproduce this behavior in 100% cases, also with latest ionic package.
customise ion-toolbar element and see in ios mode
1. use an ionic page with a back button 2. add text to the back button manually
1) create a new stencil ionic project 2) update @ionic/core to 4.4.2 3) update @stencil/core to 1.0.0 4) build for release (npm run build) 5) serve with http-serve or any other http server
i am running an angular app on my thinkpad, which has a touchscreen monitor.
in `platform.ts` the `ismobile` check is run by checking on laptops with a touch screen, this `matchmedia` call returns true for its `matches` property.
my best guess, based on reading the docs for `any-pointer`, is that the `matchmedia` returns true because my device is a touch screen.
create a picker, present it and tap on one of the buttons so the ondiddismiss() method is called.
i created two state variables, `value1` and `value2`, and setters using the `usestate()`-hook.
i created a controlled `<ioninput />` and a controlled `<input />`.
the regular `<input />` is controlled as expected.
no more than 5 characters can be placed there.
the `<ioninput />`'s input is correctly set to state and restricted to 5 characters, however the `<ioninput />` continues to take in characters.
i ran in to the issue by following the guide from: phofurl
try to use `ion-header` in elm app.
create ion-tabs with angular router.
one route should be: /some-route and the other one should be /some-route/page1
try to scroll on <ion-segment scrollable> on a desktop.
1) open phofurl (the form is a stencil web component using ionic), the rest is wordpress.
2) fill the form (select a car model, type years 2019 and 2019, any number on the last box (it have a mask) and add some text using the big (+) button, then hit big green button.
3) if you are using a 1080p monitor, you won 't scroll, everything looks ok, but resize window keeping > 1200px on width and bit of height (the scrollbar will appear).
scroll down bit, then hit same button.
add `animated={true}` to `<ionskeletontext />`.
phofcode add this to your tsconfig.json phofcode then call phofcode finally build the empty project `ng build`
1. from the main page, navigate forward to the page 2 with 2. navigate back to the main page with
1- install ionic globally 2- run command `ionic start project tabs` or `ionic start myapp blank`
i can't provide the correct way, as it depends on some clients, but i found that i can get the issue if i open the website using remote desktop, i'm not sure how to reproduce it, in work machines everything is fine, on my home machine, and client machine, the issues happen.
use ionic@5.0.0-beta.3 to create a `tabs` react project and run with lab.
the problem is based on the fact that the post, get requests do them perfectly in the browser, but when compiling the app and executing it, it does not perform actions.
1. run the test app with either ios emulator or on an iphone device (be sure to enable hardware keyboard display on emulator) 2. click on the 'search bar ' text field, then 3. click on the 'input ' text field you will note in the case of searchbar content area is not being adjusted to sit just above keyboard.
1. insert a datetime component with min/max value as in the related code 3. change the hours field
1. ionic start blank --capacitor 2. edit app.component.html phofcode 3. ionic build 4. npx cap add ios 5. npx cap open ios test in simulator.
1. ionic new blank project 2. add an input element `<input type="file">` in home page 3. on mobile, navigate to the app and add to home 4. click on the button 5. open camera and cancel camera it may work for you if you are on iphone x.
1. create an ionic tabs starter.
2. run ionic serve, and preview in firefox (don 't see it working in other browsers either).
3. move along the tab buttons by using the physical "tab" key on the keyboard.
4. observe that when a tab button receives focus, and one hits enter or spacebar, the tab is not activated.
create an app with 2 pages: master-details.
on details page place a back button with open master page and navigate to details page.
click back button - it works.
navigate to details page again.
click back button - does not work.
go to the ionic demo phofhyperlink sample itemreorder click on edit, drag an element up and down without droping it, then drop it anywhere, noticing the position is wrong.
i have a conditional readonly selector with the following code: `<ion-input type="number" placeholder="test reference number" readonly="{{ isedit }}"></ion-input>` however the css selector has to be not
look at code below with same version of ionic as stated above.
using the below code we should see the issue described phofcode
add an aria role="navigation" to an ion-menu component.
it will be overwritten with the "complementary" role.
i used the ionic conference app with some changes to reproduce this.
- go to `speakers` tab - click `the ionic package` under the `burt bear` - it should show the back button - go to `schedule` tab click any list item it gets you to the same page but without back button
run the sample application on an android device from the
i have only been able to reproduce this on a physical ios device (but i have reproduced this problem on 2 different ionic apps, one of my apps is in production with this issue), as i state below this is extremely inconsistent, but i tend to be able to reproduce it more often when swipe from the very edge of the device from left to right go back the home page.
click the "details page" button route forward.
do you guys have a suggestion for gesture tracking/recording?
that may help debug issue better so we can pinpoint exact stroke that breaks things, but don 't know of such software.
app.routing.ts phofcode tabs.routing.ts phofcode account.routing.ts phofcode main account settings page has its own router-outlet, its the only way i could get its child page to display, otherwise the url would change but nothing woudl display - is this the right way to to do this ?
there is also a router-outlet in app.component.ts and i think the tabs are doing this behind scenes.
phofcode i see a lot of stuff about named outlets including that they are not necessary anymore with latest angular (im running very latest) 5.6.0 should i be using them in order to open a subset of pages with an ionic tab page ?
if you need anything else let me know, also would appreciate if you can tell me if this is a known issue with ionic as ive come across some other posts saying it is
1. select the segments and see the text on the page be updated 2. click the "go to child 1" button 3. click "go child 2" button 4. select back button quickly navigating back to parent tab 5. select segments and text on page will not be updated
ionic conference app bug phofimage
build a page with two ionic datetime pickers phofcode image phofimage
1. clone and run: phofurl 1. open the app in the browser and notice how the `broken ion-select` selection is empty while it should be "foo".
this can be replicated using my sample repo: phofurl please build on ios using: `ionic cordova platform add ios` and `ionic cordova build ios --prod`
i don't know what caused this to start happening, but it is happening and i don't know how to reproduce it, or how to stop it from happening to me, it's driving me crazy, i close the app by mistake and then i have deploy again just open it up.
any ideas what could be causing this bug?
this is somewhat tolerable when im on my pc working since can open the app by deploying it again, but when im not near my computer literally have no way open up the app here's the app installed image phofimage
- scroll down on page that has many elements * we haven 't seen this issue on elements above the fold
just create a footer, try setting it's background-color to red and see it working, and then try setting it to transparent and it'll be white.
cannot describe the issue as it shown suddenly when upgrading to ionic 4.4.0
generate a new ionic application
phofcode because of the above the compilation process stops and reports an error.
1. create a project using ionic v4.4.0 2. create an ion-item with phofcode
1. import a picture 2. use ionimg to loading this img
1. create an ionic app 2. create a modal with `const modal = await 3. set autofocus on an ion-input element in the modal component
use an ion-label with position stacked.
for example: phofcode image phofimage image phofimage
copy the related code to a blank starter project.
make css changes to the ion-card and enable button attribute.
make a radio group with a few radio options, inside the radio group make a few checkboxes.
see how the radio selection changes as you select a nested checkbox
create an ion-input inside an ion-item in a template driven form.
cards in the custom component have the following subscriptions within them.
create an app, try to set the property, you will be denied...
using ionic 4 native push example code( phofurl in my code
add it to a page <ion-img [cache]="true" [src]="src || item.image"></ion-img>
- create a new app - change app.module to run in ios mode - create 2 <ion-tabs> pages, and navigate forward and back between each one
1. include hammerjs 1. bind (press) function and present a popover.
2. press the button but do not wait until the popover is displayed.
-> sometimes the popover shows up shortly and gets directly closed again.
call the below `toastcontroller` code from external javascript code, will throws exceptions: phofcode
create a new pwa using the `npm stencil init` command and select the `pwa` template which includes ionic.
add the following methods to both home and profile pages and check the console output on running app (on profile page replace word `home` with `profile`).
phofcode if you wish you can add following button to profile page too: `<ion-button href="/" expand="block">home page</ion-button>`
use the component below and try to compile it.
i'm working off of the react documentation here phofhyperlink
1. display a page that has an `ion-nav` inside.
2. open a modal that has an `ion-nav` inside.
3. call `push(someview)` on the `ion-nav` that 's inside the modal.
- ionic start sidemenu sidemenu - ionic cordova platform add ios - sudo npm -g install ios-deploy --unsafe-perm=true - sudo ionic serve (runs ok in opera).
sudo ionic cordova build ios -- ...running in xcode, crash.
sudo cordova run ios -- ..cashes also.
` my pickeroptions: public customstartdate: any = { buttons: [ { text: 'clear ', handler: () => }, { text: 'done ', handler: (data: string) => { console.log("date data:", data); } } ] } public customstarttime: any = buttons: [ text: 'clear ', handler: () => }, text: 'done ', handler: (data: date) => } ] }; ` replacing the part with a console.log(data) would be enough te be able to see the issue when you somehow trigger it
easiest way to reproduce is to create a css class and attach it to something like the `<iontoolbar>`: css: phofcode jsx: phofcode
simply create a react app that has two pages.
navigate to the second page from the first then tap the "back" button.
the second page will animate away but not unmount.
this leaves the secondary page mounted and cleanup effects are not fired.
when second page is opened again, effects fire again but leave old items lingering because cleanup didn 't happen.
1. on phofurl click the "show modal" button 2. press "enter" or "spacebar" to continue opening duplicate modals.
3. press the modal 's "close" button to dismiss the most recently opened modal.
4. press the next modal 's "close" button.
you will be unable to close more than most recently opened modal.
1. insert `<ion-input to your html page 2. execute `ionic serve` in ionic cli 3. wait for browser to pop up with app and observe behavior
the main app component has the ion-app tag and a main ion-router-outlet.
which will show the main page, either login or dashboard.
when showing the dashboard, it has a ion-content tag that then renders another ion-router-outlet which will show the specific content for page you are at.
all pages are defined with a module soy lazy load, some of them have further pages so they have extra ion-router-outlets
1. create a new blank app 2. add a toast controller to the main page, and show a toast in `ionviewdidenter()` with a message, and the `translucent` property set to true 3. put some other content in the page that would be obscured by the toast 3. run `ionic serve` and observe that toast is entirely opaque
1. create a new blank app 2. to the default home page constructor, add a toast controller, then in `ionviewdidenter()`, add the following: phofcode 3. in the `global.scss` add the following: phofcode 4. run `ionic serve` and observe that toast button colour is not set to yellow as expected
1. add `<ion-datetime>` web component to any ionic project html view.
2. set the `value` attribute to the last they of the current month.
3. set the `min` attribute to 3 days before date in `value` attribute.
4. set `max` attribute to 3 days after date in `value` attribute.
1. create new app with tabs boilerplate 2. put refresher, skeleton div and content div in each tab 3. set boolean flag to control if skeleton shows of content
1. create a new project: e.g.
`ionic start photo-gallery tabs --type=angular` 2. execute `npm run build` 3. open `www/index.html` in browser (chrome) 4. check console in browser: phofcode
run the demo app than navigate to settings and back to tabs.
compare console log to the one when switching between tabs.
1. create simple button phofcode 2. add `shape` attribute phofcode <img width="92" alt="screen shot at 11 33 38 am" src=" phofurl 3. add `size` attribute phofcode <img width="53" alt="screen shot at 11 35 05 am" src=" phofurl
add `<ion-datetime the console will show error, once opened, cannot close it.
to reproduce the error, please fork the project on github and clone.
you will run npm install to get all dependencies installed and after you can build the application
from my conversation on slack with mike hartington: phofcode
* create an app with two routes.
the second page presents a modal.
* navigate from the first page to the next.
* present a modal on the second page.
* press the browser back button.
the browser returns to first page but modal is not dismissed.
1. create a new blank ionic project 2. add the plugin using commands `ionic cordova plugin add and `npm install --save 3. add the platform ios using command `ionic cordova platform add ios` 4. if there is any error for then remove the plugin `cordova plugin rm --force` 5. after removing add the again using command `cordova add 6. build project using command `ionic cordova build ios` 7. open project in xcode 9.4.1 or in xcode 10.2, it selects default swift compile version as 4.1. now run command to build project.
error is generated in `documentpicker.swift` file as displayed in attachment
- create ionic blank project - add ion-searchbar component in the toolbar - call .focus() function of the searchbar - test in ios 12.2 safari app or ios 12.2 with cordova and see that nothing happens if you switch to another app and then return to the ionic app, the searchbar gets focused and keyboard is shown
1. implement ion-select without ion-item.
(it was necessary for our design) 2. add an attribute interface="popover" or "action-sheet".
3. write eror msg to be visible in case nothing was selected from options.
1. pull this code: phofurl phofhyperlink 2. excute cmd: `ng serve --open` 3. access this page phofurl phofhyperlink and click on tab item.
create a small form like this: phofcode type in a value such as phofcode an leave the input
1. navigate to a page which has an ion-back-button component using navcontrollers navigateroot method 2. note that the back button is visible when it should not show
use the following codethen double click the picture
i have add below code and put the code inside the app.scss file : > scroll-content { > overflow-y: scroll; > touch; > height:100%;
example repo: phofurl this works: phofcode this does
- ionic 4.2.0 - angular 7.2.11 - zone.js 0.8.29 opening (i.e.
navigating to) a page with many many ionic components while taking profile on chrome inspector 's performance tab.
searching for 'detectchanges ' will tell you a large number of change detection has run.
make a page with a ion-input field add clearinput to the field type in field press on x to delete content
specify `"target": "es2015"` in tsconfig.json of any ionic/angular app, run it on chromium 53.
1. simulate the ionic project in ios simulator (or build the ionic app and send to iphone) 2. tap the input and do not touch anything more.
1) change the background to a dark color 2) add the `ion-skeleton-text` component to the page 3) change the variables provided by docs phofhyperlink .
i tried the app in edge.
please take a look above.
1. set disabled property of ion-refresher equal to true.
2. change that property value to false.
3. ion-refresher is still hidden/not working.
the following codepen will reproduce this: phofurl if you comment/uncomment the following line it will force a reload and you'll see the selected tab changes between tab one and tab three: phofcode
add a ion header with an ion toolbar.
you can reproduce this error by visiting the already live demo app here at this exact url phofurl then pressing the back button in the header.
default default phofimage pulling pulling phofimage end end phofimage
simply having a <ion-footer> element that is pushed up by the keyboard: <preference name="keyboardresize" value="true" />
1. checkout the branch from phofurl 1.
just print out using command:
1. add ion-searchbar on page 2. launch app on device 3. focus on ion-searchbar 4. scroll page to bottom, and see, that height of scroll is too big.
open the ionic conference app with a notched android phone, or on an android emulator running android p or above so that a notch can be added programmatically to test.
then add in the `initializeapp()` function located in `app.components.ts` before running the app.
<img width="319" alt="screen shot at 2 47 27 pm" src=" phofurl <img width="315" alt="screen shot at 2 46 48 pm" src=" phofurl but this is handled fine on ios: <img width="384" alt="screen shot at 2 49 27 pm" src=" phofurl
just use safari10 to visit the official demo url linked below.
phofurl test with simulator iphone 5s with ios 10 and also real device iphone 5s, iphone 7 with ios 10. same problems appeared.
`ng serve` open ` phofurl and click the `go to canvas page (using ion-content)` link.
the console logs will print: phofcode then go back to the homepage and click the `go to canvas page (using div content)`.
notice how the console logs have changed to: phofcode the only difference between two pages/routes is that on first page component is placed inside an element, while on second page component is placed inside a plain `<div></div>`.
navigate back from any page to a page with the fullscreen `attribute` on `ion-content`.
observe the ion-header appearance vs. w/o the fullscreen attribute.
create a new ionic react app with tabs routing
create grid with rows and cols and fill them with an item and label.
1. create an ionic v4 app (link to be provided below for reproduction).
2. create an `ion-list` with an item containing an `ion-item-option` _with the_ `disabled` _attribute set to_ `true`.
4. slide the item to the left.
4. observe the button is still enabled.
1. clone phofurl this is the "blank" starter project, with an added page with a candeactivate guard that always returns `false`.
3. run `npm run start`.
4. open the served page in chrome, and open chrome developer tools.
5. enable the device toolbar, and choose an iphone as the simulated device.
6. reload page so that simulated user agent is used.
7. click "go to page two" button.
8. click-drag from left edge towards right, to simulate a back-swipe.
9. observe that you could swipe back to home page, and that you can 't click "go to two" button.
1. add routing from page to tabs.router.module.ts 2. add ionviewwillleave event to page.ts file
build in xcode simulating in iphone 5s ou 6s.
obs: my deployment target ios is the same that my simulator.
a very small 'app ' is here (its just some cards in a grid): phofurl
1. use the sample app: `ionic start myapp tabs` 2. to make it more obvious i cloned the existing ion-items in the list to have more content (area to scroll).
3. then run `ionic serve` and start ios simulator 4. start safari in the ios simulator and visit localhost url provided in console when running ionic serve
* open stackblitz below * click datetime to open picker
1. create new lazy loaded ionic project with tabs template.
2. head over to tab1 and add a new button which on click performs: {relativeto: this.activatedroute});` 3. set up a subscription in the page to the latest data from the activatedroute.data stream.
- datetime with maxdate to date - 18 years.
i use moment for this phofcode
show toast on screen, try to make it full width.
run `ionic serve` when the page is loaded, selecting other menu item cause flicker, it only happens once on freshly loaded page.
a refresh triggers it again
see sample app phofurl 1. click test 2. scroll down to note `ion-textarea` and focus it.
the keyboard appears and the field is not vissible 3. now focus default label.
the keyboard appears but the field is still visible.
1. create a project using ionic v4.0.2 2. create an ion-select with interface="popover" phofcode 3. put in page css file phofcode
this is the not working ionic project phofurl and this is the working plain angular project where the same thing is working phofurl
after upgrading to 4.12 old apps stop working, new apps never work
1. create new project with version 4.0.2.
2. in app.component.html add the sample example found in ionic documentation regards ion-item-sliding 3. swipe from left to right or vise versa, issue will be generated.
1. in new application, create a virtual scroll in the home page binded to a list of items which is empty at first 2. asynchronously fill the data array without user interaction
run `ionic cordova build android --prod --release` in ionic
use ion-checkbox in a simple html and run lighthouse audit from chrome.
it shows the following error for accessibility : 1. buttons do not have an accessible name when a button doesn 't have an accessible name, screen readers announce it as "button", making it unusable for users who rely on screen readers.
create any ion-input element and try to override or set text-indent especially when you are trying to use image background for this input
- use the component `ion-select` with `multiple=true` and `value` initialized with a list of comma-separated values.
the values are valid values in the children `ion-select-option`.
- with only one value in the `value` property, the component works as expected.
change any variable color from variable.css example: if change the "primary color" to black, when on android 5 or 6 it will display blue instead.
do not work even if we create a custom variable color, it will display blank.
create a mixin.scss file, import it into `globabl.scss`, and attempt to use it in a component/page.
then you'll be met with an error
create a component with ionic slides element, export that component and import into a page.
add multiple copies of that component and try to resize the screen to observe responsiveness.
when only one slide component exists it will respond well.
if there is more than one only one will behave as desired.
just add a page with a popover component.
then try to parse a css class in the function.
2. click on any dealer 's card.
3. dealers item subpage is opened.
4. click on any menu item (e.g.
5. subpage won 't dismiss, selected root page (news) isn 't opened.
start a basic ionic app with command ionic start test the app via ionic serve
1. add `<ion-slides 2. view on a device with safe area e.g.
1. create a page 2. add the code snippet below 3. notice that the content disappears
create a new ionic 4 app, load div text items inside ion-content and enable user-select for ion-content in css
1. create a new ionic project (i replicated this with tabs) 2. in tab1.page.html add an ion button, i used this: phofcode 3. run the project, the primary color is not applied, the button is not expanded to full width.
the issue happens when the function is called or when the code reads the console.log
see the following codepen, open the "top" and "bottom" layout items: phofurl
1. clone the repo noted below 1.
`npm start` 1. open the browser and console phofurl at that point, the first navigation will be to `/tabs/tab1`, but the app will quickly be re-routed to `/login` as user is not logged in.
console should say `tab 1 did enter` even though we are on login page.
it appears that ion-router-outlet caches first page loaded, this case tabs with result being that proper lifecycle hooks are not aways called.
note: when using ionic router outlet loading phofurl you can see it is cached resused instead tabs page created destroyed, end result being data entered login cleaned up (because i am cleaning it up manually, relying on destruction doing it for me) try loading while using regular angular router outlet behavior much better.
basically, `ion-router-outlet` makes it such lifecycle hooks always called properly application behavior inconsistent depending upon which page loaded first.
the exact same application has no such problems when standard angular router outlet used.
1. create a new angular app using the angular cli, `ng new my-app` 2. add deps, `@ionic/core`, `@ionic/angular` 3. add an ionic-angular controller injectable to app-component.
`npm run start` 5. view above error in console.
* git clone phofurl * cd ion-list-test * npm i * npm run start open phofurl in firefox scroll down, click an item, click back button scroll position is at top
1. ionic start test sidemenu 2. ionic cordova run android on an adnroid 4.4.4 device
just rebuild below git repo phofurl
use `ion-datetime` on different platforms and see, that the values returned are not consistent.
create a link to another page with `animated: false` on the page that your app loads after booting.
the link will still animiate to the next page on the first click / tap.
clone the repo to see an example - phofurl phofhyperlink
- start sample ionic blank project - add a page with given html - place component html as in the code below - place code below in component.ts ionic serve, with a large enough window to activate split view same result as the image below
create fresh ionic tabs project $ ionic start myapp tabs --type=angular
1. create an ionic app, 2. set the mode to 'md ' ionicmodule.forroot({ mode: 'md ' }) 3. create an ion-list and a single ion-item that has a routerlink which routes to another page.
4. run the app on a device or an emulator.
5. click the ion-item ripple-effect-bug phofimage
create fresh ionic tabs project `$ ionic start myapp tabs`
setting ion-tab-bar with translucent="true" and adding content to the page to make it scrollable.
then test and see if you can see the content scrolling under the tab bar.
add the code below to a barebone ionic application and navigate to any page.
try below code using the following offest value: phofcode
* install ionic@latest * create a new project * run `ionic serve -c` or `ionic serve --devapp` * in your devapp see if the application shows up.
i am just following the latest ionic documentation for inappbrowser.
i have a simple test example web-app in visual studio code which i am happy to supply, but stackblitz says it does not support some of the file types yet.
i don 't know how else to show you.
file structure: src/app/home/* src/app/payments/* src/app/usage/*
steps to reproduce the behavior: 1. the app must have tabs, and one item of some tab (say tab a) opens another page on top of it (page b), so page b is a child of the page on the tab a.
2. add an `ion-item-sliding` with `ion-item-options` on the page b.
3. click on tab a two times so you can back to of a or click ion-back-button b, and then open b again.
4. see that click item-sliding won 't make it slide.
1. open an existing vue.js project 2. run `npm install @ionic/vue --save` 3. add the following to
simply use any starter, then update the following packages phofcode they are older version now in starters: phofcode then try to build the app using `ionic cordova prepare android` or even `ionic cordova prepare ${platform} --prod --aot --minifyjs --minifycss --optimizejs -- -d` also, you can get the issue when you do `ionic serve`.
create a component that uses candeactivateguard like in the related code.
when canleave is false and you swipe to go back you are still able swipe the page away while the alert is open.
just add this code to a blank ionic 4 app.
` <ion-item> <ion-label <ion-select> <ion-select-option <ion-select-option <ion-select-option <ion-select-option value="genesis">sega value="saturn">sega </ion-select> </ion-item> ` then run on ios.
try tapping on the floating label.
it will not trigger the select.
however if you tap outside the range of label it will work.
on android this is working perfectly.
1. create an action sheet with a long subtitle
just click the input field and it appears.
please refer to the blog post documented above.
in virtual-scroll, add several items-sliding dynamically and update the list.
1. create a .scss file mixin, i.e.
// file: src/scss/_media.scss phofcode 2. import it in main scss phofcode 3. use the mixin in component 's scss: phofcode
either set the placeholder text in html statically, dynamically as the result of some event, or even programmatically in typescript - all roads leads to rome (and broken floating labels).
create ionic 4 tab starter and add ion-footer with ion-toolbar inside.
1. prepend the following two css variables to ':root ' in variables.css.
this will add background contrast to make the issue noticeable: phofcode 2. add the following to any component 's template: phofcode 3. as a workaround, and as the 'night filter ' range demostrates above, add following css class to be applied component 's template: phofcode
2- append the api parameters key-value pairs.
3- send the post request.
using 2 pages, and navigate from page to another using `router` from angular,
put a `ion-img` in a red `div`, i have a red space behind the <img> element.
it 's very easy to duplicate the issue just create a new ionic project with ionic version 4.2.1 and create a number of pages on that project and insert a number of click events, you will get the problem.
add a `viritual-scroll` to a page and initialize with some items and update the list with new set of data.
1. clone the following repo: phofurl - it is the angular sidemenu starter template with minor modifications (namely that the sidemenu items, when clicked, do different things).
4. open google chrome dev tools.
5. in google chrome dev tools click "toggle device toolbar" to simulate a device ui.
6. in device toolbar settings, from the device type dropdown choose "ipad pro."
- this will make it use `ios` mode whose navigation animation directions are more obvious to eye (content moving left or right).
- "ipad pro" is a large enough resolution that sidemenu will remain visible on screen.
7. in toolbar settings, from zoom level dropdown choose "100%."
- sometimes with a smaller percentage click areas get messed up.
8. reload browser to ensure that simulated user agent will be used.
9. in dev tools elements panel, expand nodes for following path: `body > app-root > ion-app > ion-split-pane > ion-router-outlet` this will allow you to keep a visual on ionic push/pop stack as you navigate in app.
10. click `list (router.navigate)` and note that navigation direction/animation goes forward as it is using `router.navigate`.
you 'll also see page get added ionic stack in elements panel.
11. click `bonus (router.navigate)` and note navigation direction/animation goes forward as it is using `router.navigate`.
you 'll also see page get added ionic stack in elements panel.
12. click `home (navcontroller.back)` and note navigation direction/animation goes back as it using `navcontroller.back`.
since this used `navcontroller.back`, you be back on `list` screen.
you 'll see `bonus` page was removed from ionic stack in elements panel.
13. dev tools console, copy/paste following statement and hit enter/return: `window.disablenav = true` this flag force `candeactivate` angular route guard return `false` prevent subsequent navigations.
the be prevented by `candeactivate` route guard.
15. tools console, copy/paste following statement hit enter/return: `window.disablenav = false` 16.
`bonus (router.navigate)` note direction/animation goes _backwards_ instead of forwards like it 's supposed to.
you 'll also see all of pages panel have been destroyed except for current page you 're on (`bonus`).
just declare the ion-slides on the html and import the slides on the .ts file
(check example repo) 1. add an ion-checkbox or ion-spinner to a blank ionic v4 project 2. add cordova + crosswalk 2. run on android device
use ionic source code, and add to test ion-slides, first time when modal is opened everything is ok, second time that modal is opened it is unresponsive, if you change ion-button in test with anchor tag everything going to be ok
create ion-select and try to add as option, eg.
1. instantiate a new `loadingcontroller` with `await 2. attempt to call any method on it 3. receive an error that the newly created `loadingcontroller` is undefined
clone the pwa toolkit and add a `ion-select` with `interface="popover"`.
in days will be 29-31. exit ion-datetime.
only now the number of days will update to 28.
1. install ionic core on a barebones cordova project 2. include some form of the tag on a working page.
the test repo uses the loadingcontroller to demonstrate other components are working as intended.
3. load the app onto a phone (may or may not show incorrectly)
add a simple ioninput component: phofcode with the following css: phofcode
create a new project and add an ion-date time in its home page.
build without production mode and run the app in an android emulator or android device and scroll through options of the pickers to get the warnings.
build in production mode and run the app in an android device scroll through options of pickers to get errors.
create a page with ion-content set with background-image like below - ` ion-content { --background: no-repeat 50% 10%; } `
create an ion-button with fill="outline".
in the css set ion-button variable --border-color: linear-gradient(to left, #fff 0%, #000 100%);
here is the ionic-datetime demo - see phofurl it is not possible to clear/reset the value please see the issue for ionic 3 phofurl
use tabs example project, runs on android device, while tab1 is active, press&hold tab2 for seconds then release, you will see tab1 and tab2 are both in active state/color
see "current behavior" for instructions to reproduce the issue.
create ion-range with dual knob.
next change their values from code.
issue demo repo: phofurl 1. clone the repo 2. make sure the latest ionic version is installed.
4. close the alert which shows on page enter.
5. click on on the ion button in content section of page (tab1 page).
5. on opened page ("some" page) click on `back` button.
6. verify that there is no alert showing up anymore.
use default tabs template and place into tabs.page.html &lt;ion-header>, next remove &lt;ion-header> from tab1, tab2, tab3.
&lt;ion-header> will overlay the content.
1. create a new ionic app 2. add `<preference value="body" />` to config.xml 3. add a button that opens ion-alert with an input.
$ ionic cordova run ios -l -c --
when the keyboard is open, select an ion-input below it.
the second input should be positioned somewhere halfway under the header.
use the related code below.
tap to select an option on the home page.
by default i have set viewencapsulation.none in home.page.ts.
comment that line out and reload app.
tap to select an option on the home page.
i've written a test tabbed app phofurl phofhyperlink .
app consists of two tabs: tab one and tab two.
tab one has test navigation buttons that navigate to tab two using various parameters.
i have 2 routes in the two module for tab2page - one is the default empty route and another allowing for an ':id' pointing to the same page.
two registers listener for the data and queryparams events and displays them.
two also has a test button which re-navigates to itself (tab two) using relative paths a random queryparam.
test 1 (using empty route to tab2page): 1) on one click 'only queryparam: 111' button: displays correctly with correct events.
2) click 'calling tab2 with a random parameter multiple times: parameters are correctly received via events displayed on page.
3) go back one click 'only queryparam: 222' button (this navigates using same route but with different queryparam)
i tested this on honor 10 and redmi note 6 pro.
both have 8.1.0 android version and android system webview updated as 6th february 2019. so why is it stuck on white screen forever?
i am using ionic cordova run android which builds the app directly on my phone through usb.
create a method to display toast: public async showoffline() { const toast: any = await this.toastctrl.create({ message: "you are offline", duration: 5000 }); await toast.present(); } detect when user is offline: => { isconnected); if (!isconnected) { this.online = false; } else { this.online = true; } }); i 'm using this package: ng-connection-service
above pasted code should be sufficient.
1. we need an ionic page with a tab bar and at least two input fields.
2. click on an input field (keyboard is shown, tabbar hidden) 3. click on another input field (while the keyboard is still shown) 4. keyboard will be still shown (correct), but the tab bar will be shown too.
create an ion-button with color attribute.
deploy on ios simulator then tap the button.
it works if the color attribute is removed.
use popover controller and pass in $event from the (click) event on an element.
see the following codepen: phofurl remove the `!important`s.
follow the documentation will not work.
- create a new project by using a starter template "ionic start tabs" - add/generate additional service ionic generate service _services/test - import native/file in this service class: import { file } from - add a file to the constructor of the service: constructor(private file: file) //private file: file) { ..
1. change the status of a formcontrol using the angular forms `markasxxx` functions.
2. inspect the dom and check the `ng-xxx` and `ion-xxx` classes applied to corresponding ion-item.
3. ng-xxx classes are applied, `ion-xxx` classes don 't
update to ionic/core@4.0.1 and angular@7.2.4 phofcode this are my dependencies "@angular/animations": "7.2.4", "@angular/cdk": "7.3.1", "@angular/common": "7.2.4", "@angular/core": "7.2.4", "@angular/forms": "7.2.4", "@angular/http": "@angular/material": "7.3.1", "@angular/router": "@babel/runtime": "7.3.1", "@capacitor/android": "1.0.0-beta.17", "@capacitor/cli": "1.0.0-beta.14", "@capacitor/core": "1.0.0-beta.14", "@capacitor/ios": "1.0.0-beta.17", "5.0.0", "5.0.0", "5.0.0", "@ionic-native/core": "5.0.0", "@ionic/angular": "4.0.1", "@ionic/core": "4.0.1", "@ionic/pro": "2.0.4" ``
1. download any starter as a base 2. add a simple ion-input element to a list or any other structure.
3. build and run on/for ios (automatically uses wkwebview plugin 3.x) phofimage phofcode
1. use the starter app with the latest wkwebview plugin (3.x) - add multiple inputs (text) to a page.
2. build for ios and run on ios 3. select any input --> `keyboardwillshow` and `keyboarddidshow` will be properly triggered, the keyboard appears, and the tab bar disappears.
4. with keyboard being still open, select another input (field).
--> triggers `keyboardwillhide` and `keyboarddidhide` does not trigger show didshow events, thus letting tab bar reappear on top of keyboard (and messing around with view height calculations).
1. setup a new project with angular type: `ionic start myapp tabs --type=angular` 2. open webstorm, open the `tab2page` class and create an alert and try to get intellisense for example the `dismiss` method of the `htmlionalertelement`.
1 - run a sample of code using the related code 2 - slide the item using the routerlink
below is the code as reference let me know if i am doing anything wrong
i have a horizontal scroller that i built with `flexlayoutmodule` that basically let 's me have a horizontally scrollable list where every item is a column of image and text.
here 's the relevant code from my <div class="ion-activatable container" fxlayout="column" fxlayoutalign="start center" fxlayoutgap="10px" *ngfor="let item of items"> <div *ngif="item.movie || item.title" (item.movie?
item.movie.ids.tmdb: item.ids.tmdb)"> <ion-img class="poster" item.movie.ids.tmdb: item.ids.tmdb] | async) || preloadergif"></ion-img> <div class="item-titles"> {{item.movie?
item.movie.title: item.title}} </div> </div> </div> but when the page loads up, all the hundreds of image requests are fired which i can see from the network tab as well as my api reporting i have hundreds of pending requests and that have hit rate-limiting.
maybe i 'm not using ion-img right or maybe some styles are messing with it?
here 's my .horizontal { white-space: nowrap; overflow-x: auto; } .poster { width: 92px; height: 138px; } .container { position: relative; cursor: pointer; user-select: none; } .item-titles { width: 100px; white-space: normal; text-align: center; } i 'm open to suggestions.
but don 't see how can make that horizontal.
describing the steps according to what we faced: 1. searched for a particular filter, got the list, infinite scroll works perfectly.
2. when the whole list is retrieved, scroll event been made true (infinite scroll event is disabled by `event.target.disabled = true`) 3. searching for another filter, got the list which is not complete.
this time since scroll event is diabled it won 't work so we tried making it false (enabling event listener) using = false` but did not work.
just add a video to new ionic project see phofurl
the error occurs when you run the following command: `ionic cordova build android --prod`.
1/ create a new blank project `ionic start myapp tabs --type=angular` 2/ add to home `<ion-icon and `<ion-icon 3/ witness the desperately empty place of `arrow-up` icon.
add background image for an element in the scss file eg.
style.scss phofcode apart from the original image file its producing a duplicate file in the www folder.
installed npm and cordova phofcode inject in service androidpermissions from `import {androidpermissions} from
phofcode add the following code to the end of home.page.html: phofcode
just use any ionic demo app and change the router outlet to have a `name="something"` property..
- add icon svg to project in assets folder; - set ion-icon tag to src to svg; - set a custom color in variables.scss; - check the icon in browser;
the following images of a ionic page shows the behavior.
the pink area is the contenteditable div.
try to override the background variable for a button like this: phofcode
- two pages in tabs with implemented oninit - try at least to execute console.log
turn off the internet connection and load slides on any page with examplary two or three ion-slide insid
this is a very simple page with 1 input field, it can be tested on ios and safari and then on chrome.
inputting works on chrome but won't work on safari and ios (even chrome in ios) phofurl
1. create a new folder, name it like
1. use steps from docs to open a action sheet modal.
2. create a class in your scss file, like the one below phofcode 3. now provide the css class name to cssclass attribute in options of action sheet controller as shown below phofcode 4. you can see your class is not applied to action sheet modal.
ts import { component } from '@angular/core '; @component({ template: ` <ion-range min="20" max="80" step="2" (ionfocus)="ionfocus()" (ionblur)="ionblur()" > <ion-icon size="small" slot="start" name="sunny"></ion-icon> <ion-icon slot="end" name="sunny"></ion-icon> </ion-range> ` }) export class homepage { ionfocus() { } ionblur() { } }
implement virtual scroll with a custom component inside of it.
create a new proyect with create-react-app install @ionic/react and @ionic/core as it is explained in phofurl call registerionic() on index.js import ionbutton with import { ionbutton } from '@ionic/react '; declare ionbutton component and add it the onclick event test it with console.log() phofcode am i doing something wrong?
i have tested it in chrome and firefox thank you very much for your support!
1. create ionic 4 project 2. add <ion-select> with 2 options: 1 with very long text and 1 with short text 3. open the ion select.
the first element should display only 30-40 characters and hyphens ios example image phofimage md example image phofimage if you do the same with an ionic 3 project, this should show properly both of the lines: ios example image phofimage md example image phofimage
1. new project 2. add `<ion-img` code 3. build using above command with `--base-href` 4. start a web server with the application running on the same root path as `--base-href` 5. note the image does not render properl
ionic start myapp sidemenu --type=angular
create an alert with alertcontroller, add a checkbox and set the disabled property to true.
create-react-app myapp (using cra 2.1.3) cd myapp npm install @ionic/react @ionic/core add to index.js: phofcode npm star
add some slides to a page added images to those slides make them zoomable zoom and slide
add the related code to your build, and you 'll see what i mean.
initialize a typescript vue application with vue-cli and install @ionic/vue as a dependency.
introduce a 100ms delay between oninit and populating the control.
1) create new blank app using phofcode 2) replace the ion-content in the main home.html template to be as below phofcode 3) add a test handler function inside home.ts 4) run the app and click on test button note that it will always open a select dialog and will never invoke test function
use an ios device such as an iphone or ipad.
using the github repo sample, you will find the first dropdownlist to be unusable if you want to select the last item in the list.
as you attempt to scroll down list, it closes on you.
the second dropdownlist shows a workaround i found and should help to find root cause of problem at hand.
basically, ionic interprets a touchend event in this context in a weird way.
first open a page in a modal: phofcode then navigate within that modal to a new page using the router: phofcode
in firefox for android, open the 4.x docs.
navigate to the calendar widget docs.
1. download phofurl 2. npm install && npm run start 3. open safari and go to localhost:4200 4. the app should load and when the data are loaded (few seconds) you should see that spinner stopped spinning
create a page that navigates to another one: phofcode go back in the child view: phofcode
set a button with a disabled property attached to an angular component property, switch the property from true to false and see the changes are not reflected once the button gets disabled, it reamins this way
start a new project (i used the sidemenu project), add `color="primary"` and `mode="ios"` on the `<ion-toolbar>` element in home.html
running the following project: repo phofhyperlink and navigating to the testpage, the back button won 't show up even though it should.
create an ion-toolbar with ion-searchbar inside it and add the color attribute to both elements.
- check out ionic-conference-app: phofcode - call phofcode - use android device with firefox browser to open served web app - go to schedule page and scroll up and down
create a formgroup with a formcontrol bound to an ion-toggle.
notice that the formcontrol does not react to any ion-toggle state modification.
1. create a new ionic 4 app using
i integrated 4 slides with slideoptions with loop but the looping is not working correctly.
if i disable loop property it is working fine,
| rc.1 | rc.2 | | - - phofhyperlink phofhyperlink
1. create a new ionic 4 app and add 3 or 4 slides.
or take ionic-conference-app and upgrade to 4.0.0-rc.2 2. build project for ios 3. install on device or run in simulator and change orientation
navigate to a page with router.navigatetourl or router.navigate.
directly when entering page either swipe or click at ion-back-button in header.
( video here phofurl )
take phofurl and change the for loop in the constructor to push only a couple a values.
1. create a "sidemenu" app with ionic cli 4.7.1 2. replace ion-router-outlet with router-outlet
scroll to the bottom of a page, click a button that will perform both: 1) remove the data used to render the page, and 2) trigger a navigation which causes current page component to be destroyed.
upgrade to rc2 and attempt to fire a method when clicking on toast buttons.
see code and screenshot below
use 'edge ' on a fab button inside a tab bar
create a project with two pages and two navigation options that passes any arbitrary *query parameter*: - on one option navigate using phofcode - on the second opton navigate using angulars router phofcode on the second page, inject phofcode and phofcode subscribe to logging the parameters passed.
- create any kind of ionic app.
- try to navigate with the keyboard over elements in the page.
you can also use a phone and turn voice assistant, then try to navigate over the elements.
on a mobile phone is even worse, as the modal becomes full screen yet navigation still starts on underlying page elements.
_edit: added a video to explain issue_ modalissue phofimage
1. create a basic cordova application with dependencies listed below 2. add a basic ionic tab example such as the one found at the beta tabs api example phofhyperlink 3. launch on a physical device (i.e.
create a new project based on _blank: phofcode locate the home.page.html duplicate the "p" in the home page several times, to create a long content page.
try to scroll, and you will see the problem.
tried updating plugins, changing the base tag to "."
(which fixes the asset location issue) but then it messes up the router.
1. start a fresh new project with two pages.
2. inject navcontroller on the first page and use it to navigate forward (i.e.
here's a repo: phofurl (don't mind the repo name - bug might not come from capacitor) - `ng serve` - go to the browser and click on `open modal` - ionic asks to add `modalpage` to `entrycomponents` uncomment `entrycomponents: [modalpage]` from go back to the browser and click on `open modal` it works!
use capacitor for android compile and starts it in debug mode capacitor logs: `component modalpage is not part of any ngmodule or the module has not been imported into your module.` uncomment `modalpagemodule` from if you go back browser, modal always shows up.
same problem if you rebuild and recompile for android
download ionic-team 's conference-app : phofurl run npm i;npm audit fix;ionic cordova build ios;ionic serve; icons show in the ionic serve opened in firefox or chrome on localhost:8100 but not on the simulator of ios.
if ionic build is ran and deployed by a node server, icons cannot be seen as well
1. use ion-split-pane with a menu on the left page and a lot of overflowing content in the right page (see related code).
2. create an ios cordova build 3. run on ipad 4. scroll the right pane and while it is still scrolling try to tap on a menu item in the left pane (only responds when scrolling has stopped)
in a page create an array of objects testarray = [{name:"test1"}, {name:"test2"}, {name:"test3"}] in the template , populate a row with the following template phofcode if we replace tr tags with ion-item the error disappears and it renders the elements in dom but elements are not visible.
1. create ionic4 rc1 project 2. add bellow code 3. see result
open phofurl in safari and navigate forth and back
create a form with ion-inputs and a ion-button type="submit" using the latest version of ionic 4. mobile keyboards will always say go instead of next as they should.
* create new app based on sidemenu template: `ionic start inspecttest sidemenu --type=angular` * add android platform: `ionic cordova platform add android` * build for android: `ionic cordova build android` * copy apk to device launch app on device open chrome inspector for the app: click around in the app.
i 've had success reproducing by opening the side menu and tap/dragging on one of the menu options.
maybe it 's related to animations?
once i close inspector window, i 'm unable to reproduce issue
for `min` bug: use the code below and scroll down to `feb`.
days between 1 and 11 are to available unless you click `done` and open again.
phofcode for `max` bug: use the code below and scroll down to day `30`.
scroll down to may you will be able select a date after phofcode
1. set disabled property on ion-segment-button 2. bind disabled property to variable which can be interactively changed to true or false 3. when set to true the tab becomes active but the tab gives the impression of being disabled.
4. select the tab, and see opacity change back to normal.
> ionic start myapp tabs --type=angular replace \'tabs.page.ts" with the following contents phofcode
(with a ios 10.3.3 device plugged) ionic cordova run ios --device
@viewchild and try to access to it.
or add a split pane and a menu.
- start a new blank rc.1 app - include the demo code from the docs (problem is reproductible with other `ion-slides` templates) - build for production (`ionic build --prod`) - start app in browser tested in: chrome (official build) (64 bits) safari 12.0.1 firefox 64.0.2 (64 bits)
serve the template code below with `--prod` flag
after upgrade `@ionic/angular` to `4.0.0-rc.1` and built the codes into a release apk on a linux machine with os: ubuntu 18.04 and open jdk8 the issue appeared and i've tried to build the same codes on a windows machine with android studio and oracle jdk8 things went well without the issue i downgrade `@ionic/angular` to `4.0.0-rc.0` repeat build in linux environment it goes well again
1) create a new page.
2) add a `<div>` content in the footer section 3) add (swipe)="" event
- git clone phofurl - ionic cap run ios --livereload i think this might be related with navcontroller, the same approach was working just fine in last ionic beta 19
from my sample (it 's a fresh app from blank template): 1-open modal from "modal" btn.
2-write something on the input x (1) then tap "cancel" button.
test other button from the home screen if they work.
3- if they work, open modal from "modal" btn.
write something on the input x (2) then tap "cancel" button.
test other button the home screen if they work.
4- if they work, repeat step 3 by writing something in next input till button in home screen stop responding.
(in my case, bug happend on 4th input on my nexus 6p and a pixel 2. it happend 6th text a nexus 5. so it can be different depending phone i guess)
- open the app on ios or with devapp (on ios; there is no problem in the browser!)
- click to the list menu - click to "long page", then click "back".
it 's ok - click to "short page", this page contains only 2 ion-items, so the height less then 100% (i think this is problem).
the menu will flash once every time when you go back.
sample code on github: phofurl
1. create a new blank project.
phofcode 2. fill home page content with inputs.
phofcode 3. in appcomponent, hide the statusbar phofcode 4. run on android device.
keyboard will cover some inputs.
inputs cannot be scrolled into view.
example in ionic4 documentation shows the issue: phofurl (look at preview not ios example)
create an elm app, and an ionic app.
run the elm app, and then run the ionic app onto an emulator without live reload enabled.
the directory structure i have is as follows... ~/projects/project1/www/ <- root elm app directory <- root ionic app directory
steps to reproduce the behavior: 1. go to phofurl and copy paste the tab code found under the 'usage ' heading into any lazy or eagerly loaded component 2. run 'ionic serve ' 3. see error in console 4. see error in visual studio code
append the code onto the html element attributes html.cameraview { background: transparent none !important; body, ion-app, ion-content, .modal-wrapper, .ion-page, .inner-scroll { background: transparent none !important; } --ion-background-color { background: transparent none !important; } app-home { visibility: hidden; } }
use the related code and you will see the line under the checkbox item is different from the other kind of components.
1. create a project with sidemenu starter 2. run app on phone (android, maybe also ios) 3. swipe from left side towards right while the app is starting (before home page is fully loaded) 4. try to click a link, button or swipe side menu open
create a list of items
create a list of items
1, start a new angular project 2. run ng serve, change app.component.htm multiple times and notice how the compile time is < 1seconds after a couple compiles 2. run `npm i @ionic/angular` 3. add ionicmodule to the angular module 4. run ng serve and notice how the average time is now > 5 seconds.
clone repo below, run, open in firefox, make window narrow
use a text only button in a toolbar.
create an app with these packages "@angular/animations": "~7.1.0", "@angular/cdk": "~7.1.0", "@angular/common": "~7.1.0", "@angular/core": "~7.1.0", "@angular/forms": "@angular/http": "@angular/material": "@angular/pwa": "0.11.4", "@angular/router": "@ionic-native/core": "4.18.0", "4.18.0", "4.18.0", "@ionic/angular": "4.0.0-rc.0", "1.2.2", "@ionic/core": "4.0.0-rc.0", run the app and present a modal
steps to reproduce the behavior: 1. add disabled attribute to ion-button 2. style it via pseudo or attribute selector of disabled 3. css rules are not applied
probably has to do with setting mode to `ios` when on edge as the default style is `md`.
try to get activated route every time angular router fires navigationend event.
1. start a new ionic angular project (`ionic start tabs-issue tabs --type=angular`) 2. remove `/tabs` path from `tabs.router.module.ts` (see related code) 3. start the app 4. try navigating from one tab to another
1. open a select popover.
2. click browser back button o/p : popover remains floating
- create a new ionic app.
- create a basic form.
- run `ionic cordova run android -l`.
- try to move to the next form control.
here 's a short video showing how clicking on the artist header routes to the proper artist page but when clicking back, it routes to the root of each tab navigation stack.
1. use tab starter 1. add a child page with default ion-back-button config in toolbar 1. go to child from tab two or three 1. hit back button end up on tab one...
here 's a video displaying the issue: phofurl 0:00 -> 0:03 the correct procedure 0:04 -> end you can see my cursor go to the icon and click twice, this triggers a stack navigation problem where the next time i click on element, page doesn 't navigate properly (no back button and animation slides in from left ios).
insert the code presented in the related code section bellow
- create a base page with a long ion-list that forces you to scroll - add a button to each list item that opens a popover - the popover should have long list that forces you to scroll, too - try to wrap the popover components in ion-content -> popover overscrolls but doesn 't really scroll down/up see other entries try remove ion-content -> popover scrolls, but if you overscroll inside the popover, the list in the base page is being scrolled
create an ionic app using any of the available starter templates and update from 2.0.0 (default in templates, but deprecated) to 3.0.0
1. open an ionic v4 app in ios.
2. mark up a div as following code 3. tap on the text in the div, watch keyboard 's action.
4. the first line, keyboard works fine.
the second line, keyboard start to dance.
in the sample application, select the router-outlet page from the menu to see how it is laid out, then select the ion-router-outlet page to see its layout.
they should be close to same, but ion-router-outlet page does not show page header.
*with `router-outlet`* phofimage *with `ion-router-outlet`* 1 phofimage
1- generate new page ( ionic g page test) 2- try to add box-shadow for toolbar-background.
ionic 4 app, with mentioned code.
implemented ion-anchor tag in my signin page html.
below i have added my code.
1. add to global.scss: phofcode 2. add <ion-card> to app, see that it has the same color as the background.
1. create a new project from tabs starter 2. add platform android 3. run app on android device 4. randomly tap on any tab to generate a navigation history 5. keep tapping on android back button, the app just went way back of all its navigation history
1. ionic start myapp blank 2. ionic cordova run android -l -c
use code from phofurl and test it in android emulator or on android device.
run on ios/android emulator and while scrolling (important) click on a tab.
the content must be in a scrolling state.
if the content is still then it will work normally.
this issue is more evident with a long list of items as the content takes longer to come to a standstill.
create a small app, with ion-segments.
load the app and navigate to the page with ion-segments.
it is important to navigate, because when you load the page with ion-segments directly it works as expected.
`<ion-segment mode="md" <ion-segment-button mode="md" value="first" [checked]="activesegment === \'first \'"> first </ion-segment-button> <ion-segment-button mode="md" value="second" [checked]="activesegment === \'second \'"> second </ion-segment-button> </ion-segment>`
phofcode result (trimmed for display here): phofcode
build an example like shown at phofurl under
create a tab project, navigate to another view from a tab page that isn't another tab, go back to the tab page and see that they have not fired.
- setup an ionic project for cordova and also ad pwa suppter with `ng add @angular/pwa` - build a pwa with `ionic build --prod` - build and run a cordova android app with `ionic cordova run android --prod` - in the console log on android seeing output: `"error error: uncaught (in promise): typeerror: failed to register a serviceworker: an unknown error occurred when fetching the script.
typeerror: failed to register a serviceworker: an unknown error occurred when fetching the script.
- create an `<ion-list>` of `<ion-item-sliding>` elements - open the slide menu of one of the elements - have the app update the list in background (reassign list variable) - the list refreshes and elements are not able to use slide gesture.
click the link in the following text on the beta website.
> view the modal phofhyperlink documentation for a full list of options to pass upon creation.
start ionic 4 blank project put ion-checkbox component with disabled attribute and press `tab` button then `space bar` and should get checked.
blank starter project with checkbox press tab key and then space bar will check checkbox
create a new project (blank template), add a button that open a modal with all the code to make it work (copy paste from the doc).
navigate to any split pane example: phofurl the current color is phofcode so this isn 't an issue with rgba not being used.
<img width="1383" alt="screen shot at 5 39 28 pm" src=" phofurl
navigate to any action sheet test and press a button: phofurl
use this public repo : phofurl step 1 : `ng serve` you should be at this url phofurl step 2 : click on "goto b1 (absolute path)" you should be at this new url phofurl step 3 : click on "goto a1 (absolute path)" you should be back at phofurl
1. start on a page using tabs.
2. navigate to a different page using at least two tabs.
3. clicking on the tab buttons does not update the tab pages.
has two branches: master: beta.17 - shows correct behavior usebeta19: beta.19 - shows incorrect behavior be sure to `npm i` each time you switch branches.
i forgot to do this once and was kinda confused for a bit... :)
as specified by manu in the beta.18 release notes, i have refactored my tabs page to lazy load 4 different tabs.
for this example, i 'll just focus on the `home` tab..in my `tabs.router.module.ts` i have: phofcode and a `home.module.ts` with the following routes: phofcode i should expect to be routed to the `homepage` with a url such as `tabs/home` and i should be routed to an artist page when click on a profile from home page with a url like `tabs/home/artist/uid` by using within my `home.page.ts`.
am successfully routed artist page, but transition animation is not one expected.
notice how animation slides up from bottom instead of from side?
that is not animation would expect from using `navigateforwad` method.
unless my routes are incorrectly configured, let me know what else you need!
try to call the select method from a tab reference.
two pages, one starts with an queryparam.
use ion-back-button to go back the queryparam is gone.
bind this to button and on next page from press navbar back > onload() { > {}, { > duration:300, > easing:"easy-out", direction: 'back ' }) }
i updated from beta 17 to 18 and the working 'slides' failed.
initiate an ionic project with the starter > ionic start myapp tabs --type=angular copy paste the following code snippts under ion-header sector of the home page
starting with a blank ionic 4 app, upgraded to beta 18, add an `ion-virtual-scroll` area to the home page.
i used the sample code from phofurl as a starting point.
insert code bellow to reproduce
create an ion-slides with 2 slides and set autoheight to true.
have slide 1 contain nothing but a spinner and then after a set timeout switch to a list of 10 items.
the height of the container will not update and will be whatever the height of the spinner was.
1. go to the demo phofhyperlink ; 2. if your display is already ltr, skip to 4; 3. click on the "toggle ltr / rtl" button in order to get a ltr display; 4. scroll down a bit to the grids, and observe the correct offsets, pulls, and pushs; 5. click on "toggle ltr / rtl" button in order get an rtl display; 6. notice incorrect offsets, pulls, and pushs.
1.create ionic v17 project with below code.
2.click on get list button, you can see the value is not displayed for select box.
3.click on the field and the value gets displayed now.
1.create ionic v4 beta17 app with the below code.
2.open console and click on reset button.
3.in the console window, you will see the value changes of input box is fired and the pristine status is false.and selectbox valuechanges is not fired which is working as expected.
4.replace ion-input with html5 input, and repeat step2.
now valuechanges of textbox not fired.
1. create a loading with `await 2. done
following the installation instructions on phofurl phofcode
just call the enable() method on an instantiated form field, that has an attribute of disabled: true
just add this on your ionic 4 app `<ion-datetime display-format="mmm dd, yyyy"></ion-datetime>` then run on your android device.
try playing with the scroll.
i have tested on android 7 honor lite and android 8 samsung j4 phone.
in android 7 phone, scrolling to all is slow, while on samsung j4, its slow year only.
i think it gets slower the more the characters are like the year format which has 4 and also probably depending how fast device is.
1. create a new ionic project 2. add the code below to an html template and run the project using `npm run start` 3. open the project in chrome (default phofurl 4. notice that the browser tab locks up and eventually crashes
1. git clone phofurl 1. npm i, etc 1. ionic serve 1. open console if you click the top buttons, you will see a message in the console log, and you will see the value after "part:" on the page change.
if you click bottom buttons will see neither a message in console log nor "part:" change, though events are identically wired.
set the variables from above.
create a card and header: phofcode
the sample given at the docs is enough to produce the problem.
when you have larger components used as the base for the modal, issue becomes more dramatic.
@persn ( #15301 ) created an repository for that which is a good example -> phofurl if you tap the button, sometimes it works, but after scrolling, it will not
create a new ionic app: `ionic start test blank --type=angular` add the following code ...
use this code, try and re-order list.
the first two items with be moveable.
the third won 't be.
once you 've tried to move the third item, all of the items will then be non-movable.
create 1st page with dummy list of items.
create 2nd page as item detail page with tabs.
path ` 'list/:id '` add ion-tabs to the item detail page and create router paths.
here am declare ionicconfig in app.module.ts.
i am attached with my code for more details.
1. create an ion slides, and fire when slide changed.
2. in slide changed, change the array of ion segment will display.
plunker zip file ion segment bug.zip phofhyperlink
clone the v4.0.0-beta13 tabs template and open in devapp on a ios device (also tested with cordova build).
overscroll the hometab content and after releasing try to click on an other tab.
it will only switch the tab if the animation has finished.
- create a reactive form using @angular/forms - create a form in html template and bind the controls using ion-input tag and set type="number" - execute the app and try to modify the value in the input box - type of value should be number but it returns string
create a ion-slides containing multiple ion-slide and one ion-slides directed vertically
1. access phofurl 2. select the demo source icon to the top right of the preview area has an icon that looks like two brackets < > the link attempts to load phofurl the correct link appears to be phofurl
add the tag inside the "contactslistmodalpage"
1. go to phofurl 2. click on the buttons as illustrated in the above gif.
1. ionic sidemenu generator 2. add to the e2e test so that it navigates the "list" link and verifies the navigation 3. e2e passes o/ 4. change the sidemenu items so they have a click handler, and click handler does routing 5. e2e still passes o/ 6. now, change click handler so that it displays and dismisses a loading controller a few times in a promise chain before redirecting expected: e2e still passes actual: fails before loading even shows
attempt to create a toast item with an index: this.toastctrl.create({ message: 'test.
', duration: 3000, position: 'top ', overlayindex: '1000 ' })
add a new sliding item with ion-options on both slots with one button each.
create several slides in your app.
add ionic screen orientation plugin.
subscribe to a orientation change.
try to update slides on orientation change.
the slides will now be in a wrong position whenever the orientation changes.
create a new application with 3 tabs.
create a list with icons in the 3 root pages.
if the bug doesnt appear, refresh and try again.
this is the code for invoking inappbrowser: here is the service provide incrementer: var id = setinterval(function(){ i++; i); }, 1000);
1. generate an ionic 4 application: `ionic start testapp blank --type angular --cordova` 2. build the application: `ionic cordova build ios --prod` 3. run the application on an iphone (simulator or device): the application works as expected 4. add `<preference />` to config.xml as described in phofurl 5.
`rm -rf plugins` 7. repeat step 2 and 3.
8. the application does not show up, you see only a white screen.
instead of following steps 1 to 6 manually, you can also check out the github project at phofurl and proceed immediately to step 7. the github project contains exact result of following steps 1 to 6.
any <ion-item> with global.scss set as below :root{ --inner-padding-end: 0px; } .item-inner padding-right will still exist
ionic serve pick a date press button "test" check console logs
clone ionic conference app phofurl switch to core-update branch run ionic serve click into one of the events on the schedule tab click the speakers tab click the schedule tab observe you are now back to root of tab, and have lost history for that tab phofcode
when button is clicked i get the above error.
create an simple page with following html template: phofcode the ion-slides element wont use the 100% height of the parent content.
create a capacitor project with 3 pages.
run on electron and navigate from a to b and back to a.
(1) create a virtual list of 1000 items.
(2) on click of an element store the elements id, and then using ngclass or [style.x] have the style of the selected item change.
(3) it will work for a little while but as you scroll further down it will stop working, and
1. generate a tabs starter and launch it 2. move focus to one of the non-activated tabs by using the tab key only, and hit enter.
the tab is not activated.
3. now left mouseclick anywhere in the window.
4. move focus again to one of the non-activated tabs by means of keyboard and hit enter.
this now does activate tab.
it 's reproduceable with the code shown below on an iphone.
run ionic serve, update app a few times, observe behavior.
try it for an hour or so at most.
1. create a new ionic 4 project, ex: tabs 2. follow the steps to add described here: phofurl 3. launch the app in the simulator: `ionic cordova emulate ios -lc` 4. result: blank screen error in safari console: `typeerror: is not a function.
(in sync: true }) ', is an instance of object)`
reference github repo: phofurl * run the example repo * click on the "more" options menu found on the default `app-home` component.
* expected: clicking the link should display `app-home-options-menu` component.
ionic start test (v4, blank, with cordova) cd test ionic cordova platform add android ionic cordova run android
connect to github with an account that has no personal repos but that is part of an organization.
gc" but got no errors (screenshot below): qq phofimage
1. adding ionic core via the cdn <script src=" phofurl
following instructions on ionic framework to start hello world application.
1. npm install -g ionic cordova 2. ionic start helloworld blank 3. cd helloworld 4. ionic serve application starts on 8100 port but any changes to code is not getting detected on browser even manual refresh dosen 't bring up changes.
i doubt there is something wrong with builder.
install the latest ionic cli: `npm i -g ionic@rc` create an ionic-angular project (4+) using the tabs starter.
`ionic start` serve the application (`ionic serve`) and the bug is present without any changes being made.
create a new input field with a fixed width.
input long text, even gibberish.
once input exceeds the visible area, try to drag the text, there will be no movement on the input field.
when starting with a tab-starter, building in --prod mode is working.
it must have to do with a configuration within the app.
these bug happen when you nav a new page in a modal, i have create repository for this: phofurl phofcode run `sudo ionic cordova prepare ios`, and build on iphone by xcode.
then, you can reproduce the bug show as the picture.
i tried add newest but it is not work
here is a plunker i put together phofurl you can verify that when you use the button "show page2" the slider stops navigating (firing ionslidedidchange stops).
on a test page, set change detection to `onpush`: phofcode use `async` pipe in your template as usual: phofcode toggle `canreorder$` to test.
having an "isscrolling" content and try to scroll to another place with a function on ios
1. create a sample project ionic start testpopover tutorial 2. modify hello-ionic component as below
just delete a property inside a class bound to an ion input model or set it to undefined.
use the standard ionic4 tabs demo.
{ "$schema": "version": 1, "newprojectroot": "projects", "projects": { "my-app": { "root": "", "projecttype": "application", "architect": { "build": "builder": "options": "outputpath": "dist", "index": "src/index.html", "main": "src/app/main.ts", "tsconfig": "src/tsconfig.app.json", "assets": [ "glob": "
open the app on firefox
1. clone this repo 2. switch to the `cordova/ionic` branch 3.
`npm install` 4. add `"strict": true` in `tsconfig.json` compiler 's options 5.
results may be unpredictable due to strange and random nature of the issue.
1. create an ionic project 2. override some styles in your app.scss (was not honoring .`col{ padding: 0}` in my project.
other classes rendered correctly) 3. build, run and verify styles display as set 4. add > 72 color entries (top level keys) to color map 5. build, run and verify styles are wonky tried deleting an existing style and adding the same one initially attempted.
the bug also manifests even if the 73rd color is not even referenced.
build the application for production with the --prod flag in an ios 11.3 device.
create a float label and input with type number and then enter "e" as a value and deselect the input field.
- create a page with 250 or more form fields (all types of `<input>`, `<select>`, `<textarea>`).
i use a custom webpack.config.js, which relies in plugin for prod setting: phofcode here are my dependencies in package.json: phofcode didn 't work with latest angular 5 and rxjs 5.5 either.
i downgraded because my application became less responsive.
i have tried later version of webkack too (3.11 and 4.5), unsuccessfully.
1. try to swipe one of the items that has sliding options (as written in the label).
2. the swipe direction is incorrect regarding the buttons position and rtl.
3. the buttons appear only after you swipe the entire item length, so they are correctly placed in respect to rtl, but swiping direction is incorrect.
1. create component with stencil with `shadow: true` set 2. add menu 3. add peer element with `main` attribute set.
4. execute code, see bug 5. set `shadow: false` and see it work as expected.
add the following to html: phofcode
if you have a look on gesture documentation, phofurl you can see the same error we have with hammer, documented in some issues and forum posts.
when you pan over component, you have first to pan horizontally before a vertical pan recognized.
- setup a project like described here - > ( phofurl - set the root page the one that have menu-tabs - navigate from side-menu to another page pushing the page (on setroot its works)
try opening the menu, either using the `<ion-menu-button>` in the header toolbar, or using the provided "open menu" button that calls `<ion-menu>` 's `open()` method.
1. try swiping an item from left to right: nothing happens, even though some `<ion-item-options side="left">` element(s) have been specified in code.
2. swipe an item from right to left: buttons appear, as if they had been specified with `side="right"`
1. ionic start refresher blank --v2 2. add this code on home.html as the first child of` <ion-content>` phofcode 3. add this code on home.ts phofcode 4. ionic platform add windows 5. ionic build windows 6. run the project on visual studio 2015 with simulator (use basic touch mode) or on real surface 7. try to drag from top
i have removed entire android studio and all files and folder on macos and then i have installed the last version of android studio and after that i have created a test application on android studio to test it finally the app runs correctly with virtual device.
later i have created an app with ionic tried to test it, but get this error "panic: missing emulator engine program for 'x86 ' cpu."
try to set up a prod release apk.
i build a dev version just fine.
for 2 here 's a sample repo to reproduce phofurl
i simply created an iframe and used a dynamic url as [src].
left 'allowfullscreen ' and i can indeed click on the button.
this is a gif i created showcasing the problem: phofimage
build and install app on ipad, or run from xcode.
navigate from the sidebar to the 'list ' page which contains the video tag.
navigate to this same page repeatedly.
eventually, i 've found 17 times to be the magic number, video tag fails and does not load video.
1) create 1 password field 2) put any random password there.
3) get out of that field.
click on any place outside that field 4) get to that field again.
it will clear previous password.
i tried to reinstall the plugins and reinstall the android platform .
also i created a new project and the same is happening .
select the first item e.g.
januar, 1, 2017 close with "done" nothing is rendered.
januar, 2, 2016 ==> the "2, 2016" is displayed, but not the januar.
select a month with 30 days per month e.g.
: apr 30, 2018 close with "done" try to select a date with 31 days e.g.
launch app (this bug appear only while first launch of app), click searchbar.
macos sierra with ionic cli 3.19.0. issue any cli command (except for "ionic cordova ..." commands) and you 'll see this > ionic serve --lab --locale > the ionic cli has an update available (3.19.0 => 3.20.0)!
would you like to in stall it?
yes > npm i -g ionic@latest running command - done!
[ok] updated ionic cli to 3.20.0!
> please re-run your command.
note: you can downgrade to your old version by running: npm i -g ionic@3.19.0 >$ ionic serve --lab --locale the ionic has an update available (3.19.0 => 3.20.0)!
would you like to in stall it?
pull an image from firebase storage, e.g.
: ` const ref = => { t t t t t t t t t t t t }); `
run `npm run lint` => no errors run `ionic serve` => no errors run `ionic cordova android` => bildschirmfoto vom phofimage thank you
use ion-range with [step], [snaps], [min] and [max] attributes.
- open phofurl on an ios device - open a detail page on the schedule list and notice you can swipe to go back
- open phofurl on an ios device - try to open a sliding item and notice that you can still scroll while opening it
- open phofurl on a device - slide an item on the schedule list and click on it - notice the outline on the button
using phofurl you can see that the menu only opens on the home page.
if you remove the menu from the home page, it will work on page 1
on a desktop device: - add a favorite in the ionic-stencil conf app - remove that favorite - notice the confirmation alert has a scrollbar
- pull down the master branch of the ionic-stencil conf app - run it in chrome with device mode and notice that on android devices the color is not correct but in ios devices, it is (i can also reproduce on an actual device)
i 've set up a plunk phofhyperlink ; see code in `app/home.page.html` and `app/home.page.ts`.
<ion-datetime displayformat="mmm d, hh:mm a" </ion-datetime> see example : phofurl
1. create a blank ionic --v2 app 2. add one `<ion-range>` to the home.html file 3. build and run on surface, try to drag the slider by hand-touch on the screen
- create simple view and add a list item wrapped toggle - run `ionic cordova platform add browser` and `ionic cordova run browser`
just run `ionic cordova run android`
just create a plain text file object and inspect the result.
this happend `$ serve` `$ build`
1. ionic start test-v4 blank 1. choose v4 app when asked 1. cd test-v4 1. ionic serve
the inappbrowser opens immediately with some external, closes and pushes to a page with segments in it.
try to tap between the segments.
create an ionicpage and access the page using the 2 methods above
change and save some file in a ionic project's src folder.
wait the live reload update the page in the browser.
see an older version of the page (sometimes).
save file again or save some related file (for example, class of a page related to a template).
wait live reload update page in browser.
see newer version of (sometimes).
1) in a new project, set `$background-color: in `variables.scss`.
2) add an `<ion-range 3) preview for android (`ionic serve` and emulate android device).
app in pro: phofurl the banner is not being display at top and before playing interstitial is displayed as test ad.
use ionic 3.19.1 , - ionic start blank myapp - ionic platform add ios && ionic build ios - open xcode proj in platform/ios and simulate app.
1. clone this repo: phofurl & npm i (or use ionic@canary to create your own) 1. ionic serve 1. deal with sadness when you see blank content on page :( 1. open and remove `ion-page` tags rejoice greatly as the world is now your oyster i have no idea if this is an issue with the `ionic-page` tags themselves or if we should just remove them from the template and not use them.
1. create blank app 2. on first page have button to push a second page 3. on second page add a ionviewcanleave function with a small delay 4. tap the back button but slide slightly to left while tapping
i believe starting a blank project, placing the config.xml and package.json, build and run on the devices above lead to problem.
simply create a new project implementing the tabs using `ionic start myionicproject tabs`.
use the code snippet provided as html for an ionic page.
changing [disabled] to [readonly] fixes this.
install plugin - "phonegap-plugin-push": "2.1.3" running in ios received one push notify after call of notify send the app of one page that contains populate vars.
focus the input element and change the value.
you will see that change is reflected.
then press tab and use the arrow keys.
the input is not updated.
run any ionic app with `ionic serve`, and then open it in inappbrowser from any other cordova app (don 't forget to install first).
show, hide, and show a tab using `*ngif` with a timeout (as a `settimeout()`, http request, database query, or anything that is async and takes a while to complete)
look folowing code, install it on mobile device
- create new ionic project, template "super" (or "conference" without crosswalk) - ionic cordova run android (i 'm using api 27 emu) - scrollbars are not showing while scrolling within the emulator
build ionic pwa using npm run ionic:build --prod use sw-precache with the provided configs.
make an update to your ionic/angular code and push the update to hosting.
the error occurs on switching to another page after update of the service worker.
_also added a no-cache header to my service-worker on firebase hosting_
the code below is used in a vuejs application utilizing ionic frame work components
1. go to mainland china (or ssh to one machine in mainland 2. turn off vpn if any 3. open terminal 4. enter `ionic start ipfs-demo super`
create a new blank ionic app.
copy this markup into ion-content in home.html phofcode copy this into the homepage component in home.ts phofcode open the app on an android device (i used the ionic dev app
install: `<plugin spec="git+ phofurl />` `<plugin spec="2.0.5" />` set following settings phofcode focus on any input field and observe status bar
any ion-input in ion-content trigger bottom padding will reproduce this bug when keyboard closing(in mobile view).
add to the url of a production pwa.
in 3.7 this worked: phofurl in 3.8 it doesn 't work (or sometimes just works the first time): phofurl phofcode
place a virtual scroll below some container element with a certain height phofurl phofcode
1. set up an alert like: phofcode 2. clicking on the input from an actual device, gives you the option to "return/submit" the input form.
3. clicking on the "return/submit" from device 's keypad dismisses popup with no callback.
edit: looking at code it seems like inputs on alerts have a `handler`... though this is undocumented.
will give it a try.
edit2: nvm, `handler` didn 't work
* create a component that contains an `ion-slides` control * use css to rotate that component any amount using `{ transform: rotate(xdeg); }` * notice that the movement of the `ion-slides` control no longer match the direction of your input
create a view with tabs on the bottom and a text field at the top.
click into the text field to open the keyboard.
rotate device and then close keyboard.
open our e2e test for core: phofurl
1. create a simple `alert` with inputs 2. fill the inputs enough that the content needs scroll left/right 3. touch-hold to bring up the normal ios magnifier for scrolling back and forth in text 4. drag finger all the way to left/right 5. input does not scroll
1. create a ion-slides with content.
2. move to other slide.
3. tap a content and move to other page.
5. back to page with slides.
the width and position for current slide is bad.
> ionic start myapp tabs add button to home page, with presentactionsheet() handler > ionic serve in chrome version (official build) (64-bit) scrollbars are displayed: scrollbars-actionsheet phofimage
open a modalcontroller modal, press the back button, notice that the modal does not close but the page behind it navigates back.
clone github repo, run on device and scan nfc tag.
1. select <ion-input> in ios apps(only iphone) 2. display full screen suggestions.
3. scroll full screen suggestions.
4. suggestions window falls instantly.
scroll to position that part of svg will not be visible.
you are scrolled on the different place then when clicked on the button.
1) create slides with inputs in them 2) set the focus to an input that is out of view
multiple horizontal scroll cards about 10 to 15. not using wkwebview or without setting is causing the issue
1. create a blank ionic project.
`ionic start testproject blank` 2. add a provider.
`ionic generate provider testprovider` 3. inject the provider into the home page component 's constructor.
4. sometimes, the error occurs.
if it doesn 't occur, continue adding new providers and injecting them into the home page component, replacing previously injected providers.
(the home page component constructor only contains one user-defined provider at a time.)
really dont know, its totally intermitent and happens in just one view.
i tryed remove all the code (html/js) and leave like a very dummy component, but even thought receiving this same error.
1. npm install @ionic/core 2. add @ionic/core to stencil.config.ts in the collections property 3. npm run dev
follow current behavior on presumably any ionic app with ion-input.
i have used the code below.
then $ 'ionic serve ' for the browser (chrome).
and '$ ionic cordova emulate ios --livereload ' for emulator, and then also opened the project in xcode and run simulator there.
this code produced working buttons, and then after a certain period of time of reloading the buttons stopped working.
the issue is that buttons don 't work for me on emulator or simulator.
just run `ionic cordova run android --device`.
it repeats on any app for me.
this is the live application try to select 2 box, then select the 3rd one it will not be selected, but if you click on it again it will be selected.
add "proxies" information to ionic.config.json with a proxyurl pointed at a cors protected endpoint.
change provider url to point to localhost.
try customizing things like ion-item, ion-tabs, ion-segment, ion-button extensively.
you very quickly get outside the limited theming capabilities that come with ionic.
just implements ion-slides and set direction="vertical" slidesperview="2".
build a multi select box.
phofurl with a lot of items in the list, 30 or so.
build the code to an iphone.
swipe up and down one hand, right thumb doing the scrolling.
nest a virtualscroll inside other components with unclear content dimensions.
create a provider with 2 variable to store ngmodel.
and 2 options arrays to use *ngfor on ion-option build page (look at stackblitz)
create a form whith, for example, 5 fixed text input, with floating labels.
2. below, create a button which insert few text input dynamically on click.
this make scroll to se the new added content.
3. scroll up to see the first text inputs.
the floating labels of these inputs are not shown
typing at console "ionic start test tabs".
if i exec the command with administrator privileges i get the same error.
1.in dashboard page click on edit button.it will navigate to customer page(see url.it is changed to /customer/customerid).
2.in customer page, you will see the customer info and other customers list, there click edit from other customers list.this will open another page.
(see url.it is changed to /customer/customerid).
3.click on browser back button u can see that the url is changed but the view is not updated.
if i repeat steps 1 & 2 then click on nav back button instead of browser button then it works correctly.both the url and view gets updated.
is there something i am doing wrong because browser back button does not work as expected or this issue of ionic framework.
open a popover and close it.
i have a login page that loads first if the user is not logged i have put in the login page only the <ion-content> element and the <ion-input> and it does not work
if you look at the v1 documentation for ionlist phofhyperlink the example demonstrates the missing functionality i 've described.
create a sample application with code below.
i didn 't do splunker as this is issue only in real device or simulator.
1. create a virtual scroll list with 10 items.
2. display list in resized window (416px) of chrome 3. resize window to maximize 4. resize window to about ~416px virtualscroll_416px phofimage 5. click maximize button to resize window again to 1280px.
create a new app using `ionic start testapp tabs`.
run the app as an ios app on the emulator using `ionic cordova emulate ios`.
the code fails to build, showing many warnings and errors during the compilation of the asset catalog.
create an array of items containing any number of strings.
then write code to display them using tags <ion-select> <ion-option>.
you will see that first option is displayed as the last option in the selection list.
- ionic serve - go to a new page, this page has a ifram with loaded " phofurl - in the iframe, there is a button.
when you click on the button, this iframe will redirect to another url " phofurl - click back button in ionic navbar then the app will return to the previous page
1. create a new ionic project from the command line: `ionic start comment-bug blank` 2. add this comment into the * home.ts * module: /
using to set a tab
create a new app, try to run it on and android 5.x device
run the command prompted in the channels sections on the ionic dashboard .
add a subpage push the subpage on the rootpage with the navcontroller back button is shown on the screen now ==> title is placed more to right than it was on root page
connect the device, run with --device flag activated, sometimes it works, and sometimes doesn 't.
re plug doesn 't work, but restart the computer does.
`ionic start myapp sidemenu` test differences between: `openpage(page) { }` and `openpage(page) { }`
we are using the following versions for platform and libraries: xcode: 9.2 cordova ios platform: 4.2.1 ionic: 3.19.0 package.json phofcode
start a new project (i chose tabs) install a ionic-native plugin (i chose qr-scanner) run ionic cordova run/build android
run `ionic cordova build android` on a new ionic installation.
i run the code with `ionic cordova build ios`
create a new blank app using `ionic start postcss` build the android app doing `ionic cordova build android` and you can see log with the warn or error message phofcode
start the ionic starter application with tabs and click on a different tab.
after that switch from portrait mode to landscape => tabs are above header and overlapping the statusbar.
add a plugin using the ionic-cli with a git repo as its location requiring basic authentication.
import ionic-angular in a library and build with angular 5 having `fulltemplatetypecheck` to `true` in `angularcompileroptions`
1.click on go to dashboard button in homescreen 2.click browser back button when dashboard page is loaded.you will see home in url but dashboard is the currently active page .
1. import meta service 2. add new meta tag
on a new computer, i installed: * java * ant * andrioid studio * nodejs ionic and cordova and after everything configured just like the ionic documents, i created a new basic app: `ionic start myapp tabs` the application even runs normally, but when i go to debug: `ionic cordova run android -lc` i get the following message: phofcode
2. open menu, click settings page.
3. hit browser back button.
do observe url bar and app header.
1) `ionic cordova build android` 2) run the app on an android 5.0 or 6.0 emulator 3) installed cordova plugins: {}, "cordova-plugin-device": {}, {}, {}, "ionic-plugin-keyboard": "cordova-plugin-camera": { " ", " " }, "cordova-plugin-file": "cordova-plugin-compat": "cordova-plugin-fcm": "cordova-plugin-iosrtc": {}
npm install -g ionic cordova ionic start myapp blank ionic generate page modal add code below and other app module entries, etc ionic cordova emulate android
scroll a list of >20 items for about 10 seconds
just run on device android 4.4.
(if we change the view from vertical to horizontal it 's possible to recover the popover on the screen)
is it really needed in this case ?
open the calendar on ios and create a new event, you will see the behavior natively on date and time ( you can go in both direction)
`ionic cordova run android --device` or `ionic cordova run android`
open a toast in an app using ionic core and stencil and then use the `listen` code above.
notice `diddismiss` never fires, but `willdismiss` works fine.
open google chrome developer and select iphone layout device or launh app in ios simulator.
a sample project demonstrating the problem can be found here phofhyperlink .
the problem can be observed when entering page1 (uses `ionviewdidiload`) or page2(uses `ionviewdidenter`) from the sidemenu.
a workaround using inside of `ionviewdidenter` can be observed when entering page3.
`ionic start myapp blank` `ionic serve -l` _make code change._
i used the code from the starter ionic template super:
if i run `ionic serve`, the application work correctly.
however if i run `ionic cordova build ios --prod`, it failed into this error phofcode
1- run project with lazy loading feature 2- make ur device offline 3- click on new page or modal to open (the app will try to load the chunk of that page or modal) 4- back online 5- click again on the page or modal to open (it will not open anymore)
create an angular component named custom-navbar.
define the html for the custom component as: phofcode create an ionic page.
use custom-navbar and add embedded content of an ion-button using html like: phofcode inspecting the source, you 'll see the classes applied to "correct style" button include bar-button, bar-button-md (assuming browser), bar-button-default, and bar-button-default-md.
these classes are not applied to "incorrect style" button.
this can be worked around by applying style classes manually.
this occurs in reverse, as well.
to reproduce, create an angular component named custom-button.
define html for custom component as: phofcode create ionic page.
use custom-button in ion-navbar using html like: phofcode my primary motivation for this pattern is that i have a header button with moderately complex logic that 's re-used across all main pages of my app.
i wanted to consolidate this logic in one custom component.
just create a simple page with a `<video>` tag and a button, then use the code above to start play when the user click on the button.
try to compile and see what happens.
i don 't provide any stackblitz/plunker because the issue is related to transcript compiling process.
have an ion-select set as popover, on viewdidshow call the .open on the viewchild of that select.
have 2 ion selects, have the second ones data be dependant on the first one, now try and show second popover when value has changed on first one.
` <div style="display: flex"> <ion-item style="flex: 1; margin-right: 10px;" class="greenzone-item"> <ion-label floating color="primary">waste stream</ion-label> <ion-select id="wastestream" (ionblur)="test()" showbackdrop="false" class="no-scroll" interface="popover" #wastestream formtype.wastestream)"> <ion-option [value]="wastestream" *ngfor="let wastestream of </ion-select> </ion-item> <ion-item style="flex: 1; margin-right: 10px;" class="greenzone-item"> <ion-label floating type</ion-label> <ion-select id="containertype" disabled = ?
false : true}}" class="no-scroll" interface="popover" #containertype <ion-option [value]="containertype" *ngfor="let containertype of </ion-select> </ion-item> </div>` ` wastestream;` ` ionviewdidload() { this.wastestream.open(); }` phofcode cheers
please try to open about 5-10 different items in different random parts of list (at end, at begin, in middle, etc) and try to click button.
make a virtual-scroll list on ios, scroll down a bit
1. run the `packages/demos/angular` application 1. go to the group inputs test page 1. click the ionic select 1. choose something other than what is already chosen receive the error
1. capture a photo via media-capture plugin (take photo and click "use" in preview) 2. in the media callback, push another page onto the nav stack.
page title bar is partially occluded by status bar
create an app with tabs starter on ionic 3.9.2. then include an `ion-toolbar` inside an `ion-footer` in one of the pages.
1. launch `@ionic/demos/angular` app 1. open console 1. go to the basic inputs page 1. click the datetime picker change the date in some way via either the month, day, or year sliders click "done" see error
use the related code below, and run `ionic serve`
create project and in a page put 2 text input fields, fill the first one, then fill the second one, and after that try to go back to the first one
so far on ios 11, there are no steps required, it just happens like that.
whereas in android no issue
1. add `<input type="file" accept="image/*"/>` to a page (a modal in this case) 2. click the input button 3. select a source and an image from that source 4. the ionic ui is screwed up
use the jsx posted above in a render function with the latest ionic/core and stencil/core
i created the jenkins item with free configuration and run the following windows batch and run several times: phofcode
create an ion-slides directive, put a few ion-slide in there, try to set up a parallax background.
see code below for my "closest to working" trial.
add a longer title and subtitle to a card with a background image.
1. create application with two pages 2. on page one, create a ion-datetime control 3. set timer to programatically navigate to second page 4. open application and click on ion-datetime control to open the modal 5. wait for timer to navigate second screen 6. see that the datetime picker has remained open after navigation
add ion-select component and set `interface="popover"` and define `selectoptions` for the component as: phofcode the component 's functionality breaks with this defined.
1. download ionic conference app demo from github.
2. npm install to install all required plugins.
3. remove the crosswalk plugin in order to mimimize the apk size.
4. remove google maps link from index html file, because google is blocked by state fire wall 5. run the app into an android virtual device( x86 image, android 5.1.1) with following command ionic cordova run android --livereload --target avd511
- `git clone phofurl && npm install` - `npm link` the latest ionic/core - `npm run dev`
just follow instructions under "current behavior"
i have wasted my time on ionic components with bad styling, and you automatically are tending to send back need info, cannot reproduce and so on.
i decided to create an alternative next to the ionic.
phofurl the only component which was useful, and hasn 't got any bug yet.
(i have tried also tens of native plugins), the ion-grid.
(even with the header i had problems - orientation issue raised) i just make a note that ionic team is simply not fixing years old bugs, even if it 's trivial.
i have figured out when i created my virtual scroll, that your problem might be that when you scroll down and scroll up afterwards, the upper item is not in middle of list.
so even with a simple button, problem occurs.
(when i set buffer ratio a little bit higher, i had got better experience) think your translate is wrong, positioning mid element in list as an upper element.
so rendering hasn 't got enough time even with very simply tags.
at moment is not my task to recreate ionic, have a years time project, but i 'm going recreate some of tags.
on component level, agile methodology simply not working in way, that we are fixing bug just because somebody raised, at end we are fixing anything else in component, even if we seen we problem.
need make some improvement on my common component but after 3 days work, virtual scroll better than yours, very likely much more simpler.
(i 'm using translate) at moment it 's based on ionic, but will recreate one more component, you can use without ionic.
your components are totally over complicated on code level (that 's why they so buggy), customized styling which works only one browser.
it 's how ionic should been developed at first place.
developers got promise hybrid apps they don 't need test basics every platform, but reality under macos, styles working.
interestingly under iphone 8 little help it seems be working.
(i admit maybe it 's apple fault, problem is, javascript development never worked different way, for example translate3d was just slightly standardized, should been used - it 's supported list, reality working every scenario - realized working virtual scroll working elsewhere, tried figure out, just gave up after 2 days heavy testing, what might be reason digging into ionic code base) thought some components too heavy me recreate, reality opposite.
there core cordova shell which might be useful, components waste of time, it should been much more tested, or many guys will go away looking for somewhere else.
if would start over project, would create thenative apps instead, because at least you can trust apple google, they don 't make crap, or fix them right away.
(android studio has function, when can send your log right away, if saw something, instead missing reproduction phase)
1. add the code below to an app 2. compile and run in an ios device 3. click the selector 4. start scrolling in small distances/scrollings.
5. note that the checkboxes gets checked.
see the github example: go to any tab outside home like contact or about.
result: console.log displays a message and also a window.alert pops.
this are called in the onload handler in home.ts
use that and try to focus an item input in that is in the bottom of the screen
github repository phofhyperlink , or: 1. start blank ionic project 2. add these lines to config.xml (enable uiwebview): phofcode 3. add ios platform 4. run app on ios simulator or real device.
5. rotate device: portrait > landscape > portrait 6. see the problem when rotated to landscape, and when getting back to portrait.
start new ionic project with cordova integration: phofcode add plugin: phofcode add ios platform: phofcode the last command creates an `ios/project name` folder inside `platform` folder where the *-info.plist file is located.
unfortunately the key entry is missing here.
phofcode when manually inserting the key in to the *-info.plist file does function without problems.
resize the window with ion-slides on it, there is a huge delay (2*200 ms?)
before the new width is being set for each ion-slide.
using <meta content="yes">, "add to home screen" on ios safari, and start from home screen.
tap <button (click)="onclick()"> or <h1 tappable (click)="onclick()"> element.
- install ionic blank - put about 3000 span into html - tap the content - see long recalculates in devtools you can add some variable incrementation on tap event to see dealyed reaction i was able to identify the problem, it is causing by universally applied css rule phofcode i think the main purpose of this reset rule is because of some elements undesired default outlines so the solution is to specify this elements.
please see solution code below.
1. create a standard tabs app 2. add cordova android platfrom 3. add localnotifications plugin phofurl 4. add a button with click handler which will add a notification like this phofcode 5. log a message when the notification is clicked phofcode 6. run the app, schedule the notification, go to android home screen, kill the app (the recent apps screen plus x button) , wait 60 seconds and click notification.
the app will boot and on click handler will log message "myapp notification click 123".
7. add ionic lazy loading to all pages as described in docs, something like this phofcode 8. repeat step 6, app will boot correctly but notification on handler won 't be called.
ionic lazy loading code somehow breaks cordova deviceready callback order.
localnotifications has this code phofcode which triggers callbacks like `click` to fire.
however ionic => { ... }` isn 't executed and isn 't registered.
it seems that lazy loading delays execution of platform ready callback and in this way breaks native plugins like localnotifications.
1. clone this repo: phofurl 2.
`npm start` to run the app (the build warning can be safely ignored) 5. enter any login pass, then navigate a bit between home and about views 6. click back/next on your navigator to trigger the error (tested on chrome)
1, if you have virtual scroll in the tabs and orientation has been changed, then you need to make the following: phofcode 2, if you have an ion-header next to the ion-content and you are making orientation change, i had to fix it on the ion-content, as margin-top is not calculated properly: phofcode reproduce (to make it more reproducible): 1, create two tabs with virtual scroll.
each tab contains same height of items per virtual scroll, but different height of items per tab.
2, go to next tab 3, go chrome developer tools 4, switch handheld mode 5, switch landscape mode 6, switch back portrait mode 7, repeat 5-6 several times.
the margin-top will be corrupted randomly.
8, virtual scroll does not calculate height correctly, when it goes back portrait mode.
i had force 2. point mentioned earlier.
you can do also: 1, go next tab 2, go landscape mode 3, go back previous tab 4, virtual scroll does not calculate height correctly, resize should be manually triggered on switch.
look at fact that item size in scroll is different per tab.
consider create a complex with buttons and with different heights make future testing easier, instead of labeling bugs "non-reproducible"
i have installed a vmware, and an iphone emulator with xcode.
latest version of mac os (high sierra), latest version of ios.
the platform identified as "core" under linux and under mac os also.
mac os based safari wasn 't working, even if i made the styling "ios" at default.
mac os based iphone emulator was working.
(maybe some window open/close was stuck some times, very likely because of lagging) mac os based chrome wasn 't working with ios style, but working with md style.
same label in the popover hasn 't been rendered correctly.
(rendered, but it was white) linux based chrome was working in md and in ios case also.
(with small changes, what i reported earlier - orientation change related bugs) the following styles might help you to make it work.
(it 's far from perfect, but at least all the item is visible, and can be changed) - it working under mac os safari.
ionic start test super; cd test; ionic build; ionic cordova platform add android; nano # change adjustresize to adjustpan ionic cordova run android;
1- create tabs based application 2-create page-one view with a button that open a modalview using modalcontroller.
3-create modalview page wiath an ion-segment 4-in one of the segments put the following code :+1: <div <ion-list <ion-item> <ion-thumbnail item-start> </ion-thumbnail> <h2>description goes here</h2> </ion-item> </ion-list> <div <ion-item> <ion-thumbnail item-start> </ion-thumbnail> <h2>photos slides goes here</h2> </ion-item> </div> <div <ion-scroll scrolly="true"> <ion-list scroll="true"> <ion-item> <ion-thumbnail item-start> </ion-thumbnail> <h2>ruby</h2> </ion-item> <ion-item> <ion-thumbnail item-start> </ion-thumbnail> <h2>oscar</h2> </ion-item> ... </ion-list> </ion-scroll> </div> </div>
* add a `ionviewwillenter` on the page used as `[root]` on your `ion-nav` * return a falsy promise on this `ionviewwillenter` * before returning, set a new root to your nav with `setroot()` (you 'll have to do it in a `settimeout()` to have it work) * this new root is not added to the page url (which should be ` phofurl if you navigate from this page, no urls are changed
i wish i could provide steps to reproduce.
it is seemingly random when this happens.
users have only reported it on ios.
ios version does not seem to be related.
it occurs both on wkwebview and uiwebview.
`ionic cordova build android --prod --release`
- go to phofurl - wait 2 seconds for timer that will populate the list of dynamic tabs
given the following interactive 360 content: floripavip.com.br phofhyperlink the gyro works fine if i browse using phofcode but gyro does not wor if i use phofcode nor phofcode
just do a right click and you 'll get the error.
1.define deeplinkconfig in ionicmodule.forroot(): phofcode 2.invoke push(): phofcode
`ionic start test blank` 2. edit `home.html` to add an `<ion-input>` containing an `(ngmodelchange)` 3. save and close.
`ionic build --prod` (*module not found error*) 5. remove `(ngmodelchange)` from `home.html` then save.
`ionic build --prod` (*error is gone*)
see the code snippet below
create a popup window with a virtual scroll-able list inside, rotate your phone - (you can emulate in a browser simply going to developer tools) i have used elements which has a full page or third page of height in the scroll-able list!!!
it 's further edge cases, which has been already fixed some times before in different scenarios.
i 'm using very latest version of ionic 4. it 's inside the popup without header version.
(it works without popup) one card is supposed to be 1/3 of the screen, maybe you have better idea on stylesheet.
(i have two cards in the same row:), but let 's make it easier) phofcode header version: it 's special panel inside, which has got lot 's of columns, item-divider also contains columns, what i cannot share: phofcode special component mine needs to be fixed, but header shouldn 't disappear on scrolling i had to admit that vh is not right thing on rotate, but when we are rotating back, original version component should appear.
when you scroll header shouldn 't disappear on either way landscape mode.
the 100px and 1000px hasn 't caused any troubles previous versions, it was mainly unaffected.
i cannot set %, which i would have liked, or vh
create a slides component backed by an `ngfor` loop over an array.
attempt to slide to a recently added slide.
maybe just on my application.
build a project for ios using `ionic cordova build ios --prod`.
if running on an iphone x device or simulator, you can see that footers including tabs do not have the necessary bottom padding for ios at least up to 11.1 if you do not use `--prod`, the output css is correct.
load this repo ( phofurl up on your device, using devapp or build to app.
go to the detail page, and swipe diagonal down from top left to bottom right as if you are were swiping back, but not going straight across.
a sample application via github phofurl
you can see the full thread on stackoverflow phofhyperlink
scenario 1: step to reproduce: select any value with 31 as a date.
eg select october 31 2017 click done button of ion-datetime picker tap again on ion-datetime change month from october to november without touching date or year values observe that november 31 2017 gets selected which is an invalid date scenario 2: step to reproduce: select any value with date greater than 15. eg select november 20 2017 click done button of ion-datetime picker tap again on ion-datetime change month from november to december without touching date or year values observe that december 20 2017 gets selected which is greater than max allowed value
1. call `movesliding` in the swipe event handler 2. see that it doesn 't have an effect anymore.
* clone repo: phofurl * ionic cordova run android * go to page one * go to bottom and click on search bar tested on lg g4
virtualscroll on android 5.1 with ionic angular 3.8
1. start an app one with contents and infinite scroll 2. click scroll to top, then scroll down.
please follow the following steps using the sample app on github, phofurl recording of the issue can also be viewed on youtube, phofurl 1) start app.
2) scroll all the way down to item 100.
3) make sure scrolling is at a complete stop.
4) click on segment tab, filter 5, in footer to filter virtual scroll list down to 5 items.
5) make sure scrolling is at a complete stop.
6) click on segment tab, all 100, in footer to filter virtual scroll back 100 items.
7) notice nodes display empty.
this is reproducible both ios and in chrome desktop, examined markup and nodes are present when virtual scroll displays blank, however, y position does not get updated and remains be set values way down list.
for example, style tag that sets transform property will have large y values (2394px): `style="transform: translate3d(0px, 2394px, 0px);" ` the nodes are not updated reflect new y values set top like 0px, 126px, etc until user manually scrolls again.
our app uses cell heights of 80px which appears really show issue as seen here.
create a var in a .ts file and use the following in the template: ${{somevar}}
build the provided sample application on ios and just start the app, upon entering some text and selecting an item, the map should navigate to that position the desired functionality can be seen at: phofurl
- open plunker, click on `remove date` button phofurl
i 've spun up a new ionic tabs application with some additional pages and components, and i 'm yet unable to reproduce this error.
run the following commands: - ionic cordova run ios -lc --target=iphone-x - wait for the app to build and run in the simulator - cmd-c - ionic cordova run ios -lc --target=iphone-x wait again for the app to build and then you 'll see it close simulator and open it again (the target param is just to make sure run command opens same simulator device)
click on city input click on foo input click on city input (doesn 't work anymore) click on foo input (doesn 't work anymore)
in package.json scripts: phofcode works: phofcode fails: phofcode output from fail: phofcode
i 've created a sample project using an ionic example.
the app won 't open whenever using the `--prod` flag.
i 've set up a demo code here phofurl i set `enabled` to false when you move the map based on a `boundschange` trigger.
however, that is triggered a little late - by that time, `<ion-refresher>` starts its "peek out" process and gets confused/locked.
sample app: phofurl 1. give keyboard focus to the `<select>` element (easiest way is to click on it and select a value).
2. use the up and down arrow keys to change values 3. type "myvalue" and see that it is now in the selected value 4. give keyboard focus to the `<ion-select>` element.
5. use up and down arrow keys observe how screen scrolls instead of changing values 6. type "myvalue" see that `<ion-select>` is indeed inferior `<select>` does not update value
works with the simplest side menu of ionic.
as of yet have been unable to create a minimal repro.
open a scrollable content on ios and tap around.
i, unfortunately, cannot provide the app here...
1. start with ionic blank starter app 2. convert homepage to a lazily-loaded ionicpage 3. add a new component (mytestcomponent) 4. attempt to display the component using ionic 's modalcontroller from the homepage
add enough elements to a list and drag an element below the lowest visible element (or above the topmost visible element if scrolled down): phofcode tested on ios.
clone the repo given below and try out steps in `current behavior`
create (or generate with ionic cli) an ionic 3 app with 2 ionicpage that import the same components.module
new ionic tabs app.module.ts { modalenter: 'modal-slide-in ', modalleave: 'modal-slide-out ', tabsplacement: 'top ' })
use my footer code (below) and run on ipx in simulator
create an ion-grid with text in each cell and run on iphone x simulator
run ionic serve --lab in the browser and select android as platform.
1. create `<ion-slides>` with a couple of slides 2. add a (swipe) event callback on `<ion-slides>` 3. console log and in the swipe callback.
4. it will incorrectly log `true` for when swiping right from the next-to-last slide to the last one, but it should only be true when swiping right on the last one.
set your app module to use mode: 'md '.
you will need to test in the browser, emulating an ios device via chrome or on a real ios device.
navigate to a page by passing its component to the nav (this doesn 't do deep linking or change the url).
it will still be in material design mode.
then navigate the same component by pushing string name for ionicpage instead of component.
it will now have a "back" button instead of a back arrow, and ui will be in ios mode instead of 'md ' mode.
run ionic start to create a new app an voila no icons just plain boxes.
i haven 't found an easy way to reproduce it atm.
- create a new app with `ionic start myapp tabs` - build with ionic pro and test with ionic view
check related code section below.
in the plunker example, ngmodel starts as null.
if 'a ' is selected, i 'm changing ngmodel back to null but 'aaaaaa ' remains displayed.
if one selects first 'b ' then selects 'a ', the selectedtext is cleared as expected.
it 's only when changing ngmodel to whatever it was before.
null --> 'a ' --> null or 'b ' --> 'a ' --> 'b ' will still display 'a ' while the value of ngmodel will reflect accurately.
1) create an ion-slides component 2) add an ion-slide with an object in it 3) try to swipe
1. show list page in safari 2. toggle menu button after menu is showed, the content behind backdrop can scroll.
create a button and on it 's click opens up ionic-popup having io-radio.
when we click on the button, with some delay the checkmark of selected radio button is shown first then the popup is shown up.
1) use virtual scoll 2) call the to scroll the page to the bottom
create a ionic 2 project add android and browser platforms import platform somewhere in your code, declare some variable for that and then add for instance: platform.platforms()); ionic cordova run android -lc later ionic cordova browser --prod deploy the pwa to a web server and access url of the webapp using chrome android browser in your device.
the ouput for both cases will be "cordova, mobile, android" however if you run the pwa using ionic serve on localhost:port you will see in your desktop browser console output is "cordova, core".
however if you configure port forwarding, access localhost:port using your chrome android in device and then inspect console you will get "mobile, android, mobileweb"
create page with tabs and add *ngfor to make it dynamic.
- use an action sheet with ionic-angular 3.8.0 on a real iphone 6s with ios 11
upgrade to ionic cli 1.15.1
after load app in portrait when you rotate landscape orientation app is stay portrait but status bar is rotate to landscape tested on ios 11
make an ionic 2 angular 2 app with ios 10.3.x (also saw this issue on ios 11).
create a ion-form using ion-items and ion-inputs.
attempt to move between these input fields.
- create new ionic app using the tabs template `ionic start demo tabs` - in app.module.ts configure the tabs placement to be on top with below change phofcode - install ionic-angular version 3.7.1 or - run the app on your device `ionic cordova run android` without clicking on tabs rotate your device everything would work fine and toolbar still shows.
click on any of the tabs and then rotate your device toolbar will be hidden
1. have a list which can be removed through swipe.
2. make items remove after a settimeout delay.
3. show a load more div when list is empty
## before content-before phofimage ## after content-after phofimage
articles in our app are iframed in from our wp site.
specifically they are amp articles.
you would need to iframe a wp page with an anvato embed into an ionic app.
please spare me i didn 't choose this method.
here is repository with a test case of an anvato embed: ` phofurl
one should be able to reproduce this with any ionic starter app with pages having different header color.
ios header trail issue phofimage
ionic serve (project) - i can give private access but i can 't publish repository if needed.
insert this line in a html and generate a release of the apk <ion-textarea rows="3" disabled="true" {{user.postalcode}} {{user.city}}
1. update your env for ionic 3.7.1 2. create app template for tabbar app _ionic start myapp tabs_ 3. remove wkwebview 4. add platform ios 5. build & run app 6. swipe/scroll up and down on the right side
use this page template to reproduce the issue: phofcode you get something like the image below (highlighted what i 'm referring to): ionic-style-issue phofimage
create an ionic app cd into your project phofcode
- start a project (ionic start newproject) - choose a template: i tested with 'blank ' and 'tabs ' - serve it: (ionic serve) - use safari to open the app.
1. create simple ionic app with tabs 2. connect external keyboard 3. turn on voice over/voice assistant 4. navigate over the elements using the keyboard result: navigation starts on tabs expected: navigation should end on tabs
1. create an ionic app with tabs, open it in a phone 2. connect phone to external keyboard 3. turn on the "voice over"/"voice assistant" 4. open a modal from one of the child pages of a tab.
5. try to navigate with external keyboard over elements in the page result: elements in the page under modal (that aren 't visible) are also being navigated over.
create any app with fcm integration, upload the googleservice-info.plist file and compile for
i 'm using cordova 7.1.0 and ionic 3.13.0.
1. start a new ionic 3 app 2. add a navbar with button 3. compile, build, and run with --prod flag
just create any demo project.
do an "git push ionic master" to initiate a new build.
in the sample below i created a tabspage with a child tabpage, then i navigated to another page outside of tabs phofcode notice that ionviewwillleave and ionviewdidleave were not called and when i popped back ionviewwillenter and ionviewdidenter were also not fired
create a new ionic app, add a `ion-textarea` or `ion-input` to a view that you 'll push to, type whatever or nothing at all (just let the keyboard slides in) and use the phone back button, not the app back button (this is important to reproduce the bug).
1. let url = new url(" phofurl 2. url.host <-- undefined
1. view a page a and navigate to page b which must contain a back button 2. on page b rotate your device 90 degrees 3. on page b rotate your device back again 4. on b press back 5. on a notice the topmost content is hidden under the top nav bar problem is reproducible with the default ionic super starter app: 1.
`ionic start default-starter-super super` 2.
`ionic cordova platform add ios` 3. fix cert in xcode 4.
`ionic cordova run ios -lcs` 5. the items tab, topmost item is "burt bear", tap this 6. rotate 90 degrees back and forth 7. tap 8. notice "charlie cheetah" is now apparent topmost item - if dragging list, you can see "burt bear" actually still topmost item, hiding under navigation bar
i guess all you would need to do it add this to your ionicmodule config: phofcode
run the app from xcode on a simulator or real device.
everything works on android or in a browser.
i 'm trying to get json from an azure web app in https.
the project was created a week ago with the ionic cli.
create two pages, which each have a ion-tabs elements and navigate from the first page to the second one or vice versa.
make sure to have installed the meteor-client builder before running this app.
1. git clone phofurl 2. cd 3. npm install 4. npm run meteor-client:bundle 5. ionic cordova run android --release --aot
build a simple app with a nav as the root component push a page, ie { let consistent = consistent will be false in a build with --prod and true in build without --prod })
1) open a git bash terminal on windows 2) type any command which prompts for a selection, e.g.
"ionic start myapp" 3) by using the keyboard to move the cursor to select an item, when the enter key is pressed, ionic will take the wrong option to one i actually selected.
i 've found that if i use powershell i can select items successfully (although i 'd prefer to use git bash so i can use git commands easily).
- use the repo below and get an android device where you can put the app in fullscreen mode - build and open the project on your android device - when the app opens, click on "item 1" to open keyboard page - click on input to make keyboard appear, then close it go back to home page using back button you will notice that view is pushed up and you cannot access "item 1" anymore
1. create a virtual scroll list with 100 items.
2. display list in maximize window of chrome 3. scroll to bottom of the list 4. click any item to go to item-detail page 5. resize window 6. click back button to come back list page.
at this time, scroll top and some part of will be displayed like the image below.
1. create an ionic app 2. show a modal 3. show an alert 4. press escape 5. both modal and alert are dismissed
implement virtual scroll and create a list that contain images.
now after sometime update that list.
whole virtual scroll shows flickering effect.
ionic start > test > blank cd test ionic cordova platform remove ios ionic cordova platform add ios
1. see code 2. test in safari
an ion-list containing more than 20 videos makes this happen all time for me.
use imagepicker on ios 11 device or emulator
1. create a new app with any template add.
2. add the admob-free plugin 3. register hardwarback to log something(not to exit).
have multiple input items, scroll down a bit and focus the top most input.
to easily see what happens, have inputs as non-transparent (like in my example).
additionally, you can set breakpoint on subtree modification of input-wrapper screen shot at 03 38 58 phofimage
a sample application has been built in stackblitz below phofurl 1. app initialises list with 20 items, sorted descending by date timestamps 2. clicking on "add row" - adds a new item at top of list 3. clicking "remove row" - removes a row from top of list 4. clicking on "change item..." - updates the timestamp of the last element in row and brings it to top (as can be seen in console log output) however, the view does not update.
1. generate blank ionic project 2. ionic cordova plugin add cordova-plugin-file 3. npm install --save @ionic-native/file 4. add this plugin to your app 's module 5. copy contents of home.ts and home.html from the example repository
run this app phofurl in an iphone(x and inferior) emulator and look at the button in the footer
the bug occurs on your website ( phofurl and while using ionic serve in my app.
i haven 't tested devices yet, but since the bug happens on your website i figured there wasn 't a point
create a new blank side menu project `ionic start my-test-project sidemenu` then edit the `app.html` template to wrap the contents with serve the project `ionic serve`
- click or touch a button at its border - slide the mouse or finger outside the button - the activated state is kept
open an app in either emulator, on the device or safari/chrome (with ua set to ipad/iphone) and inspect a scroll-content div, it should have the following: phofcode extrapadding phofimage i also did a fresh checkout of the conference app, added the ios platform and ran in a simulator for ios 11 ipad pro.
same issue: skjermbilde kl 13 58 06 phofimage both my app and conference app are using ionic wkwebview.
both apps does not exhibit problem on e.g.
i created a plunker to show my issue.
using the ionic-conference-app with version 3.7 or 3.7.1 of ionic add a text input in session-detail.html.
navigate to a session-detail through the schedule page.
create a blank ionic project an place the ion-datetime in it like the code below.
create an object with a text property of 2049 characters, i used phofurl to count the characters.
and then try to display those characters on navcontrol page
1) create a list of buttons 2) try swipe back phofcode
click on the ion-searchbar in the project below.
here is a video demoing the problem on an iphone 6s: phofhyperlink
on a page with multiple inputs: 1. select an input.
2. select the down arrow.
3. note that the cursor moves down but the focus does not.
create a homepage with tabs and side menu, create a link in the menu to redirect on an other page with tabs.
`<ion-tabs color="secondary"> <ion-tab <ion-tab <ion-tabs>` in /theme/variables.scss: phofcode
here is a bitbucket repo you may clone to reproduce the issue : phofurl
- checkout the github project (see below) - add the ios platform - run the app on an ipad (my os is ios 11) - do this until the navigation freezes use button to go next page on next page, hit back button as fast and often as you can ;)
add the following to your index.html: phofcode update ionic configuration: phofcode and your list of providers: phofcode once your app is configured, try to navigate to any page in your app and you 'll notice the base ref is removed from the url.
create a date picker component and set a date
update device to ios11, update your application and cli following this blog post phofurl navigate the application using a navpop or an ion-tab push.
create an ionic app and use it as a webapp with safari.
this plnkr tries to present and dismiss (after a timeout) a picker with custom durations: phofurl
i have no idea how this happens
it's easy to reproduce in the demo in the docs: phofurl
`ionic start testapp` -select conference template -link to ionic dashboard `cd testapp` `git push ionic master` -test in phone using ionic view
create a project with a custom provider, you can check some examples on the links bellow.
run the project with _ionic cordova run android --prod_.
same behavior if run with _ionic cordova run browser --prod_ links used to custom provider and injector phofurl phofurl
feast your eyeballs on this plunker: phofurl
here is a plunker case, and the relative code is below phofurl
ionic upload -n 'update for version 1.0.1 ' --nobuild apply snapshot to app change version number in config xml, export new ipa and install over previous version launch new version - snapshot from previous is loaded close and relaunch app, old snapshot is not longer loaded, and everything is loaded as expected -->
1. clone the following repo: phofurl `git clone phofurl && cd ionic-ng-touched-issue` 2.
`npm i` to install missing node modules.
`ionic serve` to deploy to a local server and run the example.
create a sample list like this phofhyperlink .
change the following from true to false.
` <preference value="false" /> `
build and run demo app (which uses ionic-angular v3.3.0): phofurl it works as expected.
change to v3.4.0 branch (which uses ionic-angular v3.4.0): phofurl it does not work as expected.
create a new project and a popover to push a page, i 'm pushing it that way:
creating 10 ion-items by <ion-list> <ion-item> </ion-item> </ion-list> is significantly slower than <ion-list> <ion-item> </ion-item> </ion-list>
push an app with svgs <img> to ionic pro backend open this app in ionic view
create a page containing the example html below package the application for ios run the application on device pick an item from the ion-select
heres a plunker demonstrating the issue: phofurl
x1b[33mvalues of type 'nsuinteger ' should not be used as format arguments; add an explicit cast to 'unsigned long ' instead [-wformat] x1b[0m [body appenddata:[[nsstring %d ", data.length] x1b[36m x1b[0m x1b[33m[!]
is deprecated: first deprecated in ios 9.0 use [nsurlsession (see nsurlsession.h nsdata * data = [nsurlconnection error:error]; x1b[36m ~~ ~~~~~~~~~~ x1b[0m x1b[33m> x1b[0m unihttprequest.m x1b[33m> x1b[0m unihttprequestwithbody.m x1b[33m> x1b[0m unirest.m x1b[33m> x1b[0m uniurlconnection.m x1b[33m[!]
is deprecated: first deprecated in ios 9.0 use nsurlsession (see nsurlsession.h) connection = [[nsurlconnection alloc] initwithrequest:request delegate:self startimmediately:no]; x1b[36m x1b[0m unibaserequest.m unibodyrequest.m unisimplerequest.m unihttpbinaryresponse.m unihttpjsonresponse.m unihttpresponse.m unihttpstringresponse.m unijsonnode.m cdvsplashscreen.m cdvstatusbar.m x1b[33m[!]
is deprecated: first deprecated in ios 9.0 use -[uiviewcontroller preferredstatusbarstyle] [[uiapplication sharedapplication] x1b[36m x1b[0m x1b[33m[!]
is deprecated: first in ios 9.0 -[uiviewcontroller prefersstatusbarhidden] [app setstatusbarhidden:yes]; x1b[36m x1b[0m -[uiviewcontroller prefersstatusbarhidden] [app setstatusbarhidden:no]; x1b[36m x1b[0m -[uiscreen bounds] cgrect bounds = [[uiscreen mainscreen] applicationframe]; x1b[0m ionickeyboard.m schooladvisor x1b[31m[x] duplicate symbol _objc_class_$_cdvlogger in x1b[0m > cdvlogger.o > x1b[31m[x] duplicate symbol in x1b[0m > cdvlogger.o > x1b[31m[x] ld: 2 duplicate symbols for architecture armv7 x1b[0m x1b[31m[x] clang: error: linker command failed with exit code 1 (use -v to see invocation) x1b[0m schooladvisor
you can view the repo at phofurl to see the test.
phofurl open modal open select press escape both select and modal are dismissed screen shot at 10 47 45 phofimage
ionic start myapp blank ionic cordova platform add browser npm install ngx-color-picker --save in app.module.ts, add import { colorpickermodule } from 'ngx-color-picker '; @ngmodule({ ... imports: [ ... colorpickermodule ], }) in home.html, add <input class="colorpicker" [(colorpicker)]="color" /> in home.ts, add export class homepage { color: string; ... use "ionic serve" to start, the color picker cursor can drag smoothly.
use "ionic cordova run browser" to start, cannot drag the color picker cursor.
1. create two pages (page1 and page2) 2. set the segment of page1 to { segment: 'index ' } 3. set the segment of page2 to { segment: 'training/index ' } 4. add a link from page1 to page2 (just to get it) 5. set page1 be root 6. run the app.
the url will be /#/index 7. click the link get page2 url will update /#/training/index 8. refresh page and notice page1 loads and url updates /#/index
i created a service to get data from api
ionic start observabletest blank ionic g provider myservice ionic serve -l -s -c
here is the ionic input component phofhyperlink let 's say i need to change it to `blue` color.
phofcode plunker : phofurl alt text phofimage
in an ionic project with lazy load implemented.
it is possible to generate the two-page code with the cli generators version 3.6.0:
update typescript version to > 2.5.1 and run phofcode or phofcode .
use lazy loaded tabs and navigate to pages through the navcontroller.push
phofurl double click the update button and the error above will log to the console
1. run any ionic app, e.g.
with `ionic start crashtest blank`, 2. switch to any other application, 3. lock the screen using hardware screen-lock button and wait 1-2 seconds, 4. unlock the screen and switch back to your ionic app 5. the app makes clean start instead of being resumed
`$ ionic cordova plugin add ../local-cordova-plugin` please note you should add the local cordova plugin after adding a platform or a plugin from npm repository to your ionic app.
ionic version: 3.6.0 bundle an app with `polyfills.modern.ts` and try to click on a button running on an emulator.
the emulator can be created by a command: phofcode
visit phofurl on edge, start developer tools with f12, go to performance and start profiling.
same can be done with google chrome to see some hints for developers according to issue: reflow_chrome phofimage
1. open `variables.scss` to replace the variable $color with the following: phofcode 2. run `ionic serve`
go to something like: phofurl in my ionic app.
this is not happening in a browser.
it 's best to observe this behavior on a device but you can also use a simulator.
the movies were recorded on huawei p8 with android 5 and the newest webview version.
i was also able to reproduce this behavior on android 5 and android 6 emulator as well as on ios emulator.
i created a minimum application reproducing this issue: phofurl this app is what you see in the movies.
you can build it your own or use `apk` that i built: phofurl
by elimination, i reduced the problem to: * myapp constructor includes ionicapp as a provider.
in my use case i need this for choosing the proper response to pressing the hardware back button in android - i need to access _modalportal and _overlayportal, so i can tell if the user wants to go back from a modal or an alert * in testbed configuration add ionicapp as a provider
running ionic info in a ionic project directory, but it doesn 't report global packages.
phofurl the form field has `[minlength="4"]`, so focus the form field and enter 4 characters.
it is still red (invalid).
if you inspect the html you 'll see the `ion-input` and the `form` are updated and have `.ng-valid` classes but `ion-item` is not yet updated.
if you enter another character or blur field, `ion-item` gets updated, too.
it 's exat same behavior other way around - if you delete some characters and drop below 4 required ones.
create a list of 100+ items, try to swipe on an iphone, nothing happens.
for ionic v1 issues - phofurl for ionic issues - phofurl -->
- create new app with super template - add windows platform - add windows-target-version = 10 preference to config.xml - run on windows open menu move mouse pointer over items from bottom to top repo: phofurl phofhyperlink
it has already been described (i think).
open page with tabs subpages from menu then open this page again from menu.
ionic start rtl-test-issue sidemenu in app.component.ts, after this.initializeapp(); ...write the following statement: true); ...then run ionic serve.
tested with a ion-list of 70 items (and also reproduced it with an ionic virtual scroll).
tester should just create a list with around 70 items in it, with at least one text and 2 small <img> icons (20px x 20px).
clicked on ion-item very fast.
also i used ion-range on this page.
for ionic v1 issues - phofurl for ionic issues - phofurl -->
- ionic start myapp (blank template) - add ios platform - build ios - run app
try to build a tabs starter project with typescript 2.5.1.
1. create new blank project 2. install cordova camera plugin + add it no app.module.ts 3. replace home.ts and home.html with versions below!
4. run on device without livereload: phofcode 5. run on device with livereload: phofcode
plunker demo phofhyperlink - place an ion-range control in a container that has been rotated with `style="transform: rotate(_anything other than zero_)"`.
- notice that when you click or drag the thumb, movement of the thumb slider does not follow your input, but is interpreted instead as "distance from the left side of the control before any rotation was applied".
1. create a new blank project: phofcode 2. generate new page: phofcode 3. create a button on the homepage which pushes a new page on the nav stack.
home.ts: phofcode home.html: phofcode 4. start the app in the browser: 5. app starts with following url: 6. press nav!
- button and test page is shown with url: 7. press back-button (in app, not browser!
), app shows homepage and url is:
1. create new blank ionic project 1.
`npm install @types/node` 1. open `home.ts`, add `timeout: nodejs.timer;` before constructor 1.
just try it yourself by creating a blank application, add an ion-searchbar and run it on a real device
1. have the following code in tabs.html `<ion-tabs>` `<ion-tab [root]="tab1root" tabtitle="home" tabicon="home" `</ion-tabs>` 2. this method in tabs.ts `gohome() {` `}` 3. run the app
this issue is reproducible on android (i 'm using genymotion with galaxy s7 7.1.0 api 25 virtual device).
the same code on plunkr does not exhibit this issue.
please see the attached file for an app that reproduces the issue.
the package.json is for v3.3.0.
clicking on the input field and the icon increments counters.
the zip also includes package.json for 3.4.1. with a 3.4.1 build counters do not increment when clicking either input or icon.
1. clone my sample app from phofurl 2. run the app using ionic serve and access it in the browser (in my case chrome) 3. use the menu to switch to the tabs2 c so far everything is fine 4. switch back to tabs --> now i see correct tabs in bottom but displayed page is still page3 which was never supposed to be shown in tabs 5. if i now click tab1 it loads correct page which is tab1
since ionic left v3.6, using typescript version 2.3.4 (the one that works with rxjs) (upper versions of typescript in fact allows ionic start watching and work fine, but the project doesn 't work due to type errors in rxjs).
i took a fresh copy of ionic-confrence-app , went into speaker-list.ts and added console.log( 'hello world ') to ionviewdidload.
if you refresh ( phofurl you see it printed twice, navigating from within the app to the tab will only print once (as intended).
i downloaded the lazyloadtabs template by mike, updated it to the most recent package.json and built it.
you can find my repo here: phofurl
use this codepen : phofurl first, click on the ion-toggle, then go back.
second, switch the ion-toggle (from left-to-right or right-to-left), you cannot go back !
create an `alert` with a button with a handler that is marked as an `async` function.
(the plunker demo does not seem to be working at all)
i 've put together a demo repo here: phofurl and a plunkr here: phofurl
implement <slides> as a component, include it in a page, and run it on ios 10.3 (simulator or device)
this can be reproduced on any device (tested on ios/android only) which implements the `ion-searchbar`.
example: phofurl (stackblitz crashes with ionic 3.6.0, but the 3.5 version shows the same issue) click on the 'nav on top of tabs ' button.
it goes to the 'other ' page.
i am showing a google maps on my ionic application based on josh 's tutorials.
reproduced with a template as follows: phofcode
let actionsheet = title: 'select action ', buttons: [ { text: 'start ', role: 'destructive ', icon: 'timer ', handler: async () => this.start((await }, { text: 'start2 ', handler: async () => this.start((await } ``
both debug via 'ionic cordova run android -cl ', and android (at least) release builds do not work as expected.
1. download phofurl 2. run `npm install` 3. run `ionic serve` 4. open in chrome and toggle device mode 5. set width 320px and height 500px 6. go to tab 'about ' 7. scroll to bottom 8. open location select 9. push on backdrop to close location select 10. then open menu 11. drag menu left with mouse and rendering bug appears
too bad the plunker doesn 't use scss ... :/ screen shot at 12 26 14 am phofimage
i cannot provide specific steps, but it started occurring after a recent update of the ionic cli.
after looking more in detail, the error is caused by a jsdoc comment in the following are two versions of the jsdoc.
the original (non-working), and my updated, which fixes the issue: *original code:* /
`git clone phofurl 1. cd tabsissue 1.
`ionic serve` press `enter` to install the dependencies.
=> wait until install finishes and your browser opens ` phofurl click on "toggle menu" button.
=> url is now: ` phofurl click on "menu" button (three lines top left corner).
=> url is now: ` phofurl the page from the previous tabs page (`first2page`) is still open!
i expected `firstpage` to be open.
in other words i would have expected `
i tried a plunker without lazy loading, and it 's working, so i tried with lazy loading, but i have an issue with my plunker and lazy loading.
:( the code is here, but it 's not working as i have a lazy loading issue : phofurl it 's probably an easy thing but can 't manage to fix it
create a sample project with ionic 2.3.0 create a variable profilepicture which contains type png and elementbase64 with the base64 content ionic build ios and deploy on ios device 10.3.2
to reproduce, just use a real device with windows 10 mobile and deploy a ionic test app like conference app.
i created a little example project based on the blank template, you can get it here: phofurl .
to reproduce, run `npm install`, followed by `ionic cordova run browser`.
as soon as you see the app in your browser window, click the select buttons a few times to verify that the view gets updated.
then click link to go to "page 2".
and then use browser back button, to get back home page.
clicking buttons again, you should see that view is not updated anymore.
also have a look into browser console when you try it.
you will see, that click method gets called and property in component does get updated.
it 's only that template is not updated after a new value is set.
as soon as resize browser window, view gets updated also.
1) start panning up on the div element 2) (panstart) and (pan) are triggered 3) the ion-view can 't scroll up (as we are already at the top) 4) release the "pan" 5) (panend) is never triggered.
create page with fixes segements create page with whitelist segement e.g.
the steps to test this are easy: 1- ionic start mynewproject tabs 2- code ionicpage inside every page 3- write console.log() with new date before the platform.ready, inside the platform.ready and inside news.ts costructor 4- serve ionic and look at the console when reloading the page, starting off two time consol.loge inside news.ts constructor.
i have an online example too, but i 've been doing heavy edit on platform.ready and init function to see if i could fix bug but they didn 't work, here is even more visible that console.log news.ts constructor start 2 time at different time.
i will link it here and edit it later time since this will be a private project for my gaming guild: phofurl login: prova@prova.it pass: provaprova 1- login 2- now that you are news page, look at console see that "started..." consol.log run 1 time 3- reload page see that "started..." run two as stated before.
run ionic conference app phofurl skip the intro.
repeatedly open and close the filter settings modal.
( phofurl button at the top right.
monitor using performance tab on chrome developer tools -- shows the nodes increasing every time modal is opened phofurl
button: function: openpage(component) { this.menu.close(); }
example (snippets): phofcode this works but is really hacky and i would prefer if there was another or at least a support way of retrieving the active component of tabs.
generate components using cli > ionic info phofcode thanks a lot to ionic team
should have scroll in popover and long list in background.
now scroll on popover it also scrolls background list.
it happens only in ios, working fine in android.
call the function showtoast() multiple times before the duration of 2000 has ended (see related code below)
just use the tabs starter, refer to the tab pages by passing strings (to trigger the lazy loading) and change the app.module.ts file to add: phofcode
- put an `<iframe>` in a `<ion-content>` that contains a form page with `<input>`s - try to focus on a iphone (ios 8+)
add to you template ion-datetime phofcode 1. select date for example click 'done ' button.
correct date should be printed on <ion-datetime>.
2. click on <ion-datetime> to change date.
3. very carefully change month to june.
the day should be still 31st.
the date should be printed on <ion-datetime>.
- define tabs in firebase - query firebase to produce a firebaselistobservable - route that list through the async pipe to create dynamic tabs - see that tabs are not created.
usethe same list through the async pipe to create any other component and see that component is created.
create dynamic tabs with a regular array and see that are created only the combination of the async pipe and <ion-tab> component doesn 't seem to work
try to reorder a list in rtl.
this issue is reproducible consistently.
1. go to any sample ionic 3 app.
2. click on any of the tabs and go to #2 or #3 sub pages 3. use browser back button (instead ionic header back button) to come back to the previous page.
ionic error page will be displayed with error in the console as well.
ionic start kensapp blank edit kensapp/config.xml see that the name is myapp
i created a little example project based on the blank template, you can get it here: phofurl .
to reproduce, run `npm install`, followed by `ionic cordova run browser`.
as soon as you see the app in your browser window, click the select buttons a few times to verify that the view gets updated.
then click link to go to "page 2".
and then use browser back button, to get back home page.
clicking buttons again, you should see that view is not updated anymore.
also have a look into browser console when you try it.
you will see, that click method gets called and property in component does get updated.
it 's only that template is not updated after a new value is set.
as soon as resize browser window, view gets updated also.
1. create html file with more than one ion-slides.
2. handle the responsive behavior as shown in the code above 3. when run you will be able to see that the slider properties are not applied on the second slider html file phofcode
`ionic g page classesadd `
1. visit phofurl 2. click edit.
3. move the "everything beta" option to the second item in the list (moving the hello item to top), without releasing your mouse button.
4. move "everything beta" back to top item.
5. let go of item (expecting "everything beta" to stay at position 1) 6. instead, "everything beta" moves back position 2.
- online demo phofhyperlink : open dev tool, click the button to navigate and click browser back button.
see the error in the console.
in dev mode, it is also freezing the screen since errors are strongly reported.
- demo app sources on github phofhyperlink , you can check code, run locally and check commit for steps.
- approximate steps (details in source commit): - generate a project with ionic cli with blank template generate a new page (`ionic generate page page1`) edit home page to use `@ionicpage` annotation, add corresponding module and remove references from `appmodule` add a simple navigation directive somewhere in home page: `<button ion-button navpush="page1page">go to page 1</button>` i couldn 't make a working plunker with new deeplink config (annotation and no direct references).
_ my attempt phofhyperlink _
before refreshlist run: default phofimage after refreshlist run: default phofimage
sorry, i failed to create working example to point out the issue.
#### but its simple to produce - 1. create a sample `sidemenu` project using `ionic start samplemenuproject sidemenu`.
2. edit `list.ts` file present under `src` -> `pages` -> `list` folder.
3. add following lines in `list.ts` file - phofcode #### run the project (view in browser) and follow below steps (don't reload this browser's tab): 1. this project has 2 pages.
2. from `main menu`, select the `list` page.
3. in console, you should be seeing logs like `list page called <counter>`.
it updates in 5 secs.
run: npm install -g ionic@latest
i have created a repo for producing this error.
difficult to isolate - see
phofurl when you select one of the options from the first `<ion-select>`, it updates the value of the last item.
i think it should update value of first item.
is there any way to get it work?
2. in any page rename from page-name.ts to page-name.component.ts 3. run ionic serve.
using the latest ionic (v3.5.3), i ran the application in the browser using `$ ionic serve` command and through chrome devtools, i inspected the application and turned on device toolbar with ipad mini device selected.
i also added a log to `modalcmp` class in generated `www/vendor.js` file to ensure that option is pulling through.
the `this._bddismiss` private variable stays true and does not allow me to change default option.
can be reproduced using ionic-preview-app popover phofurl ( need build for ios - iphone 6 ) video to reproduce - phofurl
upgrade and do `ionic lab`
start a new blank project and load the project.
see above remarks: cool framework!!
maybe try to upgrade ionic like i did, maybe the same error appears
- npm install -g cordova ionic - ionic start myapp tabs - cd myapp - cd (no http module exists)
create a list of cards by copying the "social card" in the official guide.
append as the last element of the content an infinite-scroll.
try to fire infinite scroll when landscape mode is set
use slides in a ionic project with tabs
tabs page default property:` segment: string="newtask";` click one button to navigate to the tabs page pass params segment= 'repaire '; debug ` function
create a datetime component of ionic and set the picker time format to 12 hours with am/pm and set the time to hours.
the picker date comes as 1:00 am while it should have 12:00 am plunker example phofhyperlink
that bug appear when i run ionic project on ios device.
i don 't have enough time to set up a demo repo for now (as it 's only appearing on iphone a plunkr wouldn 't be useful), maybe later.
create a new ionic project (e. g. `ionic start test-app blank`).
add two dollar signs somewhere in the body text like phofcode the output looks like this: image phofimage i tried to reproduce it in plunker, but there it works as expected somehow.
- update to ionic 3.5.2 - use this.app.getactivenav()
- update to ionic-angular >= 3.5.0 - use getrootnav
build and run the application by "ionic cordova run android" , after the apps had been downloaded to the phone and started up on the phone; open chrome browser, enter in address bar, click application under device, and this will open up debug page, and you will find error on first line in console
create a page with a slider and run in with `ionic run browser` in a pc.
that 's my url : phofurl but the tabs are showen on subpages you can start a new ionic 3.5.0 tabs app and test it
create a large list with infinite scroll on keep scrolling on an xperia phone
see code below, ble needs a device so can 't reproduce on plunker.
phofurl 1. open the datetime picker at the top of the page 2. change the year to 2014. the valid values of month and day picker columns don 't update 3. change year to 2015. now picker columns update
here are my steps to reproduce this problem: 1. create a model: phofcode 2. the code of home page: phofcode
open app first time, ok!
close app and open again, ugly message appear!
i 'm using the code below to remove a page from the nav controller.
each page has an ion-navbar on it.
pages in stack: a --> b --> execute code --> c with page a & b in the nav stack, execute the code above to show page c. the code above should remove b from stack, so that clicking menu back arrow will take you to a.
plunker: phofurl steps: - scroll to 500 or so - tap `scrolltotop` twice fast - look at console.
if no error, try again.
you can do it only once though (per refresh), because it kills the thread.
ionic --version | cat -a [[2k[[g3.4.0$
1. start a new project `ionic start myapp blank && cd myapp` 2. run `ionic cordova prepare` and observe.
3. remove platforms/plugins `sudo rm -r pl*` 4. run `cordova prepare`.
5. observe the differences in output.
run the related code where lazy loading is used in the project.
`npm install ionic-angular` try to build an app including `ionic-angular` scss without any special `sassincludepaths` setting.
i use `angular-cli` for example.
just use <ion-datetime>, you will see the problem.
follow installation instructions at phofurl run `ionic cordova plugin add
create datetime with this iso8601 string:
> => { > console.log( '>> after register ', this.user); // this.user.id is empty > => { > console.log( '>> after login ', this.user); // this.user.id is filled }); }
phofurl i am submitting a pr to fix
reproduce-able by observing the examples in ionic docs
i have attempted to reproduce in a plunk here phofhyperlink , but it does not seem to quite work as i see it when running in a proper ionic project (eg either in the browser using ionic serve, or built and running on a device).
i have a public repo here phofhyperlink that shows it better.
i have post about it here phofhyperlink and here phofhyperlink
ive created an example repository using the tabs template, using an observable for the `index` variable that `selectedindex` is set to: phofurl when the app first starts (on the 1st tab, home screen), click on fab, then on new post.
the action on button updates `index` variable, which should in turn update tabs.
you can see that index is set correctly because it is echoed out into a `<ion-item>index: {{index}}</ion-item>` element in tabs view.
create toggle and disable it.
press tab until toggle highlights blue, then you can change it with pressing enter.
the bug repo is at back-button-bug phofhyperlink 1. start the project using `ionic serve` 2. go to the `contact` tab, then click the `go detail` button, then click the `go detail deeper` button 3. click back button of android or browser, you will find that you can not go back to page previous visited.
more clearly, it should be page where `go detail` button display.
see the plucker for live demo phofurl
plunker to reproduce: phofurl - click "push pagec" button to push "page c" into navigation stack.
- click "insert pageb" button to insert "page b" between "page a" and "page c" - try to go back with the back button.
b" is not inserted navigation stack.
back button is not working.
same code with ionic 3.4.0 works as expected: phofurl
create a list with items and (click), add a refresher to the ion-content.
create an app with tabs located at the bottom.
click on an input element to enter text keyboard opens automatically tabs gets hidden
1. download the lazyloadtabs demo, install and start it.
2. typing localhost:8100 in chrome, and open dev tools, choose a device like iphone6 plus, then enter the demo, maybe a refresh is needed.
3. if you look carefully, you will find there is a brief black screen before the whole page loaded 4. you can see the black screen every time you refresh
try simply to create a new project, then try to install native push and you 'll fall in the same error.
i guess just create an ion-select with `multiple="true"` and a bunch of ion-options, and try to to get notified when any of the ion-options are deselected while the dialog is option
- have a form with: 5 ion-selects and 5 input text.
- fill the 5 ion-select - fill the input type text, in the keyboard type the data info and press go.
- the app shows options of first ion-select (bug) phofurl
i 've made a plunker to reproduce it: phofurl
create select with multiple options being a number.
select a different option will return it as a string...
original behavior in 3.4.1: phofurl (click open alert prompt button and watch auto-focus of input element) behavior in 3.4.2: phofurl (no auto-focus anymore) behavior in 3.5.0: phofurl (still broken)
1. clone the `ionic-angular` repo and `npm install`.
2. run `gulp e2e.watch --folder nav/simple-tabs`.
3. in "page one", click the "go to next page" button.
"page two" is opened and the back button is shown.
the back button is missing.
have an ion-select an ion-input element on the same page.
enter something in the input field.
when hitting enter (or go/submit on devices), the select window is activated as if you clicked the element.
generate a new page via the cli.
we have a `tabspage` defined in the root nav, with tabs hidden on subpages in the template with this property is set to `true` in the page constructor if the platform is `core` (desktop).
<img width="730" alt="ionic nav tabs main" src=" phofurl we navigate to a subpage from one of tabs and it 's pushed correctly: back button is present, tabs are hidden.
<img width="730" alt="ionic nav normal" src=" phofurl when page is reloaded, back button missing and are shown.
this page has a `defaulthistory` that goes back down to tabs: `defaulthistory: [ 'tabspage ', 'listspage ']`, as well as its parent.
<img width="730" alt="ionic nav reloaded" src=" phofurl
run *ionic package build android*
i can give you access to the repo, ping me in slack
1. present a ionic modal 2. dismiss it by viewctrl.dismiss 3. modal disappearing, ondiddismiss invoked about 300ms after view disappeared
steps todo: step 1: download both projects and install: as example i have created two projects: tone use ionicpages: t t phofurl tthe other use the "normal" way of ionic: t t phofurl t t step 2: add the windows platform step 3: enjoy the bug... ps: both projects have the same bug... -->
change the sample code: phofurl mark `pageone` class as
copy and past offical docs and run in real android device.
phofurl to reproduce: 1) first notice how the selected item is "select a value" at start.
please refer to the plunker above i didn 't verify this but my guess would be its broke with this commit -> phofurl
navigate to phofurl and attempt to read about the no-border atribute
using latest ionic version: - `ionic start bug` - choose sidemenu, use or not cordova don 't change the bug.
- `ionic g page firstpage` - `ionic g page secondpage` add (and import) firstpagemodule to our appmodule on `imports` add (and import) secondpagemodule to our appmodule on `imports` go to and replace it content with: serve the application, and click on any item on menu.
you will see the error: phofcode now go to `app.module.ts` and comment `secondpagemodule`.
try clicking menu item again.
insert any relevant code here html code: <ion-content> <ion-list virtualtrackby> <ion-item *virtualitem="let company"> <ion-label> <ion-checkbox </ion-checkbox> </ion-item> </ion-list> <ion-fab right bottom style="margin-right: 5vw;"> <button ion-fab color="primary" </ion-fab> </ion-content> .ts code { if(state == true) { : companyid, "name" : companyname, "ischecked" : true}); } if(state == false) { var index = // } }
create a app with uses ion-nav.
in app.html <ion-nav [root]=rootpage> <ion-footer> <ion-toolbar> my static footer content </ion-toolbar> </ion-footer> in somepage.html <ion-header> <ion-title> my app </ion-title> </ion-header> <ion-content > my content </ion-content> for ionic issues - phofurl -->
$ ionic cordova platform add ios
ionic start testbuild tabs create directory src/modules.
create a module, testmodule in with contents: import { ngmodule, modulewithproviders } from '@angular/core '; export interface itestconfig { value: string; } export class testconfig implements itestconfig { value: string; } @ngmodule({ declarations: [ ], imports: [ ], entrycomponents: [ ], providers: [ ], exports: ] }) export class testmodule { // /
run the plunkr, open the dev console, and click between the two menu items.
you 'll notice the ionviewdidload is called every time a page is clicked.
device- surface pro html code- button with ng-click event steps- select the element and double tap to trigger ng-click 2.
the bug is present in `ionic-angular@3.4.0`, but _not_ present in `ionic-angular@3.3.0`.
create a basic formbuilder form, start typing into ion-input field.
ng-touched is added on keyup.
start typing into standard input field, ng-touched is added on blur.
it stops for so long time, at this particular line: => {` -->
1. click the text-area 2. scroll outside text area
1. i ran ionic cordova run android in motorola tx1032 2. i ran ionic cordova run android in mororola tx1040 3. the behavior works fine in tx1032 4. some features don 't work correctly in tx1040
directly copy this example which is on the ion-range example on the site.
` <ion-item> <ion-label>dual, step=3, snaps, </ion-label> <ion-range dualknobs="true" [(ngmodel)]="dualvalue2" min="21" max="72" step="3" </ion-item>` you wont be able to move knobs.
<!-- if you are able to illustrate the bug or feature request with an example, please provide steps to reproduce and if possible a demo using one of the following templates:
`a: number = 100;` `<ion-input type="number" way a is converted to string `<input type="number" [(ngmodel)]="a">`//this way a stays number
ionic run android o ionic run --release android en version 5.0.1 (api 21)
1. have own transform-scss-mixin 2. use the mixin 3. update to 3.4.0
1. add a `<button ion-button to a page.
2. try to style the button from scss, like `page-name { .my-button { padding: 16px; margin: 0; } }`.
3. your rules are overwritten by the `[dir="ltr"] .button-(mode), [dir="rtl"] .button-(mode)` selector.
4. this happens with almost every component: `ion-card`, `ion-card-content`, `ion-chip`, etc.
you need to use the ios simulator to reproduce.
clone project at phofurl and try.
the plunker is fully up to date.
- click the button to empty and refill the list("reinit" the virtualscroll).
the [hidden]does not effect behavior nor does console.log in virtualtrackby.
use chrome dev tools -> performance -> to throttle cpu 10x-20x and see that flash is in inverse order.
`ionic start datetest` then add in whatever page the declaration of a date object, like this : `date : date = new
say have a component rendered inside the virtualscroll that has and @output event emitter to pass some value back to the vs hosting component.
so something like: phofcode now imagine that `custom-comp` when clicked opens a modal to get user input (e.g.
star rating) that wants to return it through myoutput event emitter.
phofcode this works fine and dandy.
but, if the user keeps the rating modal long enough for a change happen our data bound virtual scroll (i.e.
a value of different item changes), vs will
phofurl search for a number... any number!
search for a number then search again, notice the flickering.
in order to appreciate the magnitude of this has on an actual device, turn chrome 's cpu throttling to 10x and notice the behavior.
phofurl searching for 5, 55 or 555 works.
searching for 5555 (which does not exist in the list) throws error.
run _ionic start_ and try to create a new project.
downloading binary from phofurl cannot download " phofurl http error 404 not found hint: if github.com is not accessible in your location try setting a proxy via http_proxy, e.g.
export http_proxy= phofurl or configure npm proxy via npm config set proxy phofurl
adding ionic native plugin admobpro phofcode run ionic apps `$ ionic cordova run android` and its give me error bellow: phofcode
just create a new starter project `ionic start myapp tabs` then add android platform and start build and run on the emulator api level 17 `ionic cordova platform add android` `ionic cordova run android` i tested on android emulator "nexus_4_api_17"
just installed latest cli for ionic v1 and run 'ionic serve ': [info] starting server: --port=8100 --p=8100 --livereload-port=35729 --r=35729 --address=0.0.0.0 - ctrl+c to cancel typeerror: cannot read property 'emit ' of undefined
add the following to the `theme/variables.scss` file: phofcode notice that the color of the toast button in `ios` and `md` changes, as well.
there is an example at this plunk phofhyperlink , however it can 't be reproduced on the descktop, as we need the scroll to gradually stop as it does after a flick on a device -->
run ionic 3 app in ios 11 simulator using xcode 9 bet
have a image in the resources as documented.
- create a blank starter project.
- paste the code below into home.html - run on android device or emulator.
- scroll down an amount so that when the keyboard appears it causes the `<ion-content>` to scroll (in my example, try "stacked label").
touch an input to reveal the keyboard.
footer background is now transparent
ionic start myproject sidemenu cd myproject ionic g page listpage
check out the console logs of this plunker phofhyperlink
click on input box then click on anywhere in page or another input box i case of ios .
# 1. create new project phofcode # 2. create external plugin phofcode add package.json testclass.ts # 4. install plugin install and link (or copy plugin to node_modules) phofcode # 5. register plugin in app.module.ts 6. build in prod mode phofcode
my exact case is a virtual scroll list that renders custom components that wrap an ion-item-sliding but should be reproducible in simpler examples.
in a list rendering ion-item-sliding slide the item left or right in a slow device or using chrome dev tools cpu throttling (seems to be a race condition of some kind).
some times buttons will appear, some times white area will appear instead of the buttons until you nudge the item again bit.
when buttons appear dom looks like image phofimage when buttons do * not * appear dom looks like: image phofimage notice that in the second case class `active-options-left` is missing, although `active-slide` is present
app.modules.ts { pagetransition: 'ios-transition ' })`` pageexample.ts {}, {animate: true, direction: "back"})`` or {}, {direction: "back"})`` as an example, i took prints of the app animation: 1. when clicked on sidemenu, this is closed and the page is pushed with the back direction; 2. the page is shown, but not the ion-header; 3. after a small delay ion-header is shown; image phofimage
phofurl please check the console for simple logging of "event fired" and "event caught" statements.
we are trying to touch swipe/scroll the "ion-item" in ion-list.
its working fine on android and on ios but not working on windows/windows surface.
1. click "" button, select a picture, then it cause an error, "changepic has no attribute \'src \'".
create an empty app while embedding in the root view a google map and put a button (when clicked) it pushes to the next view.
once you are on the second view, hit the back button, and boom map will disappear!
here is the ionic-datetime demo - see phofurl it is not possible to clear/reset the value
can reproduce in detetime component exemple on ionic documentation page phofurl
create a new ionic project ionic start myapp tabs add android platform ionic cordova platform add android run app on android device ionic cordova run android
run `ionic generate page [page name] and navigate to the module file that is generated.
ionic view id: 914fb8a5 github: phofurl i have used the blank template using just the homepage.
tap the first item in the list.
tap item again within 1 second.
(i am sorry i can only see a white screen on the plunker using my safari.. so i committed code to a repo to illustrate the issue:) phofurl without pulling the code: 1. ionic start tutorial 2. in hello-ionic.ts, add / change these: phofcode 3. in hello-ionic.html, change the button as follows: ` <button ion-button color="primary" list page</button>` 4. delete ion-title, then add a ion-segment to list page: phofcode 5. ionic serve --lab.
note that bug only happens on ios (also on ionic view).
1. make the app rtl mode.
2. add ion-select 3. put no-padding attribute 4. the padding is not getting reset and get overrides by `[dir="rtl"] .select-md` css class.
use split pane with ionic 3
put a tabs component inside a lazy-loaded module, with an individual tab that is not lazy-loaded.
create an app with deep linking implementation and the use browser navigation buttons to go back and forth with fast click.
the plnkr show is below: phofurl
navigation is performed from the service using the navigation controller obtained from the current page is one of the tabs see plunk phofhyperlink when opened please click go home button under the first tab
steps are described in the log showing below.
steps with issues are marked with
1. use virtualscroll and intialize source array 2. rapidly scroll up and down to verify smoothness of scrolling 3. alter source array by adding more items (could be done by simple settimeout or by using infinitescroll) 4. rapidly scroll up and down; you eventually see the described flickering issue.
* create a ionic project with tabs * add the variable $tabs-tab-color-inactive to the variables.scss with a custom color.
* debug your app using chrome
create a new project `ionic start crosswalk-test blank` add platform `ionic cordova platform add android` add slides to home page ` <ion-slides pager="true" <ion-slide> <h1>slide 1</h1> </ion-slide> <ion-slide> <h1>slide 2</h1> </ion-slide> <ion-slide> <h1>slide 3</h1> </ion-slide> </ion-slides> ` add crosswalk `ionic cordova plugin add --save` and finally build an apk `ionic cordova build --prod`
use ios native chinese input method typing any chinese word on searchbar
1) create new starter application using ionic cli command `ionic start ionic2firstapp blank --v2` 2) in the app created change `package.json` to have ionic version 3.1.0 (as described here phofurl see attached file package.json.txt phofhyperlink 3) change `home.html` and `home.ts` files located in src/pages/home to be as in the attached files home.ts.txt phofhyperlink home.html.txt phofhyperlink note that in home.html template there is invalid expression {{ test.test }} note that after the app is transpiled and rendered there is neither error displayed not error messages the console.
if you either: 1) move list initialization code from ionviewdidenter to constructor everything works as expected and you get runtime error.
2) move invalid expression {{ test.test }} outside of *ngfor everything works as expected and you get runtime error.
note that problem occurs only when list is initialized ionviewdidload or ionviewdidenter invalid expression inside *ngfor loop
`ionic start myproject super` `ionic serve` phofcode
1. use the conference ionic starter 2. cut your internet on your iphone or simulator 3. launch your app 4. just see when the platform.ready promise is resolved it looks like the async attributes is not considered.
after creating a new app with cli ionic start xyz sidemenu --id xyz.com.app, move to app folder with cli cd xyz, run cli ionic cordova build android --prod ?
what platform would you like to build: ios, android:
after creating a new app with cli ionic start xyz sidemenu --id xyz.com.app, move to app folder with cli cd xyz, run cli ionic cordova build android --prod ?
the plugin is not installed.
would you like to install it and continue?
yes > npm install --save-dev --save-exact running command - done!
1: run "ionic start" 2: pick any app 3: run "npm run build --prod" 4: observe size of /www/build/main.css (should be in the region of 370kb) 5: edit and add a few more (~10) colours into the $colors variable (~line 27-32) 6: run "npm run build --prod" 7: /www/build/main.css should be much bigger
start a simple tab app in `--v2` mode.
phofcode ` add some buttons into the home navbar or whatever page you want.
phofcode ` run in an android 4.4.2 device.
this is happens to me only sometimes, so i 'm not sure of exact steps to always reproduce.
here 's a gif of the issue i 'm seeing: phofurl
* add this preference on the file config.xml: `<preference name="overrideuseragent" value="mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) safari/537.36" />` * now try to check the return of the platform.is method is correct, using the platform you 're using (not browser).
example for an android device:
example code: phofurl this contains several examples of different layouts of `ion-item` and `ion-item-sliding` with various containers within in `ion-list` #### phofcode * remove: this seems to shrink the height up till the contents of the item, and then it disappears.
* add: item pops into view #### phofcode * remove: animates as expected _unless_ it 's the last element in list * add: item pops into view #### phofcode works as expected for both add and remove!
#### phofcode animations do not work.
similar to using a wrapper around `ion-item` above: remove: animates as expected _unless_ it 's last element in list.
_however_, next element will slide under visible element.
add: element pops into view, but its wrapper seems to animate element contents are not displayed
1. clone the `ionic-conference-app` repo, install dependencies and run `ionic serve`.
2. select the "breakfast" event in the schedule tab.
the url changes to 3. reload the page.
the root schedule page is loaded instead this also throws an exception, but i think is related to mockup data not being initialized.
just create "lazy" ionic app with "lazy" modal from a page and fast double click escape button to dismiss the modal.
example: phofurl create an `ion-item` layout that contains an `ion-checkbox` and another element that has a click/tap event: phofcode notice that the checkbox is toggled, but the other desired event appears to be swallowed.
1. inject `events` service into component 2. subscribe to `app:rotated` event 3. install app to phone 4. rotate phone -> callback subscribed to event was not called
1. add form with change event handler on the page 2. add ion-select component to form 3. serve, change ion-select value 4. observe that handler is not triggered on change event plnkr: phofurl as you can see - editing ion-input value triggers change handler, but selecting from ion-select does not
1. create an ionic app with tabs 2. inject `app` and subscribe to `viewwillenter` 3. navigate between tabs
bit involved to include a plunker type snippet - how would i do that for component bugs?
follow the tutorial given bellow: phofurl
issue is directly visible in the online demos: 1.)
click on three dots icon in top-right.. watch out for the short flicker in the bottom right
set `[min]` or `[max]` on an `ion-range` and update the value.
just watch not working: phofurl working: phofurl
same as current behavior above
for ionic 2 issues - phofurl i cannot reproduce the error in the forked plunker.
in my case i have borrows a md-select from material design repo inside a ion-item box.
the ion-labels are not compatible with md-xxxx components to get floated and align well with others.
`ionic serve` or `ionic run <platform> -l`
here 's a repo with the demo used for above screenshots: phofurl and here 's plunkr code for the same: phofurl
this is hard, at this stage, it seems to only happen in my ongoing application, and not a new blank app.
perhaps it is the size (though it is not that big, around 6 pages, and a number of providers, maybe 10 or so - final build package of around 3.5m)
phofurl 1. double tap to zoom the image 2. try to pan the image 3. the slider starts to slide to the next page
1. run plunker 2. slide to the next page 3. double tap image 4. wait until zoom finish 5. single tap on image phofurl
open the plunker as android platform phofhyperlink an try to pan a zoomed images phofurl
create any blank ionic 2, 3 project, add html5 `audio` tag, give the `src` to any mp3 url.
deploy it to a physical ios device.
just create empty tab project put some content in it.
it is hard to replicate this in browser, so simulator or real device should be used.
and this piece of code should done it:
1. clone phofurl 2. npm install 3. npm run serve 4. tap the "add card" button on the home screen 5.
"select card type" modal toolbar has the bug
run ionic app with <ion-textarea> on ios emulator
try the following code on ios 10 (haven 't got any devices with ios < 10 to test on, so unsure if this is limited to 10).
in your index.html file, add the following <head> element: phofcode all content fails to load.
using wkwebview with virtual list.
(but without wkwebview it 's the same)
(already told) - - - - any help regarding this?
my project is stopped from this point and i can 't get to test anything.
reproducible within ionic docs phofhyperlink .
change one of the example times to 12:xx am, close and reopen picker.
time will now show 1:xx am.
make a provider return an array of 3 numbers and use it to insert 3 range selectors bound to each element of this collection.
the insertion in the view should be done via an *ngfor (ie.
dynamic) here is a plunker phofurl -->
if you find this as more relevant to ionic-native repository you ionic team can transfer this to ionic-native issue.
sorry for reproducing as this illustration is based on beacon sighting custom event and used for enterprise level iot app.
where data is continuously changing using angular custom zones(which effect ionic view[app front]) and when at certain limit beacon sightings touch then location plugin fire with http request along with latitude and longitude.
for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
just browse the page @ phofurl
simply create an action sheet with some items while in rtl.
see the plunkr below (running ionic 3.2.1).
the custom date picker button and the button on the page itself are hooked up to the same event handler, but only one produces an effect.
- create a new ionic 1 project: `ionic start myapp blank --type ionic1` - `cd myapp` - `ionic serve -l`
create blank ionic 2 app (have not tested with ionic 3), install cordova-plugin-media.
add an mp3 file to the assets folder, then attempt to load from the filesystem.
audio will play in the browser, but not when deployed to a device.
ios and android will call the onsuccess callback, but no audio will play.
click on searchbar to focus.
then blur the search-bar by clicking on a button (or something similar)
no working demo but it uses ionicpage with segments and popovers in ion-select
this was caught in a travis job when upgrading to 3.2.
- the repo that has the current setup phofhyperlink - it is just a barebones repo.
this error can be seen when trying to build this branch phofhyperlink - the relevant travis job phofhyperlink
please refer to testbug repository based on blank app on github.
phofurl 1. check out project.
3. go from home page to test form page (red button) 4. input "a@b.com" into input.
notice that validation is ok. 5. press back button and then forward button on browser.
notice that validation is still ok. 6. ionic cordova platform add browser 7. ionic cordova run browser.
9. notice that the validation is not ok, and the page is inconsistent state.
i could not reproduce this with a new blank ionic app.
you can check simple repo here: phofurl here is the video showing double infinite scroll firing: phofurl
must be run using the emulator, or deployed to ios device.
cannot reproduce on a browser.
this has to be executed on an ios device itself 1. create a project with simple navcontroller based navigation 2. enable voiceover (settings -> general -> accessibility -> voiceover) 3. navcontroller.push() at least one time 4. two-finger scrub
1. check out and build the ionic-preview-app and build 2. ionic serve 3. scroll to the ion-searchbar page.
4. change input to chinese and type "qingshan".
notice on chrome the input for chinese does not appear, and on safari multiple letters appear.
5. change package.json ionic-angular dependency to 3.0.1 6. remove node_modules npm install again 7. notice that things work normally.
[here's a plunkr demonstrating the issue][plunkr run].
i've included some more explanation of the issue in the demo.
[here's a link to the source][plunkr]
ionic serve open browser stack typeerror: cannot read property 'indexof ' of null at ( phofurl at ( phofurl at t.invoke ( phofurl at object.oninvoke ( phofurl t.invoke e.run ngzone.run array.
ionic framework: 2.2.0 ionic app scripts: 1.1.4 angular core: 2.4.8 angular compiler cli: 2.4.8 node: 7.9.0 os platform: os x yosemite navigator platform: macintel user agent: mozilla/5.0 (macintosh; intel mac os x 10_10_5) applewebkit/537.36 (khtml, like gecko) safari/537.36 posted also here: not really sure where it does belong to.
i don 't know how to make a plunker template for version 3.0 but, here is a demo of how it works with ionic version 2.0: phofurl try the same in version 3.1.1 and you will see a different result where the input field does 't clear after adding to list.
1. init a ionic3 project 2. add an ion-select component with several options 3. run 'ionic-app-scripts serve --prod ' 4. open the select component and u will see the result
add item to the list with a delay.
`ionic cordova build browser --prod` 2. serve the `platform/browser/www` folder via a web server
just click and then click and again till it happens.
try following steps to reproduce this issue: install module using: `npm install --save filestack-js` import using following code in .ts file: `import filestack from 'filestack-js ';` doing would show that module has been imported successfully.
but you should see that you see blank/white screen if you are running app on `ionic serve` i also tried following code to check if it is actually working: phofcode using above code i was able to see picker but on closing it still see that blank screen.
i am not sure whether this is an issue with plugin or ionic, so i am adding it to both.
please let me know if anyone else has came across similar error and managed resolve this.
click on the button alert -> first time works fine click again the button alert -> this event fires twice
1- import alertinputoptions in code
enter a view that has <ion-input> and swipe to go back, but you have to do it right from the <ion-input>
just run a sample app and use objects that reference themselves, such as: phofcode
install the app in android phone and click on download button.
try the code below into a component.
create four or more slides, put the slide with floating input in the middle phofurl
place clickable items within an `<ion-scroll>` element.
example, only changed the code inside `<ion-content>`: phofurl
1) having an existing ionic 2 project.
2) update dependencies to ionic 3 requirements and adjust coding (e.g.
1. ionic start setfocus blank 2. cd setfocus 3. update home.html and home.ts as below 4. ionic serve
see this link in the forum, albeit, please excuse the frustration we expressed in the thread: phofurl
galaxy tab running version 4.4.2 of kitkat install ionic.
$ ionic start mysidemenu sidemenu.
try swiping out the menu and it never comes out.
steps to upgrade v2 to v3 update your package.json to match the following dependencies, remove the existing node_modules directory, and then run npm install: phofcode
don 't know how to reproduce.
got it only a few times.
the same code works different using ionic 3.0.0 and 3.1.0 - ionic 3.0.0: demo plunker phofhyperlink - ionic 3.1.0: demo plunker phofhyperlink
i am not able to produce this on plunker.
i am getting this issue on android 6.0-->
it 's explained in this plunker as well: phofurl > switch back and forth between 3.1.0 & 3.0.0 in systemjs.config.js and you should see the difference.
> > with 3.1.0, you 'll see the events in the console without any interaction.
just $event will pass the whole event object.
> with 3.0.0 they won 't fire automatically.
and just $event will work.
create a new project (i let the the default tab template), and edit the about page like this: phofcode launch ionic serve, go to the about page, click on gender select element.
an alert is displayed, instead of a popover.
i have 5 tabs in my tabspage.
issue appears on android platform.
here 's the config that i use: phofcode
copy from docs the slider and deploy to ios device.
just add some sass maps like the
i created the ionic 2.x tabs starter project and added the following html in the about page.
i am able to replicate this on ipad (ios version 10.2.1).
this issue is happening only on ion-input and not on input textbox.
again as mentioned above, you need to try the steps 2 and 3 around 10-15 times to see issue.
on few occasions, i am able to reproduce it in 2-3 attempts.
just use the ion-searchbar with the
upgrade app from 2.x to 3.x and add ion-searchbar to a page and set animated to true.
set config.mode = 'ios ' in your app config and compile for platform browser.
1. define service as class : phofcode 2. in other components or pages, import that class with just import command.
phofcode in constructor: phofcode 3. in main app.module.ts, add that class service as provider: phofcode
1. create new project --v2 2. update all packages 3. run cmd ionic build android --prod
<!-- if you are able to illustrate the bug or feature request with an example, please provide steps to create an app.
add the popover to the navbar add elements to that popover add click event those elements so when they are fired a navigation a new page will happen
present any statusbar in an ios device.
i believe all you gotta do is publish a web app.
i 'm not sure if this is entirely attached to ionic 3 version, but it happened on mine and on others ' apps i know too.
you can access mine and check the error: phofurl
1. here a project to reproduce the problem phofurl 2. ionic platform add android 3. ionic build android --prod 4. start and test on a device.
the scroll list on home.html not gonna be scrollable 5. if you wish, you could remove the swipe event from the list, redo test behavior and will notice that without it list gonna be scrollable
add attribute color="primary" to span
should be self descriptive from above.
open the slides api doc page on a desktop to show the demo phone.
(page is phofurl result: the images inside the slides are not loaded.
just use the textbook examples of and api.ionic.io calls.
1. ionic start ionic2-tabs tabs --v2 2. add console log in constructor function 3. select the same tab consecutively
insert a image with a not a square.
for example 375px * 300px
go to this plunker: phofurl it 's a simple contacts list.
scroll a few contacts and you 'll see how images are shown.
create the popover component and try it out *on a device*
1. install node v7.9.0 2. npm install -g ionic cordova gulp bower 3. ionic start testproject runtime 4. cd runtime 5. ionic add platform android 6. ionic run android
1. download my app: addvideo on google play phofhyperlink 2. run on android 4.2 device, e.g.
samsung s3 mini 3. you will see splash screen never hides.
this is the code that is running (this works on android 5, 6 and 7): phofcode
the application is setup as follows: - root page contains an `ion-tabs` with two different tabs (called `today` (default) and `all`) - the `all` tab contains a list of selectable items - upon click on an item a new page `details` will be pushed for this tab.
1. the application is loaded with the `today` tab 2. navigate to `all` tab and select an item in the list 3.
`details` page is pushed and shown (while `all` tab is active) 4. navigate to `today` 5. navigate to `all` - the details view popped
i have a modal with an ion-searchbar.
below the ion-searchbar there is an empty list that gets populated as you search.
each item from the list is a button with `ion-item` attribute directive and also has a click handler to close the modal upon selection.
if you have at least one character in the ion-searchbar items are not clickable(tap) first time you attempt to click(tap) them.
it isn 't until second time that it recognizes click.
the first time to try clicking an item, keyboard hides but click event is not triggered until you click it a second time.
upgrade from ionic 2 to 3.0.1
1. create an input 2. present a toast
create a new tabs example project with the ionic v3 cli like explained here phofhyperlink .
run: "ionic start tabsexample tabs" you can `console.log()` the [rootparams] in the constructors of the tab content pages.
try to push an object that looks like the above specified with item)` to a new page that has the @ionicpage looking like: `@ionicpage({name: 'page ', segment: 'page/:$key '})`
build ionic app and implement an api connection similar to this phofhyperlink request twice.
whichever request i put first works.
phofurl please look at the console and notice that after 5 secs timeout all nodes are destroyed and re-created although a single item has changed.
just upgraded my app to ionic 3 then ran through the mentioned performance issues.
here is a video showing the difference between running the same code on browser & device video phofhyperlink
1. create modal 2. run googlemaps using the ionic native example
- from your root page navigate to a page with a popover on it - open the popover - from inside the popover, follow a link that pushes a page to the stack - from that new page, trigger settoroot(); i 've created repo that demonstrates this issue here: phofurl you can follow the links on page all day long and then click settoroot and it works as expected.
however, if you use popover to get to page1 or 2 and then click settoroot, you do not return root
set config.xml preference to landscape, run ionic resources, run ionic build/emulate ios
n/a (hopefuilly the extra text makes you happy)
this can actually be reproduced in an example on the docs site.
- go to phofurl - type "something" into the password field - click away from the password field to blur it - click back in to the password field type "x" into field notice that contents of password is just "x" rather than expected "somethingx"
download a ionic v2 blank template, run platform add android, run ionic run android --prod
1. create a popover 2. put `<ion-spinner>` inside it 's component.
pressing an active tab and the view will recharge every time we press it.
deploy the related code snippet to one of the above mentioned ios devices.
click on the telephone hyperlink and when the confirm alert appears wait for about 10 seconds.
at this point confirm alert will disappear and show up again about a second after it disappeared.
tel link and confirm alert phofimage
i don 't have steps to reproduce as this is a private app and i have a newly created ionic 3 app that is working fine.
i have referenced the ionic 3 app multiple times to try to determine what the difference is between it and my ionic 2 -> 3 app.
--> phofurl go to the plnkr, and click 4-5 times on the "add an activity button" - different ion-item containing an ion-select will be dynamically added.
then try to change the value of the first one, it will correctly update bound value (which also displayed next "activity [index] - [bound value] to double check that", but it will change displayed value of second line for no reason (the bound value displayed on second line is still correct though).
what is this really weird behavior ?
here is the code that i am using.
i also tried to us ngmodel instead of click.
ionchange doesn 't work because it triggers event on the load and that doesn 't work for me.
as i said, it works perfectly fine in the browser and on ios, but on android it does nothing.
not sure what 's an issue.
thanks ` <ion-toggle item-right ` -->
display popup phofcode fix popup: delete the previous created project folder, then run the following.
make sure to follow on-screen prompt to save cordova plugin, rm ios, add ios when updating cordova platform-ios.
popup will not show in following scenario phofcode
you can have a look at the gif below.
i added some colors to make the issue more obvious.
- you can see that in the "new event" page, when i click on the "invite" button, faded background is actually one of my user profile (the tab selected before).
- in "invite" page, when i click on "following" button, i can see a faded background with red lists, while lists should be green.
- same behavior happens when clicking on back button modal phofimage
use the super template -->
- tap the about tab -> the scroll does not move - tap the home tab - tap the about tab -> scroll goes to bottom
i have no idea how can be the localhost undefined at the livereload enabled emulation.
output the array for platform.platforms() on a uwp on a full windows 10 machine <span should show on all windows</span>
1. switch to mobile view 2. scroll down one of the content panels 3. scroll up one of the content panels
create a slider with 3 slides, swipe to the second slide, create a menu that pushes another page into the navigation stack, rotate the device and then press back.
i created a repo with a v3 app here.
contains video as well: phofurl i believe this is fairly similar to this recently closed issue: phofurl
git repo: phofurl repo home: phofurl basically.. create a landing page (not the tabs page) and set it as root in the app.
have a bound array that is looped through using *ngfor have code that would echo out an invalid item: ie {{notmy.item}}.
have the array be empty until ionviewdidload() is called.
by setting the array to have items in ionviewdidload() function, angular rebinds and will run *ngfor and try to parse invalid item.
have a button to set root to tabs page, and notice that tabs function but do not highlight.
having array be populated anywhere else will throw error.
if you use my repo change ionviewdidload() ionviewwillenter() see problem.
commenting out populating of causes *ngfor not run (as no data) tabs will highlight fine.
it 's sort of a confusing error, so if you need more info.. let me know.
1. create a balnk page which shows ion-loading 2. run on device (android/ios) 3. enable screen reader/void assistant in accessibility settings 4. open the app and navigate to the page 5. the loading alert is showing but the user has got no feedback about the loading indication
phofcode thanks for the help
ion-item-sliding with nested ion-item, inside is ion-label for ion-datetime.
this stopped working with upgrade to version 3.0.0
note on virtual device after about 20-40 clicks the black screen would result in black screen, in real device is about 4-5 clicks on tab would result in black screen.
i made a plunker : phofurl when you click on yes or no the ion-list must be alway empty but as you can see the ion-list is not updated.
it 's all right when i run "ionic serve",but in production environment,it throw an error like:"error error: uncaught (in promise): error: cannot find module
i created a plunker to reproduce the error : phofurl you need to click on a list item, a new page is pushed and if you click on the button "click here" nothing appear (it 's the bug, angular not refresh the view).
1. start a new (sidemenu) ionic project with ionic v2 or v3.
phofcode 2. run the project on an ios device.
3. click on the burger menu icon to open the side menu.
4. then, click outside of the menu area before 2.5s right after menu is opened.
1. create a page with a refresher and other more elements, simple page maybe not show the flash obviously.
2. initiate a touchdown event, and start scrolling down so the refresher is activated 3. on ios, you will see the entire page flashing and i find that related issue phofurl `ionic info` of my system : cordova cli: 6.5.0 ionic framework version: 2.3.0 ionic cli version: 2.2.2 ionic app lib version: 2.2.1 ionic app scripts version: 1.3.1 ios-deploy version: 1.9.0 ``
i see this behavior on the
create blank project and create three slides with images which are bound to a variable.
see plunkr: phofurl however, not binding the sources to a variable will make the slides work as they should: phofurl but it still shows the wrong indexes in getactiveindex
1, git clone phofurl 2, git checkout lazy-load 3, npm install 4, update replace phofcode with phofcode 5, update replace phofcode with phofcode 6, execute ionic serve 7, open phofurl click "breakfast" actual: loading pops up, then loading dismissed, it goes to session-detail page, and url changes to phofurl expected: loading pops up, then loading dismissed, it goes to session-detail page without url changing.
the url should remain the same phofurl because updateurl is false.
i have updated my application to v3.0.1 and updated all pages to modules using @ionicpage().
when app.components.ts loads it does a storage check to see if there is already a user logged in, if there is it sets rootpage = 'homepage', otherwise it will set it to 'loginpage'.
if i load the app at base route: phofurl loads the login page and the url then changes phofurl if i then refresh the page application sets rootpage 'loginpage' and then deeplinker navigates 'loginpage', causing page load twice.
there should be a way of detecting if deeplinker is going cause a navigation change or have deeplinker not navigate page is already on.
i have provided @jgw96 with a repo.
actual conf-app lazy-load, set config mode to "ios".
run on windows platform (`ionic run windows --prod`)
tried to use @ionicpage() in a page component
put an ion-card in a ion-content with padding
i created a repo: phofurl run ionic serve and follow steps below.
please go to this plunker: phofurl click on "go to form", click on the "gender" field and then click out with out selecting anything.
you will see that the user is not notified that it is required.
this also happens with the date field.
if you click on name and then start typing and then delete what you type the field will turn red and then if you click out required will show.
none of this happens for "gender" select or "dob" date fields.
on main page if you "go to prefilled form" you 'll notice that it all prefills nicely but select date field when material design is present do not have valid color border bottom.
run ionic's own infinitescroll e2e test in a uiwebview, and you'll see it doesn't work.
run or emulate the ionic-conference-app on an android 4.2.2 or 4.3 device with all references to crosswalk or cordovawebviewengine removed.
here is the config.xml: phofcode
ionic start myapp tabs --v2 click multiple times on a tab.
before (after starting the app): image phofimage after (clicking the home tab multiple times relatively fast): image phofimage
- init a starter project with tabs template - put the above function in the tabs page code and expose it to the window object (you may hardcode a specific tab)
switch between two components containing the ion-slides very quickly
create a page, that opens a page with only one button, that opens a page with many components, then swipe back.
open an app, and long text wherever.
it will show some kind of text marker at the top, marking nothing
create a simple google maps native that takes 100% of height and width.
create a popover in the navbar.
click on the popover and try to close it by clicking on the map.
i know that the map is not an html element but is not there a way to close popover anyway by clicking on backdrop ?
edit : i forgot to say that backdrop is unusable, i cannot click on it thanks.
run or emulate the ionic-conference-app on an android 4.2.2 or 4.3 device with all references to crosswalk or cordovawebviewengine removed.
here is the config.xml: phofcode
1. start an empty app with custom error handler 2. use this error handler as default `{provide: errorhandler, useclass: myerrorhandler}` 3. build --prod 4. try to run for ionic 2 issues - phofurl -->
video of the bug here: phofurl
1. create a new ionic project 2. commit the project to git 3. open and save `config.xml` with an editor that appends newlines to the end of files (atom editor has this by default) 4. check the diff in git: phofcode
it is a normal list with items as shown in the examples in the ionic docs inside a ion-card, nothing special.
i also tried it without ion-card, same problem.
the same behavior i was in a fresh ionic app with only 1 page with input fields.
there is already an entry on ionic forum with videos and code snippets, please have a look at phofurl
this repo reproduces the issue: phofurl just switch a few times, quickly, between 'kittens ' and 'puppies ' segment and the error should appear.
1. create an ion-select component and add 5 to 6 items to the select list 2. run the app in chrome browser and open the developer tools 3. click on the 'toogle device toolbar '.
4. in browser window select iphone 5.
5. click on 'rotate ' button to change orientation to landscape.
refer this plunker: phofurl refer this screenshot: phofurl
1. create a new ionic 2.x app 2. add any component that responds to touch/drag 3. attempt to use scroll instead of touch/drag and it will not do anything perfect demo from ionic haha: phofurl
starter tab project (ionic start --v2 myapp tabs).
1. build for windows and deploy on a windows device.
2. then click back button on one of the root pages (app goes to background).
3. open the app from background 4. click back button again after some debugging, i think the code that generates the problem is in platform implementation: phofcode on windows, an exception is thrown when trying to exit app, as cordova specifies ( phofurl exception unsubscribes handler, so handler isn 't called anymore on back button events.
clone this repo: phofurl to reproduce the issue open the home page and click a few times on the home-button.
you will see that the dismiss transition and page will remain blank.
1. create 2 cards in ion-header & create 2 cards in ion-content.
2. dynamically set the top card in ion-header to be removed (display:none) (after 2 second timeout).
* see plunker # 1: phofurl 1. create 2 cards in ion-header & create cards ion-content.
2. dynamically set the top card ion-header to be added (after second timeout).
* plunker # 2: phofurl
open devtools, enable throttling, and compare 2g to grps.
use the related code and test it with the ionic view app on with the ios simulator.
> ionic cordova:run android --prod
this is only reproducable with my custom component, but i guess this will be an issue for other edge cases where one wants to scroll programmatically right after loading content
the problem seems to occur every time setroot() is called on a navcontroller with a page that has a menu while the navcontroller already has an active menu (on the same side).
i created a plunker here phofhyperlink to show the behavior.
the first page has menu and works fine, clicking the button to switch to second page also works fine.
the next button switches back menupage and triggers problem, menu will not open anymore.
when you do same steps again, will work again (because there is no active at this time), third time will fail again and so on.
create two tabs and one menu for each.
apply the multiple menu pattern as shown below: phofurl
create some tabs, then click where the cursor is just above the border-bottom, but not on the text.
just use an action sheet with a subtitle like the one in this example phofurl
build a reusable module with multiple components and a service.
attempt to lazily load the module and then navigate between the components that were lazily loaded.
this works perfectly in angular.
for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
1. create a starter tabs app 2. add more tabs with tabsplacement="top" 3. make the bottom tabs larger than the top tabs 4. the ion-content margins are incorrect for the top
like i said, in every navigation with string value i face the above reported error
scenario: 2 tabs, index 0-1 1. open app, tab 0 is active by default 2. click tab 1 3. click tab 0 4. call tabs::select(1) 5. the contents of tab 1 is now rendered, but the itself remains inactive until something triggers a repaint.
the ionchange() event is called as it should.
i 've setup a brand new ionic2 app and pasted in the example from the docs.
i have a repo with the code: phofurl
phofcode double tap the slide to zoom it in, then try moving your finger.
as you move the finger, zoomed image should follow it, allowing to see parts that are outside of the view.
1. open safari on ios 9 (the simulator might work).
2. navigate to the official chip demo at phofurl 3. scroll down to the "delete chips" area.
- create a new ionic project.
- add 2 pages, one for the rootmodule and one which gets lazy loaded.
- push to the lazy loaded page
run ionic build command in console: phofcode
the following will work on 2.2.0 but not 2.3.0: phofcode dosomething is never fired on 2.3.0
use "click" event and "tap" for same action to note the difference
view this demo: phofurl click the gear at the top right, then click back and watch the area where the gear was.
on : os x el capitan do in a terminal: ionic start test blank --v2 cd test ionic platform add ios ionic prepare ios ionic emulate ios --consolelogs ---> "white screen of death" instead of "the world is your oyster" and instead with an attempt to use wkwebview: plugin rm plugin add phofurl --save t--> installing for ios t t--> error: the header content contains invalid characters prepare launch xcode in xcode: run on simulator ---> "white screen of death"
any instance of the tab bar on chrome will show this effect.
the effect can be observed in the standard ionic tabs starter project once you edit tabs.html to add tabshighlight = true.
on this demo, the first button use ion-button and the second use ion-item phofurl
just follow the ionic contacts tutorial phofurl
please check this plunker: phofurl
phofurl (see console output for button triggering)
plunker: phofurl for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
deploy the related code snippet to either of the above mentioned devices, emulated or physical.
since this bug occurs when hitting inside a small limited area outside the toggle the easiest way to reproduce this bug is to emulate an iphone and scale window of emulator to 100 % make area where toggle is able enter buggy state - as large as possible.
<!-- if you are able to illustrate the bug or feature request with an example, please provide steps to reproduce and if possible a demo using one of the following templates: example of the behavior here: phofurl
i have created a plunker based on your template phofurl
i have created a repository displaying the issue github repo phofhyperlink i 've added several ion-inputs with different combination of attributes to show the issue.
running the app on android device we can see that keyboard shows suggestions if autocomplete attribute is present, however ios simply does not care and never displays anything.
tried enabling keyboardaccessorybar just in case, but that does not help in any way as well.
setup deeplink config: phofcode from within activitypage, create a link: `<a related activity</a>` run the app, navigate to activitypage and click the link.
another activitypage is pushed onto the stack and expected parameters are passed.
however, the view does not update.
everything works as expected in browser, but does not work on ios or android.
updating everything to ionic 2.2.0 did not resolve issue.
phofurl <- works in browser, but not on device.
checkout example posted in related code.
do following steps: - open modal - click the "type here" text - text area disappers - press any key on keyboard and textarea appears.
click outside textarea to blur selection.
click again to focus and ion-textarea should disappear again.
1. build and run the app on a physical device running ios 9 2. enable "web inspector" of safari on the ios device, then inspect using safari on mac 3. you 'll see an error printed in console, like phofcode
may be this would be reproduced in a heavy js coded app.
create simple project with tabs create a page and add a link to this page in the first tab navigate to this page then back (add console.log("hello") in ionviewwillenter of the tabs container)
install sqlite and zbar, then call `scan()` function of zbar.
setup a new ionic blank v2 template and run lighthouse
please open phofurl <!-- if you are able to illustrate the bug or feature request with an example, please provide steps to
just create a ion-textarea and try in android -->
1. add a navigation push to your application, a popover or a ion-item.
2. run on an ios device (in simulator the bug does not occur)
i created a new app from the tabs template and modified the code in contact.ts to manually throw an error on `ionviewdidenter`.
phofcode when i click on the tab contacts, i can see the error in chrome dev tools, but it 's not hitting code in ionicerrorhandler.
phofurl (this is an older ionic version, but issue still exist in current version)
code here: phofurl to test: phofurl with an android device (or chrome devtools simulating an android phone), click on the button and try to scroll the content.
`ionic start apppreferencesbug --v2` (create a new ionic project) 2.
`cd apppreferencesbug` (navigate into the project) 3.
`ionic plugin add (install the cordova plugin, like in the docs) 4. insert `import { apppreferences } from 'ionic-native ';` into 5. run `ionic serve`
create an ion-textarea somewhere and do a long tap on it on an android device
enable talkback on an android device and attempt to fill out a form.
1) create slides sourced from array and projected to template with `*ngif` and loop enabled 2) update an array 3) swipe slides
you can get access to the full code on my (public) github repository: phofurl the code is really trivial and small, 3 pages app with nothing but showing data in lists (it 's a forum).
steps to reproduce: 1. open the app (the client is from israel and the app is in hebrew, but it doesn 't matter) 2. click one of the items on list 3. click one of items on list in next page.
5. navigate back the navigation back is horrifically slow on android.
open with firefox: phofurl scroll to the end on the sample app
1) ionic start menu-test sidemenu 2) platform add android 3) open menu.html 4) add 15 new items to the menu 5) ionic run android 6) try drag open menu not from title bar
run any project with ionic@latest on android 4.4.2. no plunker is necessary because it seems to occur with any project.
i 've included a codepen with code similar to my project.
it seems to work in code pen, but when i pull it down and run it on my phone, it recreates the issue.
i 've also included a gif that shows the issue.
my phone is a moto x pure edition running android operating system 6.0.
phofurl as you can see from this plunker, turn on the console, and swipe to move the slider 2 times.
it should only move 1 time (which visually it does) but you 'll see the change event gets fired again.
and when it does the activeindex reports a slide that doesn 't exist.
i can 't reproduce in a plunkr because with `ionic serve` works, but with `ionic run android` for example it doesnt.
<!-- if you are able to illustrate the bug or feature request with an example, please provide steps to reproduce and if possible a demo using one of the following templates:
i use this example in angular phofurl -->
1. clone this repository phofurl 2. add and emulate android
i have a class with the attribute -webkit-box-orient: vertical; that is related to -webkit-line-clamp, but when i run the app, this attribute disappears so my text is rendering all the lines.
2. wait for a few seconds.
install latest nightly, run app on windows
open the app => tap on home button => go back to the app (or) open the app => double tap home => go to an other app double tap home go to the
if you are able to illustrate the bug or feature request with an example, please provide steps to reproduce and if possible a demo using one of the following templates: for ionic 1 issues - phofurl for ionic 2 issues - phofurl
see ion-menu in app.html in this code example: phofurl (slide the menu open from the left) also, see this screenshot: pasted image at 05_10 pm phofimage finally, mike from the team at ionic-worldwide slack sent me this screenshot on where the source of problem is: screen shot at 11 47 06 am phofimage
a demo can be found here - phofurl please note that zooming will work as expected on a desktop computer, and this issue only crops up when running it in safari on ios.
open up this link on an ios device and pinch zoom to experience the issue - phofurl
- create three pages (page1, page2, page3).
- add button that will do a nav push of page3 in page2.
- add a popover that does a nav push of page2 and then dismisses itself (using code above).
- add the popover to page 1. open popover on page 1, press the button to push page2 onto the stack and dismiss the popover.
notice back button is visible on page2.
on page 2 press button to push page3 onto stack.
page3 has back button, press it to return page2.
page2 no longer has a back button.
here is example ( you can take it from your demo) <ion-searchbar <ion-list> <ion-item *ngfor="let item of items"> {{ item }} </ion-item> </ion-list>
ionic native camera, when you return to the current app after calling the camera app, the top status bar overlaps.
1. install latest nighly version 2. start project 3. place refresher component
make the app direction rtl by: 1- `<ion-nav #content [root]="rootpage" dir="rtl"></ion-nav>` 2- see the back button on navbar and the same for io
any simple form will do which includes structures such as: phofcode
i have created a github repo showcasing the bug here: phofurl 1. clone repo and run phofcode 2. start up server with phofcode 3. open page on a mobile phone (this issue is easier to see on an ios device because of the rubber band scrolling) 4. fling the home page content 5. while the home page content is still scrolling, tap either "about" or "contact" tabs.
the scrolling will stop, but tab will not switch 6. optionally, you can set fullscreen="false" in src/pages/home/home.html and try again to see expected result when tapping a tab.
add width-100 to an <ion-col>
run "ionic serve" with live reloading, make a change to a template, wait for the app to reload (on browser or device), and the change will not be reflected.
here 's a link to a screencast i recorded showing the problem, where i update template by adding padding attribute to 2 divs so they have padding, but after live reloading no padding is added: phofurl
i reproduced this on: - chrome for mac (64-bit) - safari version 10.0.3 phofurl
this is easy to reproduces as it happens with the templates provided with ionic.
steps to reproduce: 1. ionic start pagetest super --v2 2. ionic platform add windows 3. ionic build windows --prod --release 4. deploy on device
run "ionic serve" with live reloading, make a change to a template, wait for the app to reload (on browser or device), and the change will not be reflected.
here 's a link to a screencast i recorded showing the problem, where i update template by adding padding attribute to 2 divs so they have padding, but after live reloading no padding is added: phofurl
see related code, run on ios device.
potentially increase number of toasts on a device newer than an ipad air.
create an ion-card with an ion-card-header that has a button to invoke a popover
my tabs.ts (simpilified) - data used to generated tabs with *ngfor is brought from php backend: phofcode when i used @viewchild to refer to the tabs elements, the interesting thing is that its 'length ' property is always 0 (i checked in ionviewdidload event).
trying to select one of the tabs programatically also fails - they are like ghosts;) also when you place at least one static tab next *ngfor ones in the template, all *ngfor ones show up but static is always selected no matter what you select programatically or in selectedindex property on tabs element.
for now i must query backend before (in app.ts) and send result in navparams 'tabs ' view.
using all possible lifecycle hooks 'tabs ' view has no results.
it must be issue since displaying results eg a list works as expected - they show up.
use the following code code below to reproduce.
1. implement the google map 2. test it and working fine 3. implement the ad mob in same page 4. run it and google map hides.
just put a simple ion-input and test its behavior in iphone6 or iphone 7
this plnkr showing how the swipe event doesn't work if you swipe up or down and the swipe work as expected if you swipe left or right phofurl
$ ionic platform add android
i have checked all positions where using and add <code>xxx && to avoid null objects, but it happens still.
to reproduce, add this : _<ion-list> <ion-item tappable> <ion-label <ion-input type="text" </ion-item> <ion-item> <ion-label <ion-input </ion-item> <ion-item style="display: none;"></ion-item> </ion-list>_ and try tapping on it throw ionicview.
and you will see that the delay with tappable is as long as without... around 300ms.
sorry, its very hard to reproduce.
it only happens when doing testing on real devices.
using livereload increase the chance of getting it.
1. open this link phofhyperlink using chrome on android 2. click on the text area to bring up the keyboard 3. the text area disappears 4. type something and close the keyboard 5. the text will be reversed
phofurl 1. display developer console in your browser with f12 2. visit the second tab "players" and press the button that starts the ion-slides playback, 3. as soon as the first or second slides completes switch first tab "media" 4. you should observe ion-slides stops playing even though
i had trouble including `@ionic/cloud-angular` to the plunker in the template, so i cloned the base app repo and built on that.
here's what i added: phofurl
1. initially set one of the tabs pages to page1 (any page) 2. dynamically try to set the root page of that tab to another page using the code in related code section 3. the tab will switch, however tab 's page will not (content still showing old page) 4. physically click tab again (that was suppose to be switched to) 5. then expected behavior works (content of new page shows up) for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
1. go to virtual scroll api docs phofhyperlink 2. click on
here i leave the link with the demo using the template that is specified phofurl
this only appears when you 're actually previewing the app on an ios device; not in the browser (since, obviously, the soft keyboard is not shown in browser).
1. create a projec that uses tabs (easiest way to do this is start with ionic 's tab project template).
2. create a page that has a list with "a lot of stuff".
enough rows to need vertical scrolling.
3. use the page as the content for a tab in the tab project.
4. view the application using ionic serve.
for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
see 2.0.0.rc4 example plunker: phofurl this works as expected (note: some css is required in * index.html * to make the
this plunkr simply has an ion-slides component with pager="true".
the pagination bullets are clickable even though `paginationclickable` is `false`.
place an `ion-refresher` inside a custom component and not in a page 's view directly
the bug is viewable on a fresh installation of ionic2-starter-sidemenu and when deployed on android 4.4 via "ionic run android"
create an application with one sub-page.
create a native map on the sub-page, with a height of 50%.
set tabshideonsubpages to true in app.module.ts.
phofcode this is the app config: phofcode
add a button, and a (click) event.
the plunker will not replicate, it must be run on an ios device.
just put an `ion-icon` inside a `button ` with the `ion-item` directive inside a `ion-list` component
create mobile application in ionic/cordova with $http.get, which is trying to access non-existent request on some existing url, to get 404 not found.
apply chained filters (per phofurl to an attribute of an element and run the code in the ios emulator.
use the example in your documentation: phofurl
use the following code in a new ionic2 page.
for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
try to interact with this url on a desktop: phofurl now try to interact with: phofurl since `md` is the default desktop style, the two urls should behave identically.
- push to a new view - call - press the hardware back button while loadingcontroller is still displayed
the issue i am seeing is scalable.
using a json file with 400~ lines / 30 objects provides a noticeable but acceptable delay (~2s).
the delay scales up as the dataset scales in size.
this could be caused by my code creating a new slide for each object in the dataset.
oddly with a dataset of say 9k lines 600 objects we start to see memory usage upwards of 1.2gb on chrome and osx (i understand os x is not supported for building).
ionic start tabs --v2 cd tabs ionic platform add android ionic run android --device
create a tabs template, and press any tab using an iphone 6s or later.
1. create an ion-slides with async data.
2. add infinite scroll to ion-slide.
3. scroll to bottom (you will see the infinite scroll component is present there and loading spinner is rendered but it does not trigger the (ioninfinite).
4. push a page from ion-slide.
5. navigate back to the ion-slide.
6. the infinite scroll should work as usual now.
1. open a page in a modal 2. open another page using [navpush].
i can recreate this issue on any ion-content view on ios 10 in platform browser or ios.
what you can do is once you have enough content to scroll vertically, you can scroll the content to the bottom of the view, tap once on the bottom of screen, then start scrolling like crazy.
it immediately goes into an unresponsive frozen like state.
this is a little hard to reproduce and its gotten better with releases.
it also seems to happen more when going out of safari and coming back in then immediately scrolling.
import `nav` into child view, then inject into constructor.
- create an ionic v2 app side menu - add some cordova plugins, eg.
onesignal - build for release and install on an android device - open and close the app different times
create an ion-select multiple, use two-way data binding on the ngmodel and push valid data onto the ngmodel array; if done outside the constructor, the ion-select will not update, becoming inconsistent with ngmodel.
open a modal and then push a new page from the modal.
put this in config.xml: <widget id="packagename.android" version="0.5" xmlns=" phofurl xmlns:cdv=" phofurl manifest for uwp app will have "packagename.android" as package name instead of "packagename.windows".
phofurl i have added a sample code to give you an idea of how we have implemented our code but we are not able to reproduce every time we try.
we have a video and a screenshot depicting the issue that occurred.
issue only occurs on ios 10.2 devices, we have found the issue on iphone 5/6s.
i build application with `ionic build ios` and then i go to xcode, open project, choose my connected iphone and run it.
later i open safari and choose my iphone from develop menu.
nothing much just added splash screen to config.xml
use page>);` to go back to the current page
slowly drag slider a little further than the second button.
create a picker with column option `disabled: true`
create a page with a ionic slider component, with a "(click)" function this.nav.push another ionic page with another slider component.
this bug only occurs in browsers (chrome etc
to reproduce: 1. open the plunkr phofurl 2. tab on "go to next" 3. try to swipe back from the new page 4. click "yes" on the alert to `resolve` the `promise` an so go back to start page 5. be :disappointed: btw: tab back button in header and than "yes" in alert works as expected.
the relevant components in plnkr: * `app.component.ts` with `swipebackenabled` set true * `app/start.page.ts` root page * `app/next.page.ts` page where i intercept `nav` with a `promise` in `ionviewcanleave` and an `alert`
1) try to open a select that should close after 5 seconds if the user doesn 't click.
2) try to create a select without the ok/cancel buttons
phofurl (see error in console)
here 's the plunker: phofurl
view the docs/demo in chrome.
3. tap back button in header.
create a header component and use it on your app when you create a header component and then use it in your app, there is no margin/padding on ios so it looks close to the top of the page.
i had phofcode in the page and you can insert the header from documentation inside header component: ` <ion-header> <ion-navbar> </ion-navbar> <ion-toolbar> </ion-toolbar> </ion-header> ``
while developing with > ionic serve create form with control `<ion-select> `that has property
place `ion label` inside `ion chip` for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
i had to wrap the content in the slide in a <div class="scroll-content"> to enable vertical scrolling.
1. create the component containing an icon button 2. add an ion-buttons into the page 's ion-navbar 3. add the component into the ion-buttons 4. shown on ios
phofurl see plunker a) pull a few pixels down then let go b) oddly you can see that console.log(event) shows that the state is inactive - but event.state stays as pulling for the output from
i don 't have a short example to reproduce this.
ionic --version sudo npm install -g ios-deploy
please see the plunk here: phofurl tap the search button in the top-right, and notice it appear above the `ion-list`.
you may add `slidesperview="2.5"` attribute to `ion-slides` you 'll not be able to see 2.5 slide !
1. compile for platform browser in production mode.
as the problem is deeply link to the url navigation it is irrelevant to use a plunker to reproduce the issue.
create an ionic app based on the code below (or use the plnkr).
i also have an ionic view app which i can share.
note: this issue only occurs in a 'real ' ios app.
it does not occur in the plunkr, not even when run in safari on ios.
1. add deeplinking: [ phofurl 2. open a modal from a deep-linked page with: 3. refresh the page
sadly i can not reproduce this behavior on plunker.
the best i can do is this video of it happening.
although i can 't provide you with much here, the source code to the app is here phofurl and the problems manifest around the news page.
see current behavior above -->
open any component like - select component, alert component, datetime component.
example to solve issue - i think easiest way to solve it - use config same way as it is done for - "backbuttontext".
just set the `[loop]` input property of an `ion-slides` element to `true`.
create a new page and add html content bigger than screen size, for example a big image.
1. create tabs as your main component: phofcode 2. when you will access a,b,c,d pages - viewctrl and navctrl names will be still homepage.
simply put virtualscroll inside a ion-card.
here is plunker for lazy people.
create an app with a sliding menu and open it in chrome on android.
i used a nexus 5x with android 7.1.2 and chrome 56
ionic start --v2 myapp tabs replace code of home.html and home.ts as below home.html phofcode i would like to see the following behavior when the viewport is landscape the image
1. create a base ionic 2 project as
`<ion-checkbox should prevent the underlying click from firing and not affect _checked state.
this is example code but running it on the web functions correctly.
i only see this issue on an ios device or emulator.
in the below example, open the console and try clicking or long pressing on the "address".
i just install the app in the phone and try to login with my credentials.
- - - what 's going on?
why am i having this error?
any use of ion tabs
1. set [attr.aria-label]="some label" on an `<ion-tab>` 2. enable voiceover in ios.
3. tap the tab and it reads out the icon name
1. change the background of the alert: phofcode 2. create simple select with few options.
phofcode 3. run as a website in browser 4. click select and check the options label color which is black.
this is a well known bug that keeps being closed/marked as fixed.
it is a critical problem in the nav code of the framework.
this really needs to be addressed before apps can be deemed production ready.
1. take build as `ionic build android --prod --release` 2. sign the apk with jarsigner 3. zip align the apk and install it in mobile to save some data in local storage.
4. uninstall the app and install it again.
use template from documentation for quick repro.
presentprompt() { let alert = this.alertctrl.create({ title: 'login ', inputs: [ { name: 'username ', placeholder: 'username ' }, { name: 'password ', placeholder: 'password ', type: 'password ' } ], buttons: [ { text: 'cancel ', role: 'cancel ', handler: data => console.log( 'cancel clicked '); } }, text: 'login ', handler: data => if data.password)) // logged in! }
else // invalid login return false; } ] }); alert.present();
- download the ionic 2 tabs starter template - copy home content into about or contact template - run on ios device or emulator (does not happen on browser)
plunkr link: phofurl if my understanding is correct, the initial set of nav stacks should look as follows: component | nav controller type | nav stack ---------- | --------------------- | -------------- appcomponent nav [ homepage ] homepage nav [ tabsview ] tabsview tabs [ tab1component ], [ tab2component ] -> one nav stack per tab you can see the stream observer in the `tab1component` printing console logs once a second.
when you click on the `change root page` button in 1st tab, `.setroot(althomepage)` is called on application 's root nav controller.
at this point i 'd expect only nav stack to be like this: component controller type stack appcomponent althomepage ] i would also expect nested stacks to be destroyed along with pages they contain.
however, we can observe that: - the subscription made in 1st tab remain active and reacts on new stream data - the `ionviewwillunload()` methods of components in nested controllers ' stacks are not called - the `ngondestroy()` hooks are called so it seems like components are actually destroyed from angular 's point of view, but not from ionic 's one.
moreover, it seems like ionic continues to keep track of nested stacks (that should be removed at this point) thus preventing page instances from being released from memory.
this issue leads to memory leaks.
my impression is that some cleanup methods are not called ionic 's navigation system internals.
anyways, i think there should be a way release all resources (nav controllers and relative pages) related a stack.
[sorry i don 't know how to use plunker yet] page a: create instance of page b via modal controller page b: create instance of page c via modal controller: phofcode the onwilldismiss() never gets called, after c is dismissed.
create a starter project with ion-datetime and load in internet explorer in document mode of ie 11 / edge, using pc or virtualbox phofurl or browserstack.
open an ion-select on a phone in landscape mode, or in a web browser with small height.
simply using the blank project: * `ionic start inputscrolljank blank --v2` * `cd inputscrolljank` * edit to include an `ion-list` with enough items to trigger a scroll when the keyboard appears (my example code is below).
* `ionic run ios --device` tap on a lower `ion-input` in the list (so the webview scrolls) your placeholder will jump around (2-3+ times) as well as some cursor glitches, etc.
create 2 pages in a tabbed interface and add to the first a swiper.
try to navigate between those pages a lot of times stressing as much the swiper component
here is a plunker where i recreated the situation (in the home-page component): phofurl scrolling up and down makes visible that performance issue
just download the sidemenu template
happens randomly on ios 10.2.1, iphone 7 after making several calls to a list that popup alert prompt.
1. generate an ionic v2 project: `ionic start -t blank -v ioninputtest && cd ioninputtest` 2. run the project on an ios simulator: `ionic emulate` 3. ensure the hardware keyboard is connected: hardware | keyboard | connect hardware keyboard.
add the the following nav-gard to your page and then use the android back-button.
it works fine on android and chrome but not on ios (checked on version 10).
test on both android and ios emulations in chrome.
to replicate the problem, i created a brand new app (ionic start newapp --v2) and added android platform to it (cordova platform add android).
using this plunker: phofurl enter data into either or both of the password input text boxes.
move focus between/to/from/etc them a few times and watch it vanish!
others seem to work fine.
note, you seem to have to blur the input field then return to it then leave it again in order trigger the bug.
1. clone this repo: phofurl it is setup with ionic 2.0.0 and a minimal reproduction of the issue.
2. build for ios with `ionic build ios`.
open the app on your ios device.
3. tap on the input field.
you should be able to enter text.
4. press and hold on the input field to bring up magnifying glass.
drag magnifying glass back and forth.
notice that cursor does not appear as it would normally.
you should no longer be able to enter text, but input field is still in focus and keyboard stays open.
alternatively: 4. press hold input field to bring up "select all" menu.
press "select all", then delete text you entered.
you should no longer be able enter text, but field is still in focus keyboard stay open.
i 've debugged the issue and traced it to this line of code phofurl stopatheight is 0 so the function returns after processedtotal reaches 4 which skips all other items in the collection
i have uploaded a demo project on phofurl phofhyperlink create a new application `ionic start inheritance --v2` add the browser as platform (just to be able to build afterwards, it could be any platform).
`ionic platform add browser` create a file base.ts under pages/base/.
this is not a component, but just class, containing code that is common to all pages (e.g.
creating alerts, toast, ...) this file implements the oninit and ondestroy interfaces, and provides default implementation.
phofcode adapt the homepage, to extend the basepage.
do not specify an implementation of ngoninit and ngondestroy.
phofcode build app by using `ionic run browser --target=chromium` i get phofcode --> homepage loads, calls parent constructor from within its own constructor, and calls parent ngoninit method.
now build app for production `ionic build browser --prod` when i run application, i only get phofcode the ngoninit method is not called when explicitly add ngoninit ngondestroy methods and build it again browser --prod` then get apparently, parent method is known, but child class must explicitly implement methods.
this only case for minified version.
the non-minified version seems handle this inheritance correctly.
have a config file at the root of the app.
add `<div to a page, run the app using ionic serve, and inspect the div.
for some reason, this does not happen on plunker.
install the plugin phofcode try to import the plugin phofcode
(followed ionic 2 api documentation modalcontroller example) phofcode the problem seems to come from css: phofcode when deactivating "visibility: hidden" line in chrome, backdrop becomes visible.
however, the cmpmodal component is placed
1. build a page with a refresher 2. swipe down to refresh 3. now change page before you get data (or you take a dead end) 4. error will pop up
use ion sliding list in any rtl app
1. open phofurl 2. press "show confirm alert".
3. press enter, the handler of the first button is fired, but the first button is disargree.
create a list containing one or more input fields, run on ios, then drag and quickly release the top or bottom of the list so it bounces.
it does not happen every time, so do it a couple of times.
-- setup an ionic project with tabs -- on a page, attempt to implement ionviewcanleave() where it returns false.
-- attempt to tab on another tab while ionviewcanleave() returns false.
include data picker along with other inputs and open the date picker in ipad mini 4 with ios 10.2.1. img_0001 phofimage
create any prompt alert phofhyperlink on an ipad and note it 's positioning.
as said, i am running this on a device, so plunkr won 't work.
this is the relevant code: phofcode this is the css: phofcode
2. tap hardware back button
plunker: phofurl phofhyperlink 1. start new project 2. add `mode: 'ios '` to phofcode 3. add the following header to a page: phofcode
the following datetime will produce the issue: phofcode changing `displayformat` to `dddd mmm d yyyy` works fine.
<img width="388" alt="screen shot at 4 31 05 pm" src=" phofurl
happens intermittently on any page with dynamic `ion-list` using `ion-item-sliding`.
the easiest way to reproduce is to add a `pin` to the range so you can see the value as you drag.
* open this e2e on a device: phofurl * tap a disabled input
tap on an input field to focus it, the virtual keyboard will popup.
close the virtual keyboard tap on any part of the screen (but not on another element) the virtual keyboard will popup, with no input focus.
- create a tabbed app, add the following to one of the tabs ion-content: `<iframe src=" phofurl frameborder="0" - test
create an app using `ionic --start --v2`, run the app, open it in chrome 55 android, save it as a pwa to homescreen, open the pwa.
check picker of `chrome wednesday dec 31` in phofurl thanks
if you are able to illustrate the bug or feature request with an example, please provide steps to reproduce and if possible a demo using one of the following templates: for ionic 1 issues - phofurl for ionic 2 issues - phofurl -->
1.change video to full screen mode.
2.click the zone of ion-tabs.
see related codes and swipe
step 1: ionic run ios -l -c --device this will run livereload on ios device connected to the machine.
step 2: ionic run android -l -c this will give an error phofcode this happens because the address is already in use by livereload running on ios.
i have tried changing port (--port), livereload-port (--livereload-port), nothing 's working.
i couldn 't get a plunkr quickly working with embedded svg.
in our case: multiple clicks (or taps) on the svg icon and the uwp app crashes immediately.
we are able to replicate with ionic upload
verify the base ion slide is functioning navigate to another page.
navigate back to the page with the slider via navctrl.push() verify the ion slide is not functioning
24px and create an ion-range element
click on the navbar back button in 'native mode '
go to phofurl and switch to windows and click start time.
take actual ionic-conference-app ionic platform add windows ionic run windows
couldn 't test android only ios.
- create a ion list that contains enough items so the list is scrollable.
- use the pull the refresher - afther the refresh is done, scroll list down.
- now open navigation panel, content will dissapear.
see the example on phofurl 1. go to phofurl with safari on ios.
2. add to homescreen 3. go to homescreen and open the example from there 4. scroll up & down.
reproducible with the sidemenu starter `ionic start testapp sidemenu --v2`
using <ion-badge> in rtl ionic 2 apps
1. download the tutorial and do the configuration for the links on app.module.ts 2. on list.ts line 36: { 'itemid ': item.id});` 3. on item-detail.ts : phofcode 4. npm install lite-server 5. create a bs-config.json file in the package.json directory: { "port": 8100, "files": ["./www/
placing <ion-menu> on any rtl-based app (html dir="rtl")
build an simple ion-slider (3 items), and set the properties: centeredslides = true slidesperview = 2 add some css to highlight the active slide (just to make things easy to view in the browser).
when you are in the last slide, if user slide again, components seems to slide a slide that does not exists and last loose active property.
plunker here phofhyperlink better viewd in embed phofhyperlink .
see plunkr phofurl scroll up and down.
button moves when it should not.
create a new project by running: "ionic start testresources --v2" copy your splash.png and icon.png into the resources folder run "ionic resources" navigate to folders you will see that the icon and splash images are still using the default cordova images.
- just slide another item after slider another one - or just slide randomly at any time phofcode `
tried to make a plunker, but rc5 doesn 't work in edge :( 404 errors for .ts files
try scrolling in the menu, then toggle the segment and try again.
create a ion-slides with the [hidden] attribute.
execute an adapter of ibm mfp 7.1.
it 's reproduceable with the code shown below on an iphone.
i haven 't tested it on an android device.
loading images of slider from service and just show the first item and after slide to left for second one not work and crash slider over there with white blank page
`ionic start mysidemenu sidemenu --v2` 2. set ios to md mode in `app.module.ts` 3. make the content of `page1` long enough to scroll 4. run in ios simulator 5. open side menu 6. try scrolling
it happen randomly after using from one page to another.
i do not have clear step to reproduce.
if i click on link in left menu, which make from app.component to the same page, binding start works again on page.
as i can see, i get this bug often, if my pc or tested device is slowing down (reproduced on browser and devices).
display a popover with `popover.present()` on an android device (we've tested on pixel and oneplus 3t).
place a slider in the left menu.
1) clone the latest version of the "ionic conference app" (rc5 release) 2) build for windows universal platform (ionic build windows) 3) install or run on a windows phone device (i am using lumia 830) 4) note slow performance when switching tabs/views
run ionic serve -> make / save some changes to code (sometimes containing errors) -> repeat
1. clone this repo: phofurl 2. change tabs and watch the information logged out to the console
* in conference app, please remove * in set tabhighlight="true" for ion-tabs tag * ionic serve and open app in chrome * make sure, that device toolbar (from developer tools) are inactive for tab with the conference app you should see, that each tab button is not properly aligned with the tab highlight and it is best to see on the last tab button.
put ion-input and a button inside ion-footer.
click on ion input, type something and then click the button.
if you have `console.log( 'button clicked!
');` inside the `onmessagesendclick` function, it 's not shown.
click works only when keyboard is closed, so second click on button fires click event.
create a simple virtualscroll list, add a button that calls contents scrolltotop() method.
scroll down the list a bit and click the button.
start a new blank project add to ion-content create a variable "showbutton" and default to false ngif if a button (or whatever) on the page so it only shows when showbutton is true in the somemethod update showbutton to true.
wrap the change to showbutton in a zone manually and it updates correctly.
just add `autoplay="2000"` to a `<ion-slides>` *whose children use the async pipe*.
follow this phofhyperlink plnkr: 1. fill both fields 2. click the login button
execute the command "ionic resources --icon" whilst an icon.png image file is located in the resources folde
download a fresh copy of the ionic conference app.
phofhyperlink add the below code to schedule.ts.
note that these events are only being picked up when navigating with the tabs, they don't get picked up when navigating with the side menu.
please check out this repository with the 2 examples: phofurl you can use chrome dev tools and select an
i made a video to show what i mean (pay attention to the pictures visible when the scroll starts and the one that gets opened afterwards): scroll-select-issue phofimage sadly you can't see the taps, so i have to describe steps in more detail: 1. you start scrolling by swiping up/down (take your finger off screen).
2. while content is still scrolling, tap and hold anywhere on screen for at least ~0.2s, then release it.
3. the click will be triggered on item that was visible at that position when you started scrolling.
with chrome debugger, you can reproduce easily this problem.
1. create app with ionicscroll.
2. load app to chrome with touch device mode.
(ionic determine input device as touch device and disable scrolling with mouse) 3. toggle off touch device mode.
4. you can not scroll with mouse.
reversal pattern goes well: 1. create app ionicscroll.
2. load app to chrome normal mode.
(ionic determine input as mouse and disable scrolling touch panel) 3. toggle on mode.
4. you can not scroll panel.
create a list of say 200 items so you have a decent amount of length.
add an ion-search box and a basic search to filter the list as per the standard ionic component docs.
scroll halfway down the list perform a search which will return less items than it takes to reach your previous position in the list (ie scroll down 50 items and perform search that returns 5 items).
the screen will go white with no items shown, scroll events stop firing.
on ios uiwebview navbar will scroll off top of screen as if it is no longer fixed.
basically it looks like ion-content has moved off top of view port somewhere and you can 't get back to it until you restore data to be longer than needed reach your current scroll position.
i see same symptoms on both android and ios uiwebview.
does not reproduce on plunker but here is plunker setup with simple search demo with virtual scroll, straight from ionic demo 's page but with bit longer data virtualscroll instead ngfor.
just copy paste this into new ionic app you can reproduce same behavior on both ios android.
i) add variable to controller ii) set variable on ion-view-enter lifecycle event iii) update variable through broadcast iv) try to update display using $timeout or $apply(async)
using the demo do the following steps: 1. click the first list item (*foo 's playlist*) 2. click * back * *leaving playlist* alert will be shown 3. click the second item (*bar 's playlist*) 4. click * back * no alert shown not triggered) demo: phofurl
open plunkr put cursor in input field hit 'tab '
run the following code using `ionic run browser`
phofcode in this case, the loader never dismisses.
in a modal, use a loading before the dismissing of the modal.
call the modal, close it, the loading component is still open.
create a page with an enough long scroll.
scroll "fast" (like when you know that you want to reach the end or the start of the page).
to reproduce you need to test it on a device, i 've tested in on an ios device.
can 't provide an example sadly.
simply create some inputs, create an alert and see what happens.
phofurl on ios (or google chrome 's device mode emulating an iphone) phofurl
please check this plunkr to reproduce: phofurl phofhyperlink
1. open phofurl with microsoft edge 13 on windows.
2. try to focus an input with the mouse.
3. see what would happen.
in one of my applications, i am handling the exception and showing that on $ionicpopup.
the issue happening for all dropdown, phofurl error i receive: error: [$rootscope:inprog] $digest already in progress phofurl phofurl beginphase@ phofurl
i made a simple service in order to keep track of all the alerts being presented (visible).
the reason i use such a service is because i could not find an api that i could use to detect whether there is a certain alert presented (visible) or not.
pass non-empty non date value in `max` input of `ion-datetime` component
1. create ion-list with ion-item-sliding inside 2. run build on android 5
i am a first time user.
just downloaded the latest android tools, and jdk, this is what i got
take the slides example - and make more text phofurl
open datetime picker, try to select any date by tapping on it.
it won 't work ot phofimage
1. i created the starter tabs project: ionic start -v2 tabstest tabs 2. create a testservice and add it to the providers of the app.component.ts 3. inject that service in the constructor of two pages (home, about) (just in constructor no providers attr on these pages).
4. open both pages and correctly see that service in injected as a singleton 5. now try to open about page using popover component.
6. you can see now that a new instance of testservice is created whenever about is opened using popover.
1. start a new project demo with default tabs template.
2. add a button tab in tabs.html as: > <ion-tab tabtitle="" tabicon="camera" 3. inject events into tabs.ts, and add a test method in tabs.ts: > export class tabspage { > ... > constructor(private events: events) {} takephoto() { } } 4. inject events into home.ts, and subscribe to above event: export class homepage { datatest: string = "old"; constructor(public navctrl: navcontroller, public events: events) { this.change.bind(this)); } change() console.log("data changed!
"; } 5. add a variable binding to anywhere in home.html: <button ion-button 6. click the 'camera tab, watch the home page.
while the console print the expected value.
7. click 'test ' button on home page, no update is happen also.
8. re-enter home page, repeat 7, update take effect.
i have an app in which i create a bookmark.
now when when the user go to bookmarks, and they select a particular bookmark, i wanna scroll them to that particular chapter and inside the chapter, that bookmarked (specific) line number.
you can see the issue i posted here phofurl
run ionic start app_name --sass --v2
create an app with ion-options in the sliding and deploy the app to android.
slide few times and you will be able to see white space which is created due to buttons not becoming active.
note this happens only on android and not on web.
issue does not present itself when running in desktop browser, only on device.
relevant code below should demonstrate what 's going on.
100% reproducibility with the below
unfortunately i cannot reproduce since the issue does not present itself when running in a browser, only on device.
however, it is consistently misbehaving whenever ran on device.
to reproduce simply; 1) from any page present a popover 2) with that popover have a link which presents a modal 3) throw button on that modal 4) try to click that button, on that modal, when presented from popover
phofurl in this plunker, the slides page closes when the last slide is reached.
but when the page is closed, `onreachend` is fired again, so * two * pages are popped.
using the facebook4 cordova plugin: phofurl there are two pages: homepage tabspage homepage is a blank page with a single button: "log in with facebook" tabspage is a basic page with ion-tabs, tab1 and tab2 1. homepage log in with facebook success function must set tabspage to the root 2. you should not have the facebook app installed 3. launch the app in android 7.1 (untested on other devices) 4. click "log in facebook" to trigger login function and therefore success function 5. tab1 is now nav stack twice.
if you click "tab1" tab, it will remove a duplicate from stack as if you 're navigating back from itself.
i have made this simple repo phofhyperlink that illustrates the issue perfectly.
just pull down that repo and run it on an ios device.
2. add (swipe) to ion-content on any page.
create a new ionic 2 blank project add platform android //install background mode ionic plugin add ionic run android
open phofurl open developer tools to see console log.
click on button with "click me" and on dismissing the toast you will error.
open phofurl and see `ionviewcanenter` & `ionviewcanleave`
use phofcode ` anywhere in your code
clone the ionic2 tutorial and create two popovers.
open one popover from a page and then open the second popover from within the first popover.
add function for onwilldismiss and notice that when the second popover is closed, onwilldismiss never fires but ondiddismiss does.
i 've created a dummy project i can share if necessary.
i tried plunker but it appeared to be running rc2.
* open phofurl * click hecked multiple times checkbox / toggle changes as expected * click isabled once * click hecked multiple times checkbox / toggle does not change but i expect it to change
insert text into an ion-textarea, click on the text area again (on an iphone, tested on device and elevator (ios 10.2) phofcode
impossible because the problem occurs only in a build.
install cordova-google-map plugin tap on the map
1. have a virtual list that shows data coming from an observable.
2. scroll down a couple pages 3. send some new data through the observable.
4. the list disappears until the user manually scroll on the blank list.
1) start a new side menu project 2) on the ios emulator or device tap the hamburger to open the side menu (all good) 3) tap the hamburger to close side menu (takes 2-3 taps before it responds).
i tried creating a plunker but it is using rc2.
there seems to be a bug in rc2 for this.
but i added my code to the plunker.
`ionic start testapp --v2` 2. create a simple login form (taken from ionic-conference-app) 3. run ios emulator 4. make username field focused 5. press tab to switch to password field the focus is lost.
reproducible only in emulator, not on web.
take a look at the plunkr below, or create a new project and copy the related code below into any of the pages.
thinking that i had an issue with my code, tested with a blank app - could produce the same issue.
$ ionic start cutepuppypics --v2 $ cordova platform add android $ ionic run android
create simple project with a page
ionic serve on an rc4 / 0.0.47 app scrips app that uses ionic storage
i am building an application based on phofurl i have successfully modified custom webpack.config according to the one provided in latest app-scripts version (0.0.47).
try to call "device.device.uuid" anywhere.
to see more details, log it in the console "console.log(device);".
you are going to see that device object is just empty.
for ionic 2 issues - phofurl phofurl
this only happens in an actual android device probably because of the fact that the keyboard is shown hidden and the available content height is altered.
* go to phofurl on a windows 10 tablet without any keyboard plugged * tap on an input > the virtual keyboard opens (ok) * tap outside the input > the virtual keyboard dismiss (ok) * tap again outside the input > virtual keyboard opens, without targeting any input (nok)
here is a repository that demonstrates this issue github repository phofhyperlink plunker phofhyperlink note: issue is only reproducible with a software keyboard!
so run the plunker in fullscreen on a mobile device.
the issue can be reproduced with an android emulator with the current ionic nightly or 2.0.0-rc.3
go to the conference app login screen.
clone the conference app: phofurl run on an android device: 1. go to schedule and slide an item, favorite the item 2. go to the favorites tab 3. slide open the item, click remove 4. an alert will appear and scrollbar will show on right 5. click cancel, then slide item open again 6. click on item body so item will close itself, see scrollbar on right
create a new ionic 2 blank project add platform android install cordova-sqlite-storage see this phofurl ionic run android
1. make a long enough page to require scrolling.
2. add a side menu.
3. slide the menu in partially and try to scroll up or down at the same time.
4. observe page underneath scrolling when it shouldn 't.
the parent tab page is phofcode and inside phofcode i have another tab phofcode feed.html phofcode userhuntspage here is the root page of tabs.
so a click on feed tab brings into the view and it should run its .
in the console _feed run_ is printed user _hunts run_ is not printed.
run the self-contained unit test below.
code example: phofurl this behavior also appear at the documentation: phofurl
- plunker at phofurl - please note that the current template uses rc2 and i think it fails to actually block the view from entering due to a bug this version had, and thus this issue is not reproducible directly from the plunker.
but you can see that the relevant code at `app/app.module.ts` and `app/detail.page.ts`.
- first-loading (or reloading) page at `/#/detail`
plunker: phofurl after opening "good page" if you try to open a "faulty page" you no longer able to return from good to home page.
for ionic 2 issues [repo] ( phofurl i also tested it against nightly build of ionic, the problem is the same.
cannot reproduce it in a plunkr since it requires _ionic-plugin-keyboard_.
i created a gist with some files to apply to a blank project so it 's easier to reproduce it: phofurl - create a project with ionic-plugin-keyboard.
- make sure to call: - in the index.html, add nav bar.
- create view with form with several input text (enough have scroll in the view).
install the app in ios device.
select the last input visible.
once keyboard is open, use "next" arrow go next input.
expected: the next input is focused and visible.
current behavior: the view scrolls too much so focused input is above visible part.
* install cordova-plugin-media * add code shown below * run this on an android emulator or device
i 'm not able to reproduce this unfortunately.
it seems to be a race condition only occurring in production builds, where content 's `_scroll` is not initialised before use.
my error reporting says these errors are only occurring on ios.
1. npm install ionic-native --save 2. ionic plugin add cordova-plugin-ibeacon 3. ionic run ios -l -s -c --device
just create two pages 1 and 2 and using in `page1` to push `page2`, and then in `page2`, using `navcontroller.pop()` to dismiss the current page.
run `ionic run ios -lcs` on ios 10 device or emulator, with the plugins listed below.
create a sidemenu ionic2 project and create another angular2 module which import the ionicmodule.
then try to import that module and use the angular router to navigate to some component inside this module.
phofurl 1. press button "push new page" several times 2. press tab with the heart icon as you can see all pushed pages are cleared and application goes to the root
set a long list of item, set each one slidable, try on ios.
1. create a home page.
2. create a child page which will be opened by home page.
3. try to make a menu in child page html file.
1. ionic start newproject --v2 2. ionic platform add browser 3. ionic serve browser or 4. ionic run browser 5. open console to see the error.
it seems like it happens most often when you 're focusing an input element and then immediately open the `ion-select` without blurring the input first.
the most reliable way i 've found to reproduce the bug is to: 1. focus an `ion-input` below an `ion-select` 2. tap the `ion-select` without blurring `ion-input`.
3. select a new value for `ion-select`.
4. an incorrect `ion-input` is focused.
sorry, it 's difficult, but very annoying, for example the console log plugin does not work at all, so debugging is hard
in any view, just do a running on ionic build --prod
this issue is reproducible using the demo from the docs 1) go to the official ion-datetime page phofhyperlink 2) select 12:01 am for the tokyo datetime picker under world times (as shown below) ionic-datetime-issue01 phofimage 3) tap/click on ion-datetime control again and you 'll see picker time is off by 1 hour ionic-datetime-issue02 phofimage
1. make a page with a virtual scroll list 2. add a side menu 3. scroll down a bit 4. open the side menu and see the rendering knackered.
use the below plnkr to open the sidemenu then close it, ensure your preview is small enough for the two side menus to overlap, you can also slow down animations to 10% to help see the bug.
1. load up a page with a virtual scroll list 2. load up the camera 3. dismiss the camera and go back to the list.
4. see that it 's borked (the 2nd page titled 'buildings ' in the gif) please see attached gif: phofimage
repro steps : 1. create a tab page, make sure each tab is triggering a digest (make http call).
2. install the app on an ios 10 device 3. switch the tabs rapidly back & forth
run the following repo on ios 8.x/9.x: phofurl
download ionic blank template with ionic2@rc3 and install android platform.
add <ion-input #inp type="text"></ion-input> to any *.html page and @viewchild("inp") inp: textinput; // <<-- error: property '_inp ' does not exist on type 'homepage '.
to *ts file then try to compile android platform.
create a list with 10 items and scroll to the bottom.
install the latest ionic 2 & ionic 2 cli versions and try to run `ionic serve`
i created a new project to reproduce the bug: phofurl i didn't add the push plugin because you need a `sender_id` to use it, so to reproduce you need to have a `sender_id`, add the plugin and add the `sender_id` `pushservice` provider init function.
1. create a new app, for example : `ionic start checkcolorbug sidemenu --v2` 2. modify color variable in app/theme/variables.css `$colors: ( primary: #387ef5, secondary: #32db64, danger: #f53d3d, light: #f4f4f4, dark: #222, dark1: #222, dark2: #222, dark3: #222, dark4: dark5: dark6: dark7: dark8: dark9: darka: darkz: darke: darkr: darkt: darky: darku: darki: darko: darkp: darkq: darks: darkd: darkf: darkg: );`
create a list of buttons with a right aligned paragraph and should show as above
change your tsconfig.json to have `strictnullchecks` to true and then try to run an `ionic build`
take for example the code from the official documentation phofhyperlink and add the `sticky` property to the `ion-item-divider` as shown below.
1. push a child page with from a function inside of a popover controller.
2. childpage 's header will overlap with the status bar.
create a simple application using cordova-ios@4.3.0 as the platform.
verify that app id is registered and provisioning profiles are installed on the machine.
run: "ionic build ios --device --release --buildconfig ./build.json" on the fresh project
1. override $bar-title-font-size 2. notice on android is does not have an impact
i created a new project to reproduce the bug: phofurl i didn't add the push plugin because you need a `sender_id` to use it, so to reproduce you need to have a `sender_id`, add the plugin and add the `sender_id` `pushservice` provider init function.
create formgroup and try to bind datetime with the format "mm".
only way to reproduce is in an app on an iphone (device or emulator).
navigate to a page who use
1. change primary color to black.
2. change ion-navbar color to primary
functioning virtual scroll phofurl non-functioning virtual scroll phofurl
download ionic-conference-app from google play store.
navigate to any child page and slide from left to open menu.
1. add some scrollable content to any page .
2. add ion-slides at bottom.
(or anywhere after scrolling some distance).
3. add `ion-input` (as in related code below) 4. serve/run project.
scroll down and click input field inside the slide.
1. start a project with ionic cli: `ionic start myapp sidemenu` ionic will add ios platform by default: screen shot at 21 29 10 phofimage 2. emulate ios `ionic emulate ios` then the warning is shown: screen shot at 21 33 14 phofimage cordova ios version added by default by ionic cli: `4.1.1`
1) create a sample unit test, there is no need to even use viewcontroller anywhere in the components that are being unit tested.
2) simply inject `viewcontroller` to the `providers` array in the function, this would cause the first error mentioned 3) use a mock or jasmine double like following for second error `{ provide: viewcontroller, useclass: class { viewcontroller = } },` #
if you try to select test2 item with radio you cannot do it and you will see strange output for the radio variable value.
if you try to select some item with select, will see that all options are selected.
1 - have a root page; 2 - add a modal width transparent background to .5 ou similar; 3 - add another modal over the called from the modal added in step 2.
4 - when closing the modal added in number 3 we will see it slide in the background, and not in front of added 2.
run the app on device with livereload.
create two pages, one with a button to the other using clicking this will cause the constructor to be called 10 times.
1. open the conference app in a browser, e.g.
from here phofurl 2. go to about 3. open popover 4. go to support 5. click back button 6. now you 're back on the about page, but the document title (in the browser tab) is still support
1. clone the following repository: phofurl 2.
`mkdir www` so ionic/cordova recognises it as a cordova project.
5. tap "go to tabs".
8. attempt to tap each segment, observe the `[ngswitch]` does not operate.
here is the fiddle where the issue can be viewed phofurl you will notice that when you click on an item the filter is not cleared where as in stand alone angular the same concept works perfectly fine phofurl
phofurl be sure to run the code sample in plunker on ios 9 or 10.
call navigation to the tabs page from the callback function
create a fab with an `<ion-fab-list>` with buttons inside it, then try to set the color of the button, for example `color="secondary"`.
1. tap an item in a list 2. swipe to go back 3. repeat until app stops responding
switch between inputs inside a scrolling ion-content phofurl unfortunately i can only see the issue in actual mobile devices
reproduce on 'ionic-preview-app ': 1. clone this repo: git clone 2.cd ionic-preview-app 3.npm install 4.run ionic serve from a terminal
on phofurl click on a toast and while it disappears try to present another one by clicking the button.
this behavior is not restricted to creating toast but to clicking any component.
- start a new project - add the related code in html page - ionic serve on ie / edge phofurl
this appears to be a known issue that 's not getting proper support, see #5139.
inject navparams into component and run any old karma test on the component.
1. create a new ionic v2 project 2. paste the below code in 3. run `ionic serve` 4. click on `show bar` to check it 5. click on `foo` 6. press <kbd>tab</kbd> 7. notice that `baz` is focused instead of `bar` phofcode for some reason, i can 't reproduce it on plunker.
1. create a new ionic v2 project 2. paste the below code in 3. run `ionic serve` and open in browser 4. click on 'name ' 5. press <kbd>tab</kbd> phofcode for some reason, i can 't reproduce it on plunker.
use the sample code in any ionic project using rc3 to see b1 and b2 are never called.
just add fabcontainer into a blank new project and check fab list 's background color out.
a typical use-case, is opening a popover when the user focus an input field.
the popover is showing extra-information related to the user input and should be dismissed when the input field focus is removed.
in this situation, we want to keep the focus in input field (unless user explicitly change focus).
1. reproduce and if possible a demo using one of the following templates: write an app with a modal 2. build and run it 3. open that modal 4. press the hardware back button and see what would happen.
1. gulp e2e.serve 2. navigate to phofurl 3. click the hamburger 4. click navbar 2 times 5. click hamburger it 's not 100% consistent but you will be able to replicate it.
i created a plnkr for you phofurl and here is a screenshot at the beginning: image phofimage after scrolling: image phofimage
1. add the slides component within the `<ion-content>` 2. add the pager attribute to the `<ion-slides>`.
3. run application, pager does not show up in slides.
save twice within a second or two.
phofcode replace home.html with the code below
`ionic start test-app --v2` `cd test-app` `ionic plugin add cordova-sqlite-storage` >> following tutorial: phofurl open `import { sqlite } from 'ionic-native ';` modify platform.ready() phofcode `ionic emulate ios -lc --target="iphone-6"` error: `referenceerror: can 't find variable: sqliteplugin` cordova.js content on device using safari inspector `// mock cordova file during development` phofcode error is the same on android.
this is driving me crazy.
on version 2.1.12 1 - you generate new icon & splashscreen : ionic resources 2 - then build : ionic build android
1. create a page with an empty list 2.grab data form backend 3. update the list with content
just update package.json, delete node_modules and run npm install
1. build a page wit ion-list 2. call any backend to grab a list of data dynamically 3. show on the view 4. build for browser with ionic build browser 5. deploy it to any cdn 6. run the new deployed web app on the latest chrome 7. you wont see the refresh unless you switch between browser tabs so i believe it 's a refresh problem in chrome only because firefox works
create an ionic 2 quick start project (project a) by running ionic start cutepuppypics --v2 create a separate angular2 shared module project - i 've cloned phofurl install it using npm install ionic-module-template in project a .
import the module inside app.module , run npm run ionic:serve see it working , call ionic build android see it failing .
- create a list with reorder attribute set to true - the list should consists of ion-item elements which are wrapped with ion-item-sliding - run the app on ios and try to reorder items
add following config in package.json file phofcode to enable source map .
* create 2 services pointing the same pod and the same port (e.g.
vip & headless) * pilot logs should show messages about conflict where existing/incoming values are not stable: phofcode * each time listener changes its `envoy.tcp_proxy` (existing) value `proxy_sidecar` reloads its listener and drains connections
i 've downloaded istio 1.4.0 and took the command straight from phofurl but there is a problem with istio cni value overrides phofcode same for the
you can deploy phofurl and see that cassandra-1 fails cause it can 't handshake with cassandra-1.
but the issue is because it can 't connect to itself.
you can exec into cassandra-0 and run : phofcode when istio is disabled the last command does not return and accepts characters
if i understood the concept correctly, i only need to : - create a config.proto with my parameters : phofcode - compile it with protoc to output a descriptor_set file - base64 this descriptor set in adapter.yml phofcode - implement this grpc protobuf interface : phofcode create a handler istio config file that set the config values : phofcode so i 've done all this steps, but
generate manifests and check for `grep context.proxy_version` phofcode this produces two entries for me and looking in the file i can see two entries that look like phofcode they are on lines 173 and 207
1.install istio 1.3.4 2.deploy your service 3.using locust to run test 4.watching grafana dashboard
install operator with default profile: phofcode i don 't expect to see disablereportcalls in the generated log.
this is the only entry.
#### 1. replace `--probe-path` by invalid path (e.g) phofcode #### 2. galley will be redeployed and readinessprobe does not fail.
read the distributed tracing docs phofhyperlink
it has to do with installation ordering in the operator.
set up a remote cluster by creating a new configuration secret for it.
observe the following: phofcode backtrace: phofcode this is probably crashing due to `b.kubehandler` or `.env` being `nil` here: phofurl based on some other tickets i 've opened in the past, both mixer and pilot seem succeptible to race conditions when setting up multi-cluster environments: - #15663 - #13412
- create istiocontrolplane config `config.yaml` like phofcode - `istioctl manifest generate -f config.yaml | grep disablepolicychecks:` - disablepolicychecks is `true` looking at phofurl suggests that maybe needs to be set to `true`, but that didn't seem to help
this is a bit hard to reproduce, since you need to get the istio-system namespace stuck in terminating.
this can be tried with the following steps: - from istio operator repo 1. deploy istio controller operator (kubectl apply -k deploy/) 2. deploy the demo icp .
deploy/crds/...cr.yaml) 3. watch the istio control plane come up.
kubectl delete -k deploy/ 5. start namespace delete which should hang now: kubectl delete ns istio-system 6. with ns in terminating 7. do steps 1-3 8. operator will attempt deploys, but will fail 9. will never attempt a 2nd reconcile loop 10. only way to fix this is to cleanup namespace forcefully and then edit icp (add a label) trigger a reconcile loop.
1. create a gateway like this: phofcode 2. verify these settings work as expected.
3. update the gateway with a new domain like: phofcode 4. verify that `mydomain.com` and `www.mydomain.com` continue to work while `test.mydomain.com` returns ssl errors.
5. move the new domain to it 's own item in the list, like: phofcode 6. verify that all domains work correctly.
install istio in gke and configure prometheus.
the setup documentation at here phofhyperlink lists example `manifest apply` commands.
if you execute them in the sequence presented in the documentation, you end up with a functioning ingressgateway, like so: phofcode but if you shorten this to one invocation wtih all those parameters, the ingressgateway will fail to forward any requests, and return a `503 bad gateway` error instead: phofcode my assumption when reading the docs & looking at commands is that when you invoke `istioctl manifest apply` are updating current configuration to enable or disable something based on commandline parameters.
however, behavior seems to indicate something else is going on - that every time apply, it 's going add some things and remove some things.
if this is expected, then it would be nice update docs reflect this fact, and perhaps explain it.
deploy a image on openshift
create any http service and envoy filter with provided configuration matching the workflow.
create an out of process adapter listening on check events.
gke: - gcloud beta container clusters create cluster1 --enable-autorepair --enable-autoupgrade --network k8s-net --enable-ip-alias --metadata --enable-private-nodes --master-ipv4-cidr --enable-autoscaling --max-nodes=5 --min-nodes=1 --num-nodes=1 --cluster-version latest - kubectl create clusterrolebinding cluster-admin-binding --user=$(gcloud config get-value account) istio istioctl manifest apply create namespace and label it accordingly test deployment works: - without sidecars and - with manual injection network communication works as i can curl phofurl
1. using istio-1.4.0 try to install with the configuration provided
use istio 1.4.0 and try the given gateway/virtualservices above.
setup -> platform setup -> google kubernetes engine setup -> install -> customizable install with istioctl tasks traffic management ingress kubernetes ingress with cert-manager my inputs: phofcode make sure all pods are running.
take external ip for svc and associate that with `ingress_domain`.
phofcode make sure that above applied updates work.
execute `kubectl apply` command with this section phofhyperlink .
update namespaceselector from phofcode to phofcode via `kubectl edit istio-sidecar-injector`.
use 1.3.0 version in your application deployment plan.
1. start minikube cluster: `minikube start` 2. install istio: `istioctl manifest apply --set profile=demo`
i created the following gw,vs phofcode
- install istio using the command: `istioctl manifest apply --set profile=demo` manually updating the images brings up the cluster.
this is not easy to reproduce but we need to keep trying to delete the pod.
create a new `demo` injected namespace phofcode create a deployment with a dot `.` in the name phofcode check the `source.namespace` mixer attribute in the envoy config.
use `istioctl manifest apply ertmanager.enabled=true set
create a file named `my-test-file.yaml` with the below contents (note that the actual object doesn 't matter much beyond being a valid resource - what 's important is the `# ---`): phofcode run istioctl analyze on the file: phofcode
setup istio citadel with a intermediate certificate with a short ttl.
our configuration is: phofcode with the intermediate certificate issued from hashicorp vault, the intermediate must have a ttl smaller than the citadel setting.
a new mixer secret you will see the expiry is 3 month in future regardless of intermediate ttl.
wait until expiry (and update citadel with new intermediate).
soon mixer, telemetry, pilot etc will stop working following errors: phofcode note citadel does have new certificate and can issue valid certificates, it just doesn 't due to too long workload certificate ttl.
citadel refresh itself works fine, this was tested in same version by setting `--workload-cert-ttl` to few minutes.
install 1.4 and follow auto mtls install isntruction: phofurl
download and look in the `istio-1.4.0/tools1` directory.
1. create a k8s cluster with a dual stack cni (calico was used in my test).
2. create a pod with sidecar injected.
3. try to ping or curl an external ipv6 address.
install istio using helm template and follow the steps from the demo tutorial.
kubectl rollout restart deployment <my_deployment>
unknown, i 've found this very hard to reproduce.
it has only affected one user of ours afaik.
on any kubernetes webservice, access the service using the trailing dot url.
look at the control plane pod deployment yaml.
install istio with this value: `rewriteapphttpprobe: true` in `sidecarinjectorwebhook` and mutual tls is enabled.
readinessprobe: httpget: path: / port: 3000 initialdelayseconds: 120 periodseconds: 10 timeoutseconds: 10
1) helm template --name istio-init --namespace istio-system --set certmanager.enabled=true | kubectl apply -f - 2) helm template --name istio --namespace istio-system -f ../istio_dev_values.yaml | kubectl apply -f - (
setup client/server which use grpc and have client send traffic directly to service endpoint (pod ip:port).
apply the manifests specified above, replacing the urls with a different cdn / online storage service (i reckon you could use anything with a static url)
install istio, have a gateway for wildcard host on port 80. have a virtual service with an exact match route and nothing else.
send traffic to gw not matching the route with a host header with junk info.
deploy istio, enable injection for a particular namespace, delete all k8s worker nodes.
enable mtls globally and inject sidecar in both services.
forthcoming with testing later today (testing on latest build above).
there is a sister documentation issue to this: phofurl
i ran `istioctl manifest apply -f --force` to install istio.
to uninstall i tried `istioctl manifest generate -f --force | kubectl delete -f -` and got an error: phofcode if i instead piped to a file, the top portion contained: phofcode if i removed that from the file and did a `kubectl delete -f <file>` things were uninstalled.
follow the steps in the istio 1.4 kiali task - create the secret with custom username and passphrase (such as `kiali/kiali`), verify the username/passphrase are what you expect, install istio with default profile but with kiali enabled, then notice your secret was overwritten with demo secret (i.e.
here 's step-by-step: 1. create secret in istio-system: phofcode 2. look at your credentials in secret: phofcode 3. install istio kiali enabled: phofcode 4. look at your now - it was overwritten and your credentials were changed (now has demo credentials): phofcode
follow the steps provided in the description.
create statefulset with headless service running grpc.
1. create an istio resource with repeated elements e.g.
`clusterrbacconfig` with multiple included namespaces.
phofcode 2. perform a `deepcopyobject()` on a istio.io/client-go resource.
requests through a server-side proxy without any peer metadata
1. create k8s cluster (i used v1.14.8+iks) 2. target cluster and run `istioctl x manifest apply --set 3. wait for completion and then `kubectl get pods -n istio-system` to see failed pod start
' ' ' cd istio/istioctl/cmd go run istioctl/main.go x analyze ' ' '
set gw config from this message curl phofurl -iv --tlsv1.3 but get cert from default host
following phofurl the auto-injected sidecars do not get the currect sds configuration.
- install istio version with helm - setup a cert issuer letsencrypt - install a certificate - install bookinfo demo with a reference to the credentials of the certificate
install istio with the operator
see phofurl do `istioctl manifest apply --set profile=demo` look at services `kubectl get svc -n istio-system`
run example from as specified on phofurl setup on cluster 2 has the following command.
not the `--force` was needed because of missing fields in another pr.
go to the logs tab for any workloads page and you 'll see the error.
1. install istio-1.3.4 with default values; 2. deploy a web service written by go; 3. increase the requests to the web service; 4. see `node_filefd_allocated` metric on prometheus; 5. exec `lsof -c envoy` on the node where istio-ingress-gateway in and you will see many open tcp connections
phofcode output on apply: phofcode events: phofcode
1. create a testing ns `bug` phofcode <details> <summary>2.
deploy a service to watch cpu stats</summary> phofcode </details> 3. run top command in `istio-proxy` of httpbin pod deployed at step-2.
deploy services with multiple ports to see envoy 's cpu stats</summary> e.g.
create 50 svc with 5 ports.
(you don 't need pods/deplyments, but only svc can produce the issue.)
phofcode </details> 5. envoy causes high cpu load during deploying svc.
6. also a lot of `envoy proxy is not ready error` below are found:
1. deploy operator 2. apply the icp 3. look at the operator logs
setup istio via helm chart with option phofcode setup chart-manager to supply a public tls certificate in kubernets secret named "ingressgateway-certs" and reference that in the gateway resource: phofcode now an incoming request to the ingressgateway is sent via mtls to frontend service, which responds in plain http (error 400 bad request), resulting in an obvious ssl version number mismatch: phofcode phofcode connections to frontend service succeed if destinationrule has "trafficpolicy.tls.mode: disabled" set, which is not the desired setting though.
create a pod with two containers, one of them with no ports, istio-proxy won 't start and will show an error: to generate bootstrap config: invalid character ', ' looking for beginning of value
1. deploy istio 1.3.4 (bug observed in 1.3.2 and 1.3.3 as well) with helm (see global values below).
2. import a wildcard certificate as a tls secret in 3. create a gateway with the below spec: phofcode 4. handshake error appreas in logs and cpu usage spikes.
since this is an internal application it is difficult to provide steps here.
open http/2 connexions through the gw.
1. deploy a `maxamount: 0` policy affecting all services phofcode 2. create a namespace with sidecar injection enabled `kubectl create ns 3-tier && kubectl label ns 3-tier istio-injection=enabled` 3. deploy our local load test > note: i tried to reproduce this problem with the istio bookinfo application running a simple load test, but it is not reproducible.
in case you can provide a cluster, i can install the test load used 4. query requests with response code 200 using prometheus query: (the attribute is filtering out the requests sent to `istio-system`) image phofimage 5. query requests with response code 429 using prometheus query: image phofimage 6. compare the two results image phofimage image phofimage for this example route, ratio of requests code 200 to code 429 is about 0.3%
1. set "0" to your k8s job, 2. call `curl -x post from main container
run mesh manifest generate with the following icp: phofcode the output is `patch error: path not found at element annotations in path metadata.annotations`.
simply follow steps as described in phofurl create the corresponding installation using helm: phofcode create namespace, secrets and install everything.
dns certificate provisionign can't be turned off.
there appears to be a nasty circular dependency with pilot resulting in an inability of istio to start if certificate provisiioning fails.
see phofurl for more details.
i have a service deployed in kubernetes that exposes a grpc server via envoy.
another service is acting as the grpc client and establishes a connection to the server and starts to stream data (server streaming).
the client service polls the grpc channel state and when this changes from ready to anything else, it assumes the connection is dropped and tries to re-connect.
when i manually delete server pod, on client side stream is closed but channel's state remains as ready.
performing exactly same actions locally (running both services in debug mode via visual studio instances), results in channel state changing immediately from ready idle my client service attempting reconnect.
use helm template to define custom ingress gateway with sds enabled and no `namespace` declaration.
update helm template to include `namespace` declaration.
with a kind cluster phofcode
1. follow the kubernetes example for a service with endpoints phofurl phofcode 2. define a destination rule with a subset: phofcode 3. define a virtual service to use the subset: phofcode 4. check the pilot logs: phofcode there appears: note that the endpoint for service without subset appears in dump of endpoints as expected.
phofurl the response header frame is separated when err occur.
1. build the following docker file below with command `docker build .
install operator create istio control plane resource (cr) use the control plane (run basic smoke test) delete istio control plane resource if the istio-namespace still exists, check what's left over in the istio-system namespace.
usually some secrets are left behind.
create simple pod with npm command and try to do npm install in it.
1. apply an test service; 2. bind a https cert to the test service; 3. use locust phofhyperlink to run to http test; 4. press [ctrl +c] to stop locust test, then you will see 503 error.
here is an example pod i used to reproduce the issue.
1. create a istio cluster.
2. create pod with readiness and liveness probe.
and pod is running normally.
phofcode 3. create istio gateway/virtualservice.
test the pod can be accessed from external.
phofcode 4. make the readiness fail by execing into the and run touch /fault 5. check status and endpoint status.
run the following test program and observe the negative time due to the overflow.
~$ go run main.go graceperiod * = is less than mingraceperiod 10m0s.
package main import ( t"fmt" t"time" ) func main() { tgraceperiodpercentage := 50 tcertlifetime := time.hour * 90000 tmingraceperiod := 10 * time.minute t// the following case will overflow: tgraceperiod := certlifetime * / time.duration(100) t tif graceperiod < mingraceperiod { (%v %f) = %v is less than mingraceperiod %v.
", t t tcertlifetime, graceperiod, mingraceperiod) t tgraceperiod = mingraceperiod t} else { (%v %f) = %v ", t t tcertlifetime, graceperiod) t} }
1. create a serviceentry with resolution as `static` with fully resolved ipaddresses as end points.
2. let it propagate to the mesh.
3. after the same serviceentry with resolution as 'dns ' and add a new dns address to the existing end points 4. after this, eds push to any new proxy connections will fail with above error, existing proxies eds push also fails.
i can consistently reproduce it with this script, replacing lines with `kubectl expose deployment ${app_name}`: phofurl
1) create a new secret type tls (httpbin-tls) 2) create ssl gateway 3) update the secret with kubectl replace command 4) ingress still serves the old cert.
5) logs show a warning.
server key/cert change in secret
1. deploying k8s cluster using kubespray 2. installing istio without helm following this procedure phofhyperlink
deploy bookinfo on openshift 3.11 (on ibm cloud) and access the app using productpage svc (by exposing it securely)
start an app, shell into istio-proxy and kill envoy
im not sure, but i guess create a sidecar injector for version and over 100 pods running?
pass san certificate to ingressgateway
download istio-1.3.3 to `infrastructure/istio`, then in a makefile: phofcode
1. install istio 1.2.7 and deploy the bookinfo app: phofcode 2. set up port-forward to kiali: `kubectl -n istio-system port-forward svc/kiali 3. go to localhost:20001 and login with `admin:admin`, navigate to services, select namespace `test` and click on a service in the list.
follow the instructions for the task at phofurl
phofcode on my machine i get: phofcode
istio was installed using helm template (some options were omitted to make it shorter) phofcode after i enabled mtls (applied policy/dest rule), i can 't see any incoming data in my custom dashboards for spring boot applications.
i 'm using these 2 dashboards - spring boot 2.x statistics phofurl - jvm (micrometer) phofurl default istio dashboards, kiali, jaeger are working fine
add a filter link above.
phofcode kubectl apply -k deploy kubectl apply -f
make a change that results in the inbound listeners to drain and reload, and _sometimes_ you 'll get a `503uc` from the `source` and `503dc` from the `destination`.
1. configure an istio gateway to use a secret, foo-tls.
2. create a secret, foo-tls, in a namespace with an ingressgateway and sds enabled.
3. watch the logs to verify the ingress-sds container loads the secret.
4. delete and recreate the secret.
5. verify ingress-sds logs show that secret can 't be loaded.
create required resources phofcode make a request against the istio-ingressgateway and see that the upgrade and connection headers do not arrive at the application phofcode
very difficult to give you an exact reproducible state as it 's inconsistent.
more than happy to screen share and live debug.
configure the stackdriver adapter to send tracing data.
increase the sampling rate to ensure that spans are being marked for exporting to the backend.
connect 31380 port at the backend of http(s) load balancer but at tcp load balancer its work fine
take bookinfo sample as example.
when accessing api by `curl phofurl -i`, request can be shown in jaeger with correct trace.
but there is no trace in jaeger if `x-request-id` is provided in request like below: phofcode if the request id follows the format the trace is ok too.
so there is trace only when no `x-request-id` not provided or the format (e.g.
`x-request-id` with other format does not work.
deploy a rate limiting definitions: phofcode , and then deploy high request traffic load deployments.
deploy bookinfo on openshift 3.11 (on ibm cloud) and access the app using istio ingress svc (by exposing it securely)
- install istio v1.1.10 on kubernetes using helm.
- create ingress gateway, and virtual service for exposing a k8s service externally with a domain name.
* create a `chaos` namespace * apply this file: phofurl * in separate windows, `kubectl logs -f` the `server` and `istio-proxy` containers of the pod created * run the following command in a third window to generate some traffic: phofcode delete the pod at this point, main container should emit a message saying it 's waiting for 2 minutes to shutdown.
the istio-proxy container should start complaining about missing inbound listeners.
if it doesn 't, run `kubectl delete svc rando-server` (an unrelated operation) to trigger this behavior.
following the tutorial from the documentation step by step
clone: phofurl apply manifest properly.
1. create a testing ns `bug` phofcode <details> <summary>2.
add mtls policy & phofcode </details> <details> <summary>3.
create sleep deployment for the test client</summary> phofcode </details> <details> <summary>4.
create httpbin1 & httpbin2 deployments for test server</summary> phofcode </details> 5. checking the pod ip and pod name <details> <summary>6.
create endpoint for httpbin1 (you need to replace the pod ip&name with yours)</summary> </details> 7. testing the serving access (it works fine.)
8. switching endpoint to httpbin2 9. now, you get `upstream connect error or disconnect/reset before headers.
reset reason: connection failure` error.
i 've reproduced my steps above.
1. install istio 2. run `istioctl dashboard zipkin`
the test.yaml file phofcode phofcode my results phofcode
enter any application container with sidecar and execute following command: `curl -v phofurl --raw `
instal multicluster istio trhough istio.io documentation and scale kubernetes nodes to 0 then scale it up again - when pods scale, pods ips get changed and causes it to stop working (pilot, telemetry, policy )
use mixer based tracing with the zipkin adapter.
deploy a test application that sends many spans (i tested around 2k spans/sec from 30 instances of my test application).
scale mixer to 2 instances and jaeger-collector to at least 2 instances.
you should observe, that only one ore two instances are used.
restarting mixer will result in the new instance latching randomly to one collector instance (as expected in round-robin load balancing)
follow the following tutorial phofurl on macos.
set `global.tracer` to `zipkin`, `pilot.tracesampling` to `"0.0"` and deploy a handler, instance and rule (make sure to set your zipkin url in the handler).
then deploy an application that generates traces and observe that header `x-b3-sampled` is always set to `0`.
assume i'd like to limit rate to 5 requests / sec .
if i configure the rate limiting phofcode with phofcode and subject the service to a low traffic rate (say 1 call / sec), many of the calls will still fail with 429 on the other hand, if i configure a larger interval and proportionately increase maxamount, rate limiter behaves closer to expectations phofcode
send a lot of traffic through ingressgateway
create the above service roles
i applied the following envoyfilter phofcode once i apply the above configuration i should see the envoy sidecar to have the envoyfilter config pushed.
but, i don 't see it.
1. create a new eks cluster 1. install istio 1.3.1 using the value 1. expose any service using a certificate through the ingressgateway 1. continuous curl requests until the libressl error message is returned.
1. install istio with cni plugin enabled 2. enable automatic sidecar injection 3. deploy pod.
make sure sidecar injected 4. create nodeport service, pointing to that pod (for sake of discussion, make nodeport to be 32004) 5. from the same host, open telnet: "telnet 32004" 6. you will get "connection refused by host" now, do the same steps (1-5) but this time make "--set connection will succeed.
deploy a service with multiple instance ips
follow instructions in phofurl for "separate port" run kubectl apply -f <(istioctl kube-inject -f
1. create a shared control plane (multi-network) environment using phofurl .
you can _deploy example service_ if you want to verify things are good.
2. at this point, we want to move to the example portion of the gke multi cluster example (i am pointing to a fixed version of the doc): phofurl at this point, you should be able use the ui, and refresh product page and see reviews with no, black, and red stars.
3. now, apply default destination rules: phofurl 4. if you refresh ui, you will see 'upstream connect error or disconnect/reset before headers.
reset reason: connection termination' error.
create a grpc server, host it outside of the cluster, set up a grpc client application, host that inside the cluster with sidecar injection enabled, ensure that a service entry is made, verify it all works under normal conditions, then kill the server.
observe that the client is unaware of any failure, and doesn 't attempt to reconnect - requests simply time out.
1. installed istio through the following command `helm template --set --set prometheus.enabled=true --set grafana.enabled=true --set tracing.enabled=true kiali.enabled=true phofurl phofurl --name istio --namespace istio-system > $home/istio.yaml` 2. added istio-injection enabled to the namespace where app was configured.
3. aws alb has been place in before the istio ingress gateway 4. application successfully loading in the browser while hitting through alb url 5. to do debugging, enabled istio-proxy logging.
i followed below `helm template --namespace=istio-system -x templates/configmap.yaml global.proxy.
accesslogformat =json | kubectl replace -f - kubectl logs -l app=appname -c istio-proxy ` 6. i got below in logs 7. i could not see logs specific to my request fired from browser and would like to know why most fields(keys) have empty values.
try accessing a service that is hosted on the cluster, but via the lan-ip.
(at least i think that should be enough to reproduce..)
see example code and description on phofurl
assuming you have two deployments with pod labels `version: v1` and `version: v2` and a service selecting by those two labels.
create a virtualservice with this spec: phofcode and a `destinationrule` like: phofcode `istioctl authn tls-check` shows `conflict` (`mtls http`) but connection works instead, setting `trafficpolicy` globally (at spec level) will show `ok` is just confusing to see a conflict when it works.
steps are mentioned here: phofurl
1. install istio 2. install httpbin & gateway from samples 3. turn off network 4. apply an authentication policy for origins/jwt 5. verify can 't access httpbin via curl 6. enable network 7. wait... or don 't 8. verify can 't access httpbin via curl w/ a valid jwt note: if you kill the pod at this point, the new pod will get a cert and verify the jwt.
install istio 1.1.2 connect svca to svcb using host and port .
unsure as of yet, only seeing so far on 1.3.1
use the following configuration, phofcode phofcode
restart the node which has side-car injector service.
step 1: in istio 1.1.0, custom define a sidecar resource, like below: phofcode step 2: the example case from istio official sample package phofcode step 3: phofcode output: phofcode step 4: output: 5: output: that 's not i want, the same operation in istio 1.1.15 , istio 1.3.0 and 1.3.1, bug it does work in 1.1.0
on a cluster with istio, add the above virtual service definition and try to access endpoints through the gateway.
every endpoint will be routed to the first service on the vs definition
1. create two istio clusters and configure them to use the "replicated control plane" multi-cluster topology 2. configure a virtualservice in "cluster b" to perform some form of routing like this; * host: * note: this service does not actually exist as a k8s service * route: * (weight: 50%) (weight: 50%) 3. create a serviceentry in "cluster a" for which connects cluster a to cluster b.
3. make a call to the virtualservice in "cluster b" by routing through normal gateway (ex: port 80).
observe that this succeeds and uses the virtualservice routing.
4. make call from service in "cluster a" the "virtualservice" b" observe that call fails.
probably because clusterb 's ingress envoy tries route directly "real" but that only exists as virtualservice.
simple go through this phofhyperlink example, just inject nginx application with the istio's side car.
- apply a virtualservice with a regex match statement exceeding 1024 bytes.
create a sample gateway 2. create secrets with placeholder values 3. update the secret with valid values
1. run a injected sleep pod in k8s 2. apply the configs upper 3. run `curl -i phofurl in sleep pod to test the service mesh.
deploy a pod with sidecar enabled run `curl -v phofurl
1) install istio-init as per documentation 2) follow the tutorial linked above
list of unattached volumes=[sdsudspath istio-token istio-certs ingressgateway-certs ingressgateway-ca-certs
1. deploy a nginx pod 2. deploy a https app ( two deployment, v1 and v2), create a service( `appservice` ) for this app 3. config nginx to route to this app phofcode 4. create destinationrule and virtualservice for service `appservice`, route all traffic to v1 5. access nginx by `curl -k phofurl only app v1 is expected to be accessed, but v1 and v2 are accessed randomly.
set a restrictive `networkpolicy` which blocks the egress traffic.
install istio with certmanager enabled.
version 0.6.2 will be installed
apply the following following yaml: phofcode
cat <<eof | kubectl apply -f - apiversion: kind: destinationrule metadata: name: ingestion-frontend spec: host: trafficpolicy: tls: mode: istio_mutal connectionpool: tcp: maxconnections: http: http2maxrequests: eof
1. install istio on a kubernetes cluster (i 'm using docker for mac in this case) 2. follow the instructions on phofurl to setup two version of an `httpbin` container and confirm that the traffic is mirrored to `v2`.
3. start an `nginx` container with `docker run -it --rm -p nginx` 4. apply the following `serviceentry` to the cluster phofcode 5. update `virtualservice` to mirror traffic `nginx` container: phofcode 6. curl `httpbin` container using `kubectl exec -it $sleep_pod -c sleep -- sh -c 'curl phofurl and confirm that traffic is not mirrored by tailing `nginx` log.
7. swap destination host and mirror host in `virtualservice` confirm that istio is able proxy traffic external host: phofcode
config is like this: phofcode
in `v1.3.0` just install istio with these two yamls (`mtls` enabled): phofurl phofurl then go through the official doc, but using this `mtls-enabled` version of the jwt policy: phofurl try to reach the `httpbin` endpoint, and always get a `503`: phofcode adding verbosity to curl shows the `503` with more detail: phofcode if we repeat same steps, but using `v1.2.6`, then everything works as expected: phofurl even disabling `mtls` in `v1.2.6` works perfectly (also removing it from jwt policy, obviously).
based off reading source code, haven't actually verified in a running version.
run tcp traffic through your cluster and hit `blackhole` or `passthrough` cluster.
observe the label in `istio_tcp_*` metrics.
gateway: phofcode virtual service: phofcode alb ingress: phofcode app service: phofcode
take istio task create an https service with the istio sidecar and mutual tls disabled phofhyperlink as example: when send request from sleep to nginx, there is no trace captured in jaeger.
but if i add a http port to nginx and access this port, jaeger can report the trace.
when a virtualservice like the following is created: phofcode when we curl the uri is correctly re-written to `/first-rewrite-uri` as seen in the `first-hop` virtualservice.
however, even though the request is correctly routed to at end, uri is not re-written to `/second-rewrite-uri` .
(i can see request path of incoming requests from logs of my-app) when i run `istioctl proxy-config routes <my-app-pod-name> -o json` command, i can see that rewrite configuration correct reflected, but just not taking effect: phofcode
install istio and run tcp traffic through the merge, query and metric.
1. set the `istio-locality` label for the `istio-egressgateway` pod/deployment when deploying.
2. create 2 `serviceentry` instances for the same host as described in phofurl 3. create a `destinationrule` to enable outlier detection.
4. send requests to the host and observe traffic on 2 destination services.
you will notice that traffic is routed to both destinations in random order.
whitelist works normally for the following configs: phofcode but not when i change the ip range to a specific one: phofcode
on any running mesh with no named networks, create a named network and restart pilot.
generate sds config: helm template --name istio --namespace istio-system --values > istio-auth-sds.yaml install istio : for i in do kubectl apply -f $i; done kubectl apply -f ./istio-auth-sds.yaml
1. install istio with `k8singress.enabled` set to `true` 2. create an ingress resource with the istio` annotation observe that the navigating to that domain returns a 404.
3. add `ingressclass: istio` and `ingresscontrollermode: strict` to the `istio` configmap, under `mesh` restart galley and observe that (after a minute or two) the ingress will now work.
* deploy httpbin ( phofurl in k8s/istio cluster * install a virtual service (see below) pointing to the httpbin deploy * execute a get curl or siege command that waits for a time .
it will retry 5 times (waiting 1 seconds), timeout and return in about 5-6 seconds * execute a post curl or siege command that waits for time .
it should just wait and timeout eventually (in 10 -20) seconds, depending on the max delay in httpbin i observe timeout in 5-6 seconds, that indicates that the retry is fact working when it should not.
i followed the instruction from this blog post: istio and stackdriver phofhyperlink .
also tried to use example yaml manifest from @bianpengyuan's example repo: istio-stackdriver phofhyperlink with modification to use apikey to authenticate.
1. send large traffic to istio ingressgateway 2. scale up the pods of ingressgateway at the same time.
install istio on a cluster, delete the namespaces (e.g.
istio-system) that were installed, then install again after a day or two.
you 'll see that the images for the installed components are from the first install in docker hub links.
1. install the ingress-gateway with the following values phofcode 2. update the secret with the new certs and check if application is being provided with new certs.
$ istioctl experimental add-to-mesh external-service -n int rabbitmq x.x.x.x tcp:5671 tcp:5672 tcp:15672 error: failed to create service entry admission webhook denied the request: configuration is invalid: 2 errors occurred: t* service entry port name "tcp" already defined t* service entry port name "tcp" already defined $ istioctl experimental add-to-mesh external-service -n int rabbitmq x.x.x.x tcp-1:5671 tcp-2:5672 error: protocol tcp-1 is not supported by istio
deploy istio 1.1.4 and above, try curl http2 request to any server running on port 8080 or any other port that has matching http listener defined for istio internal servicing purposes(e.g.
* checkout this repo, have helm 2.14.3 installed * update phofurl to your custom domain (ex `my.custom.domain`) * run `helm template --name istio --namespace istio-system --values > output.yaml` * output.yaml 's destination rule for istio-system is phofcode when i want it to be phofcode
set priorityclassname in the global config, and install mixer.
heres the setup used that produces the error: gateway: phofcode virtual services: phofcode phofcode phofcode
apiversion: kind: gateway metadata: name: istio-gateway-stg namespace: istio-system spec: selector: istio: ingress-gateway-stg servers: - port: number: 80 name: http protocol: http hosts: - tls: httpsredirect: true - port: number: 443 name: https protocol: https hosts: - tls: mode: simple privatekey: servercertificate: --- apiversion: kind: virtualservice metadata: name: hubs-routes namespace: stg spec: hosts: gateways: http: "office-hub routes" match: uri: prefix: "/office/" uri: match: "/test" redirect: uri: "/" route: destination: port: number: 80 host: officehub-stg --- apiversion: kind: destinationrule metadata: hubs-rules namespace: stg spec: host: trafficpolicy: tls: mode: simple
follow this to install the demo profile: phofurl
1. install istio w/ mtls turned on (mesh wide, strict mode).
turn on injection in `default` namespace 1. run nginx - `kubectl run nginx --image=nginx` 1. expose the service: `kubectl expose deployment nginx --port=80 --target-port=80` 1. update the service to have the port.
at this point, noticed that the pod still has no ports defined.
chekc mtls: `istio authn tls-check somepod` and see that mtls is on, and there is no conflict.
port forward to nginx pod: `kubectl port-forward ... connect to pod: `curl localhost:8080` this will succeed, which mismatches expectation of strict mtls.
1. deploy a simple web-app that uses istio-envoy as side-car on-top of eks/k8s 2. deploy two instances of a simple web-server on two different hosts outside eks/k8s cluster (different from web-app location, of course) 3. now you have a web-app trying to reach a scaled-up web-server on different location 4. create an a record to point to the two instances of the web server, for instance: `web-server.domain.com`.
our ttl was 60 seconds.
5. create cname record to point both the a records, for instance: our ttl was 300 seconds.
we 've created wildcard record since this is the same as our production environment.
6. now your web-app should be able reach web-server through istio-envoy (please remember configure serviceentry), from an address similar this address resolves two a records, leading different ips running your web-server.
7. while sending simple traffic constantly, remove one ips from a record (the should point only one ip).
8. while continuing sending traffic, shutdown instance that was removed from dns.
now, points only one ip.
9. you should see, via `netstat` and/or `tcpdump`, packets being sent ip address which isnt serving anymore.
also, you should see 5xx statuses services.
we also that our services is written in nodejs and use keep-alive - this indeed can keep connections open.
but, saying that, we still believe that even in case an underlying infra is being scaled out and in with ips, istio-envoy somehow understand ip isnt serving anymore and close connection.
we also our envoy config, especially serviceentry: phofcode as you can see, this way istion-envoy isnt responsible on dns resolution at all.
we cant conclude entirely if problem is in service or envoy keeping outdated dns answers.
after reproducing issue, we changed our serviceentrys `spec` behave differently: phofcode this way, istio-envoy managing dns resolution as well, and can be updated any changes addresses.
1. install the hipster demo in a cluster ( phofurl 2. from a checked out istio/istio repo synced to master, run phofcode
applying the configuration below in an environment with a fluentd service at configured to forward output to elasticsearch will result in error messages appearing in fluentd 's stdout and no messages reaching es.
1. create deployment fortioserver 2. create destinationrule with minhealthpercent phofcode 3. check envoy config execute istioctl command to verify envoy cluster configuration, and don 't find minhealthpercent value (in commonlbconfig).
#istioctl proxy-config cluster -nhobby --fqdn --port 8080 -ojson phofcode 4. do some test and failed when the ejected host percentage > 50%, the outlier still not disabled.
change spec.ports.name to a random string in phofurl follow readme in phofurl to start test.
deploy an app that worked in 1.2, then move to 1.3 rc 3. i believe @brianavery also tried book info and hit the same issue.
when i want the traffic to go to regular when header doesnt have istestuser it doesnt work.
the traffic always goes to canary.
this is because the match criteria is for or condition.
the documentation for this states "in a yaml file, the difference between and behavior and or behavior in a routing rule is a single dash.
the dash indicates two separate matches as opposed to one match with multiple conditions."
i have no idea what this means.
would like understand how configure and condition.
also it would be nice if i have a match for that virtual service which says /mock should gte processed by these 2 further header based matches .
hit the url of web-app in multiple windows, session keeps expiring
- deploy httpbin in its own namespace.
- deploy vs for httpbin in that namespace.
- deploy gateway resource in istio-systems - run istioctl describe on the httpbin pod.
deploy istio 1.2.5 with default helm profile.
then form any pod with istio-proxy, try to make a curl request that took more the 15 seconds to respond.
you will see istio timeout in 15 seconds before getting back the response.
* follow install instructions available at: phofurl * at step (2), i 'm using a modified command to render the istio charts: phofcode * install the example services following section phofurl * when running step (5) to check if service is accessible i get a `503 service unavailable` error.
using curl 's -v flag generates this output: phofcode the only logs i can find that may help to troubleshoot are in the istio-proxy of the sleep svc: phofcode i see "uf" flags.
pinging remote cluster inside sleep service works correctly, so communication seems not blocked.
no logs being generated at remote istioingress.
also, no logs are generated in remote httpbin istio-proxy.
1. deploy service a in namespace-a 2. deploy service b in namespace-b.
3. create service b 's external name service in namespace-a so that a can reach b (in namespace-b) the same way as a reach b as if b runs in namespace-a.
you will need a rest api that returns a value like "canary" or "prod" or some other value that allows you to determine if routing is working correctly.
deploy the api behind a virtualservice and destinationrule like: phofcode this setup should check for a header "x-my-version: canary" and route traffic to the canary deployment, otherwise traffic should go to prod.
to test this shell into container in the same cluster with curl or wget and hit the endpoint several times.
you will see responses from canary without setting canary header: `curl phofurl response: remove missing gateway from above virtualservice, re-apply and test curl again.
you will be routed to prod without canary, or canary with header set.
this shows virtualservice is now working as expected: `curl phofurl response: `curl --header "x-my-version: canary" phofurl response:
we consider istio-ingressgateway to also be a part of data plane and don 't want to make any changes to it.
we upgrade everything else other than this.
cni is running on version 1.2.5 i try to change versions using these commands - `helm template --name istio-init --namespace istio-system | kubectl apply -f -` `mkdir tmp` `mv tmp/` `helm template --namespace istio-system --name istio --values custom.yaml | kubectl -n istio-system apply -f -` `mv tmp/* `rm -r tmp/` this will temporarily remove all gateway related changes and upgrade everything else.
from istio-1.2.5 release directory on a fresh kubernetes cluster with helm & tiller configured: phofcode the make process returns the following error: phofcode see in more detail via (returns the ssl error described above): phofcode * this error occurs both *with and without istio mtls*.
* disabling istio-injection solves the issue (demonstrating that the es security example phofhyperlink works when not using istio).
* installing default phofhyperlink example (no security) from elasticsearch helm chart repo phofhyperlink works with istio-injection enabled (demonstrating that elasticsearch helm charts, in general, work with istio).
turn on verbose logging in kube-controller-manager force the kube-controller-manager lease to be changed by stopping controller-manager which has been elected the leader (consistent way to trigger the kubernetes garbage collector) observe galley validating webhook, rs and pods getting deleted and re-created
1. configure egress traffic through egress gateway for www.google.com phofcode 2. configure egress gateway phofcode accessing www.google.com works as expected and traffic is routed through the egress gateway: phofcode 3. configure traffic through gateway for edition.cnn.com phofcode
run make e2e_simple_run or directly run go test with standard flags set, for example -v or -timeout, it would gives error of flag provided but not defined: -test.v.
phofcode in phofurl phofcode in phofurl
install istio with helm according to the documentation and install the ingress example.
start an aws eks cluster and deploy istio 1.2.5
i don 't know... the same config worked on the second cluster.
1. change the istio ingress gateway type to nodeport and installed istio helm template --set --set prometheus.enabled=true --set grafana.enabled=true --set tracing.enabled=true kiali.enabled=true phofurl phofurl --name istio --namespace istio-system > $home/istio.yaml kubectl apply -f $home/istio.yaml istio-ingressgateway nodeport xx.xx.xx.xx <none> 2. placed the alb through alb ingress controller and ingress 3. under rules pointed the ingressgatewayservice node port(31703) to alb with a sample host(domainurl) and path(/graph) 4. tried access prometheus service via phofurl it does not load the service.
try and set up an authentication service which runs over grpc and attempt to setup the previously described `envoyfilter` with ext_auth
in file `values.yaml`, in the helm chart, set the following: phofcode then install istio using helm and this values file
the same as in description
* fetch istio 1.3.0-rc0 phofhyperlink * change `outboundtrafficpolicy` in from `mode: allow_any` to `mode: registry_only` * install the updated manifest: `kubectl apply -f * install sleep app: `kubectl appy -f curl from the sleep container: phofcode port-forward to `prometheus` in `istio-system` namespace: phofcode `curl -ss phofurl | jq .` should give the following: phofcode
install istio 1.12 with on d32 and d8 type vm istio-policy and istio-telemetry going into crashloop when scheduling on d32 size vm
deploy a service with port 8080, targetport may be different.
following the instructions on phofurl at the step "kubectl apply -f sleep-injected.yaml", an error is returned.
phofcode with the following configuration: phofcode
follow the helm installation instructions in the istio installation docs phofhyperlink (`istio cni enabled` tab).
install the istio cni helm chart using: phofcode the `istio-cni-node` fails to start due to the `istio-system` namespace not permitting `system-node-critical` priorityclass: phofcode
in an istio cluster with default ingress gateway create following test gateway: phofcode then retrieve the proxy-status of your ingress gateway.
observe that `lds` is `stale`: phofcode obtain the diff using `istioctl proxy-status (replace with your gateway pod 's name) <details><summary>proxy diff</summary> <p> phofcode </p> </details>
connect a custom ingress gateway to a regular deployment
create dns based entry as shared above and try to perform curl call for the https endpoint.
1. install istio on kubernetes cluster with activated mtls 2. deploy postgresql with an injected sidecar proxy 3. deploy a postgresql client in another pod with an injected sidecar proxy (the cli psql is sufficient) 4. try to connect to the database
* deploy bookinfo to the bookinfo namespace.
phofcode * create policy to enable permissive mtls for the same namespace.
phofcode * create destination rules to enable mtls communication.
phofcode deployment event log: phofcode
these steps are taken from the install docs [3] [4]: phofcode
* install istio as described below * as a side note (not sure it metters) the dns - ip association is static and it 's been configured manually in coredns * follow exactly the first part of the tutorial here phofhyperlink , copying and pasting the code and modifying just server urls.
specifically, these are my files (anonymized, except for paths after domain names): phofcode phofcode phofcode * go in a demo client container (i.e.
also, cnn given tutorial example (copied pasted) works perfectly on my istio deployment
* i install istio with the default allow_any policy (default - nothing extra specified in the installation - look below) * i install some applications.
they can successfully connect to external services making https connections (for example, i can do `curl phofurl * i install the following service entry, needed for a very specific application only, to perform tls origination from the egress gateway: phofcode * as soon as install service entry, https connections from any pod don 't work anymore, returning following error `curl: (35) protocol` as a side note, http connections keep working normally.
as soon as delete service entry can again connect to https services
change one of istio 's configmap values, e.g.
set enabletracing to `false` or completely remove any values from configmap and get the same `checksum/config-volume` annotation: phofcode phofcode
install istio demo profile by following the istio setup guide and try to access any external service by following the guide here: phofurl
* install istio 1.3 (i used using the quick start eval install for k8s * install the httpbin sample (or probably any sample) * apply the envoyfilter as above * look at the `istioctl proxy-config listeners <pod> -o json` output
a fully reproduceable test case with ready `kubectl apply` yamls are here: phofurl
1. with sidecar auto injection enabled, create 2 k8s pods with any linux container installed netcat and one public port, say `12345`.
pod 1 will served as netcat server and pod 2 will be client.
then create corresponding k8s service for pod 1.
2. start a nc server in pod 1 with command `nc -l -s 0.0.0.0 -p 12345 -o /dev/stdout` 3. try to establish tcp connection from pod 2 to 1 with command `echo -ne | nc <pod1 service> 12345 -o /dev/stdout`.
server side do not see any data printed.
4. restart nc server on 1 and try to establish another tcp connection with longer data sent from 2 to command `echo -ne | nc <pod1 service> 12345 -o /dev/stdout`.
server side will see the data printed.
5. remove sidecar from then redo the test.
very intermittent so hard to reproduce.
creating issue to alert people of potential problem.
we will continue to investigate.
1 run kubernetes and istio 2 enable jwt verify.
3 we found sometimes the public key cannot be get by istio-pilot from s3.
4 all http request will return 401 in istio-proxy 5 istio-proxy will try to get the key from s3, but it also fail because s3 is not in cluster.
- have a service running a (eg elasticsearch) running on port 9200 and named 'http ' - have allow_all mode set for egress - create a 'sleep ' pod on a namespace with istio activated (so the istio-proxy is set) - curl phofurl it answers '(35) version number ' rename the service name to 'https ' curl phofurl it is working we have similar issues on other standard ports such as 6379 for redis.
we used to have the same issues with https on port 443, but it is gone with upgrade to 1.2.x
- deploy the httpbin sample app - apply the following rety rule.
`apiversion: kind: virtualservice metadata: name: retry spec: hosts: - httpbin http: - route: destination: host: httpbin retries: attempts: 15 # 2 pertrytimeout: 1s # 3 retryon: "5xx"` curl to the from any other service with side car injected.
build a docker image that wraps the public `istio/proxyv2:1.2.4` image and includes the jaeger c++ library plugin, as follows: phofcode then, configure the `istio-sidecar-injector` to specify sidecar proxies with the following custom bootstrap configuration: phofcode (easiest way is via configmap and appropriate bootstrap annotation.)
once a pod is up and running with a thusly configured `istio-proxy` sidecar container, send a request to app running in "main" container of pod, preferably by way of `clusterip` service or something similar (to avoid bypassing proxy).
there 's strong chance you 'll get logs like this: phofcode
redeploying, consistently occurs on helm install.
1. upgrade istio from 1.0.9 to 1.1.12 using helm 2. use helm to update our microservice deployments to use updated container image version triggering a rolling update
having an nginx configuration such as the one down below pointing to a valid upstream within kubernetes.
1. install istio 2. use envoy ( xds client ) with below settings to connect to pilot phofcode 3. pilot crashes immediately phofcode
set workloadcertttl=1h running traffic for hours to see if there is traffic failed
1. remove https port and change http2 to be: ` - name: http2 nodeport: 31380 port: 443 protocol: tcp targetport: 80` 2. now you can 't reach https targets.
for example: `unexpected warning for phofurl miscellaneous warning eproto: request to phofurl failed, reason: write eproto ` 3. changing the port name in ingress-gw service to 'https ' resolve the issue.
1. deploy a virtual-service as shown above
unknown, it seems random :-(
1) set mtls enabled from false to true phofcode run helm upgrade ` helm upgrade --install --force istio --namespace istio-system -f 2) delete the default meshpolicy from original installation `kubectl delete meshpolicy default` upgrade istio via helm ` helm upgrade --install --force istio --namespace istio-system -f for both scenarios, deleted jobs istio-init-crd-10 to 12, reran upgrade to recreate jobs.
confirmed jobs ran, and meshpolicy still doesnt exist/updated
phofcode kubectly apply -f istio-gateway.yaml
deploy the redis rate limiter with a limit of 100/sec with a 500ms rolling window.
query the endpoint with a 0.4 second delay between requests.
notice that you get frequent 429 's.
spam the endpoint at well over the rate and record number of successful requests/second and notice that pass rate is not close to 100/sec.
rate limiter configuration: phofcode observed query results with a 0.4 second delay between requests, single thread, over 120 seconds: phofcode observed query results no delay, 20 query threads, over 120 seconds: phofcode
this is done via: phofcode (please disregard spacing, might be a c+p issue).
expected: navigating to " phofurl => oauth2-proxy " phofurl => dash-svc however, currently navigating to `myhost.com` will always result in dash-svc.
modifying just the `queryparams` to `headers` will have the correct outcome.
so it seems queryparams is always validating
`conditional( "/api/tx", "" ) | "unknown"` returns `""` instead of "unknown" when url_path does not startwith '/api/tx '
i cannot figure out how to reproduce it.
the only thing i can think is that it happened when we drained four nodes at the same time (which results in quite a few apps being moved around), so quite a bit of eds churn (as can be seen in the graphs above).
phofcode resulting pod: phofcode the container will fail the health check and bounce repeatedly.
the deployment will function normally if the probe is removed from the spec, or if a `destinationrule` downgrading mtls enforcement is added.
try accesing the istio-ingressgateway public ip
_(deployment files is attached below)_
create 1 raw yaml file to create fluentd service and fluentd handle at the same time ( so fluentd service need time to start up, and fluentd handler create very soon, so cannot find a service to connect).
logs i found as below: > info setting up event handlers info starting secrets controller info waiting for informer caches to sync error unable initialize adapter: snapshot= '3 ', adapter= 'fluentd ', err= 'adapter instantiation error: dial tcp i/o timeout '.
please remove the handler or fix the configuration.
warn unable find a handler for action.
info cleaning up handler table, with config id:2 but if i manually create the service and wait for it startup, and then create handle, everything is correct.
- add a vm to the mesh - follow the egress gateway tutorial phofhyperlink , but have the egress gateway and relevant service be that of your vm.
run the example and see incorrect status codes returned.
from _tests/integration_ run `go test ./istioctl/... --istio.test.env kube and it fails phofcode phofcode logs from pod end in: phofcode
supply prometheus with official scrape config on a cluster running istio + sds.
1. create a new gke cluster with istio enabled.
check that it installs the same version of istio components like specified down below.
2. edit the _istio-sidecar-injector_ config map to set `policy: disabled`.
3. after 2-3 minutes, it should revert back to `policy: enabled`.
have a service returning 503 to readiness probe and send an external request to the service via ingressgateway.
the service would receive the request and respond to it.
install istio on gke using helm template with the following config phofcode
1. create a deployment and service called "test" in the namespace "default".
2. scale this deployment to 1 replica 3. apply the following config 4. send about 10req/sec to the test service.
it is limited to 1 req/sec 5. increase the amount of replicas in test to 4 instances you should see an increase 4 req/sec (as dimensions use pod-id), but it stays at 1 req/sec.
1. configure inter-service proxy lb with a low client timeout.
2. install istio v1.2.2 and wait until the installation completes.
3. start observing pilot logs: connection failures occur once in a proxy timeout (e.g.
curl -l phofurl | sh -
examine `values.yaml` for the `istio-init` chart and/or use `helm template` to render it.
compare throughput and latency of app using an istio build prior and after 07/25.
- install istio with side car injection on a single control plane cluster created with "kubeadm" - deploy the pod with side car injection `kubectl apply -f <(istioctl kube-inject -f
kubectl -n istio-system edit svc istio-ingressgateway - x.x.x.x/xx ...
issue.tar.gz phofhyperlink * run `create-resources.sh` from attachment once * run `update-resources.sh` * measure performance phofcode
i have application a inside k8s cluster which is istio enabled.
application a needs to call many external apis for which only ip addresses are available.
note: host name is not available for these apis.
i have made as registry_only.
following is the serviceentry created: -- service entry with ip address kubectl apply -f - <<eof apiversion: kind: serviceentry metadata: name: sbdevice spec: addresses: - hosts: - metadata.csp.com ports: - number: 8378 name: http protocol: http resolution: dns resolution: static location: mesh_external endpoints: address: eof after creating this serviceentry, i am able to call external apis from my application.
now, i would like to set the retry and timeout for these external apis using istio 's virtualservice: kubectl apply -f <<eof apiversion: kind: virtualservice metadata: name: sbdevice spec: hosts: metadata.csp.com addresses: http: route: destination: host: metadata.csp.com addresses: headers: request: remove: x-forwarded-for retries: attempts: 5 pertrytimeout: 2s retryon: timeout: 0.05s eof the above virtualservice configuration does not work and am unable to configure retry and timeout for my external application call.
i not doing anything special... running pod on kubernetes with http readiness prob enabled.
launch job with istio and ttlsecondsafterfinished `kubectl apply -f phofcode job and pod are
following the steps from the sds task phofhyperlink we install istio with the following configuration: phofcode next, follow the steps starting from here phofhyperlink .
rather than a little teapot at end of first tutorial step, we receive: phofcode and here is a link config_dump endpoint of ingressgatway proxy phofhyperlink .
perhaps there 's another step here that i 'm missing to make this work?
please let me know if there 's other information that might be useful for debugging.
observe the published artifacts located at: phofurl
create a service that is served with a virtual service.
see yaml phofcode output ($host replacing hostname) phofcode notice that both the "production" and "canary" cookies are set.
only one of the 2 should be set.
### preconditions * `maxreplicas` of the hpa should be set to 1 to be more focused ### continuous restarting phofcode ### continuous requesting ingress phofcode in this setup we are able to reproduce this issue within 30min max.
getting to the correct logs can be a bit tricky because of the rolling updates, but the interesting part is that there is * no * `caught sigterm` from pilot-agent in those cases.
* note the failing curl takes several seconds actually fail with `empty reply`.
it turns out that seconds curl takes are so request is not answered and not denied, but gets closed when envoy shuts down.
i am not sure there is any particular pattern for reproducing this.
in my case, 1 of the pods with istio-proxy container fails to connect to slack and logz.io ,most of the times , upon pod startup.
kubectl get istio-sidecar-injector -o yaml -o | md5sum kubectl -n istio-system get secret -o | md5sum kubectl -n istio-system patch deployment istio-sidecar-injector -p + \'%s \'` "}}}}}" kubectl get istio-sidecar-injector -o yaml | md5sum -n istio-system get secret | md5sum
install the keycloak identity provider using the helm chart and after sometime you will start seeing the above mentioned logs.
when we remove the sidecar proxy application works normally and there are no errors in application logs.
to install chart with release name keycloak: $ helm install --name keycloak codecentric/keycloak chart reference link: phofurl
reset reason: connection termination` (update: some times, proxy will not show `signal: killed` log, but client will still get disconnect error).
create a k8s cluster may be kind cluster with 3 nodes and 2gb of ram to docker.
kind create cluster --config kind-config.yaml phofhyperlink create deployments and virtual service and destination rule as tried in following k8s manifest.
1. install istio in the multi-network, single control-plane method described in the documentation joining two clusters.
2. remove the remote definition from the `istio` configmap resource.
helm repo add phofurl error: looks like " phofurl is not a valid chart repository or cannot be reached: get phofurl x509: certificate has expired or is not yet valid
push a _valid_ configuraiton for a remote cluster and observer mixer pick it up.
in this case the logs are for telemetry pods: phofcode delete and re-create the config, introducing some kind of explicit configuration error.
in this case, updating the server address to be something that will not resolve (e.g.
observe mixer pick up the invalid configuration and report errors: phofcode delete and re-create bad config, correcting error.
observe that mixer is notified: phofcode however, mixer continues to log errors: phofcode restart pod to remedy:
deploy a pod with envoy injected at a version prior to ca334ac9f (i.e `1.1.9`).
wait for a new pod to be scheduled.
observe that listener configuration is rejected on startup.
phofcode confirm that a request cannot be issued against the pod.
* install istio 1.2.2 * attempt to install phofurl
create multiple pods with `hostnetwork: true` that end up on the same node.
both of those pods will have the ip, leading to constant full pushes from pilot due to the label equality check.
1. first we enable clusterrbacconfig on test namespace apiversion: "rbac.istio.io/v1alpha1" kind: clusterrbacconfig metadata: name: default spec: mode: 'on_with_inclusion ' inclusion: namespaces: ["test"] 2. then we create servicerole for service y in test namespace apiversion: "rbac.istio.io/v1alpha1" kind: servicerole metadata: name: y-viewer namespace: test spec: rules: - services: methods: ["get"] 3. then we create apiversion: "rbac.istio.io/v1alpha1" kind: servicerolebinding metadata: name: bind-y-viewer namespace: test spec: subjects: - user: "*" roleref: kind: servicerole name: "y-viewer" after applying all these yamls we are trying to hit x service and x calls y and from y are getting response.
1. set outboundtrafficpolicy registry_only istioctl proxy-config listener mypodname --port 15001 -o json phofcode 2. enter pod > kubectl exec -it -c mycontainer mypodname -- /bin/sh 3. access external url and it returns successfully > curl -v phofurl
(nb: i 've used example.com for this example.
as far as i can tell the domain always resolves to one consistent ip, but it might be worth checking that or using a different domain with a known-static ip instead).
install istio with the following values yaml being applied over the top.
phofcode to exclude example.com from going through the cluster, and also restrict traffic to only entries with a serviceentry.
configure sidecare autoinjection as per docs `kubectl label namespace default istio-injection=enabled` deploy a sample container that you can use to curl `example.com` note that you have not provided serviceentry, thus when you curl ` phofurl it succeeds due `excludeipranges` clause in configuration.
now do `helm upgrade` of istio with following values yaml being applied over top of chart phofcode note that auto-injected sidecar did not appear reload.
if you try and curl example.com again, it will still succeed.
if do `kubectl describe pod <pod>`and look at `istio-init` container, will see it still has old excludeipranges set.
if manually kill pod `kubectl delete pod <pod>` and allow be reinitialised, will have new config and talking example.com will fail.
i would have expected new config be applied existing injected sidecars (gracefully).
instead we appear need trigger graceful start-up of all pods (~200) ourselves.....
the general setup is as follows.
i 've stripped out the domain name we are fronting with and replaced with `example.com`: phofcode there is a google cloud l7 lb in front of our ingress gateway that terminates tls before proxying the request over another secure h/2 channel to the gateway.
issuing a request to the lb, i see request arrive intact at gateway (turning on debug logging in envoy).
note scheme is still `https`, as expected.
phofcode the request is routed, but now with `scheme: http`: phofcode envoy then attempts to proxy this to google: phofcode ultimately, client receives a 503: looking at outbound traffic in wireshark, i see a plaintext made down https channel google.com.
if i change serviceentry proxy google.com over port 80, client gets 200 (presumably because scheme matches protocol).
however, these requests need be proxied as https.
when port is 80, proxy logs: image phofimage image phofimage when i changed the port, proxy logs: image phofimage image phofimage when port is 80, the proxy config.
router: phofcode cluster: phofcode endpoint: phofcode is it because there are too many virtual host on 80?
create a global `destinationrule` that activates mtls and run the `simpleingress` test case
follow the steps on: phofurl but try the sleep example from a different namespace.
helm delete --purge istio helm delete --purge istio-init k get po -n istio-system
just regular calling the app api.
follow istio example on egress gateway tls origination : phofurl repeat the last curl to generate some data in prometheus.
deploy `sleep` app in labeled namespace (default) create `envoyfilter` cr object with the following spec phofcode
publish a web application via istio; for better accuracy, use an intermediate proxy to reach the web application (fiddler can provide this functionality, also any transparent web proxy that you can find online).
set the externaltrafficpolicy to local in the ingress-gateway section of the useremoteaddress setting should also be switched to false - if you need a custom pilot image with this setting you can use (in v2 and v2.1 i played around with the xff_num_trusted_hops setting, v1 should only have this one modification to defaults); i hear setting can also be injected via an environment variable with helm, but i haven't tested this yet.
1. install istio with consul 2. register 200 services to consul 3. change registered services, for example, deregister a service or register a new service 4. check the cpu usage or consul phofcode
it is not possible to install old versions of istio charts nor upgrade the charts from the same location.
see phofurl for more details.
(the second part of the issue there) note it is completely fine to keep the per-version charts repo, but all charts need to additionally be consolidated into one directory and an index created for them.
run `git clone phofurl or `git ls-remote phofurl (attempt to follow developer quickstart as written).
for example: * phofurl - 0.1.0 * phofurl - 0.1.0
1. create a kubernetes cluster on say gke, should also work on local cluster like minikube etc.
2. install istio with the number of pilot replicas > 1, then once the istio deployment is successfully stabilised, scale down the number of worker nodes to 0, or destroy all pods (after removing the `poddistruptionbudget` resources, or install with 3. monitor istio components, you should see it fail to stabilise until you scale down pilot replicas to 1.
gateway phofcode virtualservice phofcode services phofcode
install istio v1.2.2, wait until the installation completes, and start observing galley logs.
errors appear right after the installation.
install istio with then apply this configuration that creates two provider deployments under one service with different `version` labels.
$ cat vs.yaml apiversion: kind: virtualservice metadata: name: test spec: gateways: - istio-system/gateway hosts: - [host with more than 64 chars] http: - route: - destination: host: whatever
- install istio 1.2.2 on aws k8s cluster.
(side car injection=disabled) - max pilot and ingress instances = 15 - create 800 pods while establish websocket connection after creation of each pod.
- each pod should have virtual service with 6 host that refer to one destination.
use ping every 5 second to each pod to hold the connection and detect disconnection
1. deploy istio with consul.
2. register some services to consul, the service tags are not in the form of key|value.
this does not work (http/1.1 503 service unavailable even though fqdn of service is provided) phofcode this does works (http/1.1 200 ok after i deploy the rule to ns1, same as service ) phofcode
1. i created the following entries: phofcode 2. create a curl pod `kubectl run -ti --image tutum/curl --generator=run-pod/v1 curl --rm` 3. check the proxy endpoints phofcode
1. bring up eks cluster.
here 's my configuration: phofcode install istio.
here is my helm override file: phofcode now start a debian container and install some packages.
phofcode it hangs like that for almost exactly 2 minutes (always the same when i reproduce the issue), and then manages to continue and install fine.
see the attached `istio-proxy` log and note the timestamps: there 's a gap precisely between phofcode problem-log.txt phofhyperlink
just create a simple echo service with the following for gateway, virtual service, and deployment: 1) deployment phofcode 2) gateway (note the use of http2 or http2 causes unexpected behavior).
(not clear how to specify different grpc services using http and uri mapping to service.
grpc section or http2 section possible here instead of http: ?)
phofcode same service works if gateway uses http as the protocol for the port.
nothing appears on pod logs.
switching gateway port protocol to http works and echo is received on client.
try to use the template by changing to any 1.1.x or 1.2.x version
install a similar policy as above for some endpoint, and verify that `included_paths` and `excluded_paths` don 't seem to work as documented.
i can 't reproduce the bug.
1. create a multi-cluster installation of istio using the split-horizon eds configuration method for cluster-aware routing.
2. install a service and accompanying virtual-service definition in the primary, control-plane cluster (`service-a`) in a given namespace (`namespace-a`).
3. install a service in the remote cluster (`service-b`) in given namespace (`namespace-b`) and create an accompany virtualservice definition the control-plane cluster.
4. attempt to resolve from any pod of `service-b` and note that resolution fails.
1. ensure phofhyperlink set to `allow_any` 2. install bookinfo 3. install the following resource: phofcode notice that we are only allowing istio-system and details service 4. check that you are still able to access ratings from workload reviews-v2 phofcode yields: phofcode 5. set phofhyperlink to `register_only` and wait a few seconds until the policy is in place.
6. try the same command done in step 4 and see the error output, in my case phofcode
1. install istio and istio-cni on gke version 1.13.7-gke.8 1a.
configure istio with `istio_cni.enabled: true` 2. enable auto injection on a namespace 3. install the following psp and clusterrolebinding phofcode phofcode phofcode
a) install istio-init with helm chart b) install istio with helm chart c) the following is what my values.yaml looks like for istio on azure aks: phofcode
specify one or more - ipv6 subnets for addresses - ipv6 addresses for endpoints in a serviceentry yaml file.
attempt to apply the file.
set interceptionmode: tproxy kubectl apply -f istio-demo.yaml
i don 't fully understand what 's happening here, but to the best of my knowledge, these steps work nearly every time.
1. have an environment where ingress gateway is set up but not used.
2. make sure the elb is up and healthy for the ingress gateway.
3. create a simple gateway/virtualservice manifest (these must be applied at the same time -- i cannot reproduce issue otherwise.)
phofcode 4. apply manifests and immediately start hitting ingress-gateway elb with `curl -v <elb>/my-service` 5. you should see that at least one of ips reported back from elb is likely failing consistently while other two work.
6. if this doesn 't work, `kubectl delete` manifests and try again from step 4. once it happens, it may take 10-15 minutes (or more) before that ip begins to work.
it 's also worth noting that it seems elb shows a very large number of surge queue items and oftentimes a large number of backend service errors.
to see how this normally behaves, wait about 30 seconds between applying manifests sending a `curl` ... you should never hit hanging issue in that situation.
but, when i was trying phofcode test manually, got response.
install bookinfo phofcode install gateway phofcode install destination rules phofcode follow instructions in enforcing namespace-level access control phofhyperlink phofcode then after waiting a while bookinfo productpage can 't be access from browser using ingressgateway you get `rbac: access denied` or while to troubleshoot i was able to change the subjects to allow any unauthenticated access from: to: and then it works, so this narrows down that there is something wrong with `source.namespace` not working properly
build a proxy image and use it.
this can be reproduced with slight modifications to the httpbin tutorial example.
i did everything according to the tutorial, except in my environment i can add a dns alias to my $ingress_host.
i updated the gateway and virtualservice objects to use that alias rather than the one, so both of their host entries look like: phofcode ...where hostname.company.com is an alias $ingress_host.
also note that in my environment i don 't have a functioning loadbalancer, so i 'm forced use $ingress_port (31380 default).
can then perform following two curl calls: phofcode all is well.
however, following does not work: phofcode how do make 31380 port work?
things tried: 1. set 'hosts ' value '* '.
this works, but obviously undesirable 2. add a hosts entry gateway such as this is rejected as an invalid domain name.
the host header that includes no port makes sense that it works.
however, host header includes port 80 seems be treated as special.
why does match on hosts list, while header includes a non-standard port doesn 't?
1. follow perform tls origination with an egress gateway phofhyperlink example - skip step 2 of the example, at that point, it produces the right telemetry, and could cause confusion when checking later.
- it 's the same with mutual tls enabled or disabled (step 3) 2. after completing, notice that further calls to the serviceentry (e.g.
step 5) no longer generates any telemetry for or
i created a helm chart via helm create to setup an nginx hello world page.
i then created a 2nd service and deployment.
so i have deployments: (1) frontend-blue (2) frontend-green and services: (a) frontend-blue (b) frontend-green i then created a single virtualservice in front of both.
when trying to route from the outside the cluster and using a match on authority it works fine phofcode phofcode i 've tried numerous things e.g.
: phofcode for host was trying internal service name like `frontend-blue` or `frontend-green`, also tried to see if could create host of `frontend` that would be routable to both but the virtualservice doesn 't create dns entry so that didn 't work.
was hoping would be able override the hostname so for instance send 100% of traffic `green` and try hit `frontend-blue` hoping it would actually go green b/c of 100 weight.
just feel like i 'm missing something.
add a virtual service with one route and weight = 0 (although it 's probably will work the same with any value < 100)
deploy istio 1.1.x or 1.2.0 with globally enabled mtls: phofurl certmanager could be installed as part of istio or as a separate application (version 0.6.2, 0.7.0) cert issuer: phofcode request certificate: phofcode logs from cert-manager looks the following phofcode service generated by http01 challenge could not be reached (503) and certificate is not issued.
possible manual workaround to relax mtls restriction: phofcode here is a name of service generated as part of http01 challenge.
as soon as this destinationrule deployed certificate is issued.
but this destinationrule is handcrafted.
it not a part of normal workflow.
we could not generate these kind destinationrules for renew process because it relied on random service name generated by certmanager part the challenge.
please note that if global mtls enabled by default everything works smoothly and certificate normally issued without manual intervention (generation destinationrule).
probably some more generic setup for destinationrules or policies for certmanager could help here, but i find ant documentation and discussion on istio forum stoped here well.
phofurl any advises would be highly appreciated.
1. set to `allow_all` 2. apply a service entry to some https host, say phofurl 3. apply a fault injection virtual service to the same host 4. from within a sidecar-injected pod, curl the host you set up the service entry for
download release tarball, look at (or attempt to apply) weirdly, i notice that kubectl doesn 't always notice the problem the first time i apply the yaml.
but once it has started to notice, it sees it every time i re-apply after that.
use 1.2.0 and it won't work, tested on 3 different clusters.
helm install --name istio --namespace istio-system --set --set --set grafana.enabled=true --set tracing.enabled=true kiali.enabled=true create grpc-json trancoder envoy filter phofcode check istio proxy status.
image phofimage create pod phofcode check istio-proxy configuration after starting the pod.
run citadel with configuration flag `--explicit-opt-in=true` and put a log statement in the failure case phofhyperlink where citadel attempts to retrieve namespace information for an object.
should encounter an insufficient permissions failure.
deploy demo nginx servers phofcode then set gateway, virtual service and destination rule (see above) phofcode
scale galley to 0, restart mixer
1. installation istio system 2. deploy bookinfo sample application with gateway and destinationrules [1] 3. apply [2] and [3] 4. apply mixer-rule-deny-ip.yaml [4] 5. try to access the bookinfo productpage at and verify that you get an error similar to: mesh source ip> is not whitelisted 6. delete mixer-rule-deny-ip.yaml [4] 7. try to access the bookinfo productpage at and verify that you still get an error similar to: mesh source ip> is not whitelisted until 4+ minutes after the deletion.
[1] phofurl [2] phofurl [3] phofurl [4] phofurl
you 'd need to do an istio upgrade from 1.1.9 -> 1.2.0 on a pretty big cluster
this isn 't a particularly large cluster, nor does it have particularly high churn.
`158` services with `197` pods.
sadly not possible, as the access token i 'm using is private to my company :(
follow instructions on phofurl up to step 5. everything before that step is as show.
i tried with both mutual tls enabled and mutual tls disabled.
i also tried with and with as showed here phofhyperlink .
install istio 1.2.0 with cni enabled, install bookinfo, expose bookinfo
create a deployment without any containerports
1. add serviceentry `www.apple.com` phofcode 2. connect to a pod in the mesh and start sending requests to `en.wikipedia.org` phofcode 3. confirm that the curl request is going directly to wikipedia: `<title>wikipedia, the free encyclopedia</title>` 4. inspect the telemetry by checking in prometheus.
even when we aren 't doing any request to www.apple.com, external traffic points here.
note: it doesn 't appear in `istio_requests_total`, see this other issue phofhyperlink .
reading code (see phofhyperlink )
upgrade to 1.2.0 from 1.1.8 using helm template with sds set up in your gateway.
1. create a virtualservice with a cors policy allowing any origin and a maxage of `24h`.
2. send requests to that virtualservice from one origin via a browser.
3. send another request to the same virtualservice from another origin (a different domain).
4. observe that the browser refuses to make the second request.
try creating a virtual service and setting up a regex based http match condition for a destination, where the regex matches a case insensitive uri path.
call `make test` in the installer repo.
from a clean cluster, ran this to install the istio-init chart and the istio chart (v1.1.8): phofcode verified istio was installed by monitoring istio-system and its pods, installed the published httpbin.yaml phofhyperlink resource file in the "services" namespace: phofcode then `istioctl authn tls-check [httpbin pod name].services | grep conflict` should reproduce output with conflicts present.
maybe these aren 't actually a problem?
though everything i 've read in my istio journey so far suggests they would or could be, e.g.
phofurl btw, we 've tried to disable (and leave default=disabled) with same result in `istioctl authn tls-check`.
also, have been at work at trying to identify maybe some other combination of available helm chart values to override that could solve problem, but we 've been unsuccessful so far.
1. create a serviceentry using a protocol=https phofcode 2. connect to a pod in the mesh and start sending data to the host phofcode 3. verify that no data regarding this serviceentry is added to `istio_requests_total` using http does seem to add the data `istio_requests_total` phofcode
1. deploy a service that takes at least a second to respond.
2. make a request with 100`.
3. see that the service responds normally after it 's normal amount of time.
- create 2 serviceentries with same host - or create 2 kubernetes headless service with same port and different protocols
configure a http service and make it run for more than 1 min.
the istio will timeout and retry will get triggered.
we tried adding timeout in virtual service but that doesnt seem to help
run the gate a bunch of times
download istio 1.2.0-rc1 run phofcode
havn 't been able to reproduce yet as it is linked to the azure lb bad behavior.
(also, my go clients are all sending tcp keepalive, which helps mange the connexion adequately).
try to follow current documentation to install istio version marked as latest.
1. apply example `kiali-secret.yaml`: phofcode 2. apply example `values.yaml`: phofcode observed kiali pod logs: phofcode
run the following command phofcode or phofcode
create a destination rule with a subset label that contains a slash in the key name.
run in and observe traces.
follow installation documentation phofhyperlink using istio version `1.1.8` phofcode phofcode error: phofcode it appears to be trying to deploy certmanager even though the default is set as `enabled: false` if i install the certmanager crds: phofcode then use the same helm install command as before however there are numerous apps that are disabled by default but still deployed using `--values` is ignored as well
follow installation cni guide here: phofurl there is no artifact available for step 3.
create aks cluster, install istio and apply same config as above, try to restart pods.
follow the guide phofurl to start consul.
follow the guide phofurl to start bookinfo example.
visit `productpage`, you will see error.
phofcode you will see all the other services will be redirected to one-specific service, like `details`.
and perhaps, pilot will report phofcode if no such error, just restart pilot.
1. check out a commit on master on or after a51ebc0d0 2. make && make docker && make docker.push && make installgen 3. start a gke cluster for testing (using either create_cluster_gke.sh or the steps here phofhyperlink 4. e2e_simple 5. note that the test times out and fails, and that the "echosrv" pods on the test cluster are stuck in a crash loop with error described above.
$ kubectl config current-context <my cluster> modify values.yaml to enable pilot sidecar, deploy 1.0.7 $ cd /perf/istio-install $ ./setup_istio_release.sh 1.0.7 $ cd releasetype=release release=1.0.7 namespace=test-ns num=10 cluster=<my cluster> ./setup_test.sh 2>&1 | tee
i don 't sure other will meet this problem, i install istio 1.1.6 with helm that default configuartion, note i disabel the prometheus.
then follow enabling rate limits task phofhyperlink step by step.
add the following to `values.yml`: phofcode now run: phofcode you should receive an error, like "expected key not found", which is really the result of bad indentation.
run `istioctl verify-install` against a 1.12.7 gke cluster.
look at the metrics when pilot rejects csd configs.
i just set auto scale to true and min replicas to 2 and in our cluster second replica would have difficulties to get ready for some reason.
use istio certificate and connect using java
download the release and explode, look at phofurl or just look at phofurl easy to see version is 1.1.0
install istio with controlplaneauthpolicy: mutual_tls, after a short while envoy sidecars fail to disconnect (deleting one of the pods and brining it back)
i found that after adding port 9081, envoy in ingress-gateway routes the request to cluster: but the cluster does not exist; if port 9081 is removed, envoy routes the request to and it works well.
maybe we should to specify target service port in gateway
image phofimage i replace prom to prometheus-operator
installed istio with following values.yaml phofcode
1. deploy one service with sidecar injected 2. deploy another service with above `service` configuration the service deployed in step 1 cannot access to any external https service.
set `cabundle` in the of the sidecar-injector to be out of date
use the for loop print headers.
it is random, but if you deploy `istio-ingressgateway` to enough gke clusters, you 'll hit it sooner or later.
follow the same steps as in issue #14495
- install chart 1.1.0 - activate sds - set a service to use sds ( phofurl
per trouble-shooting: *verify that the subject is correct in the certificate of the ingress gateway:* phofcode *verify that the proxy of ingress gateway is aware of certificates:* phofcode
- forward port 15000 of the ingress gateway `kubectl -n istio-system port-forward 15000` - send the reset command to the gateway `curl -xpost phofurl - watch the logs of gateway phofcode
i tried to use the configuration in both documents, but the final effect is the same, this is the first one: apiversion: kind: serviceentry metadata: name: mongo.testdomain namespace: ccsrv spec: hosts: - addresses: - ports: - number: 20000 name: tcp-mongo protocol: tcp resolution: static location: mesh_external endpoints: - address: ports: tcp-mongo: 20000 this is second: apiversion: kind: serviceentry metadata: name: mongo.testdomain namespace: ccsrv spec: hosts: mongo.testdomain ports: number: 20000 name: tcp-mongo protocol: tcp resolution: none location: mesh_external eof --- apiversion: kind: virtualservice metadata: mongo.testdomain namespace: ccsrv spec: hosts: tls: match: port: 20000 sni_hosts: route: destination: host: port: number:
simply try `docker run -it istio/proxyv2:1.1.7 proxy router or follow installation step below and observe logs of ingressgateway pods.
follow this document of gke: phofurl modify helm commands to below for control plane phofcode modify helm command to below for remote plane phofcode
every time we run `istioctl proxy-status <pod>.<namespace>`
apply the manifest above and then apply literally any other change.
* use this instruction phofhyperlink to install istio with kiali.
additional property should be set " --set phofurl * login to kiali console.
* error will be there in this format: `error fetching grafana info., error: [ services "grafana" not found ]`
i 've also got other services able to contact my-service via a service account which i have not included in the below config.
but i 'm adding this point in to demonstrate that i know that my rbac setup works with service-accounts.
run kublet via systemd phofcode
cluster with calico 3.4.4. setup istio with istio-cni.
add some pod with sidecar injection.
result: traffic not routed through sidecar.
deploy a pod with set to `false`: phofcode
1. first deploy service a, create gateway (http) and virtualservice for service a.
2. then deploy a client application and fire requests to service a through ingressgateway.
(in my case, it has 90,000 qps to service a, the avg.
payload size for each request is around 10k. )
below is a screenshot of hpa for each components at this traffic level.
phofcode 3. now deploy b, wait for the is ready.
4. create a gateway and virtualservice b, and verify the gateway is working by fire a curl command.
5. delete gateway virtualservice b verify the curl now failing.
6. repeat step 4 step 5 by 100 times.
7. during time window of step 6, i observed below impact on ingressgateway request duration p99: image phofimage
install istio 1.1.6 from the istio-demo.yaml chart using helm with tracing enabled.
go to kiali 's console and you won 't find tracing working.
unless i did something wrong, but i did not touch much regarding the tracing.
just found out it wasn 't working and had to make corrections to make it work.
decided to report it with as much details as possible.
add istio.io repo with the chart index from the 1.1.7 release, and install istio as version 1.1.7.
1. install istio using helm.
2. download latest istio and move it to istio-latest 3. after that execute command: istioctl kube-inject -f samples/sleep/sleep.yaml | kubectl apply -f -
policy: phofcode policy pod 's logs: phofcode egress: phofcode ingress: phofcode
1. enable outboundtrafficpolicy 2. enable accesslogs 3. exec into a running pod that is sending traffic through the proxy 4. curl an external endpoint 5. check stdout of the proxy, no reject log 's exist exec into a running pod and curl to an external endpoint like google.
i see this behavior when upgrading from `v1.0.6` to `v1.1.7`, happens on all `v1.1.x`.
here 's my helm values for `1.1.7`.
phofcode and this is my `gateway`.
just download any release newer than 1.1.2, unpack and check for any istio-cni chart available.
deploy mysql chart (i disabled istio proxy / sidecar here), deploy mysql client (enable istio proxy / sidecar).
`kubectl exec -it <myql-client-pod> sh`, run mysql command to connect to db.
then run a query that will return 100 rows or more.
`helm repo add istio.io phofurl 2.
`helm upgrade --install istio-init istio.io/istio-init --force ...`
create a virtual service with a `grpc-` port and destination with the above traffic policy.
deploy a large number of the workloads, do query on prometheus for the selected workloads, need to exclude ingress, since that will have different cds config for sure.
we can see different number of the cds hash.
dig down into the envoy in different workloads, we can see that same cluster x, have region/zone info on some workloads, but not on some others.
the ratio is roughly 1%.
still worth calling out though.
deploy istio operator (`oc apply -n istio-operator -f phofurl following the standard guide.
1. install istio 2. enable isito-inject 3. install bookinfo 4. get istio-proxy config from productpage
publish double gateway + virtualservice
create a sample-app in kubernetes create a envoyfilter create a virtualservice to route traffic to that service try to hit the service endpoint that will fail go to kubernetes workloads/deployments and the deployment says failed with readiness check 403 code.
* install istio with my helm values below * run through the example step by step
i have one project with a config-server and more than 10 spring clouod service.
when enable auto inject sidecar, i deployment those all the services, and config initcontainer to start config-server first.
the issue i encounter is that few services cant connect to config-server and hint "connected refused" in spirng clound service logs.
i also encounter the config-server can 't access git repository and with connected refused log.
if i deployment those services without any istio component, all those services works fine.
i guess the sidecar take over network block network access.
setup a denier handler in mixer with a rule that covers the tcp service.
connect to the tcp service from another pod - the connection will be accepted.
install istio, install some gateway, observe the istio-ingressgateway pod
1) istio 1.1.3 installed in the cluster 2) upgrade istio to 1.1.5 with using helm
ingress gateway, egress gateway and side car have replica set of 2 rest all istio pods have 1 minimum replica sets.
1. phofcode 2. create sample apps phofcode phofcode 3. apply authn policy and destrule (follow phofurl 4. pull pilot logs(see below), same destrule was pushed from galley to pilot multiple times, which trigger pilot push config to all sidecars.
--- create cluster: gcloud container clusters create [cluster-name] --enable-autoupgrade --enable-autoscaling --enable-network-policy --cluster-version latest --min-nodes=3 --max-nodes=10 --num-nodes 4 --zone us-central1-a --project [project] gcloud container clusters get-credentials [cluser-name] --zone us-central1-a --project [project] kubectl create clusterrolebinding cluster-admin-binding --user=$(gcloud config get-value core/account) --- install istio (default): kubectl create namespace istio-system helm template --name istio-init --namespace istio-system | kubectl apply -f - kubectl get crds | grep | wc -l [53] helm template --name istio --namespace istio-system | apply -f - label namespace default istio-injection=enabled test: get pods -n istio-system describe pod [istio telemetry pod] -n
deploy a grpc server that waits 10s before returning resource_exhausted status code.
client sends a grpc request with golang context deadline set to 40s.
according to the default configuration, sidecar retries the server on resource-exhausted 2 times.
however, each time consequent server receives the retried request from the sidecar, deadline inside context changes, i.e.
first request came at and timeout is set to server waits 10s and returns resource_exhausted, then at proxy retries, but deadline is reset and is now by second retry, time of arrival is and deadline set to the relevant part in golang client looks like this: phofcode server replying takes following form: phofcode envoy route configuration for ingress gateway that routes this service: phofcode i see same behavior when setting timeout in virtualservice, i.e.
when maxgrpctimeout timeout fields are set.
create an object with these fields phofcode
install istio and do mesh expansion using doc urls.
(with helm & tiller options)
first create a service that is available externally via the ingress gateway: phofcode afterwards configure this envoyfilter for the gateway listener of the ingress gateway: phofcode now fire requests against this service: phofcode (i use `curl --resolve` as i am running istio locally on docker for mac) after a few requests the istio-proxy of ingress-gateway crashes with a segfault: phofcode alternatively problem can also be reproduced directly with istio-proxy without control plane by starting istio-proxy with this configuration: i could only reproduce it with istio-proxy of official docker image.
a local build on mac did not crash.
but this is reasonable as build deviates in a number of factors from what is delivered: different compiler, different os, afaik istio-proxy 1.1.3 and 1.1.4 are not built from code that is publicly available... there are actually number different stack traces that appear in crash, log above shows that it crashes in mixer plugin.
when running minimal config above, ie.
without mixer plugin, i also see sth like this:
hit the end-point that returns a 503 and expect istio to apply a retry policy.
setup a destinationrule as shown above and configure it service to have two replicas that always answer with a 502 status.
comment out this line phofhyperlink and run the tests in native mode... phofcode
1. deploy istio to a namespace other than `istio-system`.
2. use `kubectl get and see that the `istio-galley` object does not exist.
3. inspect the galley pod logs and see that the default value `istio-system` is used to locate the service to test webhook api.
also note that galley does not deploy object.
redeploy services while receiving traffic.
it may be worth noting that nodejs defaults to 5s keepalives, which is quite a bit lower than other systems as far as i know.
i 'm not sure if that 's playing a role here or not though.
1. setup multicluster mesh with helloworld.
2. run `kubectl delete secret -l istio/multicluster=true -n istio-system` 3. run `istioctl pc endpoints $(kubectl get pods -l app=sleep -n sample -o
configure a circuit breaker as shown above
after pod created by statefulset errorreadiness probe failed read: connection reset by peer
set the following: phofcode in the istio deployment `values.yaml` and deploy the control plane and ingress gateway.
then attempt to achieve ingress to an example backend and the ingressgateway will fail.
1. create istio 1.1.1+ instance with one ingress gateway.
2. create a dns record a.example.com, and b.example.com both point to the ingress gateway.
3. create a gateway named "a" for a.example.com that uses a.example.com server host, and has a wildcard certificate for *.example.com.
4. create a gateway named "b" for b.example.com that uses b.example.com server host and has specific certificate b.example.com.
5. an app that hosts static website with two files index.html and foobar.png.
the index.html file should have an image tag that refers to an image ` phofurl (e.g., `<img src=" phofurl 6. deploy the app twice to kubernetes attach virtual services for a.example.com to go the app b.example.com go the app (effectively a.example.com are both hosting with different certificates on same ip address, where is on wildcard cert b is not).
7. visit phofurl notice you receive 404 in chrome firefox but not safari or opera.
try using a hostname for the gateway address
1, install the my-nginx project from istio sample.
this is a https service.
phofurl 2, add gateway as below phofcode 3. run curl command phofcode run result phofcode
1. build sidecar debian package, install it on a vm.
`iptable-start.sh` will fail at `isvalidip` function phofcode output not valid ip and the iptable setups stops.
more description can be found at phofurl
* install istio 1.1 in a kubernetes cluster.
* setup the destinationrule shared above.
* create a deployment with sidecar in default namespace.
sidecar will not be able to communicate with istio-telemetry.
- build `envoy` binary from istio/proxy - run `make docker.proxyv2` in istio/istio to make a new `proxyv2` image - modify `global.proxy.image` to point to the new `proxyv2` image - run `fortio` benchmark
this is mixer log: infopublishing 8 events infobuilt new config.snapshot: id= '62 ' infoadaptersgetting kubeconfig from: "" {"adapter": warnneither --kubeconfig nor --master was specified.
infoadapterswaiting for kubernetes cache sync...{"adapter": gc 4384 0%: ms clock, ms cpu, mb, 25 mb goal, 6 p infoadapterscache sync successful.
{"adapter": infoadaptersgetting kubeconfig from: "" {"adapter": warnneither --kubeconfig nor --master was specified.
infosetting up event handlers infostarting secrets controller infowaiting for informer caches to sync infocleaning up handler table, with config id:61 infoadaptersdeleted remote controller {"adapter": infoadaptersadapter closed all scheduled daemons and workers{"adapter": infoadaptersadapter closed all scheduled daemons and workers{"adapter": infoadaptersshutting down daemon... infoadaptersshutting down daemon... infoadaptersadapter closed all scheduled daemons and workers{"adapter": infoadaptersshutting down daemon... infoadaptersshutting down daemon... infoadaptersadapter closed scheduled daemons and workers{"adapter": infopublishing 10 events infobuilt new config.snapshot: id= '63 ' infoadaptersgetting kubeconfig from: "" warnneither --kubeconfig nor --master was specified.
infoadapterswaiting for kubernetes cache sync...{"adapter": infoadapterscache sync successful.
infoadaptersgetting kubeconfig from: "" warnneither --kubeconfig nor --master was specified.
infosetting up event handlers infostarting secrets controller infowaiting for informer caches to sync infocleaning up handler table, with config id:62 infoadaptersdeleted remote controller
define a hub url, use satellite as a docker repository.
the images url will have a "/" value.
repro in default istio "quickstart" deployment.
1. use an istio setup that 's running ingressgateway as well as a pod using istio-proxy sidecar.
2. create an externalname service: phofcode 3. check envoy cluster configs on ingressgateway as well as sidecar istio-proxy containers.
there will be one cluster for each port (80, 443, and 7070).
each cluster has 3 endpoints shown below: phofcode so each service port is getting mapped to all 3 service ports.
a request for port 80, based on above config, will be sent in round-robin manner to all 3 ports alternately.
envoy cluster configs for other ports are similar.
this results in calls to port 80 being sent to either 80, 443 or 7070 randomly (or round-robin) and hence 2 in 3 calls will fail in this setup (assuming 80, 443 and 7070 expect different requests).
install the 1.1.3 with istio-demo.yaml
1. install istio as described in the documentation using helm templates (this installs istio-1.1.3) 2. enable mesh wide mtls policy 3. execute the steps mentioned here plugin ext ca-certs phofhyperlink 4. exec into ratings pod and i do not see any certs in /etc/cacerts, which essentially proves the fact the sync did not take place at all
configure an sni passthrough-mtls enabled application.
gateway phofcode destinationrule phofcode policy phofcode config dump shows a
1. make requests to a service with 20s+ response time with no request timeout overrides 2. observe that the request completes successfully.
go to kiali and navigate to a info and click on "logs".
- install isto 1.1.2 using default instructions - setup ingress gateway and a restful service running in a pod.
route traffic from gateway to the pod.
- open up ingress envoy and view logs.
no logs will appear for incoming requests.
- open up pod envoy proxy and view logs.
no logs will appear for incoming requests.
set up istio in a multi-cluster configuration (single control plane cluster with a single remote cluster).
we 're essentially using the "flat network" setup, outlined in the docs phofhyperlink .
pair the control cluster to the remote cluster, but with a bad configuration.
in our case, we had following in remote-cluster configuration: phofcode observe pilot logging that it couldn 't pair to remote due to bad configuration: phofcode correct bad configuration.
in our case, we removed ca configuration from yaml file.
attempt to pair clusters again.
scale down the deployment to 0 replicas and watch the endpoints (`istioctl proxy-config endpoints --cluster and notice that they take many minutes to go away.
call service from non-istio enabled namespace to istio enabled service.
i am getting error phofcode
i cleanup istio 1.1.2 and setup istio version 1.1.3, deploy a pod in injected sidecar namespace and using ssh to this pod and call wget phofurl described in phofurl fix allow_any so it now allows external traffic if there is already an http service present on a port.
install istio with helm template
deployment of: phofcode test (
have 2 external postgres dbs.
(have some way to tell them apart, such as table called db1 in first db, and table called db2 in the second) create services of type externalname that points to the dns of each db.
create postgres pod with sidecar exec into pod and try and connect to db1/db2/www.google.com you should end up at only one of the two each time
helm install with istio 1.0.6 and then helm upgrade to istio 1.0.7
{{ minimal steps to reproduce the behavior }} i turned on an 8888 port monitor via gin, and the pod worked.
create similar configuration for istio and check example request.
expose grafana and prometheus services to an external ip.
one way to do that would be to use nodeport: phofcode access grafana and prometheus ui like this : the above urls will not display the ui properly.
however these would work on the context root "/" the default contextpath values for grafana phofhyperlink and prometheus phofhyperlink are /grafana and /prometheus respectively.
the kiali ui works on the contextpath '/kiali ' properly.
from a container in the cluster (i used kubectl run -it --rm dummy /bin/bash) run: curl -v -k phofurl phofcode
{{ minimal steps to reproduce the behavior }}
- install minimal istio in kubernetes cluster - deploy phofurl i have attached the modified yaml file below which you can apply directly <details> phofcode </details> - enable istio in checkout-service only `istioctl kube-inject -f deployment.yaml | kubectl apply-f -` and create 2 virtual services applying below yaml phofcode - get config_dump `kubectl exec -it -c istio-proxy curl phofurl > configdump`
run `kubectl edit deployment -n istio-system istio-ingressgateway` to add the annotation to the pod template.
check the deployment: phofcode after the pod restarts, check inclusion_list within stats_matcher and confirm it is unchanged: phofcode check statistics data with `kubectl exec -it $(kubectl get pods -n istio-system | grep ingressgateway | awk '{print $1} ') -n istio-system -- sh -c 'curl and confirm that there is no inbound or outbound traffic information.
1. create new serviceentry: phofcode 2. run `kubectl apply -f ../egress-network.yaml` 3. you will get this error: `* hosts must be fqdn if no endpoints are provided for resolution mode dns`
in our case, istio was upgraded from 1.0.6 to 1.1.1 (no config changes basically) and it started to happen.
1. deploy the bookinfo following the tutorial version routing in a multicluster service mesh phofhyperlink 2. enable access logs in two clusters: helm template --namespace=istio-system -x templates/configmap.yaml --set | kubectl replace -f - 3. refresh the webpage to make sure review-v2/v3 has been visited.
4. check the log: kubectl logs istio-proxy | grep -v "warning" 5. the log contents: phofcode
create a gauge type metric and try to log it to stackdriver.
this happens once we upgrade with helm and soon try re running the egress rules
1. build docker images: `goos=linux make docker hub=kind tag=e2e`
add the two manifests above and two separate deployments and use `kubectl` to change the `subset` of the virtualservice from blue to green or vice versa.
2. configure opa mixer adapter with a basic opa policy 3. configure an istio origin authentication policy against the product page application.
4. make an unauthenticated request to the product page application.
5. observe a 403 occurs before a 401.
not completely sure, but some key information: - no virtual services or destination rules - 560 pods in 200 services - node services mostly (which i understand have some keepalive-related defaults in some istio issues) -
1. go to: phofurl branch: istioexternalnameissue 2. ko apply -f phofhyperlink --> to reproduce the issue 3. ko apply -f phofhyperlink --> to see the issue goes away when not using named port 4. ko apply -f phofhyperlink --> to see the issue goes away when not using istio sidecar after installing any yaml.
1. get the curl pod 2. k -n istioissue exec -it <curl pod name> -- /bin/sh 3. curl -v phofurl 4. either returns 404 (in case of an issue) or 200 (no issue)
this issue was reproduced by slightly modifying the example giving in istio mirror.
phofurl phofcode above lines in the is the only new addition from the istio mirror example.
bring up following 5 yml files phofcode
download versions from release page phofurl or look into tagged commit at: phofurl
setup caddy running in a pod, i'm fairly new to caddy but can def share some configs if needed
- we created a new kubernetes 1.12 cluster on gke with network policy enabled - we install istio with the settings listed below using `helm template` - we installed the bookinfo sample + bookinfo ingress.
- we curled the endpoint multiple times as per the sample curl request.
deploy kubernetes via stackpoint.io gcp -> leads to k8s 1.13.2 with screenshots in 2nd comment deploy kubernetes via stackpoint.io gke -> leads to k8s 1.12.6 with screenshots in 3rd dcomment
- `docker run -p - navigate to phofurl - check console for errors - if or backend is setup then broken fonts will appear under the book reviews section if no other backend is setup then a broken user font will appear after signing in using the "sign in" button at the top right
follow the bookinfo tutorial and the task phofurl
1. go to grafana 2. go to istio service dashboard 3. choose one service 4. click the title 'client request duration ' 5. choose share -> embedded, and then copy the iframe source to a empty html file e.g test.html 6. open test.html using chrome 7. the page reports "invalid dimensions for plot, width = 422, height = 0" please notice, panels like 'client request volume ' don 't have similar issues.
in gcp, create a private gke(private master and node) with istio enabled as strict and deploy an application with gateway, virtualservice, and policy to validate the jwt token(using okta)
{{ minimal steps to reproduce the behavior }} phofcode
using the config from the sds example phofhyperlink : phofcode setting when installing via helm, after first installing the certificates from `./samples/certs` into the namespace.
trying to hit ingress gateway ip results in following: phofcode observe connections from nodeagent to citadel fail with following: phofcode this seems to be due to nodeagent fetching root certificate from istio-security `configmap`, but validation of cert chain is missing intermediates (namely istio ca).
the certificate that citadel presents: certigo connect
fresh gke cluster with upstream istio 1.1.x
install istio-1.1.0 using this script phofhyperlink from istio-ecosystem.
it installs the istio components into separate namespaces and has mtls enabled.
* apply the following configuration: phofcode
1. setup a 1024 core cluster ( we use 32 nodes cluster with 32 vcpu in each node 2. deploy istio 1.1.1 using helm 3. enabled auto sidecar injection by adding label istio-injection=enabled to namespace 4. enabled hpa for istio-pilot to be from 1 - 20 5. deploy 1000 httpbin deployments and corresponding service with replicas: 1 6. once all the 1000 pods are up and running with istio-proxy, we run kubectl top pods -n istio-system and observed the following: name cpu(cores) memory(bytes) 3m 21mi 115m 51mi 12m 240mi 11m 242mi 15m 239mi 15m 246mi 12m 242mi
configure 'servicerole ' targeting a service and bind with 'servicerolebinding ' as above - setting subject user to `*` and add authentication policy with origin as above.
then try to access the service without a valid jwt token.
helm template --name istio --namespace istio-system --set | kubectl apply -f - have a gateway definition like: phofcode then try to connect to port 31380 on the node.
`kubectl apply -f istio.yaml` 2.
`kubectl describe pod` on the created `istio-policy` pod.
1. install istio 2. setup grafana; for my case i do not use local storage, but remote storage 3. visit the galley dashboard
have a `resolution: none` with a non-empty `addresses:` section.
run command: istioctl authn tls-check <pod> <service>
- create a new cluster.
- bind account to `cluster-admin` role - `cd test/integration && go test ./... -istio.test.env kube`
- install istio 1.1.1 on gke - create a deployment with a service, using a named port of `grpc` to route back to the pods - configure sidecar injection such that the sidecar is only injected via pod annotation - send grpc traffic from another pod in the same namespace to the service's address
* set up istio locally: phofurl * set up https, sample services and ingress: phofurl * kubectl apply -f phofurl * get a valid jwt token.
i created a little app to get a jwt token for a user.
i 've checked that the token is valid via phofurl i don 't think that the token and and the openid provider is the issue since i get same error when invoking url with token.
if necessary i can provide more information how receive token.
unable to create the following service entry which worked in istio 1.0.6 phofcode
1. given two namespaces client-ns-1 and client-ns-2, both running some client deployment that provides curl (e.g.
also given there 's an external application accessible at some fqdn or ip address initially neither clients can access kubeman.com.
2. create a serviceentry in client-ns-1 to enable access to the external service phofcode now verify that client-ns-1 can access the external service.
note that this client-1 created this serviceentry for its own local namespace.
other possible variations in this step: - use static resolution with ip address instead of dns - export serviceentry to all namespaces instead of client-ns-1 only 3. now client-2 creates a serviceentry to route domain kubeman.com somewhere else, basically hijacking the domain phofcode now the requests from any namespace kubeman.com are randomly routed either kubeman.com or google.com 4. alternately, traffic can be hijacked route an internal kubernetes service phofcode 5. additionally, traffic can be disrupted for an internal service if a rogue gets created hijacking internal service fqdn.
in this case traffic doesn 't get routed new destination, but seems be simply disrupted with envoy returning 503 "uh".
to achieve this, create a using internal fqdn as "host" and attempt send traffic elsewhere: phofcode overall, what i found strange in my testing is that behavior is not consistent.
it seems like case of eventual consistency or last-write-wins, some other logic is in play.
sometimes creation of conflicting hijacks completely, whereas other times it only hijacks it randomly (e.g.
50-50 split if no weights are specified serviceentry).
and then at times behavior is it doesn 't hijack for existing pods, but does hijack it if either pod rescheduled if original (first) redeployed for some reason (e.g.
upon redeployment, suddenly 2nd takes over and hijacks traffic.
enable mtls using meshpolicy (as requested in pre conditions), and follow until this: image phofimage rating will be unavailable.
install istio with mtls enabled.
search prometheus for a any citadel metric, e.g.
just follow the tutorial, while enabling the global mtls: phofcode
install a istio using helm with profile demo without auth (mtls)
create a test application with this deployment: phofcode then create an envoyfilter with this manifest: phofcode when i now send a request to another service in the cluster from this deployment, i would expect to see the message "hello world" in the sidecar of testcurl.
but only when i remove the workloadselector this happens.
edit rule in namespace istio-system phofcode
i cleanup istio 1.0.6 and setup istio version 1.1.1, deploy a pod in injected sidecar namespace and using ssh to this pod and call wget phofurl
use kops to create k8s clusters with kubernetes version set as 1.11.8. kops version version 1.11.0 istioctl version user:"root", buildstatus:"clean",
assuming a standard installation according to the cluster-aware guide phofhyperlink .
create a `gateway` definition with the following spec properties: phofcode and a `virtualservice` definition with the following spec, to configure this gateway to forward traffic to the remote: phofcode with these two resources in place, attempt send traffic through ingress gateway indicating a hostname consistent with whatever domain is indicated in gateway configuration.
observe that logs of ingress gateway for issued request show upstream as an ip associated with pod in remote cluster, rather than remote cluster ingress.
configure mixer to run with the above authorization template configuration
1. launch an ubuntu 18.04 image on kubernetes: phofcode
install istio using helm: * `helm install istio-init` * `helm install istio` with the following custom values: phofcode
1. download the package for 1.10 1. install 1.1.0 via: helm upgrade --install istio-init --namespace istio-system 1. download the package for 1.1.1 1. repeat the same command to try and upgrade: helm upgrade --install istio-init --namespace istio-system error is returned
new installation of istio 1.1 with the `helm template` method on gke 1.10 (can we get a version compatibility table).
then do a `kubectl logs -n namespace | grep -v deprecated` the `grep` there is necessary because there is a lot of log spam (#12642).
i 'm using the bookinfo example so i assume this is true for any situation.
everything else looks good on the board.
1. create fresh aws eks cluster v11.5 2. follow istio installation steps, deploy "default" profile 3. follow booking application steps, deploy it
create a deployment with a pod that has no readinessprobe with mtls probe rewrite enabled
create a pod with an https probe and probe rewrite enabled
follow the tutorial on aws eks
navigate to any documentation web page in the istio.io and hover over the "copy to clipboard" icon
documented in the gist: phofurl * install istio 1.1.1 using exactly the commands in `install-istio.md` * the `workloads.yaml` file has the basic deployment/ service/ sidecar * while tailing the `istio-proxy` container logs in one window, execute `create-services.sh` command in another.
you will see container logs flaking out at some point after 600 services have been created.
create gke cluster with network policy enabled.
apply istio init 1.1.0 and istio 1.1.0 with `istio_cni.enabled=true` and apply istio cni restart pods in namespace with automatic injection enabled (default namespace in my case) pod traffic now fails
{{ minimal steps to reproduce the behavior }}
run the following phofcode you should see that traffic is working correctly -- reviews v1 is always loaded and if you drop the `istio_mutual` on any of the destinationrules it will fail because `strict` mode is set.
however grafana shows none of the traffic and kiali just shows first hop.
if you delete default `destinationrule`, traffic will show up.
that policy came from this page: phofurl
installed the istio-1.1 with a fresh install phofcode logs of ingress-gateway phofcode the yaml files for gateway and virtualservice phofcode phofcode
follow the steps on securing ingress gateway using sds task phofhyperlink .
in my case i completed up through "configure a tls ingress gateway for a single host."
the basic steps: 1. install istio 1.1 with default config as described here phofhyperlink 2. create and apply the new deployment for ingress as described in step 1 phofhyperlink 3. follow the configure a tls ingress gateway for a single host phofhyperlink , up until step 5, where the curl returns an error: phofcode even making normal http request with `curl -v -h "host: httpbin.example.com" does not work (empty response from server).
i am able to make http requests from within cluster to httpbin service.
i 've done some sanity checks provisioning cluster with istio 1.1 and _no_ sds and things work as expected for ingress.
install istio from the helm repo at istio.io/istio
{{ minimal steps to reproduce the behavior }}
run any workloads on the mesh.
view the mixer access logs.
have a grpc client and server running in kubernetes.
restart the server and see if the client can still access the server.
1- create two gateways: phofcode and phofcode 2- define a vs: phofcode check the envoy config on ingress gateway and notice routes http.80 and http.99.
install any istio build from the master branch after 03/15.
{{ minimal steps to reproduce the behavior }}
we have several developers in the team, all of us apparently have the same environment.
however, i 'm the only one who experiencing this weird issue.
steps: 1. have running kubernetes with istio running inside.
2. deploy two different pods.
poda exposed via kubernetes service (servicea).
poda accepts tcp connections (e.g.
everything deployed in same namespace "product".
3. from podb, open telnet to the servicea using its full dns name, e.g.
"telnet 3306" 4. with istio, podb fails communicate to servicea ("connection closed by foreign host").
without istio, everything works as expected (telnet actually returns result, both for redis and mysql) what i tried: - full reinstall (os, kubernetes, istio, pods...) - turning off firewall (ufw)
install first cluster: phofurl then, install bookinfo on it: phofurl
7. when setting connection logging `debug`, i see the following in my setup:
deploy the following modified productpage deployment (just a simple well-known starting point): phofcode then monitor `kubectl events` and see that each of the 3 pods regularly has `net/http: request canceled (client.timeout exceeded while awaiting headers)` messages.
1. configure `interceptionmode: none` in phofurl 1. observe that a sidecar injected pod has the `istio-init` initcontainer injected.
1. configure a `sidecar` with the configuration: phofcode 1. inspect the envoy 's configuration (i.e.
and notice that this particular listener has a `blackholecluster` filter in its chain.
after doing the above, remove the `port` configuration and notice that correct outbound listener is configured.
i am not sure of the exact steps to reproduce.
$ curl -l phofurl | istio_version=1.1.0 sh -
when testing the serviceentry with endpoints scenario, we ran through the egress gateway for http traffic phofhyperlink example.
well, this is not a bug but more a question/advice.
1. provision a single control plane multi-cluster mesh 2a.
run `istioctl proxy-status <remote proxy pod>.<namespace>` 2b.
run `istioctl proxy-config clusters <remote proxy pod>.<namespace>`
* follow phofurl to create certs * apply following yaml file phofcode * call foo service: `curl -v -hhost:foo.example.com --resolve --cacert phofurl - success * call bar service: `curl -v -hhost:bar.example.com --resolve --cacert phofurl - failed, reported error: > connected to bar.example.com port 443 (#0) > alpn, offering http/1.1 > cipher selection: > successfully set certificate verify locations: cafile: capath: none tlsv1.2 (out), tls header, certificate status (22): tlsv1.2 (out), tls handshake, client hello (1): openssl ssl_connect: ssl_error_syscall in connection to bar.example.com:443
1. check out the latest istio code base.
2. build and compile mixs 3. run mixs: server
define an out-of-process adapter like this: phofcode start mixer server.
for example, from a wrong address to a right address.
the handler still doesn 't works.
using the bookinfo app phofhyperlink but remove the `container port` in the `deployment`.
1. install istio multicluster on a cluster with m-tls disabled 2. deploy an app with liveness and readiness probes on the control plane cluster 3. deploy same app with liveness and readiness probes on the remote plane and watch it fail healthchecks example deployment below.
the container that the liveness/readiness probes check against is verified to work fine when the proxy sidecar is not injected.
set up the proxy with
- deploy istio using steps described below.
- label default namespace with - try deploying `bookinfo` sample
run `istioctl proxy-config clusters <pod>`
use self signed certificates for istio ingress gateway.
- deploy phofurl - create nodeport service for the deployment - create istio gateway - create istio virtual service pointing to application service trying to connect to application
try running the `e2e_pilot` test with your own gke cluster, be sure to set the `--cluster_wide` flag.
create a sidecar resource using the rc3 branch with the configuration above.
sometimes update of the deployment as described above.
measure the time to start a pod with sidecar, from the deployment command until it responds a request.
- clustered oracle db with scan (single client access name) - application to try to connect through scan-name to db
1. create _service 001_ in the indicated namespace from the above examples.
2. verify that phofurl works.
3. create _service 002_ in the indicated namespace from the above examples.
4. test endpoint at phofurl and review results.
1) spin up a kubernetes v1.10.6 cluster 1) deploy the 1.1 rc 2 helm chart 1) create an `a` record set with > 30 entries 1) deploy a pod with `host` installed (i used this manifest phofhyperlink ) use `host -v` to resolve your record set
install k8s using kubespray and change the default cluster domain install metallb install istio-1.0.6 with helm using the default settings
config gateways and related virtualservices in both clusters of a single control plane topology.
set up a cluster with mongo or redis.
have this service send requests periodically to database.
once the in the middle of one of the requests, update anything that pertains to the proxy (service port, virtualservice etc).
we are using go so error we are seeing looks something like this: phofcode or (for redis ping) phofcode
`helm install --set gateways.enabled=false --name istio --namespace istio-system`
running the istio ansible playbook on centos 7.6. ansible & tower versions both above 2.4. python 3. valid kubernetes version.
1. enable mtls in the cluster 2. create a namespace with a tcp service deployed in it.
3. create a destinationrule to configure subsets and client mtls phofcode 4. create a gateway configuration: phofcode 5. create virtualservice phofcode 6. with the above config, the ingress gateway doesn 't route the tcp traffic.
7. now replace virtualservice with this one phofcode 8. with above setup, tcp ingress starts working.
9. alternately, disable mtls in step 7 instead of changing virtualservice, and ingress starts working too.
{{ phofurl in the section "deploy bookinfo example across clusters", get the istio-ingressgateway services external ip. }}
1. git clone from git hub 2. git checkout 1.0.6 3. make build 4.
"istioctl version" to check the version
{{ phofurl creat control plane for the master cluster in the section "install the istio control plane". }}
- install istio, enable sidecar auto inject.
- remove `meshpolicy default` to exclude mtls effect phofcode - apply redis yaml file phofhyperlink phofcode - exec into the redis-cli container and try to connect to server phofcode this will succeed.
because we annotate the `redis-cli-test` pod to disable sidecar injection (look at the github gist yaml file) ` sidecar.istio.io/inject: "false"`.
download the yaml file, remove annotation, redeploy.
repeat same command login into redis-cli-test container.
`ping` command line will fail.
{{ phofurl create clusters in the section "create the gke clusters". }}
{{ minimal steps to reproduce the behavior }}
deploy an app simultaneously in two clusters, visit the k8s service of the app from an injected pod.
{{ phofurl create a cluster in the section "create the gke clusters". }}
run a workload with 1.1 builds before 02/14 and latest ones and compare the results (throughput and latency)
{{ follow the instructions in phofurl run curl after the section "send remote cluster traffic using egress gateway". }}
follow instructions and the following issues are found... - install instructions vary from the 'helm template' install docs.
would be better just to reference them - commands to 'setup dns' do not work.
they presume the existence of 'istiocoredns' service which does not exist if the install instructions are followed.
this is true for both kubedns and coredns variations the page should probably also come with a warning about stability of this feature, which is alpha iirc.
{{ download 1.1 rc phofcode then follow installation instruction with helm and tiller phofhyperlink }}
deploy phofurl in namespace with sidecar injection enabled.
install istio 1.1.0-rc.0 and apply this configuration: phofcode the service to expose is httpbin and resides in the namespace `foo` available as the service exposes the application at port 8080. a virtualservice for the host name `test.server` should route to this service.
after applying this configuration check the config of ingress gateway.
the route properly routes to correct cluster: phofcode however, this cluster is never pushed to ingress gateway: phofcode hence i cannot call service via ingress gateway and get a 503 (which means it hits virtualservice because it doesn 't get a 404): phofcode the configuration above has a consumer deployment that has a sidecar.
as virtualservice is also targeted mesh gateway, i can see there that cluster is properly pushed sidecar: here i also don 't see that strange looking cluster name with `_.`.
additionally i can call virtualservice successfully from consumer deployment:
the basic steps to replicate are: 1. install latest istio, and the latest bookinfo demo, and the latest kiali 2. install kiali 's traffic generator test pod with a sidecar, and have it push requests to bookinfo through the istio-ingressgateway (via the url phofurl you do this by executing following two commands to create configmap then deployment: phofcode
use the telemetry example phofhyperlink and replace phofcode by phofcode or by phofcode after this change, the query in prometheus phofhyperlink doesn 't return any new results.
when installating the all the crds and the bookinfo app yaml file the target configuration is not enabled where all sidecar proxies communicate with ingress gateway to forward traffic/requests
just follow the " egress-https phofhyperlink " part docs for istio 1.0.
- follow platform-setup/gke/ phofhyperlink - follow helm-install phofhyperlink - run `kubectl get deployment -n istio-system`
follow phofurl choosing option 1, till "verify that all 58 istio crds were committed to the kubernetes api-server using the following command:".
1. create an aws kubernetes cluster with 6 m4.xlarge's (3 reserved for kubernetes) 2. install istio 1.1.0-rc0 from nightly: (see phofurl 3. install the default book demo 4. once completely launched run kubectl describe nodes, notice how each node is now overcommitted by 370%.
1. create a k8s cluster and install istio 2. deploy a flask app to an istio-enabled namespace 3. force delete the pod and the new one will be in `crashloopbackoff` status for the first seconds
phofcode * collect some traffic e.g using httpbin example phofhyperlink phofcode phofcode
follow the example until step 2.3 phofhyperlink .
deploy istio using steps described in
gke with istio and stackdriver `tracespan` configured (based on stackdriver.yaml phofhyperlink ) and underlying receiver using opencensus b3 propagation.
follow the example description until 2.2 phofhyperlink .
set local_gw_addr to an arbitrary hostname and execute step 2.2 phofhyperlink (helm template ..).
follow the tutorial here: phofurl
install istio using step 2 from here: phofurl }}
- deploy cluster - install istio - install nginx-ingress-controller
- deploy istio - deploy any operator which has a complex workflow with istio-sidecar (eg: phofurl - make operator-k8s-deployment would do the work) - the mixer will block connections on the mesh and answers with 500
no special steps to reproduce the bug, just run the application with istio and check the application log.
install 1.0.6 install bookinfo upgrade to 1.1rc0
follow 1.0.6 installation steps install 1.0.6 bookinfo sample follow upgrade instruction (non-tiller) for auth-enabled
rate limit task w/ tracing enabled + fortio to generate traffic.
{{ minimal steps to reproduce the behavior }}
{{ compare productpage.py source to doc }}
1. git clone the istio-1.0.5 1. in namespace `data-devops`, setup a tls secret name `tvlk-data-tls-cert` (to be used by the custom ingress gateway controller in `data-devops` namespace) 1. create this additional `gateway-values.yaml` which defines the custom gateway controller in `data-devops` namespace phofcode 1. install the istio-1.0.5 version by using this command: phofcode - `istio_repo_dir` = location of istio-1.0.5 repository - `tiller_namespace` = currently i chose `kube-system` since this is for cluster admin stuff.
then i got error > error: upgrade failed: no serviceaccount with name found but when i change to `istio-system`, it works.
currently we need to have this ingress gateway controller in different namespace since i want to provision that to other team (e.g: for cost attribution per-namespace).
follow steps mentioned here phofhyperlink .
install istio 1.1.0-snapshot.6 and install the following deployment: phofcode now the memory consumption of the istio-proxy shows this: phofcode now create a file with this serviceentry: phofcode (i admit that this might not be the smallest serviceentry, but i experience same behavior at a smaller scale with smaller, more conventional, serviceentries.)
now repeatedly install and remove this serviceentry.
after some installs memory consumption of istio-proxy jumps by ~25mb and this is not returned anymore.
i don 't send any requests, so proxy basically has nothing to do from my perspective.
while removing and adding serviceentry i see these memory consumptions: phofcode even after ~20 minutes memory consumption is same.
#install go and helm mkdir -p $gopath/src/istio.io && cd $gopath/src/istio.io git clone phofurl cd istio git checkout 1.0.5 cd make build make test
run script above (replace with your project though).
it also failed on a cluster i had previously installed istio on, i repeated on a fresh cluster to ensure it wasn 't some weird interaction
{{ follow steps kubectl apply -f }}
helm install istio kubectl delete -n istio-system $(kubectl get pod -n istio-system -l app=prometheus --field-selector status.phase=running -o name) # this simulates pod rescheduling
{{ follow "before you begin" steps kubectl apply -f }}
{{ follow "before you begin" steps kubectl apply -f }}
deploy a virtualservice that routes based on http header.
phofcode send a request containing multiple instances of `myheadername` with different values.
notice that istio acts as if it only observes the first instance of `myheadername`
{{ follow "before you begin" steps }}
follow these phofhyperlink steps to deploy fortio client.
1) install istio with version: 1.0.3 2) upgrade to 1.1.0-snapshot6 phofcode 3) check istio-stystem pods: phofcode 4) check deployment for istio-policy: phofcode 5) check version for policy pods (the following pod has version 1.0.3) phofcode (the following pod has version 1.1.0-snapshot5) 6) now delete the pod (having version 1.0.3), a new pod will be allocated and up, but the still is 1.0.3.
7) if delete the (having 1.1.0-snapshot.5), a new will be allocated and up, and the is 1.1.0-snapshot.5
helm install istio --set prometheus.enabled=false
create a helm values yaml file with following configurations: phofcode and then run `helm template --name istio --namespace istio-system > $home/istio.yaml` according to istio setup documentation.
in the generated `istio.yaml` file, you can see the annotation value `bar` is not double quoted.
and this will result some annotations not working properly.
{{ follow "before you begin" steps }}
download: phofurl extract tar files.
`security` folder doesn 't exist.
create a service entry with the following content phofcode
go to kiali's /api/status endpoint and notice a failure.
you should see some json with status information, including the istio version.
this also causes problems in the kiali about box - it actually screws up all the data in the about box, so now there won't be a way to know about environment kiali is deployed in (kiali's own server-side version string will not show up, as well as versions of things like k8s and istio, etc).
install using helm chart for the 1.1 sn6 release from github
{{ follow "end user authentication" steps }}
{{ follow "request from istio services to kubernetes api server" steps }}
{{ follow "before you begin" steps }}
take an empty kubernetes cluster with istio 1.1.0-snapshot.6.
now try same commands again: i expected workloadselector still apply restriction on egress traffic for testcurl pod, but as result of curl shows, it looks like traffic is not restricted anymore.
{{ follow "before you begin" steps at phofurl }}
{{ follow "before you begin" steps }}
install application with tls mode simple phofurl 1 and with passthrough phofurl 1 tried to adjust gateways to make port name unique like the following gateway for tls mode simple phofcode and for passtrough phofcode tried to discuss it on phofurl any advises how to address the issue would be appreciated
1. download istio 1.1 snapshot phofcode 2. install all the istios custom resource definitions or crds for short via kubectl apply, and wait a few seconds for the crds to be committed in the kube api-server: `$ for i in do kubectl apply -f $i; done` 3. render istios core components to a kubernetes manifest called istio-minimal.yaml: phofcode
create 20 deployment configurations that will spawn 20 pods... usually at least one of them gets stuck.
install istio with tracing enabled.
then apply a configuration that requires call of the istio-policy mixer: phofcode execute a request and check that it is rejected by the policy.
check jaeger for the trace.
it should not contain any hint about the mixer call.
run 20 pods, 1 rotation per minute.
use citadel to provision certs.
`helm template --name istio --namespace istio-system --set grafana.enabled=true --set --set --set tracing.enabled=true > istio.yaml` `kubectl apply -f istio.yaml`
not sure if it works with other external resources, but setup 2 cloudsql instances on private networks.
then create 2 charts with deployments and serviceentries.
i can try things or share code if need.
also need istio installed with egress
is this phofcode the service entry is this phofcode mysql located in localhost , i installed local database
- install istio in the default istio-system namespace - install your application in another namespace let 's say "prod" - visit istio service dashboard in grafana - select your service check for missing metrics (empty client and service workloads).
only client request volume, rate and duration are working in this case.
after the istio installation, the sds agent for ingress gateway needs to be enabled in the configuration.
then use above yaml to reproduce the bug.
create 2 tests like this.
1. checkout and build istio/release-1.1 branch commit 2. enable locality aware routing (add the following to mesh config): phofcode 3. deploy sleep service with side car injection 4. deploy the following service entry: phofcode at this point the envoy configuration generated for client's sidecar doesn't have locality failover config for _server.mesh.com_ cluster.
deploy 1.1 and attempt to create an instance that uses these attributes, for example: phofcode
with the _istio-sidecar-injector_ configmap using the value `privilege: false` being used in the initcontainer `securitycontext, enable automatic injection in default namespace by labeling with istio-injection=enabled, as follows, `kubectl label namespace default istio-injection=enabled` create a psp, clusterrole and clusterrolebinding as follows in the default namespace, phofcode , and apply.
now deploy to default namespace.
use kube-inject in any way
1. download & extract istio snapshot 1.1.0-snapshot.5 2. run `helm repo add istio.io " phofurl 3. navigate to 4. run `helm dep update .
` 5. run `helm install .
--name istio --namespace istio-system --set grafana.enabled=true --set tracing.enabled=true --set kiali.enabled=true --set istio_cni.enabled=true` | alternatively, use helm template and kubectl apply - same result.
certain crds are created, others are not.
{{ minimal steps to reproduce the behavior }}
{{ minimal steps to reproduce the behavior }}
deploy to 2x virtual services with path based routing
measure the startup time of an injected pod with 1.1 build and compare with 1.0 build.
{{ minimal steps to reproduce the behavior }}
configuring two services like this is what caused the issue: phofcode i will try to run it on minikube later and see if i can get a working example.
apply the virtual service rules and you see envoy routes not being updated.
deploy istio with kiali enabled
overload the cluster so that pilot gets evicted, then run istioctl proxy-status.
running load of 140 ops for 30min.
during that load it is running between 2x to 9x the requested cpu.
{{ minimal steps to reproduce the behavior }}
install istio 1.0.4 using helm and tiller.
and then run `helm upgrade istio --namespace istio-system`
1. change configmap of "istio" with above entry.
3. create a new istio injected pod, check istio-proxy log.
(no access log flowing while firing request) 4. the new injected istio-proxy container has following config: phofcode note; new line " " is missing in the runtime config dump of proxy.
and based on phofurl seems for text formatted log, it needs " " in format string.
so i guess istio config lost it somewhere between pilot and proxy.
try to install istio 1.0.5 using helm chart at commit.
add serviceannotations: "internal" to the "istio-ingressgateway:" in the values file
phofcode this will result in a certmanager crd pod being created in the default namespace with the proxy injected (!)
and either readiness failing, or the sideecar call failing, depending on how the test case was executed.
submit a pr like :
a correct implementation is seen in the phofhyperlink where it starts with an explicitly specified zipkin endpoint, falls back to a namespace-qualified endpoint, and finally ends with a default endpoint.
- phofhyperlink uses only the fixed default endpoint.
- phofhyperlink uses the specific endpoint or the default, but not namespace-qualified endpoint.
- phofhyperlink uses specific endpoint and release namespace qualified endpoint, but no default and ignores value for `global.istionamespace`.
set up the described `destinationrule` above and run
render the helm chart and try to deploy it : `helm template --name istio --namespace istio-system --set grafana.enabled=true --set grafana.persist=true`
using egressgateway with mtls configured within mesh, and mtls origination occuring at egressgateway for talking to upstream endpoint.
install istio using helm into a kubernetes cluster with a network model that does not forward service ports that are not declared in the service resource definition.
make e2e-simple-run on bare metal apply the istio-auth.yaml manifest generated in `tmp` dir manually.
this happens often in the gate - its pretty easy to fix there - but not clear on how to fix the generated manifests to solve this race problem.
{{ minimal steps to reproduce the behavior }}
configure a service with authn policy as phofcode
edit the bookinfo virtualservice as follows: phofcode attempt to access the productpage through the gateway url.
pass default envoy boostrap template as an argument of --templatefile to see that substitution of many parameters will not happen and resulting envoy config will be stored under different name than config generated from the default template vs
run istio sidecar and regular enovy within one pod
0. setup a healthy environment with pilot and envoy communicating with each other.
envoy has configuration populated from pilot.
2. push a new route to pilot.
3. observe envoy doesn't populate the route configuration with the new route, but clusters and endpoints have been populated.
after some investigation, it appears that this is the commit phofhyperlink that breaks this functionality.
when running through the above steps with commit just before, envoy does populate route configuration after pilot restarts.
it seems to me that this code phofhyperlink is causing issue.
what appears to be happening is will send a nonce that pilot doesn't know about, because it has been restarted.
can't say what desired behavior should be though.
1. install istio 1.1-snapshot.4 2. install bookinfo demo 3.
`kubectl create -f` the yaml file i show above.
* set up a kube cluster with istio 1.0.5 installed * run `istioctl proxy-status` phofcode
install istio based on release-1.1 at phofurl follow the [instruction] ( phofurl step 5 of [this section] ( phofurl returns the following failure phofcode
create a service and apply an envoyfilter to it: phofcode when sending the requests to this service i see these messages in the log: phofcode i tried the same with other functions like `evp_sha256` etc that should be available.
i even built the istio-proxy myself and checked that symbols appear in `nm envoy`.
configuring this filter on a recent envoy does not fail.
i have deployed 2 applications, an oauth2 server which generates jwt tokens, and also deployed `httpbin` application for testing purposes.
then, applied this configuration: phofcode we make a request, and we can see in the log: phofcode this is the request: phofcode for this example i 'm using the `/headers` endpoint of `httpbin` ( phofurl which prints all the headers that it has received.
as you can see is no expected header in response.
i 've tried with my own jwt and jwks, but also with sample jwks and jwt ` phofurl result is same.
1. install bookinfo demo 2. add the virtual service/destination rule that turns on mirroring using this yaml phofhyperlink .
3. send one request from your browser to the bookinfo 's productpage web page.
(the result of this is that the virtual service sends the "normal" request to reviews-v1 but mirrors traffic to reviews-v2).
4. look in prometheus for all timeseries metrics dealing with mirrored traffic going to reviews-v2.
you do this using query notice there is a missing reporter="source" timeseries - there is only a reporter="destination" timeseries.
you will see something like this: > > > >
phofurl istio 1.1.0-snapshot.3 from phofurl sidecar: phofurl
kubectl apply the above yaml.
set `autoscaleenabled: true` and when hpa kicks in and changes the replicas, this can cause confusion for managed environments as the deployment definition is now different from what was initially specified.
reproducible in a customer 's environment.
setup a structure like the following namespace a: destrulea1(host=*, tls:off) namespace b: virtualservice(blah, ... at this point destrulea1 will be used, now create ... namespace c: destrulec1(host=*.net, tls:on) ... and the tls behavior of the virtualservice defined in namespace b changes to that defined by destrulec1 which is problematic.
in the proposed solution destrulea1 would remain in effect
1. retrieve this example yaml phofhyperlink from the first example in these kubernetes docs phofhyperlink .
2. execute `kubectl create -f job.yaml` without istio, this runs in a few seconds and the job is marked successful.
but with istio, it is never marked successful.
here is one such example after 16 minutes, even though the `pi` container completed successfully.
phofcode i believe the cause is that `istio-proxy` container still running within pod.
strictly speaking this example doesn 't need `istio-proxy`, but other examples that i can 't share do need it.
deploy a simple webserver and expose it using a service.
create a simple gateway and virtualservice to access it on the ingress nodeport.
`apiversion: kind: gateway metadata: name: ngin-gateway spec: selector: istio: ingressgateway # use istio default controller servers: - port: number: 80 name: http protocol: http hosts: - "*" --- apiversion: kind: virtualservice metadata: name: nginvirtservice spec: hosts: - "*" gateways: - ngin-gateway http: match: uri: exact: / uri: exact: /hello9 uri: exact: /status route: destination: host: ngin port: number: 80`
see description, but roughly 1. start a gke cluster with calico + cluster autoscaling 2. install istio with istio-cni 3. trigger cluster scaling by creating a deployment (or otherwise) that doesn't fit in the current cluster size.
4. observe that either 1/ or 2/ above occurs.
use tool like kustomize to verify the chart output yaml.
deploy the istio gateway and expose it as a nodeport service.
scale up the gateway multiple times while sending some traffic to the gateway, you should be able to reproduce the bug.
i added `readinessprobe` manually and it reduced `connectionrefuse` errors but sometimes as above error log showed, envoy proxy fails to start and still result `connectionrefuse`.
compare telemetry cpu usage under load of master builds before and after 01/09.
install istio 1.1. not much more that i have done.
{{ minimal steps to reproduce the behavior }}
follow guide: phofurl (note coredns configuration is needed - which is not yet documented).
serviceentry.yaml phofcode pod.yaml phofcode check the istio-proxy logs.
calls to metadata server appear to work correctly, but 404 response.
it looks like "numeric-project-id" should be my actual project id, but something is failing in the middle.
install istio multicluster, with routes on both clusters so that pods from each cluster can ping each other.
deploy bookinfo application, remove reviews-v3 from the control-plane cluster and install it on the remote cluster.
drive traffic through a ingress gateway cause scale out.
stop and restart traffic and verify that not all instances are active.
apply the following manifest to modify the envoy config used by the ingress gateway: phofcode use the following to see listeners: phofcode check proxy-status and see its output: phofcode the pilot 's `discovery` container doesn 't log out any warnings.
observe that requests to your cluster hang and report a `stream timeout` after a while.
configure a virtualservice that routes a request from the mesh gateway to the egress gateway and from there somewhere else, e.g.
register a deployment that gets the istio-proxy sidecar injected and that is able to send curl requests.
create the rule as described.
then try to send a request to external provider.
{{ minimal steps to reproduce the behavior }}
+ install istio v1.0.5 + the pod restart always
use cognitoidentityprovider from the ruby aws-sdk to connect to cognito.
add egress rule: phofcode exec into container and run `pip install boto3`.
`kubectl apply` the following yaml to a namespace with istio-proxy sidecars enabled.
this will create a create natcat server listening on port 4444 and k8s service for it.
phofcode use the following to watch the logs of netcat: phofcode next run another alpine linux container in the same namespace that will use netcat as a client to server running: phofcode the client now has an open connection, but if you look at logs of server it is unaware of this connection until you send first message.
start client again but this time send following message and watch logs of server phofcode the should now see connection and log message that was sent: if you attempt exact same test in a namespace with istio sidecar disabled netcat will see connection when client establishes connection right away.
this means applications (like nats phofhyperlink ) that rely on tcp to connect server, but have send first message, will not work.
1. building lots of service in your istio cluster 2. try to make pushall fail , in our production environment there has an config update delay problem in sidecar which cause pilot pushall fail 3. check the pilot log , you can find some log like "cds: send failure " or "lds: send failure, closing grpc" 4. use pprof to check the goroutine , you can find goroutine is increase with lots of goroutine block at phofcode here is some of goroutine file [detail:] phofcode
this bug can not be reproduced each time, it may occurs when the hosting machine was running iptables same time as the container
create an external adapter according to phofurl add one property `refreshtoken` to the response template and make the adapter not set it.
configure a rule that invokes the adapter and applies the output field on response template: phofcode (setting value to `a1.output.refreshtoken | ""` results in an empty header in response which i also don 't want.
### ----gateway apiversion: kind: gateway metadata: name: designer-gateway spec: selector: istio: ingressgateway # use istio default controller servers: - port: number: 80 name: http protocol: http hosts: - ### -----virtualservice apiversion: kind: virtualservice metadata: name: designer spec: hosts: - gateways: - designer-gateway http: match: uri: exact: / route: destination: host: port: number: 6888
configure k8s cluster and istio using below links.
kubectl apply -f phofurl kubectl get deployment books --export=true -o yaml > books.yaml istioctl kube-inject -f books.yaml | kubectl apply -f - kubectl get pod -w if i replace the image with a spring boot app updating the health check to /actuator/health and the port to 8080) then injection works.
the error in the logs is [main] info - established active environments [cloud, k8s] [main] error - error starting micronaut server: unable to start micronaut server on port: 8082 unable to start micronaut server on port: 8082 at at at at caused by: java.net.bindexception: address already in use t... 9 common frames omitted
install istio: phofcode delete istio: `helm del --purge istio` install again
use the following config file for the service to return an error: phofcode if gateway is ordered as the first item in this file then the service returns expected response.
create an application that tries to talk to itself using `::1` on a machine/container where ipv6 localhost address is enabled.
when using istio the connection will timeout
do the minimal installation of istio following official guide.
~~~ helm template --name istio --namespace istio-system --set security.enabled=true --set ingress.enabled=true --set --set galley.enabled=false mixer.enabled=false prometheus.enabled=false pilot.sidecar=flase > $home/istio-minimal.yaml ~~~ before doing the installation, modify the mtls setting from default of true to false.
~~~ cat # this is used to generate istio-auth.yaml for automated ci/cd test, using v1/alpha1 # or v2/alpha3 with 'gradual migration ' (using env variable at inject time).
will result in delays starting the pods while secrets are # propagated, not recommended for tests.
true mtls: default setting for service-to-service mtls.
can be set explicitly using destination rules or service annotations.
enabled: false ## imagepullsecrets for all serviceaccount.
must be set any clustser configured with privte docker registry.
imagepullsecrets: - name: "private-registry-key" default is 10s second refreshinterval: 1s ~~~
- create policy and destination rule.
~~~ cat <<eof | kubectl apply -f - apiversion: kind: "policy" metadata: name: "default" namespace: "helloworld" spec: peers: - mtls: {} eof cat <<eof | kubectl delete -f - apiversion: kind: "destinationrule" metadata: name: "helloworld-tls" namespace: "curlworld" spec: host: trafficpolicy: tls: mode: istio_mutual eof ~~~ create new namespace `curlworld1`, deploy new pod in this ns with sidecar, it 's able to reach helloworld service running in helloworld namespace.
as per destination rule, ideally on services from `curlworld` should be able to contact helloworld service.
{{ minimal steps to reproduce the behavior }} use the following virtualservice and access bookinfo productpage from chrome apiversion: kind: virtualservice metadata: name: reviews spec: hosts: - reviews http: - match: - headers: user-agent: regex: ".
* " route: - destination: host: reviews subset: v3 route: destination: host: reviews subset: v2
config "tls origination with the egress gateway" by phofurl run curl in pod frequently
{{ minimal steps to reproduce the behavior }} phofcode phofcode
i am using vegeta as load testing tool: `echo 'get phofurl | vegeta attack -rate 500 -duration 10s | tee results.bin | vegeta report`.
this is just a simple "hello world" route.
deploy a is4 demo to a pod (i could give you my container from docker hub, but you 'd need my certificate) use my istio-gateway & virtual service
create 1 test pod in namespace "a" with sidecar injection turned on and another one with injection turned off.
create a database service in namespace "b" and try connecting via psql or pg_isready.
this is a very specific setup and we currently have no isolated reproduction rule, yet.
we 're working on it.
{{ minimal steps to reproduce the behavior }} configuration is invalid: tcp route must have exactly one destination
phofcode nothing happened, i can see other versions of reviews with black stars and red stars.
1. install istio 2. install dex and set key rotation period to for example to 10 minutes (to speed up problem reproduction) 3. secure sample service with enduser policy pointing to dex 4. fetch a token after key rotation 5. make a request with a new token to the service in my case i use dex as an idp.
to eliminate the problem in dex itself, i have verified that new keys are available under public kyes endpoint.
enable mtls, send custom metrics from a pod and check /metrics endpoint in prometheus to see the error.
{{ minimal steps to reproduce the behavior }}
1deploy the kubernetes v1.7.10 cluster 2deploy the istion 1.0.4 3deploy the bookinfo examples 4watch the metrics of mixer:42422/metrics
deployment like below can reproduce the bug apiversion: extensions/v1beta1 kind: deployment metadata: name: hello-v1 spec: replicas: 1 template: metadata: labels: app: hello hello/v1: hello-v1 version: v1
1) install latest version of docker for windows 2) download istio and then install istio-demo-auth.yaml using kubectl app -f
- setup a deployment that exposes prometheus metrics on a port x that is * not * declared as `containerport`, and without ssl.
- setup annotations `prometheus.io/scrape: "true"` and `prometheus.io/port: "x"` on pod/template spec - deploy with istio sidecar - check `$prom_url/targets` => pod appears under job and fails to provide metrics
run `ansible-playbook main.yml` on a machine with closed port 22
we can build the latest master through `make docker.proxy_debug` and use the docker image as sidecar proxy, consul as discovery, it will report: phofcode proxy cannot communicate to pilot because the default address `istio-pilot:15007` is used as `grpc` address
{{ minimal steps to reproduce the behavior }}
{{ minimal steps to reproduce the behavior }}
1>install helm in a namespace tiller-system 2>follow phofurl to install istio this is how my override file looks like ` # # override gateways configuration # gateways: istio-ingressgateway: #todo change source cidr to specific serviceannotations: 0.0.0.0/0} telemetry-gateway: grafanaenabled: true prometheusenabled: true global: true mtls: # default setting for service-to-service mtls.
can be set explicitly using destination rules or service annotations.
enabled: true prometheus: enabled: pilot: tracesampling: 100.0 grafana: enabled: tracing: enabled: servicegraph: galley: ` this is the command i run helm install --name istio -f --namespace istio-system --tls --tiller-namespace tiller-system
{{ minimal steps to reproduce the behavior }} 1kubectl apply -f 2kubectl apply -f 3refresh the page( phofurl
i 'm using bookinfo for test.
below is my steps: 1. add forward route to details service phofcode ` 2. add fault abort rule to reviews phofcode ` 3. send a request from productpage service 3.1 curl phofurl // return 500 as expected 3.2 curl phofurl // return bookreviews info, not expected 500 i hope 3.2 will return 500 error too.
or how should i set to achieve the purpose?
1. set podsecuritycontext phofhyperlink with `runasuser` different than root.
1. try the sidecar auto-injection.
the auto-injected init-container fails to start with error: phofcode even if `privileged=true` is set at container level securitycontext, the issue is reproducible.
$ helm install --name istio --namespace istio-system --set tracing.enabled=true --set tracing.provider=zipkin error: found in requirements.yaml, but missing in charts/ directory: sidecarinjectorwebhook, security, ingress, gateways, mixer, nodeagent, pilot, grafana, prometheus, servicegraph, tracing, galley, kiali, istiocoredns, certmanager, istio-cni
as per this phofurl remote istio-sidecar-injector on second cluster never comes up
image phofimage image phofimage image phofimage `kubectl describe pod -n web` phofcode
i don't have alot of details other than @jmazzitelli has taken the action of implementing https for kiali.
jaeger, grafana, and promethus remain.
replace cert in ingress-gateway, cert is not used.
- pilot with pilot_direct_eds enabled - have istio enabled pod - have another service w/ a matching virtualservice: phofcode - `istioctl proxy-status <pod>` incorrectly shows diffs possibly related?
{{ minimal steps to reproduce the behavior }}
install istio 1.0.2 via `kubectl apply` upgrade to istio 1.0.4, by applying the crds first, followed by another `kubectl apply`.
sidecars were not updated at first.
we saw a number of issues happen after this, i.e.
a lot of services being reported as not ready and returning 503s.
we used `istioctl proxy-status` (before we saw that it causes deadlocks), which reported a sync-status of 98% for all pods still having the 1.0.2 sidcar.
after restarting pilot, sync got up to a 100% again.
we then redeployed all pods to upgrade the sidecar.
as this did still not resolve all problems we checked `curl phofurl which lead us to this issue.
not totally sure how to reproduce yet, i thought i would file now in case anyone experiences the same issue.
i 'd like to help in whatever way i can to try to reproduce it.
install istio with consul, register about 300 services in consul.
install helm chart, which will fail.
* introduce a failed istio install via helm (a cluster that 's a little too small will suffice) * delete installed chart with `helm delete --purge istio` * re-install chart * get error as above
run istio with consul registry integrated
use zuul gateway and spring cloud service in istio
just following the stock helm deployment would lead to this problem
{{ minimal steps to reproduce the behavior }}
{{ minimal steps to reproduce the behavior }}
install via helm install with options --set and check deployments in istio-system namespace.
there is no telemetry deployment.
`istioctl validate` fails this model: phofcode while this one succeed: phofcode
1. git checkout istio 1.0.3 2. change the base image from ubuntu to redhat for 3. make docker, the new image for proxyv2 is built successfully.
4. using helm package under to deploy it on minikube.
the pod cannot start due to "glibc_2.18" is required by envoy.
after searching in internet, found glibc_2.18 is not ready for rhel and centos.
5. git clone envoy 1.8.0, and build envoy using centos docker image 6. use envoy binary from step 5, and re-build the proxyv2 in step2.
7. helm upgrade the exsiting istio release, there is no glibc_2.18 error anymore, but met a new error "error initializing configuration didn 't find a registered implementation for name: \'mixer \'" the interesting thing that envoy binary(release) built by myself on step5, very large than what istio download from phofurl
this is hard to describe since it is a race, i do have a unit test as part of the pr which mimics the issue and fails with the current implementation.
apply the following yaml to an istio enabled cluster phofcode the problem persists in the following conditions too: 1. destinationrule is removed 2. postgres is external to the istio mesh 3. number of `pg_ping` pods is increased or decreased 4. postgres service is headless
follow multi-cluster gke guide for deploying bookinfo: phofurl
1. create a service account 2. create a servicerole with 'wildcard' get paths 3. create a servicerolebinding to assign that role to the service account
phofcode deploy mysql with the following config.
run any python service(port 8000) on vm within same network as kubernetes.
enable side car injection on namespace and try to access the service.
the gateway & virtualservice definitions are below.
i can confirm that the tls secrets/files are mounted and readable in the gateway pod.
the `cacertificates` is a sinlge bundled cert file in the same format as nginx requires.
phofcode phofcode when port forwarded into the gateway pod, i see tls handshake via openssl client.
no certs defined in `cacertificates` file is offered up.
it seems that parameter is ignored in tls `simple` mode phofcode
1. install default istio 1.0.3 2. install helloworld sample 3. verify curls to /helloworld are successful.
4. delete mixer policy pod and allow it to restart.
5. curl commands will inconsistently succeed or fail with error above.
{{ minimal steps to reproduce the behavior }}
istio deployment steps curl -l phofurl | sh - kubectl --kubeconfig=config apply -f helm template --name istio --namespace istio-system --set > istio.yaml kubectl --kubeconfig=config create namespace istio-system kubectl --kubeconfig=config apply -f istio.yaml
see below how i installed
i have a kubernetes 1.11.3 on azure (aks), and my pods are using azure service bus and a mongodb deployed in the same kubernetes.
i deployed a fresh new aks cluster, added istio 1.0.2 with helm chart : phofcode i deployed my pods in namespace "poc", everything was working fine.
but i noticed that the sidecars where not injected.
so added this label on my namespace : `kubectl label namespace poc istio-injection=enabled --overwrite` the sidecar has been injected, and my container crashes with a "ssl connect error" : phofcode see no special errors in the istio-proxy container of this pod : phofcode my guess is that the pod is trying to connetc to azure service bus with an azure activedirectory user, and istio blocks this.
tried adding serviceentry virtualservice phofcode also tried with "tcp" instead of "http" in serviceentry.
the ssl error is still there but changed > ssl peer certificate or ssh remote key was not ok in istio-proxy container logs deleted istio-egressgateway istio-ingressgateway deployments, but same first ssl error.
how could open https communication external services ?
start with a fresh install of istio no mtls, no auto sidecar injection], use the following service phofcode once created, you can use this client [here phofhyperlink or here phofhyperlink to connect to the lb ip:443 now, phofcode wait for the pod to restart, (now with sidecar), try the client, to see error
1. use the following single file along with the proto file to build a node server image phofurl 2. deploy it in k8s with a clusterip service 3. create a grpc gateway and virtual service 4. visit the service via the gateway address, it 's not working
`git checkout release-1.1` follow 1.1 docs helm install option 2 phofurl
1. on non-linux arch build system (ie.
osx), `goos=linux make build docker.all push` 1. on linux arch test setup, install istio (ie.
via istio-auth.yaml) and pod will go to error state with logs indicating exec format error: phofcode
deploy two apps in two different subsets.
setup routing weights, like `50/50` define `readinessprobe` with `initialdelayseconds: 60` in one application.
isto will route traffic to this unhealthy node with `no healthy upstreams` error.
also, istio routes traffic to `terminating` pods.
we only delete pods sometimes
check the names mismatch on this build
1. following this phofhyperlink to install tls service (nginx).
1. enable mtls permissive phofcode 1. remove or disable tls in destinationrule.
1. run the test curl command, which would fails (error 35).
install these resources in clustera: phofcode install these other resources on clusterb: phofcode run on clustera: `kubectl exec -n development <curl-deployment-pod> curl
provide an integration scenario with an error block.
follow the instructions in phofurl with istio v1.0.3.
perform `kubectl get -o=yaml --export <name>` on an istio custom resource
install istio 1.0.3 kubectl apply -f phofurl -n <namespace with istio-injection enabled>
restart all pods in k8s environment, this issue will disappear.
after several days, this issue will raise again
- enable namespace with istion injection as kubectl label namespace {mynamespace} istio-injection=enable --overwrite --kubeconfig=config - i am not able to get values from any external endpoints.
1. follow the mixer out of process adapter walkthrough steps 2. run my grpc adapter as follows: go run cmd/main.go 3. run the mixs process with the following command: server 3. run the client with following command: report --timestamp_attributes error on mixs is: * fieldencoder: timestamp - lookup failed: 'request.time ' * internal: no instances sent info transport: loopywriter.run returning.
connection error: desc = "transport is closing" error error creating instance: error= 'fieldencoder: timestamp - lookup failed: 'request.time ' ' error api report failed:2 errors occurred:
`kubectl delete pod and use `istioctl pc endpoint` on other pods.
those pods still shows the endpoint of deleted pod.
phofcode then configure loadbalancersourceranges in a custom `values.yaml` for ingressgateway, and install istio.
and repo for the files phofhyperlink ### 1. install istio and enable auto injection.
$ helm template --name istio --set --set tracing.enabled=true --set kiali.enabled=true --set grafana.enabled=true --namespace istio-system > istio.yaml $ kubectl label namespace default istio-injection=enabled ### 2. create a sample app: $ kubectl apply -f phofurl phofhyperlink $ kubectl apply -f phofurl phofhyperlink ### 3. add an http gateway and virtualservice to send requests to the
deploy 100 to 200 services with sidecars.
once all of them are running, have a script that deploy and delete continuously another service (control).
monitor the cpu usage on pilot and the long time it takes for the control service to deploy.
1. bring up a kubernetes cluster with istio 1.0.2 (without auth) installed by command `kubectl apply -f 2. apply this yaml file phofcode 3. run curl -l -k -h "hello-host: hello-0" phofurl
install istio 1.0.3. create a serviceentry for a mongodb instances (with protocol mongo).
create a service that connects to that mongo.
* create a secret with the required name for egress certificates.
* deploy a destination rule like in the example above.
* start a pod with a sidecar.
when istio work with consul, we just can't register multiple services of different protocols in the same node.
run the e2e tests in mixer_test.go in circleci.
1. deploy phofurl 2. deployment will fail when pulling the image as it 's no longer there
i 'm copying below my rule and instance.
besides, i 've added a piece of the mixer log with full debug enabled which debug the example described above.
phofcode a very detailed mixer debug log can be found here phofhyperlink .
first case (with removerequestheaders and appendrequestheaders): phofcode second case (with only appendrequestheaders): phofcode
as a non-deterministic issue, reproducing it might be difficult.
i 'll provide an example to ilustrate.
bare in mind that those are not exact copies from my own crds as i generate them using helm.
i also trimmed unimportant stuff.
below we find 2 handlers named after the microservices which they are responsible to check requests from: "entrance" and "tokend".
we also can find one of the rules to ilustrate how these handlers are reached.
phofcode phofcode phofcode as one can observe, the _entrance_ handler has references on params to strings such as _endpoint_ while the _tokend_ handler has references _resourcepolicy_.
the beginning of my adapter handleauthorization method looks like this: phofcode the occourance of fmt.printf helps us see issue.
and log for one of corrupted authorization request received is: the main point here is that service that i was forwarding my request is _entrance_, yet, while printing adapterconfig there are references _resource-policy_, which only set on a different handler configuration (_tokend_ one).
unfortunately, mixer logs with full debug mode on does not bring light exact adapterconfig value which is sent adapter.
also, investigating ahead on construction handlers and routing tables mixer logs didn 't lead many clues:
if we create a gateway server as follows: step 1 phofcode step 2 and then create a tls based gateway such as that in the example found here: phofurl eg: phofcode the egress-gateway will then spit out the following logs: phofcode
create gateway like this: phofcode see erros.
create any other empty gateways with port named "https" and errors are gone!
phofcode - service entry definition.
phofcode - destination rule definition.
download 1.1.snapshot.2 and run "helm template" with the demo values yaml: phofcode the error i get when i run that command is: phofcode all of those appear to be in the directory.
1. have a kubernetes cluster up and running.
2. execute: phofcode 3. apply istio.yaml: phofcode 4. execute below commands to label the default namespace and create the bookinfo test app.
phofcode 5. execute ` kubectl get pods ` and verify that there are no resources.
(the resources are in kube-system namespace)
1. create serviceentry: phofcode 2. run nghttp in my pod which with sidecar, got 200ok phofcode 3. create gateway,virtualservice
1. follow configuring http and https external services example ( phofurl phofcode 2. create another `serviceentry` by example, e.g.
phofcode 3. check logs of `istio pilot` phofcode
follow the steps in phofurl but use this operator config phofcode
i don't have a minimal repro at the moment but i could spend a few hours to get one if the problem is not clear/unreproducible.
we ended up adding retries to such network calls at the beginning of the programs in phofurl repository because of this.
go to releases tab, download 1.1.0-snapshot.1 or 1.0.2 linux/osx tar.gz files.
unzip and observe there is no folder.
- install another ingress gateway using helm - deploy 2 services and expose it using a gateway with tls on port 443 - use a browser to access the services
install with template generated by: `helm template --name istio --namespace istio-system --set mixer.enabled=false --set global.nodeport=false --set ingress.enabled=false --set prometheus.enabled=true grafana.enabled=true tracing.enabled=true galley.enabled=true > istio-mixere-off.yaml`
install istio per the manual steps for "option 2: install istio with default mutual tls authentication"
checkout latest code at commit 7dc254 phofhyperlink in master branch, then bulid with this command `make debu=1 verbose=1`
- check out latest code in master branch - cd `istio` dir, try `make`
- install istio with sidecar injector.
- add config to allow connections to mailjet smtp: phofcode - try to send an email from a container.
{{ minimal steps to reproduce the behavior }}
create a deployment with istio
build mix in centos 7.x phofcode
1. run a handful of pods with health checks (or be ready to simulate traffic) 2. monitor the event log: `kubectl get events -w` 3. delete an istio-policy pod 4. observe that some requests to the cluster fail
unlabel istio-injection, connect grpc server succeed.
labled istio-injection=enanled, restart grpc server, connect raise the error.
disconnect before upstream can deliver result, causing proxy to create log entry with a format like: `"get / http/1.0" 0 - 0 0 0 - "-" "mozilla/5.0 (windows nt 6.1; win64; x64)"` <- note the
1. create ingress gateway pod with hostnetwork 2. create two gateways with different port and gateway names.
gateway one with the name hello-gateway and port phofcode another gateway with the name hello-gateway3 and the port 10000. phofcode phofcode then access the helloworld and helloworld2 services via hostip where ingress gateway pod on port.
suppose hostip is 1.2.3.4, then access but all traffics are directed to helloworld service, even when is accessed.
i access other gateway hello-gateway4 port 10001, but without creating related virtualservice k8s service, traffic is still directed to helloworld service.
create an oop adapter and add a sleep to the processing function, say 20 minutes.
i used an authorization check adapter.
start mixs and connect it to this adapter.
send a request with mixc to trigger the function and observe that the function does not come back until the timeout has finished.
follow the steps in this manual: phofurl even when you deploy these resources in a separate namespace, you are still able to curl cnn.com!
run several applications where different services are listening on port 8080 and port 80, 443. service type is clusterip.
1. deploy istio with galley 2. edit the deployment to include command line argument 3. look at the logs from the galley pod and see that the logging options being used are still default values
{{ minimal steps to reproduce the behavior }}
{{ minimal steps to reproduce the behavior }}
they run everyday and can be monitored phofurl alternatively, these tests can run separately using phofurl
install this build and drive load to it.
- deploy a postgres database + service - deploy a service that connects to the database
- create nginx config : phofurl - create nginx deployment : kubectl apply -f <(istioctl kube-inject -f nginx.yaml) - curl -kv phofurl gives 200 - no traces in jaeger for https
follow instructions from wavefront adapter for istio phofhyperlink and the tcp metrics phofhyperlink page and use the above `rule` configuration.
- install istio 1.0.2 without mutual tls - deploy the httpbin phofhyperlink service (the pod yaml is given below) - find the pod ip and the node running the pod - ssh into node running pod and curl service using ip and port (as shown above) phofcode phofcode
1. install docker ce on three vmware machines (centos 7.4 minimal) 2. install k8s using kubeadm on those vm machines.
they are ha clusters, each of them work as master node and work node.
3. install istio `kubectl create -f 4. check pods status `kubectl get pods -owide --all-namespaces`
1. generate istio installation using the following values (much of this is unrelated, but it 's what i tested with): phofcode 2. install istio using the generated yaml 3. observe the `istio-system` pods for 10-15 minutes and see that ingress/egress crash
my service looks like: phofcode then i follow the doc to define my service entries as below.
- have java service that use the grpc 1.3.0 - create gateway and vs to route the traffic to service from ingress
1. have a cluster that should easily handle 1500 pods (15-20 m4.xlarge is fine) 2. install istio with the following values.yaml: phofcode 3. label the `default` namespace with 4. create a simple http-listener deployment/service; i 'll use bookinfo to keep it simple.
a. this should have 100 replicas, liveness/readiness probes, and set the resource claims to 0 to make things simple to test phofcode 5. apply the manifest create deployment and service 6. wait for pods become `running` and passing health checks 7. increase deployments by 100 and apply changes; repeat until where you will see health checks start fail on both old new pods.
i want go ahead note here that separating deployments into pod chunks (i went 9 deployments of 200 each for 1800 pods) seems address issue.
download istio phofhyperlink `1.0.2` edit the file `values.yaml` adding the following annotations in phofcode apply: phofcode
1. set up a mcp server 2. send an envelope to mcp containing encoded `authentication.policy` objects with typeurl: 3. when curl 'ing `/debug/configz`, you will see a config of type "mesh-policy"
{{ minimal steps to reproduce the behavior }}
the following service/ingress results in a http 404. phofcode log from the ingress worker: phofcode using a numeric `serviceport` for the ingress fixes the issue and results in a http 200 ok: phofcode
reproduce the setup in the bug description.
helm template istio --namespace istio-system --set grafana.enabled=true --set kiali.enabled=true --set > gateway.yaml kubectl create ns istio-syswtem kubectl create -f grafnaa.yaml -n istio-system
deploy bookinfo, open grafana page to the mesh overview.
sorry, i 'm not entirely sure what the cause is to trigger it here.
i can say i have over 500 pods in the environment and they don 't have issues without istio.
istioctl kube-inject -f then seen: phofcode
remove "http-" prefix from a regular service definition.
example: phofcode phofcode more detailed description: phofurl
go to phofurl click on create your own templates and observe the issue.
the all.yaml is: phofcode phofcode
the following destination rule, with the pods in the service returning 5xx for every call.
phofcode when i exported envoy config using : phofcode the envoy config showed up as: phofcode see how the is set as 0 and is not configurable from `destinationrule`.
i think it needs be configurable also, per this document phofhyperlink , it is > the % chance that a host will be actually ejected and so setting to 0 will not eject any hosts?
{{ minimal steps to reproduce the behavior }}
n/a /assign @krancour /cc @hklai @rshriram
i think i have seen this before but the latest example is #8606.
install istio with control-plane auth enabled.
initiate a tls connection to citadel port 8060. the tls handshake indicates that the cipher preference is chosen by client.
apply the scenario: virtual service at ingress gateway with destination to external host, service entry for egress (https), destinationrule for tls origination.
1. deploying this template: phofcode > meshexpansion=true simply installs a gateway and virtual services to direct port 15011 traffic to pilot.
1. run openssl to validate certificate (this works) phofcode 1. follow the steps here: phofurl 1. run openssl to validate certificate after applying global mutual tls (this fails even after removal of the mtls config).
phofcode the ingress gateway craters and seems unrecoverable.
another way reproduce this problem is set global.mtls.enabled=true which essentially creates the resources in above documentation.
create a virtualservice with a no suffixed domain
terminate a machine in a k8s cluster running istio
neither of the application services show up.
kubectl apply -f <(istioctl kube-inject -f istioctl kube-inject -f complete-demo.yaml | kubectl apply -f -
phofcode from inside my pod does not respond.
install istio using helm with `--namespace istio-system` and execute `kubectl get hpa --all-namespaces`
install istio (see installation step), install egress gateway seperately, follow the examples from phofurl in those examples, where references to the gateway in `istio-system` were, they ware replaced with `istio-egressgateway`.
1. create a `serviceentry` for an external service * `resolution: dns` * multiple endponts -- i have 3, one of which * always * returns a 503.
1. create a `destinationrule` covering this service with a block.
1. request that virtual service lot: `while true; do curl $svc` it continues to return 503s at slightly less than 1/3 the time.
watching the proxy's `/stats` endpoint i observe (on the specific `cluster.outbound|....`) `.lb_healthy_panic: 0` -- it isn't keeping the endpoint in because it is panic mode does increase `.ejections_active` never stays non-zero for greater than few seconds `.membership_change` increases by 3 regularly, about every 4 to 5 seconds.
every time that period comes around `.ejections_active` resets.
this number gets very big over time, e.g 12k after couple hours.
reading phofurl it looks like istio/envoy may have changed from pulling config to pushing config relatively recently.
it looks like every 4 or 5 seconds istio pushes new config to envoy, which resets its data about that cluster member being an outlier.
follow steps on official doc page: phofurl
same as this tutorial phofhyperlink
`kubectl port-forward service/grav-service -n default` `kubectl port-forward service/grav-service -n ns-stg` i have modified the default page in the containers, and i see the different pages locally on based on which namespace i forward.
in the routes.yaml file: phofcode this works fine and gets access to grav running in default namespace.
if i change host to get `no healthy upstream` in browser.
adding `namespace: ns-stg` to route.yaml changes error to `upstream connect error or disconnect/reset before headers` when referencing `ns-stg`, and `host: still works.
changing namespace in gateway makes no noticeable difference.
- create a deployment with 2 istio-proxy-injected pods - kubectl get pods -o wide to get the pod-ips - curl on any pod-ip from inside another pod
1. install istio 1.0.2 as described in docs.
phofhyperlink 2. create any deployment and envoy-filter (like the one above) 3. check whether envoyfilter 's functions are applied to the traffic.
`namespace-a` - a namespace owned by "istio operator", where a cluster-wide `istio ingress gateway` is defined 2.
`namespace-b` - a namespace owned by "team #1", where `httpbin` sample application is deployed 3.
`namespace-c` - a namespace owned by "team #2", where `istio virtualservice` resource is abused to expose to the outside world `httpbin` service owned by "team #1" phofcode
1. install istio and enable mutual tls phofcode 2. deploy bookinfo app as described here phofhyperlink 3. it may succeed for the first time, but will never work again after a while.
i reproduced this on two of my azure aks cluster.
environment: ubuntu 16.04, ibmprivatecloud, jmeter 4.0, istio-1.0.3 (from phofurl , but this chart is using istio 1.0 image) install the istio without mixer phofcode the file `values.yaml` enable all add-on deployment except `mixer`, the change set as follows: phofcode get ibm-istio-1.0.3.tgz at here phofurl deploy the bookinfo follow the step phofurl because we have 100 nodes on ibmprivatecloud, so set 100 to `replicas` in bookinfo.yaml.
use jmeter start test: phofcode the file `bookinfo.jmx` bookinfo.jmx.zip phofhyperlink after steps above, we can get jmeter test report about istio without mixer.
then we test istio with mixer.
the result as follows: istio without mixer <img width="1159" 6 38 45" src=" phofurl istio with mixer <img width="1162" 6 40 11" src=" we can see istio with mixer test result is better than without mixer.
phofcode wait all pod running.
and access zipkin service phofcode
deploy services and endpoints on the remote.
then delete the remote cluster.
check that the cds, eds, and ads in pilot to check for full removal of remote cluster resources.
here is my configuration phofcode phofcode here are the calls to access it via an external busybox container:
{{ minimal steps to reproduce the behavior }} 1. deploy my app dc-1 2. create svc dc 3. create virtualservice dc 4. create destinationrule dc
execute the following command, 3 of which do not start properly 1. kubectl apply -f 2. kubectl apply -f 3. helm install --name istio --namespace istio-system
follow the instructions here phofurl when you run $ helm install --name istio --namespace istio-system error: apiversion in is not available
1. enable mtls (istio-auth.yaml) on app similar to bookinfo 1. enable jwt policy 1. configure a servicebindingrole with the following subject properties phofcode 4. visit the page with a jwt containing the following or equivalent scopes phofcode 5. see that the jwt is rejected.
- try adding the following service entries.
then try connect to those host with the keep-alive connection, around 20 minutes, the connections will be unexpectedly closed.
- you may try add other service entries to other namespace, you will still found those setting in the envoys config dump of any namespace.
setup keycloak realm, create client test and point istio to that keycloak: phofcode `
following helm installation via template (option 1) helm template --name istio --namespace istio-system --set grafana.enabled=true --set --set --set > istio.yaml
install istio 1.1, look at the istio deployments in the istio-system namespace - look at the template/metadata/labels for the deployments and noticed some (all?)
are missing a version label.
lable a project as auto inject.
deploy a pod to the project.
use the following instance configuration.
* gateway * phofcode * virtualservice * phofcode and the underlying service (the well-known hello world example): phofcode
deploy minikube with kubernetes 1.10 and install istio-1.0 in cluster.
write any go main method and create istioclient by passsing kubeconfig and query any istio resources like virtualservice etc.
ot shows error failed while creating route rule: sample-rule, error the server could not find the requested resource (post sample code: phofcode
follow the out-of-process adapter guide phofhyperlink and include a field in the configuration.
the proto definition for the field is as follows.
phofcode in the failure scenario, yaml configuration for field was as follows.
phofcode it worked, however, when field was expanded to match type: phofcode
1. install istio without mixer.
2. deploy bookinfo 3. confirm the bookinfo is running
1. follow installation instructions in phofurl 2. launch bookinfo app example on cluster a that has pilot running 3. delete existing phofcode deployment on cluster a 4. launch an additional phofcode deployment, phofcode and phofcode services on cluster b 5. deployment should be accessible from service 6. no updates are observed: 7. following the same steps on cluster a only (see push notifications):
1. enable mtls (istio-auth.yaml) on app similar to bookinfo 1. enable jwt policy 1. configure a servicebindingrole with the following subject properties phofcode 4. visit the page with a jwt containing the following or equivalent scopes phofcode
macos, minishift with openshift 3.10.0, 1.0.1 release of istio: ansible-playbook main.yml -e \'{"istio": {"addon": ["kiali"]}} \'
from the 0.8.0 lts release download, `kubectl apply -f
in the quick setup guide for kubernetes, in remove the `-- webhook-config-file` option.
`go test ./mixer/pkg/server/ --run=testerrors -v` 2. run again, and got err: `go test ./mixer/pkg/server/ --run=testerrors -v`.
phofcode `istio: ingress` phofcode `istio: ingressgateway`
istioctl create -f foo.yaml <<eof apiversion: kind: destinationrule metadata: name: my-service namespace: default spec: host: my-service subsets: - labels: version: major.minor name: major.minor eof
i created a configuration with this kubernetes service: phofcode additionally i have these istio crds: phofcode
install istio 1.0 with mtls enabled.
{{ minimal steps to reproduce the behavior }} install the istio chart using branch release-1.0
see how #8200 triggered a ton of lint failures without changing a single line of source code.
run istio 's e2e tests a few times (like 5-10 times): phofcode then, run: phofcode can 't see logs of `etcd`, `kube-apiserver`, and `kube-scheduler` too: phofcode from the outputs above, looks like `kubelet` listening on port `10250` is not able to provide logs to `kubectl`: phofurl says: > the port for the kubelet to serve on.
error command failed: "flag error: could read configmap namespace "istio-system ": configmaps found - --meshconfigfile re-run with `-i <istiosystemnamespace> and ensure meshconfig exists " exit status 255 logs file status file kubectl get ingress --all-namespaces --kubeconfig= output: namespace name hosts address ports age ccp ccp-monitor-grafana * 80 18h ccp kubernetes-dashboard * 80 18h kubectl get pods -n istio-system --kubeconfig= output: no resources found.
deployment info on pod kubectl get pod -n -o yaml --kubeconfig= deployment info on service kubectl get service -n -o yaml --kubeconfig= deployment info on ingress ingress yaml mode (--skip_cleanup), skipping cleanup (removal of namespace/install) tests/istio.mk:94: recipe for target failed make:
-- successfully ./setup_host.sh -- failed
1. download [emojivoto.yaml][3] 1. modify yaml file add `istio-injection: enabled` to `emojivoto` namespace.
`kubectl apply -f emojivoto.yaml` 1. wait a few minutes open jaeger to see traces.
run the following commands few times (5-10 times): phofcode then, run `kubectl get pods`: phofcode
{{ minimal steps to reproduce the behavior }}
apply thos files (+ corresponding virtualservices / services) on istio 1.0.0 setup
change the env in istio-demo.yaml deploy istio-demo.yaml that 's it :)
1. deploy echo-server using this [yaml][1].
`curl -h 'x-foo:foo' phofurl 1. observe the result: phofcode
using `istioctl proxy-status` the namespace needs to be specified as part of the pod name: phofcode using `istioctl proxy-config` the namespace cannot be specified as part of the pod name, but global flag works: phofcode
<sub><sup> 1) install istio with mixer diabled.
image phofimage in the istio system namespace all the istio components are running except mixer components image phofimage <sub><sup> 2) deploy the book application example as shown below <sub><sup> image phofimage all the pods are running image phofimage *connection refused error is getting show when trying to access application.
* </sup></sub> ### observation: <sub><sup> the egress and ingress pods in istio-system get restarted and logs shows </sup></sub>
1. install istio following this guide: [installation with helm][1], option 2 1. deploy a demo app, [yaml file][2].
note: change the `<your domain name>`.
1. open a browser and visit ` phofurl domain you can see tracing headers are added.
1. open jaeger, and no tracing of `echo-server` can be found.
<sub><sup>steps to reproduce the behavior.</sup></sub>
- create a gateway - create 2 virtualservice with the same name, in different namespaces, each of them bound to the gateway with a different host name - the ingress gateway logs will contain `[info][upstream] lds: add/update listener at irregular intervals - whenever this message appears in the log, all active connections are closed by envoy i couldn 't confirm, but it seems that having some traffic is necessary for issue to manifest; issue seems to take longer (or even not happen) when cluster is idle.
i wasn 't able to find a way make issue happen systematically, but it seems with enough requests (>1s), problem would occur almost every minute, at same second.
example yaml reproduce: note: you 'll need a proper tls certificate and update domain names phofcode
create many serviceentries and virtualservices and check the output of `ps -a -o rss,cmd` in the proxy.
follow article and create ingress gateway and sample application with nodeport phofurl istioctl proxy-config clusters -n istio-system service fqdn port subset direction type xds-grpc - - - strict_dns zipkin - strict_dns
<sub><sup>following steps in phofurl </sup></sub>
<sub><sup>on prem k8s with istio 1.0</sup></sub>
<sub><sup>steps to reproduce the behavior.</sup></sub> change and observe the `enable-core-dump` container 's `image` value.
1. setup eks by this guide: phofurl phofhyperlink 2.
`kubectl apply -f ` 3.
`kubectl create -f ` 4.
`helm init --service-account tiller ` 5.
`helm install --name istio --namespace istio-system --set galley.enabled=false` 6. start bookinfo application and inject manually: `kubectl apply -f <(istioctl kube-inject -f 7. got the error message from `kubectl describe error creating: internal error occurred: failed calling admission webhook post phofurl net/http: request canceled while waiting for connection (client.timeout exceeded while awaiting headers)
<sub><sup>steps to reproduce the behavior.</sup></sub>
`kubectl create -f namespace.yaml` `kubectl create -f helloworld.yaml -n istio-test` phofcode code: phofurl # but call init_with_istio, can 't be accessed, request port 31380?
install the helm chart with prometheus + grafana enabled and set the `replicacount` of prometheus to something large like 10.
set hostnetwork=true on the gateway pod
<sub><sup>steps to reproduce the behavior.</sup></sub> change `global.proxy.image` and observe the container `image` values.
<sub><sup>steps to reproduce the behavior.</sup></sub> install istio 1.0 on eks and follow the bookinfo tutorial.
creating the deployments and manual sidecar injection works, but creating the custom istio resources fails.
steps to reproduce the behavior.
1. install bookinginfo sample from istio.
2. create an adapter with no cache: phofcode 3. create a template: phofcode 4. create a rule: phofcode 5. send a request with no x-api-key header to get a 404 as x-api-key is not whitelisted 6. send request with to get 200 an see the page as x-api-key is whitelisted 7. send in short period of time request with no x-api-key to get 200 where has no value so it is not whitelisted
create a gateway listening on port 80 but have the envoy gateway run on a server that has port 80 already taken.
steps to reproduce the behavior.
follow the instructions exactly as described in the istio documentation -- setup istio by following the instructions in installation guide.
-- deploy bookinfo sample application.
add affinity rules to values.yaml file under ingress configuration affinity: podantiaffinity: - labelselector: matchexpressions: - key: k8s-app operator: in values: - ingress topologykey: "kubernetes.io/hostname" nodeselector: public tolerations: - key: operator: "exists" effect: "noschedule"
- download latest release - execute the following command ` ansible-playbook main.yml -e \'{"istio": {"auth": false, "delete_resources": true}} '` on
- download istio release - execute the following command: `ansible-playbook main.yml -e \'{"istio": {"release_tag_name": "1.0.0", "auth": false, "delete_resources": true}} '` on folder path
talk to a memorystore service in gcp from a pod with sidecar.
deploy sample `httpbin` service and expose it via ingress gateway from the official guide phofhyperlink and issue `curl` commands mentioned above.
1) create new aks cluster.
2) install istio.. i used the following helm command (and corresponding kubectl apply): phofcode 3) wait a few minutes for the various pods to start up.
4) run kubectl proxy (or az aks browse) and try to navigate in the dashboard.
as above, but i can get on hangouts and show you this in detail.
the application itself gracefully handles sigterms and drains and have confirmed this with load tests without istio-proxy in play.
i have also added a prestop hook to the application with istio, to ensure the app doesn 't receive a sigterm until well after istio-proxy shuts down.
just shut down your istio-policy service.
install the istio1.0; helm install istio --name istio --namespace istio-system --set ingress.enabled=false --set --set --set galley.enabled=true mixer.enabled=true prometheus.enabled=false tracing.enabled=true kiali.enabled=true
create a grpc adapter using properties of type other than string.
kubectl create -f though i didn 't use it, they same thing is going to happen if you install istio-demo-auth.yaml - looking in that yaml file, i see the same problems with the labels.
steps to reproduce the behavior.
helm upgrade istio --install --namespace istio-system --set --set
follow the telemtry task: phofurl
kubectl apply -f <(istioctl kube-inject -f steps to reproduce the behavior.
kubectl apply -f <(istioctl kube-inject -f
use global.hub to produce a template from helm
- `oc apply -f <(istioctl kube-inject -f ./depl.yml` (any standard deployment yaml, for example one from the bookinfo demo) - edit the "app" or "version" labels in that yaml, putting anything different.
but keep the same deployment name.
- `oc apply -f <(istioctl kube-inject -f ./depl.yml` output: `deployment "test-deployment" configured`
steps to reproduce the behavior.
i installed istio 0.8 using helm (not "helm template" according to the install instructions for 0.8).
then i deleted it with `helm del --purge istio`.
i then deleted the namespace with `kubectl delete ns istio-system`.
then i did a helm install for istio 1.0 according to the updated instructions (creating crds before doing install, as i 'm on helm 2.9.1).
after a short time, saw behavior described above.
in both cases, had to deploy a daemonset with hyperkube image, where command was overwritten just sleep indefinitely, before installing istio.
this is workaround mentioned get around aks issue.
minimal reproduction with the following service, running in a container with `curl`: phofcode deployment with a headless service: phofcode in `pod1 phofcode in `pod2 phofcode `pod1 <-> pod2` works, `pod1 -> pod1` doesn 't.
parts from `istioctl pc listeners -o json` (pod1):
install istio through helm with imagepullsecret values.
helm install istio --name istio --namespace istio-system --set
follow the instructions here 1. phofurl 2. when you run $ helm install --name istio --namespace istio-system error: render error in template: executing at can 't evaluate field enabled in type interface {} if you move the problematic file somewhere else just to avoid this problem like this mv ~/.
you will run into another issue mentioned below.
$ helm install --name istio --namespace istio-system error: the server has asked for the client to provide credentials helm version client: gittreestate:"clean"} server: gittreestate:"clean"} all these things were working fine for daily build
deployment manifest built from helm with command : phofcode then apply : phofcode on the k8s side :
install istio using `istio-demo.yaml` file.
follow helm deploy guide phofhyperlink , replacing `istio-system` references with a different ns.
download `istio 1.0.0` at ` phofurl i used `helm` to upgrade and run it phofcode then i got the exception like above
ssh into an application container and call the api server from a groovy script.
this works when mutual auth is disabled.
look at a commit or release.
not to be difficult about this, but this is a security product with elevated privileges and access to most traffic, people need to be able to trust its supply chain.
steps to reproduce the behavior.
steps to reproduce the behavior.
steps to reproduce the behavior.
apply webhook configuration and deploy sidecar injector with the usual cluster role bindings.
may or may not be of note but i originally had the wrong cluster role binding so originally got permission denied.
have deleted everything and retried but with the same results.
1. create gateway for host phofcode 2. create service entry phofcode 3. create virtual service phofcode 4. call call should be the same response as ` phofurl or log into gateway and curl `curl -v -h "host: my-gateway.example.com" "localhost:80/deflate"`
steps to reproduce the behavior.
1. kubectl apply -f 2. kubectl delete -f phofcode
following issue #7361, i tried to configure scenario 3a with istio_mutual.
the scenario is enabling mtls on the traffic from an application pod and the egress gateway.
first, i tried replacing the tls mode of the gateway and destinationrule from mutual to istio_mutual.
phofcode which returns following error: phofcode the reason seems to be difference between `tlssettings.tlsmode` phofhyperlink and `tlsoptions.tlsmode` phofhyperlink the former is used by `destinationrule` and includes `istio_mutual` while latter is used by `gateway` lacks it.
second, i tried replacing tls mode only in destinationrule.
phofcode test: phofcode actual output: expected output: cleanup:
1 in one k8s node, coreos upgrade automatically 2 after upgrade, the node restart kubelet/kube-proxy automatically... (note that istio-pilot pod also in this node.)
3 i try to access hp-profile-service with istio-ingress url, but it raise 503 - upstream error i try to access hp-profile-service.hp from another pod, it access successfully.
4 from istio-ingress log, i found the http request went to wrong(old) pod ip.
(note that the pod ip is changed after k8s node auto-upgrade) from istio-proxy of app service pod, i found the http request had not arrived at all.
5 from istio-pilot log, found it already got new ip .
but it continue to do cds/eds push and raise error: "error ip not found, listeners will be broken " 6 from cilium log, do find new ip from beginning.
however, seems continue regenerating bpf program even after bpf program has completed 7 restart istio-pilot pod, service access still return 503. in istio-ingress log, still went wrong ip.
8 restart istio-ingress, everything works fine now.
have a replicaset with label app=a, create another replicaset with label app=b,version=v1 with also destinationrule and virtualservices already created, move the pod by using kubectl label --overwrite, it is not possible to reach it for --several-- minutes (might be more) when i look in any istio-proxy container with phofcode then i find my clustername entry but the endpoint is empty: phofcode
as described above just trying to deploy a new application.
1. git clone phofurl 2. helm install --name istio --namespace istio-system --set --set
deploy an app that does not use istio sidecar and add the virtual service with port.name to your ingressgateway
start a binary and send a sigterm
just run 'helm install --name istio-remote --set --set --set --namespace istio-system '
steps to reproduce the behavior.
from 1.0 snapshot branch phofcode observe missing envoy headers phofcode observe the present envoy headers
follow the steps in phofurl in step 5, error code 35 will be returned.
run `istioctl proxy-config listeners $(kubectl get pod -l istio=egressgateway -n istio-system -o -n istio-system`.
you will get `error: no listeners found`
1. deploy latest release-1.0 build with istio-demo.yaml on single node cluster 2. scale istio-policy to 2 replicas 3. run 1 replica of service a issuing http get to 1 replica of service b 4. observe that a->b with no errors 5. simulate mixer failure by deleting pod phofcode 5. observe connectivity disrupted during istio-policy recovery phofcode note: similar behavior observed with 1 mixer replica as well.
also, failure has been simulated with: phofcode note: there are 3 results overall: a: flapping, b: cannot connect for 20s+, c: no disruption.
a->b http requests are done at 0.5s intervals.
2. install `istio` on k8s in the `istio-system` namespace.
3. run `e2e_simple` tests: phofcode
if you have the same grpc service with 2 versions phofcode of course i have the according destinationrule phofcode
1. install istio with tls auth enforced 2. inject sidecar into deployment that includes go-micro service ( user-service phofhyperlink for example) 3. error log: phofcode
follow the steps described in the task.
deploy istio 0720 daily as described below kubectl create -f bookinfo.yaml kubectl create -f bookinfo-gateway.yaml
download latest daily build from phofurl and follow the instructions at phofurl - it doesn 't matter if it is openshift or kubernetes
remote cluster auto or manual sidecar injection per documented steps: phofurl
deploy helm using "--set tracing.enabled=true --set observe in output: phofcode related chart template: phofurl
1. create cluster on the google kubernetes engine with rbac enabled 2. install helm with service account provided in the istio helm installation 3. deploy istio using helm with parameters: phofcode 4. label default namespace with 5. create deployment, for example, `nginx` in default namespace
steps to reproduce the behavior.
#### 1. deploy istio by helm with no error `helm install --name istio --namespace istio-system` all pods works fine as shown phofcode #### 2. deploy helloworld example zhenyin$ kubectl get ns -l istio-injection name status age istio-injection default active 2d enabled istio-system active 1d kube-public active 2d kube-system active 2d zhenyu 2d zhenyin$ kubectl apply -f service "helloworld" created deployment.extensions "helloworld-v1" created deployment.extensions "helloworld-v2" created "helloworld-gateway" created "helloworld"
1. create a service that programmatically fails after x calls 2. alternatively: setup a fault policy to make the service fail 50% of the time (i have tried that but could not figure out how to make both the failure and retry policy work together.
this used to work in istio 0.5 with precedence.
(help or how to would be appreciated here!)
2. setup a virtualservice resource with retries as specified above.
3. setup a bash loop repeatedly calls the service url.
expecting see no call errors given retries...
setup an nginx reverse proxy, example config: phofurl
set startup parameter --log_output_level error or --log_output_level default:error
1. install minikube ~~~ $ minikube start ~~~ 2. install istio 0.8.0 with: ~~~ $ kubectl apply -f ~~~ 3. follow the configure an egress gateway guide ( phofurl 4. this will fail at step 3 send an http request to phofurl with a 503 service unavailable $ kubectl exec -it $source_pod -c sleep -- curl -sl -o /dev/null -d - phofurl http/1.1 503 service unavailable content-length: 57 content-type: text/plain date: fri, 13 jul 2018 gmt server: envoy repeating the steps but installing istio with the following will work correctly: $ kubectl apply -f
steps to reproduce the behavior.
installation on istio-0.8.0:https: cd ~/istio-0.8.0 kubectl apply -f kubectl apply -f bin/istioctl create -f upgrade to 1. control plane upgrade cd helm template --namespace istio-system --set global.proxy.image=proxy --values >> kubectl apply -f 2. sidecar upgrade kubectl replace <(bin/istioctl kube-inject phofcode
steps to reproduce the behavior.
this also happened on istio prelim 1.0 helm install istio.yaml: phofurl the steps: install with helm via helm template: cd ~/istio-1.0.0-snapshot.0 helm template --name istio --namespace istio-system > $home/istio.yaml kubectl create -f $home/istio.yaml kubectl get pods -n istio-system phofcode kubectl describe pods -n istio-system phofcode
steps to reproduce the behavior: 1. installation on istio-0.8.0:https: cd ~/istio-0.8.0 kubectl apply -f kubectl apply -f bin/istioctl create -f kubectl get services phofcode kubectl get pods phofcode get pods -n istio-system phofcode get service -n istio-system phofcode 2. upgrade on istio-1.0.0-snapshot.0: phofurl
install istio with the istio-demo.yaml, but change the container spec of the discovery container like this: phofcode make sure that consul is running before and accessible at the given ip.
for testing purpose it 's best to start it outside k8s cluster.
then start any istio service and check envoy configuration by creating a port-forward for port 15000 and fetch configuration via `curl and `curl the dump should only show static configuration.
a workaround is to remove readiness check for this container: phofcode
originally i was using kubectl and the istio custom resource definitions, but using istoctl made no difference.
run: phofcode and phofcode start the sleep container: phofcode exec to the sleep container in the pod and run: phofcode
deploy a client/server pod from phofurl with istio sidecar injection.
use the `lloadtest_client` like : phofcode the server only receive 100 * <number of cpu> connexions (as envoy support only one tcp connexion per cpu per upstream)
1. install istio 0.8.0 per default instructions 2. launch this websocket sample into a namespace
start from the top of phofurl and work your way down to opening the 'istio gke deployment manager '
try downloading zookeeper and rabbitmq-ha from helm and deploying it on istio.
you will see the constant listener updates.
steps to reproduce the behavior.
this is my gateway: phofcode and my vistio `virtualservice`: phofcode and my httpbin `virtualservice`: phofcode (notice the gateway and services is in different namespaces... is that a problem?)
the log from istio-ingressgateway: `"get / http/1.1" 404 - 0 0 2 - "mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) safari/537.36" "httpbin.skil-sky.no" "-"` so the request is coming to istio-ingress-gateway...
1. main cluster deployment: phofcode 1.
steps to reproduce the behavior.
in the case of small probability, the the http state code is zero.
this is the log of ingress: "get http/1.1" 0 - 0 0 1000 - "dzlehttp/6.2.1 curl/7.29.0 php/7.1.15" "nr-form.local-apps.com" "-"
i 'm using my client/server in go from phofurl deploy the client and server with the annotation "true"` the client then connect to the server, send a ping message, get a reponse and wait on the channel.
at some point, istio sidecar of server will cancel connexion.
istio-0.7.1 installation with no auth.
scale up pilot deployment to 250 replicas.
run `kubectl get crd` and check the timestamps.
follow the k8s quick start guide at phofurl it should die here: phofcode
follow the instructions in phofurl
1. phofcode 2. use a $source_pod to send curl requests.
phofcode 3. check the logs: phofcode
contact the backend via publicapi with delay of (sleep 30seconds in backend code) curl -h -w "%{http_code} " phofurl
- create new 1.10.4-gke.2 cluster - kc create namespace istio-system - helm template --name istio --namespace istio-system --set > istio.yaml - kc create -f istio.yaml create and restart ingress-gateway apply httpbin.yaml: phofcode http curls succeed, https fails: phofcode
follow the instructions on phofurl
test the performance of istio according to the steps at phofurl phofhyperlink
steps to reproduce the behavior.
run: istioctl register myvmsvc 8080 -n istiosample then: istioctl deregister myvmsvc -n istiosample run kubectl get svc -n istiosample myvmsvc does exist.
phofcode from pilot:9093/debug/edsz, the cluster still exists.
1. download phofurl and extract it.
1. install helm 1. run `helm template --name istio --namespace istio-system > $home/istio.yaml` 1. check the generated manifest file for references to 0.8: `grep '0 .8 ' $home/istio.yaml`
steps to reproduce the behavior.
1. install istio 2.go to samples/bookinfo 3. run - docker-compose -f up -d docker-compose -f up -d 4. run istioctl get virtualservices
calling the exposed http service using standard port https: phofcode
1. install bookinfo sample in ns bookinfo 2. install your own sampleapp in ns other than bookinfo 3. istioct create below file in bookinfo ns phofcode from the ingress gateway config_dump, you can find out that the sampleapp cluster is not defined with domain suffix.
follow the steps in phofurl perform the requests: phofcode the first call will return 200, the second will return 404. check the `ingressgateway` log: phofcode note that second request, with port, is not routed.
in rds, following domains exist: phofcode the following domain is missing: related issue phofurl
the first, create a istio gateway and virtualservice by the command "kubectl create -f tensor-gateway.yaml" with the following yaml file.
phofcode the second, use the command "kubectl apply -f <(istioctl kube-inject -f tensorflow.yaml)" to manually inject the sidecar by following file: phofcode the injected yaml is shown as below with command "$ istioctl kube-inject -f tensorflow.yaml": phofcode
1. follow instructions given at the link phofurl 2. prepare the deployment yaml file.
i just renamed v2 to v2test in the destinationrules and virtualservices.
attached the screenshot 3. run `istioctl replace -f 4. access product page ` phofurl 5. the product page displays as attached screenshot.
the message is `sorry, product reviews are currently unavailable for this book.` 6. but if you do `istioctl delete -f and then `istioctl create -f /produpage shows reviews (v2 reviews).
istio 0.8 installed on a new cluster with the helm template method.
1. follow the task in the official doc here: phofurl 2. clean up all resources with `kubectl delete ns foo bar legacy` 3. check the policies and destinationrules phofcode we can see destinationrules have been deleted, but policy not
install istio 0.8.0 into a 1.9.6-gke.1 gke cluster using helm template: phofcode run through steps in demo for enabling mtls in a namespace: phofurl
checkout to `0.8.0` tag and run phofcode
create a fluentd adapter while fluentd is not available.
follow the demo of fluentd logging phofurl kill or don't start fluentd.
all steps has been documented here : phofurl
sample policy which causes the problem phofcode
follow the steps in phofurl for istio with mtls.
1. istioctl create -f <yaml_file> 2. istioctl get <resource> <resource_name> -o yaml
at first i use istio 0.7.1 and then i download istio-0.8.0 release.
then i step into fold istio-0.8.0 and excute `helm template --namespace istio-system --set global.proxy.image=proxy --values >> ` and `kubectl apply -f `
1. follow phofurl to setup env(used docker images built from my dev env) 2. apply authn policy below, hit error ( $ istioctl create -f jwt_policy.yaml -n istio-system error: configuration is invalid: 2 errors occurred: * cluster-scoped authentication policy name must be "default", found "ingressgateway" * cluster-scoped authentication policy must not have targets policy applied on ingressgateway phofcode validation pass if add namespace into explicitly like phofcode
1. install kubernetes 1.10.4-gke.2 on gcp.
2. install istio using instructions from: phofurl 3. then follow instructions from: phofurl
- create a cloud sql database instance (postgres 9.6) - create a service account with cloud client role enabled and cloud sql account following the gcloud tutorial phofhyperlink - install istio following the quick start page phofhyperlink without auth enabled - deploy a service (based on debian stretch with psql installed) try to connect to the database using the credential provided in previous steps.
steps to reproduce the behavior.
steps to reproduce the behavior.
1. setup a terminal with `export kubeconfig=<path to config file1>:<path to config file2>:<path to config file 3>`.
2. set the current context a valid context (e.g., `kubectl config use-context <context>` 3. execute any `istioctl` command in the terminal window.
step 1: kubectl apply -f (i have enabled automatic sidecar injection, and verified sidecar was injected into httpbin pod) step 2: apply following virtualservice phofcode i think above virtualservice should enforce the request timeout of service httpbin to 1s.
step 3: log into istio sidecar of httpbin pod, and run phofcode the request should be timed out after 1s.
but actually the request was succeeded after 10s, which means the 1s timeout does not work.
the response i got was phofcode note that i got above result when testing version phofurl since i want to bypass the timeout issue discussed in phofurl
1. follow instructions in phofurl 1. section phofurl step 1 launches gke deployment manager with template < phofurl this template uses gke engine version `1.9.7-gke.1` deployment fails with the error phofcode equivalent command-line option `gcloud container clusters create istio-quick-start --zone europe-west4-b --num-nodes 3` fails with the same error.
changing gke version to `1.9.7-gke.3` solves the problem, so it looks like the template used by quickstart needs to be updated.
steps to reproduce the behavior.
1. setup a gke cluster 2. use the following steps to set up istio phofcode 3. try to reach the productpage by calling `curl -v -i by following this page phofurl to define the gateway_url 4. check the logs of ingress gateway phofcode gateway_log.txt phofhyperlink you should see request being routed to productpage pod ip and returning a 504 5. check envoy on sidecar.
phofcode pod.txt phofhyperlink see an output similar this (pod ip is service ip is phofcode now get list of clusters and config dump clusters.txt phofhyperlink config.txt phofhyperlink i see following cluster (used by inbound listener) now i 'm confused.
envoy listens on (which should include but tries talk reach productpage.
that 's should be a loop and a port collision ...?
on other hand - when i `curl localhost:9080` from inside sidecar container productpage is correctly returned.
when using `curl <pod-ip>:9080` from inside container request times out.
the accesslog also shows nothing.
step 1: kubectl apply -f (i have enabled automatic sidecar injection, and verified sidecar was injected into httpbin pod) step 2: apply following virtualservice phofcode step 3: log into sidecar, and curl httpbin service: curl httpbin:8000 -i -v i successfully got the result: phofcode which is unexpected.
i also got the istio config of httpbin pod: phofurl i did not the see request timeout was set.
1. create the mysampleadapter_test.go file and populate it with the code shown.
2. run the build and test command: go build ./... && go test
create a pod in a namespace where policy=disabled or policy unset.
injection will not happen no matter what we set pod annotation to.
i started with the howto at phofurl my domain name is i defined a gateway : phofcode and a virtualservice : phofcode than try with curl : phofcode while : phofcode in the 2nd case, i see in the logs to make it work i had to change the `virtualservice` to either there is another way to match hosts (like using `*` ) or documentation should warn about that.
note that go http/grpc seem to always send port along hostname.
1. download istio: phofcode 1. run minkube: phofcode 1. install helm: phofcode 1. install istio: phofcode watch pods.
1. download istio 0.8.0: phofcode 1. run minikube using command from documentation (with hyperkit vm driver and localkube bootstraper): phofcode 1. install helm: phofcode 1. install istio using helm charts: phofcode
first, create two gke clusters: phofcode then, follow the steps in phofurl installing istio in the cluster in us-central1-a and using the cluster in us-central1-b as the remote.
i believe i 've followed instructions exactly, although for what it 's worth i was getting a different segfault when i accidentally created a secret for primary cluster (the one us-central1-a).
if you 're insterested that one, i 've copied logs to phofurl
on a k8s cluster with tiller installed, run the helm installation: `helm install --name istio --namespace istio-system` then get pods in `istio-system` to see that pod scheduling has failed: phofcode finally read scheduler logs: phofcode
deploy istio into a fresh gke 1.9.7-gke.3 cluster, with cert-manager installed and a certificate created for the *.mydomain.xyz domain.
edit the istio config map to add istio-system namespace to the statsdudpaddress: `statsdudpaddress: phofcode deploy httpbin service.
update the gateway host to something available.
steps to reproduce the behavior.
just give the command on osx: phofcode
follow the directions here: phofurl got stuck at "verifying the gateway for https".
1. create a new gke 1.9.7 cluster phofcode 1. install istio phofcode
steps to reproduce the behavior.
go to phofurl please reassign to relevant bucket if required
phofcode view localhost:9081 in browser and view that you round-robin between all available services
the procedure in the multicluster documentation: phofurl phofcode
1. set up a kubernetes cluster with a `--cluster-domain` divided by more than 1 period (.).
1. pass the `--domain` argument to a proxy sidecar according to the pilot agent docs linked above.
unsure how to reproduce, but i 'm happy to provide any debug info i can extract.
my steps were: * install by following phofurl * follow the tutorial to setup ingress ( until i got blocked phofhyperlink ) * try to patch a deployment in the namespace, note that deployment fails due webhook error
steps to reproduce the behavior.
execute "go test -timeout 30s -run from the istio directory with go 1.9.6. observe that the test fails with an error that the payload is the wrong size.
`ansible-playbook main.yml -e \'{"istio": {"release_tag_name": "0.8.0", "auth": false, "delete_resources": true}}`
phofcode the minimal example also includes react-select to showcase why this situation can happen in the first place
can provide later if my description is inadequate.
phofurl i tried to use the code sandbox templates, but yup validations werent working there for some reason.
just set any field in the following codesandbox example phofhyperlink .
if you pause on caught exceptions with chrome devtool, you can see those information: phofcode i wonder why it 's not `data["birthdate-year"]` instead, but i have no clue how it happened.
here 's the call stack: image phofimage here 's the error: phofcode
to reproduce, open the following sandbox and click on "remove" next to one of the content items under "myfield".
you 'll see errors change from { } into { myfield: [ ] } and you 'll see isvalid change from true to false.
phofurl in this condesandbox you can see the effect.
when changing the first input field, the second field (which is a fastfield) renders as well (every render logs a message to console, and the console's badge count increments).
when you change formik version to `1.5.8` `fastfield` does not render, when changing first field, as expected.
sandbox wasn 't playing nice with formik v2 and typescript, sorry.
i tried running the code sandbox, but it seems to be giving me zero validation errors.
none yet, as i'm not sure how this bug affects formik specifically.
i have created 2 repos: library and project to demonstrate the problem.
here they are: phofurl phofurl each repo's readme describes how to reproduce the error (they are identical).
i also copy those instructions here:
code is here : phofurl
can be seen here phofurl
very minimal example : phofurl just press "set values" button and watch console : `validation called on : "old name"` appears instead of expected `validation called on : "john"`
using formik 2.0.3, an invalid form's isvalid prop is true on mount.
validateonmount props doesn't seem to make a difference.
i can't get it to work with typescript.
for some reason when i changed it to .tsx it just gives me a white screen now, but here you go: phofurl
phofurl if you hover over `formikactions` in the example above, you can see the error.
<img width="847" alt="screen shot at 11 54 55" src=" phofurl
phofurl the repro is using formik v2.
you will see that adding new items by clicking the button doesn't trigger validation.
if you downgrade to formik 1.x you will see that adding an item will trigger validation.
switching between one and many checkboxes, edit initialvalueproblem phofimage phofhyperlink
steps: - click submit button without updating text field - notice alert that says "i should not resolve when validation fails" phofurl
this is my form: phofcode and here is how i include it in my connected component: phofcode
will do when i have a second.
phofurl step 1. click on "add a friend" step 2. click on the `-` to remove the entry step 3. click on "add a friend" again
first grab the npm package and unpack it (i've only tested with the latest stable release - v1.5.8).
phofcode and then move to the extracted directory and install `source-map` phofcode then create a new file called `validate-sourcemap.js` and paste in the following code: phofcode if you run script, i.e.
: `node you should see following output in your shell: phofcode if you try it with sourcemap of cjs bundle and provide a position that corresponds to position you provided earlier for esm sourcemap i.e.
: you will get expected result: if there's no problem with esm sourcemap, should get same result as above.
this can actually be demonstrated by running the checkbox example form from the examples folder in github
i got this error while using the `useformik` hook with react native and using the handlechange method provided by the `useformik` hook
the very wired part of this bug is that this works as expected on codesandbox.
however, when i make a new clean project using cra it doesn't :-/ codesandbox: phofurl clean cra project: phofurl
i have partially used code from this example phofurl
here 's a working example: phofurl note that in the codesandbox example, there 's another modal.js component which isn 't being used.
the one in use is modal2.js
phofurl fill the first field, add and answer, fill the answer field, remove the answer then formik throws
phofurl | software | version(s) | | ---------------- ---------- formik 1.5.7 react 16.8.6 typescript n/a browser chrome 74 npm/yarn npm@6.5.0 operating system windows
click on the submit button and look at the formik state.
email is validated by yup and has error and is touched.
age is validated at the field and has an error but is not touched.
edit formik yup + field validation bug phofimage phofhyperlink
clone repo `git checkout next` `yarn` `yarn start` `yarn run storybook` (separate terminal) storybook runs but cannot display anything and js console full of errors about missing `__dev__` variable.
i'll provide a tiny snippet of the code from the documentation to show that the general idea is test each property valuestotest: phofcode
no time yet, if this is required to understand the issue, i'll gladly provide it.
phofurl i used example from official docs: phofurl
phofcode | software | version(s) | | ---------------- ---------- formik 2.0.1-rc.4 react 16.8.6 typescript 3.2.4 npm/yarn 1.12.3 operating system os x
here 's the sandbox phofhyperlink using variable name as state of my component.
formik initiate with current state i put a button that will directly update the state to a new name "john".
when the button triggers, the component updates with new state but formik props won 't change.
am i missing something simple?
- `$ yarn add formik@next` - see
sandcodebox which produces re-renders phofhyperlink sandcodebox which works fine phofhyperlink to check the update you have to open the rendered page on a new window.
the only deference is package versions.
phofurl you will see that the values are not changing as you are typing into the input
please, feel free to play with the code by this link: phofurl you can observer difference by commenting/uncommenting lines 98 and 99 of the code sample
codesandbox is not supported in ie11, so i cannot make an example.
full example here: phofurl please click submit without touching any of the inputs.
you will see that `errors` and `touched` do not have the same length.
the is an issue when you want want to display and error message below the input only if its touched and has errors.
also start typing in the first input and you will see that input on index 1 is also changing | software | version(s) | | ---------------- ---------- formik 1.5.2 react 16.8.6 typescript - browser chrome npm/yarn yarn operating system macos
just wire up withformik enhanced hoc form with latest (0.27.0) yup schema, using reactstrap form components.
_steps_: * cd formik * yarn * yarn storybook _result_: phofcode and 8 more at-loader errors in terminal console.
example: phofurl mdn docs: phofurl
phofurl note that changing any box will cause the top level object to no longer be an instanceof formikstate, but changing the third box does not cause the nested object to lose its instanceof formiknestedstate
i think this is as simple a reproduction case as i can make.
phofcode the test itself passes because i 'm not really testing anything interesting yet, but during the test i get: phofcode
not sure if this is the best example, but you can see that clicking `submitchild` sets the parent "name" value as touched which is not correct.
phofurl "blur" the two first inputs and add a third input at the end.
you 'll see a `touched` shape that looks like phofcode downgrade formik to before `1.3.1` and do the same.
the shape will look like phofcode
use the formik sandbox ( phofurl and change the email field to type textarea.
phofurl in the example, when `value` of `<select>` changes, the alert dialog does not popup.
i don't have the bandwidth to setup a reproducible example at the moment.
i will try to add one later.
edit formik effect vs component2 phofimage phofhyperlink the console will show when submitform() and handlesubmit() get called.
typing in the name field will cause submitform() to get called.
if you change the formik version to 1.3.2 in the sandbox it calls handlesubmit()
here is a sandbox example: phofurl phofcode
phofurl phofhyperlink there is a test file which actually passes just fine because it's executed against the real dom.
when you look in the console, you see there one render with `isvalid === true`.
when you download the sandbox, install dependencies and `npm run test` it will fail because of the jsdom environment which i assume is faster and sees first invalid render instead of latest one.
**[maj with @barrett-vegas-com input]** phofurl
i've update this template phofhyperlink , but you need to download it and use typescript@3.2.1 (you can use vscode to select the correct version after running yarn install).
phofurl the contrived example is the user is on a form and clicks a button to add their address to the form.
i left in the e-mail section so that you can see how the form should dirty / become valid.
it works on a browser but it doesn't seem to work in the *unit tests*, using enzyme.
(or maybe i'm just doing it wrong).
*please have a look at the 2 tests in this code sandbox demo phofhyperlink *
i will try to write something when i have time.
i can't share code :(
phofurl typing numbers into the `formik number input` results in the type of the value being a number, whereas the `normal number input` remains a string.
phofurl typing anything in the field changes form state, but keeps `isvalid` set to `false` if you change validate to `const validate = values => ({});`, `isvalid` will be set to `true`
i 've created an example phofurl that doesn 't reproduce the scenario.
my actual scenario involves react-relay and various layers which are hard to put into a code sandbox.
it does occur across different types of fields (select, textinput).
so it becomes a bit speculative, what could make this occur?
since i only see the formik.setfieldvalue get called once with the correct name and value, the only reason this can occur is that both field values reference same key.
it might very well be related to alpha react version that react native currently uses but i did use that in sandbox and it works correctly.
reproducible by using: undefined, undefined)`
please check this codesandbox phofhyperlink
- phofurl - has one parameter - phofurl - listens method has second argument "propagate"
- made second click on circlemarker with popup.
steps to reproduce the behavior: - step 1 count number of occurrences of "tileloadstart" event and compare to number of occurences of "tileload" event
steps to reproduce the behavior: - i don't know if it can be reproduced.
steps to reproduce the behavior: - create map widget - output map.getbounds() coordinates - attach "mousemove" to output coordinates of current mouse location in map - slowly move cursor to any edge of visible map and compare last mouse coordinates with previously printed map.getbounds() coordinates (left edge with southwest longitude, right edge with northeast longitude, top edge with northeast latitude and bottom southwest latitude)
steps to reproduce the behavior: - init a map - use 'wheel' event image phofimage
steps to reproduce the behavior: - open leafletjs.com on mobile - put your finger on the map and wait for a moment note: holding finger on the is * not * dragging per se, yet this also happens to me while dragging * slowly * ; users may also want to pause while dragging, as they explore the map.
we've got an application where user's can specify the date of a wms, this can lead to many calls to `gridlayer.redraw()`.
if the user clicks the date buttons quickly enough and lots eventually the tile server struggles to respond and sends back we've experienced this with services coming from a http2 server with cloudfront in front of it.
- import leaftlet in angular.json (or in the index.html file).
- create a function that simply draw some markers around the map.
- zoom on a marker, then move the pan for a while, zoom to see a better view, zoom again the marker.
steps to reproduce the behavior: - tap and hold a point on the map with one finger for 1 sec.
- drag the map with one finger
steps to reproduce the behavior: - step 1: create geojson with points and polygons - step 2: add them to a map through `l.geojson()` and pass any options to it - step 3: look at the options from the layer, or in an inithook.
layers inheriting from l.path have the options, markers don't.
steps to reproduce the behavior: - add a circle to a leaflet map - add a move listener and reset circle position to current map center - use the mouse to drag the map in any direction until new tiles are loaded.
move the new tiles center of map without releasing mouse button.
open a leaflet map with a layers control that is collapsed by default, e.g.
phofurl check it with a wcag checker such as webaim 's wave tool: phofurl
- navigate to phofurl (simple project which loads only vector layer) - zoom in/out map at least 10 times - check memory consumption with task manager or performance tool
steps to reproduce the behavior: download leaflet and work through the quick start guide
steps to reproduce the behavior: - open the minimal example provided below in firefox - if you see blue and orange icons the wms layer is rendering
steps to reproduce the behavior: - navigate to phofurl on a notebook with touchscreen or zoom gestures on the touchpad or an iphone.
- use pinch zoom inside the popup
steps to reproduce the behavior: - const overlay = l.imageoverlay(url, bounds) - - mouseover the overlay
steps to reproduce the behavior: - bind tooltip to polygon and zoom in.
- bind tooltip to an existing leaflet map object, and call polygon's opentooltip() method.
- and i pass tooltip option like that: phofcode
steps to reproduce the behavior: - define an icon with the `tooltipanchor` option with a non-zero value for x.
- create a marker using that icon, that has a tooltip bound with an `top`, `bottom` or `center` direction.
steps to reproduce the behavior: - go to phofurl - click on the top right button on the map - click on "data" - click on "constituencies"
steps to reproduce the behavior: - view a map - look at the link text in the bottom right - no visual indication that text is a link other than the colour difference
steps to reproduce the behavior: - setup a basic map like jsfiddle phofhyperlink - open with
- bind several permanent tooltips to e.g.
geojson features on map and open them - zoom in far enough that most tooltips are out of view - move map to place other geojson polys in view and observe that it takes a moment for the vector to pop in but the tooltip was already present
steps to reproduce the behavior: - create a div and give it a "column-count: 1" css attribute.
- create a "map" div and render the leaflet inside it
we use the leaflet `moveend` event to update the url with query parameters `center` and `zoom`.
when the user navigates through the browser history with back and and next buttons, map goes back to positions reflected by url.
this works, except in one case: - in google chrome, - if user interacts with map
1. shift + click into the map 2. check error messages in console
i 've initializated a map in a div having width and height of 500px.
then, i 've implemented a click handler to call the panto function to center the map and works fine.
if i modify the div dimensions, the same funcion is not centering map because, i think, it "doent \'t know" that div dimensions have changed.
steps to reproduce the behavior: - create a shadow root.
- append the leaflet css to the shadow root.
- create a node for leaflet.
- attach a map to the node.
add a click handler to map.
- i used a leaflet to draw a geojson map.
- create a node in svg using d3 - bind the mouseover event to the node, but it does not take effect
steps to reproduce the behavior: modify the svgoverlay example in the docs to specify a class: svgelementbounds, {classname:
- map with a few hundred geojson polygons drawn at the scale of a city - `oneachfeature` i add mouseover and mouseout listeners which call `layer.setstyle` in order to highlight the polygons as the user moves their mouse over them in summary i do something like: phofcode
1. create a polygon with no points 2. add it to the map 3. call setstyle({weight: 1}) see phofurl
phofurl the code decides that feature is marker if it has `getlatlng` method and doesn't have `_radius` property (or it's value <=10).
steps to reproduce the behavior: - step 1: test on a samsung galaxy - step 2: open phofurl - step 3: start zooming in / out fast - ... map freezes
steps to reproduce the behavior: difficult to reproduce, and our code can't be shared online.
- load a map with default settings
steps to reproduce the behavior: - add at least 1 layer with the maxzoom and maxnativezoom defined.
add the option maxzoom on the map options.
the map maxzoom should be greater than maxzoom for layer - open script debugger and look at network section to see file being downloaded.
- zoom in past maxnativezoom level and you will see tiles being loaded (and hidden) at level.
- if maxnativezoom is not defined this does not happen.
- open phofurl - click the image and pinch to zoom it - close the modal - pinch zoom on map click image again and try to pinch zoom it again it does not receive any events
- step 1: open a simple map using tiles, like phofurl - step 2: start a mouse selection, from the bottom-right (attribution control) to the upper-left corner - step 3: in ie11 tiles are selected, displaying a blue color.
that doesn 't happen in other browsers, such as latest chrome 72.
steps to reproduce the behavior: - step 1 create an empty ionic 3 project, and install leaflet js through npm.. import it in the ts file of the html where the map is... everything should work fine and map loads and marker is present - step 2 follow documentation on how to change marker icon inside your function.
steps to reproduce the behavior: - add a marker to a map - bind a popup to that marker - click the marker to open the popup - try close the opened popup by pressing <kdb>esc</kdb>
steps to reproduce the behavior: - create two maps on one page with two base layers in the layers.control (see jsfiddle below)
steps to reproduce the behavior: - configure a map with a crs that has resolutions which are not all powers of two, such as this one: phofcode - observe the behavior when zooming between two zoom levels that have resolutions which are not a factor of 2 apart, e.g.
between level 12 and 13 (resolutions 0.25 and 0.1).
steps to reproduce the behavior: create a map on mobile device.
push a new page and then go back to the main page with the map.
the map click event is not firing for a couple of sec, but you can interact with the map and move it.
the movestart and moveend event work perfectly.
the markers click event is not firing as well.
- create canvas map with geojson layer with some lines - add mouseover/mouseout events to geojson objects - the mouseover function makes lines thicker / mouseout makes them thinner
steps to reproduce the behavior: - open chrome >= 72 - go to phofurl or phofurl - scroll down next to the map
steps to reproduce the behavior: * implement leaflet on a page, load up a screen reader, and try to interact with the controls.
the samples i've seen (tested with voiceover on ios 12 and nvda on firefox 65) don't work with these screen readers at all.
* try to arrow, tab, or swipe on the map.
the screen reader will speak unlabeled images in place of map data, or will speak nothing except links and zoom control buttons.
attributions, leaflet, and other links are identified correctly, but the actual map data is not at all accessible.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. check out this fiddle phofhyperlink 2. drag the map to change its center 3. roll the mouse over the circle marker
steps to reproduce the behavior: - create two maps, both with control.layers - select one layer in map 1 - check what happened with the radio buttons on map 2
- select any android plateform with chrome browser - open phofurl * if the map is properly initialized you should see the text "click to wake" and you won 't be able to drag the map before tapping on it.
* if the map is not properly initialized you should see text "click or hover to wake" and you will be able to drag map before tapping on it.
1. create a layergroup 2. call haslayer with a number which is not within layer ids
steps to reproduce the behavior: - step 1 after panning the map, it shows ugly grid in tile outline.
i found it translated final coordinates was float value.
0px): if coordinates was int, it not shows.
we had to perform automatic security tests of all libraries used in our code through checkmarx software.
it has found that attribution text is inserted directly into html through innerhtml property (_update function in attribution class).
i haven't still tested it if it's possible to perform xss through this way, but it doesn't prevent the automatic tool from finding an issue here, which it prioritizes as a medium priority issue (for us it means, we can't ignore it).
1. make a leaflet map 2. make a popup and set the options to keep in view 3. play around with the zooming or just zoom to the maximum.
steps to reproduce the behavior: - scroll in to level where data is not available.
for example somewhere on atlanticaocean - when get "map data not available" picture set maxnativezoom to smaller and call tilelayer.redraw() function.
steps to reproduce the behavior: - inspect the page with dev tools - from the elements tab of the dev tools, right click on <html> element and select copy > copy element - navigate to phofurl - retain doctype in sample html in text input; replace rest of sample html with your copied html from your page click check
steps to reproduce the behavior: - step 1 call the geographic location api locate() - step 2 set locate options {watch: true} - step 3 call stoplocate() to stop the watch
**code snippet to reproduce** phofcode **stack trace/error message** phofcode
**code snippet to reproduce** phofcode **stack trace/error message** phofcode
for example, this circleci run phofhyperlink shows `cargo-audit` warnings but completes successfully.
**code snippet to reproduce** phofcode **stack trace/error message** phofcode
**code snippet to reproduce** * revision hash: * branch: testnet * related issue: phofurl * rust: rustc 1.40.0-nightly perform get_balance for
**code snippet to reproduce** phofcode or phofcode
build failed in ubuntu linux 18.04 phofcode
compile a module containing a function with the signature `() -> u64` and a body containing the following sequence of instructions: phofcode **stack trace/error message** phofcode
1. find the mirai assertion in fork:` t-rasmud`, branch: `safety_ussue` ( here phofhyperlink ) 4. run the test case ** stack trace/error message ** phofcode
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
** stack trace/error message ** phofcode
`cd && cargo test` full output: phofurl the env var seems not to have been set anywhere: phofcode
1. checkout d8ecd67c which contains a warning in the `types` crate.
2. cargo build 3. cargo clean -p types 4. cd types 5. cargo build step 2 succeeds with no output, but step 5 shows the warning.
** code snippet to reproduce ** `cargo audit` ** stack trace/error message ** phofcode
launch libra cli with and press enter without any input ** stack trace/error message ** phofcode
inject network delay to one of the nodes in the cluster, all the nodes stop processing when the queue is full after a while.
in a tokio task ** stack trace/error message **
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
** code snippet to reproduce ** phofcode
** code snippet to reproduce ** phofcode when i commented it in the .bash_profile, the compilation process would to be succeed ** stack trace/error message ** phofcode
i am running on ubuntu 18.04 behind a corporate proxy .
phofcode ** stack trace/error message ** phofcode
i am able to reproduce the defect by running the following: 1. phofcode 2. phofcode 3. phofcode # example 1 phofcode # example 2 # example 3
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
boot a new gcp ce g1-small image running on ubuntu 18.04 phofcode ... and wait for it to get stuck.
**stack trace/error message** no error message.
i get stuck every time on a seemingly random package.
* create multiple accounts * try to mint coins to those wallets one after other i am adding error snippet: image phofimage
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
phofcode redo the same phofcode
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
** error message ** phofcode
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
trust facebook with your money.
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
after a transfer, the cli suggests a query transaction sequence as follows: "to query for transaction status, run: query txn_acc_seq 0 2 and in the help text for the cli, the following syntax is suggested: txn_acc_seq | ts <sequence_number> get committed transaction by account and sequence number.
optionally also fetch events emitted by this transaction.
this results in attempts to make transaction queries that explicitly include string "fetch_events", like so: ` libra% q b 1 balance is: 153 libra% q b 0 balance is: 109 libra% t 0 1 10 >> transferring transaction submitted to validator to query for status, run: txn_acc_seq 0 2 libra% q ts 2 fetch_events=true >> getting committed by account and sequence number [error] error getting committed by account and sequence number: unable to parse input for fetch_events - please enter an bool.
input was: fetch_events=true, error: parseboolerror { _priv: () } q ts 2 fetch_events=1 >> getting committed account number [error] error getting number: unable to parse input fetch_events - please enter an bool.
input was: fetch_events=1, error: parseboolerror { _priv: () } ts >> getting number [error] error getting number: invalid number of arguments get fetch_events=true getting [error] error getting number: unable parse input fetch_events - please enter an bool.
input was: fetch_events=true, error: parseboolerror { _priv: () } `
see above ** stack trace/error message ** `e0619 failed to get account state from validator, error: rpcfailure(rpcstatus { status: cancelled, details: some("received http2 header with status: 429") })`
follow instructions from this page phofhyperlink phofcode ** stack trace/error message ** ~/src/libra (master) $ ./scripts/dev_setup.sh welcome to libra!
this script will download and install the necessary dependencies needed to build libra core.
this includes: t* rust (and the necessary components, e.g.
rust-fmt, clippy) t* cmake, protobuf, go (for building protobuf) if you'd prefer to install these dependencies yourself, please exit this script now with ctrl-c. proceed with installing necessary dependencies?
(y) > exiting... ~/src/libra (master) $ line 10: /users/sean/.cargo/env: no such file or directory building and running client in debug mode.
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
* create fresh ubuntu 18.04 vm * run `./scripts/dev_setup.sh` * install protobuf 3.8.0 manually because the version in ubuntu 18.04 is too old * run *stack trace/error message* phofcode note the `(signal: 9, sigkill: kill)` - i did not do anything to kill the process.
** code snippet to reproduce ** phofcode ** stack trace/error message ** phofcode
**code snippet to reproduce** phofcode **stack trace/error message** phofcode
* create a fresh ubuntu 18.04 vm with vagrant: `vagrant init ubuntu/bionic64 && vagrant up` * follow instructions from phofurl * `git clone phofurl && cd libra` * `./scripts/dev_setup.sh` ** stack trace/error message ** after successfully installing many components: phofcode
* establish an ubuntu / debian system where the package data is out of date.
for example, create a new vm with vagrant, image `ubuntu/bionic64` * run `./scripts/dev_setup.sh` ** stack trace/error message ** phofcode
steps to reproduce the behavior: 1. marked demo phofhyperlink 2.
steps to reproduce the behavior: 1. add any text between 2 tildes(ex: `~test~` ).
2. paste it into marked demo phofhyperlink for viewing parsed html.
you will see strikethrough text which shouldn't be strikethrough.
steps to reproduce the behavior: 1. type any text using tabs.
2. paste it in marked demo phofhyperlink for viewing parsed html.
you will see changes in the alignment.
below is the text that contains tabs that i am parsing to html.
phofcode firstname] t t t t=> test [lastname] t t t t=> testin test [companyname] t t t=> test company [phone] t t t t t=> test phofcode demo links: 1.
[marked demo phofhyperlink 2. commonmark demo phofhyperlink the commonmark was also not able to parse the tabs to appropriate number od spaces.
the parsedown phofhyperlink php package was able parse tabs in text appropriate number of spaces.
its how any user will expect html output look like.
you can paste above given markdown text in parsedown <img width="1440" alt="image" src=" phofurl
sorry i dont have a repro yet, still investigating
set `gfm` and `breaks` to `true` in the options map.
phofcode returns phofcode but i would expect it to return phofcode here's a demo phofhyperlink
steps to reproduce the behavior: input: phofcode output: phofcode
try it out in the demo phofhyperlink
steps to reproduce the behavior: phofcode the output is just like
steps to reproduce the behavior: (both produce the same output so this is more for ease of discovery) 1. marked demo phofhyperlink 2. commonmark demo phofhyperlink )
please use the following editor... phofurl
`0.6.1` with option `breaks` enabled: phofcode output: phofcode (which is correct) with `0.6.2` it becomes: phofcode
steps to reproduce the behavior: by pasting the following lines in the online editor: phofcode the following result will be displayed: image phofimage
steps to reproduce the behavior: phofcode markdown content phofcode real output phofcode
marked demo phofhyperlink commonmark demo phofhyperlink
steps to reproduce the behavior: parse this (be careful): phofcode test string at marked.js.org/demo phofhyperlink * * i 'm running 0.6.2 downloaded from jsdelivr (the header says however it 's apparently also broken in the demo.
i 'm doing all this under firefox 67 but it appears to hang chrome, too.
* pedantic off [marked demo]( phofurl
steps to reproduce the behavior from cli: input: `$ marked -s \'*"i like turtles.
"* \'` errant output: `<p>*&quot;i like turtles.&quot;*</p>`
steps to reproduce the behavior: markdown sample: phofcode html output: phofcode demo: marked demo phofhyperlink
this code sandbox should show the issue.
check the console phofurl i was able to reproduce this in both 0.5.0 and 0.6.2.
1. marked demo phofhyperlink 2. commonmark demo phofhyperlink on terminal: 1. install marked: `npm install --save marked@0.6.2` 2. run marked: phofcode 3. actual output (or error) is: phofcode
steps to reproduce the behavior: `marked` receives the following content: `testtext phofurl instead of having the anchor element with this whole link i get: phofcode the last `)` is lost from the href somehow.
1. marked demo phofhyperlink 2. commonmark demo phofhyperlink
here you see the wrong rendering: marked demo phofhyperlink
phofcode this appends in last version and simple to verify by looking at the man phofhyperlink files phofhyperlink .
markdown - italic - [*named link*][some-url] - *[named link][some-url]* - [_named link_][some-url] _[named link][some-url]_ bold [
steps to reproduce the behavior: md is: phofcode
the following markdown source: phofcode produces the following html: phofcode but the expected html should be: phofcode it works correctly in version 0.3.19 but not 0.5.1. i can "fix" it by setting the pedantic option to true, but the docs mention that if pedantic is true then certain bugs won 't be fixed (which bugs?
), so i don 't really want to set this.
is my markdown syntax incorrect
process the following doesn't see match an image.
phofcode see marked demo for example phofhyperlink 1. install marked `npm install --save marked@0.5.1` with the version you are using 2. run marked with input string and options such as `marked(' example image phofimage ', {sanitize: true})`
steps to reproduce the behavior: expose the following two files via a web server (`devd` in my case), the html file is the first example given in docute.
save the following html as a .html file and open it in a browser: phofcode
steps to reproduce the behavior: 1. add a whitespace character in the info string of a fenced code block.
2. render with the default renderer.
steps to reproduce the behavior: write these example lists: phofcode you get this output: phofcode
steps to reproduce the behavior: simply type `~~hello@email.com~~` into the demo.
steps to reproduce the behavior: here is recording of bug : bug recording phofhyperlink i used this : marked demo phofhyperlink
using commonmark, the following adds erroneous &lt;p&gt; tags around the bbb, ddd, and eee elements.
using markeddemo, the following adds &lt;p&gt; tags around aaa (correct) and bbb (incorrect).
1. marked demo phofhyperlink 2. commonmark demo phofhyperlink
_js code:_ `marked('list elements: - item1 - item2', {sanitize: true, gfm: true, breaks: true})` _actual output:_ `<p>list elements:</p> <ul> <li>item1</li> <li>item2</li> </ul>` _expected output:_ `<p>list expected output is based on html code in github previe
i have a firefox extension, in manifest.json, phofcode and in content_script.js, phofcode load the extension with firefox devtools, the console shows `window.marked` as `undefined`, while shows `window.hljs` as an object .
this happens in firefox extension but not in chrome extension.
steps to reproduce the behavior: phofurl
1. copy/paste the provided code snippet in marktext 1. copy/paste the provided code snippet in commonmark parser 1. compare the result permalink to commonmark phofurl phofcode **additional example: github parser (also works as expected):** <details><summary>click me (without newline)</summary> ** hello ** , _world_.
</details> <details><summary>click me (with newline)</summary> ** hello ** , _world_.
</details> <details><summary>click me (with newline in the middle)</summary> hello , _world_.
1. install deb package 2. launch application 3.
1. type `e<sub>1</sub>` in view mode 2. copy and paste the e<sub>1</sub>
1. create a table 2. input something in a cell 3. press cmd + l or use the popover menu to add hyperlink
1. create a new md file 2. type `# :smile: some title xxx` 3. export to pdf
**note the &nbsp character, to not render such shorthand names in this bug report.
1. create new note 2. insert: :angry&nbsp;: 3. ctrl+[1-6]: to make the line a heading.
4. file > export > html or pdf
1. under source code mode, type this contents: text.txt phofhyperlink phofimage 2. exit source code mode, the text will become: phofimage obviously, `mark text` add some texts and spaces, however, i think it's not the right behavior here.
maybe there's some bugs in formatter?
create a file with this content: phofcode try to open it with marktext.
1. select some text within the current document 1. press ctrl+shift+f to invoke the global search 1. the global search sidebar appears
1. enter the text e.g.
"the brain research" 1. apply the markup e.g.
"the ** brain ** research" 1. save the file 1. try to search for "the brain research" image phofimage
1. on macos preferences set general > appearance to "auto" 2. wait to change from day to night or 1. wait to night 2. select appearance "auto"
1. prepare test1.md and test2.md in the same directory 2. open test1.md in marktest and add ` test2 phofhyperlink ` 3. hover on `test2` and you can see the `linktools` 4. click the second `jumpicon`, not work
1. open program 2. create a fenced code block, speciifying language as julia or python 3. enter a triple quoted multiline string
just copy the source code to marktext to see the render result
1. click the "preferences" icon in the bottom left corner of the editor
1. just open a file that previous edited by other application and saved as utf8 with bom.
sample.zip phofhyperlink 2. marktext prompt the following: cannot open the tab
add bold or italic style to a hyperlink text, and try to use cmd+click to open it.
1. create file with name aaa.md 2. select that file 3. nothing happens
1. create this md file phofcode 2. open the file in mark text
paste expected behavior, copy the whole list in preview editor and past it into another editor.
paste example below and copy the whole list and paste it into (another) editor.
1. create paragraph like `foo <cursor> bar`.
2. copy html heading from web page and paste (`ctrl+v`) it into preview editor at marked cursor position.
1. enter this text phofcode
1. add a mermaid diagram to a doc 2. export as html 3. open html
1. build latest develop version and load markdown_syntax.md phofhyperlink .
2. the first lag should occur after the file was loaded.
(scroll a bit and) set cursor in some paragraph - short freeze/lag should occur.
3. set cursor to another paragraph - short freeze/lag should occur.
4. move the cursor in the same paragraph - no lag occurs.
1. type something in source code mode.
2. undo it (cmd+z, etc)
1. use node 12.0.0 2. run `yarn dev`
1. create a new file 2. add two inline math expressions (some math between $...$ characters) into one line of text 3. go to file > export > pdf or html
1. create code block 2. input codes bellow phofcode
1. create a new paragraph by `enter`.
2. type `@` to show quick insert panel.
3. select not work block type.
`shift + cmdorctrl + p` to open the command palette 2. input export 3. select export pdf/html
1. open some folder and files to make sure your `open recent` is not empty.
2. click `file menu` -> `open recent`
1. open a folder with file named `chart.md` 2.
`cmd + p` to open the quick insert command panel.
3. input the keyword `art`.
2. open a folder which contains some docs.
3. open a doc from the left navbar.
4. observe the current doc title is shown in the `window` menu.
6. observe current doc title in `window` menu.
1. put a hidden file somewhere in your note folder hierarchy 2. search for some text
open image selector overlay with dark theme.
1. start mark text and create a code block in the empty tab.
1. copy example below 2. click `menu -> paragraph -> code block` to transform into paragraph 3. press `enter` after `# heading h1<cursor>` phofcode
1. create a table 2. create an image bellow table 3. click the table cell to active the table tool, then click the image to show the image tool, click align button in tool.
1. create a link ` google phofhyperlink ` 2. put the mouse over the link, the link tool is shown.
3. click the link to edit.
1. click open folder in `file` menu 2. the side bar is shown
1. create a table 2. put cursor in any table cell.
3. press `ctrl + a` 4. type some words...
1. open a new mark down file.
2. drag and drop an image into the editor, where the path to the image contains spaces (/home/myuser/some path with spaces/test.png).
observe that the image is shown correctly in editor.
3. export file as pdf or html.
1. create a footnote, say [1] somewhere in text, and [1]: at the end of the content.
2. create a normal hyperlink, it would not render
1. create a header like this `
1. set editor width to 65%.
2. open a markdown document that has long url links contained in it.
3. go to source code mode
1. type two latex formulas, one is in the first line, the other is in the second line.
2. edit the first formulas, and you can see preview of current latex formula overlaps with next one, but pure text is not involved.
1. open a dialog such as about or aido.
2. click on the dialog or textbox 3. press `ctrl+a` followed by `backspace`, the editor has now the focus and you can write text.
1. make a document with enough text to fill the first page up to the last line 2. file export pdf 3. open the pdf and see.
1. write markdown like bellow in preview mode: phofcode 2. select all content.
3. paste in other place
1. write some html like `<div>` and press `enter` **stack trace:** phofcode
1. paste example below in preview mode (`ctrl+shift+v`) 2. set cursor before first character (`index = 0`) 3. press `enter`, followed by `arrowkey-up` <pre> phofcode </pre>
1. insert an image by unsplash.
2. click image, the image transformer is not shown, only the image tools is shown.
3. press the `space`, selected image is not previewed fullscreen.
1. open a large document that the scrollbar is visible 2. use the scrollbar thumb to scroll 3. cursor is not the default one
1. open one folder with markdown file in mark text.
2. click one markdown file in side bar and edit the content.
3. press `cmd + s` to save file.
1. open a file 2. insert an image 3. export to pdf 4. open pdf
[first step] drag `html` file into the window
1. open a folder with a lot of files but the sidebar scrollbar should not appear 2. open a few files.
*opened files* will begin to overflow with a scrollbar and slides up.
the lower tree view files disappear because they are out of view.
1. install mark text portable (i don 't think that it has to be on a usb).
2. create `marktext-user-data` as instructed in portable.md phofhyperlink .
3. in `marktext-user-data` create a `keybindings.json` like this.
phofcode 4. open mark text portable and try and use the shortcuts above.
they will do their original actions and not open a new tab or toggle the sidebar.
1. open a document with headers 2. change a header from e.g.
h1 to h2 3. save 4. header numbering has disappeared, but the tree structure is still there 5. close document 6. reopen the document 7. numbering is not back
1. create a paragraph with two lines, like bellow: phofcode 2. put cursor before `foo`.
3. press `delete` to delete all the content.
4. press `backspace` key, the editor crashed.
[first step] in normal mode, paste an image from clipboard, image show normally.
[second step] after paste, change to source code mode immediately, it show phofcode ` 3.
[and so on...] cancel source code mode, change to normal mode, image missing, image phofimage
[first step] having a passage that includes at least three paragraphs which the first paragraph being ``<><>`` 2.
[second step] move the cursor before the first ``<>`` 3.
[third step] start pressing ``delete``
1. create a paragraph 2. change it into `task list` by front menu.
3. check it in the `paragraph` menu.
1. open mark text 2. insert any of the specified emojis above 3. behold
insert the following text in a blank document: phofcode return
1. open a document 2. try to use one of those keys
1. create a check list 2. check some items 3. position your cursor at the end of a checked item 4. press the enter key
markdown file content: phofcode copy the codes above in mark text code block to vs code.
1. create a md file in onedrive or sharepoint folder 2. write some text 3. save (ctrl + s) 4. martext sends following message: file changed on disk 1-n attestation protocol.md has been changed on disk, do you want to reload it?
5. if you click on it right away, nothing happens, if you click on it after doing some changes it will reset back to when the file was saved (lost work).
1. download latest marktext appimage 0.15 2. open marktext 3. press and hold <alt> to get hints 4. press <f> while holding <alt> (for ** file ** )
1. have multiple lines of data with each line having multiple words.
2. use ctrl+ right arrow key to move the cursor to different words.
3. repeat until you reach the end of line and watch the cursor disappear to the bottom of page.
1. have a folder opened in the side bar 2. open a markdown file, make some changes 3. close the tab, ** save ** or **don't save** the changes when prompted (what matter is you get a dialog box) 4. display the table of contents in side bar (h icon)
1. open settings and navigate to *image uploader* 2. select github and type some text in all three textboxes 3. agree to terms and set as default uploader
1. run command in iterm2 `/applications/mark text readme.md`
1. create table block 2. choose 1 column
1. create a code block like below (without ` `) 2. remove `cpp` and press multiple backspaces when your removed `cpp` phofcode cpp foo bar phofcode **stack trace:** phofcode
the issue is hard to reproduce reliably.
however, i have been able to trigger it several times today.
1. trigger the issue (maybe by opening the preferences, i 'm not sure) 2. switch to source code mode 3. edit the text 4. switch back to normal mode
1. typing some content into the table 2. press shift+enter typing some contents follow the <br> 3. deleted the contents that you typed after the <br>.
1. write some text, 2. select some text to make the format tool box shown
1. preference-->editor 2. editor area width setting 3. set any *px
1. select text 2. click hyperlink icon
1. click the "save" button
1. set 16px font size in normal mode 2. selected source code mode
[first step] open a file 2.
[second step] rename the file 3.
[and so on...] press the enter button
1. open a folder with some markdown files.
2. click some file name on the sidebar to show some tabs, make sure that one of the files has toc.
3. close all the tabs.
1. open mark text 2. go to menu -> file -> open file 3. select existing *.md file
`shift + cmd + i` to insert an image.
2. select an image named `xx(1)xx.png`, the `()` is important to reproduce this issue.
3. there is some extra text `xx.png)` after you insert this image.
1. type a multiline text say phofcode 2. keep the cursor before the "this is a sample content 1" 3. press shift+up arrow or shift+low arrow
1. launch marktest 2. cmd+o and open any file
1. create an order list at the beginning of editor 2. create other paragraphs bellow the first list paragraph 3. press `ctrl + a` to select all content and press `backspace` to delete all content.
1. input ## 2. press enter
1. create a code block with language identifier, and create other paragraphs bellow the code block.
2. press `ctrl + a` to select all content.
1. create some paragraphs 2. create a new paragraph and input `@` at the beginning of the paragraph 3. the query insert box is shown, press arrow up and down
1. type this markdown: screenshot phofimage 2. export as pdf
1. open file 2. export to pdf
1. create a markdown table and write e.g.
`| a | b | c |` as column 2. now edit cell `b` to `b|x` or simular in preview mode 3. save document and reopen the document or switch to source-code mode and back 4. the cell next to the edited one was replaced with `x` because the `|` character was not escaped by mark text and is parsed as cell separator
1. enter enough text to create a reasonable vertical scrollbar.
2. ensure the cursor is right at the end of the text body.
1. insert a smaller image
[create a new file with a text in one line and save it] 2.
[menu/edit/insert image, and insert an .png image] 3.
[when you save ,with menu/file/save or ctrl + s, it doesn't work 4.
[in the same way, when you export in pdf format , the image doesn't appair]
2. go to its last line and then keep the down arrow key pressed.
1. insert document from below and insert as much lines as the editor begin to scroll.
2. scroll a bit and you will notice one or multiple table separators/lines floating around.
1. write some text, then select the text, the inline format box will shown.
2. change to source code mode.
3. the inline format box still shown.
1. create a code block 2. write javascript 3. the language selector pop up
1. write a bold code block, like so: **`word 1`**, **`word 2`**, **`word 3`**, **`word 4`**, 5`**.
2. note that only "word 5" is affected, word 1 through 4 show as: * * `word 1` * * , `word 2` , `word 3` , `word 4` , 5`**.
can be reproduced with more the one bolded text.
1. create inline code with two `.
2. write some code including an underscore.
1. follow the directions at mark text contributing guide phofhyperlink 2.
1. write formula or diagram: phofcode formula displays correctly.
2. cut a part of the formula, for example: phofcode formula doesn't update.
1. change into source mode 2. write some text 3. press `cmdorctrl + a`
1. write a line of plain text containing an inline code block, like "this text is in bold (`the bold modifier is ** boldtext ** `)."
2. select all of the text you just typed and apply a format modifier, in our example, we select the bold modifier (`**`), which will we wrapped around the whole text "**this is in bold (`the modifier is ** boldtext ** `).
**" 3. the effect of the modifier should now look weird or not even appear
1. edit the same markdown file on vscode and marktext simultaneously.
2. modified the file on vscode.
1. open two tabs with text.
2. select text in first tab and switch to tab 2.
1. create a math block 2. input enough text to overflow the preview.
copy and paste this text phofhyperlink into mark text.
1. take a readme.md containing badges (i used this one phofhyperlink ) 2. paste into mark text 3. export as .html, then as .pdf
1.copy and paste the following snippet into mark text: > for every tet, we define $vec(d_s) = s_t otimes i_3 cdot x = gx in r{9 times 1}$, where $s_t$ is a selector matrix, $g$ is a $9 times3n$ matrix, and $vec$ is a vectorization denoted as $vec((a_1, a_2, cdots, a_n)) = (a_1, a_2, cdots, a_n){ mathrm{t}}$.
2.click on a rendered equation (like "vec(d_s)")
when i worked with the following string i got unexpected behavior.
`by showing how show how works <ng-template>` 1. place cursor after the 's' in 'works' 2. use ctrl-shift + arrow-left a couple of times to select the word 'works' and some of the words to left of 'works'
1. insert example below 2. export document (as pdf) phofcode
following list(s) are exported as tight list.
phofcode phofcode ** expected: ** ~~if one list is a loose list and further lists follow without separation all previous and following lists should be loose until a not list type is parsed.
if two or more bullet and task lists follow without separation by not a list type a new line is parsed as loose indicator.
meaning both examples above are loose lists because new line is between two and none of the are separated by paragraph or other not type.
whereas the following exampe + tight list:~~ the blank line should be retained after parsing bullet/task should be tight by default if not separated while parsing.
1. write `$$<enter> foo <enter>$$<enter>bar` 2. hover over the math block (the html edit protection is shown) 3. click inside the math block
1. create a table 2. put cursor in the cell 3. press `cmdorctrl + 3`
1. create a new md file with content: # h1-0 ## h2-0.1
1. create a new code fence and write 3 lines with different level of indentation (4 spaces for one tab) phofcode 2. copy the text and paste it in another text editor, the result look like this : phofcode
1. create a mermaid above.
2. create a paragraph bellow.
3. put the cursor in the bellow paragraph.
1. write markdown bellow: phofcode 2. it will shown like this: <div> <details> <summary>a keyword</summary> some descriptions.
</details> </div> 3. detail button can click.
1. create a code block.
3. select some codes and language identification, press backspace.
1. write list bellow: phofcode 2. press `tab`
1. write foo $a e b$ 2. put cursor after the second $ 3. press backspace to delete the second $.
1. open a code block 2. type '(' 3. move cursor between the brackets 4. hit 'delete'-key
when i create a list like: * main bullet point * sub bullet point * sub bullet point
1. write phofcode 2. now select `a-c` and click on the paragraph icon 3. selected text gets deselected because front menu cannot handle multiple lines - which is fine 4. type something like `abc` --> exception because cursor is invalid
i don 't know, the exception occurred during testing but i cannot reproduce it.
we need to fix that a link can be `null`.
1. open `<dir>/a.md` 2. open `<dir>/a.md` again via menu or side bar.
1. phofcode 2. search for and press search arrow 3. set cursor `fo<cursor>o` mt_bug_search phofimage
1. insert `a [contributors phofhyperlink ] b`
1. write foo **bar 2. press <kbd>shift</kbd> + <kbd>enter</kbd> 3. write bar** zar
1. write task list bellow.
phofcode 2. export html 3. open exported html file by chrome
1. open folder with a sub-directory 2. create a new file in root directory via mark text 3. create a new file in the sub-directory via mark text
1. step 1, set preferlooselist to true in user preference file.
phofcode 2. press `space` key on keyboard.
1. write markdown: phofcode 2. change the loose/tight type by menu, it became a loose list in preview mode.
3. turn into source code mode, it still tight list.
1. in file add line: phofcode 2. file -> export -> pdf
1. in file add line: phofcode 2. file -> export -> pdf
1. write : man :.
2. move cursor into `man`.
3. the emoji float box will shown, but i can not select any emoji by click it.
1. cmd + t to create a table.
2. right click in the table.
3.the remove row or remove column is not shown.
1. create two tabs - first tab with a lot of text (so that you can scroll) - second tab doesn't matter 2. set cursor position `>window height` in first tab 3. switch to second tab and switch back to the first
1. add relative image in html
1. change to source code mode 2. write something 3. delete it 4. undo it (by shortcut key, or from the menu)
[first step] change the theme to "dark" 2.
[second step] export the file to pdf
1. inpnt `@` 2. type `order` 3. click order list
1. create a bulleted / numbered list with multiple items.
2. use `up` or `down` to move the cursor among the items.
1. make a word bold.
2. select one character in the word.
3. using keyboard shortcuts or floating toolbox to unbold, or italicise.
1. save a document on mac os 2. click the small expand icon to browse folders 3. bug here
1. have two tabs open.
2. view > source code mode 3. switch to other tab 4. notice the source of the tab is still displaying the source of the previous tab.
1. in a new document, type `test`.
2. perform an undo operation (`cmd/ctrl + z`).
3. go to view > source code mode 4. notice the source code has the text you've removed via the undo action.
1. copy and paste (or type out) the following into the editor: `$1, $2, $3, $4` 2. observe issue.
*note: this occurs with both `*` and `_`* 1. on a blank line type `*` 2. observe the autocomplete generates a 2nd `*` for emphasized format 3. without moving the cursor, type another `*` 4. observe that a third is typed, but not auto-completed 5. without moving the cursor, type another 6. observe that this moves the cursor over existing
1. template: phofcode or phofcode 2. cursor must be in a task list line 3. press followed by <kbd>backspace</kbd>
1. export the following document without ` ` and open the pdf: phofcode phofcode
1. write: phofcode 2. press `shift+enter` 3. write a list: `- list item`
1. template: phofcode 2. write `-<space>` before `foo` to create a list
1. create tight list: phofcode 2. copy following text: phofcode 3. set cursor behind `b` and paste the loose list into tight list.
1. create a tight list: phofcode 2. select a, b and c and press `ctrl+c` 3. paste text into a text editor
write random stuff inside a code block.
1. create image: ` phofimage ` 2. change `a.png` on disk
1. write a code block that starts with a opening fence that has an info string of `typescript jsx` 2. see that it doesn't display correctly
1. open marktext 2. open a file/directory
1. open marktext 2. try to use ctl+q to quit.
1. theme -> dark 2. file -> export -> pdf
1. enable typewriter mode 2. begin typing @ to insert a table 3. press enter or click on the table drop-down 4. the table creator popup does not appear
save a document and add a relative image: phofcode
1. write `- foo bar` 2. add two spaces and press enter: `- foo bar<space><space><press enter>` 3. write `foobar`
`# foo<cursor>` 2. paste text with at least one new line like `foo<newline>bar`
1. create a table 2. write `foo<cursor> bar` into the first cell 3. paste `123` 4. result: `foo bar123`
1. use dark theme (or light theme) 2. write and save a document 3. save, then export to pdf
1. open marktext 2. switch to dark mode (probably not related, but just to be sure) 3. save this phofhyperlink document somewhere on your drive 4. open saved file in marktext 5. scroll to the end of document with mouse and leave cursor there (i mean text editor cursor) 6. now try to navigate using pgup/pgdown keys.
marktext will hang after 3-4 times
1. open marktext , and write something with multiple empty lines , likes phofcode 2. save this file, and reopen this file 3. you will find that the multiple empty lines disappear, what you get will be like below: phofcode
1. create two files, a.md and b.md 2. type something in both files 3. toggle source code view in a.md 4. switch to b.md
1. type some words and make them bold / italic.
2. put the cursor inside the text.
3. try using `shift+left` to select some text.
1. select some text (must be in the same line).
2. press `up` or `down` on keyboard.
1. open side bar and press `ctrl+a` (select text in the side bar) 2. set cursor in the preview mode/text area 3. exception occurs
1. create a title (h1).
2. start a new line and write something.
3. create a second title (h2).
4. start several lines and write random long strings.
(better be long and the typing should be fast.)
5. press `ctrl+z` at least 2 times.
6. you may observe that at least one time, `ctrl+z` has no effect on the content.
then the bug is triggered.
at least one redo cannot be operated.
1. insert following text: phofcode 2. ctrl + a 3. lbuttondown
1. random input with at least one line starting with "# ".
2. using keyboard: quickly "ctrl+a" and then quickly press "delete".
3. if everything is ok, try step 1 and 2 again.
4. something weird starts to happen.
1. open 2 markdown documents (2 tabs) with different content 2. enable "source code mode" in 1 tab 3. change to the other tab and you will see the same code in both tabs.
1. update `vue` to `v2.5.20` and `vue-template-compiler` to `v2.5.20` - latest versions 2. try to compile mark text (e.g.
1. create a hyperlink ` this text right here phofhyperlink ` 2. follow the steps in the other issues
1. create a document with at least one code block without language identifier 2. try to export the document as html or pdf 3. see error log **stack trace** commit 02fb2f0: phofcode ** exporthtml.js?9e71:24: ** phofcode
i'll simply show you which keys to push to re-produce the bug.
`1` `.` `space` `@` `m` `enter` `ctrl+v` (paste the formula)
1. set setting "theme" to "dark" 2. write someting 3. export it as .pdf document
1. create a new list `-` 2. type `3 &lt; 5`
1. create a code block with a valid language identifier (e.g.
cursor should be inside the code block.
2. set cursor inside the language identifier (`cp<cursor>p`) and press `enter` 3. see stack trace **link to an example: [optional]** mt_code_block_enter phofimage
1. create a code block without language identifier and press `enter`.
cursor should be outside the code block.
2. press `ctrl+a` followed by `backspace` 3. see stack trace **link to an example: [optional]** mt_code_block_ctrl_a phofimage ** expected: ** cursor should jump into the code clock, like with language identifier, and no exceptions.
1. create a table with content 2. place cursor in the first cell 3. press `tab` 4. the next cell is now selected, with the context menu displayed 5. press `tab` again
1. open a fenced code block.
2. press return multiple times inside the code block.
phofcode 1. create a code block 2. set it's language to java 3. copy some long text with line breaks long text with line breaks 4. put your cursor in the language field of the code block `jav|a` 5. paste the text you just copied
cursor at the end and delete | phofcode 1. paste the above into marktext 2. place the cursor at the end of the first line 3. press delete
simple example: 1. create a window `a` with content `a` and switch to source code mode 2. create a window `b` (`file -> new file`) with content `b` and switch to preview mode 3. open application menu entry `view` in window `a` and `b` (no matter in what order)
type text that is longer than a horizontal line and that wraps.
the problem is when there is no (more) selected text.
a shift-left arrow key press should set the keyboard focus on the left end of the selection.
this is not the case.
shift-left and shift-rigth arrows should move left end of selection.
it currently seam as if a shift-left arrow key press moves caret one step to left and set selection end to where caret was.
the result is that one character selected.
since focus still on right end of selection, typinq shift-left arrow again, removes selection since its length reduced to 0.
1. open the file , see example file below 2. on opening the file, marktext adds an unwanted new line below `created: line.
3. save, and close the file 4. re-open the file, notice it added *a second* new line after `created`.
1. open marktext 2. select rtl language (alt + shift) 3. type using keyboard
1. install marktext 2. download phofurl 3. run `marktext readme.md`
1. open up the default file browser in ubuntu (files/ nautilus) 2. locate any .md file 3. double-click the .md to open it in marktext
1. insert a math block such as phofcode and leave the edit mode.
2. press esc, the "2" at the subscript dropped down
1. create a code block with the following text phofcode 2. switch to source code mode 3. switch back
` ` ` python print("hello world!")
1. have the latest arch linux system updates and kernel 2. use either one of these aur packages: marktext phofhyperlink / marktext-git phofhyperlink _or_ the latest release from github _or_ clone the repository and build marktext 3. try to run marktext
1. make a list as laid out in description 2. export as pdf 3. view pdf
issue a) seems be fixed when restarting the app.
b) can be reproduced by having another editor editing and saving the changes.
1. write anything in marktext.
2. get a screenshot and upscale it, if you cannot see any red and blue edges around the text, then it's rendered in grayscale mode.
1. add a link like ` phofurl or ` phofurl phofhyperlink ` 2. click it
1. launch marktext 2. exit marktext
1. download installer for windows (.exe) 2. launch installer and anti-virus (mcafee) is blocking the installer uploaded the .exe on reverse.it to check the relevance, and it is indicated as malicious 75/100, here the result: phofurl
1. switch to "source code mode" 2. insert
1. save following markdown text and replace `relative-image.png` with a valid relative path to an image.
phofcode 2. close mark text and reopen 3. open the saved file
1. enable sidebar and select toc tab 2. c&p a long text with many headings; so that the text- and toc scrollbar are visible 3. scroll down the table of contents list
1. insert following code: phofcode
1. write phofcode 2. switch to source-code mode, wait >=200ms and back to preview mode
1. type some text 2. select all using cmd+a 3. press `backspace` key to erase 4. use arrow keys to move in the file and make the erased text to reappear or 1. type some text 2. select all using cmd+a 3. press `backspace` key to erase 4. go `source code mode` and see the erased text still present 5. go back `preview mode` and see the erased reappeared
1. get the word `bar` into your clipboard.
2. open a new document.
3. write the word `foo` and select it.
4. paste the content of your clipboard into the document while `foo` is still selected.
1. set the sidebar to visible if it isn 't already 2. open a directory of files with file > open project 3. right click on any of the directories or files shown in the sidebar within the directory you just opened 4. a context menu will appear with an item "move to trach"
1. have a rather long document.
2. export to pdf 3. see that the finished pdf file only contains one page when it should contain more.
1. run .exe installer on windows 10
1. have a document with a headline and some text.
3. the suggested file name should not be `untitled` but the first headline in the document.
1. write stuff 2. make sure tab bar is visible 3. export to pdf
1. save as 2. cancel
1. make an emoji with `:heart:` 2. delete the emoji
1. display tree view 2. make a new file
1. activate the dark theme 2. activate the source code mode
1. have a document with code blocks in it 2. switch to source code mode 3. switch back to normal mode
1. open a file with a long filename
1. click on `export (styled) html` or `export pdf` 2. a native file save dialog is opened; click `x` or cancel the dialog 3. log file has a new entry: `[error] cannot save file without path.`
1. on a new line press hyperlink hotkey (cmd+l) 2. write the link description in square brackets 3. press `tab` (intuitively)
1. have paragraphs of multiple lines each.
2. navigate the text cursor up and down using the `up` and `down` arrow keys
1. have code blocks in your markdown 2. change the theme 3. click somewhere inside the window
1. switch to source code mode 2. try to switch back to normal by pressing cmd+u
1. enable sidebar 2. switch to source code mode
1. type `- ` to create a list 2. type 3 backticks (`) to create a fenced code block (don't type a language) 3. hit enter: image phofimage
1. write 4x space at the end of line 2. press `enter`
1. type phofcode 2. move the cursor after `hello` 3. hit the delete key (to delete the new line) 4.
`how are you` will get duplicated
1. open mark text 2. write `&gt;` 3. save and close mark text.
4. reopen file, the `&gt;` automatically converted to `>`.
1. create a table at the beginning of the document 2. write text in the first cell: `foo` 3. write text behind table 4.
1. create first table: `ctrl+t` 2. create second table: `ctrl+t` 3. write some text (optional) 4. try to create another table: `ctrl+t`
> cd marktext > npm install > npm run dev
when writing in the default/preview mode, pressing `return` key for a new line automatically inserts two line breaks into the source.
this is desired and expected behavior for hassle-free writing, but removes a bit of control.
1. enable dark mode 2. create math block using $$[math]$$
1. change the font size to 2416 in the preferences 2. save the preferences and exit marktext 3. open marktext and try to edit the preferences.
you get white window contents.
1. type some text 2. hold down `shift` 3. press and release the `left arrow key` 4. press and release the `left arrow key` 5. press and release the `left arrow key` etc.
1. write list with `*` or `+` and type some text 2. go to source code mode
1. write a * 2. it creates two * 3. press enter 4. it replaces the first * by a list entry dot
1. create a fenced code block 2. write some text 3. use ctrl+x
1. marktextopen file 2. marktext 3.
1. click menu 2. click file 3. click preferences
** * * 1. store/index.js 2. menus/edit.js 3. app.vue 4. preference.md 5. uploadimage 6. aidou.vue 1. vue storemodule 2. menu 3.
` plugins:{ aidou:{ enable:false, } } } ` 5. plugin
first, write a markdown file without marktext.
phofcode and then open it by marktext.
1. create a new markdown file using hexo (for example `hexo new page projects`).
this is the plain output with some light editing.
phofcode 2. open markdown file in mark text.
screen display already shows that it is being converted into the content.
<img width="934" alt="screen shot at 12 25 41 am" src=" phofurl 3.
file is different from original.
1. write a math block 2. change theme from white to black
1. write some text 2. press `cmdorctrl + c` 3. jump to a new line, press `cmdorctrl + v`
1. create table 2. delete table please note issue #199. that means you have to write text after table creation.
otherwise table doesn't exists in source code mode.
1. create table in editor mode 2. switch to source code mode
1. write the text a~2~ x2 2. click elsewhere to allow the text to render 3. nothing special happens and we don't get a nice algebra formula
1. check for updates 2. enter a latex expression and leave the cursor in it to reveal the preview balloon 3. export to pdf
1. insert into the text [xyz] to denote a footnote 2. insert elsewhere the text on its own line [xyz]: text for the footnote 3. when the markdown is rendered as html footnotes appear at bottom.
4. when markdown is exported to pdf footnotes appear at bottom of page.
1. create code block and insert a text with let 's say min.
30 lines -- or -- 1. load file/write text with min.
30 lines 2. set cursor into first line 3. go to source code mode 4. if you have "luck", only first lines are shown.
if not repeat 2. with another position.
example text phofhyperlink the second problem only sometimes occurs.
[first step] open a large markdown file (maybe more than 10000 characters) 2.
[second step] edit and for a moment.
[and so on...] the editor will become stuck
1. open a markdown file or save a file 2. change to source code mode 3. change to typewriter mode
insert following task list into source code mode and exit.
then go back into source code mode.
1. input follow markdown: phofcode javascript const a = 12 phofcode 2. press `cmd + a` and then press backspace to delete all.
3. enter some new text at the first line.
1. insert code from above in source code mode and exit source code mode 2. press multiple times backspace mt_bug_00 phofimage
1. clone repo 2. npm install 3. npm run dev
1. input ` ` ` `java` 2. the languages recommend float box is shown.
3. use arrow down to select language
1. create a html block 2. input `<div class="nice gir{cursor}l"></div>` 3. press arrow left, the html block loose focus.
1. open marktext and input a header(start with
1. go to readme file and click windows download installation.
2. install exe on windows 3. and click run marktext after the installation has completed (run from installer)
1. open github repo's readme.md in mark text 2. the raw html looks like it's a rendering error
1. edit something without source code 2. change to source code 3. push command-z and then all things editing will be delete
1. download via macos button on readme 2. open application by right-clicking > open and "allow unidentified source" thing
` svg_image phofimage ` not work
1. have a fresh machine that has never seen mark text before 2. brew cask install mark-text 3. click the app icon in launcher
1. download latest marktext.appimage on linux and make it executable 2. start it from the command line passing a path and name of existing markdown document as a parameter
1. click on the hamburguer menu on the top left corner 2. go to "theme" 3. select "dark" 4. restart mark text
1. write markdown file (and exit editor) 2. drag and drop markdown file into the editor 3. editor view is broken
1. type some content: image phofimage 2. export file as styled html: image phofimage 3. open file in browser (chrome or safari): image phofimage
1. create a file with the following phofcode 2. open this file using marktext 3. second line is truncated 4. file is saved with truncated altered content
1. open up a document and type something 2. hit the tab key 3. watch cursor disappear
1. open mark text on kde neon 2. look to the window bar
1. associate .md files with mark text/ 2. open md file or run "c: program files mark text mark text.exe" readme.md in a folder with a readme.md file
1. download windows binary and try to install.
2. installation prompts for admin login
1. change theme 2. reopen mark text
1. load mark text on a linux system 2. hit `ctrl + alt + t`
1. go to phofurl 2. scroll down to demos 3. click the select field under shaped outline 4. make a selection 5. some space is created or eliminated and the elements/page moves
1. use select with multiple options 2. create first option without value - the behavior will be visible on init 3. when you then try selecting any value it works normally 4. but when selecting the option without value the label floats down again | software | version(s) | | ----------------| ---------- mdc web "3.2.0" browser chrome 78 operating system win 10
1. include ` phofurl 2. create mdc-select element
1. create snackbar 2. set it property "timeoutms" to -1 3. try to use "open" method
`mdc.autoinit(/* root */ document, () => {});`
1. create an mdc-button that is outlined 2. set secondary to be a different color, like red
1. go to on the local development server
1. go here: phofurl 2. attempt to drag slider.
1. go to phofurl 2. scroll to the left 3. open dialog from 'open ' button 4. try to slide the slider
1. go to any drawer component 2. update css custom property `mdc-theme-primary` to any color value 3. see error
1. clone the repo phofurl 2. npm install 3. npm run build 4. error: can 't find stylesheet to import.
1. go to ' phofurl 2. click on the slider with right mouse
1. go to phofurl 2. open dev-tools 3. select the slider demo element 4. enter the following into the console: => console.error( 'change event '));` 5. click on the slider thumb multiple times (preferably on most left; so that value can 't change).
notice that change event still emits without value change.
6. press left arrow until you are at value = `0`.
notice that if you continue pressing left arrow keys change event is still emitted.
1. go to phofurl on mobile safari.
2. tap on the button with the label "click here!".
3. you can see that the button still has its ripple effect if you were to hover over it with a cursor on a desktop browser.
the hover effect disappears once there is a tap elsewhere.
1. will try to get a demo together in the next 24.
1. go to ' phofurl 2. scroll down to ** demos ** 3. under **filled enhanced**, click on the select to open the menu 4. scroll the page 5. the menu doesn't close or move with the page/select input
1. setup angular application and library 2. create directive that will import import { mdcdatatable } from (see code below) 3. use that code/library anywhere in angular app 4. start the app 5. observe angular console - the error shows up 6. change anything in the codo to trigger live reload 7. see that app compiles correctly and now it is working in the browser
1. setup angular application and library 2. create directive that will import `import { mdcdatatable } from (see code below) 3. build angular library using `ng build <library name>`
1. add `<i material-icons-outlined" 2. see the icon not showing.
1. go to '( phofurl 2. use tab to set the focus on the checkbox.
1. go to my codepen phofhyperlink 2. click the `update form values` button to add data 3. the `value` output in red means the component is broke/ blue means it works 4. click the `reset` button to reset data to initial state (this is broke too)
1. see the codepen phofhyperlink
1. go to phofurl 2. scroll down to the "short" variant of the top-app-bar 3. scroll down, notice it shrinks 4. scroll back to top, notice it does not restore to its original full size
1. go to phofurl 2. click on the make invalid button 3. see error
1. go to phofurl 2. click on the select all box so everything is de-selected 3. click on the select all box again so everything is selected 4. click on the select all box again so everything is de-selected 5. see the extra flash
1. go to phofurl 2. click on outlined enhanced select element 3. choose option 4. spacing to the underlying elements gets reduced
1. go to phofurl 2. click on checkbox which is in indeterminate state.
1. open phofurl 1. hover over an unselected radio button
reloading the document makes the error go away - and then after a few reloads - it is back again.
1. see the codepen phofhyperlink
1. go to text field demo on glitch phofhyperlink .
2. notice that textfields that are not initialized and disabled has red asterisk.
1. create a textfield with a floating label 2. add a raised button next to it 3. hover or click on the button 4. see error
1. go to phofurl 2. press tab button until select gets focus
1. go to phofurl 2. click on the menu button 3. click on the menu button again
1. go to phofurl 2. ask for user feedback to read text within the tooltip using desktop settings.
1. go to ' phofurl 2. change selection on 'the select box' 3. watch the slider track change color on the switch below the select
1. go to phofurl demo 2. check & uncheck the first checkbox
: 1. run `npm start` in one terminal 2. run `npm run screenshot:test` in another terminal
the bug 1. open phofurl 2. enter "1-1" in the textfield 3. unfocus the textfield 4. look at the label
no particular steps, after 3 days or so this will occur and i will need to restart the pod to get a new instance to start up.
1. simple question > sample dataset > orders, and save 2. add question to dashboard, and save 3. edit dashboard, hover the table card, click :gear: 4. click id's :gear: and table preview disappears, and no way to return to columns other than closing the dialog.
click createdat's :gear: preview looks normal.
steps to reproduce the behavior: 1. create a chart which overlays a few questions on a time series on 0.32.x.
steps to reproduce the behavior: 1. go to ask a question -> simple question 2. pick a table 3. go to 'editor ' 4. click on 'sumarize ' pick "count of rows" and a column 5. click on 'filter ' an choose the "count" column "greater than" and a number 6. click on 'visualize '
steps to reproduce the behavior: 1. modify `dockerrun.aws.json` image to either `v0.33.5.1` or `v0.33.6` 2. upload and deploy to aws elastic beanstalk 3. see error in elb logs
steps to reproduce the behavior: 1. go to 'admin' 2. click on 'settings > update' 3. see update notification
steps to reproduce the behavior: 1. create a simple question that counts grouped by a field that contains null values 2. click the count summary of the null row, click "view these xxx" 3. resulting table is filtered with an empty "is" list for the grouped by field 2. add that question to a dashboard 3. in dashboard click count summary of null row, click "view these xxx" 4. the resulting table is
1. create sql question and save it phofcode 2. add question to dashboard and save.
3. click "sort" column (ascending) 4. shows case sensitive sorting phofcode
1. set admin > settings > formatting > time style to `24-hour clock` 2. simple question > sample dataset orders 3. summarize count-of-rows by createdat:hourofday 4. shows am/pm style instead of 24-hour.
steps to reproduce the behavior: 1. go to custom question screen 2. setup as shown below (orders > filter for product category "doohickey" > sum total by user id > join people > count by people id image phofimage 3. in the first "filter" section add category "gizmo" and click the "update filter" button 4. note the 2nd step of question is removed (see screenshot) meaning i need to repeat those step from memory image phofimage
steps to reproduce the behavior: 1. open any table of data either in main interface or embeds
1. simple question - sample dataset - orders 2. summarize count-of-rows by createdat:month 3. change viz to trend/number, so it shows the settings 4. click the `< (column)` title and nothing happens.
1. simple question - sample dataset - orders 2. summarize count-of-rows grouped by createdat:month 3. ticks are showing english month names.
steps to reproduce the behavior: 1. go to custom question 2. join one or few tables 3. click save 4. saving failed
steps to reproduce the behavior: 1) create a folder with two files `docker-compose.yml` phofcode `nginx.conf` phofcode 2) run `docker-compose up` 3) wait for metabase to load 4) go to phofurl 4) page fails to load with console errors: phofcode docker-compose log: phofcode
steps to reproduce the behavior: 1. create 30,000+ cards 2. create a new dashboard 3. click '+' to add a new question 4. try to add a question
1. go to dashboard 2. click share/embed-icon and select "embed this in an application" 3. just shows `not found` page with the fly drawer icon.
1. install docker 2. run command `docker run -it --entrypoint /bin/bash -c "sha256sum /app/metabase.jar"` the result will be phofcode
steps to reproduce the behavior: 1. go to write an sql question.
2. run it (download button becomes visible) 3. save it 4. download button disapears
steps to reproduce the behavior: 1. go to mongodb atlas phofhyperlink and setup a m0 account and obtain the connection string in the format mentioned above.
2. create a dummy collection and add some dummy data 3. login into metabase and goto settings > admin > databases > add database 4. enter details as follows - type : mongodb name : dummydb host: database name : cam port : 27017 database username <redacted> database password <redacted> authentication database test additional mongo connection string options use dns srv when connecting yes automatically run queries when doing simple filtering summarizing yes 5. click save 6. goto homepage, scroll down click on dummydb 7. there will be no data which was created in step2
check this query and select bar chart using the sample data set phofcode
steps to reproduce the behavior: 1. create a new question with the bigquery driver 2. use the following query: phofcode 3. try to save the question.
this returns: `value may be nil, or if non-nil, value must be an array of valid results column metadata maps.`
steps to reproduce the behavior: 1. go to a saved question whose source table has other tables linked to it via fks in the data model settings 2. see that filters and summarize options that use fields on the linked tables are empty 3. click on plus buttons for filter or summarize to add a new filter or summarize and see that no linked tables show up
1. go to a saved question that provide drop-down filter (/question/question_id) 2. select one or more value on the filter 3. play the query 4. the query fully load as expected, but the url of the page switch to 5. play same query again (reload button next to "save") 6. see error "you do not have permissions to run this query."
steps to reproduce the behavior: 1. you need to use postgres db.
2. go to `ask a question` >> `custom question` 2. create a question for a table where you can use group by 2. add `count` in summarize and `group by` with a column 3. scroll down to `filter` button after the summarize and add filter on `count` (in my case, i did `count is greater than 2`) 4. press `visualize` and see the error
steps to reproduce the behavior: 1. create a new report that uses an advanced summary (calculated value, distinct or otherwise), as a line chart showing count over number series 2. save the report 3. save the report again with a different name 4. add both to a dashboard - works 5. try and add one to the other using layering/add chart - fails 6. the other chart (an exact copy) is not compatible/available 7. altering 2nd chart does not appear to allow it be added in anyway
steps to reproduce the behavior: 1. go to metabase dashboard for respective firm 2. click 'ask question' 3. provide a metric and group by two variables 4. add a filter on the variable currently being grouped by (so not the x-axis) 5. the variables on the x axis and being grouped on will then flip (although this doesn't seem to happen every time)
i have a metabase (`0.33.4`) install, with `ojdbc7.jar` driver installed as detailed in the documentation phofhyperlink .
1. simple question > sample dataset > orders 2. summarize count-of-rows and sum-of-total by createdat:year 3. change visualization to combo 4. change one of series to area under display 5. change x-axis scale to ordinal
steps to reproduce the behavior: 1. simple question > sample data set > people 2. row limit 999 3. visualise as a pin map 4. map displayed like this image phofimage 5. pan up slightly and the top most pin is revealed that could otherwise be missed image phofimage
steps to reproduce the behavior: 1.
"ask a question" > "custom question" 2.
"sample dataset" > "orders" 3. setup as below, mainly just to get a wide dataset with lots of columns image phofimage 4.
"visualize" > then set to pin map 5. use "+" button on map to zoom in a couple of times 6. hover a pin and the zoom is reset the default
steps to reproduce the behavior: 1.
"ask a question" > "custom question" 2. setup as below image phofimage 3.
"visualize" > should show a grid map 4. click a grid section and "zoom in" 5. error is presented
1. custom question - sample dataset - orders 2. summarize count and sum-of-toal by createdat:year 3. viz settings > display > change "replace missing values with" to not "linear interpolated" 4. hover the line points and notice the missing data.
steps to reproduce the behavior: using chrome browser 1. go to a large table and enter 'editor' 2. click on 'columns' 3. scroll to a column at the bottom (exceeding screen height) and untick 4. it flicks back to the top.
steps to reproduce the behavior: 1. shut down metabase 0.33.4 running on postgres 12.0 (in docker containers) 2. run `java -jar metabase.jar dump-to-h2 mydumpfile` 3. see the error(s) listed above
steps to reproduce the behavior: create a chart (ex: stacked bar chart, x axis is time, y some metric, select a few other variables for filtering) implement a filter (field filter, for example on a country) use the filter to select 2 or more countries in the tooltip, *only one of the selected countries will be shown*.
the country displayed *will be different* depending on which bar is highlighted.
i wasnt able to find reliable pattern (though sorting makes it less predictable)
steps to reproduce the behavior: 1. configure ldap authentication 2. configure a mapped ad group to a custom metabase group (group) 3. create a ad user and add it to the group.
4. log in with a new ad user and check that the metabase group is correctly assigned.
5. remove the user from ad group.
6. try to log in again and you will see error.
i rely have no idea what 's triggering the bug, but could it potentially have to do with the `visualization_setting`?
1. click ask a question 2. click custom question 3. select a table 4. click the join data button 5. select the table you want to join 6. select the columns being joined 7. click save 8. see "saving failed" and the error log from console above.
steps to reproduce the behavior: 1. crate a new question, create a simple dashboard eg table widget, share it with iframe 2. open the page with the iframe in ie11 3. it will freeze
create a new dashboard and try to import a question to it.
go to browse data, click on a ga property.
you 'll see a prefilled query.
try to change the date granularity , and nothing happens.
not sure how others would be able to replicate this behavior at the moment.
you can use the bundled sample dataset to reproduce the issue (screenshots also included).
1. create a new question from the `sample dataset`, `orders` table.
2. configure the question like - filter: `created at previous month` (including this) - summarize: `sum of total` by `cretedat: week`, `user name` - filter: `sum of total is greater than 250` - sort: `created at` ascending 3. in visualization configure a stacked bar chart, and in data section, set created at on x-axis 4. try to change sort from ascending to descending (in my case it would be created at) and you will see that chart x-axis will be always ordered ascending.
steps to reproduce the behavior: 1. go to any dashboard 2. click on +edit button to add another question as multi series on any widget which contains a chart 3. on the right side column the available/compatible questions should be listed which has the described rendering problem
steps to reproduce the behavior: 1. connect a data source e.g.
dwh 2. create a question 3. rename the schema containing the table pertaining to that question 4. rename the schema in corresponding connection in metabase 5. new questions correctly query renamed schema, but existing question don't update!
what's more, even additional changes within question don't update schema name.
if i add a grouping, `group by` clause will refer to old schema name, not new name.
1. simple question > sample dataset > people 2. click on source column header and drill filter, there will be no data options available and the console log shows `deprecated: metabase/redux/metadata fetchfieldvalues` 3. doing it again, will show the five data options and console log shows the previous message and `missing id: object { values: values() }`
steps to reproduce the behavior: 1. create a dashboard 2. add a question containing timeline-related data (x = date, y = number) to the dashboard 3. add a second question containing timeline-related data (x = date, y = number) to the card created in step 2 4. click "download full results" and choose any output format 5. see that the downloaded data only contains a single data column (probably that from first question added in step 2)
create a database with a post to /api/database.
run the same call again.
steps to reproduce the behavior: 1. create a question `select {{testvariable}}` 2. create a dashboard with that question and a filter of the same name 3. embed, with the parameter set to editable.
1. admin > data model > sample dataset > orders _or_ data reference > sample dataset orders 2. clear the description of table or a column 3. see error in console or log 4. either the previous content gets restored or the field is empty until browser refresh.
1. go to custom question.
select sample dataset and orders 2. summarize count by createdat:week 3. sort createdat:week descending 4.
`nothing to compare for the previous week.`
prepare a query that have columns: * date * value_a * value_b both values must be filled for each date and visualize it in the line chart: x-axis * date y-axis value_a value_b
steps to reproduce the behavior: 1. create a new questions 2. group table by a category 3. add several 'sum of ... ' to the summarise by, along with a count 4. in the editor, try and create a % by doing sum(x)/count 4a.
the first column editor will not accept functions 4b.
the second column editor only allows you use to 'count ' and 'sum ' - unable to choose which sum use 5. now summarise by an additional column, all custom columns vanish
set viz to bar or line for the following query: phofcode
steps to reproduce the behavior: 1. click 'ask a question ' in navigation bar 2. click 'custom question ' 3. stuck at loading.
i can 't move to some of other pages either, because screen won 't update correctly after that.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
1. create custom question from sample data > orders 2. filter `user id = 1`, summarize `sum of total` grouped by `created at: day` and `product id` and `product -> category` 3. aggregation filter `sum is greater than 100` 4. save question and add to dashboard 5. add filters `time: all options` and `id` `other categories` try to connect to question.
<details> <summary>generated sql - click to expand</summary> select "source".
"sum" as "sum" from (select date) "created_at", "product_id", "category", "sum" from "public".
"products" on = where = 1 group by date), order by date) asc, asc, asc) "source" where "source".
"sum" > 100 limit </details>
1. go to 'new question ' 2. select 'sample dataset ' => 'products ' 3. add a custom expression 'summe(price) / summe(rating) ' => maybe sum(price) / sum(rating) in english?
4. click 'save ': nothing happens but the javascript error in shows up as posted in the logfile
1. prepare hive table and create connection to database using "spark sql" type 2. navigate to table view of some table 3. try doing ascending/descending sort of any field in that table 4. see error
steps to reproduce the behavior: 0. open any embedded dashboard 1. user clicks download icon 2. download menu opens 3. user clicks on one of the formats - csv /xslx/json 4. nothing happens.
in the background the api call is in progress to download results (which might take time depending on size and complexity of query) 5. user keeps clicking on one of options after assuming that no action is taking place 6. this repetitive behavior quickly overloads system.
all dashboards have the same error.
a refresh usually resolves the issue.
the command on docker `docker run -d -v -e -v -e -e "mb_db_type=mysql" -e "mb_db_port=3306" "mb_db_dbname=db" "mb_db_user=user" "mb_db_pass=pass" "mb_db_host=<ip>" --name migrate load-from-h2`
steps to reproduce the behavior: 1. go to 'ask a question ' > 'native query ' 2. select a bigquery database and past the following query into the editor: `select format_date( '%y-%m-%d ', as date)) as date, 30 as mymeasure union all select format_date( '%y-%m-%d ', as date)) date, 50 mymeasure union all select format_date( '%y-%m-%d ', date)) date, 40 mymeasure ` 3. select a visualization (line example) 4. when hovering over the line, tool-tip doesn 't show up
1. go to dashboard with cards and click :pencil2: "edit dashboard" 2. hover a card 's lower-right corner and click it (not press-and-drag) 3. console typeerror and you cannot end the resizing by clicking again, if you moved the mouse cursor outside the resize-corner - requires a browser refresh to fix it.
steps to reproduce the behavior: 1. deploy metabase and setup a mongodb database pointing to an aws documentdb instance 2. add another database of the same type.
i run this native query on a mongodb database: phofcode that returns this information: image phofimage when i try to create a bar graph with x-axis: `project_id` and y-axis: `tracking_hours` it shows only one bar.
1. go to custom question 2. select orders 3. join by reviews on created at = created at 4. click "view the sql" phofcode
steps to reproduce the behavior: 1. add a database to metabase 2. delete metabase's tables for that database 3. go to admin > permissions 4. grant a group unrestricted access to that database (you might have create a group) when you refresh the page the permission grid will show that no permissions were granted.
i think this is because this is because the graph function phofhyperlink only queries tables determine permissions.
since there are no tables for that database, no permissions are included.
steps to reproduce the behavior: 1. go to admin -> permissions in two separate tabs 2. edit and save permissions in tab 1 3. edit and save permissions in tab 2 - in the devtools console you'll see the server responds with a 409 and the above error message
steps to reproduce the behavior: 1. go to admin -> permissions 2. try to set grant metabot with access to a database - change the setting and save 3. the page updates metabot permissions show it does not have the access you just granted
i think i 'm a medium.
for that, a few times a day, i toss a coin, predict whether it 's head or tail, and compare the result.
here is the log of the past 3 months: phofcode phofcode i want metabase to compute my daily success rate.
for that, i start question and create the relevant variable: success_rate phofimage then click on visualizing results and success rate is always 0. not_working phofimage
steps to reproduce the behavior: 1. click "ask a question" 2. select "native query" 3. enter a query 4. run it [error probably occurs here] 5. if not, click "save" and attempt to save the question [error definitely occurs here]
steps to reproduce the behavior: 1. use internet explorer 11.
2. try to view a dashboard with charts, either directly in metabase or via iframe-embedding, or a single question which is visualized by a chart.
3. see the error within the charts area.
steps to reproduce the behavior: 1. do a fresh install on aws of v0.33.2.
2. create a native query and visualize it with a line graph.
3. check the js console.
steps to reproduce the behavior: 1. go to 'download button' 2. click on 'download button' 3. fetch the results and do the count of the rows 4. this doesn't match from source data
steps to reproduce the behavior: 1. go to query builder 2. join two tables 3. summarize by count and group by column from the joined table 4. visualize results 5. click on count and select "view these orders" 6. see error
steps to reproduce the behavior: 1. go to 'chart question' written in sql 2. click on 'refresh' 3. see error
you can reproduce this issue with the following query against a mysql database.
`select '%y-%m-%d')` which will return directly against the database but returns in metabase
steps to reproduce the behavior: 1. go to "any dashboard having geo map, like the one in the image above" 2. click "ctrl+p" or "normal print from the menu" 3. scroll down to geo map section page 4. see error on console and map not getting rendered
before upgrading to 0.33.1 chart was rendered properly.
screenshot at 11 49 18 phofimage
steps to reproduce the behavior: access public shared link with different number settings then default and access it directly from metabase, see the difference between them.
this seems to happen sometimes, and other times it's okey.
steps to reproduce the behavior: n/a
1. go to admin > data model > sample dataset > orders > add a metric 2. click view custom expression and set expression `sum(subtotal) + sum(tax)` without setting name, click done.
3. save expression (it might be "stuck" and need a second click on save).
browser console should show `typeerror: prevcomponentinstance is null`.
4. if it returns to the data model (sample:orders), then there 's no data/metrics/column and browser console shows phofcode
query any data where one of the series contain only nulls.
table view is populated, line chart is okay but bar chart is not rendered.
steps to reproduce the behavior: 1. go to 'ask a new question' (you need a data base with at least 20 columns) 2. click on 'custom query' 3. click on 'columns' 4. try to unselect all the columns, starting from the 1st one 4. see error
steps to reproduce the behavior: 1. run gitbash on windows 7 2. follow install instructions from docs 3. install build 4. run `lein ring server` 5. see error
1. login as non-admin user 2. go to :gear: account settings and change name/email and click update.
`sorry, you don't have permission to see that.`
steps to reproduce the behavior: 0. configure metabase database to postgres 1. create a pin map using the people table in the sample dataset 2. place the pin map in a dashboard 3. upgrade to 0.33.1 4. go to dashboard
upgrade to 0.33.1. check any percentage formatted field
upgrade to 0.33.1 make a search
steps to reproduce the behavior: 1. go to 'ask a question ' > simple question 2. select any database and any table 3. press save and then save again.
i haven't been able to reproduce the issue, as it seems it doesn't happen with new questions.
steps to reproduce the behavior: upgrade 0.32 -> 0.33
steps to reproduce the behavior: 1. create a dashboard and add questinos.
same issue when opening an existing dashboard with questions 2. click on the pencil to edit the dashboard 3. add a filter for time 4. see error --> questions still show previous results.
it is not possible to match the filter with parameters of questions 5. if you click on save dashboard button shows that saving failed
steps to reproduce the behavior: create a question in sql, utilising a parameter to set a date range, and a parameter to set category.
set the question type to be bar+line (or just bar), and map the data points so that the date is on x axis.
hover over any of data points and see that date on x axis doesnt match date in pop up.
with a ldap configured metabase, try to log in, perhaps with the wrong password, and members will be removed from a metabase group.
steps to reproduce the behavior: 1. go to phofurl 2. click on formatting on the left menu and change the currency to south african rand.
3. go to a question that has a number and format it currency using the new settings button on bottom of screen.
4. the currency will zar is not applied or available select for question.
steps to reproduce the behavior: 1. create/view a pulse with a chart; 2. trigger a slack notification with it; 3. look at the pulse image/chart on slack.
steps to reproduce the behavior: 1. open a table with timestamp data 2. create a graph and group by month 3. see error
steps to reproduce the behavior: 1. go to the metabase docker hub phofhyperlink page.
create a table and group by day of week and time hour of day (they are the same in my case): image phofimage click on the numbers associated with 4 pm (or whatever row you want) to view these records and you see no results: image phofimage
steps to reproduce the behavior: 1. go to saved question in personal collection 2. click on pencil icon beside question name 3. click on move 4. select a public collection 5. click move on the modal 6. save question 7. refresh 8. see that question did not move
steps to reproduce the behavior: 1. go to a vistulization map with gps coordinates plotted in the map 2. click on "draw search" 3. create a filter 4. nothing happen
1. go to custom question, select sample dataset and orders 2. join products table and join people table, visualize.
3. click a cell of one of the joined tables i.e.
people->email and select `=` in the drill-down.
4. shows the error `column "public.people.email" not found` 5. remove that filter and create the exact same filter, but via filter sidebar it works.
steps to reproduce the behavior: 1. go to ask a question / custom question.
2. pick a table, e.g.
3. create a join data, e.g.
4. at summarize section, click "pick the metric you want to see" and choose custom expression.
5. choose sum, field from jointable is not included in the list.
steps to reproduce the behavior: 1. go to 'ask question ' 2. click on 'select a table ' 3. click on 'summarize ' 4. notice some of the basic metrics are missing.
steps to reproduce the behavior: 1. download metabase v0.33.0 from phofurl 2. setup amazon rds aurora mysql database v5.6.10a with charset `utf8` and collation `utf8_general_ci` 3. from ubuntu 19.04 try to run `sudo java -duser.timezone=utc -jar metabase.jar` (replace variables between <> with the aurora mysql variables) 4. view terminal logs, they should stop at the `info metabase.db :: running database migrations...`
pre-requisite, link with a google analytics account.
steps to reproduce the behavior: 1. create a new question 2. select google analytics profile 3. filter by date -> previous 4 months, leave "include
steps to reproduce the behavior: 1. create a question that produces a series with any values between _a_ and _b_ 2. select 'line' visualisation 3. go to settings -> axes 4. set a min value higher than _a_ and/or a max value less than _b_
steps to reproduce the behavior: 1. browse the raw data for "orders in the sample dataset" 2. click the heading of "created at" field and choose "formatting" 3. click "off" button under "show time".
the time will disappear from created at column.
4. download full results to csv.
5. open csv in some other program (excel, text editor, doesn 't matter).
the "created at" column will now contain full datetime strings, like even though we removed them from column already.
steps to reproduce the behavior: 1. have a table name in a database that maps to a friendly name with multiple words in metabase e.g.
"servicerequesttype" in sql server -> "service request type" in metabase 2. in search bar type the friendly name as shown the admin > data model screen.
"service request type" 3. the table known everywhere metabase as "service request type" is not listed 4. search for the actual table name "servicerequesttype" and table is listed but not by it 's friendly name.
steps to reproduce the behavior: 1. create a dashboard 2. create a "count of rows" card for the orders dataset 3. add this card to a dashboard 4. add an id parameter and link it to the user id field 3. create a user x 4. remove data access permissions from all users for sample dataset 's people table.
5. login as user x and go to the dashboard you created
1. run `docker-compose up` with this config phofhyperlink 2. if it doesn 't happen run `docker container rm and try again
steps to reproduce the behavior: 1. click on the gear icon in the top right 2. click on 'help' 3. browser will navigate to phofurl 4. get 404 error page
steps to reproduce the behavior: 1. open the sample dataset 2. click on "a look at your reviews table" 3. click on a column under "reviews by rating"
1. run dockerized mb 2. in the setup wizard, enter postgres connection details and click "next"
steps to reproduce the behavior: 1. run metabase in a new docker container, `docker run -d -p --name mb-invalid-input metabase/metabase` 2. in step 1 of setup wizard, fill out all fields except company name (or otherwise enter invalid data)
steps to reproduce the behavior: 1. go to ' phofurl 2. click on 'all members' 3. open the console 4. see error
1. you have a column, which is set to `category` type and to `search box` filter.
2. go to ask question - new question.
3. open search box to filter your column.
4. press key while using russian layout.
5. instead of getting letter in the text box you get nothing.
steps to reproduce the behavior: 1. attach metabase to a postgresql database 2. execute this: phofcode 3. see error > bad value for type double :
`source .env` (.env contains vars i followed from here: phofurl 2. ran `java -jar metabase.jar`
steps to reproduce the behavior: 1. go to 'query builder 3' 2. go down to 'custom column' 2. click on '+' 3. add formula 4. see nothing changing on button, still disabled
steps to reproduce the behavior: 1. set a field as "only in detailed views" 2. open table in metabase 3. go to the settings of the tab that has appeared 4. you will be able to add the given column
steps to reproduce the behavior: 1. add a bigquery data source to your metabase instance 2. create a custom question on the bigquery data source 3. group by on any column and set the metric to be "count of rows" 4. apply filter on the count column to be greater than 1 5. visualize result set
steps to reproduce the behavior: 1. go to ask a question -> custom question 2. choose sample dataset -> orders as the data source 3. when the filter option appears, it will extend vertically beyond the top border of a small window (i 'm on a 2015 15" mbp with browser fullscreened).
steps to reproduce the behavior: 1. install v0.32.10 jar 2. try to run it.
simple question 1. orders, summarized by count and average:discount, grouped by createdat:month 2. change viz to table 3. click count-column, sort descending 4. move count-column after average:discount-column 5. it looks like average is sorted, but it 's still sorted by count.
and if you click save question, then prefilled name ends with `sorted by [unknown field] descending` notebook question 1. orders, summarized count and average:discount, grouped createdat:month and sorted average 2. there 's no sort-indicator (not even if moving the columns)
1. have two databases (sample dataset, and then setup another h2 to the same file) 2. only allow data+sql permissions on one of the databases for "all users".
3. login as user, click "ask a question".
note the larger options looks like it 's only expecting two options, which is "fixed" if data permissions are allowed for both databases.
(not sure if i should have created a separate issue for this, but i think it 's related to the way it checks permissions).
no database is pre-selected in editor and editor is read-only.
5. if using "write sql", then it works as expected.
steps to reproduce the behavior: 1. start a 32.10 docker container `docker run -d -p --name metabase metabase/metabase` 2. create a new native query 3. enter `select current_timestamp())`
steps to reproduce the behavior: 1. go to phofurl 2. click on "launch metabase on aws" 3. see that both the platform and application code are not prepopulated as they should
steps to reproduce the behavior: 1. go to "custom question" 2. select "orders" 3. join "people" table 4. summarize with a count and group by latitude and longitude 5. click preview = working 6. click visualize results 7. see error
1. prepare a small dataset for containing country code and relevant kpi.
2. create a question based on the prepared dataset 3. set the visualization to map and set the region to world 4. it will take almost 40-50 seconds to render the map 5. in case question is added to a dashboard, it will take 40-50 seconds for question render on dashboard and it will freeze whole dashboard for this time.
1. create a new native query or custom question where underlying values contain combination of negatives and positives, for example for native query use this sample sql: phofcode phofimage 2. based on the data above build a visualisation of type bar with x-axis set to 'date ' and 'category ', and y-axis to 'net sales ' 3. under 'display ' tab select stacking option 'stack ' 4. observe visualization results phofimage
steps to reproduce the behavior: 1. go to settings 2. click on admin 3. click on databases 4. click on add database 5. choose oracle as the database type 6. enter connection details, and press save.
steps to reproduce with sample dataset: 1. go to admin > data model > sample dataset > orders > product id :gear: 2. change "display values"="use foreign key", connected to "title" 3. create a qb/simple question of orders and save it as "nested query" 4. create a new question and use the "nested query" in saved questions, and run it.
5. fails with the error: `column "source.title" not found`
steps to reproduce the behavior: 1. create table with a number field called "counter" 2. query editor, custom expression 3. type `sum(counter)` or select from the drop down 4. error is presented
steps to reproduce the behavior: 1. go to admin > general 2. change the "site url" to ` phofurl 3. error given in screen: error: assert failed: invalid site url: phofurl (u/url?
s) 4. change url to ` phofurl 5. change is saved without error
steps to reproduce the behavior: 1. go to a dashboard 2. click on "add a question" 3. search for a term you know has questions 3. the results has repeated questions
1. create a "simple question" (any table) and visualize as table.
2. either drag one of the column headers to a different position, or click visualization settings and drag the "visible columns" to a different position.
3. shows "get answer" button overlay on the table.
steps to reproduce the behavior: 1. go to _admin_ _data model_ [table] [field settings] _formatting_ tab 2. change the _link text_ setting's value (and blur the field to trigger save) 3. click the _reset to default_ icon which is now visible image phofimage 4. the value of input remains unchanged, even though an update ajax request was triggered.
6. switch back _formatting_ tab.
7. see that _link text_ field has now been reset (to empty value).
steps to reproduce the behavior: 1. go to metabase pulses 2. click on send now for slack channel 3. go to slack 4. see blank charts
steps to reproduce the behavior: it appears most api endpoints respond with a small enough chunk that not flushing the stream is not an issue.
the best way to reproduce this is to create a question & relate it to many entities so that the api call /api/card/:id/related on that card will have a large response.
try parse the json response or make api call in browser and see that raw response cuts off.
this applies to other database types, but to cleanly reproduce it with the sample dataset, do the following: 1. create a question with a sql query as follows: phofcode 2. create a second question referencing the first saved question.
in this, apply a group by `date : week` and `customer type` (this group by isn 't necessary to reproduce, but is how my screenshot is structured so including it).
apply filter on `date` e.g., `previous 30 days`.
as soon as question is saved, and any time you revisit question, filter text "disappears" from ui and you can 't click into it to modify it.
you can only click `x` remove it.
steps to reproduce the behavior: 1. have a table with some data of type st_geometry ( phofurl 2. start the scanning process in admin panel 3. synch process will terminate after first table with geodata, saying the scan was successful
steps to reproduce the behavior: 1. view embedded dashboard 2. click on export icon for a table / chart with more than 2000 rows 3. select any file type 4. review exported file 5. note only 2000 rows of results have been exported
steps to reproduce the behavior: run curl to get the db stats curl -x get -h "content-type: application/json" -h "x-metabase-session: phofurl | jq % total % received % xferd average speed time time time current dload upload total spent left speed 100 1043 100 1043 0 0 1538 0 --:--:-- --:--:-- --:--:-- 1536 { "description": null, "features": [ "basic-aggregations", "foreign-keys", "right-join", "left-join", "native-parameters", "nested-queries", "expressions", "set-timezone", "binning", "inner-join" ], "0 50 0 * * ?
*", "timezone": "utc", "0 50 * * ?
*", "name": "user acquisition", "caveats": null, "is_full_sync": true, "updated_at": "details": { "host": "port": 3306, "dbname": "uacq", "user": "useracquisition", "password": "
1. create two tables: phofcode 2. create collection1, grant to johny access on collection1, create question inside collection: phofcode 3. set `c_name` as field filter on `company.company_name` column 4. also you can add this question to dashboard also in this collection 5. when john opens dashboard, he see result so as dashboard contained in collection, where he has access to.
but opening particular question lead to error image phofimage
steps to reproduce the behavior: 1. open the instance in any web browser 2. log in to the system 3. the spinning loading indicator appears and continues spinning forever
steps to reproduce the behavior: 1. create a dashboard with an id parameter filter for a postgres data source 2. create a widget based on a custom sql question that references that parameter 3. create link to the dashboard with the parameter supplied 4. cards fail to load
steps to reproduce the behavior: 1. add and connect a mongo database 1. click either sync button, or just hit save and examine your dataset 2. dataset is empty, no tables found.
steps to reproduce the behavior: 1. run `lein ring server` 2. create a question on sample dataset (count of orders grouped by month).
3. try to configure a pulse with this question 4. see error: "an error occured while displaying this card"
1. add a filter based on a timestamp column such as "created at, previous, 30, days" 2. check the box to "include today".
3. change the range from 30 to any other number 4. blur that field 5. checkbox for "include today" will automatically uncheck itself
steps to reproduce the behavior: explained in the description above
steps to reproduce the behavior: 1. go to table 2. join it with 1-2 tables 3. confirm the correct info returns 4. try to save and fails
steps to reproduce the behavior: 1. setup and enable ldap auth 2. log in with a valid ldap auth user
pre req for behavior: 1. create table a with some column `foo` 2. create table b with some column `foo` and some column `bar` 3. do not create a foreign key between them at the database level 4. create a foreign key relationship in metabase via the admin `data model` a. e.g.
specify table `a` column `foo` has type `foreign key` of `b -> foo`.
steps to reproduce the behavior: 1. go to `ask a question > custom` 2. select `db > table a` 3. click `get answer` 4. click the "gear" icon and try to select `bar` from `b` under `more columns` section.
steps to reproduce the behavior: 1. select a bigquery connection 2. run a native query that returns an array: `select [1, 2]` 3. casting error shows in the results area
steps to reproduce the behavior: 1. go to 'people' in admin 2. click on 'reset password'
i tried to build a generic dashboard and reproduce the error in isolation, but unfortunately the error did not show up.
it occurs in many of our dashboards, but sometimes it takes many re-freshes to cause the error.
the other times it shows up always.
steps to reproduce the behavior: 1. add new sql query like 'select 'x' as x_axis, 1 as serie_one, 2 as serie_two, 3 as serie_three' 2. choose chart type = 'bar' 3. move mouse to middle bar, the tooltip showing all of three seris name, should show only one
steps to reproduce the behavior: 1. open a report dashboard 2. open date range data filter 3. see that "include today" is checked on default 4. change the number of days 5. click save observe "include today" is unchecked.
1. open a line graph 2. put your mouse over the point that's the furthest to the right couldn't reproduce when tried on a couple different macs, may be windows specific?
steps to reproduce the behavior: 1. go to the full record view.
steps to reproduce the behavior: 1. select a google analytics profile with configured goals.
2. select a date range 3. select metric `goal xx completions` 4. group by week question metabase phofimage
1. using windows terminal (preview) version: try to go full screen on a second monitor (with f11 or alt+enter).
1. set a custom scaling factor in settings > system > display > "advanced scaling settings", for example: > image phofimage 2. start the terminal
1. open windows terminal 2. run ** cmd ** shell 3. hit `ctrl-c` twice very quickly.
4. then the ** cmd ** shell just hangs.
1. switch to microsoft chinese input method 2. press `shift` + `/` to insert a chinese ``
1. create lots of split panes and resize some panes.
2. run `exit` on some of panes to close some panes.
3. sometimes other panes won't take up the spaces of closed panes.
i created a profile like this: phofcode
press `alt+enter` to enter full screen mode
1. configure a profile with a batch file like this: phofcode 2. execute the profile `build myapp`
opening the terminal (regardless of how this is done) and trying to use the system while the terminal is focused (or moving the mouse around).
not sure, haven't been able to reproduce it myself.
open cmd in windows terminal, use input methodthe cusor bar not following.
the emoji picker also not normal: terminal_emoji_error phofimage
open or create a new file: phofcode type ("_" is the cursor position): phofcode then type `<c-y>,` and you should see:
logon with windows system with a non domain admin account.
find windows terminal shortcut , right click on it , choose run as administrator.
input your local admin account or domain admin account when you get prompted.
trying to redefine the exact rgb value for color index 256: echo -ne
just use the new shortcuts alt + enter or f11
hit the key "" (or other punctuation) in windows terminal with chinese input method
1. ran "choco install as admin 2. got error saying microsoft.vclibs.140.00 was missing 3. installed it via phofurl 4. got same error 5. tried --force --force-dependecies 6. same error
1. close windows terminal if it was already open 2. open windows terminal 3. open a new tab 4. execute the following minimal node.js session: phofcode 5. try to paint some text on screen
1. remove from your system `path` variable 2. start windows terminal
* open windows terminal with a powershell tab * copy a function containing an `if` statement * paste the copied code with mouse right click (`ctrl+v` does not produce this behavior)
1. minimize terinal 2. expand terminal
1. start a wsl bash shell in conhost.
2. do a long directory listing so you get some content in the backscroll buffer.
3. execute this command: `printf that command switches to the alternate buffer (private mode 1049), executes the `ed` escape sequence with parameter 3 (i.e.
erase the scrollback buffer), and then switches back to main buffer.
1. start a wsl bash shell in conhost.
2. do a directory listing or anything that produces some output.
3. execute this command: `printf " e that command switches to the alternate buffer (private mode 1049), executes the [`ris` phofhyperlink escape sequence (reset to initial state), and then switches back to the main buffer.
1. launch ubuntu 18.04 bash inside terminal.
and create a new file and edit it by using "vi config" 2. launch ubuntu 18.04 bash separately.
and create a new file and edit it by using "vi config" 3. open a json file (no matter use a notepad or notepad ++ or other text tool) 4. copy slice of json code paste into the config file in step 1 step 2.
open multiple tabs in terminal.
the switch tab between them
1. open a bash shell in a conhost window.
2. press enter a few times until you reach the bottom of the viewport.
3. run `cmd.exe` to switch to a _cmd_ shell.
4. run the `ver` command, just to get something in the command history.
5. press `f7` to view history.
applied this theme phofhyperlink via colortool.
perfectly works on the regular powershell and command prompt but not on the terminal.
1. install ubuntu 18.04 (on wsl 1.0), install minicom inside ubuntu.
2. open windows terminal and run ubuntu 18.04 3. open minicom from windows terminal and try to capture serial console message from any embedded dev.
board (say raspberry pi) 4. you will see messages scrolling above the view port.
if you scroll up you won 't see the messages from the minicom.
- start terminal - terminal window opens on main screen (high dpi, scaling 150%) - move window on secondary screen (scaling 100%)
on a touchpad capable device try scroll using the 2 finger gesture on any terminal with some lines on the buffer
if you run powershell 7 preview 6 in windows terminal, out-gridview, show-command, and get-help -showwindow don 't get a focus.
they open windows behind the terminal.
engage the emoji ime (<kbd>win+.</kbd>).
i am using a microsoft surface pro 7, along with a surface dock and two external monitors.
i expect that this issue is related to scaling (a common problem in my setup).
my surface 's display is set to 200% scaling, while my two external monitors are set to 100% scaling.
as i dock and undock, lock and unlock, throughout the day, terminal can get into some funny visual states.
usually i can get everything working again by "restoring" (windows + down) and "maximizing" (windows + up), but today when did that cannot see all of my tabs without scrolling (see screenshot), even though there is plenty of space to display them.
1. make sure windows terminal is in dark theme and windows 10 default app mode is light 2. open `about` modal 3. highlight some text and right click
* open up the "about" box * resize the window
1 set the following global settings in profile.json phofcode 2 start terminal * no tab bar visible 3 _control-shift-t_ to create a new tab * here it 's powershell core, but reproduces with git-bash for example * tab bar becomes visible here.
* switching between tabs here does not affect the outcome.
4 type `exit` to terminate the currently-visible shell middle-clicking the active tab also works.
middle-clicking other tab does not reproduce.
if extra shells were opened, this doesn 't reproduce, it seems to only happen when bar is hidden as part of closing current tab.
setting close-on-exit means this doesn 't reproduce until is closed, so not related to shell process terminating.
there 's a white line below this window , no matter when i use dark theme or light theme image phofimage
1. go to window properties, "colors" page.
2. set "screen background" value to exactly `128 128 128`.
* setup a git diff tool in your git config (see below for example) * run `git difftool` in any git repo that has pending changes example .gitconfig section... [diff] tool = winmerge [difftool "winmerge"] cmd = "c:/program files -e -u "$local " "$remote "
use this json file: // this is an auto-generated file!
changes to this file will be ignored.
{ "$schema": " phofurl "alwaysshowtabs": true, "defaultprofile": "initialcols": 120, "initialrows": 30, "requestedtheme": "system", "showtabsintitlebar": true, true, "worddelimiters": "
1. ssh to a linux.
2. maximize the windows terminal window.
3. enter a command which print something to the terminal.
4. restore down the window.
5. keep pressing enter to create new lines.
run midnight commander `mc` with fontsize equal to 12 and with `cascadia code` or `consolas` font.
it is worth noting that with fontsize 14 or 10 the background renders correctly without black lines.
open terminal and look at the window title bar.
1. open terminal and maximize its window 2. attach a new default monitor to the device with a different scaling percentage from the previous one (the window is moved to the new monitor retaining its maximized state) 3. it's easier to notice this if the new default monitor is placed on left of previous one.
when i open the terminal on my surface laptop it works fine but when i try to drag the windows to another monitor, the application crashes.
i have a surface laptop hooked up to surface dock which is connected to 2 monitors and the behavior appears on both of them
1. start terminal 1. focus another window 1. re-focus terminal by clicking on the active tab 1. enter text using your keyboard
1. set the `historysize` of a terminal profile to a sufficiently large number.
(i modified the default profiles in my testing) - 32747 or larger for powershell - 32797 or larger for wsl 2. create a new terminal tab using the modified profile 3. record the current reported terminal size - use for powershell - use `tput cols; tput lines` for wsl 4. resize terminal window 5. record new reported size
print key code received on key press to terminal.
specifically the issue is with key codes for arrow keys.
in `cmd` and `powershell` these are in the range 258 to 261, while when using windows terminal is in the range with each being an even number in that range, inclusive.
most other keys seem to retain the same key values.
- open cmd - type any chars until line breaks - type phofcode until the cursor gets back to the previous row
create a couple of tabs.
try to reorder the tabs via click+drag
the equals sign does not appear in certain operations in powershell core windows.
typing: `$a = 4` results in this: image phofimage they render normally as part of strings: image phofimage
1. download the following simple c
run vim from powershell with the following powershell function: phofcode this is used to work around how vim screen scrapes the screen so it can restore it, but colors are messed up because screen scraping doesn 't work with 24 bit colors.
edit a file with at least double the number of lines in the window.
go to bottom, reposition cursor, and move cursor line wise up - rendering will be horribly broken.
here 's a guess at commit introducing regression: phofurl
1. install anaconda 2. create a profile in `profiles.json` which is the same as the following, with updated references where needed: phofcode 3. try to launch launch this profile in terminal
open a wsl shell in conhost and execute the following command: printf " this initialises a number of terminal properties.
- the scrolling margins are set to 1:15 (`decstbm`).
- the tabstops are cleared and then a single tabstop is set at column 20 (`tbc`/`hts`).
- the cursor blinking is disabled (`dectcem`).
- the cursor position is set to line 9 column 20 (`cup`).
it then switches to the alternate screen buffer (private mode 1049) and "tests" the state.
text "start" is output to indicate the starting position.
cursor moved down 99 lines (`cud`), and text "margin" output indicate bottom margin position.
cursor moved home position (`cup`) a tab output, followed by text "tab" indicate position of tab stop.
1. checkout a recent version of the terminal.
3. execute `runut` in the tools directory.
when i try to either engage "runas" on c: program or shift right click and "run as another user" on windowsterminal.exe, it gives me an error.
or alternately, can a feature be built into windows terminal where you can relaunch as a different user?
i am using wt with psc.
inside it, i issue `git push` command.
it require me to input account and password.
instead of typing them manually, i tried to paste the password.
i tried two things: 1. using the right mouse button 2. using ctrl-v
1. launch terminal, move to right display 1. maximize on right display with win+up 1. set to left half of right display with win+left
open windows terminal and move it with cursor to a new screen in a dual screen setup.
specifically from a 4k to 1080p monitor.
drag the window from either the right or left side and shrink it until the tabs are no longer visible.
extend the window back out until there is enough room for a few tabs.
this issue happens with many dead-keys.
for the purpose of this discussion, let us focus on one particular dead-key.
on a french azerty keyboard, the combination is a dead-key used to input the `~` (tilde, u+007e) diacritical mark.
by itself, this sequence does not produce any output to the terminal.
obviously, when this sequence if followed by a supported character, for instance <kbd>o</kbd>, corresponding `` character is typed into terminal.
a spacing version of `~` character can be typed into terminal by following dead-key sequence with a <kbd>space</kbd>.
however, when using custom azerty-nf keyboard layout, corresponding sequence does not work.
in order to reproduce this issue: - install referred to azery-nf keyboard layout.
- select layout as currently active layout with - in microsoft terminal, type following sequence: - observe that character `~` (combining tilde, u+0303) has been typed into terminal.
proceed type following key: <kbd>o</kbd>.
observe that character `` has been typed into terminal.
image phofimage alternatively, you can reproduce issue by following other set of steps: install msklc 1.4. install french azerty keyboard layout.
with msklc, using `file|open existing keyboard` menu command, open french azerty keyboard layout (named _franais_ in list) add an additionnal mapping for dead key like so: click on `` key (vk_2) and push `all` button in corresponding dialog.
in lower part of extended dialog, locate mapping for `ctrl-alt-<key>` dead key whose value is `0x007e` and push `` button.
add mapping for base `u+007e` (tilde) composite `u+0303` (combining tilde) as illustrated by screenshot.
image phofimage using `project|build dll and setup package` menu command, compile resulting layout.
it should be generated in your folder.
install custom layout running `setup.exe`.
close your windows session and login again.
select as currently active with in microsoft terminal, type sequence: like previously described, observe that `~` (combining tilde, u+0303) has been proceed type key: <kbd>o</kbd>.
make the windows terminal go full-screen on a 4k monitor.
add a new custom profile, for example: jsonc { "guid": "name": "powershell core", "commandline": "pwsh.exe", // without startingdirectory it will crash "acrylicopacity": 1.0, "closeonexit": true, "colorscheme": "one half dark", "cursorcolor": "
copy any text with multiple lines into the wsl terminal tab.
note: this bug does not occur in the command line and powershell tabs.
1. use ssh to connect to a linux server through the terminal app running ubuntu with wsl v2.
2. start tmux on the linux server you are connected to through ssh 3. run `find /` 4. wait a few seconds (5-10) 5. attempt to ctrl+c
open neovim in wsl windows terminal and open a terminal buffer (:ter).
1. open up windows terminal.
open up any other window.
make sure windows terminal has the useacrylic set to tru and the opacity set to something like .5. snap the two windows to either side.
when terminal is in focus the acrylic will work.
when it 's not it will not.
1 - `ssh` to a linux box, and execute these: seq -f 'normal %.f ' 100 echo -ne ' e[?1049h '
- `ssh` to a linux box - `seq 100` - shrink the window vertically (fewer lines) - scroll back
just update wt i think...
create a color scheme with foreground as
add the following color scheme (or any other, i tried it didn 't matter) to the profiles.json json { "background": "
* open terminal * open file to edit in vim * type ':set mouse=a' to enable mouse mode globally * attempt to scroll
1. create profile for ubuntu.
2. set `"tabtitle": "ubuntu"` in config.
4. run win32 console program: sc.exe
call `resizepseudoconsole` with negative values stored in the passed `coord` structure.
i didn 't do anything specific, left terminal running, when i tried to use it, the content of the tabs were gone and the minimize/maximize/close buttons on the terminal window were also gone.
potential things that did happen on machine: - i have terminal running on virtual desktop 2 - i have remoted in from another pc which has caused dpi changes - have unplugged/plugged in a monitor multiple times terminal-screenshot phofimage
open a git bash tab in windows terminal.
run the following script: bash
* install via microsoft store * run once, change no settings, just exit the application * try to run the application again.
refuses to start uninstalling and re-installing allows me to run it once before it stops working again.
the following shows in event viewer: phofcode
0. open microsoft store 1. search for terminal 2. install terminal 3. launch terminal
set `"launchmode": "maximized"` within `profiles.json`
configure a background image with the following settings: phofcode complete profile json { "acrylicopacity" : 0.9, "closeonexit" : true, "colorscheme" : "campbell", "commandline" : "pwsh.exe", "cursorcolor" "
1. open command prompt - i.e.
run cmd 2. open properties dialog and ensure 'use legacy console' is unchecked, then close dialog 3. select menu option 'defaults'
1. open command prompt - i.e.
run cmd 2. open properties | options - remove check from 'use legacy console' - switch off 3. close command prompt 4. open command prompt - i.e.
run cmd 5. open properties | options add check from 'use legacy console' switch on 6. close command prompt 7. i.e.
copy a powershell function at least twice the height of the terminal window to the clipboard.
right-mouse click paste the code in to terminal.
1. run terminal and some npm script (in my case) 2. minimise 3. return to terminal's windows after few minutes
set "initialcols" to 110, and set "initialrows" to 30, then drag a new opened window.
launch `cmd.exe` in the terminal (eg: just start `wezterm.exe`) and execute: phofcode
i have a number of environment profiles (9 in total) profiles.txt phofhyperlink
1. open tab with ubuntu in it 2. output cjk characters 3. double click a portion of the command that is in english 4. chunk select (drag while holding mouse button) to the right or down (should work fine.
even if you highlight cjk characters) 5. chunk select back past starting anchor into file path (optional) if it doesn 't crash when you go into the file path, just keep trying to chunk select the file path, it should occur.
1. open a powershell tab in windows terminal.
2. type -key tab -function menucomplete` 2.
`cd` to a folder with lots of files.
3. type `ls` and then enter.
4. after it finished, type `start-` and **press `tab` to trigger `menucomplete`**
laptop dell xps 9560 (screen resolution is connected to an external usb-c lg 4k 27" monitor (lg 27uk650).
open terminal and move it from the second screen to the laptop 's screen and the terminal will close without any error message after 2 seconds.
1. open wsl ubuntu 18.04 in windows terminal, keep it in screen 1 or 2 (with 100% scaling) 2. connect to via ssh to any server (tried to connect to amazon linux) 3. move windows terminal 3rd screen (with 150% scaling) 4. wait 3 seconds 5. move windows terminal 2nd screen (with 100% scaling)
enter a ps session, run some command that will cause the output to scroll past the bottom of the terminal window (for example, get-process), exit the ps session, enter "clear" or "clear-host", then scroll up.
part of output from command run in ps session will still be present in scrollback buffer and cannot be removed or cleared without closing tab.
example in code: powershell enter-pssession 1.1.1.1 for($i = 0; $i -lt 150; $i++){write-host $i} exit clear-host
click `windows terminal (preview)` in start menu
have the performance monitor open and bring terminal to foreground.
i noticed this issue because, mouse becomes laggy and ui is almost unusable.
i am pasting two screen shots when the terminal goes foreground and when the terminal goes background
git clone this repo, and run a release build.
in windows explorer, click the yellow folder icon in the address field (next to the path to the folder you're viewing) and attempt to drag it into a windows terminal cmd window.
- start windows terminal - drag window to other screen (which happens to run at a different dpi/scaling setting) - **terminal exits** :-/ my first screen (on which terminal initially opened) is set 150% scaling, the second one (on which terminal dies) is at 100%.
set `"requestedtheme": "dark"` in `profile.json`.
1. launch terminal 2. open a new cmd tab 3. type 'start powershel' and then press enter.
the misspelling of powershell is part of the repro 4. a dialog box pops up indicating that 'powershel' cannot be started.
dismiss the dialog box 5. type 'start powershel' and then press enter again.
launching a new tab is done via ctrl+shift+<number> i remap my caps lock key to ctrl via remapkey utility which just changes a registry key somewhere.
this behavior works * everywhere * except for the terminal app.
open the new windows terminal (preview), then click on azure cloud shell menu (ctrl + shift + 4) image phofimage
adding `shift +ins` for paste does not work, while `ctrl+shift+v` works in `profile.json` phofcode
phofurl 1. install ubuntu 18.04 distro from store 2.
`for i in /bin/*; do head ${i}; done` 3. observe wsl window hang or crash
1) launch wsl zsh shell 3) hit enter
1. open a powershell tab 2. type exit
1. copy a set of lines by marking using mouse and then ctrl+c.
you can also use `"copyonselect" : true,` in the settings.
2. open vim and paste using shift + insert.
3. you would be able to see extra newlines after each line of copied text
open terminal (i;m using pwsh as that's default) and hit 'win .'
set the initialrows value to 30, and open a new wt instance 2.)
shrink the window to approximately half the size vertically (drag the bottom up) 3.)
spam a few invalid commands (asd, <enter >, asd, <enter >, asd, <enter >, asd, <enter >, asd, <enter >) until scrollbar appears (it will appear later than expected) 4.)
note that you unable to scroll to current input location
1. open terminal on wsl with ubuntu 2. start typing a command 3. use tab for auto-completion 4. cursor goes back 1 place in the cmdline (visually - not really, meaning if i continue typing cmd can be executed successfully)
1. open windows terminal with "only one tab open" 2. drag to another monitor with a lower resolution (from 2160p to 1080p)
use the dark theme of windows terminal
2. set the default shell as bash.exe(for cygwin) in viaual studio code, and the args as `--login`.
this just happens when in full power saving mode.
make sure you are not running "more battery efficiency".
1. launch windows terminal with powershell core as the current tab 's shell 2. resize the window to slightly small width to trigger line wraps 3. run something that prints long lines of output.
in my case, i was running `scoop update`.
open the `profile.json` in visual studio code and see the behavior of color setting like profile `background`.
- install windows terminal (preview) from microsoft store - install linux distro from microsoft store - setup distro using wsl - run windows terminal
here is what i tried: 1. entirely removed `startingdirectory` from my profile 2. explicit set `startingdirectory` to %cd%
i had a buffer, which was resized from original by making font smaller(2x2).
buffer must not be monolithic, but even single colored buffer takes 15ms to fill with 7th system call on ntdeviceiocontrol from writeconsoleoutputw.
when it contains some picture, render time grows drastically to 79-84ms.
if asked i can pass a serialized picture from my engine, drawn using char_info with custom palette
set up wsl as the default terminal to be used in the application.
start up the terminal, and before the startup is complete (meaning, before terminal is available to be interacted with), close it down.
open neovim from the terminal, then change the size of the window.
1. launch wsl terminal 2. use other applications like a web browser 3. go back to the wsl terminal
open the windows terminal in cmd.exe mode 2.)
paste the following 26,425 characters > 4.)
after the 5 ending z 's, type the word "hello"
1. setup windows terminal (with ubuntu subsystem) 2. set the `fontface` for various profiles (tested with powershell, cmd and ubuntu wsl) note, that everything was working as intended up to here.
try to execute a 32-bit executable you will get this error.
copy and paste the command below into the terminal: phofcode
1. open cmd or powershell on windows terminal 2. run node test.js (after npm i) 3. resize windows terminal => the number of column or row is not modified, resize event is not fired
git clone phofurl cd terminal git submodule update --init --recursive nuget restore openconsole.sln open solution in vs change debug to release
- open new azure cloud shell tab - use code sign-in flow - presented with tenants to select
i 'm trying to have both x86 and x64 version of powershell 5.1 appear in the windows terminal.
i have following json in my settings.
{ "acrylicopacity" : 0.5, "background" : "
switch to a font that contains ligatures that effect the '> ' character.
(in my case i used fira code) type a character such as '= ' on a fresh line and it will combine in with the text that you are normally unable to edit image phofimage
install font with glyphsupport like nerdfonts ( i tried droidsansmono nf and hack nf) and use a powerline promt for example
resize the window to smaller, then back to about its original size or even bigger.
1. keep adding tabs until the newest tabs are no longer visible alt text phofimage
build this program as c or c++ in visual studio, and run it manually from the command line in a cmd.exe window: c
1. open terminal and use the acrylic background.
2. you should put some contrastful windows behind the terminal window so you can clearly see the display bug in the acrylic section.
3. move terminal window around.
you can see that acrylic background is rendered in real-time and displayed correctly.
you can see that acrylic background is rendered in real-time and displayed correctly.
5. double-click task bar or click on maximize button to maximize terminal window to full screen.
there is a slight delay until background is rendered correctly.
also, background distorted during maximize animation.
it less notable to see it in this tiny gif.
it 's best you reproduce this by yourself on your computer.
1. open a new powershell tab.
powershell version does not matter.
2. paste and run the following code in the powershell tab: phofcode 4. close the powershell tab by clicking the x button or by `exit` command.
1. start a conhost session.
2. start the inspect utility.
3. click on the top level window in the ui automation tree that matches the conhost session.
1. connect ssh session to application server.
use '-l ' switch 2. type in password, accept eula, and accept session ssh host key.
3. enter in 'crs ' at terminal to load custom application.
(on a putty terminal emulator, the custom application would load without issue)
1. in chrome, in a tab that shows a pr of tfs copy text (see 2. in vstudio bring up resharper 's goto-symbol window and paste the copied text
attempting to install via the chocolatey package (pre-built msxibundle)
1. change "initialrows": 44 in settings 2. change "defaultprofile":
open windows terminal type commands or text select the stuff with your mouse press enter key
issue an el (clear to end of line, ` e[k`) when the cursor is at the rightmost position, in "pending wrap" a.k.a.
: printf "%$(tput cols)s e[k%s " abcdef
1. ssh to an ubuntu 18.04 host; log in to `bash` session.
2. start `byobu` 2. run command phofcode 3. press `f2` key to create new `byobu` window 4. press `f3` and `f4` to toggle screens back and forth several times
open a bash shell and execute: printf "a e 999c tb" this outputs an `a`, then a [`cuf` phofhyperlink sequence to move the cursor position to the end of the line, then a `tab` control character, and finally a `b`.
prefer bar or box cursor shape for more prominent behavior.
produce more than a screenful of output so that the cursor is in the bottom row.
resize the window so that there 's a noticeable gap (a partial row) under the bottom text row.
again make sure that cursor is in bottom row.
when cursor is visible (that is, not in "off" state while blinking), scroll back by exactly 1 line e.g.
two different outcomes: 1.: cd d: 2.: cd d:
open cmd.exe compiled from this repo or built in windows.
1. open a couple more tabs than what fits in the window 2. scroll the tab bar to see the new tabs
work via multiple ssh sessions.
vim yank and paste second line.
`ssh` to a linux box.
get markus kuhn 's utf-8 decoder capability and stress test phofhyperlink file.
set up wsl2 setup kind and create cluster using "kind create cluster"
1. log into a machine over rdp 2. open a terminal cmd session 3. start a build using msbuild.exe 4. close rdp session
1. press control + , to open settings in editor
simply open terminal, then open a new tab using the profile: phofcode then run phofcode on a directory that has a lot of files (or any command such that the screen displays more then the number of lines your terminal is able show at one time.
it may take more than one time, but usually after a couple.
start gnu screen (`screen`) type `cd ` and the first few * non-unique * characters of a directory.
press tab key to trigger autocomplete
press alt-up, alt-down, alt-right, alt-left.
(for byobu: start byobu with 'byobu'.
press f2 to add a new tab.
press alt-right and alt-left to switch between tabs.)
just happens after using the terminal for some amount of time.
i am not sure what other information may be helpful in tracking this down.
install powershell core as a .net core global tool.
`dotnet tool install -g powershell`.
confirm it works when you use `pwsh.exe`.
create a new powershell core profile and set "source": to and open a new shell.
commenting out `source` and using `"commandline": "pwsh.exe"` works, as it is in the path.
this bug sounds similar to
install tmux or zsh and install a theme with color blocks (e.g.
bullet-train theme phofhyperlink ) and configure a powerline-font in windows terminal.
echo -ne ' e]10;foo e '; sleep 1; echo -ne ' '; sleep 5; echo; sleep 1; echo; sleep 10
- open powershell tab - press ctrl-alt-?
echo -e ' e[4m underlined e[33m yellow e[39m should still be underlined e[m '
/ actual behavior `cat` 'ing my favorite test file for speed measurement takes extremely long time.
inside vmware, in windows terminal it takes about 10 minutes of wall clock time.
on linux (inside the same vmware) it takes from 2 to 22 seconds mesasured in various terminal emulators, namely: konsole (kde), pterm (putty), st (suckless), terminology (enlightenment), urxvt, vte, xterm.
the test file is ~42mib large, contains ~667k lines.
it 's the output of a `ls -lr --color=always /` on ubuntu.
(i 'm not attaching it since it could leak private stuff, plus would be a pointless waste of storage space.)
`cat` is executed either locally in powershell, or remotely over ssh to my host computer, doesn 't matter.
on the previous version of wt which i installed about a week ago, took about 9:22 (the same time twice) to `cat` this file at the terminal 's default size.
if terminal was iconified, or i switched to another (idle) tab, time dropped 6:50-ish.
interestingly, in a tiny but visible terminal (approx.
30x4) time increased 11 minutes.
in giant terminal (maximized with pretty small font) time hardly increased, 9:37. with current wt version now i 'm seeing even larger numbers: 10:39 at default size (measured only once), 7:30-ish minimized window or when viewing another tab.
the exact times probably don 't matter too much, we 're talking about magnitudes here, it 's ~100x slower than vte for example with its 5.2 seconds if it 's good mood.
the given example is sure an extreme one (why would anyone cat such giant file?
), but smaller files, such as `/etc/services` already take noticeable ~0.5 seconds, whereas on linux terminals it 's instantaneous.
for verbose compilations large projects, this could actually cause noticeable productivity loss for developers.
i don 't know whether running under vmware (e.g.
no hardware graphics acceleration) is relevant, but again, linux numbers were also measured inside vmware, on fedora 30 guest.
open several `cmatrix` tabs and see what it looks like.
some color attribute are displayed as `32m`.
now open a new tab and quickly type things, the buffer are likely to be messed up.
delete powershell profile and azure profile save
to resolve this issue we can add 'scroll tab list forward/backward' options or squeeze all the opened multiple tabs in tab layout.
1. install terminal from the store 1. wait for installation to complete 1. launch terminal
first, open the windows terminal and then open the azure cloud shell tab, you will see someting like this: phofimage exactly, some words are missing after the word "enter" then, when i maximize the window and reopen that tab, correct sentence will show: phofimage
set "colorscheme" to setting under powershell profile to one of the scheme listed in the settings file.
add another profile in the json.
drop down shows too many.
1. install the latest windows terminal on windows 10 (1903), launch it and it works.
2. rdp (using window rdp tool) your system from another windows computer 3. try to launch the windows terminal, it opens and crashed instantly
find the windows terminal (preview) app and click.
try to select, copy and paste with the normal windows shortcuts for these operations.
run this litle command in the terminal using a cmd.exe tab to produce a little box: phofcode
1. open a wsl tab using a light color scheme (e.g., solarized light) 2. echo -e
just open `math` (or `wolframscript` when using wolfram engine) command and try to enter square brackets or other symbols that require **pressing either altgr or ctrl-alt on french keyboard layout**.
using gpg to sign commits, it throws an access denied error.
if you 're using posh-git, open the terminal on a git repository and type something with 3 or more characters.
1. create three tabs 2. use the ctrl+alt+{1,2,3} short cut to quickly jump between tabs in random order i've had the problem occur under more normal usage, but the above steps reproduce it consistently.
set the `newtabprofile0` shortcut to `"ctrl+numpad_1"` and save: phofcode test the shortcut to verify that it works as expected (a new terminal tab opens as expected, regardless of which shell was currently active before).
reopen settings; change this shortcut to `"ctrl+shift+numpad_1"` and save.
1. launch terminal 2. launch inspect or ui recorder phofhyperlink 3. attempt to locate accessibility/automation id for the terminal tab elements (big ** + ** sign and down arrow ** * * sign, and the close tab little ** x sign)
with powershell tab open, open new ubuntu tab close ubuntu tab by pressing ctrl+d press ctrl+d in powershell followed by enter
set color scheme for powershell profile to be one half dark or any of the other ones and then launch the powershell profile.
when i open a terminal window, and start writing some commands, some lines doesn 't show properly and are truncated.
i think the problem might be my current windows resolution, which i set on 125%
1. open `profiles.json` in visual studio code 1. in one of the profiles remove the `name` property (i.e.
to have it use the name it inherits from the `defaults.json`).
1. open `profiles.json` in visual studio code 1. in one of the profiles with a default background color (e.g.
the one for powershell) add: `"background": null,` 1. in windows terminal, observe how the background color of this profile is reset to the one of its `colorscheme`.
copy text with phofcode line break.
example: phofcode paste it on powershell or wsl console.
- open the new terminal - press `win + =` to open magnifier.exe - press the + button to create a new tab in terminal
set that profiles in settings: phofcode
in a conhost wsl shell, execute the following command: echo -e " e this does the following: - sets the top and bottom [`decstbm` phofhyperlink margins to 6 and 19 - moves to line 24 (i.e.
below the bottom margin) - executes `cuu` phofhyperlink sequence with a count of 99, to move up 99 lines - writes out * cuu * moves to line 1 (i.e.
above top margin) executes `cud` phofhyperlink sequence with a count of 99, move down 99 lines writes out * cud *
in a conhost wsl shell, execute the following command: echo -e " e this does the following: - sets the top and bottom [`decstbm` phofhyperlink margins to 6 and 19 - moves to line 12 (i.e.
inside the margins) - executes `cnl` phofhyperlink sequence with a count of 99, to move down 99 lines - writes out * cnl * moves back to line 12 executes `cpl` phofhyperlink sequence with a count of 99, move up 99 lines writes out * cpl *
* open a tab (tried with powershell and cmd).
* run `ipython` * start entering at least one character and then hit spacebar.
no more char can be added to the line and ipython doesn't respond anymore.
* hit ctrl + c to clear the line
i imagine this is similar to
- install node using nvm in the wsl.
- using the bash shell in terminal app from wsl (ubuntu).
- ** _occasionally_ ** when running `npm install` the terminal will crash.
scenario 1 (via rdp) from windows terminal windows powershell shell running in a windows remote desktop (rdp) session: > clear > ls c: -recurse use 2 finger scroll gesture on touchpad -> vertical scrolling works scenario 2 (via native windows desktop, i.e.
no rdp session) from terminal powershell shell running in a remote desktop (rdp) session: > clear > ls c: -recurse use 2 finger scroll gesture on touchpad-> vertical scrolling does not work.
also, note that both standard "non-windows terminal (beta)" legacy built-in cmd and powershell terminals work as expected in both scenarios.
1. install terminal (preview) from microsoft store.
2. start each of the default shells.
install app from windows store or build from source and deploy cascadia package.
1. configure (or use a prebuilt) fancy zone from powertoys, leaving shift+drag to zone enabled.
2. grab terminal by the title bar, hold shift, and drag into a zone.
* set google chrome (or any other windows-side browser) as a `browser` environmental variable: > `export browser= '$(wslpath <windows-side chrome target path>) '` * start a jupyter server (notebook or lab, doesn 't matter) that will launch chrome to render in the background using the following command: >`jupyter lab --notebook-dir=~ &> /dev/null &` the process spawns and renders correctly.
however, as soon as something is entered into the prompt (e.g.
`ls`) that spawned the background task, background task is killed (see screen capture gif below)
update to the new terminal delete all content from profiles.json.
relaunch terminal and let it regenerate defaults.
hold down alt while clicking settings to see the defaults.
scroll down and see that consolas is still being used as the default.
new size actually is 12, btw.
* open new tab of powershell.
* run vs code as a child process of the tab (just `code .` as long as no other vs code windows are open).
* close tab with gui child process.
* open new tab of powershell.
* run vs code as a child process of the tab (just `code .` as long as no other vs code windows are open).
* close tab with gui child process.
1. install windows terminal on a machine where tmux 2.8 has been installed and displaying correctly with previous windows terminal releases.
2. open a wsl shell in a terminal tab, inside _tmux_.
3. run any command which displays text wide enough to use the rightmost column of the screen.
for the example screenshots below, i used _env_.
4. after observing initial behavior, clear the screen with _clear_ .
execute man page command like: phofcode
1. install windows terminal from either microsoft store, or via download from github release.
2. try to launch the terminal.
have tried multiple times to no avail.
1. open powershell core 7 preview-4 in windows terminal 1. left click select multiple lines, and then right click.
type/paste in a special character, attempt to erase with backspace
1. open wt 1. open profiles.json 1. create an object in the `profiles` array 1. fill in some fields such as `name`, `commandline`, `startingdirectory`, `colorscheme`, etc.
1. open a ubuntu 18.04 tab 2. select the prompt and copy it (right click in this specific case) 3. paste in powerpoint
1. run cmd.exe under windows terminal preview 2. navigate to a directory containing text files 3. run the command "less -mn *.txt" 4. when you reach the end of the 1st file enter the "less" command ":n" to go to next file
i can 't type chinese char in terminal by **microsoft pinyin bind in win10 20h1**
best way to see this (if you don 't have key tracing on in our own terminal app), fire up a tmux phofhyperlink session, have it configured with at least one more line, like this: phofcode which basically states, that ctrl+space will cause the terminal to switch to the next window.
except, that on windows terminal (or my terminal emulator, using conpty), it doesn 't.
* start windows terminal * open a tab with wsl ubuntu 18.04 (maybe also with other distributions) * choose a light theme (like one half light) in the `profiles.json` file * view a man page (e.g.
`man grep`) play with values for `brightwhite` in the choosen color schema
i install wsl - ubuntu in windows 10, want setup wsl in windows terminal.
if change profile ** fontface ** from ** consolas ** to **ubuntu mono derivative powerline** ( phofurl windows terminal will crash and close.
{ "acrylicopacity" : 0.5, "background" : "
1. type a poorly formed export-certificate powershell command such as export-certificate -type cert -filepath -force 2. don 't supply any details and hit enter when prompted for "supply values for the following parameters cert: 3. get a great long exception stack trace that you can 't read before windows closes as it crashes to desktop ending the windowsterminal process.
1. open windows terminal 2. double click on the title bar of main window.
using cygwin bash, execute the following shell command: `printf similar behavior is achieved from the c function `printf` in a standalone application, when compiled using a cygwin compiler, and linking the c function `printf` with the one defined by cygwin1.dll.
other shells running in cygwin have not been tested, and lack of known functionality in cmd.exe and powershell have made testing shell command directly difficult.
tests of c function, when compiled using microsoft visual studio, have proved positive on all tested shells.
just typing in wsl in windows terminal and it crashed abruptly.
i tried to reproduce it by typing random strings and then crashed again, but maybe the reason of these crashes are not same.
1. start type anything 2. press space
1. on a system that does not have any azure tools or components installed, fetch commit b84a073.
1. clean and then rebuild the solution 1. rename `profiles.json` to `profiles.json.old` (not sure if this is important, but when i update to a new build of terminal i like to start with a completely fresh `profiles.json` and merge in all my customizations) 1. attempt to launch windows terminal
1. minimize the height of terminal.
doesn 't even have to be fully minimized.
2. create a new tab phofimage
1. set historysize of a profile to 32728 or bigger.
2. open a tab for that profile.
3. run commands so that there is a bunch of scroll space (running `nano` on ubuntu is easier).
1. open many terminal tabs -or- a small number with long titles 1. note that at some point, depending on the width of the screen, new tabs do not appear on the tab bar at the top.
1. the tab is there, and you can `ctrl+tab` -or- `ctrl+shift+tab` to cycle tabs.
to reproduce, on an install of windows that has never had wsl enabled or installed, install the new windows terminal preview from the store.
open it to allow itself to get through any first initialization stuff it needs.
then enable wsl and install a linux distribution.
in my case it was ubuntu but i have a feeling it would break for the others too.
1. change cursor to 'vintage ' for default ubuntu profile 2.
`$ vim` -> `:q` after 3. cursor is no longer vintage, now it 's filledbox
install msys2, and then, in `settings.json` specify the command to open `msys2`'s version of `bash.exe` instead of `cmd.exe`
1. start ssh connection to host which asks password for authentication or use python getpass.getpass() 2. paste string from clipboard buffer to prompt 3. correct information will not be pasted and and python just stays waiting for input even after enter
run windows terminal on a recent surface pro device with the official type cover
launch freshly built and deployed terminal
build from cloned git tree.
git clone phofurl build x64 release (or debug) deploy solution.
click the menu down arrow choose "about"
build microsoft terminal git clone phofurl cd terminal git submodule update --init --recursive nuget restore openconsole.sln open vs2019 set build to release x64 build solution deploy solution launch terminal from start menu.
switch the "change the size of text, apps, and other items" to something other than 100% open up terminal and colorize multiple contiguous lines on the screen (for me, i 'm running wsl and run `vim` followed by `:color blue`)
this is the same repro as issue 1360 phofhyperlink , which i was trying to reproduce and hit this render-related crash instead: install ripgrep phofhyperlink open wt (windows terminal), running powershell.
run the following from the root of a large drive `while ($true) { rg -i "foo" }`
i installed docker via `sudo apt-get`, following this guide phofhyperlink .
however, `sudo systemctl start docker` gives me the following error: `system has not been booted with systemd as init system (pid 1).
can't operate.` other people said that `sudo service docker start` would work but that gives: `* starting docker: docker` which looks fine, but when running any `docker run` command, i get: phofcode
1. open emacs within wsl in windows terminal.
2. type either of the following: - m-> (alt + greater than) to move to the end of the file - m-< (alt + less than) to move to the beginning of file 3. verify key emacs is seeing, by typing c-h k (ctrl+h, k) for describe key - then type either of above key combinations.
two displays setup: in my case, an lg monitor, used as the primary monitor, connected through an hdmi cable to a dell inspiron 14 5000.
move cursor all the way to the left of the screen and start dragging to highlight text on that row.
resize the window (or maximize or unmaximize it) and drag the scrollbar.
1. highlight text in windows powershell, in windows terminal.
2. press ctrl+c and watch as a new line is generated but realize the selected text is both no longer selected and not on the clipboard.
1. open a bash terminal 2. type `echo foo` (don 't press enter) 3. press alt+backspace to delete the word (the command should now read `echo`) 4. type `bar` (the command should now read `echo bar`) 5. press enter
1. open any of the in windows terminal 2. install python package `pyreadline` 3. input `python` and enter interactive mode 4. press `enter` a bunch of times, until current view goes up 5. lines at the top got missing and can not scroll up
with the latest version of windows terminal, using the attached `profiles.json` file with `copyonselect = true`, every time i copy text the terminal will hang for 1-2 seconds and then crash.
after the most recent update to i enabled `copyonselect` and only saw this crash maybe once a day.
since yesterday (9/11), it happens every time i copy text.
no settings changes happened, but i do heavily use terminal every day with lots of copy/pasting, so as of yesterday my workflow is severely interrupted
select some text in the terminal containing a `<` character.
right-click to copy it if needed.
2. let the computer go into screen-locked status.
4. notice windows terminal has been closed.
5. proceed to event viewer -> application log and look for event 1000 's showing desktop windows manager and windows terminal applications both crashing/faulting.
> **source: application error / id: 1000** > faulting application name: windowsterminal.exe, version: time stamp: > faulting module name: ucrtbase.dll, version: time stamp: > exception code: fault offset: faulting process id: faulting application start time: application path: c: program module path: report id: package full name: package-relative application id: app **source: application error / id: 1000** name: dwm.exe, version: time stamp: module ntdll.dll, version: time stamp: exception code: fault offset: process id: 0x2cec0 start time: path: module path: tdll.dll report id: package full package-relative id: **source: dwminit / 0** the desktop window manager process has exited.
(process exit code: restart count: 2, primary display device amd radeon(tm) vega 8 graphics)
run the following app using node.js after doing `npm i blessed` js var blessed = require('blessed'); var screen = blessed.screen({ smartcsr: true }); screen.title = 'my window title'; var box = blessed.box({ top: 'center', left: 'center', width: '50%', height: '50%', content: 'hello {bold}world{/bold}!
', tags: true, border: { type: 'line' }, style: { fg: 'white', bg: 'magenta', border: { fg: '
1. create a string "s" with sgr sequences that sets foreground to red, and background color to white, and then at the end of the string an sgr reset (which should set fg and bg back to their defaults: gray on black).
2. write the string to the console, and observe that it works as expected.
after content, rest of line (to window edge) is black.
3. now make string longer by just adding content in middle... long enough that it will wrap.
4. write console, observe that it works differently.
after end of content, rest of line (to window edge) is white.
enter `printf " 033c"` while using wsl in windows terminal
1. make sure you have multiple monitors (mine just happen to be in portrait mode) 2. drag windows terminal to top of monitor.
3. window is now maximized
open a r phofhyperlink session then type any expression and evaluate it.
then the up arrow should retrieve older commands in the history.
- run msys2 / mingw64 bash in windows terminal, e.g.
in a cmd tab with `set msystem=mingw64&& --login -i` - run emacs in the terminal (`emacs -nw`) and quit it immediately - back at the bash prompt, enter a few characters, say `123` - press the left-arrow as often as needed to move the cursor to beginning of line (in this example 3 times) enter some other characters
1) in your profiles.json, create two profiles (we will call them a and b) 2) give a the space background image and b the tree background image (attached at the bottom) 3) open windows terminal with a as the default profile 4) open b in a new tab
hold down the shift key and drag the windows terminal window.
- right-click app from start menu - fill in appropriate credentials
go to about screen, select text, right click, copy -> crash select text if auto copy is enabled -> crash select text and right click, copy -> crash
run 'windows terminal' with two command-prompts.
run next command in both prompt (simultanuously) for /l %f in do @echo %f in de output of the first screen the 'wrong output' is found.
(not neccesarily at the point given in the example)
compile and run the following c++ code:
open a wsl conhost shell, and execute the following command: printf line?
e[r" this sets the decstbm margins to the top two lines, moves the cursor position to very bottom of screen (i.e.
below bottom margin), and then writes out "bottom line?"
followed by 3 line feeds, and finally resets margins.
1. use rdp to access your device 2. either start the terminal fresh, or close a tab, or try to open a new tab.
1. copy the color palette for "<solarized (john doe)>" from conemu to terminal.
here 's the relevant json: json { "white" : "
just open the cmd in windows terminal.
click on the terminal window without dragging.
1. set the `initialrows` value to something like 30 rows (a value that makes the openned window has less rows than the maximized window should have).
3. run some command with a lot of output (like `ps`, `ls`or `dir`).
- i have selected cascadiapackage as the startup project - i have set x64 and done build and deploy - when i try to run windows terminal, i get a window outline and shadow, and a crash dialog
open a cmd tab edit the settings and change fontface for the cmd profile to something invalid (apending "zzz" for example)
on an ssh connection, paste the text on the screen tab position incorrectly
1. turn off the windows setting `scroll inactive window when i hover over them` 2. have terminal on monitor with scaling other than 100% 3. have enough text to scroll 4. focus terminal and scroll with mouse wheel
just open windows terminal and launch ssh command : ssh login@ipadress
re-install wt still won't work.
but installed in my other pc worked so i think it's something wrong with my pc settings.
open an azure cloud shell with a column width of <= 90
2. double-click on title bar away from open tabs.
1. open windows terminal from store.
2. select azure cloud shell.
3. navigate to phofurl 4. enter code displayed in windows terminal
1. open wt 2. add tabs until they go off are no longer rendered 3. scroll the mouse wheel over the tabs
1. open windows terminal 2. double click in the title bar (see screenshot below) wt-title-maximise phofimage
* install a wsl distribution (opensuse leap 15.0 in my case).
* move it to top spot and make it default.
* uninstall old wsl distribution and install the upgraded one (opensuse leap 15.1 in my case).
1. install phofhyperlink far manager 2. open it from windows terminal by executing `far` command 3. position cursor on any directory 4. press `shift + enter`
- install far manager from phofurl - run far manager inside windows terminal (from cmd session or by creating new profile) - type any text, look how cursor moves in command line while typing - press ctrl-o, try to move cursor using directions keys press "enter" with any text entered in command line (no matter when in panels mode or in history mode, switched by ctrl-o, no matter if correct command or any text) type any text again, look how cursor moves while typing press ctrl-o, try to move cursor using directions keys
run powershell as admin run the following command: choco upgrade
install the application from windows store (or from binaries released on this repo) and launch it, it results in the following error: image phofimage builds made on my machine launches just fine, so i don 't know how i can get more info to debug this issue (they crash after using it for a while, but i don 't think this is related to the same bug).
open a wsl conhost shell, and execute the following command: printf this sets the text color to bright yellow on red, and enables the reverse video and underline attributes.
it then clears the screen with an `ed` (erase in display) sequence.
open a wsl conhost shell, and execute the following command: printf " this sets the vertical scroll margins to lines 3 to 4, ** inserts ** 5 characters at the start of the first line (using `ich` escape sequence), and then resets margins again.
now open a new wsl conhost shell, and execute following command: printf " this sets vertical scroll margins to lines 3 to 4, ** deletes ** 5 characters from start of first line (using `dch` escape sequence), and then resets margins again.
open a wsl conhost shell, and execute the following two commands: printf orange e[8;24;80t orange e[m " printf reverse e[8;24;80t reverse e[m " the first command uses an sgr escape sequence to set the background color to index 214 (a shade of orange), writes out the text "orange", then uses the xterm window manipulation sequence to resize screen, and writes out "orange" again.
the second command does same sort of thing but with different attributes.
it sets colors to bright white (index 15) on blue (index 4), and also enable reverse video attribute (making it blue on white).
1. install windows terminal 2. install a linux distribution from windows store 3. enable the windows subsystem for linux 4. reboot 5. launch the wsl distro and configure it 6. reboot
installed from ms store launching results in an empty window border showing (less than 1 sec) and terminating updated to latest version using chocolatey same results see
open a wsl shell and execute the following command: printf " e 10g e[lleft margin? "
what that is doing is moving the cursor to column 10, inserting a line with the [il phofhyperlink escape sequence, and then writing out "left margin?
- install via windows store on to one of the few windows 10 on arm devices (in my case the asus novago tp370 phofhyperlink ) - attempt to run terminal
1. open remote ssh session to linux (ubuntu) 2. run nano 3. try to use ctrl+w to search for a string
in windows terminal start the ruby repl `pry` or `irb` type `fooar` then press the left arrow key to move the cursor back.
in windows terminal start the ruby repl `pry` or `irb` type `fooar` then press the left arrow key to move the cursor back.
install either go mono or go mono nerd font font, change settings to use it and set size to 11.
connect to windows from a mac with microsoft remote desktop and the "use mac shortcuts for cut, copy, and paste" option on.
install firacode nf or another ligature font type ligatures
* create multiple terminal profiles * add different gif backgrounds for each terminal profile * open them in microsoft terminal
open the dropdown menu, now move the window
`scoop install maven` 2. start up a new tab 3. run `mvn`
1. checkout the terminal repo.
1. run `tools azzle.cmd & bz rel` to get a successful build.
i just installed the windows terminal from windows store and when i clicked on the "launch" button the terminal opened and crashed almost instantly
when i ssh to my centos 7.0 server and start a new tmux session (`tmux new-session -s somesession`), and open a new or existing file in emacs, every time i move my cursor on a white space or special character, i get a unwanted square character printed on the screen.
some characters are already there (e.g.
on empty lines) when i first open the file.
the changes are only visual and don 't modify the actual text file (i.e.
saving and re-opening the file clears new characters) but those that are there when file opens appear consistently, generally in empty lines.
if try with emacs outside of tmux it works fine, so it seems to be specific to tmux or one of its setting.
did try to set my `$term` xterm-256color, rxvt, etc.
in tmux configs but it didn 't seem change anything.
just use a chinese ime, then type.
in a standard cmd console window, from the properties dialog: 1. terminal ~ enable "disable scroll-forward" 1. layout ~ decrease "screen buffer size / height" to be equal to "window size / height"
open a non default shell (in my case cmd, because wsl is the default) press the shortcut for command ** splitvertical ** (ctrl+shift+ ) the pane will split and
1. install *windows terminal (preview)* phofhyperlink through the *microsoft store* on two separate windows devices ** important ** : use the same credentials in the microsoft store on both devices 2. change settings on one device (e.g.
add a new profile to start in drive `d: ` ) 3. change the settings on other device (e.g.
add same profile but use drive `e: `)
1. start windows terminal (preview) with powershell as a default environment 2. open linux ubuntu tab as a second tab 3. in the second tab execute `ls` command 4. close the second tab 5. in the first execute `docker ps` command
1. create a powershell tab 2. press enter until the text covers most of the window 3. split the view horizontally 4. close the bottom pane 5. start typing
open terminal with powershell core, close app (click "x" top right)
1. start wt using `cmd.exe` 2. type in a command to change the background color, such as `color 90` (light blue background, black text) 3. observe with satisfaction that the screen turns blue, with black text 4. hit the enter/return key a couple of times 5. look on in disappointment as you see that all the new lines you just added kept original background color instead of using blue background with black text like we told `cmd.exe`.
can be reproduced by searching for `wt.exe`, and in search results, clicking the `open file location` option.
this will open a file explorer window in the folder.
from there double-click on wt.exe to execute.
copy any text using keyboard shortcut `ctrl + c` and try to paste it using `ctrl + v` shortcut.
1. create a directory named `q&a`.
2. within this directory create a `bat` file named `elevate.bat` with the following contents: phofcode 3. again, within this directory create a `vbs` file named `elevate.vbs` with the following contents: phofcode then double-click `elevate.vbs`.
with the terminal closed, do anything that trigger a json settings file rewrite, for example, add any setting to the settings json file that is not on the schema (or is invalid), for example: phofcode ` then, open the terminal
1. run or launch a powershell terminal 2. press enter a bunch of times (`echo` also triggers the behavior)
1. create a file with the unicode right-to-left override phofhyperlink character in its name, such as 2. display this files name in the terminal by running `dir /b` in cmd or `ls` in powershell etc.
open the about dialog, then resize the window.
ssh into a linux environment nano filename.txt ctrl+w to search within nano
1. open any type of terminal.
2. change system language like usual 1.
(with / key (language change key), or click the language change button on the taskbar) 3. write some text.
1. map a key binding to `splithorizontal` 2. invoke the `splithorizontal` key binding beyond the point where space is available for the split (~6-7 times) note: it also happens when splitting vertically but it appears to allow more before crashing.
1) launch wsl session in windows terminal 2) hit enter a few times to generate few lines of output 3) select the lines with mouse and right click to copy to clipboard: image phofimage 4) paste the lines into a different program, note that 4 distinct lines are pasted, this is expected behavior.
image phofimage 5) launch vim (or other full screen application) inside the wsl window: image phofimage 6) close vim using esc q!
enter 7) highlight and copy the again using mouse and right click: image phofimage 8) paste clipboard into different program, note that output is now on one line:
1. create a new cmd.exe tab.
2. use command 'powershell '.
1. configure a custom `tabtitle` for cmd or powershell shells in the profiles.json file, e.g.
: phofcode 2. open a cmd or powershell tab, verify the customized `tabtitle` is appearing.
3. try to set a custom title programmatically from within the shell, e.g.
in powershell: powershell = 'custom title :) '
1. create tabs until they get created outside of the visible area of the tab bar
haven 't found a pattern yet.
drag tile from windows start menu to desktop to create link shortcut.
right-click shortcut icon and select properties.
change run field to maxmimized.
terminal window does not open maxmimized, or at least it doesn't move the window to the upper-left of the screen the same way it would if you hit maxmimize button or windows key + up-arrow.
open a multi line file in a terminal editor.
i have tried both vim 8 and nano.
in the editor attempt to hold the down key vim: j & nano: down arrow.
the cursor will love down.
however, when you release the key the cursor will continue to move down multiple lines past where stopped.
- open the about window - increase the width of the terminal window (it helps to start with a smaller terminal window to have room for this step)
open windows terminal in dark mode.
add keybindings to split a tab into multiple panes.
ex: phofcode open a profile that has a dark background, like black or something close to that, ex, campbell theme, where background is
i'm honestly not sure what i was doing.
1- open a new cloudshell tab and log in 2- execute some azure cli commands for about 10 min
start an application like poolmon from the windows wdk that takes up the entire screen buffer while it's running.
1. open terminal settings to change the "colorscheme": "solarized dark", to "colorscheme": "campbell", for better user experience 2. from the terminal list select "azure cloud shell".
3. type pwsh, and wait for the prompt.
4. at the powershell prompt, type $psversiontable, and press enter.
5. type "dir" and check cursor position.
6. type "exit" and press enter to exit powershell.
1. ensure double click delimiters includes " " 2. double click on empty line
i have build terminal from source and am using it successfully, but i would like to try the version from the windows store.
i have downloaded it, but when i try to launch it, it immediately terminates without any other error.
the exact sequence is: > start menu > click on "windows terminal (preview)"
ever since the azureconnection addition to terminal i haven 't been able to build the project.
i get multiple linker errors.
i 've recently uninstalled and reinstalled visual studio to try and mitigate the issue.
* open windows terminal (preview) * the default powershell tab opens, with the title * click the ** + ** button to open a new tab * a second tab opens.
the title does not fit inside the tab, and is cut off at "... pow" before new tab + button
1. open a command (cmd) tab.
2. execute enough commands to put data in the scrollback buffer.
3. execute ** cls ** 4. observe results
copy several text lines and paste them using vi text editor in bash (wsl).
build code from and the build completes, but when i start the app, i get failures and app just instantly closes out.
if i restore the file from to any newer code then build succeeds and the app starts normally
1. open a cmd.exe prompt using windows terminal 2. change the background color using the color command ("color 1f") 3. press enter until you are close to the bottom of the screen 4. run "dir" command so that text will scroll 5. notice that background color is reset for part of window that scroll.s these images show side by side comparisons between windows terminal and classic console beforescroll phofimage afterscroll phofimage :
1. open a conhost wsl shell.
2. execute `printf " ec"` (the ris phofhyperlink escape sequence).
3. note that the display isn 't cleared.
4. do a few directory listings or something to fill the scrollback buffer.
5. execute `printf " e[41m ec"` (setting the background to red, followed by ris).
6. note that the display has been cleared with a red background, and scrollback is only partially cleared.
`apt install sl lolcat` in case they are not installed yet.
then run `sl | lolcat`
quickly hit middle button on a tab (that is not the last one) several times
run windows terminal as an administrator.
edit profiles.json to give background image an opacity of 0.3 exactly: phofcode save.
observe opacity change in running terminal.
launch profiles.json from observe opacity value rewritten as phofcode another case: set background image path to an interesting name, like: phofcode it comes back as phofcode
paste a multiline powershell cmd that has a pipe symbol after curly braces in a powershell terminal.
example: tget-volume | twhere-object { -gt 0 t} | tselect driveletter,size
- setup a profile to open a powershell core tab directly.
starting pwsh.exe from cmd.exe or powershell.exe doesn't have the issue!
- call `git diff` inside of a git directory with unstaged changes - select git output with mouse - right click to copy open `notepad.exe` right click -> paste
these profile settings cause the specified background image to display.
each of these images is viewable via file explorer and in use as desktop background images.
"backgroundimage": (landscape) oddr [vizsla] - desktop.png", "bottomright", 0.5, "fill" these backgroundimage paths fail to render: "backgroundimage": (landscape) ilfi [vizsla] - desktop.png", "backgroundimage": (landscape) flki [vizsla] - desktop.png", additionally, adding these characters to tab name causes them to display the bad-encoding diamond.
install viu, and display an image big enough to be full screen `cargo install viu` `viu /mnt/c/.../image.jpg` type
pressing altgr + (number row) - and possibly other key combinations requiring altgr does not seem to bite on the terminal.
for instance, getting the "at" sign "@", we usually press altgr+2 or ctrl+alt+2 to write it, but terminal does not recognise both of these ways.
1. open the terminal app 2. close the terminal app only happens when the terminal is closed and ps is the active tab.
does not happen if ubuntu or command line is active tab or if i close a ps tab but terminal app stays open.
1. launch azure cloud shell profile tab and connect/login to azure 1. launch powershell core with command: `pwsh` 1. execute any powershell core commands
1. open terminal 2. run some command that produces output that extends past the bottom of the window (e.g.
`dir` on a directory containing lots of files)
1. open terminal with wsl ubuntu 2. display something on stdout (e.g.
`echo hello world!`) 3. run `clear -x` or `ctrl+l`
open the drop-down menu click on the titlebar
* open windows terminal with `cmd.exe` as the default profile .
* open a new terminal tab hosting `pwsh.exe` or `wsl ubuntu` * type `exit` to close the new tab * back in the `cmd.exe` tab, `type` a reasonably sized text file to the console.
(_mine was a 59,219 byte csv file_)
1. open a directory in explorer.exe 2. type 'wt' in the search bar to launch the terminal
i tried to use azure cloudshell connector, but the connector shows an error message like below.
<img width="737" alt="issue" src=" phofurl
1. open a new windows terminal instance 2. open a second tab using either the "+" button 3. close the new tab using ctrl+w, middle clicking the tab, or clicking the tab 's "x" repeat steps 2-3 as fast as possible.
1. open the windows settings app.
2. change from dark mode to light mode, or vice versa.
1. ensure that you are configured to use the utf-8 locale and utf-8 codeset; i.e., that the output of the `locale` command is as follows: phofcode 2. run `pstree`, or another command which detects and uses utf-8 line-drawing characters.
note that this is not the default configuration of debian for en_us.utf-8 locale, which leaves lc_all set to c; `sudo update-locale lc_all=en_us.utf-8` is required.
1. open wsl terminal 2. copy a multiline escaped command like below to clipboard phofcode 3. paste clipboard into open terminal window using right-click.
1. install clink from `cmd` phofcode 2. configure terminal default profile to cmd `"defaultprofile" : 3. open and close terminal (ui close button, don 't use `exit` command) this problem didn 't exist in previous public preview build.
1. fresh install of terminal from microsoft store 2. try to open the default azure cloud shell tab and close the tab without login 3. enter something in default powershell and press enter, for example, type "abc" and press enter
start this application and drag it somewhere
open cloud shell window perform device login
1. start up windows terminal.
2. switching cjk input methods.
1. make sure at least two lines exists in the terminal window (eg.
by typing in a command) 2. use ctrl+mouse scroll wheel to zoom either in or out
1. ensure double click delimiters includes " " 2. double click on empty line
title tab is very large, don 't auto scale size.
if i open many tab, i can 't click "x" to close this tab (use exit command to exit) there is many tab but can 't see three tab image phofimage
1. open terminal 2. click on the options down arrow image phofimage 3. move the main window
1. fire up wsl 2. run vim 3. enter some chinese characters, they seems to be fine.
4. press esc, press o to insert a new line above 5. start typeing some english letter... 6. and the chinese characters become smaller than normal size... 7. if i type english letter beneath, it works ok phofimage phofimage phofimage
1. start the joe editor with a new file without specifying a filename 2. type 3 lines at least to see what happens, e.g.
: phofcode 3. go back with the cursor to the middle of line2, e.g.
before the 'n' character 4. press enter key.
1. start the joe editor with a new file without specifying a filename 2. type 3 lines at least to see what happens, e.g.
: phofcode 3. go back with the cursor to the beginning of line2.
4. press the enter key.
1. start the windows terminal (dev build).
2. open an ubuntu tab (or whatever linux shell you have).
3. do a bunch of directory listings that really fill up the scrollback buffer (the system32 directory is good for that).
4. execute `printf " e[3j"` to clear the scrollback buffer.
the issue manifests in a number of different ways, but one of the most obvious examples looks like this: 1. start the conhost: host.exe 2. in the properties, make sure that the _screen buffer height_ is larger than _window height_.
3. open a wsl bash shell.
4. get a directory listing, or something that fills screen with content.
5. execute following escape sequence, which sets background color to red, and deletes 4 lines from top of screen: printf
1. open the `profiles.json` used by windows terminal for settings, make formatting changes, and save them 2. open a new windows terminal window
- fresh install of terminal from source - try to open azure cloud shell connector
- fresh install of terminal from source - try to open azure cloud shell connector
1. change "defaultprofile" to anything other than a valid profile
set startingdirectory for the pscore profile to a directory not on the c: drive.
in my example, the d: drive.
update to the latest visual studio 2019 (16.2.0) build terminal (you will get a compiler error) (i had no issues building with 16.1.0)
opened one wsl terminal tab with a relatively long path like this: image phofimage the path is too long to give other opened tabs space to show.
i opened another wsl tab, but i cannot see it in the tab bar, only when i maximize the window size can i see it.
in terminal: image phofimage pasted to word:
using two displays with different resolutions and maximize the terminal window in the smaller display/resolution.
1. download the font phofurl 2. install into windows 3. edit profiles.json `"fontface" : "iosevka nf"`
open tab too fast and many of them.
using shortcut key(default ctrl+shift+number) makes easy to open lots of tab at once which i was doing was holding shortcut key(crtl+shift+2 to open cmd) for few seconds.
1. open a windows terminal, then an ubuntu tab.
`import matplotlib.pyplot as plt` 4. try to plot anything using matplotlib
1.start an ssh session in a tab(current or new would do) with rsa certificate identification.
2.close the tab while the ssh is still connected.
render a block with background color after the text.
the used command is from symfony 4.3. i can provide instructions or find the exact control codes that were used if needed.
cd into <user>/desktop on c drive run lambda stack (using the link attacked above) after that, run nvidia-smi
open windows terminal from the start menu or taskbar drag the window on random intervals.
run windowsterminal.exe directly, outside of app package.
click about in the drop down menu.
1. start conhost (host.exe) from within the visual studio debugger.
2. from the cmd prompt, open a wsl bash shell.
3. begin typing something on the command line.
4. watch the output/debug window in visual studio.
5. note constant stream of debug messages being generated as you type.
1. window terminal (preview), run as administrator
i edit my settings to add a key binding for `newwindow` as listed here: phofurl
the relevant-looking parts of profiles.json are: phofcode
- use a build from latest master commit dca0ffe6.
- start the terminal under vs, then click on the tab down-arrow menu button.
1. set the dword registry value to `1` to enable the directx renderer that supports font fallback.
2. build the latest source (or at least commit dca0ffe phofhyperlink ).
3. start a bash shell in conhost with the `tools openbash` script.
4. try outputting a character that would usually require font fallback, for example: phofcode
close last tab using ctrl+w
1. open a wsl bash shell in the windows terminal.
2. use the scs (select character set) escape sequence to select the _special graphics_ character set.
3. output the `_` character, which should map to a blank.
4. output `` ` `` character, which should map to a diamond.
5. note that `_` character doesn't map to a blank, and `` ` `` character maps double-width diamond which causes subsequent characters be out of alignment.
here's an example `printf` statement that will demonstrate issue: printf ' e(0[_] [`] e(b' for reference, special graphics character set is documented here: phofurl
_this is the way i found it was most noticeable and also how i found it initially_ - open terminal - open wsl ubuntu using the options tab or type phofcode in cmd or powershell - install cmatrix using phofcode - type phofcode to run.
see the laging behavior of the terminal.
open windows terminal, and resize the window, when the window width is smaller than a certain value, it crashes.
try to launch the app as administrator
the default profiles in profiles.json contain the element "background" which overrides any color scheme that you set.
1. install ubuntu from microsoft store 2. install terminal from microsoft store 3. open terminal and create new ubuntu tab 4. :bug: ubuntu not listed as one of the options
in the configuration file: the "commandline" variable, of a profile, is set to a non existing .exe or command
tools azzle.cmd rel bcz rel run terminal at
when you tap on the drop down button, and bring the flyout on screen.
clicking on the titlebar will not trigger the light dismiss behavior and flyout remains open.
tapping on terminal display, tab or tab bar, works as expected.
ssh to a server running ubuntu 18.04.2. edit something with vim and split view.
hopefully you know how to escape hotel vim and how to use it.
this guide phofhyperlink may help.
it crashes for me, repeatedly.
edit: i tried this ssh'ing to a rhel5 host, it did not repeat.
then when i tried it a 3rd time on the ubuntu 18.04.2 host it did not crash.
sorry, this may be harder reproduce than i thought.
specifically, i also used vs, vertical split.
start windows terminal and try to invoke `colortool` in the store version of the app - not built from source.
1. start openconsole.sln in visual studio 2019. make sure cascadiapackage is the default project, and platform is set to x64, and build the solution if necessary.
<kbd>f5</kbd> to start debugging a new instance.
you should now have a powershell instance in the terminal.
1. in the powershell instance in terminal, run following commands: powershell $esc = [char] 0x1b $s = "hello.
1. install pragmata pro mono liga 0.827 font (any other unicode font should work as well).
2. open the windows terminal with wsl ubuntu tab.
3. download and display the `utf-8 demo text` phofhyperlink .
1. open windows terminal 2. run ssh to remote gnu/linux 3. download phofurl 4. run emacs 5. install rust-mode to emacs 6. in emacs, open file re.rs
1. open terminal 2. press "+" button to open new tab or two 3. fairly quickly after, press `ctrl+w` multiple times
sorry, i don't figure out clearly but this step always make cmd.exe hang.
at present, the method that can be reliably reproduced is to start vim.exe at the bottom line of cmd.exe.
1. open farmanager in windows terminal.
2. press 'ctrl+o' to switch to panel view.
3. try to click with mouse on files or folders elements.
exit a mingw bash shell using a keyboard shortcut to close the tab
- install the terminal with windows store (recent version as of writing, v.
1. set the registry entry to 1, to enable support for vt escape sequences by default.
2. makes sure the `initialcols` option in the windows terminal profile is set to 120.
3. open a ** cmd ** shell in the windows terminal (this can't be a wsl bash shell - it must be something that would usually not have vt support enabled without registry setting).
4. run following python script: import sys ')
if i change the settings of the windows terminal, create a new profile and set it default with linux (not powershell or cmd) , modify the property 'fontface ' from 'consolas ' to 'rubik ' (font on fonts.google.com).
close all windows and try to open windows terminal it won 't open, if i change it back to 'consolas ' and try to open it this time will start.
i am attaching a simple program that write " 033[" and "0c" to stdout.
when i use the echocon sample to launch this under conpty, i only see "0c" in the output.
breaking at the writefile at the bottom of echocon sample, i see following things: 1. an initial xterm settitle osc, which is unexpected but manageable.
2. a sequence of "[escape code for cursor off]" "0c" "[escape code cursor on]" (notice 033[ is missing) code attached:
open a powershell and type `123` on the prompt (or paste it)
1. build the windows terminal locally, and run _windows terminal (dev build)_ from the _start_ menu.
2. when the default powershell tab opens, type the following command: echo "before `0 after"
just open the terminal and write some text.
1. make tabs more then current terminal width.
(tab name should be over the terminal topbar.)
2. scroll topbar using mouse wheel.
3. tab does not appear.
but topbar size has increased.
in a powershell window, execute the command phofcode
1. set `"cursorshape" : "bar"` and `"fontface" : "fira code"` in a profile 2. run terminal 3. paste symbol `cyrillic small letter er`: `` 4. press `backspace`
- open wsl ubuntu - use bash - enter few characters - note that esc backspace won't delete the last words note that esb b won't go back a word
create a script in powershell that intercepts ctrl+c so it can gracefully shut down.
run that script and try to use ctrl+c.
the script can 't intercept it.
it behaves the same in powershell core and in powershell.
open windows terminal, click on down icon, instead of having the effect on the dropdown, it was highlighted on both plus and down icon, there was a delay from the effect too, the down icon was highlighted but after 0.5 seconds later the plus icon gets highlighted too.
apart from that, i am wondering if dropdown is supposed to fit side of terminal?
pin windows terminal in your taskbar, right click on the terminal icon, terminal icon in popup is missing.
pin windows terminal in your taskbar, right click on the terminal icon, terminal icon in popup is missing.
0. the crash reproduces on both cmd and pscore.
1. invoke some program that outputs chinese.
2. drag on the output text for selection.
start windows terminal with powershell 6.2.0 and runs vim with `vim`.
`path` for vim was `c: program files (x86) vim vim81`.
close tab with vim is running.
start windows terminal, spam open different types of terminal (using hotkeys), preferably spamming ubuntu, cmd and powershell, some tabs collapsed into showing just icon while others are expanded.
start windows terminal, open a tab of cmd, type this command in the prompt, phofcode any color (number) will do, change to a new tab of cmd, changes were not saved into the profiles.json.
1. install the third-party aerolite.theme phofhyperlink to get window borders back to being usable (i.e.
2. note that command prompt, windows powershell, and ubuntu for windows 10 command shell windows all respect the nice new border width.
full screen the terminal window and use the keys "windows + shift + arrow" to move the window to your second screen
pin windows terminal to the start menu
if a utf-8 stream gets buffered in a loop, characters that consume more than one byte may get split at the buffer boundaries.
passing the buffer to will corrupt the text because a conversion to utf-16 is in place where these partials are treated as invalid utf-8 characters and replaced with with u+fffd characters.
add a path with spaces in system-environment variables at the end of existing ones, e.g.
files microsoft vs code insiders bin
- select text by dragging over it - click the text, which copies - notice that now one character where you clicked is selected - right-click into your input observe the text actually pasted is just that character selected after (or during) copying
just run windowsterminal and make sure it is the active window.
i also have the dark theme configured on my system with a blue accent color.
- open windows terminal - click on maximize icon
1. open terminal 2. input-> "conda activate python3.6" (my conda environment name which use python3.6.8 ) 3. input->"python" 4. the env is base (use python3.7) rather than python3.6
1. ssh to a centos based system (it has to be a centos linux) 2. open a linux screen session 3. press backspace when there is nothing in the current command line
1. using terminal app, open a new ubuntu tab 2. attempt to change the password of an existing user using passwd
add wsl to windows terminal profile, can't type `alt-<` `alt->` `alt-:` `alt-?`these are usual commands in emacs.
and these keys works all right in ubuntu wsl
1. create a profile with launch arguments, e.g.
`"commandline": "powershell.exe -noprofile"` or `"commandline": "wsl.exe -e vi"`.
2. launch the newly created profile.
- use meslolgl nerd font forpowerline font.
i tried to keep `profiles.json` saved in my onedrive, so i created a `profiles.json` symlink as the following: phofcode
1) start windows terminal (preview) this start on powershell window 2) start cmd window 3) close the first powershell window 4) start a new powershell window 5) close the new powershell 6) on the unique windows (cmd) run the ls -l commnad result: windows terminal crash show debug option.
this do nos show source.
detailed exption info is; excepcin no controlada en en windowsterminal.exe: infraccin de acceso al ejecutar la ubicacin ls -l works fine in others sequence
start windows terminal, close the terminal through closing the last remaining tab, the terminal frame remains there for about 4 seconds.
start windows terminal, restore down the terminal, open a tab of ubuntu 18.04, allow the prompt to reach the end of the screen, maximise terminal, restore down again, maximise terminal again, one of prompts will align right instead of left.
simply clicking the launch button will give the following error message: image phofimage
install gvim assign json files to gvim try to open the settings in terminal
add the following to the `keybindings` section of `profiles.json`: phofcode
use terminal preview 's "setting" menu command on a system without json files associated.
create a profile for ztw like this: { "commandline": "icon": "name": "ztw", }
start windows terminal, open a tab of cmd, using visual studio code, change the profile settings (acrylicopacity) of the cmd in the profiles.json, saved, the screen opacity does not change.
start windows terminal, have the terminal on restore down, open a tab of ubuntu 18.04 tls, look for a directory with lots of file in it where scroll bar exists.
then maximise the screen, click on the scroll bar and move it up, the screen does not move upwards.
compiled thursday build from source.
1. open windows terminal 2. only windows powershell (older version that come with windows), but can't find powershell core 6/7
type symbols using key "alt gr", e.g.
1. open windows terminal 2. switch focus to another window
1. download windows terminal from microsoft store 2. try execute application 3. don't run, only crash
set `cmd` as default command line tool in windows terminal open windows terminal type bash to go to bash shell
1. click on the settings button
error (1) - select settings from the drop down menu via the mouse error (2) - ctrl+ , shortcut
put your mouse cursor on the window's topmost coordinate just above tabs and click.
horizontal scrolling doesn't work on tabs.
for some reason (typo in the code maybe?)
vertical wheel does horizontal scrolling instead.
i have a canadian multilingual keyboard ant to do a pipe symbol i have to use the right alt and the key before the 1 on a us layout i don 't kown which one it is but on my keyboard is a slash (/).
2. left click over title bar, left side of plus sing.
(between title of open tab and plus sign) 3. try to move window.
i installed windows terminal(preview) in microsoft store, then i clicked the icon to start it.
1) open powershell terminal from pinned taskbar shortcut 2) do something to create output, e.g ls 3) grab edge of terminal with mouse and increase size 4) create more terminal output.
note output only consumes original footprint 5) control-t to open new tab 6) note that in new tab the entire terminal window is used for output
resize the terminal window using the latest checkin.
install windows terminal on windows without powershell core 6, but with powershell core 7 installed.
using powershell console to display characters that are not natively on the mac keyboard (like |, [, ], {, } ), it does not work.
the keys shift+option+ <key> have no effect.
this is weird because it works perfectly in the powershell console or cmd outside of windows terminal.
* i open a file with emacs in ubuntu from windows terminal.
* i select a block of text by setting a mark with ctrl-space and then pressing up arrow key.
* i press ctrl-w to cut text.
closing a tab after open a new tab
0. open windows terminal 1. ssh in any shell session (tested pwsh, cmd, bash) to linux server 2. start mc (midnight commander) 3. scroll through folder list with arrow down/up 4. do the same as above in pwsh or bash or cmd but started directly (without windows terminal) 5. compare performance and screen quality
clicking on settings menu not opening settings.
runas /user:someuser cmd enter password of someuser
1. press win+r -> enter ** wt ** -> press ctrl+shift+enter
create a profile with an icon property like this, where the icon file exists: phofcode
repros in both cmd and python 1. type a 2. press space 3. repeat
write-host -foregroundcolor gray "hello world!"
if you try the following steps, you will not get what you copied.
1. copy some texts from windows terminal, (highlight text with mouse left button, and right click on the windows terminal window).
2. close the windows terminal app.
3. you will find out what you copied is gone after close the application.
open up a new powershell or cmd window and try to enter a @ with a german layout keyboard.
i tried to type the @ char with `ctrl + alt + q` and i did try it with `altgr + q` in both cases the behavior is identical.
seems like the problem is present with the backslash ' ' as well on a german keyboard you need to either use `ctrl + alt ` or `altgr ` to get char in any other application.
since i can ctrl c my command alt key should be problem or combination.
it is possibly copy char if you type it into editor and paste it click of right mouse button.
this is workaround for moment.
1. using windows file explorer, create a file with filename ".docx" under a directory (e.g.
2. launch windows terminal and run "cmd.exe" or "wsl.exe" command.
3. change directory to the folder where the file you created locates, and type "dir" or "ll" command.
4. check if the filename shows on the list correctly.
5. try to select and copy filename from windows terminal.
6. paste filename you copied in notepad.exe and check if it is ".docx"
1 - install ztreewin phofhyperlink , or powershell powertab 2 - make terminal window large 3 - execute ztw or [tab] in powershell with powertab enabled
type "exit" for close terminal (with one tab opened)
use clink with cmd.exe within windows terminal.
i have a custom lua script for clink that intends to mimic the prompt produced by "powerline" in bash.
see phofurl for information on powerline.
i 've attached all of my clink settings and scripts: clink.zip phofhyperlink > ** note: ** this prompt uses characters not included in most fonts (including consolas).
you must use a powerline compatible font (like "hack" linked above) for correct prompt display.
the sign | cannot by typed using a german keyboard in windows 10.
run ping <host> across multiple powershell tabs and close terminal without stopping ping check taskmgr and ping.exe will still be running
with windows may 2019 and all updates, and terminal preview.
using french defautl layout (azerty french) type "c: "
you have at least one tab.
now, open a new tab (any console type) and then close the first one (either by clicking the "close" button or by using the keyboard shortcut (mine is bind to ctrl+shift+w) or wheel-clicking).
i 'm running `tmux` in `wsl`.
when i open vscode in any pane by writing `code .` or `code-insiders .`, the whole tmux display gets mutilated.
starting typing something in one pane starts changing other side panes.
try to type an at-sign by pressing `altgr+q`.
doesn't matter if it's cmd, ubuntu or powershell
set background image to animated gif using value: phofcode open created console
start the terminal app, try to close it using alt + f4
wheel-click a tab within windows terminal.
open windows terminal, powershell with this profile (it 's basically posh-git and chocolatey):
1. install from store 2. open program 3. hover with mouse on red section, try to drag and move 4. fail.
- open the windows terminal - open the setting menu, either by pressing ctrl + , or clicking on the settings button in the dropdown menu next to new tab button
when there is only one terminal tab, type 'exit ' command, the terminal window crashed.
invoke the emoji panel with win+.
click on desired emojis emojis are displayed as ''
1. using a swedish qwerty keyboard (not sure if it matters) 2. open wsl 1 (ubuntu 18.04) using bash 3. pressing `altgr + ~` lets me later press backspace to erase one character from my prompt.
1. using a swedish qwerty keyboard (not sure if it matters) 2. open wsl 1 (ubuntu 18.04) 3. pressing `altgr + |` somehow adds the first thing i have in my bash history at the line.
1. in a shell (wsl, cmd, or powershell), open the emoji picker by pressing win+(period).
2. start typing to search for an emoji, or click an emoji.
3. in the upper left of the screen a windows 2000-style "toolbar" appears with a squashed emoji in black-and-white and a green arrow.
i have setenv.bat file in s: dir.
add new command in profiles.json: with `"commandline": "cmd.exe **/k like this: { "acrylicopacity": 0.75, "closeonexit": true, "colorscheme": "campbell", "commandline": "cmd.exe **/k "cursorcolor": "
1. type in one or many full-width unicode characters or emoji.
2. press enter enough times to put the characters into the scrollback buffer.
3. scroll up and click on one of the full-width characters.
or start a selection from elsewhere and drag your mouse over one of the full-width characters.
basically (lmb down + mouse over a full width character in scrollback buffer).
run windows magnifier from any means of doing so, and launch windows terminal.
zoom in to any percent beyond 100% and press the main menu button on the top of the window.
1. copy (for me 336 lines of json) a large text file 2. select 3. paste into terminal
enter in windows terminal open debian environment go to my folder in `/mnt/c/users/ulc` type `ls`.
create a ubuntu 18 tab type $ or any sign that can be created with altgr
open windows terminal which defaults to an open tab with powershell.
open a second tab with powershell, and immediately close it.
install preview from store and start app
start windows terminal with a powershell prompt; type this sequence of characters: <= <> >= != => <== open a tab with wsl ubuntu, and type the same sequence of characters: <= <> >= != => <==
open the new terminal on a french machine, using azerty keyboard type alt gr + 8 to get the back-slash
note: i already had powershell and cmd using solarized dark in conhost, via cmd-colors-solarized phofhyperlink .
* install windows terminal (preview) * hit settings * in the json file, change the `colorscheme` for powershell and cmd to `solarized dark`.
add keybindings for increasefontsize and decreasefontsize in the profile settings.
close and restart windows terminal.
update the windows terminal profile with keybindings for copy, paste, increasefontsize and decreasefontsize.
1. enable acrylic on a profile such as cmd or ubuntu 2. click on terminal window, the window becomes transparent.
3. click on a different window, the window loses the transparency.
you can only drag the window when clicking on the window title that is actually colored in windows 10 color style ([1]marked green) click on the window title ([1]marked red) you cannot move the window !
[windows terminal drag window] !
i tried to copy and paste some schemas from this templated phofurl after saving everything was fine and i really took care about not doing a mistake in the json formatting.
however after closing and reopening windows terminal copy line 63 to 131 at the appropriate spot in profiles.json phofurl
1. open up windows terminal 2. in whatever shell you like, produce lenghty output so we have something to scroll (e.g.
`1..100` in powershell) 3. resize the window by dragging any of its borders or corners 4. immediately afterwards, hover the mouse cursor over the scrollbar until it visually enlarges and drag it.
the scrollbar will move but the terminal content won't.
after releasing scrollbar and re-dragging it, it works as expected.
click on the down arrow next to the '+ ' on the top bar, select 'settings '
when closing the unique tab or closing application.
create a profile in terminals `profiles.json` with an empty string as the `icon` option.
`dir`, `ver`, `uname`) and enter.
resize the app window to the minimum and gradually enlarge the window.
click on the (+) button to add tabs to the terminal.
1. install, launch and close windows terminal 1. uninstall powershell core 1. launch windows terminal again
open a new termanal window with the ubuntu 18.04 app from the ms store.
copy a multi-line file from notepad or vs code.
paste the multi-line file into the terminal.
add this entry to `profile.json`: { "acrylicopacity" : 0.75, "closeonexit" : true, "colorscheme" : "campbell", "commandline" : "cmd.exe /k visual "cursorcolor" "
open the terminal and click to open a new ubuntu terminal: phofimage until now ok, but when you try to close powershell it freezes: phofimage
1. make sure you have at least two windows users - one which is an admin and one which isn 't.
2. install windows terminal (preview) from the microsoft store phofhyperlink in both users.
3. log on into the non-admin user.
4. run windows terminal as the other user.
5. click the down arrow and then "settings"
move the mouse over some text inside the terminal.
- 1. have your taskbar set to auto-hide.
2. start (amazing) new windows terminal.
4. move the mouse to the bottom of the screen trying to get the hidden taskbar to pop up.
1. open `profiles.json` 2. in the "cmd" profile, change the value of `colorscheme` from "campbell" to "solarized dark" (ensure this scheme exists in the built-in `schemes` list) 3. close and reopen terminal 4. open the "cmd" profile also reproducible with wsl profiles (e.g.
1. press enter until prompt/cursor are on last line.
1. resize the window to be narrower.
change keyboard layout to hr-hr and try to write vertical line (char 124) '|' using combination altgr + w
happens when i start the application, was fine on first install only showed up after pc restart.
- open tabs for powershell and cmd - take a look at tab title and compare with `name` in `profiles` in `profiles.json`
have a program running in the terminal that listens to bindings that conflict with windows terminal.
i noticed this in vim when switching split editing windows of vim.
the binding is `<ctrl>+<w>` and then any of `<h> <j> <k> <l>`.
the terminal starts crashing at this point.
1. install powershell core phofhyperlink via scoop phofhyperlink with an empty `profiles.json`.
* open settings * change keys for the `nexttab` action: `ctrl+tab` `alt+}`.
* save settings * reload terminal open settings
change settings an put `cascadia code` or another missing font
download and install firacode, download and install windows terminal preview open settings and set fontfamily to firacode
- open cmd (whatever version listed above) session in the terminal - try to insert an ascii key by: - press and hold `alt` key - digit whatever number (for example 126 corresponding to `~`)
i have installed powershell 7 preview 1 and uninstalled powershell core 6.2.1
1. open settings 2. set `acrylicopacity` to `0.7` 3. close terminal 4. open terminal again 5. observe `acrylicopacity` setting now being set to
click any tab, you'll notice that the console's blinking cursor will stop, then hit `ctrl`+`shift`+`1` to start another powershell console tab.
1. start new terminal session 2. have some long line that fits viewport, e.g.
write `a` 40 times 3. select text in that line 4. gradually shrink window horizontally (reduce width)
1. set some left padding eg.
2. make some selection or just click one cell.
3. in some other place try to make new selection that starts at first char in line.
but don 't point cursor directly on the first char, but instead little to the left, on the "padded" area.
wsl sudo apt install joe joe some_text_file.txt
in settings, set padding upper, lower or right to be > 0
make sure acrylic is enabled for your profile.
resize with window to more than columns.
install ripgrep phofhyperlink open wt (windows terminal), running powershell.
run the following from the root of a large drive `while ($true) { rg -i "foo" }`
use any terminal, use `alt gr` + `6` to type `|`
1. from a _developer command prompt for vs 2019 preview_, run: phofcode
select text from bottom to top and reach to the window title while still holding the mouse.
`cd terminal` and `git submodule update --init` 3. open openconsole.sln in visual studio 2019 4. select release, x64 5. build solution
when the terminal opens the settings file gets reformatted.
and (what is really, really annoying) the new format adds trailing white spaces to every json key and the new format is not tasteful (what are those spaces before every colon?
set `showtabsintitlebar` to true in the settings file, and then start up windows terminal.
1. start terminal, with either a command prompt (cmd.exe) tab or a powershell tab.
2. run this command: `type 3. observe a long xml file appear on screen.
4. run this command: `cls`
i am using 2 screens with the same resolution(1080p).
when i drag the terminal to the secondary display, the boundaries gets out of screen.
for example see attached photos below
login to wsl, use nano to edit a file, mark a text that has at least a linebreak, and paste it on another line.
for example in my local deb mirror, i mark this image phofimage
open terminal and split the main pane vertically.
then split the left-hand pane horizontally.
you should now have 3 panes, named a, b, c shown in the configuration and tree structure below: phofcode now `exit` pane b, then `exit` either of panes a or c.
1. open windows terminal 2. have your shell terminate, e.g.
* open terminal with following profile: json { "globals" : { "alwaysshowtabs" : false, "defaultprofile" : "initialcols" : 80, "initialrows" 60, "requestedtheme" "dark", "showtabsintitlebar" true, false }, "profiles" [ { "acrylicopacity" "closeonexit" true, "colorscheme" "solarized dark", "commandline" "cmd.exe", "cursorcolor" "
set the following profile as default profile: js { "closeonexit" : true, "colorscheme" : "solarized dark", "commandline" : "wsl.exe -d ubuntu-18.04", "cursorcolor" : "
1. launch cascadiapackage (x64 configuration) from visual studio.
a powershell prompt will appear.
2. type `ls` into the prompt and hit enter.
4. type `ls` and hit enter again.
6. type `ls` and hit enter a third time.
cmd then launch powershell, ctrl+f prints f on the command line instead of bringing up the find dialog
paste in the text on the next line phofcode
have a long running process (e.g.
msbuild), and ctrl+f to find something.
often the match will be off by one line
save with visual studio ide with utf-8 needed chars, or save as utf-8-bom with any kind of text editor.
1) in either powershell or cmd in terminal, type `wsl nano` 2) execute `taskkill -im wsl.exe -f` to kill wsl 3) type `cls` in the terminal where wsl was open
add some tabs, close some tabs.
might have to fiddle about with focus or something.
it doesn 't always happen straight away.
open up powershell, `import-module` on openconsole.psm1.
run it 'll download vssetup as a local module and import it.
run `powershell -noprofile` and import openconsole.psm1 again, then run it 'll fail to find the path to vssetup with error: phofcode
tools azzle.cmd > bcz rel
colortool.exe -c colortool.exe {any iterm scheme} bug_report_1 phofimage bug_report_2 phofimage
you should be able to use any color scheme, but i'll provide mine specifically below.
**fotsies colors.ini** phofcode 1. open powershell as a regular user (i'm using 5.1 that comes with windows 10) 2. obtain the latest colortool release and extract it 3. place the scheme above in the schemes sub-directory under colortool.exe 4. load the scheme: `.
colortool.exe 'fotsies colors.ini'` 5. notice scheme is not applied correctly and that colors are not consistent as they should be
download and install: phofurl open new command prompt as administrator: phofcode then apply this patch: phofcode then phofcode build fails with this error: phofcode search for the missing file: search all lower case: the file name changed to all lower case when the repo was cloned.
1. right click on a console window and select properties / terminal 2. set the cursor shape to anything other than "use legacy style" 3. notice that the cursor shows up correctly but after hitting enter and typing a few characters, it returns to the default style 4. repeat step 1 and notice that your setting has been reverted
0. set `initialcols` to `16` 0. launch a new terminal 0.
had terminal up for a few days on remote machine, locked machine and when i came back after weekend and logged in, parts of the command text is now black
1. open new terminal window 2. type in some long text in the window, gibberish is fine 3. resize the window to be really small, minimum size 4. wait a few seconds 5. resize to normal size -- observe tab is unusable, typing in it does nothing
-open "windows terminal (dev build)" -open the dropdown menu -select "settings" from dropdown menu
1. set terminal to light theme 2. set a dark background image in a profile 3. open a new tab with that profile
1. run virt-viewer 2. run windows terminal
1) start up wsl bash in terminal (this bug does not appear to happen in powershell or cmd) 2) fill the console to get the cursor at the bottom of the window image phofimage 3) increase font size vi control+mousewheelup image phofimage (note: while increasing font size, sometimes bottom line is off end of terminal, which seems like it's likely culprit...) 4) hit enter image phofimage
select multiline text in terminal.
copy it (via right-click, ostensibly) paste it (again via right-click)
print a lot of text to the console.
this is especially apparent with progress bars that require backspace characters.
first line, move cursor outside terminal window (or even client area).
open a new tab, it flashes and fades
* open `cmd.exe` and enter the following commands: phofcode repeat the last line multiple times to repeat the problem with randomly different behavior.
launch terminal create cmd tab close powershell tab via x on tab type `wordw` into cmd
1. clone, build, package, install and launch _windows terminal (devbuild)_.
2. execute `docker run --rm -it 3. select multiple lines and right click.
4. paste in any text editor.
don't install version 14x of msvc when you're installing vs 2019, then follow the build instructions.
just scroll (up and down) by touchpad.
press the maximize button when the terminal is on a non-primary monitor
1. start windows terminal 2. move the windows terminal window 3. close windows terminal 4. start windows terminal
1. ssh 'd (using windows openssh client v7.7.2.1) to a windows 10 machine running 1809. ssh user runs as admin on that box.
2. run `npm install -g cmake-js`
1. open terminal (assuming powershell is the default profile) 2. open two cmd tabs 3. use middle click to close those two cmd tabs
1. open new tab in flyout menu 2. try to select text in the newly created tab
start cmd tab color [any color with bg] color [not supported]
open and try to type @ on azerty keyboard (belgian point layout) --> key-combination alt-gr + 2 should provide @ in the terminal application
1. start terminal 1. ssh to a remote host 1. disconnect from the internet while connected to the network 1. try to type something on the terminal and observe
1. use the norwegian keyboard layout.
2. open cmd in windows terminal 3. try to do [alt gr] + 2 to get @.
just open the windows terminal app.
1. open powershell in terminal (it works normally in `cmd` and `wsl`) 2. hold down <kbd>enter</kbd>
open the terminal app and try to type any character that requires `alt-gr`, e.g., `{`, `[` or ` ` on a german keyboard (probably affects other locales too).
use a font with font ligatures and type `-` or `=` as your first character.
open a powershell tab in windows terminal.
attempt to use these psreadline key bindings (use the get-psreadlinekeyhandler command to see a list of all key bindings): - ctrl+backspace (backwardkillword) - shift+ctrl+enter (insertlinebelow) - ctrl+space (menucomplete) - shift+tab (tabcompleteprevious) alt+0 (digitargument) (and other digits) pagedown (scrolldisplaydown) ctrl+pagedown (scrolldisplaydownline) pageup (scrolldisplayup) ctrl+pageup (scrolldisplayupline) ctrl+alt+?
when testing the functionality of the `start` command within the `cmd.exe` shell, i found that having the `/min` parameter would affect `/d` parameter: path provided to `/d` parameter did not seem to be acknowledged, and command passed to `start` command would not be found.
test example: * command shell with prompt at `c: temp` * a test batch file at with content phofcode * running following command would succeed: `c: temp>start /d c: temp testdir test.bat` * the following would not succeed: `c: temp>start /min /d c: temp testdir test.bat` if path is set to `c: temp testdir` following succeed: /min test.bat` the use of `/d` and `/min` parameter together was previously working, and was required functionality for a commercial product.
i'm wondering if this problem is related
run the following test case: phofcode it will fail with a timeout error, if the timeout is increased to `20s`, the tests will pass, but only after ~8s each.
if we add `settimeout(() => {}, 0)` or `setimmediate(() => {})` right after the `resolve()` / `reject()` in on end / on error callbacks, it works correctly taking just some milliseconds.
i've tried to debug it with some breakpoints but only thing i could see was that code was taking a really long time inside async hooks.
i've confirmed this is an issue with mocha by running exact same test file with jest, and also running code directly, on both cases there was no slowdown.
1. install locall mocha v6.1.4 2. create`test.js` test file: phofcode 2. run `npx mocha test.js` output is valid: phofcode but exit code is not: phofcode this makes such crashes not detected as fails in ci
function to be checked phofcode test written phofcode
try debugging a test file with the following configuration in vscode: phofcode and you 'll get errors like `describe()` is not defined or `before()` is not defined.
seems like mocha is not in the global scope when launched like this anymore.
this works in pre 6.0.2 releases (e.g.
the following minimalist test case: phofcode throw the error "deprecationwarning: suites ignore return values.
suite "my suite" in returned a value; this may be a bug in your test code" a temporary workaround include returning `undefined`: phofcode
once karma is running, open debug console in browser and logs appear (see image) it seems to be this piece in moch.js.
if comment out the logs, things work as expected.
(line 6959 for me) phofcode how would i deal with fixing this permanently so i don`t see these logs?
i'm not sure how to do this, or if it is possible, or if this is an issue on my end how i can solve it.
consider this sample js file phofcode and `simple_test.js` is phofcode the output comes out to be phofcode
`let difference = 'hours'))` returns: phofcode whereas: `let difference = returns: phofcode
steps to reproduce the behavior: 1. go to phofurl 2. click to open the datepicker 3. use any arrow key to navigate (arrow up navigate by week) navigate until september.
the min date setup is 1st of september so you should not be able keep navigate back.
4. you can keep forever.
steps to reproduce the behavior: 1. we have the date string that we wanna convert into a date object 2. we use the pattern `yyyymmmdkkmm` to be able to parse the string, where: yyyy used for 4 digit year mmm used for month representing month name first 3 characters d used for day of month with no preceding 0s kk used for hours (1 to 24) mm minutes 3. run 'yyyymmmdkkmm ')` 4. result should be but we get instead
issue is reproduced in codesandbox: edit dazzling-leftpad-6lme4 phofimage phofhyperlink phofcode
an object such as: `let myobject = { address: null, warehouse: false, changedate: changeuserid: "me", coordinate: null, countrykey: 1, daylightendtime1: null, daylightendtime2: null, daylightstarttime1: daylightstarttime2: districtkey: 231, enddate: insertdate: insertuserid: "simpson", key: 9, startdate: timediffsysdate: timezonegmt: timezonename: "europe/helsinki", }` passes as true
steps to reproduce the behavior: 1. moment.js -> console 2. returns false on safari but true in chrome 3. returns true for both scenarios
steps to reproduce the behavior: toggle locale between 'en ' and 'de ' and compare moment(new date().format( 'mmm dd, yyyy ')
set moment locale like that 'en '])` (or any other language than `fr`) and run the app with release configuration.
steps to reproduce the behavior: 1.
steps to reproduce the behavior: 1. go to "yyyy[w]ww").week() \' 2. returned "4" 3. expected result : "3"
steps to reproduce the behavior: 1. execute `moment().add(1, 'years').diff(moment(), 'days')` at least 4 times.
2. compare outputs, you'll see `365` and `366` inconsistently.
3. execute 'days')` at least 4 times.
4. compare outputs, you should see `366` each time.
steps to reproduce the behavior: 1. let the date string be 23:59` 2. parse the date using 23:59', 'yyyy-mm-dd')` 3. get the js date object from above constructor 23:59', 'yyyy-mm-dd').todate()` 4. the returned date object is `sun dec 01 2019 gmt+0530 (india standard time)` in my localtime.
steps to reproduce the behavior: 1. set locale to `en-us`, it goes to `en` 2. do `moment.startof('week')` or check
steps to reproduce the behavior: use `moment().to(<date in the past>)`
steps to reproduce the behavior: 1. run and see it returns 1. run moment.duration('
1) mkdir `test` 2) touch `test.js` pasting code here : phofurl 3) npm init -y 4) `npm install moment` 5) `node test.js` 6) see : phofcode
steps to reproduce the behavior: phofurl
steps to reproduce the behavior: 1. go to phofurl 2. go to phofurl
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode in a more hands-on manner: phofcode
steps to reproduce the behavior: 1. go to phofurl 2. you will see the diff days calculation for each is 9 days
just use the above input
steps to reproduce the behavior: 1. go to phofurl 2. run jsfiddle 3. note the value for label - without math.floor 4. it is
steps to reproduce the behavior: > 'hh:mm ') > 'hh:mm ').isvalid() true
steps to reproduce the behavior: jsfiddle here phofhyperlink create moment using object and `day` key set to 0 phofcode
steps to reproduce the behavior: 1. const date = moment(); 2. date.set('year', 2000); 3. date.set('month, 1); 4.
steps to reproduce the behavior: 1. set your timezone to gmt+2 (central europe) 2. evaluate "years", true).tofixed(2); 3. evaluate "years", true).tofixed(2); 4. the first statement returns 2.75 and the second 2.76. phofurl
steps to reproduce the behavior: 1. create an app with create-react-app 2. install momentjs 3. console.log this line of code 4. check the output
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: i installed moment in the package.json.
created a docker container with the package.json.
wrote code in the container to determine if a date is daylight savings.
mm dd ') 11 12"
steps to reproduce the behavior: execute and it will return true, as if it were a date
steps to reproduce the behavior: ->
it's a bit hard to reproduce since i didn't find a way to modify the environments time zone settings in my test.
i run a german environment.
german offset is depending on dst -120 or -60. have a look at the following test: phofcode it fails with phofcode
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. run the above code with moment.
steps to reproduce the behavior: today it 's feb 28, 2019. when i do phofcode it gives me which is 8 days from phofcode
just open and see the console phofurl
what i did to spot this bug is this (i 'm using console logs outputs from google chrome): i have 1 moment object and 1 moment-friendly string which are supposed to be same : `x = m{_isamomentobject: true, _i: _f: "yyyy-mm-ddthh:mm:ss", _isutc: true, _offset: 0,} y = when i transform the moment into a date (aka `new date(x)`), it adds 1 hour to it and makes x and y unequal, when i don 't want it to.
maybe it 's related to my timezone, but even if it is, it 's said nowhere that the moment actually take care of the timezones within their conversions and i think shouldn 't be an expected result (i 'll delete this issue if is one though).
and as i 'm using moment.js in a timezone-less environment, this behavior 'cause me problems even if resolved by formatting the moment before converting into a date.
no idea yet how to reproduce ...
translate "3 minutes" and "3 seconds" in tetun dili
steps to reproduce the behavior: 1. set your timezone to +3:30 tehran 2. execute the following statement phofcode phofurl
phofcode i have also prepared runkit with some edge cases: phofurl
steps to reproduce the behavior: 1. set local timezone in moment globally: 2. instantiate moment passing any string in iso8601 format using utc timezone, e.g.
: (my local timezone is gmt+02:00) 3. check the result: image phofimage 4. so format() function on that object returns correct string: 5. but
steps to reproduce the behavior: d = '10:50 m = moment(d, 'dd/mm/yyyy ') res = m.format( 'hh:mm dd/mm/yyyy ') console.log( 'expected: ' + d) console.log( 'result: ' + res)
steps to reproduce the behavior: call a moment method, ie.
`moment.duration()` with arguments as described in the doc ( phofurl phofcode
steps to reproduce the behavior: 1. try to parse a local datetime like and
`const date = undefined; // returns true `
* src/app.ts * phofcode * package.json * phofcode tsconfig.json phofcode webpack.config.js phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: > const moment = require( 'moment ') > const fmt = 'ddd mmm dd hh:mm:ss gggg ' > moment( 'fri dec 28 cet 2018 ', fmt) moment.invalid(/* fri dec 28 cet 2018 */) > moment( 'fri jan 11 cet 2019 ', fmt)
steps to reproduce the behavior: 1. go to ' phofurl 2. click on 'run'
here is a gist that shows what happens when we do .format( 'yyyy-w ') when current date is in previous year but the week ends in the following year and the previous year is a 52 week year: phofurl you can also see how it returns incorrect year with this code: phofcode you get the answer "week 1, 2018" instead of "week 1, 2019" which i would expect to see.
steps to reproduce on react native, android only, debug mode turned off: 1.
23 march 2018. returns: 22 2.
29 march 2019. returns: 28 3.
27 march 2020. returns: 26
steps to reproduce the behavior: 1. open the developer console 2 .t = new 3.. m = moment(t); 4.
steps to reproduce the behavior: 1. go to node console with moment installed 2. use moment().week() and see that it returns 1st week of the year 3. use moment().year() and see that it returns 2018 still
steps to reproduce the behavior: 1. open node console, load `moment` 2.generate dates phofcode
phofcode above outputs "a few seconds butt butt butt" instead of "quelques secondes butt butt butt" providing no configuration object gives expected results: phofcode above produces "il y a quelques secondes"
steps to reproduce the behavior: 1. go to ' phofurl 2. check the code and result
steps: 1. phofurl (the browser window needs to be over 1200px wide to see the `&nbsp;`)
here's a codesandbox.io reproduction: phofurl phofhyperlink steps: 1. select 1 from the drop down (an item gets added to the options every second): image phofimage 2. keep selecting 1: image phofimage 3. eventually, onchange will select `undefined`: image phofimage
i modified the chips example from material-ui docs to demonstrate the issue: phofurl
i have mocked the issue here phofhyperlink steps: 1. place absolutely positioned component and add a transform (or just use popper) 2. add select component
here is the demo phofhyperlink that reproduces it.
steps: 1. click on the switch 2. see that the tooltip is not centered
steps: you can see the problem on the codesandbox.
1. focus the first input.
2. select a value with key "enter" expected: focus the next input.
current: stay on same input a just open second but didt focused.
edit material demo phofimage phofhyperlink
steps: 1. codesandbox.io reproduction phofhyperlink 2. the alert shows up when the page is fully loaded.
3. click on the textfield and then click outside.
4. the alert shows up again.
steps: 1. codesandbox.io reproduction phofhyperlink 2. type a letter.
3. check that loading message and options are visible at the same time
phofurl steps: if you look at this function, the component property on ' <listitem is throwing an error: phofcode
here is the reproduced example of the bug.
phofhyperlink steps: 1. create a controlled component using `oninputchange` and `value` 2. write something on the input 3. notice that options are not getting filtered as you write | tech | version | | ----------- ------- material-ui 4.7.0 material-ui lab v4.0.0-alpha.33 react v16.12.0
providing code for this issue is not immediately relevant here because i have a working build and a non-working build where the only difference is that the broken build uses typescript `.tsx` and the non-broken build uses `.js` files.
meaning that the problem can only be related to config and typescript compilation.
hopefully this is just a stupid mistake i made.
i will provide a code sandbox if no issue is identified at first glance in `tsconfig`.
click on any material-ui select phofurl steps: 1. click on a non-native select 2.
steps: 1. visit < phofurl 2. move fixed options 3. select "the shawshank redemption" and "the godfather: part 2"
steps: 1. use the demo page phofurl 2. in first combobox, type "shank" 3. decide that you don 't want "the shawshank redemption" 4. press shift+home to clear the field.
edit create-react-app phofimage phofhyperlink note that in codesandbox.io i had to explicitly write `try ... catch` because the console seemed to be swallowing exceptions.
steps: 1. use `create-react-library` to create a new project 2. add `material-ui` v4 dependencie 3. for this example, is not necessary to code in the `src` directory.
so, in the `example` directory, write the code bellow :
this sandbox phofhyperlink demonstrates the issue.
you can set `size="small"` on an `iconbutton`, but has no effect on `radio`.
| tech | version | | ----------- ------- material-ui 4.6.1 react 16.12.0 browser firefox v70.0.1 typescript
phofurl steps: 1. use the typography component 2. specify a component prop of 'a ' 3. specify a 'href ' prop 4. see the type error
example here: phofurl `<badge color="secondary" showzero={false} invisible={true} badgecontent={0} horizontal: "left"}}>` results in a visible badge
> sorry, couldn't create a sandbox with next.js, cause of some error.
steps: 1. use next.js 2. install and add to the top of the `next.config.js` and phofcode field to your config.
3. install and add plugin to your babel config: phofcode 4. open the page with button, with ripple effect 5. check console
steps: 1. inject autocomplete code snippet into your code 2. click in the textfield
phofurl - edited steps: 1. click (in this case) the "two" chip 's x button 2. the select will remain focused without possibility to click away from it to blur it.
3. this can be viewed by clicking inside an input next to the select.
steps: 1. go to phofurl 2. select 'demo.js ' 3. set textfiled 's variant="filled"
steps: 1. visit phofurl 2. in the 'choose a country' input field, type in 'label', 'code' or 'phone'.
3. you will still see _all_ values, none of them are filtered.
phofurl start adding values to the textfield.
it happens when the placeholder takes up the rest of the line, it pushes dropdown arrow & even x to beginning of next line.
this can most easily be seen in the material-table docs here: phofurl on the `selected row styling example` if you change the pagesize and select a row, it will resize to the default.
phofurl screen shot at 2 49 09 pm phofimage
change ** step ** to it must be **max%step === 0** , it will works as expected phofcode | tech | version | | ----------- ------- material-ui v4.6.1 react 16.12.0
phofurl but the problem isn 't occuring in the sandbox
i 'll set up a codesandbox later tonight after dinner and edit this issue accordingly when it is done.
steps: more or less covered above.
steps: 1. create a component which displays a timer that counts up every 1000ms 2. within that component, create a snackbar with autohideduration=2000ms phofurl ( the snackbar hides 2000ms after the timer is disabled: phofurl )
the following code is an example (it works if you replace the linear with the circular progress) phofcode
i tried to replicate the issue but it doesn 't happen in the sandbox
i think a sandbox sample will not show the error, because i have other projects where mui works.
i have taken this screenshot to show the issue: screenshot of issue phofhyperlink
so the oddest thing is that it seems to work fine in codesandbox phofurl phofurl image phofimage
steps: 1. open this codesandbox: phofurl 2. go to demo.tsx 3. wait for typescript errors to be rendered in the editor.
you will also observe that despite the styling the box-shadow is not removed 4. disable line 69 and enable line 71. this shows the work-around does work.
steps: 1. use the example demo: phofurl 2. add the disabled tag to the htmltooltip button child.
3. wrap the button between <span></span>
1. open phofurl 2. select rows per page "all"
here is demo showing the problem: phofurl
phofurl steps: 1. write something in the input field.
2. the list is filtered accordingly, but in the console the value of `inputvalue` is always `undefined`.
steps: live example: phofurl 1. in one of the select elements, select a value 2. hit enter 3. the app should crash
phofurl steps: 1. click the first node * applications * &mdash;it 's now focused and opened 2. press the down arrow key (to select the first child)&mdash;the child * calendar * should get selected, instead nothing happens.
the sandbox has three trees: the first one exhibiting the issue, second with workaround described above, third is original example from documentation with an event handler that does not modify state at all.
steps: 1. navigate to phofurl ensure the default selected options are "pulp fiction" (disabled) and "inception".
(optionally) add one more item, e.g.
"forrest gump" 3. hit delete button on the "forrest gump" 4. note the list still contains "inception" and "forrest gump", but is missing "pulp fiction", which was disabled.
5. hit delete button on the "forrest gump" again 6. note list still contains gump", but is now missing "inception".
phofurl 1 and 2 are working 3 and 4 are not working if you open the "console" -- you will see the onchange event is getting fired for all 4 radio buttons ....
phofurl steps: 1. make a column container with grid 2. see the item fill the height even though it should not.
it 's present on all of the demos on phofurl phofhyperlink if you select an option for any of the demos and then press the "enter" key, the value is removed/cleared.
1. go to phofurl phofhyperlink 2. scroll down to 'checkboxes with formgroup ' 3. click on random checkboxes 4. see error
i really tried to reproduce the problem in the codesandbox, but it really didn 't work, so here it is the main sample of the code: phofcode
using the mui labs page: phofurl using any of the three multi-selects, i am using the filteredselectedoptions.
steps: 1. click inside of the input, on right of inception chip.
2. select any value inside of popup.
3. click inside input again, to right your selected option.
4. you should not see a popup appear.
phofurl steps: 1. click on the autocomplete 2. click outside => input box is filled 3. click again on the autocomplete.
sorry if i made any mistake, this is my first time submitting issue.
i have found the fix for it also, i will try to submit a pr for this if this is ok ?
steps: phofcode go to phofurl - observe that the page has issues as font is not loaded and the material-ui styling is not applied on the `appbar`.
you can also find this in this video phofhyperlink - click on `page1` or `page2` and this will load the fonts and styling correctly - go to home phofurl and you will see rubik font material-ui styling being applied correctly - refresh page you are back on step 0, where page did not load fonts styling is broken this complete video phofhyperlink shows every part in detail.
as i understand from gatsby documentation phofhyperlink , we do not need to use plugin to use material-ui.
this is what you would see in codebase where issue reproducible.
however, i also tried phofhyperlink issue still persists.
steps: its not really needed with a codesandbox as this bug is apparent in the material-ui docs 1. go to phofurl 2. scroll down to 'multiple values ' 3. in any of the three autocompletes, add another value (for example, pulp diction) 4. click the `x` on the chip of newly added value 5. watch first value be removed 6. cry
steps: 1. start voiceover on an iphone 2. open autocomplete demo page ( phofurl 3. navigate to "combobox" example 4. start writing 't ' 5. place focus back on the input field 6. swipe right to go to the next element.
phofurl steps: 1. check the console.
see that the value is `undefined`.
2. click the button at the top.
3. see that value is now an array with two elements.
`autocomplete` is not showing new values.
5. if you change initial `usestate()` value to `usestate([])` everything works as expected.
<autocomplete freesolo value={value} => option.title)} onchange={handlechange} renderinput={params => ( <inputbase {...params} fullwidth inputprops={{ ...params.inputprops, type: 'search ', }} onchange={(e) => { }} value={value} /> )} />
steps: 1. multiple values phofhyperlink .
focus any of the 3 demos.
2. try to access the x button with the keyboard.
--- 1. multiple values phofhyperlink .
focus any of the 3 demos.
2. use left arrow key to highlight pre-selected chip 3. once highlighted, try to delete chip with space/enter
1) there is nothing unusual here, part of the page (for convenience) on which i call this component and hang an event handler on it.
phofcode 2) i need to get the height from the props in the style object, so i wrap component in hoc and pass function `height: props => console.log (props)`.
pay attention to types and default values in component class.
phofcode 3) the console log will return this object, here props that were passed when component was called, but there are no props of default height.
steps: 1. open phofurl 2.inspect `for` attribute on `<label>`, and `id` attribute on `<input>`.
they should be the same.
link to sample example phofhyperlink if you are on core lib.
version: 4.5.1 the onchange handler for custom inputcomponent is giving correct values.
if you are on core lib.
version: 4.5.2(latest) the onchange handler for parent onchange is giving correct values.
example phofhyperlink reproducing the problem
phofurl steps: 1.write any text, it works ok 2. press enter, it breaks with error in console
reproduction: phofurl steps: 1. change the borderradius under the shape property of your theme's options (the default is 4, i'm using 8) 2. change the default background under the palette property of your theme's options (the default is i'm using #f2f4f8) 3. render an textfield component (filled or outlined variant) 4. set background color of textfield to be anything other than background.default
phofurl steps: 1. create a new component that returns a button 2. use that component in a buttongroup 3. apply styling to it other than the default
steps: 1. open up the popover demo page on the latest mui site phofurl 2. click the "show popover" button to show the popover in first example, simple popover 3. with popover open, run html codesniffer tool phofurl
steps: 1. use semantic ui project 2. add @material-ui/core and @material-ui/icons 3. open a specific component which has a semantic button and put mui button 4. open the browser and see the error.
run the code above and look in the console
steps: 1. open this codesandbox phofhyperlink 2. click "toggle" button 3. see error in console
- build a page with vh > 100 - use any dialog within the page - close the dialog <!-- steps: 1.
i used these steps to reproduce.
open: phofurl paste this code: phofcode **dont forget to add material-ui/lab to the list of dependencies.
** now click "open right", then hover the speeddial, and click an item.
you 'll come to a point where an item does not trigger the onclick event.
steps: 1. click "open right" 2. hover speeddial 3. click speeddialaction
open this link in both chrome and firefox to see the the issue: phofurl
steps: 1. create a `<table>` with `stickyheader` prop (reference: phofurl ) 2. create multiple `<tablerow>` inside `<tablehead>` (reference: phofurl ) 3. scroll down, and second `<tablerow>` content will replace first phofurl
<!-- provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.
include code to reproduce, if relevant (which it most likely is).
`import createbreakpoints from const breakpoints = createbreakpoints({}); muitypography:{ hero:{ fontsize: '11rem ', background: 'red ', }, fontsize: '3.75rem ', lineheight: '5rem ', fontweight: 700, }, }`
phofurl steps: 1. assign value using theme.spacing(x) to the lineheight property 2. value gets assigned without 'px' unit 3.
phofurl steps: 1. observe demo works as expect 2. uncomment index.js:36, observe dialog no longer appears when the icon is clicked 3. also uncomment datepicker.jsx:24-26, observe dialog will appear like before, but closes on any interaction, not just the "ok"/"cancel" buttons
phofurl steps: 1. hover button
please visit the following codesandbox: phofurl phofhyperlink
you can see the problem on line 21 phofhyperlink of that line currently is: phofcode but it should be: phofcode steps: 1. use this code sandbox: phofurl 2. open up the `theme.tsx` file.
3. add the following css to the theme after palette on line 19 (make sure to include comma so object is valid phofcode 4. you should see typescript compiler complain about `labelplacementstart`
the following is a example on the described situation, the class applied through `tooltipclasses` is `tooltip`, (i 've set an obnoxious width and height for the labels just to show the difference).
phofurl --> steps: 1. observe that styles are not applied to labels 2. remove `tooltipopen` prop, styles can then be seen on label when hovering over label 3. i 've attempted to override all other possible classes for `tooltip` component but don 't see a difference :(.
steps: 1. open the docs 2. observe
steps: 1. phofcode 2. expect a crash codesandbox: in app.js look for line 29. phofurl
steps: 1. you can see this behavior in documentation of button, when inspect element on dev tools
we are generating a select box via portal that removes itself after a blur event or losing focus.
there are instances that we would like the select menu to start open initially.
when the control is set initially to true, the onblur event is called immediately causing the select box to be removed.
codesandbox issue phofhyperlink i can avoid calling onblur if i have a "loading" tag: codesandbox workaround phofhyperlink <!--
minimal code example: phofcode you can find the codesandbox here: phofurl steps: 1. hover over the first input 2. hover from left or right into the bottom input to note: - the issue only occurs in chrome, not in firefox - it seems related to the `textalign: 'center '` style, as example works without it - it seems a mix of different input styles (for example default and number) is needed to reproduce
phofurl if the sandbox is not up here is the code.
only need the @material-ui/icons dependency added use the typescript codesandbox provided on making an issue.
and paste this code in app.tsx phofcode steps: 1. hover... 2. select eye 3. hover 4. select eye
steps: 1. create a select field.
2. add `inputadornment` with `position="end"` to the `endadornment` prop.
1) create a select component 2) specify that the component is disabled 3) style the disabled state with classes={{ disabled: classes.<classname> }} phofurl steps: 1. simply load the demo and you should see the bug.
the select component is disabled and css is there and not being recognized.
unrelated, i tried to delete that second select component, but got a cors error when doing so.
i have no idea what's going on there.
steps: 1. create a react app and add some mui components to it.
2. run the app on ie.
check `package.json` files for both packages.
1. go on sandbox phofhyperlink 2. look on the right 3. the tooltip is not centered 4.1. resize de preview window.
it should now be centered.
reload the page 4.2. remove the `<cssbaseline />`.
it should now be centered.
4.3. add back the `<cssbaseline />`, then remove css import.
it should now be centered.
we use react dnd library so the syntax looks as follows: phofcode the underlying syntax: phofcode steps: 1. interact with cardactionarea with the intention to drag 2. parent `div` is not dragged
open the `demo.tsx` in this codesandbox: phofurl
screencast: phofurl phofurl steps: 1. open console 2. use keyboard to move around the tree (rapidly press... up, down, left, right, etc. )
3. it will eventually lock up logging the error i've pasted above i also suspect this happens more frequently with a more complex label.
phofurl steps: 1. try this with typescript enabled: phofcode 2. see this frustrating red line under listsubheader?
i 'm not sure that a live example would be helpful for a test running issue, but i 'd be happy to put together a repo to recreate what i 'm experiencing.
phofurl | tech | version | | ----------- ------- material-ui v4.4.3 react v16.9.0
phofurl steps: 1. the textfield need the following parameters rows, rowsmax, fullwidth, multiline 2. type text in textfield until crashing (fill all visible space)
you can see the behavior here phofurl , in the example that has the "select" label.
note: it takes a few minutes for the type error to show up in the browser editor.
steps: 1. visit phofurl phofhyperlink
the issue can be reproduced on the material-ui popover component demo website: phofurl including video of the interaction described in the steps below: phofurl steps: 1. browse on mobile chrome to phofurl popover1 phofimage 2. detect the "simple popover" demo section, slightly zoom in (device pinch) so that "open popover" button is still visible.
popover2 phofimage 3. click "open popover" button popover3 phofimage 4. at this point, popover is open but page already scrolled itself up
see demo: phofurl try to print via browser (`ctrl+p` or `print` from main menu) or via button "print via window.print" to see how it behaves.
steps: 1. npx create-react-app my-app 2. npm install @material-ui/core
open this codesandbox: phofurl click the button and you will see a popover that changes its size dynamically while displayed.
while specified to be anchored on the right side of the button, it will move its anchor point during resizing.
you can review the code at: phofurl steps: 1. put a version of @material-ui/core like 4.4.3 (4.x.x) 2. define a theme in app.js (line 17) 3. in a page like login.js call a function styles (line 15) and the function withstyles to the component (line 130).
4. run the project and open browser.
steps: 1. follow the docs guide on creating a virtualized list 2. follow the docs guide on adding a secondary action to a list item codesandbox demo: phofurl
1. go to the material ui site 's snackbars demo page phofurl 2. open/view any of the snackbars that do not have buttons, such as the "positioned snackbars" section 's "top-center" snackbar.
3. right click and inspect the snackbar.
you will notice that snackbar 's div shows `role="alertdialog"` even though there are not interactive elements on snackbar.
this is being hardcoded on line 55 in snackbarcontent.js: phofurl
run yarn add @material-ui/icons steps: 1.
phofurl create a grid like so: phofcode and input some text in the normal input.
then enter a select value and go back to the regular text input.
steps: 1. go to: phofurl 2. note that `shouldbetrue` is of type `true` and `shouldbefalse` is of type `false` 3. go to: phofurl 4. note that `shouldbetrue` is of type `false` and `shouldbefalse` is of type `true`
create extra `<select>` after creating and rendering form and then try and select something.
please see example at phofurl phofhyperlink
link to live code showing the issue: phofurl steps: 1. create a css rule that uses animation.
for example here is one that rotates a element phofcode 2. apply the rule to the relevant element phofcode 3. notice the element doesn 't rotate and output styles doesn 't have animation rule on css class declaration.
it 's not interpolation per se, it stops working as soon as class declaration in makestyles is made a function instead of an object literal.
4. notice that it all works if `interpolation` class is created without it being a function.
steps: 1. visit phofurl or phofurl 1. click the button click me.
1. wait for 1 second.
1. you will find the button goes to the left.
** note: ** if you interacted with the button through keyboard event, this behavior won't happen.
example without responsive font: phofurl example with responsive font: phofurl
on sandbox ( phofurl 1. open simple dialog 2. try to focus the editor, after 200ms the focus will lost, so you cannot inoput something in the editor
phofurl phofhyperlink steps: 1. create a normal buttongroup containing 3 buttons or more 2. set backgroundcolor to any 2 buttons
steps: 1. create button 2. hover/focus 3. witness variance
steps: 1. override typography in createmuitheme like so: phofcode 2. use the theme created by the call to createmuitheme in a muithemeprovider 3. create a select containing some menuitems 4. observe that their font-weight is affected by the changes made to subtitle1: obrazek phofimage if i comment out the typography override in theme, styles are as expected: obrazek phofimage
phofurl steps: 1. use `circularprogress 2. set `font-size` to something big on a wrapper element or set size to something small.
link to codesandbox phofhyperlink phofcode steps: 1. import textareaautosize in a typescript project 2. pass ref prop textareaautosize 3. error
steps: 1. go to the material-ui documentation page for `color-tool` phofhyperlink 2. click on any of the text field (e.g.
the `primary` one) 3. press `#` on your keyboard (i.e.
`shift-3`) 4. the demo would fail and show the runtime error message
checkout this codesandbox: phofurl just find the tooltip element in the dev tools element panel and see the wrong placement class.
codesandbox: phofurl repo: phofurl i 've added the stylesprovider phofhyperlink as such.
however, when i view the page source, i can 't find my new class prefix anywhere: <img width="1280" alt="screen shot at 5 05 27 pm" src=" phofurl but when i do inspect element, i can find it: <img width="1280" alt="screen shot at 5 09 16 pm" src=" phofurl it seems like class name generator is applied to client side only.
my suspicion is that the instance of the class name generator is not same for ssr and csr but don 't know how to confirm this.
solutions i 've tried: 1.
2. adding `node_env=production` to both build and start step according to this issue phofhyperlink 3. removing phofcode from `pages/_document.js`.
this worked but there was a flash of unstyled content.
there 's also no documentation regarding `enhanceapp` so wasn 't sure about this implementation.
4. using `seed` property works but there was also a flash of unstyled content.
1. clone phofurl 2. install dependencies with `yarn install` and start the app with `yarn start` 3. go to phofurl and notice: 1) the warning in the js console, 2) the button is not red 4. switch to `astorije/sort-of-fix` branch where dependencies were updated to latest, restart app, and see red button
i 've created an example here: phofurl it 's a meteor project, so you 'll need to do the following 1. install meteor (curl phofurl | sh) 2. clone the project, 3. run `meteor npm install` inside the project 4. run `meteor`
codesanbox demo: phofurl phofhyperlink steps: 1. open the demo in mobile view 2. swipe from left to the right to open the drawer 3. click open dialog button, a dialog will appear on top of drawer covering it 4. on the dialog, swipe from right to left will close drawer under it
1. open the documentation page of material ui phofhyperlink using safari.
2. open the dialog with a form example
first click "open me first", then click the plain html button.
phofurl steps: 1. click on add button the panel should be dynamically added.
2. click on the panel but the panel is not getting expanded.
3. but now click on the add button again panel is expanded.
please see this sandbox: phofurl
steps: 1. go to codesandbox phofhyperlink 2. scroll down to the last line 3. hover an element 4. scroll fast to the top 5. you should see a 2nd scrollbar that appears.
go to the demo phofurl or the codesandbox phofurl
steps: 1. place a textfield within a tab swipeableview, with an outline.
the textfields on the starting tab should have notches in the outline.
tabs besides the initial one will have no notches in outline.
i have reproduced this issue on a minimal codesandbox: phofurl
phofurl steps: 1. have a chip 2. have the avatar prop 3. wrap avatar with badge 4. put the badged avatar in the avatar prop
codesandbox reproduction phofhyperlink steps: 1. open the live example link in chrome 2. observe that hovering over fields does not change width.
3. click "add helper text" button.
i can 't get codesandbox to work with any react apps, but here 's the code phofhyperlink anyway.
steps: 1. copy the source code from the customized selects demo here phofhyperlink .
2. add as a prop to the select component following code: phofcode 3. click on select to open dropdown then click on an option that isn 't selected.
4. the dropdown should suddenly jump to top left corner of screen while it closes.
4. in one of the table cells place a select component with menu items.
5. set stickyheader on table component.
6. set height of the table and create an autoflow so you can scroll without losing the header.
7. see that the select component over laps like so: image phofimage steps: 1.
phofurl steps: 1. create ref with `useref` hook 2. pass it to a material ui component on the `ref` prop
steps: 1. open phofurl phofhyperlink in ie11 2. expand menu in any example
demo here phofhyperlink steps: 1. open the select 2. styling breaks
**clone the repo** phofurl 2.
**add any element** (i use the `<textfield element variant="outlined" />` for example) 3.
**push the refresh** button in you browser and you will see this issue
repro repo: phofurl codesandbox: i can 't reproduce this using codesandbox for some reason.
however it 's here for reference.
you 'll find the example in `app.tsx` - phofurl steps: 1. install project 2. run phofcode 3. see type error in `app.tsx`
phofurl steps: 1. click the first select 2. click the second select 3. the first select should be blured.
phofurl | tech | version | | ----------- ------- material-ui react browser chrome version typescript etc.
steps: 1. go to phofurl 2. scroll down to `outlined` section 3. click on multiline textbox with `controlled` written inside it 4. type enough for it to start overflowing onto 4+ lines 5. try and scroll
phofurl steps: 1. enter 12t34 into the number field 2.
steps: the code is straightforward, just copy paste and use in any component to see this ts error.
try this source code in a typescript setup: phofcode
phofurl steps: 1. use textfield with variant= 'outlined ' 2. change dynamically the length of the label
add field "fallbacks" as array of objects to the styles object code on codesandbox phofhyperlink result phofhyperlink screenshot at 17 20 08 phofimage steps: 1. added fallbacks prop to app.js classes.root 2.
> as you can see the styled toolbar loses its styles when using "component" prop with @materail-ui/styles sandbox showing the error with @material-ui/styles: phofurl sandbox showing that the error is not present when using @emotion/styled: phofurl
phofurl inspect the markup of this code sandbox
see the use of `makestyles()` in this code sandbox (it should highlight the error in the editor): phofurl
try to look at this codesandbox phofurl clicking either the plus or minus buttons creates a double log statement.
it worked on codesandbox but not on my deployment.
i am thinking that the sandbox is not taking in some of the stricter settings but well... who knows?
just grab the zip and run `yarn install --frozen-lockfile; yarn run build`.
the lockfile should reproduce most of my environment.
9vjki-core4_1_3.zip phofhyperlink (the uploaded version contains both `yarn.lock` files for the build.
the default one is for working core=4.1.3 version; one with "433" in name has latest mui.
just swap them around and do yarn thing.)
phofurl steps: 1. if you navigate to the link with chrome, you'll notice that both items are contained without wrapping.
2. if you switch to safari, the first item is wrapped, but the second with an extra pixel is not.
| tech | version | | ----------- ------- material-ui v4.3.3 react v16.9.0 browser safari v 12.1.2
edit select-value-warning phofimage phofhyperlink phofcode
i was able to reproduce the issue by modifying one of the examples from the docs on stackblitz.
steps: 1. go to phofurl 2. check styles applied to div element 3. click button couple of times and check styles again 4. notice same styles added for div multiple times issue seems to be only with elements styled with css selector.
in the example above we have: phofcode and only div styles are applied multiple times.
steps: 1. create a component using tabs and try jest snap-shot testing it.
phofurl steps: 1. click the open popout button 2. click the open menu button in the popout window
steps: 1. in the theme, specify any styling for body2 component (for example `overflow: hidden;`) 2.
`overflow: hidden;` is applied to the body tag
link: phofurl the background color only updates when the theme color is updated.
steps: 1. change the background-color and it doesn't update the style.
2. change the theme color and it updates both styles.
steps: code sandbox phofhyperlink 1. open console 2. trigger open/close of drawer
phofurl unfortunately, codesandbox has issue with cors that prevents from seeing the full error message ( phofurl but the error is such as i described above.
some stack trace is visible in codesandbox though.
phofurl the issue is with the implementation of backdrop phofurl children gets spread into fade, but the nested div will just overwrite that.
i recommend doing this instead: phofcode
phofurl steps: 1. open the console (either in your browser or from the sandbox) 2. play with the slider and the switch 3. checkout console and see log messages
live example: phofurl steps: 1. click on each of the 4 exclusive toggle buttons 2. observe the 2 that work and the 2 that don't
try to compile the following code phofcode `
live example: phofurl steps: 1. go to the live example in ios safari 2. touch a mui switch 3. observe unexpected toggle animation
phofurl * i'll see if i can't make a code pen.
reproduction phofhyperlink steps: 1. create muitheme with custom spacing option 2. use grid spacing prop in the app
phofurl steps: 1. open the link above in firefox 2. drag slider for a few seconds 3. notice that it isn't working correctly 4. repeat in chrome.
steps: 1. imported `arrowdropdown` at the top of the file: `import arrowdropdown from 2. passed in `arrowdropdown` to `iconcomponent` within the `tablesortlabel` component: phofcode 3. run `yarn start` there is the sandbox link: phofurl phofhyperlink
steps: 1. open webpage like phofurl using chrome (and macos) 2. press e.g.
one of the example contained buttons (e.g.
'primary') 3. switch focus away from chrome (typically cmd-tab) 4. switch focus back to chrome (typically cmd-tab) the lighter color bubble also expands and shrinks like inhale and outhale of breathing: image phofimage
the bug above happend while upgrading `@material-ui/core` from version `4.2.1` to `4.3.2`.
rollback to the previous version solve the problem.
1. clone the material-ui repo.
2. navigate to the nextjs example 3. replace `index.js` in the existing nextjs example with the following: phofcode
put this anywhere in a new react app (using `yarn create react-app my-app --typescript`) phofcode ` steps: 1.
`yarn create react-app my-app --typescript` (ive seen same issue using `npm`) 2.
`yarn start` everything should look good here 4. build && serve -s build` you should see the bad chip+avatar style (the avatar is larger than the chip and the wrong color)
steps: 1. open a menu with menu items 2. open a dialog with an input 3. start typing into the input
steps: 1. go to phofurl using a mobile browser with a device that meets (default breakpoint values were not modified).
2. tap on any image in the projects section (bottom of the page).
3. put the device in landscape orientation (to force the content to be larger than height of screen) 4. try to scroll content.
following same steps, issue can also be reproduced with swipeable temporary drawer -> open bottom example on demo page phofhyperlink .
phofurl steps: 1. go to phofurl 2. open your chrome developer tools 3. refresh page 4. you'll not both that a warning is issued in the console regarding transitionprops and also that a transition callback is not called.
phofurl steps: 1. go to phofurl 2. open your chrome developer tools 3. refresh page 4. you'll not both that a warning is issued in the console regarding transitionprops and also that a transition callback is not called.
1. open the example: phofurl 2. click around or hover around.
hovering the textfields or the button after clicking or hovering the "monster link" leads to shrinking of textfields or button as like their `fullwidth={true}` is ignored.
** reproduction ** phofurl the value is set on initial load, and the label is covering it.
screen shot at 18 16 19 phofimage focusing in the input works as usual.
screen shot at 18 16 28 phofimage but again, it goes back to this when it 's blur.
screen shot at 18 16 19 phofimage
steps: 1. go to the codesandbox example phofhyperlink 2. the `item one` tab should have a working `textfield` 3. the `item two` and `item three` tabs should have a broken `textfield`
phofurl phofhyperlink phofcode steps: 1. open the linked codesandbox 2. textfield1 should be rendered correctly 3. click on "show textfield" 4. the rendered textfield shows line behind label text
i made a small code sandbox example of the issue: phofurl the first example is without the `<span>` tag enclosing the child.
the second is with the `<span>` tag enclosing child.
when clicking on button, it will get disabled.
the tooltip stays displayed no matter what steps: 1. hover button: tooltip get displayed (fine) 2. leave button: tooltip disappears (fine) 3. click on button, tooltip will still be displayed even if you leave it
unable to reproduce this in codesandbox.
but created a repository with the example instead.
link: 1. import mui box 2. render with bordercolor property: `<box bordercolor="red" />` 3. phofurl
1. render element with high z-index and with input inside.
3. try to write something in the input.
link: codesandbox phofhyperlink 1. open `demo.tsx` 2. sees 3 compilation errors code: phofcode
i built a "minimal" repo to reproduce the issue at phofurl install the dependencies with `yarn install`, and compile/serve with `yarn start`.
the actual issue can be found here phofhyperlink
link: phofurl 1. open browser's dev tool.
(iphone, pixel) 3. click + icon.
link: phofurl 1. clone the above repo 2. run `yarn` (installs material v4.2.0) 3. run `yarn start` see that the app works properly (toolbar is red, etc.)
4. upgrade to material v4.2.1 or 4.3.0 5. run `yarn start`, see that the theme is no longer applied (toolbar is blue, etc.).
the initial styles also don't seem to be applying correctly.
the first page paint before react starts running is virtually unstyled, which i'm guessing due to the same issue.
link: phofurl 1. initalize new gatsby project.
2. add `@material-ui/core @material-ui/styles 3. create dialog with props: `open disableportal` 4.
1. press `esc` button 2. click on iconbutton
link: phofurl 1. create a `<snackbar>` with the following prop: `transitionduration={{ exit: 0 }}` 2. observe console.
i use the vscode native auto-import.
setup a simple grid layout like below.
i use and import a css module to retrieve some styling to be applied to root.
phofcode css module would look something like this: phofcode
i think i found the cause of the bug.
link to the function causing bug phofurl the handleitemclick function implementation is as follows - phofcode link: 1. sandbox link - phofurl 2. probable issue in codebase - phofurl
link: phofurl 1. pay attention to the "border glitch" label on the input.
2. notice that on creation, the border cuts through the text.
3. i 've got component remounting every second, to make issue more obvious.
i think solution is to omit this notchedoutline transition phofhyperlink when a label is set to shrink.
link: phofurl 1. turn on chromevox extension with google chrome.
2. tab to a sorting button on the table in the demo above (like calories).
3. click it and listen to the screenreader.
link: phofurl just loading the page takes ages, navigating between `typography` and `icons` sections takes in the order of 2-3 seconds, on a beefy desktop browser.
sorry for not providing a reduced testcase, but meh, its quite clear whats going on.
link: phofurl 1. see sandbox above 2. first tile has broken hover state 3. second tile has working hover state 4. only difference is the use of props
link: phofurl 1. create a column grid 2. on each item, create a new row grid 3. create some combinations of items taking different number of columns 4. some combinations messes up with the gutter to the next item (is as if the father container is ignoring the negative margin of its child and just taking space as if there was no negative margin)
link: phofurl 1. click on the "toggle pupper" button.
link: phofurl 1. provide a container for drawer by setting container prop in modalprops.
2. set anchor to "right".
if anchor is set to "left" the problem disappears.
3. set material-ui/core version to 4.0.2 or higher (with 4.0.1 the problem disappears).
phofcode phofurl => ctrl+f => "backdropprops" no results
link: 1. code sandbox demo phofhyperlink 2. tooltip documentation phofhyperlink
os: ubuntu 19.04 browser: firefox 68.0 (64-bit) link: phofurl 1. open the codesandbox link above in firefox 2. click to expand the expansion panel 3. see error
link: phofurl 1. open form dialog 2. hit esc!!
| tech | version | | material-ui v4.1.2
need to run it on an ios device
compare versions v1: phofurl phofhyperlink v4: phofurl phofhyperlink
link: phofurl 1. go to above codesandbox link 2. go to console, notice that the message phofcode is present
create a component that uses any component the extends overridablecomponent without supplying a component prop.
phofurl if you mouseover the button and go left without touching the dropdown, the dropdown will be open forever.
how to fix that simply ?
| tech | version | | material-ui v4.2.1 react 16.8.6
build error occurred { name: 'invariant violation ', framestopop: 1 } nextjs xxxx$ { invariant violation: minified react error #321; visit phofurl for the full message or use the non-minified dev environment for full errors and additional helpful warnings.
at ca at b at w at object.usecontext stylesprovider c sa a.render a.read rendertostring name: 'invariant violation ', framestopop: 1 } { invariant violation: minified react error #321; visit phofurl for the full message or use the non-minified dev environment for full errors and additional helpful warnings.
ca b w object.usecontext stylesprovider c sa a.render a.read rendertostring name: 'invariant violation ', framestopop: 1 } | tech | version | | material-ui v4.2.1 react 16.8.6 node 10.10
add a lot of content in dialog, so it becomes scrollable.
link: 1. create component library with a mui component (let's call it `comp-lib` 2.
`npm link` 3. create react app `my-app` 4.
`cd my-app && npm link comp-lib` 5.
it is reproduced in codesandbox - phofurl
link: phofurl 1. just click the `mount children` 2. see dev-tools console
link: phofurl 1. click "open dialog" 2. click "click me" 3. press esc to close
link: phofurl this is my component styling expansion panel: phofcode in mui version 3 it was working fine - when expanded the margin was correctly applied.
v4 - `mui-expanded` has higher priority than my custom class... phofcode v3 (minimized) - custom classes have highest priority phofcode
i've added an example that does not use react or material-ui to demonstrate the issue, as it's not specific to these packages.
link: minimal-umq.txt phofhyperlink (rename this to html, github does not support `.html`) 1. download the above file, rename it, and open it in firefox.
2. open the developer console.
4. the matches will be listed in viewport, which is similar to how `usemediaquery` processes them.
the examples for the menu component will show that this behavior is not working.
1. create a new theme phofcode 2. create a drawer phofcode
sandbox with v3.9.3 running v3.9.3 phofhyperlink v4.0.2 phofhyperlink link: 1.
link: 1. phofurl 2. examples on phofurl
i just took the default template and turned the tip sideways.
it looks bad, but it gets the point across.
link: phofurl 1. try to use writingmode on a div, set to vertical-lr 2. the div should appear sideways.
in edge, it does not, because the css got prefixed with -ms and -ms prefix does not work there.
the bug is reproducible here: phofurl (it is a live (changing, in development) site, but i 'll try to keep it in the state so the bug is reproducible for some time.)
1. shrink the page to xs size (<600px width).
2. click on the "dark diagnosis" in header.
(this will go to another route, thus unmounting components from current route.)
3. widen page above xs size (>600px width).
4. click on some image (for example one that was open initially), thus going to single image route.
(if you clicked on image that was open in beginning you will go initial route).
the image and description will stay at 100% width.
the and description should shrink 50% width each, and they should fit same row.
grid 's `sm` class was not applied component.
the following code describes mentioned components on above given website: phofcode
link: phofurl 1. in the demo change window size to see the described bug 2. check the inspector that media queries are in fact in wrong order
link: phofurl phofhyperlink 0. open with chrome.
1. focus, then blur the input.
2. notice label jumps left.
3. if it doesn't jump, adjust window width.
4. repeat steps 1-3 until you notice the bug.
link: 1. phofurl 2. review signin.tsx line:64 3.
link: 1. git clone phofurl 2. cd react-hot-starter 3. git checkout material-ui-4 4. npm install 5. npm start 6. open console and compare `provided theme` and `consumed theme` values
i have not been able to reproduce this issue outside of my application but you can see it in practice easily enough by going to armicus.com phofhyperlink and setting the browser window to be less than 1000 pixels wide.
i have also copy pasted the component in question into a sandbox where unfortunately it works perfectly: icon size demo phofhyperlink my application was originally built using mui v3 and the vast majority of my styling is done using withstyles hocs imported from when styled this way font-size is applied correctly.
this issue is only apparant when styled using makestyles hooks imported from
link: phofurl 1. go to the tests tab 2. note the failing test (the error is actually different in the sandboxmaybe this helps diagnose the problem?)
3. note other variants of rendering `textfield` that do not fail 4. note workaround (fourth test): using `createnodemock` to return a `textarea` element
link: 1. git clone phofurl 2. cd react-hot-starter 3. git checkout material-ui-4 4. npm install 5. import muithemeprovider in src/app.tsx
link: 1. phofurl simple demo taken from the popper demo page 2.
'user ' : 'users '} </typography> </grid> </grid> ); mapstatetoprops (state) ({ totalsites: state.totalsites, shownsites: state.shownsites, }); mapdispatchtoprops toggledeletemodal, }; export default withstyles(style)( connect(mapstatetoprops, ) ~~~ link: 1.
import ceckbox and build with parcel bundler.
as i'm not sure if this is bug or is intended behavior, i'm not created the codesandbox yet.
but if someone can tell it's a bug i'll create the codesandbox reproduction later.
i have not created a sandbox.
however, if this appears to be a real issue, and not some misunderstanding on my part, i will happily attempt to recreate it.
link: phofurl 1. launch unit test with jest
this repo contains the code that is currently breaking : phofurl link: phofurl steps : 1. clone repo 2. in module directory do `yarn install` , `yarn build` followed by `yarn link` 3. in another react project (with react 16.8.6 and react-dom 16.8.6) do `yarn link 4. import `import boilerplate from 5. call it in a render : `<boilerplate />` 6. see error in console 7. when deleting the `<themeprovider theme={theme}>` line and the import from the module, it works correctly in main app > the above error occurred in themeprovider component:
link: phofurl 1. click on the button (or tab to it and hit <kbd>space</kbd> or <kbd>enter</kbd> 2. try to use down arrow key to change focus (doesn't work) 3. tab once 4. use down arrow key to change focus (does work)
link: phofurl 1. click the button to open two dialogs.
the 'important' dialog should have higher z-index.
2. if you switch the version of material-ui/core to 3.9.3 and repeat you will see the expected behavior
1. go to: phofurl 2. turn on any screen reader app, example nvda.
3. navigate button which opening any dialog.
4. open and close dialog by keyboard.
5. try to open it again by keyboard.
link: phofurl with 4.1.3 (not working) phofurl with 4.1.1 (working as expected) phofurl 1. just hover on arrow or bootstrap sample
go to: phofurl and try to open nav link and see it scroll to top.
link to pr: phofurl code i am using: phofcode
link: phofurl 1. click on "open dialog window" button 2. click on "cancel" 3. snackbar is still on the page
** update ** example: phofurl
see this working demo on ios (chorme and/or safari).
you should see a blank area on the right.
phofurl here 's the source code for that demo: phofurl
in phofurl inpect element on the first blue chip shows: screenshot from phofimage
link: phofurl 1. create a `<list>` with a `<listitem 2. give the listitem a listitemicon child, and a listitemtext child.
the icon will appear higher than the text 3. try the same with listitemavatar instead of listitemicon.
this time the text and avatar line up.
note this is only in v4.
the layout for v3 worked perfectly
link: tablecell 's doc phofhyperlink 1. in _props_, look for `size` property 's description 2. in _css_, look for `sizesmall` class ' description
link: phofurl 1. tab till first "default" button is focus visible 2. hold down space
this snippet explains best: phofcode
link: phofurl 1. create a styled tablecell component via styled api (let's call it styledtablecell) 2. define a `component` prop on styledtablecell when using it 3. the component will have the styles from `styled`, but no tablecell styles.
link: 1. open the phofurl 2. on interactive example open the codesandbox 3. add the mui support just like here: phofurl
here is a code sandbox phofhyperlink demonstrating the issue.
i have also attached a gif (hopefully) better demonstrate the issue.
link: phofurl if you update this codesandbox and change the line 12 `width: () => "200px", ` to `width: "200px", ` the width of classb will get the priority (like it should)
link: phofurl this is the getting started dashboard phofhyperlink .
the only change that has been made is that the `drawerwidth`, instead of being a global variable, is passed to the `usestyles` hook as a prop.
this change makes that the drawer won't collapse.
this is caused as dynamic `drawerpaper` css rule gets a higher specificity than `drawerpaperclose`.
1. write two css classes, second one should override a property of first one.
2. apply both css classes to component 3. change property that overrided in first css class to function (make it dynamic instead of static value) 4. check result, property won't be overrided (different behavior than if properties are both static or both dynamic)
see `demo.tsx` file to find the type error: phofurl or: see expected behavior code.
phofurl | tech | version | | material-ui v4.1.1 react 16.8.6 typescript 3.5.2
follow steps at phofurl to setup serverstylesheets.
my minimal code to reproduce this behavior: phofcode
| tech | version | | material-ui v4.1.1 react v16.8.6 typescript v3.5.2
- code sandbox phofhyperlink (taken from the demo pages)
the code is quite straightforward, hence i 'm creating a codesandbox.io link.
please let me know if that is required and i 'll create one.
here 's the code, though: phofcode
link: phofurl 1. open above link in a mobile phone or simulate a mobile using chrome browser.
2. click directly on a switch (don't click the label) 3. as shown in attached screenshot, the halo will remain stuck.
link: phofurl 1. open the console in your developer tools.
2. focus the select so that it shows it 's options.
3. observe the activeelement in the console.
it is ul, where it perhaps should be a non enabled option li.
link: phofurl 1. decrease rowsmax to 1 with the -- button 2. observe that height is unchanged 3. increase rowsmax to 3 with the ++ button 4. observe that height is unchanged 5. change a letter, e.g.
lorem -> morem 6. observe that height is unchanged 7. insert a line break in the text area 8. now the height recalculates to rowsmax prop value bonus: firefox only: 9. set rowsmax to 4 10. copy "asd asd asd " your clipboard 11. hold down ctrl+v inside textarea 12. invariant violation phofhyperlink
1. using rtl component as in v4.1.1
i 'm guessing this is a pretty straightforward issue to repro, given it appears to be a regression, not our particular usage.
if not, i will gladly create a sandbox.
codesandbox example phofhyperlink 1. open the codesandbox example 2. click the `toggle popover` button a few times 3. observe the console log showing the calls to popover action handler as it mounts/unmounts
see the open controlled example in documentation: doc example phofhyperlink
sorry, i can't provide a link to a codesandbox as it only happens in the server side.
just render a component decorated with withwidth() using react-testing-library to get the error.
`import timelinerounded from return <timelinerounded />` make sure color is set to an alpha value, you will notice it adds multiple layers on top of each other
link: codesandbox phofhyperlink 1. render the following component phofcode 2. open the console and notice the warning-message.
it occurs in my own project but i noticed that it occurs on mui doc as well link: phofurl 1. go to outlined section 2. toggle developer tools and set to any mobile device 3. click on any of the outlined fields
import an icon into a ts-enabled project and compile.
link: phofurl 1. visit the above link 2. disable javascript 3. refresh the page 4. observe that the match displays `false`.
here is my repo with the issue reproduced.
link: phofurl 1. install webpack, react-hot-loader and new version of material-ui 2. start the webpack-dev-server 3. change any component to trigger hot update 4. see how all <style> elements of material-ui are gone from the <head> element the repo actually contains 2 folders, with two versions of material-ui: 3.9.3 and 4.0.2 correspondingly.
that because when done with 3.9.3 everything looks fine: 3.9.3 phofimage but doen't work with 4.0.2: 4.0.2 phofimage so i dont think it's a problem configuration.
create `<link>test</link>` and side by side.
i believe they should have the same font-family, size and etc link: 1. phofurl
add textfield with initial value '' in dialog and open it in safari phofurl there will be `background: none` css in input, if you will uncheck it - everything will work as expected in safari | tech | version | | material-ui v4.0.2 react 16.9.0 browser safari
i would try to reproduce it and edit this.
i thought someone might have idea whats going on.
open up the codesandbox vertical demo provided by the material ui team.
the behavior is exhibited there.
use the input component with type="button" and try to set it 's value
please have look at direction.js file.
taking the codesandbox phofhyperlink from the example we see the problematic behavior.
1. create a component and export it with the hoc withstyles 2. check the typeof the element.
1. go to phofurl 2. type `drawer` in the search 3. click on the link for the drawer component (it is phofurl wrong origin) 4. error message: phofcode
phofcode phofcode | tech | version | | material-ui v3.9.3 react 16.8.2 redux 4.0.0 redux-form 7.3.0"
i've tried to reproduce on code sandbox, but i'm getting other errors, which i'm not getting locally.
hopefully above is enough, otherwise happy to provide more info.
link: phofurl 1. override the `expanded` class for the expansion panel 2. note that only those attributes not specified by default are applied 3. if switching versions to material-ui v4.0.0-alpha.7, the issues away and behavior is as expected image phofimage
link: phofhyperlink 1. decompress the attached example, and 2.
`yarn install && yarn test`
1. go to phofurl 2. search for typography
material-ui website has the same issue in rtl mode.
i 'm not able to create a repository that reproduces this issue.
i started with the example gatsby starter and pasted a lot of my code into it, and got it to a point where it wasn 't working.
then i started removing code to see how to minimize the example, and it started working again.
when i undid the changes, it continued working, so i 'm not able reproduce this bug consistently.
if anyone has some ideas what could be, or what i could try, would appreciate it.
at this point i 'm really stuck, but would like work with someone resolve the issue.
link: phofurl 1. load the sandbox 2. open another window and give it focus 3. click back into the sandbox's browser content 4. observe the console indicating that onclose has been called
link: 1. visit phofurl on edge 2. open the simplemodal 3.
link: phofurl 1. see initial rendering issues 1. on field `native select initial empty` choose the value `null` 1. observe effect on field `select initial empty` - the height of field is incorrect.
1. on field `native select null` choose the value `empty` on `native select null` choose the value `null` observe effect on `select null` - height of is incorrect.
material-ui website has the same issue in rtl mode.
link: phofurl i "fixed" locally by adding style={{flexshrink:0}} to dialogactions
i want to override the font-size of all buttons on the page.
of course i can create a custom component, but according to here phofhyperlink i can override styling of all components on a page.
however, when i click on the link, it explains how class names are generated, and how to apply this *to an individual component*.
so it's unclear to me how can globally inject those styles make sure that e.g.
all buttons have a larger font size
visit the radio buttons page phofhyperlink on the component demos and click on a radio button in any of the examples.
link: phofurl see the error on the ** customfab ** example with the component prop, and no error on the other two examples.
phofurl i'm at a loss for why it works in codesandbox but not locally for me.
all i've done is spin up a new app with create-react-app, add material ui, and change app.js to the code in the first screenshot above.
really hoping someone else can replicate the issue so i know i'm not going crazy.
this only happened once i upgrade to v4.
seems you have to manually add jss@next to your dependencies
check the documentation example: phofurl the codesandbox in the documentation reproduces the failure phofurl
link: phofurl the warning appear when click it the home icon
i have compiled reproduction script using your example of standalone ssr link: phofurl 1. npm i 2. npm run production 3.
<img width="101" alt="screen shot at 7 04 01 pm" src=" phofurl 4. remove phofcode phofcode 5. npm run production 6.
<img width="108" alt="screen shot at 7 03 50 pm" src=" phofurl
link: phofurl (optional) bootstrap with create-react-app for css modules.
if doing this create a file named and import it as seen in the codesandbox.
1. set up a custom tablepagination component 2. include a `classes` property 3. include `selecticon` and `menuitem` in the classes property
link to test repo: phofurl codesandbox.io reports a different error - i think it's either their environment or i didn't set this up correctly, but the code (in the test file) is very similar to what i have in the repo above.
phofurl steps: 1. write snapshot tests with mui v4's buttonbase component and set disabled to true.
phofcode 2. run tests, see error message: phofcode 3. same component usage is perfectly fine in a browser.
link: phofurl 1. keyboard focus on the `button link` 2. notice that there 's no keyboard focus indicator like there is on `link` components that render an `a` element.
link: phofurl 1. observe linked example
add `component` property to a `buttonbase` component
the `font-weight` for bold and strong is being set to `500` which for the vast majority of fonts doesn 't map to a bold variant.
in general, `600` is the default bold value for all browsers.
link: 1. phofurl 2. phofurl
take a look at this sandbox to reproduce the issue.
you can open the chrome debugger tool verify the issue.
the complete checkbox gets moved out of the drawer and open menu will be displayed.
phofurl | tech | version | | material-ui see codesandbox react latest browser latest chrome
1. import { createshallow } from 2.
i am a uxer and i don 't know how to code.
-install node v10.15.3 & npm 6.4.1 on windows 10 -npm init a new project -`npm install @material-ui/core`
1. go to phofurl 2. use chrome console mobile debugging, set device on ipad 3. click on a listitem of the permanent drawer 4. click on blank space or another listitem upload gif to explain further, first click is on inbox, second starred: listitemmobile phofimage
the issue happens when i use `withstyles` from `@material-ui/styles`.
i provide a theme with `muithemeprovider` but it is not accessible in `styles` function from `withstyles(styles)`.
when i use `withstyles` from the theme gets injected.
1. use android v7.0.1 2. click button with ripple animation | tech | version | | material-ui v3.9.3 react v16.8.5 browser chrome
link: phofurl 1. navigate to mentioned link, click on toggle menu grow button 2. the menu opens up under the button 3. when the menu is open, try to scroll by clicking browser scrollbar 4. as soon u leave click from the scrollbar, menu closes itself
link: phofurl 1. open in chrome, osx.
2. scroll the text horizontally so that the scrollbar is shown 3. click open right button to trigger drawer 4. scrollbar is visible on top of drawer | tech | version | | material-ui latest react latest browser chrome os.
link: phofurl 1. click the first row 2. click `open` 3. click textfield in the dialog
link: phofurl 1. look at the sandbox, notice which variants work and which dont.
localhost:3000 3. build errors are readable in the console.
i don 't know for sure, but i think there could be two different issues in the demo.
the first is a simple styled paper component.
when downgrading to styled components <=4.0.3, this issue will be fixed.
the second one is a styled list component.
styled list components will work, as long as there are no prop attributes set.
`component="nav"` is added, there will be an error.
downgrading to styled-components 4.0.3 won 't work here.
but downgrading to material ui 3.9.2, will.
both cases are shown in the demo.
example: phofurl click on the [open dialog] button, then on the [open popper] button.
in the console, you 'll see that the `textfield` within `popper` is focused (as it should since it 's `autofocus`), then instantly blurred back by `trapfocus`.
did a quick demo, try to load the page with dev tools with simulated ios device or an iphone.
can also not use the drawers on the drawer demo when simulation an iphone link: 1. phofurl 2 .
link: phofurl 1. run `yarn docs:api`
1. install react-full-screen 2. implement a < menu > 3. try to open it on fullscreen mode.
link: codesandbox phofhyperlink [page to test fullscreen]( phofurl
link: phofurl 1. click mount 2. toggle disableportal
cannot reproduce with a simple piece of code; even in our application sometimes it's ok sometimes not.
tell us how to troubleshoot on our side to provide more information.
link: phofurl 1. open up the above code sandbox 2. in change the line height value
phofurl in the example, the button should spin around, but it doesn't.
if you change the mui dependency to 4.0.0-alpha.5 or remove the `connect()` from between `withstyles()`, it works again
checkout the nextjs-next example: phofurl change `next.config.js` to: phofcode add `now.json`: phofcode deploy with `now`
here is the example: codesandbox example phofhyperlink
1. create a css class for bordercolor.
phofcode 2. create a component that contains an outlined input.
phofcode the border color will not change and no padding will be applied.
also, from the implementation phofhyperlink it seems i should be able to override it by changing the root class, however this also doesn 't work.
i can 't make codesandbox.io example, because this is related to rhl.
code below: phofcode phofcode steps: 1.
`webpack-dev-server --mode development --hot` 2. in browser check console and see no warnings yet 3. in `test.tsx` file edit "change me" 4. check console that rhl managed to put update, but throws `invariant violation: "invalid hook call...` warning.
also, phofcode 5. in `test.tsx` file change "grid" to "div" 6. check console that rhl managed to put update, but throws `invariant violation: "invalid hook call...` warning.
also phofcode 7. in `test.tsx` file change text again and leave it "div" 8. check console that rhl managed put update, and no warnings anymore.
<textfield defaultvalue="hello" variant="outlined" inputprops={{ disableunderline: true }} /> 2.
this codesandbox.io template _may_ be a good starting point: phofurl | tech | version | | material-ui v3.9.3
link: 1. phofurl 2. phofurl 3.
phofurl | tech | version | | material-ui v3.9.2 react v16.6.3 browser chrome
add a startadornment to any input component.
provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.
include code to reproduce, if relevant (which it most likely is).
this codesandbox.io template _may_ be a good starting point: phofurl if you're using typescript a better starting point would be phofurl if you do not take time to provide codesandbox.io reproduction, should the community take time help you?
link: phofurl or phofurl 1. ensure using @material-ui packages at 4.0.0-alpha.8 2. set minrows property on textfield with multiline prop
1. open 2 tab in browser.
2. in first tab go to phofurl 2. click to any tooltip example button 3. select another tab browser.
1. go to phofurl 1. compare the outlined layout in firefox/chrome and ie11
the error currently shows up even on the material ui example code under the scrollable tabs section.
link: phofurl 1. inspect one of the tabs.
2. look at the styles applied to the root element of the tab.
3. see that min-width is not affected, and there is no trace of new class i have defined.
link: 1. visit phofurl 2. open the simple modal demo 3. move your mouse out of the window 4. move your mouse back into the window
1. create-react-app ts-mat --typescript 2. yarn add @material-ui@next 3. import { palette } from in app.tsx
phofcode somewhere in my `render` ` <component {...props} ref={ref => this.component= ref} />` the `ref` returns the `withstyles` wrapper and not the `component` class.
there is no `innerref` available too.
so what i am doing wrong?
according to the docs it should be available.
| tech | version | | material-ui v3.9.2 react v16.3.2 typescript v3.4.3
cannot provide live code example as it 's a private repo and a highly complex setup, but here 's what i did.
1. install latest version of material-ui 2. include chip component 3. run yarn test
link: phofurl 1. click on slider 2. focus is not set on slider after click
1. open material ui select dropdown 2. when the menu options opens for selection, enter any value from keyboard.
for example if there is an option fifty in the menu options, on entering f, the menuitem fifty should be highlighted.
but this is not the case rite now do we have any solution to fix this issue?
phofurl was created as follows: phofcode
link: phofurl 1. try dragging the slider thumb by using the mouse
link: phofurl 1. the 3 grid elements inside the root grid appear to be in column direction 2. remove the container property from the grid in line 51 3. now the grid elements appear in row direction (as expected?)
link: 1. check to phofurl 2. use phone or scale browser down to `xs` size.
link: phofurl 1. provide min or max props to the input material ui component.
link: 1. phofurl see the logs
here is a sandbox with the issue i have: link: 1. phofurl 2.
i can 't share the full app and am not sure where the fault could be.
i 'm not sure this is a great issue but am hoping for an idea where to look
working with phofurl not working with `@material-ui/styles`: phofurl
phofurl try scrolling the page while keeping the tooltip open to see it readjust its position.
link: phofurl 1. open dev-tools, find the iframe with the project 2. click the green button, the number value gets updated, however you can see in dev-tools that `head` > `style` tags are also being all updated, _which is unnecessary_.
3. comment one of muithemeproviders, so that only one remains 4. click button.
in dev-tools only number value is updated - as it should be.
link: phofurl 1. change size of window
as this is easy to reproduce, i've recorded a gif so we can easily see below.
bug-ie-edge phofimage access the link listed below from a ie edge browser.
when component updates `in: false`, it will then invoke mui 's `grow` and `popper` 's `handleexited` functions remove portal from dom.
phofurl step1: click on material-ui text step2: now press `tab` step3: panel1 focused then press tab again now it should go to panel2 but it goes inside the panel1's item that is incorrect in case panel1 is in closed state
link: 1. phofurl resize the browser window to make the card change width size and see the image not centering/covering the parent div.
link: phofurl 1. type 'a ' 2. type 'aa ' 3. type 'aaa ', and the label should change to 'invalid tag ', but the border doesn 't change 4. type 'aaaa ', now the border changes to the correct width of label 'invalid tag ' 5. delete two a 's, and label should change to 'tag ', but border doesn 't change 6. delete one more 'a ', and border shrinks to width of 'tag '
phofcode adding "react-is": "16.8.6" above fixed the issue.
| tech | version | | material-ui v3.9.3 react browser typescript etc.
link: phofurl 1. in the simple menu section, click on the open menu button.
2. move mouse away from the panel that pops up.
3. see that the first menuitem is highlighted.
4. move mouse towards any other menuitem.
5. see that that one is also now highlighted.
1. download the "responsive drawer" example from the codesandbox phofhyperlink 2.
`npm run start` 4. see that the title in the toolbar is not positioned properly
link: clone this repo phofhyperlink and run `npm i`.
you 'll observe the error in `app.tsx`.
i think there is nothing to reproduce.
i just upgraded to 4.x and expected that everything works.
link: phofurl 1. go into mobile device mode 2. push the button to open a fullscreen dialog 3. swipe the drawer open (left edge to right) 4. close the dialog 5. see how the drawer is now open :open_mouth:
1. add demo in ts for imgmediacard.
2. the ts compiler will throw an error on `cardmedia`.
i attempted to simplify it as much as possible link: phofurl
basically, i have created a pr phofurl phofhyperlink , if you remove the `defaulttheme` in the `box.js` component, and you run the provided test you will see the error.
i think this is pretty easy to reproduce but if you guys need a codesandbox let me know.
link: phofurl 1. you'll need to plug in a mouse that doesn't support touch gestures and be on mac os.
i happened to be on mojave and using an older logitech mouse.
2. observe how the labels in the main navigation tabs (category 1, category 2, etc...) are no longer vertically centered.
you can also see the hover menus being detached if you hover over one of the tabs.
3. you can also see this go away if you open debugger and switch to a mobile device user agent.
link: - so i invested 1h into replicating this in codesandbox but i cannot ...
link to codesanbox phofhyperlink - fill name field - fill age field - press add button.
you could see how the name field is reseted and it shows the placeholder, but the age field not.
frustratingly, the error does not occur in codesandbox... perhaps the error is just something stupid about my environment, or weird ts quirk.. box is working fine for me in a .jsx file.
1. npx create-react-app box-test --typescript 2. cd box-test 3. npm install --save 4. change app.tsx to phofcode 5. hopefully, observe ts error
just try to use the box core component with create-react-app
link: phofurl 1. take any control that listens and reacts to touch events 2. place the slider inside 3. try to change the value of the slider with touch gestures
link: phofurl 1. scroll to the bottom to hide the "focusable button" 2. open dialog through the "super secret button" 3. focus to the browser address bar 4. press tab
link: phofurl 1. click the 'throw the error' button 2. watch the console.
the error should appear there
link: phofurl 1. run the fiddle 2. open dev tools and observe warning in console
link: phofurl 1. the "second" list item is not receiving focus on firefox.
phofurl sample code also attached : samplecode.txt phofhyperlink | tech | version | | material-ui v3.8.2 react 16.7.0 browser all typescript no etc.
have a non disabled / no ssr button rendered with a dev version of react, check the console.
adapted from the selects demo phofhyperlink on the main website: phofurl (the same behavior can be seen in the linked page to material-ui, under the "placeholder" example)
1. browse to phofurl and open chrome 's dev console ( 2. under the "textfield" section, click any multiline control and hit the enter key a couple times 3. notice the exceptions logged to the console i could reproduce this bug in chrome (both ubuntu 18 and windows 10).
could not reproduce it in firefox (ubuntu and windows).
i have same issue in my project found out it is present also in material-u 's web page.
**note bug does not show when multiline textfield is not wrapped a form tag**
link: see this phofhyperlink example.
chip in the `rtl`mode does not display its delete icon in the right location.
`npx create-react-app my-app` 2. install material-ui 3. add component ex.
drawer, button, typography to `app` 4.
`serve -s build` | tech | version | | material-ui v3.9.2 react 16.8.4 react-scripts 2.1.8
inspect the steplabel icon when icon="1" and as well as `icon={<accessalarmicon` />}.
when icon="1" stepper-expected phofimage when `icon={<accessalarmicon` />} stepper-outcome phofimage when using custom svg also we need to have those mui class names so we can style the svg 's when they are completed,active and disabled.
i have provided a live link below.
link: phofurl 1. use react lazy import @material-ui/core/select 2. click on select box (you will see popup on wrong side) 3. if want to reproduce this again than refresh you page.
link: open phofhyperlink 1. click submit button -> required message appears.
2. now click inside input field -> required message dissapears -> required message appears.
3. click outside of input field -> required message dissapears appears.
link: 1. open example: phofurl 2. check rules of background with image
codesandbox.io was unable to provide correct environment to reproduce the steps due to limitation related with typescript, dependencies, etc.
i have just overrides defined like that: phofcode
link: 1. create a select, with `multiple` attribute true.
2. add a `rendervalue` property to the select.
3. initialize the `value` property of the select with a var containing an empty (zero-length) array.
4. place a breakpoint in the `rendervalue()` function, and note that `rendervalue()` is not called when value changes to an empty array.
1) use the example `examples/nextjs-next` 2) modify the theme in `getpagecontext.js` with: phofcode 3) add to `index.js`: phofcode
link: phofurl 1. go to phofurl 2. click the iconbutton 3. drawer is opened but not accessible via keyboard
`yarn workspace @material-ui/core test --watch` 2. change some whitespace in a file 3. test rerun with fail
link: 1. run `yarn test` 2.
i've reproduced this on two different windows machines (one windows 7 the other windows 10).
in both cases i'm using git bash shell (mingw64 -- bash shell installed as part of windows git installation) for executing yarn scripts.
i used yarn 1.13.0 on 10 and yarn 1.12.0 on the 7 machine.
both behaved the same and both can successfully execute the tests in core packages listed at top (the packages that `test:coverage` task was limited to until recently).
link: compare from v3.9.0 to v3.9.2.
link : phofurl 1. go to example above.
3. click on open left
1. change an expected value passed to assertmenuitemtabindexed in 2. execute the test (still passes)
link: phofurl 1. scroll to the bottom 2. scroll moderately quickly to the top 3. note that css is still highlighted in the toc
phofurl | tech | version | | material-ui v3.9.2 react 16.8.3 browser chromium
i tried upgrading the following material ui packages: screen shot at 11 46 17 am phofimage however, here the are the errors i 'm getting when `webpack` is running: screen shot at 11 48 24 am phofimage when i looked at the file in my i see that it is referencing `babel` packages with this directory structure: screen shot at 11 51 38 am phofimage it seems to be looking for a `builtin` directory inside of `babel` package.
however, when i looked `babel` package in my `node_modules`, notice that there isn 't a `builtin` directory under `helpers` directory: screen shot 11 53 20 am phofimage **as a test, modified file and removed reference to `builtin` directory and `webpack` seems to compile and my application seems to work.
just put the following code in a react app with typescript and try to compile.
phofcode i 've created a sandbox phofhyperlink for my issue, but codesandbox 's use of `tsc` doesn 't work?
coincidentally, this also produces some unexpected styling on second `<myavatarstyled component= 'a ' />` call i 've tried creating return types using the return types of `withstyles()` and `styled()` and typing each derivative component, but had no luck.
aside: this kind of exported type would be very helpful for me as i require typedefs for all of my variables, parameters, function return types, etc.
for example, i have these types in file: phofcode i use them like this: phofcode
1. import any component from core/component 2. use it in jsx 3. try to have ide suggest props
link: phofurl 1. open dialog 2. scrol
1. go to: phofurl 2. notice that the arrow-button correctly expands and minimizes the sidebar.
3. in the styles definition of `src/index.js`, swap the order of two fields.
4. notice that sidebar is no longer correctly minimized/expanded (it stays expanded all time).
more specifically: working: phofcode broken: phofcode notice that this isn 't about order of css rules, but about order of objects that end up mapped to `classname` strings.
if `drawerclose` is defined after `drawer`, it 's all good.
if `drawerclose` is defined before `drawer`, functionality gets broken.
link: 1. load the page at phofurl 2. once it's loaded, hit the `reload` icon on the internal browser (the one on the page, displaying results.
not your own browser) 3.
even the demo does not look right when the selected items per page are 2 digits phofurl 1. change the items per page from 5 to 25 i wanted to provide a codesandbox example with three digit items per page that illustrate the bigger issue but it looks like codesandbox is having issue lately, or at least, for me.
link: phofurl 1. hover mouse over justify
link: 1. phofurl 2. then remove the config and see letter-spacing change.
link: 1. phofurl | tech | version | | material-ui v3.9.2
- open phofurl in chrome on windows/linux - change browser zoom zo 175% - see the scrollbar codesandbox code: phofurl
1. create a *.tsx file 2. add this line: `import createsvgicon from 3. get hit in the face by typescript error ts7016 ;-)
adding material ui to a project initialized with phofurl phofcode phofcode
link: 1. phofurl 2. phofurl
link: phofurl 1. click the first menu 2. use the up and down arrow keys (note that focus moves) 3. now click away and click the second menu 4. use the up and down arrow keys (note that focus does not move)
link: phofurl it's all set up in the code sandbox.
the middle element, which is purple but has no button properties, is the example of where it doesn't work.
link: phofurl 1. click on the textfield, nothing is displayed.
testing anywhere the following code sample is enough to reproduce : phofcode
go to any page with a slider component and run lighthouse phofhyperlink link: phofurl
n/a this appears to be a design choice/oversight
i can't share my current project, but i while try to reproduce the situation in codesandbox tomorrow.
link: phofurl click the button to switch theme (to dark) and see the style not applied to parametized div it 's really due to theme change but not redraw: when you click on "inc width" the style are processed again an the style name is valid... i hope to be clear but context is little complicated...
link: i don 't have a live link but it 's easy to reproduce: 1. create-react-app testy 2. cd testy 3. modify package.json, setting the react and react-dom versions to 16.8.0-alpha.1 (to make use of hooks) phofcode 4. npm install (to update react) 5. npm install --save @material-ui/core @material-ui/styles @material-ui/icons 6. copy the hooks version of the sample app bar with a primary search field phofhyperlink 7. paste this code into the test app 's /src/app.js file (overwrite existing code) and save 6. npm start - you will get an undefined error when makestyles function accesses empty theme object
try setting `defaultprops` on inputlabel.
this appears to work fine in codesandbox phofhyperlink , but when i download the zip from there, install modules with `npm i` and then run `npm start`, i get the same error in both vscode and the build log.
link: 1. breadcrumbs api phofhyperlink
link: phofurl simply change the app variable to or `correcttheme` to see the different.
the top box is styled using `withstyles` the bottom box is styled using `usetheme` to get the theme color and set the `style` directly
this can 't be easily reproduced in a sandbox environment.
link: 1. make a withstyles(<component>) that uses mui components as well 2. install a testing framework like jest 3. run snapshots 4. add a new test, and you will see how the snapshots will fail on prior ones because the `rulecounter` increases.
override some mui styles in a component.
view it in storybook, and use dev tools to see the order the `<style>` elements are inserted.
adjust the `@material-ui/styles` package version to observe the difference in order, and see your overriding styles get lost.
i'll try to create a codesandbox repro some time soon.
is there an example i can start with that already has storybook with typescript and mui?
1. create a page with 2 react apps that both use mui 2. create some custom styles on each app 3. view on the browser, only the first app overrides are visible
it seems to be a new issue at least within the past month.
maybe a point update for either hmr, but more likely the withstyles under material-ui/core.
phofurl removing `<stylesprovider>` tag the error goes away.
1. create a couple of `textfield` with `select` and no `name`.
they will all have `id="select-"`.
link: phofurl 1. click on the appbar icon button 2. try navigate to a different page you are in 3. the error is thrown
1. copy example project of material-ui/nextjs 2. intall and start it 3. click on button
i 've attempted to replicate this in codesandbox and have been unable to.
i think the reason for that is that it does not accurately represent a `node_modules` structure...hard to tell.
i believe the core of this issue is we have 2 different versions of jss in play: ` yarn why jss yarn why v1.12.0 [1/4] why do we have the module "jss"...?
[2/4] initialising dependency graph... [3/4] finding dependency... [4/4] calculating file sizes... => found "jss@10.0.0-alpha.8" info reasons this module exists - depends on it - hoisted from info disk size without dependencies: "180mb" info disk size with unique dependencies: "896mb" info disk size with transitive dependencies: "916mb" number of shared dependencies: 5 => found this module exists because depends on it.
disk size without "408mb" with unique "544mb" with transitive "632mb" number of shared 5 ` i believe since core uses one version and styles another, combined the `install()` mechanism at runtime (which typescript presumably cant know about since its runtime), its impossible to new styles package alongside core.
to trigger error, you can try to compile a file imports like this: phofcode
link: phofurl 1.click on open simple dialog 2.dialog opens -> componentdidmount fires and the ref for the input is undefined in the console 3.
link: phofurl 1. just run and inspect dom or look at the body margin and the red background color 1. you may also inspect the head for <style data-jss="" and look that it is empty
link: 1. download this phofhyperlink 2.
`yarn install && yarn start` i have checked the import order.
is any wrong in my code or method to run ?
link: phofurl 1. click on "toggle drawer" 2. adjust the slider to make the scrollbar appear
no repro to share yet, but looks like similar to phofurl it isn't clear what to do to make `classes` optional.
seems like having add a type for it in my props definition is too complicated (how am i supposed know how type it?
i want leave that material-ui) unless i missed it, the docs don't explain this part.
link: phofurl 1. open drawer 2. close drawer 3. open drawer
sorry i failed to demonstrate the problem on codesandbox but reproduction is still easy : 1. download mui_usemediaquery.zip phofhyperlink 2. unzip mul_usemediaquery.zip 3. cd mul_usemediaquery.zip 4. npm install 5. npm build
link: 1. fresh create-react-app typescript 2. update react, react-node 3. install material-ui/core, material-ui/styles 4. index.tsx
link: phofurl 1. go to the progress page docs and open chrome dev tools 2. in the dev tools menu go to more tools > animations image phofimage 3. set the animation speed to 10% image phofimage
just do something simple like phofcode and use styledtypography in a render function passing a prop like color.
so far, any material ui component i tried, was affected.
link: phofurl 1. create-react-app 2. npm install react@next react-dom@next @material-ui/styles 3. import makestyles from @material-ui/styles 4. npm start
there are no clear steps to reproduce this issue with 100% guarantee.
1. go to the codesandbox phofhyperlink 2. click around 3. open the menu 4. click one of the items 5. the menu should close and print the action in console, but this does not always happen link: 1. phofurl | tech | version | | material-ui v3.8.3 react v17.8.0 browser edge 18, firefox 64, chrome 71
link: phofurl (yes, example in the docs is broken too) 1. implement "mini variant drawer" like in examples
i have prepared a repo here phofurl steps: 1.
`npm install && npm run dev` 4. in web browser, open ` phofurl 5. see the error in your terminal
link: phofurl please wait a few seconds for styles to load.
loading seems to be slow due to a specific issue with codesandbox, but it does highlight the issue more clearly.
- download code from phofurl - unzip - `cd - `npm install` open project in visual studio code if all goes as planned, you will see the thrown error.
* have a body that is long and requires scrolling * open dialog with `scroll=body` and long content codesandbox demo: phofurl material ui docs: phofurl and open `scroll=body` demo when you change the version of material-ui in the demo to 3.5.1 the scrollbar is in the correct position (but it had a different bug that caused seeing double scrollbar when modal was disappearing - problably a fix for that created this bug).
here is a working quick-fix solution: phofurl phofcode another possible quick-fix would be inside the theme.
maybe a permanent solution can be derived from this: phofcode ps: thanks for the amazing job on mui!
click through codesandbox examples, for example phofurl
link: 1. load phofurl in ie11 broken_theme_ie phofimage problem still occurs after cache is cleared and in inprivate browsing mode
link: phofurl image phofimage 1.
`yarn install && yarn dev` 2. open phofurl and it'll show 3 round buttons all with equal height/width but after 100 ms the middle one will get smaller.
3. if you inspect the svg css classes of the email icon you can see that the default style (`1em`) overwrites custom applied ones (`32px`) image phofimage
link: phofurl 1. clone it 2. npm i 3. npm start
n/a link: 1. phofurl 2. phofurl
link: phofurl 1. render two dialog components, in a particular order.
normally they will appear in that order in the dom.
2. wrap the first one them in something like withwidth, which delays its rendering.
now the first one will appear after the second one dom (so visually it will be stacked on top).
link: please check this codesandbox phofhyperlink
check bundle which used material-ui typography.
phofurl phofcode what 's weird though is this error is not present in phofurl
link: phofurl 1. go over popover a 2. go over popover b | tech | version | | material-ui v3.7.0 react browser typescript etc.
1. refer to this sample phofhyperlink 2. open phofhyperlink the app in new window 3. open react dev tools and click on the 'update the first cell button.'
4. you will see that all table cells are highlighted.
5. also you can see how the 'plain html' sample works.
btw, i suppose, i can be fixed by using react.purecomponent for `tablecell` component.
link: 1. create an icon wrapped into a dom with inline styling: phofcode 2. assign to the dom element styles that the svg icon should inherit: phofcode 3. use ssr with the application 4. run the app and then reload page: despite ssr correctly render html: phofcode icon during first second of page loading it doesn 't take specified font size and so consequently appears way bigger; also it doesn 't inherit color from parent.
link: phofurl 1. go to the link 2. open the console
link: phofurl phofhyperlink 1. replace `tabitem` with a `tab` and give it the `tab` prop instead of the `label` prop 2. tabs are now functional
1. start typing and then select one of the options 2. press backspace/delete, nothing happens.
3. you need to press another character key to clear the value.
link: 1. phofurl 2. phofurl
i've prepared sandbox app phofurl .
you should see pink header and black content.
download sources, then `yarn && yarn build`.
bug occurs when you make production build of this app.
| tech | version | | @material-ui/core v3.6.2 @material-ui/styles v3.0.0-alpha.3 react v16.7.0-alpha.2 react-dom v16.7.0-alpha.2
despite the fact i did not have the chance to create an example, the steps to reproduce it are: 1. click on a button which opens a material-ui dialog (updating state open is fine).
2. press `esc` to close the dialog as only action.
no click should be done between clicking button and pressing `esc`.
| tech | version | | material-ui v3.6.1 react 16.6.3 browser chrome (official build) (64-bit) typescript 3.2.1
phofurl 1. type in the input 2. click clear button 3. see that the input label stays in raised position
link: phofurl 1. go to phofurl 2. switch to dark mode 3. type a search 4. see light background in search results
link: phofurl 1. set focus into textfield 2. drag slider around 3. focus is still in textfield
reproduction not possible in sandbox, sandbox lack the tooling vscode has for typings.
wiggle your mouse above speed dial example link: phofurl
current `selectinput` proptypes definition for `value`: phofurl phofcode current `selectinput` typescript typing for `value`: phofurl phofcode
phofurl 1. download sandbox 2. yarn install 3. yarn build 3. serve -s build (serve build folder as static) 4. inspect card div 5. observe double class declaration (`<div class="jss2 jss5 jss3 jss1 jss1">`) 6. see `<head>` tag: phofcode
you can reproduce it simply by switching the "primary" (the second one) switch, and hiting the "tab" key.
phofurl phofhyperlink you can see, the indicatot is rendered, but it is extremely hard to see, because it is almost a white color on a white backgrond.
you can see this behavior better, if you set a different background color.
link: phofurl 1. visit the link
see this snippet: phofurl when you comment out line 53 of `/pages/index.tsx`, you'll see the difference.
replace the following code in demo.js(link mentioned ).
( phofurl click next text box label in overlap with box.
when i edit the box it will come to normal.
link: phofurl 1. click on the button to open the dialog 2. type something in the text field.
3. hit the enter key using your keyboard (no clicking) 4. the dialog won't get closed.
create a simple project, add tslint, add @types/react@16.7.10 phofcode i tried to created a code sandbox but without linting i can 't reproduce the issue.
in tablepagination ass selectprops={{ native: true }} phofurl
link: phofurl 1. click the backdrop of the foremost dialog.
link: phofurl i had tried to use `selectprops` to resolve it on `variant="standard"` case, but it is not worked for `outlined` and `filled` cases.
try the following code: phofcode and observe the following result: image phofimage
as i see in sources, input phofhyperlink component handles `disableunderline` prop correctly, but filledinput - not, it has only mention phofhyperlink about it, but no implementation.
also in docs phofhyperlink there is no disableunderline for filledinput link: phofurl phofhyperlink 1. create textfield with `variant="filled"` and true}}` phofcode `
link: phofurl 1. start respective profilers on page load, or alternatively start the profiler and then tweak the for loop's iteration count.
link: phofurl 1. toggle the switch, checkbox, radio buttons - no error 2. toggle the checkbox - errors correctly
link: phofurl phofhyperlink 1. click the open menu button.
2. press the down arrow key twice.
just `import fab from '@material-ui/core/fab'` in your typescript project.
on the dialog demo phofhyperlink open `simple dialog` and press <kbd>shift</kbd> + <kbd>tab</kbd>.
page is scrolled to end.
on phofurl scroll to green button and press it.
press <kbd>tab</kbd> three times or click to browser's url and then press <kbd>tab</kbd>.
page is scrolled to start.
i reproduce it on your own demo for slide animation.
all you have to do is open link below, change `direction` to `left` or `up` and you can see scrollbar for a fraction of a sec.
if you increase `timeout` it will be more visible.
link: phofurl this issue has happened for me with the code sandbox link, however, it is intermittent.
it appears to happen more regularly with more (not necessarily related) elements rendered on screen.
this makes me suspect a race condition somewhere, but as i 'm not familiar with the library code i 'll leave that to the experts for now.
1. render a `tabs` component with many tabs.
include the props `scrollbuttons="auto"` and `scrollable={true}`.
make sure tabs can scroll.
2. set initial value for tabs to a value that forces `tabs` component to scroll.
i have not been able to create a codesandbox or github repo to reproduce this issue, which means that it might actually be an issue on my part.
i have not been able to find the exact root cause as to why this happens, but i have a guess so i decided submit an issue anyways.
my setup looks something like this: phofcode my theory is that while lazyloadedcomponent is being loaded, react doesn't actually mount the dom since the fallback is above the menulist in hierarchy.
this causes call reactdom.findomnode return null at this line phofhyperlink , which in turn causes property this.listref be null.
the error occurs at this line phofhyperlink since list is null.
according stackoverflow question phofhyperlink preferred way simply use ref directly, and according react docs page phofhyperlink use of finddomnode discouraged.
what reason call in case?
can't we use ref directly instead, as react docs seems suggest?
| tech | version | | material-ui v3.4.0 react v16.6.1
link: phofurl 1.make sure that @material-ui/core is 3.2.2 2.click on input, you see custom color border(non primary) 3.update @material-ui/core to 3.5.1 4.now focused textfield is in primary color, fieldset does not have focused class
link: phofurl 1. press `scroll=body maxwidth=lg` 2. press `scroll=body maxwidth=false`
phofcode edit p9ll5rw7w7 phofimage phofhyperlink demo phofimage
1. focus input 2. select month have 30 days (example: 3. focus into date value and scroll up => it show that's incorrect.
screenshot from phofimage thank you
i have a pretty simple list that i'm trying to render.
phofcode link: edit material-ui example page phofimage phofhyperlink
compare phofurl in ie11 vs chrome (latest)
link: phofurl 1. please go to sandbox link provided in the above
the same example doesn't work on codesandbox.io: link: phofurl 1. button has no background 2. toggle the switch has no effect | tech | version | | material-ui v3.5.1
might be too complex to reproduce because bug exists due webpack usedexports optimisation,
link: phofurl 1. add muithemeprovider to app 2. add theme with = "some font"` 3. render `<listitem button>` within the themeprovider context
link: ` <grid container justify="center" alignitems="center"> <card> <cardactionarea> <cardcontent> <typography style={{ height: 500, width: 500, backgroundcolor: 'lightgreen ', }} > das ist ein test </typography> </cardcontent> </cardactionarea> </card> </grid> `
link: phofurl 1. focus on first expansion panel 2. use tab to switch focus to second expansion panel console should then log two messages: focus blur however, it only logs 'focus'.
see phofurl | tech | version | | @material-ui/core 3.4.0|
link: 1. run `yarn docs:api:core` on a windows machine
phofcode will wind up with different print styles than: phofcode
phofurl 1. create a speeddialaction with `buttonprops` that configure the component to be `link` and the `to` to be some valid route.
1. in desktop, click on the action button and see that you're taken to the expected route 1. on a touch enabled device, or chrome's mobile emulator, tap on same action button link: 1. phofurl 2. phofurl 3. phofurl
here is a code sample demonstrating the issue.
1. go to this page in google chrome 70: phofurl 2. pull the slider handle away from the middle to the far right.
4. try to click the right-outer half of slider handle ui (the blue circle).
5. about half of slider handle ui will be un-clickable.
(you can also see same behavior in most of examples on mui slider page, of course: ) link: 1. phofurl (just a clone codesandbox) 2. phofurl 3. phofurl
1. create an iconbutton with nested icon 2. add fontsize="small" or fontsize="large" attrubute to icon link: phofurl
link: phofurl 1. create a `togglebuttongroup` where one of the `togglebutton` values is falsy and one is truthy (`0` and `1`, for example) 2. select the falsy value, note that the shadow/background is missing 3. select a truthy value, note that the shadow/background appears
using the following code phofcode the output looks like so image phofimage if i change the code to exclude the time then it displays properly, but i would expect that the component would work with or without time being included,
happening across all radios + checkboxes on live demo site link: phofurl # environment | tech | version | | material-ui v3.3.2 react 16 browser chrome 70
no explicit steps to repro yet as i 'm trying to make a minimal reproducible example.
the problem appears one i hook up the `withroot` from the gatsby example.
it fixes the ssr rendering, e.g.
given the following (taken from material-ui-kit): phofcode the title style in ssr page would resolve to following: phofcode which looks like an exact representation of original style.
however js-injected style is incorrect: phofcode notice how it has color from while still including other fields, e.g.
to make sure this isn 't an off-by-one i 've added `borderradius: 515` to `landingpage.jsx` style and `borderradius: 909` its parent in `material-kit-react.jsx` (just random numbers).
as i expected, rendered jss page has 515 version and js one has 909. i 've started tracing this bug in phofurl but now i 'm not sure it belongs there.
more so, i have no idea where start working on a minimal reproducible version of this as it goes against my knowledge of js.
| tech | version | | material-ui v3.3.1 react v16.6.0
link: phofurl screencap: phofurl 1. use keyboard to navigate and highlight the select 2. open the select and chose a valid value to set the state and re-render the select with that value 3. use keyboard to navigate back to select and open popper arrow-up disabled item (wont have any focus styles) it 4. the select is now disabled value
phofurl 1. press mouse down in the middle of slider (thumb should follow cursor).
1. drag cursor left until it leaves the window / codepen frame.
**(issue 1)** cursor has left the window but slider is not slid all the way to left of track.
1. release mouse button outside of window.
move cursor back into window.
**(issue 2)** slider thumb continues to track cursor despite mouse being released.
click inside window to release slider.
1. type something into the top text field 2. hit enter 3. click away from the text field phofurl | tech | version | | material-ui v3.2.2 react 16.4.0 browser chrome 67
- go to the demo page phofhyperlink in mobile view - open the main menu using the hamburger icon - click within the menu and drag down to scroll up to top - while maintaining your click/press, drag up to scroll down.
the menu does not move.
this also happens at bottom of menu, scrolling opposite directions.
link: phofurl the red should be the full width of the green, but it is not.
the green width is `spacing.unit * 3 * 2` and the gutters method adds padding on each side that is `spacing.unit * 3` (for desktop).
link: phofurl 1. open max height menu
it is pretty hard to next js setup in codesandbox with all the ssr stuff, need to get many boilerplate files :sweat_smile: you can reproduce this in your docs site if you are using typography inside a link component link: 1. setup next js with ssr 2. setup the new typography in theme (ie `usenextvariants`) 3. make a link that wrap a typography component
here is the codesandbox: link: 1. phofurl | tech | version | | material-ui v3.3.1 react 16.6.0 browser google chrome
n/a link: 1. tab documentation phofhyperlink
1. use server-side rendering for material-ui (server-side rendering for `styled-components` doesn 't affect the issue) 2. add `styled` components to your app.
at this point, it generates the class names correctly.
3. add material-ui components wrapped in `styled` hoc to your app, e.g.
phofcode at this point there are more class names generated by the generator on client side and they are in the wrong order.
client: phofcode server: phofcode this causes warning when rendering on client: > warning: prop `classname` did not match.
server: "muitypography-root-2 muitypography-body2-10" client: "muitypography-root-30 muitypography-body2-38" this project can be used to reproduce issue: phofurl build with `yarn dev`, start with `yarn start` and navigate to `localhost:8080` view app.
ssr is in `server/express.jsx`, client is in `src/index.jsx`, wrapped material-ui component is edit: the app will look broken, as i removed some styles for testing.
the indicator of problem should be warning console.
link: phofurl 1. load page 2. open modal demo dialog box 3. select from the first drop down list 4. select from the second drop down
open this link in ie 11: phofurl 1. click on a switch/checkbox/radio 2. nothing happens - no animation, no change of value
1. create two pages, one with a lot of content so it has to scroll, one with little content so it doesn 't scroll.
2. have temporary drawer with two link elements(not a) in for example an app bar as an "overlay" on both pages.
3. have first link send you to page one, and the second link send to you to page two.
4. switch between the two pages via the drawer links.
link: phofurl the documentation shows this well, but here is a screenshot just in case: annotation phofimage this happens at least in edge 18 and firefox 62 (the screenshot is from firefox 62).
while the screenshot is of the outlined variant, it also applies to the normal and filled versions.
| tech | version | | material-ui v3.2.2
to see the issue see this codesandbox example: phofurl | tech | version | | material-ui v1.5.0
link: * codesandbox phofhyperlink * github phofhyperlink * gitlab phofhyperlink * storybook phofhyperlink jest/storyshot error 1. implement a component `slider` 2. use it with storybook => ok 3. use it with storyshot addon + jest => nok
unable to reproduce in a code sandbox or create-react-app.
seems to only happen in my own environment.
link: phofurl i first found it in my app, but then realized it also breaks on the demo page.
1. open chrome dev tools 2. switch to mobile view 3. try using single touches to change the slider 4. it doesn't change value some times
here is the sandbox with primitive example, as a presentation of the case.
link: phofurl btw: what is the correct way to make grid column container to fill whole available space?
i don't like using **height: 100%** explicitly, like in the example.
| tech | version | | material-ui v1.3.1 react v16.4.1
link: phofurl 1. go to the above link 2. look for text fields with input adornment 3. observe the overlapping of icon on label
phofcode in order to fix this i made icomponentprops extend tabprops and then spread the props over the tab.
i 'm guessing the component is cloned and it is having the onclick event handler set.
seems how it was not exposed it did not work.
as such this might be expected behavior but i figured i would document it.
| tech | version | | material-ui v1.1.0 react v16.3.2 chrome typescript v2.8.4
i am unable to reproduce this issue consistently.
it does happen the majority of the time in the project i 'm working.
the outline does update as soon as interaction has taken place with the page like clicking on an element, opening a dropdown, etc.
or anything that manipulates state of current component.
i 've seen this happen in v3.2.x, i have never used `variant="outline"` in prior versions so am unaware if this bug existed prior to v3.2.
it is easier to see if the active tab component has an background-color.
it is only reproducable if scrollbars in the browser are visible and are shown after navigation is completely done.
sorry that i can 't produce fast a fiddle for it.
`const styles = theme => ({ tabselected: { backgroundcolor: '#f5f5f5 ' } })` phofcode
link: phofurl 1. click any of the select drop-downs 2. select a value so the options disappear but the control stays focused note that setting a `:focus` pseudo class in dev tools is not enough.
you have to actually do it.
link: phofurl 1. set anchororigin.vertical to `center` and horizontal to `right`/`center`/`left`)
1. setup create-react-app 2. run yarn add @material-ui/core 3. yarn start
viewing the material ui tabs with wrapped fields demo in ie11 immediately shows the issue.
link: phofurl 1. open `src/pages/index.tsx` to see the error
see the codesandbox below, the uppermost radiobuttons don't show a selected styling and are provided with a tooltip phofurl
link: phofurl 1. hover on button 2. wait for tooltip 3. click on button 4. close modal by clicking outside
link: 1. create a button with id provided 2. handle event click with e parameter 3. the id and name of e.target are empty.
link: 1. install material ui 2. try to use the "shape" object in the default theme (i.e.
1. set the new typography usenextvariants = true 2. using the simplest demo <snackbar /> - open the snackbar (have developer tools open) it does display appear to display correctly, but you are given the console message,
1. simply use any material ui component that references on any of the deprecated typography variants.
link: phofurl 1. check console 2. uncomment typography section 3. save 4. refresh the page or click on ** 'open success snackbar"**
link: phofurl 1. clone repo and run `yarn install` at root 2. run `yarn start` 3. see errors
it reproduces with customized tabs example from components demo section from the docs.
1. just open phofurl for edit in stackblitz in safari for os x. link: phofurl
link: phofurl * we have an example ssr app /w material ui application above.
* you can clone the repo, install dependencies, and run `yarn dev` to see the issue.
phofurl the example references a non-existent font, which should be equivalent to a font that is not yet loaded, but observable permanently, which makes debugging easier.
link: 1. material ui documentation phofhyperlink 2. text fields in the material design guidfelines phofhyperlink
sorry, phofurl errors out for me.
link: 1. package.json phofurl 2. theme: phofurl 3. component causing the error: phofurl
1. open the live example: phofurl 2. click the button 3. look at the console
open the live example ( phofurl and check the console logs.
you'll see phofcode here is the same example working with v3.1.2: phofurl i'm guessing it has something to do with this line: phofurl i'm not passing in a variant for the typography component, so i don't think `headlinemapping` is getting applied.
i was able to work around this bug by doing: phofcode
open this codesandbox phofhyperlink , manipulate the slider, and check out the console.
the issue seems to happen less often (still happens) in a browser environment (chrome 69).
happens a lot in an electron context.
link: phofurl 1. inspect element and look at the input element for the selecttextfield example 2. inspect element and look at the input element for the regulartextfield example 3. notice difference 4.
link: phofurl 1. create `textfield` component with variant set to `outlined`.
2. set `inputprops` on the component with `classes` object.
3. observe that classes applicable for `outlinedinput` are not accessible (e.g.
`notchedoutline`) 4. set `classes` to `{ notchedoutline: classes.root }` 5. observe typescript error phofcode
i can work on a minimal example if there is no obvious way to debug this issue.
phofcode when running a test in jest i get the following prop type errors: phofcode ** notes ** 1. passing a `labelwidth` prop to `textfield` does nothing.
2. this does not occur unless the `variant="outlined"` prop is used.
though clickable is false, the chip is clickable because of presence of onclick prop link: phofurl phofhyperlink | tech | version | | material-ui latest react latest browser chrome
link: 1. phofurl 2. phofurl
used the example from the autocomplete section - downshift + popper in a card link : phofurl
just run the example phofurl on touch screen with the mouse click.
link: sandbox phofhyperlink (see `onchange` of the `<radiogroup>`) it is implemented with an arrow function, since sandbox displays the error here, but the implementation with a class function also results in an error (codesandbox swallows this error): image phofimage
link: phofurl phofhyperlink 1. click on label
override the selected class like so: phofcode link: phofurl
build typescript project with material-ui installed from npm.
1. i created an example input here phofhyperlink 2. clone or download the app, `yarn install` -> `yarn start` view on ie11 and chome browser and compare behavior.
this example is referenced from material-ui-textfield examples phofhyperlink .
a codesandbox example can be viewed here phofhyperlink however, it does not seem to run on the latest ie11.
link: phofurl | tech | version | | material-ui v3.1.0
after updating to material-ui version 3.1.0 the icons of iconbuttons are not centered if size changed via style props.
link: phofurl 1. update to new material-ui versions (icons and core) 2. change size of iconbutton via style props (height, width)
phofcode the messages will appear when building.
| tech | version | | material-ui v3.0 react-static 5.9.7 note: i studied closed class name generator github issues, but none of them provided enough insight for resolving this.
also, i went to the gitter chat thrice for this issue, but i couldn't find any help there either.
reporting this as a bug as i can't find the justification of error messages
link: phofurl 1. create a multiline textfield component 2. assign a rows={1} property 3. observe the multiple rows
please run createmuitheme() and observe the result.
i suggest this is a bug because material-ui decision to use jss should mean it should provide what jss need to work.
- `ssr` rendering part phofcode --> link: n/a
link: phofurl 1. open link to code on mobile, or in chrome with devtools open and device toolbar toggled 2. use the slider.
note the number beside "last touchend event" 3. touch anywhere else on the document.
not how the number beside "last touchend event" changes.
link: phofurl 1. wrap the togglebutton inside a tooltip 2. run the code 3. see the console for warning
link: 1. just run sample `yarn test` @ phofurl
link: phofurl 1. open menu (top right), click "section 1" 2. notice that the window scrolls to "section 1" briefly, before resetting to "section 0" 3. open menu (top right), click "section 2" 4. notice that the window scrolls to 2" (after a 500ms delay) and stays there.
using an animated scrolling library (e.g.
phofurl exhibits the same behavior if the scroll duration is less than `menu` `transitionduration`.
i was following the examples from the docs.
i noticed that the one from our docs here at phofurl is different from the one from this github repo which is phofurl in which case i ended up following latter since it solved some initial problems such as css name mismatches between server & client.
i also ensured that i 've read troubleshooting part and didn 't miss what 's documented already.
the `webpack.config.js` i 'm using is provided below, and also tried commenting out following parts related to splitchunks and runtimechunk, but `css` still disappears when bundle `js` is loaded in production build: phofcode app.jsx: phofcode client.jsx: phofcode ssr.jsx: phofcode webpack.config.js:
link: phofurl 1. use chromes auto-fill phofhyperlink
go to phofurl phofhyperlink , click the button and press esc button just after it.
image phofimage link: 1. phofurl phofhyperlink
use mui with typescript and use provided snippet
link: phofurl 1. npm install --save react@16.3.0 react-dom@16.0.0 @material-ui/icons 2. import and render an icon somewhere in your app, e.g.
: phofcode 4. start app
* just clone this repo: phofurl * run yarn * run yarn start * go to phofurl
i changed the demo file to start with `open` set to `true` and then on mount, set it to `false` to emulate the situation i'm in.
link: phofurl 1. start app 2. try click somewhere like the button
try to change at least two sliders with two fingers.
link: phofurl code example: phofurl
link: phofurl 1. add chips to multiple input on mobile or using chrome dev tool responsive mode 2. try deleting a chip.
link: phofurl 1. click the filter icon on the right side of the button
link: phofurl 1. press the button 2.
open the material-ui docuemntation with chrome and see that no hover effects appear on the demo buttons.
open it with firefox or internet explorer and see that there is a hover effect.
1. put a `form` within a dialog content.
2. put a `textfield` within that form.
3. add an `onsubmit` handler as props of that form.
4. run it live, open the dialog, type something on the textfields, press enter 5. it should submit, but it won 't.
link: phofurl 1. click & hold the button 2. watch the ripple behavior
link: phofurl 1. open the link in browsers other than chrome.
2. toggle the input component by clicking the button.
3. see where the cursor blinks in edit mode.
link: phofurl fairly self explanatory - 3 examples of the menuitem behavior in a select - last example with display: 'block' set and ellipsis as expected.
use grid container or just go here phofurl and inspect
1. go to the documentation phofhyperlink in edge 2. select any row to make the "select all" checkbox enter an indeterminated state 3. click the checkbox
link: phofurl 1. remove the input value and blur the input; the label will descend into the input.
2. focus input again and type letter `e`.
4. see how label descends, covering just written `e`.
link: run mui docs in development mode locally (`yarn dev`) 1. open docs in ie11 2. see broken docs
edit material demo phofimage phofhyperlink
n/a - see linked issue - this bug report is regarding the bundle duplication.
apologies if this case is not needed.
this only seems to be happening on mui v3+
here's an image of what's happening with the classnames of the component that doesn't update.
notice the mui classnames update (with also other classnames of my styles), but the classnames of infopanel don't (and few others don't) image phofimage image phofimage image phofimage i can't reproduce it in codesandbox as i think this only happens, when classname count goes over some limit, but here's link what i'm basically doing, where it works.
link phofhyperlink in my application most components would update like button here, but few them would lose black color text.
link: phofurl 1. open drawer 2. open dev-tools 3. check aria-hidden attributes for drawer modal & content 4. close drawer 5. recheck aria-hidden attributes for drawer modal & content
here is code similar to what i'm doing.
link: phofurl 1. scroll to the bottom of the page.
2. click on the button on the appbar to open drawer.
4. on closing drawer, page scrolls to top.
5. if position of appbar is changed to 'fixed', then this issue is not observed.
use a popper as downshift's phofhyperlink menu component: phofcode
go to ` phofurl <b>using firefox</b> click on anything with a touch ripple effect.. you'll feel it right away.
link: phofurl default buggy behavior already set.
i can 't share the code right now in total.
i can provide with files if needed.
i used the gastby-ssr and withroot and getpagecontext of the example.
1. go to: phofurl 2. show the "current module view" to see the programmed table.
3. sort by merchant name and then select a few rows.
the correct row will not be selected/deselected every time.
if the correct rows are being selected, try sorting again and then selecting/deselecting some rows
on android, use chrome or firefox browser if you can - the player is broken using samsung 's built-in.
- go to phofurl (apologies for the music selection - the demo collection there isn 't mine - just mute if it bothers you).
click the "play" button at top under amber bar.
in lower right is fab for speed dial.
click one of options like 'skip album ' (if you click 'mini player ', icon in upper right will flip you back).
link: phofurl 1. click the shown button to open the dialog 2. you should see a non-fullscreen dialog although the `fullscreen` option is set to `true`.
live link: phofurl repo: phofurl - repo is private but access can be granted.
1. create a `stepper` with `alternativelabel` prop 2. add some steps in the `stepper`, like `<step><steplabel>step 1</steplabel></step>` 3. pass an material icon as `icon` prop of a `steplabel` link: 1. phofurl
i decided to move from phofcode to phofcode this evening and now i am failing to compile my site.
i have spent a few hours trying to resolve this but have not been successful and am now out of ideas.
the error i am seeing is: phofcode
check out button text; phofurl | tech | version | | material-ui v1.4.2 browser chrome
link: edit phofimage phofhyperlink phofcode the above code renders properly, but raises a typescript error: phofcode removing the brackets within the `action` prop also removes the error.
link: phofurl 1. delete last tab (the tab 2) state value 0 changed to 2;
phofurl i've done my best to explain what's wrong in this sample page.
it seems like when a panel is opened then a panel below it is open, it opens the new panel before closing the first panel, so when the first panel is closed, everything scrolls up by the hight of that was opened first -- leaving focus far below top of newly opened panel.
if opened first is below new being open, behavior works as expected.
1. create a react app using cra: `npx create-react-app app-name` 2. run the tests: `npm test` (it would work) 3. install the ** material-ui ** package: `npm install @material-ui/core` 4. run the tests: `npm test` (it fails now)
link: phofurl under "sorting & selecting" or phofurl 1. click to sort on the name column aka "dessert (100g serving)" (see screenshot) image phofimage 2. click on the second name "kitkat" to try to select that row 3. expected kitkat row to be selected.
got: kitkat changed "nougat" and 1 row is shown as selected, but not on the page.
(see screenshot) image phofimage link: phofurl
link: phofurl 1. open the codesandbox.io link using either the latest chrome or firefox version.
it should display the expected behavior.
2. open the codesandbox.io link using firefox 45. it should display current behavior/bug.
1. create a project using cra 2. change the `app.tsx` to the code snippet
- put a dialog component within a drawer component like: phofcode
link: phofurl 1. click on any button.
2. look at console or at site under state output.
3. notice event equals value and not event equals event and value equals value.
clone ` phofurl `git pull mui-bug && git checkout mui-bug` (i think, just the branch is mui-bug) run `make dev-build && make dev-up` (must have docker installed)
link: codesandbox example phofhyperlink this bug is consistently reproducible but the exact number of steps is unpredictable.
within the codesandbox.io example using chrome 1. click a scroll button 2. click a few tabs 3. click the other scroll button 4. click a few tabs 5. repeat until the error is thrown.
it usually only takes a few cycles.
the following is the full theme file we intended to use: phofcode
link: phofurl 1. create <checkbox/> with checked prop set to true 2. inspect html and you will find an <input> with no 'checked' prop.
can be reproduced in the docs, all the table examples have `padding="..."` attribute applied on the native `<table>` element.
link: phofurl 1. look at the code 2. second line should have the same background as the first
you can easily understand that by inputting something into a textfield here : phofurl and then try to click on another textfield within 2 seconds of your last keyboard input.
link: 1. code repository: ( phofurl ) left to right: image phofimage right to left: image phofimage notice the difference of the icons position for both cases.
link: phofurl 1. create a textfield and pass it the `disabled` prop.
2. wrap an input, inputlabel, and formhelpertext in a formcontrol, and pass it the `disabled` prop.
3. the textfield's label and helper text will not have the disabled style.
link: phofurl screen shot at 17 15 41 phofimage
link: phofurl for example: phofcode
1. create package.json with content above 2. you might have to use < phofurl to create a project 3. make sure node_modules directory does not exist 4. type command "yarn"
link: phofurl phofcode 1. paste the code snippet above in any react application or go to the codesandbox link.
2. focus the chip by way of your choice 3. keep the spacebar key pressed for a while 4. look at order of console logs
just render the select component with non native, and try using a onchange function and get the child argument
link: phofurl 1. the second icon in the "with clip-path" column should display, it does not.
2. click show in the "with clip-path" column and the second icon will now be toggleable 3. hide the first icon again and second icon once again is hidden no matter toggle
make any withstyles hoc and change the theme.
1. clone the ssr example from this repository.
2. create a stepper component and import into app component (and removed other components).
3. changed the webpack.config.js mode from `mode: process.env.node_env || 'development ',` to `mode: process.env.node_env || 'production ',` and ran it.
here's the code that i changed that fixed this issue for me: (slow live reloading) phofcode (quick live reloading) phofcode
link: 1. phofurl 2. phofurl
link: phofurl 1. select scroll=body 2. click or drag the scrollbar
link: 1. following the same steps described in the sample parcel example given here: phofurl
link: n/a 1. go to phofurl 2. click on the documentation link for v1.4.0 3. profit (?)
if i create a theme like the above, i get the following warnings/errors: phofcode
i'm using same example in demo, (with dark theme) phofurl i have changed suggestions data to have 430 items.
see: phofurl i changed the ok button of the dialog in the sample code to open a snackbar.
unfortunately, the snackbar is not shown.
if i move `<snackbar>` outside `<dialog>` it works.
however, in my case i have a component that i render within dialog and this component contains some stuff and snackbar.
i've made sure that z-index of dialog and snackbar are 1300 and 1400 respectively so it doesn't look like a z-index issue.
btw, it worked properly in one of older beta versions of mui, think it was 1.0.0-beta.31.
as you can see in screen capture below, snackbar is there dom but is not shown: image phofimage
phofcode first one works, second one does not.
1. phofurl 2. click open select dialog (with a dialog example) 3. first column age works 4. second column age does not work | tech | version | | material-ui v1.4.0 react v16.3.2 browser chrome
code to reproduce the issue: phofurl phofcode
link: phofurl 1. create a formcontrol wrapper component 2. create a simple inputlabel inside the formcontrol 3. add a select component with displayempty to * true * and a value of "" 4. add menuitem with value of "" 5. add 1 or more menuitem components with non-blank values
cannot reproduce inside codesandbox, but might know the fix for it.
will come back with a pull request.
phofurl this appears to be a problem only in chrome.
both safari and firefox work properly.
it probably has something to do with how chrome handles vertical align in flexbox (but i don 't know for sure).
the "solution" in the sandbox is to wrap all button contents in a div, but that 's kind of ugly.
link: material-ui textfield examples phofhyperlink 1. inspect the `<textarea>` of the multiline textfield example on chrome - it has `rowsmax` set to 4 and `line-height` is `1.1875em` (19px in this case) so the text area has a height of 76px 2. inspect the `<textarea>` of multline textfield example on firefox - all is same but it has a height of 91px
link: phofurl 1. use the "placeholder" select to select a value.
2. use the "required" select to select none.
3. observe that the label for the "placeholder" drops down overlapping with placeholder value.
link: phofurl 1. create a modal 2. place a menu 3. open a snackbar from the menu 4. the snackbar renders inside the first modal which has the same z-index as the modal of menu.
currently reproduced in the documentation: phofurl in scroll playground section
stepcontent working (embedded inside stepper): phofurl stepcontent broken (inside a custom `react.component`): phofurl 1. open the two links 2. compare the results.
only basic changes were made to show the problem.
link: phofurl 1. identify if the ba2 color is
link: phofurl 1. click the options button in the first row of the table.
2. click the button above table to see intended outcome.
codesandbox.io can't handle ruby deps, so no point in setting anything up there.
link: i'll fill this in when i have a second 1. create a switch element on the page (non-native because otherwise you can't use multi-select) 2. try to select an option from it using capybara 3. you can't, it's literally impossible, you can get as far as clicking the option in the popup, but then selenium throws an unknown error because it can't understand the dom anymore unknown error: option element is not in a select`
link: phofurl 1. just load above example and see warning in the console.
codesandbox example phofhyperlink click the button and see the tooltip remain visible
link: phofurl 1. click 1. button and then away => works, menu gets hidden 2. click 2. button and then away => does not, menu gets not hidden
1. hover over the button that the tooltip contains.
2. close the form containing the tooltip.
3. tooltip is still there.
| tech | version | | material-ui v1.4.0 react 16.3.0 browser chrome <img width="239" alt="tooltip" src=" phofurl
take a look at this simple example: phofurl to see the sandbox in your browser, open this url: phofurl on mobile safari, the button bar covers the red rectangle.
create a fork of this sandbox and take note of the new url in "browser" pane on right.
uncomment `height: '100% '` and save.
open that url in mobile safari.
you should be able to see red rectangle.
| tech | version | | material-ui v1.1.0 react 16.1.1 browser mobile safari device confirmed on iphone 6, 8 and x ios 11.4.1 and 10.?.
in this codesandbox example phofhyperlink , it 'll throw a runtime error when you try to open the snackbar.
here phofhyperlink is a similar (working) codesandbox example for a popover.
1. from route a, whose component a opens a modal, close the modal 2. immediately after closing the modal, route changes to route b and component b mounts.
3. the `<body>` `overflow` setting might be wiped out by the modal 's `componentwillunmount` because it does not occur in sequence (modal 's `componentwillunmount` followed by component b 's `componentdidmount`).
link: 1. sandbox phofhyperlink 2. demo phofhyperlink
snapshot `<textfield multiline {...props} />` via jest.
in sandbox: phofurl - hover over a form item to display tooltip - click item - move mouse away image phofimage
link: giphy link phofhyperlink if you watch the three images in the giphy, the image on the left has a slightly lesser height than other two images.
when i resize browser, height snaps to match others.
link: phofurl you can cause the first label (i.e.
"recents") to disappear by wrapping the `bottomnavigationaction` component in `<a>` tags (like how the other are).
update: after a bit of investigation, i 've discovered that the opacity is set to 0, which is what 's causing it to be invisible.
online demo: phofurl (demo code is based on v1.4.0 phofurl the only file changed is `index.js` )
link: phofurl 1. click the "click" button 2. click outside 3. click the "click" button again
1. create a form with an email and password field 2. use it 3. reload the screen
`npm i @material-ui/icons @material-ui/core` 2. try to use it.
wrap an iconbutton on a snackbar in a tooltip and apply the slide transition from the left to the snackbar.
(for bugs) here 's a code sample: phofurl phofhyperlink 1. using these packages: phofcode 2. in my component i attempted to load the deleteoutlined icon... phofcode receiving error: ` module not found: can 't resolve `
(for bugs) 1. select 2 items in the list.
the table should go grey a disabled for checkbox.
2. deselect click function is routed in through ternary operator to onclick.
you can deselect only until select is below 2 again.
3. if you click row where nothing is selected and you already have 2 selected in the table, it removes all selected.
(for bugs) 1. open example: phofurl 2. try to scroll horizontally outside the red area.
note: if you scroll the visible area and hover the 'handle' element, the tooltip will be placed correctly and body's scrollbar will disappear.
example: phofurl 1. click on an element with tooltip (e.g.
the "+" button) 2. minimize browser 3. maximize browser 4. tooltip will show u
phofurl use the code above.
make the window really small until the scroll bar appears.
remove the <form> and it works (because form content is rather small, there 's only a brief period where <dialogcontent> scrolls, then it hits 0 height and everything has to start scrolling.)
| tech | version | | material-ui v1.3.1 react v16.4.1 browser latest chrome
(for bugs) 1. create a react app with typescript (`npx create-react-app app 2. add `@material-ui/core` and `@material-ui/lab` as dependencies 3. try to use the `speeddialicon` component codesandbox example: phofurl this does not give the exact same error, but it definitely points towards the same issue.
(for bugs) phofurl (inside fullscreen dialog) phofurl (inside `<div>` in page layout)
(for bugs) 1. use swipeabledrawer in a project 2. open inspector console 3. once it 's open, drag it slowly, in either direction 4. you will notice a js error for every drag movement
(for bugs) phofurl 1. set anchororigin to {vertical: "top",horizontal: "right"} (displays correctly) 2. recompile 3. change it to {vertical: "bottom", horizontal: "right"} (displays incorrectly)
(for bugs) 1. install material-ui with react 16.4.1
(for bugs) you can see this in the following codesandbox, by hovering over the red "tile" and watching the tooltip "pop" in at the top before settling at top-left, phofurl (see `src/pages/index.js` for implementation) if you uncomment `margin: 14px !important` on line 17, you 'll see that issue is fixed as tooltip will now have a constant size regardless of placement.
this will now mean, however, that tooltip cannot push up against edge of viewport, and will be (at a minimum) 14px from edge (but perhaps this can be countered by a negative position, e.g.
(for bugs) phofurl 1. hover a few pixels __above__ the fab 2. observe that the actions show up since the "empty" container still had its full-height
(for bugs) just have a clean install with a "vanilla" setup (without cra), with a basic webpac.config.js, like this (using webpack 4): phofcode run `webpack --mode=production` **sorry for a missing codesandbox example, its because this is related with build proccess and webpack.config.js setup file (this 2 items are impossible to reproduce on codesandbox)**
(for bugs) 1. clone the source code 2. move to the examples ssr folder 3. run `npm install` 4. run `node_env=production npm start
(for bugs) code: phofurl demo: phofurl (just press enter, try to tab around)
here is a sandbox that shows the bug : phofurl
(for bugs) 1. create a react page that takes some time to render (due to lof of components) 2. set initial state in the constructor ``this.state.rendering = true`` 3. set state in ``componentdidmount`` or in ``componentdidupdate`` to ``this.state.rendering = false`` 4. display conditionally the progress in the ``render()`` function base on ``this.state.rendering``
(for bugs) 1. go to phofurl 2. click on the text of one of the input adornments
(for bugs) 1. use a tooltip component 2. get a secondary retina screen 3. hover over element on secondary screen 4. see text as blurry (you might need to adjust the position slightly) here is a minimal reproduction, in which the blurriness is less pronounced than in my production use-case, but still noticeable: phofurl this is all probably related to this problem: phofurl though i am unsure why this problem happens, since we are only translating in integer increments.
there is some chance this happens because of the scale animation or something in that space, though i haven 't been able to fix it.
(for bugs) see this example: phofurl
(for bugs) 1. use dialog component in your app 2. try to show a snackbar above the dialog.
(for bugs) see codesandbox: phofurl forked from the one in docs: phofurl
(for bugs) the following works: phofcode the following does not (but should): phofcode phofurl (based on phofurl 1. pass an html element as a `muipopover` prop to `<muithemeprovider />` 2. render a `<popover />` 3. notice the app crashes.
(for bugs) phofurl 1. copy image-only grid list code from phofurl 2. extract gridlisttile into a component 3. notice image is now full width height instead (no width height calculation performed)
(for bugs) my `getpagecontext.js`: phofcode
(for bugs) unfortunatelly i cannot provide much of source, cause it 's a very big application, but i can show how my initial ** app.js ** is and what is the end result, hopefully that 's enough.
** app.js ** phofcode index.html phofcode and here is the final result: phofurl
(for bugs) the following should not produce a typescript error: phofcode the error says phofcode even when typecasting `link` to `any`, typescript complains: phofcode phofcode
(for bugs) edit create-react-app phofimage phofhyperlink 1. add `jss`, `react-jss`, `jss-template`, and `styled-jss` to your project phofcode 2. create a `jssprovider` component and configure your jss as suggested by the docs to use template literals.
phofcode 3. implement a button with a hover effect and add it to your component tree at desired location.
phofcode 4. submit an issue to material-ui.
(for bugs) just look at the example at codesandbox: phofurl you will see, that first input with `native` prop works great it lose focus, and we can manipulate with focus and apply focus to another element (e.g.
(for bugs) 1. phofurl 2. make the window wider than 264 * 2 and see that they are not fullwidth
(for bugs) - you should have a touch device availlable - behaviour could be figured out at: phofurl or phofurl (you will need a virtual midi driver set up) - just place more than one slider next to each other
(for bugs) code sandbox link phofhyperlink 1. click in the checkbox
(for bugs) 1. go to this codesandbox phofhyperlink 2. wait for full module transpiling, and tests to run 3. check the console tab: it displays the `debug()` view of the `typography` node.
you can clearly see it has a single text child with "material-ui".
4. check the test output: wrapper 's `text()` result is a fixed, context-free `<withstyles(typography) />`, instead of nodes actual text contents.
(for bugs) 1. go to phofurl 2. hover in the middle of the "button blocked by tooltip" 3. notice that the button isn 't clickable in the middle 4. hover around sides of button -- tooltip doesn 't block it on sides
(for bugs) 1. create a dialog with tall content 2.
(for bugs) this is the link phofhyperlink 1. if "open modal" button pressed, error "cannot read property of null" appear.
(for bugs) honestly, this one is tricky.
i 'm going to cross-reference the ts-loader and typescript tickets i 've made here, but i 'm completely without a clue as to what is causing the issue.
i have no bad imports in my source code and i have been trying to divide this out.
but even still -- i have working material ui imports in my dummy examples, so this is proving difficult to reproduce.
the only clue i have is that when dump output phofhyperlink from `typescript.js` in the section that failing, it dies when trying import the `package.json` for material ui.
here 's a sample of output, first line just debug output forced into `typescript.js` phofcode
(for bugs) the codesandbox.io template : phofurl 1. click on visibility icon 2. observe that password placeholder moves down 3. now click on visibilityoff icon 4. observe that password placeholder moves up
(for bugs) visit the website 1.
(for bugs) 1. create a new react app 2. add material-ui/core v1.2.1 2. add a tabs component to the app 3. run the app in ie11 or 1. visit phofurl in ie11
(for bugs) go to phofurl and just play with item selection, see that only `color` is applied, not `backgroundcolor` and observe a weird ripple effect.
(for bugs) i cannot simulate it in the sandbox, unfortunately, thus no reproducible demo :(
(for bugs) see test results in phofurl 1. in `withroot` i added a custom theme variable `success.main`: phofcode 2. created sub-component `component` which uses the theme variable: phofcode 3. although app runs fine in browser due to `withroot` at the top level, if you run the tests, they barf because `theme.success` is undefined phofcode 4. how to inject custom theme easily?
(for bugs) phofurl (press the buttons in the left stepper, the ripple-effect protrudes into the content)
(for bugs) this is a live example of rtl layout that present the problem phofhyperlink .
this is the live demo of rtl from the docs, i've just added a simple list in it.
you can see that the `textfield` and `input` are aligned to right as expected but `list` is not.
1. follow guide of setting up rtl 2. add a `list` component edit material demo phofimage phofhyperlink
(for bugs) 1. go to phofurl 2. insert any username/password and click login 3. notification is triggered and gui is messed up
(for bugs) here is an example in the codesandbox for mu phofhyperlink 1. have an open dialog 2. put a ` <circularprogress size={18}/>` in the `<dialogactions/>` elemnt 3. see the results.
(for bugs) phofurl 1. add `<select>` input with `required` attribute
(for bugs) 1. launch nvda phofurl 2. open the select component sandbox phofurl 3. attempt to interact with the select using the keyboard, you cannot change the selection or select any element.
the screen reader does not read options and does not announce that select is a list.
(for bugs) i 'd be happy to provide steps to reproduce, not sure that 's necessary here since there 's a better pattern for the example that is fairly easy to implement.
the problem can be found in the `enhancedtable` constructor: phofcode i think the example would be simpler and more correct if the sorted data was computed when rendering.
i will be providing a pr with a potential solution
(for bugs) this was done in the following repo: phofurl 1. follow directions from readme in repository to see error in console ** or ** navigate to src/home/home.tsx to view intellisense errors.
(for bugs) 1. go to phofurl with firefox 2. if you see the above console errors, the hamburger will not work
(for bugs) just try to import it from `@material-ui/core`
(for bugs) 1. open selectfield 2. try to navigate across the items by keyboard (it works) 3. try to select by keybord (it doesn't work)
(for bugs) phofurl the codesandbox is the same code as on the speed dial demo page except that i added an `alert()` to `onblur` and `onclick` of the action.
(for bugs) i cannot find a way to setup live example since it is ssr app.
1. curl phofurl | tar -xz --strip=2 2. cd nextjs 3. yarn 4. add `{ dangerouslyuseglobalcss: true }` to the function `createpagecontext()` in src/getpagecontext file phofcode 5. yarn dev 6. goto localhost:3000
(for bugs) you can see code here phofurl i simply took the text field dialog example and added an array to map over.
i would expect to see multiple text fields but i don't.
same result with divs and such in my personal project.
(for bugs) - navigate to material-ui-next.com - attempt to use hamburger menu
(for bugs) 1. phofurl 2. open the menu 3. open dialog 4. select first input with cursor 5. press tab
(for bugs) provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.
include code to reproduce, if relevant (which it most likely is).
this codesandbox.io template _may_ be a good starting point: phofurl if you do not take time to provide a codesandbox.io reproduction, should the community take time help you?
(for bugs) phofurl 1. set the `line-height` on the container surrounding a `circularprogress` to greater than 1, and the `size` on `circularprogress` to less than `12 * lineheight`
(for bugs) bug can be replicated here: phofurl by clicking on 'here' in helper text, you can see focus getting shifted to input element
(for bugs) phofurl open codesandbox console...
(for bugs) there 's a load of additional code in the project i 'm using this with so i have just stripped it down into as simple of a repro as possible.
i can put together a github repo if need be.
on the client side there is the following code for dealing with react/material-ui: phofcode if i were to comment out either the renderpieapp or renderchartapp calls, issue would go away.
these are react apps that are being produced between client and server: phofcode phofcode initially i had componentdidmount calls of both apps in a shared higher order component, though for purposes of keeping this example to as few snippets as possible i 've put them into each app.
in either case issue would still same.
note that ssrid is just style id used to get correct style tag to remove and can be one following for this example case: 1. tracks - 2. mode - "jss-server-side-mode" on server side relevant code is following: firstly here is code that handles server side rendering react apps: phofcode and lastly, this <sytles /> app component that used on server for rendering: after server side rendering apps done it sent client like so: notice use separate style tags each rendered apps css.
have also tried just dumping all styles into one tag like your docs example - "jss-server-side" - but didn 't work either.
thought might be misconfiguration problem, so i 've tried following combinations: 1. creating single sheets registry stores all css, followed by single style tag at html which would contain all styling all apps.
2. creating single theme instance before app are rendered, opposed creating new mui themes each app rendered.
this means renderapp function above on would be like this:
(for bugs) check this sandbox : phofurl
(for bugs) 1. see zl5xopv1lp phofhyperlink 2. try dragging the know or click at any distance on the slider
(for bugs) 1. run this phofhyperlink code.
(for bugs) 1. create a button with an image inside of it 2. click on the button 3. before releasing the mouse click and drag (chrome will display the dragged image icon) 4. release the mouse, ripple effect remains.
5. repeat 2-4 to make effect deeper.
(for bugs) 1. create dialog component 2. attempt to control paper size using 'paperwidthmd ' 3. tried using the prop here: phofurl and while i don 't get a warning it does seem like the prop is simply ignored.
(for bugs) 1. fill in the textfield until the cursor is in the cursor `line >= rows && line < rowsmax`.
2. switch to a ime, in this example the chinese pinyin input.
3. type some long word until textfield increases.
4. extra words (the original key strike of ime) inserted before cursor.
(for bugs) 1. open phofurl in ie11 2. try to click on slider to change.
(for bugs) follow instructions on readme for
(for bugs) 1. add the snackbar component with the next anchororigin properties: `<snackbar anchororigin={{ vertical: 'top ', horizontal: 'right ' }} />` 2. load the page where a snackbar component is mounted on an ipad screen in portrait mode 3. change to landscape mode 4. you should now see on the top right corner shadow of "hidden" snackbar.
(for bugs) 1. here is a link phofurl 2. if you click the second item on the drawer component, you 'll get to a dialog with a input field that doesn 't respond.
screen shot at 4 39 34 pm phofimage 3. here is the code render() { const { classes } = this.props; return ( <div> <list> <listitem button <listitemtext primary="update neighborhoods" /> </listitem> <divider /> </list> <dialog open={this.state.open} <dialogtitle <dialogcontent> <grid container> <grid xs={12} justify={ 'center '}> <div <integrationdownshift /> </div> </grid> </grid> </dialogcontent> <dialogactions> <button </dialogactions> </dialog> </div> ); }
(for bugs) 1. navigate to phofurl 2. inspect the drop-down and note that it has both foo and bar classes.
(for bugs) 1. create a nested withstyles rule 2. upgrade "@types/react" to 16.3.14 3. compile in typescript
(for bugs) 1. go to phofurl 2. press the popover button note: this `codesandbox` snippet is the official popup demo with deferent `anchororigin` values | tech | version | | material-ui v1.1.0 react v16.4.0
(for bugs) sandbox example: phofurl phofhyperlink
(for bugs) using code from phofurl
(for bugs) 1. create new gatsby starter 2. install material-ui 3. call createportal function by trying to make a drawer appear (open a drawer)
(for bugs) to reproduce the bug, simply use the code from the documentation for simple dialog phofurl (i didn't make a codesandbox as this is the exact same code as in demo, but can provide if necessary!)
(for bugs) - browse on firefox - go to ` phofurl - click headers in sorting demo -> no sorting happens
(for bugs) phofurl 1. use bottomnavigationaction inside bottomnavigation 2. provide showlabel attribute true 3. check chrome console 4. there will be warning
(for bugs) 1. add select component 2. add menu items as children of select component 3. try to open select field
(for bugs) go to themes page phofhyperlink go under api click "sources" link
(for bugs) 1. go to phofurl 2. copy the code for the multiple-select to a material-ui react project.
3. add to the second select component.
"npm start" in the command line.
(can 't demonstrate it on codesandebox.io due as i descirbed phofurl )
(for bugs) put `<snackbar contentprops={{ 'aria-describedby': 'notification-message' }} />` into render function.
(for bugs) in this example i have two icons inside of an `<h1>` with `fontsize: 4rem`, and also inside of another `<h1>` with `fontsize: 3rem`.
the first icon is default and fails to scale to the parent font size.
the second icon has css overrides to produce the expected behavior.
(for bugs) 1. write `import tablehead from to app.js.
2. run `jscodeshift -t app.js`
(for bugs) 1. click on 'edit the source code on codesandbox ' 2. error compiling the code
(for bugs) phofurl 1. render tooltip 2. implement styled components 3. override a specific class with the classes attribute 4. apply styling to the specified class
(for bugs) phofurl 1. create a router with at least one route.
2. point it to a component in another file (i didn 't get the problem before i split it into another file).
3. have a button with component={link} 4. you will get an error from router when you go to that route.
note: if you look in my code sample, i have 2 additional commented lines in test.js.
point the test browser to /test first to get the error.
then remove the first line and try second one, which uses link.
try last line - it works.
edit: whoops, "working" line only works in that it compiles but you can 't actually click it.
(for bugs) phofurl 1. navigate to login page in ie11 on a desktop with a mouse attached 2. click on the user name or password labels sitting on top of the inputs 3. notice that the label moves to above the input but does not focus input 4. click a second time to focus input
(for bugs) you can check on this phofhyperlink codesandbox.
(for bugs) example link on codesandbox phofhyperlink 1. create a `textfield` 2. pass properties to `inputprops` 3. inspect the rendered native `input` element
(for bugs) 1. go: phofurl 2. find that id of a dialog inside ** /src/pages/index ** is 'dialog ' 3. open chrome dev tools.
4. click on super secret password button.
5. navigate to the html element of the dialog that appeared on the screen.
6. see that there is no 'id ' property.
(for bugs) i am having an existing app where i have used the material 0x component and now i am trying to migrate to the v1 component.
i have successfully installed the version v1.
i am trying to use the selectfield component from 0x and new select component from 1x like this.
**import selectfield from import { select as v1select} from but its giving me lot off errors.
is it possible to use both version components together?
(for bugs) phofurl 1. click the toggle button 2. the thumbs up icon appears 3. click the toggle button again 4. error (expected behavior: the thumbs up icon disappears)
(for bugs) 1. open modal
(for bugs) * `/src/app.js` phofcode * `/src/browser/index.js` phofcode * `/src/browser/index.js` phofcode
(for bugs) use both components in the same application.
jss1_1 phofimage jss1_2 phofimage jss1_3 phofimage | tech | version | | material-ui 1.0.0-rc.0 react 16.3.2 browser chrome version etc
(for bugs) 1. open up the sandbox link above, and then open the console.
2. if you go and select an option from the table, you will see its contents logged in the console, when you go to select a second one you will be shown undefined.
(for bugs) 1. open material-ui's 'tables' demo ( phofurl on chrome; 2. open developer tools (f12); 3. toggle device toolbar to simulate mobile device (on dev tools screen); 4. drag screen to the left; ** example: ** mui-tt-2 phofimage **for comparison:** same dragging movement on another screen without tables and tooltips: mui-tt-4 phofimage
(for bugs) sample codes here phofurl and this also happened on offical site 1. typing 2 spaces at the end of the input field, after the value `hello world`.
is appending to the end of input field value.
the gist of it is: phofcode this sandbox reproduces the issue for me: phofurl
(for bugs) phofurl | tech | version | | material-ui v0.20.0 react 16.0.0 browser chrome 66
(for bugs) i realize i might be doing something stupid, as i 'm a material n00b and the samples don 't really cover my case.
see the codebox or inline code below.
the text inside the grid item does not wrap, but the other block of text wraps as expected.
adding wrap="wrap" had no effect, as did adding typography with implicit or explicit wrapping.
edit new phofimage phofhyperlink phofcode
(for bugs) 1. visit phofurl with safari or firefox 2. see date & time pickers demo 3. not works
(for bugs) 1. go to phofurl on an ios device 2. find the 'multiline and floatinglabel' example 3. enter enough text into the field to move the input out of the field of view
(for bugs) here is a link to a codesandbox that reproduce the problem: phofurl a timer in componentdidmount adds 20 to progress state every 2 seconds.
as you can see, progress jump from previous value to the new one instantly.
**is this the normal behavior?
or should it animates smoothly from the previous value to new one?
(for bugs) typescript react starter app that uses material-ui beta.46.
(for bugs) here is the example: phofurl and here is the video about how can it be reproduced.
peek 22-46 phofimage 1. use textfield with label and type="number" and empty value 2. input "--1" manually into textfield 3. unfocus it
(for bugs) reproducible within a form dialog in the current docs phofhyperlink .
i forked the example and added `@babel/runtime` on codesandbox phofhyperlink .
1. click "open form dialog" 2. unfocus the textfield by clicking outside 3. focus the textfield 4. observe scrollbar flicker | tech | version | | material-ui next react 16.3.2 browser chrome 66
(for bugs) phofurl 1. focus a textfield
(for bugs) 1. download the material ui + nextjs example project.
2. create a new page called test with a material ui component that uses global styles.
3. add a link anywhere in the first page of sample project using phofcode 4. notice on the first page of existing sample primary color is purple.
5. click the link and notice loaded page/component is now default blue.
(for bugs) 1. add the object `props: {...}` when creating a theme using `createmuitheme` function.
(for bugs) 1. go to phofurl on an ios device or simulator.
i used ios 11.3 on an iphone 6.
2. click open simple dialog.
3. press on the background.
it will highlight in grey.
(for bugs) 1. hover over main button.
2. click any action button.
3. scroll down to main button.
4. click main button once, you need to click 2nd time to make it work.
(for bugs) phofurl phofcode before ** handlechange ** image phofimage after ** handlechange ** image phofimage
in the demo below, try opening the first menu by clicking on the first button, then the second menu by clicking on second button.
notice that an extra click is needed to dismiss first menu then another one to show second menu.
(for bugs) 1. use the following outside of default class: const muitheme = getmuitheme({ autocomplete: { "desired property"}, }); 2. then place the following inside your render/return: <muithemeprovider muitheme={muitheme}> <autocomplete/> </muithemeprovider>
(for bugs) phofcode ....... phofcode ..... phofcode
(for bugs) class controls extends component { state = { checkeda: true, }; handlechange = name => (event) => { this.setstate({ [name]: event.target.checked }); }; render() { return ( <div> <switch value="checkeda" /> </div> ); } }
(for bugs) 1. go to phofurl 2. open the devtools of your browser (to see the console, because this example is using console.log) 3. click the "click here" button.
you notice that only the `button` handler is triggered, thanks to `stoppropagation()`.
yet, wave effect is applied to `listitem`.
(for bugs) codesandbox example phofimage phofhyperlink phofcode `backgroundcolor` gets applied to the expanded summary area, but the other listed css attributes get overridden.
(for bugs) 1. phofurl 1. find the toolbar (top right) 1. click light/dark lightbulb to change to dark theme
(for bugs) here is the live example on codesandbox.io phofhyperlink .
1. click the select component.
(notice the tooltip stays on top of the menuitems) 2. select any of menuitems.
(notice how tooltip flickers as you move your mouse) 3. click it (the menuitems disappear but tooltip is still displayed as if there was a mouse hovering select)
(for bugs) just add the button component.
which is already included at the codesandbox template phofhyperlink by default
(for bugs) this is a sandbox based on my on code: phofurl obs.
: the "demo" is the original file from the documentation, the "demo2" is where the form is.
(for bugs) cannot reproduce error in codesandbox, only locally.
here is a screenshot of the code that causes the error: image phofimage here is a manually edited `withstyles.d.ts`, the error is gone: image phofimage
(for bugs) 1. use a text field component 2. give style attribute and give textalign to center or right like this - phofurl
(for bugs) phofurl 1. set speeddial to be hidden 2. toggle speeddial child on/off and try to interact with the button underneath it.
(for bugs) go to phofurl in chrome and open up developer tools.
have a look at network tab.
(for bugs) phofurl the problem seem to be related to maxrows and rows properties.
ass soon as the only maxrows is defined and rows is missing or less than maxrows, the issue occurs.
(for bugs) go to phofurl in chrome on ubuntu and click around.
(for bugs) several ways to reproduce, but this is probably the easiest using a fontawesome icon.
1. create an iconbutton: phofcode notice that the icon stays at color and doesn 't change on hover.
2. remove 'color ' phofcode now the icon changes from the default color to 'iconhovercolor '.
(for bugs) 1. phofurl | tech | version | | material-ui 1.0.0-beta.32, latest react 16.2.0 browser chrome latest
(for bugs) 1. open a dialog including a text field 2. fill the text field with whitespaces 3. close the dialog immediately codesandbox: phofurl phofhyperlink live demo: phofurl phofhyperlink
(for bugs) 1. try to compile the sample code phofcode
(for bugs) 1. go to phofurl 2. click the get started button.
(for bugs) 1. open phofurl with safari on an ios device.
2. touch on an iconmenu button.
3. try to dismiss it by touching outside the menu.
(for bugs) open the expansion panel phofhyperlink page in chrome and ie11 and the difference should be apparent.
i would provide a codesandbox.io example except the 'browser' on there does not display the issue.
we have found that when using a large number of expansion panels, we see extra line thickness every third panel.
(for bugs) 1. click button that opens dialog/popup/etc.. 2. hit esc to close it.
(for bugs) code: phofurl example: phofurl
(for bugs) 1. create a form with the material-ui datepicker with name = birthday and hinttext = birthday 2. save the form 3. make sure you have birthday as an autofill option in safari 4. click on birthday again, app should break
(for bugs) 1. open chrome 2. open task manager and observe low cpu usage 3. go to phofurl 4. observe how the task manager shows the demo tab using much cpu and gpu
(for bugs) 1. use `cssbaseline` in your project and try to run some sort of ssr build
(for bugs) 1. markdown file # ffplay research notes
(for bugs) 1. edit create-react-app phofimage phofhyperlink or download the source that cloned from codesandbox: create-react-app.zip phofhyperlink
(for bugs) 1. roughly follow the server rendering instructions, but not 100% exactly.
2. experience a multitude of issues.
3. try everything to fix it.
4. eventually cave and put the jssprovider also client-side.
5. find it worked in one situation and not another.
6. fix the problem again by using but then find out changing the route breaks it again.
7. post a call for help on github.
(for bugs) here 's a code sample phofcode
(for bugs) `import attachmoney from
(for bugs) phofurl 1. click textfield "foo" 2. click the dropback of dialog 3. textfield "foo" still * shrinks *
(for bugs) opening any modals or select dropdowns trigger the issue.
i've checked and its even happening on the material-ui-next site.
(for bugs) 1. using phofurl from the documentation, click the _open simple dialog_ button 2. when the dialog appears, press escape to close the dialog 3. the ripple effect is displayed in button until something else is clicked the alert dialog demo does not seem to have same behavior: phofurl
(for bugs) 1. render a select component with a variable width (e.g.
within a fullwidth formcontrol) 2. resize the window until the input width changes 3. toggle the dropdown 4. the menu width will be that of the input before step 2 sandbox phofhyperlink
(for bugs) edit material demo phofimage phofhyperlink 1. open the link above 2. check the console
(for bugs) 1. go to phofurl 2. click cards on the left menu 3.
(for bugs) 1. go to phofurl 2. change the minutes
(for bugs) 1.pick an option from `select` 2.clisk outside from `select` container 3.notice, `select` stayed in focus state
(for bugs) codesandbox: phofurl 1. you can see that the first 3 steps are wrapped in a custom container component and they are not displaying the way it should be (number of step, active or any other prop) 2. the 4th step is used as a direct child of the stepper and it's working as intended.
(for bugs) <drawer open={show} < 768 ?
'bottom ' : 'right '} variant={ window.innerwidth < 768 ?
'temporary ' : 'persistent ' } classes={{ paper: classes.paper, docked: classes.docked }} > /// content </drawer> if i remove this component the scrollbar is gone or if i change the anchor to bottom the scrollbar is gone too.
i 've tried change the variant to temporary and permanent scrollbar is gone.
it only show up on "persistent" variant.
(for bugs) `testclass.tsx` <pre> const decorate = withstyles(({ palette, spacing, mixins, typography, breakpoints }) => ({ ... })); interface testclassprops { ... } class testclass extends { render() { return (...); } } /** * note that this should result in compilation failure, * because `withstyles<...>` is not present as part of the `props` in this class.
*/ export default decorate(testclass); </pre>
(for bugs) phofurl 1. open sandbox output in a new window 2. toggle device toolbar in devtools 3. open drawer
(for bugs) phofurl add a select input in a vertical stepper.
(for bugs) this can be observed on the official documentation page: phofurl
(for bugs) 1. open link phofurl 2. click on npm package button 3.
(for bugs) phofurl 1. click on input field 2. notice how tab bar appears above keyboard taking up valuable real estate :( phofimage
(for bugs) using firefox (i used v59), go to scrollable tabs phofhyperlink and click the arrow on the right.
nested menus section in docs phofurl
(for bugs) phofurl 1. clone the repo 2. install dependencies 3. run tests from the list of 3 (currently found) problematic dependencies removing one makes the tests watcher work properly: * node-sass-chokidar: 1.2.2 * material-ui: 0.20.0 (same behavior with the @next) * enzyme: 3.3.0
(for bugs) 1. nest children in `expansionpaneldetails` 2. error in console 3. both examples work, but both have ugly side effects.
(for bugs) phofurl phofcode 1. open the menu 2. click anywhere outside the menu: nothing happens 3. click on one of the menu items: only then the menu is closed.
(for bugs) 1. create a new react app using `create-react-app`, or create a new, empty react project.
3. copy and paste the paper example, found here phofhyperlink .
an example can be found at this codesandbox phofhyperlink i made.
(for bugs) i found that having the `<cssbaseline />` makes the background color possible.
phofurl but without it doesn 't work.
phofurl i must have missed this in the documentation to be a mandatory part of the setup.
if so, then please point me to it :)
(for bugs) 1. go to phofurl 2. click lightbulb in toolbar to switch to dark theme 3. mouse over or click the speeddial button in either of the demos.
4. notice that speeddialaction icons are difficult to see.
(for bugs) 1. npx create-react-app myapp 2. cd myapp 3. npm install material-ui@next 4. npm start
(for bugs) 1. open firefox 2. go to your site 3. click on ** style ** 4. see whats happening
(for bugs) the code to reproduce the error is below: phofcode the warning displayed: phofcode log of the classes object: phofcode
(for bugs) simply use `react-select` in a typescript project
(for bugs) see codesandbox, the top row of boxes uses no material-ui components, the bottom row uses only two different icons.
5. also in drawer, if change <fullwidthtabs /> to <simpletabs problem goes away and tabs function normally, illustrating that this is clearly an issue between your drawer and react-swipeable-views, but only when there is a table involved, haha.
hopefully this is thourough enough to explain my issue, i tried playing around with it in sandbox but was not able get that specific combo work.
in my app for now i just settle for non-swipeable non-animated tabs, it would really be nice be able have functionality.
(for bugs) 1. create a button (can be any element) 2. wrap it in a tooltip 3. set the css of the buttons parent to: - overflow: auto - overflow-y: hidden 4. the tooltip should now overlap with the button 5. hover over the area where button intersects with tooltip 6. you should be able to observe flickering sandbox phofhyperlink
(for bugs) 1. going to the component demo on the website phofhyperlink 2. add properties `{maxheight: 300, overflowy: 'scroll'}` to root 3. change listitem count to 10 4. start scrolling
(for bugs) this is the reproduce error phofurl 1. add a entry at todolist 2. when the entry is checked the another icon shows in disorder
(for bugs) apply styling via 'classes' overrides option in the tablepagination component api.
or try to apply styling via 'classes' override in 'selectprops'.
(for bugs) edit create-react-app phofimage phofhyperlink (see "should render" test) 1. create a react project with create-react-app 2. make a component 3. make a test for the component with a shallowrender using enzyme and jest.
(for bugs) 1. go to the component demo on the website phofhyperlink on mobile (or simulating with chrome dev tools) 2. tap the speed dial, tap elsewhere, then on the speed dial again please note that i've only copied code from example and tried it in my own app where i noticed bug.
i then proceeded to test if bug was present on demo page, which it is.
that means problem should be reproducible by going to website or making a local clone of this repository and running docs as described in contributing.md phofhyperlink
(for bugs) im not quite sure how to reproduce typing errors using codesandbox.
please let me know if a reproduction repo is needed.
if so i will quickly create a repo for that.
1. use select component in a typescript project(in my case typescript@2.7.2) 2. pass in (event, two) => { const value = event.target.value; value.join(','); console.log(two); } due to the usage of | htmlinputelement>` for the onchange prop the type and behavior is not identical.
(for bugs) 1. unable to replicate in sandbox.
i can 't really say why given that the node_module contents are hidden from me.
(for bugs) class app extends component { render() { var mytabs = ( <tabs> <tab label="item 1" /> <tab label="item 2" /> </tabs> ); return ( <div> <appbar title="my app" /> repos will turn up here similar to github but before this design checkout how to integrate with gthub api </div> ); } }
(for bugs) 1. select date 2. change year manually 3. try to input more than 4 digits
(for bugs) 1. open `formhelpertext.d.ts` 2. look for `component` 3. none found
(for bugs) phofurl 1. copy the example from the demo and attempt to use it i am using this with redux actions, the original `material-ui` worked with this setup so i would assume this `next` version will as well
(for bugs) demo: phofurl - switching tabs (only the first switch is no animation) - refresh page to reproduce the problem
(for bugs) example here: phofurl phofhyperlink ** note ** `multiline={true}` has already been added to the `<textfield>`
(for bugs) 1. download the zip of the repository 2. extract the folder 3. run npm install in the extracted folder 4. run npm start
(for bugs) phofurl 1. create a theme with `letterspacing: '0.04em '` for 'caption ' 2. create a textfield with `inputlabelprops={{ shrink = true }}` 3. see how the theme defined for 'caption ' is not applied to the textfield label
(for bugs) apply styling via 'classes' overrides option in the tablepagination component api.
(for bugs) steps to reproduce: phofurl just use multiple select with chip here
(for bugs) under `textfield.d.ts`, `textfieldprops` extends ` textfieldclasskey, 'onchange' | 'defaultvalue'>`, in which `formcontrolprops` extends which obviously is why `onkeydown` resolves to
(for bugs) the issue is present on the selects demo page.
try to open a multiselect and scroll the items.
material ui: 1.0.0-beta.36 chrome 65
(for bugs) **codesandbox link**: phofurl **steps to reproduce:** 1. navigate to phofurl 2. use the `tab` key to navigate to the delete icon 3. once the delete icon has focus, press `enter` and/or `space` try delete the `chip`
(for bugs) 1. go to this url- phofurl 2. out of the 3 icons (add, edit and delete), hover over the delete icon.
3. the hover state of edit icon gets triggered, which is not correct
(for bugs) 1. install the latest package version of the material-ui-next from npm.
2. check a component classkeys i.e.
linearprogress or tab 3. notice that the classes are not the same with list of classes in components api and github files.
4. compiling old version of code using previous classkeys do not return error.
5. running application shows warnings saying classes defined are not existing.
(for bugs) check out the console.logs for the sandbox below.
they kick off regardless of the expansionpanel being closed.
(for bugs) 1. go to 7ym5xyvq16 phofhyperlink 2. resize the app window
(for bugs) phofcode `warning: unsupported style property @media (min-width:960px).
did you mean @media (minwidth:960px)?` | tech | version | | material-ui .35 react 16 browser chrome etc <img width="1485" alt="screen shot at 23 23 52" src=" phofurl
codesandbox.io link phofhyperlink 1. visit link 2. select any item from any select field 3. press tab 4. press the space-bar or return-key 5. see that no selection can be made
(for bugs) the official controlled accordion example, if you click on an open panel if should close but it stays open.
(for bugs) 1. go on phofurl 2. start typing some text: inkbar should become green 3. exceed the limit: inkbar is still green
(for bugs) i've made a code example here: phofurl
(for bugs) 1. override muibutton sizesmall sizelarge key using createmuitheme 2. get ts error of type mismatch or something like that.
(for bugs) steps to reproduce: 1. go here phofurl 2. scroll down to "full-screen dialogs" (address bar should be hidden by now) 3. scroll up a little bit, so the chrome address bar shows 4. now open the dialog 5. note: chrome address bar is showing 6. click and hold drag the dialog content up, notice that the address bar goes and you can see content under dialog 7. release drag, dialog resizes to full screen again
(for bugs) (this if forked from materialui auto complete example) 1. open phofurl 2. enter letter _a_ in the search at the top
(for bugs) 1. create an `index.html` and paste the html i provided.
2. open `index.html` in browser 3. open your browser 's dev console.
in chrome, for example, press f12 or, you could use this phofhyperlink codesandbox
(for bugs) check `maxlength` working: phofurl
(for bugs) simply create a textfield with the phofcode property set to phofcode .
here an example sandbox: phofurl
render any form element with `required={ true }` in a build system using uglifyjs.
for reference, the root of the problem is that the unicode thin space character ` u2009` is rendered as ``.
the issue lies in uglifyjs, not in mui, but i wanted this out there for future googlers, as this is the only place in our entire codebase that a unicode character is used and it initially lead me to believe that material-ui was root of problem.
(for bugs) 1. create a form 2. add select field with name 3. submit form and serialize json 4. there will be no field for the select value
(for bugs) 1. try changing 'previous page',}} in sorting & selecting sample table to 'first page',}} .
(for bugs) i can 't seem to reproduce this in codesandbox, but the link is below, and the component hierarchy is the same as i 'm using.
namely, i have a snackbar conditionally rendered in a parent component, and triggered from within a modal living in a child component.
(for bugs) i use the muithemeprovider like this `<muithemeprovider theme={createmuitheme( { palette: { primary: mainpalette, secondary: accentpalette, error: errorpalette, type: "light" }, spacing: { unit: 4 } } )}> `
(for bugs) this sandbox demonstrates how far i'm able to go for indicator customization.
i've modified the height and margins of the indicator using class overrides, but i'm not able to access or modify the width because it's a function of the selected tab size.
notice overhang on right side of selection.
(for bugs) **by default:** screenshot_3 phofimage ** component='button' ** (better to set button is true and component automaticaly be a button) screenshot_4 phofimage phofurl 1. props `component` by default, it's a `li` when `button` is `false` and a `<button>` when `button` is `true`.
(for bugs) 1. copy and paste the example code for the table component from the documentation ( docs phofhyperlink ) 2. use it in another component to render it.
see: example phofhyperlink for an example.
(for bugs) this happening only with iphone (safari) 1.type something in auto complete text box.
2.you will get more than one result.
3.select any item in the filtered result except first item.
4.you will see first item appears in the textbox rather the one you selected.
if you do not take time to provide a codesandbox.io reproduction, should the community take time to help you?
(for bugs) 1. clear watchman watches: `watchman watch-del-all`.
2. delete the `node_modules` folder: `rm -rf node_modules && npm install`.
3. reset metro bundler cache: `rm -rf $tmpdir/react-*` or `npm start -- --reset-cache`.
4. remove haste cache: `rm -rf
(for bugs) phofurl 1. add a `button` inside a `link`
(for bugs) 1. click checkbox in table header
(for bugs) 1. create an element with a ref.
2. save the ref in the state.
(triggers re-render) 3. pass the ref from the state to popover.
4. popover appears over ref.
(for bugs) code at sandbox: phofurl 1. load the sandbox code 2. click on the switch 3. nothing happens at first
(for bugs) n/a - possibly more of a feature request
(for bugs) build related issue, so sorry can 't provide a live link.
but the reproduce step should be enough.
1. set up project with following package.json: phofcode 2. use this script for server rendering (basically copied from phofurl phofhyperlink ): phofcode 3. run the webpack-dev-server by: ` npm start ` 4. got a error like this: phofimage
(for bugs) phofurl phofurl 1. clone 2. install 3. run
(for bugs) 1. go to phofurl 2. click "open simple snackbar" 3. switch to some other program, but one that doesn 't hide the browser (so that you 'll see that the snackbar remains up).
(the snackbar in this demo should auto-hide after 6 seconds, so if it hasn 't disappeared after this long then this shows that autohideduration isn 't working).
5. click back inside the browser.
wait a few seconds, and the snackbar will disappear.
this bug started in v1.x; it didn 't happen in v0.x.
see for example demo for old snackbar: phofurl
(for bugs) gif of bug: phofurl phofurl phofimage using standard drawer and button config from material-ui demo
(for bugs) the problem lies here: phofurl swapping the lines 295 and 296 should fix this bug.
(for bugs) replace flatbutton with raisedbutton in this file phofhyperlink to see the error.
(i should add that i noticed after i pushed that material-ui was actually installed in my root directory, not directly in my client.
shouldn 't matter, but i installed it directly in my client anyway, and there was no change the behavior.)
(for bugs) i managed to reproduce the "bug" in codesandbox : [link] phofhyperlink
(for bugs) 1. just take a look here phofurl
(for bugs) 1. an example of this is on the material-ui-pickers doc site ( phofurl 2. source to produce this is here: phofurl image phofimage the horizontal positioning issue can also be seen on the example on material-ui-next.com.
however, the vertical positioning seems to come from using an iconbutton.
the horizontal issue is because width: 100% is set on the input element.
removing this and setting flex-grow: 1 fixes this.
the vertical issue can be fixed by setting a fixed height of 48px input adornment.
(for bugs) 1. go to the material ui docs for dialogs phofhyperlink .
3. observe the missing ripple effect on button.
(for bugs) 1. generate some load inside a promise 2. observe circularprogress animation, it still runs but the length of the circle stays constant demo: phofurl (warning, chrome pls, firefox crashes under this artificial load)
(for bugs) i spun this up to demo the issue: phofurl
(for bugs) 1.follow rtl enabling steps here phofhyperlink 2.add jss-rtl 3.use the hoc phofhyperlink to wrap any textfield in your code.
(for bugs) this can be easily reproduced and can be seen here - phofurl phofcode | tech | version | | material-ui 18.2 react 15.6.2 browser chrome (64.x)
(for bugs) you can reproduce the bug here: phofurl phofhyperlink .
use the localized example (i tried the french version), as this bug only appears in the localized version try to set datepicker to "19 july in 1968", date in output-field will show "19 august in 1968" this could be helpful for bugfixing: if you click on arrows for months, you will see, that month "march" ("mars") appears two times, only after second click next month is shown
(for bugs) see codesandbox here: phofurl if you navigate to the demo.js you'll see the relevant code.
(for bugs) main component: phofcode 1. build an app with any material-ui component 2. build it for production there is no point to show it in codesandbox.io since it can 't build project in production mode.
(for bugs) phofurl 1. make a circularprogress with a value of 20 2. make a circularprogress with a value of 50 3. make circularprogress with value of 85
(for bugs) i tried my best: phofurl i have * no * idea why this codepen sample isn 't working.
1. make a table with a tablebody 2. its children will be mapped from an array into <tablerow> objects 3. set the `selectable` property of the <tablerow> objects to false 4. the checkboxes generated won 't be selectable, but they won 't have the `disabled` property.
5. using dev tools, set the same <tablebody> to be `selectable=false`, and it sets `disabled=true` for every checkbox
(for bugs) i am using react-int phofhyperlink library for internalisation, it woks really well with material-ui and only fails at placeholders i.e phofcode placeholder is displayed as `[object object]`, this works fine for `label` in same field and things like tabs.
(for bugs) 1. input japanese util having newline 2.in textfield will have duplicate text phofcode
(for bugs) run the demo: phofurl
(for bugs) go to phofurl using internet explorer 11 and attempt to click on a link on the drawer.
(for bugs) phofurl 1. click on button collapse 2. enter a character 3. input is moving / jumping around collapse - input with iconbutton as adornment phofimage
(for bugs) 1. go here: phofurl 2. check a checkbox 3. uncheck the checkbox 4. notice color
(for bugs) 1. copy and paste the code in the source section of raised button or any button and try to render it in a current project.
i tried with and with out muithemeprovider to no avail.
(for bugs) codesandbox example : phofurl
(for bugs) `yarn add material-ui@next` `yarn start` // which runs `parcel index.html`
(for bugs) 1. browse to the the multiple select demo phofhyperlink on a _mobile_ device or using chrome's emulator 2. select some names 3.try deselecting a name 4. observe it still having a grey background peek phofimage
(for bugs) see a demo here: phofurl
(for bugs) 1. import any icon from `material-ui-icons` package.
3. see warning in console.
note: i tried this in codesandbox but did not see the warning.
but here is the link regardless: phofurl
(for bugs) i made a repository to illustrate the problem phofurl
(for bugs) 1. create simple multiline text field 2. enter multiline text
(for bugs) codesandbox link here phofhyperlink .
1. simply insert any appbar example of the demo site with a title.
(for bugs) code sandbox phofhyperlink 1. create a react.js app.
2. import drawer from material-ui/drawer.
3. add it to a component and set the varient to either persistent or permenant.
(for bugs) 1. open the menu 2. click outside of the menu
(for bugs) 1. open phofurl 2. you can see that `shouldnt be visible on load` button is visible on load while it shouldn't 3. click `show` button, `shouldnt be visible on load` will still be there, another button `mountonenter helps but shouldnt be necessery` will show.
4. from now on, you can toggle hide/show, everything works fine, only point 1 is problematic.
(for bugs) 1. open: phofurl 2. open debugging console.
3. click on the buttons & see the event.target object, which is a child span of the flatbutton that is being created behind the scenes.
(for bugs) able to manually set style for floatinglabeltext.
(for bugs) on a media size small enough so that snackbar covers the full width of the page.
1. add a floating action button 2. add a snackbar
(for bugs) phofurl open the select and select a value, you will see the popover is horizontally shrunk when it is exiting.
(for bugs) the full code for the component: phofcode
(for bugs) the non-working code is provided above.
(for bugs) edit materialui/react-router bug phofimage phofhyperlink 1. press tab key until keyboard focus is on the "bar" item.
2. press spacebar 3. observe js error
(for bugs) see phofurl which is a demo i setup for #10037, which includes an explicit container prop (which is clunky).
(for bugs) see phofurl you can see that the menu is positioned correctly within the main window relative to the button, however in the popout window menu overflows parent window.
(for bugs) phofurl 1. view code sandbox example phofhyperlink 2. mouseover both svg images, `toggle` component doesn't change svg color on `:hover`.
(for bugs) 1. add a typography component 2. add property `nowrap` to the compnent 3. set the type property of the component to `body2` 4.
(for bugs) here is a demo: phofurl output here: phofurl image phofimage
(for bugs) demo: phofurl 1. add an input to a modal 2. open the modal and try to edit the contents of said input...
(for bugs) 1. phofurl 2. see `demo.js` 3. try `purple` - it works 4. try `orange`, `deeporange`, `lightblue` (and maybe some other) - it throws typeerror
(for bugs) just create a checkbox on a page, use oncheck to call a function and try to tab into it and press the spacebar.
our users are telling us it doesn 't work, or that it takes them 3-5 times hitting the space bar before it takes affect.
but if they click on with a mouse, is the 1st time.
"if you do not take time to provide codesandbox.io reproduction, should the community take time to help you?"
no they do not need take time write reproduction, i think should be easy do.
(for bugs) actually you can reproduce it with the default sandbox link provided: phofurl 1. click on the button "super secret password" 2. after the modal is opened, enter "esc" and watch the button ripple effect "pulsing"
(for bugs) phofurl 1. use code above 2. check console
(for bugs) in a `react-scripts` app 1.
(for bugs) 1. go to persistent drawer phofhyperlink example 2. click on menu icon to toggle drawer 3. notice "persistent drawer" title is hidden under drawer instead of being shifted]
(for bugs) 1. i m trying to build a nested menu recursively.
every menu element is a component with withstyles.
2. component ul in the component ul can 't get the classes of the jss.
3. this is an example menu data, <pre> [ { "type": "ul", "title": "ul - level 1", "children": [ { "type": "ul", "title": "ul - level 2", "children": [ { "type": "li", "title": "li - level 3" } ] }, { "type": "li", "title": "li - level 2" } ] }, "li", "li level 1" } ] </pre> 4. checkout the demonstration of issue; there is also working version without withstyles.
(for bugs) 1. go to phofurl and view the code snippet.
(for bugs) run nextjs sample app
(for bugs) create custom theme: phofcode use this theme to set body background: phofcode this will have no effect on the body background because the palette values are ignored.
background color can only toggle between `#fafafa` and based on the value of `theme.palette.type`.
i am currently using the following workaround, but this seems completely unnecessary: phofcode
(for bugs) run the sample nextjs app with v1.0.0-beta.28 and v1.0.0-beta.27.
in v1.0.0-beta.28, you 'll get the above error.
(for bugs) see: edit phofimage phofhyperlink
4. notice that there is extra padding bottom, it is applied in 'last-child' selector.
source file here : phofurl (line 9) now, this selector doesn't take effect if there is cardactions present.
in fact, this selector will apply only when there are multiple instances of cardcontent (in my opinion which should be never, since one card should have only one card content).
i may be totally wrong here and please correct me if i am understanding this wrongly.
(for bugs) go to phofurl click on open left, then click anywhere to dismiss it.
(for bugs) phofurl 1. add a button as follows <button raised color="primary"> default </button> ``
the sandbox is a copy-pasta from the demo of the docs phofhyperlink , with an added class called `buggyclass` edit bug report material-ui imgfullheight phofimage phofhyperlink
(for bugs) <!--- provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.
include code to reproduce, if relevant (which it most likely is).
this codesandbox.io template _may_ be a good starting point: phofurl
(for bugs) use this in your react app to reproduce: `<selectfield
(for bugs) looking into the source hiddenjs suggests it should be a number phofurl however `initialwidth` also gets passed into `withwidth` phofurl which expects a string phofurl
(for bugs) 1. build a appbar with redux , title with a textfield ,onchange dispatch action to reducers ** appbar.js ** phofcode 2. build a new js file with drawer (inside have menu and menuitem)and somecomponent ** new.js ** phofcode 3.and when you try to trigger reducers2 to make component changed from a to b thought action2 4.and the component will changed but the textfield will lost focus 5.but if you change menuitem listitem ,that will avoid the problem occurs
(for bugs) phofcode test: phofcode phofcode
(for bugs) issue could be reproduced on material-ui official website, on iconmenu component subpage: phofurl seems to be reproducible for material-ui v1 as well: phofurl 1. open page on ios device.
2. click on iconmenu, popover position should be good.
3. zoom page, click iconmenu again, the popover position will be awkward (as the screen attached).
4. if popover position is normal, zoom page more or less and repeat step 3. attaching screenshots for conveniece: initial phofimage zoomed phofimage
(for bugs) in this sandbox, phofurl 1. hover the first line 2. click on the popover, nothing is logged (the issue).
3. hover the second line 4. click on the popover, some text is logged is printed in console (as expected).
(for bugs) 1. render component: table > tablebody >tablerow >tablerowcolumn > textfield 2. click on the first `textfield` in the first `tablerowcolumn` 3. switch focus on the other`textfield` by pressing tab key.
(for bugs) phofcode error in /xxx/xx.tsx [tsl] error in /xxx/xx.tsx(240,29) ts2322: type '{ children: string[]; }' is not assignable to type 'intrinsicattributes & stepbuttonprops & { children?
type '{ children: string[]; }' is not assignable to type 'stepbuttonprops'.
property 'orientation' is missing in type '{ children: string[]; }'.
(for bugs) 1. click on 'deploy to now' button in phofurl 2. provide valid zeit token 3. click deploy 4. deployment fails and following message is shown in the deploy page: phofcode
(for bugs) 1. fix the width, should not change the width of `iconmenu` 2. fix layout
(for bugs) copy&paste the example code from the responsive drawer into a typescript project in visual studio code.
you may also need to do some casting to phofcode as the styling stuff doesn't really play nice with ts at the moment.
(for bugs) phofcode 1. set `primary` to any color runway.
(for bugs) my implementation: phofcode buttons are children of `theme`.
palette changes took effect, but nothing related to overrides did :/
(for bugs) 1. have typescript setup in a react environment 2. use `import datepicker from 'material-ui/datepicker' ` to import the datepicker.
right now, i'm getting around this error by using `const datepicker: any = lame.
3. add an `onclick` property to your datepicker.
eg: `... onclick={ () => console.log('opening the datepicker') } ...` 4. see annoying red stuff in your editor.
(for bugs) 1. open dialog component with props fullscreen=true
(for bugs) 1. look at: phofurl 2. then look at the type definition: phofurl 3. note the differences in keys defined for zindex (also noted in the changelog: phofurl
(for bugs) 1. going to phofurl 2. select some items in multiple select example 3. click on any space on page 4. see how label mixed with selected variants on field image phofimage
phofurl phofhyperlink i believe putting the following code here phofhyperlink would resolve the issue: phofcode
(for bugs) i apply my styling as follows: phofcode and use my custom component inside an uncostumized tabs component: phofcode as mentioned: if i supply the textcolor prop the building works (even though the functionality seems to be broken, but that 's probably another thing).
(for bugs) i have an another error trying to reproduce the bug phofurl
(for bugs) 1. create table 2. add table pagination 3.
(for bugs) when i use chip in my code, and test my code on chrome, when i click the delete icon, it should only activate the onrequestdelete() action, but it also activates onclick(), it also happens when i copy the example and paste it in my code.
is there anyone knows why?
(for bugs) go to the official component demo of the multiple `select` phofhyperlink and click it.
the first item stays the selected in the popped up list even if you move mouse pointer elsewhere.
(for bugs) phofurl phofhyperlink in the sample, both switches should become `true` after timeout of 2000. checkeda with initial value of false works, checkedb remains unchecked.
(for bugs) clone this repo and follow the instructions in the readme: phofurl
(for bugs) i don 't think codesandbox runs electron...?
1. use in electron is a valid use-case (is it not?).
2. brings to light a bug or omission.
3. would help me tremendously with my project ;-) 4.
(for bugs) following the instructions at phofurl 1. curl phofurl | tar -xz --strip=2 2. cd nextjs 3. npm run build 4. npm run start
(for bugs) my render function code is as described below phofcode
(for bugs) 1. codesandbox snippet phofhyperlink 2. add a `chip` element to app 3. the rendering differs in chrome and edge 4. wrapping chip with `inline-flex` container (e.g.
`badge` or custom div) fixes an issue.
(for bugs) `<textfield id="reason_note" multiline={true} maxlength={255} underlineshow={false}/>` note: the "textfield" is being used into a dialog.
`curl phofurl | tar -xz --strip=2 2.
`yarn dev` 5. open browser: ` phofurl
(for bugs) 1. have content within `<body>` tag that causes it to overflow or `<body>` has style of `overflow: visible` 2. open select drop down
(for bugs) phofurl 1. container should have position: 'absolute ' 2. add an `iconbutton` surrounded by a `tooltip` 3. set `tooltip` 's title to `test title`
(for bugs) 1. using zeit 's nextjs phofhyperlink with typescript 2. install material ui following the typescript tutorial phofhyperlink 3. try adding `primary: red[ '300 ']` to your color palette 4.
(for bugs) 1. create a simple component that has a delayed render like so phofcode and use the popover like so: phofcode 2. position a button to trigger the popover flush right 3. open the popover
(for bugs) beta 24 example: phofurl beta 21 example: phofurl
(for bugs) the issue is hard to track down as i am not a developer; however it does not occur at our development environments.
this leads me to believe it's going wrong during `npm build` somewhere in our webpack stack.
adding the unit types would however bypass the issue all together imho.
might be related: phofurl phofurl
(for bugs) see here: phofurl phofhyperlink 1. click on the compiled window.
2. press the tab key 3. both the textfield and select receive focus
(for bugs) phofurl 1. open dropdown 2. try to select the last entry
(for bugs) phofurl - select a value - click it again, to unselect it - then the option doesn't lose the selected background until the select menu is closed and reopened so we can't know if we have unselect it
(for bugs) working sample available here: phofurl steps: 1. check several boxes 2. search for data 3. notice that the data changes, and check boxes are now all cleared
(for bugs) 1. install `material-ui v1.0.0-beta23` on a fresh project with `create-react-app` 2. copy over the example code for a chip array phofurl 3. observe how the delete icon does not appear for any of the chips.
4. observe in the console error: `warning: unknown event handler property "ondelete".
(for bugs) there is no such warning in codesandbox example.
but i can see it in my project.
also there is a `transitionduration` mention -- see link above.
if it's not enough - i'll try to create an example with the warning later.
(for bugs) 1. click on a button and compare the result with the specification.
(for bugs) look at the source code.
(for bugs) see this codesandbox phofhyperlink for a reproduction of this issue
(for bugs) example of behavior (to show double call): codesandbox example link phofhyperlink
(for bugs) 1. go to phofurl 2. click any item in 'open one' and it will console.log 'closing two'.
it should console.log 'closing one'.
(for bugs) 1. go to phofurl 2. check chrome's dev tools > elements > event listeners > scroll you will see there is one scroll listener this is your baseline 3. now click on the popover menu item to see the example popover page 4. check chrome's dev tools > elements event listeners scroll you will see four listeners.
one listener was registered for each popover on the screen, even though they are not visible at the moment this means popovers are registering even if they are not active at all.
(for bugs) 1. have a page with multiple textfields, for example phofurl 2. use dev tools to see which parts of the page is repainted.
for example chromes "paint flashing" or "layer boarders" 3. focus a textfield
(for bugs) 1. create a dialog 2. add list items (count should be above 30) inside dialog 3. add styling with different keywords.
(for bugs) 1. go to the link phofhyperlink in ie 11 2. click on disabled textfield 3. look at the bug image phofimage
(for bugs) <!--- provide a link to a live example (you can use codesandbox.io) and an unambiguous set of steps to reproduce this bug.
include code to reproduce, if relevant (which it most likely is).
this codesandbox.io template _may_ be a good starting point: phofurl if you do not take time to provide a codesandbox.io reproduction, should the community take time help you?
(for bugs) phofurl - open the link on ios - go to the second dialog - scroll to the very end, scroll two time more while at the end - once at end of modal, scroll to top scroll will start to feel weird.
note: it seems that this is happening when you scroll tapping on a input, not 100% sure.
(for bugs) phofurl 1. load codesandbox 2. see two autocompletes 3. note that there is a large gap between the two
(for bugs) phofurl 1. click button 2. see that there is no action
(for bugs) 1. phofurl 2. click on age 3. type "twenty" and press enter 4. try the same thing on the native select component below.
5. do the same steps on phofurl (it works here)
(for bugs) 1. add anchorposition and anchorreference to popover 2. compile code with typescript
(for bugs) `<toolbar innerref={() => console.log("ref is ok"} />`
(for bugs) phofurl 1. create a fonticon component within an iconbutton.
don 't set a hovercolor.
2. define it 's onclick function to modify it 's color as: = "color:#33ff33 3. check the console output which will show that the color changed successfully and it is retained.
4. repeat 1 and 2 but this time with a hovercolor mentioned.
5. even after the click, when there is no hover, the color goes back to predefined color.
same can be seen in console with 6. tried it with earlier which too didn 't work.
(for bugs) you may see this on example phofhyperlink you may see how different color contrasts are in light and dark themes
(for bugs) phofurl 1. change window size in project view
(for bugs) 1. phofurl 2. insert switch into expansionpanel 3. use switch
`npm install material-ui@latest` 3. start your app (`npm start`, `yarn start`, etc.)
4. see the "failed to compile" error.
phofurl image phofimage edit qk17pp2vlq phofimage phofhyperlink
(for bugs) phofurl is not working, i do not know why, so i will put example here if you do not mind phofcode
(for bugs) phofurl 1. resize the whole window until unnecessary scrollbars appear 2. simply hover over the button 3. after moving the mouse away and again over the button tooltip moves 4. after doing that a few times it moves into correct position it should have been in initially
(for bugs) create a table with pagination that spans the whole screen (width: 100%).
(for bugs) 1. create any flat or raise button.
2. for onclick event add event handler for showing logs.
4. all events are fired twice
(for bugs) phofcode edit 88ywmypq7l phofimage phofhyperlink
(for bugs) 1. create a container with a child tab element in it (fullwidth) 2. resize the parent container programmatically (not by changing the viewport)
(for bugs) see code above.
(for bugs) here is a minimal demo: phofurl
(for bugs) - open this sandbox phofurl in chrome to see the bug - click in a field to see labels appear for a short moment - open in firefox to see it working fine
(for bugs) 1. go to phofurl 2. click the text under the checkboxes heading (to avoid having to tab through everything else) 3. use the tab key to navigate the page
(for bugs) given the following: phofcode 1. check the checkbox 2. collapse the card 3. expand the card 4. checkbox is unchecked
(for bugs) here is codesandbox phofurl phofhyperlink
(for bugs) 1.import datepicker 2.hardcode the date in the set value 3.watch it display the day before
(for bugs) go to material-ui main website, change emulator to blackberry and refresh the page
(for bugs) phofurl 1. inspect the element `test` 2. notice that no vendor prefixes are generated when looking at the class
(for bugs) unfortunately this is a hmr issue, and i can 't workup a codesandbox.io example.
here is my relevant setup (maybe i am doing something wrong?)
steps 1. build / run 2. modify any part of app under the hot.module.accept (styles, content, etc...) 3. error occurs but ui updates ok (the ui still updates fine - but the error is still thrown) ** app.js ** phofcode ** drawer.js ** phofcode
(for bugs) 1.define max rows of 8.
2. define width by percentage.
3.add text, 4.and change the width of the window.
(for bugs) here is a code sandbox that demos it; phofurl
(for bugs) 1. go to the materialui next website phofhyperlink 2. on the first field, type some: "the letters gyjpq in firefox".
3. you 'll see the bottom of the "gyjpq" are stripped.
(for bugs) i have created a sample project phofhyperlink that just uses a textfield.
`npm install` 3. you can see the module bundle stats by running phofcode
(for bugs) bug demo: phofurl (press "do a bug" button) 1. set slider props - value: 5, minvalue: 1, maxvalue: 10, step: 1 2. change slider props to - minvalue: 25, maxvalue: 30, value: 27 3. see that slider 's value did not change
(for bugs) -> not a bug i would expect phofcode
(for bugs) 1. provide selectfield an empty array [] as child instead of array of menuitem's.
2. open this selectfield's dropdown.
empty dropdown is shown as there are no items to select.
3. click away to close the dropdown.
error will appear in the console.
(the same happens if i provide undefined instead of empty array)
codesandbox: phofurl ** note ** : in the codesandbox, the iframe doesn't contain material-ui styling.
this is because the jss needs to be injected into the iframe explictly, as well as `<muithemeprovider>`.
this is a different, unrelated issue and so i didn't take time to implement that here.
(for bugs) demo of bug: phofurl 1. create a select field with menuitems 2. set "displayempty" in select field 3. have one menuitem with value="" and label 'none '.
4. with an initial select field value other than "", choose the "none" option, and watch as the inputlabel unshrinks and covers the value in the field.
(for bugs) i'm not sure if this can be reproduced on codesandbox.io since it requires ssr for demonstration.
if there is a preferred way to structure code for ssr-based issues, i'll be happy to follow whatever guidelines are provided and provide that as an edit to this issue.
this issue can be reproduced with an ssr-rendered component that contains a `<modal as explained above, this appears to be a case of portal rendering nothing on ssr, and something on initial client render.
it is hopefully trivial reproduce in any dev's ssr rendering solution of choice, but if there is a preferred ssr setup for including in issue reports, let me know what that is and i can provide basic project.
(for bugs) phofurl 1. select someting in select field.
1. open the select field dropdown again.
2. with dev inspector, move the overlaying dropdown.
you will see text field without value.
(for bugs) phofcode where `<alertdialog />` is a boring wrapper around `<dialog />`.
i 'm sorry for not including a code snippet.
i don 't know how to set up the tests to illustrate the issue, but i tried my best to provide as much relevant information as possible.
(for bugs) change any regression test spec and re-run test
(for bugs) 1. go to phofurl 2. click on phone ring 3. screen darkens and white line appears 4. you can 't escape <img width="861" src=" phofurl
(for bugs) - just copy the code for centered grid from phofurl on to your project, you don 't see any effects that would be considered "centered"
(for bugs) a simple example can be seen here: phofurl you can ignore the lack of styling and what not in the popout window, just trying to show the portal issue.
(for bugs) example with `iconbutton` : phofurl 1. navigate using tab keys to the second icon and press enter.
(for bugs) phofurl 1. select first text box.
3. notice 2nd text box is focused ftw.
4. hit enter key again.
(for bugs) 1. navigate to phofurl 2. inspect the mark-up for labelled switch 3. have that parsed by phofurl
(for bugs) link to codesandbox: phofurl 1. download react@15.6.2, react-dom@15.6.2, (devextreme datagrid relies on this version, but it isn't involved with this component) 2. get sample code from material-ui website ( component - text input - search) 3. edit it so it only shows the search text input ( i may have made an error in doing this, i'm not sure ) 4. npm start which leads to 'error: uncaught typeerror: (0 , _styles2.default) is not a function'
(for bugs) 1. create and style constant and use withstyle hoc phofcode 2.
` <textfield label="search race" fullwidth margin="normal" /> ` 3. text-size works, colors do not !
(for bugs) phofcode | tech | version | | material-ui 0.19.4 react 16.0.0 browser chrome
(for bugs) 1. type `jjyyqqpp` in a material-ui text field in firefox.
2. observe that the bottoms of the letters are cut off.
(for bugs) 1. visit phofurl 2. open the codesandbox.io console on the right bottom area of the page 3. change the name text field, see that it changes visually, and name and value are present in console 4. now change gender select field.
see that it does not change, and console prints out undefined in place of actual field name.
(for bugs) 1. wrap a button that will open a dialog on click with a tooltip 2. hover on the button, tooltip appears 3. click on the button, tooltip disappears, dialog opens.
4. close dialog, tooltip appears again.
need to have another click to let it disappears 5. phofurl
(for bugs) you may see this on example phofhyperlink
(for bugs) 1. compile anything with the list of dependencies as seen above
(for bugs) * note * : steps below using galaxy s5 running android 6.0.1 using chrome 1. open up material-ui.com site 2. open side-nav and interact w/ the version dropdown 3. navigate to selectfield component examples 4. start interacting w/ select fields | tech | version | | material-ui 0.19.4 react 15.5.4 browser chrome device galaxy s5 selectfield2 phofimage
(for bugs) here is the live example phofurl 1. click on the selectfield 2. scroll to the bottom 3. click on any item 4. list scrolled to top
(for bugs) 1. open the dialog with `grow` transition 2. close the opened dialog 3. phofurl
(for bugs) 1. assume you are in a `*.ts` file and you are using ts compiler.
2. the following code will cause the ts compiler to throw an error.
phofcode 3. the error would look like the following : phofcode
(for bugs) 1. use `create-react-app my-app to create a simple react app with ts 2. add `react-router` as dep and install it 3. use a `list` in the app template and try to add an item with `<listitem button component={link}
`npm install --save typescript@2.5.3, material-ui@0.17.4, 2. build
i followed all steps in the official guide phofurl and here is some sample of my code: phofcode the response i got from initial render is correct, for example this `appbar` component phofcode rendered to string as phofcode
(for bugs) test the html in ie: phofurl you may need to paste the text again this is what i used: phofcode `
(for bugs) set up a `div` container with an arbitrary width, insert an `input` component with properties `fullwidth={true}` and `multiline={true}` and a `defaultvalue` that is big enough.
you will see that the text doesn't stretch to the width of the container.
(for bugs) in this codepen i have created a basic html example.
(for bugs) phofurl phofhyperlink 1. click 'toggle' to check it opens from the left.
2. click it again to close the drawer 3. click 'change anchor' to make it to the right 4. observe the drawer 5. click 'toggle' again - drawer will recalculate correct opened position.
(for bugs) 1. open link in ie 11 phofurl phofhyperlink
(for bugs) this is a server-side render issue, so using something like codesandbox.com isn 't an option since you can only do csr in that case.
1. create a ssr react app 2. create a view w/ a `textfield` component in it like follows: phofcode 3. load the view.
4. check console to see react warning above.
(for bugs) phofurl start typing in a field - a dropdown autocomplete list will appear, select a value and then the input loses focus, and we lose the tab order.
check the select page in the current documentation to try it out: phofurl
edit dialog not dismissed bug phofimage phofhyperlink
(for bugs) 1. example of expected behavior in phofurl 2. example of observed behavior in phofurl 3. example of observed behavior in phofurl 4. example of expected behavior when overriding select component's onblur in (see simpleselect.js and console): phofurl
(for bugs) 1. codesandbox link phofhyperlink
(for bugs) use a simple component like this one below.
` <linearprogress mode='determinate' max={totalseconds} min={0} value={totalseconds - timepassed} />` if i start with a total seconds > 100, i would not see the linear progress bar moving until the last two minutes.
(for bugs) basically mount the slider, but then stop rendering it on an if statement.
there are some events that you have not cleaned up?
(for bugs) follow instruction here: phofurl it breaks on this step phofcode i think this is because the versions specified in package.json don't follow semver.
(for bugs) 1. open material-ui beta 19 select] in internet explorer 11 2. in dev tool on muilistitem-root-x justify-content is set to initial and the muibuttonbase-root-x justify-content is set to center the muilistitem-root-x justify-content should be set to flex-start unfortunately i can't attach screenshots [ edit select material ui phofimage phofhyperlink
(for bugs) please, check out the cloned code from you at: ** phofurl in line ** 9 ** the color is printed correctly.
however, when placed in the configuration like at line ** 12 the error happens.
changing line 12 from purple[500] to purple everything works fine.
(for bugs) the simplest example: <code> <gridlist> <gridlisttile cols={1} rows={1} onclick={(event) => console.log('clicked')} /> </gridlist> </code>
(for bugs) 1. add spacing to a grid container 2. sometimes the issue happens here's the issue phofhyperlink adding some padding to an outer div prevents it from happening phofhyperlink | tech | version | | material-ui 1.0.0-beta.18 react 16.0.0 browser chrome
(for bugs) in the simpleselect phofhyperlink example, remove minwidth: phofcode change some of the options to be super long to exaggerate the problem: phofcode
(for bugs) 1. navigate to material-ui.com on the stock/default browser of an android phone os <= ~5
(for bugs) 1. go to phofurl scroll down to "floating label example" section.
2. click on the placeholder area of the selectfield on the first example.
notice everything including the floating label works fine.
3. then try clicking on little arrow icon indicating dropdown menu located on right area of selectfield.
4. notice floating label starts floating for a very short amount of time just before dropdown menu is completely open.
note: pressing and waiting arrow icon triggers floating label to float.
however, pressing and waiting other area of selectfield does not trigger anything.
that may be cause bug.
(for bugs) 1. add a select with about 50 items 2. try to open it ** i traced this issue to the getpositioningstyle in popover.js.
i found that modifying the code like below fixes it.
(for bugs) 1. open phofurl in ie 11 2. click confirmation dialogs demo.
(for bugs) minimum example: phofurl
(for bugs) use phofurl to reproduce with the above steps.
(for bugs) phofurl 1. type two characters in the first input to cause it to be disabled.
2. click/type in the second input.
notice that both inputs are focused.
(for bugs) here is a codesandbox.io: phofurl the indicator should be set for index 1 but the indicator is set to index 0. this worked earlier, i noticed this issue when i updated material-ui to beta-17
(for bugs) 1. open phofurl 2. observe drawer on the left side 3.
(for bugs) try it with the following theme `default.js`.
the spacing changes to spec, the palette is defined appropriately, but the shadows do not change.
the shadows in the code below are different from defaults.
phofcode image phofimage above shadow is not in my shadow definition override.
(for bugs) 1. create a theme override with an invalid style key, e.g.
: phofcode 2. open the _javascript_ console.
3. the console shows `bundle.js:6820 warning: you are trying to overrides a style that do not exist.`
(for bugs) 1. create a table with two tablebody children 2. render the table and verify that only the second tablebody is rendered jsfiddle example phofhyperlink
(for bugs) write a snapshot test for e.g.
`import hidden from 'material-ui/hidden';` and one for `import button from 'material-ui/button';` (is there a pastebin which is capable of this?)
(for bugs) see simple menu demo phofhyperlink
(for bugs) 1. go to phofurl 2. observe the face icon and the "right" text in the red box.
3. click the "open dialog" button 4. observe position of face icon and "right" text in red box.
(for bugs) phofurl an example of this page with the openonfocus props can reproduce the above phenomenon
(for bugs) 1. go to phofurl 2. press tab 3. click on any label of a checkbox, radio button or switch the input now has a grey background as if you had selected it with a keyboard tab.
clicking on the input directly instead of the label will not cause this / stop this behavior.
here is an example of how i am using withtheme: const mycomponent = props => { // use }; export default withtheme(mycomponent);
(for bugs) 1. create a dialog 2. open it with a menuitem's onclick prop, with some code like: phofcode 3. then open it in your browser 4. unexpected keep loading.
(for bugs) link: phofurl ps: i'm happy to help to update docs, would be cool if you guide me where props types are coming from.
(for bugs) 1. import { green } from 'material-ui/colors'; 2. linearprogress color={ green }
(for bugs) 1. use the code shown phofurl phofhyperlink with ** 1.0.0-beta.13 ** 2. update to ** 1.0.0-beta.16 ** 3. see the changes p.s.
to downgrade simply run `npm install
(for bugs) this bug is visible in the demo site under the "positioned" section: phofurl 1. click "bottom-center".
2. observe that the snackbar is centered and not full width.
4. observe that the snackbar is full width.
(for bugs) i made a video of the datepicker docs which uses a popover if inlined: phofurl
you can directly reproduce the bug here: phofurl 1. type something in the multiline textfield.
2. press the reset button results: the content of the multiline textfield is not cleared.
here is a very simple component you can directly add to your code to reproduce bug: phofcode
(for bugs) here is an example i added padding to it so you can actually see what it does, if you remove the padding you will not see the changes: phofurl
(for bugs) 1. create a cra app.
2. build example like above.
`serve -s build` or something like that invoke your code and everything will crash.
(for bugs) phofurl phofcode 1. an example is in: phofurl
(for bugs) create an iconmenu, implement a onrequestchange handler, open the menu, and then try to click away via right click, vs left click.
the handler will trigger on the left, but not the right
(for bugs) 1. visit phofurl 2. go to section: nested dialogs and click on button dialog with date picker 3. open a date picker dialog by clicking on date picker input.
(for bugs) 1. create an app with a typescript create react app wrapper: phofurl phofcode 2. add material-ui and material-ui-icons: `yarn add material-ui material-ui-icons` || `npm install material-ui material-ui-icons` 3. start the server: `yarn start` || `npm start` 4. add the menu icon into the default /src/app.tsx: phofcode
(for bugs) 1. create a custom theme overriding the toolbar defaults (e.g.)
phofcode 2. inspect the toolbar after render.
the background color isn't red and the minheight remains at the default 64px.
doing same with a direct style override works fine (with exception that min-width in @media query must be specified as minwidth (e.g.)
phofcode <toolbar style={styles.toolbar}> ... </toolbar>
(for bugs) `<drawer anchor="right" world!</div></drawer>`
(for bugs) try to render myselect from phofcode 2. look at your console
(for bugs) none of the underline hover transitions are working in the docs | tech | version | | material-ui next
(for bugs) check this url: phofurl 1. bring up chrome dev tools to be able to see the console.log 2. click the text "hello" to move focus to that window.
3. on the keyboard hit tab set focus the "click me" button 4. hit enter on keyboard 5. watch console and see that "clicked" was printed twice.
also note that if i in handler uncomment e.preventdefault() it 's actually only printed once.
(for bugs) phofurl 1. click 'show dialog' 1. observe that react warning in console
(for bugs) 1. use a textfield and set type to number.
2. in the browser, enter a number in the field, and remove it.
you should see a zero now.
you shoud now see a the number with leading zero.
3 phofimage 4 phofimage 1 phofimage 2 phofimage
(for bugs) 1. go to phofurl 2. select a random tab 3. click switch 4. chehck indicator position
(for bugs) 1. head to phofurl 2. inspect one of the buttons ' labels in your browser 3. disable "vertical-align: center"
(for bugs) code sandbox : phofurl try to click the mouse button on the right, it's impossible because of the tooltip
(for bugs) 1. enter with mobile devices 2. scroll on menu result
10. see network tab can see component change has been sent through (from url like ` phofurl contain transpiled code of this file)
(for bugs) 1. use the following drawer: phofcode 2. check css rules applied
(for bugs) 1. implement tooltip 2. add button in area where tooltip is rendered 3. try and click on button when tooltip is hidden (it should be unclickable) 4. alternatively, just inspect element with tooltip, and you will see the container element on top of the page when you hover over it.
(for bugs) 1. run the controlled example here phofurl in v0.19.1 or 0.19.2 2. run the same code on 0.19.0 and see the difference
(for bugs) render `<menuitem dense />`
(for bugs) 1. a basic list/listitem: phofcode 2. clicking on the listitem still fires the onclick.
(for bugs) 1. navigate to phofurl 2. in the bottom paragraph there is a link to the components demo's 3. phofurl 4.
(for bugs) 1. tab to a selectfield 2. click enter to activate/open the field 3. note that nothing is currently focussed/selected 4. pressing down selects the next item in the list.
(for bugs) provide both inputprops and inputprops
(for bugs) phofurl 1. put a select inside a dialog.
(for bugs) live example phofhyperlink
(for bugs) 1. create a theme object with no shadows defined 2. you will notice that shadows are still prevalent on any component
(for bugs) 1. open a `select` component 1. start typing to select an option
(for bugs) phofurl 1. add a condition to display a menuitem: phofcode 2. evaluate condition to false.
(for bugs) phofurl 1. pick an option from select 2. click outside the select container.
3. notice, that select stays in focused state
(for bugs) 1. open a popover using `open={true}`
(for bugs) 1. create a textfield component and use it with type="number"
(for bugs) 1. go to phofurl 2. open multiple select example 3. select 2 items 4. unselect one of them 5. unselect second item asd42 phofimage | tech | version | | material-ui v1.0.0-beta.9 browser chrome on windows 10
(for bugs) 1. import button from 'material-ui/button'; 2. webpack will complain cannot find module.
(for bugs) example on codesandbox.io: phofurl
(for bugs) it is a gatsby project: phofurl or phofurl 1. clone repo 2. install gatsby if you don't have it.
3. run gatsby 4. access localhost:8000/test 5. change viewport size.
(for bugs) open the demo page: phofurl
(for bugs) 1. provide a drawer component of the type `temporary` a `classname` prop.
(for bugs) as an example: phofcode
(for bugs) go to the component demo and try scrolling it (i tried with an android phone phone)
(for bugs) 1. create a component containing < listitemtext /> (inside < listitem button >) and < dialog >.
bind function to open the dialog to listitemtext prop onclick.
2. import this component into < list > that is inside drawer > now you can open the dialog by clicking on list item in the drawer.
(for bugs) i can 't include the steps to reproduce since i 'm copy-pasting the code which isn 't working directly from the mui docs about menus phofhyperlink .
below is all my relevant code though: phofcode note that this button is nested (a few components down) inside a `grid` component so that may potentially be an issue.
i did test the menu outside of `grid` component however and i still encountered this problem.
please help as soon as you can.
steps to reproduce the behavior: 1. run ghidra 9.1 2. run a script with this body: phofcode 3. see the output: phofcode
steps to reproduce the behavior: 1. extract the attached `sample.zip` (pw: 'infected '), then import and open the attached `icedid.dll.gzf` file.
2. go to the function with name 3. in decompiler window, rename `local_60` variable to something else, e.g.
`buffer` 4. note "invalid storage" in listing window, and autogenerated variable name in decompiler window.
steps to reproduce the behavior: 1. drag the sample with sha256 into a project
steps to reproduce the behavior: 1. import the "wlar-5382u_ctl.o_save" file in the attachment and analyze it.
2. waiting for analysis to complete.
3. open the defined strings window.
4. waiting for get stuck.
steps to reproduce the behavior: 1. import a dex file as a single file in 9.1 2. carry out analysis with default auto-analyzers.
3. once complete, head over to the strings_data section.
4. open up any string_data structure.
5. observe that while the comment and the name of structure show correct string, "data" field skips every second byte.
6. this effect also appears in defined strings window, as well as when structure data is queried directly through scripting api.
steps to reproduce the behavior: 1. open python inside of gui 2. execute getprojectrootfolder() inside of python window
steps to reproduce the behavior: 1. right click ghidra plugin project 2. click ghidradev -> link ghidra 3. see error
using standard options to decompile some code.
the code was presumably compiled using visual studio 6.0
decompile the following code block:
steps to reproduce the behavior: 1. create a simple script with a javax swing gui and button who 's action is to update the current function name 2. click the gui button to change the current function name and observe current function name has not changed 3. check function name via a script to see that it has indeed changed, e.g.
1. decompile any application variant that makes use of vfpv2/vfpv3 variants of vmul.
2. notice that it gets decompiled as a cdp instruction.
steps to reproduce the behavior: 1. see additional context
steps to reproduce the behavior: 1. load the attached test.bin file as a real-mode x86 binary, let it start from 2. don 't let auto-analysis start.
3. create word-sized data values out of the ascii bytes shown.
4. convert any of those into a char sequence via the 'convert ' context menu.
steps to reproduce the behavior: 1. load the attached test.bin file as a z80 binary starting at $8000.
2. let auto-analysis start - nothing will happen.
3. start disassemble from the very first instruction, the decompiler window will fill up with some invalid code.
steps to reproduce the behavior: 1. import phofurl 2. run the auto analysis defaults, specifically "objective-c 2 class" 3. get the report that includes "symbol name can 't be empty"
steps to reproduce the behavior: open a program of an active project, a pe executable for example.
move the cursor to a random function by double clicking the function name of a call.
change the name of current function save program and exit code browser open program again, and cursor is at top of disassembly window (just before pe header section).
steps to reproduce the behavior: 1. go to a function label 2. stick a namespace and :: before the function name 4. see error
import the binary attached(it is a standard pe), several mistakes can be seen at the following adresses: * decompiler output being: phofcode while the correct output should be something more along the lines of phofcode * 0x40dbc0, where decompiler is showing a fsincos being unused, while it is actually used in binary.
compile an arm binary with the flag -mbe8 set.
then import into ghidra in the normal way.
steps to reproduce the behavior: 1. get the latest version via git.
2. open ghidra 3. gui labels are missing space characters
steps to reproduce the behavior: 1. go to 'script manager' 2. enable `helloworldscript.java` 3. hit assigned default key binding alt+shift+comma 4. script doesn't run
steps to reproduce the behavior: find an example mangled symbol that starts with `$tss` (for one example, phofurl contains
steps to reproduce the behavior: 1. find a string in the decompile window 2. left-click the string to highlight it (don 't create any selection, just click on the string) 3. press ctrl-c 4. paste clipboard content into a text-editor, result starts and ends with `"`
steps to reproduce the behavior: 1. add the bitrange example in the sleigh documentation section 4.5 "bit range registers" to a language of your choice.
2. load a binary with said language definition.
4. see error i added the example to 6502.slaspec and changed offset of statusreg to 0x60.
the resulting .sla file is relatively small so i will attach it below.
the cause of exception is line 165.
steps to reproduce the behavior: 1. spot an unrecoverable jumptable 2. manually define the array of the jumptable 3. manually add the computed_jump references to jmp instruction performing switch to target referenced by jumptable 4. click on jmp instruction 5. in script manager, run switchoverride.java 6. observe script executing correctly, but decompiler is broken with error above.
steps to reproduce the behavior: 1. create a struct type containing an array of 2.5 million elements (like an inline buffer).
the struct type editor should already be laggy after this (try toggling "show numbers in hexadecimal").
2. create another small field in the struct, and hit alt-m to duplicate it a few dozen times.
3. select all the fields and try to delete them.
steps to reproduce the behavior: 1. download: from < phofurl and extract `rdpcorets.dll` 2. download: from < phofurl and extract `rdpcorets.dll` 3. start vt session between the two `rdpcorets.dll`s 4. add function bytes, instructions and mnemonics match corelators 5. function `_wpp_sf_dd@24` is not matched by any of the correlators, even though the function is bit-identical.
steps to reproduce the behavior: 1. occurs randomly, unsure how to reproduce
steps to reproduce the behavior: 1. go to import file 2. select the elf binary i have provided
./ghidrarun 3. open sla file.
steps to reproduce the behavior: 1. look at any moderately complex file to observe error
steps to reproduce the behavior: 1. import `wallacesrc.exe` and `wallaceversion2.exe` from the included version tracking examples.
2. auto-analyze both binaries 3. run on `wallacesrc.exe` 4. start version tracking session with `src:wallacesrc.exe` and 5. run "_automatic version tracking_" 6. function signature isn 't ported over for `undefined __fastcall print(gadget * this)` at to `undefined __fastcall print(undefined4 * this)` at the function signature can not be applied.
even reverting the markup and reapplying it doesn 't apply the function signature.
- load binary from #1085 - set `ppage`=0xf0 for addresses .. 0x7c3fff - decompile function `fun_7c21bb` - at 0x7c22b8 `ppage` rewtitten to 0xf1 with `call` instruction go to decompiler tries to call fun_7c
steps to reproduce the behavior: 1. add the function_name column to the reference view 2. view the reference to any function 3. select function_name field in a target row 4. observe you go to start of function instead of reference location
steps to reproduce the behavior: 1. go to any function 2. click on the `display function call tree` button 3.
`call tree` window will appear 4. go to another function 5. click on the `display function call tree` button 6. new call tree tab * won't* open
steps to reproduce the behavior: 1. color the first instruction of a code block with setbackgroundcolor 2. go to any other function 3. go back to the original function 4. observe the entire code block is now colored, not just first instruction 5. hit "reload" graph and observe erroneous colors do not disappear 6. use clearbackgroundcolor on first instruction which was colored 7. observe that color does not disappear, but if you hit "reload graph" then
steps to reproduce the behavior: 1. import executable and analyze in code browser - take note of a function you're about to change 2. exit out of code browser 3. go to program and add parameter recompile a before 4. import executable again and analyze - take note of the same function as before
steps to reproduce the behavior: 1. create an empty parser profile 2. add the following configuration phofcode 3. parse the following header from xnu: 3.1. you need to download the whole xnu tree from phofurl phofhyperlink 4. try to parse.
steps to reproduce the behavior: 1. install server after building from source 2. change server.conf argument -ip <dns name> -i <localip> 3. try to connect to the server using new project - shared 4. enter dns name port 13100 5. see error
steps to reproduce the behavior: 1. set user preferences such as the edit code block fields 2. export code_browser tool 3. import code_browser tool into ghidra in a new vm 4. notice code block field changes are not present
steps to reproduce the behavior: 1. import a pe file 2. go to imported functions 3. you 'll see a whole list of ".text" labeled functions 4. see error
load the following minimal repro: phofcode
steps to reproduce the behavior: 1. copy lab5 scripting answer 2. create a new script with ghidra and insert copied data 3. start script on any binary file, that contains any assembler instructions with less or more than two arguments 4. see error
steps to reproduce the behavior: 1. open code browser and analyze a binary.
analyze stops with a comlaint about the pdb loading.
2. start "load pdb file ..." manually 3. see error
steps to reproduce the behavior: 1. compile below example code 2. load and analyze in ghidra 3. change getvalue parameter from int* to a* phofcode
steps to reproduce the behavior: 1. open a file to the graph view and add an eol comment field after the operands field.
2. make the operand field much larger than needed 3. see that with no comment, operand field auto-sizes to minimum length needed 4. add an eol comment and then see that operand field auto-sizes to maximum width instead of minimum required width.
steps to reproduce the behavior: 1. analyze a file in 9.04 that has library calls such as memcpy, dllmain_dispatch, etc.
2. analyze the same file in 9.1_dev to observe the library calls identified in version 9.04 are not identified in version 9.1_dev
select any individual row, right click, and the "copy special" option is greyed out
steps to reproduce the behavior: 1. create a struct containing 2 floats (or 2 doubles or 4 floats) 2. edit the signature of a function to either take or return that struct 3. see that the struct is passed through rdi and returned through rax (2 floats) or passed on the stack and returned through rax and rdx (2 doubles)
open any moderatly complex malware file
steps to reproduce the behavior: 1. open the attached exe file in ghidra 2. analyze with 'decompiler parameter id ' enabled 3. go to the mentioned function
steps to reproduce the behavior: 1. analyze a x86-16 file with data references to offset 0 in another segment.
2. if references are not automatically added, add them manually.
3. references to offset 0 are not marked up in the same way as the others.
try to use "add to program", or just assigning a new shortcut with alt/
steps to reproduce the behavior: 1. analyze an x86-16 program (pretty much any .com file will do).
2. create a function using custom storage and unknown calling convention.
3. add a parameter of either byte or word datatype, and bind it to a composite register of matching size (say, al, ah, or ax).
5. now, regardless of the datatype chosen in step 3, all instances of the composite register and its sub-components are substituted with parameter that was just added.
on a 16 bit target, try to create a pointer on a location which is only 2 bytes long.
steps to reproduce the behavior: 1. import libh.lib 2. choose "batch" 4. see exception: phofcode
steps to reproduce the behavior: 1. load any pdb file.
steps to reproduce the behavior: 1. disassemble some x86-16 code with functions.
1. show the stack depth column in the listing view.
1. find a call instruction where stack depth at the call instruction is not `- ?
1. set stack purge value on called function to any value.
see that instruction after call has stack depth of `- ?
set local depth change for call instruction.
see that instruction after has of `- ?
steps to reproduce the behavior: 1. open "memory map".
1. right click > copy > copy 1. paste and get something like: phofcode
steps to reproduce the behavior: 1. open the provided example elf in codebrowser.
2. create struct `mystruct` as `ulonglong a; ulonglong b; ulonglong c;`.
(it needs to be > 16 bytes to not spill into multiple registers per section 5.4.b.3 of pcs.
ghidra doesn't do this correctly either, but that's a separate issue) 3. open `main` function in decompiler.
4. edit signature 5. set return type to `mystruct` 6. see that a new parameter `__return_storage_ptr__` has been created and incorrectly allocated `x0`, pushing the other parameters into `x1` and `w2`.
i don 't think i should share the executable here because it 's from a commercial game, but i suppose it should apply to any binary that uses strings?
if not please do inform me if there 's a way to share only the relevant sections of the binary data.
first off here 's the relevant data.
as you can see, string "/admin" is in there but ghidra failed to identify / as being a part of it.
i select first memory location and press t to bring up data type chooser dialog and select builtin string type: image phofimage a dialog pops up, select yes clear conflicting data: image phofimage after this nothing in listing changes and in statusbar message "create string failed: not enough space create datatype string" appears.
however, when right clicking same memory location as before but selecting "string" instead of "choose data type": image phofimage and clicking yes again in same conflicting data dialog, it now succesfuly retypes data without any error appearing: image phofimage
steps to reproduce the behavior: 1. demangle the symbol "_ztifmve" (typeinfo for unsigned long ()) 2. call the method getnamespace on the result 3. resulting namespace is long::
steps to reproduce the behavior: 1. create an xxe payload file and set the extension of the file to ".jnlp" 2. go to 3. modify "wrapper_conf" value to point the ".jnlp" file 4. run ghidrasvr using "$ sudo ./ghidrasvr start" 5. xxe exploit in ".jnlp" file gets executed
steps to reproduce the behavior: 1. open codebrowser on an aarch64 or arm program.
2. edit a function 's signature.
3. turn on "use custom storage" and edit a variable 's storage.
4. make sure the table has a row where the type is `register` 5. open the `location` combobox and see registers sorted unhelpfully.
steps to reproduce the behavior: 1. install ghidra 2. run ghidra
steps to reproduce the behavior: 1. create a file with contents as ` x50`, eg.
by `$ echo -ne ' x50' > test` 2. open the file in ghidra, format: raw binary, language: 68000/coldfire 3. disassemble the code in codebrowser 4. see it is a1 50 mov3q #0x0,(a0)`.
the decompiled code also show `*in_a0 = 0;` 5. compare it with binutils: phofcode
not sure 1. go to phofurl 2. see error
steps to reproduce the behavior: 1. git checkout master 2. perform build as usual
analyze the file in the attachments(rename it to 102h.exe, github does not seem to allow exes attachments), go to 0x43f0ce, rename local_10 to whatever and see part of the program disappear.
1. import the following hex file with the mips:be:32:default language: phofcode 2. disassemble the bytes at address `0x0` as mips16e instructions by pressing f12.
for reference, my listing displays the following: // // ram // generated by intel hex // ram:
steps to reproduce the behavior: 1. import and open a binary.
2. choose no when prompted to analyze.
3. at a known function address run the following in python.
phofcode 4. see true returned when no function is created and no instructions exist at the address.
steps to reproduce the behavior: 1. stand up a remote project... 2. import a 64-bit file to the remote project 3. create a dummy structure with pointer-type fields, in the imported file 's file archive 4. through the
download the lahf.txt and sahf.txt files below (flat files containing the bytes.
the '.txt ' extension is to allow uploading to github) load each as a flat binary.
select x86, default, 64, little, gcc for the language.
try to disassemble at address 0x0.
download the test.txt below (a flat file containing the bytes.
the '.txt ' extension is to allow uploading to github) load it as a flat binary.
select x86, default, 64, little, gcc for the language.
try to disassemble at address 0x0.
steps to reproduce the behavior: 1. create a structuredatatype (parent) and add two components 2. create a new structuredatatype (child) with the same name and same datatypemanager but a different categorypath.
3. use 4. use child.clearcomponent(1) 5. check the child structure in the datatypemanager and find that parent structures component 1 still exists within child with same name and comment.
decompile any code with far pointers passed as arguments to functions.
steps to reproduce the behavior: 1. create a project 2. click on create tool 3. select ghidra core 4. on the newly created tool, click on file... and import file.
5. select any z80 executable file (e.g.
a vintage arcade rom file or a cp/m .com program).
6. do a basic disassembling process and spot
1. load the malicious project.
2. malicious code will be executed when the decompile module is called.
steps to reproduce the behavior: 1. load vmware-vmx.exe 2. open the string window and search for strings that are xrefed by an undefined function 3. follow the undefined function and view it in the decompile window 4. press 'l' to rename.
steps to reproduce the behavior: 1. launch ghidra with "./ghidrarun" 2. all guis become unresponsive.
3. sending 2 sigquits to gnome-shell allows recovery without a restart.
stderr from './launch.sh debug ghidra 768m "--illegal-access=warn" ghidra.ghidrarun ': phofcode
1. compile the following dll from a fresh unmanaged c++ dll project in vs2019 with platform tools v142 and targeting x86: phofcode 2. create a ghidra project, add the dll to it, and run analyzer with default settings 3. navigate to the `test` function in exports and take a look at decompile view.
you get this: phofcode or, if you retype the return value to double, phofcode produced literal vs minimum literal where you can see value: phofcode so just a couple digits short really.
looking at hex view still works though.
1) also useful debugging tip - on windows an api monitoring tool like api monitor v2 64-bit from www.rohitab.com (with tools -> options -> memory -> maximum size of captured buffers = 4096, and filter for data access and storage -> local file systems file management kernel32.dll) monitoring ghidra 's javaw.exe can yield this interface details (in the child decompile.exe process): writefile: space="ram" offset="0x9002"/>` readfile: space="ram" space="ram" then the decompilation completes without anything further.
steps to reproduce the behavior: 1) in a hex editor, create a binary with `11 d8 fe 80` and save it 2) throw it into a ghidra project and select `m6800 default` for the processor 3) go to byte zero and hit 'd '
decompile 16-bit code with the following sequence (ensuring import_addr resolves to a different cs segment register than the current segment): ... callf import_addr ; 0x9a code... jmp cs:[offset+bx] offset: jump_table...
steps to reproduce the behavior: 1. compile program with mingw64 2. open program in ghidra and run analyzer.
4. see wrong symbol set to primary.
steps to reproduce the behavior: 1. import arm64 dyld cache to project as a "file system" (as a "file" works after commit for #682, but slowly) 2. import any file from new window and privateframeworks folder 3. open this file in codebrowser 4. see errors.
for example: "failed to create "no return" function functions and classes are empty
steps to reproduce the behavior: go to 7c0:17 press alt+r
steps to reproduce the behavior: 1. load the sprintf binary attached using the (1.5)` language 2. disassemble using vle (f12) 3. scroll down to `74 0b 10 3b` instruction at +0x100, this is supposed to shift r0 left by 2 but this isn 't interpreted correctly and the case labels come out wrong as well
1. compile the following dll from a fresh unmanaged c++ dll project in vs2019 with platform tools v142 and targeting x86: phofcode 2. create a ghidra project, add the dll to it, and run analyzer with default settings 3. navigate to the `test` function in exports and take a look at decompile view.
you get this: phofcode (then-branch is considered to be dead code; 8-byte parameter is interpreted as two unknown4s)
steps to reproduce the behavior: 1. open ida with program database that has commented stack variables 2. run ida xml exporter (edit, plugins, xml exporter) 3. select all options on option screen.
4. press 'ok ' 5. supply filename when requested, press save.
error message itself fails with name space error.
1. open up an apk (such as this phofhyperlink ).
2. observe the application.log file in 3. note the debugging information, java decompilation of extracted files should still occur normally
steps to reproduce the behavior: 1. create a new project 2. open an apk (such as this one phofhyperlink ) in ghidra as a batch import file.
increase the depth and observe the availability of java classes for import.
3. create another project 4. open the same apk as batch import, observe that java classes are not available for import.
follow the steps in devguide.md with a fresh git clone.
steps to reproduce the behavior: 1. open a new project 2. choose "file->import file" 3. select the file.
5. select the dylib to import (i.e.
foundation) 6. continue normal import steps
+ download + unzip + install jdk11 + ./ghidrarun
steps to reproduce the behavior: 1. go to 'edit function signature ' on a function with at least 2 parameters ("function variables") 2. click on one of the parameters.
3. click on the "up" or on the "down" arrow right side of dialogue box.
4. click ok 5. the order of function parameters has not changed.
using the * test.slaspec * in the attached zip file: - compile it using sleigh.
- inspect the generated sla file.
note that it will contain something like this phofcode
steps to reproduce the behavior: feed the file to ghidra.
jump to the address in the screenshot after ghidra finishes analysis
1. open a subroutine with at least one parameter.
2. right click on the parameter and click "auto create structure" 3. right click again on the parameter and click "edit data type" 4. in the window that pops up, change the name of data type and press "apply editor changes".
5. observe how decompiler now fails to decompile subroutine.
steps to reproduce the behavior: 1. import attached file.
2. let it be autoanalyzed 3. open the function 4. see error at the last line of the decompilation.
this is a minimal test file for reproducing: phofcode a binary blob containing `fd 28 12` should disassemble to `test r1ad2:2:0, r2`.
it does not work unless the first two rules with constraints for `mode_ad = 0x0` and `mode_ad = 0x1` are uncommented.
steps to reproduce the behavior: 1. observe in the binary of your choice the sequences of instructions: fcomp, fnstsw, test and jz which should correspond to an if condition involving a floating point comparison.
as an example, here's a sample: phofcode 2. the decompiler will output a technically correct, but overly complicated code.
the example above would decompile to: phofcode with the exception that float_stuff might be evaluated directly in output, but general condition would look like that.
steps to reproduce the behavior: 1. in the server wrapper you have to set the property java.rmi.server.hostname to your nat's dns hostname and to true.
if we look at the following decompilation segment of a function: phofcode i would expect the loop, if bound by `bvar4`, to be indicated that `bvar4` is changing, however nothing is being done with `bvar4` so it seems wrong.
the assembly associated with this is below, with the relevant instructions prefixed with a *: phofcode from the decompilation see that `bvar4` is associated carry flag from `addwfc` assignment, which last time in function an explicit use of carry bit occurred.
however, as nothing else being done carry flag in loop that would affect `bc` instruction, it reasonable to assume that it behavior of called function itself changing carry bit.
if we look at function: phofcode we see it basically just decrementing working register, which working as a counter to read some number of bytes from table register.
the `decf` instruction sets or unsets flag depending on result.
this means although decompilation sort correct given `bvar4` being used to represent bit, it's also incorrect in doesn't correctly indicate bit changing during loop due `decf`.
originally i thought this might be due `decf` not updating c flag, but i checked sleigh and pcode and confirmed does update it: phofcode and
steps to reproduce the behavior: 1. download symbols from microsoft symbols server for ntoskrnl.exe version notice the resulting file size is 7,27 mbytes 2. execute pdb.exe on the downloaded file.
3. under visuel studio the peak memory consumption is 2,6 gbytes which is a 361 to 1 ratio compared to input file size !!
steps to reproduce the behavior: 1) real world scenario a) b) within a projet for a windows pe x64 dll or exe, use the file / importpdb ... menu entry and try to import the prviously downloaded ntkrnlmp.pdb file c) witness the fatal error message window titled "load pdb failed" 2) narrowed down error cause replace main function with : int main(int argc, char
- create a zlib compressed file.
- create a tar archive file - add both to another tar archive file - attempt to batch import the top level tar file
steps to reproduce the behavior: 1. build the above c code with any aarch64 c compiler, and with debug info, e.g.
with: `aarch64-none-elf-gcc test.c -o2 -g -o test` 2. import the produced binary in ghidra 3. analyse it with the default analysis options 4. go to `f`
steps to reproduce the behavior: 1. take any elf file satisfying the aforementioned description.
i used a ps3 eboot file.
3. note how the `toc_base` symbol is never created and how `r2` is not set at all in any function.
steps to reproduce the behavior: 1. open python window 2. select some output 3. try right clicking, cmd-c, ctrl-c 4. nothing works
steps to reproduce the behavior: 1. go to help->contents 2. click on the print icon 3. get error message alongside the print dialog (happens consistently and on any help page)
steps to reproduce the behavior: 1. develop a processor spec with empty sleigh definitions for some of the instructions.
2. compile with ./sleigh -n -a
steps to reproduce the behavior: 1. open ghidra until you see this tip of the day.
steps to reproduce the behavior: 1. export a ghidra project containing structure definitions as xml 2. configure ida pro for xml import/export per ghidra instructions 3. load target into ida and select "plugins | xml importer" 4. select all import options and specify exported xml file from step #1 5. receive error 1 above 6. change "namspace" to "namespace" per 1 above and re-run import 7. receive error 2 above 8. make changes per 2 above 9. import completes successfully
steps to reproduce the behavior: 1. go to python interpreter 2. type
steps to reproduce the behavior: 1. compile the test_stdcall.c file (contained in the provided zip archive using gcc: phofcode 2. import into ghidra 3. create correct function types and correctly set global variables types.
4. the call_func procedure is incorrectly analyzed
same de-compile error occurred on several functions and in several binaries analyzed - cannot share binaries
steps to reproduce the behavior: 1. open the code browser.
2. note that each pane has an "x" button at the top right, with tooltip "close window".
3. go to tool options -> key bindings, and search for "close window".
steps to reproduce the behavior: 1. analyze a c++ library/program with full dwarf debug information.
2. find populated struct within the dwarf category.
3. find empty 'placeholder struct ' within the demangled category.
1. create a c header file containing the following definition: `enum my_enum { invalid = -1, zero, one, two, five = 5, six };` 2. use the "parse c source" function to import the header file.
3. in the data type manager, locate "my_enum" and edit it.
4. observe that entry "invalid" has a value of 0, "zero" is 1, "one" is 2, and "two" is 3.
"five" is properly set to 5 (as its explicit value was positive), and "six" was correctly assigned to 6.
with ghidra 9.0.2, using the attached spec file mistake.slaspec phofhyperlink : `sleigh.bat -x -u -l -n -t -e -f mistake.slaspec` error mistake.slaspec:14: in definition of macro do_stuff: (sleighcompile) error mistake.slaspec:21: in table "instruction" constructor from mistake.slaspec:21 (sleighcompile) error main section: could not expand macros (sleighcompile) error no output produced (sleighcompile)
steps to reproduce the behavior: 1. go to 'file ' -> 'parse c source... ' 2. parse the above example
1. compile the following c program with an arm compiler with some optimizations enabled.
for my testing, i used `arm-linux-gnueabi-gcc` version 7.3.0 with the `-g` and `-os` flags.
c #define n 10 typedef struct x { tint padding[0x123]; tchar a[n]; tint x; tchar b[n]; tint y; tchar c[n]; } x; void test(x *x) { tfor (int i = 0; i < n; i++) { t tx->a[i] = i; t tx->b[i] = 2 * i; t} tfor (int i = 0; i < n; i++) { t tx->c[i] x->a[i] + x->b[i]; t} } int main(int argc, char
steps to reproduce the behavior: 1. download phofurl 2. analyze file in ghidra 3. define datatypes for cake and store struct cake { tlong price; tchar name[8]; }; struct shop { tlong sales; tlong customers; tstruct cake *cakes[16]; }; 4. change function prototype for parameter to inspect to struct shop *store 5. array dereference will indicate store->sales[i+2] instead of store->cakes[i]
steps to reproduce the behavior: compile the code in ms visual studio 2017 in debug mode, or download the exe from link below phofcode the caller code in ghidra: phofcode the callee code in ghidra:
steps to reproduce the behavior: 1. download the binary phofhyperlink (may sound fishy but it's just a ctf-task binary).
2. load it into codebrowser tool.
3. do the default analyses.
4. go to aka main.
5. there should be a loop between and in the decompiler view, but decompiler just ignores it, and show no loop whatsoever.
steps to reproduce the behavior: 1. use codebrowser to disassemble code 2. use function trees to display .rsrc section 3. scroll down to part of .rsrc with icons.
1. compile the following c program to an architecture of your choosing, making sure to include debug information.
i 've tested on x86_64 and arm and have confirmed the bug on both.
c #include <stdio.h> typedef struct a { tint a1, a2; } a; typedef struct b { tint b1; tint index; } b; typedef struct c { tint c1; ta *as; } c; int test(c *c, b *b) { treturn c->as[b->index].a2; } int main(int argc, char
steps to reproduce the behavior on windows 10: 1. in the main ghidra window, select _edit_ &rarr; _tool options_.
3. select the entry _cde/motif_ for the _swing look and feel_ option and apply these settings.
5. attempt to use any common clipboard hotkey in a text field, for example _filter_ field in ghidra main window.
steps to reproduce the behavior: 1. load the code segment included below as m68020 big endian code.
2. define a volatile read-write region in the memory map -- starting address size 32 bytes.
define the whole region as a 32-byte array labelled "nvramcon".
4. observe that there is a read from volatile region immediately prior to writes which is not included in disassembly (but should be).
steps to reproduce the behavior: 1. enable focus-follows-mouse without window raising.
you can do that using winaero tweaker phofhyperlink or x-mouse controls phofhyperlink .
run winaero tweaker and under xmouse options, select _enable window tracking_ and make sure _enable window raising_ is not selected 2. run ghidra and ensure several windows are open.
for example, open a project and open help, then adjust the windows' size & position so the project selection window the help are in front of larger codebrowser window.
notice that as you move mouse over codebrowser (which is beneath other two windows) ghidra raises it to cover other two windows.
1. add dex file 2. click on function to show decompiled code
steps to reproduce the behavior: 1. clone ghidra and open it in visual studio 2019 enterprise 2. go to ghidra 3. double-click the pdb.sln 4. change configuration manager to release x64 and click rebuild.
steps to reproduce the behavior: 1. run the `pdb.exe` binary in the debugger of your choice with the following arguments: `fakefilename.pdb 0` 3. observe exception thrown by stack cookie check.
steps to reproduce the behavior: run in 4k
phofcode i'm replacing some value by #define value, like on the `int int_disp` but the decompiler still show `swi(0x12)`: phofcode
steps to reproduce the behavior: 1. navigate to the root directory of ghidra 2. run `gradle buildghidra` as described in step *building the package* of the devguide phofhyperlink 3. see error reported by `task :createjavadocs` phofcode
steps to reproduce the behavior: 1. navigate to the root directory of ghidra.
2. run `gradle eclipse` with gradle version 5.2.1 installed 4. see error
steps to reproduce the behavior: load any 32-bit mips32 le elf file.
1. run ghidra on your favorite x86_64 linux host.
2. create a new project.
3. import the a shared object (see attachment) compiled for armv7l.
4. look for the function "diminuto_cue_debounce" (for example).
5. note that it 's misplaced by offset placing it in the middle of an unrelated object module.
steps to reproduce the behavior: using ghidra disassembly file, some instructions cannot be recognized, such as isel.
write a python script that uses a decently large chunk of memory and than fails.
steps to reproduce the issue: 1. use the cursor to select a the beginning of a function at a "fun_
steps to reproduce the behavior: 1. disassemble telen.exe from phofurl 2. go to the idiv32 function at 3. edit the function as follows: idiv32 phofimage storage phofimage 4. the disassembly incorrectly names the instruction arguments.
1. save the following snippet into a file named `foo.java` 2. compile the code using `javac foo.java` 3. open ghidra and import `foo.class` 4. auto analyze `foo.class` 5. go to the symbol tree and click on `main` under the `functions` folder 6. view decompiler output `ctrl + e` phofcode
i believe you simply need to decode these bytes in this order, but since i 'm not sure what 's causing it, i 'm not sure.
if it makes any difference, this is taken from an elf library compiled for android.
steps to reproduce the behavior: 1.
`ctrl+f` or `right click -> find...` in the decompiler window.
4. the string is highlighted in the decompiler window.
5. click on a different line in the decompiler window, highlight follows focused line instead of being cleared.
6. close "decompiler find text" dialog.
7. click on a different line in decompiler window.
even after closing "decompiler find text" dialog, highlight follows focused line and it 's not cleared.
- load arm32 binary attached - decompile function `undefined8 uparm1,undefined8 uparm2)`
load an arm some arm cortext little-endian binary, which contains a cmp.w instruction.
b1 f5 a0 2f cmp.w use the patch feature to change the compare value e.g.
notice the bytes of the instruction change to a1 f5 c0 2f cmp.w change compare value back again to its original value e.g observer instruction bytes are not same as original bytes, despite disassembly appearing to be same a1 f5 a0 2f cmp.w
steps to reproduce the behavior: 1. prepare a pe file that uses an unc path pointing to a windows share as pdb path.
the screenshot below shows such an .exe: image phofimage 2. start a server on the "attacker" machine that captures or relays ntlmv2 hashes.
i 've used the metasploit module for simplicity 's sake.
3. import, open, and analyze the file.
selecting only "pdb" analyzer is sufficient.
image phofimage the analyzer will fail (well, unless you actually serve right .pdb, of course).
3. go back to "attacker" machine, and be happy for your newly aquired hashes (or shells, if you relayed).
steps to reproduce the behavior: 1. open up a binary 2. edit function signature 3. in the text box type something like `int parse(int data[]) `
steps to reproduce the behavior: 1. use the adjusted cspec for msp430 (attached) which provides "gcc" and "__interrupt" conventions 1. import attached ghidra zip export for jakarta 2. navigate to the "login" function and observe decompiler output looks like this (screenshot 1) 3. go to fun_46f4 function and edit the function 4. set calling convention to gcc 5. set return type char * 6. add 2 parameters that are char * (screenshot 2) 7. navigate login function and observe decompiler output has change (it is showing call return addresses as ustack38 = return address.
steps to reproduce the behavior: 1. download and unpack fixedsys.ttf.gz phofhyperlink 2. place fixedsys.ttf to `~/.fonts` 3. in codebrowser set the decompiler and disassembly font to fixedsys excelsior 3.01 4. observe the font has changed as expected 5. close and reopen codebrowser 6. observe that an arbitrary font is used in place of fixedsys
steps to reproduce the behavior: 1. disassemble telen.exe (from phofurl 2. go to this is the `idiv32` function.
3. attempt to edit its function signature to `uint32_t __cdecl16near idiv32(uint32_t x, uint32_t y)` with custom storage, either in the decompilation window or in the listing window.
you can initially set storage for x ax and bx, and for y cx and dx.
however, any attempt set return type uint32_t and its storage ax bx will result in a "too much storage" error, because for some reason ghidra thinks that a return type of uint32_t is only 2 bytes.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. decompile telen.exe (from phofurl 2. look at the disassembly at note that ghidra has correctly created symbols in the data segment for these instructions.
3. follow the call that's immediately after, to 4. look at disassembly at 1000:ab3b, note that this is a ds access, but ghidra has not assigned a symbol for it.
5. attempt to create a symbol for it in data segment.
note that ghidra does not apply symbol to instruction.
steps to reproduce the behavior: 1. create a new function definition from the data type manager 2.
'retype' a parameter in the decompiler window to be a pointer to this function definition 3.
'rename' that same parameter to a different name 4. the parameter type is dropped and changed undefined
steps to reproduce the behavior: 1. unset option `automatically save tools` 2. close and open ghidra 3. option `automatically save tools` is set
just open antipesto binary with ghidra and check function.
steps to reproduce the behavior: 1. load any cfg-protected binary into ghidra (e.g.
amsi.dll) 2. perform default analysis 3. navigate to `guardcffunctiontable`
steps to reproduce the behavior: 1. start ghidra 2. notice the bad font rendering
steps to reproduce the behavior: 1. go to code browser 2. click on "diffview" 3. select a file to compare 4. see error
steps to reproduce the behavior: 1. create a project 2. open the version tracking tool
try to disassemble: - swl $t8, 3($v0) - swr $t8, ($v0)
disassemble a binary with multiple lda addr,x in it.
steps to reproduce the behavior: 1. create small app 2. load it into ghidra 3. build again 4. only now open executable for loading.
it will pickup more recent pdb.
1. open script manager 2. right-click a script 2a.
edit with basic editor 3. find line of code longer than the width of the editor pane 4. attempt to view the full line without having to resize the window.
steps to reproduce the behavior: 1. create a new project 2. open a large xml file that can be generated by ida.
i have 1gb of this file 3. ghidra only knew that he was binary
steps to reproduce the behavior: 1. apply this patch phofhyperlink to rebuild the project, and move `build/os` to `os`.
2. import and load `chrome.exe` in ghidra.
steps to reproduce the behavior: 1. download ghidra 2. point to jdk 3. run ./ghidrarun 4. see error
steps to reproduce the behavior: 1. go to 2. run ./ghidradebug 3. wait for errors and terminate with ctrc-c 4. see error: error error: uncaught exception!
illegalargumentexception - window must not be zero window must not be zero at ~[?:?]
steps to reproduce the behavior: 1. go to `edit`->`tool options`->`key bindings` 2. search for "recently used" 3. remove the keybinding or set a different key 4. observe that the new keybinding is used 5. restart codebrowser 6. observe that the default keybinding is used again (`y`)
steps to reproduce the behavior: 1. fetch the executable for my as found here: phofurl 2. decompile it with everything default
steps to reproduce the behavior: i used windows defender's `mpengine.dll` for testing: phofurl phofurl i ran exact function instruction matcher and exact data matcher against versions and
steps to reproduce the behavior: 1. double tap in the code browser e.g.
2. move the mouse slightly before the context menu appears
steps to reproduce the behavior: 1. import a macho 64-bit exectuable on e.g macos 10.14.3 2. enable loading of external libraries 3. observe failure to load libraries phofcode
try to disassemble: - jr $ra - jr $t9
steps to reproduce the behavior: 1. open any application with the codebrowser tool.
2. find an operation that looks like a structure member dereference in the decompiler.
3. right-click on the offset from variable to member field and select "auto create structure".
4. see error failed to create structure variable database support not provided for highconstant tat tat tat tat method)
steps to reproduce the behavior: 1. navigate to 2. search for something in the search input field 3. click some result line 4. see error
steps to reproduce the behavior: 1. open a binary in codebrowser (in this instance, i've used windows' own notepad.exe, but have encountered the issue on every binary).
2. navigate to the entry point, and hover over a local variable or parameter name in the listing window.
3. a subsequent click within listing window will cause corruption.
decompile this pattern: phofcode the code is decompiled as: `if(false) { ... }` once the dead code removal is deactivated.
steps to reproduce the behavior: 1. go to the function signature in the decompiler window.
2. click on `void` in `funcname(void *this, ...)`.
3. press `ctrl-l` (or select "retype variable" from the popup menu).
4. enter `cfoo *` in dialog (where `cfoo` is a previously created, and recognized in this dialog, data type).
warning message box appearing next.
6. see error message box containing following error (copy-pasted from log window): `(retypevariableaction) retype failed: failed to re-type variable 'this ': parameter commit failed for function at 75ca063a`
steps to reproduce the behavior: 1. set pdb path to a symbol server with symbol folder hierarchy enabled.
2. run the pdb analysis.
ghidra tells me that the symbol could not be found.
steps to reproduce the behavior: 1. use homebrew to install xz (brew install xz) 2. create a new project in ghira 3. import the xz binary into ghira 4. leave the default import settings 5. see the below error: `----- loading -----` `skipping segment: __pagezero (xz)` ` -> not found` ` -> not found` 6. look for referenced libraries: `$ ls -l `-r--r--r-- 1 user staff feb 9 17:06 `$ ls -l `-rwxr-xr-x 1 root wheel 60880 jan 15 17:21
steps to reproduce the behavior: 1. create a new project in ghidra 2. unzip and import the attached file, bigstack.zip phofhyperlink to the project 3. open bigstack.bin in the codebrowser 4. when prompted to begin analysis, press yes and accept defaults
steps to reproduce the behavior: 1. copy an arbitrary portable executable file named "cmd.exe" into a folder, for instance: c: test .
2. open a command line and go to the choosen folder.
following the same example: cd c: test 3. execute ghidra from the command line: 4. create a new ghidra proyect.
5. add a portable executable into proyect.
6. open added file in "ghidracodebrowser".
7. go to "window", and then to "python".
6. wait until your arbitrary file "cmd.exe" is executed.
steps to reproduce the behavior: 1. go to "memory map" window in the code browser 2. click on "+" button 3. set type to "byte mapped", set source address, new memory region address and size and click ok 4. back in the "memory map" window, click the "+" button again 5. set type to "byte mapped", set source address previous byte mapped memory region, set size and new memory region address.
6. go byte mapped memory region set up in step 5 and attempt disassemble instructions there
steps to reproduce the behavior: 1. store several instances of varnode in a hashmap, notice that duplicate keys appear.
2. open in an editor, notice that the equals ' implementation is wrong (== instead of equals on spaceid comparison).
steps to reproduce the behavior: 1. file -> parse c source... 2. attach a header file (.h) with array that doesn 't contain comma after the last element (see example below).
3. click "parse to program" button.
steps to reproduce the behavior: 1.
`head 2. note the errors in the header
steps to reproduce the behavior: 1. go to search in the menu tab 2. click on 'memory ' 3. type out any aob with a wildcard.
i used '64 a1 ?
4. click 'search all ' 5. notice that the search results only give 64 a1 00 00 00 00 results.
stack0.zip phofhyperlink in main rename stack local_54 to anything.
variable assignments and predicates change
steps to reproduce the behavior: 1. install ghidra in a read-only location (like program files) 2. import a file in a new project 3. in the import dialog, press "options..." 4. see error
steps to reproduce the behavior: 1. create a project, and close it.
2. put an xxe payload in any of the xml files in the project directory (see screenshot for example).
4. observe your payload doing its thing.
the same concept works with archived projects (.gar files) too.
steps to reproduce the behavior: 1. create a new project.
2. import "elf_main.bin": phofurl 3. run auto analysis with default settings.
steps to reproduce the behavior: 1. compile this code with the default c compiler on macos: phofurl 2. open the compiled file with ghidra 3. choose all the default options and let analysis run 4. this is error i get: > failed to create "no return" function at
simply decompile any code that is referencing a class.
steps to reproduce the behavior: 1. download the elf here: phofurl 2. load into ghidra with all the default options 3. go to 4. see 04 c0 04 08 addr srand = ?
steps to reproduce the behavior: 1. activate inverted color mode 2. use metal theme
steps to reproduce the behavior: 1. compile this code: phofcode 2. load the compiled code into ghidra.
3. view the rendered string in the "defined strings" window.
also any time you select a menu item such as file open, codebrowser or anything that opens a dialog will also open off screen.
steps to reproduce the behavior: 1. open the code browser tool.
2. use "edit|options for ..." menu item.
3. select "analyzers" node in the tree on the left.
4. select "pdb" in check-listbox in middle of window.
5. enter a valid existing path into field on right.
6. observe that "apply" doesn 't light up (i.e.
7. redo steps starting from second one to see that entered value hasn 't been taken into account.
steps to reproduce the behavior: 1. import the `cp` elf binary into your project (default settings).
2. right-click it and click `export...` 3. select `binary` as the format.
5. make the exported binary executable.
steps to reproduce the behavior: 1. go to phofurl 2. scroll down to 'getting started' 3. click on developer's guide 4. see error
steps to reproduce the behavior: 1) auto-analyze a semi-large program with the "_windows x86 pe exception handling_" pass enabled 2) watch as the "windows x86 pe exception handling" pass takes forever to complete.
(for me, it was around ~6 functions per second out of 10000 functions to analyze)
steps to reproduce the behavior: 1. follow the steps on phofurl to compile the hello-world executable 2. import into ghidra and auto-analyze with default options
- acquire hidpi machine - set gdk_scale=2 or higher - launch ghidra
playground link: phofurl 1. click `navigate leak` 2. click the button on the new page - it will set the page background 3. go back -> the background on start page is also set
1. create a nativescript with angular project.
3. create two buttons on a page.
4. add the `h2` class from the theme and a custom `hello` class on the first button.
5. phofcode 6. see that first button has a bottom margin that is only removed if we uncomment `margin-bottom: 0;`.
` <actionbar title="tab" class="action-bar"> </actionbar> <gridlayout> <gridlayout> <tabs #tabs selectedindex="0" <tabcontentitem <page-router-outlet name="maintab" style="margin-top: 20; margin-bottom: </tabcontentitem> <tabcontentitem <stacklayout> <page-router-outlet name="secondtab" style="margin-top: </stacklayout> </tabcontentitem> <tabcontentitem <stacklayout> <page-router-outlet name="carstab" style="margin-top: </stacklayout> </tabcontentitem> <tabcontentitem <stacklayout> <page-router-outlet name="profiletab" style="margin-top: </stacklayout> </tabcontentitem> <stacklayout> <label text="bottom nav content 5" class="h1 text-center p-t-20"></label> </stacklayout> </tabs> </gridlayout> <gridlayout #dragcircle column="0" colspan="5" height="90" width="90" borderradius="45" ></gridlayout> </gridlayout> </gridlayout> `
when the create component button is tapped on the homecomponent, the view is changed to render testcomponent.
when create component button is tapped in modal view, nothing happens.
css: phofcode template: phofcode the result is either a plain black border around the label or the app won 't even build.
however if i change `border-color` to `background-color`, it works perfectly.
`tns create app --ng` 2.
`tns debug ios` 3. open url and make a livesync 4. open the elements tab and change the title.
you will see that it doesn't apply on device/emulator
1. start the application 2. tap the button 3. put the app in background by pressing the home button 4. bring app back to foreground (recent apps) 5. tap first item of list 6. a second tap crashed app appstart: phofimage after navigation: phofimage press home button and activate app (recent apps): phofimage tap first item: phofimage result: second tap:
take an existing nativescript project running 6.1, upgrade to 6.2 using `tns update`.
using the provided sample project: open sidedrawer by pressing menu button in actionbar -> open menu item settings -> use back button in actionbar or hardware button -> try to open the sidedrawer again
1. open the link in the environment section.
2. scan the qr on your phone.
3. click on "open modal"
xml: phofcode ts: phofcode display name & tkpropertyeditorstyle does not work if i put dataform into a modal view but it works well for normal page view.
1. download the sample-project zip.
2. unzip and install dependencies 3. run: `tns debug android` 4. tap press "tap to login" and get navigated to the actual tab-navigation.
5. switch to any tab 6. change font-size either from settings or use adb command: adb shell settings put system font_scale 1.5 7. go to desktop or another app and return 8. observe crash
1. add a textfield to a page.
2. tap in the text field so the cursor is in it (has focus).
3. add a button to the page that calls the navigate code below.
4. navigate to a new page using below code by tapping button: `let transition = {name:"slideleft",curve: "easein"}; let params = {transition:transition}; the bug is present when textfield has focus and transition is specified.
if textfield does not have focus or transition is not defined it behaves properly.
create a blank angular&typescript app in sidekick and run on an android phone.
hold and release the menu button on the phone, the app window becomes half height and status bar disappears and the action bar remains with extra padding on top.
* i have a structure like below.
phofcode ` to reproduce, 1) open radsidedrawer 2) scroll the scrollview 3) tap on the button.
and (tap) event is not firing.
if you tap twice, then it is working on second tap.
i have test 6 android phones.
and one is working well.
the other 5 android phones are not working.
android version of the other 5 phones are 6, 8 and 9.
1. create a component with html: phofcode 2. run `tns run android`
`npm install -g @vue/cli @vue/cli-init` `vue init my-app` select
add "1.0.0" to angular project
1. get fontawesome to work like you normally would.
2. create a new component and add a fontawesome icon in a `<label>`.
3. do `@import '~/_app-variables';` in your new components scss file.
4. see that the icon stopped working (it shows the little rectangle with the x for symbol not found).
1. navigate to "page w/ bottom navigation" 2. navigate to "player two (no transition)" 3. send the app to the background.
4. navigate back with hardware button.
5. send the app to the background.
6. navigate "player two (no transition) `an uncaught exception occurred on "main" thread.
install the angular sidedrawer template and try to change some code in other pages.
(approximately 50% of the time, it doesn't refresh the app.
but cannot find when it doesn't work)
just simply download nativescript tab template and build it as production.
i need a nsdatecomponent as it is a parameter required by the function used to retrive data from healthkit.
phofcode what i get in the console is the following: phofcode which i don't know how to interpret.
i'm not sure if this commit phofhyperlink can be somehow related to my issue.
to reproduce, simply capture (touch) event instead of (tap) on the component being shown on the bottomsheet and it will crash when it is dismissed.
have a list of elements in a scrollview and then try and do a long/fast scroll with a flick gesture.
then try to stop the scroll with tap.
tap event is triggered in ios.
on android it works correctly - scrolling stops, and tap event is not triggered.
clone phofurl select button open modal
1. create app that use tabs 2. select one of the tabs except the first one that is the default selected 3. minimise the app e.g.
open another app 4. go back to your app with tabs phofcode
build a plain typescript app add nativescript-videoplayer plugin add to your xml file: `<stacklayout class="home-panel"> id="nativevideoplayer" controls="false" autoplay="true" height="300" src=" phofurl /> t t</stacklayout>` tns run ios you will see that the video is not there, but you can hear it playing.
change anything in the file (like on the xml page) when the app updates and re-opens, video will be there.
close app manually, and reopen the video (again) is not there, but you can hear it playing
1. have this repo cloned and set-up 2.
`npm install -g nativescript@next` 3. inside this repo: `cd tests & tns run ios`
just get the nativescript-angular radsidedrawer template via cli `tns create` command.
on ios, app has a nav bar at the bottom.
phofcode in a page with a full page list: - open an external app from the app.
contacts,... - back to the list - scroll the list to bottom.
simulator screen shot - iphone xs max at 21 54 29 phofimage => the last item is partly overlapped by nav bar.
try this expression: phofcode this give the incorrect `width = 8`, but it should be `16`.
open phofurl and search names.
get the app from app store and test it.
i really don 't know how to reproduce it.
clone my repository: phofurl phofcode (or whatever emulator you have) it will crash between 3 and 100 iterations of navigating between the map page and the crash-test page.
just open the sample app provided below.
1. clone the nativescript project 2.
`tns create test-bkg-pos` in the same folder where you cloned nativescript 3.
`npm install --save insede the project folder (i.e: `test-bkg-pos`) 4.
change styles of an app of moderate size/complexity.
i haven't tested this on a small app as it's probably not going to take nearly as long but any app of decent size i'd expect this to be an issue.
start the sample app provided below.
start the project and focus the text field.
1. update to latest `ng` cli 2.
`tns test init` 6. modify `tsconfig.tns.json`: phofcode 7.
1. check `bgred` value in console by clicking `get bgred` // you will get `false` 2. click toggle to invert `bgred` from `false` to true 3. check `bgred` value in console again by clicking `get bgred` // you will get `true`
material design icon fonts in tabstrip for tab icons
place a tap event handler on a textfield (or textview) and on its parent layout container.
click on the textfield on a device running ios12 and then again a device running ios13.
on ios12 the order of execution is textfield and then parent.
on ios13 the order of execution is parent and then textfield.
just follow the steps of the gif: - navigate forwards to the tabs-page by tapping the button.
- you can now swipe through tabs but you do not see tabstrip - navigate forwards again by using actionitem - navigate backwards by using hardware back-button now you see tabstrip, but it does not have complete style
use this branch phofhyperlink of the test app.
- navigate to the tabs page - press the second navigation button - return back to the tabs page
routes structure as belowe: phofcode we start on the first page where everything is fine, but when we redirect to the second page where is button with changed 'android-elevation ' property, app crashes.
- create a new app using the tab-navigation-ng template: phofcode - make sure the app works - open - change the first line to `<bottomnavigation selectedindex="1">` wait till the app refreshes and see crash
i am running the following bash script to run the app (including `--env.snapshot` for the second issue): phofcode
* navigate to a new route every second (router.navigate) * change background color of current route in the menu ([class.active]=) * overloading the app with other changes (here other background color changes) (necessary to accelerate the crash)
phofurl rotate device to landscape, tested on iphonex
simply put a listpicker with items in a page in an angular project and run it on an android emulator api 29.
1. checkout phofurl 2. check out the commit: (chore: official versions 5.4.x (ready for release tag)) 3. update the file to use fullscreen mode 4. now run the app in android and navigate to modal view > modal view example 5. click 'enter start date'.
you will see that the view has start date updated.
6. click 'enter end date'.
choose any date after start date.
you will see that view is not updated with selected end date.
now any action you do on app like e.g.
scrolling or going back, screen won't refresh.
but if you just click (without any other action) on 'enter start date' modal will open again.
just run the command "tns run ios".
`vue init <project-name>` select `typescript` and `sidedrawer` sample 2.
`npm install` 4. fix error in `main.ts` file: change `import app from './components/app'` to `import app from './components/app.vue'` 5.
`tns preview` qr code shows and scans normally, but in preview app there is an exception.
open the sample app provided below.
put a view inside a layout and take `pan: pangestureeventdata` deltax and deltay to translate the view with.
app crashes with the exception above.
1. on an app, move between pages using $navigateto with animation (using @tap etc.)
2. suspend app during the transition animation 3. resume
playground example: phofurl 1. run on ios.
result: there is a crash phofcode
playground example: phofurl 1. run on iphone 6. result: the action bar is half visible
playground example: phofurl 1. tap on second tab.
2. tap on third tab.
result: the highlight is stuck on second tab and the page tab isn't slided.
don't really know what to look for here.
testing on both the android studio emulator and genymotion i was not able to reproduce the issue.
also testing on my nvidia shield tablet did not cause any crashes.
i thought perhaps it had something to do with oritentation change, but testing that as well did not make the app crash even once...
build release apk with `tns build android --key-store-path --key-store-password --key-store-alias --release`.
install and open the app.
run an app in the background for which location is on and open another app (app in which issue is facing) then issue will be reproduced
create a button, align it left and set its text to "go".
the error happens here phofhyperlink no easy way to reproduce it as it iseems to be dependent on the device.
just use the sample app provided below and open it on different devices.
set rows/columns with a star/* value from css.
this happens in a tab template.
see issue #6859 for more info.
1. create a new project with: `tns create --ng statusbar-testy`.
2. run the app on an ios hardware device.
unadjustednonraw_thumb_2 phofimage 3. share the internet connection with another device.
4. the status-bar should now be taller.
unadjustednonraw_thumb_3 phofimage 5. go to the desktop or another app.
6. go back to the app.
the layout is now broken (notice list items).
unadjustednonraw_thumb_4 phofimage 7. rotate phone to portrait and back again, to restore layout
copy phofurl to my code base , import and use my-botton view
here is the example css: phofcode here is example markup: phofcode
install the newest xcode 11 beta version and set it as command line preference prepare and run the demo app on an iphone 8 ios 13 simulator and compare with iphone x simulator
run a showmodal with any phofcode .
in the template: `<tabstripitem title="account" in the typescript component: `fontdynamic = "font://&#xf015;"`
phofurl open it on a ios device, just tap anywhere inside the textview and then tap done on your keyboard.
erroneous behavior can be observed in e2e/ui-tests-app -> bottom-navigation -> icon-change example
change root view classname after running the app.
* `observable` is imported from correct one is * `observablearray` is imported from correct one is * `view` imported from correct one * `gridlayout` isn't even recognized for auto import
create a css rule like this: phofcode this rule will log an error from or `length.parse(...)` because of an invalid value.
add a textfield with keyboardtype="number".
the comma button is not usable, even when you set your android device/simulator region to something that uses ', ' as the decimal separator.
is allowed as the decimal input, which is wrong in most regions outside of en-us.
- i start a custom activity using result_code)` - activity shows up as expected.
then either ends the activity or pressing the hardware back button closes / destroys that activity and brought back to the last page i was before calling the custom activity.
in short back to main / default activity.
- then when i press on $navigateback() button which is suppose to navigate me back to previous page it does not work.
if i press on hardware button it does work.
it navigates me previous page but ui not responding clicks.
triple tap on the button from the repro page.
just add an image with an asset that is dynamically loaded [src] as source.
add the following css to any nativescript app phofcode and use this simple layout to see the issue phofcode
to reproduce: 1. have a page that transitions to a second page via an unanimated navigation 2. have that second page transition to a third page via an animated navigation.
3. have the third call frame.goback() to get to the first page.
4. bug should be seen.
bind an observable as an object-inside and try to use it in view 's conditionals js: `page.bindingcontext = { user };` xml: `text="{{ user.isloggingin ?
'sign up for groceries ' : 'back to login ' }}"` following normal use has no problem js: `page.bindingcontext = user;` xml: `text="{{ isloggingin ?
'sign up for groceries ' : 'back to login ' }}"`
- open any modal view - make changes to that modal views xml - save the changes and wait for hmr to livesync the changes
phofurl tap on button in the action bar
menu 'datenabgleich ', button 'download ' should start the download.
create a new project (tested with react-nativescript and plain typescript project - hello world starter template).
set an id for actionbar and add an event handler to it - *in the page navigatingto function code behind...* phofcode
app.component.ts phofcode home.component.ts phofcode home.component.html phofcode home.component.scss phofcode
tns create myapp --ng > create platform > prepare ios > run it with xcode
use and put a listview as the current item-detail and then try to navigate forward to an item-detail with corresponding actionbar.
phofurl * on load you will notice that all tabs have correct colors as per css - the selected one has gold, while the others have red.
* tap on the 1st tab.
this messes up the 3rd tab color while other two have correct colors * tap on 3rd tab.
this messes up color of 2nd tab.
to sum up - `:active:` color is correctly applied but "normal" color is applied only to previously selected tab.
all other tabs have a messed up with some strange transparency.
phofurl go on the second tab and try to focus the field.
phofurl tap on `change` button
phofurl tap on the `change` button
phofurl tap on the `change` button
1. go to dev settings in android device and turn on the "don \'t keep activities" option.
2. start this {n} app phofhyperlink (or any other using frame navigation).
3. tap `navigate` button - the app navigates to other page.
4. switch to other app (doing this will destroy the app 's activities).
5. switch back to the sample {n} app.
6. tap `navigate back` button.
1. create a angular app with styleext scss 2. start the application with hmr (tns run --hmr android --device phofcode 3. edit the component.ts the output error : phofcode and when i open the component again, i see that styleurls has been altered @component({ moduleid: module.id, templateurl: './comp.html ', styleurls: [ './comp.css '] })
upgrade to 2.0.2 and import to your css/scss file
`tns run android --bundle` with vue as the base, save any .vue/.ts source file and you'll see it rebuild in the cli properly, however, the app will not reload with the new code.
phofcode fails in nativescript, but suceeds in js.
using nested-frame-navigation -> tabs root (not yet merged) or just use tabs (2-3 items) with nested frames inside.
1. go to teams tab 2. go back to players tab - fails screen shot at 2 01 28 pm phofimage
have the following markup: phofcode
take a look at phofurl
open pixel 2 emulator make an http.get request using nativescript httpclient
use the following setup (also visible in e2e/ui-tests-app -> tabs -> font icons example): phofcode phofcode with this setup, the font icon isn 't shown on ios.
just add following style to the button element.
use the following setup : phofcode
- add 'use strict'; at the beginning of the script - import - the line that triggers this problem: phofurl
define more tabstripitems than tabcontentitems
the same problem happens on every ng+angular project running on android.
create project with template and move/slide your fingers from (left) side to middle of the screen.
phofcode proceed to building the project as normal, below works with no errors.
`$ tns build ios --env.aot --env.uglify --env.sourcemap --bundle` open up project in xcode, after signing with provisioning profile etc, launch on device.
all builds well but on run fails with reported error below.
use the following snippet (also available in e2e/ui-tests-app -> tabs -> color example): phofcode phofcode
use the following code snippet based on e2e/ui-tests-app -> bottom-navigation -> font-icons example): phofcode phofcode
1. open phofurl 2. scan qr code with device 3. open device log tab
use the following setup (also visible in e2e/ui-tests-app -> tabs -> background-color example): phofcode phofcode
just copy paste below code to your `app.css` and `app.ts` correspondingly.
phofcode phofcode <bountysource-plugin> --- want to back this issue?
using 1. go to _page w/ bottom navigation_ 2.
_navigate to some page (no transition)_ 3. go back -- app crashes with the following exception: phofcode
use the following xml declaration: phofcode
general: 1. add a android back button listener and define property `tries` phofcode 2. close app by using the back button twice 3. reopen app 4. tap the back button again
1. clone git project phofurl 2. run the program on android tns run android --env.uglify 3. please add if this is a same case on ios as well!
open the sample projected provided in the link below.
tap the button "start worker" to start the worker itself and task 3.)
tap button "cancel worker" and you see that script is still running 4.)
open worker.js in project, uncomment task to one containg "setinterval" and comment for-loop task 5.)
rebuild app and repeat steps 1-3 to see that this way, worker gets cancelled.
- a sample tabs page phofhyperlink .
first of all the issue easy reproducible for ios and with gc() call (without gc() it 's exist too, but need more clicks to appear).
it also looks like it 's only ios issue.
open the app and click the button: phofurl <bountysource-plugin> --- want to back this issue?
`npm install -g nativescript` `tns update` `tns run android --bundle` `tns run ios --bundle`
run the sample here: phofurl
try any 204 rest api with returning am working with the loopback backend server.actually loopback returning the 204 rest api response with ( phofurl so the response is going to the error block
1. create a custom component that extends span.
1. add it inside formattedstring
1. click on `change fields values button` 2. update the value on one of the fields in the app 3. click `check value`
build the attached project and select a new listview's item.
- add timepickerfield to xml.
- set minminute=10 in xml.
- set minhour=10 in xml.
set maxhour=18 in tns run android
just initialise a new project using any cli (vue, angular, tns) or sidekick and open the project using webstorm or phpstorm.
in my case i did the following.
`tns create myapp --vue --appid ch.blah.myapp` 2.
`tns run android` (at this point i had other app with same name installed and this run did not update to the new app version) 3. deinstalled myapp manually inside emulator.
`tns run android` --> no app gets installed in emulator.
create a new project with typescript or angular.
add podfile phofcode enable run the app on a real device phofcode
run unit tests app with bundle workflow from phofurl
1. define custom component: phofcode 2. reference it in a page: phofcode 3. build app with bundle workflow
1. clone nativescript repo locally `git clone 2.
`cd nativescript` 3. run setup steps: phofcode 4. open another terminal and create blank typescript project: phofcode 5. link local tns-core-modules in the new project: phofcode 6. execute `tns run android` or `tns run ios` (`uselegacyworkflow` is false in nsconfig) 7. command fails on both platforms with the following logs android: tns run android skipping node_modules folder!
use the syncallfiles option to sync files from this folder.
searching for devices... running webpack for android... clean-webpack-plugin:
* use bundle mode * `tns debug ios` / `tns run ios` (i 'm using simulator) * change scss * wait ... until webpack stops with aforementioned error "unable to apply changes on device: ######.
error is: unable to find free local port.." check background processes: there are two instances of `fork-ts-checker` running.
but maybe this means nothing.
i don 't even know what caused the silent failure, and can 't imagine what 's making it so permanent.
add a leading dashes classname to a view, and attempt to target it with css.
using nativescript-core js, create some views without using any xml.
give the views classnames and create a css class that targets those classnames.
run `tns debug ios`, and update some css.
webpack will respond, but the updates will not be shown.
closing the app and re-opening will still not fix the issue.
1. goto phofurl and preview the app.
status bar should be red.
2. press "go to page 2" button.
page should change and status bar should become green.
3. press "go back using nsrouterlink".
page should change to "page 1" and the status bar become red (that 's how it be).
4. press "go to page 2" and after navigating to "page 2" tap "go back page 1 using page change "page 1", but the color of the status bar will still be green instead of red.
1. clone plugin repo e.g.
`tns run android` 6. now modify autocomplete-common.ts in src folder and save it -- app crashes.
try the provided playground app on ios and open a modal and close it.
you will see that the red area disappears.
but this doesn't happen on android.
to see it working with legacy: `tns run android --no-bundle` to see it not working webpack: `tns run android --hmr`
phofcode if you attempt to double tap on the `testlayout`, the console will show: > `tapped` > `double tapped`
css: phofcode layout: phofcode css-bug phofimage
run that css on 5.3 or older project and button is great on android21+.
with ns 5.4 it doesn't work.
look for the demo as titled above and follow the playground link to it.
`tns test ios --justlaunch` (and 'n' to webpack migration prompt) runs the tests successfully and returns.
(manually remove uselegacyworkflow from nsconfig.json.)
`tns test ios --justlaunch` (and 'y' to webpack migration prompt) migrates to webpack, but does not run tests or return.
instead launches the app, similar to a run command.
apply this style to a segmentedbar: phofcode then call alert().
set `"uselegacyworkflow": false` and use background-images and colors.
i can 't imagine any reason it would happen...
phofcode no shadow on tap (unless is set as well).
tns debug android i 'm not using the actionbarhidden in my application
upgrade first your nativescript cli to v5.4.0 using `npm install -g nativescript` and remove a platform by executing `tns platform remove android/ios` and the error occurs
enter some text into the textfield then hit the space bar twice in order to trigger the shortcut and have a period inserted.
you will notice that the period is not present in label below textfield
`tns cloud build ios --release
`tns create mytestapp --template 2. start ios simulator with version < 11 3.
`tns run ios --bundle` 4. the app is successfully started 5. try to scroll the application 6. an exception is thrown
for now we only have the crash logs from google analytics.
the above screenshots come from the example playground: phofurl - open the app; - tap the text field;
`tns platform add ios@5.3.0` or `tns platform add ios@next` 3.
`tns debug ios` 4. open url in chrome 5. go to elements tab and change some text attribute
you have to add an icon font on a css class.
then you have to put an icon on the label's text property and add the action tap on this label.
browse to this playground project phofhyperlink and preview it.
repo here phofhyperlink with the `libs` directory added and the deps added to the gradle file.
it will fail to build.
the app.gradle file includes two lines not in the kinvey docs.
when i did setup in android studio and tried building against kinvey docs android build threw an error about `annotation processors must be explicitly declared now.
` so i've added two of those to app.gradle but i still cannot figure out how to resolve this type of configuration for a nativescript app build.
kinvey libs here phofhyperlink app.gradle here phofhyperlink
i don't know what causes these problems.
i've found that flex layouts don't like having child content updated mid animation.
i've also found that flex layouts don't like child label text being updated.
it seems mostly to affect ios.
but the point here is: if at any point one breaks the rendering, `resetnativeview()` will do nothing to fix it.
we haven't been able to reproduce the problem in-house, we only have the crash logs from google analytics.
phofcode 1. render a `listpicker` component with a `selectindex` bound.
make sure that the value is available before the component is rendered.
2. bind `selectedindexchange` event and add a console.log 3. render the listpicker component 4. do not touch it 5. you 'll see the event logged even though you didn 't touch listpicker
1. open demo app phofhyperlink using nativescript preview on android 2. use the listpicker to attempt to select element 3. as you select elements further down the list, you'll see increasing jank around 6th item in the list 4. by 10th item, it'll completely lockup the screen for a few seconds repeat this on ios to see that it's not a problem on ios.
also, note that `selectedindex` value on screen does not change ios until you let go of input field.
create an app and run with the newest ios simulator (12.1): main-page.xml phofcode main-page.js phofcode
load a view with the following code: phofcode
1. use `startmonitoring` function; 2. run the app on ios simulator; 3. turn off wifi on mac; 4. turn on wifi on mac; result - `startmonitoring` does not return any value
storing a timestamp from a date in application-settings using the `setnumber` method results in one of the above issues.
the same is true for values where high precision.
after creating clear project remove `hooks` folder and run `tns install`.
open the sample project -> close -> relaunch app.
(can use emulator or device)
1. create the a background service and send a custom message via broadcast 2. register a local broadcastreceiver to receive the message 3. the message is never received
- run phofurl - tap open modal - tap close modal
- i did not succeed in reproducing it on a blank app, but the garbage collector is probably less often triggered with an empty app.
do you have any tips to help test this kind of case?
install the (typescript) version of the drawer navigation template by tns-bot (tns create my-app-name --template run "tns build android" from the app root folder, then run "tns run --device "xxx (your device id here) to install the app on your android phone, launch app, use overview button to switch to another app, return to drawer navigation app (mydrawerts) and select a new page listed on drawer nav component.
1. add ``, ``, ``, ``, `` or other extended unicode character anywhere inside the xml of your app 's initial page (for example inside `label` 's `text` property).
2. add `<textfield to the same page.
basically, make liberal use of the layoutbase.addchild() and removechild() functions on ios.
eventually they start falling apart.
i am unable to consistently reproduce this issue.
i know it has something to do with removing child views and adding them.
it would appear to be an issue specific to ios perhaps removing native views (setting it undefined) under different circumstances from android.
tns deploy ios --device using sidekick produces the same issue above.
setup nativescript and got a clean bill of health from tns doctor.
i created a new nativescript project per the documentation like this: tns create helloworld --template tns-template-blank-ng and then ran tns run android.
then used the nsconfig.json uselegacyworkflow: false to make sure hot reload was on all of the time per the docs for 5.3 and ran tns run android.
switching back by removing command from nsconfig.json doesn't fix this issue.
add phofcode gesture on view and add a subview like a label or a listview
i have used: tns debug ios tns build ios i have removed hooks, node_modules and package.lock.json.
i have cleared the tns cache i am getting an error on the 5c from the video recorder package mar 25 iphone-5c <notice>: js error typeerror: ex.getmessage is not a function.
(in 'ex.getmessage() ', 'ex.getmessage ' is undefined).
this error does not occur on the iphone x
i honestly don 't have a clue what specifically makes this bug occur.
i suspect its related to recently upgrading to "tns-core-modules: 5.2.2" as we weren 't having these issues a few weeks ago, but i could be wrong.
the best i can give you is that it happens on initial page load and persists until you interact with the page, at which point the page will be formatted correctly.
if it helps, we are also using flat="true" on all of our action bars.
hi, i need to be able to show in a radlistview 7000 elements with cached images in an optimal way.
currently the url of the image is / imagen.jpg.
but when you go displaying products in the view it becomes corrupted.
1. add the to `devdependencies`: `npm i --save-dev` 2. add `references.d.ts` to the root of the 'modal-navigation ' e2e app with the following content: `/// <reference />` 3. change this lines phofhyperlink of 'modal-navigation ' e2e app to: phofcode
just add this to startup of the project `const platformmodule = `var test = { uuid: }; console.log("asdasdasd", json.stringify(test));`
in any component import any other module or component you need with this way: phofcode instead of: phofcode
use the same steps described in the gif
create a flexboxlayout that contains a row with two label elements, the first with flexgrow=1, the second one with flexshrink=0.
give the first a very long content, so that is has to be truncated.
please check the home component of how its set-up.
once build, just start it up and scroll all the way down in the scrollview, you will see that the scrollview falls behind tabbar.
please do test it on different devices (with and without safearea's) and different ios versions.
refer to the nativescript playground demo linked below.
phofurl try on android and ios
1. define a frame root for your app (default page contains no frames i.e.
we have single frame scenario) 2. navigate to a different page that contains additional frame (i.e.
we now are in a nested frame scenario) 3. navigate back with android hardware button -- the exception above occurs
i have attached a sample project.
in a nativescript angular component, create a webview: phofcode and a corresponding function in the component: phofcode if you set `src` to a working url, this outputs `finished.
error: null`, but if the hostname doesn 't exist, loadfinished is never called.
1. define a frame#1 root for your app (default page contains additional frame#2 i.e.
we are in a nested frame scenario) 2. from within the page loaded in frame#2 lookup the parent frame#1 and navigate to a different page (that contains no frames i.e.
we are in a single frame scenario) 3. navigate to still other page that contains no frames i.e.
single frame scenario 4. navigate back with android hardware button.
5. try to navigate forward or back -- nothing happens.
just monkey test an android app and open/close modals after navigating in/out of different sections/routes ... this is specifically related to angular integration and may only happen more frequently with angular integrations.
i've seen this happen in every nativescript angular app at random.
- i did not succeed in reproducing it on a blank app, but the garbage collector is probably less often triggered with an empty app.
do you have any tips to help test this kind of case?
run following playground example: phofurl
open any app that uses location services in the background (nike run club, google maps), and navigate back to the application built with nativescript.
this is occurring on device, iphone 8 but i don't have another physical device to test on.
i created a playgound app to reproduce, but you cannot reproduce the bug there because you have to click on launcher icon of your app.
therefore download and extract it, build and run on android to show the behavior the sample app logs the domid of frame via loaded-event of frame and also via button.
run project with cmd : tns run ios
build a component with a radcartesianchart or a radpiechart and change one property of an item.
after modal is open, show an alert dialog inside that modal's component.
it doesn't show an alert dialog even though it works in android.
after app is opened press `back` button to "close" app.
then run (resume) app again by pressing app icon.
contact me @adjenkov for reproduce.
open app, login, go to list view, select list view item, click button to navigate a second time, click back button in action bar.
all navigation buttons stop working after that.
apply the following styles on any ns layout.
`border-radius: 50%;` `border-color: #dcdcdc transparent #dcdcdc transparent;`
start a phone call, open a nativescript app with a tabview
you can visit phofurl and add @tap="fabtapped" to each fabitem and implement method with a console output.
try expanding the fab item group and clicking on them, theres no action nor event initiated.
npm install -g nativescript tns create newapp --ng
- create a view with a textfield and a button - add a blur event on the textfield which executes `console.log('blur');` - add tap event on the button which executes `console.log('tap');` - place your cursor in the textfield click the back button to hide keyboard click on button the console will log tap, not blur
2. set `textfieldhintcolor` first 3. set `hint` after this
run this playground phofhyperlink on ios.
tap on any of the fields.
keyboard doesn't show (as expected).
minimise the app and then get back to it.
don't wait for it to fully load, tap quickly on some of the fields.
you can now change the text.
git clone phofurl cd nativescript-pdfview-ng cd publish bash pack.sh
i was running the emulator (using a webpack bundle), focusing on ipad.
so i ran: `$ tns run ios --device "ipad pro (12.9-inch) (2nd generation)" --bundle --env.development --env.uglify --env.aot ` the emulator ran for about a day and a half (ie, 36 hrs+) before the behavior began.
the computer was asleep periodically during the time, but the emulator was not closed.
_copied from original issue: <bountysource-plugin> --- want to back this issue?
just run the sample project
1. input some text 2. input newline -- textview resizes properly but content shifts up and gets partially clipped 3. input newline -- textview resizes properly and content offset is ok -- content visible
* load up app * scroll to the bottom * rotate * scroll to the top and observe text and container overlapping
make sure the `transition` property in main-view-model.ts is enabled.
press the icon to navigate to new page and then navigate back.
try to press the icon again - page should be frozen.
just replace your `app.ts` with this: phofcode <bountysource-plugin> --- want to back this issue?
create vue project phofcode in home.vue add class to the following line `<span class="newcolor" :text="message"/> ` in app.scss add phofcode
i couldn't find a minimal example for error reproduction, so i've created a playground sample similar to my real app with a testing datasource.
i'm receiving the error in the playground sample.
1. tap "player two" and then go back to players list (via arrow or hardware button) (nested frame navigation and back) 2. tap "navigate to some page" and then go back (via arrow or hardrware button) (parent frame navigation and back) 3. try to tap "player two" again (nested frame navigation) -- app crashes with: phofcode
` login({ title: "login", message: "sign in using your credentials", okbuttontext: "sign in", cancelbuttontext: "cancel", usernamehint: 'email ', passwordhint: 'password ', username: this.logindata.email, password: this.logindata.password }) `
` login({ title: "login", message: "sign in using your credentials", okbuttontext: "sign in", cancelbuttontext: "cancel", usernamehint: 'email ', passwordhint: 'password ', username: this.logindata.email, password: this.logindata.password }) `
please see the example down below.
hit the `change tab via ngmodel` button in the demo below and the tab is switched with a slide animation.
it happened after i created a pipe and this had an error, so i removed the pipe and added the transform in the controller instead.
this is what it looks like on our moto x play: phofimage
here is the css property i added.
<code> #backgroundimage{ background-image: url("~/images/bkg.jpg"); background-repeat: no-repeat; background-position: center; background-size: cover; } </code>
i created an angular project and tested it using a genymotion emulator with android 8.0
programmatically create an element in ts and apply a class with element.classname = 'myclass'
app.css phofcode app.component.html phofcode app/src/fonts/ phofcode
simple code would be: html: phofcode ts: phofcode the grouptapped() function here will register a tap on anywhere in the group--it will not tell you if the user has clicked on a category header.
on the parent element of an html component, set `margintop` to some negative value.
1. add an image to your xml file, like this: <image src="{{ base64encodedimagesrc }}" class="border-def" /> 2. in css, add a border definition like this: .border-def { border-width: 2; border-color: #ffffff; border-radius: 45; } in my case, my border-radius is 45 because my image height and width are 90, so it 's an effective border radius of 50%.
place a `listview` inside a `stacklayout`, then listen to the stacklayout 's `tap` and listview 's `itemtap`, the function binded to the `itemtap` won 't be called.
in the example below, `taphandle()` is never called unless you remove `(tap)="parenttap()"` phofcode
simply create the tabview sample project using nativescript website phofhyperlink or using github repo.
tap on a list item and go back.
1. create app from blank template 2. add new page second-page.xml 3. add the following application.resumeevent handler to app.ts: phofcode 4. start app 5. suspend app 6. resume app -- crashes originally reported by @nudiref here: phofurl
i 'm using angular reactive forms if that 's at all related but does the same on playground so probably the same everywhere phofcode
- launch sample application ( phofurl ) - move to the second page (inside nested frame) with next button - minimize the application with "home" button - restore the application from recents menu try to navigate to startpage (in the topmost frame)
- create an app with a label (mine was angular based) - provide the label `text` field with a number (in my case in the form) - you can provide the field with for control sample to see that it will work
i 've created a minimal repro in the playground using the icanhazdadjoke api.
tap "the button" to load a dad joke.
you 'll see that the message changes to "we loaded it!
", the status code is 200, and data gets filled in with joke.
now, put your phone into airplane mode and tap the button again.
despite not having a connection, it calls success handler again, so message still becomes "we loaded it!".
as you can see though, status code is `null` and data is empty.
run the provided sample code.
either look at the console of the ui
i am using the following to test: phofcode
tap "navigate to some page" -- notice how the "players" part of the page disappears immediately instead of transitioning away with the rest of the view.
this examples writes tap on the console everytime i tap with my finger on label1 when i run it from the playground or with the command "tns preview" but if i run it with "tns run android" the "tap" is only written sometimes.
eddystone beacon using a g google beacon app.
1. tap "navigate to some page" -- notice how the "tab" part of the page disappears immediately instead of transitioning away
1. create a nativescript typescript project with webpack 2. run `tns debug android` or `tns debug ios` 3. change one of the typescript files
1. tap "navigate to some page" (parent frame navigation) 2. go back via hardware button (parent frame back navigation) 3. tap "player two" (nested frame navigation) 4. suspend and resume the app 5. tap "navigate to some page" -- app crashes with exception above
1. tap "player two" (nested frame navigation with default transition) 2. tap "navigate to some page" button (parent frame navigation with slide transition) 3. go back via hardware button (parent frame back navigation) 4. nested frame content is missing (i.e.
player two details are missing from the home page)
1. tap "player two" (nested frame navigation) 2. tap "navigate to some page" button (parent frame navigation) 3. go back via hardware button (parent frame back navigation) 4. go back via "arrow" button to the players list (nested frame back navigation) 5. tap "player two" again (nested 6. try to suspend the app -- app crashes with the exception above.
create a listview with a stacklayout large enough to go off the screen and then scroll to the bottom of the list.
phofcode result logs are: phofcode
scroll the page and see the title change color between its large and normal versions.
add a scrollview layout (horizontal) and let's call it as a parent layout.
add multiple flexbox layouts inside it.
add a background color to each of these flex layout & add some margins on the right to separate these.
the last flex layout which is visible on the screen and is being cut off slightly will merge with the next flex layout(the one which will be visible when scrolled in).
it's right margins don't work!
p.s it's not just flexbox layout, i've tried all the layouts inside scrollview.
whenever i apply a background to child layouts and add margins to separate them, element which is being cut off gets merged into next one.
this happens only on ios, android works pretty fine.
i want add padding or margins between these layouts mimic google material card.
phofurl visit this on android, then visit on ios.
on ios, the button stays behind the layered layout.
i 've included a possible workaround.
> tns build ios - open ios project in xcode, - open memory report in xcode - on device click on "example loop" 2-4 times - or click on "loop 10x" reserved memory hasnt gone in memory report, if you reach limit of memory app crashes
add nested tap events to the objects, a label with a tap inside a stacklayout with another tap is enough, the stacklayout event will be fired even when the touch is on the label.
see playground link provided below.
the page loads with a form.
use a source object containing a property of type array.
then provide a converter for the property converter to handle that type.
the converter will never be called and the error will occur beforehand.
- fresh install nativescript from npm - do "tns create foo" - select vue when asked - install nativescript playground and nativescript preview on android phone do tns preview scan qrcode using playground preview shows exception
i followed the instructions in advanced setup guide in nativescript website phofhyperlink .
i didn 't install packages online.
i downloaded them separately and copied them to corresponding temp folders so chocolatey could find them.
i didn 't install avds that day.
running `tns doctor` returned a checkmark.
clone blank template (tns create my-blank-js --template tns-template-blank) add page-two.js & page-two.xml files (see below) modify home-page.xml to add a label with a tap to home-page.xml modify home-page.js to export a function to navigate on the tap run the project in the vscode debugger tap the 'go page two ' label get exception [above] - here is full console output phofcode
follow instructions for nativescript-plugin-seed phofhyperlink 2).
add latest version of onfido 10.1.0 phofhyperlink to phofcode podfile.
app crashes and no errors are present.
home.html: <flexboxlayout> <stacklayout #container orientation="vertical" (loaded)="onloaded()"> <label text="test"></label> </stacklayout> </flexboxlayout> home.css: flexboxlayout { justify-content: center; align-items: center; background-color: aquamarine; } stacklayout { width: 300; padding: 20 20; background-color: bisque; border-radius: 8; } home.ts: .... export class homecomponent { @viewchild("container") container: elementref; onloaded() { let container = container.scalex = 0; container.scaley = 0; container.animate({ scale: x: 1, y: 1 }, duration: 1000, curve: animationcurve.easein }); } } ....
try to scroll through the list on android in this playground sample, then try on ios.
its very specific, you should see the playground to have a better understanding
take any sample app, in vscode with nativescript, modify launch.config of visual studio to add tnsargs["--hmr"] hit f5, change the code or xml files notice the app close after each file save instead of remaining open.
i installed the latest node and the np m. android studio is installed on the computer with all sdk 's.
following the steps here phofhyperlink i ran following commands: 1.
`npm i -g @angular/cli` 2.` npm i -g 3.
`ng new sass-project --shared --style=scss` 4.
`tns run android --bundle` i also tried using nativescript sidekick at step 6 on a different attempt.
i have also tried installing all packages to their latest using `@latest` have also tried cloud building both from terminal using tns cloud run android --bundle as well as using nativescript sidekick.
$tns create test $cd test $tns run android --bundle
start a new project from the template and run `tns preview --bundle`
`tns run [android | ios] --hmr`
run tns run android --hmr, navigate to another page where you have a method implemented with a console.log as an action of a button.
click a button, see consoel.log.
change something in the component and wait for webpack to replace it.
try clicking the button again.
phofcode this produces the above error
phofcode this produces a bunch of compile errors.
change `package.json` to use typescript 2.8.4. the project now compiles.
<bountysource-plugin> --- want to back this issue?
run the project on devices 10.2 and more to see the difference.
just add a label with following text " ".
just compile with webpack 0.17.0
here is what i am doing: phofcode the provided url leads to a sample webservice from phofurl phofhyperlink and the delay is set to 10 seconds.
open the provided sample app and tap the button.
it will start the http request and after about 10 seconds, you get an alert with json response.
run the sample project below (created from a basic `tns create --ng` command).
observe the starting page 's listview.
scroll around and observe the wrong icons for each item.
phofcode <bountysource-plugin> --- want to back this issue?
see the playground example below on android.
phofurl scroll a bit, open recent apps, resume, the scroll goes back to 0
1. create new app using angular template `tns create app --ng` 2. add unit tests 3. run the unit tests `tns test ios`
just add these components and run the app, you will still be able to type inside the search box: `<searchbar isenabled="false" />` `<searchbar />`
add button and style with textwrap="true" , line-height and text-aligment:center.
`.btn-test{ text-align:center; line-height:40; }` the first screen shows the button without using the line-height, only with textalign = center.
the second screen shows the use of the line-height with textalign center.
<img width="377" alt="without line-height" src=" phofurl <img width="375" alt="with line-height" src=" phofurl
open any tab other than the first tab of a tabview layout, and make some changes to that file, when you save the file, after hmr does its thing, the tabview always switches to the first tab.
some sample code that causes this error for me: `const dialogs = require("ui/dialogs"); dialogs.prompt({ title: "test", message: "test", okbuttontext: "ok", cancelbuttontext: "cancel", inputtype: dialogs.inputtype.text }); ` and my package.json: { "description": "nativescript application", "license": "see license in "readme": "nativescript application", "repository": "nativescript": { "id": "com.funfangle.pos", "tns-ios": { "version": "4.2.0" } }, "scripts": { "lint": "tslint "app/
the issue is very easily reproducable by creating a new ns angular app using `tns new <app> --template=angular`, then adding a `canactivate` guard to the "items" route.
then running `tns run ios`.
checkout playground example phofurl here i have given two stacklayout with and without horizontal orientation and you can see the difference.
launch the video file picker and select a video from the gallery, it does not always happen but surely if you do it 5 times repetitively you will find the error.
phofcode run the code and see that `sum` will be `{price:10}` on the first iteration.
however, if we didn 't pass an initial value as a parameter this would be the expected behavior.
to reproduce the issue in the playground follow the steps bellow: 1. create new js project (using hmr) 2. scan qr code 3. in `home-page.xml` drag and drop segmented bar, wait to sync 4. delete the added segmented bar, wait to sync 5. add it again you can then download project start it with `tns run android/ios`, remove segmented bar and add it again and same error will appear.
<bountysource-plugin> --- want to back this issue?
create a webview, include an <img> tag and set the src= property to a local folder, i.e, `<img src="./marker_r.png" >` an external image will display properly on an ios device, a local image will not.
create a listview with an item and add a basic itemtap, add a tap action over a parent element and try in the tap action to dismisssoftkeyboard on android.
1. initialise development instance of tns-core-modules as described in the docs phofhyperlink 2. create demo project: `tns create demo; cd demo` 3. link the development instance of tns-core-modules to your app: `npm link tns-core-modules` 4. try to run the app on any platform: `tns run ios/android`
simplified test case: test case phofhyperlink steps to reproduce: 1. attempt to set the `accessibilitystate` of a `<touchableopacity/>` by providing an object per rn docs 2. open dom inspector and inspect the touchable element 3. the element does not have the appropriate `aria-*` attributes <img width="1039" alt="screen shot at 2 31 37 pm" src=" phofurl <img width="1005" alt="screen shot at 2 33 24 pm" src=" phofurl
simplified test case: phofurl steps to reproduce: 1. create a view with flex one with three view children 2. first view and third view should have a fixed height, middle view should be flex 1 3. put a flatlist or scrollview inside the middle
set `autocomplete` prop to "off".
steps to reproduce: 1. set `autocomplete` prop to "off"; 2. watch in browser to input `autocomplete` prop;
steps to reproduce: 1. run `webpack --mode production`
i notice that doing `window.open(' phofurl doesn't group the tabs in the chrome task manager, and doesn't result in the bug.
simplified test case: phofurl steps to reproduce: 1. run example.
phofurl steps to reproduce: 1. open sandbox from this link: phofurl 2. open chrome dev tool 3. press on the text "touch me!"
and you will see errors on console
phofurl steps to reproduce: 1. open codesandbox in firefox 2. type inside textinput without keyboardtype="numeric" 3. add keyboardtype="numeric" and check the input again
simplified test case: since it relates to ssr on online reproduction isn't practical.
we can create a minimal repo if needed.
here's a repro: phofurl it's a create-react-app using react-native-web components.
works fine in dev, errors when running the build.
can see the error live here: phofurl or run `serve -s build` locally.
also to note: this is using v0.11.7.
i downgraded to 0.10.1 and it worked.
so possibly related to phofurl
render an `<image />` component without explicitly setting the draggable prop.
note in the browser how `draggable` is set to false.
also, note the code phofhyperlink
steps to reproduce: 1. run `npx create-next-app --example with-react-native-web` 2. access htttp://localhost:3000 3. disable javascript execution on the browser 4. see that none of the css classes are there at this point 5. test again with javascript enabled 6. see that all classes are there
phofurl steps to reproduce: 1. open sandbox 2. run test 3. see that the one for `click` fails while the one wiht `touch` works
steps to reproduce: 1. create a react app: `npx create-react-app test-app --typescript` 2. in that app do `yarn add git+ phofurl 3. modify the app.tsx file: phofcode _bonus_ notice that if you use a `react-native init` style project and `import { rnwbutton } from (after doing the same yarn install) the library works properly.
it responds to the `onpress` properly which is expected.
go to react-native-web examples pages of textinput and test the numeric keyboard type by typing "e"
to reproduce just render a `flatlist` with enough items to make it scrollable on firefox 68 using the props you'll see that the scrollbar is still visible on firefow 68 (64-bit) while on chrome 75 (64-bit) it does work.
here is few screenshoots of our project.
just import share api from react-native package and run it locally.
if the issue is related to browser version then it should throw the same error upon sharing.
steps to reproduce: 1. import share from react-native package.
2. use the share api to share a desired message.
3. upon calling the api, it should throw an error saying "share is not supported in this browser".
simplified test case: link phofhyperlink steps to reproduce: 1. add a textinput 2. add multiple text tags inside it
steps to reproduce: 1. create an application with server-side rendering that includes an image with a tintcolor style 2. render a page a few times without restarting the server or application
simplified test case: dev: phofurl prod: phofurl steps to reproduce: 1. add child nodes to the targeted dom element.
3. see app appended to child node.
simplified test case: phofurl steps to reproduce: 1. open on ios safari on a real device: phofurl 2. pinch to zoom sometimes 3. see the value updates sometimes, and easily gets wrong
execute this piece of code phofcode
steps to reproduce: 1. phofurl 2. click on " <image >" 3. see a white page
put a `text` with a `onpress` callback inside a `touchableopacity`.
demo (rnw): phofurl demo: (rn): phofurl (see logs in demos)
example: phofurl steps to reproduce: 1. create a clipped text with `ellipsizemode` different than `tail` phofcode 2. the text is always clipped with ellipsis regardless of the mode (head, clip...)
simplified test case: phofurl steps to reproduce: 1. create a view with a pan responder 2. add children at a non-origin position in the view 3. tap and move on the parent view 4. observe the locationx and y coordinates are correct 5. while keeping your finger pressed, move over the child view 6. the locationx and y coordinates are relative to child
a simple component can be found here: phofurl 1. type aaa in the text input 2. type arrow up 3. the cursor has moved to the beginning of the text input
simplified test case: phofurl steps to reproduce: 1. add a border to a text 2. no border will appear unless you clearly set the `borderstyle`.
simplified test case: phofurl phofcode
have not had time to create and test an isolated case yet.
with edge access this might be more clear, but hoping @necolas 's previous experience in #1300 might help shed light.
simplified test case: in phofurl text has notice that the text component has the following styles applied to it: phofcode the rendered output shows underlined text, but the color of the underline is black.
phofurl simplified test case: phofurl steps to reproduce: 1. create a stylesheet with property `shadowtext` using `react-native-web` 2. apply the style to a `view` element from `react-native-web` 3. get a warning message telling the property name is wrong.
_(codesandbox doesn't have webpack)_ relevant webpack config is: phofcode i tried adding `exclude: / .native .js$/` but it didn't change anything.
steps to reproduce: 1. create a file with a `.native.js` extension 2. create a file of the same name with a `.web.js` extension 3. run webpack
simplified test case: phofurl steps to reproduce: 1. open html page in edge 2. observed: screen is orange in color 3. expected: screen is violet in color
phofurl it seems there is a new div wrap when using `pagingenabled` and since it doesn't have a full height this happens.
<flatlist horizontal pagingenabled ... /> 2. renderitem with <view style={{ height: '100%' }} ... /> 3. works on 0.9.9, breaks on 0.10.0
1. use a windows laptop and turn on high contrast mode.
2. navigate to a user profile on mobile.twitter.com in firefox, for example.
3. notice the profile image is not visible.
simplified test case: phofurl steps to reproduce: 1. scroll a bit.
2. open the elements panel.
3. observe that the first item is still rendered in the dom.
put following in example code that uses react-native-web: export * from 'react-native '; simplified test case: none steps to reproduce: 1. create sample react-native-web project 2. create new file (like reactnative.js) with export * from 'react-native '; 3. import { button } from 'reactnative '
record a snapshot of the output in the `appregistry` test for ssr-as-function-of-app.
phofcode in the webpack report you should see `react-art` being included, amongst other unwanted things.
<img width="1255" alt="screen shot at 8 12 53 pm" src=" phofurl
`yarn website` 3. errors occur on command line and in the storybook website `localhost:9001`
attempt to pass any all lower-case prop to a "view" or "text" component (i.e.
tooltip="hello") simplified test case: not needed steps to reproduce: 1. attempt to pass a lower-case prop a component
simplified test case: phofurl steps to reproduce: 1. create any view with flexdirection: 'row ', and add children that also have flexdirection: 'row ' 2. add "text" (or any other self-sizing content) to the children 'row ' containers
phofcode steps to reproduce: 1. react native 0.58+ 2. add `<picker.item>` and child of `<picker>`
simplified test case: phofurl steps to reproduce: 1. create a new project 2. create new styles for bar phofcode 3. create a new view that applies those styles with object spread phofcode 4. run project and the `<view />` does not have the styles.
simplified test case phofhyperlink steps to reproduce: 1. just go to the top of the list to load more messages.
2. repeat the process a few time, and things should start to become weird.
from a `react-native` project, i didn 't understand how to setup `react-native-web`.
i used to run the project with phofcode but i have no clue what i should do with `react-native-web`
steps to reproduce: 1. render either of the following components: phofcode phofcode 2. observe the logs and see that the ref never gets set.
simplified test case: phofurl snack: phofurl phofcode > note: i need to add a white backgroundcolor because some images are transparent and were made with light background in mind.
web: phofurl native: phofurl phofcode
with "react-navigation": "3.0.9" simply use createstacknavigator, for example like this: phofcode simplified test case: phofurl steps to reproduce: 1. run the app 2.
simplified test case: phofurl phofcode
not sure yet, because next.js is server side framework.
next.js obviously changed strategy (or bundled webpack), but i don't know if something was fixed or broken.
maybe react native web does not export something correctly (because next.js canary is ofter very stable), maybe not.
feel free to close it, i created this issue so people can google it.
phofurl steps to reproduce: 1. press escape key while focused on the `textinput` 2. nothing is logged
reproducible demo phofhyperlink steps to reproduce: 1. add a horizontal prop to scrollview 2. register a ref 3. use it to fire scrollto, notice that it doesn't work, but works when horizontal prop is removed
a large list, with touchable items, can reproduce the problem.
simple demo: phofcode it is because that horizontal scrollview only allow touch action `pan-x`, so if you move on the horizontal scrollview and swipe down to scroll the outside scrollview, it will fail, outside scrollview does not scroll at all!
simplified test case: phofurl steps to reproduce: 1. add `securetextentry` to a `textinput` field.
phofurl observe the console using the provided resizeobserver mock
simplified test case: phofurl steps to reproduce: 1. render `<image resizemode="repeat" />` with an svg source
steps to reproduce: 1. try to render `<view accessibilityrole="list" />` 2. run on any android device
snack: phofurl (works) codesandbox: phofurl (same code, crashes)
simplified test case: phofurl steps to reproduce: 1. the two textinput are exact the same expect `keyboardtype="numeric"` is removed in the second.
click to foo and see the error.
i suppose this is the perfect use case which should be supported by rnw.
simplified test case: phofurl view in both chrome and safari.
steps to reproduce: 1. use image component with svg in safari 2. error
steps to reproduce: 1. visit phofurl on chrome
simplified test case: phofurl steps to reproduce: 1. clone the test case.
`yarn start` 1. open phofurl disable javascript in your browser.
phofurl steps to reproduce (on mac): 1. turn on voiceover (cmd+f5) 2. navigate to switch using vo keys (ctrl+option+shift+down) 3. toggle switch (ctrl+option+space) 4. observe that the control is read as "unchecked checkbox"
simplified test case: phofurl steps to reproduce: 1. create a sectionlist with section 2. add (should this be default?
it is on ios) 3. scroll sectionlist
simplified test case: phofurl <img width="1154" alt="screen shot at 15 45 13" src=" phofurl steps to reproduce: 1. create an image element and reference a svg file by url (with http)
simplified test case: phofurl steps to reproduce: 1. use `<textarea />` or `<input type= 'text ' />` inside a `<touchableopacity />` tag 2. try adding some blank-spaces by pressing space
live example phofimage phofhyperlink simplified test case: phofcode steps to reproduce: 1. access codesandbox with chrome.
steps to reproduce: 1. build react native web add 2. test animated components 3. displays on storybook
simplified test case: phofurl steps to reproduce: 1. place an horizontal flatlist in a scrollview.
2. try to scroll vertically from the flatlist.
3. the scrollview won't scroll vertically.
simplified test case: phofurl steps to reproduce: 1. go to the codesanbox link 2. type in the input field 3. hit your enter/return key to submit the form
click to button, check console, onchangetext was not dispatched.
i put a simple test case at phofurl where you can see how each row does not expand to the list width.
the list has a fixed width in this case, so i could also put that width on the columnwrapper but in my real case i don't know that value and it could also change (responsive).
yes, i could calculate it on layout if that's the only way, but i'm trying to prevent that
simplified test case: phofurl failure screenshot: phofurl success screenshot: phofurl steps to reproduce: 1. create a `text` element 2. apply styling that uses the `backgroundclip` property 3. watch it fail on chrome, safari, but not on firefox
see code sandbox here: phofurl steps to reproduce: 1. add text to the textinput (setup as described) and hit enter to submit 2. call clear() on the textinput ref 3. call focus() on the textinput ref
create a web application and configure phofcode then use the latest version.
simplified test case: here's an example with 0.8.5: phofurl here's 0.7.3: phofurl also, the 2048 game is affected: phofurl ... although it does correctly pass the touch events.
steps to reproduce: 1. create a <view> 2. assign a function to `onmousedown` 3. function is not called when mouse is down over <view>
simplified test case: phofurl steps to reproduce: 1. inspect the result in inspection tool (e.g chrome) 2. select the `red` box - which include the text "hey, just text!"
steps to reproduce: 1. create a reference to a view 2. call focus() on the ref programatically
simplified test case: phofurl steps to reproduce: 1. press the "add element" button that calls directly to the method of the virtualizedlist that it seems it is accessing reactnative an it 's not defined
simplified test case: create a component a link that project.
then in your web project link the library and use it.
with this code for the panresponder phofcode the function is then given to a regular view component
just using the flatlist with inverted={true} phofurl
phofurl steps to reproduce: 1. go to `<switch>` screen 2. press a switch 3. try pressing it again
- testlink.js phofcode - testlink.spec.js phofcode
`import { platform, share } from 'react-native';`
my code phofhyperlink * os: macos sierra * device: macbook pro (13-inch, mid 2012) * browser: all * react native for web (version): 0.6.1 react (version): 16.1.1
phofcode steps to reproduce: see above.
test case: phofurl steps to reproduce: 1. open phofurl in safari on ios ~~or chrome on adroid~~ 2. click "goto page b" 3. click "back to page a" 4. try to scroll phofcode phofhyperlink
test case: phofurl steps to reproduce: 1. just run the app.
the entire background should be green and hello world should be centered in the window.
current render: screen shot at 3 36 23 pm phofimage
run the one liner bash and install required packages, but then it fails to find a package that isn 't available on the repository anymore
i just found this system like that.
i have made a custom dashboard to show basic data from 7 different servers, including the one that 's running as master.
it is set to continuously update even after loosing focus with: phofcode ` that works, dashboard updates after loosing focus but charts stop updating after a few minutes.
also if started in 2 tabs of the same browser, the default netdata dashboard keeps updating while the custom one stops after a while.
no javascript error or warning in console.
the console shows that when this happens, no further requests to server are made, they just stop.
the javascript is not "dead" as reload code is executed and page reloads as expected.
however automatic reload does not restart updating charts.
only a hard reload with ctrl+r or ctrl+reload button resets everything and charts updates again, until next stop.
after doing quite some tests, **i realized charts stopped updating just that automatic reload**!
i commented out automatic reload code and has now been for 30mn.
the code is standard one: phofcode ` i have now tested with forcing hard from javascript: phofcode ` but charts stop while, exactly as before.
i 'm not sure brave support this location.reload syntax though, mdn unclear that.
any clue to what can cause this and how fix it?
download the latest stable release tarball from github release page and install netdata.
the release_channel written in will be `nightly`
allow netdata to update via netdata-updater (cron.daily).
this may be reproducible by another means, but i can't seem to make that happen.
the server is not sending any alerts.
i used to update netdata via an ansible script that pulled the new code from a git repo, but lately switched to a lightweight docker container option.
by using a tagged version such as `1.18.1` i was expecting to conceptually move from a nightly channel to stable one, meaning that i am no longer asked update every time the is commit netdata master.
however, i still see an exclamation mark next the update button, which looks like false-positive me: <img width="590" alt="update check netdata modal" src=" phofurl
this bug is reproducible only when multiple paths to which `.keep` files are installed resolve to single directory.
in case of default buildroot phofhyperlink configuration this is true for `/var/log/netdata` and `/var/cache/netdata` paths.
`/var/log` and `/var/cache` are symlinks to `/tmp`.
during installation phase two `install` processes are spawned to put `.keep` into `/tmp/netdata`.
this is when the race starts.
installation procedure fails when this happens: 1) `install(1)` check whether `/tmp/netdata/.keep` is already there and unlinks it in that case 2) `install(1)` creates file at `/tmp/netdata/.keep` 3) `install(2)` checks whether `/tmp/netdata/.keep` there and unlinks it 4) `install(1)` tries change permission `/tmp/netdata/.keep`, but it fails because there no such file 5) `install(2)` creates a `/tmp/netdata/.keep` 6) `install(2)` changes permission at the end the directory structure okay, but installation stops, because 4) step has failed.
root@e0df0ae0ac79:/# apt-get install netdata reading package lists... done building dependency tree reading state information... done some packages could not be installed.
this may mean that you have requested an impossible situation or if you are using the unstable distribution that some required packages have not yet been created or been moved out of incoming.
the following information may help to resolve the situation: the following packages have unmet dependencies: netdata : predepends: dpkg (>= 1.17.14) but is to be installed e: unable to correct problems, you have held broken packages.
root@e0df0ae0ac79:/# apt-cache policy dpkg dpkg: installed: candidate: version table: * * * 0 500 phofurl trusty-updates/main amd64 packages 100 /var/lib/dpkg/status 0 500 phofurl trusty-security/main amd64 packages 1.17.5ubuntu5 0 500 phofurl trusty/main amd64 packages
some makefile.am files use both tabs and whitespaces for indentation
run the uninstaller until it says that netdata has been stopped.
switch to another shell and run `ps -a` to verify that it is still running.
enable irc notifications, see alarm reports sent to irc channel but test notification will report error 421 which indicates `err_unknowncommand` and is a false error.
open web interface in firefox, click on my-netdata tab.
1. setup apache vhost on port 443, use letsencrypt ssl cert 2. setup forward from 80 to 443 for all traffic 3. run apache module: phofcode [root@vc-static-01 ~]# rpm -qa | grep ca-cert
have a lot of postgresql databases, and drop one of them....
add following lines to netdata.conf phofcode
1. access netdata dashboard on safari 13.0.2 2. try to open list of nodes in the top left corner
the reinstall_command in is always `./netdata-installer.sh --install /opt`
run the netdata-updater.sh script the netdata-updater script is removed from /etc/cron.daily
perform a clean netdata installation using kickstart.sh.
run the netdata-updater.sh script a reinstallation/update will be performed regardless of whether there is a newer version available or not.
have some invalid method in access.log nginx file.
i tried to reproduce that issue in a completely local vm, but no luck =( but i decided to file issue to find out who else got that behavior.
after the weekend i 'll recompile netdata with debug and post logs.
cflags="-o1 -ggdb -wall -wextra -wformat-signedness -fstack-protector-all -d_fortify_source=2 ./netdata-installer.sh --disable-lto --dont-wait produces the following in the build output: phofcode
- make /opt a symlink like this example: /]# ls -lah /opt` `lrwxrwxrwx 1 root root 7 jun 26 19:26 /opt -> var/opt` - install binary flavor of netadata (which by default installs into /opt/netadata) which in this case goes into the "_physical_" location `/var/opt/netdata` - now try to run edit-config
installed via sh command : `bash <(curl -ss phofurl changed backend settings phofcode restarted the service.
only metrics in the `netdata.apps.
- install mysql, and meet the minimum requirement phofhyperlink , - restart netdata
1. update a collector to change the units on a chart (python.d and charts.d are probably the easiest).
3. notice that the chart still displays the old data prior to switch (as well as new data), but doesn't account for change in units.
run bash <(curl -ss phofurl by root user
put netdata under test using the following command phofcode
1. install in freebsd with mfi adapter 1. add rule to sudo ) 1. start netdata it will print phofcode line from sudo: `netdata all= nopasswd: /usr/local/sbin/megacli`
run `shellcheck` on the files that appear in the image.
run cmake build on ubuntu 18.04 with cmake installed from a standard package.
on a aws ec2 instance running on rhel 7.7 installed with the kickstart.sh and when using memory mode = dbengine in the netdata.conf file
edit `netdata.conf` and set: phofcode and run `./netdata -d`
1. setup hddtemp or sensors 2. create alarms as per above
1. get latest version from git (tested on 1. run netdata with default config and `-d` cli switch 1. press ctrl+c.
1) remove netdata version 1.15 and old dependencies.
2) reinstall using instructions documented here - phofurl 3) edit "bind to" in netdata.conf 4) attempt to "service netdata onestart" without errors.
5) check "service netdata onestatus" to verify that service is not running.
6) run to confirm error in summary.
write nginx logs in format: log_format basic '$remote_addr [$time_local] ' '$protocol $status "post" $bytes_sent $bytes_received ' '$session_time '; sample: +0000] tcp 200 "post" 3129 3060 0.037` have custom format configured in netdata : phofcode
- enable freebsd plugin in the config - run netdata
- open netdata dashboard in full screen mode - see server name
- use nonexistent variable in health expression
run a stress test that generates millions of metrics (#6977)
1. install netdata master to receive stream from slaves.
2. point the registry on the master to itself 3. set a slave to stream to the master and use the master as registry 4. configure alarm notifications 5. click an alarm-link.
it will take you goto-host-from-alarm, which seems check registry if host is known.
if host has not been viewed in netdata, it seems be unknown and error occurs.
update docker to 19.03.2 and run netdata in docker
uninstall an existing install of netdata.
attempt the 1-line install of static binaries with the "don \'t ask" flag: phofcode
`[ = "$(curl -ss phofurl | md5sum | cut -d ' ' -f 1)" ] && echo "ok, valid" || echo "failed, invalid"`
this problem occurred consistently on all 6 machines on which we had it installed.
i suggest, although i did not try: - install latest centos7 (c/w the epel repo) - yum install netdata-1.16.0 - yum update -y
exchange here phofhyperlink from phofcode to phofcode to make it happen again (encountered this bug during an upgrade).
1. log in to netdata cloud account with >1 node associated with it 2. click on the delete icon beneath any of the nodes 3. click on the **delete it** button in the modal window.
4. check console output to see if error appeared 5. refresh or log out/in to see if node was deleted properly
didn't try (can update other servers and see if this happens again).
just trigger the 32 bit rpm package build, it will fail on centos 7 sample: phofurl
compile the code from pr #6814 and run: phofcode
login over ssh to system running netdata and run something that consumes 100% cpu for a while ( phofcode is good candidate), observe app cpu usage.
simply run this script `sh
start netdata with "service netdata start"
upgrade netdata from debian testing repository `apt install -t testing netdata netdata-core netdata-web netdata-plugins-nodejs netdata-plugins-python`
i just have to start netdata and after a few seconds it crashes with the error above.
issue happens based on unknown conditions.
one one of our servers we observed that chart appeared again, but we are not sure whether reboot of netdata preceded.
just examine netdata/netdata-edge on package cloud
run a bats test on fedora/31
visit a dashboard on the provided docker image url contains `;` i.e.
on a gentoo system with all the required dependencies for netdata installed, try to build netdata by hand.
enable aur repository and run: phofcode
``bash <(curl -ss phofurl --dont-wait --stable-channel; echo exit status $?``
- configure a user for monitoring with no super or replication client permissions - test mysql plugin: debug 1 mysql` phofcode
1. install netdata with `bash <(curl -ss phofurl 2. stop and disable netdata `systemctl disable netdata` and `systemctl stop netdata` 3. confirm netdata is dead and disabled `systemctl status netdata` 4. change the checksum in to force an update 5. run 6. check netdata is still dead and disabled `systemctl status netdata` if netdata-updater finds a new version, it runs `./netdata-installer.sh --auto-update --dont-wait --dont-start-it` the new version is installed it 's not started, however status show 's it 's now enabled, will start on the next reboot.
upgrade to netdata 1.16, globally enable repeat notification feature as described above, wait for alarm.
you should receive notification with raised alarm, and once the the alarm is gone, clear notification.
i didn 't receive repeated notification nor clear notification.
upgrade ubuntu to ubuntu 18.04 lts from 14.04 lts (going through 16.04 lts) using the `do-release-ugprade` commands.
check which network configuration system is retained (should be ifupdown, and the ethernet interface names should remain eth0, eth1, ethn).
install and open netdata, no network monitoring should be present.
the net in/out gauges don 't appear at the top and the ipv4/ipv6 sections in right hand menu are missing.
start (or re-start) netdata, have the smartd collector enabled (by default if smartmontools rpm is installed), the cpu usage starts off reasonable (single digit usage of one core), over time this uses more and more cycles and eventually it consumes 100% of the single core it 's running on
- create a let 's encrypt certificate with proper hostname - configure the master with full (chain+cert) file as certificate and key as ssl key - configure a slave to use ssl for streaming with tcp:hostname:port:ssl without skipping certificate validation - watch the stream fail in error.log with ssl rfc4158 check: we have a invalid certificate, the tests result 20 and message whereas openssl s_client works fine phofcode
`<div data-host=" phofurl data-title="cpu usage"
install lxd from snap - install netdata - spawn a container and check out metrics
on a host where netdata has been running for some time scrape metrics using an prometheus server also scraping the constant variables:
- configure with data to connect to postgresql database - start netdata
* success: run `bash <(curl -ss phofurl --dont-wait --stable-channel --no-updates` by hand * failure: add the following to a chef recipe, and run chef-client against a host: phofcode
export/save a snapshot, set the `which dimensions to show?` dashboard option to `all`, import/load the saved snapshot.
this happened on a fresh debian 9 (launched from aws debian's official amis) and with netdata installed from the kickstart script.
follow uninstall instructions at: phofurl
access the node menu using the brave browser
install netdata forget how you installed netdata (really important bit here) update netdata using bash <(curl -ss phofurl
- visit the dashboard for an agent connected to a private registry - click the `sign in` button to see expected behavior - then click any of the nodes<sup>beta</sup> buttons to get redirected to netdata cloud without the popup
just try to resize browser window slowly from maximum screen size (13") to smaller window
run netdata on a system with very low max file connections setting to get a reproduction
just starting the container is causing this.
: netdata startup error, plugin fails to load curl works fine.
curl phofurl <complete stats appear in json> curl phofurl
these error messages occur every time netdata is stopped and started.
`systemctl stop netdata` `systemctl start netdata`
install netdata activate database restart netdata -> fatal doesn 't start
1. setup with: phofcode 2. query: phofcode 3. nothing in output...
with github profile, try to get list of all nodes from netdata cloud
1. setup with unreachable host: phofcode 2. run `sudo lsof -i -p -n -l | grep go.d.plug`
edited ran `sh test`, it only uses role "sysadmin" and sends mail to root
set the parameter `memory mode = dbengine` in
run the scripts on the various distros
execute sysbench --num-threads=4 --test=cpu run to heat cpu up.
when it reaches 80 c cpu frequency gets throttled (on pi 3b+ beginning with 60 c frequency gets reduced from 1400 mhz to 1200 mhz).
netdata shows in grap always 1400 mhz cou frequency.
probably cpu freq is read via that always displays unthrottled frequency.
on raspberry the currenct frequency can be measured via /opt/vc/bin/vcgencmd measure_clock arm
1. configure netdata to use the new dbengine memory mode and start it.
2. check the contents of your configured cache directory.
execute verification one-liner as given at the moment of bug report: `[ = "$(curl -ss phofurl | md5sum | cut -d ' ' -f 1)" ] && echo "ok, valid" || echo "failed, invalid"`
enable charts.d plugin for nut, configure nut plugin phofcode
run the kickstart on a fresh ubuntu 1804 install
retrieve some chart using api `/api/v1/data` with group=average set (as in examples below).
raw data (without grouping, for 10 arbitrary seconds): phofcode group by average: phofcode this already looks weird (as there are no values above 0), and group by sum produces exactly the same result: phofcode
- find a chart with chart variables - make `api/v1/chart` and `api/v2/data` calls to that chart
access netdata using any browser.
1. ensure elasticsearch is not available 2. install netdata 3. do not edit configuration 4. start netdata 5. check for errors from `python.d`.
install netdata put it behind nginx reverse proxy
enable the new db engine
* create docker container from netdata/netdata:latest ( ) * start docker container * enter container shell and execute: phofcode
unfortunately, steps to reproduce this are unclear.
- enable x509check plugin with `edit-config go.d.conf`: phofcode - add some job to monitor `edit-config go.d/x509check.conf`: phofcode
install netdata on centos 7 and check web ui
still trying to replicate the issue.
- install current fedora 30 pre-release - run `bash <(curl -ss phofurl
just run nightlies without changes
setup a caddy server and use the following configuration in caddyfile: phofcode go to netdata host.netdata.domain.tld and click on login login using your google account
run the updater when changes are available for download and add something that breaks the functionality of updater within the update path
` bash <(curl -ss phofurl phofcode
follow the documentation for updating (or install for mac) and run phofcode
just run the installer on mac following the netdata instructions for mac
run the kickstart script as it quickly reproduces there.
add dots in app name.
unfortunately i can 't propose reproductive behavior as i haven 't identified the pattern
- start netdata container as documented with the socket exported.
- once inside the container, start arbitrary containers taking over the host.
let cron run the updater
not sure, but it doesn 't seem to have anything to do with the length of the name.
saw a much longer name getting presented properly.
details: `/api/v1/charts` phofcode screenshot with right menu showing both a full name cgroup and a truncated name cgroup (the one in the json above).
screenshot from phofimage and the logs from `cgroup-name.sh`: cgroup-name.sh: info: k8s containerid has chart name cgroup-name.sh: info: cgroup is called ``
create a lot of containers in a few seconds on a slow machine.
open web ui and check system swap chart
- go to phofurl - click hostname pull-down in upper-left - click "please sign-in"
fresh install of ubuntu server 18.04 phofcode
- add an entry to `apps_groups.conf` - run a process that maches that entry - stop the process - see charts
1. create a python plugin wich contains three error by intention: one with i/o without permissions, one with variable not defined 2. run plugin with netdata 3. correct first error 4. run again 5. correct last error 6 run again result: something it will fails as code version is from step 2, sometimes it works, sometimes will fails as the code version is from step 4
- download phofurl - compare the 2 files
service netdata restart ps aux | grep netdata
master and slave with the same guid.
the master hostname configured in netdata.conf is overwritten by the slave's hostname and we have issues with the charts as well.
run netdata installer without internet access.
- install at `bash <(curl -ss phofurl all --dont-wait 1` - the issue seems to happen due to a spotty internet connection - error disappears if longer timeout is given, eg `curl -l --connect-timeout 10 -v phofurl
as an example with fail2ban module: phofcode this will result with having error.log flooded with phofcode
follow installation instructions here phofhyperlink new version not found.
just install netdata headlessly somehow
phofcode where `puid=0` and `pgid_docker=$(grep docker /etc/group | cut -d ': ' -f 3)` (in my case 996).
from container logs i found some errors: phofcode now i 'm using a workaround: if i run `chmod 666 /var/run/docker.sock` and restart netdata container the names are resolved, but after an host reboot the permissions of docker.sock back to 660. i need help because i have the same configuration in an ubuntu server 18.04 and the names are resolved out-of-the-box without any issue :/
set up netdata in a master-slave configuration and reboot the slave.
watch the dashboard provided by the master and see the bandwidth spike up after reboot has completed.
* installed `netdata` 1.9 from `apt install ` * removed `netdata` 1.9 via `apt remove netdata` (left behind configuration files) * installed netdata using `git clone` * installation is broken (can 't hit endpoint) tried running kickstart script received error message
[plugin:freeipmi] update every = 6 command options = ignore 875 results in... netdata error : pluginsd[freeipmi] : child pid 37833 exited with code 1. netdata error : pluginsd[freeipmi] : (pid 37833) exited with error code 1. disabling i netdata info pluginsd[freeipmi] thread with task id finished -u netdata 6 ignore 875 freeipmi.plugin error main internal system error (errno 9, bad file descriptor) freeipmi.plugin fatal main :freeipmi.plugin: data collection failed.
# no error: 0 6 ignore 875 chart ipmi.events ' ' 'ipmi events ' 'events ' 'events ' ipmi.sel area 90002 6 dimension events ' ' absolute 1 1 chart ipmi.sensors_states ' ' 'ipmi sensors state ' 'sensors ' 'states ' ipmi.sensors_states line 90001 dimension nominal ' ' absolute 1 1
`bash <(curl -ss phofurl --dont-wait --non-interactive`
according to the title of the error mail, the following command * likely * ran: `test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily ) `
update all components, minimal setup, then upgrade to proxmox 5.3.x following manual install in wiki.
server load does not affect the frequency of the missing bits, most of the times server run in idle.
shutting down single lxc container running does not make any difference.
netdata installation bash <(curl -ss phofurl
on clean installation setup powerdns.conf phofcode
- install at commit 3ecc26b -change such that `# bind to = *` becomes `bind to = tcp:*` - restart netdata: ` sudo systemctl restart netdata` - view logs phofcode
1. install netdata 2. set up netdata to create a registry on a custom domain 3. proxy netdata registry through nginx nginx config: phofcode relevant netdata settings: phofcode just to be certain i 've tried several different nginx configs.
the basic "virtual host" config from the wiki: phofurl and also the high performance netdata: phofurl
spin up alerta server via their default tutorial.
phofurl configure the plugin for hitting alerta.
run the above command to send a test alert.
daemonize hddtemp with an alternate disk listing, for example: hddtemp -df `find /dev/disk/by-id/ -name 'wwn-* ' !
-name '*part[0-9] ' or hddtemp -df (since by-vdev is what i normally use) restart netdata, look at "hdd temp local"
install netdata in phusion ubuntu container.
lauch the original netdata container.
- install netdata and smartmontools - configure smartd to log output to `/var/log/smartd/` as recommended in the netdata documentation.
- start smartd - notice smartd logging csvs to `/var/log/smartd/` start netdata notice no smartd_log item in the netdata dashboard `grep smartd to view related errors notice the lines mentioned in the summary above
start netdata with default config and the `python.d.plugin` does not work at all.
phofcode restart netdata, `python.d.plugin` works.
it seems that when the request returns an error, it is not well handled.
on the following tcpdump, netdata does not close the tcp connection (lsof shows 2 "close_wait" connection).
problem was appeared when we updated php7.0 to php7.3.
then we updated ** monit ** configs to monitor new fpm version and changed its name to php73-fpm from php70-fpm: phofcode after all, it seems netdata was restarted after that but old php70-fpm metrics is still present in exported metrics (from master netdata): phofcode as you can see.
php70 and php73 shares the same metrics for some reason.
the same thing happens in the web interface: phofimage we tried to restart it again and it takes no effect.
then we checked monit xml output and it gives correct info: phofcode only this helped with that: 1. stopping netdata 2. cleaning out the `/var/cache/netdata` 3. removing the file (since it 's slave netdata instance in lxc container).
4. starting netdata 5. profit and it 's strange, because this slave netdata works in this mode: phofcode also, we have some debug infomation from plugin: it seems collector works just fine, but host netdata gives also php70-fpm metrics.
command: `cat | grep /mnt/<name>` inside the container `cat /proc/self/mountinfo | grep /mnt/<name>` on the host
- visit netdata dashboard via ipv6 - close tab - wait 60 seconds, line should appear
not sure how to run the installer to get it back.
i can 't reproduce it now, but i hope netdata could support switch debug output on the fly, so we could at least provide some useful log.
- download phofurl - decompress - cd into directory & follow phofurl
1. build binary based on netdata.spec.in 2. install this build package
start journalbeat, start netdata, restart journalbead incremental values rise to random journalbeat debug trace shows good values 0,5,7 but chart show this netdata phofimage
use my docker-compose.yml phofhyperlink and do `docker-compose up -d` make sure to create the network `proxy` first.
has anyone used netdata with docker-compose & traefik?
could you share your configs?
install netdata with docker according to [ phofurl
run netdata-installer.sh manually, or allow the daily cron job to execute.
run netdata in a container that isn 't allocated all cores; i assume that 's what leads to the discrepancy between `/proc/cpuinfo` (reporting the number of allocated cpu cores) and `/proc/schedstat` and (reporting the total amount of hardware cores) which ultimately leads to the logging of an error message every second.
run a fresh netdata installation on a lxc host and stop and start a container: phofcode but it doesn 't seem to happen on every try.
it seems to be better reproducible with bigger containers.
btw: another side effect is a very high peak of cpu usage when the container was stopped of %, but this seems not to trigger an alarm.
create new incomming webhook by following this guide phofhyperlink set default_recipient_slack parameter in try to send an alert to that channel by using ./alarm-test.sh script.
segfault during seemingly random components but always during `make all-recursive`
download the 1.11.0 release, unpack the tarball, generate the spec file, set up an rpmbuild tree, copy the tarball into sources directory - spec into spec folder, try to build rpm.
set, for example, `nano` as your system editor (and `$editor` would be equal to `/bin/nano`.
then launch `edit-config` and vi would be use, because `edit-config` forces `editor="${editor-vi}"`
1. set up snmp server 1. define snmp config with `oidname`: snmp.conf phofhyperlink 1. run 1 snmp` my output: phofcode
1. as the `netdata` user, use `pip --user` to install a python module required by a `python.d.plugin` module.
2. ensure that the system-wide python installation does not include the python module you installed in step 1.
3. attempt to run the `python.d.plugin` module that depends on python module you installed in step 1 in debug mode.
it just randomly stops working.
install netdata on an ubuntu 14.04, then try to run `systemctl` commands against.
run the following docker-compose file: phofcode then, watch the logs: `docker logs <container_name> 2>&1 | grep /usr/lib/netdata` a `ls -rahl /usr/lib/netdata/*` within the container shows that every file is owned by `root:root`, with mode `-rw-r-----` (640), and directories with `drwxr-xr-x` (755)
src/index.html: phofcode package.json: phofcode phofcode
`test.js`: phofcode `package.json` and `test.js` are all that are required to reproduce the bug.
steps: * place `package.json` and `test.js` in a folder * install node modules * run `parcel build test.js`
i have a reproduction repository at phofurl where master is using v2, and a branch parcel@v1 phofhyperlink uses parcel 1.
edit: see a smaller sample here phofhyperlink .
index.html phofcode index.js phofcode page.js phofcode
import vue-notification in a project, run parcel on it
index.js phofcode phofcode dist/index.js phofcode
all the code in the minimal example is in this github repo phofhyperlink .
nevertheless, here are the main components: main.js: phofcode index.html: phofcode
see my bash snippet above.
phofurl ~~~js yarn run build ~~~
see phofurl for a full minimal repro.
you can find the repro project here: phofurl
see the above repo phofhyperlink .
for example, that spect app logic can be loaded each by own entry: phofcode since each that entry includes `spect` internally: phofcode phofcode that results in duplication of `spect` imports n times - per each entry.
just trying to grab two dom elements and use map on it: `const dateelement =
repo can be found here phofhyperlink with a readme.md detailing the issues and what i have already tried.
anything, either a .html and a script tag or a plain .js file
repo: phofurl (note the branch)
`parcel watch src/index.ts` outputs to `lib/index.js` `parcel serve src/index.ts` outputs to
i can 't publicly share the code but it 's a _pretty_ simple react app that uses firebase and firestore.
phofcode `parcel build index.js` phofcode
just create a file `script.js` with content phofcode run `npm install requirejs` and the try `parcel build script.js`
`<p>measure students &#8217; ability to engage</p> <p>measure students & rsquo; ability to engage</p>` unicode should be preserved.
here is source code: phofurl
`first.js` phofcode `second.js` phofcode `index.js` phofcode in dev build the two values are different as expected.
in prod build they are the same since both imports are pointing to the same module.
**contents of .env files** .env : empty .env.local : api_endpoint = " phofurl .env.production : api_endpoint = "/backend_api" **content of main.js** vue.prototype.$api = process.env.api_endpoint **steps to reproduce the issue** 1. cd project 2. set node_env=production 3. parcel build index.html
admin.scss phofcode _mixins.scss phofcode _general.scss phofcode
if this is somehow related: tfjs is written in typescript.
i import it as such: `import * as tf from '@tensorflow/tfjs ';`
the npm audit report: parcel-audit.txt phofhyperlink
phofurl is the repo; phofurl is the entry html file.
an example project that i would expect to work can be found here: phofurl
the base gulpfile i 've used for this can be found here: phofurl i 've used it in many project but since now i never had to use a plugin, so that 's why i only realized the problem now.
no code, i just try to run my program using below command: phofcode
complete reproduction is here: phofurl
app.js phofcode child.js phofcode note important: **if i remove the connect function from the child component.
** the command `npm start` if it works in all aspects.
phofurl (public repo - credentials should not be required)
the example given here phofurl
1. clone phofurl phofhyperlink 1.
`npm install && npm start` 1. load phofurl open browser js console.
1. edit `src/index.js` to trigger hmr `update`.
js console error: `referenceerror: window is not defined`
our switch-to-parcel branch phofhyperlink if needed i can try to create an sscce
folder structure: styles/one.css styles/two.css styles.three.css main.css import declaration in main.css: `@import './styles/*.css';`
taking url for file from store: phofurl dist folder (1.pdf does not exist in the folder): phofurl taking url from view: phofurl dist folder (1.pdf exists in the folder) phofurl
cannot upload a code repository, contents are private
`npm start` 2. open ` phofurl 3. change some code in `src/index.js` 4. entire page reloads
all the instructions to reproduce the problem can be found on `readme.md` file: phofurl
this is the code for the working demo: phofurl
sample code: phofcode output using command from above: phofcode now if you change the filename to javascript and run the exact same thing, the output will be: phofcode
1. remote-lock/package.json (module b) phofcode 2.
(module a) phofcode 3. phofcode 4. phofcode
my components are as follows: i have an <app /> component that does code-splitting with `react.lazy()` one of the bundles is loginpage.js which imports a page component, which imports nav, which imports `pefin-logo.svg` to display it: phofcode when i browse to /login (which pulls in the loginpage bundle), i get the error above.
curiously, when i look at the `src` bundle, find following code near end.
phofcode also, i 've extracted what looks like a map of file paths and dependencies at phofurl the only thing notice here is that svg image is listed under notfound page, but not under loginpage.
that said, i 'm not sure exactly how to interpret this, so don 't know if that 's peculiar or not.
- phofhyperlink build with yarn `build:shake` i 'm running it to test my build with `spa-http-server ` : `http-server --push-state` in the `build` folder
using this folder structure: phofcode see config content above.
index.tsx content: phofcode index.html content phofcode ` running `parcel ./index.html` fails with error `uncaught referenceerror: react is not defined` because the compiler does not see the configuration options: phofcode
phofcode full code here on this repository/tree: phofurl
you can `yarn run dev` and run the vscode debugging command.
then try changing the source code of epk(whatever file) quickly enough in a repeating manner, let the vscode nodemon debug launch the process and wait until bundling starts.
there is a chance that error is thrown.
phofurl (i'm currently trying to setup a minimal repo demonstrating this error but i'm having trouble reproducing error outside of epk)
the following files with the addition of the above configuration should be enough to reproduce the issue.
- `src/index.html`: phofcode - `src/index.js`: phofcode
repository of the bug phofhyperlink .
`parcel build index.js -t node` phofcode
the code is the exact same content as shown in the documentation phofhyperlink , no more, no less.
index.html phofcode categories/home.html phofcode here is the full code phofurl
< phofurl works in parcel 1.11, breaks parcel in 1.12
> index.html phofcode > css/index.less phofcode
# background.js phofcode # manifest.chrome.json / manifest.firefox.json phofcode # package.json > currently, i 'm solving removing hash with a hack of renaming using script `rename:background`.
the gripe with that is it doesn 't change the reference of `index.html` but thankfully i 'm not using `index.html` in this project.
just any index.html file that includes separate js file.
i've set up a minimal reproduction repo here: phofurl
i can make a local test environment if you guys aren 't able to reproduce it.
| software | version(s) | | ---------------- ---------- parcel v1.11.0 node v10.15 npm/yarn v6.4.1 operating system fedora 29
example with this bag phofurl
this can be reproduced easily in any project.
1. initialize a folder with the hello world sample from the parcel website: phofurl phofhyperlink .
2. run `parcel index.html` 3. change `hello, elm!` in main.elm to something else 4. go to phofurl 4. you should see changes in the browser 4. repeat step 3 4. no changes are seen anymore
phofcode `parcel index.html` will include somejs.js `parcel build index.js` does not include somejs.js phofcode `parcel build index.js` includes the script
the filestructure is really minimal, i set up an example here phofhyperlink each of the three scripts just prints a log message to the console.
ideally, this should already display the typescript sourcefile as the source.
it would look a bit like this: `"contentscript" (content.ts line 1)` to test my sample repository, just clone it and run parcel: phofcode after bad experiences with file paths, i made sure to also check: `parcel build src/manifest.json --no-minify --public-url=/` and `parcel build src/manifest.json --no-minify --public-url=./` then import extension in chrome and inspect it.
(of course i didn 't execute different public-url versions after each other.
i first ran parcel without this flag and checked, then tried =/ checked again, then tried =./ checked again)
the repository containing whole source code can be found here phofhyperlink
here 's one way to reproduce my issue.
i 'm using a react component since that 's my use case and it 's probably relatable to most devs, but this issue isn 't specific to react + ts.
phofcode phofcode this sould compile just fine.
now, update a fields in the `iperson` interface: phofcode ** result ** : notice that parcel doesn 't rebuild the bundle, and that there are no errors in the application.
<script async src=" phofurl <script> window.datalayer = window.datalayer || []; function gtag( 'js ', new date()); gtag( 'config ', 'ua-xxx-xx '); </script>
phofcode if i uncomment import statement, css doesn 't get bundled and added to the page, instead i have to run again `parcel index.html` to get the css
gist: phofurl ** index.coffee ** phofcode
phofurl code call process env.
phofcode when `parcel index.html` is run with the above file, live reloading doesn 't work, but uncomment the script line (assume a script file actually exists) and it works fine.
edit: further testing and it turns out that linking a css file also allows live reloading to work.
essentially it seems that if no other files are required in index.html, live reloading doesn 't work.
js // index.ts window?.foo ``
phofurl build with either phofcode or phofcode .
serve with phofcode on port 5000. removing `sidenav` component from `main.js` produces a working build with tree shaking.
in a .vue component: phofcode
i created an example project to demonstrate the behavior: phofurl
index.ts phofcode index.html phofcode .env phofcode phofcode
repository: phofurl after cloning the repo and installing node modules just run `yarn dev-css` or `npm run dev-css`.
a full working example can be seen here: phofurl
the function that generates the template function from the ssr html file: phofcode
repository: phofurl after cloning the repo and installing node modules just run `yarn dev-js` or `npm run dev-js`.
download/curl/wget phofurl in the same directory as `index.html`.
** index.html ** : phofcode ** index.js ** : phofcode
straight from the blog post: phofcode phofcode
see attachment for example project directory.
//index.html phofcode //test.html phofcode //index.js file phofcode
just import @material mwc packages: phofcode
i have an example repo: phofurl steps to reproduce: - `git clone phofurl - `cd parcel-ie11-issue-demo` - `npm install` - `npm run dev` open ` phofurl in ie 11 have a look at the js console, since the screen is blank (screen shots above)
** index.html ** : phofcode ** index.js ** : phofcode
this is the router of our application.
as register is loaded lazily, it should split the code in there, but it does not.
is there something i missed?
this is not an open source project unfortunately.
if there's anything i can do to help reproduce i'd be happy to, but this is a very simple project, i'm just getting started today.
you can run/see the behavior using a simplified bug demo project i created here: phofurl phofcode phofcode phofcode phofcode
index.html: phofcode phofcode result: phofcode
a minimal repro with a readme can be found here: phofurl
phofurl i have created a gitjub repo to show this problem.
`npm start` should the error.
here is a repository that can reproduce the problem: phofurl this sample contains two scripts.
one is in `src/`, the other is in `src/content`.
both scripts print something to the console, which makes them easy to find.
the master branch contains no parcel and shows you how the code works correctly: phofcode now you can load `src/manifest.json` into firefox.
open any website, open developer console, reload website, you will see two logs from two scripts.
firefox automatically recognizes them as typescript :) now you switch to parcel branch phofcode same procedure as above, load plugin into firefox.
now have to use manifest from `dist/manifest.json`.
again, can see two console logs.
but for script in `src/content`, sourcemap can't be parsed.
if i edit this file manually and change last line from: `//# `//# then it works as expected.
please see my bug report above with code snippets.
run `parcel build index.html` after cloning: phofurl
just link any node_module w/ built source maps to your app
phofcode index.html phofcode main.js phofcode mockapp.vue phofcode package.json
add the above eslintconfig to your package.json file, remove the node_modules and start the command parcel index.html.
this is happening here: phofurl but it 's happening in a dependency of this project, not directly in the call site.
i will try to come up with a smaller reproduction step but i 'm not sure i 'll be able to since the bug probably relies on a lot of little things falling into place to cause a clash.
it looks like the problem persists even when getting rid of my own project 's imports.
trying to compile this file still gives the same error.
you can reproduce this problem in this way: 1.
`git clone phofurl 2. edit `package.json` to delete the whole `postcss` key and its value 3. run `parcel client/index.html` 4. check the css bundle inside `dist` folder.
phofcode see that `<script src="/two.js">` ?
the crazy part is that if i remove style= from the html files, the problem goes away.
unfortunately the error occurs in a larger project at work that i can 't share.
it seems like the issue is: phofcode project: phofurl github page: phofurl also occurs with a pixi.js protype: phofcode project: phofurl github page: phofurl other react projects built with parcel are perfectly fine, and deploy without issue.
** ** phofcode ** ** phofcode
some code are from helpers in the tool phofcode
phofcode (note that the worklet path _should_ point from the root, not the js file (`app.js`) in this case.
i tried using the `~` syntax, but that didn 't help.)
i have set up a repository that reproduces the problem: phofurl just use - npm install - parcel build src/manifest.json
phofhyperlink contains a minimal configuration for demonstrating this issue.
the repo is here phofhyperlink .
below is the module produced by rollup: phofcode
repo with small example: phofurl
@rxdi phofurl @client-side-example - phofurl
phofcode please see the gist phofhyperlink for details.
i made a github example project : phofurl
html: phofcode ui/index.re: phofcode repo: phofurl
i have ** index.php ** phofcode ** index.js ** phofcode say.js phofcode
just take windows 10 and try do something like this: phofcode then try build it.
basically start with the this example phofhyperlink and throw few svg path tags with `d` attribute.
run `parcel build index.html` after that.
minimal reproduction of the bug: phofurl
{ return parseint(n, 10) });
to reproduce, clone phofurl phofhyperlink and run phofcode the first time.
then first run phofcode and visit phofcode to see a properly rendered page.
then run phofcode and then to see the error pointing towards css files.
you can then optionally go to and delete all the css code from the file.
and then delete folder run .
now node server will serve site, but without css files.
see this simple repo repository - phofurl
phofurl see above for steps to reproduce!
the problematic file: livesplit_core.js phofhyperlink
i created a sample repository that makes the same error of this issue.
a file named `index.html` which includes a `main.js`.
that js import some methods from `foobar.js`.
and the modification in step 4 is "remove or add some import methods in `main.js`".
unfortunately this is a private company repo, but my render process looks like this: phofcode
repo: phofurl run `npm run dev` to test.
** index.html ** phofcode ** component.tsx ** phofcode style.css phofcode global.css phofcode
hmm... can 't really share any more code than i have already because of confidentiality.
i created a demo here phofhyperlink (click on "show live" and then use inspector to get the css file in the `<head>`).
please, refer to phofurl 1) clone 2) yarn install in both `app/` and `lib/` 3) `yarn link` on `lib/` 4) `yarn link @scoped/lib` on `app/` 5) `yarn start` on `app/`
index.js phofcode apple.html phofcode index.html phofcode
src/index.html phofcode src/index.js phofcode src/components/app.vue phofcode also this code in available in my repo phofhyperlink
~the repo where this is the problem as of right now is phofurl ~you can reproduce this exact setup and problem by `cd`ing into the `/extensions` folder and running `npm install` followed by `npm run build`.
note how the file `markdown.
[hash].js` is put into instead of (the expected) folder.~ edit: we removed this usage to continue working on the platform without this causing errors
example: phofurl run: `parcel -- build app1/index.html`
run a command like this: phofcode
no need for any complex repo, the code below fails, as explained above, even with the latest version 1.9.7 ** index.js ** phofcode ** template.pug ** phofcode
to reproduce checkout this pr and just run `yarn install && yarn dev` phofurl the environment is not as important for this bug as it is not os specific.
it is due to the difference between a built bundled version and git tree source version | software | version(s) | | ---------------- ---------- parcel master - v1.9.7 + html support (075ca6f)
repo with code to reproduce the issue.
i have write an example repo to illustrate this bug: phofurl
the code is going to be mit so i don 't mind sharing the entry point.
index.tsx: phofcode index.d.ts: phofcode app.tsx: phofcode
here is a small repo phofhyperlink
...mmm... any project with an import that ends with a "*" throws this error for me.
code was taken fully from readme.
the directory contains previously installed `vuesax`
followed the get started guide and react-recipe blog exactly.
phofcode this is the minimal example that demonstrate my problem (this might not reproduce the problem).
in my case, i 'm making a game which you could press button 1 and shoot toxic bullets or press button 2 to shoot laser bullets.
sometimes when caching enabled you shoot toxic bullet no matter you press button 1 or 2 (in other conditions that the build went wrong mostly the app would just crash, logging something 's not defined), but disabling caching and build again without changing any code game works perfectly normal.
phofcode `index.js` is an empty file.
** index.js ** _(causing a `uncaught referenceerror: buffer is not defined` exception)_ phofcode ** index.js ** _(causing no exception)_ phofcode test.html phofcode
phofcode to reproduce: stick as `index.js` and the `package.json` from above in a directory, run `npm install`, run the `parcel build ...` command above, try and run the generated output with `node dist/index.js`.
i just upgraded the packages from the same sample code: phofurl phofhyperlink
<sub>package.json</sub> phofcode <sub>index.html</sub> phofcode <sub>index.js</sub> phofcode
`index.html`: phofcode `main.js`: phofcode `app.vue`: phofcode
see above, let me know if i left out any necessary files.
//index.scss @import 'partials/selector '; project example: phofurl
working on a smallest-possible repo which exhibits the problem.
phofurl simply run `parcel serve index.html` and click the links to see the inconsistent behavior.
see repo as above -> phofurl
phofcode src/index.js: phofcode after build: phofcode the `catch` keyword did not be handled the right way, because the custom uglify config did not take effect on the modules as a npm dependencies
please see the minimal project setup located here phofurl phofhyperlink .
`index.scss` imports some other scss partials, and `index.js` imports `index.scss`, i have no module reference errors and the code does work, its just the files that are being watched during development could be expanded.
index.html phofcode index.js phofcode index.scss phofcode
sample project here: phofurl phofhyperlink
i 've created a minimal sample and uploaded to github phofhyperlink .
`npm install`, then `npm start` should have parcel recreate the `dist` folder - you 'll see the image doesn 't work on
</div> </template> <script> import a from './a.vue '; import b from './b.vue '; export default { components: { a, b } }; </script> phofcode npm install npm run build serve the files located in the `dist/` directory.
steps and demo assets available here: phofurl
the source code: phofcode what parcel results (after format): phofcode the correct version (after format), with parcel `no-minify` and the compress with `uglifyes`: phofcode
`index.html :` phofcode `base.scss :` phofcode `index.scss :` phofcode
i can 't provide a repository, but here is a small snippet which _should_ re-create the scenario (when loaded into a ts + react project).
phofcode should give an exception like this: phofcode though, i just found out... if i _refresh_ i get a proper trace: phofcode
full test cast at phofurl index.html phofcode index.js phofcode
src/index.html phofcode src/index.tsx phofcode src/app.tsx phofcode
empty project with .scss file at entry index.html inside of which there is a reference to a .css file up one directory.
the issue apears when including phofcode
+ repo phofurl + broken production phofurl + working production phofurl
reduced test case repo: phofurl
unfortunately, this is in a closed-source app.
but i 'm happy to try things and report back.
phofurl `npm i && npm start`
repository to reproduce the bug: phofurl steps to reproduce: - `yarn install` - `parcel - open phofurl - check console and application -> service workers panel
returns the path to the csv file.
loads and returns the json object my hack: returns the path to json file
just open up the console when you look at the demo.
you 'll see that `common.js` is logged multiple times.
phofurl _** edit phofhyperlink **_
the instance of `redirecttosignal` which errors now you can find here phofhyperlink .
but when removing this one the next instance errors.
in the test_parcel branch phofhyperlink i have removed all instances of `redirecttosignal` and it loads fine.
i created a testapp phofhyperlink which also uses `redirecttosignal` to isolate the problem, but surprisingly it loads fine.
this project is initialize by `vue-cli`, but i think any project written in vue is able to reproduce it.
directory: phofcode from `index.js`, phofcode from `index.vue`, phofcode
git repo to replicate issue: phofurl
just in result index.html the `./assets/src.svg` isn 't replaced and src.svg isn 't copied to dist.
please see this repo: phofurl running yarn build && yarn start throws phofcode more info: 1) please note that this is an issue only for ssr.
running `yarn dev` works 2) `dist/server/index.css` contains the css in `.../separator.scss`
phofurl run `yarn` and `yarn start`.
changing something in `./src/index.re` triggers a rebuild and reload.
doing the same in not.
example repo phofhyperlink clone it using phofcode
i prepared minimum reproduction setup to reproduce this bug.
my index.tsx script requires a css module.
phofcode * index.css * phofcode
create the project with the following bash commands: phofcode
see **possible solution** above also i am using it here: phofurl and this is the resulting build for the html: phofcode
external-script.js phofcode index.html (partial) phofcode
should be fully reproducible here: phofurl
files `index.html`, `index.js`, `main.js`, and `main.css` from phofurl
these are literally the files i was using.
i based them on the sample code at phofurl
the configuration section above has all the code.
* index.html * phofcode * index.js * phofcode w1.js phofcode w2.js phofcode shared.js
- `yarn init && yarn add react-dom@16 react@16 parcel-bundler` - `echo > index.js` - `npx parcel build index.js` it works here - `yarn upgrade react-dom@15 react@15` `npx parcel build index.js`
n/a, but this does happen with phofurl
i'm currently working on support for parcel in react-pdf phofhyperlink .
that requires me to handle loading a service worker which is not mine.
in webpack, the following code does the job: phofcode i was trying to reproduce the same using parcel, and here's what i got so far: phofcode this results in an error described below.
changing the line to phofcode stops error, but: * i'm not comfortable with relative path in a package like that * this caused.. a 404 error!
parcel starts referring to a file it did not produced.
you can clone this setup phofurl
`entry.js`: phofcode `tsfile.ts` (note: it 's a ts file) phofcode
parcel-css-bug.zip phofhyperlink run `parcel build` to reproduce it.
as above, but it 's a react app with typescript, not sure(not tested) other type of combination has the same problem or not.
this does not work phofcode this works phofcode
see the above repo link.
you can see the open sourced project here ( phofurl phofhyperlink )
as soon as you import electron itself: phofcode phofcode the build fails.
the additional `<script>` with those `delete`s is due to this: phofurl which is another thing the `--env` idea could fix.
this does not work: phofcode but by calling `await bundler.bundle()` before using the middleware, this * does * work: phofcode
phofurl this test code features two bitmaptext objects which are almost identical.
the only difference is that the first one (`goodtext`) does not have a maxwidth set, while the second one (`badtext`) does have a maxwidth.
both objects start with no text in them, but every time `update()` is called, i add a single character to each of them, until a full message is added.
in `goodtext`, this makes for pretty animation as the entire message becomes visible; however, in `badtext`, only the first character of message appears.
from phofurl result += words[j] + ' ';
try inserting this code in any phaser3 labs example phofhyperlink : phofcode steps to reproduce: 1. click the 'text text text' - it will change color (respond to click events) 2. click 'destroy game' 3. click the 'text text text' - it will not change color (not respond to events) 4. then change *mode: phaser.scale.resize* to *mode: phaser.scale.fit* on line 5 or any other (except none) - text input will still not work after game destroy 5. then change *mode: phaser.scale.resize* *mode: phaser.scale.none* on line 5 - text input will work
js var config = { type: phaser.webgl, parent: 'phaser-example', width: 640, height: 480, scene: { preload: preload, create: create } }; var game = new phaser.game(config); function preload() { this.load.image('bunny', this.load.image('mask', 'assets/pics/mask.png'); } function create() { var backdrop = this.make.image({ x: game.config.width / 2, y: game.config.height / 2, key: 'backdrop', add: true }).setscale(2); var mask = this.make.image({ x: game.config.width / 2, y: game.config.height / 2, key: 'mask', add: false }); bunny this.make.sprite({ x: game.config.width y: game.config.height key: 'bunny', add: true }); bunny.blendmode bunny.mask new mask); function (pointer) mask.x pointer.x; mask.y pointer.y; }); } ``
<b> a live example is at phofurl </b> phofcode
here is a codepen demonstrating the issue: phofurl i forked a previous phaser 3 codepen and other than tweaking the viewport size i added the following: phofcode you can see that the camera doesn't keep logo at center of viewport.
if zoom is set to 1.0 it does.
//first anim function(){ }else{ //secondanim } },this);
example code was edited from phofurl phofhyperlink phofcode
modify this test phofurl with the below code to see value on load and after one update.
click to go to next scene, click to come back first scene.
phofurl should log timeline, 'one', 'two', 'three' but instead logs timeline, undefined, 'two', 'three'
phofurl if you comment out line 66 you will see that the player's body is now the correct width.
but when line 66 is uncommented, the body reverts to the default.
var config = { type: phaser.webgl, width: 800, height: 600, parent: 'phaser-example', scene: { preload: preload, create: create } }; var game = new phaser.game(config); function preload () { this.load.image('pic', } function create () { var image = this.add.image(400, 300, 'pic'); var cntr = this.add.container(0,0); cntr.add(image); shape this.make.graphics(); shape.beginpath(); themask cntr.mask themask; function (pointer) shape.x pointer.x; shape.y pointer.y; }); }
* code: * phofurl * preview: * phofurl ...but basically, a looping sound will reproduce this issue, and also any new audio `play` seems to not be audible also.
here is my code phofurl you can reproduce the issue by cloning it, running npm install and npm start.
typescript const sound = sound.play('foo'); // <- ts2339: property 'play' does not exist on type 'audiospritesound'.
export default class spineobject { spine: spinegameobject; scene: phaser.scene; track: number = 1; constructor(scene: phaser.scene, x: number, y: number, key: string, container: animation?
: boolean) { this.scene = scene; this.spine = scene.add.spine(x, y, key, animation, loop); // @ts-ignore // @ts-ignore // @ts-ignore console.log('should see ' + key); // @ts-ignore debugger; } public getattachments() { return } public getslots() { return } public changeskin(skinname: string) }
here 's jsfiddle with source code > source code phofhyperlink phofcode
check lines 95 and 96. commenting line 95 and uncommenting line 96 produces a black screen.
this code can be run directly at < phofurl
`timeline = this.tweens.timeline({ targets: image, loop: -1, tweens: [ { x: 700, ease: 'sine.easeinout', duration: 2000, }]});`
test code phofhyperlink render texture will be resize to a smaller size, then pasting a game object.
in webgl mode, the size of pasted result is **smaller than** source.
in canvas mode, the size of pasted result is the same as source
game config object passed on the start: phofcode creating collision platforms in my level class: phofcode next the player sprite is created and added to the scene.
it is created in standard way without any important modifications (not included in code here) and assigned to collide: and for test, this log is added as a first line of scene 's update method: `console.log("x: " + + ", y: " +
the test code contains two almost identical scenes.
when clicking on the button, the scenes are swapped.
the spineboy renders well on the first scene.
on the second scene, no rendering occurs.
when switching back to first scene, error occurs.
-> (code took and modified from phaser3 examples container alph) phofcode
using this code: phofurl if you add a new container before the container that contains the spines (just add one line var newcont = this.add.container(400, 300)) the program will crash: phofcode if you add a container after the container that contains spines (just add one line var newcont = this.add.container(400, 300)) program will also stop working well with no error message: phofcode
like the old issue this looks like it can be fixed by adding `event.cancelable` to the `if` statement in `this.ontouchstart`, `this.ontouchend` and `this.ontouchmove` on lines 223, 245 and 258 of `touchmanager.js`.
`if (_this.capture && event.cancelable && event.target === canvas)` i monkey patched these changes in node_modules and ran everything up and the issue looked to be resolved.
update: i made a pr => phofurl
i'm testing with this snippet on demo: 3.19.0 phofurl 3.15.1 phofurl phofcode
`var config = { type: phaser.auto, width: height: resolution: window.devicepixelratio, pixelart: true, roundpixels: true, antialias: false,`
var shader = 400, 300, 800, 600, [ 'metal ' ]); for example, if "metal" img width is not power-of-2, there is an error as below, it 's easy to present in the phaser3-example repository.
<img width="866" alt=" 17 27 19" src=" phofurl
test code phofhyperlink error message *uncaught typeerror: this.canvas.getcontext phofhyperlink is not a function* it seems that `this.canvas` phofhyperlink is an img object, not a canvas object under *key is not undefined* case
i quickly cobbled this together using a few examples from the labs.
if the last line which changes the angle of the particles is commented out, particles will emit from correct position.
(_snippet revised from source code_) phofcode phofurl
quickest way to reproduce this is to fire up the friction demo at: phofurl then change the physics config to read like this, and run: `physics: {default: 'arcade ', arcade: {fps: 120}},` this will set fps to double the default of 60. you should see the top platform, which is supposed have friction 1, actually pushing lemmings ahead of it.
when i look for examples to check if the way to debug has changed, i saw that the example fails too, so it works as an test code: phofurl
3.17.0 (expected behavior) phofurl 3.18.0 phofurl
createcallback is _never_ called within a physics group config: phofcode the callback _will_ get called if adding it subsequently as a property: phofcode ** however ** , once you add the above callback property, _collision detection stops working completely_: phofcode
` var config = { type: phaser.auto, parent: 'phaser-example ', backgroundcolor: '#0072bc ', physics: { default: 'arcade ', arcade: { debug: true } }, scene: { preload: preload, create: create, update: update } }; var cursors; var player; var game = new phaser.game(config); function preload () } function create () cursors = player = 300, 'block '); } function update () player.setvelocity(0); if (cursors.left.isdown) else if (cursors.right.isdown) if (cursors.up.isdown) else if (cursors.down.isdown) function doubletap(cursor) console.log(cursor+" timedown: " + cursor.timedown + ",timeup: "+cursor.timeup); return cursor.timedown - cursor.timeup < 100; `
i have a pen here: phofurl check the console to see that the `getbounds()` call on the parent container has a position of 0,0 instead of being moved with the `setx()` call.
phofurl this example code breaks when adding a second instance of the 'stripes ' shader.
eg adding the shader2 as shown below.
see phaser 3 first tutorial (jumping logo with flame).
demo: phofurl source code: phofurl
phaser `sprite.blendmode = phaser.blendmodes.add` pixi `sprite.blendmode = pixi.blend_modes.add`
let config = { type: phaser.auto, parent: 'phaser-example ', pixelart: true, width: 800, height: 600, scene: { preload: preload, create: create } }; let game = new phaser.game(config); function preload() { this.load.image("img1", " phofurl this.load.image("img2", " phofurl } function create() { // create the animation, add 2 frames let anim = this.anims.create({ key: 'test ', frames: [{ key: "img1" }, key: "img2" }], framerate: 4, repeat: -1 }); // now let 's try to remove one of the frames from the animation anim.removeframeat(1); // adding the sprite let sprite = this.add.sprite(400, 250); // playing animation.
this will cause an error sprite.play( 'test '); }
export class demo extends { demo(){ // not allowed by typescript compiler // when using type assertion, the code does work let body = this.body as // now you can adjust physics settings } } ``
just press the up arrow on your keyboard and see the sprite does not collide with the line but does not with the group.
class ui extends phaser.scene { ... } class test extends { constructor(...) { super(...) ui.events.on('test', this.ontest.bind(this), this); } ontest(){ // still firing after destroyed } destroy() { ui.events.off('test', this.ontest.bind(this), this); super.destroy(); } ``
test there: phofurl replace my code in this example: phofcode there one click should trigger two events but this is not always!
live example on codepen.io phofhyperlink code: var config = { type: phaser.auto, width: 640, height: 480, scene: { create: create, } }; var parentcontainer, anothercontainer, childcontainer; var parentbounds, childbounds, anothercontainerbounds; var graphics; game = new phaser.game(config); function create () { graphics = this.add.graphics(); parentcontainer = this.add.container(128, 128); circle this.add.ellipse(0, 0, 128, 128, 0x00ff00); line 0x0000ff); childcontainer this.add.container(0, 0); anothercontainer this.add.container(480, 256); anothercircle this.add.ellipse(0, 0, 128, 128, anotherline 0x0000ff); parentbounds childbounds anothercontainerbounds graphics.clear(); graphics.linestyle(1, 0xff0000); graphics.linestyle(1, 0xff0000); graphics.linestyle(1, 0xffff00); } ``
here is my class that extends phaser.scene where i attempt to load and create the tilemaps: phofcode and this is where i am using that class.
i have verified it works fine as long as i am not trying to load these tilemaps: phofcode i 'm also using this config file but otherwise have left everything as is from the phaser3 project tempate phofcode
using this example, inserting this code will log to the console twice, instead of once like it 's suppose to.
function() { console.log( 'test '); });` phofurl
just run the following code anywhere in the phaser labs environment (e. g. phofurl var config = { type: phaser.webgl, parent: 'phaser-example', width: 800, height: 600, backgroundcolor: '#cdcdcd', scene: { preload: preload, create: create, pack: { files: [ { type: 'sceneplugin', key: 'spinewebglplugin', url: scenekey: 'spine' } ] } } }; var game = new phaser.game(config); function preload () this.load.image('logo', this.load.spine('boy', 'spineboy.json', 'spineboy.atlas'); } function create () this.add.image(0, 0, 'logo').setorigin(0); this.add.spine(400, 600, 'boy', 'idle', true); settimeout(function() console.log('will destroy game') game.destroy(true,false) settimeout(function() console.log('will reinstantiate game') new phaser.game(config) }, 1000) }, 1000) ``
3.16.2 - everything is ok phofurl 3.17.0 - loop have "jump" and also weird speed change phofurl
phofurl click to show pointer counters updating.
on ios, no more events are registered after the video starts playing.
it can be reproduced in the example: phofurl changing to earlier version fixes the problem
you can see a demo here.
phofurl if you open the inspector and drag the width to make the game narrower you will see the tilemap proportions change a lot.
i added a scaled down version of phaser logo to show issue is specific to tilemaps.
the logo seems to display fine.
phofurl click on the game to zoom, then change the type to webgl and click again.
notice how the particles end in a different spot.
execute the phaser.js file from the published dist directory in ie11 or any other older browser that does not support es6 and the bug will be reproduced.
phofurl - 3.17 phofurl - same repro in 3.16
one of the features affected by this is camera masks with fixed positions, which will throw a seemingly unrelated error on rendering.
this pen phofhyperlink is a minimally modified version of one of the examples phofhyperlink .
press r to restart the scene, which will fail (open the console to see error).
if you change line 40 of example ( here's a link to editor view phofhyperlink ) to false);`, scene will restart properly because non-fixed masks do not rely on default camera.
`resetbox(frame: phaser.textures.frame, x: number, y: number): void { tthis._bob.reset(x, y, frame); // this does not work tthis._bob.reset(x, y, frame.name); // this works }`
phofurl <- this example works.
if you replace the group variable with: ` var group = this.physics.add.group( [ { key: 'block', framequantity: 1, }, { key: 'block', framequantity: 1, }, { key: 'block', framequantity: 1, }, { key: 'block', framequantity: 1, } ] ); as you can see no body.
open devtools console, you can see that the position is not nan after the first update of spinea is called, but the position is changed to nan after the second update is called.
after spineb sets displayoriginx and displayoriginy, position will not be changed to nan.
the multiple draggables example in the official phaser examples repo phofhyperlink illustrates the problem well.
the example is pretty simple: phofcode
working: let tileset = "tiles", 16, 16, 0, 0); this.worldlayer = tileset); not working: let tileset = "tiles", 16, 16, 0, 0); this.worldlayer = "tileset");
just make a container and add a sprite or two and then do pixelperfect: true })
online snippet with full code at: phofurl relevant part from above: phofcode
instead of just using the following to be able to resize the game: 1869); i had to use (basically a hack to test): let canvas = canvas.width = "375"; canvas.height = "1869"; 1869);
i modified one of the examples in phaser labs on dom elements and i can reproduce this issue.
var config = { type: phaser.auto, width: 800, height: 600, backgroundcolor: '#2d2d2d', parent: 'phaser-example', dom: { createcontainer: true }, scene: { preload: preload, create: create }, scale: { parent: 'phaser-example', width: 500, height: 500, mode: autocenter: expandparent: false }, }; var game = new phaser.game(config); function preload () } function create () this.add.image(250, 250, 'einstein'); var div1 = div1.style = 'background-color: lime; width: 220px; height: 100px; font: 48px arial; font-weight: bold'; div1.innertext 'phaser 3'; var element1 this.add.dom(250, 250, div1); }
you can view all the code here: phofurl the game is being setup in the src/client/index.ts file.
the initial loading screen is in the map scene is in
here's a quick example: phofurl in the example, every time you hover over the element, the camera is scrolled down a bit, so you can eventually see the hit area move above image
phofurl in the example i have created 4 layers in tiled, with 3x3 tile squares, the light square is under dark square: two layers that use the one common tileset (on the left), and two layers that use separated tileset (on right).
to see issue move to right-bottom direction through cursor keys.
if let time2 = this.time.now; let time3 = let time = time2-time3;
codepen phofhyperlink , see the result in console.
js var map = this.make.tilemap({ key: "map" }); var tiles = "tiles0"); tiles, 0, 0); var innerwalls = tiles, 0, collides: true }); var outerwalls = tiles, 0, collides: true }); debuggraphics this.add.graphics(); // issue: this will just show colliding tiles from one of the layers { tilecolor: null, collidingtilecolor: new 134, 48, 200), facecolor: new phaser.display.color(40, 39, 37, 255), }); // work-around: call renderdebug() on each layer: { tilecolor: null, collidingtilecolor: new 134, 48, 200), facecolor: new phaser.display.color(40, 39, 37, 255), { tilecolor: null, collidingtilecolor: 134, 48, 200), facecolor: phaser.display.color(40, 39, 37, 255), ``
here a codepen with the different cases: phofurl phofhyperlink
here is a codepen with the phaser gamepad debug example, which uses the latest phaser version: phofurl phofhyperlink
here i attach the code and assets to reproduce the error.
it can be tested locally or can be run here: phofurl
i'm extending and calling super() super(world, scene, { classtype: block, maxsize: 1936 });
in scene's update() `let camera = this.cameras.main; camera.setzoom(2); let x = 0).x;`
phofurl this demonstrates how the event is not functioning properly.
normally, pressing any keys will cause the letter to flash, and letting go will cause it to revert.
on ios this is retained and does not revert.
this behavior occurs throughout all of the keyboard examples.
it works in version 15.1, as can be seen in this fiddle phofhyperlink , which shows the intended behavior.
it doesn't work properly in version 16.1 anymore, as can be seen in this fiddle phofhyperlink (the black area should touch the white one).
<a href=" phofurl source code repl</a> <a href=" phofurl result(running inside the normal page does not work)</a>
let config = { key: 'texturekey', x: { randint: [ 0, 10 ] }, y: { randint: [ 0, 10 ] }, };
`<meta name="viewport" user-scalable=no, viewport-fit=cover">` `scale: { mode: phaser.scale.fit, autocenter: }`
handling tile map created in tiled, and applied matter physics to it: phofcode
phofurl to reproduce: 1. launch code pen.
2. click on phaser window to gain focus.
3. press 'f' to trigger phaser to toggle fullscreen.
4. exit fullscreen using esc (not the natural phaser path) 5. phaser window will not be the same size as it was before entering fullscreen.
var config = { type: phaser.webgl, width: 800, height: 600, backgroundcolor: '#2d2d2d ', parent: 'quad container error ', scene: { preload: preload, create: create } }; var game = new phaser.game(config); function preload() { ' phofurl ' phofurl } function create() { var container = this.add.container(400, 300); quad1 = this.add.image(400, 300, 'image1 '); quad2 this.add.quad(400, 300, 'image2 '); container.add(quad1); //container.add(quad2); }
phofurl phofhyperlink please note that the example above does not show the real error on the alert due to cors but it demonstrates the crash anywa
starting with the example at phofurl i 've modify it for that: phofcode
` class scene1 extends phaser.scene { constructor (config) { super({ key: 'scene1' }); } create () { this.overlay = this.add.rectangle( this.cameras.main.width, 0xff0000 ); this.btn = this.add.rectangle( 100, 30, 0xffffff ); () => { }); } } class scene2 extends phaser.scene constructor (config) super({ key: 'scene2' }); } create () this.overlay = this.add.rectangle( this.cameras.main.width, 0x00ff00 ); this.btn = this.add.rectangle( 100, 30, 0x0000ff ); () => alert('scene 2 btn') }); var config type: phaser.webgl, width: 800, height: 600, backgroundcolor: parent: 'phaser-example', scene: [scene1, scene2] }; var game new phaser.game(config);
here is a pen demonstrating the problem (hitting a polygon with the ball will trigger a scene restart then the error): phofurl phofhyperlink
[ ' phofurl ]); ... this.audioexample = { delay: 0.5 });
this does not work: phofcode this works: javascript this.scene.tweens.add({ targets: this, angle: 90, duration: 200, ease: 'elastic.easeout', easeparams: [ .5, .5 ], }); this.scene.tweens.add({ targets: this, y: 100, duration: 300, ease: 'cubic.easeout', }); ``
` // 1. preload any multi-frame spritesheet with key "abc" // 2. compare frametotal (texture manager) vs. length of generateframenumbers (animation manager) console.log( "frames:", this.textures.get( 'abc ' ).frametotal, "vs", 'abc ' ).length ); // notice console output above will show 2 different numbers, off by 1 (this.textures.get( ) version is wrong) `
i cannot really provide an example code as to be reproduced it needs a facebook leaderboard.
please check on the constructor and darken, lighten methods on "color" phofhyperlink <!--
this code is almost exactly the same than this example : phofurl i just changed the initial velocities to make them do the weird collide bug.
phofcode edit: can be replicated using this example phofurl extend the class with and call super() instead of `this.sprite = 0, "player", 0);` and finally `this.sprite = this` to not break the code
codepen of issue: phofurl phofhyperlink
put an iframe somewhere without https <iframe src=" phofurl start phofurl
using phofurl phofcode change the duration to anything greater than 0, and it works - but when duration is 0, the sprite just disappears instead.
i'd expect it to just jump to the end of the tween instantly if duration is 0.
on < phofurl change line 37 to phofcode
phofurl open the console, then click on the canvas
here is a codesandbox link phofhyperlink .
i am using the following code to load the tiles and add the collision: const map = this.make.tilemap({ key: "map" }); const tiles = "tiles"); this.groundlayer = tiles); collides: true }); this.bullets = this.physics.add.group({ classtype: bullet, runchildupdate: true }); this.groundlayer); ``
import plugin in scene (menu) `preload() { this.load.sceneplugin({ key: 'rexuiplugin', url: scenekey: 'rexui' }); }` event: `// event table.on('cell.click', function (cellcontainer, cellindex) { console.log('game scene with index ' + cellindex); }, this);`
phofurl here you will hear only one sound.
in fact, the first one never plays, because the second one with the configured delay immediately stops it.
with event based sounds, ist usually happens that a sound gets cut off while playing, because another instance of it starts playing.
phofurl here you will hear both sounds.
the second one shortly after the first one, but before first ends.
tpreload() { t tconsole.log('now loading...'); t} tcreate() { t tvar btn = this.add.graphics(); 1); 32, 300, 200, 32); t t// btn.setinteractive(new phaser.geom.rectangle(0, 0, 300, 200)); function() { pointerup'); t t}, this); t}
1. phofurl 2. example code in scene.create() phofcode
test code on codepen phofhyperlink
paste the below code into labs, modified from this lab phofhyperlink phofcode
i made a codepen with a few bodies.
there are two staticbodies on the left.
the top one is square, the bottom is circle.
they both render as square in debug.
i added moving bodies to collide with them.
you can see the bottom moving body collides with the circle and bounces off at an angle, confirming circular collision.
also please try changing offset for static bodies, it has no effect.
this is a subset of the code i am using to generate the tilemap and add the lights.
the issue is affecting all the examples using multiple light, like this one, which i used for tests: phofurl
var custompipeline = new phaser.class({ extends: initialize: function custompipeline(game) { { game: game, renderer: game.renderer, fragshader: ` precision mediump float; uniform sampler2d umainsampler; varying vec2 outtexcoord; void main( void ) { vec4 pixel = texture2d(umainsampler, outtexcoord); gl_fragcolor = pixel; } ` }); } }); var game = new phaser.game({ type: phaser.auto, parent: 'phaser-example', width: 800, height: 600, backgroundcolor: scene: { preload: preload, create: create } }); function preload() custompipeline new custompipeline(game)); } function create() this.add.image(200, 200, 'hotdog'); var hotdogwithshader this.add.image(500, 200, 'hotdog'); // with this turned off, both hotdogs render as expected.
// with this turned on, the hotdog with a custom pipeline is flipped.
< phofurl see the platform's deltax values in console.
tested on phofurl but it works locally as well phofcode
changing a line to `{ key: "randomnameplugin", plugin: randomnameplugin, mapping: "randomplugin" } as any` allows it to continue, with this code: ** mainmenu.ts ** texport default class mainmenu extends phaser.scene t t/** t t * unique name of the scene.
however, `this` in the code above (which is a `mainmenu` class that extends `phaser.scene`) doesn 't have a `plugins` property (although `console.log(this);` shows that it does).
am i missing something, or are these missing?
**below is the sample code or clone from here phofurl phofhyperlink ** phofcode
` var rect1 = this.add.rectangle(12, 12, 320, 320, 0xfeefee); var maskgraphics = this.make.graphics(); 23, 32, 32); var mask = for (var i = 0; i < 12; i++) { x 8, y i * 64; var item this.add.rectangle(x, y, 600, 52, item2 this.add.circle(x, y, i*5, 0xffffff); } rect1.setmask(mask); `
in this lab: phofurl change `rect.setscale(2);` to 120);` or `rect.setsize(120, 120);` (and click the shape)
phofcode <bountysource-plugin> --- want to back this issue?
** post a bounty on it!
phofhyperlink ** we accept bounties via bountysource phofhyperlink .
phofcode <bountysource-plugin> --- want to back this issue?
** post a bounty on it!
phofhyperlink ** we accept bounties via bountysource phofhyperlink .
using the phaser labs single sprite example phofurl add these to the `create` method and run with canvas / webgl renderer types.
phofcode the bunny will be placed in differing positions.
<bountysource-plugin> --- want to back this issue?
** post a bounty on it!
phofhyperlink ** we accept bounties via bountysource phofhyperlink .
use the phaser labs bitmapmask example phofurl and just change the renderer type to canvas.
in the following example, we will meet priestly the slime.
unfortunately, we'll also meet portions of the texture(s) below priestly in the texture atlas due to this bug.
the following code is pulled directly from the following phaser 3 example.
i have added camera controls to allow scrolling and zooming the camera, and also added logic to the `update()` function to hide culled game objects.
as shown in the gifs, if you zoom in by pressing q and then scroll around, you should notice game objects being culled prematurely.
note that i log the fps on the screen itself.
this error can be reproduced by copy pasting the following code into a phaser labs example page (eg.
can be observed on the phaser labs example: phofurl
below is a repro case i wrote in the labs (i couldn't figure out how to save it there, though).
you can see it in the following example: phofurl also when you run the following code, you would expect to see a complete blue screen, when you resize, but instead a black area appears.
var config = { type: phaser.auto, parent: 'phaser-example', width: window.innerwidth, height: window.innerheight, autoresize: true, backgroundcolor: '#00ff00', scene: { create: create, resize: resize } }; function create () { document.body.background = '#ff0000'; this.events.on('resize', resize, this); } function resize (width, height) { if (width === undefined) width = } if (height === undefined) height = } height); var game new phaser.game(config); function (event) window.innerheight); }, false); ``
with this example: phofurl add the following line after `var game = new phaser.game(config);` phofcode you may change the timeout duration to see different exceptions being thrown.
* working, v3.10.1: phofurl (from this tutorial phofhyperlink ) * not working, v3.12.0: phofurl
phofcode dragging function phofcode // here phofcode ` it will fix the position 200 , 300 but i want only add draggable image into 6 x 4 grid box here check the image attached for refrence screen shot at 2 47 14 pm phofimage screen shot at 2 47 23 pm phofimage
phaser code sample: phofurl - you can use arrow keys to move around.
you can see clearly that it "catches" on each segment matter.js equivalent: phofurl - the `my_points` is copied directly from the other example through the chrome dev console using `copy()`
phofurl phofurl in both examples, add the piece of code below, and click the sprite.
< phofurl <bountysource-plugin> --- want to back this issue?
** post a bounty on it!
phofhyperlink ** we accept bounties via bountysource phofhyperlink .
full demo: here phofhyperlink (top left - static layer, middle right - dynamic layer, bottom left - texture itself) phofcode
this is just the phaser labs first game example with the addition of the destroy call after a few seconds.
how i initialize drag: phofcode when i disable drag just after that, i can no longer drag.
but my code does this: phofcode essentially all i think need is false);` but i've put the rest there just to show i've tried them.
have also checked that is still `false` while dragging is happening.
here is an example code, which you can copy to the ** labs.phaser.io ** and run: phofcode javascript error in the console: phofcode in firefox esr (v52.9) error's description is a little more informative: phofcode in firefox 61 sprite is visible, but no light.
no related errors in the console.
<bountysource-plugin> --- want to back this issue?
** post a bounty on it!
phofhyperlink ** we accept bounties via bountysource phofhyperlink .
in sceneb phofcode in scene b phofcode
link to my site for testing... phofurl
in the following example, there is a "a" image (ignored by the main camera) in the black area above the "b" image.
passing cursor over "a" will make "b" appear/disappear on and codepen version phofhyperlink javascript var game = new phaser.game( { ttype: phaser.auto, twidth: 200, theight: 400, tscene: t{ t tpreload: function() t t{ phofurl t t}, t tcreate: function() t t{ t t tvar a = this.add.image(100, 100, 'a ') t t tvar b = this.add.image(100, 300, 'b ') () => b.setvisible(false)) () => b.setvisible(true)) t t} t} }) ``
it 'll be easiest to see the mismatch here: phofurl
my pipeline extends texturetintpipeline ( extends flattintpipeline at phaser v3.11 ), only simply create pipeline object from the shader string caches ( codeing by coffeescript ).
coffeescript class pipeline extends constructor: ( game, options = {} ) ->
add a stroke to this lab example : phofurl and see how it breaks it.
you can see the issue here: phofurl this will log the delta time passed to the update method as well as "real delta" which is calculated each frame.
(if there 's no difference, you probably have a beefy pc.
try throttling the cpu using chrome dev tools.)
the essential code is: phofcode
jsfiddle: phofurl in the initial state you can see a flare, it is being lighted by the light.
now try to comment out **line 30** and uncomment **line 31** - flare disappears, but the only thing has changed is light's x position a little.
now go back to the initial state and comment out **line 3** and uncomment **line 4** - flare again will disappear and only thing has changed is canvas width by 100px.
here is an example code, which is a modified version of ` phofurl (you can just copy it there and run): phofcode at this moment it is a working state without lights - tilemap is visible, sprite too, no errors in a console.
but: 1. uncomment lines **37, 40, 41** - player's sprite disappears.
2. uncomment lines **37 - 41** - example not working at all, two javascript errors the console: phofcode phofcode firefox 1'st error's description a little more informative: error: webgl warning: -1 not valid `index`.
this value probably comes from getattriblocation() call, where this return value -1 means that the passed name didn't correspond to an active attribute in the specified program.
try to create a new htmlcanvaselement element e. g. in typescript `let htmlcanvaselement = 48, 48, phaser.canvas, true);`.
you can replicate the behavior on the cursor keys example: phofurl
1. on portainer, go to 'registries ' 2. add a new registry 3. enter as registry url enable authentication, enter your github credentials 4. push one of your images on github package registry with the following command: `docker login -u github_username -p github_password phofurl && docker push 5. on portainer, go to 'stack ' 6. add a new stack 7. enter a docker compose file of your own, and enter as an image the new image pushed to github package registry (image: 8. deploy the stack 9. see the bug: many containers appear as rejected before finally running
1. connect to a docker machine using docker api using domain:port.
2. add nginx container which points to used domain and deploy it.
1. assign a user to a team with the helpdesk role.
2. assign them to another team with the standard user role.
3. see that the user has `read-only` abilities.
as a portainer administrator: 1. go to registries and add "mcr.microsoft.com" as "microsoft container registry" 2. open app templates and make sure container templates is shown.
3. click "update" on sql server (linux) 4. change the image to "mssql/server" and choose "microsoft container registry".
5. also fix eula so it has a label while you are here.
5. save and leave the screen.
6. try deploy sql sever.
deploy stack with the following compose file: phofcode amd64 node (manager) phofcode arm64 node (workers) phofcode they are on the same network and i've launched a container connected on the portainer agent network and did a nslookup on tasks.portainer_agent, all ip's show up
1. go to latest api documenation on swaggerhub phofhyperlink 2. see 2 errors 486 parameters cannot have both a "in: body" and "in: formdata", as "formdata" _will_ be the body 1597 parameters cannot have both a "in: body" and "in: formdata", as "formdata" _will_ be the body ``
1. restrict a stack to an rbac user 2. login as any other endpoint-admin or helpdesk user that does not have the stack assigned to them and see it is shown as restricted to administrators.
1. as an endpoint administrator, browse to the services view and remove a service that is related to a stack.
2. browse to the stacks view and see that the stack related to the service that was just deleted is missing.
3. login as an administrator and see that stack is still visible.
1.set a total control stack as owned by administrators 2. log in as endpoint admin or helpdesk user 3. see that it shows as limited stack
1. go to a container as an endpoint admin or standard rbac user 2. click on attach 3. see that portainer hangs on `attaching..` image phofimage
1. restrict a resource to a non-admin user e.g.
`container to helpdesk user eve` 2. login as an endpoint-admin and try to delete this container 3. recieve error `failure access denied to resource`
1. have rbac enabled and assign some users roles.
2. disable rbac 3. login as the users and see they still have the abilities from their previous rbac role.
1. create a stack based on a compose file (i can 't share mine due to mission critical applications in the container).
--stack is not completely removed 4. trigger remove again
1. assign an rbac user access to an endpoint (e.g.
adam as endpoint-admin) 2. log in as adam and see you have the option to console into a container screenshot from phofimage 3. refresh the browser and see that you no longer have any abilities (effectively read-only user) screenshot from phofimage 4. log out and back in and see you have the abilities back
change image version from 1.22.1 to 1.22.2 in docker-stack.yml and update the stack.
version info is shown in the left bottom corner.
1. go to 'volumes link ' 2. see error in messages log in host machine
1. create a container image with an healthcheck (type `cmd-shell`) 2. run a container from that image 3. update the image, changing healthchecks parameters (i tried changing `cmd-shell` in `cmd`) 4. re-create (or edit) the container.
the new container will use old configurations for healthchecks.
1. get ` phofurl on a deployment in which there are pre-existing external stacks.
1. deploy 1.22.0 with rbac enabled 2. grant access to an endpoint for a user who is not admin 3. upgrade to 1.22.1 from 1.22.0 (which is working properly with rbac) 4. the members granted via rbac can not login to portainer anymore.
1. go to 'any men' 2. click on any menu.'
1. go to '/#/images ' 2. fill the image name and choose the right registry 3. click on 'pull the image ' and then wait for the operation 4. at end there is a "green" message saying image is successfully pulled 5. the image is not displayed in list of images.
6. check docker log /var/log/daemon.log
1. go to create container view 2. configure the container and click on the `deploy the container` button 3. see failure access denied to resource error image phofimage 4. see that the container is stuck in a `created` state
1. on an old ipad go to the portainer url 2. see no login fields
1. add a user to dev team (assigned as endpoint administrator on endpoint1) 2. add same user to prod team (assigned as read-only on endpoint1) 3. delete prod team 4. login as user and see user is still being restricted to read-only
1. use google chrome (here: on mac os x) 2. use the external authentication extension (here: configured to go to a "custom" oauth provider - but maybe this also happens for other configs) 3. login via oauth 4. observe url
1. run a portainer instance with ssl enabled 2. use a ssl tester such as phofurl on your portainer instance 3. look at the result
1. be behind an omnipresent corporate firewall that will - by default - block server access to github.com 2. launch portainer on docker hosted on such a blocked server, using either ~/.docker/config.json, --env passed to docker-compose, or an `environment` section in docker compose to set `https_proxy` to the correct environment variable.
3. with portainer pointing at some docker swarm or instance, attempt install iron functions or some other built in app template that is hosted in the portainer/templates repository
1. install docker 2. run a portainer container 3. run a watchtower container 4. wait for everything to break when `docker.sock` becomes a directory 5. spend hours trying to get your server working again, because the thing you did last time this happened didn't work this time (seriously, the fix changes every time)
1. authenticate against the api using the admin account phofcode 2. i try create the new user with method "/users" phofcode
1. have two docker swarms with their endpoints registered by and managed by one portainer gui.
2. deploy "traefik" to the first swarm as a stack using the portainer gui.
3. deploy "traefik" to the second swarm as a stack using the portainer gui.
1. install a multinode docker swarm.
2. connect portainer to the swarm using an exposed docker endpoint.
4. install portainer agent on the swarm using the instructions here phofhyperlink 5. connect portainer to the swarm using new agent endpoint.
1. go to a container with a shell 2. click on 'console' 3. click 'connect' 4. see the change to connecting, where it remains 5. observe error on javascript console
- portainer is installed on a standalone docker instance.
- a 3 node docker swarm with portainer agents installed is configured.
- portainer is configured with the ip of the master node.
- there is already an instance of gitlab running on this node and we are configuring it.
1. go to containers, add a container called "gitlab-configure" 2. add gitlab/gitlab-runner 3. select the node where a previous instance of gitlab runner already running.
4. add a volume mount /etc/gitlab-runner pointing to gitlab-config volume on this node 5. set the command to "register" and set console mode to "interactive, tty"/ 6. click deploy container.
1. go to stacks, new stack 2. click on web editor 3. copy above configuration 4. see error
1. create multi node windows 2019 docker swarm, 3 managers, 2 work nodes 2. phofurl 3. try to connect using ip address:9000 4. connect fails from browser/curl etc.
1. go to local, then containers, and click on the container name (pihole in this case).
2. click on "duplicate/edit" 3. scroll down to the bottom 4. click on network 5. click "add additional entry" and add host:ip 6. click "deploy the container" 7. accept prompt "are you sure?
a container with the same name...." 8. see error
1. have portainer managing a docker swarm.
2. go to volumes > add volume and enter the following details: name: some_name driver: local use nfs volume: yes address: nfs version: nfs4 mount point: /vol061 3. go to stacks to add a simple stack to use the volume.
we want use the gui bind the volume so we will start with a tmp local binding phofcode 4. once stack is started, open it in stacks, and then click on <stackname>_minio1 service.
5. scroll down mounts, change volume source nfs volume created above, type something random in target field enable apply changes button and click apply changes.
6. now click on swarm > cluster visualizer and see which node is running minio1 service.
7. ssh server run docker volume ls list inspect volumes.
1. trigger the issue: -
assign ldap user to endpoint and attempt to login.
1. go to a container 's page 2. click on recreate 3. check "pull latest image" 4. click recreate 5. see error
1. go to your portainer instance and login with a none-admin user 2. click on "home" and memorize the key figures of an endpoint 3. click now on the entpoint to see more information 's 4. now the key figures of the entpoint are no longer visible 5. do steps 1-4 now with an administrator account and key figures are visible
1. install docker on windows 2016 2. setup tls connection with portainer host 3. try to create empty stack without any services with docker-compose.yml that looks like that: phofcode 4. see error
1. go to any container 's stats page 2. look at memory usage or network usage (aggregate) graphs.
1. start a new portainer instance 2. activate oauth extension 3. configure oauth 4. logout and try to connect with the login form and invalid credentials 5.
1. go to 'registries' 2. click on the 'manage access' action on a custom, authentication-enabled registry 3. select a user or team on the 'create access' section and click on '+ create access' 4. see error
1. run a container with a health check (like 2. on the containers overview page it is not there.
3. stop the container from the command line 4. on the containers overview page it is now there in a stopped state.
5. start it, and it will disappear
1. follow instructions in the edge agent setup guide ( phofurl 2. create edge agent on synology host using command: `sudo docker run -d -v -v -v /:/host --restart always -e edge=1 -e edge_id=<edge_id> -e cap_host_management=1 -p -v --name portainer_edge_agent portainer/agent` 3. associate edge agent with portainer through web ui (portainer ui states that the agent is associated) 4. attempt to connect to edge agent, which fails 5. logs for agent container state that connection was successful (and states fingerprint).
1. go to any registered edge endpoint 2. click on `app templates` 3. select a container hosted locally 4. enter a name: `nginx test` 5. click `deploy the the container` 6. see the error popup: phofcode `
1. go to any registered edge endpoint 2. click on 'app templates` 3. select a stack hosted locally 4. enter a name: `nginx test` 5. click `deploy the the stack` 6. see the error popup: phofcode `
1. go to any registered edge endpoint 2. click on images 3. enter image: `nginx:latest` 4. select registry: `myregistry` 2. click on pull the image 4. see error "failure manifest for not found: manifest unknown: manifest unknown"
1. go to images view (for example) 2. select an image on page 1 and another image on page 2 3. the ui will only keep the image on page 2 as selected
(on windows) 1. go to images view 2. try to pull the mssql/server image from mcr.microsoft.com 3. get `image successfully pulled` toast notification 4. see that the image hasn 't actually pulled
1. set up portainer with google oauth 2. set up a reverse proxy such as traefik, to serve portainer over a specific domain name (e.g.
example.com) 3. navigate to example.com and try to log in using google
1. log in as ldap user 2. at 'home' page you will see all accessible endpoints and count of container ant other their resources.
22 phofimage 3. click to one of endpoints and see only images count, no containers, no networks, no volumes.
11 phofimage 4. log out and log in as admin 5. see all endpoint and all containers, everything works correctly.
1. open portainer and web inspector 1. pick an endpoint 1. notice how a request to is made 1. open 'stacks' notice a request yet again click on a stack see another request
1. remove the `portainer.db` file; 2. enter new password; 3. try to log in with new password.
1. deploy portainer instance on localhost:9000 2. deploy agent in cluster 3. create agent endpoint on localhost:9000 and manage it portainer(1) phofimage 4. deploy portainer instance on localhost:9002 5. create agent endpoint on localhost:9002 (at this time, endpoint is shown as down) portainer(2) phofimage 6. docker service update agent with `--force` flag 7. refresh snapshots localhost:9002 (now endpoint is up) portainer(3) phofimage 8. in the home view of localhost:9000, click `up` and get error message portainer(4) phofimage 9. refresh view localhost:9000, is `down` portainer(5)
setup a swarm cluster: - 1 manager node - 1 worker node - install agent - register cluster with portainer deploy stack to worker node stacks containers volumes check list of volumes in ui, they don't show verify `docker volume ls` on worker
1. go to services 2. click on some of services to expand them 3. turn on auto-refresh 4. see the page refresh and the services will be collapsed
1. go to a place where there is a number input e.g create service 2. click the down arrow on the `replicas` input a few times 3. see it go into negative numbers
1. go to services view and click the checkbox of a service 2. see the task status table show services bug phofimage
1. create 2 persistent volumes, name one and let docker name the other 2. add a service, mount these persistent volumes to it, then deploy 3. edit the service 2. see below problem where the persistent volumes are not saved, instead we have the `select a volume` dropdown _v1.19.0 & v1.20.0_ 1 19 1 20 phofimage _v1.21.0 & v1.22.0_ 1 21 1 22 phofimage
make a call to /endpoints/{id}/access to update the endpoint permissions.
1. go to containers 2. the containers are sorted by state 3. click on any other column header than state 4. click refresh 5. the containers are sorted by state again
1. go to `/#/registries` 2. add a custom registry that requires credentials.
this registry doesn 't have to exist to reproduce these steps, so pick whatever you want.
3. enable authentication and enter anything you want for a username and password.
3. now go back to `/#/registries` and click manage access for the newly created entry.
4. choose a user or team under create access, then click the create access button.
5. see error: "invalid credentials.
username and password must be specified when authentication is enabled"
1. go to stacks 2. click on add stack 3. add environment variables 4. deploy the stack 5. see error
_with rm extension activated_ 1. create a registry with valid url 2. browse (should be able to list repositories & co) 3. edit url to invalid one (`/#/registries/:id`) 4. try to browse : still able to do it.
backend still using the previous valid url same steps can be done inverting valid and invalid urls: 1. create a registry with invalid url 2. browse (should not be able list repositories & co) 3. edit valid one (`/#/registries/:id`) 4. try browse : still not able do it.
backend still using the previous invalid only way force the new be used is go and test the configuration.
the `test configration` will force backend use new for this registry (not even needed apply changes there, clicking "test" button is enough trigger update on backend.
1. build image from latest commit of develop branch 2. click on a view in portainer with a table, e.g volumes 3. see there is no default sort selected
really hard to reproduce, as it is random.
1. deploy a service 2. click on your service to view its service details view 3. see the box next to the service webhook toggle see error: image phofimage
1. set up a fresh portainer 2. add an admin user, enter an endpoint 3. get green confirmation message see that the are not lised in portainer.
steps to reproduce the behavior: 1. log in 2. click on 'primary ' endpoint 3. see error : phofcode
1. try to configure oauth with okta and it fails.
steps to reproduce the behavior: 1. go to 'images' -> 'build a new image' 2. name it `test_postgres:latest` 3. enter the following as dockerfile phofcode 4. build 5. create a container from `test_postgres:latest` with name `testpostgres` 6. go to 'images' -> 'build a new image' 7. name is still `test_postgres:latest` 8. enter the following as dockerfile phofcode 9. build 10. go to 'containers' -> 'testpostgres' 11. hit `recreate` and choose pull the image 12. go `testpostgres` container and look at `env` variables -> i would expect `postgres_user cartman`, but it is still `postgres_user kyle` 13.
'containers' 'testpostgres' 14. hit `duplicate/edit` 15. in 'advanced container settings' go 'env' tab i would not expect anything be set here, as i never set a variable from neither portainer's ui, nor `docker` cli in context of `postgresql` this is even more tricky, as it sets variable called `gosu_version` (not sure what for).
if this ever changes it is very hard determine when using portainer.
this means, that on every `duplicate/edit` with new image version i need check all `env` variables and manually remove those, which didn't set myself.
also, this makes `recreate` quite useless for this scenario.
1. create 30000 empty docker volumes (so the docker volume ls command takes longer than ten seconds) 2. navigate to volumes view and receive unable to retrieve volumes error image phofimage 3. navigate to home view 4. click on agent enabled endpoint (which is shown as up in portainer) error occurs saying endpoint is down image phofimage
1. create your nfs volume: phofcode * validate it 's working: `docker run --rm -it -v portainer_data:/data busybox ls -al /data` 2. start portainer with that volume mapped onto the data dir: phofcode 3. try to curl the port, or do anything with the volume, and it hangs... you can 't kill portainer 's pid, or remove the container without rebooting host.
after a two minutes, you 'll start to see these messages in dmesg: phofcode
1. deploy an agent + portainer setup 2. manage the agent endpoint 3. drain a node inside the cluster through the ui 4. directly try to manage the endpoint (access containers, volumes, etc...) and see that one request will fail
1. deploy agent on swarm with 1 manager and 2 worker nodes 2. promote a worker node to manager 3. drain leader node 4. endpoint shown as down in portainer
steps to reproduce the behavior: 1. login to portainer 2. go to "containers" page 3. set "items per page" to "100" 4. hide one columns 5. logout portainer 6. login back portainer 7. go "containers" page 8. the previous sets got reverted default (10 items per page and all column visible)
phofcode `msg="attempting next endpoint for pull after error: no matching manifest for linux/arm/v7 in the manifest list entries"`
steps to reproduce the behavior: 1. create new private registry 2. create new app template 3. write some parameters in template 4. deploy container 5. see error:"failure:invalid reference format"
steps to reproduce the behavior: 1. go to 'stacks ' 2. click on 'add stack ' 3. add stack name 'func ' 4. select 'use a git repository ' 5. add repository url ' phofurl 6. click 'deploy the stack '
steps to reproduce the behavior: 1. have the bad luck i have, and have it randomly occur.
steps to reproduce the behavior: 1. run the local registry by running: phofcode 2. assuming the registry manager extension is enabled, use "custom registry" to setup the registry 3. enter a registry name and enter url which is url of local registry: <ip_address>:5000 4. click on "add registry" 5. push an image with different tag names, for example, i pushed hello-world image to local registry with different tags: phofcode 6. go back to portainer, click on "registry" then "browse", then "hello-world" 7. you should be ble see all images, but refresh page.
you should see that all images disappeared and error "failure: unable retrieve tag latest", "failure: unable retrieve tag lts", "failure: unable retrieve tag 1.0.0"
steps to reproduce the behavior: 1. restart the host (centos7) 2. login into portainer 3. go to the containers section 4. you will see the ip addresses are chnaged.
installed ubuntu server 19.04 and updated, checked during install both ssh and docker
steps to reproduce the behavior: 1. enter to the container's terminal; 2. type somithing in english for example; 3. switch language; 4. type any text(you will not see symbols); 5. switch back to english; 6. type any text; 7. text doesn't showing.
steps to reproduce the behavior: 1. setup a docker multi-node swarm (windows only) 2. install portainer through a single-replicated global service (manager only) 3. expose a tcp endpoint on the same manager portainer is running by changing the docker daemon.json file in programdata/docker 4. attempt to connect to local daemon
1. go to 'create service' view 2. click on 'secrets tab' at bottom of screen 3. click 'add a secret' and select your secret 4. repeat step 3 with the same secret 5. click 'create the service'
steps to reproduce the behavior: 1. go to 'users ' view 2. within add a new user widget fill in details for a new user (making sure there are spaces in the name) 3. click 'create user ' 4. see incorrect error selection_002 phofimage
steps to reproduce the behavior:
steps to reproduce the behavior: 1. define a `docker-compose.yaml` file similar to the one given above.
`docker-compose up -d portainer` 3. in a web-browser, navigate to portainer on port 9000.
4. attempt to login with username `admin` and password matching the contents of the portainer_admin_password file.
steps to reproduce the behavior: assuming there are multiple users and or teams: 1. go to 'endpoint access or group access view on a group or endpoint' 2. click on 'authorize all' or 'deny all' buttons 3. not all users and teams will be moved
steps to reproduce the behavior: 1. go to 'team details view for a team and make sure there is a team leader present in the team 2. click on 'remove all users' or the 'remove' button next to the team leader name 3. see error i.e leader count is not updated to show that leader has been removed.
steps to reproduce the behavior: 1. deploy portainer using official deployment info (swarm mode using composer) 2. configure ldap authentication (either simple bind, tls or starttls) 3. go to default "primary" endpoint and using manage access give access to the user 4. login in portainer with the user (in home section he is able to see all the info about primary endpoint, number of: stacks, services, containers, volumes and images) 5. click on primary endpoint on home page.
6. the user see can see number of images inside swarm, but 0 of any other resource (stacks, containers, volumes, services or networks).
no error shown in container log.
steps to reproduce the behavior: 1. go to portainer stack menu 2. click on 'add stack ' 3. fill in required detail 4. click 'deploy the stack ' 5. see error <img width="317" alt="screen shot at 1 37 27 pm" src=" phofurl
steps to reproduce the behavior: 1. go to services inside a swarm environment that is not running the portainer agent 2. click on a service 3. click on the stats or console icons under the actions column 4. see errors below <img width="310" alt="screen shot at 3 24 16 pm" src=" phofurl <img width="1005" alt="screen shot at 3 25 25 pm" src=" phofurl
steps to reproduce the behavior: 1. go to 'stacks ' 2. click on '+ add stack ' 3. add name and define stack and click on 'deploy the stack ' 4. error during connect: get phofurl dial tcp: lookup /var/run/docker.sock: no such host
- server and client certificates/keys signed by ca.
- server certs used by docker engine - client certs used by portainer - ca used by both 2. start remote docker engine: `dockerd --tlsverify --tlscacert=/root/ca.pem -h 3. start portainer container `docker run -d -p --name portainer -v /home/ash/certs:/certs -v portainer_data:/data portainer/portainer` 4. choose to add remote endpoint 5. upload tls certs from bind-mount location of /home/ash/certs 6. click connect
1. create an app template using a remote compose file, with variablized version variables.
2. create several variables for the template using the select list (see screenshot) image phofimage note: sensitive information redacted 3. add some presets, but select the select list button image phofimage 4. save the template and create a stack.
image phofimage 5. the stack immediately reverts to presets, even though we want to select from a list.
block access to the registry and try to download the image.
login --> select swarm --> select stacks
steps to reproduce the behavior: 1. spin up your portainer container as described in the documentation, nothing fancy, just follow the docs 2. go to settings and assign phofurl as your public ip (it needs to start with https://) 3. go to containers and try to open link under published ports column by clicking 4. see if your url is phofurl in your address bar and browser saying "this site cant be reached"
steps to reproduce the behavior: 1. logout portainer 2. login portainer 3.
`portainer.home` shows, do not click any endpoints 4. visit phofurl 5. page is blank
steps to reproduce the behavior: 1. session timeout 2. click any page 3. redirect to `/auth`.
enter user and password, click on 'login' 4. login seems no response 5. press f5, it redirect to `/home`, login actually is successful
steps to reproduce the behavior: 1. go to 'dashboard ' / 'containers create ' / other pages 2. see error
steps to reproduce the behavior: 1. go to 'containers ' 2. click on 'add container ' 3. see error
steps to reproduce the behavior: 1. stop container 2. click on duplicate/edit 3. scroll down to runtime and resources 4. drag slider to unlimited, and click deploy 5. slider resets to previous value.
note selecting a non-unlimited value works as expected
steps to reproduce the behavior: 1. go to the console 2. use nano function on a file 3. scroll down/up or navigate with the arrows 4. see error
steps to reproduce the behavior: 1. create a local registry with a port like 5000 (in my case it 's `localhost:5000`) 2. push any image to that regitry 3. deploy an container using the pushed image 4. update the image and push the new image 5. goto phofurl 6. select your 7. open network monitor 8. click pull from registry 9. notice name is wrongly splitted and `invalid tag format` error
steps to reproduce the behavior: 1. go to phofurl 2. add stack 3. set name of stack, so it will start with uppercase letter 4. two stacks are created
steps to reproduce the behavior: 1. run a container that serves git repos on the same network as portainer, i used this one: phofurl 2. put a repo with a submodule inside of the container that serve git repos.
3. try to clone in a app template the submodule itself.
path i 've used: ` phofurl 4. see error
steps to reproduce the behavior: 1. add a number of containers with different published ports 2. go to the container list 3. click on 'published ports' 4. observe that the ports are not in any sensible order
create a host job that takes the image from private repository that requires authentication.
steps to reproduce the behavior: 1. add gitlab.com as registry in portainer with auth 2. externally push image to gitlab.com registry with a tag other than latest (dev, newname, etc) or a subdomain of the main registry
steps to reproduce the behavior: deploy a container with a label and no value specified
here is a simple python3 script to demonstrate this issue (require requests phofhyperlink ): phofcode this script create only 2 stacks concurrently but you can easily increase this number by increasing the number of created threads.
1) run container from templates.json a) run nginx:mainline-alpine container with command statement as per dockerfile defined for command field; b) run anything from templates.json with command statement containing single quotes; 2) into `docker ps` you will observe single double single quote for command.
steps to reproduce the behavior: 1. create a network 2. connect a container to the network 3. click the network name
steps to reproduce the behavior: 1. under 'settings' in the left menu 2. click on 'users' and pick 'teams' 3. in the input field 'name' type 'a & b' and press enter 4. scroll down to the 'teams' list and see error (shown as `a &amp; b`)
steps to reproduce the behavior: 1. go to 'swarm' 2. click on any of the nodes
steps to reproduce the behavior: 1. create a stack as non adminstrator with the following config (just relevant parts): phofcode 2. enable access control (is default) 3. click 'deploy the stack' 4. click on 'volumes' on the left and see no volume: volumes_waja phofimage 5. navigate to 'container details' of created container and see attached volume there.
container phofimage 6. clicking on volume brings you back to volume view with following error: error phofimage 7. logged in a administrator reveals that volume ownership was given to object 'administrator': volumes_admin phofimage
steps to reproduce the behavior: 1. add registry with authentication and images in it in portainer dashboard 2. deploy new stack from dashboard with some images in global mode 3. join new node to cluster 4.
i run `docker stop portainer` to get errors above
sadly i was not able to find out the factors needed to reproduce this behavior.
all i can say is, that it in some random cases it just seems to work but in most cases it doesn't.
current deployment: 1. server: gce 2. registry: gitlab.com private registry (i am very very sure the credentials set in portainer's gui is correct.
however, i am curious how to validate it.)
steps to reproduce the behavior: 1. go to the a service page 2. click on`update the service` 3. check `pull latest image version` option 4. app's container recreated but image version is not updated.
steps to reproduce the behavior: browse to phofurl
steps to reproduce the behavior: 1. go to /#/endpoints/new 2. click on 'agent ' 3. note directions in information section 4. trying "curl -l phofurl -i" returns a 404 error.
steps to reproduce the behavior: 1. click networks 2. click create network 3. select macvlan as driver 4. notice that attachable option is missing, weep gently.
steps to reproduce the behavior: create an insecure registry (out of scope) of portainer.
then create a new entry.
it will be assumed to be accessed via https.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
1. create new stack from web ui.
enter docker-compose file in web editor phofcode 2. click "deploy the stack".
3. error shown in console and also in browser.
console message is > ash-4.3# docker-compose up > starting portainer ... > starting portainer ... done > attaching to portainer portainer | templates already registered inside the database.
| instance already has defined endpoints.
skipping the endpoint defined via cli.
steps to reproduce the behavior: create container with published ports (in my case 8080 -> 80, 4433 -> 443) stop container edit env variables deploy with new settings
steps to reproduce the behavior: 1. create template with ports mapping including host specification in templates.json 2. load in portainer 3. create container 4. see error
steps to reproduce the behavior: 1. fail to recreate a container (recreate a container and map its port to an existing mapping) 2. app stays on the container creation page 3. remove the problematic ports and try to recreate again 4. portainer won't tell about conflicting names, because the original name doesn't exist anymore 5. portainer will fail because there's already a container named `original_name-old`
steps to reproduce the behavior: 1. go to 'container ' 2. add new container 3. edit container with new image 4. dockerfile cmd in the new container can not read exactly
edit, duplicate and recreate running container
steps to reproduce the behavior: 1. run portainer 1.19.2 2. docker pull 3. start new version
steps to reproduce the behavior: 1. go to
steps to reproduce the behavior: 1. create a new instance of portainer (clear db) 2. create the default docker endpoint 3. change url to `/dashboard` 4. see console
1. go to images tab 2. specify any image in the image input box 3. pull the image.
steps to reproduce the behavior: 1. select a stopped container 2. go to 'containers ' 3. click on 'container stat ' icon 4. see error red prompt showing some javascript error
1. ensure you have only one container in one of your endpoints 2. go to portainer 's home page: you will see the text "1 container
steps to reproduce the behavior: 1. run this curl command into somewhere that has access to portainer.
phofcode i can verify that where i ran this command had access and admin authorization on portainer, i could run a `get` request on `/templates` succesfully.
the json: phofcode 2. this curl command fails with: phofcode
- keep portainer running for a long time - run script from phofurl to see the increasing of number of open files of portainer
1. create a container with logging drivers and opts like phofcode 2. deploy container 3. open container and hit `duplicate/edit` 4. logging option shows `default log drive` instead of `syslog`, and all log-opts are lost as well as screenshot below: screen shot at 3 32 27 pm phofimage * portainer version: * docker version (managed by portainer): not related to this issue * platform (windows/linux): not related to this issue
steps to reproduce the behavior: 1. go to 'containers'.
2. click on a container and duplicate/edit.
3. modify or create a variable in the env tab.
steps to reproduce the behavior: 1. automatically restart the server 2. login into portainer 3. observe that the swarm is down
steps to reproduce the behavior: 1. go to 'networks' 2. click on 'add network' 3. click on the driver drop-down 4. macvlan is missing
steps to reproduce the behavior: 1. install swarm on one or two node 2. install portainer with agent 3. install gluster plugin on all node 4. test the volume with ``docker run -v test:/mnt --rm -ti ubuntu`` 5. write file on /mnt 6. open portainer and list files
1. go to stack page 2. click add stack button 3. specify name for the new stack 4. click the repository button 5. enter repository url 6. leave repository reference empty for master 7. enter stack file name 8. click radio button to enable auth 9. add user name and password 10. click "deploy the stack" button got error message unable to deploy the stack.
simply making a stack restarting the host and losing control over it i guess ahaha
using the following docker-compose.yml file: phofcode `docker-compose up` sets the network fine; using portainer's stack deployment does not.
steps to reproduce the behavior: 1. create a stack with a relative mount in a git repo phofcode 2. start the stack trough portainer 3. see a new folder on the host phofcode ... and see that folder mounted instead of the correct folder
steps to reproduce the behavior: 1. mount a remote docker socket: ` sudo ssh -nnt -l user@remotesystem.tld` 2. bind-mount the socket from the docker host to in portainer 3. go to `endpoints > add endpoint` 4. try to create a new `docker environment` type environment with the url 5. check logs of portainer 6. you can also try and do same over api and have same result
$ openssl s_client -tls1 -connect localhost:8008 --- ssl handshake has read 2125 bytes and written 315 bytes --- new, tlsv1/sslv3, cipher is ecdhe-rsa-aes128-sha expected: $ openssl s_client -tls1 -connect localhost:8008 alert handshake alert number 40 handshake failure:s3_pkt.c:659:
steps to reproduce the behavior: 1. deploy a docker-compose.yaml with volumes
steps to reproduce the behavior: 1. create a dockerfile for printing an environmental variable 2. create a new stack from api using the env parameter 3. look at the logs
steps to reproduce the behavior: 1. push the same stack twice using different names 2. try to remove both
steps to reproduce the behavior: 1. open portainer normally 2. leave the swarm from docker console (docker swarm leave --force) 3. create a new swarm (docker swarm init) 4. restart the machine (i'd changed the ip and some rules that broke docker table) 5. docker portainer print logs that service is listening on port 9000 and is started, but docker ps show no port mappings for container, telnet to port 9000 on container ip doesn't work and docker restart containername also doesn't work.
templates already registered inside database.
instance already has defined endpoints.
skipping endpoint defined via cli.
starting portainer 1.19.1 on :9000 6. if i remove current portainer container with docker rm containername and recreate another one with previous volumes, portainer will login operate normally.
steps to reproduce the behavior: post on with this body: phofcode
1. go to a service 2. click on `update the service` button & select `pull latest image version` 3. see the task being rejected and eventually the tasks will go back to running, without the new image pulled
steps to reproduce the behavior: 1. on a swarm cluster on aws with iam roles ecr read access assigned to the hosts.
2. run portainer with the credential helper see #1533 my image of that is here `docker stack deploy -f portainer` 3. go and deploy a stack with a private ecr image phofcode 4. get the webhook from service page 5. pingback webhook to trigger image pull phofcode
steps to reproduce the behavior: 1. create 2 containers a and b on the bridge network with mapped ports 2. recreate b while removing the exposed ports but setting the network to "container:a" 3. see error
steps to reproduce the behavior: 1. make sure one of your endpoints is in a group 2. log in as a non admin 3. go to home
1. create an app template that contains a select variable with some predefined values.
to quickly see a result, use the value for example in the image reference of the compose file.
2. in "app templates", klick on the template and select a value in drop down.
was considered, you should see an orange popup after a while that says something like "deployment error error response from daemon: no such image: <myimage>: invalid reference format"
steps to reproduce the behavior: 1. deploy a stack with environment variables defined in the portainer ui 2. observe the container has the environment variables set (e.g.
connect to container, run `echo "$preset" # returns value configured in portainer ui`) 3. scale service from 1 -> 0 containers 4. scale service from 0 -> 1 containers 5. observer container does not have environment variables set (e.g.
connect to container, run `echo "$preset" # returns empty string`)
steps to reproduce the behavior: 1. go to 'stacks' 2. click on 'create' 3. select and set 'git repository' 4. deploy
1. get google/cadvisor:latest 2. the entrypoint in the dockerfile is an array `entrypoint ["/usr/bin/cadvisor", "-logtostderr"]` 3. go to portainer and edit the container 4. put in into the entry point field 5. it will be saved as a string rather than an array 6. the container then won 't run because it will try to find an executable named note - i also tried other combinations like and `/usr/bin/cadvisor -logtostderr results are the same.
steps to reproduce the behavior: 1. go to portainer 2. click on sidebar > settings
steps to reproduce the behavior: 1. go to the registry screen 2. enter your docker.com credentials into the box that says "docker hub" 3. update and wait for the green confirmation 4. go to image screen and try to pull a private image
1. create a yml file with the sample code 2. try to deploy it
steps to reproduce the behavior: 1. go to 'networks ' 2. click on 'add network ' 3. give your network a name 4. select 'overlay ' 5. see error - {"message":"cannot create a multi-host network from a worker node.
please create the network from a manager node."}
phofcode in container details of `dummy-container`, is shown.
but `b953a7de` is tagged `dummy/oldimage:latest`.
tag `dummy/image:latest` corresponds to now.
as a side effect, the 'image ' name shown in 'container list ' is neither 'dummy/image ' nor 'dummy/oldimage '.
1. add new external endpoint in endpoints.json 2. restart portainer 3. go to endpoints list 4. try manage access to newly added endpoint.
followed the exact same steps as here: phofurl steps to reproduce the behavior: logs: agent: ` [info] serf: eventmemberjoin: 10.0.0.4 [info] - starting portainer agent version 1.1.2 on (cluster mode: true) http error: missing portainer public key (err=portainer public key unavailable) (code=403) ` portainer (failed): ` get phofurl dial tcp getsockopt: connection refused, ` portainer (success): templates already registered inside the database.
skipping template import., starting 1.19.1 on :9000, http error: no administrator account found inside the database (err=object not found inside database) (code=404), http error: invalid jwt token (err=invalid jwt token) (code=401), http error: invalid jwt token (err=invalid jwt token) (code=401), invalid credentials (err=unauthorized) (code=422), invalid credentials (err=unauthorized) (code=422), no administrator account found inside database (err=object not found database) (code=404),
run this script against a portainer instance with an https proxy in front of it: phofcode
steps to reproduce the behavior: 1.
`docker container run -d --name foo httpd:alpine` 2.
`docker container run -d --name bar --link foo httpd:alpine` 3. look at container list and notice that `foo` is named `bar/foo`.
steps to reproduce the behavior: 1. deploy a service in the swarm mode with some exposed port 2. navigate to `services` section on portainer ui 3. click on the link of the published port 4. see a newly opened blank tab
1. deploy a swarm with docker for aws and specify awslogs driver when running the cloudformation template 2. deploy portainer on the swarm 3. run a docker stack without specifying any logging driver at the services level 4. check the logging driver found for a service of stack in service details page in portainer
steps to reproduce the behavior: 1. go to localhost:9000 2. select "endpoints" 3. populate * name * and * endpoint * with local and localhost:2375 respectively 4. see error
steps to reproduce the behavior: 1. go to the services page.
if necessary, deploy a service.
2. click on a service to see its details.
3. click in the image input field.
4. if necessary, reduce the browser window width so that image name does not fit within width of visible image input field.
5. attempt to move text cursor right, past visible text.
steps to reproduce the behavior: 1. go to service list page (/#/services) 2. if necessary, add a service.
3. click on the name of the service to see details.
steps to reproduce the behavior: 1. use a custom white only logo.
2. inspect the menu and the login page.
1. follow the instructions as per phofurl phofhyperlink 2. run portainer with the --admin-password-file option (although i don't think that matters...)
1. configure portainer to auth against ldap, enable automatic user provisioning.
3. try and log in through the web ui using known good credentials.
4. observe that the ui returns an "invalid credentials" message.
5. observe that the user will have been created in portainer.
5. observe the stack trace in docker logs (pasted below) 6. delete user in portainer 7. create user manually with same name
1. go to web ui or via api and create a type 3 template 2. click on submit or send the request 3. click the refresh button and you won't see the template you've created 4. get templates list via api, you can see the template you've created.
_prerequisite_: run a swarm with latest portainer agent version 1. deploy a portainer instance > `docker volume create portainer_data && docker run -d -p --name portainer --restart always -v -v portainer_data:/data portainer/portainer` 2. connect to a swarm (agent connexion), for me : > you will be able to use the agent endpoint 3. completely remove portainer instance > `docker rm -f portainer && docker volume rm portainer_data` 4. reproduce step 1 and step 2 5. try to connect on swarm endpoint on `/home` > swarm is shown as `down` and you get an error phofimage
steps to reproduce the behavior: 1. go to 'api/auth ' 2. provide a working password with a '$ ' inside it 3. submit the request 4. see error
steps to reproduce the behavior: 1. start portainer with `templates` pointing to this: phofurl 2. check this error: phofcode
steps to reproduce the behavior: 1. go to stacks 2. open the the container list 3. click on an action
create a container with an empty environment variable "", then duplicate/edit it.
steps to reproduce the behavior: 1. create a three node swarm cluster (e.g.
node-1, node-2, node-3) 2. deploy portainer + agent 3. click on the volumes menu item and create two volumes with the same name.
once on node-1 and once on node-2 (you get an error from portainer that the name already exists, however volumes are still created for both nodes.
you might want to track that as an additional issue) 4. click on containers menu item in portainer to deploy a single container 5. in deployment section select node-2 as node.
6. at bottom in advanced settings section: - volumes shows all volumes in cluster without any information about node they belong to - networks show all networks in cluster without any information about node they belong
steps to reproduce the behavior: 1. open a brand new project 2. push an image to your registry (step 1 and 2 done in phofurl 3. start a brand new portainer instance, done in here phofurl , but it expires every 4 hrs.
4. register an docker registry with registry.gitlab.com , and then try to pull the image, , unable to pull it.
5. try registering another registry with , pull image testproject:alpine which allows you successfully pull the image.
however, after you create an container with it, when you try edit/duplicate it, portainer complains `the docker registry for the <image-url> image is not registered inside portainer`, hence you cannot do anything again
steps to reproduce the behavior: 1. make a call to `/api/registries` with valid auth headers.
2. see your own password in plain text
add "registry" and "image" settings to a container template in template.json to specify a remote image to use outside of dockerhub, allow template.json to initially load, and create a container based on it.
(registry may need be created in portainer and involve auth trigger issue, not sure?)
image pull will result in failure.
also try update/change the "registry" parameter via the portainer ui.
changes don 't appear stick.
try to edit "network" parameter for a container template using portainer template ui.
steps to reproduce the behavior: create a stack from this stack file: phofcode check the unnamed volumes: screenshot om 13 20 29 phofimage
steps to reproduce the behavior: 1. go to stacks/add stack/git repository 2. enter repository url, compose path, username ad password.
3. sclick deploy the stack 4. see error
`docker run -p -v portainer/portainer --no-auth` 2. go to `localhost:9000`
create a template with "ports": [ ], in it
1. start portainer docker stack: phofcode file (customised): phofcode 2. portainer web ( phofurl -> containers -see list of containers.
3. simulate crashed docker node where portainer is running: the portainer service is configured with data dir=/tmp/data, thus data is intentionally lost on restart to simulate node failure (data loss).
phofcode 4. portainer web ( phofurl -> containers -container list is empty.
and red notification indicating "failure.
i have selected to use my custom templates and pointed to url (that is verified to work); however, although i have say mixed `container` and `stack` templates, i am only able to see the templates of type `container`; steps reproduce the behavior: 1. start a `portainer` stack via `docker-compose` 2. on the main page, click on `settings` and select use `custom templates` 3. enter a `valid` url that points a valid `templates.json` file 4. select `app templates` on main portainer page; -> only the templates of type `container` are displayed
open "stacks" page and look http trace.
steps to reproduce the behavior: 1. go to stacks/add stack/git repository 2. enter repository url, compose path, username ad password.
3. click deploy the stack 4. see error
steps to reproduce the behavior: 1. add new stack 2. insert snippet below 3. try to deploy stack phofcode
deploy stack like this: phofcode
steps to reproduce the behavior: 1. run a container that produces many stdout into log
- the error is random.
some time it works but sometimes it doesn 't.
no clear way or environment of how to reproduce.
i 'm not sure to have all the element to reproduce here is my docker-compose of stack: phofcode the images are base on a fork of phofurl where i simply add the custom configuration in the docker file.
steps to reproduce the behavior: 1. create a swarm mode setup with 3 nodes 2. deploy some containers around the cluster 3. use the portainer api in docker api proxy mode to execute api calls against a specific container 4. in some cases this will work, in most cases it will fail
i have swarm with 3 nodes: 2 with public ip (master node is here) 1 behind nat with public ip i have set up port forwarding 2377, 7946 and 4789 ports
steps to reproduce the behavior: from a raspberry pi... 1. docker pull 2. docker inspect
steps to reproduce the behavior: image phofimage image phofimage image phofimage
steps to reproduce the behavior: 1. startup a windows container (server 2016) 2. click on 'containers ' to see all running containers in portainer 3. select "console" from quick actions 4. try to open a console session using cmd.exe or powershell (user left blank)
steps to reproduce the behavior: 1. deploy multiple (around 40) stacks from the same template.
upgraded to portainer 1.18 from 1.17.1. latest agent.
steps to reproduce the behavior: 1. select an app template and deploy it.
2. keep deploying the same template with different stack names.
3. eventually you will hit this error and be unable to deploy stacks from templates.
steps to reproduce the behavior: 1. go to swarm in the sidebar.
2. click on 'go to cluster visualizer'.
3. stay on the page.
observe the position of tasks on each node.
let 's assume the following stack file: phofcode 1. have a swarm with at least one worker 2. deploy the example stack 3. compare `docker service ls` to portainer 's "services" list
steps to reproduce the behavior: 1. go to portainer dashboard (running on a linux manager), click on stack menu, add stack button, fill with the stack name and paste the stack deploy yml on the filed and hit "deploy stack".
2. click on new created the command: phofcode 3. scroll down to container status and you will see only rejected status.
click in last one to see logs 4. see error id | -- | -- state | rejected state message | resolving controller failed error message invalid bind mount source, must be an absolute path: image slot 1 created
steps to reproduce the behavior: 1. setup the google container registry as a registered registry in portainer.
2. create a container referencing a gcr image.
3. click 're-create ' in the container page.
steps to reproduce the behavior: 1. deploy my stack via portainer stack deploy 2. go to portainer 's service details view for the app service 3. scroll down to 'mounts ' 4. notice the 'source ' fields reads 'select a volume '.
i 'm migrating from a standalone portainer instance to a swarm stack and i 'd like to keep my database.
i had to use --external-endpoints feature in order to be able define the new agent endpoint.
this is its content (the -h modifier won 't work because the database already contains endpoints): phofcode and it 's correctly picked up by portainer: phofcode this is the stack.yml i 'm using: phofcode
steps to reproduce the behavior: 1. run `docker plugin install rexray/s3fs:latest` 2. open portainer and go to add volume page 3. open driver selectbox 4. see only local driver
use rex ray plugin for volumes with digital ocean integration.
i used a nodejs based request: let request = require( 'request '); let querystring = yaml = require( 'yamljs ') request.put({ url: \' phofurl headers: { 'authorization ': "bearer "+jwt}, body: 10, 2), prune: true})}, (error, response, body) => { if (error) { console.log( 'failed ' + error); } else { console.log( 'upload succeeded!
'); } } ); i then checked the stack in portainer, and checked the services.
1. go into portainer container console and login 2. copy command from notepad 3. paste it inside console 4. see error
steps to reproduce the behavior: 1. go to 'services tab' 2. click on 'click on some service' 3. scroll down to 'restart policy table' 4. see error
* install docker as vm on vsphere installation (using photon os for example) * install vmware docker volume driver phofhyperlink * create a named volume using the vsphere driver * start a container using the created volume
steps to reproduce the behavior: 1. click on a stack 2. change any parameter (or comment out an environment variable) 3. click update the stack 4. error during connect: get phofurl dial tcp: lookup /var/run/docker.sock: no such host (code=500)
see technical details for a docker-compose.yml
steps to reproduce the behavior: 1. rename your primary endpoint to something else 2. deploy a stack 3. see error
steps to reproduce the behavior: 1. deploy a docker swarm with multiple managers 2. create a `docker-compose.yml` file with the following content - phofcode 3. run the command `docker stack deploy -c docker-compose.yml portainer` 4. go to any `<master-node>:9000` and try to login
steps to reproduce the behavior: 1. go to containers 2. click on a container that has port mappings 3. scroll down to container details 4. see error under "port configuration"
i can 't reliably reproduce this on demand, but it has been happening intermittently over the last few days while i have been working with portainer on this swarm.
steps to reproduce the behavior: 1. go to advanced network settings for an existing or new docker container 2. add multiple host file entries 3. deploy the container 4. go in and edit the container 5. only the first host file entered is displayed
1. activate ldap/ad authentication 2. log in as admin 3. click "my account" 4. try to change the password --> "you cannot change your password when using ldap authentication."
1. open portainer in google chrome (make sure left panel is expanded phofhyperlink ) 2. go to "containers" 3. open a running container by clicking its name 4. click
steps to reproduce the behavior: 1. add a field on a type in prisma `datamodel.prisma` 2. set the type as either `boolean @default(value: "false")` or `boolean @default(value: false)`.
3. deploy prisma instance 4. observe
steps to reproduce the behavior: 1. configure prisma with postgres connector 2. attempt to upsert an entry that already exists 3. see error returned to client as well as in docker logs
steps to reproduce the behavior: 1. go to phofurl 2. follow the tutorial through until
steps to reproduce the behavior: 1. use this scheme 2. use `prisma generate` 3. look at the generated typescript / javascript client
i have tried different ways to put the config string with all configuration variables in the docker secret.
here is an example how i did it.
`printf "port: 4466 managementapisecret: <api-secret> databases: pridefault: connector: postgres host: <host-url> port: 5432 user: prisma password: <password> migrations: true " | docker secret create app_prisma_config -` to start the service i did: `docker service create --name app-prisma --replicas 1 -e then the logs say: `exception in thread "main" unable to load prisma config: no valid prisma config could be loaded.`
steps to reproduce the behavior: 1.
"docker-compose up -d" with screen shot at 6 20 24 pm phofimage 2. run docker ps to check the status of the container `container id image command created status ports names "/bin/sh -c /app/sta" 2 seconds ago up less than a second server_prisma_1` 3. able to access localhost:4646 4. run prisma deploy and after quite some time has expired i get a "request to phofurl failed, reason: socket hang up" error
mysql db -> 2 tables -> one table has a column with a foreign key, referring to the other table, and an index.
`prisma deploy` a. succeeds to create stage and deploy service.
b. fails when applying changes.
steps to reproduce the behavior: 1. datamodel: phofcode 2. prisma client method call, simplified it to running single `promise.all` call phofcode 3. see `error a unique constraint would be violat...` being printed out 4 times.
steps to reproduce the behavior: 1. init a new prisma project with the model provided upper 2. deploy it on aws with the provided fargate tutorial 3. use an amazon load balancer with prisma 4. try to create/update a site with multiple signinputs at once (like the mutation upper)
steps to reproduce the behavior: 1. create a prisma 1.34 and postgres 9.4 docker setup.
2. create a type with a relation in your datamodel.prisma file.
3. run prisma deploy to create the tables.
4. attempt to actually create a node that uses this relation.
(i confirmed this doesn 't work using the http console of prisma as well, excluding prisma-client.)
steps to reproduce the behavior: 1. use this scheme 2. use `prisma generate` 3. look at the generated typescript / javascript client
steps to reproduce the behavior: 1. deploy prisma `1.34.7` (sample compose file): phofcode 2. deploy a service with a `secret`, sample `prisma.yml`: phofcode 3. run `prisma token` 4. explore the prisma admin interface with this token or perform queries in the playground, which will return `your token is invalid.
it might have expired or you might be using a token from a different project.` reverting back to < `1.34.7` (e.g.
steps to reproduce the behavior: 1. setup local prisma server with management api secret enabled 2. run `prisma deploy` 3. run `prisma seed` 4. see error
steps to reproduce the behavior: 1. create a database type with a `@unique` constraint 2. create an object with that field explicitly set to `null` 3. create another object with the same field explicitly set to `null` 4. see error `error` phofcode `datamodel.prisma` phofcode `docker-compose.yml` phofcode
steps to reproduce the behavior: (0. install prisma and prisma cli) 1. create a little test schema and setup working database 2. run prisma deploy (if not automatically generated run prisma genereate) 3. create a test index file and include the generated primsa client 4. create a function that hardcoded calls the create-function: phofcode output: start fertig output, when .then gets the additional reject function: start type: some error description err: some error description fertig
1. follow all the steps from official guide phofhyperlink strictly 2. get no service with name 'default ' and stage 'default ' found` error when run `prisma deploy` 3. get this error when performing a simple query from ` phofurl - query: phofcode - response: phofcode
1. define type with name model phofcode 2. generate types phofcode
0. define a type without an id 1. notice that the generated typescript type has `export type mytypeorderbyinput =`, notably with no text afterwards.
2. in the example below, clozepiece and contentpiece are missing ids, while flashcard has an id type.
one can see the difference between the generated code that results in a syntax error.
i have this in my datamodel generated with prisma 1.34.5 phofcode ` and in my table i have this check constraint to avoid an insert with both relations empty, you have to insert one or other.
phofcode ` and i try to run the create mutation.. phofcode ` variables phofcode ` but i get this error but i 'm sending the contract id fk (valid) in the variables.
if i remove the check constraint, from database, it works.
response: can 't we have any constraint?
steps to reproduce the behavior: 1. datamodel.prisma file: phofcode 2. graphql server index js: phofcode 3. in graphql server, resolvers: phofcode 4. now after creating a few record in graphql playground(in graphql server, not prisma server) on port 4000 : phofcode 5.
steps to reproduce the behavior: 1. clone `git clone 2.
`cd && npm i` 3.
i haven't isolated repro steps yet, but i think this may be caused by the metrics endpoint responding with a 502 error
datamodel: phofcode query for unused images (images witch hasn 't relation to message table) always return empty result set: phofcode
steps to reproduce the behavior: 1. setup both types as indicated above 2. build a resolver that tries to make use of either: `updatemany`, `update`, or `upsert/update` in order to update several elements from a list (above: a list of two assets).
steps to reproduce the behavior: 1. install angular/cli 2. generate a shell app 3. create a server folder 4. in this folder follow these steps but with mongodb phofurl
steps to reproduce the behavior: 1. npx prisma login 2. npx prisma init 3. npm i -g prisma 4. npx prisma deploy 5. deploy
this bug has three scenarios described on > phofurl code that reproduce this bug is available there > phofurl
1. have any schema 2. update schema using generated prisma-client 3. await `.count()` on update function to retrieve number of updated rows 4.
`.count()` returns a number but type definitions say its a string
steps to reproduce the behavior: 1. go to phofurl 2. click on f12 3. scroll down to '....' 4. see error
steps to reproduce the behavior: use the following `docker-compose.yaml` phofcode
create: phofcode and `prisma deploy`.
steps to reproduce the behavior: reduce the `queuesize` available in 1.32.1 phofhyperlink and 1.30.3 phofhyperlink .
the reproduction is in `1.29.2`, so, a high concurrency can be used to reproduce this issue there.
const query = `select u.name, count(t.id) as total, sum(t.end - t.start) as avg_time from database$dev.
"user" u left outer join ut on ut.
"b" = u.id left outer join database$dev.
"a" = t.id ) where u.role = 'technician ' and t.date between and group by u.name;` const queryresult await query }); i can give access to prisma server if is needed
steps to reproduce the behavior: 1.my client full query is > query usersconnection($where: userwhereinput) { usersconnection(where: $where) { edges { cursor } } } 2.print the client real query string: > query usersconnection($where: userwhereinput) { usersconnection(where: $where) edges pageinfo } then the server response: error: field 'edges' of type 'useredge' must have a sub selection
steps to reproduce the behavior: 1. deploy the following datamodel with prisma deploy phofcode 3. deploy the same datamodel again with `--no-migrate` flag 4. see error
steps to reproduce the behavior: 1.set up a prisma project with a self hosted database on heroku using heroku postgres hobby plan 2.lift your docker image locally and try to deploy locally by doing `prisma deploy` 3.make any request using `prisma-binding` or using `playground` 4. see error phofcode 5. latest error in docker logs phofcode
unfortunately, it is a private repo and hence i cannot share the complete code for reproduction.
this happens when i do a nested update mutation.
steps to reproduce the behavior: 1. set `endpoint`.
2. test the `mutation` query like above.
steps to reproduce the behavior: 1. create datamodel `type user {` ` id: id!
@id` ` last_name: string` ` createdat: datetime!
@updatedat` `}` 2. create seeder.
`prisma deploy` it 4. get seeded model with unique field 5. inspect value: it will contains nil fields
steps to reproduce the behavior: 1.
`prisma init`, "create new database", "mysql", "don \'t generate" 2.
`docker-compose up -d` 5. replace content of `datamodel.prisma` with: phofcode 6.
`prisma deploy` (works) to simulate an existing database with correct schema 7.
`prisma deploy --no-migrate` (does not work)
steps to reproduce the behavior: 1. using the following `prisma.yml` file: phofcode 2. execute `prisma generate` in my terminal will eventually throw the following error: phofcode
steps to reproduce the behavior: use this datamodel and deploy using prisma deploy : phofcode
- set up prisma in docker + target existing mongo database, as described in the doc - install prisma cli on your pc (`npm install -g prisma`) - then create edit `prisma.yml` + `datamodel.prisma` - (in my case) set no_proxy and http(s)_proxy rules cd into dir containg `prisma.yml` run `prisma deploy`
steps to reproduce the behavior: 1. enable yarn pnp on the project by adding this to package.json: phofcode 2. instal prisma & prisma cli 3. add valid prisma.yml config file 4. run `export debug="*" && yarn prisma`
go to phofurl and create a new server
steps to reproduce the behavior: 1. install prisma globally by `$ sudo npm install -g prisma` 2. run `prisma deploy` from the project root directory 3. see error
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: - init a new prisma repository - have a large `datamodel.prisma` (for us it's approx.
1600 lines coming to 46kb) - run `prisma deploy`
make a following datamodel phofcode then add some data.
phofcode <img src=" phofurl alt="scr" border="0" width="500"> basically
steps to reproduce the behavior: 1. create a type without `createdat` and `updatedat` in the datamodel 2. run `prisma deploy` 3. go to your api playground (not the prisma one) 4. make a request on that type, with `orderby: createdat_asc`
steps to reproduce the behavior: 1. go to 'app.prisma.io' 2. click on 'upgrade cluster' 3. receive success message 4. cluster is never upgraded.
create a table with: phofcode then run prisma introspect, which creates phofcode then run prisma deploy: phofcode interestingly, that error even happens if the table is not added to the gql spec via introspection.
1. deploy this `datamodel.prisma`: phofcode 2. create instance of a: phofcode result: phofcode 3. create instance of b, connecting instance of a: phofcode result:
deploy prisma using the standard configuration and then view the log, shown below.
steps to reproduce the behavior: 1. create a remote prisma service (we 're using docker in aws, tied to an rds postgres instance) 2. deploy prisma service 3. run `prisma delete -f` phofcode 4. see that postgres schema and tables still exist
steps to reproduce the behavior: 1. here 's the complete repository phofhyperlink to clone 2. create a `.env` file that contains phofcode 3. run `now --dotenv .env` 4. visit the deployment and see the error or check `now logs`
steps to reproduce the behavior: 1. phofurl 2. generated client in this repo via 1.26.6 and latest doesn't compile at `subscriptionpromise`, type(s) missing.
steps to reproduce the behavior: install version 1.33 of prisma run prisma init and follow the cli guide.
steps to reproduce the behavior: 1. add a field to an existing object, such as: `number: int!
@id(strategy: sequence) @sequence(name: "desk_sequence", initialvalue: 1, allocationsize: 1)` * note: there is an existing `id: id!
@id` already on the type leveraging prisma 's cuid.
should give a success message.
3. attempt creating a new object of said type.
steps to reproduce the behavior: 1. use windows 10 x64 and install node.js 12.2.0 or 10.15.3 2. use the command line to install the npm package prisma v1.33.0 3. import the attached mysql schema in a mysql 5.7 server 4. run prisma init in command line - select use existing database - select mysql - select yes for "does your database contain existing data?"
- enter your mysql credentials ex: localhost, port 3306, user, password select mysql database/schema that you 've imported for introspection wait a bit and it will give you "typeerror: cannot read property 'type ' of undefined"
steps to reproduce the behavior: 1. create a top level folder: phofcode 2. create a sub-folder with the previously created folder as the parent phofcode 3. run the following query using id of parent of subfolder phofcode 4. prisma returns an empty array instead of folder: phofcode
introspect any postgres instance that has many to many relationships.
steps to reproduce the behavior: 1. deploy a field such as: `number: int!
@id(strategy: sequence)` excluding the decorator 2. deploys w/o error.
steps to reproduce the behavior: 1. init prisma and see a error info `exception in thread "main" unable to load prisma config: only postgres connectors specify a schema.
if they do they also need to specify a database.
other connectors only specify a database.` 2. i tried specifying database instead of schema and see the other error info: `exception in thread "main" access denied for user 'nuggets '@ '% ' to database 'prisma '`
steps to reproduce the behavior: 1. create a prisma server with the above schema 2. seed with test data 3. execute the query written above.
steps to reproduce the behavior: 1. go through process for setting up prisma w/ existing db phofurl 2. try and add data via playground
steps to reproduce the behavior: 1. have a large database on aurora mysql (but i suspect this is not specific to this).
since the database is large and needs thousands of queries to export, chances are that one of these queries will time out, breaking the entire export.
1. create a model with 2 unique fields (i.e.
email and username) 2. insert a node where `email = test@test.com` and `username = user1` 3. query the single node with parameters `email = test@test.com` and `username = user2` 4. the query returns `user1`
model phofcode query phofcode result phofcode
steps to reproduce the behavior: 1. run the migration in the main project 2. prisma introspect in main project 3. prisma introspect in some other project which has no previous knowledge of the model/database 4. see error
steps to reproduce the behavior: 1. start up prisma and db using docker-compose as described in getting started.
2. use default prima.yml: phofcode 2. run `prisma generate --endpoint phofurl
steps to reproduce the behavior: 1. move your `prisma.yml` and `datamodel.prisma` into a subdirectory `subdir`.
`prisma deploy -p subdir/prisma.yml` 3. see error after successful deploy, and client is not generated.
steps to reproduce the behavior: 1. create resolver to update model with a datetime field 2. persist with prisma client 3. observe returned model in mutation resolver: phofcode log: phofcode
actually, i really don 't know because i 've never had this problem before and it has been weeks since i 've run `prisma deploy`.
i get back on it today and impossible to make it work.
i tried to upgrade prisma cli, downgrade it, upgrade my node modules, downgrade them, upgrade prisma, downgrade it... :cry: still that same issue of authentication.
try to deploy the prisma.yml in the following repository: phofurl
standup prisma with a new mysql database (see getting started) phofurl create a simple type with uuid tagged as @id phofcode try to deploy using prisma deploy user xc the field uuid is marked as id must have one of the following types: id!, int!.
1. load up the previous schema into a postgres database 2. run `prisma introspect`
steps to reproduce the behavior: 1. write `docker-compose.yml` and start prisma with `docker-compose up` (without `-d`) 2. you will see the output from docker-compose.
3. open a new terminal (don 't close old one that is opened at step 1 and 2), and run `docker-compose stop`.
4. see the prisma shuts down with code 137 on the terminal used at step 1 and 2 like this: phofcode
steps to reproduce the behavior: 1. generate a go client using the following schema phofcode 2. try to get all the examples back with ios as a platform.
> it should probably be something like this: > phofcode
steps to reproduce the behavior: 1. make a database with 2 tables, one has a key to the other.
`prisma init` generates: phofcode 3.
`prisma deploy` generates: > > errors: > > global could not find the foreign key column idadmapp in the model table adm_relationship ...
i 'm using this repository to reproduce the error: phofurl phofhyperlink 1. update `category` type: phofcode 2. run `prisma deploy` 3. access `localhost:4466` to see the docs 4.
`categorywhereinput` don 't have any fields related to `tags`.
steps to reproduce the behavior: 1. datamodel.graphql phofcode 2. this is the full users list all-users phofimage 3. but when i use where argument to query, i got empty array where phofimage
i don't have the old schema anymore, as i said, so i don't really know how to reproduce this or give you the current data in my database.
steps to reproduce the behavior: 1. go to ` phofurl 2. choose any query (or even create one) 3. click on any node 4. in detail area click on delete icon 5. whole page will become empty 6. in console you 'll see error that i 've mentioned above
1. create a user with posts using `prisma.createuser` 1. validated that the mongodb contains the correct data 1.
`prisma.users()` does not return the embedded data please see phofurl for a running example.
steps to reproduce the behavior: 1. create a psql table with a bigint phofcode 2. phofcode for the database including that table 3. phofcode 4. see error > applying changes 7.2s > the migration failed and has not been performed.
this is very likely not a transient issue.
> error: integer out of range > at at at at
try to import your datamodel into your graphql-yoga `schema.graphql`
steps to reproduce the behavior: 1. create a psql table with a date datatype (not datetime!
): phofcode 2. create a new prisma introspection with phofcode 3. phofcode and the server error will appear phofcode
steps to reproduce the behavior: 1. create a file datamodel.prima as following: phofcode 2. run: `prisma generate` 3. the output "prisma-schema.ts" as following ... phofcode ... phofcode ... phofcode ...
steps to reproduce the behavior: try to deploy the following datamodels: phofcode phofcode
i have pushed a reproduction on github here: phofurl steps to reproduce the behavior: 1. clone 2. prisma generate 3. see error
1. create the two models above.
2. create a label phofcode 3. create a blog with the label phofcode 4. create a blog without the label phofcode 5. query for the blogs and aggregated count phofcode the output will be
1. deploy this `datamodel.prisma`: phofcode 2. create parent with related nodes: phofcode result: phofcode
datamodel.prisma phofcode `npx prisma deploy` now go the playground and create a user: phofcode try to create the same user a few times.
you will get errors because username is already taken.
create another user called "test 2".
this user will not have id 2, because the users we tried to create earlier raised the id, even when they did not got created, because username was already taken.
steps to reproduce the behavior: 1. generate a self-signed cert/key and start up a mongo instance (`docker run -p --name mongo --rm -v $pwd:/etc/ssl mongo:4 --sslmode requiressl --sslpemkeyfile /etc/ssl/mongodb.pem -v`) 2. verify connections work to the database with the needed flags set (simplest case: `mongo localhost:27018 --ssl 3. attempt to connect to this database using as the connect string with prisma
steps to reproduce the behavior: 1. perform a `count` query on a child resource (funnel in my case) filtered by a parent resource id (shop in my case)
1. define relation with `@relationship(ondelete: casacade)` 2. run `prisma deploy`
here is my data model: phofcode when i using updatepost method, i can change the title and content, but the connect isn't working phofcode
1. deploy a datamodel with one type to prisma backed by mysql on azure 2. make a field required or non-required or add a field to the one type in datamodel 3. the deployment will fail with column `"<field>"` already exists alternatively, here is a reproduction with workaround: phofurl
steps to reproduce the behavior: 1. create a data model without createdat and/or modifiedat.
2. run `prisma deploy` 3. check the database.
4. both fields exist, the logs show they were added by prisma during deploy.
run `prisma generate` command or through post-deploy hook
start prisma wired to a mariadb database.
1. try `prisma init` on existing mongodb with any database and observe the generated docker file.
2. try to use `docker-compose -up -d` and the server will go into a restart loop with: `"exception in thread "main" unable to load pri sma config: expected host to be n on-empty"`
steps to reproduce the behavior: 1. run `prisma init` and choose existing mongo options, you will always get the default datamodel.
1. get a simple prisma project up and running 2. in the prisma.yml define `secret: ${env: prisma_secret}` 3. create a .env file in your project with the value `prisma_secret=12345` 4. go into any other folder which is not the one with the `prisma.yml` in 5. use `prisma deploy -p [relative path to prisma.yml] -e [relative path to .env file]` 6. a `"a valid environment variable to satisfy declaration [...]"` warning should appear
steps to reproduce the behavior: 1. try to deploy the following datamodel on mysql: phofcode 2. try `deploy`, it rolls back
steps to reproduce the behavior: 1. you need a self hosted prisma server with `managementapisecret` enabled 2. use `prisma login` 3. set the needed environment variable `export 4. validate your prisma configuration is pointing to the self hosted server `prisma info`.
my example: phofcode 5. try to run `prisma deploy`.. an error is returned: phofcode the server log shows: phofcode 6. use `prisma logout` 7. repeat deploy`.
this time the command is successful.
steps to reproduce the behavior: 1. change my environment file to point to the remote environment 2. run the export command (`prisma export -p mydata.zip`) 3. wait for `downloading nodes` to appear and stop working with a red `!` in front.
steps to reproduce the behavior: 1.
`prisma init test` 2. select use existing database with mongodb, enter connection uri 3.
steps to reproduce the behavior: on the above model execute the following mutation: phofcode
in the attached image i have a set of available operations for an image field.
use in query with empty array
steps to reproduce the behavior: 1. given the datamodel: phofcode 2. fetch a user that does not exist: phofcode 3. observe the type of user.
steps to reproduce the behavior: 1. create a blank mongodb database 2. run prisma init 3. choose use existing database > mongodb 4. fill in the connection string 5. see the error
steps to reproduce the behavior: 1. run `prisma introspect` 2. select `mysql` in the kind of database to introspect 3. fill the information to connect to the database(host, username, password, port and database be introspected) 4. it will generate `datamodel.prisma` that has problems described above.
steps to reproduce the behavior: 1. setup an existing postgres with database name: `shop`, scheme name: `public`` 2. run `prisma init` and fill out the details (screenshot) 3. notice that it asks for `schema` name as the last question but it is not printed in the generated `docker-compose.yml` file
steps to reproduce the behavior: 1. create a data model like so: phofcode 2. then run `prisma generate` 3. create some resolver where you will utilize a `createuser` method 3. start the project 4. server will give an error on `registeredat` field
steps to reproduce the behavior: 1. previously running on version 1.11.1 of prisma server.
2. upgraded to 1.29.1 3. see error
in the following example, i 'm trying to create a delete query which will remove any alterations that were in the old alterations list but not in the new alterations list.
phofcode this will generate a deletemany query that looks something like this: phofcode
steps to reproduce the behavior: 1. create a scalar type json 2. fill it with some object 3. query that document.
try to generate a client or deploying and querying the data from the following datamodel: phofcode
steps to reproduce the behavior: - run `prisma deploy` - see error: phofcode
steps to reproduce the behavior: 1. make the following prisma.yml file phofcode 2. run `prisma deploy 3. see error
steps to reproduce the behavior: 1.
`prisma init hello-world` 2. here's what i input: phofcode
use the following datamodel and deploy a prisma instance using it: phofcode run the following and observe the output: phofcode
1) create a database with the following schema: phofcode 2) running `prisma init` generates the following schema: phofcode 3) change `id: int` to `id: id` for both types.
4) create docker container with `docker-compose up -d` 5) running `prisma deploy` generates the following error: phofcode 6) this made sense to me, since that table doesn 't exist in my existing database, so i instead tried using the `pgrelation` directive as detailed here phofhyperlink : phofcode however i then see following error:
sorry, it 's only on k8s structure for now.
now i 'm trying to repro on docker-compose, but i still have not been able to it.
given this simple database schema: phofcode introspection produces this datamodel: phofcode with `post` field duplicated in type `user` prisma deploy results in these errors: phofcode nb: missing `@relation directive` too
attempt to deploy `prisma deploy` and i get the following error message: phofcode docker config is: image: environment: - name: prisma_config value: | port: 4466 databases: default: connector: postgres host: otto.db.elephantsql.com port: 5432 user: orqidund database: orqidund password:
follow the get started phofhyperlink tutorial 1. set up prisma 2. change datamodel * step 4 - regenerate your prisma client phofhyperlink after adding `prisma generate` as a post-deploy hook here is what my `prisma.yml` looks like... screen shot at 1 28 20 am phofimage below is the output upon executing `prisma deploy`... screen shot at 1 25 06 am phofimage
"course" 2. create enumeration "categories" and assign 1 value 3. create "categories" enum field and allow it having multiple values and is required 4. create an entry that uses the 1 enum value 5. rename enum field to "category" 6. change enum field from list to non-list 7. querying for the following throws the above mentioned error in prisma: phofcode
my datamodel looks like this: phofcode i have a `createpost` resolver to create a new `post` that looks like this: phofcode which just checks someone is currently logged in and creates a `post` with the logged in user being the `author` i can see in mongo compass that everything is being created as expected.
post collection: <img width="644" alt="screenshot at 10 03 42" src=" phofurl user collection: <img width="563" alt="screenshot at 10 03 51" src=" phofurl however i get the error `cannot return null for non-nullable field user.posts.` when using this query: phofcode
steps to reproduce the behavior: 1. npm install -g prisma 2. prisma init - important that no project name is specified.
use the cli wizard to generate the files.
- select demo server - choose a region (this could be the first place for an error?
us1 appears to be endpoint, but description includes us2.
in file blows up, parseendpoint.ts it looks for a public end point with either eu1 or us2 in it.
the generated end point from here is us1.
not sure what is intended) - don 't create client 3. prisma deploy 4. error is thrown.
my datamodel is here: datamodel.prisma.txt phofhyperlink my summarized database model here: ddbb_script.txt phofhyperlink i have customertype entities from 1 to 4, (4 inserts included in the above script).
when i try to send a mutation to create a new customer, it fails.
`mutation` phofcode ` `variables` phofcode ` i recieve this error from docker.. it 's trying to insert null in type field.. phofcode `
steps to reproduce the behavior: 1. add citext column to your table and add this to your prisma model 2. run prisma deploy 3. error occurs
follow this guide phofhyperlink exactly on a windows 10 machine.
steps to reproduce the behavior: 1. upgrade existing heroku dyno to `1.27-heroku` 2. run `prisma deploy` 3. see error 4. downgrade to `1.26-heroku` 5. run `prisma deploy` 6. see successful deploy message
used prisma 's heroku deployment.
upgraded the container from 1.26.4 to 1.27.0 and 1.27.1. ran any query and get the above error.
rolling back to 1.26.4 fixes all errors.
steps to reproduce the behavior: 1. clone prisma example with docker & postgres: phofurl 2. follow the steps in the readme to get server and database up and running 3. run `npm run start` once to populate the db with some posts 4. copy first id return from allposts query 5. modify allposts query in `src/script.js` to use `prisma.postsconnection` instead of `prisma.posts`, and add `after` argument with just copied id.
example: phofcode 6. run `npm run start` again, this time throwing internal server error.
steps to reproduce the behavior: 1. execute `prisma deploy`
steps to reproduce the behavior: 1. run prisma init abc 2. cancel it in between
steps to reproduce the behavior: 1. create any type implements two interfaces 2. ensure that interfaces separated by comma `,` 3. run `prisma deploy` => will success 4. run `prisma generate` => will fail 5. ensure that interfaces separated by ampersand `&` 6. run `prisma deploy` => will fail 7. run `prisma generate` => will success
example `datamodel.prisma`: phofcode example `prisma.yml`: phofcode steps to reproduce the behavior: 1. create a new golang project 2. run `prisma deploy` 3. run `prisma generate` 4. try to run the following with prisma generated packages imported: phofcode
steps to reproduce the behavior: 1. setup existing database with postgres to step 4 phofurl 2. run `docker-compose up -d` 3. check container logs 4. see errors
steps to reproduce the behavior: 1. unzip the schema and deploy a new service on your prisma instance, e.g.
`core_revision=1 npx prisma deploy` 2. import the export via `core_revision=1 npx prisma import --data export.zip` 3. visit your prisma instance and query `{ products { pid, variations { id, vid, images } } }` 4. inspect the result, first 30 or so products should contain variations with images but all remaining variations and their `images` property hold an empty list.
6. unzip `export.zip` on your local machine 5. inspect ids of variations
steps to reproduce the behavior: @pantharshit00 created this repo for another issue.
it 's the same structure.
phofurl 1. go to this repo and clone it, then compose and deploy it, and then in some postgresql ide execute these 3 inserts.
phofcode ` 2. send a request in playground phofcode ` there is any item in the contract.
image phofimage but if you go to the ddbb ide you can see expected result with an inner join.
connect to existing mongodb database with prisma server.
set up the new service and deploy it on prisma server.
1. use mongodb 2. datamodel: phofcode 3. e.g resolver: phofcode 4. create user and time 5. e.g.
perform a mutation `xxx` - is user id `yyy` - is time id phofcode
steps to reproduce the behavior: 1. create a schema with implicit relations between multiple types that start with lowercase letters.
steps to reproduce the behavior: 1. start prisma with the following datamodel: phofcode 2. start with the following schema: phofcode however : phofcode
steps to reproduce the behavior: 1. export 2. import -d .zip
steps to reproduce the behavior: 1. install prisma 1.25.4 2. install mysql 8.0.13 3. see error in prisma 's console
steps to reproduce the behavior: clone phofurl `yarn install` `node index.js`
steps to reproduce the behavior: 1. create datamodel 2. run prisma generate 3. create resolver with ctx.area({ id }).accesses() 4. throws error 5. create resolver with ctx.area({ id }).accesses 6. all fine
steps to reproduce the behavior: 1. create local prisma instance with mongo connector 3. set endpoint in prisma.yml to " phofurl 2. run "prisma deploy" 3. set endpoint in prisma.yml to " phofurl 3. run "prisma deploy" 4. open terminal and run "mongo" 5. run "show dbs" 6. see only one created database called "project"
1. create postgres tables: account/user: phofcode company: phofcode store: phofcode 2. run `prisma introspect` to create your datamodel, deploy and generate your datamodel 3. create a user, and use the mutation above to attempt to create a company and associate it with the user
steps to reproduce the behavior: 1. create a one to many relationship that is not required on the one side 2. create a relationship with both and one that doesn't have a many relationship
steps to reproduce the behavior: 1. in the prisma datamodel, create a type that has a relation to another field 2. generate the go client and graphql schema in the generator section of prisma.yml
steps to reproduce the behavior: 1. setup an ubuntu vm 16.04 2. setup nginx as a reverse proxy to redirect traffic to prisma server (see config file) 3. setup prisma server following the tuto 1.25 for mongodb with docker 4. on your local machine, create datamodel.prisma and prisma.yml 5. run `prisma deploy`
my summarized `datamodel.prisma` phofcode ` when i execute `prisma deploy` i get the next error.. phofcode `
use method chaining inside a custom resolver.
get an obscure error (see screenshots)
steps to reproduce the behavior: just run the command `prisma generate`
steps to reproduce the behavior: 1. the following schema does not work: phofcode while the following schema works: phofcode 2. in prisma graphql, run the following mutation phofcode 3. query the following data to confirm error with 1st schema, while second one works properly: phofcode 4. see error
1. login on cli via `prisma login` 2. deploy via `prisma deploy -e .env.staging` 3. prints this error message phofcode
1. create a new "azure cosmos db for mongodb api" 2. run prisma init hello-world 3. choose existing db -> no data 4. add connection string provided by azure
steps to reproduce the behavior: 1. prisma init prisma 2. enter mongodb connection string with admin credentials 3. select existing database and enter name 4. cd prisma & docker-compose up -d 5. prisma deploy
steps to reproduce the behavior: 1. run `prisma init <project-name>` to initialise the project 2. input information of a localhost database from the prompt 3. run phofcode 4. try to deploy by running `prisma deploy` 5. see the error
steps to reproduce the behavior: 1. add json file to folder structure of data/nodes/file.json 2. run prisma import -d data 3. import runs but skips file and says complete
just try to generate a client from above datamodel
1. create a new prisma service with a local mongodb using the `prisma init` wizard 1. start the prisma server with the mongodb by running `docker-compose up -d` 1. deploy the prisma api with default `user` type by running `prisma deploy` 1. create a new `user` with `createuser` mutation in playground rename `user` to `person` in your datamodel run `prisma deploy` the cli outputs: phofcode when using prisma mongodb, will never delete anything during a migration.
so that error message is not accurate.
steps to reproduce the behavior: 1. create a datamodel with a one-to-many relation field, mark the field as required 2. deploy to prisma cloud 3. open prisma playground 4. open type definition for type that contains the one-to-many relation field
i 'm using a postgres db on heroku looking like this: phofcode phofcode now i 'm running `prisma init`: image phofimage the generated datamodel looks like this: phofcode the generated docker compose file looks like this: phofcode
i'm going to do _get started_ step-by-step.
i'll use javascript+mysql from the documentation.
i'm following the documentation to the forth step.
i'd expect a graphql editor to show on container's ip and port, but it's loading and loading and loading infinitely.
steps to reproduce the behavior: 1. in the command line, run `yarn prisma deploy` 2. select `demo server` 3. click `grant permission` button 4. see error `network error: unexpected token < in json at position 0` in upper right corner
i unfortunately don 't have time to create a small reproduction right now, but this is what i am doing in my app: phofcode
steps to reproduce the behavior: 1. use `prisma init` with use existing database option 2. setup postgres 3. check docker logs they will show fatal: permission denied for database "postgres" detail: user does not have connect privilege.` or 1. deploy to prisma cloud 2. the server will report as not reachable
using prisma js client: `index.js` phofcode
steps to reproduce the behavior: given a list of users with uuids.
steps to reproduce the behavior: 1. set the prisma endpoint to "prisma.shfoo.com" 2. run `prisma deploy` 3. prisma will crash with the error `cannot read property 'split ' of undefined`
steps to reproduce the behavior: 1. follow all the steps in the documentation.
2. here: phofurl $ go run ./server # hello-world/server server/resolver.go:68:4: unknown field 'author ' in struct literal of type
steps to reproduce the behavior and screenshot: image phofimage
steps to reproduce the behavior: 1.
`prisma introspect` an existing database.
this correctly identifies columns with special characters and inserts it into the datamodel.
`prisma deploy` fails with `error: syntax error while parsing graphql query.
invalid input` when special characters are present in the datamodel.
check out this repo phofhyperlink and run phofcode after some biolerplate, you 'll see a complaint `a unique constraint would be violated on user.
details: field name = email, location: [object object], path: user1`.
the full error message (showing the failure in both postgres and prisma levels) are shown here: phofcode
steps to reproduce the behavior: 1. go to `line 58` in following code, and find this comment `# to get error, uncomment these four lines (`matchcondition` field)` 2. uncomment the field definition `matchcondition: 3.
looks like an internal server error.
search your server logs for request id: phofcode
1. edit mongo.conf, add `verbosity: 1`: phofcode 2. query from any mongo collections via prisma playground, only asking for `id` field to be returned: phofcode 3. although prisma returns only `id` field, when we check mongo logs, we found in fact prisma queries
1. compose docker along with postgres db setting and run docker container 2. prisma introspect in cli 3. prisma deploy 4. shows error `error: the provided name: is not a valid name for a relation.
it can only have up to 54 characters and must have the shape [a-z][a-za-z0-9]*`
consider the follow model: phofcode observe `concludedat` is a nullable field.
i can set `concludedat` normally using the go client.
phofcode but i can 't set to null, after execute this code nothing happens phofcode
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: npm update -g prisma prisma init server ?
set up a new prisma server or deploy to an existing server?
what kind of database do you want to deploy to?
select the programming language for the generated prisma client prisma typescript client cd server docker-compose up
`docker-compose.yml` (copied from 1.22 docs, unchanged): phofcode 2.
`datamodel.graphql`: (a simplified version from the 1.22 docs) phofcode 3. check prisma 's playground via port 4466: image phofimage in the `where` condition of the `users` query, only `id` and `name` related conditions are allowed.
- create table in postgres with column type json - define the datamodel in prisma with type json type table@pgtable(name: "table") { id: int!
@unique description: string category: json } run a mutation to create a record, postgres throws an error: "category is of type json but expression is of character varying"
steps to reproduce the behavior: 1. use types schema.graphql phofcode datamodel.graphql phofcode the associated resolver for author of post.
`prisma deploy` + `prisma generate` + `graphqlgen` 3.
`signupuser` a user, `createdraft` then `publish` it.
4. query the posts phofcode
1. clone this repo phofhyperlink 2. create a prisma server and service 3. deploy to heroku.
4. visit the heroku endpoint to see if the error is present.
if i name a type `abctype`, it will produce the following code: phofcode however, `abctypeexec` is _actually_ defined as phofcode produces error > undefined: abctypeexec
steps to reproduce the behavior: 1. go to set up on a new database tutorial phofhyperlink .
2. follow the tutorial and start your prisma server.
3. run `prisma deploy` with version 1.21.0 of the cli.
4. upgrade the cli to 1.22.0.
5. run `prisma deploy` and it will fail with below console output.
for this datamodel: phofcode this doesnt work (with = ['glutenfree']`): phofcode ...but it works if you change = ['glutenfree']` from an array into an object `dietaryrestrictions: { set: ['glutenfree'] }`: phofcode
you can take any example from the `prisma-examples` repo or just create a new minimal version: 1.
`prisma init` -> select demo server and ts client 1. add deps: phofcode 1. add tsconfig: phofcode run `yarn tsc`
this happens for both flow examples in the `prisma-examples` repo: - script phofhyperlink - graphql phofhyperlink you can follow the instructions in the readme of each example to set it up.
then run `npm run flow` to invoke the type-checking.
this error that's produced both times: phofcode
steps to reproduce the behavior: 1. be logged in to prisma cli 2. have a deployed server protected by a `managementapisecret` 3. try to perform `prisma deploy` 4. see error: phofcode
steps to reproduce the behavior: 1. go to phofurl and clone this app 2. install and start the project using npm start 3. go to chrome =>localhost:3000 => f12 => network =>ws => frames 4. see error in payload as `cannot query field 'edges ' on type 'address '.
(line 7, column 9): edges { "`
should be reproducible by just adding a relation to a model in `datamodel.prisma` and generate a new prisma-client.
deploy a schema with required int field, then change it to float
steps to reproduce the behavior: 1. create a resolver calling a connection query 4. see error
steps to reproduce the behavior: 1. create three different relations and deploy the changes.
mine are: phofcode 2. run a mutation using the playground.
mine is: phofcode 3. notice everything is fine.
now try to do the same using prisma client.
in my case, i 'm using typescript client.
that 's how it would look like: phofcode 4. the `recipe` variable contains a object with only `id`, `name` and `createdat`.
both ingredients and author are not being returned,
deploy this datamodel: phofcode create data such that: - there is one `loan` (let 's call it `a`) with two `loanitems` for the `items` relation - one `loanitem` (`x`) has a relation for the `category` field - the other `loanitem` (`y`) has no relation for the `category` field, i.e.
it 's `null` then run the following mutation: phofcode this should work but fails with error: `the change you are trying to make would violate required relation 'loanitems ' between loan and loanitem"` presumably prisma tries to delete `a` first (i.e.
before deleting `x` and `y`) but then fails because `x` and `y` have required relations to `a`.
steps to reproduce see this repo: repo phofhyperlink
steps to reproduce the behavior: 1. add generator `graphql-schema` to your `prisma.yml`.
datamodel phofcode generated type phofcode invocation phofcode output phofcode
i haven 't been able to create a small reproducible test case,
steps to reproduce the behavior: 1. try replicating the example code.
2. generate the prisma bindings.
3. try running `ctx.db.$subscribe.foo({ mutation_in: [ 'created ', 'updated '] }).node();` 4. see error: phofcode
steps to reproduce the behavior: 1. host server on heroku (although hosting provider shouldn 't matter) 2. add the server on `app.prisma.io` 3. run `prisma init heroku-database` and select the server (while logged in to the same user) and defaults (note: `dev` stage, as used in endpoint below) 4.
`cd heroku-database` 5. change `prisma.yml` to reference env vars for `endpoint` and `secret` 6. create .env file (`.heroku.env`) with values for `endpoint` and `secret` 5.
`yarn prisma deploy -e .heroku.env` where `.heroku.env` contains phofcode `prisma.yml` is phofcode
steps to reproduce the behavior: 1. add a post deploy script for 'prisma generate' using 1.20.1 prisma cli on windows 2. run prisma deploy
1. create a mismatched relationship like so: phofcode 2. run `prisma deploy` or `prisma generate` (i forget which one) 3. get error message saying: phofcode
steps to reproduce the behavior: use following schema: phofcode run `prisma generate` see generated code is only returning client.getone, versus getmany type deploymentexec struct { texec *prisma.exec } func (instance *deploymentexec) kintoblocks() *kintoblockexec { tret := instance.exec.client.
steps to reproduce the behavior: 1. create a data model type without scalar fields, eg: phofcode 2. run `prisma generate` phofcode
1. deploy this data model: phofcode 2. execute this mutation: phofcode 3. execute this query phofcode
steps to reproduce the behavior: 1. setup a project with `prisma init` workflow 1. create a datamodel with type named `news` 1. run `prisma generate`
steps to reproduce the behavior: in windows powershell: phofcode
steps to reproduce the behavior: 1. create a related subscription 2. query using some , every or none 3. gives iterator.next() error 4. the subscription works if used like previous version
phofcode fill the table with some data, then try to delete data and boom!
use the latest beta: 1. create new project: `prisma init` 2. generate the ts client and deploy to a demo server 3. update the data model to this and deploy afterwards and regenerate the client afterwards: phofcode 4. try to run following ts code in a script: phofcode 5. it yields error: `property 'comments ' does not exist on type 'post '.` here 's what my `package.json` looks like: phofcode
steps to reproduce the behavior: 1. update to 1.19.1 2. re-generate the javascript client 3. try to use `prisma.updatemany...` 4. see error
steps to reproduce the behavior: 1. go to prisma console '/services' 2. the layout of the services table breaks, it should at least be horizontally scrollable
steps to reproduce the behavior: 1. run ``prisma playground`` inside the folder that contains the ``prisma.yml`` 4. see error
edit your datamodel.prisma to add this type phofcode run phofcode then you get the error phofcode
steps to reproduce the behavior: 1. start a fresh project, run `prisma deploy` to generate the typescript client library.
2. attempt to compile your code, along with the generated client library, with `nounusedlocals` turned on.
steps to reproduce the behavior: i'm following the get started phofhyperlink from prisma documentation.
the `user` type: phofcode i start with two users: phofcode i want to make them friends: phofcode but the connection only shows up in one direction.
so bob gets added to franz ' friend list, but not the other way around: phofcode
steps to reproduce the behavior: 1. run `prisma init new-folder` 2. see error
steps to reproduce the behavior: 1. perform any deployment that results in a rollback.
here is an example that triggers this behavior.
steps to reproduce the behavior: 1. restore the database db.sql phofhyperlink 2. download the github project phofhyperlink 3. open the project in visual code 4. start docker container --> `docker-compose up -d` 5. deploy prisma --> `prisma deploy` 6. open graphql playground --> ` phofurl 7. execute mutation phofhyperlink 8. open docker browser to display container log 9. look at error as seen in error when executing mutation, id_menu passes as null so record is not inserted in database
0. setup a new project using `prisma deploy` and
steps to reproduce the behavior: 1. deploy a prisma server using the offical docker image (1.14) (setup like this phofhyperlink ) 2. deploy a second prisma server with the same db credentials and secret as the first one 3. try to deploy a schema using second server
clone this repo phofhyperlink and follow instructions in the readme.md
steps to reproduce the behavior: 1. create a new project with prisma init 2. paste the following into the datamodel.prisma file: phofcode 3. deploy this schema via prisma deploy 4. open the playground at localhost:4466 5. create a subscription on type b: phofcode 6. in a separate tab, create a record of type a and use nested mutations to create some records of type b: phofcode 7. observe that subscription shows both b 's being created 8. issue an updatemany against type b: phofcode 9. observe that subscription is not fired for each of updates that took place.
10. issue deletemany against b: 11. observe that subscription is not fired for each of deletes took place.
steps to reproduce the behavior: 1. create a new project with prisma init 2. paste the following into the datamodel.prisma file: phofcode 3. deploy this schema via prisma deploy 4. open the playground at localhost:4466 5. create a subscription on type b: phofcode 6. in a separate tab, create a record of type a and use nested mutations to create some records of type b: phofcode 7. observe that subscription shows both b 's being created 8. delete record created earlier: phofcode 9. observe that subscription is not fired for each of deletions that took place.
steps to reproduce the behavior: 1.
`~ $ git clone phofurl ` in your gopath 2.` ~ $ cd prisma-go-hackernews2` 3.
`prisma-go-hackernews2 $ docker-compose up -d` 4.
`prisma-go-hackernews2 $ cd prisma` 5.
`prisma prisma deploy` 6. try to modify the code preferably with a relation like user().votes() to see the that autocomplete is broken (or not)
run phofcode the error will be printed: phofcode the same for `prisma.request`, `prisma.request` and `prisma.graphql`.
to the best of my knowledge, it should be `prisma.$graphql`.
steps to reproduce the behavior: 1. install beta: 2. run `prisma generate` for a flow application 3. notice that the generated prisma client is missing the import for `documentnode`
steps to reproduce the behavior: 1. create an ssl protected postgres database and retrieve key-file and cert-file (e.g.
on cloud.google.com) 2. create dockerfile phofcode 3. set `ssl: true` for `prisma_config` 4. start container
1. add a new type like this to your datamodel: phofcode 2. deploy 3. run this mutation: phofcode 4. you 'll receive an internal server error: > java.sql.sqlexception: incorrect string value: for column 'id ' at row 1
follow the instructions in this repo phofhyperlink .
steps to reproduce the behavior: run any subscription and will try to use filters for node field.
after that delete something (that not in filter) and you will get notify despite of filters
steps to reproduce the behavior: 1. install prisma globally in windows 2. run prisma init 3. see error cannot find module ps-node
steps to reproduce the behavior: 1. go to prisma playground 2. run a query like phofcode take id of the last item and run the same query again, passing inside the `after`.
notice that returned list is empty.
create a docker for aws swarm and deploy a stack that looks like the following: phofcode
steps to reproduce the behavior: 1. open git bash 2. run `prisma init` 3. press down arrow 4. see that nothing happens
steps to reproduce the behavior: phofcode count result is at most 20, even if i have elements.
steps to reproduce the behavior: 1. deploy this datamodel: phofcode note `boolean`, and not `boolean`.
2. see error: phofcode internal server error logs: phofcode
steps to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: ## mutationintensive some results could be found in results.log for various environment (prisma version 1.27.3) test performance (internal server error when doing "intensive" concurrent mutation) valid test creation of 4000 item objet synchronously, peuso code: for (var i = 0; i < useridlist.length; i++) { await } invalid test creation of 3084 item objet instead of 4000 concurrently, peuso code: await => ## to reproduce:
steps to reproduce the behavior: 1. create a complete new prisma project (prisma init > local docker) 2. create a graphql config (graphql init) 3. optional: move the files in the folder structure of the following screenshot 4. modify file content of `prisma.yml` and `.graphqlconfig.yml` like below 5. execute `prisma deploy` 6. execute `prisma playground` 7. see error 8. if you remove `generate` property from `prisma.yml` and execute `prisma playground` again, it works but now you don 't have generated files anymore
$ prisma init myproj ?
set up a new prisma server or deploy to an existing server?
what kind of database do you want to deploy to?
does your database contain existing data?
enter database host enter port 3306 enter user root enter password connecting to database... !
error: could not connect to database.
connection terminated unexpectedly at at step at object.throw at rejected <anonymous> exiting with code: 1 note that it doesn 't prompt me for a schema in my mysql before crashing.
also note that i have validated my mysql server is running locally and is accessable using the credentials shown.
i also have looked through the output printed after setting export debug="*" but i didn 't immediately see anything.
steps to reproduce the behavior: 1. get access to the new phofurl container environment (currently invite only) 2. install prisma 3. use the cli to login 4. see error
steps to reproduce the behavior: 1. include in your datamodel.prisma and schema.graphl a type that takes consist of an id and string like so: datamodel.prisma phofcode schema.graphql phofcode 2. create some entries via mutations in the graphql playground 3. change the type to use an enum instead of a string for the title like so: datamodel.prisma phofcode schema.graphql phofcode 4. run
steps to reproduce the behavior: 1. deploy the datamodel 1. the generated type of multiple field (in this case `todoes`) on query is this type does not extend `fragmentable`
steps to reproduce the behavior: 1. install prisma 2. setup the config as posted above 3. execute `prisma generate` 4. see error phofcode
steps to reproduce the behavior: 1.
`prisma init` choose new database with postgres 2. create a schema for a table 3.
`prisma deploy` 4. run a subscription query 5. insert a row to the database via psql console.
steps to reproduce the behavior: 1. try db.exists.user, passing a non-existing user id
steps to reproduce the behavior: 1. open chrome,go to ' phofurl 2. right click web page translation 3. click on second sections 'change datamodel' 4. see error
i create repo with this bug: 1. clone 2. run `npm i` 3. run `npm run bug` or `launch program` in vscode debugger 4. see error
steps to reproduce the behavior: 1. create postgres tables (almost same with the example in the docs, only to change `serial` to `varchar(25)`): phofcode the generated db structure: image phofimage please note the foreign key `product_id` in table `bill`.
`prisma introspect`, getting following datamodel (just like what docs show, only `int` turns into `id`): phofcode 3.
`prisma deploy` datamodel to a new postgres database, and here is new db structure: image phofimage please note that foreign key `product_id` in table `bill` is missing, and there is a new cross table `_billtoproduct`.
that means one-to-many relationship is now linked with a many-to-many table, not a foreign key.
steps to reproduce the behavior: 1. deploy the above datamodel
steps to reproduce the behavior: 1.
`prisma init abc` -> follow wizard to create new `docker-compose.yml` for local mysql 3.
`cd abc` 4. replace `docker-compose.yml` with phofcode - run `docker-compose up -d` - periodically run `docker ps` and check the status of the prisma container - it 'll restart every ~10 seconds and crash: image phofimage
steps to reproduce the behavior: 1. run `prisma init --endpoint phofurl 2. see error
steps to reproduce the behavior: 1. deploy prisma with a managementapisecret (ex: my-secret-42) 2. go to the playground 3. add an `authorization` header with a jwt with the following payload: phofcode source: phofurl 4. run the following query: phofcode 5. see following error: phofcode
steps to reproduce the behavior: please follow:- phofurl
steps to reproduce the behavior: please follow:- phofurl
steps to reproduce the behavior: 1. go to 'part 2 step 5' 2. node index.js
steps to reproduce the behavior: 1. clone phofurl 2. go to node-graphql phofhyperlink 3. follow the instructions to setup 4. run `createdraft` mutation 5. you will have 2 records returned by the `drafts` query
steps to reproduce the behavior: 1. go to ' phofurl 2. click on 'get started ' 3. go through the guide with a new database 3. when you are finished with page 3, try to run the application.
phofcode in the terminal 4. see error
steps to reproduce the behavior: 1. deploy this schema phofcode 2. create user from mutation 3. add more fields to schema phofcode 4. now post fields in old user will be null but we want to migrate old data to have post type phofcode
steps to reproduce the behavior: 1. init a prisma instance selecting the docker local installation option with postgresql as database 2. deploy this datamodel user, university, career datamodel phofhyperlink phofcode 3. load this data example-data phofhyperlink 4. try to get all the users, with all the universities they are interested in, but only including first 10 careers for those universities phofcode
steps to reproduce the behavior (this assumes that there is a hidden step in which the db is populated with tables using another prisma service, so that `migrations: false` has a fresh db deployed with `migrations: true` to look at; left it out to reduce complexity): 1. setup `docker-compose.yml`with the following basic services: phofcode 2. setup a model such as phofcode 3. start your docker setup, and run `prisma deploy` with the proper environment variables.
4. you should see an error: phofcode
## datamodel.graphql phofcode ## query causing `internal server error` phofcode ## whoops phofcode
steps to reproduce the behavior: 1. create relative type with id and relation only 2. build schema we got: phofcode 3. update schema: phofcode 4. rebuild schema.
and all ok phofcode i undestand, when type have not custom fields nothing can be updated.
can add at least create?
phofcode then run generate command, now we have: ts # generated/index.ts /
i prepared a reproduction here: phofurl please read phofurl for more information.
in brief: create a short linked list with 4 elements, then delete all elements concurrently.
about one time out of 3 or 4, it results in an internal error (cf.
create a datamodel: phofcode the generated type `aupdateone` will have no disconnect field.
create a datamodel: phofcode the generated type `aupdateone` will have a disconnect field.
1. do not start prisma container 2. run `prisma deploy --force` and check we get `could not connect to server at...` 3. check exitcode with `echo $?`... it is `0` instead of `>=1`
schema: phofcode query that triggers the issue: phofcode query that works as expected: phofcode
steps to reproduce the behavior: image at 3 26 25 pm phofimage image at 3 26 51 pm phofimage
steps to reproduce the behavior: 1. open the playground with firefox 2. write an errorsome query 3. point the pointer to the error 4. see error
steps to reproduce the behavior: 1. run `prisma export` on the source server 2. run `prisma import` on the destination server
steps to reproduce the behavior: 1. go to prisma docs (new) phofurl 2. begin typing in search bar 3. see error
* schema * phofcode *query - does not work* phofcode *query - does work* phofcode
create a new service with the following datamodel: phofcode prisma will associate `c.b` with `a` instead of `b`.
all input types and output types will be generated according to this incorrect association.
attempting to create a node of `c` with an associated node of type `b` leads to an internal server error: phofcode
create a new prisma service with the following datamodel: phofcode this will create an input type which is empty and cannot be parsed by `graphql-js`.
due to this, the playground will no longer be operational for this service.
1. create a datamodel.graphql like this phofcode 2. deploy to prisma server with `prisma deploy` 3. run schema intropspection and search for book, with graphql-cli `graphql get-schema --endpoint phofurl --console|grep books` then, we can read: phofcode
steps to reproduce the behavior: 1. create a prisma service with an all-caps type 2. deploy the service 3. see generated prisma queries and subscriptions
1. deploy a new prisma service 2. run `prisma playground`
create hello-world app and use docker-compose up to launch.
1. install latest `@alpha` 1. run `prisma init hello-world` 1. select local new db (mysql or postgres) 1. inspect docker compose file
phofurl this is my model shop -> owner - one to one owner -> fruit - one to many fruit -> color - one to phofcode 1. phofurl 2. phofcode
<details> phofcode </details> <details> phofcode </details> <details> <summary>sql type</summary> phofcode </details> the basic mutation i am trying to execute is : phofcode
steps to reproduce the behavior: 1. make a query with postgresql database using the before/after parameters
1. setup prisma 1.14.2 with latest postgresql database 2. schema: phofcode 3. seed with some data 4. query this works: phofcode but this doesn 't: phofcode
data schema: phofcode in status i have some data with slugs like ["publish", "draft", "removed"] query: phofcode return data phofcode
steps to reproduce the behavior: i started with the default phofcode changed it to my own config: phofcode then, suddenly an error appears: image phofimage but it is working with everything as id!
phofcode then changing to uuid!
for user is working: phofcode now the fun part comes: i want recipe and ingredient also as uuid.
so i changed it like this: the result is an infinity loop: we are talking about an empty database!
steps to reproduce the behavior: - implement the resolvers in index.js as below : phofcode - run the server and open playground in the browser.
- create a subscription to userchanges like below: phofcode - run subscription on app make a mutation to add.
then make a mutation to update and finally make a mutation delete.
create subscription user like below for prsima api: phofcode run subscription on prsima api.
then make update and finally make delete.
running `https_proxy= phofurl prisma login`
here 's a simple example that reproduces the bug: phofcode here 's the generated "whereinput" for the "basket" type: phofcode
steps to reproduce the behavior: 1. update from prisma 1.13 to 1.14 have a query like this: phofcode with prisma 1.13 everything worked fine, now you have to do phofcode
steps to reproduce the behavior: 1. start out with this datamodel: phofcode 2. now deploy this datamodel: phofcode 3. get internal server error, find this in the logs: phofcode
i've extracted a self-contained test case with instructions here: phofurl image phofimage phofcode
steps to reproduce the behavior: 1) start with one of the graphql boilerplate templates and edit the datamodel.graphql file to be: phofcode 2) run `prisma deploy` 3) get rekt by an error.
at first it says internal server error.
going to the prisma logs i see following (running prisma and postgres with docker-compose): phofcode 4) remove exclamation mark from userrolesenum and watch code magically work again when running `prisma deploy`
steps to reproduce the behavior: 1. apply the following kubernetes resource 2. attach to the logs phofcode
steps to reproduce the behavior: create subscription with datetime previousvalues definition.
steps to reproduce the behavior: 1. deploy this datamodel: phofcode 2. deploy this datamodel: phofcode 3. the deployment is stuck: phofcode
steps to reproduce the behavior: 1. setup a working server 2.
`prisma deploy` -> everything is ok and deployed 3.
`prisma list` -> displays `no deployed service found`
steps to reproduce the behavior: 1. do a `prisma init` and set up a new mysql instance as normal.
2. in the generated `datamodel.graphql`, change the default `id` field declaration to `uuid!
3. run `prisma migrate` to deploy the schema.
4. run `prisma playground` and attempt to use a mutation query create a new user.
1. go to prisma console 2. go to servers 3. press add server 4. select "connect to existing" 5. input server url without ` phofurl image phofimage
setup a prisma cloud service, then load the data browser for a type.
steps to reproduce the behavior: 1. deploy this datamodel: phofcode 2. run this query: phofcode 3. you 'll get an internal server error.
4. see error in logs: phofcode
1. create prisma server using the "create server" flow in app.prisma.sh` 2. create your prod env file 3. try to deploy to this server and you will receive an error
steps to reproduce the behavior: 1. create and deploy type phofcode 2. create a few nodes of type `y`.
my result: phofcode 3. create query (e.g.
in playground):: phofcode 4. send `gety` with variables: phofcode results as expected: 5. send `gety` with variables: results in error 6. send `gety` with variables: results in the same error as in 5.
1. clone phofurl 2. run docker-compose up -d 3. run prisma deploy
steps to reproduce the behavior: 1. follow the steps in the prisma docs phofhyperlink example to set a prisma `secret`, then generate a `__token__` using `prisma token`.
2. client-side, use `window.fetch` to access the server.
be sure to include `authorization: bearer __token__` in header.
phofcode 3. run code, so that token gets sent server and you get a response.
4. re-run code, but this time without `authorization: 'bearer __token__'`: phofcode
steps to reproduce the behavior: 1. init prisma 2. create relationship with uuid model phofcode 4. start container and deploy 5. try to find posts by author phofcode image phofimage the same query with the default id works well.
steps to reproduce the behavior: create a user schema, and make sure where fields use @unique phofcode try calling within a mutation phofcode
1. deploy this datamodel: phofcode 2. see error
1. initialize & deploy a new prisma project 2. create at least 32768 users 3. issue a query of the form: ` mutation { deletemanyusers { count } } ` 4. this will produce this error and not delete the records.
steps to reproduce the behavior: 1. subscribe to `deleted` and be sure to query `previousvalues` with the `id` field: phofcode 2. delete an entry to trigger subscription.
steps to reproduce the behavior: 1) create files `prisma init` selecting existing postgresql database during `prisma init` creates prisma.yml, datamodel.graphql and docker-compose.yml.
prisma.yml: phofcode datamodel.graphql: phofcode docker-compose.yml: version: '3 ' services: prisma: image: restart: always ports: - environment: prisma_config: | port: 4466 databases: default: connector: postgres host:
steps to reproduce the behavior: 1. run `yarn start` 2. see error
1. setup a new postgres db on heroku 2. add a `user` table with `id` and `name` (see postico screenshot above) 3. run `prisma init` and select `use existing database` 4. provide your db connection details (afterwards the service configuration and docker compose file are generated) 5. run `prisma deploy`
1. clone the repo from here: phofurl 2. install dependencies and launch server/playground phofcode 3. run the following query in playground: phofcode 4. returns an error phofcode
steps to reproduce the behavior: 1. it is reproduced in the snapshot phofhyperlink of the tests for introspection.
steps to reproduce the behavior: 1. create a new project `prisma init subscriptions` 1. demo server (also tried `create new database` with local postgres) 2. hosted on eu-west-1 (also tried us-west-2) 2.
`cd subscriptions; prisma deploy` 3. open playground 4. start the subscription 5. perform the mutation subscription: phofcode mutation: phofcode
steps to reproduce the behavior: this is my schema phofcode first connect x/y and x/z phofcode then disconnect x/y phofcode this is what is got from mysql log phofcode so it deletes all relations that x is following
i created a repository containing a simple demonstration of this bug, which you can clone, run, and verify this issue against.
the queries in "queries.txt" are meant to be run in the graphql playground.
it is located here: phofurl
steps to reproduce the behavior: 1. create a schema with the initial state and do a prisma deploy.
2. update the schema with new order schema.
3. it should stall on prisma deploy.
steps to reproduce the behavior: 1. create a datamodel with uuid `type user { id: uuid!
` 2. create a record in the playground `mutation { createuser(data: { name: "john" }) { id name } } ` `{ "data": "createuser": "id": "name": "john" } }` 3. try to delete it `mutation id name }` 4. see error `{ "data": "deleteuser": null }, "errors": [ "message": "whoops.
looks like an internal server error.
search your server logs for request id: "path": [ "deleteuser" ], "locations": [ "line": 2, "column": 3 ], "requestid": ] `
steps to reproduce the behavior: my docker yaml version: '3 ' services: # sql and document data store db: image: db build: context: ./images/db tmpfs: - /tmp - /var/run/postgresql volumes: - - ./seeds:/seeds ports: # you can override it via # prisma prisma: image: restart: always ports: environment: prisma_config: | port: 4466 # uncomment the next line and provide the env var to activate cluster security managementapisecret: my-secret databases: default: connector: postgres host: db port: '5432 ' user: root password: ' ' database: realadvisor schema: public migrations: false distributed in-memory cache redis: image: redis:
steps to reproduce the behavior: 1. clone the repo prisma-boilerplate phofhyperlink 2. run the prisma deploy 3. prisma will stuck on the `apply changes`
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: use a pagination filter first or last with value 1
steps to reproduce the behavior: 1. inititiate a prisma service with the stated docker.yml and prisma.yml code 2. install the needed dependencies 3. go the directory with docker-compose.yml file and run docker-compose up
the following datamodel.graphql excerpt was generated from an existing postgres database.
it is however not valid upon attempting to run `prisma deploy` phofcode
1. type prisma introspect 2. type schema name when prompted: "enter name of existing schema" 3. error: the provided database doesn 't contain any tables.
steps to reproduce the behavior: 1. go to your `prisma.yml` file and add a server side subscription phofhyperlink 2. do `prisma deploy` and try to invoke your subscription 3. console log the headers on the webhook and you will see that the ones you added to configuration file are not being sent.
steps to reproduce the behavior: 1. deploy any prisma service on heroku phofhyperlink .
`npm install prisma@1.12.0-beta.0 -g` 2.
`prisma init` 3. choose "create new database" 4.
`docker-compose up -d` 5. use the above datamodel and `prisma deploy` output: phofcode
i will provide a reproduction soon.
steps to reproduce the behavior: 1. on an older prisma version (e.g.
), create a node with scalar list values.
2. export from this version.
3. import it into a recent prisma version, e.g.
4. the import will crash, because the export contains the scalar list values for the node that has been deleted.
1. setup prisma server with postgresql connector 2. schema: phofcode 3. create data with an instance of course having `colors` and `tools` field set to a
steps to reproduce the behavior: 1. run `prisma init` and choose to deploy to a demo server.
3. the deploy fails with an error because no workspace slug is included in the url in the `prisma.yml`: phofcode
the following schema generates the error `type must define one or more fields` phofcode
steps to reproduce the behavior: 1.
`prisma.yml` phofcode 2. a valid `datamodel.graphql` 3. run prisma deploy and fill it with the following <img width="1230" alt="screen shot at 2 27 52 pm" src=" phofurl 4.
`prisma.yml` will have `endpoint: phofurl because the defaults are missing 5. running `prisma deploy` again works as defaults kick in but the appended url is incorrect.
steps to reproduce the behavior: 1. datamodel.graphql phofcode 2. schema.graphql phofcode 3. resolver phofcode 4. query phofcode
steps to reproduce the behavior:
`datamodel.graphql`: phofcode change the `destination` field from `json!` to `json` and then `prisma deploy` to prisma cloud.
the response indicated that the field `destination` had been set to not required.
however, a create mutation still produces an error.
for example: phofcode error message: phofcode heres the resolver in case helpful: phofcode and the schema:
steps to reproduce the behavior: 1. set up a prisma project with a self hosted database on heroku using heroku postgres hobby plan phofhyperlink 2. lift your docker image locally and try to deploy locally by doing `prisma deploy` 3. check docker container errors with `docker logs yourcontainername` 4. see error phofcode and not able to get my local server running.
phofcode the `docker-compose up` results in the error/output bellow, with these errors: > - `prisma_1 | expected uri to be non-empty` > - `error: null value in column "lastpinged" violates not-null constraint`
1. follow the quickstart guide and deploy on demo server 2. successful deploy with demo schema, playground works 3. edit datamodel.graphql with the following : phofcode 4. run prisma deploy => success 5. run prisma playground => server cannot be reached
0. have a prisma server running on port 4466.
1. use this `prisma.yml`: phofcode 2. run `prisma deploy`.
you'll get this output: phofcode
steps to reproduce the behavior: 1. update prisma image in docker-compose.yml to `1.10.0` 2. update prisma cli to latest (1.10.0) 3. run `prisma deploy` 4. see error
steps to reproduce the behavior: 1. create the prisma docker container using the included `docker-compose.yml` and `datamodel.graphql` 2. create the database and initialize it with some data 3.
`prisma playground` 5. enter in included query 6. error is visible in `docker logs <container_name>`
steps to reproduce the behavior: 1. follow the linked tutorial exactly to step 12 2. run `prisma deploy`
steps to reproduce the behavior: 1. run `prisma init`, initialize a service 2. run `prisma deploy` to deploy 3. run `graphql init` and enter some values.
4. in the new `.graphqlconfig.yaml` file, replace content with phofcode 5. move `prisma.yml` to `prisma/prisma.yml` 6. run `prisma info`.
follow this guide phofhyperlink exactly on an ubuntu machine.
my docker-compose.yml file: version: '2 ' services: prisma: image: prismagraphql/prisma:1.8 restart: always ports: - environment: prisma_config: | port: 4466 # uncomment the next line and provide the env var to activate cluster security # managementapisecret: my-secret databases: default: connector: mysql host: localhost port: 3306 user: root password:
add this line to a file: phofcode which returns an integer.
when you run black on the file, it converts this to: phofcode this code returns a tuple.
1. paste the following into a python source file, at the global level: phofcode 2. run _black_ on it with no arguments.
: 1. put this example in a file: phofcode 2. run `black <file> --diff`
run black on the following snippet: phofcode it results in the following output: phofcode so it left the trailing comma at the end of list.
1. create a file with this python code: phofcode 2. run _black_ on it with no arguments.
3. observe that nothing happens, even though the first line has 125 characters and so should be reformatted.
* test.py * phofcode *with black 19.3b0* phofcode *with black 19.10b0* phofcode
steps to reproduce the behavior: pip install black
steps to reproduce the behavior: 1. simple reproduce in docker env, which is used in travis-ci, gitlab-ci nowadays phofcode ` 2. run _black_ on it with these arguments '....' 3. see error phofcode `
: 1. build a docker image (`docker build .`) using this dockerfile: phofcode 2. see error: phofcode
phofcode however, it would install the latest version with `--upgrade` switch: phofcode
, run the test suite on s390x.
here is the build log with all the commands: build.log phofhyperlink here is the root log with all package versions: root.log phofhyperlink
1. run black on phofurl 2. this produces the following diff: phofcode
steps to reproduce the behavior: 1. take this file: phofcode 2. run _black_ on it with no arguments 3. observe that black has eaten our innocent formfeeds :(
1. install _black_ in pycharm project 1. run _black_ on it with path as an argument 3. wait forever looking at clean console
steps to reproduce the behavior: 1. have a box with a tesla k40m 1.
`conda install pytorch cudatoolkit -c pytorch` 1. show cuda is available phofcode 1. instantiate a model and call `.forward()` phofcode first tried downgrading to cudatoolkit=10.0, that exhibited same issue.
the code will run fine if you repeat steps above but instead `conda install pytorch=1.2 cudatoolkit=10.0 -c pytorch`.
load the attached torch script, and try to convert to onnx: def convert(self): loaded = dummy_input = torch.randn(1, 3, 224, 224) target = loaded(dummy_input) dummy_input, self._out_onnx_path, verbose=true, example_outputs=target) cc @suo @houseroad @spandantiwari @lara-hdr @bowenbao @neginraoo
use pre-build nightly version for cuda 10.1 for any project.
project include paths: phofcode lib paths: phofcode
phofcode <details><summary>stack trace</summary> <p> phofcode </p> </details>
steps to reproduce the behavior: phofcode `
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode gives error: > traceback (most recent call last): file "test_imagenet.py", line 4, in <module> imagenet = split="val", target_transform=none, download=false) file line 56, in __init__ wnid_to_classes = file line 108, in _load_meta_file "you can use download=true to create it.")
runtimeerror: ( 'meta file not found or corrupted.
', 'you can use download=true to create it. ')
steps to reproduce the behavior: 1. just run the sample code.
2. the backward is not called, (no print message) phofcode
steps to reproduce the behavior: 1.ele = torch.tensor([1]) 2.print(ele.shape, torch.tensor(ele.shape)) # torch.size([1]),
steps to reproduce the behavior: 1. copy the following toy code to a local python file: phofcode 2, launch the python script with the helper from pytorch -- for example, assuming script is called `test.py` and that we 're using 1 node and 2 processes per node on a local machine: phofcode 3. the program should produce an error message complaining connection is closed by some peer at at some random port.
steps to reproduce the behavior: 1. create a zero tensor 2. create a conv2d with a kernel size of 3 and 3 output channels 3. apply the layer to the tensor phofcode
the code is very similar to this link: phofurl the only difference is in the initiation phase: phofcode
steps to reproduce the behavior: phofcode in my branch, i only make changes to some python code.
for the record: commit 4bed1c4d7, master is on commit config part of build log phofhyperlink : phofcode
phofurl steps to reproduce the behavior: 1. clone the repo 1. make torchbench see related tensorflow issue for context: phofurl
steps to reproduce the behavior: phofcode
cpu only, libtorch debug or release, vs2019 with last toolchain, cmake for making vs project `#include <torch/torch.h> // define a new module.
struct net : torch::nn::module { tnet() { t t// construct and register two linear submodules.
t tfc1 = register_module("fc1", torch::nn::linear(784, 64)); t tfc2 = register_module("fc2", torch::nn::linear(64, 32)); t tfc3 = register_module("fc3", torch::nn::linear(32, 10)); t} t// implement the net 's algorithm.
ttorch::tensor forward(torch::tensor x) { t t// use one of many tensor manipulation functions.
t tx = x.size(0), 784 }))); t tx torch::dropout(x, / * p= * /0.5, / * train= * /is_training()); t tx t tx / dim= /1); t treturn x; t} t// use one of many "standard library" modules.
ttorch::nn::linear fc1{ nullptr }, fc2{ nullptr }, fc3{ nullptr }; }; int main() { t// create a new net.
tauto net std::make_shared<net>(); t// create a multi-threaded data loader for the mnist dataset.
tauto data_loader t t/ batch_size= /64); instantiate an sgd optimization algorithm to update our net 's parameters.
ttorch::optim::sgd / lr= /0.01); tfor (size_t epoch 1; epoch <= 1; ++epoch) t tsize_t batch_index 0; t t// iterate the data loader to yield batches from the dataset.
t tfor (auto& batch : *data_loader) t t t// reset gradients.
t t t// execute model on input data.
t t ttorch::tensor prediction t t t// compute a loss value to judge prediction of our model.
t t ttorch::tensor loss batch.target); t t t// compute gradients of loss w.r.t.
update parameters based on calculated gradients.
output loss and checkpoint every 100 batches.
t t tif (++batch_index % 100 == 0) t t t tstd::cout << "epoch: " << epoch << " | batch: " << batch_index t t t t t<< " | loss: loss.item<float>() std::endl; t t t t// serialize your model periodically as checkpoint.
"net.pt"); t t t} t t} t} tstd::cout "end learning"; treturn exit_success; t t }` steps to reproduce behavior: 1. create cmake project with an example code 2. configure and generate vs2019 project 3. run project in vs in debug or release mode (download mnist data is needed)
phofcode this code will output as below, but as you notice `einsum.jacobian` of `incontiguous input tensor` is different from all the others.
steps to reproduce the behavior: 1. run simple mnist.py with python3.7
i am using shared memory for dataloading (via torch 's dataloader) and queues from torch.multiprocessing for async summary writing.
this error randomly happens at some point during the training.
fyi i am using phofcode
run this: phofcode the result: phofcode
phofcode the two numbers should match up, but they do not, at least for me.
i also recognize that there is a very high likelihood it is something wrong with my code itself, and not the implementation of the kl divergence, so if that turns out to be the case, it would be great if you let me know where the error is.
steps to reproduce the behavior: 1. see the nightly builds starting from nov. 15 here phofhyperlink
run the following script: phofurl
steps to reproduce the behavior: 1. implement linear layer as `nn.module` and `jit.scriptmodule`: phofcode 2. define a simple inference loop that measures cpu memory phofcode 3. run inference loop to measure cpu memory for different combinations of layer implementation ('nn.module' or 'jit.scriptmodule') and multi-gpu (dataparallel or not).
phofcode the code above fails with: phofurl it looks like when we create rrefs in the distributedoptimizer constructor, we don 't "wait" for these rrefs.
aside from the issue above, we should ensure we wait for the rrefs so that discover any errors earlier.
but now, if i change the distributedoptimizer code to wait for rrefs, i run into following error with same script above: phofurl cc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @gqchen @aazzolini @rohan-varma @xush652
phofcode <details><summary>stack trace</summary> <p> phofcode </p> </details>
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode phofcode >>> 5.9 ms 917 s per loop (mean std.
of 7 runs, 30 loops each) phofcode >>> 50.3 ms 2.5 ms per loop (mean std.
of 7 runs, 30 loops each)
add a new unit test to create remote reference to itself, remote exception is not rethrown @dist_init def n = self.rank + 1 dst_rank = n % self.world_size rref = no_result, args=(10,)) a = rref.to_here() print(a)
in the below example i have a loop on "i" in range(10), when i trace it, "i" starts taking weird values when torch.cat() is used in the loop, i think it starts taking the value of the output of cat and becomes a tensor (it is not happening with all operators, but i not sure if cat is only operator affected).
when test with commit right before #29230 was merged do not see this error, but am not sure how changes in #29230 affect tracer.
here is a simple repro.
steps to reproduce the behavior: 1. make a simple network.
2. change a model to eval mode (with torch.no_grad()) 3. evaluate model with dynamic size input.
4. cpu memory increases a lot.
5. i attached a simple toy example that can reproduce this error.
phofurl run this code with "python3 main.py -ds" (-ds means the input tensor size will be changed)
steps to reproduce the behavior: 1. build from source using `python setup.py develop` 2. run `git status` phofcode
this is where i 'm getting my resnet50 pt file and the jit trace.
worked perfectly fine for resnet34, resnet18, and mobilenet.
also yes i am adding a softmax at the end to normalize the values between 0 and 1 but that shouldn 't cause an issue and didn 't with the latter models.
**this is python code for tracing model** (sorry for some reason it won 't format but it 's pretty simple) device = torch.device( 'cpu ') model = model = nn.sequential( #imagescale(), model, nn.softmax(1) ) model.eval() input_tensor = script_model torch.jit.trace(model, input_tensor)
python >>> import torch (for me, quiet completion) (for another user, the following:) traceback (most recent call last): file "<stdin>", line 1, in <module> file line 228, in <module> class _storagebase): attributeerror: module 'torch._c ' has no attribute
phofcode when running `python example.py`, i get this oom error after 30 iterations: phofcode the memory profiler output phofhyperlink clearly shows a steady memory increase (and never decrease) at each `model(x)` call, of **190mb per call** on average.
perform a bunch of rpcs in a loop and then kill a node, this should cause `recvwork::wait()` to throw.
i think something like this will do it: phofcode
steps to reproduce the behavior: phofcode
phofcode > floating point exception in the actual model `batchnorm2d` is actually trained and then `.eval` is called.
steps to reproduce the behavior: running the following script: phofcode fails with phofcode in our code, this leads to awkward workarounds like: phofcode
consider the following three code snippets.
phofcode phofcode phofcode on my machine the first two both print out `40448`, but the third prints out several times as much, just to print out a few numbers!
steps to reproduce the behavior: phofcode
phofcode got runtime error: "runtimeerror: is not compatible with the type for the field '_dummies ' (addorcheckattribute at
steps to reproduce the behavior: phofcode then it reports an error: "indexerror: too many indices for tensor of dimension 2" however, if you transpose both a and w, it works fine!
steps to reproduce the behavior: 1. download cosine_similarity.zip phofhyperlink 2. python test.py
this is a better example: phofcode steps to reproduce the behavior (old): phofcode
attempt to compile this: phofcode phofcode
steps to reproduce the behavior: 1. install pytorch on windows 7 via conda (`conda create --name grad_test pytorch -c pytorch`) 1. run example code given below taken from the post on stack overflow phofcode
import numpy as np np.std(4) # returns 0 import torch # returns nan
steps to reproduce the behavior: 1.
`pip3 install torch===1.3.0 torchvision===0.4.1 -f phofurl 1. don't install cuda toolkit separately 1.
`import torch` 1. observe `importerror: dll load failed: the specified module could not be found`
steps to reproduce the behavior: 1. install pytorch 1.3.0 from conda: conda install pytorch torchvision cpuonly -c pytorch 2. run code from quantization tutorial phofhyperlink
run this code with pytorch 1.2 and 1.3: #!
steps to reproduce the behavior: 1. clone pytorch and checkout master branch.
2. build on machine with cuda enabled.
i am using the following build config: phofcode 3. the following error should occur.
phofcode executing this code yields a wrong result for the last addition.
the second element even changes if the snippet is executed multiple times.
so far i got `0.5`, `4.0` and `nan`.
you can get the code from a temporary repository i 've created for this issue: phofcode run `export_model.py` file, you will get the following error: phofcode
steps to reproduce the behavior: phofcode this will throw an error: phofcode
this is the snippet of my code: phofcode steps to reproduce the behavior: simply run the code above (make sure to change `/users/lanle/desktop` to your local dir)
phofcode wasn't able to repro on cpu or with any other dtype.
steps to reproduce the behavior: phofcode
this error message makes it quite hard to isolate and provide an reproducable example.
however, if i don 't trace the child module, the error is gone.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. a pytorch python pretrained script module been prepraed.
2. load a pretrained fron python script module by method auto presavedmodule = 3. save this module after retrained or inferenced by method 4. reload it auto local =
steps to reproduce the behavior: phofimage change the script to can temporarily solve this problem.
code 1 phofcode - works normally code 2 - fails: phofcode - fails with error phofcode the same trouble with dict, tuple.
steps to reproduce the behavior: 1. checkout master 1. build
phofcode with `hello.py` phofcode then running the binary will print `hello` and hang.
going into gdb, i see: phofcode in our actual application, i was able to hack around this by using the following function instead of `torch.tensor` or `torch.as_tensor`: phofcode which "works" fine.
test: phofcode output: phofcode cc @su
phofcode fails with phofcode interestingly, if you explicitly annotate `b.forward` as returning an `optional[int]` (for example), then this passes runs perfectly (with the code that you would expect).
steps to reproduce the behavior: 1. define two models where the second has an additional 1. save the first model 1. load the first model and use it to initialise second model.
steps to reproduce the behavior: 1.
script to reproduce the behavior: phofcode stack trace: phofcode
here 's my dockerfile: phofcode <details> <summary>python traceback</summary> phofcode </details>
from torch.utils.data import dataset, dataloader class set_ex(dataset): tdef __init__(self): t tself.lst = [1, 2, 3, 4, 5, 6, 7, 8] tdef __getitem__(self, index): t treturn self.lst[index] tdef __len__(self): t treturn len(self.lst) if __name__ == "__main__": t
steps to reproduce the behavior: 1. compile pytorch for android with 2. take the example app i created here phofhyperlink , but instead of using the provided model create a new one by running: phofcode put this inside of (replacing the existing model), and modify this line phofhyperlink to 1}));`.
also update cmakelists.txt 3. run it, press button and see crash.
steps to reproduce the behavior: import torch amatrix = avec = avec = avec.unsqueeze(1) avec.requires_grad = true amatrixchol torch.cholesky(amatrix) acholsol amatrixchol) answer torch.dot(acholsol[:,0], acholsol[:,0]) answer.backward()
i wrote a timing script to see how much slower: phofcode which i coordinated with a bash script: phofcode which gives: phofcode
the following code logs correctly phofcode <img width="1436" alt="screen shot at 23 26 49" src=" phofurl and this code does not log `hparam/test accuracy` values phofcode <img width="1433" alt="screen shot at 23 28 25" src=" phofurl
create a new hdf5 file with a float32 dataset: phofcode then load it back into a tensor: phofcode it's very slow.
however, if the dataset is converted into a numpy array first, it performs much faster: phofcode the resulting tensors are equal.
perhaps the manual numpy array conversion avoids an expensive conversion to python nested list of floats.
steps to reproduce the behavior: 1. build a torch wheel package with the following command: phofcode 2. install the above built package: phofcode 3. the header files on `math` and `threadpool` are not included on the built package phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. conda create -n pytorch_source python=3.6 2. conda activate pytorch_source 3. conda install numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing 4. conda install -c pytorch magma-cuda100 5. git clone --recursive phofurl 6. cd pytorch 7. export $(which conda))/../" 8. python setup.py install
1. try to create a tensor from numpy ndarray using torch.as_tensor() image = cv2.imread(imgpath) image = cv2.cvtcolor(image, cv2.color_bgr2rgb) image = torch.as_tensor(image, dtype=torch.uint8, names=('h', 'w', 'c')).align_to('c', 'h', 'w') e typeerror: as_tensor() got an unexpected keyword argument 'names'
steps to reproduce the behavior: 1. git clone phofurl 1. download a pretrained model from phofurl hrnetv2-w18-small-v1 phofhyperlink for example.
1. use torch.onnx.export to convert the pretrained model to onnx model.
1. use onnx-tensorrt phofhyperlink or tensorrt 5.1.5 to parse the onnx model.
steps to reproduce the behavior: 1. follow instruction from step1-3 quantization tutorial: phofurl 2. finish step 3 and do quantization part (first part) of step 4.
3. use torch.onnx.export to export model to onnx.
steps to reproduce the behavior: 1. clone repo 2.
`mkdir build; cd build` 3.
`cmake -dbuild_torch=on -dbuild_shared_libs=on -dbuild_python=off ..` phofcode
steps to reproduce the behavior: minimal example: phofcode this has the behavior: phofcode also: phofcode will show you that there is still a reference to the object.
when you make the same experience with following class: phofcode everything will work as expected.
i think this is a bug in pytorch, not in python gc, because: when you generate two objects without super nn.modules and without using cuda, then you can delete both of them without having references left.
steps to reproduce the behavior: python will crash with phofcode if `x` is only created once, then it runs fine: phofcode however, removing rebinding `x` triggers the crashes again: phofcode also, the issue seems to be related to `refine_names` only, since declaring names in `torch.randn` works fine: phofcode
steps to reproduce the behavior:
steps to reproduce the behavior: 1. run models with benchmarking turned on 2. profile the application
phofcode in v1.1: `torch.size([1, 2048, 1])` in v1.3: `runtimeerror: given input size: calculated output size: output size is too small`
steps to reproduce the behavior: 1.
phofcode results in this fixed slice, even though dynamic_axes is used: fixedsliceopset10 phofimage now to work around this use jit: phofcode which is correct: correctsliceopset10 phofimage
phofcode now run phofcode > runtimeerror: [onnxruntimeerror] : 1 : general error : load model from /mnt/output/gr/crop.onnx failed:this is an invalid model.
model input (data) does not have type information also: `opset_version=9` has the same error, but it uses `dynamic_slice` instead of slice
steps to reproduce the behavior: 1. run the script below: #!/usr/bin/env python import torch import numpy as np t1 = torch.rand(16, 100) t2 = t1.clone() m = np.zeros((1, 100), dtype=np.int64) m[0, :10] = 1 m torch.tensor(m, dtype=torch.bool) print(t1) print(t2) t2))
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. build pytorch 1.1.0 from source on raspberry pi 3b+ 2. run the code bellow and get segmentatioin fault error in the last line phofcode
steps to reproduce the behavior: 1. model initialization 2. model training(printf:output result with an all-ones intput at last training step) 3.
phofcode phofcode cc @ezyang @gchanan @zou3519 @jerryzh168 @su
steps to reproduce the behavior: 1. use the follow code to reproduce the error.
phofcode with pytorch 1.3 or above, i have phofcode
steps to reproduce the behavior: **see code snipped above.
caffe2_is_numa_available caffe2_is_numa_available failed numa is not available success current supports avx2 extension.
building using own protobuf under third_party per request.
failed to find llvm filecheck git: /usr/bin/git (found version "1.7.1") git version: version: 1.4.0 have_cxx_flag_std_cxx11 have_cxx_flag_std_cxx11 have_cxx_flag_wall have_cxx_flag_wall have_cxx_flag_wextra have_cxx_flag_wextra have_cxx_flag_wshadow have_cxx_flag_wshadow have_cxx_flag_werror have_cxx_flag_werror have_cxx_flag_pedantic have_cxx_flag_pedantic failed have_cxx_flag_wd654 have_cxx_flag_wd654 have_cxx_flag_coverage have_cxx_flag_coverage have_std_regex have_std_regex have_std_regex success have_gnu_posix_regex have_gnu_posix_regex have_gnu_posix_regex failed have_posix_regex have_posix_regex have_posix_regex success have_steady_clock have_steady_clock have_steady_clock success compiler_supports_avx512 compiler_supports_avx512 openmp_c: -fopenmp (found version "4.0") openmp_cxx: -fopenmp (found version "4.0") openmp: true "4.0") ** asmjit summary ** asmjit_test=false asmjit_deps=pthread;rt could not find numa (missing: numa_include_dir numa_libraries) cmake warning at (message): not compiling with numa.
suppress this warning with -duse_numa=off call stack (most recent call first): cmakelists.txt:389 (include) using third party subdirectory eigen.
python 2.7.13 pythoninterp: suitable "2.7.13", minimum required "2.7") pythonlibs: suitable "2.7.13", minimum required "2.7") could not find pybind11 (missing: pybind11_dir) pybind11: system pybind11 pybind11 include dirs: could not mpi_c (missing: mpi_c_lib_names mpi_c_header_dir mpi_c_works) could not mpi_cxx (missing: mpi_cxx_lib_names mpi_cxx_header_dir mpi_cxx_works) mpi mpi_c_found mpi_cxx_found) cmake warning at (message): not compiling with mpi.
suppress this warning -duse_mpi=off call stack (most recent call first): cmakelists.txt:389 (include) adding openmp cxx_flags: -fopenmp will link against openmp libraries: cuda: /home/work/cuda-10.0 "10.0") caffe2: cuda detected: 10.0 caffe2: cuda nvcc is: caffe2: cuda toolkit directory: /home/work/cuda-10.0 header is: 10.0 cudnn: cudnn: v7.4.2 (include: library: autodetected cuda architecture(s): 7.0 7.0 7.0 7.0 added nvcc flags for: autodetected architecture(s): cub cub_include_dir) cuda: /home/work/cuda-10.0 suitable "10.0", minimum required "7.0") detected: 10.0 nccl: determining nccl from the header file: nccl_major_version: 2 nccl (include: library: cmake warning at (message): metal only used ios builds.
compiling without magma support hardware support neon on this machine.
no omap3 processor on this machine.
no omap4 processor on machine.
cpuid.h cpuid.h have_gcc_get_cpuid have_gcc_get_cpuid no_gcc_ebx_fpic_bug no_gcc_ebx_fpic_bug c_has_avx_1 c_has_avx_1 c_has_avx_2 c_has_avx_2 c_has_avx2_1 c_has_avx2_1 c_has_avx2_2 c_has_avx2_2 cxx_has_avx_1 cxx_has_avx_1 cxx_has_avx_2 cxx_has_avx_2 cxx_has_avx2_1 cxx_has_avx2_1 cxx_has_avx2_2 cxx_has_avx2_2 avx support avx2 support blas_f2c_double_works blas_f2c_double_works blas_f2c_float_works blas_f2c_float_works blas_use_cblas_dot blas_use_cblas_dot a library blas api (mkl).
a library lapack api (mkl).
disabling rocm because use_rocm set miopen found.
libraries: using aten parallel backend: omp using as python relative installation path warning at cmakelists.txt:592 (message): generated cmake files are only fully tested if one builds system glog, gflags, and protobuf.
other settings may generate files that are well tested.
please the complete backtrace any bug report.
file included "__stdc_format_macros" redefined #define __stdc_format_macros file included the location previous definition #define __stdc_format_macros 1 file included "__stdc_format_macros" redefined #define __stdc_format_macros file included location previous definition #define __stdc_format_macros 1 ninja: build stopped: subcommand failed.
wheel cmake -gninja -dbuild_python=true -dbuild_test=true -duse_cuda=true -duse_numpy=true cmake --build .
--target install --config release -j 37 traceback (most recent call last): file "setup.py", line 751, <module> build_deps() file "setup.py", line 310, build_deps cmake=cmake) file line 59, build_caffe2 cmake.build(my_env) file 334, self.run(build_args, my_env) 142, run check_call(command, cwd=self.build_dir, env=env) 186, check_call raise cmd) command '[ 'cmake ', '--build ', '.
', '--target ', 'install ', '--config ', 'release ', '-- ', '-j ', '37 '] ' returned non-zero exit status 1
phofcode output is phofcode one would expect the training mode not to change, since wrapping a model in dataparallel does not mean setting it in training mode.
steps to reproduce the behavior: phofurl
> warning: t* at::tensor::data() const [with t = float] is deprecated note: declared here t * data() const {
steps to reproduce the behavior: i ran the following code: 1. conda create detectron2 python=3.7 2. conda activate detectron2 3. conda install numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing 4. git clone --recursive phofurl 5. cd pytorch 6. export $(which conda))/../"} 7. python setup.py install this gave the following stdout (sorry for the wall of text!
phofcode the following code raises the following in the export: phofcode
steps to reproduce the behavior: 1. write a non-trivial cuda kernel using libtorch api 1. compile with `clang -x cuda ...`( phofurl
steps to reproduce the behavior: 1. change the worker process affinity in the `worker_init_fn` function.
1. call `torch.randperm` in the `__iter__` method of an iterabledataser.
1. now worker process affinity is back to original one.
the following code sample reproduce problem : phofcode
phofcode this will output: phofcode
convert the model with: phofcode run the ios-demo-app/pytorchdemo phofhyperlink with `resnet18_qint8.pt`.
here is the forked demo with coverted models: mirth/ios-demo-app phofhyperlink
steps to reproduce the behavior: 1. define a module with an empty buffer in the init function.
2. set the buffer to something valid (e.g., in `forward`).
3. call `state_dict()` 4. instantiated a second instance of the module 5. call `load_state_dict()` on second module
steps to reproduce the behavior: model = pretrained=true) typeerror: _resnext() got multiple values for argument 'pretrained'
steps to reproduce the behavior: 1. quantize a model follow the quantization tutorial.
(model fuse + prepare + calibrate + convert) 2. apply copy.deepcopy() function to the quantized model
simply install pytorch conda install pytorch torchvision cudatoolkit=10.1 -c pytorch
steps to reproduce the behavior: install pytorch with cuda 10.0 in conda
minimum failing code: phofcode run the code above in **python 2**.
the error message is phofcode
steps to reproduce the behavior: enable case 2 or case 4 and run the example below: phofcode errors reported by the torch.onnx exporter: case 2: phofcode cases 3 & 4: phofcode
using pytorch 1.3, running the following script: phofcode fails with phofcode
steps to reproduce the behavior: compile with `clang++` and `-stdlib=libc++`.
here 's is a sample code that reproduces the error: phofcode phofcode
run this minimal example phofcode outputs: phofcode
steps to reproduce the behavior: 1. colab phofhyperlink phofcode phofcode
steps to reproduce the behavior: 1. create a onecyclelr scheduler phofcode 2. plot the learning rate phofcode 3. change the `div_factor` and plot again (step 2).
export squad_dir=/path/to/squad python run_squad.py --model_type bert --model_name_or_path bert-base-cased --do_train --do_eval --do_lower_case --train_file --predict_file $squad_dir/dev-v1.1.json 5 --learning_rate 3e-5 --num_train_epochs 2.0 --max_seq_length 384 --doc_stride 128 --output_dir /tmp/debug_squad/ the smaller batch size the speed is more distinct.
steps to reproduce the behavior: 1. inferencing with efficientnet-b0 on pytorch 1.2, cuda 10.0.
2. inferencing with efficientnet-b0 on pytorch 1.3 cuda 10.1.
i got auc of my model improved or decrease in +/- 0.1 or so.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: the testing script is as following.
code samples: phofcode output phofcode
phofcode will result in phofcode
here is simple code snippet that demonstrates the issue: phofcode
here is some code to reproduce the problem, which will print the time for a forward and a backward pass on a batch of 32 images with depth 8 and image size 32x32 using 5x5 kernels with a padding of 2 pixels.
steps to reproduce the behavior: import torch m = torch.nn.linear(500, 10) torch.save(m, './test.pth ') userwarning: couldn 't retrieve source code for container of type linear.
it won 't be checked for correctness upon loading.
"type " + obj.__name__ + ".
it won 't be checked "
phofcode today it fails with `assertionerror: assert batch_sizes is none`.
cc @jerryzh168 @jianyuh @dzhulgakov @raghuramank10
steps to reproduce the behavior: 1.run the following source code to reproduce the behavior phofcode
steps to reproduce the behavior: 1. try printing: torch.eig(a), to see they're all positive 2. try torch.cholesky(a) and it'd be negative.
1. run the following script phofcode results in the error: phofcode
**steps to reproduce the behavior:** i have a simple libtorch code snippet that reproduces this issue.
in short all it does is run the same model (resnet50 model from the torchvision that was traced to produce a torchscript version of the same).
the code was run on a titian v with a batch size of 1.
1. create model in main thread 2. launch thread that runs model n times in loop, reporting runtime each time 3. launch n threads that each run once, reporting runtime each time phofcode
steps to reproduce the behavior: 1. create a `msnpu` device with `device = torch.device('msnpu') 2. boom 3 a = torch.zeros(1, device=device) 4 print(a) 5 get_device() runtimeerror: p internal assert failed at please report a bug to pytorch.
deviceguardimpl for msnpu is not available
delete the named tensor apis from the blacklist.
run `python see test failures.
steps to reproduce the behavior: 1. add a simple hubconf.py to your repository 1. create a tag or branch with a path separator in its name 1. use torch hub functionality with that tag or branch
steps to reproduce the behavior: > cd > > warning generated: phofcode phofcode cmake warning: manually-specified variables were not used by the project: numpy_include_dir python_include_dir
steps to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: 1. open pycharm 2. write `from torch.utils.data.dataset import iterabledataset` 3. error
steps to reproduce the behavior: 1. try to install python as instructed in phofurl **stable (1.3)** error: phofcode **preview (nightly)** error: phofcode
run this on mac: phofcode get the: phofcode run the ios-demo-app/helloworld phofhyperlink example in xcode and get: phofcode
run the test without setting the default dtype.
steps to reproduce the behavior: 1. i upgrade the lastest pytorch version using this command conda install pytorch torchvision cudatoolkit=10.1 -c pytorch 2. download the captum cifar 10 example code and modify the line to load network into gpu 3. run code and receive error.
steps to reproduce the behavior: 1. running this code phofcode
simple call something along the lines of this: you can use any model that expects a 4-dim input tensor
can run the following script on a multi-gpu machine which should replicate the issue.
it creates a large tensor on the cpu and scatters it to multiple gpus, then also creates large i have tested with both pytorch 1.1.0 and pytorch 1.2.0. phofcode output: note that when batch size (args.sz) = 128, the tensor to be scattered/gathered is 1gib.
| ngpus | batch size | scatter time (s) | gather time (s) ------------- |:-------------:| -----:|---:| 2 64 0.07 0.35 2 128 0.14 0.7 2 256 0.27 1.4 4 64 0.12 0.35 4 128 0.16 0.7 4 256 0.29 1.6
steps to reproduce the behavior: 1. apply patch per #27583 1. compile per instructions 1.
`import torch` relevant portion of valrgind output: phofcode
steps to reproduce the behavior: phofcode output: phofcode
repro script: phofcode exception (cpu): phofcode exception (cuda): phofcode
model is downloaded from onnx model zoo: tiny_yolov2 phofhyperlink steps to reproduce the behavior: 1. install pytorch and onnx 2. run the model phofcode the output is (1, 16, 414, 414).
however, according to the correct logic, the output shape should be (1, 16, 416, 416) for this conv layer, as layer 's attribute ** auto_pad ** is set to "same_upper".
ref: onnx op definition for conv phofhyperlink
consider the following function: phofcode executing it one time gives the expected out of memory error after some iterations: phofcode executing a second time gives a oom error immediately after the first iteration, which means that the memory consumed by scoped variables in x is still occupied (which is a little weird): phofcode calling `gc.collect()` now sometimes (!!)
leads to freeing memory and sometimes it doesn't.
with this code: phofcode i got the warnining: > userwarning: seems like `optimizer.step()` has been overridden after learning rate scheduler initialization.
please, make sure to call `optimizer.step()` before `lr_scheduler.step()`.
see more details at phofurl " phofurl userwarning) if i do not use `amp.initialize`, there will not be this warning message.
to make a fair comparison of the effect, i changed this line phofhyperlink from `if (is_large)` to `if (zero_infinity)` to make it simple to try setting `is_large` on & off without the hassle of adding a new argument, given the argument `zero_infinity` has negligible memory / time effects on other parts of the code then, i used following snippet phofcode which produced following output.
note that for each input / target length, we try both without (first line) and with (second line) large batch handling, then both speed-up and increase on memory consumption is printed.
this is tried for vocabularies of sizes phofcode
phofcode d = double() torch.jit.script(d) cc @su
steps to reproduce the behavior: 1. clone the stylegan repository from github phofhyperlink 2. add in the same folder the jupyter notebook phofhyperlink i am using to export model as .onnx 3. mkdir results && mkdir results/trained_agents && cd mkdir resesults/trained_agents 4. download phofhyperlink trained agent and place it in this folder 4. run notebook this is last command i gave: phofcode and here is error: phofcode
steps to reproduce the behavior: 1. running the example code below: phofcode at the last line, a `value error` will raise: traceback (most recent call last): file "<input>", line 1, in <module> file line 331, in update "; 2 is required") valueerror: moduledict update sequence element #0 has length 5; 2 is required
steps to reproduce the behavior: phofcode intel mkl allows 4 threads but cannot make torch go multithreaded.
environment variables are set as phofcode
steps to reproduce the behavior: 1. compile 1.1 or later on os x with gpu and maga support.
1. launch python, `import torch` phofcode
phofcode > runtimeerror: variable 'input ' previously has type tensor but is now being assigned to a value of type dict[str, tensor] : at <string>:4:16 def forward(self, input): for m in self: input = m(input) ~~~~~ <--- here return input
the 7 steps are described as comments: phofcode
steps to reproduce the behavior: phofcode the model can run if i change the batch size from 128 to 1. when i set the batch size to 4, the model can run a single iteration/batch, but gradient explodes afterwards.
the real data is scaled and normalized to have approximately zero-mean and unit variance, and ranges from approximately -2 10.
i 've done my tests with: - titan xp (12gb of vram) - cuda 10.1 - driver version 418.74. steps to reproduce the behavior: phofcode raises: phofcode
steps to reproduce the behavior: 1. build pytorch with use_nccl enabled 2. execute the following commands in python on a multi-gpu machine: >>> import torch >>> import os >>> >>> a = torch.tensor(10).cuda(0) b = torch.zeros(10).cuda(1)
run the following code snippet.
`import torch` `import torch.nn as nn` = true` `device = torch.device("cuda:0")` `net = out_channels=512, kernel_size=5, dilation=1, padding=2).to(device)` `x = device=device)` `x net(x)` produces error: runtimeerror: cudnn error:
steps to reproduce the behavior: 1. compile pytorch on 32 bit raspbian buster (needs ldflags="-latomic").
here is a pseudo in my mind.
steps to reproduce the behavior: ran the following commands to build from source, following the instructions in the readme: phofcode and here 's whole error message: building wheel -- building version cmake --build .
--target install --config release -- -j 12 [1/114] building cxx object failed: -dat_parallel_openmp=1 -dcaffe2_build_main_lib -dhave_mmap=1 -dhave_shm_open=1 -dhave_shm_unlink=1 -dideep_use_mkl -dnnp_convolution_only=0 -dnnp_inference_only=0 -donnx_ml=1 -dth_blas_mkl -d_file_offset_bits=64 -d_thp_core -dtorch_exports -iaten/src -i../aten/src -i.
at::_addmm(self, mat1, mat2, beta, alpha); ~~~~~~~~~ addmm note: 'addmm ' declared here static inline tensor addmm(const tensor & self, const tensor & const tensor & mat2, scalar beta, scalar alpha) { in file included from '_addmm ' 'at '; did you mean 'addmm '?
at::_addmm(self, beta); ~~~~~~~~~ addmm note: 'addmm ' declared here static inline addmm(const & self, const const scalar beta, scalar alpha) { in file included from '_addmm ' 'at '; did you mean 'addmm '?
see #26789. or once that pr goes in just re-enable this can also be reproduced by calling magma_dpotrf_batched directly with a tensor allocated by cudamalloc.
run under cuda-memcheck to report all illegal memory accesses, including "silent" ones.
you can run this code and test different situations phofcode
steps to reproduce the behavior: follow the build instructions per the github page, followed by cc=clang cxx=clang++ python setup.py build` the first errors are: phofcode
steps to reproduce the behavior: 1. run the following code phofcode
**steps to reproduce the behavior:** phofcode cc @ezyang @gchanan @zou3519 @su
steps to reproduce the behavior: 1. compile libtorch from pytorch source master and tag v1.2.0.
2. integrate libtorch to ffmpeg and compile ffmpeg debug version(not release version) 3. detect memory leak and that happend!
run the following snippet: phofcode it yields a value between 3-11, which is the number of "1" drawn on 100 million drawings.
steps to reproduce the behavior: 1. run `python reproduction_script.py`.
1. check that memory is allocated on the second gpu.
(screenshot 1) 1. uncomment the fourth line `import 1. run `python reproduction_script.py` again.
check that memory is allocated on the * first * gpu.
(screenshot 2) below is `reproduction_script.py` code: phofcode
steps to reproduce the behavior: 1. clone repo: git clone --recursive phofurl 2. run: phofcode 3: relevant error part: phofcode i believe the error is due to the commit phofurl got updated to reflect the api change but not
steps to reproduce the behavior: 1. dummy_input_2 = torch.tensor([[1,100]]) dummy_input_3 = torch.tensor([[1,100]]) dummy_output_1, dummy_output_2 = trained_model( input_ids = dummy_input_2, dummy_output_1.shape torch.size([1, 2, 50266]) dummy_output_2[0].shape torch.size([2, 1, 12, 2, 64]) 2.
# export to onnx format (input_ids, token_type_ids) , 'sar02.onnx ' , verbose true, input_names=[ 'input_ids ', 'token_type_ids '], 'output2 ']) 3. print graph in human readable format: import onnx # load the onnx model model # check that the ir is well formed # print a human readable representation of the graph phofcode
steps to reproduce the behavior: build from source with build_test=off, for example this script phofhyperlink .
the following code causes a runtimeerror.
the error can be avoided by **removing the max_norm** feature or by **swapping line a and line b** in the code.
install pybind11 v2.3.0 system wide (distro used, arch linux with the following build script phofhyperlink the build will fail with sleef visibility issue: phofcode rebuilding the same commit without systemwide pybind11 works
steps to reproduce the behavior: 1. git clone etc.
2. scripts/build_android.sh from here it should already be clear that `aten/functions.h` does not exist but is required.
to actually get an error: 3. try and build app in androidstudio with `torch/script.h` and relevant libraries linked.
1. enable cudnn logging with `export cudnn_loginfo_dbg=1; export 1. define and call a custom function that call `f.conv_transpose2d` 1. check the logs: they are empty example: phofcode
steps to reproduce the behavior: 1. in tcpstore.cpp's constructor, replace the connect call with this line: `storesocket_ = 1);` to make `connect()` keep on erroring.
2. build the tcpstoretest binary.
3. run the tcpstore test, observe that we don't time out, even though default timeout is 300 seconds
steps to reproduce the behavior: 1. install a python 3.6 debug build 2. install pytorch from source using master 3. run c10d test with `python test_c10d.py` cc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satgera @rohan-varma @gqche
use scatter_add along with a dynamic tensor input phofcode
command line steps to reproduce the behavior on rhel 6.4: 1. conda create --name pytorch 2. conda install pytorch torchvision cudatoolkit=10.0 -c pytorch 3. conda activate pytorch 4. python 5. import cc @ezyan
steps to reproduce the behavior: i have a model where i manipulate some data and place it in a packedsequence.
here is the snippet i use it for: phofcode it works great during training and inference.
however, when i try to export the model to onnx get the following error: `onnx export failed: cannot export individual pack_padded_sequence or pad_packed_sequence; these operations must occur in pairs.`
steps to reproduce the behavior: 1.load model: phofcode 2.forward: phofcode 3.treat output: phofcode
steps to reproduce the behavior: 1. get pytorch 1.0.1 from the official git repository phofcode 2. set up environment variables for compiling pytorch phofcode 3. compile pytorch phofcode full error message phofcode 3.1. if i compile pytorch like this, error message was changed full error message
python import numpy as np import torch import sys import torch.multiprocessing as mp if __name__ == '__main__ ': print("python version=", sys.version) # python3.4.4 print("torch version=", torch.__version__) # torch 1.2.0 image_queue = mp.queue(50)
phofcode > traceback (most recent call last): file "test/test_jit.py", line 14745, in test_named_tuple_py2 file line 59, in get_signature return file line 109, in parse_type_line raise runtimeerror("failed to parse the return type of a type annotation: {}".format(str(e))) runtimeerror: failed to parse the return type of a type annotation: name '_googlenetoutputs ' is not defined cc @su
steps to reproduce the behavior: 1. import torch, then other library -> segfault 2. import other library, then torch -> free(): invalid pointer
reproduced in #24036 cc @pietern @mrshenli @pritamdamania87 @zhaojuanmao @satger
steps to reproduce the behavior: 1.run my code in windows and linux 2.compare this time
phofcode which outputs: `tensor([505., 505., 505., 505., 505.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. build pytorch with -march=native on an intel sandybridge processor 1. run the test case below.
this test case is a simplification of phofurl code of: phofcode produces error: phofcode
`git describe --tags` results in:
phofcode capture phofimage div's constant should be `float32`
i have a simple example to illustrate.
were in the probability domain, or rather, the logprob domain, so this is the straightforward approximation of probabilities using a softmax on top of a linear layer.
phofcode as i said, i have the sum of gradients, or rather difference really.
below ill show gradients of linear layers weights after backpropagating first difference, then summands themselves separately.
phofcode this prints, in order, annotated phofcode
steps to reproduce the behavior: 1. training a fairly large network while almost using all gpu memory (32gb on a tesla v100).
1. the dataloader is rendering using opengl and then returning cpu tensors.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. install pikepdf phofhyperlink (i used `pip`) 2. install `pytorch-cpu` (i used `conda`) 3. run phofcode or phofcode
steps to reproduce the behavior: 1. cmake -duse_fbgemm=off .. 2. compile error
step to reproduce the behavior: 1. run the script on ppc64le platform (as one example).
steps to reproduce the behavior: 1. build pytorch from source with `use_tbb=1` and `aten_threading=tbb` 2. repro script phofcode 3 error: phofcode
get an error like > error: type 'tensor(bool) ' of input parameter (253) of operator (gather) in node () is invali
here 's the smallest example i could manage: phofcode
phofcode gives phofcode funnily, using `min` works without a problem.
import torch import torch.nn.modules.loss as l class def __init__(self, reduction=true): self).__init__() self.reduction = reduction def forward(self, inp, target): input_target = inp.gather(1, target.view(-1, 1)) input_max, _ = inp.max(dim=1, keepdim=true) output_exp = torch.exp(inp - input_max) output_softmax_sum output_exp.sum(dim=1) output -input_target + 1) + input_max if self.reduction: output output.mean() return output torch_ce custom_ce batch_size 128 n_class 90000 logits targets torch.randint(n_class, (batch_size,)) print((torch_ce(logits, targets).view(-1) -
steps to reproduce the behavior: 1.
`git clone --recursive phofurl && cd pytorch` 2.
`git fetch --tags && git checkout v1.2.0` 3.
`docker build -t pytorch_src -f .` phofcode
steps to reproduce the behavior: 1. install torch 1.2.0 from pypi for python 2.7 2. run the following snippet with lang=en_us.utf-8 phofcode
steps to reproduce the behavior: 1. please run the script below to reproduce.
you will need to add full path to data_folder variable for mnist db import os, sys import shutil from caffe2.python import core, model_helper, net_drawer, workspace, visualize, brew from import image_input # this section preps your image and test set in a lmdb database def downloadresource(url, path): ' ' 'downloads resources from s3 by url and unzips them the provided path ' ' ' requests, zipfile, stringio print("downloading... {} {}".format(url, path)) try: r = requests.get(url, stream=true) except exception as ex: print("failed download dataset.
please download it manually from {}".format(url)) print("unzip it and place the two database folders here: {}".format(path)) raise ex z = z.extractall(path) print("completed download and extraction.")
# if you would like see some really detailed initializations, # you can change --caffe2_log_level=0 --caffe2_log_level=-1 print("necessities imported!")
data_folder = "./" root_folder = if not os.makedirs(data_folder) print("your data folder was not found!!
this was generated: {}".format(data_folder)) # look for existing database: lmdb if print("lmdb train db found!")
else: db_missing true if print("lmdb test db found!")
else: db_missing true if print("looks like you ran this before, so we need cleanup those old files...") os.makedirs(root_folder) print("training data folder:" + data_folder) print("workspace root folder:" + root_folder) def addinput(model, batch_size, db, load data usetensorproto: data_uint8, label ["data_uint8", "label"], db_type=db_type) else: data_uint8, label db=db, db_type=db_type, num_decode_threads=1) cast data float model.cast(data_uint8, "data", to=core.datatype.float) scale [0,255] down [0,1] model.scale(data, data, scale=float(1./256)) don 't need gradient for backward pass model.stopgradient(data, data) return data, label def main(argv): arg_scope {"order": "nchw"}
just type torch.tensor(540) / steps to reproduce the behavior: 1. import torch 2. torch.tensor(540) /
run these benchmark code with python 3 or run it in colab: phofurl
steps to reproduce the behavior: phofcode or phofcode
i can only use containers on my machine.
nvidia ngc container for pytorch doesnt have nsight installed.
so, i used tensorflow ngc container (19.06_py3), installed pytorch inside the container (`pip3 install torch torchvision`) and took a snapshot of that container using `docker commit <container id> <image name>`
uncomment to see the bug phofcode
steps to reproduce the behavior: 1.mkdir build 2.ccmake ../;( configure and generate) error with medium.txt phofhyperlink error without medium.txt phofhyperlink 3.make
steps to reproduce the behavior: vs2017 + intel v19 compilers + libtorch phofcode
steps to reproduce the behavior: simply run the following demo code in console: phofcode the stack trace looks like this: phofcode
steps to reproduce the behavior: model1 = model2 = model1.pt same as model2.pt
steps to reproduce the behavior: 1. compare: phofurl phofurl
steps to reproduce the behavior: 1. use in an expression in a forward() function 1. tag forward() with `@torch.jit.script` 1. run model class @torch.jit.script ... in script fn = ast, _rcb, get_default_args(obj)) runtimeerror: unknown builtin op: aten::finfo.
here are some suggestions: aten::find the original call is: bar = torch.clamp(bar, ~~~~~~~~~~~ <--- here
steps to reproduce the behavior: 1. use example from docs: help(torch.rfft) 2. test torch.rfft on pytorch 1.0 and 1.2, return same segfaults info 3. test torch.fft with cpu and gpu, everything is fine >>> x = torch.randn(5, 5) >>> torch.size([5, 3, 2]) >>> torch.rfft(x,2).shape segmentation fault (core dumped)
steps to reproduce the behavior: include this in a jit script phofcode the indexing results in exception
steps to reproduce the behavior: 1. create virtual environment: `python -m venv xxx` and activate it 1. install pytorch as prescribed: `pip install phofurl 1. install torchvision as prescribed: `pip install torchvision` 1. start python interactive console: `python`, followed by command `import torchvision`.
the result is below: phofcode
steps to reproduce the behavior: 1. we can reuse the test case at phofurl and only change: phofcode to phofcode 2. it would be better if we can test with more complex cases.
for example: phofcode or phofcode
- `conda create -n torch-source python=3.6` - `source activate torch-source` - `conda install numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing -y` then this build script of mine (again following the readme): phofcode phofcode (truncated) stacktrace: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: invoke operator() on torch::nn::sequential
steps to reproduce the behavior: 1. pytorch inference file 2. change the output to onnx.export
inside a torch.jit.script phofcode phofcode
inside a `torch.jit.script` phofcode phofcode i printed `new_op_outputs` and it is `()` it is empty
steps to reproduce the behavior: run this script: phofcode phofcode even if i change it to phofcode i get the same assertion about `isint`
add something like this to `test_c10d.py` phofcode run ` python test/run_test.py -v -pt -i c10d` and get passed [ 30%]` now run ` python test/run_test.py -v -i c10d`and get as expected: phofcode
phofcode > > none > (10, 12)
steps to reproduce the behavior: run this code to reproduce in a c++ console: tauto t1 = torch::rand({ 2, 2 }); tauto t2 = torch::rand({ 2, 2 }); tt1 = t1.to(torch::kcuda); tt2 = t2.to(torch::kcuda); tauto t3 torch::cat({ t1, t2 }); tcout << t3; you will observe a c++ memory exception in `static inline tensor cat(tensorlist tensors, int64_t dim)` around globalatendispatch.
phofcode steps to reproduce the behavior: 1. run the script above witch gloo at most time, i will get a **connection refused** error phofcode but sometimes, i can get some result at first(but not correct!
), then the code **just stuck**, and i have to ctrl-c the really strange things is that rank 1 and 3 should in different groups, but they act like in the same(the all-reduce result is same).
run the model separately in a thread per device/config.
steps to reproduce the behavior: 1. on macos, install pytorch using `sudo pip3 install torch` or `pip3 install torch --user` 2. open a prompt and run: phofcode you 'll get `runtimeerror: fft: aten not compiled with mkl support`.
phofcode run the above script.
steps to reproduce the behavior: phofcode results in > runtimeerror: smt_pred() expected a value of type 'tuple[tensor]' for argument 'confs' but instead found type 'tuple'.
but if i change `tuple` to `list` and pass `list(confs)` instead, it works.
so this is an issue specific to `tuple` in python2.
libtorch1.2, cuda10,win10, vs2015, win64 steps to reproduce the behavior: please refer to the test code: phofurl open gpu-z to inspect the gpu memory...
below we have two processes.
the learner process passes an lstm's state dict to the actor process via a queue.
phofcode when run, the actor and learner will each loop a few times an then the learner process will hang.
the output will be something like phofcode
steps to reproduce the behavior: the attached project feeds randomly generated data into the jit.
the sequence length is different each time.
1. use a linux machine or edit the memory_use code to work with your os 1. unzip the package (torch v1.2.0 must be accessible to cmake) 1. compile and run main.cpp through cmake 1. observe how memory usage increases rapidly with each iteration 0: 0.75gb 1: 1gb 2: 1.2gb 3: 1.6gb
steps to reproduce the behavior: 1. a = torch.randn(100,10) 2. c = torch.matmul(a, a.permute(1,0)) 3. eigvals, _ = torch.symeig(c)
minimal example: phofcode in my case, the output is: phofcode note that the incorrect entries were not always zero in all my tests.
steps to reproduce the behavior: 1. use any dumped tensor from phofurl 2. load and save data in uint8, then try to load it back phofcode 3. traceback phofcode
steps to reproduce the behavior: phofcode output phofcode
steps to reproduce the behavior: 1. phofurl
phofcode leads to phofcode same when calling directlt
steps to reproduce the behavior: 1. pip install torch==1.2.0 (on linux)
on ubuntu, install the following packages: - python3 - python3-venv create a virtual environment by running: - `python3 -m venv .venv` - `.venv/bin/pip install torch tensorboard` phofcode running `.venv/bin/pip install future` fixes the problem.
i have done everything what they say in the tutorial.
the result is the following output of cmakererror: phofcode
steps to reproduce the behavior: 1. build simple cnn using ( at this point model.forward (sometensor) works fine).
2. save the model using `torch::save(network, 3. load the model using : ` model = read_model(model_path);` (tried also `model = ) 4. run inference with inputs; torch::tensor output =
steps to reproduce the behavior: 1. use a simple gan model with sn in both the discriminator and generator.
2. train this model, save images while training.
3. reset weights / apply init on the model.
4. train this model again, save images while training.
steps to reproduce the behavior: 1. unpack the attached archive, `ctc-bug.zip` 1.
phofcode steps to reproduce the behavior: 1. when testing on cpu by running phofcode the gradients w.r.t.
to the input `x` can be correctly calculated, and the function prints: phofcode 2. when testing same function on a gpu by running phofcode error message is: 3. when increasing tensor size and running error message is:
steps to reproduce the behavior: here is a minimal working example: phofcode .
1. run `main.py` from the mnist example on master pytorch/examples repository.
phofcode > traceback (most recent call last): file "test/test_jit.py", line 14478, in test_ignore_class t = file line 1159, in script return file line 167, in recursive_script return overload_stubs + stubs) file line 89, in copy_to_script_module stubs) 1367, defs, rcbs, defaults) 73, get_num_params raise runtimeerror("cannot instantiate class object ({}) inside runtimeerror: cannot instantiate class object (myscriptclass) inside jit.script
`git clone phofurl cudasync` 2.
`omp_num_threads=1 python cudasync.py` (produces trace file)
steps to reproduce the behavior: 1.
`git clone phofurl embedding` 2.
`python simpleembed.py` (requires pytorch >= 1.2) perfetto trace: phofurl (use wasd navigation) code: phofurl
steps to reproduce the behavior: phofcode
i experienced this error with this simple example: phofcode if e.g.
n = 150, the method works fine and i get a u matrix with 4x4 elements.
if i don't transpose x (e.g.
x.size() = n])) i get a u matrix with 4]), which is also inconsistent (it should be x
as my model is big, i just change to some simple example code to reproduce the problem.
model rep backend.prepare(model, device="cpu") x np.random.random((1, 112, 112)).astype(np.float32) np.random.random((1, 224, 224)).astype(np.float32) res rep.run([x, y]) print(res) ps: surprisingly, when run this simple example with onnxruntime, i do not get the error which occurs when i run my big model.
steps to reproduce the behavior: 1. install pytorch 1.2 1. install nvidia nsight systems 2019.3 1. run `nsys profile -snone python -c 'import torch; torch.rand(100, pin_memory=true) '`.
phofcode `torch.rand(100, pin_memory=true)` failed with this error: phofcode
try to compile this: phofcode if windows.h is included first, there are many errors: phofurl also here: phofurl unicode is already defined.
adding `#undef unicode` prior to this enum fixes that specific issue.
they work fine in pytorch 1.1.0. import torch b0 = torch.tensor(5.0, requires_grad = true) a = torch.tensor([1,0,0]) b = torch.zeros(3, requires_grad true) c torch.ones(3, requires_grad true) bb b+1 bb[a!=0] torch.min(bb[a!=0], c[a!=0]) d torch.sum(bb) d.backward()
on worker 0: phofcode on worker 1: phofcode
steps to reproduce the behavior: 1. try to install the latest stable cpu variant without knowing the exact version number
the following code: phofcode fails with: phofcode
steps to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: 1. run the above python script.
1. compile + run the above c++ program.
the exception text is: phofcode and is thrown at (the end of an inline `copy_` method).
problem persists with latest master builds as well.
i used linux to dump the module since installing pytorch from anaconda currently results in a pytorch that will not import: phofcode
steps to reproduce the behavior: 1. following code snippet reproduces the error (slightly modified from phofurl phofcode
steps to reproduce the behavior: 1. run the following code and have the pt model saved phofcode 2. load the model using libtorch phofcode
steps to reproduce the behavior: 1.
`git git checkout tags/v1.2.0 -b build-v1.2.0` 3.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1.build a `nn.module` on cpu 1.trace and save the `scriptmodule` in a file 1.load the file with `map_location=gpu` phofcode
steps to reproduce the behavior: 1. go to doc phofhyperlink and check for code example 1. copy/paste into fresh install venv woth pytorch 1.2 896 raise attributeerror("expected a dictionary of (method_name, input) pairs") 897 898 module = make_module(mod, _module_class, _compilation_unit) attributeerror: expected a dictionary of (method_name, input) pairs
steps to reproduce the behavior: 1.
phofcode steps to reproduce the behavior: 1. python to run 2. the diff 1 is zero , while diff2 is not
phofcode gives: > runtimeerror: attempting to re-assign constant 'downsample' in scriptmodule when i try to add it to constant
steps to reproduce the behavior: i 'm providing the trimmed version of `poseresnet` (`posenet.py`): phofcode and the experiment file itself: phofcode
steps to reproduce the behavior: phofcode
install pytorch 1.2.0 and run it on a multi-gpu machine: phofcode doing anything with the solution will crash.
resulting in the following error: phofcode additionally, it seems that the devices of the inputs have also been corrupted and using them crashes as well.
everything would be ok since they don 't seem lead anywhere but there are a lot of new generated issues when trying export this onnx graph tools like tensorrt, where those gathers fail because dimensions.
my fix for now was use statically defined dimensions, but i 'm putting issue here so if anyone comes through something similar there is some reference.
also, what would be best way obtain sizes during training then?
steps to reproduce the behavior: 1. download libtorch cpu version windows 2. cmake --build .
steps to reproduce the behavior: 1.
steps to reproduce the behavior: phofcode
phofcode this code throws an error below: phofcode the equivalent code below works as expected phofcode `
steps to reproduce the behavior: module scripted from python as in tutoriel: phofcode loaded and ran in c++ in separate thread: phofcode memoryincrease phofimage
this code fails: phofcode error: `runtimeerror: no forward method was defined on foo()` same happens if another method refers to a method being defined phofcode
steps to reproduce the behavior: 1. create nupy float tensor and pack using to_dlpack .
2. create and initialize torch.nn.embedding tensor .
3. unpack nupy float tensor and set it to the pytorch weight data.
code all the code is in this google colab notebook.
phofurl for convenience, the important parts are copied below.
phofcode will show float32/float64 values phofcode will show float32/float64 values phofcode will show float16 numbers phofcode will show float16 numbers if i pack and unpack back cupy tensor, there is no change will display float64/float32 for convenience, here is a google colab notebook with all this code phofurl
i tried to install pytorch following the instructions on the website: pip install torch==1.2.0+cpu torchvision==0.4.0+cpu -f phofurl and got the error: error: could not find a version that satisfies the requirement torch==1.2.0+cpu (from versions: 0.1.2, 0.1.2.post1, 0.1.2.post2) error: no matching distribution found for torch==1.2.0+cpu i tried to use linux wheel directly: pip install phofurl and got: error: is not a supported wheel on this platform.
i have also tried installing other versions of pytorch with same luck.
i have repeated same steps changing pytorch version to 1.1.0 and 1.0.1 (and updating wheels to corresponding name in phofurl
steps to reproduce the behavior: run the following script on pytorch master on a machine with 2 or more gpus: phofcode
i'm currently using the data science vm provided by azure to run the python.
i used clean new env in anaconda for installing pytorch and all library dependencies (and also tb-nightly as instructed in here phofhyperlink ).
i tried to inspect if my code could use the tensorboard using simple line of codes like phofcode but i got this warning, and then critical message here image phofimage
steps to reproduce the behavior: import onnx import import os import glob numpy as np from onnx numpy_helper #model paths model = test_data_dir = 'test_data_set_0 ' #prepare the backend rep =
steps to reproduce the behavior: create a file test.py with following contents: phofcode run it with following command: `python -u -m torch.distributed.launch --nproc_per_node 2 test.py` this has been tested on 2 gpus.
steps to reproduce the behavior: `2 in is true
conda create --name test_env python=3.6 conda activate test_env conda install pytorch=1.1 cuda90 -c pytorch conda list in python when you run torch.version.cuda it also lists cuda 10. the following new packages will be installed: blas: 1.0-mkl cffi: cuda90: pytorch cudatoolkit: intel-openmp: libgfortran-ng: mkl: mkl_fft: mkl_random: ninja: numpy: numpy-base: pycparser: pytorch: pytorch proceed ([y]/n)?
>>> torch.eye(5, dtype=torch.bool, traceback (most recent call last): file "<stdin>", line 1, in <module> runtimeerror: "eye" not implemented for 'bool ' >>> torch.eye(5, dtype=torch.bool, tensor([[ true, false, false, false, false], [false, true, false, false], [false, true, false], [false, true, false], [false, true]], device= 'cuda:0 ')
steps to reproduce the behavior: 1. install pytorch 1.0.2 2. run the following code on multiple p40 gpus import os
here is an example script: phofcode
steps to reproduce the behavior: phofcode phofcode
phofcode phofcode it also fails if cublasgemmex called via pytorch extension, with stacktrace: phofcode it all works as expected for fp32, it also works for fp16 * if * matrix is slightly smaller: phofcode
steps to reproduce the behavior: 1. generate the following random matrices phofcode 2. then `(a @ must be the same as @ b`.
but it is not the case!
minimal example: phofcode returns `false`
steps to reproduce the behavior: phofcode for this code sample, train and save model to disk.
reload the model, set `model.eval()` and run the same example 2 times through it and you'll get 2 different outputs.
is there anything in particular about the layers used here?
i know that there is some dropout used, but `model.eval()` should take care of it.
also, i made model run on cpu only and got same bug.
also, i set = true` got same bug
steps to reproduce the behavior: 1. running `python -m torch.distributed.launch --nproc_per_node=2 minimal_buggy.py` works 1. running `python -m torch.distributed.launch --nproc_per_node=2 minimal_buggy.py --parallel` breaks the code for `minimal_buggy.py` is here: phofcode
codes to reproduce the behavior: phofcode phofcode
criteria to reproduce the behavior: - must have >=3 workers.
- at least one worker has sent out async call.
- the user work is wrapped by init_rpc() and join_rpc(), so when calling join, there is an un-responded future.
it has a small chance to hit this deadlock.
this code snippet demonstrates the unexpected behavior: phofcode however, when `loss = a*b` is changed to a purely unary op `loss = a.sin()`, it works as expected: phofcode
steps to reproduce the behavior: 1. a peer sends out an async rpc without waiting for the response.
phofcode running the script above, i would expect to obtain the same output for the two print statements, but i do not.
instead i obtain `(none,)` for the first print and `(tensor([1., 0.
], dtype=torch.float32),)` for second print.
steps to reproduce the behavior: 1.
1. i use pytorch stable 1.1.0 on win10 2. steps to reproduce the behavior: phofcode 3. error message phofcode
steps to reproduce the behavior: 1.
i made a comparison script to compare the two methods, which i 've included below.
script</summary> <p> phofcode </p> </details> the output i get when running this is: phofcode since the average relative difference between the methods over the runs is low, it doesn 't seem like any additional calculations that would improve accuracy are cause of loss of speed.
steps to reproduce the behavior: phofcode 1414us for to() 1523us for to() ... modified as a workaround: phofcode 0us for to() 0us for to() ...
to reproduce run the following code and read the printouts in the console.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. download the file at phofurl 1. run `pip install gym tensorboardx` 1. run `python debugppo.py` in the following file, i have been working on a copy of ppo (proximal policy gradient) algorithm.
for step in global_step += 1 obs[step] next_obs.copy() todo: put action logic here logits pg.forward([obs[step]]) values[step] vf.forward([obs[step]]) probs action probs.sample() actions[step] action.tolist()[0] neglogprobs[step] -probs.log_prob(action) entropys[step] probs.entropy() try not to modify: execute game and log data.
next_obs, rewards[step], dones[step], _ env.step(actions[step]) next_obs np.array(next_obs) if dones[step]: break todo: training.
calculate discounted rewards, or namely, returns returns np.zeros_like(rewards) for t in returns[t] rewards[t] + args.gamma * returns[t+1] * (1-dones[t]) advantages are returns - baseline, value estimates our case advantages returns - values.detach().numpy() neglogprobs neglogprobs.detach() non_empty_idx np.argmax(dones) + 1 _ logits
feed a string instead of a float for the weight_decay parameter of an optimizer (i tried adam, and adamax).
steps to reproduce the behavior: ensure `tqdm` is not installed in your environment, verify that `python -c 'import tqdm '` **raises an exception.
** phofcode ( repo here phofhyperlink ) this errors with phofcode
steps to reproduce the behavior: phofcode output on my machine: phofcode
run the code below, and it does these things: 1. fix random seeds 2. generate fake embedding weights and samples 3. initialize one model, train it, save it on disk 4. three different ways of doing inference, and the first two asserts will fail phofcode
steps to reproduce the behavior: 1. create 2 different summarywritter with the same log_dir phofcode 2. write something with the same name and close : phofcode 3. open tensorboard and see the two file readed as one and graph bug (line across graph in this example)
i have same issue if i spinup an linux vm, it looks like double free:
'if you are running on a cpu-only machine, ' 'please use torch.load with ' 'to map your storages to the cpu. ')
device >= raise to deserialize object on cuda device '{} but is {}.
please use 'torch.load with map_location to map your storages 'to an existing device.
'.format( device, return obj.cuda(device) register_package(10, _cpu_tag, _cpu_deserialize) register_package(20, _cuda_tag, _cuda_deserialize) location_tag(storage): for _, tagger, _ in _package_registry: location tagger(storage) location: location raise runtimeerror("don \'t know how determine data location of " + torch.typename(storage)) location): for _, _, fn in _package_registry: result fn(storage, location) result is not none: result raise runtimeerror("don \'t know how restore data of " + torch.typename(storage) + " (tagged with " ")") getattr(torch, storage_type.__name__) storage_type type(storage) module getattr(module, 'tensor ')) _with_file_like(f, mode, body): """ executes a body function with a file object for f, opening it in 'mode ' it string filename. """
new_fd false isinstance(f, str) or (sys.version_info[0] 2 and isinstance(f, unicode)) or (sys.version_info[0] 3 and isinstance(f, pathlib.path)): new_fd true f open(f, mode) try: body(f) finally: new_fd: f.close() _is_compressed_file(f): compress_modules [ 'gzip '] try: f.__module__ in compress_modules except attributeerror: false """ checks f file that should be read directly.
it should be read directly it backed by real file (has fileno) and not compressed file (e.g.
gzip) """ _is_compressed_file(f): false try: f.fileno() >= 0 except io.unsupportedoperation: false except attributeerror: _check_seekable(f): raise_err_msg(patterns, e): for p patterns: p str(e): msg (str(e) ".
you can only torch.load from that seekable."
please pre-load the data into buffer like io.bytesio and" try load it instead.")
type(e)(msg) e try: f.seek(f.tell()) true except attributeerror) as e: raise_err_msg(["seek", "tell"], e) save(obj, f, pickle_module=pickle, """saves an object disk file.
see also: args: obj: saved f: file-like (has implement write and flush) or string containing name pickle_module: module used pickling metadata objects pickle_protocol: can be specified override the default protocol .. warning:: if you are using python 2, torch.save does not support stringio.stringio as valid file-like object.
this because write method should number of bytes written; stringio.write() does not do this.
please use something like io.bytesio instead.
example: >>> # save >>> x torch.tensor([0, 1, 2, 3, 4]) >>> torch.save(x, 'tensor.pt ') >>> # save io.bytesio buffer buffer io.bytesio() torch.save(x, buffer) _with_file_like(f, "wb", lambda f: _save(obj, f, pickle_module, pickle_protocol)) _save(obj, f, pickle_module, pickle_protocol): sys.version_info[0] 2: stringio isinstance(f, stringio.stringio): msg ( 'torch.save received unsupported stringio.stringio object, whose 'write method does number of bytes written.
'please use something like io.bytesio torch.save instead. ')
runtimeerror(msg) torch.nn nn {} serialized_storages {} persistent_id(obj): # fixme: docs say that persistent_id should only string # but torch store returns tuples.
this works only binary protocol see phofurl phofurl isinstance(obj, type) issubclass(obj, nn.module): obj none true source_file source none source_file source inspect.getsource(obj) exception: saving source optional, so we can ignore any errors retrieve source code container "type obj.__name__ ".
it won 't be checked "for correctness upon loading.")
( 'module ', obj, source_file, source) elif torch.is_storage(obj): storage_type offset always 0, but we keep backwards compatibility old serialization format (which supported storage views) offset 0 obj_key str(obj._cdata) location_tag(obj) obj is_view obj._cdata != obj._cdata is_view: view_metadata (str(obj._cdata), offset, obj.size()) else: view_metadata none ( 'storage ', storage_type, obj_key, location, obj.size(), view_metadata) none sys_info dict( 'little ', type_sizes=dict( short=short_size, int=int_size, long=long_size, ), ) pickler pickle_module.pickler(f, pickler.persistent_id persistent_id pickler.dump(obj) serialized_storage_keys f.flush() key serialized_storage_keys: load(f, map_location=none, pickle_module=pickle): """loads an saved :func:`torch.save` file.
:meth:`torch.load` uses python 's unpickling facilities treats storages, which underlie tensors, specially.
they are first deserialized on cpu are then moved they were saved from.
because run time system doesn 't have certain devices), an exception raised.
however, storages can dynamically remapped alternative set devices using `map_location` argument.
if `map_location` callable, will called once each serialized storage two arguments: storage location.
the storage argument will initial deserialization storage, residing cpu.
each serialized has tag associated which identifies was saved from, this tag second argument passed map_location.
the builtin tags ` 'cpu '` cpu tensors ` 'cuda:device_id '` (e.g.
` 'cuda:2 '`) cuda tensors.
if `map_location` returns storage, will used final deserialized object, already moved right device.
otherwise, :math:`torch.load` will fall back default behavior, wasn 't specified.
string, tag, where all tensors loaded.
otherwise, dict, used remap tags appearing (keys), ones that specify where put storages (values).
user extensions register their own tags tagging deserialization methods using `register_package`.
args: f: file-like (has implement read, readline, tell, seek), string containing name map_location: function, torch.device, dict specifying how remap locations pickle_module: module used unpickling metadata objects (has match pickle_module serialize file) .. note:: when you call :meth:`torch.load()` which contains gpu tensors, those tensors loaded gpu by default.
you call `torch.load(.., map_location= 'cpu ')` then :meth:`load_state_dict` avoid gpu ram surge when loading model checkpoint.
it won 't checked "for correctness upon loading.")
original_source != current_source: file_name container_type.__name__ '.patch ' diff '), '), source_file, source_file, lineterm="") lines ' '.join(diff) open(file_name, 'a+ ') file_size f.seek(0, 2) f.seek(0) file_size 0: f.write(lines) file_size != len(lines) f.read() != lines: ioerror msg ("saved reverse patch file_name ".
"run `patch -p0 < file_name "` revert your "changes.")
ioerror: msg ("tried save patch, couldn 't create "writable file_name make sure "doesn \'t exist your working directory "writable.")
("you retrieve original code by "accessing object 's attribute set true` "patch tool revert changes.")
("source class '{} ' has changed.
{}" msg)) warnings.warn(msg, sourcechangewarning) legacy_load(f): deserialized_objects {} isinstance(saved_id, tuple): ignore containers don 't have any sources all(saved_id[1:]): saved_id[0] mode= 'r: ', tar, mkdtemp() tmpdir: path=tmpdir) 'storages '), 'rb ', 0) num_storages pickle_module.load(f) i range(num_storages): args pickle_module.load(f) key, location, storage_type args obj restore_location(obj, storage_views pickle_module.load(f) target_cdata, root_cdata, offset, size storage_views: root offset size root.size(): warnings.warn("detected view legacy serialized data: "storage views no longer natively supported, so we making "a copy data instead.
this is a semantic change!
"if you need aliasing, reserialize model "tensors share storage.")
tensor offset, (size,), (1,)) tensor.clone().storage() nb: this line does appear exercised by test suite.
protocol_version protocol_version protocol_version: runtimeerror("invalid protocol version: %s" % protocol_version) _sys_info unpickler persistent_load unpickler.load() f.tell() f_should_read_directly else key assert key deserialized_objects f_should_read_directly) steps reproduce behavior: 1.
steps to reproduce the behavior: 1. use the 1. move the `model` and input data `images` to the gpu (`cuda:0`) 1. save graph with `writer.add_graph(model, input_to_model=images)` 1. open tensorboard and look at device placement my implementation is simply code of tutorial (plus tensorboard related code): phofurl
steps to reproduce the behavior: 1. run the code below
steps to reproduce the behavior: 1. when use phofcode to load voc dataset and use phofcode to extract the data,an issue occurd when running phofcode when debugging to the code,it turns out that the function phofcode is unabel deal with data type returned by 2. i write a function deal with this problem
steps to reproduce the behavior: 1. paste the below code into a .py file and run it note: the `_newemptytensorop` and `conv2d` classes are from the maskrcnn_benchmark package (my full repro is a highly-modified version of that codebase), if `conv2d` is replaced with `torch.nn.conv2d` in `testmodule`, it will run successfully.
steps to reproduce the behavior: 1. save a traced jit module in pytorch 1.2.0-dev 2. attempt to delete the created 'debug' folder 3. fails to read model 4. create an empty 'debug/model.pkl' file.
create dockerfile which installs miniconda, creates a python 3.6 environment and conda install cmake numpy pyyaml scipy ipython mkl mkl-include cython typing libboost, magma-cuda100, ninja, pillow as instructed by the from source steps
minimal working example: <details> <summary> main.cpp </summary> phofcode </details> <details> <summary> makefile </summary> phofcode </details> running the makefile will generate two executables: `without_torch` and `with_torch`.
both maintain a singleton class that initializes and finalizes an embedded python session.
the only difference is that `with_torch` imports pytorch.
`without_torch` runs fine and exits cleanly.
`without_torch` crashes with the following message: <details> <summary> error message </summary> phofcode </details> running `with_torch` under valgrind (with the appropriate suppression file phofhyperlink ) yields many errors similar to: <details> <summary> error message </summary> phofcode </details>
steps to reproduce the behavior:
steps to reproduce the behavior: 1. train a model using the multi head attention (encoder only) 2. construct vector x = [x1,x2] and xx = [x3,x1] where x1, x2, and x3 are two inputs 3. calculate y = transformer(x) and yy = transformer(xx)
steps to reproduce the behavior: 1. run the following code phofcode
steps to reproduce the behavior: phofcode i am receiving a segmentation fault: 11 when i run this code.
if i use a very small tensor like i am not getting this error.
(also believe that torch==1.0.0 doesn't have this bug)
steps to reproduce the behavior: 1. git clone the pytorch repo and all the submodules 2. build pytorch with: phofcode where i have all my compiler toolchain in $linuxbrewhome 3. i got this error: phofcode
steps to reproduce the behavior: 1. initialize a scheduler with t_0=1, t_mult=2.
1. loop through using a for loop, first printing the lr, then stepping.
>>> scheduler = t_0=1, t_mult=2) >>> for i in range(9): ... print(i) ... ... scheduler.step() ... 0 [0.0] 1 [0.5] 2 [0.5] 3 [0.25] 4 [0.5] 5 6 [0.25] 7 8 [0.5]
x_packed = l, batch_first=true, enforce_sorted=false) this line of code raises the following error: typeerror: pack_padded_sequence() got an unexpected keyword argument 'enforce_sorted'
1. install scipy and pytorch inside a conda environment (in my case i have the gpu version of pytorch but the same is valid with the cpu version).
phofcode 2. run the following code: phofcode the resulting shapes are: phofcode as output shows, shape of batch has one dimension more (3 instead of 2) than slice.
this *i think* should not be case.
steps to reproduce the behavior: - install `python-daemon` which is the implementation of pep 3143.
- run the following script to reproduce error phofcode ouput: phofcode
steps to reproduce the behavior: 1. import torch 1.
1. a.mean() 1. a.cuda().mean() a.sum()/a.numel() >>> >>> a.mean() >>> a.cuda().mean() device='cuda:0') >>> a.sum()/a.numel()
steps to reproduce the behavior: 1. git clone phofurl 2. add model.half() and img.half() in detect.py 3. python3 detect.py phofcode
steps to reproduce the behavior: 1. build and execute on ppc64le platform, with use_qnnpack=off.
2. observe failure of qnnpack tests.
ok, that 's not much detail for a reproduce, but basically you can just look at the `test/test_quantized.py` file in the pytorch tree; notice that it skips the qnnpack tests if is_windows is specified, but does not do so for is_ppc.
the fix is simply to skip these tests for is_ppc case also.
(note, is_ppc is defined in `test/common_utils.py`).
in fact ... i 'll submit a pr with this fix.
steps to reproduce the behavior: 1. model = 2. model.eval() 3. example = torch.rand(1, 3, 224, 224) 4. example)
steps to reproduce the behavior: 1. import detection from torchvision,models in a python script
steps to reproduce the behavior: 1.do as follows: ->a = torch.arange(10) ->random.shuffle(a)
steps to reproduce the behavior: 1. convert the model using python: phofcode 2. load the model in c++ and run an image through it.
phofcode 3. try with dummy test data: phofcode
when i saved and reloaded the array (using pickle or np.tostring or np.save), the error will stop happening (maybe because the reloaded array will be memory aligned) so i cannot send a sample to reproduce this, but here 's some info about the offending array: phofcode here 's a summary of where error happens and when it does not: phofcode here 's stack trace from gdb (test.py just loads array from our database and calls torch.tensor on it): phofcode the other lines also error in same inside libcaffe2.so.
phofcode # expected behavior a cleaner error message and documentation about the limitation
steps to reproduce the behavior: define the environment as follows.
we will be backpropagating gradients to a very simple `nn.linear` layer.
phofcode performing a forward inference on the linear layer and propagating gradients from there works as intended if no `nan` is involved.
phofcode suppose that `x` has `nan` in one of its rows.
phofcode performing backwards computation on the sum of matrix above should produce `nan` gradients.
phofcode however, using `masked_fill` or index slicing on leaf nodes to mask out problematic gradient graphs should not.
we can check whether masking out final losses works in cases where no `nan` is involved.
the accumulated gradient in latter case is less than former because index slicing (`[2:]`) on computation graph prevented third row in `x` from affecting gradient computation.
steps to reproduce the behavior: 1. i defined the following sequential model: phofcode 2. after training, then i want to export this model to onnx: phofcode however, this does not work.
but it does work if i take out the two dropout layers when defining the model.
case 1. output tensor with internal_overlap storage phofcode case 2. in-place operation on tensor with internal_overlap storage phofcode
phofcode steps to reproduce the behavior: just run it
steps to reproduce the behavior: 1.clone the source pytorch and success build from source 1.load libtorch 1.compile failed
phofcode at which point the error will occur.
running phofcode again outputs a tensor, resulting in desired behavior.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. change the loss function as mentioned above 2. run the finetune script in /scripts (note i am using my own finetune scripts, but mainly just path and dataset changes from the default one provided).
dataset is our own private dataset, not one of glue dataset.
extracts of log: [info] total number of params: [warning] at epoch 0 [info] task [ 0] updates[ 1] train remaining[0:26:52] [info] task [ 0] updates[ 500] train remaining[0:14:50] [info] task [ 0] updates[ 1000] train remaining[0:13:26] task [ 0] updates[ 1500] train remaining[0:12:29] 2000] remaining[0:11:35] 2500] remaining[0:10:45] 3000] remaining[0:09:55] 3500] remaining[0:09:08] 4000] remaining[0:08:23] 4500] remaining[0:07:38] 5000] remaining[0:06:53]
image phofimage **the script code:** phofcode
steps to reproduce the behavior: 1. call .flatten() or torch.flatten() on a 0-dim tensor
steps to reproduce the behavior: 1. followed example here: phofurl phofcode 2. follow the instructions here to export to onnx: phofurl phofcode 3. get error message phofcode
steps to reproduce the behavior: 1. this snippet can be used to reproduce behavior phofcode
in the example below the assert fails because the last entry is all zeros instead of the identity matrix.
decrement `n` by 1 and it works as expected.
phofcode it's probably related to following which works on nightly build for `n` up to `219 - 7` while limit on lastest release is `216`: phofcode note that here, other than change in limit, i get an error when threshold is passed: `runtimeerror: cuda error: invalid configuration argument`.
(which becomes clear after one pastes it in their favorite search engine.)
so i would expect something like this for first code snippet too.
steps to reproduce the behavior: 1. download the script: phofurl 2. evaluate using a simple script as follows: phofcode the error is non-deterministic, so might not be reproduced on the first run.
please run it again and again if you are unable to reproduce it.
steps to reproduce the behavior: phofcode phofcode
phofcode on a p100, it prints: phofcode -- my own implementation of `topk2` is faster than the pytorch `.topk()`
in the code above, with jit and cuda tensors, the returned tensor does not have a `grad_fn`, and will throw an exception when `.backward()` is called.
this is not an issue if the function takes tensor arguments or a list of tensors directly.
steps to reproduce the behavior: run the following script: phofcode output: traceback (most recent call last): file "test.py", line 26, in <module> cm = th.jit.load("mod.ptj") # <---this will fail with the same error as in the original repro above.
file line 151, in load f, map_location, _extra_files) runtimeerror: arguments for call are not valid.
the following operator variants are available: aten::cat(tensor[] tensors, int dim=<default>) -> tensor: expected a value of type 'list[tensor] ' for argument 'tensors ' but instead found type 'list[tensor] '.
empty lists default to list[tensor].
use []) to create an empty list of another type.
aten::cat(tensor[] tensors, int dim=<default>, *, tensor out) -> tensor: expected a value of type 'list[tensor] ' for argument 'tensors ' but instead found type 'list[tensor] '.
empty lists default to list[tensor].
use []) create an empty list of another type.
the original call is: at code/mod.py:3:8 op_version_set = 1 def forward(self) -> tensor: _0 = torch.cat([constants.c0, constants.c0], 0) ~~~~~~~~~ <--- here return torch.sum(_0, dtype=none) compiled from code test.py(9): forward ``
steps to reproduce the behavior: 1. git clone phofurl 2. download tacotron2 model from the above github page 3. run the following code sample.
`import sys import numpy as np import torch from hparams import create_hparams from model import tacotron2 from train load_model hparams = create_hparams() hparams.sampling_rate = 22050 checkpoint_path = "tacotron2_statedict.pt" model = load_model(hparams) _ model.eval() text_inputs torch.randn(64, 163, device= 'cpu ') text_legths torch.randn(64, device= 'cpu ') mels torch.randn(64, 80, 851, device= 'cpu ') max_len 163 output_lengths torch.randn(64, device= 'cpu ') dummy_input (text_inputs, text_legths, mels, max_len, output_lengths) torch.onnx.export(model, dummy_input, "tacotron.onnx", verbose=true) `
steps to reproduce the behavior: 1. set environment variables to use tbb: phofcode 2. build: `python setup.py build` phofcode
steps to reproduce the behavior: phofcode the error is: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. run phofcode
steps to reproduce the behavior: i was using the compiler backend tutorial repo here: phofurl if you modify their `test.py` to put the graph in a nested scope: modifying this phofcode to phofcode the graph fuser can't fuse the aten::mul ops any more.
steps to reproduce the behavior: 1. in a jupyter notebook, define a cell which declares a network and executes the train/test cycle 2. execute the cell multiple times 3. a cuda out of memory error is thrown at some point
steps to reproduce the behavior: phofcode
here 's some example code that triggers it phofcode > tensor([1, 2, 3], dtype=torch.int32) phofcode > array([1, 0, 1], dtype=int32) phofcode > traceback (most recent call last): > file "<input>", line 1, in <module> typeerror: can 't convert np.ndarray of type numpy.int32.
the only supported types are: float64, float32, float16, int64, int32, int16, int8, and uint8.
--- i was looking through the members/properties of the dtype in a debugger, and i notice `np.dtype.num` changed from 7 to 5 after the modulus: phofcode (dtype( 'int32 '), 5) (dtype( 'int32 '), 7) --- i can work around it by using `b.astype(int)` and this works fine, but it 's just confusing that the error message in torch complains it 's not an int32 when it is.
phofcode you can see that the `id` of `a.storage()` and `b.storage()` are not the same.
this issue is both reproducible from windows and linux.
but in pytorch version 1.0.1, the `id` of `a.storage()` and `b.storage()` are the same.
code to reproduce the behavior: phofcode output: phofcode
please use below code snippet to reproduce the error phofcode
phofcode executing the code without the print-statement in cholupdate leads to the following wrong result: phofcode uncommenting the print-statement fixes issue and function output is correct: phofcode
this is the minimum reproducible example i could come up with: phofcode note that the issue does not seem to occur when: - the transpose is omitted - if `x.size(0) > 1` - if the tensor has more or fewer dimensions
steps to reproduce the behavior: 1. get pytorch `git clone --recursive phofurl 2. set environment variables phofcode 3. run build `python3 setup.py build` error message: phofcode
i haven't reproduced this behavior.
it would be nice to have specific bitstreams for rng testing that always return specific sequences (such as 0) to test for this sort of behavior
the bug can be easily reproduced if the * t_mult * parameter of scheduler is not set properly (i.e.
is < 1 or not an instance of int), causing python to raise the error at line 686 (where * t_mul * is used instead of t_mult ).
the following line will raise the error and cause the bug: `scheduler = t_0=100, t_mult=2.0)` because 2.0 is not an instance of int.
steps to reproduce the behavior: run the code sample and observe the values of z1 and z2.
they are different, but users tend to think they are the same.
better add an assertion if user use scatter_ on z2.
steps to reproduce the behavior: 1. build phofurl with `use_cuda` according to the build steps.
steps to reproduce the behavior: 1. download code from here phofurl 2.
`python imagenet.py -a resnet50 --dist-url --dist-backend 'nccl ' --world-size 1 --rank 0 path-to-imagenet -j 32`
in order to reproduce, run the code below.
phofcode during execution of the code above the segmentaion fault occurs and core is dumped.
in fact, register `rax` points to a wrong place in instruction `lock xadd dword ptr [rax],edx`.
the related stacktrace is below.
running the following code with distributeddataparallel phofcode
minimal code sample phofcode the torchscript is here phofhyperlink , which is simply a mobilenetv2 phofhyperlink fine-tuned on gpu.
steps to reproduce the behavior: 1. when using lstm, we need to sort the input sentence by length, but i get a wrong result.
1. length=torch.tensor([9, 6, 2, 2, 3, 2, 1, 1, 3, 2, 1, 1, 3, 3, 2]) out: tensor([9, 6, 2]) 1. out: torch.return_types.sort( values=tensor([9, 6, 1]), indices=tensor([ 0, 8, 26, 15, 4, 18, 30, 29, 22, 21, 20, 5, 13, 31, 9, 12, 14, 27, 25, 7, 17, 28, 19, 10, 6, 24, 16, 11, 23])) 1. out: tensor([ 0, 0, 0, 4, 8, 15, 26, 0])
1. find a multi-gpu machine.
2. run a python interpreter with `cuda_launch_blocking=1 python` (the bug will occur without setting the environment variable too, but it will just hang instead of erroring).
3. run the following: phofcode
phofcode output: phofcode phofcode output: phofcode notebook: cdist_issue.ipynb.txt phofhyperlink
steps to reproduce the behavior: phofcode - pytorch version: '1.1.0 ' - os : windows - installed pytorch: pip - python version: 3.7 cuda/cudnn version: cuda release 9.0, v9.0.176 gpu models and configuration: nvidia gtx1070 ** update ** : the above behavior is seen in jupyternotebook.
on trying from the python console itself, the process just terminates which i found out was an issue closed with won 'tfix at phofurl wondering why the behavior is different in jupyternotebook!
steps to reproduce the behavior: in the mnist code, in the beginning of main function add phofcode and build the code in windows through `microsoft visual studio 2019`.
phofcode steps to reproduce the behavior:
input: torch.tensor([0]).int() < 0.5 output: tensor([0], dtype=torch.uint8)
steps to reproduce the behavior: installing torch_nightly for some reason allowed to import geoopt locally, hmm phofurl
steps to reproduce the behavior: since cuda 9.2 is not compatible with gcc 7, cuda host compiler is set to be gcc-4.8.
running `use_opencv=1 use_lmdb=1 use_ffmpeg=1 python setup.py install` gives the above result.
the cmakeerror log is here phofhyperlink , and the cmakeoutput file is here phofhyperlink .
the full terminal printout here phofhyperlink .
i have two cuda installed in my system, the default one is cuda 9.0. i have switched to cuda9.2 when building pytorch.
then i followed the instructions by cloning the repo, fetching submodules, installing dependencies in conda and setting conda prefix, followed by `python setup.py install`.
but it always gives a long list of warnings and errors.
the following is a summary of cmake.
cpu memory leak when only doing model forwarding in a loop define the model as simple as : phofcode and write the test program as: phofcode
1. run the following minimal repro: `python -m torch.distributed.launch test.py` 2. observe `runtimeerror: one of the variables needed for gradient computation has been modified by an inplace operation: [torch.cuda.floattensor [1, 32]] is at version 3; expected version 2 instead.` 3. run with `python test.py`, observe no errors.
phofcode note that the module must contain a buffer and the output of second call to module need not be used.
using output doesn 't stop crash.
replacing buffer with a parameter does stop crash, even though neither was used inplace (visibly).
cloning buffer will stop crash.
here i compare the distributions sampled by the `torch.multinomial` on cuda vs cpu tensors.
the sampling is working correctly on cpu.
i 've noticed this bug only for **sampling without replacement**.
python import torch import torch.nn.functional as f import scipy.stats import numpy as np m = 10 n = 10000 replace = false
i used this: phofurl try it on linux, then try it on windows.
it's about 2-5 times slower.
steps to reproduce the behavior: define a network in which the loss only depends on part of the parameters.
steps to reproduce the behavior: 1. i changed signature of avg_pool2d method, added optional argument 2. got failure: phofcode
steps to reproduce the behavior: phofcode
1. pull the docker image and get a shell 2. run `python -c 'import torch; and see 1.2.0dev 3. run something like `pip install pytorch-pretrained-bert` (depends on pytorch>=0.4) 4. run `python -c 'import torch; again and see 1.1.0
steps to reproduce the behavior: phofcode this produces the following plot: image phofimage
phofcode ` steps to reproduce the behavior: > mpirun -np 4 --oversubscribe -host python test.py segmentation fault: phofcode
1) i used code from here phofurl 2) this is how its done in example.
style calculated before loop phofurl 3) this is how it cause problems.
i call style.to(device) only once before loop phofurl 4) this is how it works fine.
calling .to(device) on each iteration phofurl
steps to reproduce the behavior: 1. cloned nvidia/tacotron2 repo phofurl 1. create export script phofcode 3. get error phofcode
steps to reproduce the behavior: 1. compile this code, which tries to convert a vector of ivalue to a vector of float phofcode 2. observe an error message similar to this > running main() from > [==========] running 1 test from 1 test case.
> [----------] global test environment set-up.
> [----------] 1 test from torchtest [ run ] tensor vector: 1 unknown file: failure c++ exception with description "isdouble() **internal assert failed** at **please report a bug pytorch**.
(todouble at frame #0: std::char_traits<char>, std::allocator<char> const&) + 0x6c in
steps to reproduce the behavior: code, in which behavior is observed, is attached min.zip phofhyperlink steps to perform on google colab upload attached file min.zip perform the following commands in google colab: phofcode during the execution of the script, exception provided above is attached.
steps to reproduce the behavior: 1.
minimum working example to reproduce the bug: phofcode traceback of error: phofcode note that the usage of ``modulelist`` in this context is, of course, unnecessary.
there exist use cases, however, where it cannot be avoided (i am currently implementing a stacked lstm with different hidden dimensions).
steps to reproduce the behavior: 1. follow steps to build with rocm support from here (option 4, until step 7): phofurl .
1. attempt to compile with: use_rocm=1 use_lmdb=1 use_opencv=1 max_jobs=8 blas="openblas" use_mkldnn=0 use_miopen=1 python3 setup.py bdist_wheel`
steps to reproduce the behavior: 1. foillow steps to build with rocm support from here (option 4, until step 7): phofurl .
1. attempt compile with: use_rocm=1 use_lmdb=1 use_opencv=1 max_jobs=8 python3 setup.py bdist_wheel`
steps to reproduce the behavior: 1. run the below dummy code snippet.
2. use 2 gpus for running(export phofcode
steps to reproduce the behavior: code to reproduce the linking errors: phofcode code to reproduce the general errors: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: go into open `math.h` it is including non-existent headers like phofcode which causes my legacy caffe2 code to fail to compile
steps to reproduce the behavior: 1. clone pytorch 2. checkout v1.0.0 3. build libtorch with cmake/make 4. look at phofcode
1. download script, .pth files 2. run script
clone and build latest master.
then run: phofcode after setting default for `run_debug_test` and `run_actual_test` we get much more: phofcode
steps to reproduce the behavior: 1. when you call "swap" function in pytorch c++ "optional.h"
steps to reproduce the behavior: phofcode returns for both forwards a value of [3, 3]
steps to reproduce the behavior: phofcode it will output phofcode if you execute multiple times like this phofcode you will get phofcode
steps to reproduce the behavior: run the following script with --input_channels = 6 for wrong results.
--input_channels = 8 or 12 or 16 work fine.
steps to reproduce the behavior: 1. follow phofurl for lltm ops phofcode 2. create your own nn.module using previous ops phofcode 3. trying to use the module fails with error `runtimeerror: autograd not yet supported for c10 ops.` phofcode
steps to reproduce the behavior: 1. just create a dummy dataset that sleeps forever when loading.
2. launch dataloader with multi-workers and pin_memory=true, timeout=some number.
3. add exception handler to handle the timeout, and in there kill the workers.
steps to reproduce the behavior: phofcode ** output: ** `segmentation fault (core dumped)`
remove the skipif decorators for test_multinomial_alias in test_cuda.py on phofurl and run the cuda tests.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. generate embedding logs: phofcode 2. run tensorboard and navigate to projector tab (`--logdir=runs/`) backend returns the following response: phofcode the cli throws the following error: phofcode output logs: phofcode projector_config.pbtxt:
steps to reproduce the behavior: 1. copy the code below in `profile_conv.py` 2. run `python3 profile_conv.py` phofcode output from the above code in my environment: phofcode
steps to reproduce the behavior: 1. convert to pytorch inceptionv3 model to onnx 1. convert onnx model to caffe2 1. inference caffe2 model
steps to reproduce the behavior: 1. generate embedding logs following example here phofhyperlink .
2. run tensorboard and navigate to projector tab backend returns the following response: phofcode the cli throws the following error: phofcode
steps to reproduce the behavior: run the following script.
phofcode i checked the gpu memory usage at the end of script (by inserting input()).
nvidia-smi said phofcode the non-jit version phofcode requires much less.
nvidia-smi showed phofcode the memory usage increases during backward.
more precisely, ``matmul`` in ``linearalgebra.cpp`` is called in and uses much memory.
the memory usage even increases by second call of ``backward``.
i thought this could be related to #18862, but latest nightly build didn 't solve problem.
steps to reproduce the behavior: 1. import torch phofcode
steps to reproduce the behavior: phofcode
code sample: phofcode error: > runtimeerror: method run failed due to: [onnxruntimeerror] : 1 : general error : void int64_t) axis == 1 || axis == largest was false.
attempting to broadcast an axis by a dimension other than 1.
steps to reproduce the behavior: - run test_numba_integration with numba 0.44.0 phofcode
any use of `tensor.contiguous` will produce this when linted with mypy
steps to reproduce the behavior: 1. nvidia-docker run --rm -ti --ipc=host pytorch/pytorch:latest 1. python 1. import torch 1. it returns false because cuda is not existing.
exactly the same as phofurl and i have my anaconda3 installed.
build the attached file and execute it.
i 've included a small cmakelists.txt that can be used for an easy build steps to reproduce the behavior: 1. save the following as phofcode 2. save the following as cmakelists.txt phofcode 3.
`mkdir build && cd build && cmake && make` 4.
gist phofhyperlink that demonstrates the issue.
steps to reproduce the behavior: on google colab, execute as follows, phofcode
steps to reproduce the behavior: 1. phofcode
steps to reproduce the behavior: simple code that fails phofcode error output: phofcode
steps to reproduce the behavior: execute following script phofcode
steps to reproduce the behavior: 1. initialize optimizer: `optimizer = adam(filter(lambda p: p.requires_grad, model.parameters()), args.lr)` 1. initialize scheduler: `scheduler = patience=1, factor=0.1, verbose=true, mode='max')` 1. add parameter group to the optimizer: 'lr':lr})` 1. raise error when the learning rate should be changed
steps to reproduce the behavior: 1. conda create -n gan 2. conda activate gan 3. conda install -c pytorch pytorch-nightly 4. conda install -c fragcolor cuda10.0 5. python2 >> import torch
>>> a = torch.arange(10) >>> mask = (a < 4) >>> a[mask][1:] = -1 >>> a tensor([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
i want to compare two tensors by identity / by reference.
normally, comparing two objects in python by identity works with is or by comparing id() values.
however, this does not seem to work: a = torch.tensor([1,2,3]) b = a.detach() print(a is b) # false (good, since b is derived from a but not identical to it) print(a.data is b.data) # false (bad, since they refer to exactly the same thing) print(id(a.data) == id(b.data)) # true (good, since they refer exactly the same thing) shouldnt either both of the last two statements be true, or neither?
it seems odd that 'is' gives a different result than id()==id().
it looks like i can make a reference comparison with id()==id(), but i am reluctant trust that this will always work because my knowledge using should be the way do it, and that isnt working.
can anyone clarify if that bug or feature?
how are you _supposed_ compare two tensors reference?
steps to reproduce the behavior: here is a (mostly) minimal program.
this was tested on the latest nightly, as well as 1.0.0 and 1.1.0. phofcode the verbose output of the export is as follows: phofcode loading the onnx model and printing verbose graph shows that %8 is of type float whereas %11 is of type double.
furthermore, inspection with pdb shows that types of args to mul() and add() in symbolic_opset9.py are different .
while i can imagine legitimate reasons that that may happen, it suggests to me there could be some flaws in type inference logic.
casting constants to tensors and explicitly casting tensors type torch.float32 do not solve problem.
using latest pytorch: steps to reproduce the behavior: phofcode you can see that tensor ** a ** is also changed after change tensor ** b ** .
i found the code mkldnn_clone phofhyperlink seems wrong, the return tensor share the same memory with input tensor.
it shoud write as : phofcode thanks
just take a model with a dummy hook.
here is a minimal script to reproduce the problem: phofcode
steps to reproduce the behavior: 1.original model: tensorflow 's inceptionv4 model phofhyperlink 2. convert to onnx: phofcode 3. convert to caffe2 phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. check out the branch in pr ( phofurl 2. run the unit test "python test/test_jit.py 3.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. install caffe2 2. run `python testinstancenorm` the test fails on with the following error: phofcode
steps to reproduce the behavior: 1. call torch.hub.load() on external repo on windows file line 83, in _remove_if_exists os.remove(path) permissionerror: [winerror 32] the process cannot access the file because it is being used by another process:
steps to reproduce the behavior: self.model = = 6 )))(x) 1.x = [16,1,3,6] 1.no error message despite the fact that no padding was allowed by configuration.
steps to reproduce the behavior: 1.original model: tensorflow 's inceptionv4 model phofhyperlink 2.convert to onnx 3.onnx model convert to caffe2: phofcode
steps to reproduce the behavior: i follow offical steps to clone the lastest code phofcode configure environment variables phofcode command to build the library phofcode ensure that dependencies are installed `conda install numpy ninja pyyaml mkl mkl-include setuptools cmake cffi typing`
phofcode steps to reproduce the behavior: 1. execute the above function for device "cpu" and "cuda" 2. we observe the following times on a 1080ti phofcode 3. investigating nvidia nsight logs: image phofimage shows that `torch.cholesky` is allocating and freeing memory constantly.
steps to reproduce the behavior: <img width="498" alt="screenshot 21 41 52" src=" phofurl this bug gets even better: <img width="228" alt="screenshot 21 44 09" src=" phofurl phofcode
steps to reproduce the behavior: 1. compile on any machine with modest resources, and when the bundled nccl is built rather than an existing one used.
1. write this code in some file, on my computer the source code is named `try.py` phofcode 2. run the above code for twice, and see the loss printed to the screen: phofcode since my practical model has a big variance, this random behavior can bring a final score variance of as much as 0.5%, which makes it too difficult for me to tune hyper-parameters.
what is cause of this randomness, and how could i reduce it please?
steps to reproduce the behavior: 1. followed instructions on phofurl 1.
steps to reproduce the behavior: phofcode
phofcode phofcode cc @ezyang @gchanan @zou3519 @su
steps to reproduce the behavior: phofcode lets first time everything with a uniform distribution over input rows: phofcode everything is fine here phofcode but if i have high contention on a single row, embedding becomes 20x slower while other approaches do not.
steps to reproduce the behavior: 1. convert network to 16 bits while keeping syncbn in 32 bits 2. get `runtimeerror: expected scalar type half but found float` error
steps to reproduce the behavior: with as prof: outputs = model(inputs) _, preds = torch.max(outputs.data, 1) loss = criterion(outputs, labels) print(prof)
run the following script using command `cuda_visible_devices=3 python test.py` phofcode on my server, the output is: phofcode from the output, we can see that, the process id is `18286`, and `nvidia-smi` shows that this process is using gpu 5, which is not 3 as specified by `cuda_visible_devices`.
steps to reproduce the behavior: 1. make sure you are on commit 2. use the following script on gpu to reproduce the oom error message.
import torch import torch.nn as nn d_model = 512 nhead = 16 bptt = 10 batch_size = 15 device torch.device("cuda") norm self_attn nhead).to(device) src_seq torch.rand((bptt, batch_size, d_model)).to(device) for _ in src norm(src_seq) output self_attn(src, src, src)
phofcode note the ` phofurl url.
adding `--verbose` gives more specific information: phofcode with this line indicating the problem: phofcode
steps to reproduce the behavior: 1. save and run the script below.
steps to reproduce the behavior: run the notebook available in the repo: phofurl the notebook uses ignite version 0.1.2 and contains a batch dataloader that i'm prototyping and hope to integrate into pytorch once its kinks are worked out.
steps to reproduce the behavior: 1. in user code import `optimizer` and define a function that takes parameters in the same form (with [correct] type annotation) and just wraps some optimizer construction.
2. check it with mypy for example: phofcode
steps to reproduce the behavior: phofcode
download the latest package here: phofurl
steps to reproduce the behavior: import torch.nn as nn upsample_layer = fails and raises: typeerror: float() argument must be a string or a number, not 'tuple' according to the docs, it should handle, and in previous versions (0.4.0) it did.
broke after upgrading to 1.1.0 likely to be caused by the added type check not supporting tuples in nn/modules/upsampling.py line 125: self.scale_factor = float(scale_factor) if scale_factor else none which cannot handle tuple inputs.
steps to reproduce the behavior: import torch floating point exception (core dumped)
phofcode used to work, now it does not.
note that forward operation with ind0 on the cpu still works (`a[ind0]`), but index_put_ breaks
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: cannot always reproduce.
1. construct with max_step=1e9 2. scheduler.step(x) for large x repro in this collab notebook phofurl
steps to reproduce the behavior: 1. setup a model named `net` 2. run the following: phofcode 593 self.base_momentums = list(map(lambda group: group['momentum'], optimizer.param_groups)) 594 self.max_momentums = optimizer, max_momentum) 595 keyerror: 'momentum'
save a tensor to a file in python.
phofcode build this small c++ program phofcode at runtime i get: phofcode
steps to reproduce the behavior: 1. create a binomial distribution with a big max count, e.g.
`b = probs=0.5)` 1. try to take a big sample: 10000)` 1. laugh when pytorch tells you to buy 745gb of ram just so you can perform this operation
run this short repro example: phofcode the module will fail to construct unless the first cat() call is replaced w/the second.
steps to reproduce the behavior: 1. define a model: phofcode 2. export: phofcode 3. check `foo.onnx` and notice it 's malformed.
steps to reproduce the behavior: run the code below: phofcode phofcode i know the code following will work, but it seems that the issue above is an unexpected performent.
steps to reproduce the behavior: 1. evaluate script below while monitoring cpu memory usage phofcode edit: was able to reproduce with a much smaller example, simplified the script above.
i've built caffe2 using the following flags: phofcode minimal application code: phofcode build flags: phofcode output: phofcode
steps to reproduce the behavior: 1. write a customized transform function.
2. use .cuda() method within.
steps to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode gives the following error: phofcode
steps to reproduce the behavior: 1.
`git submodule update --init --recursive` 2.
`... python setup.py build` 3. get error: phofcode
steps to reproduce the behavior: phofcode no error is reported when running this code.
steps to reproduce the behavior: phofcode
this is from my planet repo phofhyperlink , where i 'm trying to replace `nn.grucell` with my own jit variant: phofcode
i tried to use both pytorch 1.0.0 and the recently released pytorch 1.1.0 and run the following test codes.
steps to reproduce the behavior: self.model = = 6 )))(x) 1.x = [16,1,3,6] 1.no error message despite the fact that no padding was allowed by configuration
here i follow the new convention putting the `lr_scheduler.step()` at the end of each iteration, see the new documents and #7889 (which is probably root of this issue).
code: phofcode output: phofcode we got inconsistant values.
the two values are **same in first line**, but **different in following lines** by lr decay factor `gamma = 0.9`.
steps to reproduce the behavior: `docker build -t pytorch -f dockerfile .` phofcode
steps to reproduce the behavior: on a p3.16xlarge phofcode in the logs phofhyperlink i found this: phofcode how do i figure out where this is coming from?
is this something my code should account for or is it a bug in ddp or apex?
steps to reproduce the behavior: 1. install torch==1.1.0 with pip traceback (most recent call last): file "<stdin>", line 1, in <module> file line 79, in <module> from torch._c import * importerror: 9): library not loaded: referenced from: reason: image not found
steps to reproduce the behavior: 1. phofcode fails with: > runtimeerror: > arguments for call are not valid: > > for operator aten::norm(tensor self, scalar p=<default>) -> tensor: keyword argument dim unknown for operator aten::norm(tensor self, scalar?
p, *, int dtype) -> tensor: argument p not provided.
@torch.jit.script def norm_test(): t = torch.ones(10, 5) return torch.norm(t, dim=1, keepdim=true) ~~~~~~~~~~ <--- here 2. phofcode works fine
steps to reproduce the behavior: phofcode raises the following error phofcode
steps to reproduce the behavior: 1. call scalar_value, epoch) 2. open tensorboard
code: phofcode output of pytorch 1.0.1: phofcode output of pytorch 1.1: phofcode
follow 1st tutorial phofurl the error occurs when specifying the dtype: `x = torch.zeros(5, 3, dtype=torch.long)` steps to reproduce the behavior: 1. install nvidia driver 2. run the docker image 3. install conda inside the image 4. use conda to install pytorch: conda install pytorch torchvision cudatoolkit=9.0 -c pytorch 5. run python and follow aforementioned tutorial
steps to reproduce the behavior: number of 2 's in the following example is `>63`.
phofcode output: phofcode another related issue phofcode these are `62` 2 's.
output: phofcode when they 're `63` 2 's.
run the following 4 lines on a fresh python repl (or some variant): phofcode with python2.7 and pytorch 1.1.0, i get `segmentation fault (core dumped)` with python3.5.2 and pytorch 1.1.0, it's a bit less predictable.
sometimes i get a `runtimeerror`: phofcode sometimes, i get a segmentation fault: phofcode sometimes i get `c10::error`: phofcode and occasionally, it just runs without crashing and outputs which is almost what would expect except that this is `bytetensor` and not `floattensor`.
each time run it, different one of these errors, with no discernible pattern.
sometimes running it two times in row gets the same resulting error, sometimes not.
the same behavior occurs with other variants including - replacing `torch.floattensor` with another tensor datatype such as `torch.bytetensor` `torch.booltensor` - passing parameters to the instantiation.
- adding body to the class definition while encountered/produced all these errors while running on single machine (environment specification below), have tried this on other machines as well similarly erratic behavior, including on google colaboratory.
----------------- a different issue occurs when instantiating subclass of `torch.tensor`.
running following code: produces `typeerror`: this error occurs for any nonzero number of parameters.
note that just `mytensor()` works fine, as it does when do not override `__init__`.
but this is overriding `__init__` with its superclass's `__init__`, which should do nothing, yet it causes to fail.
understand that `torch.tensor` class is defined in c backend, that only uses `__new__` method to initialize.
however, `__init__` method of `torch.tensor` should at least swallow its arguments before passing them `object` so overriding `__init__` doesn't have avoid calling its superclass (which messy deal with).
steps to reproduce the behavior: 1. use ubuntu 16.04 2. install latest pytorch conda package as mentioned on official website 3. pip install onnx==1.5.0 run the following: pytorch_export.py: phofcode verify_onnx_model.py phofcode phofcode phofcode following error will be thrown:
steps to reproduce the behavior: 1. pipenv install torch torchvision 2.
`from torch.utils.data import dataset` phofcode
steps to reproduce the behavior: in test/test_nn.py run this with test_backward=true and dtype=torch.float.
'sum', true, dtype=dtype) run a number of times and it will occasionally fail.
with the third parameter (sparse) set to false, we don't see failures.
steps to reproduce the behavior: from torch.autograd import variable import torch.onnx # load the trained model from file net_save = sentimentrnn(vocab_size, output_size, embedding_dim, hidden_dim, n_layers) trained_model = net_save # export the trained model to onnx dummy_input = variable(torch.randn(1, 1, 28, 28)) # one black and white 28 x 28 picture will be the input to model dummy_input, "sentiment.onnx")
i do not get this in all cases.
i get it on an autoencoder with two decoders.
i can dig into it more and try to make a streamlined mwe if the devs are unsure what could cause this.
it seems to happen when a linear block has an out dimension of zero.
that was being concatenated with another vector so other checks in my code did not catch it.
phofcode * len(test_loader.dataset) < * when `num_workers==1`, no warning.
* i also tested mnist and got the same warning.
steps to reproduce the behavior: run test.py with gpu: > python test.py --gpu 0 --iter 100 run test.py with gpu and trace optimize: > python test.py --gpu 0 --optimize --iter 100
here are code snippets to minimally reproduce the issue: (1) first, generate the model by running the following python script.
if successful, you should see a 0 print out.
i 'm able to run this code with no problems.
phofcode (2) here is the c++ program i run that generates a segmentation fault.
to run, do `./example-app /path/to/hard.pt` phofcode when i run c++ program, here 's output i receive: phofcode
phofcode which outputs: > ------------------ --------------- --------------- --------------- --------------- > name cpu time cuda time calls cpu total cuda total > ------------------ > unsigned short 15.176us 0.000us 1 15.176us 0.000us view 13.622us 0.000us 1 13.622us 0.000us [.]
but when directly using `torch.transpose(tensor, 0, 1)` the profiler doesnt show any `unsigned short` op: phofcode -------------- name cpu time cuda time calls cpu total cuda total -------------- transpose 15.639us 1 15.639us view 8.079us 1 8.079us abs 4.948us 4.948us [.]
runs this code: phofcode observe in the output below that `2*x` is elided in onnx graph.
run the following (notice that `model3` is both a member of `model2` and `model`, and `model2` is a member of `model`): phofcode gets the following outputs.
notice that input `%1 : float(2, 5)` has a different shape than the weight initializer `1` with shape `(2, 6)` in the onnx file.
here is the codebase: phofurl i changed a few places for my script on multi-machine multi-gpu settings work.
here is the init_process_group: phofcode this is `dist_multiproc.py` which i use as a distributed python module phofcode this is the content of `dist_config.txt`: phofcode here the arguments of process with rank 0, there are 8 processes in total, one for each gpu phofcode the training then triggered by here are outputs from node 1 (master) and node 2: node 1: node 2:
here 's simple 2d 1x1 convolution.
one element of input is 1.0, while the rest are zeros.
weight tensor is all ones.
however, result on cpu is all zeros.
phofcode i get the following output: phofcode
my minimum code for reproducing this bug: phofcode it works fine in training mode.
it also works fine without the l dimension at the end for the batchnorm, as below: phofcode environment: - pytorch version (e.g., 1.0): 1.0.1 - os (e.g., linux): linux - how you installed pytorch (`conda`, `pip`, source): conda - python version: 3.6.6 cuda/cudnn version: cuda 10/ cudnn7.4.1 gpu models and configuration: gtx1080ti
just run this code in your python repl phofcode if n is a even number, the above code doesn't raise an error!
steps to reproduce the behavior: 1. use the latest nightly build 2. use distributeddataparallel.
4. run it by "python -m torch.distributed.launch --nproc_per_node=1 main.py" phofcode phofcode
i noticed this problem appears in #20284 , after i added an ad formula for `linear` in #20039.
1. git fetch origin; git checkout gh/wanchaol/5/origin 1. python setup.py develop 1. python test/test_jit.py
steps to reproduce the behavior: >>> import torch >>> import open3d a two line script with the above statements crashes every time for me.
reversing the order of the imports fixes problem.
i'm using open3d version 0.6.0.0 and pytorch version 1.0.1.post2.
steps to reproduce the behavior: phofcode
phofcode > t is: > tensor([[-1., 2.]])
> ttr is: > tensor([[-1.
-------------------- t is: tensor([[5., 2.]])
the transposed versions were updated, as expected -------------------- t tensor([[10., 20.]])
the transposed versions were updated, as expected -------------------- t tensor([[12., 22.]])
the transposed versions were updated, as expected -------------------- tensor([[-1., -2.]])
steps to reproduce the behavior: phofcode
1. find an old macbook, for example mbp a1398 as listed in phofurl 2. run the following script on it: phofurl
use the gist: phofurl what it does: 1. downloads trained weights (18mb) 2. creates input tensor (normal random) 3. computes convolution with trained weights - takes 3+ secs!
5. computes convolution with randomly initialized weights - takes 0.08 sec
steps to reproduce the behavior: python3 setup.py install
simple test: phofcode 1. run the script above on a machine with 2 gpus (comment out the last 2 lines for a single-gpu machine).
just run the official example code: phofcode
steps to reproduce the behavior: 1. compile and run the attached example (change mnist_parallel.cpp.txt to mnist_parallel.cpp).
run this code: phofcode output: phofcode
steps to reproduce the behavior: 1. establish a pytorch model with lstm module using python, and store the script module after using torch.jit.trace.
python code like this: phofcode 2. load the model and move the model to gpu, then when script exit, there is a core dump.
however, if we don 't move model to gpu, cpp script exits normally.my cpp script like this: phofcode > note: there is a bug to move init hidden state tensor of lstm gpu link phofhyperlink i use two methods solve this problem, one is specify device in python using hard code, another is pass init hidden state as input parameter of forward in cpp script, which may cause a warning link phofhyperlink gdb trace info like this: phofcode 3. when i remove lstm in python model, then cpp exits normally.
4. i guess hidden state of lstm cause core dump, maybe relate release init hidden state memory?
steps to reproduce the behavior: tested with current torch master.
1. include some torch headers in a file that uses qt slots functionality.
steps to reproduce the behavior: 1. load a jit model (once, so on one thread) 2. after the model is loaded, forward it twice simultaneously (separate threads) 3. experience crash in <vector> header called from two threads at same time: phofcode
steps to reproduce the behavior: 1. create a simple model with `nn.rnn` module.
1. export this model to onnx using `torch.onnx.export` 1. check the `activations` attribute for the case of the string.
as an example, string will be 'tanh', where ideally it should be 'tanh'.
steps to reproduce the behavior: i 'm running below code using command `lua preprocess_stage2.lua ` phofcode
i 'm using python3.7.0 and latest version of pytorch (1.0.1.post2).
just run the following code in a file : phofcode
steps to reproduce the behavior: phofcode phofcode
i install pytorch from newest source to get libtorch library on win10 successfully.
however when i first build a visual studio project, the error occur at line 273: using intlist c10_deprecated_using = arrayref<int64_t>; saying error: attribute does not apply to any entity if i annotated this line, it will build successfully, will annotating this line lead to any bad result?
how to fix this error appropriately?
if i first annotate the line build project successfully, then unannotate the line, the project can still build successfully.
but if do nothing at first time, project cannot be built because of mentioned error.
steps to reproduce the behavior: 1.
`conda create -n test_load_cuda python=3.7 && conda activate test_load_cuda` 1.
`conda install pytorch-nightly cudatoolkit=9.0 -c pytorch` 1.
`ld_debug=libs python -c "import torch; torch.rand(1, device= \'cuda \')" 2>&1 | grep libcudart` phofcode if there is no cuda available in the loader path, pytorch does indeed load the right one: phofcode
steps to reproduce the behavior: 1. define a model: phofcode 2. run export: phofcode 3. notice an empty file created on disk, model hasn 't been serialized i ran the above steps in a jupyter notebook.
i ran later the same steps in python program and noticed this being printed to std err: phofcode so we know what 's going on.
steps to reproduce the behavior: 1. on "new deep learning vm deployment" select "intel optimized base 9.2" 1. deploy and ssh into the machine 1.
``nvidia-smi`` shows cuda version is at 10.0
steps to reproduce the behavior: 1.
1. this is my code.
import torch.nn as nn import torch import torch.nn.functional as f class focalloss(nn.module): def __init__(self, alpha, gamma): super(focalloss, self).__init__() self.alpha = alpha self.gamma = gamma def forward(self, preds, targets): batch, classes = preds.shape onehot_target = torch.zeros(batch, classes, dtype=torch.float32, device=preds.device) targets] 1.0 prob preds.sigmoid() pt prob * onehot_target + (1-prob) * (1-onehot_target) # pt p if t > 0 else 1-p weights self.alpha * onehot_target + # w alpha if t > 0 else 1-alpha weights weights * (1-pt).pow(self.gamma) loss target=onehot_target, weight=weights, reduction= 'none ') loss loss / batch return loss
the following model is the one in phofurl but i just inserted torch.pow().
steps to reproduce the behavior: 1. use cuda backed tensor 2. in= { tensor };` 3.
`auto test = torch::stack(in)` 4. experience crash
steps to reproduce the behavior: phofcode `
steps to reproduce the behavior: phofcode the above is the expected behavior.
however, phofcode i didn 't quite understand how this value is calculated, as i suppose the behavior on cpu and gpu should be consistent?
when giving inputs with correct shape, the results on cpu and gpu tensors seem consistent.
steps to reproduce the behavior: 1. define a model: phofcode 2. run export: phofcode fails with: phofcode
steps to reproduce the behavior: follow on this page : phofurl 1. conda install numpy pyyaml mkl mkl-include setuptools cmake cffi typing 2. upgrade visual stdio 2017 15.9.11, vc++ 2017 version 15.7 v14.14 toolset 3. for building against cuda 8.0 visual studio 2015 update 3 (version 14.0), and the patch are needed to be installed too.
**download this patch** 4. without download cuda with nsight compute , because i have cpu only 5. open cmd and run the following phofcode 6. python setup.py develop
on a machine with at least two gpus: phofcode should print "1" indicating the failure on the 2nd gpu, followed by a stack trace: phofcode
phofcode phofcode (on pytorch master 1c836e7b)
steps to reproduce the behavior: 1. python setup.py install 1.
steps to reproduce the behavior: phofcode i'm encountering nan's during backprop during training of a network with weight normalization.
from this seemingly related thread it sounds like the advice is to add an eta to the norm, but in this case the norm is generated in pytorch's c++ implementation and i don't see an obvious way to do this.
code to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: 1. create several streams 1. assign work to be done in each stream (e.g.
fourier transforms) 1. call at the very end 1. run `watch -n 1 nvidia-smi` to see gpu utilization time execution to compare explicitly serial code phofcode
steps to reproduce the behavior: 1. complicated to reproduce but does reproduce every time.
need specific model and specific input size.
steps to reproduce the behavior: 1. delay load libtorch.dll (or possibly even just caffe2.dll) 2. unload the library.
steps to reproduce the behavior: 1. the easiest way to repro this issue is by updating one of the existing test points.in the file change lines 62-65 from this: phofcode to the following ternary op: = 0.0 if self.momentum is none else self.momentum` 2. run test point in test/test_jit.py: `python test_jit.py 3. the test will fail, even though functionally two code pieces are functionally same.
steps to reproduce the behavior: 1. create a demo model and export it on gpu phofcode 2. try to load the model and execute on cpu phofcode error phofcode
i managed to create this mcve.
this does nothing more than 1. define my own convolution block (`convblock`) 2. define a function which will be executed by another thread 3. make the main thread and the subthread perform the exact same operation note that the two threads have their own instance of `convblock`.
thus i think it 's expected that feed forwarding through these networks separately should be thread safe.
phofcode once run (i 'm on macos 10.14.3), result looks something like phofcode
steps to reproduce the behavior: try to compile a c++ extension on windows without setting cxx.
steps to reproduce the behavior: 1. download latest windows nightly 2. try converting a tensor from blob as torch::kcuda
steps to reproduce the behavior: 1. run the following code with pytorch installed with pip import torch from kymatio import scattering2d scattering = scattering2d(j=2, shape=(32, 32)) x = torch.randn(1, 1, 32, 32) sx = scattering(x) print(sx.size())
steps to reproduce the behavior: 1. torch.randn(5) # `torch.tensor([-0.5328, 0.2653, -0.1581, -0.1845, -1.3954])` 1. min = t.min() # `tensor(-1.3954)` 1. t2 = torch.tensor(-1.3954) # `tensor(-1.3954)` 1. torch.equal(t2, min) # `false` but if i donot use `torch.randn` and use a defined tensor like `torch.tensor([-0.5328, 0.2653, -0.1581, -0.1845, -1.3954])` and repeat the same, i get `torch.equal()` as `true`
run the code below to reproduce the bug.
this minimum working example python script replicates the results: phofcode
steps to reproduce the behavior: 1. uninstall all cuda versions, nvidia drivers 2. reinstall cuda 10.1, cudnn 7.5.0 3. make a fresh conda environment 4. git clone --recursive phofurl 5. python setup.py install phofcode
`git clone --recursive phofurl 2.
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. run code: phofcode 2. stack trace for min/max: phofcode 3. stack trace for ceil: phofcode
steps to reproduce the behavior: 1. install cuda >= 9.0 2. torch_cuda_arch_list=all cmake -duse_cuda=on ..
steps to reproduce the behavior: 1. build static libtorch on windows 2. attempt to load model model = torch::kcuda);`
steps to reproduce the behavior: 1. compile latest master on windows as static
steps to reproduce the behavior: 1. set up env variable `master_addr` `master_port`, save the following code as `main.py` phofcode 2. run the code with `python main.py --rank 0` and `python main.py --rank 1` btw, when i execute this code manually in `ipython`, i found the all_gather quickly go through, but it stuck when trying to print tensor
minimal example below which works on cpu/single gpu but throws an error on two (or more) gpus.
steps to reproduce the behavior: phofcode ~ ~
steps to reproduce the behavior: 1.create a net with very large convs (10 convs of 500 features and kernel which is 20 timesteps long i think should be enough) with padding of 10 on each side.
2. i am training on a ctc loss but i don 't think thats the issue since the copy is whats "stalling".
the sequence len can reach 1000 regularly.
- pytorch version (e.g., 1.0): 1.0.1 - os (e.g., linux): windows 10 - how you installed pytorch (`conda`, `pip`, source): pip - build command you used (if compiling from source): python version: 3.6.3 cuda/cudnn version: 9.0 gpu models and configuration: gtx 1070 ti 8gb any other relevant information:
steps to reproduce the behavior: i have compiled a minimal cpu and gpu gist that should reproduce this issue: cpu phofhyperlink gpu phofhyperlink the cpu gist uses the memory-profile package, so that will need to be installed with pip
steps to reproduce the behavior: 1. build on windows with cmake -dtorch_static=on
phofcode the output is: phofcode
phofcode by inspecting `f.code`, we see that it is performing the equivalent of `x[1][2]`: phofcode it should instead dispatch to `index_fill_` or `index_copy` (or more generally, `index_put_`).
note that the same (wrong) behavior happens for selection: phofcode note that if instead we pass `int64` tensors for the indices, everything work as expected.
steps to reproduce the behavior: 1. install flair (pip install flair) 1. refer to the 2 files in the gist here: phofurl 1. when trying to run try.py observe error that 's thrown: phofcode
steps to reproduce the behavior: 1. create pytorch model: phofcode 2. convert it to onnx: phofcode 3. load onnx model: phofcode phofcode
steps to reproduce the behavior: phofcode
this is the behavior of the standard `pickle` module: phofcode phofcode phofcode phofcode pytorch works fine with `io.bytesio`, i get the same behavior: however, `unpicklingerror` is raised when using the serialization methods from pytorch on a regular file: note how read location inside file given by `b.tell()` results to be negative: `-425`.
steps to reproduce the behavior: 1. run dcgan example with nn.dataparallel file line 143, in forward outputs = inputs, kwargs) file line 153, in parallel_apply return parallel_apply(replicas, inputs, kwargs, file line 73, in parallel_apply thread.start() file line 847, in start ()) runtimeerror: can 't start new thread
steps to reproduce the behavior: 1. build libtorch with caffe2 statically 2. try to use find_package(torch config)
steps to reproduce the behavior: 1. create sample app that loads a model in libtorch 2. have the cmakelists find_package(torch config) and link the app to torch_libraries 3. when compiling, notice undefined references code: phofcode phofcode
steps to reproduce the behavior: 1. use reflection pad 2d with an image that is 3x width than height `runtimeerror: argument #4: padding size should be less than the corresponding input dimension, but got: padding (46, 46) at dimension 3 of input [1, 3, 128, 36]`
steps to reproduce the behavior: 1. create a task that uses embeddings.
1. pick an infrequent word that is not part of every batch.
1. check the embedding weigths and gradients before and after an update of the network.
after the word was updated once, its weights will continue to change after every batch, no matter if it was part of it or not.
you can find a naive minimal example as a gist here phofhyperlink or as a google colab notebook here phofhyperlink .
in my example i have four sentences, and example word (etter in this case) only occurs in sentence number three.
in first epoch, embedding of for etter does not change for sentences one and two (as expected).
in sentence three it is updated, also as expected.
however, from now on it continuously changes at every update, no matter for what sentence: this is part output my minimal example: phofcode
steps to reproduce the behavior: phofcode output: phofcode
conda install mkl mkl-include python setup.py develop
compile from source on gtx1080ti with cuda 10. with use_nccl=1 vs with use_nccl=0.
then initialize any cuda tensor.
steps to reproduce the behavior: 1.simply run the provided code below import torch import torch.nn as nn class network(nn.module): def __init__(self): super(network, self).__init__() self.pad = nn.reflectionpad2d(1) def forward(self, input): x_in = input.sub(127.)
steps to reproduce the behavior: 1. just call 1.
))` typeerror: float() argument must be a string or a number, not 'tuple'
code to reproduce: phofcode commands to reproduce the error (on the same multi-gpu server): phofcode error trace: phofcode these commands work as expected: phofcode
steps to reproduce the behavior: 1. clone the code in the gist at phofurl via `git clone phofurl catbug`.
2. run `cd catbug; python3 setup.py build develop`.
the relevant point in the backtrace is at phofcode
steps to reproduce the behavior: import torch import torch.nn as nn dummy_input = torch.randn(1, 3, 227, 227, device= 'cuda ') model = nn.localresponsenorm(5, alpha=0.0001, beta=0.75, k=1.0).cuda() torch.onnx.export(model, dummy_input, "output/some.onnx", verbose=true, converting this code to onnx produces a type mismatch error.
after debugging, it appears that the scalars are being converted as tensors of type double instead of float for add and pow operators from lrn in symbolic.py.
however, since the scalars are of type float, the tensor type should be float as well, as explained in this note phofurl using tensors for beta and k solves mismatch issue.
(so using beta=tensor([0.75]), k=tensor([1.0]), instead of beta=0.75, k=1.0)
steps to reproduce the behavior: ` import torch w = torch.randn(2, 1024, 3, 3) torch.norm(w, p="fro", dim=(2,3))
phofcode gives the following output: phofcode
phofcode also the default reduction doesn 't play well with zero length.
i did something like this 1.pip install spacy 2.pip uninstall spacy 3.pip install spacy==2.0.12 4.pip uninstall spacy 5. pip install spacy phofcode
on certain hardware inplace started failing since 1.0.1, works fine with 1.0.0 here are 2 identical tests, except the first one uses inplace funcs `tanh_`, `sigmoid_` and the second one doesn't.
both tests should print only 0's (used print instead of torch.allclose() because the assert is loud and messy).
but on my hardware and (occasionally on azure ci) the inplace test fails most of time, printing non-zero in last 2 prints (one or both).
when tensor is large failures are more consistent.
i added my cpu-info at end of this report.
steps to reproduce the behavior: 1. copy the code snippet into ** reproduce.py ** , and run ``python reproduce.py``.
the code snippet to reproduce the error: python #!
/usr/bin/python # -*- coding: utf-8 -*- import argparse import gc import os import time torch torch.distributed as dist torch.nn.functional as f from torch.multiprocessing process from torch.utils.data dataloader from torch.nn.parallel distributeddataparallel, dataparallel from distributedsampler def if device is none: device = print( '
steps to reproduce the behavior: 1. initialize mymodel with dropout set to true for convblock modules 2. do .backward() pass 3. print out grad norms conv class: phofcode model class: phofcode printing out grad norms: phofcode
steps to reproduce the behavior: 1. clone the code in the gist at phofurl e.g.
via `git clone phofurl tensorbug`.
2. run `python3 setup.py build develop` to build the extension.
the setup that breaks it for me is ubuntu 18.04.1 lts using gcc gcc ubuntu 7.3 and pytorch-nightly == it works on macos using clang.
the behavior is stochastic, but it breaks in 9 out of 10 cases for me.
when it breaks, relevant backtrace is phofcode see phofurl for full copy and way of retrieving it.
1. i am using a charrnn model saved using `torch.jit.trace` -> code is available here phofhyperlink 2. trace model is then loaded into this script and mixing up with `@script` functions phofcode 3. executing above script will throw `indexerror: _map_base::at`
steps to reproduce the behavior: 1.
= true random.seed(1) torch.manual_seed(1) np.random.seed(1) 2. define a module as: nn.lstm(input_size=256, hidden_size=256, num_layers=3, dropout=0.1, bidirectional=true, ) 3. training with the defined module multiple times
phofcode results in `[1] 14965 segmentation fault (core dumped) python gesv_bug.py`
i am working with 0.4 pytorch on the recent (translation model)[ phofurl
run the code above on single gpu.
steps to reproduce the behavior: --profile-from-start off python cudagetdevice.py output: phofcode
steps to reproduce the behavior: 1. install docker 2. run `./test_difference.sh` in phofurl
1. install anaconda and eclipse 2. install pytorch using conda install pytorch-cpu torchvision-cpu -c pytorch 3. copy and paste code on eclipse ide import torch import numpy as np a = test_torch = torch.log(a) + torch.add(a,a) error: undefined variable from import:log
steps to reproduce the behavior: 1. docker pull 2. nvidia-docker run --entrypoint="/bin/bash" -it --ipc=host --privileged --shm-size 8g --device=/dev/kfd --device=/dev/dri --runtime=nvidia 3. pip install future networkx protobuf 4. python --train_data null --batch_size 64 --epoch_size 6400 --num_epochs 1 --num_gpus 1 --float16_compute --dtype float16 console output: ignoring as it is not a valid file.
ignoring as it is not a valid file.
ignoring as it is not a valid file.
ignoring as it is not a valid file.
[e cpu feature avx present on your machine, but the caffe2 binary compiled with it.
it means you may get the full speed of your cpu.
[e cpu feature avx2 present on your machine, but the caffe2 binary compiled with it.
it means you may get full speed of your cpu.
[e cpu feature fma present on machine, but caffe2 binary compiled with it.
it means you may get full speed of cpu.
on gpus: [0] epoch size: 6400 model for devices: [0] input and model training operators for gpu : 0 gradient operators gradient all-reduces for syncsgd operators for updating params optimizer builder function initial parameter sync warning:memonger:note: executing memonger to optimize gradient memory info:memonger:memonger memory optimization took secs epoch 0/1 [e net_async_base.cc:377] [enforce fail at operator.h:1116] .
unsupported type tensor: c10::half error from operator: "gpu_0/conv1" "" type: "spatialbn" "order" s: "nchw" "use_cudnn" "ws_nbytes_limit" "epsilon" f: 1e-05 "momentum" f: 0.9 "is_test" 0 device_option device_type: device_id: }frame #0: ()>::operator()() const 0x11 #1: const*, int, char const*, std::string const&, void const*) 0x49 #2: #3: #4: int) 0x144 #5: #6: long) 0x263 #7: 0xb8678 #8: 0x76ba #9: clone 0x6d
**c++ source** phofcode ** cmakelists.txt ** phofcode **error message** phofcode
phofcode the error console output is: phofcode
refer: phofurl install: `pip install pytorch-pretrained-bert` phofcode training: phofcode
steps to reproduce the behavior: 1. git clone --recursive phofurl 2. cd pytorch 3. git submodule update --init 4. chmod +x 5.
phofcode run with `pytorch_jit=0 python ones_like_test.py` works fine.
`pytorch_jit=1 python ones_like_test.py` gives error phofcode
steps to reproduce the behavior: phofcode error: phofcode
execute the following command with mnist dataset: `python resnet50_trainer.py --train_data ~/mnist_train_lmdb --num_gpus 4 --batch_size 64 --num_channels 1`
note: you need >8 gb on your gpu to run this example phofcode
note: you need ~10 gb on your gpu to run this example phofcode
run this script phofcode steps to reproduce the behavior: 1. run the above script.
lldb backtrace at: phofurl points at a gil acquisition issue.
steps to reproduce the behavior: 1. uninstall all cuda versions, nvidia drivers 2. reinstall cuda 10.1, cudnn 7.5.0, nccl 2.4.2 3. make a fresh conda environment 4.
`git clone --recursive phofurl 5.
`python setup.py install` end of the error message is as follows: phofcode output of build.log: phofurl
: to make it easier for debugging this issue, any keras tensorflow package can be used, i guess.
but, here 's the one phofhyperlink i was using.
to reproduce, it is possible to write a `dataset` class that contains a function to generate 1000 words (strings), then, use the function `vectorize_words` to produce the `target` value in my code below, by defining another class for this kers tf-backed implementation.
in the below code snippet, `word_str` is word, and data is a `pil` image related to that word.
i am using `resnet-152` from pytorch, but that is irrelevant as i noticed that program halts at line for `data, target, word_str in test_loader` during debugging and never gets next line moves `data` and `target` `device` (i am using gpu here).
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. use the following code to export a resnet101 model with modified dilation: phofcode 2. use the following code for python inference profiling: phofcode the output is phofcode the profile tracing file is: phofhyperlink the profile tracing screenshot is: image phofimage 3. use the following code for c++ inference profiling: phofcode the output is: profile tracing file is: profile_cpp_cpu.json.txt phofhyperlink profile tracing screenshot image phofimage
steps to reproduce the behavior: 1. taking a pretrained pytorch nn (e.g.
unet), trace it and save the script module.
2. load the script module n times, using libtorch and c++ interface, producing n module instance.
3. convert everything to use gpu.
setting any flags that might affect determinism and 4. using openmp to do forward computation in a multithread environment, with n max threads and each thread using its own module instance.
5. repeat several times compare the result.
phofcode and here is the modified convolution layer i used phofcode
phofcode when i did the same on another machine(pytorch 0.4.1, cuda 9.0) phofcode
i'm unsure how to create a minimal example with _working data_.
phofcode if instead i use threads, everything works: phofcode
steps to reproduce the behavior: 1. download this phofhyperlink by 20 (76.7 mib) sample matrix.
2. run code sample below with `matrix.npy` in working directory.
phofcode it gives error like: phofcode need to bisect and see whats going o
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1 install pytorch `1.0.0` or `1.0.1`.
2. run self-contained script: phofcode
steps to reproduce the behavior: 1. create a jit function in python phofcode 2. load and call the function in c++ api.
steps to reproduce the behavior: run the imagenet code in examples repository of pytorch
phofcode phofcode steps to reproduce the behavior: 1. run code above on latest pytorch branch released to pip
steps to reproduce the behavior: 1. define the above model.
1. train it for a while.
don't think it's relevant, but used an adams optimizer and can provide the objective function if needed.
*** edit: * the problem actually arises only when creating training data from numpy arrays and keeping track of epoch loss in an arguably inadequate way---see below.
code: phofcode gives me the error: > traceback (most recent call last): > file "<stdin>", line 1, in <module> > file line 260, in cuda > return self._apply(lambda t: t.cuda(device)) file line 117, in _apply file line 113, in flatten_parameters self.batch_first, runtimeerror: cudnn error: if i call `rnn.cuda()` a second time (without restarting the python kernel) it works without any errors: `lstm(10, 10)` but it always fails with the above stack trace when i try it the first time.
the same code works fine with other layers, e.g.
`linear = torch.nn.linear(10,10)` or `cnn = the rnncells also work, but for gru and lstm i get above error.
at moment i solve issue by catching error and calling ".cuda()" a second time: phofcode
run this script (notice that the only difference between `simplemodel1` and `simplemodel2` is whether `dim` is used): phofcode produces errors (snippet): phofcode
run the following script (environment details below): phofcode produces the following onnx program: phofcode `%1` is tensor of type `tensorproto.int64` (see the program print out).
however, `%1` is the second input to `block0`, which is required to be `tensor(bool)` by onnx spec phofhyperlink .
steps to reproduce the behavior: 1. train network on big data set with data.dataloader with big batch size, for which you require and dataparallel 2. observe /dev/shm until it is full
phofcode on the other hand, if the .to('cuda') is called on the wrapped tensor, everything works as expected.
phofcode os: ubuntu 16.04.5 lts gcc version: (ubuntu 5.4.0 cmake version: could not collect python version: 3.5 is cuda available: n/a cuda runtime version: 7.5.17 gpu models and configuration: gpu 0: geforce gtx 1070 nvidia driver cudnn could not collect versions of relevant libraries: [pip] msgpack-numpy==0.4.1 [pip] numpy==1.13.3 [pip] torch==1.0.0 [pip] torchvision==0.2.1 [conda] could not collect
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. build the code below 2. see the result of free memory of gpu here is my code phofcode
main.cpp phofcode cmakefile phofcode error: phofcode
steps to reproduce the behavior: 1. run the following code phofcode the stack trace: phofcode
1. download and run this script phofhyperlink to generate training data `traindata.pt`.
2. run the following script (adapted from this example phofhyperlink ), placed under the same directory as `traindata.pt` phofcode output errors: phofcode
install `torch` and navigate to e.g.
search for `c10::nullopt` in it.
steps to reproduce the behavior:
code input: phofcode output: phofcode code input: phofcode output: phofcode code input: output: code input: output:
steps to reproduce the behavior: phofcode
phofcode this happens because of a check in `new_with_dims_sparse` phofurl it's unclear to me if this check is necessary at all?
it does not specify the code source of the failure, however i am thinking it could be this (following) forward function on my python implementation due to the similarities with the error report: phofcode i think it is important to notice that on error "expected float(1, * 1083 * ,11)" id exactly 4 times larger than "found float(1, * 4332 * , 11)"
steps to reproduce the behavior: 1. create dummy model using the following code.
steps to reproduce the behavior: (pyt) install pytorch torchvision cudatoolkit=10.0 -c pytorch solving environment: done ==> warning: a newer version of conda exists.
<== current version: 4.5.12 latest version: 4.6.3 please update conda by running $ conda update -n base -c defaults conda
the latest reference to my code comes from a calling to this function: phofcode where phofcode and phofcode produces this error: phofcode
1. train a model using python pytorch and save it with `torch.save()`.
2. try to load the model in c++ libtorch using either or `std::ifstream is ("./location/model.pt", std::ifstream::binary)` the error trace in the torch::jit::load case is: > terminate called after throwing an instance of 'c10::error ' > what(): load: could not open file (load at > frame #0: std::string const&) + 0x45 in > frame #1: const&, + 0x1e8 in frame #2: main + 0xf6 (0x4f358e ./yolo-app) frame #3: __libc_start_main + 0xf0 #4: _start 0x29 (0x4b0fc9 ./yolo-app) aborted (core dumped) in the std::ifstream case is: terminate called after throwing an instance of 'c10::error ' what(): [enforce fail at inline_container.cc:130] .
pytorchstreamreader failed checking magic number.
#0: const*, int, char const*, std::string const&, void const*) 0x59 #1: const*) 0xe5 #2: std::istream*) 0x199 #3: 0xa9 #4: main 0xe5 (0x4f357d ./yolo-app) #5: __libc_start_main 0xf0 #6: _start 0x29 (0x4b0fc9 ./yolo-app) aborted (core dumped)
steps to reproduce the behavior: 1. c++ code that loads model phofcode 2.error message phofcode 3. python model <details> <summary>click to show python model</summary> phofcode </details>
steps to reproduce the behavior: phofcode
steps to reproduce the behavior (paste and run): phofcode on my machine, for pytorch 1.0.1.post2 this will output: phofcode whereas for pytorch 0.4.1 this outputs: phofcode
steps to reproduce the behavior: 1. create a model with a dropout module in pytorch 2. export the model using onnx 3. export the model as protobuf files using the caffe2 mobile exporter 4. load model and try to execute it in caffe2 using workspace.predictor.
you should see something as following error: phofcode
phofcode tuple indices must be integer constants: @torch.jit.script_method def forward(self, image): # type: (torch.tensor) -> torch.tensor for i in range(3): image[:, i] = image[:, ~~~~~~~~~~~ <--- here return image ``
steps to reproduce the behavior: 1. compile for macos 10.13 with cuda as detailed in `contributing`.
- i exported `cudnn_library` and `cudnn_include_dir` as well.
i get the following error: phofcode whereas `cudart` definitely exists: phofcode
for example, consider the following minimal non-working example, which implements the custom function `y = factor*sin(x)`: phofcode calling it with `factor` passed positional, or not at all, works fine: phofcode however, passing it as a keyword argument results in an error: phofcode
steps to reproduce the behavior: git clone --recursive phofurl cd pytorch set files (x86) microsoft visual set cmake_generator=visual studio 15 2017 win64 set distutils_use_sdk=1 call x64 -vcvars_ver=14.16 python setup.py install phofcode
steps to reproduce the behavior: the python model's input is defined like so: phofcode the c++ code to format the data: method param: `const torch::tensor>> input_data` phofcode
phofcode runtimeerror: expected an expression of type int but found number: @torch.jit.script_method def forward(self): # type: () -> list[int] ids_for_cur_timestep = []) # self.cur_id.item())) ~~~~~~~~~~~~~~~~~~~~~ <--- here return ids_for_cur_timestep ``
simply let me configure it just doing cmake .. from "build" subdirectory
steps to reproduce the behavior: 1. conda create -n pytorch-master python=3.7 2. source activate pytorch-master 3. conda install pytorch-nightly -c pytorch $ conda install pytorch-nightly -c pytorch solving environment: done ==> warning: a newer version of conda exists.
<== current version: 4.5.12 latest version: 4.6.2 please update by running $ update -n base -c defaults
steps to reproduce the behavior: 1. run the attached script.
(might need to install tqdm) i reproduce the problem using the following script: phofcode fails on nightly preview version: phofcode also on 1.0.1 phofcode but works correctly on 0.4.1 (which doesn't have mkldnn): (i phofcode
steps to reproduce the behavior: phofcode `out[26]: tensor([nan])` phofcode `out[25]: tensor([10.
steps to reproduce the behavior: 1.
`x = torch.tensor([1, 2, 3, 4])` 3.
steps to reproduce the behavior: 1. write any c++ extension for pytorch 2.
`$ cc=clang cxx=clang++ no_cuda=1 python setup.py install` 3. or: `$ no_cuda=1 python setup.py install`
steps to reproduce the behavior: 1. run the code phofcode
what if i want to define a field as a property to provide a clear way to override it in class that inherits from it?
phofcode output: phofcode there is no `l2`
minimal example (c++ api): phofcode
phofcode the output is phofcode cc: @suo @jamesr66a @zdevito @pritamdamania87
steps to reproduce the behavior: - install pytorch from pypi on linux with python 3.6, specifically these wheels were installed: ` phofurl and ` phofurl - run `cuda_visible_devices= omp_num_threads=1 ipython` - in ipython, run: phofcode - still in ipython, run: `%timeit with torch.no_grad(): model(torch.zeros(1, 3, 224, 224))`
steps to reproduce the behavior: phofcode
*test 1:* if the following is `!= 0`, the rng sucks: *test 2:* if the following is `== -inf`, the rng sucks:
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode outputs phofcode
steps to reproduce the behavior: import torch def samples=channels*seqlen m = return data #this may use up all ram!!!!!!
it requires a small pickle file containing one single minibatch of data (replacing it by a random tensor did not reproduce the problem).
the file is linked here.
minibatch.pkl.zip phofhyperlink phofcode if the line = false` is not commented (and thus if i do not use cudnn), the output is phofcode if i comment that that line (which means that i am using cudnn), output is: phofcode
steps to reproduce the behavior: 1. import torch 2. import pathlib 3. f = 4. params = torch.load(f) then, phofcode it operates correctly as below: `torch/serialization.py` :: 365 line phofcode
i have seen this on 1080, 1080ti, etc.
phofcode you should see here we do not call contiguous after transpose.
this should lead to slow computation slow without contiguous 56.15ms here we call contiguous after transpose.
this should lead to fast computation fast with contiguous 0.38ms ``
steps to reproduce the behavior: run the following code: sp_mat = torch.longtensor([[0, 0, 1], [0, 1, 2]]), torch.floattensor([1, 2, 3]), torch.size([3, 3])) mat = 3)) res = torch.sparse.mm(sp_mat, mat.t()) print(res) res.sum().backward() this will work when changing `mat.t()` to `mat`.
phofcode give 1, 0 in the first and 1, 1 in the second case.
the requires_grad is to print the grad_fn pointing to mkldnn.
my code is like this: phofcode the error message is: phofcode this is followed by many tensor values.
code below: phofcode <br> output for a single gpu calling `gradient_penalty` function phofcode <br> multigpu calling `gradient_penalty` function phofcode <br> multi-gpu calling `autograd.grad` inline (not inside a function) phofcode <br>
error: redefinition of 'info' info = 0, // base_logging::info; note: previous definition is here const int info = 0; ``
python 3.6.7 | packaged by conda-forge | (default, nov 21 2018, [gcc 7.3.0] on linux >>> import as backend warning:root:this caffe2 python run does not have gpu support.
will run in cpu only mode.
>>> import torch traceback (most recent call last): file "<stdin>", line 1, in <module> file line 80, in <module> from torch._c import * importerror: undefined symbol: when running, the below python 3.6.7 | packaged by conda-forge | (default, nov 21 2018, [gcc 7.3.0] on linux >>> from caffe2.python import onnx >>> from onnx backend as backend torch no error was observed during importing, but the wrong onnx module is imported this way.
it seems pytorch and caffe2 not playing nice... :(
cpu rounding: >>> torch.tensor([1.5, 2.5, 3.5, 4.5]).round() **tensor([2., 2., 4., 4.
])** gpu rounding: >>> torch.tensor([1.5, 2.5, 3.5, 4.5]) ** .cuda() ** .round() **tensor([2., 3., 4., 5.
steps to reproduce the behavior: using the example on phofurl phofcode
steps to reproduce the behavior: 1. download the windows libtorch nightly binaries: phofurl 2. unzip files.
3. unzipped files are just
steps to reproduce the behavior: with zsize >=4 (input size this code results in `cudnn error: this is not the case for input size for example.
eliminating all `.cuda` occurences and commenting out the code runs smoothly on cpu.
steps to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: 1. please execute the test script below (with more than 4 gpus available).
steps to reproduce the behavior: install stable, non-cuda torch, i.e.
run the code below to reproduce phofcode the error messages are below: phofcode
phofcode crashes with the following error: phofcode if i set batch_size to - 1 or do operation on a cpu everything works fine.
behavior is very similar to the torch.inverse bug #13276 , but with a different function and a different error message.
steps to reproduce the behavior: phofcode output: phofcode
steps to reproduce the behavior: 1. create a random half precision matrix 2. multiply a random half precision vector by it 3. do the same as above for 32 bit floats 4. notice the difference
python code phofcode cpp code phofcode error message phofcode
steps to reproduce the behavior: the following snipped: phofcode results in phofcode
phofcode this breaks as soon as i use pytorch_jit=0.
it should just ignore the kwarg.
not constant phofcode phofcode constant phofcode phofcode update: seems like the right way to use a tensor attribute is to declare it to be a buffer torch.ones(100, 100, dtype=torch.float, device='cuda'))` please improve the error message when a user tries to use a tensor as an attribute
steps to reproduce the behavior: code fragments phofcode phofcode phofcode phofcode
steps to reproduce the behavior: 1.
here 's a small c++ program compiled with latest c++ distribution from pytorch home page.
i provide some code to reproduce the bug: 1. image version phofcode 1. a simpler matrix version this code: phofcode would output (wrong): phofcode but change the permute line from phofcode to will output (correct): note that when the permute() failed to managed the memory, it always returned "correct" shape of permuted tensor.
steps to reproduce the behavior: 1. git pull the repo.
2. build using the command: ` docker build -t pytorch -f .` 3. create an image: `nvidia-docker run -e lang=c.utf-8 --name ulmfit-pytorch -e lc_all=c.utf-8 -it -v -v --net=host pytorch` this throws error
steps to reproduce the behavior: 1. install linuxbrew and anaconda on ubuntu 14.04 2. install gcc@7, cmake and other building tools from linuxbrew.
3. phofcode 4. export cc, cxx and cuda_home correctly, then run `git clone` and `python setup.py install` to build.
5. fix all issues on compilation process.
including: - move magma headers to include path manually - replace g++-7 with this wrapper script phofhyperlink , where realg++-7 is real g++.
- remove `-i/usr/include` from command line manually once `nvcc` fails.
repeat several times to fix all compilation errors manually.
6. the installation process succeeded!
steps to reproduce the behavior: python -m torch.distributed.launch --nproc_per_node=2 debug_dist.py` run following codes with the command above.
phofcode phofcode phofcode phofcode tensor([[[0.5881, 0.0673, 0.6110], [0.8276, 0.1188, 1.0196]]]) tensor([[[0.5881, 0.0673, 0.6110], [0.8276, 0.1188, 1.0196]]]) tensor([[[0.5881, 0.0673, 0.6110], [0.8276, 0.1188, 1.0196]]], tensor(0., grad_fn=<maxbackward1>) tensor(0.)
tensor([[[ 0.5952, -0.1171, -0.6075], [ 0.7475, 0.1979, 1.5212]]]) tensor([[[-0.0508, -0.1854, -1.2418], [ 1.1893, 0.2983, 2.3101]]]) tensor([[[ 0.5952, -0.1171, -0.6075], [ 0.7475, 0.1979, 1.5212]]], tensor(0., grad_fn=<maxbackward1>) tensor(0.7889) tensor([[[ 0.5952, -0.1171, -0.6075], [ 0.7475, 0.1979, 1.5212]]]) tensor([[[ 0.5952, -0.1171, -0.6075], 0.7475, 0.1979, 1.5212]]]) 1.5212]]], tensor(0., grad_fn=<maxbackward1>) tensor(0.)
tensor([[[0.4183, 0.0493, 0.4442], [0.9437, 0.1451, 1.2270]]]) tensor([[[0.5881, 0.0673, 0.6110], [0.8276, 0.1188, 1.0196]]]) tensor([[[0.4183, 0.0493, 0.4442], [0.9437, 0.1451, 1.2270]]], tensor(0., grad_fn=<maxbackward1>) tensor(0.2074) tensor([[[0.4183, 0.0493, 0.4442], [0.9437, 0.1451, 1.2270]]]) tensor([[[0.4183, 0.0493, 0.4442], [0.9437, 0.1451, 1.2270]]]) 1.2270]]], tensor(0.)
steps to reproduce the behavior: 1. create a neural net with batch norm 2. send in an input vector with a batch during train, and one without a batch during eval
test_indexing = this gives the message `indexerror: index 7 is out of bounds for dimension 0 with size 2`.
this gives the error `indexerror: index 7 is out of bounds for dimension 0 with size 3`
output = torch.randn(5, 2, requires_grad=true) target = torch.empty(5, target[0] = criterion = nn.crossentropyloss() loss criterion(output, target) print(loss)
try to compile the following code: phofcode
phofcode steps to reproduce the behavior: phofcode result: >... train iterations: 2340, added mem: m train iterations: 2360, added mem: m train iterations: 2380, added mem: m train iterations: 2400, added mem: m 2420, 2440, 2460, 2480, 2500, 2520, 2540, ...
running the following script phofcode
steps to reproduce the behavior: phofcode provides the following trace: phofcode
steps to reproduce the behavior: 1. build some sparse tensor.
in the following `a` has shape and layout `sparse_coo`.
in the following, `x` has shape `(1000)`.
3. observe `einsum` breaking when doing `einsum("ij,j->i", (a, x))`.
observe `einsum` being fine with `einsum("ij,j->i, (a.to_dense(), x))`.
`runtimeerror: sparse tensors do not have strides`
tried to allocate 512.00 mib (gpu 0; 15.75 gib total capacity; 14.26 gib already allocated; 362.94 mib free; 14.24 mib cached)
install pytorch and run the following code phofcode
steps to reproduce the behavior: if you have a perfect uniform vector, and you apply log softmax to it, and backprop the marginal, then the gradients should be 0. for example: phofcode but it is not the case if you use log_softmax: phofcode granted, gradients are small, but for optimizers like adam, especially at initialization, no gradient means 0 update, but with a larger learning rate, a small gradient can provide a large update.
does anyone know why there is any gradient at all from log_softmax?
the function also behaves correctly when matrix is small.
for example if you do torch.ones([2,100]) etc, then log_softmax is fine.
steps to reproduce the behavior: phofcode
phofcode result: phofcode some notes: 1. the type for the bias doesn't seem to matter.
`out2` and `out3` match the result for a keras convolution layer with the same weights.
steps to reproduce the behavior: consider the following example: phofcode the output is: phofcode note that computed hessian is a zero matrix, which is unexpected.
also note the `x**1` thing, without it, just `x`, there is an error: phofcode
steps to reproduce the behavior: 1. d = torch.arange(8, dtype= 2. torch.norm(d, p=1, dim=(1,2)) error trace: typeerror traceback (most recent call last) in <module> ----> 1 in norm(input, p, dim, keepdim, out) 730 else: 731 if out is none: --> 732 return p, dim, keepdim=keepdim) 733 return p, dim, keepdim=keepdim, out=out) 734 typeerror: norm(): argument 'dim ' (position 3) must be int, not list
here is the full c++ program i am running: phofcode
i install pytorch use: python setup.py install and have this error.
[ 66%] building cxx object [ 66%] building cxx object [ 66%] building cxx object [ 66%] building cxx object in constructor const string&, bool, const string&): error: use of deleted function ist = in file included from from from from note: is implicitly deleted because the default definition would be ill-formed: class basic_istringstream : public basic_istream<_chart, _traits> error: use of deleted function in file included note: is implicitly deleted because the default definition would be ill-formed: class basic_istream : virtual public basic_ios<_chart, _traits> please submit a full bug report, with preprocessed source if appropriate.
preprocessed source stored into /tmp/cco989cm.out file, please attach this to your bugreport.
error: cannot create report: [errno 17] file exists: recipe for target failed make[2]: * * * error 1 recipe for target failed make[1]: * error 2 makefile:140: recipe for target 'all' failed make: [all] error 2 failed to run 'bash --use-cuda --use-fbgemm --use-nnpack --use-mkldnn --use-qnnpack caffe2'
steps to reproduce the behavior: phofcode
change crop size to `334` on phofurl can reproduce the problem to some extent, i.e.
7.5gb at beginning and 4.5gb at stable.
my training scripts only has a more complicated dataset process.
steps to reproduce the behavior: 1. run the code snippet below phofcode
steps to reproduce the behavior: 1. download 1.0 release or latest nightly windows libtorch binaries from pytorch.org 2. extract files.
3. check phofcode (1.0 stable) or phofcode (latest nightly) 4. observe phofcode 5. compile the following test program, it will print "no cudnn?"
steps to reproduce the behavior: 1. create batchnorm layer on gpu 1. apply it on cpu this segfaults: phofcode
minimal example to reproduce: phofcode
steps to reproduce the behavior (seems to require numpy 1.15, error disappears under numpy 1.14.0 !
): 1- a = torch.randn(1, 3).byte() % 2 2- np.any(a) phofcode
steps to reproduce the behavior: 1. download the official reinforcement learning tutorial (python file): phofurl phofhyperlink 2. set num_episodes to a large value (e.g.
5000) to see the increasing memory consumption 3. set device to cpu (i had only cpu available, but maybe the same happens with gpu)
steps to reproduce the behavior: just run the code below.
steps to reproduce the behavior: phofcode 1. run this snippet with conda pytorch 1.0.0 or latest libtorch zip 1. you will see oom or memory increasing in top 1. i also tested model loading but it did not leak the memory
steps to reproduce the behavior: i modify the example by adding the save functionality as follows: phofcode it generates the following error phofcode
steps to reproduce the behavior: 1. use jit within a qt application: phofcode error message: > terminate called after throwing an instance of > what(): > attribute lookup is not defined on builtin: > size_prods_8 = torch.mul_(size_prods_7, _10) size_prods_9 = torch.mul_(size_prods_8, _11) input_12 = true, true) self = self.conv_4.conv.weight, self.conv_4.conv.bias, [1, 1], [0, 2], [1, 1], false, [0, 0], 1, false, false, true) _12, _13, torch.split(self, 25, 1) _14 [torch.add(_12, input_8, alpha=1), torch.add(_13, input_8, alpha=1)] input_13 torch.cat(_14, 1) input_14 0., 0.)
input_15, _15 [2, 2], [2, 2], [0, 0], [1, 1], false) _16 constants.c0, alpha=1) ~~~~~~~~~~~~~~~~~~~~~~ <--- here input_16 true, true) input_17 self.conv_5.conv.weight, self.conv_5.conv.bias, [1, 1], [4, 0], false, [0, 0], 1, true) input_18 0., 0.)
_17 constants.c0, alpha=1) input_19 true, x_1 self.conv_6.conv.weight, self.conv_6.conv.bias, 4], 1, input_20 torch.add(x_1, input_15, alpha=1) input_21 0., 0.)
_18 constants.c0, alpha=1) stack trace: 1 __gi_raise raise.c 51 2 __gi_abort abort.c 79 3 ??
5 std::terminate() 6 __cxa_throw 7 std::string const&) 8 unsigned long, 9 unsigned long, 10 11 bool) 12 bool) 0x7ffff3b56cbe 13 unsigned long) 14 unsigned long, 15 const&) 16 17 (std::string const&, torch::jit::sourcerange const&)>, 18 const&, (std::string const&, torch::jit::sourcerange const&)>> const&, const 19 20 (std::string torch::jit::sourcerange const&)>> 21 std::string std::vector<at::tensor> const&) 0x7ffff3a55cae 22 torch::jit::(anonymous const&) 23 torch::jit::(anonymous const&)>, 24 25 26 test_function() 27 app::run app.cpp 35 28 main main.cpp 5
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode error: phofcode
steps to reproduce the behavior: copy paste the following in a notebook: phofcode (1) for `device = cpu`, there is an error peak around 0.55 cpu_beta phofimage (2) for `dvice = cuda`, there is a bias towards 1. cuda_beta phofimage
phofcode it can only be reproduce in ms.windows environment.
my windows version is: my python version is: 3.6.7 oct 20 2018, [msc v.1900 64 bit (amd64)] steps to reproduce the behavior: 1. run above code in ms. windows 506 data_type(size), location) 507 storage = 508 if view_metadata is not none: runtimeerror: $ torch: invalid memory size -- maybe an overflow?
on servers with >=2 gpus, under pytorch 1.0.0 steps to reproduce the behavior: 1. use the code in below: phofcode then run the code with python dp_test.py" in console.
under pytorch 1.0.0, i get: phofcode however, under pytorch 0.4.0, i get: phofcode
load the `cmakelists.txt` along with the `mnist.cpp` and `download_mnist.py` files in a folder and start a project in `eclipse ide for c/c++`, version (4.9.0)`.
in build->tool chain editor**, set `cmake builder (gnu make)` and select `mingw gcc`.
then, in general->preprocessor include paths macros etc.->providers** select parser [shared]` and move it up, as it is explained in phofurl then, you can compile the `mnist` project without any error.
but, when you run it get `<terminated> (exit value 390) a.exe [some address]`.
i tried to debug this code to find out the problem, but i cannot see debug screen, instead i get a page, containing: `no source available for "main() at ` `view disassembly...` `configure when this editor is shown` `preferences` running debug mode to end results a same error.
steps to reproduce the behavior: i can 't share the whole code but here is some context.
this is the constructor of customop, where the error happens: customop() : filter(torch::zeros({1, 1, 4, 4})) { t................. t tauto accessor = tfor (int x = 0; x < 4; ++x) { t tfor (int y = 0; y < 4; ++y) { = ............; t t} t} t tfilter filter.to(at::kcuda); } the program crashes on line "filter filter.to(at::kcuda);".
this customop instance is created as a member of network class, which has no superclass (just like customop), with its default (and only) constructor, at very beginning of main(): #include "network.h" int main() { network network; ...................... error message: terminate called after throwing an instance of 'c10::error ' what(): p assert failed at please report a bug to pytorch.
deviceguardimpl for cuda is not available (getdeviceguardimpl at frame #0: ()>::operator()() const + 0x11 in frame #1: std::string const&) + 0x2a in frame #2: const&, c10::tensoroptions const&, bool, bool) + 0x1604 in frame #3: const&, c10::tensoroptions const&, bool, bool) const + 0x17 in #4: c10::tensoroptions bool, bool) const 0x17a #5: bool, bool) const 0x68 ./aten_app) #6: 0x214 (0x43b3fc ./aten_app) #7: network::network() 0x44 ./aten_app) #8: main 0x2b (0x441ec2 ./aten_app) #9: __libc_start_main 0xf0 #10: _start 0x29 (0x41e4f9 aborted (core dumped)
steps to reproduce the behavior: 1. create an empty google cloud platform compute engine vm instance with 2vcpu (around 7.5 gb ram), ubuntu 16.04 lts, no gpu, without built-in image environment 2. wget phofurl 3. bash 4. source ~/.bashrc 5. git clone phofurl 6. cd 7. pip install -r requirements.txt 8. bash horse2zebra 9. bash horse2zebra 10. python test.py --dataroot --name horse2zebra_pretrained --model test --no_dropout --gpu_ids -1 <img width="695" alt="1" src=" phofurl <img width="518" alt="2" src=" phofurl <img width="1115" alt="3" src=" <img width="1115" alt="4" src=" width="1120" alt="5" width="1113" alt="6" i expected to see the training process start.
but i observe a segmentation fault error immediately after i run the above commands.
this tar.gz file contains numpy arrays and a script to reproduce this issue.
`python3 repro.py` `repro.py` contains phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode the results on small tensors are correct: phofcode
steps to reproduce the behavior: 1. on ubuntu 16.04 x64, download and install anaconda 2. create an environment and install pytorch there: `conda install -c pytorch pytorch ` 3. follow the instructions to try running this code: phofurl phofhyperlink 4. get to the `./make.sh` part.
5. get a `importerror: torch.utils.ffi is deprecated.
please use cpp extensions instead.` error
here is example code: phofcode
steps to reproduce the behavior: with python 3.6.7 + pytorch 1.0.0, init_process_group() sometimes hangs and never returns.
steps to reproduce the behavior: 1. install anaconda (using that contains python 3.7.1.
2. build pytorch by python setup.py install
steps to reproduce the behavior: 1. download cmake project phofhyperlink 2. build, run test.py
steps to reproduce the behavior: 1. install torch-nightly 1. run code below phofcode
runtimeerror: output with type torch.floattensor doesn't match the desired type torch.floattensor runtimeerror: output with type torch.floattensor doesn't match the desired type torch.floattensor
steps to reproduce the behavior: 1. download cmake files phofhyperlink 2. use cmake 3.13.2 to build.
steps to reproduce the behavior: 1. pip clone * * * 2.sudo python setup.py install
steps to reproduce the behavior: 1.wirter example code from phofurl with vs2015 2.select release mode x64 architecture 3.import torch.lib and torch include 4.generate than get error
this script phofcode run with `pytorch_jit=0 python jittest.py`, works as expected, and `pytorch_jit=1 python jittest.py` gives error phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: code examples for cuda and cpu (file paths in tracebacks are shortened): phofcode this behavior is not limited to `conv2d`, it also applies to some other modules (e.g.
phofcode here `testfunction` is a simple function that performs `all_reduce` both in the forward and the backward.
this function is then wrapped into `testmodule`.
`testnet` contains two convolutions and a `testmodule`, but the second convolution is only called from the process with `rank == 0`.
the network is wrapped in and default process group initialized as per pytorch documentation.
the loop at end of script performs forward / backward passes with random input data.
to reproduce issue simply launch script with: `python -m torch.distributed.launch --nproc_per_node=2 test.py` this will print: phofcode then, depending on back-end it will either remain stuck in a deadlock (nccl) or print an error message and crash (gloo).
note that this can be reproduced with any number of `nproc_per_node` (we tested from 2 to 8).
a minimal code like this: phofcode
steps to reproduce the behavior: 1. use resnet 18 script module from phofurl 1.
`model = 1. get the following error > traceback (most recent call last): > file "train.py", line 459, in <module> > main() > file "train.py", line 333, in main train(train_loader, model, criterion, optimizer, epoch) file "train.py", line 394, in train output = model(input) file line 489, in __call__ result = self.forward(*input, **kwargs) 142, forward replicas = 147, replicate return replicate(module, device_ids) 31, replicate replica._parameters attributeerror: object has no attribute 'copy ' if i firstly run `model for a nn.module, then trace it, although the code runs, the loss doesn 't decrease.
steps to reproduce the behavior: 1.
`git clone --recursive phofurl 1.
`conda create -n pytorch-build numpy pyyaml mkl mkl-include setuptools cmake cffi typing` 1.
`export $(which conda))/../"` `conda install -c pytorch magma-cuda92` `cd pytorch` `export no_nnpack=1` `export no_mkldnn=1` `export `python setup.py clean` `python setup.py install` phofcode
first consider the working case.
lets just make a 2x2 image and sample "under it" at the normalized position `(0, 30)` (which is very far under the sample image).
phofcode this code correctly returns that the sampled value is `tensor([[[[0.
]]]])` (because, again, we are way off image).
however, if we remove a row from image (making it have shape (1, 2)) and we sample way underneath image again, we get a non-zero result.
phofcode this outputs which seems to indicate that torch is treating image as if it is infinitely tiled in y direction.
>>> a = >>> b = >>> a tensor([[0, 1, 2, 3], [0, 1, 2, 3], [0, 1, 2, 3], [0, 1, 2, 3], [0, 3]]) >>> a += b a tensor([[40, 46, 52, 58], [40, 46, 52, 58], [40, 46, 52, 58], [40, 46, 52, 58], [40, 58]])
steps to reproduce the behavior: phofcode you see some prints, which should not appear.
i believe the error comes from here, you should replace <= with <.
phofcode prints `false` for v1.0.0, prints `true` for v0.4.1
run any cuda test case to see a mountain of warnings phofcode return deprecationwarning: inspect.getargspec() is deprecated use inspect.signature() or inspect.getfullargspec() return deprecationwarning: inspect.getargspec() is deprecated use inspect.signature() or inspect.getfullargspec() return deprecationwarning: inspect.getargspec() is deprecated use inspect.signature() or inspect.getfullargspec() return deprecationwarning: inspect.getargspec() is deprecated use inspect.signature() or inspect.getfullargspec() deprecate$ phofcode
steps to reproduce the behavior: 1. create a computation graph with a sum operation and another operation which is on gpu.
phofcode detailed code explanation below
steps to reproduce the behavior: phofcode this results in: phofcode
build pytorch master from source for ppc64le and run python -m unittest -v test never exits until system memory is exhausted or ulimit for user is reached.
it will either cause the whole server to hang, or the application to sigsegv or sigill.
steps to reproduce the behavior: phofcode output from nvidia-smi phofcode should not allocate memory on gpu 0
steps to reproduce the behavior: 1. go to the eclipse-workspace and run `cmake -g "eclipse cdt4 - unix makefiles" ./` to create a eclipse project.
steps to reproduce the behavior: import torch 2).std(dim=0)
`b_x` is a torch.tensor with shape (8, 3, 299, 299), which read from an image `mol` is the model load from `inception v3` i have set the momentum as 0 in inception v3 model struct phofhyperlink : phofcode then i calculate the mean and var: phofcode the result is that `bn=tmp` while `momentum = 0`
steps to reproduce the behavior: in [1]: import torch in [2]: import torch.nn.functional as f in [3]: dx = torch.tensor([[-1, 0, 1], [-2, 0, 2], [-1, 0, 1.]])
in [4]: dx = (dx * -1, -1).unsqueeze(1) [5]: inputs = torch.randn(1,8,5,5) [6]: f.conv2d(inputs, dx, groups=8)
steps to reproduce the behavior: 1. python3 setup.py install
steps to reproduce the behavior: 1. run `python -oo` (or write a full script if you 'd like) 1.
`import torch` you should receive a stack trace that looks something like this: phofcode
in order to reproduce the behavior run the script given below: phofcode
in order to reproduce the behavior, run the script given below: phofcode this script prints the parameter names (and a small portion of the values) that are different between cpu and gpu.
steps to reproduce the behavior: 1. run pytorch in a lambda with following whl in the requirements.txt; pillow==5.3.0 pyyaml==3.13 ** phofurl torchvision==0.2.1 2. load optional model and predict an image, this error should arise; **"error in cpuinfo: failed to parse the list of present procesors in and you will also get a timeout from the lambda, regardless of how long timeout that is chosen; **"process exited before completing request"** no stack trace available, i only receive **"error cpuinfo: failed to parse list of present procesors and a timeout error; **"process exited before completing request"**
steps to reproduce the behavior: 1. export $(which conda))/../" # [anaconda root directory] 1. conda install numpy pyyaml mkl mkl-include setuptools cmake cffi typing 1.
**pip install ninja** 1. python setup install
repro on a vm: - spin up fresh windows server 2016 vm on azure - install python 3.6.7 from python.org - disable path limit during install - install virtualenv install vs15 redist to help virtualenv work set up a virtualenv and activated it torch via instructions on pytorch.org, windows, python 3.6, no cuda open python run: `from caffe2.python import workspace
steps to reproduce the behavior: 1. build pytorch : "python setup.py install" or "python setup.py build develop" 2. run the following code : import torch model = torch.nn.conv1d(1, 2, 5, bias=false) = torch.ones(2,1,5) for i in range(5): = 2 input = torch.ones(2, 1, 15) out model(input) print(out)
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode
here is the code: phofcode when i run resnet_eval with a valid image path, i get the following output: phofcode of course, transforming the whole net into a sequential model is non-sense, we can just replace the first line (after docstring) of resnet_eval with phofcode and get expected output phofcode another approach is to remove final layer, reshape output tensor and then add last layer again, like this: and once again, this works as expected, giving same output as when running if i print tensor values, they are identical in two last cases.
so why do i come accross mismatch error in first case (or equivalently, why is last case valid)?
let's take a look at what bilinear upsample implementation in and 1. in pytorch, upsamplebilinear operator is done through 2 functions, i.e.
and specifically, by invoking pytorch first calculates something simliar to scale, then it will call to calculate source_index from dst_index and scale previously computed.
2. in caffe2, things become a little different.
specifically, in upsample_op.cc, const float rheight = (input_height > 1) ?
(float)(output_height - 1) / (input_height - 1) : 0.f; this variable has the similar meaning to scale, then on line 125, by rheight * h2 , it calculates src_index.
steps to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: just run code snippit, try some of the different commented out lines to see what is broken.
try the same with pytorch 0.4.0 phofcode phofcode
steps to reproduce the behavior: 1. be on arch linux with libtorch downloaded from the official download link.
1. try to follow the [minimal c++ example]: phofurl 1. you will get an error when running `make`, which can be fixed with the temporary workaround shown above.
phofcode this does not occur on the gpu: phofcode
code sample as below: phofcode result: |version|d=1|d=2|d=3| |---|---|---|---|
change the torchvision resnet's basic block to this: phofcode this works as expected (the _only_ difference are the new lines): phofcode
proc 0: phofcode proc 1: phofcode check nvidia-smi: phofcode and if you do any more collective, the processes hang indefinitely, e.g., in both processes phofcode and nvidia-smi will show
steps to reproduce the behavior: 1. set `cuda_id = 0 (or any device)` and `seq_len = 200` in the following code
steps to reproduce the behavior: spin up an ubuntu with gpu instance like ec2 p2 or g3 install cuda-10, cudnn-7.4.1, nccl-2.3.7 install anaconda3-5.1.0 conda create -n pytorch_p27 python=2.7 conda install torchvision=0.2.1 cuda100=1.0 -c pytorch example used to replicate: phofurl branch 0.4 cd mnist python main.py error: illegal instruction (core dumped) gdb output: phofcode program terminated with signal sigill, illegal instruction.
steps to reproduce the behavior: spin up an ubuntu with gpu instance like ec2 p2 or g3 install cuda-10, cudnn-7.4.1, nccl-2.3.7 install anaconda3-5.1.0 conda create -n pytorch_p27 python=2.7 conda install torchvision=0.2.1 cuda100=1.0 -c pytorch example used to replicate: phofurl branch 0.4 cd mnist python main.py error: illegal instruction (core dumped) gdb output: phofcode program terminated with signal sigill, illegal instruction.
steps to reproduce the behavior: initialize layers in a list rather than directly in the class.
then run the model using cuda.
for example: phofcode this creates the error message: `runtimeerror: expected object of backend cpu but got backend cuda for argument #4 'mat1 '`
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: dpnet training configuration: dataset: 40,000 samples batch size: 64 learning rate: 0.01 learning rate decay: 10% for every 8000 iterations.
below the relevant part of the script used for training: phofcode
steps to reproduce the behavior: phofcode
phofcode and i get phofcode this is the stack trace: thread 0 crashed:: dispatch queue: com.apple.main-thread 0 libcaffe2.dylib long>, at::range) + 202 1 libcaffe2.dylib (int, char**, long long const*, long long, long long)> const&, at::range) const + 584 2 libcaffe2.dylib (int, char**, const*, long)> const&, at::range) const + 67 3 libcaffe2.dylib at::native::(anonymous c10::arrayref<long long>, c10::arrayref<long long>, bool) + 721 4 at::tensor const&, bool) 1175 5 at::tensor const&, bool) const 246 6 libtorch.1.dylib at::tensor bool) const 1776 7 libtorch_python.dylib _object*, _object*) 319
steps to reproduce the behavior: 1. g++ 4.9.2 2. centos7 3. compile pytorch1.0 the bug seems that use delete function of istringstream.
so, in line 500 of the file mentioned above, ist = use ist.clear(); ist.str(first_line); instead?
steps to reproduce the behavior: 1. build pytorch from source in development mode using `python setup.py build develop`.
1. run `python setup.py rebuild_libtorch` phofcode
steps to reproduce the behavior: spin up an ubuntu with gpu instance like ec2 p2 or g3 1. install cuda-10, cudnn-7.4.1, nccl-2.3.7 2. anaconda 2. conda create -n pytorch_p27 python=2.7 3. conda install torchvision=0.2.1 cuda100=1.0 -c pytorch 4. pip install -u onnx==1.2.1 or 1.3.0 example used to replicate: phofurl error: illegal instruction (core dumped)
steps to reproduce the behavior: spin up an ubuntu with gpu instance like ec2 p2 or g3 1. install cuda-10, cudnn-7.4.1, nccl-2.3.7 2. anaconda 2. conda create -n pytorch_p27 python=2.7 3. conda install torchvision=0.2.1 cuda100=1.0 -c pytorch 4. pip install -u onnx==1.2.1 or 1.3.0 example used to replicate: phofurl error: illegal instruction (core dumped)
steps to reproduce the behavior: 1. run the sample code with pytorch v1.0.0 with 2 or more gpus: python code.py` 2. if `use_weightnorm = true`, the gradient of an unrelated parameter is `none` 3. if `use_weightnorm = false`, the gradient is there as expected 4. this only happens on multi-gpu setup: if running `cuda_visible_devices=0 python code.py` , both flags get gradient without change of other code.
steps to reproduce the behavior: spin up an ubuntu with gpu instance like ec2 p2 or g3 1. install cuda-10, cudnn-7.4.1, nccl-2.3.7 2. anaconda 2. conda create -n pytorch_p27 python=2.7 3. conda install torchvision=0.2.1 cuda100=1.0 -c pytorch 4. pip install -u onnx==1.2.1 or 1.3.0 example used to replicate: phofurl error: illegal instruction (core dumped)
steps to reproduce the behavior: 1. copy python code with resnet18 in phofurl 2. using trace to save the model in resnet.pt 3. copy cpp load model in phofurl 4. run cmake-gui to configure env
steps to reproduce the behavior: this works on my macbook, but not on my linux system.
the platform where the error is occurring will be stated below in the environment section.
briefly, it's ubuntu 16.04 + cuda 9.0 + cudnn 7.3.0. maybe it has to do with the `libtorch` distribution for mac and for linux?
1. install pytorch from source / using a binary 2.
`make html` and check the terminal output > missing cases in 'topyobject'!
steps to reproduce the behavior: 1.
steps to reproduce the behavior: phofcode and you'll get things like: ` tensor([[3., 2., 2.
steps to reproduce the behavior: 1. install 0.4.1, run `python main.py` 1. install 1.0.0, run `python main.py` 1. notice the speed diffference 1. run `omp_num_threads=1 mkl_num_threads=1 python main.py`, notice the lack of speed difference ran in python 2.
steps to reproduce the behavior: the script phofcode yields `assertionerror: example_outputs must be provided when exporting a scriptmodule`.
replacing the last line with phofcode give me the following error: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. run the code below: phofcode 2. at the line phofcode , an error occurs: phofcode
steps to reproduce the behavior: 1. edit the `complex_registration` test and replace phofurl with phofcode 2. run the test: phofcode the test will fail.
steps to reproduce the behavior: 1. go to the torch.nn phofhyperlink docs page in chrome, safari or firefox 1. try to scroll or interact with the page (eg.
to go docs for a specific class from the table of contents) a few seconds after load a chrome trace shows time is split between layout and scripting.
a significant chunk of scripting time is spent in katex math rendering.
<img width="314" alt="chrome performance summary" src=" phofurl
steps to reproduce the behavior: 1.
**project consists in two files: a trainer and a creator.
run the trainer which calls the train function of the creator.
when i use libtorch to load .pt model, there is a error like that: terminate called after throwing an instance of 'c10::error' what(): tag == recordtags::footer assert failed at please report a bug to pytorch.
file footer has wrong record type.
at frame #0: ()>::operator()() const + 0x11 in frame #1: std::string const&) + 0x2a in frame #2: <unknown function> + 0x6755ee in frame #3: <unknown function> + in #4: <unknown function> 0x66e0b9 #5: 0x7c #6: const&) 0x130 #7: main 0x10e ./action) #8: __libc_start_main 0xf0 #9: _start 0x29 ./action) [1] 2337 abort (core dumped) ./action i convert the .pth model as guide of documentation, and im sure the version of libtorch(11.28 update version) and pytorch(12.01 update version) is the latest.
so what can i do to solve the problem?
looking forward for you reply.
- pytorch version :1.0 latest - os: ubuntu 16.04 - how you installed pytorch: conda - python version: 3.6 cuda/cudnn version: cudnn6/cuda8.0 gpu models and configuration: any other relevant information:
steps to reproduce the behavior: create a random weights array in numpy and transpose it.
create a parameter with it assign to conv weights run it fail: phofcode result: (1, 16, 414, 414) (1, 16, 414, 414) success: phofcode result: (1, 16, 414, 414) (1, 16, 414, 414)
phofcode output phofcode note, in the untraced function output random tensor is properly broadcasted, and all the rows of the output are the same.
in traced function output, all values in output tensor are different
steps to reproduce the behavior: phofcode log: phofcode
steps to reproduce the behavior: 1. conda create -n ptdl numpy pyyaml mkl mkl-include 2. activate ptdl 3. conda install pytorch cuda92 -c pytorch 4. conda install -c defaults intel-openmp -f <this addresses dll #1 not found error on importing pytorch>
steps to reproduce the behavior:
steps to reproduce the behavior: 1. attempt to load a torch7 model that contains a nn.pixelshuffle layer.
see : phofurl steps to reproduce the behavior: follow the instructions describes in the "install.md" of the project refered before.
steps to reproduce the behavior: import torch as th # kernel.shape = small_memory_kernel = # after this: 525mib from nvidia-smi #kernel.shape = bug_memory_kernel = # after this: 527mib x # 911mib y small_memory_kernel(x) 1117mib del y import gc gc.collect() th.cuda.empty_cache() 917mib ''' here it goes ''' y bug_memory_kernel(x) 19925mib th.cuda.empty_cache() 1109mib
steps to reproduce the behavior: 1. use a 2. emit namedtuples from your dataset as samples 3. observe that they come from the dataloader as lists required changes to current code def pin_memory_batch(batch): if isinstance(batch, torch.tensor): return batch.pin_memory() elif isinstance(batch, string_classes): return batch elif isinstance(batch, container_abcs.mapping): return ** type(batch)( ** {k: pin_memory_batch(sample) for k, sample in batch.items()} ** ) ** **elif is_namedtuple(batch): return for sample in batch])** elif isinstance(batch, type(batch)( for sample in batch] ) else: batch where is_namedtuple is a heuristic to detect named tuples.
i think namedtuple is a generic enough object for pin_memory_batch to support it.
steps to reproduce the behavior: 1. install pytorch(not install cuda) using the latest source code(commit id 89c3db) as said in github.
1. install torchvision by pip: `pip3 install torchvision`.
1. go to test folder and run: `python -m unittest
steps to reproduce the behavior: 1. train model in libtorch c++ in ubuntu.
save the model by: phofcode 1. read the model in libtorch c++ in mac.
code: phofcode 1. errors appear.
just do `python setup.py bdist_wheel` if you have `wheel` package from pip.
steps to reproduce the behavior: 1. follow the tutorial.
2. download the source file.
2. run the program, `python3 phofcode
1. use this numpy array as an example phofurl phofhyperlink or values-np.p.zip phofhyperlink (unzip).
2. try it with `add_()`: phofcode ** results: ** phofcode 2. with `add()`: phofcode ** results: ** phofcode
steps to reproduce the behavior: **(case 1):** phofcode **(case 2):** phofcode
phofcode the tracing fails with `valueerror: auto nesting doesn't know how to process an input object of type int.
accepted types: tensors, or lists/tuples of them`
i exported my code via: phofcode and ran it fine via: phofcode the error occurs when i do len): phofcode
default=0.5 ') action= 'store_true ', help= 'enables cuda ') default=1, help= 'number gpus use ') default= ' ', help="path netg (to continue training)") default= ' ', help="path netd (to continue training)") default= '.
(ngf*8) x 4 x 4 nn.convtranspose2d(ngf * 8, ngf * 4, 4, 2, 1, bias=false), nn.batchnorm2d(ngf 4), nn.relu(true), state size.
(ngf*4) x 8 x 8 nn.convtranspose2d(ngf 4, ngf 2, 2, 1, bias=false), nn.batchnorm2d(ngf 2), nn.relu(true), state size.
(ngf*2) 16 16 nn.convtranspose2d(ngf 2, ngf, 1, bias=false), nn.batchnorm2d(ngf), nn.relu(true), state size.
steps to reproduce the behavior: 1. mkdir build 1. cd build 1. cmake options phofhyperlink 1. make
set in `line 67 then `./build_android.sh -dandroid_abi=arm64-v8a
follow caff2 installation website phofhyperlink 1.
`git clone --recursive phofurl and then `git submodule update --init` 2. change to build with ** clang ** (new ndk doesn't support gcc) and bash ** scripts/build_android.sh ** 3. build, and no include files.
i have tried to copy the whole caffe2 folder into my android project or copy libtorch include files, but it will cause lots of errors.
even just downloading this code phofhyperlink and running it straight away reproduces the problem for me.
i 'm not sure what is the exact source of problem, so i 'll just list my environment.
randomly , steps to reproduce the behavior: 1.
steps to reproduce the behavior: 1. download the code from phofurl 2. change the ctc loss from warpctc to nn.ctcloss() 3. run - pytorch version (e.g., 1.0): - os (e.g., linux): ubuntu 16.04 - how you installed pytorch (`conda`, `pip`, source): pip3 - build command you used (if compiling from source): python version: 3.5.2 cuda/cudnn version: 8.0/6.0 gpu models and configuration: 1080ti any other relevant information
phofcode i sometimes use gcc/g++-7 by specifying cc/cxx and use debug=1.
steps to reproduce the behavior: 1. mkdir build 1. cd build 1. cmake options phofhyperlink 1. make -j1
steps to reproduce the behavior: > mkdir build && cd build > cmake -d use_lite_proto=on -d onnx_use_lite_proto=on .. > make -j12
operator constructor phofcode example of running operation: phofcode
steps to reproduce the behavior: 1. install nvidia driver 410 and cuda 10 1. git clone --recursive phofurl 1. torch_cuda_arch_list=7.5 python setup.py install
reproduced in this gist: phofurl
follow instructions here: phofurl , including trying to use ninja using windows 10 + cuda 9.0.
steps to reproduce the behavior: `git clone --recursive phofurl `cd pytorch` `python setup.py install`
steps to reproduce the behavior: 1.
steps to reproduce the behavior: import torch base = torch.randint(0, 2, (128, print(torch.argmin(base, dim=1)) # produce wrong answer dim=1)) # produce correct answer
this comes from converting an existing float32 model into float16.
the model is loaded and the ops and blobs are copied.
to do the float32->float16 conversion of the tensors, i follow the comments at phofurl // note about float16: in storage we will basically convert float16 byte-wise // to unsigned short and then store them in int32_data field.
which gets done as follows: tensor.data_type = float16_list = ushort_list = [ struct.unpack( 'h ', struct.pack( 'e ', f16))[0] for f16 in float16_list] so tensor looks like: t[dims: 32 t dims: 32 t dims: 3 t dims: 3 t data_type: float16 int32_data: 10967 int32_data: 10247 ... ] for initialization, since float16 data went in int32 data, i use a giventensorintfill like this: op = core.createoperator( "giventensorintfill", [], [tensor.name], arg=[ makeargument("shape", list(tensor.dims)), makeargument("values", tensor.int32_data)]) init_net.op.extend([op]) runnetonce with init net seems okay, but doing workspace.runnet with predict net gets runtime error out of aten
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: in my case, i initially converted a pre-trained pytorch model to onnx with torch.onnx._export(), but i believe this warning should still appear when working with any onnx model.
1. convert pytorch model to onnx with example_input, 'model.onnx', export_params=true)` 1. load onnx model with onnx phofhyperlink : 1. prepare the caffe2 backend: device='cuda:0')` sample code: phofcode outputs: phofcode
steps to reproduce the behavior: > mkdir build && cd build > cmake -d use_lite_proto=on -d onnx_use_lite_proto=on .. > make -j12
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1.
steps to reproduce the behavior: executing this script.
steps to reproduce the behavior: to reproduce the error, place the following in a python code and execute it: import torch import torch.nn class def forward(self, x): pred = torch.argmax(x, dim=1, keepdim=true) return pred model = argmaxmodule() input_rand = torch.rand((1, 3, 512, 1024)) torch.onnx.export(model, input_rand, 'argmax_model.onnx ', verbose=true)
run the following code snippet: phofcode
steps to reproduce the behavior: phofcode
follow the tutorial here: phofurl steps to reproduce the behavior: 1. converting a torch model via tracing phofhyperlink 2. serializing the model phofhyperlink 3. loading the script module in c++ phofhyperlink
steps to reproduce the behavior: run the following snippet.
phofcode output: phofcode cuda seems to work well in this case, maybe because the matrix is small, but you can make it fail too: phofcode output: phofcode
steps to reproduce the behavior: 1. build caffe2 for android -dandroid_abi=arm64-v8a 1. create an empty android studio project with c++ support.
in this project: 1. add built libs under app/libs 1. add includes under app/libs/include with built `*.pb.h` and `macros.h` change `cmakelists.txt` and `native-lib.cpp` to match this gist phofhyperlink build the android project for an arm64-v8a target error: phofcode you can see above that `libclog.a` is included in the command which fails.
i've been unable to reproduce this issue with randomly generated weights, so i've included a particular value of weights from my application that triggers this behavior: phofcode these weights are all nonnegative (but contain a lot of zeros), have a nonzero sum, and contain no nans or infs.
phofcode i fail the assertion on trial 6.
i am quite new to pytorch, having used tf/keras extensively in the past, but am now trying to use pytorch as a replacement.
i decided to start small with a seq2seq skip-thought model, cobbled together using the pytorch nlp tutorials.
everything seems to work fine when i run small scale tests, however, when i use the code run a large scale fit on 3000 separate paragraphs (each paragraph having a variable number of sentences) notice that my system ram usage slowly goes up as the script runs, until eventually it hits 100% and box becomes unresponsive and has be force rebooted.
the linux box has 64 gb of ram, and when script starts, usage is 4.7% but this climbs steadily over time 100%, at which point box becomes unresponsive.
since i'm new pytorch, i'm not sure if perhaps i'm doing something blatantly wrong in my code which would account for this behavior?
this is my core fitting logic, which runs as script on linux: phofcode here are helper functions which create tensors passed model by converting all text words into indices from predefined gensim dictionary: phofcode and, finally, here is skipthought model itself, with all its helper classes (apologies for wall of code): phofcode
steps to reproduce the behavior: 1. run main.py -a alexnet --lr 0.01 --world-size 2 /home/lee world-size: distributed-flags 2.thread 25 "python3" received signal sigsegv, segmentation fault.
here 's a sample 1-input 2-output custom operator phofcode which can be exported correctly in pytorch-0.4.1 phofcode but in pytorch-1.0+ phofcode after adding pythonop into the white list: phofcode we can export correctly again: i am not sure what i have is a fix or workaround.
i can submit a pr if this is the right fix.
i used this small script: phofcode
phofurl phofhyperlink run `mpirun -n 4 python --dist-backend mpi --batch-size 64 -a resnet50 --epochs 2 /mnt/imagenetpytorch/` modifications: phofcode
steps to reproduce the behavior: create the following pytorch script, which initializes our stream pool: phofcode run it with `cuda-memcheck`.
you 'll get 64 warnings.
here 's a few: phofcode
steps to reproduce the behavior: install fastai library as phofurl and on a new jupyter nootebook get the cuda available = true and then try to call empty (to see if it frees something because the out of memory).
i have some problems running the examples provided in fastai lib so i posted on their forum.
but after searching here for a solution , i found but still i get memory error... so that is why im comming here phofcode or try to run different examples provided there `collab.ipynb` works ok but stepping on cyfar on `fastai/examples` an error executing this line phofcode get this output phofcode ` return `true`.
im also running out of memory in `dogs_cats.ipynb`.
phofcode get cuda memory error also in tabular output
steps to reproduce the behavior: phofcode note that for moderate inputs (`-10` instead of `-120`) this works as expected
steps to reproduce the behavior: 1. followed the manual for building from source under windows using visual studio 2015 v3.
2. enabled cuda and python bindings ensuring the correct msvc is selected.
3. run the script build_windows.bat.
same results by manually running cmake and then building solution 96 errors in generating caffe2.lib.
starting like that and following a similar pattern for remaining errors.
(clcompile target) -> error c2938: : failed to special ize alias template (compiling source file error c3546: '...': there are no parameter packs available to e xpand (compiling source file [d: librarie error c3203: 'typelist': unspecialized class templ ate can't be used as a template argument for template parameter 'typelist', expected a real type (compiling sour ce file 2 caffe2.vcxproj] error c2338: in typelist::to_tuple<t>, t must be typelist<...>.
(compiling source file [d: libraries pyto c2794: 'type': is not a member of any direct or indirect base class of c2938: 'to_tuple_t<int>' : failed to special ize alias template
steps to reproduce the behavior: create conda environment: phofcode create a `demo.py` file to demonstrate the problem: phofcode run `demo.py`: phofcode the forked process never gets past the `check()` step.
steps to reproduce the behavior: make call to with the model.graph instead of the model for example `init_net, predict_net = device="cpu")` the error you will get is the model does not have an ir_version set properly.` as the graph doesn 't have a value `ir_version`, model does.
the correct behavior would be to call `init_net, predict_net = device="cpu")` which works, but function name may is still misleading.
steps to reproduce the behavior: i wrote two almost identical implementations of a problematic nn architecture in both pytorch and tensorflow.
here is pytorch version: phofcode and tensorflow: phofcode if you run both scripts on 11gb gpu you should see cuda oome in pytorch (on loss.backward() line), but not in tensorflow script.
steps to reproduce the behavior: 1.
steps to reproduce the behavior: going through this tutorial: phofurl
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: using the example code and the exported alexnet.onnx file run the following sample.
steps to reproduce the behavior: 1. go to phofurl phofhyperlink 2. got to the most recent release (currently either 0.4.1 phofhyperlink or 1.0rc1 phofhyperlink ) 3. under "assets", click on "source code (zip)" or "source code (tar.gz)".
4. download and open the archive.
5. look under 6. open the folders there.
the folders are almost all empty, rendering pytorch uninstallable.
> use_mkldnn=1 python3 setup.py build > ldd build/lib/libmkldnn.so
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1.conda install pytorch_nightly 2.source activate torch1 3.jupyter notebook then the juypter notebook doesnot work
the folder structure is the following.
i have attached all images except '01.octet-stream ' as this forum does not support it.
phofcode here is my code, you can run them directly on notebook.
phofcode phofcode phofcode everything works fine so far.
however, when i try to iterate through the dataloader and run the following code, the program got stuck forever!
it seems code runs into dead loop somewhere even before loading images as i do not see any print information during loading images.
what 's wrong with implementation?
if i replace datasetfolder with 'imagefolder ' and get rid of customized loader and extension, everything works fine.
steps to reproduce the behavior: 1. install pytorch from source 2. follow guide to export onnx model from here phofhyperlink
i install pytorch from the source v1.0rc1, getting the config summary as follows: use_nccl is on, private dependencies does not include nccl, nccl is not built-in.
phofcode @zdevito told me briefly how to fix, i will send a pr for it soon.
steps to reproduce the behavior: 1) run the following commands in separate tmux sessions on the same cloud machine with 8 gpus: phofcode 2) if the programs get hung on line with: phofcode you have reproduced issue.
steps to reproduce the behavior: phofcode the first print statement prints `(0, 20)` as expected.
the second statement throws an exception: phofcode
steps to reproduce the behavior: 1. example code: phofcode error: `runtimeerror: elems.size() == 2 assert failed at please report a bug to pytorch.
the model i am passing is a pretrained dgan generator with cpu weights from the following repo: dgan phofhyperlink
steps to reproduce the behavior: 1. create random tensors of size above 1. run the code above to get an error
run the following snippet: phofcode
run the following code phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode phofcode - os: `macos` - how you installed pytorch: `pip install torch_nightly -f phofurl - python version: `2.7` and `3.7` @maratyszcz
steps to reproduce the behavior: 1.
`python test_moons.py` i get similar non-deterministic output on cpu (mac, linux) and gpu (tesla p100, linux): phofcode
steps to reproduce the behavior: 1. fresh checkout of pytorch on 2. do a build `python setup.py build_deps develop` 3. apply this patch: phofcode 4. do a build `python setup.py build_deps develop` 5. run `python test/test_c10d.py test doesn 't fail.
you can induce a correct recompilation by deleting the `so` file in build: phofcode
steps to reproduce the behavior: 1. defining the dataset class where data is a pandas dataframe and target_cols is a list of the columns who should be the targets.
phofcode 2. creating an instance of dataset and a dataloader instance of it where x_train is my pandas dataframe and is a column of dataframe.
phofcode 3. simply iterating over it throws message above.
phofcode complete error message: phofcode
i 'm on a mac os x mojave, and i 'm on an mbp 15" 2016. steps to reproduce the behavior: 1. cd `pytorch` 2. cc=cc cxx=c++ python setup.py install`
the error messages are as follows.
the key point is: "**tensor type mismatch, caller expects elements to be int, while tensor contains float**".
what could be the possible reasons?
steps to reproduce the behavior: 1. run the imagnet example for the examples repo in pytorch with dataparallel these error messages were found in the dmesg log: nvidia amd-vi: event logged [io_page_fault domain=0x000f flags=0x0020] nvidia amd-vi: event logged [io_page_fault domain=0x000f flags=0x0020] nvidia amd-vi: event logged [io_page_fault domain=0x000f flags=0x0020] nvidia amd-vi: event logged [io_page_fault domain=0x000f flags=0x0020] device=0a:00.0 device=0a:00.0 device=0a:00.0 device=0a:00.0
the following snippet appears to correctly create a grad with respect to the input via phofcode with dilation=2 (stored in phofcode ).
we should be able to get the same grad by using phofcode , but attempting to do so leads a valueerror raised by phofcode when dilation>1:
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. install anaconda with python 3.7 and cuda 9.2 on ubuntu 16.04 2. create a new environment 3. check that python version is still 3.7 4. install pytorch with 'conda install pytorch-nightly cuda92 -c pytorch' 5. check the python version now.
in my case, it is now 3.5.6
steps to reproduce the behavior: 1. try to install pytorch with mpich 3.0.
.... scanning dependencies of target c10d [ 28%] building cxx object [ 28%] building cxx object [ 28%] building cxx object [ 28%] building cxx object 38%] 38%] fatal error: mpi-ext.h: no such file or directory #include <mpi-ext.h> // needed for cuda-aware check compilation terminated.
make[2]: * * * error 1
steps to reproduce the behavior: 1. download nightly libtorch 2. prepare cmake project: cmakelists.txt: phofcode matmul.h: phofcode matmul.cu: phofcode matmulbug.cpp: phofcode then run cmake to build.
steps to reproduce the behavior: phofcode
phofcode throws a notimplementederror the methods `mean`, `variance` and `enumerate_support` don't seem to be implemented either.
steps to reproduce the behavior: 1. set use_distributed=off in cmakelists.txt 1. cc=clang cxx=clang++ python setup.py bdist_wheel
steps to reproduce the behavior: 1. gist with `cpp`, `setup.py` and `test.py` file here: phofurl 2.
`python setup.py install` - contains extra compile args for debug (`-g`, `-0o`) 3.
steps to reproduce the behavior: here is a minimal example: phofcode 1. run the code above.
execution ends with the following error: phofcode 2. run the same code, but comment out line y=f.sigmoid(y).
code runs ok, gradients are correct.
steps to reproduce the behavior: created a gist here: phofurl change the filepaths starting with `/work/case` to run.
steps to reproduce the behavior: 1. run the following code snippet.
step 1: create two loader, one with num_workers and one without.
import torch.utils.data as data train_loader = batch_size=batch_size, shuffle=true) train_loader2 = batch_size=batch_size, shuffle=true, num_workers=1) step 2: time it %%time for _ in range(200): for x in train_loader: pass %%time for _ in range(200): for x in train_loader2: pass the first one took only 2.5 s the second one took 1min 47s collecting environment information... pytorch version: 0.4.1 is debug build: no cuda used to build pytorch: none os: microsoft windows 10 enterprise gcc version: could not collect cmake version: version 3.11.0-rc3 python version: 3.6 is cuda available: no cuda runtime no cuda gpu models and configuration: no nvidia driver cudnn
steps to reproduce the behavior: 0. make sure you have ninja installed 1.
`python setup.py build_deps develop` 2.
`(cd build && ninja)` original cmake logs: phofcode cmake logs when ninja re-cmakes: phofcode fails with: phofcode
unfortunately i couldn 't boil the offending code down to a reasonable size, but it is pretty clear that there is just missing error handling hook which would translate the `cudnn` runtime errors into something more human-digestible.
mwe to reproduce the behavior: phofcode phofcode
steps to reproduce the behavior: 1. using pytorch version on aws e2c deep learning instance 2. following code: phofcode 3. error: phofcode
create a test bench with the source code below, it should be fully self contained phofcode dimensions of elements in `states`: phofcode and here is the error message that causes an overall failure of the trace operation: phofcode
minimal failing example with error messages attached: phofcode
steps to reproduce the behavior: 1. git clone --recursive phofurl 2. cd pytorch; git submodule | grep cereal 3. cat .gitmodule | grep cereal
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. call pack_padded_sequence specifying all kwargs, but no args.
this is a simple code to reproduce the error: phofcode
steps to reproduce the behavior: run the code: import torch ignore_idx= -1 print("pytorch version: xe = reduction= 'none ') input = torch.randn(3, 5, requires_grad=true) print("input: {}".format(input))
steps to reproduce the behavior: phofcode
phofcode steps to reproduce the behavior: 1. run the code with `sequence_length = and `sequence_length =
steps to reproduce the behavior: phofcode onnxruntime errors on: phofcode
steps to reproduce the behavior: 1. attempt to install from source on a fresh jetpack 3.3 on nvidia jetson tx2 2. instead of phofcode , install with phofcode (tried with both, same error) errors are: ...about 100 nvlink errors, listing the last few below along with final error log.
steps to reproduce the `behavior:` 1.cuda 9.1 2.torch 0.4 phofcode
steps to reproduce the behavior: install pytorch from source as per below steps.
cd ~ desktop git clone --recursive phofurl cd ~ desktop pytorch set files (x86) microsoft visual set cmake_generator=visual studio 15 2017 win64 set distutils_use_sdk=1 set call x64 -vcvars_ver=14.11 python setup.py install error message as below.
(default target) (1) -> (default target) (3) -> (default target) (4) -> (default target) (22) -> (custombuild error : more than one instance of overloaded function "__hadd" matches the argument list:
phofcode name the above code as `test_conv2d.py` and put it in a virtual enviroment which has installed `torch` and `pytest`, run `pytest`, the later reports `x` and all parameters are same, but their gradients are not same because and failed.
steps to reproduce the behavior: `m = nn.conv2d(in_channels=3, out_channels=33, kernel_size=10, stride=1, bias=true)` `input = torch.randn(1, 3, 1, 1) ` `output = m(input)` it should produce (the official release does that): > calculated padded input size per channel: (1 x 1).
kernel size: (10 x 10).
kernel size can't be greater than actual input size at instead i get: > std::exception
1. build from source 1. current master branch 1. cuda 10 1. ubuntu 16.04
steps to reproduce the behavior: import torch, math import torch.nn as nn import torch.nn.functional as f def kernel_size, process_mode= 'conv ', stride=1, padding=0, dilation=1, output_ratio=none): if process_mode == 'unpool ': return math.floor((data_size - 1) * stride - 2 * padding + kernel_size) size = (100,80) # sample size input = torch.arange(1, size[0]*size[1] + kernel = (2, 2) output_ratio = 0.62 kernel, stride, padding (2,2), (0., 0.)
pool output, indices pool(input) diff0, diff1 1, 1 while diff0 != 0 or diff1 != 0: unpool_size0 unpool_size1 diff0, diff1 unpool_size1 - input.shape[3] if diff0 != 0 or diff1 != 0: padding= (diff0/2, diff1/2) print(f 'unpool size unpool unpooled unpool(output, indices) the last line throws an exception as followings.
exception has occurred: typeerror 'float ' object cannot be interpreted as an integer file line 25, in <module> unpooled unpool(output, indices)
steps to reproduce the behavior: run the following script phofcode
steps to reproduce the behavior: 1. clone this repo phofhyperlink .
1. download ljspeech phofhyperlink and set the path in `params.py`.
1. install librosa and tqdm.
i'm building pytorch from source on our systems, so the instructions won't be trivial.
i can provide more details if asked but i hope the above description speaks for itself.
steps to reproduce the behavior: 1. follow the instructions at phofurl 1. run the compiled program on the traced torchvision resnet18 or alexnet model (haven't tested other models)
steps to reproduce the behavior: <img width="704" alt="screen shot at 2 58 28 am" src=" phofurl
steps to reproduce the behavior: 1. apply dropout (1d, 2d, 3d) on a fp16 input, either cpu or cuda.
steps to reproduce the behavior: import torch a = torch.randn(1, 2048, 8, 11, 11).cuda() conv = torch.nn.conv3d(2048, 512, (3, 1, 1), stride(1, 1, 1)).cuda() out = conv(a) b = torch.randn(1, 2048, 8, 12, 12).cuda()
steps to reproduce the behavior: 1. run a neural network that has interpolation (up-sampling) under fp16.
2. convert the values to floats, run the same interpolation, then convert back to half.
note that it's less slow.
3. the network still suffers from overhead of converting from half to float.
in an interactive shell: phofcode
steps to reproduce the behavior: 1. install pytorch and caffe2 via `conda install pytorch-nightly torchvision -c pytorch`.
the c3d-16 pretrained model from here phofhyperlink .
1. follow the r2plus1d feature extraction tutorial phofhyperlink .
1. the error will occur with the command related to `extract_features.py`.
my command: phofcode stack trace: phofcode
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. let theta be the identical affine matrix 2. warp affine with affine_grid and grid_sample 3. display the image phofcode
steps to reproduce the behavior: 1. brokenpipeerror: [errno 32] broken pipe 1.
python -m unittest -q -v
steps to reproduce the behavior: 1. install nccl 2.3.5 2. conda install -c caffe2 caffe2-cuda9.0-cudnn7 3. import caffe2.python.core error : phofcode
providing the following code to reproduce the error: phofcode steps to reproduce the behavior: 1. run script
steps to reproduce the behavior: >>> import torch >>> a=torch.tensor([1.,2.])
>>> a.cuda() illegal instruction (core dumped)
steps to reproduce the behavior: the following c++ code has the problem: ` auto for(int i=0;i<10;++i) { oa; oa.write("tensor",ten); }` the size of the produced files are: 8.0k cuda0 28k cuda1 104k cuda2 404k cuda3 1.6m cuda4 6.3m cuda5 26m cuda6 101m cuda7 401m cuda8 1.6g cuda9
steps to reproduce the behavior: 1. import torch 2.
steps to reproduce the behavior: phofcode this seems undesired, because replacement=false implies to me that i should expect my outputs to all be different.
my understanding is that this was discussed in a recent issue about the gpu kernel for multinomial not matching the cpu here: phofurl
run the code below with and without the specified line commented out: phofcode
phofcode we can retrieve the correct behavior by calling `.contiguous()` on the expanded tensor before doing a `masked_fill_`: phofcode
steps to reproduce the behavior: three commands on command line.
phofcode **stack trace for build (output in full below in additional context phofhyperlink ** phofcode
steps to reproduce the behavior: 1. compile pytorch with cudnn 7.2.1 2. update to cudnn 7.3.0 3. experience `runtimeerror: cudnn version mismatch: pytorch was compiled against 7201 but linked against 7300`
steps to reproduce the behavior: 1. see environment below for setup 1. check out this folder ` phofurl 1. run this build command for the pytorch extension (excuse the format as it was run from a jupyter notebook sitting on top of the system 3.6 python install as kernel - but you get idea): phofcode (see below)
steps to reproduce the behavior: 1. vue create my-app 2. cd my-app 3. vue add quasar
steps to reproduce the behavior: 1. create an electron-vue project 2. vue add quasar 3. node
steps to reproduce the behavior: 1. go to phofurl 2. focus on 'render result' block 2a.
hit ctrl+f and try to search this sentence 'etiam porta' 3.
'render result' block does not scroll to any direction
steps to reproduce the behavior: 1. go to phofurl 2. click on android2 3. click on android1 4. you can see iframe reloads every time
steps to reproduce the behavior: 1. go to phofurl in chrome or safari.
2. click on the image tab and observe the weird behavior in the corner(s).
3. click on no image tab.
4. click on image tab and observe weird behavior in corner(s).
5. click on change image button and observe weird behavior in corner(s) : chrome, bottom left corner appears twice, once briefly before image is changed, and again after image has changed; safari all 4 corners appear while image is being changed.
6. go to step 2.
steps to reproduce the behavior: 1. open the jsfiddle example and see the problem on ie11 or edge.
2. play around with `display: block`
steps to reproduce the behavior: 1. go to the jsfiddle link (you can directly copy-paste it) 2. select an option 3. see the problem.
steps to reproduce the behavior: 1. click on one of the headers to sort the rows, e.g.
create a button with a width wider than the label (eg.
"full-width" or fixed width) and set align="left".
as soon as you add type="a" the label will be centered and not aligned to the left anymore.
steps to reproduce the behavior: 1. tap on the image (without long-pressing) 2. see menu
steps to reproduce the behavior: 1. use wsl/wsl2 ubuntu 2. generate new project using `$ quasar create <folder_name>` 3. run `$ npx quasar dev`
1. make an app for capacitor 2. use a `<div to hide an element on an android app (doesnt have to be done this way.
just examining the value of is sufficient) 3. build it with `quasar dev -m capacitor -t android` to a real device or the emulator (same result) 4. notice that the element will not be hidden even though it should be 5. try it with `!$q.platform.is.chrome` (still in a capacitor app and same build command) instead and it will be hidden even though shouldn 't 6. cry
steps to reproduce the behavior: 1. run a quasar 1.4.3 app 1. open chrome debugger and set screen mode to responsive and adjust screen width to 675 pixels.
1. set a break point in the component being test.
1. in chrome debug console i checked these values .... this.$q.screen.gt.sm
steps to reproduce the behavior: 1. open chrome (firefox is ok) 2. go to phofurl 3. click on checkbox to hide all tabs 4. see button with chevron_right icon at right side of toolbar.
press the prompt of this codepen to input japanese.
since the dialog closes when the phrase is confirmed, you cannot enter multiple phrase.
1. add above settings to capacitor.config.json 2. run capacitor app 3. then, you can see `capacitor.config.json` setting is ignored (because quasar hide splash screen at `mounted()` part )
steps to reproduce the behavior: 1. initialize a new project 2. npm i grpc 3. import and use grpc
steps to reproduce the behavior: 1. init quasar app (`quasar init qselect-demo`) with standard options 2. add cypress to app (`quasar ext add say yes to everything 3. edit `src/pages/index.vue` to look like this: phofcode 4. add cypress test phofcode 5. remove `chrome:: hack for shaking aut` from as this will break current cypress versions.
6. start server `quasar dev` 7. run `npm run test:e2e` 8. click `init.spec.js` in the opened browser for cypress 9. see that some items are not rendered in the list
1. go to the exemple phofhyperlink .
2. click on a calendar date and look at the two label under.
steps to reproduce the behavior: 1. run `quasar dev -m capacitor -t android` on windows with android studio installed in default path 2. see error
steps to reproduce the behavior: 1. open dialog in fiddle and try to use qcolor 2. it closes on drag
steps to reproduce the behavior: when the intersection event is triggered it logs the id of its element to the console, you can clearly see that all children have their intersection event fired upon @load, regardless of their scroll position/visibility.
when scrolling down event is triggered again.
when scroll container loads new content upon reaching offset, all new children immediately fire their intersection event
steps to reproduce the behavior: 1. quasar create <folder_name> 2. see error
steps to reproduce the behavior: 1. go to the codepen ( phofurl 2. if the image has a height of 0px, rerender the display section by removing a character from html code then replace it.
this should make qimg have a height > 0px.
4. once qimg is rendering, if you open codepen a second time in another tab it will render immidiately.
steps to reproduce the behavior: 1. click on `click causing error` 2. see alert indicating an error was thrown 3. click on `click with no error` 4. see notification saying the hidden button was programmatically clicked.
steps to reproduce the behavior: 1. try to click on any of the form elements 2. nothing receives focus 3. surround the `<q-form>` with parent `<div>` 4. now works in this example, the qcard sits inside qform so that action button can be of type "submit"
1. add a qresizeobserver in a qpage 2. add an iframe in this page 3. compare qresizeobserver size and actual window object size
steps to reproduce the behavior: 1. create a q-btn 2. set the size around in a few px (like 20-30) 3. add a icon 4. add to prop
steps to reproduce the behavior: 1. enter a value into the name field 2. wait for it to auto-submit 3. notice age field failed validation, but submit notification was still shown, indicating that the form was submitted.
steps to reproduce the behavior: 1. go to ' phofurl 2. click on the select (it's the only element in view) 3. try click 'one', then option 'two' 4. repeat this ten times and note that sometimes you have to click the option twice before it will take.
1. use platform from 'quasar' 2. use platform.is 3 platform.is.mac is true 4 platform.is.desktop is true
steps to reproduce the behavior: 1. copy the sample text 2. click on
steps to reproduce the behavior: 1. go to phofurl phofhyperlink 2. choose an editor on the examples site 3. click on italic 4. click on bold 5. click on empty space in toolbar 6. click underlined 7. see the error: all previous selected items will deselected
steps to reproduce the behavior: 1. go to
add qbtn with icon property.
steps to reproduce the behavior: 1. go to phofurl in firefox 2. check the vertical separators that are set to inset
steps to reproduce the behavior: 1. go to phofurl 2. click on any `q-select` component except `use-input` ones 3. options menu does not show.
steps to reproduce the behavior: 1. create a boot file that writes something on the store (in ssr mode with prefetch) 2. when rendering the page, the value will be wiped out
steps to reproduce the behavior: 1. open the codepen on ios safari.
2. click on the second line in the editor 3. click toolbar bullet icon 4. the _first_ line is turned into a bullet point, not second line
steps to reproduce the behavior: 1. define qtable with separator as cell 2. body slot, define tr and td 3. set q-td tag with auto-width 4. check cells with auto-width does not display cell border
1. start new project 2. create functional component inside it phofcode 3. use it on some page
steps to reproduce the behavior: 1. go to phofurl 2. try to pull down list to refresh 4. can't pull down on in item because sliding actions always trigger first
click in the "add" button.
steps to reproduce the behavior: 1. open phofurl 2. click on first qselect 3. type some word, random
scrolling down the event is multiple fired this was a workaround to make a delay for the hiding.
as there is a option for showing delay - it would be nice to have a option also for the hiding delay.
(i would also open feature request for this)
steps to reproduce the behavior: 1. go to the above codepen in firefox 2. verify that the single item in the list can be clicked on as well as slid to left.
3. open developer tools and enable "responsive design mode" 4. select any mobile platform, such as nexus 5x 5: make sure "touch simulation" is turned on sliding list item no longer works.
in addition, item must be double-clicked in order to trigger click event.
if you then disable touch simulation, all functionality is restored.
steps to reproduce the behavior: n/a
steps to reproduce the behavior: 1. go to phofurl in firefox 2. click on any qselect
steps to reproduce the behavior: 1. open the provided link on a mobile device 2. click on autocomplete 3. enter a cyrillic character (do not paste it), e.g.
"", "" 4. check filter state
steps to reproduce the behavior: 1. scroll beyond index 100 2. too many jumping will occur.
3. watch the console that each index of image will automatically increase.
steps to reproduce the behavior: 1. scroll down and remember the first item number on the screen 2. click on item 3. click 'go back ' 4. see that the first item number is greater then previous
try to scroll as fast as you can, in mobile and desktop or try to scroll with the scrollbar to the end and then scroll to the top
steps to reproduce the behavior: 1. create bootstrap project with quasar-cli 2. run in ssr mode (like `quasar dev --mode ssr` or build) 3. see that swipe-to-close is not working
steps to reproduce the behavior: 1.open official documentation with iphone safari 2.find the qdialog component 3.scroll down 4.find the
steps to reproduce the behavior: 1. install capacitor with `quasar mode add capacitor` 2. try to run with `quasar dev -m capacitor -t ios`
steps to reproduce the behavior: 1. focus() on the editor 2. blur() on the editor
steps to reproduce the behavior: - set toggle to true, it won't give you the `true-value` if the type is array
steps to reproduce the behavior: 1. create a new project and build phofcode
steps to reproduce the behavior: 1. click on 'favorite icon ' 2. toast twice
steps to reproduce the behavior: 1. go to phofurl 2. turn your navigator in responsive mobile display 3. refresh 4. try click on the menu `hamburger` a first time (wont work) 4. try click on the menu `hamburger` a second time (it work's)
implement dialog with containerized qlayout like explained in the docs
steps to reproduce the behavior: 1. create a qchatmessage 2. supply a non-square image as the avatar 3. see that it is not a circle
steps to reproduce the behavior: 1. set your viewport to smartphone dimensions.
2. create a page that has enough content for it to have a scroll area enough to trigger the offset of the reveal prop of a qheader/qfooter.
3. scroll through the content till qheader/qfooter reveals trigger hiding qheader/qfooter.
4. within scrolled content, click trough an element that displays a qdialog/qpopupproxy.
5. the qheader/qfooter should reveal when qdialog/qpopupproxy is fired causing layout behave strange like flickering on hide of qdialog/qpopupproxy and causing layout break with ios top and bottom padding.
steps to reproduce the behavior: 1) pull the splitter to <20 or >80 ratio.
2) observe first snap 3) pull the splitter to <20 or >80 ratio.
steps to reproduce the behavior: 1. go to js fiddle 2. look at different and missing icons
steps to reproduce the behavior: 1. click on qselect component 2. check the console
steps to reproduce the behavior: 1. configure the fontawesome iconset in quasar.conf.js 2. copy the code from fiddle into your local 3. load the code and you 'll see a "-->" artifact in first input and popup won 't work.
4. in second input you 'll see it works as expected.
steps to reproduce the behavior: 1. go to phofurl 2. switch to mobile debugging mode and refresh the page 3. swipe carousel 4. see error: tabs should not display scrollbars
1. cause qinnerloading to show from a menu item inside a component that is covered by the inner loading.
1. hook `@blur` to a custom callback 2. initiate blur event 3. notice in the callback that the value is empty
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to phofurl 2. click on any of the colour pickers 3. observe
steps to reproduce the behavior: 1. add a context menu to a div element, 2. add a div, make it a child to the div you add in step 1, add context menu.
3. right click child div, two context menu appear at the same time, overlapped
go to q-menu quasar 1.1.3 documentation, and see section of basic -> idea for content inside q-menu there are two toggles that don't update its visible state
steps to reproduce the behavior: 1. create a carousel with a slide 2. add a css class that overrides background position or size 3. see they don't take effect 4. view source to observe the background properties are inline on the slide instead of in class
steps to reproduce the behavior: 1. click on the `qfield`, dialog opens 2. click on "close" or otherwise dismiss the dialog 3.
`qfield` no longer shows focused appearance, yet the active element appears to be focusable div inside field, 4. click on "show dialog" button, dialog opens 5. click on "close" or otherwise dismiss dialog 6. button no longer shows focused state, but this is a bit weirder than field since active element after closes is set to `<div tabindex="-1" element inside `button` and that element cannot be focused due to tabindex so even if `qdialog` did reset focus, calling focus that would do nothing.
steps to reproduce the behavior: 1. focus on the text input and tab to the first date 2. press <kbd>enter</kbd> and notice the menu popups up 3. close menu and tab again to second date field 4. press <kbd>enter</kbd> and notice you can't see menu 5. if you check dev tools you can see `qmenu` renders offscreen
steps to reproduce the behavior: 1. rename a quasar component in pascalcase this component is not registered, error in the browser image phofimage
steps to reproduce the behavior: 1.
`quasar create test-project` 2. select all default options 3. edit eslintrc.js, add the following at the beginning of the file: phofcode 4. run `quasar dev` or `quasar build` or `yarn lint` 5.
`undefined` is outputted in console
n/a at this point, working on it.
steps to reproduce the behavior: the issue is that this command is failing on your quasar.css file: `less.render(src, cfg.options, callback)`
play around with the commented lines.
1. go to the codepen 2. open developer console 3. right-click the image 4. experience the error 5. remove the `v-model` 6. try again - this time it should work as expected
1. pick a date from the calendar.
2. clear the field via the clearable icon.
3. pick another date from the calendar.
4. the model is changed, but input field is blank.
this happens only first time after clearing.
steps to reproduce the behavior: 1. install quasar cli `npm install -g @quasar/cli` 2. create an application `quasar create cypress-test 3. accept all defaults 4. use npm instead of yarn 5. change into the cypress-test directory `cd cypress-test` 6. install the testing harness `quasar ext add @quasar/testing` 7. select cypress e2e testing 8. select extra "scripts" in your package.json 9. run cypress tests `quasar test --e2e cypress` 10. this _locks up_.
steps to reproduce the behavior: 1. add the `login.json` file in `assets/mock/`folder.
2. add the devserver proxy config to `quasar.conf.js` file.
3. add a button in your app code to call your api `/login` (i call it through `axios`).
4. run `quasar dev` and press the "login button".
select a date and time , the clear tip does not appear.
steps to reproduce the behavior: 1. go to phofurl 2. click on the first qselect with `standard` label 3. press `tab` 4. the next `qselect` visually get the focus but didn't open his dropdown
steps to reproduce the behavior: 1. define a global variable in phofcode 2. in render-process phofcode 3. got 'undefined'
steps to reproduce the behavior: 1. go to docs design overview phofhyperlink example 2. add `row` class to the select components container 3. see error
steps to reproduce the behavior: on native ios build of a quasar app: 1. create a qdialog with a list of inputs 1. click on the last input 1. start typing i believe the main precondition is that the input is in some way covered by native keyboard.
steps to reproduce the behavior: 1. go to `quasar.conf.js` and add `workboxoptions: { skipwaiting: true }` under `pwa` 2. load pwa in web browser
1. pass the wrong value to type property 2. see that there's no prop validation error
steps to reproduce the behavior: 1. go to phofurl 2. drag the slider 3. notice the labels text is not readable when the label is white.
steps to reproduce the behavior: 1. enable cordova suport for a quasar app.
2. add or cordova plugin 2. run the app 3. rotate the device from portrait to landscape 4. rotate the device from landscape to portrait 5. see error it may take several rotates before issue appears.
1. click a disabled qitem
1. open documentation link above (custom ad-hoc locale section) 2. select current date (e.g august 19).
3. notice the week day: august 19 should be monday (lun), but it displays as thursday (jue).
steps to reproduce the behavior: 1. select an option in a multiple q-select that is also using use-input for filtering 2. start filtering after making a selection.
steps to reproduce the behavior: 1. load the index.vue route ("/") with f5 (or refresh)
the following code is used to create uploader: phofcode phofcode
steps to reproduce the behavior: 1.
`npm install -g @quasar/cli` 2.
`quasar create q-cordova-dev -b v0.17` (select yarn install at end) 3.
`quasar mode -a cordova` 4.
`cd src-cordova && cordova platform add browser` 5.
`cd .. && quasar dev -m cordova -t ios -t browser` compare by then doing: `cd src-cordova && cordova run browser` (which works, but doesn't have any quasar hot reloading etc.
go to offical website, and scroll to the form-input component.
steps to reproduce the behavior: 1. go to ' phofurl on *iphone safari* 2. click on 'any button on toolbar multiple time quickly '
view the toolbars in the docs in any version of ie - phofurl
steps to reproduce the behavior: 1. install typescript extension 2. type `this.$q.lang` 4. see error
steps to reproduce the behavior: 1. go to phofurl in safari 10.0
use font awesome 5 with quasar.
steps to reproduce the behavior: 1. create an app extension 2. create a store in the app extension 3. import cookies or sessionsstorage using `import { cookies } from 'quasar ' ` actions.js of the store 4. try using the cookies plugin 5. that may (remember, this is intermittent) result in above error.
steps to reproduce the behavior: 1. go to phofurl using ie or edge 2. click on 'open dialog' button 3. focus the input field or write smth there 4. scrollbar appears
steps to reproduce the behavior: 1. open phofurl 2. look at img src in the browser dev tools 3. you will find
steps to reproduce the behavior: as described above.
1. create extension 2. create a file named `subdir/.myrc` in the templates dir 3. put the render function in the index file phofcode 4. install the extension in a host app 5. the render function didn't copy dot file nor empty subdir.
1. in above codepen, enter any value in the qinput and end with hyphen ("-").
there is a trigger to open qinput when hyphen is pressed.
2. qinput will open and value typed in qinput will disappear
steps to reproduce the behavior: 1. create a qselect 2. change the props to use a json propertie 3. select 1 option, the value change and the log is showed in console 4. select 1 option again, value doesn't change, input fire doesnt emited
1. create an extension and that boot file at that path: phofcode 2. now, push the boot file into quasar conf using the extension api in extension index.js file phofcode 3. install the extension into a quasar app and run 4. it will throw: phofcode it won't be able to load that boot file in the main app.
i went thru logic and noticed that it expects all boot files to be in `app/src/boot`.
meaning boots are not honoured as long as they are outside of main app folders eg:
steps to reproduce the behavior: 1. submit the form
steps to reproduce the behavior: 1. click on the qsplitter separator button to "close" a right pane (sets splitter model to 100)
steps to reproduce the behavior: 0. disable linting 1. have a mis typo: eg `object.` (without property) 2. save vue file, error and need to fix 3. fix to `object.name` 4. recompiling and app hot update does not work anymore.
need to stop and start app again
steps to reproduce the behavior: 1. go to codepen link 2.resize browser window for small window size because of sm grid config 3. as result only name field not rendering but action field is being rendered in place of name while in my project action buttons are not rendering in action field but other fields are rendering.
steps to reproduce the behavior: 1. go to codepen 2. click inside q-select 3. type something + press enter to create child q-chip 4. try to click on child edit it 5. see that q-popup-edit appears and it 's automatically closed upon single input.
steps to reproduce the behavior: 1. go to phofurl 2. click the button to the right
1. unpack the attached iehost.zip, this is a basic application that was generated by the wtl app-wizard.
only the url was changed to open ' phofurl 2. generate a quasar app, enable ie support in the assistant.
3. add in index.template.html in head section `<meta content="ie=edge">` 4. start quasar dev 5. start it will open phofurl 6. notice that page is empty, only a small scrollbar is shown in top/right corner.
steps to reproduce the behavior: 1. go to the codepen 2. see the text baseline in the 2 buttons is aligned 3. click on either open button 4. see text baseline in buttons in qdialog is not aligned
steps to reproduce the behavior: 1. make sure your window is below 1300px or narrower (or 580px or shorter).
2. go to phofurl .
3. click on any of the color selection boxes, like primary.
4. the box will rapidly alternate between sizes/states.
steps to reproduce the behavior: 1. mouse the cursor over the drawer to make the overlay open.
the icons will move 1px to left.
2. move cursor out of drawer.
the icons will move 1px to right.
assuming use of chrome and resolution: 100% you see no arrows.
125%, arrows (shrink failed) 150%, no arrows, shrink worked!
175%, no arrows, shrink worked!
200%, arrows, this one is normal
steps to reproduce the behavior: 1. build an app with `quasar build -m cordova -t ios` 2. open the project in xcode 3. from xcode, run it on an iphone device 4. make some ui, logic or logging changes 5. rebuild the app with `quasar build -m cordova -t ios --skip-pkg` 6. in xcode, stop the app and run it again 7. observe that ui, logic or logging changes don 't appear in app.
steps to reproduce the behavior: 1. run `quasar build` 2. run `quasar serve` 3. go to `localhost:4000` 4. see `404 | page not found`
steps to reproduce the behavior: open console panel to see the logs 1. select another option in the first select box 2. uncomment second qselect in html editor and repeat step1
steps to reproduce the behavior: 1. define context menus inside a `v-for` and assign them a `ref` 2. determine the menu component inside a loop 3. call `.show(event)` on menu component 4. menu does not appear (it appears when right clicking on the item though)
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. setup for android emulator as per quasar docs instructions.
2. then issue the command: `quasar dev -m android -- -dns-server or whatever your local dns server is.
steps to reproduce the behavior: 1. add qinput to default quasar build 2. make sure there is header in layout 3. build for ios device 4. tap qinput 5. keyboard pops up and pushes header out of view
steps to reproduce the behavior: 1. open the code sandbox above 2.
open codepen example, click "show dialog & simple div".
steps to reproduce the behavior: 1. just look, very east to notice
steps to reproduce the behavior: 1. enter select field 2. type a value 3. select a value 4. see that the value entered will not be deleted
steps to reproduce the behavior: 1. create an app-extension with that component 2. create a test app 3. install the component into the test app 4. now invoke the ext using `quasar ext invoke my-ext` 5. issue should occur phofcode
steps to reproduce the behavior: 1. open the above link in firefox (i'm using 67.0.4).
2. try swiping left on a odd-numbered item (no route), should work fine.
3. try swiping left on an even-numbered items (with route), drag seems to get interrupted.
if you release the mouse button, then the drag continues without mouse button pressed.
steps to reproduce the behavior: 1. create a card with a toolbarn in top 2. apply shadow class to the toolbar
on android o (8.x) p (9.x) and q (10.x on emulator): visit phofurl on an android device, either with google chrome or with firefox preview (different rendering engine than chrome / webview) and go to the filter example section.
type in "oo" to filter for google and facebook, but no filtering is being performed.
type in "oo " (trailing whitespace) and the filter gets applied, but correctly finds no matches for "oo ".
press backspace (delete backwards) to delete the whitespace, the filter executes correctly by filtering out all but google facebook.
on android m (6.x) android l (5.x) pressing backspace does not apply filter, don 't know about n. this backspace issue could be caused by autocorrect feature of keyboard.
apparently whenever autocorrect kicks in, it won 't trigger (at least after pressing backspace).
steps to reproduce the behavior: 1. go to platform on quasar docs 2. go to "your platform" section 4. see error
steps to reproduce the behavior: 1. open the codepen.
2. click on the fab.
3. the menu scales from its center and its dom element does not have the class that was added to `<q-menu>` element.
open the example and the error should apear in the console.
steps to reproduce the behavior: 1. create empty project with quasar 1.0.3 & quasar cli 1.0.0 (`quasar create`), choosing default options 2. go in project directory and run `quasar dev`
steps to reproduce the behavior: 1. load the codepen 2. open the chrome inspection 3. simulate a mobile device 4.reload the window 5.focus qselect
steps to reproduce the behavior: 1. go to phofurl 2. click on the qinput and hopefully receive a menu from the browser for autofill 3. choose your auto fill value, probably an address.
4. notice a value auto filed into the qselect 's input and label out of place and it does not match since its not an object like stateoptions list.
* in development mode (displaying correctly) 1. run `quasar dev` * in production mode (displaying incorrectly) 1. run `quasar build` 2. run `node app.js` * app.js phofcode
creates this in the browser console: phofcode
steps to reproduce the behavior: 1. add console log entries to a boot file logging when the bootfile method is executed.
2. open the spa site in dev or deployed server in internet explorer 11. after initial loading of site the console should contain log entries from bootfiles.
3. refresh page either using f5 or browser refresh button in toolbar.
4. the page is refreshed extremely fast, but boot file log entries are missing from console.
see the code snippet below - codepen phofcode
steps to reproduce the behavior: 1. click the first badge, the notify does not trigger 2. click the second badge, notify trigger
steps to reproduce the behavior: 1. click on 'link'
i would provide a targeted codepen, but the site understandably doesn 't work in ie.
steps to reproduce the behavior: 1. go to the docs site example phofurl 2. click one of the bottom or top positioning example buttons until you get "lorem ipsum" notification.
3. in ie it wraps b/c width is pretty narrow despite a wide screen size, in any other browser it doesn 't wrap at all on desktop.
steps to reproduce the behavior: 1. enter select field 2. type space 3. leave select field
1. click on drop down button in first node header --> menu will not display 2. click on drop down button in first node body --> menu will display
steps to reproduce the behavior: 1. go to phofurl 2. see aria label found: false 3. change script tag in editor to include beta 18 4. see aria label found: tru
steps to reproduce the behavior: 1. set a validation rule for minimum and/or maximum value on a qinput of type "number".
2. trigger the validation rule by clicking at least twice in quick succession on one of the increment/decrement arrows.
3. triggering the validation rule results in an error icon appearing and displacing increment/decrement arrows to left.
3. hover over same arrow that was clicked in step 2 with mouse 4. the value starts by itself automatically.
steps to reproduce the behavior: 1. go to phofurl 2. toggle the navigator into device mode (make sure to initialize the app in device mode to use the mobile mode) 3. type "goo" and select "google" 4. the console will show "filterfn goo" and then on select "filterfn google"
any custom component qdialog envoking using custom props.
`this.$q.dialog({ component: customdialogcomponent, root: this.$root, customprops: { anyprop: prop } }`
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. build a simple app with a `<q-dialog :persistent="true">` 2. open it in your browser and press the escape button on the keyboard or tap the backdrop and see that it won 't close (correct) 2. open it on android emulator or on a device 3. press back button and notice how it closes
steps to reproduce the behavior: 1. download the myqdrawer zip 2. drop it into a new quasar project 3. open the page on desktop view 4. see error
steps to reproduce the behavior: 1. go to jsfiddle link 2. paste text you find there or input your own 3. keep on tyiping digits 4. see browser freezing
my app uses preloaded state from the server.
`app.ejs`: phofcode `app.js`: phofcode `selectors.js`: phofcode `reducer.js`: phofcode everything is ok in development, the component gets the data from `<div selection_827 phofimage the `pageboat` component fails to get the preloaded state in production mode: selection_828 phofimage
i don't have a specific reproduction case.
upgrade any react-boilerplate v3.7.0 project to react v16.10.2
- inject a saga into the `app` container and have the container load another container component on a route match, like is done in phofhyperlink - inject a saga with the same key as was used for the `app` container in other container.
in my case phofhyperlink - observe both sagas being called when application is run locally - start production environment (`npm run start:production`) and observe other container's saga not being called by putting `debugger` or `console.log` statements in code.
**expected behavior** i would expect a clear warning indicating that saga with specific key has already been injected.
i saw that this conflicts with hot reloading aspect of application, because components get re-rendered and their injected sagas re-injected and previously injected sagas cancelled.
run container that triggers an action with a saga subscriber (add link to a demo on phofurl or similar if possible)
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate 3.7.0 - node/npm: - browser: chrome, edge
for example i create an account, and after post is resolved i redirect to accountsdisplay phofcode in accountsdisplay my fetch is fired twice.
if i repeat this steps, it will fire 6 times and so on.
the component is not mounted multiple times, and actions are not firing multiple times.
if i use router instead of connectedrouter everything works fine, except obviously location_change dispatch on route change.
const render = messages => { reactdom.render( <provider store={store}> <languageprovider messages={messages}> <router history={history}> <app /> </router> </languageprovider> </provider>, mount_node, ); }; ``
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
build files then upload it to the subdirectory on your server path # versions - react-boilerplate: 3.6.0 - node/npm: - browser: chrome
phofurl # versions react-boilerplate (see package.json): "3.7.0" node/npm: 6.4.1
phofurl # versions - react-boilerplate (see `package.json`): "3.7.0" - node/npm: 6.4.1 - browser:
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
clone phofurl yarn + yarn start click on "new page" button type 'mxstbr ' then press enter expect it to load, but saga does not load repo.
<img width="1428" alt="screen shot at 12 58 57 am" src=" phofurl
go look at most of the open issues.
# versions - react-boilerplate (see `package.json`): latest - node/npm: n/a - browser: n/a
i removed immutablejs following the guide from one of the issues in react-boilerplate.
i added feathersjs backend, frontend.
i changed babel-loader in webpack.base.babel.js to phofcode i changed the app.js file phofcode much appreciate your help!
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): 3.6.0 - node/npm: v9.11.1 - browser: chrome
run `npm run setup` in powershell or cmd.exe on windows # versions - react-boilerplate (see `package.json`): vnext - node/npm: node v10.10.0, npm v6.4.1 - browser: n/a - windows: 10 version 1803 build
just npm install - or node # versions - react-boilerplate (see `package.json`): "version": "1.0.0" - node/npm: 6.4.1
1. clone react-boilerplate 2. npm i react-palm --save 3. npm run build:dll # versions - react-boilerplate (see `package.json`): 3.6.0 - node/npm: 8.11.2 / 6.4.0 - browser: chrome (official build) (64-bit)
app/index.js phofcode login/reducer phofcode # versions - react-boilerplate (see `package.json`): 3.6.0 - node/npm: 10 - browser: chrome
after the app is setup there is a .htaccess file in the app directory so when the npm run build is ran the build process adds a "bin" extension to .htaccess file (.htaccess.bin) .htaccess.bin is also referenced in sw.js file and in main chunk when app deployed server does not recognize .htaccess.bin this a bug and build process should not add bin extension # versions - react-boilerplate 3.6.0 - node version 8.11.1 - npm version 5.6.0 - browser: all browsers
- clone this project - add private:true and workspace:[./app/*] - create new submodule inside ./app/module-a and add some dependencies to it - add a test file inside module-a move to root and yarn test:watch it will run whole 80 tests "79 that come with this boilerplate and 1 we just created" no matter what we do/ any mode we run jest in we cannt get it to rerun only test that changed.
phofcode navigate to: phofurl in chrome.
(verify service worker is installed on application tab in devtools) stop the webserver, and build another update: phofcode refresh phofurl service worker/application tab should now show, another one waiting to install: phofimage kill the webserver again, and close the phofurl tab.
reopen phofurl tab, website wont load (just shows a white page).
because the chunks are not available at time of service worker initial load, website just displays a white page.
rebuilding site, will cause different chunks built, and this service worker will never load again.
only upon another installation (which will require both user to navigate to page, trigger an update, and then close all website tabs, reopen again.)
simple f5 refreshes not work restart worker.
- create a folder named `config` inside `app` with 2 files in it, `development.js` and `test.js` first one being just phofcode second being phofcode - add the following alias inside `resolve` in `webpack.base.babel.js` pointing to the newly created file: phofcode - reference this alias, for example inside the `featurepage` by adding `import config from 'config';` on top of the file and within `render` method.
- run project (`npm start`) and open feature page: text `development` text is shown within `h1` block.
run test (`npm run test`); all tests will pass but one returning: phofcode # versions react-boilerplate: 3.6.0 node/npm: 5.6.0 browser:
run `npm run test` on a mac running high sierra 10.13.5 with a freshly installed watchman (add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): 3.5.0 - node/npm: node 8.9.4, npm: 6.1.0 - browser: n/a
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
phofcode # versions - react-boilerplate: 3.5.0 - node/npm: 5.5.1
phofcode it installs the dependencies and says "initializing new repository" but doesn 't actually create one.
the will be no .git folder afterwards.
# versions - react-boilerplate (see `package.json`): 3.5.0 - node/npm: 8.9.1 / 5.7.1 - browser: / - os: windows cli: git bash / mingw / windows cms windows powershell (tested even more)
this is trivial to repro.
just use 'render' instead of 'shallow' in any component with formattedmessages.
i was very surprised not to find an issue with this, but perhaps everyone who hits it is just using one of the workarounds at the links above?
is there a better solution?
1. clone react-boilerplate, setup, clean, etc.
2. in replace 'shallow' with 'render' (or copy/paste from here) phofcode 3. yarn test result: phofcode # versions - react-boilerplate (see `package.json`): 3.5.0 - node/npm: 5.6.0 - browser: n/a (but version (official build) (64-bit))
- clone react-boilerplate project with command `git clone --depth=1 phofurl - run command to setup: `npm run setup` - enter to remove old repo - run linting: `yarn run lint` then get issue below: phofcode actually we don 't use `eslint-plugin-html` for react project, this error is too strange.
however i try to install `eslint-plugin-html` (latest is 4.0.2) after installing, i got another issue: phofcode # versions react-boilerplate (see `package.json`): 3.5.0 node/npm: browser: n/a i also tried to downgrade node v8 but same error there 's no `eslint` global (yarn and npm)
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
follow the quick start guidelines; `clone this repo using git clone --depth=1 phofurl move to the appropriate directory: cd react-boilerplate.
run npm run setup in order to install dependencies and clean the git repo.
then run npm run test` # versions - react-boilerplate (see `package.json`): v3.5.0 - node/npm: v8.9.4 / v5.6.0 - browser: n/a
the component i 'm using is antd.button with styled component wrapping it: import import styled from 'styled-components '; import { popover, button } from 'antd '; import testimg from render() { ... src={testimg} alt="testimg"/></div>` ... } ``const mybutton = ({classname, children}) => (<button const styledbutton = styled(mybutton)` && { color: palevioletred; }, && {&:hover { border-color: #34b783; }} `;`` error message during build: error in module parse failed: d: testrun2 eact-boilerplate unexpected token (45:18) you may need an appropriate loader to handle this file type.
| styled from 'styled-components '; | popover, button } 'antd '; | testimg, var _ref2 = _jsx( 'div ', {}, void 0, _jsx( 'div ', {}, void 0, _jsx(styledbutton, {}, void 0, 'styledbutton!!
'), _jsx( 'img ', | src: testimg, alt: 'testimg ' @ @ @ ./app/app.js @ multi ./app/app.js # versions react-boilerplate version: v3.5.0 node version: v6.10.2 thanks for your time for looking into this
`git clone --depth=1 phofurl `cd react-boilerplate` `npm run setup` `yarn add redux-form` `npm test # observe errors` # versions - react-boilerplate (see `package.json`): 3.5.0 - node/npm: - browser: chrome
`npm run generate language` followed by `any`.
`translations/any.json`: phofcode as defined in phofurl # versions - react-boilerplate (see `package.json`): * 3.5.0 * - node/npm: - - browser:
doesn't apply # versions - react-boilerplate: ** 3.4.0 ** - node/npm: - - browser:
1. clone react-boilerplate repository 2.
`npm run build` # versions - operating system: ubuntu 16.04 - react-boilerplate (see `package.json`): 3.4.0 - node/npm: - browser: n/a
in `app/index.js`, i have a route like this : phofcode then, in the signin container, at the end : phofcode my saga looks like this : phofcode do you have any idea where it could come from ?
i have this issue because of the migration to react-router v4.
# versions - react-boilerplate (see `package.json`): 3.4#dev - node/npm: v8.2.1 / v5.3.0 - browser: chrome 59
i've added my env var: phofcode and then in my code: phofcode when i run: `api_url= phofurl npm run start:prod` my env variable is undefined.
when i run `api_url= phofurl npm run start` it's fine.
would love to use my api in prod ;) # versions - react-boilerplate 3.4.0 - node/npm: v8.1.3
1. checkout to ssr branch 1. install `npm install --save request` 1. run the app after `npm start` app not running on the `localhost:3000` # versions - react-boilerplate (see `package.json`): v3.4.0 - node/npm: v6.10.0 - browser: chrome - platform: linux-mint-18
# versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: node 8.1.4, npm 5.3.0 - browser: chrome (official build) (64-bit)
run `npm run setup` without lodash globally installed.
# versions - react-boilerplate (see `package.json`): head of master and most stable release - node/npm: 8.0 - browser: n/a
- go to the docs page ( phofurl - click the link that says "tagged template literals" # versions n/a
` to reproduce problem clone repo phofurl 1. npm install 2. npm start (to run locally and see if everything is alright) 3. git add .
4 git commit -m 'some comment' 5. follow steps for deployment for heroku # versions node @7.5.0 npm @5.0.3 - react-boilerplate @3.4.0 - node/npm: - browser:
(add link to a demo on phofurl or similar if possible) sorry i don 't know how to put a react app onto it # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: v7.10.0 / 4.2.0 - browser: (64-bit)
1. clone `$ git clone --depth=1 phofurl 2. open `$ cd react-boilerplate` 3, setup `$ npm run setup` 3. clean default app `$ npm run clean` after the clean phase the boilerplate left some bare bones as a nice place to start but body.fontloaded will never happen # versions - react-boilerplate 3.4.0 (just cloned the master branch today) [1]: phofurl
- open a new `react-boilerplate` cloned repo using vscode editor - attempt to use intellisense completions # versions - react-boilerplate: 3.4.0 - node: 6.5.0 npm: 4.5.0 yarn: 0.21.3
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
as per the resolution proposed issue #1413 phofhyperlink : 1. add `node: { fs: 'empty ', net: 'empty ', tls: 'empty '}` to `webpack.base.babel.js` 2. add `import io from to `app.js` 3. open in chrome (add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: - browser: chrome - socket.io: 1.7.3 socket.io-client: 1.7.3
installed 'styled-props' using npm install -s styled-props and tried to import it.
i checked my same code in a 'create-react-app' clean app and both styled-components and styled-props work well there so it's a problem with this particular boilerplate.
actually webpack and build configurations are so complex that i'm afraid of touching them.
tried it on both a mac a linux computer with no luck # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: - browser: chrome (64-bit)
`npm install @sketchpixy/rubix --save` phofcode # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: 4.1.2 - browser: chrome i appreciate insight into this issue.
yarn run start:production open the page in chrome and refresh # versions - react-boilerplate (see `package.json`): 3.40 - node/npm: 6.94 - browser: chrome
`npm run setup` `npm run clean` `npm run build` # versions - react-boilerplate: `3.4.0` - node/npm:` - so: `ubuntu 16.0`
1. git clone --depth=1 phofurl 2. npm run setup 3. npm start 4. npm run test (on another terminal window) screen shot at 13 32 19 phofimage (add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: - browser: google chrome (version (64-bit))
1. clone project 2. right mouse click on package json and select 'show npm scripts ' 3. run 'test ' # versions 3.4.0 # solution modify package.json from phofcode to "test": "jest --coverage --runinband", ``
2. run `npm run setup` 3. run `npm run start` 4. observe # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: 7.7.1 / 4.1.2 - browser: chrome (56.02) note: it appears it only happens in chrome.
when i try edge the site works
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): - node/npm: - browser:
(add link to a demo on phofurl or similar if possible) # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: 6 - browser:
`npm run test` # versions - react-boilerplate : 3.4.0 - node : 6.3.0 - react-router : 3.0.0
the demo repo is available there: phofurl once cloned, just alternate between the two ways of importing the moment locale in app/app/index.js.
in one case, the console should show an i18n 'ed locale (but jest will complain), and in other console will show default 'en ' locale, but tests will pass without a problem.
# versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: node 7.4.0 / npm 4.0.5 - browser: latest chrom
npm install --save-dev i have updated my package.json at phofurl and added the following: "plugins": [ ] i have run the command : npm install && npm start i have the following error : > 34 | return await authservice.logout(); | # versions - react-boilerplate (see `package.json`): 3.4.0 - node/npm: 7.2.0
git clone --depth=1 phofurl npm run clean npm run generate route # versions - node/npm: v5.4.0 / 3.8.5 - browser: none
`npm run clean` 2. see that tests are gone from `app`.
`npm run build` 4. see that build fails because of low coverage # versions - node/npm: 7.3.0 - browser: chrome 56
- follow all step in this link deployment phofhyperlink - and issue appeared when push this command `git push heroku [mybrand]:master` # versions - reactboilerplate: v3.3.3 - node/npm: node v6.9.1 / npm v3.10.8 os: macos
1. translation file is not updated: just update any `defaultmessages` in some container's messages 2. delete-proof: delete `translations` folder and run `npm run extract-intl` # versions - node/npm:6/3 - browser:n/a
representative plugin: `npm install and configure the plugin in for the build `npm run extract-intl` will fail on files wherever the code that need to be transformed such as `const { children, ...rest } = this.props; ` for the chosen plugin # versions - node/npm: 6/3 - browser: n/a
just make your server answer with a redirection to any service worker request
(add link to a demo on phofurl or similar if possible) # versions - node/npm: - browser:
just being an inexperienced developer on this boilerplate and start using it regard
git clone --depth=1 phofurl npm run setup open phofurl change language from english to german # versions v3.3.1 - node/npm: v6.9.1 - browser: version (64-bit) error message: index.es.js:976 [react intl] missing message: for locale: "de", using default message as fallback.
index.es.js:976 [react intl] missing message: for locale: "de", using default message as fallback.
index.es.js:976 [react intl] missing message: for locale: "de", using default message as fallback.
# versions - node/npm: node: v6.2.2 npm: 3.9.5 - browser: any
reference a 4mib large jpg from css.
watch the incremental compiler hang (afaik, i have not waited forever, and there are no progress bars displayed).
not sure, redid my entire app on the latest version, but not sure why this happens.
# versions - node/npm: 6.7 - browser: chrome / safari
- require `isomorphic-fetch` - open in browser # versions - node/npm: 6.2.1 - browser: chrome (64-bit)
1. clone repository 2. add below code in `homepage/index.js` phofcode 1. run server, and click `feature` button.
2. you can see the alert box, imply that it's being unmounted.
couldn 't really reproduce this error, happened once, hasn 't happened again since.
# versions - node/npm: - browser: m (64-bit)
in the `routes.js` file, for example add a child route to the `/features` route: phofcode now, after running `npm start` the `/features/test` route should display the homepage container, but instead its parent, featurepage container, is rendered.
the same thing happens when using code from example from documentation phofhyperlink .
i was able to reproduce this in both master and dev branch, however i've seen other people using it so maybe i'm making a mistake somewhere.
1. pull commit tag `v3.2.1` 2.
`npm run test -- --browsers safari` 4. test failed.
1. clone the repo, setup and start a new project 2. add a firebase dependency with: `npm install firebase --save` 3. add initialization code in app.js: const firebase = require( 'firebase '); const config = { apikey: \'<api_key>", authdomain: databaseurl: ' phofurl storagebucket: }; 1. run `npm run build` # versions - node/npm: - browser: chrome version dev (64-bit) on mac os 10.11.6
1) clone repo 2) `npm run setup` 3) `npm run lint` # versions - node/npm: 6.6.0 / 3.10.7 - browser: n/a
(add link to a demo on phofurl or similar if possible) # versions - node/npm: - browser:
1) create two or more routes 2) create links for all the routes on a page and set them up to use a css class for `activeclassname` # versions - node/npm: 6.5 / 3.10.3 - browser: google chrome and mozilla firefox
`npm run generate` 2. generate a new container 3.
run `npm install` with the below mentions node version: # versions $ npm -v 3.10.6 $ node -v v4.5.0 console.txt phofhyperlink
1) `git clone --depth=1 phofurl 2) `npm run setup` 3) `npm run clean` 4) create new component via `npm run generate` (code below) 5) removed linting step in pretest in package.json for convenience 6) run test via `npm test:watch -- --grep "testcomponent"` testcomponent: phofcode testcomponent test: phofcode # versions - node/npm: 6.5 / 3.10.3 - browser: chrome kubuntu 16.04
clone repo according to tutorial.
`npm run setup` `npm start` try to access site from oneplus one # versions - node/npm: - browser: google chrome - os: android 4.4.4: a0001 build/ktu84q
- clone & setup project - install redux-form@6.0.0-rc4: `npm i --save --save-exact redux-form@6.0.0-rc.4` - import redux-form in `reducers.js`: `import { reducer as formreducer } from - npm run build --verbose # versions node/npm: v6.3.1 / 3.10.3
follow steps in phofurl # versions - node/npm: 6.2 - browser: irrelevant
running `npm run setup` goes ok until it tries to run phofcode # versions - node: 6.3.1 - npm: 3.10.5 - os: windows 7 - browser: n/a
attempt to implement that code in a project of codesandbox.
i don 't see the warning in the console on the examples page linked above though.
you can see this on the documentation examples for the navbar component.
1. go to phofurl 2. notice the `<navdropdown>` in the example code has an 'id' attribute.
3. inspect example ui and notice `<a>` element has no id.
steps to reproduce the behavior: 1 - create a component with a required `onclick` prop 2 - provide it as the `as` prop of a `dropdown.toggle` 3 - type checking doesn't succeed
steps to reproduce the behavior: 1. go to phofurl 2. click on 'launch demo modal ' 3. inspect dom, and find div with role=modal and aria-hidden=true
steps to reproduce the behavior: 1. create a `<card>` 2. put a `<nav>` inside it, that isn't inside a `<card.header>` 3. give the `<nav>` a `variant` (either will do), and at least one complete `<nav.item>` 3. add another element after the `<nav>` 4. observe that the `<nav>` overlaps element after it
create a `form.check` with `type="switch"` prop and `onchange` function prop.
click switch and notice function not being triggered.
1. create a tabbed navigation without an `activekey` or `defaultactivekey` prop set 2. press tab key to focus the navigation
look at dom structure and you 'll see no 'role ' applied to the tab container.
steps to reproduce the behavior: 1. inspect single toggle button found here: phofurl
create a simple collapse transition <collapse in={this.state.open}> <form.row> </form.row> <form.row> </form.row> </collapse> it throws an error on the browser typeerror: children.props is undefined render/< 121 | onexiting: handleexiting 122 | }), function (state, innerprops) { 123 | return _extends({}, innerprops, { > 124 | classname: classnames(classname, collapsestyles[state], _this2.getdimension() === 'width ' && 'width ') 125 })); 126 }); 127 }; render 388 // allows for nested transitions 389 return { 390 value: null > 391 }, children(status, childprops)); 392 } 393 394 var child =
steps to reproduce the behavior: 1. use axe-core and test modal
steps to reproduce the behavior: 1. check out master (i used phofurl 2. apply a typescript test: <details> <summary>patch</summary> phofcode </details> 3. run `yarn dtslint` 4. see error (below) <details> <summary>typescript error</summary> phofcode </details>
steps to reproduce the behavior: 1. check out phofurl 2. apply the following patch phofcode 3. run `yarn dtslint` 4. see error (below) <details> <summary>typescript error</summary> phofcode </details>
steps to reproduce the behavior: 1. go to overlay trigger example docs phofhyperlink 2. observe that it describes the component to use as a "stateless function component".
yarn add react-bootstrap open react componente and import one componen the react-bootstrap.
import { container } from "react-bootstrap";
1. make carousel with 2 items 2. sliding to first item when second item is current
steps to reproduce the behavior: 1. click the dropdown button.
2. click the word "one" in the dropdown menu.
3. click dropdown button again.
observe radio next to "one" appears checked.
4. click radio button next to "two" in dropdown menu.
5. button a third time.
steps to reproduce the behavior: note.
the and visibilityvalue are made up because they are not the issue, i can see that my handler (the changes the value (visibilityvalue), but the menu doesn 't correspond to that.
1. add following component setup `<dropdown> <button <dropdown.menu show={visibilityvalue}> </dropdown.menu> </dropdown>` 2. press "toggle" button, menu opens up.
4. press "toggle" button again, menu doesn 't open up anymore.
steps to reproduce the behavior: use button with any variant other than the provided variants and you will get the error from typescript.
steps to reproduce the behavior: 1. go to components > accordion 2. check at the console 3. see warning
tl;dr version: go to phofurl and click on the 'react-overlays ' link in the body of the page; it takes you nowhere.
detailed steps a user seeking documentation might conceivably follow: 1. go to phofurl 2. click on 'components ', to go to phofurl 3. click on 'utilities ' in the sidebar, go phofurl 4. click on 'react overlays ' in sidebar, go 5. find text "are built top of components from react-overlays" in body of page; click 'react-overlays ' hyperlink that text.
6. nothing happens - it 's a link same page.
steps to reproduce the behavior: 1. go to ' phofurl 2. scroll down to overview, resize screen to mobile and look at the class attr generated on the navbar toggler whilst expanding and collapsing the nav by clicking navbar toggler button
steps to reproduce the behavior: 1. use the tabs component in a react application.
2. view the `nav` element of the resulting html.
2. observe that the last two releases are missing.
steps to reproduce the behavior: 1. using typescript create a dropdownitem whose eventkey is not a string type (e.x.
any typed object) 2. compile 3. see a compilation error
* create a dropdown component with your own specified toggle and menu components.
* create a label with an `id` that you'd like to assign to the dropdownmenu * set the `aria-labelledby` attribute of the dropdownmenu component to your label's `id` * inspect the resulting root `div` of dropdownmenu, it will be assigned id of `dropdowntoggle` component rather than label (or it will be an empty string if no id was given to toggle)
steps to reproduce the behavior: 1. use typescript 2. put `this.email = and `<form.control _ref={this.email} type="email" placeholder="email" />` somewhere in your code 3. try to compile 4. see compilation error
steps to reproduce the behavior: 1. create a component which returns a `navitem` 2. use it inside a `nav` inside a `tab.container` 3. see error that the tab is not functional
1. go to phofurl on mobile or tablet or other touch device.
2. try swiping on the demo slides.
steps to reproduce the behavior: 1- open the code in code sandbox (see link below) 2- activate the console view in code sandbox 2- click on the first submit button (html) section 2.1- when clicked, a log entry is being produced using following command: `console.log("events:", event.currenttarget === event.target, event.currenttarget, event.target);` 3- you should see a log entry with a false value and both event values being displayed.
one is form other button - **this is expected behavior** `events: false, <form novalidate="" class=""></form>, <button name="submit" type="submit" class="btn btn-primary" 4- now click last submit button (react-bootstrap) 5- you should see a log entry with true value and both event values being same (i.e.
form element) **this is not expected behavior** `events: true, <form novalidate="" class=""></form>, <form novalidate="" class=""></form>`
steps to reproduce the behavior: 1. set browser to device view, with width less than 580 px.
2. browse to phofurl 3. click toggle button
steps to reproduce the behavior: take two identical links one as nav.link and one as link phofcode `<nav.link>` selection closes the collapsed menu as expected but reloads the entire page (by design) which is not desired.
`<link>` loads the correct component according to its route definition, but collapsed menu does not close on selection.
steps to reproduce the behavior: 1. open example 2. select one of nav items 3. press left or right arrow on the keyboard 4. open your browser console and see the error
steps to reproduce the behavior: 1. installed react-bootstrap and bootstrap into an ** existing ** project with npm install react-bootstrap bootstrap 2. added import-statement in react component import button from 3. added button inside return() of render() function: `<button
steps to reproduce the behavior: 1. create a `dropdownitem` whose `eventkey` is not a `string` type (e.x.
`number`) 2. create & set up an `onselect` handler, and attach it to the `dropdown.item` 3. in the handler, log the `typeof` received `eventkey`.
note `typeof` is `string` rather than type of original value passed to `eventkey` prop.
steps to reproduce the behavior: 1. visit code sandbox example below.
4. observe plain text inputs aren 't scaling as expected.
1. go to phofurl 2. edit code sample.
change "right" to "right-start" 3. see error
just type something like this and look into browser devtools - listgroup has an id, but list items doesn 't phofcode screenshot from phofimage
steps to reproduce the behavior: 1. go to 'forms ' 2. click on 'left-sidebar validation ' 3. click on 'submit form ' on the first validation example.
steps to reproduce the behavior: in the codesandbox you can see the error emitted by `react-beautiful-dnd`.
if you replace the `<row />` with a `<div />` error goes away.
so my assumption is ref is not passed through.
steps to reproduce the behavior: 1. go to ' phofurl 2. tab to launch demo modal button 3. press spacebar to activate 4. focus does not move into dialog
steps to reproduce the behavior: add `<form.text muted />`.
steps to reproduce the behavior: 1. go to the form 2. type "test this" and it will show up as "typethis"
steps to reproduce the behavior: 1. go to phofurl 2. click on 'clone repo ' 3. in bash run: git clone phofurl 4. then cd into the repo: cd 5. install dependencies npm install 6. run the "start" script to start the application running locally npm start your browser should now be running front end on a localhost to stop running server use ctrl + c to make your own build.. 1. npm run build 2. log into netlify and drag and drop build folder into netlify 's 'sites ' tab, this will deploy site for you.
steps to reproduce the behavior: 1. check out phofurl 2. apply the following patch phofcode 3. run `cd types && 4. see error (below) <details> <summary>tsc error</summary> phofcode </details>
steps to reproduce the behavior: 1. create a file, `test.tsx`, like this: phofcode 2. run `tsc --jsx react --noemit --strict components/test.tsx` 3. see error
steps to reproduce the behavior: 1. go to page above 2. click on 'tab components' link
steps to reproduce the behavior: 1. create dragsource.
2. create a `position: fixed` element with a higher z-index that overlaps the dragsource.
3. drag the dragsource element.
excample:single-target phofhyperlink steps to reproduce the behavior: 1. focus password input 2. drag box 3. box cannot drag into dustbin, but box opacity changed
see the doc: phofurl image phofimage edit: i would be happy to create a pr to fix, at least, the typo in the documentation.
i 'm just waiting for your feedback to know if it 's a real issue or if i 'm missing something :)
steps to reproduce the behavior: 1. enable font and app scaling in win10 (125% or more) 2. go to handle and previews react-dnd example phofhyperlink in chrome (tested in v77) 3. start a drag action in lower box with the cursor placed the middle of the box (the 'i' image) 4. the preview image offset is top lefter corner
live reproduction phofhyperlink steps to reproduce the behavior: 1. drag the first "drag me" item.
see the drop zone enlarge.
2. attempt to drag the second "drag me" item.
phofurl steps to reproduce the behavior: 1. use drag handle to drag item, it will display only handle being dragged.
live reproduction phofhyperlink steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
sorry, no small test case available
create a blank html document with script tags that include the following: react.development.js & react-dom.development.js (both v. 16.8.0) and reactdnd.js & reactdndhtml5backend.js (both v. 9.4.0, from the dist/umd folders of the react-dnd and react-dnd-html5-backend node_modules folders).
direct - dopping works: phofurl iframe - dropping doesn't work: phofurl steps to reproduce the behavior: 1. go to the links 2. try dropping items over the drop zone.
live reproduction phofhyperlink steps to reproduce the behavior: 1. open a text editor and type some text 2. select the text and try to drag it on any of the inputs 3. none of the inputs allow you to drop text notok2 phofimage
go to phofurl (or to any of the examples) steps to reproduce the behavior: the "inline" example is working fine: chrome-working phofimage however running the same code in the javascript/typescript tabs, so in a cross-origin iframe (e.g.
in embedded codesandbox) drop event is not fired: chrome-not-working phofimage running example phofhyperlink is also not working in codesandbox editor which also uses an inframe.
phofimage in both cases there is this error console: phofcode
video attached see code sample here: phofurl steps to reproduce the behavior: (this is only noticeable when there are styles to be applied on hover after drop is completed) 1. go to an item 2. start dragging 3. drop to a suitable drop target 4. the item that is dropped does not achieve the hover over styles ( until the user ever so slightly moves the mouse again)
phofurl steps to reproduce the behavior: 1. add an empty string in the `usedrag()` hook of `item.type` 2. try to drag the item.
live reproduction phofhyperlink steps to reproduce the behavior: 1. drag `glass` to `drag` a box here.
it seems intermittent, it doesn 't happen every time, so i 'm hoping that the stacktrace and description can shed some light.
if not, i 'm happy to try and debug further.
steps to reproduce the behavior: 1. install 2. set `touchbackend` as backend of `dndprovider` 3. set options `{ enablemouseevents: true, enablekeyboardevents: true }` as options of `dndprovider` 4. run app and start dragging with mouse 5. see error
phofurl check logs when dragging banana box steps to reproduce the behavior: 1. go to phofurl 2. start dragging banana 3. check scroll logs 4. see that collect of different drop area were called
phofurl steps to reproduce the behavior: 1. open your console 2. go to phofurl 3. mention that "source props" contains `hocprop` since in `source.js` is wrapped in an hoc phofhyperlink (called `slot`) 4. drag `block a` or `block b` in the bigger drop zone to the right called `a` 5. mention that the log for `drop item` is missing property `hocprop`
phofurl steps to reproduce the behavior: 1. open phofurl 2. drag the
write a test using enzyme, try to retrieve the manager phofcode it will fail because instance() will return null with react 16 (stateless function component don't have an instance)
code: phofurl steps to reproduce the behavior: 1. start dragging the element "create some examples" 2. look that the drag preview contains some following elements.
3. try move it again from any other position to see how preview changes.
demon phofhyperlink steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. open the copy or move hooks example at phofurl 2. drag any of the boxes everywhere 3. the alert will always say "you moved ${boxname} into ${boxname}"
phofurl steps to reproduce the behavior: 1. drag & drop a todo.
it 'll work as expected.
2. drag & drop any subsequent todo, and the bug will appear.
here is a reproduction of my problem but in my app the drag doesn't work at all.
live reproduction phofhyperlink steps to reproduce the behavior: 1. drag a tab 2. drop it on a drop target 3. try dragging a tab again 4. no console error but impossible to drag again any of the tabs
live reproduction phofhyperlink steps to reproduce the behavior: 1. click on 'drag me by the handle good', it works well 2. click on 'drag me by the handle bad', see error
phofurl steps to reproduce the behavior: 1.
`vagrant init centos/7` and 'vagrant up ' 2.
`vagrant ssh` and install npm, yarn, and create-react-app phofcode 3. create-react-app test_app 4. cd test_app and yarn add react-dnd react-dnd-html5-backend 5. create whose content is below: phofcode 6. cd ~/test_app yarn test 7. see error
steps to reproduce the behavior: 1. use react-dnd 9.2.1 in package.json 2. meteor build
steps to reproduce the behavior: 1. bundle an app with v9 of react-dnd 2. open in edge 17.
`script1028: expected identifier, string or number`
skipped we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior:
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: example: phofcode
icons: phofcode view style: phofcode react native elements theme: phofcode this is totally random, sometimes it appears transparent and after killing the app and reopen it, it appears with a white background.
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: use the component, tab to it using a keyboard, and press enter .
does not actually "press" button example: phofcode image phofimage
snack reproducing issue here: phofurl i have "color coded" the button as blue and its container as red to better illustrate what is occurring.
# steps 1. run snack on android.
observer expected and desired behavior.
note that no red appears since the button is filling its container 2. run snack on ios.
observe thin button along top with no text displaying.
notice the size of button and its container which fills the screen 3. remove or comment out "flex:1" on "searchbutton" style.
4. observe now both android and ios look same but does not fill container
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior:
just render some `listitem` 's.
i get the error when rendering multiple basic `<listitem title="test" />`
- my method searchforterm(term) phofcode - the api phofurl - the toolbar (see up)
i have no way to reproduce this... not sure how to see what's happening in production.
phofcode 1. start app with expo 2. enable debugging and toggle inspector 3. open react developer tools 4. click/hover on <input> and his child `<rctview>` 5. app crash
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior:
yarn add react-native-elements # or with npm npm i react-native-elements --save phofcode
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: # steps on ios/android 1. write text that is longer than the searchbar's width, 2. take marker to beginning of text 3.insert new letter
#steps 1. use <image/> component from 2. add a placeholdercontent 3. run on android device 4. image will render with placeholdercontent always
1. set a title in an `avatar` component 2. set a custom `avatarstyle` property with a user-defined `backgroundcolor` value.
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: example: phofcode
create a pricingcard like this phofcode
use jest with enzyme mount on any component using rne buttons.
button imported into component as follows: import { button } from 'react-native-elements'
snack: phofurl steps: 1. run code presented in snack on your device/emulator, because snack web don 't display warnings (see this issue phofurl 2. after view will be rendered you will see a warning _"warning: failed prop type: invalid prop `inputcomponent ` supplied to `input `.
phofurl note that it just fails on ios, it works correctly on android.
swapping `image` for `imagebackground` directly also works.
follow example given on site: <input placeholder='input with shaking effect' shake={true} />
searchbar with noicon prop compiled with react-native-web
1. render a few paragraphs of text in a `scrollview`.
1. validate you can see the text.
1. go to the settings app.
1. general > accessibility > larger text > enable larger accessibility sizes.
return to the app, and validate that the text disappears.
here is component that i used to validate.
i tried deleting node_modules and run `npm install` again, same error.
so i'm not sure what the conditions are that triggers it, just that it never runs on my end.
| software | version | | --------------------- ------- react-native-elements 1.0.0 react-native 0.58.6 npm or yarn 6.8.0
follow phofurl in src/app.js: phofcode run `yarn web`
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: ---- ### to reproduce: 1. add the following to your theme: phofcode 2. attempt to modify `margintop` on a `searchbar` with `platform="android"` ----
example: phofurl # steps 1. click on 'button' 2. see the overlay
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: phofurl make an input.
assign the prop phofcode with value phofcode .
watch as it doesn't work when you use text field and instead you just get alpha keyboard (instead of number pad).
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: example:
using the example from the website ( phofurl example: phofcode here is how it looks like image phofimage in my app image phofimage it used to look different (note the padding) image phofimage any idea what has changed?
themeprovider with flatlist and listitem and yes, i 'am using keyextractor in flatlist.
| software | version | | --------------------- ------- react-native-elements 1.0.0 react-native 0.57.7 yarn 1.13.0
i couldn 't figure out how to reproduce this bug with a snack expo, because i have no idea how to use it with rne beta and rnvi.
therefore i did it with `react-native init`.
example: phofcode now change `app.js` to reflect the following: phofcode
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: example: phofcode # steps 1. set up as above 2. type something in password field 3. press icon 4. press icon again
button: <button title='save' raised rounded={true} onpress={this.register} /> function: register() { this.setstate({saving: !this.state.saving}); } constructor: this.register = this.state = {...... saving: false};
use searchbar with `platform="ios"` on android.
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: # steps 1. add listitem to flatlist 2. use any of the switch props for listitem 3. open flatlist 4. see warning
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: click on snack link to see reproduced issue described above phofhyperlink
1. create a new rn project: `react-native init rnebug`.
2. install react native elements: phofcode 3. replace the code in `app.js` with the following: phofcode 4. run your app and see the bug.
i 'm using the typescript template of react-native.
using yarn workspaces + lerna.
added testing using `ts-jest` + after.
encountered an error with jest that was fixed by adding 1. clone the sample repository phofhyperlink .
this is a stripped down repository without yarn workspaces + lerna.
it 's also only using `react-test-renderer` for snapshot testing.
it contains a hello component that renders an input component from rne.
the test for this component is just a snapshot test.
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior:
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: example: phofcode
upgrade from 1.0.0-beta5 to 1.0.0-beta7 and voila!
now all your listitem components will have an ugly black background when pressed (you can hold the press to further illustrate the issue).
i had trouble recreating the bug on snack due to an expo font error.
but here is the code that works on my device: import * as react from 'react '; import { flatlist } from 'react-native '; import { constants } from 'expo '; import { avatar } from export default class app extends react.component { constructor() super(); this.state = parishes: [ name: 'st.
therese ', location: 'kansas city, mo ', date: 'march 11, 2019 ') }, name: 'st.
mary 's ', location: 'ellis, ks ', date: 'may 5, 2019 ') } ], }; render() return ( <flatlist /> ); renderitem({ item }) return ( <avatar size={75} rounded source={{ uri: ' phofurl }} onpress={() => console.log("works!")}
activeopacity={0.7} /> ); keyextractor(item, index) return index.tostring(); ``
# steps 1. add a react native elements to app 2. add any icon with name from here phofurl 3. refresh the app
run the below example on iphone xr simulator or actual device.
i don't know how to display warnings in snacks, but the warnings should get thrown here: phofurl
<view style={{ backgroundcolor: 'transparent ', margintop: screen_height / 15 }}> <input placeholder= 'input with icon ' lefticon={{ type: 'font-awesome ', name: 'chevron-left ' }} /> </view> example: or <view style={{ backgroundcolor: 'transparent ', margintop: screen_height / 15 }}> <input inputcontainerstyle={{ borderradius: 40, backgroundcolor: borderwidth: 1, bordercolor: "transparent", height: screen_height / 15, width: screen_width / 1.3, marginvertical: 10 }} maxlength={40} multiline={false} ref={input => this.emailinput = input} onchangetext={(email) => { this.setstate({ email: email }) this.setstate({ email_valid: }) // this._onshow({ text, id, type }) }} value={email} // ?
: null} lefticon={<icon type= 'feather ' name="mail" color="rgba(63, 174, 135,0.6)" size={screen_height 35} />} iconcontainerstyle={{ marginleft: 30 }} placeholder="email" 174, 135,0.6)" inputstyle={{ marginleft: 10, marginright: 10, color: "white", fontsize: screen_height 41 autocapitalize="none" autocorrect={false} errorstyle={{ textalign: 'center ', fontsize: fonts.size.regular errormessage={email === "" ?
null : "please enter a valid email address"} returnkeytype="next" onsubmitediting={() => { this.setstate({ email_valid: }); this.otpinput.focus(); bluronsubmit={false} /> </view>
# steps 1. a windows machine with wsl 2. clone rne repo, `git clone phofurl 3. install dependencies `yarn` 4. run test `yarn test` 5. see errors
try to use an ant design icon.
# steps 1. clone this repository: rnw-github phofhyperlink `$ git clone phofurl && cd rnw-github` 2. change to branch `rne-button-issue` `$ git checkout rne-button-issue` 3. install package dependencies.
`$ yarn` 4. run `yarn android`.
make sure you have connected device.
<img src=" phofurl width=200 /> 5. run `yarn web`.
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior:
relevant part of code: phofcode phofurl
(note: warning will not appear on 'tap to play ') phofurl have an icon or an array of icons as the caption prop for the tile component on version 0.19.0. example: phofcode
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: phofurl
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: i have created a snack at phofurl
this snack is not exact as my app as it uses redux & realm but is 99% same.
i have put comments where data is actually coming from redux.
though during test cases, i am not using the * connected * react-redux component.
phofurl it was partially touched here: phofurl , but i did not find any resolution
the source code: search.js phofhyperlink to preview the bug, scan the following qr code with expo.
try to use the overlay component on beta 5 in this manner: ` <overlay isvisible={true}> <text>my text</text> </overlay>`
we highly recommend that you re-create the bug on snack phofhyperlink .
if not, list the steps that a reviewer can take to reproduce the behavior: i tried to reproduce this bug on snack, but it doesn't happen on snack.
i've just created a new react-native app with react-native init and installed react-native-elements.
that's all i've done and the error is happening.
use overlay component and tap overlay background.
<listitem title= 'enable inventory ' switch={ <switch value={this.state.ison} onvaluechange={(value) => this.setstate({ ison: value })} /> } />
1. link a custom font with multiple weights 2. use the button component and set the fontfamily of the `titlestyle` to the font.
i couldn 't recreate it on snack because i couldn 't install next version on snack, but here 's a simple example: phofcode phofcode
# steps 1. add a forminput and any other element to a screen (button, checkbox, forminput, etc) 2. launch the app on an android device 3. click on the forminput and watch the keyboard open 4. click on any other element and watch the keyboard close as opposed to interacting with element and closing keyboard if not a text field.
please note cancel will alert but won 't clear text in expo.
however, it won 't alert on my iphone.
repo link: phofurl the repo has a readme describing more.
i've created example unit tests; one that consume a pipe containing `withlatestfrom` and another that does the same thing using `switchmap`.
- repl or repo link: phofurl (i used a `take(100)` here just to limit the amount of output).
- repl or repo link: (you can use phofurl to create one to attach here) phofurl typescript import { observable } from 'rxjs'; import { of } from 'rxjs'; import { catcherror, switchmap, tap } from 'rxjs/operators'; import { fromfetch } from 'rxjs/fetch'; export type httperror = code?
: string; message: string; stack?
: string; }; export class apiservice<model> private fetch: ( input: string | request, init?
: requestinit, ) => observable<response>; /
- repl or repo link: phofurl
this does not represent the flow on which i had the issue is just a simplification of the problem.
phofcode the result is : phofcode rather than phofcode
-minimum code which reproduces bug: phofurl run "npm start" from within the "app" folder or open this link phofurl and open console.
code from the "app" which reproduces the issue: phofcode code from the "lib": phofcode console output: observable from lib: value=undefined getvalue()=undefined observable app: value=undefined getvalue()=undefined observable lib: value=0 getvalue()=undefined observable app: value=0 getvalue()=0 lib: value=1 getvalue()=undefined app: value=1 getvalue()=1 ...
- repl or repo link: phofurl
1. within a fresh angular cli project, copy/paste the code shown above into `app.component.ts`.
2. in the terminal, run `ng lint`
i 've found this because i 'm trying to use the umd module js with a global window variable since i do not have a module loader ("module": "none" in tsconfig) but only a server-side bundler (legacy app).
if this can be useful i have a ".d.ts" file like this phofcode
- repl or repo link: phofurl phofcode
phofurl (switch with the takewhile operator) this piece of code is throwing a stackoverflow error phofcode
look in src/index.ts and uncomment the error part phofurl
- repl or repo link: phofurl
no reproduction, need to debug stack trace.
this is an example in angular using `filter` as a typeguard for the router events.
- repl or repo link: can't do stackblitz as doesn't compile in strict mode.
here is one anyway, but it works phofurl (not strict mode) phofcode fails in strict mode with: phofcode
execute the following test (`typescript`): phofcode this is the console output: phofcode
phofcode - phofurl (i added a `take(100)` to avoid the browse to freeze)
- repl or repo link: (you can use phofurl to create one to attach here) phofcode
- repl or repo link: phofurl phofcode
- repl or repo link: phofurl phofhyperlink note that with the mixed case, stackblitz will complain, but putting the same in my local vs code instance will build without error (and show that unexpected bundling).
import { of } from "rxjs"; versus import { of } from "rxjs";
- repl or repo link: stackblitz phofhyperlink phofcode
phofurl phofcode this produces phofcode
- repl or repo link: phofurl
- repl or repo link: phofurl phofcode
- here i show you a minimal repo where i am just using one operator (map operator) and the bundle size is big: phofurl phofcode
this code: phofcode will output: phofcode and this code: phofcode will output: phofcode
phofurl phofcode tag = output; notification = subscribe; matching /.
*/ == step 1 tag = e0; notification = subscribe; matching /.
*/ == step 2 tag e1; notification subscribe; matching /.
*/ tag e1; notification complete; matching /.
*/ == step 3 output; complete; output; unsubscribe; e0; unsubscribe; e1; unsubscribe; == step 4 e2; subscribe; e2; unsubscribe; e3; e3; ``
phofurl phofcode the `content.array` get reversed in `console.log('2: ',x); image phofimage
- repl or repo link: (you can use phofurl to create one to attach here) phofcode
- repl or repo link: (you can use phofurl to create one to attach here) i've tried with the createxhr property both set and unset.
this repo uses documentation example: phofurl
- repl or repo link: phofurl the key part is here: phofcode this makes the console.log statement log an array that contains a single observable with the last value of the iterable.
however, if i plug the iterable phofhyperlink into array.from it works as i'd expect it: phofcode
- repl or repo link: phofurl phofcode
- repl or repo link: (you can use phofurl to create one to attach here) phofurl phofcode
- stackblitz link phofhyperlink phofcode
- repl or repo link: phofcode
i meant to write codes like following phofcode but, by mistake, i actually wrote the code like phofcode but it still compiled without any type errors!
i didn 't notice my mistake, and tried to subscribe an observable from the factory function, and it showed an errors at runtime.
phofcode it happened since `concat()` has following type signature phofcode the return type of catch error is `operatorfunction<t, t | r>` and it is converted like following.
phofcode reproduction with possible solution: phofurl
- repl or repo link: phofurl phofcode
- repl or repo link: phofurl
create minimal project phofcode create `test.ts`: phofcode run typescript compiler phofcode
- phofurl how ` sharereplay({refcount: true})` works phofcode "sub 1" will get three values and unsubscribe.
after another 3 seconds "sub 2" will subscribe again, the result will be sub 1 - 0 sub 1 - 1 sub 1 - 2 _--after 3 seconds--_ sub 2 0 2 2 -2 ..... same code with `publishreplay(), refcount()` phofcode "sub 1" will get three values and unsubscribe.
after another 3 seconds "sub 2" get the last n values specified in publishreplay() and subscribe to interval again, the result be 0 _--after 3 seconds--_
1. download rxjs from github as a zip file 2. extract it 3. run `npm run info` in the uncompressed folder
v6.3.2 from phofurl phofcode phofcode
sadly i can't provide a stackblitz due to corporate firewall issues, but i managed to reproduce the problem here phofhyperlink using i'm posting the same code here: phofcode
an example of both scenarios is shown in the testing changes in #4446
- repl or repo link: phofurl phofcode
- repl or repo link: phofurl phofcode
- repl or repo link: phofurl (it is my first time use this , )
- repl or repo link: phofurl
- repl or repo link: phofurl phofcode
- repl or repo link: phofurl phofcode
- stackoverflow link: phofurl phofcode
- repl or repo link: phofurl phofcode
- repl or repo link: (you can use phofurl to create one to attach here) stackoverflow post phofhyperlink stackblitz - angular service code phofhyperlink stackblitz - frontend html that corresponds with problem code phofhyperlink stackblitz - angular component phofhyperlink phofcode
- repl or repo link: phofurl the statefulcomponent
6.3.3 (`e.stack` is `undefined`): phofurl 6.2.2 (`e.stack` is defined): phofurl my guess is that phofurl is what broke the traces.
- repl or repo link: phofurl phofcode
phofurl phofcode o2$ is of type `observable<number>` and there is no error.
with --strictfunctiontypes there is a type error.
phofcode throws error phofcode to fix this we need use: phofcode after that doesn't throw error
paste the above into an editor or try to compile with tsc (i would put it into a stackblitz but it seems flaky with rxjs/type checks).
you get the rather perplexing ts error "[ts] expected at least 0 arguments, but got 0 or more."
- repl or repo link: (you can use phofurl to create one to attach here) phofcode
link to codepen phofhyperlink phofcode
- phofurl - npm i - npm start rxjs 6.3.2 phofcode rxjs 6.2.2 phofcode
- repl or repo link: phofurl
since `effectmap` expects each property to return `subscribable` with `any` arbitrary element type, the last `tap` seems to pick up this `any` type instead of the element type from the input observable.
rest parameters overload like below show also exists in static pipe function.
the following throws a `typeerror`: phofcode however if the `subscribe` function is not `async` it works as expected: phofcode when using zen-observable phofhyperlink and an `async` function it also works: phofcode
1. be in a folder, in a bazel workspace, above a client application that depends (perhaps indirectly) on rxjs 2. run phofcode and observe output: phofcode
take over code above into intellij idea, or probably other editors?
running: phofcode outputs: phofcode as you can see, the `side-effect 3` line is displayed even after the outer-observable has no subscription left.
- repl or repo link: phofurl phofcode
- take a simple ajax request like below phofcode
simple stackblitz example with the same dependencies but there i cannot reproduce the issue: phofurl code snippets from our project: phofcode phofcode
- repl or repo link: phofurl as you can see, using a trailing coma: phofcode causes the combinelatest to be detected with a resultselector which of course doesn't exist here.
i dont know how to do stackblitz with jest tests.
you can take the following code and run `jest test`, or `yarn test`.
phofurl phofcode the test fails: phofcode , which means that source is unsubscribed from at `unsub`, even though this should be blocked by the operator.
see this test phofhyperlink for `first`: phofcode
- repl or repo link: phofurl example code: phofcode
see < phofurl or use this code: phofcode
phofcode observe that the only line output by the code is "completed".
the callback for the next value is never called.
phofcode this is the error i am getting, `property 'run' does not exist on type {}, any, action<any>>'.` when i change the type of `epicmiddleware` to `any`, then it throws a runtime error, `you must provide a root epic to createepicmiddleware` p.s.
i am using the latest version of `redux-observable` (1.0.0
- repl or repo link: (you can use phofurl to create one to attach here) n/a because there's no a public websocket server i can use for this.
### working phofcode ### not working phofcode
- repl or repo link: phofurl click the button and look at the console logs : `this` is not the same in the property accessor for `emittederror` and `error` handling function.
phofcode results in typescript error in editor/linter (but not in angular cli build/serve): argument of type is not assignable to parameter of type observable&lt;any>>'.
types of parameters 'source' and 'source' are incompatible.
type 'observable&lt;any>' is not assignable to type 'observable&lt;{}>'.
types of property 'source' are incompatible.
type 'observable&lt;any>' is not assignable to type 'observable&lt;any>'.
two different types with this name exist, but they are unrelated.
- repl or repo link: no source available (
try to create behaviorsubject without any arguments in typescript.
- ping for internal repro example.
- repl or repo link: phofurl
1. create two bundles referencing rxjs 6.2.0, one exposing an observable, another subscribing to it and using its own operators.
- repl or repo link: phofurl phofcode input a number less than 100, it will successfully dispatch a delete request, then input a number greater than 100, it will response 404, then whatever you input, `switchmap` will not work any more, no request will be dispatched.
phofcode the type error occurs on the last line when calling the `connect()` method: phofcode because the `pipe` function expects to return an `observable` type but the operator is actually returning a `connectableobservable` with additional methods.
- repl or repo link: phofurl phofcode
after installing rxjs 6.2.0 and rxjs-compat 6.2.0, navigate to and the ide will indicate the error line `readonly observable: symbol;` phofcode
install zsh, oh-my-zsh, use my .zshrc phofhyperlink
steps to reproduce the behavior: 1. install `jenv` so that it is in `/usr/local/bin` (e.g.
via homebrew on macos) 2. run: phofcode
1. open iterm app or your terminal app of your choice 2. you will receive sporadically the offer to update 3. accept the update by
1. enable plugin `git-auto-fetch` 2. get ssh key with passphase that is used to pull git repos 3. add `addkeystoagent yes` to `~/.ssh/config` 4.
`exec zsh` 5. start `ssh-agent` (e.g.
`eval $(ssh-agent)`) (do not add ssh key!)
poc code provided below: phofcode
1. enable plugin `osx` 2. run command `itunes vol`.
3. see error `39:45: execution error: the variable volume is not defined.
using `extract` (without `-r`) on `.gz` files
steps to reproduce the behavior: 1. zsh 2. run command read -p "test" 3. see error
i will use the package `colortest` as an example: 1. install the package (`sudo apt install colortest`) 2. type `colorte` and hit `tab`.
it should show `colortest-16, colortest-256`, etc, but it doesn't show nothing.
3. close the terminal and open an new one and repeat step 2. now it will work 4. remove the package (`sudo apt purge colortest`) 5. repeat step 2. it will autocomplete command, even with package removed.
6. repeat step 3, now it won't autocomplete removed package.
install gitless and see that it gl references the alias instead
simply turn on terminal, the problem is coming from .zshrc from `source $zsh/oh-my-zsh.sh` (no problem when commented).
`task add test project:"test project"` `task project:"test project" list` works.
however, i cant tab-complete `task project:`
steps to reproduce the behavior: 1. enable plugin 'git ' 2. run commands: phofcode 3. now try to switch to `feature/ohmyzshissmart` using partial branch name and autocompletion.
write: `git checkout zsh` and hit tab for autocompletion.
it will complete command to `git checkout ohmyzshissmart`, which will not work
steps to reproduce the behavior: 1. install macos catalina 2. install oh-my-zsh 3. edit and `source` your .zshrc
1. install awscli via `pip install awscli` 2. enable plugin `aws` 3. run command `tmux new-session -t test` or `source .zshrc`
1. run the command `print -z "foo"` and observe the result 2. the command above will inject "foo" on a new line, leaving the cursor at the end, which is expected behavior 3. try to run same command like `/bin/zsh -c 'print -z "foo" \' ` -> nothing happens (it is equivalent of pressing enter on an empty line) 4. try to run same command `print -z "foo"` from within a script file like: phofcode same as nr 3... nothing happens
input the above curl command manually.
1. be on a mac (or probably any *nix) 1. say yes to today 's updates
1. create a directory 2. create 2 files in the directory: `test_cert.sh` and `test_a.sh` 3. type in `./test_.sh` and move the cursor after the underscore (so that the cursor is flashing on dot) 4. press tab to activate autocomplete 5. see that an `h` is added after cursor
steps to reproduce the behavior: 1. enable plugin `tmux` 2. create one, or multiple tmux sessions 3. detach from session 4. attach to session: `$ ta <tab>` 5. see error
1. enable plugin gitfast 2. go to a directory that is a git repository with more than one local branch 3. type `git switch ` (including the space at the end) and press <kbd>tab</kbd>
1. set this prompt: %t} %/ '` 2. go to a really deep directory, something that takes up most of your terminal width 3. type out a long command that wraps to a lower line and run it 4. up arrow to the previous command and then use left arrow until it jumps to the next line 5. continue left arrow until it jumps another line
steps to reproduce the behavior: 1. start a new session in tmux 2. within tmux run vim 3. type, `:!ls` and hit `enter`.
i 'm working on a personal project, i just added some files with the command `git add .` and then when i was going to type "git commit -m" the terminal suddenly closes when i type the character "-".
_this is only happening with the git commands._
activate homestead plugin, add shell function for homestead daily usage, try print autocomplete commands - `homestead + <tab>`
1. have zsh running with the `af-magic` theme 2. activate a python virtual environment 3. it should display immediately
1. start putty and connect to the linux system with a normal user (debian 8, 9 or 10) 2. start a root shell: "sudo -i tmux" 3. subdivide the window vertically with "ctrl+b %".
4. start the command line input and use the auto-complete function
1. type any letter 2. press 'tab' key
1. create a new git branch 'testbranch ' 2. make a one line change in one of the files & commit 3. checkout master, change the same file with different text & commit 4 git merge testbranch (master ) git merge testbranch conflict (add/add): merge conflict in dotnet/friedrich/foo auto-merging dotnet/friedrich/foo automatic merge failed; fix conflicts and then commit the result.
(master ) [[ no indication we are in merging state]]
1. enable plugins=(... tmux) 2. set 3. ssh into remote machine (that also have tmux plugin enabled) 4. turn off computer, turn on again and open up terminal and it looks like this screenshot from phofimage detaching doesn't do anything unless i do `pkill tmux: client`
1. enable plugin gradle and mvn 2. gradle-or-gradlew:5: maximum nested function level reached; increase funcnest?
3. the same problem for mvn plugin
1. add an alias to `~/.gitconfig` file phofcode 2. open terminal and type `git cl` 3. press tab key
1. enable plugin 'git ' 2. move into a git project folder, example we have branch `demo-test` 3. type command `git checkout demo`, then press tab
1. enable plugin 2. set 3. type a command, 4. press tab tab to autocomplete command/ autocompletion menu 5. see error
on ubuntu, try to activate the command-not-found plugin and type an unknown command (like `hahahaha` in my example).
enable "debian" plugin in zshrc 2.)
1. apply the config phofcode 2.
steps to reproduce the behavior: 1. open terminal 2. zsh (enter) entering into zsh 3. run command 'vi file*1.txt ' 4. see error 'zsh: no matches found: file*1.txt'
steps to reproduce the behavior: 1. install oh-my-zsh using the homepage curl command 2. select `y` when asked to make zsh the default shell 3. see error
steps to reproduce the behavior: 1. enable plugin sf 2. enable plugin zsh-syntax-highlighting 3. write `sf [...]` in the root of a symfony project
1. have zsh installed and as the default terminal 2. have nvm installed correctly and setup in ~./zshrc 3. run `nvm` in terminal - should work 4. run `/bin/zsh -c nvm` - should fail
1. install for user1 2. switch to user2 3. oh-my-zsh refused to install, and if i manually set up ,zshrc it says that i need to take ownership of user1's home directory
set zsh as the default, the few following settings in .zshrc sourced at time of events phofcode launch terminal, use default preferences and basic profile, set font to roboto mono for powerline observe appearance
1. use cmd or powershell 2. log in a server with ssh 3. the bug should be obvious
say i have a project `profile_project_remote` on github that's created on another machine and i have django installed on my local machine.
if i clone the remote project
1. install homebrew - /usr/bin/ruby -e "$(curl -fssl phofurl 2. install zsh - homebrew install zsh 3. install oh my zsh - sh -c "$(curl -fssl phofurl 4. tried to change thing sin .zshrc - vim ~/.zshrc
steps to reproduce the behavior: 1. enable plugin '...' 2. run command '...', _or_ try to complete command '...', _etc._ 3. see error
attempt to login to a rocket chat with ldap server using current android client.
1. go to channel/room 2. open notification preferences 3. see 4 values in email notification 4. go to my account -> preferences -> notification
1. set the clock format to 24h 2. start a conversation with one of the users 3. observe the last message shown in the sidebar
1. go to home page of rocket.chat 2. check the response header
1. setup a saml connetion with an idp to pass "channels" claim with multiple values (in my scenario specifically, microsoft adfs with multiple group memberships passed as claims with the claim values set to the desired channel name for the user 's ad groups) 2. login a previously unregistered user.
1. go to general tab of the administration page 2. enable `restrict access inside any iframe` and set `options to x-frame-options` to ** deny ** 3. embed rocket chat server in an iframe in another server
1. start a conversation between two users 2. click on start video call on desktop 3. click on join video call on mobile (ios)
1. create a livechat session from the widget as a guest visitor 2. post a new message, as the agent, using the rest api, containing an image_url (image1) attached, with collapsed set to false 2. post a new message, as the agent, using rest api, containing an image_url (image2) attached, with collapsed set to true
1. invite a federated user to a private room 2. try to delete the room from the admin area, from any server (origin or destination)
`curl` to `/api/v1/users.info` using token 2. rinse/repeat 3. too many requests.
you must wait 26 seconds before trying this endpoint again.
1. activate livechat in admin panel 2. go to frontend 3. ie11 shows a "syntax error" in console output but no widget
1. open chat admin -> accounts -> scroll to custom fields to show in user info input 2. enter role,telegram,phone in input 3. scroll down to registration -> custom fields 4. enter following json in textarea: phofcode 5. press save changes button
1. go to prune messages.
2. set older than to 2 days.
3. check exclude pinned messages.
1. go to administration 2. go to file upload 3. set the storage type drop down to amazon s3 4. fill out the relevant fields in the amazon s3 section.
5. upload an image 6. error: non-file stream objects are not supported with sigv4
1. click on the link phofurl 2. get 404 error page in new tab 3. click on the url and press enter 4. livechat is loaded correctly
1. stop rocketchat nodejs server and mongodb server 2. start rocketchat nodejs server 3. wait 10 minutes 4. start mongodb server 5. nodejs does not automatically connect to mongodb after mongodb is available
1. go to administration > messages > autolinker 2. set 'enable' to true and set all other settings in the autolinker panel to false 3. leaving the 'autolinker url regular expression field' as it's default `(://|www .
).+` or change it to something like ` phofurl 4. save changes 5. post a message like ` phofurl
1. as administrator go to 'administration / users' and click on '+' symbol in right sidebar.
2. fill in necessary user fields, but keep 'verified' switch off.
1. don't really know how to reproduce this.
1. go to account settings on a new default account.
2. see that the settings claim mentions only.
3. have someone send a message in a random channel without a mention.
users chats, and messages are submitted to push
1. pull the latest image 2. check the commit hash.
1 bug 1. set fileupload_storage_type to filesystem 2. set accounts_avatarresize to true 3. sync ldap 4. some users avatars are rotated 2 bug 1. set fileupload_storage_type to amazons3 2. set accounts_avatarresize to true 3. sync ldap 4. all avatars are broken and 0 bytes size on amazons3 storage
1. setup **custom oauth** provider ( ** keycloak ldaps ** in our case) 2. in rocket.chat ** accounts ** settings set to no 3. login with user, that does not exist in rocket.chat 4. user successfully created in rocket.chat
1. create a channel and activate auto translation to the desired language.
2. ask someone to write a message on another language.
3. the translated message will be now displayed, if the issue #15762 is fixed.
4. now change the translation language to something different than previously selected.
6. the message will not be translated.
1. subscribe to a channel and activated the auto translate feature to your wish language.
2. ask someone to write a message to the channel in a different language then you have configured.
3. the translated message will not replace the original message.
although the message has been translated which can be seen in database.
1. install node 2. install npm 3. sudo npm install -g @rocket.chat/apps-cli 4. rc-apps create
1. i customize the rocket.chat web app and mobile app.
i am testing the push notification, in android it is working well, but in ios it is not working.
2. i set enable gateway in the /administration/push to false.
3. i set the apn passphrase as password of key file.
and apn key starts from `-----begin encrypted private key-----` and ends with `-----end encrypted private key-----` and also apn cert starts from `-----begin certificate-----` and ends with `-----end certificate-----`.
but one thing misunderstood is when generate key.pem using `openssl pkcs12 -nocerts -out key.pem -in cert.p12` could see two patterns of private key.
1. go to settings -> assets 2. set a custom logo 3. check it in the sidebar__footer
1. use any incoming webhook 2. define a message limit of 5000 chars 3. post a message with chars via the incoming webhook
* sidebar sorted by unread on top * click the channel when it 's bright/bold and has a new message i couldn 't see a pattern, it just happens randomly.
1. install old version of rocketchat-server snap, with included mongo earlier than 3.2 2. run a snap refresh to trigger the update to v2.1.1 3. check status of mongodb service via `sudo service status`
1. user1 write message 2. user2 quotes user1 message 3. you see user1 login instead user1 name in quoted message
1. have large install with many messages.
3. wait while cpu usage grows.
1. click on the search tab in full resolution of browser 2. resize the browser to a sufficient width 3. the sidebar breaks
1. press on the magnifying glass in the top left of the sidebar.
2. search doesn't fit to the sidebar
1. write a sentence and end it with a "."
2. attach an emoji without a space 3. send the message and observe that the emoji doesn 't render on the chat
1. get any message in a channel 2. open the unread chat conversation
1. fill in the name and alias field in chinese ( ' ' for example) 4. click on 'choose file ' button and select the emoji file 5. click on 'save ' button
1. press `ctrl-k`, expecting the current input to be killed 2. be annoyed
change notification settings as follows: <img width="382" alt="screen shot at 10 12 21 pm" src=" phofurl
1. activate anonymous user login.
2. wait for users to login.
3. observe the memory consumption increase indefinitely.
1. in the channel click on any of the options present in the upper right corner(like room info, search etc. )
2. now resize the screen <=900px 3. the channel box goes behind options .
1. deploy latest docker `develop` image (commit 699e6fe as of initial report).
2. attempt to check logs from app (nothing will display).
3. multiple errors will be logged to stdout.
1. install matterbridge 2. connect to rocketchat and another supported server that supports attachments 3. post attachment on another server, and edit its associated message.
1. upload an audio clip and start listening 2. while listening, add an emoji - 'react' to the message 3. my audio stops playing
1. any channel options button 2. click on leave room .
3. observe the dialog box that appears
1. start a thread somewhere.
2. disable threads 3. open the created thread
1. install rocket server on premise: phofurl using amazon web services ( phofurl 2. configure oauth with a custom provider 3. when configuring oauth, rocket chat provides you with a redirect uri.
phofurl 4. change subdomain to phofurl (without a t) 5. change docker configuration for rocket chat, using root_url with the new domain 6. change on administration > general > site url to the new domain 5. uri provided by rocket chat in oauth services, doesn 't get updated.
1. use a docker compose file similar to the official example phofhyperlink 1. use as db tag 3.4, bring the project up and running 2. change db tag to 3.5 -> error occurs, see log output below: phofcode
1. go to account page, on the change password screen.
2. change password, enter your current password.
or 1. from the admin panel, force a user to change their password.
2. login as that user and enter the current password on the change password screen.
1. go to administration 2. go to layout 3. select "use full name initials to generate default avatar"
1. go to directory 2. click on users in the top.
3. see the missing table header
1. go to administration 2. click on users 3. and so on add user with livechat-agent role and user role.
1. install rocket.chat from snap on the edge channel including its own mongodb 2. get spammed with messages that this (included) mongodb server version is deprecated.
1. go to livechat menu.
2. click on facebook and insert key and secret omni.
3. access livechat menu e click on facebook messenger, you will receive the pop-up from facebook, insert your credencials, after this you will see the errors.
1. add "plain/text" in "accepted media types" 2. try to send .cfg file 3. is not possible to send .cfg files
1, our retentionpolicy settings <img width="1834" alt="msg" src=" phofurl
2. send a few messages.
4. observe that the message count printed on the button in the parent channel does not decrement.
1. edit message 2. try to reply it in a thread (another message) 3. send
1. delete rocket.chat 2.0 and install 2.1.0, start server.
4. login to admin page and click info menu, then no change shown.
1. have a chat open 2. receive messages
1. use a custom port for rc 2. receive push notification on mobile (can only confirm android) 3. tap on the notification, and the app will not be able to proceed beyond the initial wake, as it will try polling the server address using default port.
1. there is a new message on the channel.
the channel name has turned into bold to indicate this.
2. the user clicks on the channel and sees the new message on the message pane.
1. go to account / profile 2. set a profile picture (upload one or use gravatar) and save the changes 3. profile picture shows a broken image -> nok 4. change to initial avatar and save changes 5. profile picture shows initial avatar 6. set a profile picture (upload one or use gravatar) and save the changes 7. picture shows the new image corrrectly.
view rocketchat documentation on federation phofurl phofhyperlink
1. get roomid of direct chat via im.list 2. get msgid of direct chat via im.history `curl -h "x-auth-token: auth token" -h "x-user-id: myid" phofurl -d '{ "roomid": "room id of direct chat", "msgid": "a message id" }`
1. open web site url in browser
1. enter message 2. click three dots menu 3. no edit message entry anymore
1. sign in with saml.
2. change your username or email in saml environment.
3. sign in with saml.
1. tap on file that buddy upload 2. tap save on save-dialog 3. have to go in explorer(finder,or different file manager) were file save and open it
1. in rocket.chat web or fat client: "my account" -> "preferences" -> "hide avatars" -> "true", 2. start a thread, 3. see the issue,
1. set url : `sudo snap set rocketchat-server caddy-url= phofurl 2. activate https `sudo snap set rocketchat-server https=enable`
1. go to rocket.chat instance, send a markdown text like: - title: [test] - url: ( phofurl 2. check on the returned object payload 's urls
install fresh unbuntu 18.04 follow developer instructions
1. create a user with a ldap password containing $ and some other caracters after 2. try to connect using the regular password 3. that should fail until you type only the part before $
1. go to rocket.chat instance, send a markdown text like: - title: [test] - url: ( phofurl 2. check on the returned object payload 's urls
1. authenticate as an administrator user.
2. call any api endpoint for a specific group such as; groups.members, groups.info, groups.history.
1. rocket chat conf ` [unit] description=the rocket.chat server after=network.target remote-fs.target nss-lookup.target nginx.target mongod.target [service] /opt/rocket.chat/main.js standardoutput=syslog standarderror=syslog user=rocketchat root_url= phofurl port=3000 [install] ` 2. nginx conf ` # upstreams upstream backend { server } # https server server { listen 443; server_name mysite.com; # you can increase the limit if your need to.
client_max_body_size 200m; error_log ssl on; ssl_certificate ssl_certificate_key ssl_protocols tlsv1 tlsv1.1 tlsv1.2; # dont use sslv3 ref: poodle location / { proxy_pass phofurl proxy_http_version 1.1; proxy_set_header upgrade $http_upgrade; proxy_set_header connection "upgrade"; proxy_set_header host $http_host; proxy_set_header x-real-ip $remote_addr; x-forwarded-for x-forward-proto http; x-nginx-proxy true; proxy_redirect off; } } `
1. go to a channels notification preference sidebar, 2. switch the sound to a non-default value eg "ding" 3. switch it back to "default"
1. have existing server at 1.2 2. upgrade to rocketchat:latest image from docker hub
1. setup ldap backend and setup a group to channel mapping.
enable `merge existing users` 2. setup an oauth login method.
enable `merge users` 3. synchronize ldap users and groupd.
4. login with ldap username/password combination, notice that the channel memberships are correct.
5. change ldap user group memberships, notice that the logged in users' channel memberships change.
6. login with oauth (same user), notice that the channel memberships are correct.
7. change user group memberships, notice that the oauth logged in session is not updated.
the user's groups will never update until user logs in with username/password.
1. go to a channel or direct message 2. click "notification preferences" 3. click "sound", change it to "ding" or any other value 4. click save
1. without being logged into rocket.chat / on a new browser, go to: phofurl 2. the window only shows grey loading dots, like these: <img width="985" alt="screen shot at 8 01 02 am" src=" phofurl 3. to fix this issue, we have realized you can go to phofurl and then to phofurl and that will work, but this is cumbersome.
1. upload file 2. error 500 when finished 3. the file has been uploaded to webdav, except rc gives a 500 error.
1. set the below config on the docker daemon.json file and restart the docker service 2. pull the rocketchat latest ( 2.0.0 ) from dockerhub docker pull
1. find a message that has more than 15 emoji reactions with a single emoji 2. hover the mouse over that emoji 3. see that there is no space between the last name and 'and' word
- follow the mentioned use-case from above - for example, you may ... - log into the admin ui as administator - create a blank new room with a participant open the e.g.
chrome developer tools & watch the websocket frames being send use administrator to follow use-case
1. create a new discussion with any name.
2. go to the channel and type in # which should bring up the autocomplete menu.
1. update rocket chat via official updating guide of manual installation
1. enable slackbridge, enable out and out all.
2. add slackbridge bot to a private group in slack, send a message in the slack group 3. sent message appears in private rocket room 4. now send a message in the rocket room, it won't appear the slack room
1. enable log level "2 - errors, information and debug" 2. user adds a webdav server 3. view the logs
1. start rc server as docker-compose 2. set file upload to filesystem 3. as you can see - if you upload a file you cant browse it on the docker host 4. short look in the container, the files are located in the directory and not "/app/uploads" 5. the owner of /app/uploads directory in container is root, not rocketchat
1. configure smtp mail notification 2. configure direct reply 3. send a message with a tag on rc 4. reply to the message into your mailbox with signatures
1. go to livechat dashboard and the installation section and copy the installation of the new version.
2. paste the code in wordpress
1. create single instance rocket.chat server 2. install and connect more rocket.chat instances to existing server and balance them by proxy 3. try to stop and delete from load balancer the instance that has been created first
1. create announcement 2. view room and announcements don't show.
3. announcements still don't show even after refreshing the page or leaving and reentering the room.
1. make a request to valid room name>` 2. check the response in the network tab.
note how there is no entry `usernames`
1. register a new user 2. delete all groups from user and leave guest only 3. add user to a private channel.
4. select any other user 5. make a call
1. post 5,000 emojis 2. reload
1. setup a fresh rocket.chat installation with ldap as user authentication background 2. run `curl -k phofurl -d as many times as you want - you always get 3. login the user `demouser` via the browser interface 4. run `curl -k phofurl -d again you receive
1. go on rocket chat 2. click on search and search something 3. click somewhere 4. you lose focus and the research you typed
1. login into rocket chat 2. start a private conversation with a lot of users.
3. view browser debug console in chrome.
watch as websockets have a hard time connecting and fall back to xhr.
1. on a docked ms surface tablet computer running windows 10 enterprise v1709, open the desktop rocket.chat app.
1. updating to 1.3.2 2. attempting to load files using gridfs
1. post a message containing a link to a song in spotify 2. once the preview loads, click the next to the preview
launch an existing docker or snapd image, attempt to use ldap that has a non `prime256v1` certificate issued to it.
1. deploy the rocket chat using docker containers as specified in phofurl but using a non-default mongodb port (see the config file above) 2. try to run the rocket chat, it fails to start yielding the aforementioned error.
1. set system language to german 2. open the info panel in any channel 3. experience the misplacement
1. go to search bar on a rocket.chat instance 2. search for a public, read-only channel that someone else made.
(ex: search for #amajune2019 on open.rocket.chat) 3. try to join channel.
(for me, no blue "join" button shows, so i can 't join it.)
1. update to latest develop docker image (a75e0f5).
3. no icon will be shown.
1. configure a custom oauth with `merge roles from sso: true` 2. sign in for the first time with user1 3. add on the idp, a role to the user1 4. reconnect with user1
1. go to a site 2. save to home screen 3. rinse and repeat for another
(tested on android, requires logged in device and push working) 1. set the `push mobile notifications for` to `nothing` via the ui 2. close browser 3. write message to user 4. send the following post request: phofcode response: phofcode (i know that this is a post call and not patch/put and it will set all other settings to default but there is no patch/put in the documentation) 5. write message to user again
1. go to 'chat ' and choose user to conversation.
2. tape " phofurl and send message 3. see only " phofurl like url and blue letters and other part is black letters.
0. set up bundled in snap web proxy caddy `rocketchat proxy / localhost:3000 { websocket transparent }` 1. set up new version of rocket.chat livechat in your website 2. go to the web page with embedded livechat widget
1. have a channel that has unread messages, but not more then perhaps 1 or 2 pages of unread ones.
2. click on the channel to view its messages 3. see no unread message marker nor the jump to first unread bar.
4. channel is marked as read.
open a public rocket chat instance and await the abusers.
1. add multi line code 2. insert following text without the *: ** # min/start heap size ** java.memory.min=128m ** ** # max heap size java.memory.max=1024m # max permgen size, default=64m java.memory.perm=64m**
not sure if reproducible, but this is what i did: 1. migrate mongodb database from wiredtiger to mmapv1 by restoring back-up into fresh db set to mmapv1 storage engine.
2. downloaded latest rc from phofurl 3. started new version of rc
1. open any chat 2. paste a code block containing ` (.
cant say for sure here are picture of my config image phofimage image phofimage image phofimage image phofimage
1. start ie11 2. open phofurl 3. stuck on the loading animation
1. click on the file download button
1. enter a channel 2. directly link a tweet (ex.
phofurl 3. observe no embedded link shown
1. as an administrator, go to `/admin/accounts` 2. under `registration` set `custom fields` to phofcode (i 've only found out about the 'public ' field here phofhyperlink ) 3. goto `/account/profile` and set your `test` field to some value 4. make an authenticated api request to `/api/v1/users.list` (note how `customfields.test` is included in the returned data) 5. log out and back in again as a non-admin user 6. make an authenticated api request `/api/v1/users.list` (note how `customfields.test` is ** not ** included, breaking everything that depends on custom fields)
1. start otr with a user 2. if on same instance, user gets prompt 3. if on separate instance, user doesn't get any prompts
1. receive an e-mail i.e.
"username" (login) show instead "name" in sender.
1. go to administration console 1. click "custom emoj" 1. add at least 51 emoji.
ideally with names over the spectrum of the alphabet 1. reload the page, you should not see all emoji.
if you search for an emoji towards the end of alphabetically sorted list you added, it will not appear.
1. enable snippeting feature 2. try to snippet a message
1) create an encrypted channel with only yourself as the user 2) send message via app that supports e2e, result = encrypted message 3) login via android app (which seemingly doesn't support e2e), send message in channel.
message is sent unencrypted and can be seen on the thick client
1. go to your website with the livechat widget 2. start the livechat 3. try and open the livechat on your android device
1. go to administration 2. click marketplace 3. attempt to install any app (with or without payment info)
open room with attached pdfs (in macos app and firefox browser)
1. login rocket.chat using admin account.
2. go to ldap settings 3. scroll down to **user search**.
4. in ** filter ** : tried all above given filters ** scope ** : sub **search field** : samaccountname
1. set an endpoint in url 2. open rocket chat in browser 3. logout the currently logged in user, and refresh the page right away.
1. create incoming webhook 2. post to channel specified e.g.
@user 3. using curl command including channel parameter specify #channel 4. message is posted to #channel
we are using the following settings to do oauth with o365: ** url: ** ` phofurl **token path:** `/oauth2/token` **token sent via:** `payload` **identity token sent via:** `header` **identity path:** `/openid/userinfo` **authorize path:** `/oauth2/authorize` ** scope: ** `openid` **param name for access token:** `access_token` id: `<redacted>` secret: `<redacted>` log-in on android with an oauth account.
have another user attempt to dm this user, and wait an appropriate amount of time to be alerted on your phone (it won 't happen).
also try to have the user sent a test alert through administrator -> push.
they will get an error about a missing token.
1. log in as admin user 2. make a room "read only" 3. enable "allow reacting" 4. log in as normal user 5. navigate to read-only room 6. attempt to react to a message
1. open any chat 2. type / paste an url that include an existing smiley (like linkedin one : phofurl with the lithuania flag smiley ...) 3. look at the result post
1. send emails via mailer option 2. go to unsubscribe link from recieved mail 3. on unsubscribe page text is invisible and visible after mark it
1. give permission to role owner 2. login as normal user and enable automatically prune old message 3. switch to "override global ..." is greyed out
1. server administration, e2e encryption - set enabled to "true" 2. create a new user 3. using chrome on windows, login to the web http interface and attempt to save the encryption key.
4. observe the error generated in the chrome console.
5. using a firefox browser, login to this new user and save encryption key.
6. log out of user session, and login again.
attempt enter encryption key and observe different error message in browser console.
1. create a new discussion 2. open newly generated discussion 3. open room information (flexbar) 4. click "edit"
1. position your mouse cursor just above the message box 2. type @ and optionally some search chars 3. the autocomplete pops up in the same region as the mouse cursor
i was testing the office hours in livechat for someone in #support and noticed if i changed the setting say from 9 -10 , saved and then back again to 9 quickly i got a too many requests error on screen.
i checked the logs and saw this 4 times in the logs.
{ "allowed": false, "timetoreset": 7636, "numinvocationsleft": 0, "userid": "hyhbjxwqmsrmu2szg", "clientaddress": "type": "method", "name": "connectionid": "spb5g5pqre4dcpkwa", "broadcastauth": false } two issues here: why is it rate limiting why cant we whitelist an ip?
1. app up and running
1. administration 2. info 3. os free memory
1. create a custom status -> yellow - description: "out for lunch" 2. switch your status to "out for lunch" 3. switch your status back to "online"
1. logout/close client/close webpage 2. start client/open webpage 3. enter server url/try to login provide user credential
1. configure oauth via keycloak 2. use the oauth login button.
- desktop client (windows): "houston we have a problem" - browser: sometimes it works, but sometimes it will give you a white page with the error: "an error has occured", "invalid code, please sign in again via the application", "click here to return to the application" -> new error page "login completed.
click here to close this window" (doesn 't work) - android / ios: similar white error page 4. hit reload and login again.
in most cases it only takes a second attempt.
on mobile devices reload fails.
you have to use x button get back login page.
on browser: reload main page without keycloak auth paths.
1. implement rocket.chat via iframe phofcode 2. open the page in your browser 3. open your console and try to run the login command phofcode 4. log into rocket.chat 5. open your console and try to run another command phofcode
1. open a chat to a federated user 2. send a file
1. create a new discussion 2. go to the administration ui rooms
1. go to a channel 2. click the members list button (note: should really be "member list" -- list already implies plurality) 3. click the invite users button 4. attempt to search for a user by name, e.g.
"jim smith" -- space is not allowed; must search by username
1. update to latest develop docker.
2. select a user dm conversation.
3. select notification preferences from the room 's menu.
4. choose a different sound, and save.
5. try to get messages from contact.
6. no sound will play.
1. wget this file _(file omitted)_ 2. rename it to something.svg 3. upload it to rocketchat
1. click on a chat 2. press the "threads" button in the top right corner
1. remove permissions these permissions from role `user` - view-outside-room - view-c-room - create-c - create-p 2. create users a1 and a2 and put them into private group a-general 3. create users b1 and b2 and put them into new private group b-general 4. login with user a1 5. start a discussion in group a-general 6. start typing to invite users
1. enable webdav file upload option 2. go to an random chat conversation 3. upload a file to the conversation
1. use ubuntu 16.04.6 lts xenial, kernel machine/cpu/platform: x86_64 x86_64 x86_64, xfce 4.12, python 2.7.12, libgtk-3-0 (version libwebkitgtk-3.0-0 (version 1. make a simple python app that renders a webkit frame holding phofurl or use my example script phofhyperlink (see readme for how to install).
1. try to chat with people.
1. in my case, it looks like this: screenshot phofhyperlink
1. set sorting to group by type 2. configure primary light to something other than the default, i chose `color-black`
1. log into web-client of rocketchat with a chrome device 2. get someone to send you a message to trigger desktop notification 3. wait out the window freeze until "this tab has crashed" popup appears
1. go to `#channel_first` 2. record a new video message 3. cancel out the video message popup 4. switch active channel to `#channel_second` 5. record a new video message and upload it
1. someone replies my message in a thread 2. i receive notification that there are unread messages in a channel 3. i go to that channel 4. i see the blue counter with number 1 on the threads button 5. counter disappears after one second even though i didn't read the reply.
6. channel is marked as read
1. activate auto translate feature message->auto translate.
2. create a channel and add two users as members of the channel.
3. activate auto translation in the channel for each user to individual language.
4. post a message and on the translated user channel, click on the view original action from context menu.
1. create a custom emoji with the same name or alias as a default emoji.
eg: smile 2. use the custom emoji in a channel.
it will show the default emoji instead of the custom one as it did in past.
1. write and send a message with formatting, for example `*bold text*` 2. select the message text with the mouse and copy it to the clipboard 3. paste as a new message
in a channel with more than a couple hundred users, go to the member list, (view all if necessary), and filter a user that hasn 't been initially loaded in the member list (typically started with later alphanumeric characters).
they won 't show up.
1. go to livechat management panel -> user management 2. delete an livechat-agent
1.enable live chat and go to the live chat 2. move to the real-time dashboard by choosing the option from the left panel.
3. scroll to last graph which shows reaction and response time graph.
4. hover on line for reaction time and response time,
upload file to rocket chat
1. go to login screen 2. click 'forgot your password?'
3. attempt to create a password not compliant with defined policy.
1. install rocket chat in sub directory.
2. access chat on two domains that are used as an alias of one install.
3. attempt to upload file and it gets stuck on 0%.
1. open a rocket chat instance from a web browser (e.g.
chrome) 4. test rocket chat as per above reference with nvda 5. if needed, purchase jaws phofhyperlink 6. test with jaws as per above reference 7. use the dhs harmonized process for section 508 testing of web applications as a reference.
we assume a fully configured and enabled live chat.
1. go to a webpage where you added the live chat 2. fill out the guest pre registration form 3. start chat
1. install rocket.chat experimental on android.
3. long press on the server url, username, or password input boxes.
4. notice that no paste option pops up.
1. send file abs.config 2. download file abs.config.bin
1. disable threads going into `administration > threads > enable` and setting it to `false`.
1. go to directory (globe icon in top left) 2. type something to search for in channels
setup a ldap server and connect it with rocketchat latest docker image
1. create 2 public channels type= channel state =active read only= false default =true 2. allow guest login 3. reach rocket chat 4- first channel in the list cant be read -- 3 dots always
1. create a new trial cloud workspace from phofurl 2. navigate to administration > video conference > jitsi and enable "jitsi" 3. create a "video chat" on a channel (save the jitsi meet url )and end the video chat.
then start a "video chat" for the second time" and notice the url again.
1. send the message "" (japanese for "one two three") in a channel.
2. do a message search for "" in that channel.
1. drag a file over a valid drop zone, don't drop it 2. drag the same file to another application window (doesn't matter what the application is) 3. the overlay gets stuck until refresh
1. go to admin - accounts - custom fields to show in user info 2. enter field as telephonenumber and sitelocation are valid attributes in our active directory 3. go to admin - ldap - sync/import enter in the user data field map to include telephonenumber and sitelocation {"cn":"name", "mail":"email", 4. not sure if it is required since registration is disabled on our rocketchat instance but created the custom fields entries under admin accounts registration { "telephonenumber": { "type": "text", "required": true, "minlength": 4, "maxlength": 12 } "sitelocation": { "type": "text", "required": true, "minlength": 4, "maxlength": 10 } }
1. send a message 2. click up arrow to edit previous message 3. send message and then get a reply 4. hit up arrow, can't edit any previous message.
5. to edit you have to click the individual edit button by your message
1. start a chat, direct or group 2. click the hamburger menu and click video chat, click yes to the pop up 3. jitsi will successfully launch 4. the link "click to join!"
is instantly broken and reports the "call has ended"
1. send a file path wie "_" in its url (not in the filename) e.g.
the example above 2. see wrong urls
1. set rocket.chat language to english ('en') 2. set browser preferred language to something else 3. reload rocket.cha
1. upload more than 50 emoji.
(we have about 116 uploaded.)
2. go to the custom emoji pane in admin settings 3. try searching for emoji that are past the 50 limit
1. create custom application 2. add custom slash command for created application with permission property 3. disable mentioned permission for client 4. use created command by client without mentioned permission
1 - loging 2 - show the directory 3 - select users 4 - view users list
1. admin configuration 2. roles 3. edit admin role 4. search for a user 5. click add
1. deploy the app on rocket chat using `rc-apps deploy ...` on the terminal.
2. try to register anything in extendconfiguration or in initialize
1) user receives a new discussion message 2) my realtime-api (get subscriptions) catch events 3) result attribute name has got alphanumerical value of discussion and not effective name that is in fname attribute
1. deactivate threads 2. go to chat window / enter a channel 3. thread icon is show beside room info icon
1. go to our open instance ( phofurl 2. join "#support" room 3. search for `from:frdmn` 4. notice how it stops after showing messages from "20th february 2019"
1. open thread 2. hover over icons above thread
1. scale to 2 dynos
1. logout from rocket chat 2. check that session still exists is "userssessions" collection 3. refresh browser 4. session disappear from "userssessions"
1. go to directory page as a logged out user 2. click on any channel 3. a blank white screen appears without any messages or option to login
1. reply to a message 2. see that the original message shows up below the reply
1. disable discussions in admin panel 2. check "more" menu in any channel
1. open "starred messages" 2. click the action button on any of the messages 3. no "jump to message" option
1. enter something in the search and make sure thread replies show up as results 2. empty thread replies appear
1. write a very long message in the composer 2. try to scroll up to change something in the message
1. open the left thread view by clicking on an thread/reply in a channel or group 2. write a message with the thread composer 3. edit the message in the thread view 4. notice how main composer is used to actually edit message instead of thread view one
1. page login of rocketchat 2. connect with userldap for the firstime 3. wait.....
1. go to any channel.
1. setup saml using rocketchat 1.0.3 2. login 3. logout 4. update to 1.1.0 5. login
1. configure a custom field in account settings 2. configure ldap auth with mapping to custom field 3. try to log on with ldap account
1. disable discussions in admin panel
1. deactivate/delete user in crowd resp.
remove user from group with access to the used crowd application 2. start crowd sync
1. type `/me uses emoji :d`
1. docker run rocket.chat server 2. go to "rocket.chat website" 3. click on "setting" > "oauth" 4. setting google 5. run rocket.chat client(mac os, android) 6. click on google button 7. enter your google account information 8. sign up with a google account 9.
1. provided above in description section.
i have only been able to reproduce this by changing the local time of my client machine to 7+ days in the future.
2. start typing in the thread.
1. open a chat window and paste the following url: ` phofurl .
1. set "always open in new window" in jitsi configuration - "true" 2. start/join conference via windows desktop app 3. new window do not appear
end a message while offline and receive an e-mail.
1. login with ldap user a1234bcd 2. click on profile 3. username shows as 'a.1234.bcd'
1. go to a live chat room with someone as agent 2. click on the visitor 's name 3. visitor info is empty ( you can show it up by the top bar "info" icon though)
1. start a thread 2. have a bunch of people reply to it 3. click on the last reply in a channel
try to send this to someone (enclosed with triple backticks): phofcode it will display as phofcode
1. activate and desactivate webrtc (not sure but i could notice a change when doing that, and instead of the edit button i had block user button.
1. go to search box 2. search username you never chat before or new user 3. username will not display
1. edit `localstorage`'s entry `emoji.recent` to include an unlisted emoji name.
2. open a run with an enabled message box containing the emoji picker.
1. open edge browser 2. login to rocket chat 3. watch as no message, typing notifications etc are not received.
1. go to any old message in channel 2. react on it
1. go to the big channel where you know that there more then 100 users online.
2. notice the counters values 3. click "show more" button and notice the counters values again.
1. go to big channel and open members list 2. load a lot of users (1 or more click to "show more" button) and notice some user name.
3. close the member list 4. open the member list again 5. type the noticed user name in search field
1. go to big channel.
1. go to directory 2. resize window until they're cut
1. create 2 or more channels .
2. send 20 messages per channel.
the message content preferably contains large files such as voice and video.
1. go to phofurl 2. click on three dots on the right side of any message 3. click report --> see the text inside popup message.
1. ensure e2e encryption is on 2. enter a private group 3. reply to a message with a thread 4. the message you just sent is shown as *** * * in the thread panel, or blank in the main chat
1. setup youtube broadcasting in the admin settings.
2. go to any channel and broadcast your camera.
1. write a message in the channel 2. click 'reply in thread' button on above the message 3. write and submit something.
4. click threaded reply so that the right panel is opened.
5. in the right panel, on threaded reply message click three dots settings menu --> menu contains two 'jump to message' links.
1. call rooms.upload method api with a filename for example " (2).txt" (russian characters in there)
1. update rocketchat server (deployed via snap) from 0.74.3 to 1.0.3 2. log in as a regular user that doesn 't have the "preview public channel" permission.
look at the top of the channel 's chat area for the banner message "you must join to view messages in this channel".
3. confirm that joining channel and sending messages in channel does not make banner message disappear.
1. goto admin 2. activate direct reply 3. configure a working email address / mailbox (imap) 4. set the option _delete intercepted emails_ to `false` 5. save the settings 6. send any email to the previously configured email address 7. check the configured imap mailbox via email client
send the valid emoji url https://.fm in a message.
1. start otr conversation 2. enter message 3. no green key icon
1. start rocket chat with using `root_url= phofurl 2. upload a file.
(such as `test.jpg`) 3. try to download the file.
do an event (like join a channel) and immediately lose connection & reconnect
1. go to marketplace 2. click show marketplace apps 3. click on a free app and then click the free button to install it.
1. go to marketplace 2. click on a free app 3. click the free button to install it
1. go to directory -> channels 2. check number of users 3. go to channel 4. check info
1. follow this post phofhyperlink 2. i have also tried using the curl as mentioned in the examples `curl -h "x-auth-token: token" -h "x-user-id: userid" -h "content-type: application/json" '{ "prid": "general", "t_name": "discussion name"} \'` but getting an html response instead of an actual json response.
1. configure oauth service with role mapping 2. login with oauth service and a new user 3. the new user has role from oauth mapping + "user" role
1. create a normal thread on the channel with reasonable amount of activity.
2. discuss using thread for few days using rocketchat's normal web interface.
normal new messages are required in between the replies on the channel.
3. at some point users get a red '400 error' in the top right corner of interface any time they try to post a reply to same thread.
1. type a message in a thread reply 2. try to edit it 3. message edits in the main channel instead of thread
1. go to settings -> general -> utf8 -> utf8 names validation 2. set it to something without uppercase letters: `[0-9a-z-_.
]+` 3. try to mention existing user with uppercase character such as `@alice`
1. go to administration -> layout -> custom scripts 2. paste code to move another page and redirect to rocket chat page
set up the install manually via heroku cli using the exact instuctions here: phofurl (under customized command line for developers.
1. paste long text in the message field and hit send button 2. answer yes to "send as attachment" request 3. fill file name and description 4. download file, it is encrypted
1. create a guest user and invite them to a channel.
make sure that `allow anonymous read` is _not_ globally enabled and that the guest group does not have the `preview-c-room` permission.
2. the guest user should see the `you must join to view messages in this channel` banner.
1. set a channel moderator/leader 2. start a thread 3. open the thread
1. go to channel 2. click upper-right three-dot "more" menu 3. open mentions 4. select message you where mentioned in 5. try to jump to that message
1. choose a pdf file 2. upload
1. any chat room/direct message 2. paste this: phofcode 3. enter
1. add two users, "foo" and "bar" 2. start typing @f for foo 3. press enter
1. update to rocketchat 1.0.2
mongodb writes pid-file, but needs more time to really startup ` mai 05 rocket 685]: i control [initandlisten] mongodb starting : pid=788 port=27017 64-bit host=rocket ` ` mai 05 rocket i repl [rssync] transition to primary complete; database writes are now permitted ` rc's snap startup script [startrocketchat phofhyperlink waits only for pid, but not if a connection could made up, resulting in: startup_log.txt phofhyperlink
1. go to settings -> general -> utf8 -> utf8 names validation 2. set it to something without uppercase letters: `[0-9a-z-_.
]+` 3. try to start discussions.
1. make a user talk to 10k other users (apis are useful for this) 2. access the web client.
1. set "hide roles" to true in settings 2. have most users still see them.
it 's not clear why the flag is honored for some people but not all
image phofimage image phofimage image phofimage
1. open any image in firefox (66.0.3 for me).
2. open rocket in a new tab in the same browser; open a chat room.
3. drag the image from 1 into the tab from 2; aim for the message list.
1. configure ldap, and enable tls encryption for it 2. click "test connection" button
1. post to `/api/v1/login`, get userid and token 2. mongodb persisted the hash of that token for ever in
1. create a thread 2. open it again
1. go to profile -> my account -> preferences 2. set view mode to "compact"
1. activate anonymous writing 2. try to talk anonymously in any channel 3. receive error
make sure "keep per message editing history" is set to true.
image phofimage 1. right-click on a message and click "reply in thread" 2. send a message 3. edit the message 4. close the thread 5. go about your day.... 6. come back to the thread later and notice your message is showing up twice.
1. update rocketchat to 1.0.0 2. use direct reply feature
1. upgrade an existing non-enabled rocket.chat server using a non-enabled mongodb oplog 2. bring up the node 3. an error status will be reported in stdout (see below)
1. setup new server with ad/ldap auth 2. login with an ad/ldap user 3. restore mongodb on top of the newly created one (mongorestore --drop -d rocketchat [dump-dir])
1. administration --> accounts 2. enable `allow anonymous read` and `allow anonymous write` 3. open private window and go to any channel 4. click on `or talk as anonymous`
1. upgrade to 1.0.0 2. have a look at the logs
1. go to settings, enable `allow message bad words filtering`.
2. add some keywords as string: `cho, meo` or `ch, mo`.
3. click `save changes` bad words phofimage 4. go to channel and enter enter one of `cho`, `meo`, `ch`, `mo`
i've tried both: manual installation phofhyperlink and official docker image: phofcode
1. get an mp3 or wav file 2. make sure you can upload it as an attachment the normal way through rocket.chat (correct mime types allowed in file uploads).
3. try uploading the same file but through the following command using the api: phofcode
1. login to instance 2. expect to find search field next to "channel" 3. it is missing <img width="324" alt="screen shot at 11 21 57 am" src=" phofurl
1. create a private group 2. go to member list create "invite users" 3. type a name and it will show "loading" inifinite time
1. go to any channel 2. open users list 3. type a query and press enter.
or just press enter without any query.
1. click my accounts -> personal access token 2. create a new token 3. close dialog
1. set up saml 2. make sure "logout behaviour" is set to "terminate saml-session" 3. log in a saml user 4. log out the saml user 5. see error pop up on the login screen
i just exactly followed the instruction at: phofurl and those exception errors will be generated whenever you press start chat anonymously button, which react nothing after pressing the button.
1. upload a .wav file 2. try to click the play button
1. deploy latest docker develop image.
2. create an incoming webhook integration.
set a custom avatar in place of the default.
4. see that the custom avatar is being ignored.
* set language settings to any of the germans * select any user account and select "user info"
1. create incoming webhook without script 2. send message to incoming webhook with the following body phofcode 3. send the same body with quotes around the numeric value of `value` and you see it working.
2. start conversation and type something.
3. upload "+" button is hidden after sending message :( 4. refresh page/app to see and use "+" again.
1. set the clock format to 24h 2. start a thread/discussion 3. observe the timestamp
1. click on description of threads 2. or click on replies button for thread.
1. go to "search" 2. write your search request (username/name/first 3. characters etc) 3. get bugged, random results.
1. have someone send a message with a large or slow-loading image.
1. open up a thread.
2. send gif there or find any, that's already there.
3. open preview of it.
1. use desktop client 2. start jitsi call 3. don 't refresh, just change rooms
i created an example code.
phofcode after calling updatemessage, the message is not updated if i did not change msg.
unfortunately there was no obvious event leading to this failure.
the issue started occurring even though there was no recent config change.
1. send a message to another user 2. star and unstar that image 3. watch it flicker like crazy each time you do it
1. go to any discussion you created 2. click on members list 3. open the options list for any user 4. click on set as moderator, owner or leader
1. go to any discussion you created 2. click on members list 3. open the options list for any user 4. click on mute
1. create docker-compose.yml 2. run docker-compose up 3. start setup wizard 4. go to second page 5. try to get back to page 1
1. create docker-compose.yml 1. run docker-compose up 2. start setup wizard 3. on second page click on server type dropdown
1. access this url from anywhere: 2. tap on "info" on the sidebar 3. on tablet size: menu is lost 4. on phone size: hamburger menu doesn 't work anymor
after upgrade from beta 1 to rc1 custom css were preserved in settings but the instance is ignoring it.
login to a room with users that have roles assigned to them such as 'owner'
1. click 3 dots on channel top right 2. click discussions
1. go to direct message with user 2. click on user info 3. click on view all members button
1. go into a room 2. show room information
1. go to facebook and send a message on a page 2. go to rocket chat and wait for message 3. message never comes
1. make a test html page with the javascript presented to you on livechat - installation page of the admin console 2. open that page with a browser such as internet explorer and chrome 3. enjoy...
1. start internet explorer 11 2. browse to rocket.chat instance 3. error: page is not loading
1. create room(s) 2. assign ordinary users as leader 3. notice that they now float above the messages window
go on admin panel after rc migration
1. open a channel you 're not joined to yet.
2. verify the alignment and design of the join-button (you may need to switch the language to one where "join" is not a short word, such as german)
1. create new user with role 'guest' 2. login to rocket.chat 3. auto-join default channel with all members and internal-information for not-guest
1. ask someone nicely to start a discussion 2. ask them to write something in another language 3. join the discussion 3. click the toggle original/translated option from the message actions
1. go to administration -> info 2. scroll to the bottom 3. found the <kbd>refresh</kbd> button at the bottom is incomplete.
1. update to latest develop docker image (849c9d1) 2. go to administration - apps.
3. see the broken list.
4. attempt to install an app.
5. if imgur or giphy apps are installed, try a search.
"no results found" will be returned.
(try `cat` ... there * should * be results.
deploy via normal helm chart oplog is not enabled
1. join a new room 2. go to 'notification preferences' 3. check 'sound' under 'desktop'
1. have enough private conversations that the list overflows the viewport.
2. receive a private message, disregarding the popup.
1. send a private message.
2. anticipate it showing on the next line below.
3. observe it showing up several lines above.
1. go to 2. select 3. wait for rocket-chat importer to process the file 4. see that all users, all messages but only public channels are importable
1. open a dm with any user 2. click the "user info" option 3. click the "view all members" button
1. add a custom emoji containing a period in either the name or the alias 2. react to a message with the recently created custom emoji.
1. embed rocketchat in a ** first ** domain.
for example: phofurl 2. if you want authenticated request across cors you have to go to: phofurl -> administration -> general -> rest-api -> enable cors and in cors origin write phofurl (like in image) cors problem 1 phofimage 3. till now all good.
4. now embed rocketchat in a ** second ** domain.
for example: phofurl 5. again, if you want authenticated request across you have to go to: administration general rest-api enable and origin write (but we dont want to deny access to: so we add our second domain at the end, like image) problem 2 phofimage
1. user hovers over icon-back button.
3. it takes them to the parent channel or group.
1. select a message to be pinned or unpinned if already pinned 2. click on three dots in the message (open the message actions menu) 3. click on pin message or unpin message.
1. choose a random message 2. click on three dots in the messge (open the message actions menu) 3. click on star message
1. set up rocket.chat behind a router and configure port redirection 2. try to send files to someone else 3. upload stays at 0%
1. set show setup wizard to `pending`; 2. log out; 3. go to your server url.
1. go to add user in channel 2. add a user to channel 3. again search his name in the list.
1. press shift and to get to ` 2. keep shift pressed and press three times to get 3. then press shift + enter
use a server that has 'marked' selected as the markdown parser and has 'gfm tables' enabled.
admin -> messages -> markdown: markdown_parser: marked markdown_marked_gm: true markdown_marked_tables: true
1. login as a user having only the role "guest" 2. go to the user profile and change the email address 3. in the verification email click verification link 4. the user now has role "user" assigned
1. open live chat for any user 2. see tabbar
1. go to the official rocket.chat server on phofurl or run your own server on beta 2. try to send voice message
1. go to **any user** user 2. click on three dots on the top right and then press otr 3. go to any user user 4. deny otr 5. see modal message on your user info
1. post a message with @all 2. check outgoing email and see that not all users will receive an email
the home page content should be rendered with variables storing the text in different languages same as other text are translated of sidebar (for example)
i have tried: curl phofurl tokenfromvisitor> >>> no department information curl phofurl >>> no room nor department information
1. open a new livechat conversation on the sidebar.
2. forward the conversation to another livechat agent.
3. open forwarded conversation as that livechat agent.
4. click on visitor info icon -> edit 5. change the name field and click save
1. enter any random url to display the 404 message 2. ps: cringe
enable voice recorder messages 2. go to chat room 3. try to record message_
1. go to ** rocket.cat ** user 2. click on three dots on the top right and then press otr 3. go to another user 4. start otr 5. stop otr, and see modal message
create a new visitor: phofcode get a new room id phofcode send messages to this new room phofcode close room (via web interface or api) send repeatdly times a new message to closed room.
1. copy the following url into your clipboard.
phofcode 2. paste into rocket.chat message 3. send it
1. enter any room 2. push the microphone to record sound 3. send it.
it fails, and circle keeps spinning.
cant say what exactly makes the user get automatically disconnected and redirected to login form.
it happens randomly and fortunatly not so many times.
it seems to happen when used several users to login using same browser.
this error seems to apear only in if loged in with more than 1 account in same browser.
1. activedirectory: add "-" to each commonname field 2. rocketchat: set #{cn} in field name in ldap synch 3. rocketchat: check that username is ugly now : '(
1. be the admin of a server 2. click on triple dots in sidebar --> administration 3. go to permissions tab
1. go to directory 2. click on the users tab 3. change the workspace scope to every workspace.
1. login with a customoauth provider and you will find that you can remain logged in to the server forever, unless you purposefully logout.
this includes when the client app (in our case android) is closed and reopened on the device.
basically, the call to isauthenticated() always comes back 'true', unless you have purposefully logged out at some point.
1. enable webdav integration 2. add phofurl instead of phofurl 3. have a total crash
1. open the page on a mobile browser.
2. try to scroll the content.
1. turn on all messages globally in admin 2. hide counters is off on individual channel/group 3. badge still shows up
1. click on user icon 2. username and status need some padding at the top
1. administration -> ldap -> base dn 2. set to and then "execute synchronization now" 3. check server log and see that users imported reports (users in users ou & projects ou*2) users imported.
4. set to ou=more and then "execute synchronization now" 5. check server log and see that users imported reports (users in users ou & projects ou*2) users imported.
1. post this link: phofurl
1. configure administration -> push settings untitled phofimage 2. configure gcm api key and gcm project id 3. restart rocket.chat server
1. install on ubuntu 18.04 2. load in chrome and configure the admin user etc.
3. open the site on another machine or browser or even an incognito window.
1. click `administration/custom sounds` 2. on right bar click on `+` sign and add a custom sound 3. add relevant info
1. send direct message to user.
2. user receives push notification with title 'undefined ' in push notifications settings there is a 'show channel/group/username in notification ' turned on.
gateway is enabled and its url is phofurl
1. create webhook with script with false syntax.
2. update webhook with correct script.
1. take hours to translate on lingohub 2. some day @engelgabriel override the result 3. have to revert translation history on 300+ items
1. enable push notifications for mobile in settings 1. press button "send a test push to my user" -> see the error in the screenshot above
1. type an emoji in any thread on the web app 2. view the thread in the android app
1. go to any channel or your dm and add ` disambiguation phofimage ) this is test 1` 2. then add any other url like ` knrt10 phofimage this is test 2` 3. just change step 1 message data, enter this ` disambiguation phofimage ) this is test something` 4. just change step 2 message data, enter ` knrt10 phofimage is test bla bla bla` 5. now for last time enter new message knrt10 i wanted new message`.
1. a channel 2. send a link (possibly just spotify or spotify albums) 3. click on the title of the embed
1. add a few `<p>` and `<h1>` tags to the privacy policy or terms of service (layouts->content).
2. open the privacy policy or terms of service links form the login page.
1. setup saml auth according to phofurl 2. login using saml 3. logout using saml
1. run the curl command from command shell
1. click forgotten password link, enter email address 2. check email inbox, click on link in password reset email 3. redirect to prompt: 'please enter your new password below" 4. any text entered in the password field and submitted will produce the error modal saying 'error changing password ' this issue was previously described here: phofurl
1. activate graphql in rocket.chat 2. create small dummy implementation (query & subscription) 3. inspect websocket frames and find the outgoing frame for the subscription
i can't reproduce it by myself.
1. click on memberslist of a private group or channel
1. install a self-hosted instance 2. do not configure an smtp server 3. add an admin user with a valid email address
1. import large hipchat history with attachments using the workaround proposed in phofurl 2. import everything
open livechat page for department x when x isn 't online livechat window appears user fills in their data livechat will be forwarded to department y
1. go to a session 2. just copy a pic or do a screenshot 3. the paste it, and went internal server error or just drag a file to the conversion and click upload, it does not work, internal server error
1. resend verification email 2. get error "error trying to send email: message failed" 3. tcpdump shows the bad from header and the dkim error that causes
1. have the chat open for at least 15 minutes with ~8 active people 2. have someone change their name/avatar 3. experience major lag
1. update rocketchat to version 0.74.2 2. wait until 02:00 cet 3. get error message
1. administration->oauth 2. create custom oauth 3. set username field:
1. set the above settings 2. perform repeated api calls to the users.getavatar end point (eg.
3. after a number of attempts, see a 400 appear with error type
1. open rocket chat on desktop 2. log out if you are logged in 3. notice that there is no button to log back in 4. you have to poke around quite a bit (e.g.
by searching the server for a channel) before you can find somewhere to login, it doesn't even show channels to select from on the side make poking around easier you have know search for a channel in the search bar.
0. set up some trigger (runonce -> disabled) 1. go to the web page with embedded livechat widget 2. start conversation 3. finish conversation
1. type the following: phofcode inline phofcode 2. you will see that the word ** inline ** will appear by itself rather than how it appears in the following github markdown: this is supposed to be an phofcode code example.
1. upload slack zip on the import page 2. messages are processed and some are imported 3. after a while, the server connection times out a few times (possibly overloaded) 4. navigate back to the slack import page to check the progress
1. go to rocket.chat admin panel 2. adjust "default number calls to the rate limiter" 3. use the attached jmeter test to create api requests rocketchat.zip phofhyperlink
1. create channel with the same name as it is in slack 2. post message in slack channel 3. message not appearing in rocket chat
1. update to a recent version of develop tag on docker.
2. if you have custom sounds, check them on the list in administration->custom sounds.
they should show up and play properly when clicking on "play" button.
3. go to my account -> preferences -> sound, and try to pick any of the custom sounds.
you will not see anything but the default "chime (default)", and "door (default)" sounds.
1. create a user called "foo" 2. go to a channel and mention "@foo"
1. upload a big file (70mb+) to a channel 2. rocketchat crashes 3. rocketchat restart does not help
1. open live chat, text 2. close the chat 3. chat is still visible on the left task bar.
1. enable markdown "marked" in messages 2. enter :thumbsup: in a channel 3. emojis is only half the size it is withoud markdown enabled
1.write ` ` ` $x $y ` ` ` and send the message
1. go to the web ui and login.
2. go to administration>apps 3. check the console
i guess just use a custom oauth and check the request format
1. deploy a brand new instance of rocketchat (for me it was docker-compose) 2. go to the rocketchat-instance url 3. create first admin via setup wizard 4. get the "too many requests" error at step 4 of setup wizart
user enters text and sends the message.
message does not delete from the screen of other users.
1. in chanel click on someones login for detailed info 2. scroll up in message history 3. banner of chat leader will hide cross sign recently opened icon in detailed info about user.
run one of these requests in javascript: var req = new xmlhttprequest(); req.open("post", " phofurl "application/json"); "username": "", "email": "", "pass": "","name":""})); req.responsetext email var req = new xmlhttprequest(); req.open("post", " phofurl "application/json"); "username": "", "email": null, "pass": "","name":""})); req.responsetext read property 'id ' of null"}"
1. go to "create a new channel" 2. in the "channel name" field i enter a name in russian "" or " " 3. after pressing the "create" button nothing happens
1. open a channel 2. click the `+` at the bottom right 3. click `video message` 4. click the recording button
1. start rocket chat on home network 2. take your computer to mcdonalds for lunch 3. connect to mcdonalds wifi 4. watch rocketchat window process ms connect network authentication
account: worker [has his e2e password entered] account: victim [doesnt, also he has forgotten his e2e password] account: admin [selfexplanatory] 1. create with [worker] a private, encrypted group and invite [victim] 2. reset the e2e password of [victim] with [admin]
see `manage own integrations permission
1. in a self hosted environment send a message to a user with a custom app 2. check received notification
1. enable message retention policy and set a maximum age.
2. attach a file to a message.
3. let message/file get older than maximum age policy.
2. let policy activate and run 3. click on files list and see the files still exist.
(re)start the server, although it most probably is caused by ` phofurl returning a wrong response, during the check.
1. upload file as message ( phofurl 2. change file, but keep file name and location the same 3. reupload file as message ( phofurl 4. reuploaded file is not changed, is still from step 1
1. as admin: allow all file types for upload 2. uploading file.txt and downloading it works fine.
3. uploading file (without extension) --> download does not work.
logs complain about unhandled promise rejection
1. set a root_url with a subpath 2. create a cluster with several instances of rocket.chat
1. click 'one click build.'
2. go to 'view app' after build complete 3. application error
2. new user logs in to rocket chat 3. every employee in the company gets their list of available direct message users changed to this new employee 's name.
1 - select 'slackbridge' in the administration menu 2 - type the name of the channel into 'slackbridge out channels' and select it 3 - click 'save changes' 4 - reboot rocketchat server 5 send message from slack on the channel 6 send message from rocket on channel
open a chat window and write the following text: ` disambiguation phofhyperlink )`
sudo snap refresh rocketchat-server --candidate
1. update to latest develop.
2. try to click on any dm session.
3. room will sit loading but not showing any data, the log messages will appear.
1. configure 2 livechat agents 2. login with agent 1 and finish 5 chats 3. login with agent 1 and agent 2 4. start new chats 5. all new chats will be routed to agent 2 until it reaches 5 chats (number of routed to 1)
1. go to a channel with a pin pointing to an old message (i.e.
1. open the pinned message right menu.
2. click on the pin options menu (with options "unpin message", "jump to message"*, "permalink").
3. click on the option "permalink".
* in "unpin message" both words are capitalized but in "jump to message" just the former.
1. phofurl on edge 2. open rocket chat on any other browser 3. write a new text message 4. message isn't received
create a inetegration four your own user: enabled: true name (optional): mypersionalintegration post to channel: @[username]
1. use rocket chat on android, and login 2. use a web session with admin rights and the same user and try push notification 3. receive error
docker pull the image, start, see the log.
enable webdav config webdav check config, username password and url
2. create/have users a and b.
3. login with a, click in header message to save e2e password, and logout.
4. login with b and logout without clicking on header message.
1. identify an existing user in your rocketchat install.
2. change their avatar in active directory/ldap.
3. go to 4. click execute synchronization now.
log into rocket chat instance with any version of the rocket chat mobile app.
1. post any link containing the html `<meta name="fragment" content="!
.. wait for the embed to show 3. not meta tags are shown
starting the server with 0.73 version.
1. enable and do basic configuration of the "live chat" feature 2. install the script on an external site 3. load the site/page where the livechat is ionstalled
1.admin panel > layout > custom css > colors content =(color) #c2ffc0
1. creation a webhook (without or with a script enabled) 2. send a message with attachment that contain the author_name field through the webhook 3. verifying the result on the channel where webhook post message
1. in any chat, type " phofcode `" (without quotes) and hit enter
mute user try to edit message with the muted user
1. enable crowd authentication 2. allow users to change their username under accounts 3. login via your crowd username 4. change your username to something else 5. when logging in with your new rocketchat username you will be redirected to the fallback login, but not login via crowd 6. on sync your rocketchat will be reset again to the crowd
1. setup a working irc bridge in rocketchat.
2. verify that messages going both ways are delivered.
that is, from irc to rocketchat and from rocketchat to irc.
3. have an irc user disconnect from a room.
the exception shown below is thrown.
1. try to register as a new user 2. click on "register a new account"
1. go to phofurl (for example) 2. turn the "use real name" setting on (again for example) 3. click on "save changes".
4. a green confirmation appears that the setting is saved.
5. close the admin panel without refreshing.
6. open the admin panel again (from overflow menu in left sidebar) 7. check if setting is still true.
1. click on "mail messages" 2. try to add yourself under "to users" 3. not possible
visitor send a lot messages.
1. hard because you need to have crowd server 2. you may temporary throw exception as in phofurl for example in 3rd iteration of `users.foreach` for debugging
call meteor method : function(x,y){ console.log(y); })` `y` is always an empty list, despite the email being valid.
(the email is sent out) (i have not set an smtp server though, it might or might not work with that configured)
1. release a point release for the actual major-version (e.g.
`72.2`) 1. release a point-release for an older major version (e.g.
`70.6`) but not for the actual major-version (`72.x`)
1. start with a rocketchat server running v71.1 2. have a user on the pidgin client (with purple-rocketchat) log into chat.
3. have a second user log into chat through their web browser, create a public channel, and send message out into that channel.
check to see if the user on pidgin saw that message show up as direct message.
4. update the rocketchat server to 72.1 and repeat steps two and three.
try to connect to rc.inmyroom.ru
1. go to " phofurl 2. fill "personal access tokens to rest api" 3. click on "add" 4. you can see: ' 'token: __token __ your user id: __userid __" instead of real token and userid.
hover over a message reaction (the reaction must be from someone else than "you") or query a message with a reaction via the api
1. have rocket.chat running behind a (corporate) proxy 2. setup smtp to some external server 3. send test e-mail
1. add policy retention for channels or private groups 2. wait 3. wait 4. message are not removed
1. go to phofurl 2. click "mac app store" graphic in the "desktop apps" section
1. go to page with live chat with registerguest called, when no agents are online 2. click on the widget
1. go to 'administration ' 2. click on 'file upload ' 3. fill in *.ptk and/or *.xjdf in "accepted media types" 4. click on 'save changes ' 5. try to resend a file with one of these extensions
go to ` phofurl example: phofurl
0. make sure you have at least one message containing the string "remote server failed".
1. enable global search provider - tick true next to global search).
2. in any channel, click on the search icon, make sure global search is ticked.
3. type /remote server/i in the search box.
for me, no results are returned.
4. type /remote server failed/i in the search box, and results are returned.
1. join an rc server.
2. click on a channel 3. click on a different channel
1. install rocket.chat 0.72.0 on the latest centos as described in the official documentation phofhyperlink .
1. upgrade server to 0.72.0; 2. try to use it with internet explorer 11
1. send image or gif 2. minimize media by clicking on the small black triangle 3. add any reaction
1. go to administration / integrations -> new integration / incoming webhook integration 2. check preview, it should include the avatar of your rocket.cat user 3. go to field "emoji (optional)" and enter the example emoji (":ghost:").
press <tab> to update the page.
4. check preview, the avatar picture just vanished.
1. open a channel with unread messages
1. press "search" 2. enter "sergey" into input box 3.
"sergey aleksandr" does not appear in user list 4. press "directory" 5. go to "users" tab 6. enter "sergey" and he is among other users in the list
send or receive message with url containing a query string.
run and check release version in admin panel.
version should be 0.72.0, right ?
1. have messages that are unread 2. hit mark as read
1. start a live chat 2. end a live chat 3.
1. in the accounts section of the server admin console, change the number of days for "login expiration in days" to 1.
2. save the changes and then restart rocketchat server service.
3. log into server with desktop rockechat client (2.14.1 - 2.14.4) and check it in ~24 hours to see if it 's still logged into server.
4. in accounts section of server admin console, change number of days for "login expiration in days" to 90.
5. save changes but do not restart rocketchat service.
6. log into with desktop rockechat client (2.14.1 - 2.14.4) and check it in ~24 hours to see if it 's still logged into server.
repeat similar steps with "forget user session on window close" setting (i think you don 't need wait 24 hours for this test but do try quitting desktop rocketchat client and reopening it see if user is still logged chat).
(note: some our users lock their workstations at night while others actually log out their workstations each night.
in both cases, users reported having log back their desktop rocketchat clients next morning when they returned work)
call and be authenticated as `username2`
1. upload a file 2. set the filename field to `..` 3. watch the carnage
1. set your profile to german 2. react on a message 3. move the mouse over the `reaction`
1. checkout 'develop' branch 2. build 3. start with old config (used for 0.70.4 version)
fails to connect to db
2. open website with livechat in anonymous mode.
1. install fresh ubuntu 18.04.1 2. follow dev guide here phofhyperlink : * installs require use of `sudo`: * install python 27 * install git * install meteor cd to repo 's local dir (as normal user) git clone repo to local dir `meteor npm start` 3.
`meteor npm start` hangs at "starting email intercepter" ---
1. toggle hide counter in room 1.
2. go to other room 3. wait for message in room 1.
1. change the user name on the cas server and in rocketchat 2. user tries log in via cas
1. update to rocketchat 0.72.0-develop (commit 2. try to send a message.
migrate rocketchat single app, single mongo to replicaset based deployment - 3 x mongo replicas created - mongodump of old database - mongorestore on replica - ensure users and opslog db 's exist 3 replica deployment of rc
1. update to 2.14.2 2. receive a message
use the smartphone in portrait and in landscape position.
1. setup new rc instance 2. create (public) broadcast channel 3. go to admin ui 4. select channel in question and turn "read only channel" from `true` to `false`.
5. try to switch it back again
1. import users (csv) 2. users receive email and are prompted to login (without a password) 3. user clicks "login" - then has to use "password reset" function to set the initial password
run the code in a hubot script
open rocketchat in chrome browser in android
1. open any chat in rocket.chat and try to send a message consisting of blockquote followed by a single-line code block, something like this: phofcode 2. send this message
1. try to change a user 's e-mail address e.g.
1. update develop to latest (0.72-develop.
commit: 2. go to administration 3. click on custom sounds, or apps.
1. go to "my account", slide to notifications 2. change any of tree field, press save button 3. after reloading press at "3 vertical dot"
1. go though the csv import (the flat zip file has only users, nothing else)
1. open rocketchat in firefox 2. wait the bug happens (i 'm not sure what causes it)
1. refresh/reload screen 2. profile picture loaded 3. after a while broken picture icon shown.
1. create a read-only channel (public or private) as user a 2. add user b to this channel 3. as user b post to this channel via api phofcode
1. login using native client on 1 computer 2. login using web client on another computer 3. let the computer with the web client goto screen saver 4. see that status is away.
even setting my status to online on the first computer doesn't work.
it's automatically set back to away until i wake the second computer.
1. go to any rocket.chat channel page on the web client 2. press `shift+escape`
this is my test: curl -h "x-auth-token: -h "x-user-id: xxxxxxxxxxxxxxxxxxx" -h phofurl -d '{ "channel": "#general", "attachments": [{ "title": "horizontal text buttons with url", "button_alignment": "horizontal", "actions": [ { "type": "button", "text": "book flights", "url": " phofurl "is_webview": false }, { "type": "button", "text": "cancel travel request", "url": " phofurl "is_webview": false } ] }]} '
1. go to `administration/oauth` 2. click on`refresh oauth services` 3. log out from rc 4. saml login is missing (no cache or refresh or browser/android client problem) 5. restart rocket.chat 6. saml login is offered again
1. configure a password policy.
2. as an administrator, manually add a new user.
3. attempt to set that user's password, using the automatic password generation feature.
create a room with broadcast flag switched on go to edit room information dialog expected behavior: i can remove the broadcast flag by clicking the switch.
1. activate prometheus 2. go to ` phofurl (or whatever port is configured) 3. look at values like or
1. create a channel 2. enter channel 3. create one message 4. delete channel 5. re-create channel 6. enter 7. attempt to add user(s)
1. create a channel 2. delete that channel 3. re-create it 4. attempt to enter
1. go to a channel with a channel moderator 2. click the member 's list icon 3. search for the username of the channel moderator (if he 's offline, set the dropdown to 'all users ') 4. click vertical ellipsis 5. notice "set as moderator" option when user 's already moderator
1. make sure "webdav integration enabled" is set to "true" 2. go to your user preferences
1. open a link to web-site.
1. deploy a server with a signed certificate 2. create a reverse proxy that only allows clients with a valid client certificate to authenticate and access the rocketchat endpoint 3. create valid client certificate for client 4. convert the client certificate into pkcs12 file 5. import the pkcs12 file into the android store, ensuring it is trusted 6. ensure chain for server is trusted on android 7. attempt to connect to endpoint through rocketchat app
1. open a direct message in 2. type `/`
1. open any room; 2. upload a file; 3. copy the link address of uploaded file, paste it into message box and send it; 4. click in the new message 's link.
1. fresh install of rocket.chat with a new user registration that has never logged in.
2. install rocket.chat desktop client (might happen on web, too, not sure).
3. login 4. go to direct message or channel and hit the action menu.
1. go to admin ui message 2. now set ... - "allow message bad words filtering" to `true` - "add bad words to the blacklist" to `test,example,` 3. save configuration 4. go any channel and send a message with the content: `test,example,`
1. go to administration apps 2. go to an app that needs to be updated 3. click update
log into rocketchat server, goto #general and see the error
1. edit a sequential message in e2e channel 2. send another message
1. send a message in e2e channel
1. enable e2e for a direct message channel 2. assemble an otr session 3. try to send a message 4. feel disappointment
1. real name is true 2. remote user (not you) sends you first direct message 3. his or her username is displayed in left pane
1. go to admin ui accounts default preferences 2. set "hide usernames" to "true" 3. click "save" 4. set it back to "false" 5. notice how you can not click "save" again
1. have deleted users in hipchat 2. create export 3. import into rocket.chat
1. open any conversation 2. click on the "more" and then "mail messages" <img width="261" alt="screen shot at 6 25 06 pm" src=" phofurl 3. select some messages you want to mail
i have reproduced this by including a link in a rocket.chat.app attachment using the following code.
`you can login to the server here phofhyperlink ` also, in the open.rocket.chat server when you type in something like `#53` and it attaches the github links, attachment has a trailing `)` as well as anything after it before a space.
1. click on send image phofimage
1. go to a channel and click "..." in the top right corner.
2. select "keyboard shortcuts" 3. panel is displayed with keyboard shortcuts in a small font size.
1. enter the following string in chat: ` ( .
path ** a) ** 1. enter the chat with one or many members.
2. click on filename to download any file posted by any user.
3. click save in the modal dialog.
path ** b) ** 1. enter the chat with one or many members.
2. click on filename to download any file posted by any user.
3. click cancel in the modal dialog.
4. do not enter e2e password.
4. go to users e2e password reset page, the option to reset is greyed out.
1. open url `/graphiql` in firefox62.0.3
1. open any channel and navigate the message area to the screen reader.
2. use a screen reader to see if there is a button to open the message action menu.
1. embed chat in iframe with layout = embedded 2. give the command "go" to iframe ( phofurl to go to another chat inside the iframe (in path specify the path to the new room and pass "?layout=embedded" parameter) 3. in new room we see display of top navbar 4. if you go room that was opened first, panel is not displayed
for example it will only show the middle one, if you enter the text below: phofcode
1. paste a linkedin post link in any chat in rocket.chat.
2. link segments is converted to emoji.
1. administration -> permissions -> new role 2. role: testers with scrope rooms -> save 3. choose a room 4: type in a user (other than myself) in the add user field and click the add button 5: ??
1. import hipchat.zip 2. turn on atlassian crowd auth method 3. try to authenticate as a migrated user
1. click the download button next to uploaded file name 2. rename the file 3. click 'save'
1. got to user directory 2. search for users that start with a , or , for example
1. run an outdated client 2. start up the client to get the update available dialog 3. accept the update, and install it 4. on restart, observe the update available dialog appearing again.
1. record video and send to friend 4. click to video but not working
either: run `snap refresh rocketchat-server` in case there 's an update available.
or: run `snap disable rocketchat-server && snap enable rocketchat-server`
1. go to a channel 2. mention a user (@) that is not in this channel
just going to the url shows me nothing but blank page
1. login as user 'a ' in one browser 2. login as user 'b ' in another browser 3. open a direct channel between users 'a ' and 'b ' 4. user 'a ' initiates an otr session to user 'b ' 5. user 'b ' accepts the otr session
1. go to account preferences 2. set "new message notification" to something other than "chime (default)" 3. go to channel "notifications preferences" 4. chime not in "sound" dropdown ("default" uses the account preference defined sound)
1. post a message 2. select edit and don't change anything 3. hit `return` key only
android app = any version for rocket chat even latest 3.3 or legacy = doesnt work.
browser = works desktop = works ios works
1. install 0.70.1 2. verify e2e is disabled in the settings 3. open any page and see the end to end encryption bar
shrink it down and put it in the bottom right of the screen.
2. add it to your login items so it starts automatically when you log in.
3. restart your computer and log in.
1. login with ldap user 2. check ldap debug log
dm someone while they are away and they receive an email that does not look complete.
1. add outgoing integration to some fake service (simple express app in node for example) 2. in fake service set http response status to 400. also setup some request logger ( phofurl 3. trigger webhook somehow 4. wait some time and check that rocketchat retries query to service.
5. set status in fake service to 200 in order stop re-requests.
1. write a message 2. reply/quote to message 3. edit the reply/quote to the message 4. edit the reply/quote to the message again
1. checkout 0.69.2 2. run `meteor npm start`
1. add emoji in admin panel 2. post emoji in message
1. connect to realtime api, log in, subscribe to `stream-notify-user` 2. add user to a room 3. remove user from a room
1. user a gets disconnected and logs in again.
2. user a sends a message to any user b.
3. the sent message is greyed out for user a/user b receives message ordinarily.
4. now if user b sends a message to user a, he can see "user b is typing" and he gets a new notification, but there are no new messages visible for user a in chat window.
5. refreshing browser cache or relogin solves this bug.
1. post a message in an encrypted channel 2. delete this message
1. click on the blue e2e info bar and enter your password
1. enter e2e password to decode your key
1. use phofurl to subscribe stream-notify-user 2. user b send direct message to user a 3. got multiple events except "message"
2. try to create another user with other email address, but same username
1. type some text into the text field
1. send a message with this values in any client: phofcode 2. the message won't highlight `@all` and `@here` on the web client; 3. the ios client will highlight (it means the `mentions` object are being created)
1. update to version 0.70.0-rc.1 2. click on my account 3. make any change (optional).
4. click on 'save changes'
1. receive a chat message 2. read the chat message 3. minimize rocketchat window
1. go to the user directory, 2. click on a user to start a direct message
1. open `{channel-1}` and open the 'search message' for that channel.
2. search for `{term1}` - any term that has a lot of results 3. open `{channel-2}` and open the 'search message' for that channel.
4. search for `{term2}` - any term different from `{term-1}` that has a result in `{channel-1}` 5. click on 'jump' on the search result `{term2}` in `{channel-1}` now you will see `{channel-1}` with search results `{term1}` as the message search ui adopts current state of search as stored
1. change on profile localization from en eg.
to de or fr, log out, log in again 2. go to a channel/room and select "prune messages"
1. go to a channel 2.
@username 3. does not add the @username to channel if not already a member
open ios app, and try to upload picture within a channel
1. open the administration panel; 2. go to apps option; 3. open the administration menu again and you'll see an `x` in the same line as administration; 4. tap on it;
1. write a message in a channels, rooms or direct messages 2. wait one day and do not write any new message 3. after 1 day and 31 minutes you can see older messages 4. if i write a new message and wait 30 minutes, older messages were deleted
1. open a group 2. click on members icon 3. enter search pattern
1. post a link in chat inside a formatted code block, eg phofcode 2. wait long enough to convince yourself a link preview is not going to appear 3. press up to edit the message, and then press enter to "edit" the message (despite making no changes) 4. a link preview will appear
1. use ?layout=embedded in direct messages url.
2. use jitsi meet as video conference.
2. from any user invite other user for video conference.
3. click to join shows up in another user messages 4. click the button 'click to join' (it doesn't work)
1. download an export from hipchat (56mb file) 2. decrypt the file using openssl 3. test the file using 7zip 4. go to import and choose hipchat tar.gz file 5. browse and select the decrypted file.
6. wait about 3-5 minutes for the windows to refresh itself and go back to browse 7. check logs and see error extract error: error: write after end
someone sends any message to private group
1. go to some private channel and open menu (aka more) 2. click on livestream setting 3. input youtube livestream url 4. click save
1. create a channel 2. add some users 3. delete the channel 4. recreate it with the same channel-name 5. try to join the channel again or try to change some settings
1. create a broadcast channel 2. add all users from the server to this channel via the api /v1/api/channels.addall 3. all users added can read / write on a write-protected channel
1. login using the rest api phofcode
1. moving window over desktop 2. error window are displayed 3.
1. open web version in internet explorer 11.
2. switch view mode to condensed
1. admin/owner: create a private room and add a user to the room.
2. user: try to access the private room in which user was added.
3. admin/owner: kick-out the user from the room.
now a blank `start of conversation` page will be displayed.
1. make sure you have 2+ channels, eg.
#all, #general, #foo 2. enable unread on top sort order 3. select a channel, like #foo.
it appears as selected in the left sidebar.
4. wait for messages to appear on #all 5.
#all is moved to the top 6. click on #all 7.
#all is removed from the top, you are in the #all channel, but visually it is not selected.
1. create a new channel(room) with name `testa` 2. remove the name from admin panel.
3. create another channel(room) with the same name `testa` 4. open the channel, and there was no input box, it is always loading.
2. click on "install update" 3. when the "update ready to install" dialog appears, click "install now" 4. walk through installer steps.
at end, check "launch rocketchat" option.
5. receive prompt for update.
verify in "about rocket.chat" dialog that 2.13.1 is still installed
1. go to 'prune messages '
1. enter /jitsi 2. get a url like join the video call: phofurl 3. click on urls 4. jitsi reports 404
1. paste or type a url in a chat that contains a string corresponding to an emoji code.
for example: phofcode or phofcode
1. enter develop branch of rocket chat 2. run build bash script
1. create a setup with minimal two instances of rocket.chat 2. set https_proxy as environment variable (for internet access behind corporate proxy) 3. set no_proxy as environment variable (for in-cluster communication)
1. create a new integration which uses a script.
the script has to include some quotation marks.
2. get all integrations via 3. verify the structure of the return json
1. have lots and lots of users in your server.
1. have cas provide attributes such as: phofcode 2. have an attribute map in rocket.chat such as: `{"email":"%email%", "name":"%full_name%", 3. attempt to login-in with a user that does not already exist
1. enable "use real name"
1. leave the group 4. other members can 't manage this group
1. try to delete user (user is last owner of some rooms) 2. error message: error-user-is-last-owner
localize your environment in french 1. meteor reset 2. test_mode=true meteor 3. in another shell : meteor npm run chimp-test
1. start using rocket.chat with normal registration and create account for user with said name 2. implement ldap sync and merge existing accounts
1. go to apps menu 2. select one app in list 3. click install button or 1. go to apps menu 2. click + button 3.insert app url from rc marketplace 4.click install button or 1. go to apps menu 2.download app from rc market place 3.click + button 4.click browse and select downloaded app 5. click install
1. login via crowd 2. go to profile 3. upload file 4. save button is not active
1. rooms members list 2. click on 3 dots near last user in the list
1. start docker with environment: root_url= phofurl 2. create public/private groups 3. show sidebar
1. go to "register a new account" 2. attempt to read the text for the field labels.
1. start rocketchat with environment: `root_url= phofurl 2. login and post any message in general channel 3. select permalink for the message 4. paste the permalink
1. go to my data section of account/preferences 2. click download my data or export my data 3. at "your data file will be generated.
a link to download it will be sent to your email address when ready."
- create room - write message - delete room - recreate with the same name
1. double click icon to launch
1. get messaged by a user for the first time.
1. administration -> accounts -> default user preferences
1. allow unlimit upload file type by clear the comma-seperate list of media type then restart rocketchat server 2. on a direct message , click on ' +' icon and select upload a auto cad drawing file xxx.dwg from local computer 3. file upload and complete but not show the download icon 4. check it on the 'files list' we could see the file xxxx.dwg but it grey out and could not download
1. make sure all notification are enabled for a particular channel.
2. make sure you will receive push notifications (close all desktop session, and the mobile app) 3. on that channel make someone send a message with you @ mentioned in it.
4. you receive multiple notifications for the same message.
1. make a room "read only" 2. enable "allow reacting" 3. attempt to react to a message
enable push notificationsrestart the rocket.chat server.
regular restart or restart when upgrade the server application.
1. set the env vars described below 2. try to login using ldap 3. error user not found or incorrect password and stack
1. use logo.svg 2. check logo in sidebar 3. check logo above login form on smartphone
1. user a click start confidential conversation 2. user b waits until the window with confirmation closes 3. user a can no longer start a confidential conversation with user b.
1. login via test acc and type direct message to real acc image phofimage 2. login via real acc and read direct message from test acc image phofimage
1. click to search icon 2. after click to cancel search it looks fine.
1. use rc normally, respond to and read notifications.
2. note that the unread count on the app icon does not ever seem to get cleared.
make a get request to the endpoint.
make any query to the im.members endpoint with a roomid.
1. go to channel 2. click on menu of the channel 3. select prune messages 4. enter dates 5. check the checkbox in front of "only remove the attached files, keep messages" 6. click on prune
just send options request to /api/v1/login
1. wait for new messages in any of the rocket.chat channels 2. the rocket chat icon in the macos dock shows a little red (1) - correctly 3. the new rocket chat status bar widget also shows the new message count (1) - correctly 4. open rocket chat app and read the new message 5. the rocket chat app now shows no unread messages - correctly 6. the status bar now shows (0) - correctly 7. icon in macos dock still (1) incorrectly
i just have to wait a while and the red unread bubble will not go away again.
1. upload a small image
1. configure required fields for ldap authentication.
2. test configuration with "test connection" button.
3. see the "success connection_success" notification: ok 4. then try to login with an actual user with correct credentials.
1. get a new message, see that in the dock the application icon has a badge number of unread messages 2. read the message 3. check and see that the unread badge number is still there
1. just create basic app like any from phofurl 2. npm add any package 3. import it in *app.ts 4. rc-apps package 5. install in rocketchat administration panel
1. click in chat message input 2. press "page down" key
1. allow special characters in channel name 2. create a channel named "this is a test" 3. try to rename the channel to "this-is-a-test" phofimage as you can see it shows successful, but the channel name stays the same.
furthermore, there is still a mix up of 'name ' and 'fname ' in different parts of the ui which is a bit annoying when you allow special characters.
don't know how to reproduce.
1. create hipchat backup of a large instance 2. decrypt tar.gz 3. import large export as hipchat (tar.gz)
1. post the log line above with the three backticks: ` ` as multi line prefix
1. get a message after you started the desktop application 2. read all the unread messages 3. look into your app drawer
1. create a webhook 2. post data to webhook
1. go to a channel 2. post a quote + `window.location.reload` phofcode
1. myaccount 2. desktop notifications for all messages 3. save changes
1. create a gitlab webhook 2. copy & paste the integration url in a rocket.chat room 3. click on the link
(web interface) -> public channel 3 dots -> prune messages 2.
(optional set time) 4. prune screen phofimage
1. go to administration 2. click on video conference and activate or deactivate jitsi 3. close the settings 4. open the video conference settings again
1. enable livechat 2. create an html file and copy the javascript code before the </body> tag 3. configured an online agent to attend the livechat requests 4. accessing from a mobile device (in vertical position) the livechat enabled html and chat window is too small.
curl on the /api/v1/users.list endpoint with an authennticated user
1. update to 0.68.0 from 0.65.2
`journalctl -f -u 3. watch as your server isn't working
1. click the "+" icon in the text box, select "add files from computer".
2. select a file and click open.
3. in the "upload file?"
page in rocketchat, click on send.
1. installed ubuntu and rockchat with snap install 2. check systemd log
1. make sure s3 minio upload storage is activated in your backend 2. upload a file in the chat 3. confirm it is uploaded to s3 4. delete the chat message upload 5. check your s3 bucket, see the created object still there
1. enable 2fa 2. log in
1. make a acc or login to phofurl 2. refresh page (may or may not load history)
1. send a message to a channel with all offline users (who, therefore, should receive notifications) 2. see that the latter have received no push notification, despite the message being delivered without any problems
1. upgrade to 0.67.0 2. type in private channel where hubot lives `hubot help`
not sure how this bug started happening to me.
this problem is difficult to reproduce, unless you are behind a corporate firewall where the company inserts its own ca root certificate into all requests.
in that case, an outgoing webhook that makes a request to an https resource fails.
1. ensure that a custom logo image has been uploaded.
2. ensure the image is showing in the content section for footer as in: phofcode image phofimage no other css customizations have been made, and it has been working ok until the latest commit.
1. create account via adim or oauth without email 2. log in newly created account 3. upload profile avatar pic 4. cant save updated avatar image without completing email
1. upload or record a audio message 2. open rocket.chat with safari on macos
1. integrate livechat in website using the code from "installation" 2. go to website 3. no livechat appears
take a screenshot of an image that is less than 200 pixels high, e.g.
paste the image into a chat.
note that the image is resized in the chat to be 200 pixels high.
1. go to phofurl in zapier to set up integration 2. enter chat url, for example phofurl 3. redirects to this page with "authorize" button phofurl 4. click on authorize button
1. create notification channel using slack in grafana and send notification 2. check for errors in rocket chat logs
1. sync new user from ldap (e.g.
'alice') 2. bob searches for 'alice' and writes her a new message
login with current ad credentials for any user.
1. type `in dieser umgebung sollte die formatierung fr tex ausgeschaltet werden.
$aber das wird sie nicht$` (inline/multiline code.
test string means: "in this environment, tex formatting should 't be applied $but it is$")
1. open admin from the ios app; 2. menu cannot be toggled;
1. create a * private * channel with name x.
2. create another * private * channel with name x.
1. go to any conversation or channel 2. click on 'search messages' 3. type something ** without ** clicking on the searchbox
1. drag image file pixels; 300dpi; rgb; 4.2 mb) in chat (osx or firefox browser) 2. download file from chat
localstore: store created at localstore: store created at localstore: store created at setting default file store to gridfs exception in callback of async function: typeerror: server is not a constructor at new bridge irc.js fileevaluate require array.foreach (<anonymous>:null:null) function.run ` maybe remove rocketchat irc before start ?
byt how i can do this ?
2. start rocket.chat client , wait for connecting server done.
click the image phofimage on dock, then crash happens.
1. ensure the real names property is set to true and that the contacts are showing with real names.
2. try to send a direct message to a contact.
3. their name will change to the user name.
4. verify that the real name setting under layout -> user interface is still true.
make multiple rest calls to user.update with a username set.
1. as admin user, go to `administration` > `users` > `add user`; 2. fill the form using a already-used email address.
1. see the channel with unread answers; 2. click in that channel; 3. click in the button "mark as read";
1. under administration -> livechat -> routing -> set routing method to.
2. when a request comes up, click on 'take it ' button.
its redirected to incorrect url.
1. copy backup to server 2. execute `snap run 3. confirm with `y` + `enter`
don't know how to reproduce it.
1. create a room using the web app, with yourself as owner.
2. start up linux app, go to room.
1. join room 2. write message like phofcode 3. send message.
1. go to administration > layout > user interface > allow special characters in room names - set to true.
2. create a channel and use spaces in the name.
3. open the channel chat and click on the info icon in the top right corner.
observe name and click edit.
1. export root_url=' phofurl 2. run rocketchat 3. login to an account on a browser
run 0.66.0, the incoming webook js is rc-tfs-webhook.js.gz phofhyperlink incoming webhook, and the incoming json from tfs looks like phofhyperlink .
github made me gzip the files.
1. upgrade to 0.66.0 from 0.65.1
1. add rocket.chat to your "connected accounts" in zapier ( phofurl 2. create a new zap that used rocket.chat either as a trigger or action.
3. try to activate your new zap -> it fails (see screenshot below)
1. install with docker phofcode 2. in my setup, rocket.chat is behind a nginx, which is configured like this: phofcode 3. allow unregistered users to read channels 4. wait a few hours
1. upgrade from 0.65.2 to 0.66.1 2. error
1. start new live chat on the site and write first message 2. operator clicks on new live chat from incoming livechats section.
3. message appeared with user message and take it!
4. click button to accept new live chat.
error 404 appears instead of chat room.
1. open safari 11.1 (stable version right now) 2. go connect to open.rocket.chat 3. open public channel `#ios-beta` 4. scroll until you see a video attachment 5. browser will crash
(user 1) open the rocketchat desktop app and enter to the public channel "#public" (for instance) 2.
(user 1) click on the "members list" icon.
you will see "user 1" 3.
(user 2) open the rocketchat desktop app and enter to public channel "#public"
1. open a channel containing a room leader and messages enough to vertical scrolling be present; 2. scroll up, revealing the room leader bar; 3. place the cursor over the any button at header (e.g.
"room info") and wait for its tooltip.
connect to the realtime api join a channel subscribe to messages using stream-room-messages and the roomid kick the client from the channel using /kick @username
1. login using saml as a user who had not yet logged in before on rocketchat
1. change markdown from original to markdown (in the markdown menu).
attempt to do a @mention or set a room announcement.
1. go to your profile 2. see, that the default value is 0.9 (invalid and doesn 't make sense as a default value) 3. set the value to `30` and try to save (invalid) 4. set the value to `60` and try save (valid) 5. set the value `60,2` (firefox) or `60.2` (chromium) and try save (value is cut off after `.` or `,` saved)
1. change privacy settings in notifications and set "show message in notification" to false 2. send any message 3. text message is shown in notification box
1. setup a chat with 1000 simultaneous active users 2. restart all instances at once.
1. create a new channel/or join a channel you are not part of yet 3. receive messages from the other users inside that new channel 4. notice the counter api is not updating.
logging out the channel counter api response displays the unreads and unreadsfrom as null.
5. send a message reply into this new channel 6. now you have participated in channel, count is now displaying as normal
1. go to admin panel 2. go to users 3. find user you want to edit 4. edit user 5. in username field change username to new one 6. save 7. exception occure
1. cd my-project 2. run 'meteor npm start' 3. throw error
1. try sign in with cas (new user on system)
1. write a link markdown in channel subject like ` link phofhyperlink ` 2. save 3. the link is good on channel subject but not on channel information pannel
1. start a new livechat 2. when an agent starts typing, the typing indicator doesn't appear in the livechat widget interface.
1. deployed rocket.chat 0.66.0-rc.1 for the first time 2. enabled prometheus (set true) at webui (settings) 3. deleted rocket.chat 0.66.0-rc.1 for the first time (i left mongodb alive) 4. deployed rocket.chat 0.66.0-rc.1 for the second time 5. checked prometheus webui settings: prometheus was enabled, but the prometheus metrics were not available my workaround: 1. disable via webui (settings) 2. enable via webui (settings) 3. now exporter is started and metrics are available
1. update rocket.chat 2. see logfiles
1. upload any png with transparent background / elements as avatar
1. go to user>my account: 2. click on profile 3. change username field 4. click "save changes"
1. download the tar file from rocketchat 2. use tar command to unzip it to local /var/www/rocket.chat 3. change current path to 4. run npm install command to install dependencies successfully 5. change current folder 6. set following variable `node_env=production port=3000 root_url= phofurl ` 7. run node main.js start rocketchat server
1. switch to `marked` 2. type `:)` 3. look at the text emoticon rather than emoji
1. open any chat with messages using ipad/ safari or chrome browser 2. click on the menu on the right from any message 3. click "permalink" option 4. check content of tthe clipboard
1. in a fresh install, open the setup wizard; 2. input a username that doesn 't match the `utf8_names_validation` settings (suggested: `
1. create a new livestream and enable "enable only audio mode" option 2. play it :)
1. go to input text 2. type a lot, 7+ lines
1. create a user with an @ symbol in the username 2. change any user property in the profile page but the save button stays disabled
1. open any room; 2. upload a blank file or binary file with random content containing the `*.png` extension, by drag-and-drop or via `+` button; 3. click `send` in modal window; 4. wait for upload progress.
1. enable in settings assets -> "enable svg favicon" 2. apply and refresh all clients
1. go to a channel, private group or direct message.
2. click on the star for favorites.
1. start rocket chat server and wait.
post /api/v1/login with: phofcode wait 10 seconds until the json response is received.
1. enable [add-user-to-any-p-room] permissions for admin 1. create a private room "test" as a regular user 2. login from rocket.chat.js.sdk as an admin user `driver.login({username: 'admin ', password: 'pass '})` 3. perform
1. go to rocket chat using mobile web browser (or simulator fo relevant screen size) 2. open any dm or chat room 3. click on emoji icon in the input area
1. go to rocket chat using mobile web browser (or simulator fo relevant screen size) 2. navigate to my account - preferences sreen
1. click 'veiw' -> 'toogle server list'
1. try to generate a zip-file of your data as a user
1. create a channel or enter an existing private channel you are the owner of 2. upload some files (probably optional) 3. see no "list files" icon on the top right noclip phofimage 4. remove ownership of the channel from your user or enter channel as non-owner user 5. see paper clip icon on top right clip phofimage
go to administration click on users
`docker run -e root_url= phofurl 2.
` rocketchat_1 | | site url: phofurl |` 3. open phofurl 4. popup 'you are accessing rocketchat via phofurl and not * * * do you want to update the site url?'
click yes 5. docker kill rocketchat_container 6.
log on to server that has been configured with ldap authentication.
1. log in to rocketchat 2. click on my account 3. scroll to the bottom of the page 4. click either download my data or export my data
custom_settings = { "closespider_timeout": 60, }
i am trying to do this request with `reponse.body` populated with an image binary.
phofcode but then i get this error: phofcode
- start geckodriver on remote: --host=0.0.0.0 --port=4444 --log trace` - start selenium grid on remote: `java -jar standalone --host 0.0.0.0 --port 4445` - start selenium server standalone on remote: `java -jar -host 0.0.0.0 -port 4446 -role standalone --debug` - create `test.html` file and make it accessible via test vhost `my-host.test`: phofcode add `my-host.test` vhost with correct ip to file create `test.txt` file with some contents (for example: `test`) and make it available relatively to the `test.js` file: the same text file should be available on remote too: `c: test.txt`
run the code snippet with the packages listed at the top of the snippet, it will produce above error & stack track
create an application that depends on `selenium-remote-driver` version (or any other 3.x version).
here 's the java method i 'm using to reproduce: phofcode detailed steps to reproduce the behavior:
use ubuntu 19.10 phofcode run a java program: phofcode
run the test on the attached project from the repo i made to reproduce the issue.
run bazel build java/... the chrome*test.classes are not built or added to any jar.
we have a pr to add the chrome tests
detailed steps to reproduce the behavior: 1. create a console project from scratch 2. add selenium nuget package 3. add code from above 4. run it
sendkeystoactiveelement build info: version: revision: time: system info: host: 'desktop-ahamql5', ip: os.name: 'windows 10', os.arch: 'amd64', os.version: '10.0', java.version: driver info: driver.version: remotewebdriver tat tat tat tat detailed steps to reproduce the behavior:
the error happens when i am running 40-50 chromedrivers in parallel.
it doesnt happen if i use small number of chromedrivers like 5 or 10. the more chromedrivers i use, the faster that error happens.
detailed steps to reproduce the behavior:
detailed steps to reproduce the behavior: 1- be on any webpage.
2- do driver.findelements for any locator which is not in current context.
detailed steps to reproduce the behavior: 1. use an selenium test that involves clicking an element (button, table row etc) that is sufficiently narrow.
2. run on windows 10, chrome v.78 selenium-java v.3.11.0 or 3. clicking will be occur above the element.
all clicking seems to be off expected location by a constant offset.
the best example of this requires an incorrectly setup environment.
specifically, install chrome and provide an incompatible version of the chromedriver if you install chrome 78, then install chromedriver 76. execute a c# application which initializes a chromedriver phofurl updated example workaround from comments: phofcode
just get a reference to any webelement on the page and try to getattribute on it.
- start the selenium server - `[root@okhatavk downloads]# java -jar info [gridlauncherv3.parse] - selenium server version: revision: info - launching a standalone selenium server on port 4444 info [seleniumserver.boot] selenium server is up and running on port 4444 ` run below python code phofcode
add any of the newest selenium dependencies to a lambda project and build into a shade jar.
click test (i used an empty test so '{}') and upload the jar to aws to see a 'cannot unzip' error from aws.
tested on linux (fedora 30) & windows 10: phofurl phofhyperlink in this project, my issue is actually worse, eclipse and maven spit out errors no matter what my requires statements say.
calling `new to build and execute the action.
just for example (from stackoverflow) phofurl phofcode
1.locate an element on a page that is outside of the viewport 2.check displayed property
detailed steps to reproduce the behavior: request the css color value of an element containing an hexadecimal color.
the file upload does not work for safari, tpublic void imgfilepath) { t tstring imgfile = new imgfilepath).tostring(); t tstring js = t tjavascriptexecutor jse = new uploadphotobutton); ** error ** fails at sendkeys the command 'post was not found.
build info: version: revision: time:
detailed steps to reproduce the behavior:
detailed steps to reproduce the behavior: * have some dynamic html page with a `<form>` * access a string input of that form as a webelement * call #sendkeys(keys.enter) on it * assert something the resulting target page must contain -> enter key work as expected and submit the form but the assert is executed before target page get a chance to finish loading.
detailed steps to reproduce the behavior: install python, java.
add edgedriver to windows via: pc settings -> search "optional features" -> add a feature -> install microsoft webdriver.
then reboot to make it appear in then inside command prompt: phofcode i 've also checked in task manager that no instances of edge (as i know it doesn 't have multiple profiles) or microsoftwebdriver are already running.
if any were, i killed them off.
1. start up iedriverserver.exe 2. start up a session by sending post request 3. send an execute sync post request 4. observe that the iedriverserver.exe crash
java11 project with maven, > <dependency> > > > </dependency> module-info.java phofcode when running to following code phofcode >starting chromedriver on port 44634 only local connections are allowed.
please protect ports used by chromedriver and related test frameworks to prevent access by malicious code.
then a exception since the service cannot start.
try uploading file to a file_feild in the below specified environment.
detailed steps to reproduce the behavior: on a windows machine with ie11, and python, and selenium, run the script below.
detailed steps to reproduce the behavior: 1. use any selenium test that involves clicking an element (button, etc) that is sufficiently narrow.
2. run on apple mac, safari v13.0.1.
3. clicking will visibly occur below the element.
all clicking seems to be off expected location by a constant offset.
detailed steps to reproduce the behavior: 1. download from phofurl 2. extract it from tar.gz, follow instructions in readme to install bazel, etc.
3. my jdk version is: `openjdk 11.0.4 openjdk runtime environment (build openjdk 64-bit server vm (build mixed mode, sharing)` 4.
`export 5. run `bazel build java/...` (tried with and without `sudo`) extracting bazel installation... starting local bazel server and connecting to it... info: invocation id: info: analyzed 561 targets (294 packages loaded, 6663 targets configured).
info: found 561 targets... error: action failed (exit 1) java failed: error executing command -cp ... (remaining 4 argument(s) skipped) use --sandbox_debug to see verbose messages from the sandbox exception in thread "main" external/local_jdk tat tat tat tat caused by: external/local_jdk t... 14 more info: elapsed time: 41.413s, critical path: 1.23s 4 processes: 4 remote cache hit.
failed: build did not complete successfully
create a driver that is a chrome browser.
element is a valid locator.
x, y are strings such as '10 ' and '20 ' x, file "c: python line 291, in xoffset, yoffset) file "c: python line 47, in move_to left = -left_offset + (x or 0) typeerror: unsupported operand type(s) for +: 'float ' and 'str '
this happens randomly, looks like mostly with firefox and not chrome.
capabilities are set up like this: phofcode
1. open in ie html page with ** "window.showmodaldialog" ** in javascript for this page.
2. fire event to call this function (e.g.
3. switch to modal window.
4. find any webelement and call isdisplayed() method for it.
include the gem in a project that requires a recent rubyzip and run bundle install
when i try to open microsoft edge using microsoftwebdriver with selenium jar v4.0.0-alpha-2, and passing path of where it has to save edge driver the driver doesn 't run (or selenium jar is unable to open microsoftwebdriver).
detailed steps to reproduce the behavior:
clone phofurl project and run any firefox test on windows.
lock your screen, or run on a remote pc with no active rdp session.
while the screen is locked create a driver instance of internetexplorerdriver.
the constructor will throw an exception for the timeout.
note, i have tried a number of different ie driver configuration settings as well as configurations of ie itself without anything causing different behavior.
detailed steps to reproduce the behavior:
and click on "view source".
the linked line is not related to `by`.
detailed steps to reproduce the behavior: phofcode then, opening a page with this script: phofcode
from selenium.webdriver import firefox, firefoxprofile big_prof_path = profile = driver = firefox_profile=profile) detailed steps to reproduce the behavior: the above py/ff/se hello world is not particularly important; rather, it is the large profile directory as an init input.
i cannot nail down an exact threshold for "large" (500mb seems to be enough much of the time and 1gb always is).
the failure takes quite a while and in the run up to it python process ' memory consumption balloons (e.g.
a 600mb profile dir as input results in nearly 16+gb of memory usage prior to error.
this happens without any addons.
if you just load up on cookies and browser cache that is sufficient.
enabling python logging results in ** vast ** outputs (looks like whole profile might be getting logged as base 64 or some such).
the geckolog is empty (not a shock as ff never gets going).
detailed steps to reproduce the behavior: 1. make a webdriver instance.
2. catch the web driver exception.
3. try closing the window.
create a new ie session and use the action sequence to move the mouse relative to an element.
when the script is executed in the browser, an example selenium response is: ` {"state":"success", "value":["-nan(ind)", "-nan(ind)"], "status":0} `
1. install selenium `pip install selenium` which installs the latest v1.25.3 of urllib3 2. install requests `pip install requests` run following phofcode the following error is generated: phofcode
tested on selenium + python geckodriver version: 0.24 firefox versions: 61.0.1 and 68.0.1 (assuming issue would reproduce also on versions between these 2) detailed steps to reproduce the behavior: 1. search for an input webelement of type file 2. send keys to upload file1 3. send keys to upload file2
the same scenario as in test script section below clone repository -> install dependencies -> start e2e tests
i 'm using the jenkins selenium plugin phofhyperlink that creates a selenium grid with custom capabilities implemented in their own jenkinscapabilitymatcher phofhyperlink with `jenkins:label` and `jenkins:nodename` capabilities to direct a newsession request to a specific node.
attached replication code phofhyperlink triggers the issue with a local iedriverserver.
detailed steps to reproduce the behavior: code phofimage ** output ** repro phofimage
detailed steps to reproduce the behavior: 1. search an "input[type=file]" webelement 2. use chromewebdriver with chrome installed and 76.0.0 and selenium.webdriver 3.141.0 3. use sendkeys twice on the input element to send a file (note: not two files at once but consecutively)
detailed steps to reproduce the behavior: navigate to saiglobal.com and open infostore section from the login dropdown value
list<webelement> txtbefore = detailed steps to reproduce the behavior:
run the below test script using 'dotnet test ' in visual studio code
detailed steps to reproduce the behavior: case1: 1. we open up a pop-up window with an empty field 2. we set a value in the empty field with activates the clear button in the pop-up 3. we press clear button, value entered in field is cleared but button itself remains active while it should again be disabled case2: 1. we open up a pop-up window with several items in it that can be selected 2. select check-box for one of items which makes ok button pop-up window become active 3. press ok button to confirm selection and close window.
as a result, selection is acknowledged and user is redirected to another page.
however, does not close - only ok appears as disabled.
4. as result from step 3, we repeat selection from step 2 and again press ok which this time closes window
detailed steps to reproduce the behavior: 1. search an "input[type=file]" webelement 2. use remotewebdriver with localfiledetector 3. create a two-lined string with valid paths to two separate files 3. use sendkeys() method on webelement to upload multiple files
detailed steps to reproduce the behavior: in ruby: phofcode in shell, confirm no tcp sockets are open from the ruby process: phofcode back in ruby: phofcode and back in the shell: phofcode the output will vary in format and clarity, depending on the host system.
for example, on mac os, this will produce lines like: on amazon linux, it 's more cryptic:
run the following shell commands from a linux command prompt: start selenium standalone server, configure chromedriver location, and enable chromedriver logging: java -jar & send oss-format request to start a new session, and extract the session id.
session_id=`curl -s -xpost phofurl -d | jq -r .sessionid` try to click the right mouse button: curl -xpost phofurl -d \'{"button":2} \' open the generated `chromedriver.log` file, and observe that above click command has been converted into following perform actions command, with `button` property of 0 instead of 2: "actions": [ { "actions": [ { "button": 0, "type": "pointerdown" }, { "button": 0, "type": "pointerup" } ], "id": "mouse", "parameters": { "pointertype": "mouse" }, "type": "pointer" } ]
create a single-color element, e.g.
phofcode then, use `takeelementscreenshot` to capture the element.
wait roughly 8 seconds to get the resulting base64 image.
run the test script in windows 10 in ie browser for specified versions.
past the below code as a test case in you will see that the response body is never printed.
if you will set a break point in realwebsocket:211 you will see that there is always a timeoutexception when trying to perform devtools operation inside consumer#accept() phofcode
seleniod in docker with selenoid/vnc:browser_ver ruby with selenium-driver gem ver.
it 's hard to tell you how to reproduce because the page is behind a paywall
add the following unit test in phofhyperlink phofcode
- open some page where drag and drop is recorded (drawing tool) - reduce window size (scrollbar have to be present) - execute movebyoffset action
use the attached script and sample html file to execute this line of code: phofcode ` in chrome, we get the expected output "ctrl+32".
in internet explorer, the output is just "32".
here is groovy code, which is working (returns browser logs) with chrome 71, but returns nothing with chrome 75: phofcode
run the code above at wsl ubuntu on windows phofcode
try to get log types or browser logs directly
public class testchrome{ public static void main (string[] args){ webdriver driver = new chromedriver(); driver.get(" phofurl to button that triggers cert pop-up").click(); system.out.println("this code won 't execute or any other");}}
1. start new project 2. save project 3. make any sort of edit (add echo command) 4. attempt to save
detailed steps to reproduce the behavior: 1. create selenium hub on one machine 2. create vm on another machine to run browsers in, set networking to nat, make sure to tell your virtualisation env listen selenium node port and send it vm 3. try register browser in vm selenium hub and set `-host` ip address of vm 's host machine address (this could even be changed `-registrationhost` or whatever if it is going be implemented)
run the following code + use chromedriver 75 in the same dir and have chrome 75 installed.
detailed steps to reproduce the behavior:
detailed steps to reproduce the behavior:
use the latest chrome/chromedriver >= 75, w3c is now the default mode.
detailed steps to reproduce the behavior:
detailed steps to reproduce the behavior:
:recycle: 1. start the selenium jar in standalone mode 2. provide chrome extension in the chromeoptions 3. run the test on chrome 74
detailed steps to reproduce the behavior: 1. prepare script that loggs into app, does some stuff and logout.
2. run the script for the first time 3. check result - script should log in, test sth and logout without any issues 4. re-run the same test 5. bug appears - after im already logged in
1. upgrade selenium-webdriver from 3.141.0 to 3.142.2 2. try running your examples
* go to 6pm.com * filter any product ( for example hover "accessories" and click on "oval" ) * select any input field in filters section.
f. e. `webelement searchinput = color \')]")); ` * select parent "section element `webelement parentsec = `
detailed steps to reproduce the behavior:
you can reproduce the issue by using a custom remote host in the rails application.
instantiating the driver using the persistent client: phofcode produces the error: phofcode
reach out to me for a demo of the problem, it would be easy than trying to repro.
easy route is to provision up the docker file.
location of docker file is phofurl .
git repo with source files here - phofurl run local asp.net 4.5 build out docker container using buildit.ps1 buildit.ps1 leaves you inside container cd seleniumtests # verify web server works curl phofurl -usebasicparsing # run our test phofurl boom.
consisten with chrome or ff tests inside docker.
github repo with goodies - ** repro ** tdocker build -f dockerfile -t aspnet45 .
tdocker run -d --name aspnet45run -p aspnet45 verify we are serving web pages tinvoke-webrequest -usebasicparsing connect to container with interactive ps tdocker exec -it aspnet45run powershell inside the container c make sure we can hit website tinvoke-webrequest -usebasicparsing extract out firefox, which we copy in the file tcd -ms run selenium console app, which works fine outside tcd tcd seleniumtests then i cry miserably cause i get network timeout.
same thing for chrome and ff variance on namespaces.
dockerfile # the `from` instruction specifies base image.
we are extending `microsoft/aspnet` image.
from microsoft/aspnet run mkdir seleniumtests run mkdir seleniumtests/assets # copy in the website copy /inetpub/wwwroot copy in tests copy /seleniumtests chromedriver is bundled into official nuget make sure geckodriver there selenium tests copy /seleniumtests in ff ./assets/firefox /seleniumtests/assets choco chrome takes a bit run powershell -command install-packageprovider -name chocolatey -force run powershell -command set-packagesource -name chocolatey -trusted powershell -command get-packagesource echo 'install chrome via chocolatey... ' -command install-package googlechrome -minimumversion 74 timeout error
detailed steps to reproduce the behavior:
run firefox in a docker container locally and try and instantiate a selenium driver for the remote browser with a socks proxy set, in ruby.
my code tried to set the socks proxy so i can route traffic through tor, but it is not necessary to actually run tor to reproduce this error.
detailed steps to reproduce the behavior:
run any tests multiple times over and over again on windows with js bindings.
detailed steps to reproduce the behavior:
just add above code in gebconfig.groovy while setting up firefox driver.
detailed steps to reproduce the behavior: an html document is not needed.
used intern test case: phofcode
i'm using chromedriver with default options to test saml authentication against amazon web services phofcode saml authentication works, but then the chrome instance spawned by my selenium test returns this error on the console: phofcode and aws webpage returns an error: `your request included an invalid saml response.`
given two simple html pages: `parent.html`: phofcode and `clickme.html`: phofcode detailed steps to reproduce the behavior:
detailed steps to reproduce the behavior:
we are pulling from npm and install to local and aws instance with a clean build, which mean no node_modules folder.
below is the error > selenium-standalone installation starting > > selenium install: > from: phofurl to: chrome install: from: phofurl to: firefox install: from: phofurl to: throw err; error: could not download phofurl at request.<anonymous> at emitone (events.js:116:13) at request.emit (events.js:211:7) at emitone (events.js:116:13) clientrequest.emit (events.js:211:7) [as onincoming] (_http_client.js:551:21) (_http_common.js:117:23) tlssocket.socketondata (_http_client.js:440:20) emitone (events.js:116:13)
import time from selenium import webdriver from import options options = options() # runs chrome in headless mode.
driver = url = ' phofurl driver.get(url) time.sleep(3) file = open("index.html", "w") driver.quit() code source - testing.zip phofhyperlink detailed steps to reproduce the behavior:
please use below test script to reproduce.
1.download openjdk 11.0.2 and set up environment variables.
2.make sure java environment is correctly setup by executing any java program.
3.create a new selenium maven project in windows 10 operating system.
4. add below dependency for selenium in valid maven pom.xml ` <dependency> <scope>test</scope> </dependency> ` 5. clean install the maven project.
actual selenium jars are not downloaded.
user gets below errors in console.
[error] error reading zip end header not found [error] error reading zip end header not found
here is a short html with an example to reproduce the issue: phofurl phofcode here is the code to reproduce (uses python selenium bindings) phofcode
1. create safari driver instance 2. open url 3. find an element 4. execute getlocation command
use a script and execute it on browser stack in firefox
detailed steps to reproduce the behavior:
use firefoxoptions with socks proxy configured.
detailed steps to reproduce the behavior: 1. download this solution phofhyperlink that has a simple test that tries to instantiate a chromedriver() 2. try to run testmethod1() on mac, it doesn't work and we get error _test method threw exception:
start a hub, and then have a large number (~30) of nodes connect at once to the hub.
detailed steps to reproduce the behavior: like the above says, once the hub is started, connect a large amount of nodes at same time (we started seeing it happen with around 20-30 nodes).
we've observed this behavior both in a docker stack that starts nodes all at once, and in attached script when run locally sans docker.
it happens maybe once every 20 times hub and nodes are started up.
1. download my issues repo and go to this issue dir.
phofcode 2. run the selenium containers phofcode 3. source the env vars phofcode 4. run the socks-version file or build it by yourself phofcode
detailed steps to reproduce the behavior: - fork `selenium` repo - run `./go clean test`
set the `logfile` property of the instance to a path with spaces.
to reproduce, execute any browser test that is written in ruby and powered by selenium from the cygwin console.
test should fail with phofcode detailed steps to reproduce the behavior:
import `httpclient` and try making an api request with below kind of request object which should not have a headers object phofcode
detailed steps to reproduce the behavior: create a firefoxdriver as below: `return new after running the test, and having the firefoxdriver write output to the file given above,
save as "resourcewarning.py": phofcode and run it: phofcode
type into any input field that has only a change event listener attached to it and then shift focus to another field.
run a test against a remote endpoint that has valid ssl.
detailed steps to reproduce the behavior:
run the following script phofcode run the script.
it will type 'hello ' into the search bar, pause, and then send the clear command.
the search bar will remain filled.
i'm trying to store the phone number of a customer (its not guaranteed to be there).
html is like if there is no text: <tr> <td>tel no</td> <td> <span></span> </td> </tr> command: store text target: xpath=//tr[td='tel no']/td[2]/span value: custtel this fails with the error: failed: implicit wait timed out after 30000ms i would expect this to succeed and store an empty string.
as if there is text: <tr> <td>tel no</td> <td> <span>07770 </td> </tr> command: store text target: xpath=//tr[td='tel no']/td[2]/span value: custtel this stores the value correctly.
i logged this on stack overflow and someone has confirmed this is a chrome bug as it works in kantu.
phofurl os: windows 10 browser: chrome version selenium chrome 3.4.
any command that will result in a 405 method not found error.
i did this by running an ie webdriver and directly sending requests to it.
run the "test script" below; this example seems to be reflective of the issue i 'm running into.
when prompted for input, rather the entering a string, press `ctrl+c` to send the `sigint`.
during `input` statement on my machine, this raises an `eoferror()`.
1. run grid `java -jar -role hub` 2. create session with body: phofcode
detailed steps to reproduce the behavior: 1. clone phofurl 2. perform `npm install` 3. start the docker containers using `docker-compose up` 4. run `grunt builddocker`
detailed steps to reproduce the behavior: i am trying to create a firefox profile and so downloads go to a specified folder and there is no prompt asking to specify download location, but the setting in the profile gets overriden when driver is created.below is the code snippet used.
firefoxoptions options = new firefoxoptions(); t t tfirefoxprofile firefoxprofile=new firefoxprofile(); 2); false); getdownloadpath()); false); false); false); firefoxdriver firefox = new
detailed steps to reproduce the behavior:
1. enable safaridriver phofcode 2. start selenium standalone server phofcode 3. initiate new session with "safari technology preview" phofcode
try to set up `okhttpclient.factory` with sockettimeout and readtimeout.
phofcode detailed steps to reproduce the behavior:
**detailed steps to reproduce the behavior:** image phofimage
1.have valid cookie 2.create a new driver 3.try to set the cookie
create a docker container for phantomjs: * download phofurl * `docker build --build-arg -t phantomjs198_image .` * `docker run -it -p -p phantomjs198_image /usr/local/bin/phantomjs phofurl of your selenium hub]:4444` phantomjs will fail to connect.
on my home network: hub (a macbook laptop): java -jar -role hub node (kubuntu 18.04 with docker and kvm installed): java -jar -role node -hub phofurl -port 5555 the hub output showed that the node got registered and on phofurl i could see the usual info.
running my maven command on the macbook to run a simple test failed.
in the hub output i saw "marking node as down because it can 't be reached for 2 tries" and it registered again (continually if i recall correctly).
in output i noticed that was registered with an ip different from and on command ifconfig showed me that this was ip of docker network interface.
so stopped docker disabled it (systemctl stop docker systemctl disable reboot) then restarted command.
the then registered with ip of virbr0 interface (in past had installed kvm it).
with three commands from phofurl removed that interface as well.
then could connect to grid with its normal network interface my maven command could successfully run browsers getting launched node.
i will ask for a minimal reproduction set from our devs.
please close this ticket until we provide this information, if that's your policy.
(at this point my main contribution plan was to first share the finding and the workaround that we found.)
desiredcapabilities: * native_events: default * false detailed steps to reproduce the behavior: tbd.
detailed steps to reproduce the behavior: in chrome 71 + windows 10] 1. open url- [ phofurl phofhyperlink 2. use 'clear text ' command (post
just in chrome for win10, open selenium and create a project, then click the button of saving it will pop up a window.
the save format in the lower right corner is just ".txt".
when the opened project, it will not be found.
even if you select all files and find it, will reminder "error migrating project" and "unknown file was received".
-use action click multiplr times anywhere with same object.
note: found this issue for c# selenium version only.
this behavior is reproducible with our custom webdriver server implementation (node js).
the server is configured with https and valid corporate ssl certificates.
the webdriver test runs on a development machine.
detailed steps to reproduce the behavior: given the set-up above, when launching the test: 1. the `sendrequest` function in module is first called to create a new session 2.
`response.on('data')` and `response.on('end')` for request are fired and correctly processed 3. however, right after `request.on('error')` is fired too with `e.code === econnreset` 4. a delayed re-request scheduled (using `settimeout`) this will cause that command to run twice and to create two sessions on custom webdriver server.
same applies other webdriver commands.
1. create a wayback-server with pywb 2. open a webpage from selenium with the archive 3. try to click on the "load earlier"-button via xpath
detailed steps to reproduce the behavior:
any selenium script with a generic open command such as: open(" phofurl
the same issue is described at phofurl
the code below reproduces the error exactly at the line: phofcode the stack trace shows: phofcode phofcode i attempted to roll back to bindings version 3.9 and also replaced chromeoptions with the obsolete desiredcapabilities and the error no longer displayed.
attempting to use desiredcapabilities on version 3.141.0 produced same error as before, only by rolling back, and also using desiredcapabilities did this seem to work i.e with selenium webdriver version 3.9 and: phofcode was successful, and no error was displayed
1. trigger an action which opens a new window, which is the second window.
2. switch to it and close it with selenium api.
3. try to switch back the the previous window.
this will generate a nosuchwindowexception although the window still exists on desktop.
loading an extension like: phofcode doesn't work.
see phofurl detailed steps to reproduce the behavior:
detailed steps to reproduce the behavior:
steps to reproduce the behavior: 1. go to 'shadowsocks' 2. click on 'share' icon 3. choose 'qr code' 4. app exits
quit the program(or using return to home gesture) on nex s, quit is a gesture that swipe up from the right bottom of the screen.
sometimes it is both recognized as quit by system and delete config by program.
cancel is not helping by this case.
hope there would be a way to disable this feature.
1. enable shadowsocks in transproxy mode.
2. add iptable rules: > iptables -w -t nat -n shadowsocks iptables -w -t nat -a shadowsocks -o lo -j return iptables -w -t nat -a shadowsocks -d -j return iptables -w -t nat -a shadowsocks -m owner --uid-owner $shadowsocksuid -j return -a -p udp --dport 53 -j dnat --to-destination -p tcp --dport 53 dnat --to-destination -p tcp dnat --to-destination output 3. resolve any domain by browser or dig like `dig -p 5450 qq.com` 4. resolve response is very slow.
steps to reproduce the behavior:
steps to reproduce the behavior: 1. click on 'connect' 2. click on 'tap to check connection' 3. see error
steps to reproduce the behavior: 1. set to proxy mode.
2. touch any server 3. connect to server 4. touch status bar which can test network 5. app crashes
steps to reproduce the behavior: 1. click on 'add ' 2. click on 'scan qr code ' 3. see error
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error connect to either of two private shadowsocks servers outside china while in china, one in europe, one in the us.
the connection fails with the error message "fail detect internet connection: unable resolve host "www.google.com": no address associated with..." and the rest is off screen.
the default shadowsocks server, also fails connect.
steps to reproduce the behavior: 1. go to 'go to 'the "add" button on the top right corner of the screen ' 2. click on 'scan qr code ' 3. see error
steps to reproduce the behavior: 1. go to 'the "add" button on the top right corner of the screen ' 2. click on 'scan qr code ' 3. see error
steps to reproduce the behavior: 1. go to manual settings to add my private ss server (email me if you need it to reproduce) 2. click save and start the connection.
3. click testing test https handshake 4. it will take ages then show connection failed.
(today with 4.7.4 it says internet unavailable
enable the proxy with any profile and confirm the socks5 proxy port set in settings page is accessible from another machine in the same network.
steps to reproduce the behavior: 1. open the application 2. add profile --> manual settings --> apps vpn mode 3. turn on apps vpn mode for a few apps 4. try to save the profile 5. the app will either ta.
the screen becomes fully white for a fraction of a second and go back to main menu 6. in both cases the apps vpn mode setting is not saved
steps to reproduce the behavior: 1. go to google play.
2. click on one app whatever you want.
4. it shows "download pending", app will never be downloaded.
1. import from clipboard; 2. attempt to swipe away the snackbar.
steps to reproduce the behavior: 1. connetc a server under wifi or mobile data/4g 2. switch network to mobile data/4g or wifi 3. some site maybe failed to resolve and open such as twitter, baidu.com 4. on ss-server, we can see dns packet sent to new network's dns server such as or china mobile's 5. you can switch different wifi with different dns config, and see dns packets sent the new network's server on ss-server
just create a new profile without editing anything, it shows up in other profiles' udp fallback list.
once you've enabled a plugin for the new profile, it disappears from other profiles' udp fallback list.
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. go to 'global setting ' 2. click on 'start on boot ' 3. reboot the phone 4. the vpn service did not run automatically.
steps to reproduce the behavior: 1. follow phofurl 2. start usb or wifi thther.
3. your pc won't get a ipv4 address, and ipv6 is unable to use too.
steps to reproduce the behavior: 1. click to connect.
it connects normmaly and i can visit websites via the proxy.
(not entering sleep mode) 3. suddenly, it disconnects, and i can't access twitter (in china).
steps to reproduce the behavior: 1. set the vpn route to "custom rules" 2. import a custom acl url like this phofhyperlink , so mtalk.google.com is in bypass mode.
3. close wifi, use data connection.
4. enable the vpn for google services.
5. in adb shell or termux, run `netstat -ntp|grep 5228` with root privilege, it is shown that libss-local.so is directly connected to mtalk.google.com:5228, not through ss-server.
5. wait for 20 minutes, and dial ` * # * #426# * # * ` in dialer to open gcm view, you can see the connections is teared down every 600s: `close err: fin time:600`
steps to reproduce the behavior: 1. export profiles to profiles.json 2. import profiles from profiles.json
steps to reproduce the behavior: 1. turn off dns forwarding 2. phofurl 3. showing opendns as the isp
steps to reproduce the behavior: 1. click 'connect' button (airplane icon) 2. click 'test server' 3. keep 'testing' but no packets sent or received 4. show 'internet unavailable' and 'test failed'
steps to reproduce the behavior: 1. create a profile with an apostrophe in the profile name.
2. press share and export to clipboard.
3. import from clipboard on the same device or another.
4. the profile name will be truncated after the first occurrence of an apostrophe.
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. go to 'profile config' -> 'apps vpn mode' -> turn on 'on' -> turn on 'bypass mode' -> select 'wechat' 2. click on 'back' 3. click links or figures on wechat.
4. present web pages or figures slow and the notification bar of shadowsocks indicates that there are some download link traffics via vpn.
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. open ss android 2. connect 3. click "test connection" or open browser to visit "twiiter.com" 4. try change options and again.
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. use a hostname for your server and give it an a and an aaaa record.
2. try to connect to your server using only ipv4.
steps to reproduce the behavior: 1. go to recently apps 2. click on trash bin 3. application stops
steps to reproduce the behavior: 1. turn on the dns forwarding, 2. tap connect
steps to reproduce the behavior: 1. click start button 2. show error: "you need to call create() at least once to create the si..."
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
install & open the app
steps to reproduce the behavior
fully setup shasowsocksx-ng, switch to global mode open chrome and go to www.google.com
steps to reproduce the behavior
setup a server configuration with `kcptun` as a plugin.
here is an example generated `ss-local-config.json`: { "plugin" : "plugins /kcptun", "local_address" : "server" : "
steps to reproduce the behavior
steps to reproduce the behavior
steps to reproduce the behavior
1. run 'sqlmap -r /tmp/login_page --ignore-code 401' 2. use marker (inside json post data): yes 3. parse json post data : yes
1. run 'python3 sqlmap.py >>url and usage codes' 2. see error >> unable to connect to url
1. run `sqlmap -v 6 -u 2. see that sqlmap does not send `cookie` header and server repeatedly sends `set-cookie`
1. page `first` has a form to inject but the second order result can be observed in `second`.
2. run `python sqlmap.py --second-url second --forms -u first` 3. see error as sqlmap decides there are no forms in `second` or it uses the wrong forms (from `second`).
1. run `sqlmap tamper=base64encode --proxy= phofurl -r sql1 --fingerprint` 2. no error message but tamper script does not run
sqlmap -u http://... --cookie --data "..." --csrf-token "rid" --csrf-url " phofurl --method post -v 7
phofcode output: phofcode without the `--no-cast` option sqlmap can 't retrieve the tables.
with the `--no-cast` option sqlmap can retrieve the tables but not columns.
last payload: phofcode we can see that even though i 'm passing `--no-cast` option there is still some casting happenning.
stack trace from application: phofcode vulnerable source code: source: phofurl
running through tor, i get this issue phofcode
as you can see the cookie has the "*" more than one, and sql map removes it put /rest/ui/workspace http/1.1 host: localhost user-agent: mozilla/5.0 (x11; ubuntu; linux x86_64; rv:68.0) firefox/68.0 accept: * / * accept-language: en-us,en;q=0.5 accept-encoding: gzip, deflate referer: phofurl x-requested-with: xmlhttprequest content-type: application/json; charset=utf-8 application: alarmsearch content-length: 303 connection: close cookie: * 6qhe * command run: ./sqlmap.py -r /home/rename-workspace --headers="user-agent: mozilla/5.0 (x11; ubuntu; linux i686; rv:25.0) firefox/25.0" -vv --proxy phofurl variable to be replaced using injection point is ttttteeessstttt*
/opt/sqlmap/sqlmap.py -u " phofurl --passwords
1. run 'python sqlmap.py -u " phofurl --risk 1 ' 2. see the use date in the database
1. run `sqlmap -u < phofurl --batch --random-agent --level=3 risk=3` 2. all ok 3. run `sqlmap -r <request file> --batch --random-agent --level=3 risk=3` where < request file > is phofcode 4. error `[critical] connection timed out to the target url.
sqlmap is going to retry the request(s)`
1. open blocks app 2. choose a block item 3. share stack dump by menu 4. app crashed
1. install `jq-1.6` 2. pipe in some data and apply a `test` that evaluates to `true`: print " "bar "" | jq \'test("bar") \' [1] 20397 done print " "bar "" | 20398 segmentation fault jq \'test("bar") \'
this shows the 0a in the wrong location: echo "{ "longstring ": | jq -r .longstring | hexdump | tail -2 5f5f 5f5f 5f5f 5f5f 0a5f this is one character shorter and shows an 0a at an expected location (the end) echo "{ "longstring ": | jq -r .longstring hexdump tail -2 000a notice the `0a` is misplaced in the first example.
this causes a lot of problems with data that needs to be decoded like base64 etc.
phofcode produces a long message and file jq.exe.stackdump.excpect message: `expecting an object, encountered a list with filter: .k` phofcode produces a long message and file jq.exe.stackdump.expect message: `expecting an object, encountered a string with filter: .id`
install a vanilla fedora 30 distribution.
install `jq` from fedora repositories: `dnf install jq`.
display a json document with a `null` value in it.
see how the `null` value text is barely visible (dark on dark background).
phofcode and phofcode will both output phofcode but if i omit the last meaningless `[[0]]` or `[[""]]`, then it does not work phofcode will output nothing.
phofcode result: phofcode but when convert it back to json, it will lose the first property "status"!
phofcode result phofcode if i insert something ahead, then it works result:
create image with jq start docker container which run script which use jq ${curlbin} ${curlopts}x get |jq reports error: jq - commandline json processor [version 1.5] usage: jq [options] <jq filter> [file...] (23) failed writing body
phofurl input phofcode jq phofcode output phofcode the value of `$array_length` is `1`, instead of the expected `4`
using the example from the wiki... phofcode `date` reports, correctly, `cest` as the timezone taking dst into account.
provide a minimal test case to reproduce the behavior.
if the input is large, either attach it as a file, or create a gist phofhyperlink and link to it here.
1. download a windows nightly.
`jq -n \'"test" | halt_error(1) '` phofcode
echo '{} ' | jq input_filename "<stdin>" jq -n '{} | input_filename ' null
$ ansible myhost -o -m raw -u mylogin -a "ls -ll /var/www/db-backups" | jq -c error displayed: parse error: invalid numeric literal at line 1, column 18
this should raise a "normal error", instead it returns null.
phofcode exact same code except with halt_error instead of error raises halt_error.
go to appveyor and look at the test logs.
these contain lines like this phofcode phofurl (text log) phofurl (test page)
$ catalyst-cli zane$ cat package.json | jq -e echo $?
null 1 but $ cat package.json | jq -e | @sh '; echo $?
invoke jq with no arguments in a mintty terminal.
1. run `git tag --list --sort authordate` and note the list of tags.
you can confirm that the one at the bottom is most recent with `git log` command, e.g., `git log 1.6rc2` 1. build project.
1. run `./jq --version`, and note that it doesn 't match most recent tag.
another method is: clone project.
run `git tag --list --sort authordate` and get most recent tag.
check it out with checkout <tag>`, e.g., checkout 1.6rc2` now run describe --tags --match 'jq-* '`, which is what is used by script that updates `version.h`.
you will probably see instead of `1.6rc2`.
generate a non-english locale, export the appropriate variables and run the commands above.
./jq -cn <img width="685" alt="not-all-red" src=" phofurl
the following produces a syntax error: phofcode phofcode but it works if you omit the square brackets: phofcode
using this to change text: see above
in my example, i am pulling data from a child object, into the parent object.
this works just fine for the 'a.match.c ' case below, but fails for 'a.inner.match.b '.
possibly a documentation issue (in that case, how do i recursively match?
), a bug or is my code pulling into an object that gets removed?
code: phofcode input: phofcode output: the a.match.c is brought out to a.c but a.inner.match.b is not brought out into a.inner.b.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
1. create an addon like this : phofcode 2. add it into a react-native storybook.
3. watch it crash : '(
steps to reproduce the behavior: 1. install storybook into an existing angular 8 project - with multiple apps and libraries (upon which the apps depend).
both apps and libraries contain components that i would like to use with storybook.
install is via the` npx -p @storybook/cli sb init --type angular` command.
2. call `npm run storybook`.
steps to reproduce the behavior: 1. have a markdown title in a mdx doc file 2. the title has a position relative
steps to reproduce the behavior: 1. create a new `@storyboard/html` project via `npx -p @storybook/cli sb init -h html` 2. add latest as a dev dependency 3. add trivial css resources similarly as described here: phofurl 4. run `npm run storybook` and observe that the css resources tab is empty.
5. intentionally create a webpack build error by modifying incorrectly.
6. fix the webpack build error.
7. browser will automatically refresh with the css resources tab displaying proper css resources which can be activated and deactivated successfully.
8. refresh browser manually and observe that resources tab is empty once again.
if you wish, you may clone project that i re-created issue above in here: phofurl
steps to reproduce the behavior: 1. clone repo phofurl 2. run `yarn install` 3. run `yarn storybook` and you'll see the issue.
4. run `yarn dev` and you'll see it working correctly.
the repo was setup by simply running `yarn create next-app` adding storybook and creating a basic button component.
steps to reproduce the behavior: 1. follow guide linked to above.
i did the following: add storyshots, install require-contex macro as recommended, installed react-test-renderer, added the storyshots.test.js to initstoryshots(); 2. run: npm run test 3. see error
setup storybook with addon-docs with a different framework (e.g.
use the "docgen/types" story in cra-ts-kichen-sink.
the prop `arrayofstring` should be listed if it works
1. place a component that has hidden absolute positioned element by default 2. make them appear (onclick, onhover)
steps to reproduce the behavior: 1. start cra-ts-kitchen-sink 2. go to the docgen/types docs story 3. find a prop that have jsdoc and no description
1. using storybook 5.2.6 - 5.3.0-beta.3 with typescript 3.5.3 and react 16.9.0 installing the @storybooks/addons-docs.
2. create a component in typescript using material-ui withstyles hoc.
3. add a component story with addparameters for the component
steps to reproduce the behavior: 1. upgrade to storybook 5.2.6 2. try and `import initstoryshots from in ts
if you change to have a destructuring on props, the props extraction process will fail, e.g.
[3] and then check the story there would be no props available for the component.
steps to reproduce the behavior: view any components with react-router-dom
steps to reproduce the behavior: 1. create a very simple story of a component with knobs + actions 2. trigger an action : an event is emitted one time (good) 3. modify multiple knobs values 4. trigger the same action : an event is emitted multiple times (bad)
1. use the recipe above or try with sample files listed below.
2. run `npm run storybook` 3. see the story 's canvas or doc
steps to reproduce the behavior: 1.
`start-storybook -p 3000` with `storybook-html` 2. open internet explorer 11 3. see that storybook is stuck in the loading state.
1. add number knob 2. open console 3. remove the value from number knob
* create configuration * create stories * start storybook * dont see any codesnipped in docs tab -> all other things (props, preview) working fine.
phofurl steps to reproduce the behavior: 1. create a story in a tsx file.
2. type a generic jsx element.
3. open storybook and see the error.
steps to reproduce the behavior: 1. visit storybook locally 2. change device type in chrome dev tools to mobile 3. reload the page 4. see error
steps to reproduce the behavior: setup the following scenario:
steps to reproduce the behavior: 1. create a documentation only mdx page with enough content that it runs off the screen 2. open the rendered page to the docs tab
steps to reproduce the behavior: 1. add a union type in a prop, and make it optional 2. view the props table (`<props of={xxx}/>`) 3. see that the type is `any`
steps to reproduce the behavior: 1. i followed the most basic writing addon instructions found here phofhyperlink , to create a panel addon.
2. all i want the addon to do is render an iframe - doesn 't matter what url src it has.
3. open the dev tools 4. see error
steps to reproduce the behavior: 1. got to a story that has stories before and after 2. reload the page (f5) 3. hit alt+right arrow once, it works 4. hit now alt+left arrow, it doesn't work, this is the issue 5. but if you now click on the canvas to give it focus, alt+left arrow will work as expected
steps to reproduce the behavior: 1. go to phofurl 2. click on show code 3. notice the blue background on tags, and the missing text
steps to reproduce the behavior: 1. setup a storybook with `addons-actions` and `addons-docs`.
2. create a story with `mdx` format.
3. try to use `addon-actions` in the story.
for example: phofcode 4. when the button is clicked, the action is not logged.
go to story using colorpalette go to canvas tab see error
steps to reproduce the behavior: make sure you have a clean local install, run `build-storybook
steps to reproduce the behavior: 1. go to my github phofhyperlink 2. clone repo 3. run npm run storybook 4. alternatively run npm run jest
steps to reproduce the behavior: 1. create a tsx files with two named export components and configure a prop with default value for each of them.
that prop must have the same name for both of them but different accepted values.
2. create a mdx story.
3. import one or both (it doesn't matter) components and render their props.
4. change the order of the components (in tsx file).
5. see how default value changes to value of last component.
steps to reproduce the behavior: 1. install the latest version of docs following these instructions phofhyperlink - currently installs `"5.3.0-alpha.40"` 2. rebuild / reload storybook
steps to reproduce the behavior: 1. enable fast refresh 2. modify story code 3. error pops up
upgrade `@storybook/addon-docs` from `5.3.0-alpha.33` to `5.3.0-alpha.39`.
view the "docgen/types" story of cra-ts-kitchen-sink
steps to reproduce the behavior: 1. make sure story source is enabled 2. build a story in mdx 3. make sure the story contains vanilla elements in some way.
created a story with preact, and jsx pragma at the top of the file with the stories.
steps to reproduce the behavior: 1. go to a story using addon-actions 2. click on a button that triggers an action 4. see error in console 5. see no action message logged
steps to reproduce the behavior: 1. create a functional vue component (by adding functional keyword) 2. notice that by adding the functional keyword, the component would not render correctly.
proptypes will be _invisible_ in this case.
try to apply this viewport confirm to a csf story: phofcode
i set up a basic repo with the issue.
if the webpack file is empty scss can be imported without errors.
phofcode --- .storybook/config.js phofcode --- storyshots.test.js phofcode ---- jest.config.js phofcode --- package.json --- webpack.config.js
steps to reproduce the behavior: 1. install the storybook addon notes 2. create a note with an embedded giphy 3. look at the resulting gif and realise that it is always the same one, even if 'gif' property is update (don't forget to reload storybook after updating property!).
4. open browser debugging window on network tab, reload story and notice that 'search' request has an 'undefined' value as 'q' parameter of request.
1. define `:host { background: red }` styling in an angular component 2. go to storybook 3. component does * not * have a red background as host styling is not applied.
steps to reproduce the behavior: 1. add a string knob to any component 2. see it render on the storybook 3. change the value 4. see it update.
the console will say something about `storybookjs/knobs/set` 5. change the value again 6. assert there has been no change/rerender.
the console will say something about for each subsequent change
use this repo: phofurl or create fresh react native repo via: phofcode
steps to reproduce the behavior: 1. go to ' phofurl in a narrow width browser.
2. click on the tests panel.
3. scroll down to see the tests panel.
4. see the total number of tests and total time covering up "todo" text.
steps to reproduce the behavior: 1. setup storybook 2. create a story, use `@storybook/html` 3. add a script tag, like `<script world!
')</script>` 4. open storybook in your browser, and see no alert.
5. the script in the source, but it won't execute.
using these package versions: - `@storybook/react@5.2.5` - 1. add this into an mdx file phofcode 2. see error in the rendered preview
steps to reproduce the behavior: 1. clone phofurl 2.
`yarn start-storybook -c 4. see an error phofcode 5. uncomment in webpack.config.js phofhyperlink 6.
`yarn start-storybook -c 7. storybook started
steps to reproduce the behavior: 1. clone repo 2. type phofcode
steps to reproduce the behavior: 1. regular webpack config `module.exports = (env) => { // use env.variable here, which was passed in to webpack as --env.variable=somevalue };` 2. storybook webpack config although allows to return a function, but that function gets called with the baseconfig as the first argument.
steps to reproduce the behavior: 1. follow the steps in writing addons phofhyperlink up-to and including "using the complex addon" 2. run `yarn add @storybook/api -d` 3. add the line `import { useaddonstate } from '@storybook/api '` to index.js file of custom addon 4. add line `const [state, setstate] = 'test string ')` into wrapper function 5. run storybook, inside story area there should be error "cannot read property 'getaddonstate ' of undefined"
use the following in a `stories.js` file; phofcode and then put this in the `mdx` file.
phofcode you 'll get `no code available`.
steps to reproduce the behavior: 1. create a mdx file 2. paste code from code snippet 3. no classes are applied to the dom elements
steps to reproduce the behavior: 1. in your component file, add import jsx from @emotion/core and use it 2. add comment in your file, so it will be shown as description in the docspage
steps to reproduce the behavior: 1 clone the repo to some directory phofurl 2 go to the directory 3 install the deps 4 run storybook `npm run storybook` 5 wait unitl browser is opened 6 go to `component.component.ts` , you can see `console.log` in constructor 7 go back browser and check console & story
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: here is the link to my repo that has the issue phofurl 1. build the ui package 2.
`npm link` it to a cra app + typescript + storybook 3. from cra app.
steps to reproduce the behavior: 1. clone phofurl 2. yarn install 3. yarn start-storybook 4. see an error 5. remove empty row in template phofurl 6. no error 7. add ` ` at empty row 8. no error
steps to reproduce the behavior: 1. have a long page with multiple stories 2. switch to the "docs" tabs 3. click on multiple links in the stories nav menu 4. see error
i output my theme in the console, using console.log to see it is clearly visible?
(see below image) my app is wrapped in my theme object at a top level in config.js like so... this subsequently breaks my view because i loop over the keys in some story file and it cant find the key i 'm looking for as what i 'm matching it to does not exist because "parameters \' is not something i recognise it has been injected.
so to fix i have to do something like: phofcode then map on resticons instead remove parameters.
below is my config where i wrap the stories theme.
steps to reproduce the behavior: 1. run storybook `yarn storybook` 2. check each story
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. turn on storybook server with react native.
1. fork phofurl 2. run `yarn install && yarn storybook`
steps to reproduce the behavior: 1. install 2. run storybook on simulator 3. see error
steps to reproduce the behavior: 1. add the below config in `webpack.config.js` for tailwind: phofcode 2. add a `postcss.config.js` config in your storybook folder: phofcode 3. compile and it works including @apply tags in components 4. delete the `webpack.config.js` and add two files `presets.js` and `my-presets.js` 5. add this under `presets.js` phofcode 6. add this under `my-preset.js` and compile - it breaks!
phofcode 7. some advised this config instead still breaks 8. some advised on ordering of plugins tried different combination still doesn 't work every time its the same error as shown below: > i import tailwind.css in a central place at `./.storybook/config.js `
create a component like this: js export default class test extends react.component { static proptypes = { /
steps to reproduce the behavior: 1. create a react context on a ts or a js file.
2. import that context and pass it through a decorator, with an updated value.
3. try to use the context object via hooks (usecontext) 4. on ts files it will give an error, on js files it will not get the updated value from the decorator.
steps to reproduce the behavior: 1. clone the following repository: phofurl 2. checkout the following branch: 3. install the dependencies 4. start storybook.
5. click on button, and then navigate to docs.
6. here in props table, we expect to see other information too like prop type and description.
steps to reproduce the behavior: 1. go to phofurl 1. type `storybook & knobs` in name text knob, 1. click 'copy' 1. result url is ` phofurl & knobs&knob-age=44`.
the url is broken, because the `& knobs` part becomes a separate query param.
steps to reproduce the behavior: 1. clone the repository.
here 's a new story in a cra-kitchen-sink fork phofhyperlink that demonstrates the issue.
steps to reproduce the behavior: 1. create e basic react native app 2. configure storybook for react native 3. install `npm i 4. include `<lineargradient>` in the app rendering 5. launch storybook-web `npm run storybook-web`
steps to reproduce the behavior: 1.
`yarn storybook` or `yarn storybook --debug-webpack`
steps to reproduce the behavior: 1. launch storybook 2. no addons panel is visible on the side or bottom
steps to reproduce the behavior: 1. read the docs at phofhyperlink
this is specified in phofurl
steps to reproduce the behavior: 1. clone repo phofurl 2. npm run storybook 3. go to "as-dynamic-variables" 4. change knobs
steps to reproduce the behavior: 1. click on 'docs' tab for a component story 2. see error
steps to reproduce the behavior: 1. create a fresh react native project.
2. setup storybook as reference here, phofurl `npx -p @storybook/cli sb init --type react_native` (no server) 3. add the code snippet reference below and youll see initially you can call `tostring` on but after importing storybook (you have to use `require` in this instance, not `import`, so the ordering works for the test to see that `finally` starts off being an actual function) its no undefined.
steps to reproduce the behavior (ready repro): 1 clone the repro: `git clone (or use https link: phofurl 2 go to the created directory: `cd 3 install the dependencies: `yarn` 4 start storybook: `yarn run storybook` 5 open browser console steps to reproduce on clear example: preconditions: stable @angular/cli is installed (8.3.8 at moment, `npm i -g @angular/storybook`) globally and you have also `@storybook/angular` installed (`npm i -g @storybook/cli`).
1 execute `ng new <your-name> --defaults --enable-ivy` (or without defaults, just put default values, when `ng` will ask you to interact) 2 execute `cd <your-name>` command 3 execute `sb init` 4 execute command (this is required by angular get ivy working and probably this step can produce problem) 5 go and put following code: phofcode 6 run npm run task `yarn run storybook` or `npm run storybook` 7 open browser console
steps to reproduce the behavior: 1. have a storybook command in your package.json like start-storybook -p 6006"` 2. run `npm run storybook` 3. the config in the file has not been loaded
steps to reproduce the behavior: 1. go to story that throws an error containing `<example>` text.
(or create such story) 2. see error -- `<example>` string is missing, but it's present as html element in the dom.
here is a very simple repo where you can reproduce it: phofurl the strong text in `dumbcomponent` is reseted.
this is what i want.
but the strong text in the description of the component is also reseted and i don't want to loose all the docspage formatting.
in my config file: phofcode i 'm setting the overrules as per this documentation phofhyperlink .
it clearly says "overrides styles of addon.
the object should follow this shape", which is what i did.
after restarting storybook, the markdown styles are still the same (i.e.
too huge and not in line with the other headers like "story source").
i can prove that decorator works, by setting `header` to `true` and seeing header appear after a restart, so that tells me all scaffolding works and is not relevant to post here.
steps to reproduce the behavior: 1. add select knob of numbers to story 2. go to story 3. click `copy` button to copy url for all knobs 4. paste in new window 5. notice the resolved value of the select is a _
1. create a `mdx` story with `addon-knobs`.
2. observe that any created story ends up having the addon-knobs function call instead of the value the functions return.
use reproduction repository repository phofhyperlink .
error happens during the build process when using `import { withinfo } from the error is also evident in the ide with eslint, which resolves the path to a directory under appdata, whereas most of the other addons are shown to resolve to a directory under project.
image phofimage image phofimage the ` directory
please follow the manual setup to create a new project.
steps to reproduce the behavior: 1. run `npx -p @storybook/cli@next sb migrate storiesof-to-csf --glob "
steps to reproduce the behavior: 1. set up my minimal stories: phofcode 2. click a button knob, see increment/decrement by 1 3. keeping storybook running, change a source file, see it hot reload 2. click a button knob, see increment/decrement by 2 2. repeat for more extra callbacks added with each hot reload
steps to reproduce the behavior: 1. customize materialui `button` component using `makestyles`.
2. host the app using storybook.
3. you will find that your styles are ignored by the browser.
clone this repo and follow readme: phofurl
steps to reproduce the behavior: 1. go to phofurl 2. see error of not found
steps to reproduce the behavior: 1. repro is here at phofurl 2. load storybook 3. go to the icon cheatsheet story 4. notice that it scrolls to the bottom
upgrading a working react 15.x storybook, on version 5.1.x to 5.2.x - `npx npm-check-updates '/storybook/' -u && npm i` phofcode - `npm start` to get storybook running it fails to load and errors out in console.
steps to reproduce the behavior: 1. create a component based on styledcomponent 2. launch storybook
steps to reproduce the behavior: 1. run storybook locally.
2. follow an example like that one: phofurl 3. inspect the request.
currently it shows `304 not modified` for assets.
steps to reproduce the behavior: 1. upgrade all packages to 5.2 2. change `configure` to not receive loadstories, but true, /.stories.js$/);` 3. run image snapshot test `export app_env=test && yarn docs:build && node_env=test jest
steps to reproduce the behavior: 1. create boilerplate: `yarn create nuxt-app <project-name>` 2. upgrade to nuxt 2.9.2: `yarn add nuxt@2.9.2` 3. install @storybook/vue `yarn add @storybook/vue@5.2.1` 4. install additional packages: `yarn add babel-preset-vue --dev` 6. create config file: phofurl 7. create `stories` folder in project 8. add `"scripts": {...,"storybook": "start-storybook"}` to package.json 9. start nuxt in dev: run dev` 10. see error
steps to reproduce the behavior: 1. create a story with an ugly comment on top 2. add the ugly comment to `uglycommentsregex` in the custom webpack config 3. launch storybook and go to the story addon panel 4. see gray highlight indicating selected story shifted down
using a project with storybook using storybook/addon-info start the project using yarn storybook navigate to the storybook served page in ie11 and see an error in the console
steps to reproduce the behavior: 1. go to phofurl 2. click on "our storybook"
steps to reproduce the behavior: 1. create a fresh react native app using `npx react-native init fooapp` 2. install storybook for react-native per the official documentation w/ the knobs and actions addons (not sure if those are required to trigger the bug) 3. launch storybook app 4. observe yellowbox errors and ui bug where addons panel renders on top of preview viewport.
steps to reproduce the behavior: 1. create a react app with cra with the typescript option 2. follow the documentation from the link above to install typescript
steps to reproduce the behavior: 1. configure storybook with a dark theme 2. click on 'about storybook' in the top-left dropdown
steps to reproduce the behavior: navigate to live docs page (tested in chrome + firefox) on osx phofurl the contents disappear and the above error is in the console
use the recommended config in `.storybook/config.ts`: phofcode create two story files: phofcode phofcode with the default config, you will only see the story created with `storiesof`.
steps to reproduce the behavior: 1. open a story in storybook 2. add the url parameter `full=1` 3. observe: story is displayed in fullscreen mode 4. in config.ts, add the following: phofcode 5. open a story in storybook 6. add the url parameter `full=1` 7. observe: story is
phofurl go to the button and toggle the "disabled" knob on and off.
our design system is thankfully open source, so you can try this out locally too: phofurl clone the above repo, and run `yarn && yarn build:full && yarn storybook` to install all dependencies and run storybook, try to disable that button, same as on that url above.
now i did a bisect on this, was able to nail down the commit that introduces this bug: which is storybook upgrade release candidate 5.2.0 (note: updating 5.2.1 does not fix this either) so if you go commit prior: `yarn install --force`, you 'll notice that everything fixes itself.
i believe this is pretty much a smoking gun (to be fair, maybe i 'm doing something isn 't supported in newer versions of storybook too).
steps to reproduce the behavior: 1. create a component 2. add docstring 3. the docs tab does not show what i wrote in docstring
steps to reproduce the behavior: 1. build storybook with `--docs` 2. load storybook 4. see canvas tab is loaded
steps to reproduce the behavior: 1. create a component with proptypes 2. add stories for it.
3. when viewing it locally it works fine 4. after running `yarn build-storybook` and viewing the static app, the props section has the above issues
steps to reproduce the behavior: add a mdx story file, try to create tags with the {} syntax in them.
those props are totally ignored
1. upgrade from storybook `5.0.11` (both short or manual path) 2. stories load fine, without error 3. click docs tab for error
steps to reproduce the behavior: 1. have a react component with a decorator 2. view the story in storybook 3. click on the docs tab 4. see no description for component or proptypes 5. remove decorator.
6. see descriptions in storybook docs tab.
steps to reproduce the behavior: 1. clone phofurl 2.
have an "enum type" (an 'or ' separated list of strings) in flow, note that the description doesn 't show up as the possible options described in the flow types
steps to reproduce the behavior: npm update
steps to reproduce the behavior: phofcode but this will work: phofcode
steps to reproduce the behavior: 1. compose story 2. start storybook 3. go to docs tab
steps to reproduce the behavior: 1. create an application using @vue/cli 1. initalize storybook with 1. add `@storybook/addon-docs` -> `yarn add --dev` 1. register addon in `addons.js` register `addon-docs` presets in `presets.js` adjust config.js to load `mdx` files add simple mdx file: phofcode 7. start storybook 8. click on `addon|docs/test` story and go to `docs` tab 9. see the error
steps to reproduce the behavior: 1. configure storybook to use the dark theme.
2. create a story using mdx and use backticks to create a code tag - `for example` 3. view story
steps to reproduce the behavior: 1. add a new file `button.stories.js` 2. add a storydescription to the first story (see code snippets below for an example) 3. take a look at this in storybook in the "docs" view
steps to reproduce the behavior: 1. create a story with only disabled buttons.
2. observe the a11y addon not recognizing violations with buttons that clearly contain violations
steps to reproduce the behavior: 1. using the provided code snippet, launch storybook app and navigate to the module "part" 2. the listed modules only display "g clef, c# major, common time"
steps to reproduce the behavior: `git clone `git checkout chores-storybook-5.2` `yarn start` go to this file and change the default export to the one annotated with "fails": phofurl the proxied object i use to create the title strings can be found here: phofurl
steps to reproduce the behavior: 1. clone 2. go to ui folder.
3. build story book with phofcode 4. make change in any ui component.
6. redo from step 4 until it crashes.
run `storiesof-to-csf` codemod on code like this: phofcode
steps to reproduce the behavior: 1. create a `component.stories.mdx` file 2. output a <story /></preview></story> 3. go to docspage for that component 4. click "code" button to bring up code preview 5. see wrong indentation for code preview
this occurs when using the notes addon if the story's notes contains `<hr>` or `---` in markdown.
this likely also occurs anywhere else documentwrapping or documentformatter is used.
steps to reproduce the behavior: 1. create a new story.
set its name to "te" + "st", like so: `storiesof("te" + "st")`.
minimal example: phofcode 3. open the story in "canvas" view.
notice how nothing gets highlighted in the source code.
4. open the story in "docs" view.
notice how it will say "no code available".
uncomment the commented lines in this code snippet: phofcode
steps to reproduce the behavior: 1. go to 'story ' 2. click on 'refresh ' 3. see error no preview
steps to reproduce the behavior: 1. setup a new empty cra project with storybook.
2. install dependencies using pnpm install 3. run pnpm run build-storybook 4. see error
steps to reproduce the behavior: 1. load a context-driven story.
2. change contexts - note the component does not change.
3. change stories - note the story reflects the new context.
4. change to original component - previous story is now correct.
steps to reproduce the behavior: 1. refresh the storybook browser window.
2. load a story that does not use the context add-on - note the toolbar icon is missing.
3. load a story that uses add-on - note toolbar icon is loaded.
4. load a story that does not - toolbar icon persists.
5. reload browser - toolbar icon is missing.
1. npm install ionic@3.0.0 2. ionic start myapp tabs --type=ionic-angular 3. cd myapp 4. npx -p @storybook/cli sb init 5. npm i html-webpack-plugin 6.
//edit .storybook/tsconfig.json with manual version 7. npm i -d @angular-devkit/core
1. npm install ionic@3.0.0 2. ionic start myapp tabs --type=ionic-angular 2.bis cd myapp 3. npx -p @storybook/cli sb init
steps to reproduce the behavior: 1. create a div with `position: fixed` 2. display it on the docs-page
steps to reproduce the behavior: 1. clone the repository on your local machine.
2. run the `yarn bootstrap` command from the root folder.
3. select first and default option.
4. see error below: [5/5] building fresh packages... error command failed.
exit code: 1 command: node-gyp rebuild arguments: directory: output: gyp info it worked if it ends with ok gyp info using node-gyp@4.0.0 gyp info using node@12.9.1 | darwin | x64 gyp info spawn /usr/bin/python spawn args [ spawn args spawn args 'binding.gyp ', args '-f ', 'make ', '-i ', '-i ', '-i ', '-dnode_engine=v8 ', '--depth=.
', '--no-parallel ', 'build ', '-goutput_dir=. '
] make [ 'buildtype=release ', '-c ', 'build ' ] cxx(target) error: too few arguments to function call, expected 4, have 3; did you mean 'nan::call '?
1, argv); ~~~ nan::call note: 'nan::call ' declared here inline maybelocal<v8::value> call( error: too few arguments to function call, single argument 'context ' was not specified local<object> proxy = note: 'newinstance ' declared here v8_warn_unused_result maybelocal<object> context); note: expanded from macro #define v8_warn_unused_result error: no member named 'isneardeath ' in > ' local<boolean> rtn = ~~~~~~~~~~~~ 3 errors generated.
steps to reproduce the behavior: 1. run `npx create-react-app && `cd 2. run `npx -p @storybook/cli sb init` 3. create a component in `./src`: phofcode 4. import the component into `stories/index.js` and add the `action`: phofcode 5. run `npm run storybook`
steps to reproduce the behavior: clone this repo phofhyperlink and try `yarn install` then `yarn storybook`.
steps to reproduce the behavior: 1. install storybook by`npx -p @storybook/cli sb init --type react_native` 2. go to project root and prompt `react-native run-ios` 3. rebuild bundle with packager by refresh app 4.
`npm run storybook` 5. prompt `localhost:7007` on the browser url bar
steps to reproduce the behavior: 1. create note
1. check out this commit phofhyperlink 2. start storybook 3. note source never loads
steps to reproduce the behavior: 1. create a project using the vue cli 2. integrate storyshots 3. create a storyshots.test.js file with the contents: phofcode 4. expected the snapshot file to include shallow components 5. actual snapshot includes deep components * note * confirmed by passing a renderer that throws an error e.g.
steps to reproduce the behavior: 1.
`yarn add @storybook/ui@5.2.0-rc.0 --save` 2.
1. phofurl and try all the stories of this component - they work fine 2. click on 'docs' 3. phofurl 4. the error above is on dev mode, in production it will show `inified react error #321; visit phofurl for the full message or use the non-minified dev environment for full errors and additional helpful warnings.
steps to reproduce the behavior: 1. create a new react-native project with `react-native init awesomeproject --version react-native@next` 2. install storybook, and save/update a story 3. see warning, no refresh
i set up a demo repo phofhyperlink and documented my methodology phofhyperlink .
steps to reproduce the behavior: inside a gatsby project run `yarn storybook` - as i 'm creating a theme in a workspace for me this is actually `yarn workspace gatsby-theme storybook`.
this produces the following error, which is unclear that it is the scss files causing the error - i 've found issue through fairly thorough testing and debugging.
phofcode if in my component i remove scss file import, this then works.
so it is specifically scss or css compilers causing issue.
steps to reproduce the behavior: 1.
`npx -p @storybook/cli@next sb init` 3. in use `appcomponent` instead of `welcome` as the `component` 4. launch storybook.
steps to reproduce the behavior: 1.
`react-native run-ios --scheme 'storybook '` (start simulator and set storybook env) 2.
`start-storybook` 3. see initial story in app, all good.
4. go to ` phofurl 5. change story 6. app is blank (there might be a small flicker of the story changed to)
steps to reproduce the behavior: 1. create two stories, each with a canvas animation keeping the fps under 60 2. load storybook and switch between the two stories 3. observe the fps dropping more and more as each switch happens.
it drops under value that you'd see for any story after a hard refresh.
steps to reproduce the behavior: 1. clone the repo ` phofurl 2. cd into the folder 3. change branch `git checkout 4. run `npm run storybook` 5. in another terminal run `npm start` 6. in another terminal run `react-native run-android` 7. stories are visible in emulator put not on browser
steps to reproduce the behavior: 1. clone this repo phofhyperlink .
1. install dependencies with `yarn` 1. run `yarn storybook`
steps to reproduce the behavior: 1. clone phofurl 2. run `npm ci` and `npm start` 3. open storybook in a browser 4. see error in console
steps to reproduce the behavior: 1. import addparameters into your story
steps to reproduce the behavior: 1. follow the steps to setup docs for angular found here: phofurl 2. go to a story 3. click on docs tab 4. view component preview 5. go to different component story 6. see that the preview doesnt change but the markdown does
1. create a story with the js before the story is returned: phofcode or more complex example using a mutation observer: phofcode
try to build the same dom model to reproduce through storybook.
where you shall have both independent svg `defs` and the main `svg` icon nodes.
steps to reproduce the behavior: 1. log a single value 2. see an array being logged
because the function is not properly serialized to json by telejson, and `addon-knobs` serialized the props to the json.
steps to reproduce the behavior: 1.
`npx @angular/cli new sb-example` 2.
steps to reproduce the behavior: 1. create skipped test and todos 2.
(re-)generate json results as usual: `jest test` lists skipped tests and todo separately in its summary.
3. look at the "tests" panel
steps to reproduce the behavior: 1. fork: phofurl 2. run `yarn storybook`
steps to reproduce the behavior: 1. install and run sb with the basic example
steps to reproduce the behavior: 1. create an expo init project 2. follow steps from phofurl (export conditionally in app.js as the guide suggests) 3. run yarn storybook in one terminal tab and yarn ios in another (use ios simulator from xcode) 4. try changing story in the web storybook - it does not update the story shown web page, only one simulator
steps to reproduce the behavior: 1. npm install -g @angular/cli 2. ng new my-dream-app 3. cd my-dream-app 4. npx -p @storybook/cli sb init --type angular 5. npm run storybook 6. open any story
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1.npx -p @storybook/cli sb init --type react_native 2. storybook/rn-addons.js import import 3. npm i @storybook/addon-knobs npm i 4. run app 5.see error
steps to reproduce the behavior: <details> <summary>(1) launch storybook</summary> 1. clone storybook phofcode 2. install dependencies phofcode 3. bootstrap core phofcode 4. launch sample storybook phofcode </details> <details> <summary>(2) observe error</summary> 1. open ie11 2. navigate to endpoint 3. press [f12] to open "developer tools" 4. switch "developer tools" tab to "console" 5. reload page 6. observe that error is present </details>
steps to reproduce the behavior: 1. run `jest` with the storyshots add on enabled and the "--ci" flag 2. tests will fail because the snapshots are not in expected location so are being considered new
1. edit `/etc/hosts` to have a custom domain (`sudo nano /etc/hosts`, change localhost` to localhost storybookis.cool `, write out, close) 2. in package.json set storybook script to: `"storybook": "start-storybook -p 6006 -h 3.
`yarn storybook` 4. see issue 5. to fix, use `"storybook": "start-storybook -p 6006 -h (note, added `www.`)
steps to reproduce the behavior: just use ul element in your story and check styles.
steps to reproduce the behavior: 1. build new project using create-react-app 2. init storybook 3. add storyshots addon 4. try to import to the config.js 5. run `npm run test` 6. see error
used the code from: phofurl modified component, received buch of messages in the console but the component not reloaded.
steps to reproduce the behavior: 1. create a basic project 2. add newest storybook and storybook/addon-centered
steps to reproduce 1. install storybook `npx -p @storybook/cli sb init --type angular` 2. run storybook `npm run storybook` 4. see error `can't resolve all parameters for appcomponent: (?, ?, [object object]).`
tried: phofcode but it did not change anything.
create a story with metadata in the title such as and then look at the story info pane
steps to reproduce the behavior: 1. use below code along with a markdown file within story 1. navigate to story 1. open docs page 1. view error
steps to reproduce the behavior: 1. open a story that has any knobs configurated.
2. change, for example a boolean to true en preview these changes by opening canvas in a new tab.
3. close the canvas tab en set the boolean back to false.
4. open canvas in a new tab again and see no changes.
steps to reproduce the behavior: 1. this happens upon launch using `start-storybook` script.
in a react native storybook project (this happens to be my use case), set up storybook with the following `addons.js` file: phofcode
using 5.2.0-beta.18 steps to reproduce the behavior: 1. in `.storybook/config.js`, call `configure` more than once, such that each call would load different stories 2.
`cd storybook-static && http-server` 4. head to phofurl
1. go to 'addons ' on the initial story loaded 2. click on 'notes ' 3. see error `typeerror: cannot read property of 'selection ' of null`
steps to reproduce the behavior: 1. create the following `select` knob phofcode 2. notice with `v5.2.0-beta.19` there is a type error for the option values as the select option value can only be one of... phofurl it looks like since `v5.1.9` you upgrade to typescript ( yay! )
but this value restriction causes a breaking change.
i wasn't sure to put this as a feature or bug but since it broke my current usage i decided to label it as a bug.
also considering it is allowable have arrays as values per latest docs phofhyperlink .
my base chromium docker image, the rest is copying the project and running `yarn test` phofcode the docker image based on it.
copies the storybook and runs the tests.
steps to reproduce the behavior: 1. install create-react-app with typescript 2. install storybook 3. create .storybook/config.tsx
steps to reproduce the behavior: 1. use an azerty keyboard 2. press the `/` key using `shift+:`
steps to reproduce the behavior: 1.
`cd storybook-build-bug && npm install` 3.
`npm run build` 4. open folder "public" and check "storybook" size
steps to reproduce the behavior: 1. create components and stories for them.
2. load them into storybook, everything works fine.
3. export the components with their stories files to bit.dev 4. install the components from bit.dev to another project.
5. load them into storybook (see the code snippet).
6. the components are loaded one by one, and only last component is shown.
7. in console (when verbose is checked): 7.1.
_setstories_ is run for each component (not once for all components) 7.2.
_storymissing_ is thrown for all except last one: `(18) message arrived at manager storymissing undefined`
steps to reproduce the behavior: 1) create component with changedetecorref as dependency.
2) try to write story for the component.
steps to reproduce the behavior: 1.
`cd storybook-emotion-css && yarn && yarn storybook` 3. load phofurl and see the error :( `typeerror: cannot read property 'name ' of null` <details> <summary>expand for full error message</summary> phofcode </details>
1. go to on device story book 2. open "navigator" tab 3. click on a story
steps to reproduce the behavior: 1. set up component with redux store 2. set up redux devtools extension in browser and code 3. extension panel in browser unable to connect
steps to reproduce the behavior: 1.
`git clone && cd && npm install` 2.
`yarn storybook` to run storybook on porn `3001` and `yarn develop` to run gatsby on porn `3000`.
file i was talking about there
check the minimal setup to reproduce phofurl
steps to reproduce the behavior: 1. go to any specific framework folders under `examples` 2.
`yarn storybook` 3. white page with an error on console phofcode
steps to reproduce the behavior: 1. install `@storybook/angular` package with the latest devkit installed.
2. note the peer dependency warning.
1. create new application using @angular/cli 2. generate new service 3. inject new service to the app component 4. start the application with npm start currently everything working perfectly.
5. install storybook 6. write short story about appcomponent (please, check the code bellow) 7. start storybook 8. see error
steps to reproduce the behavior: 1. add the import into your storybook config in a project using storyshots 2. run jest
steps to reproduce the behavior: 1. set up a project for docs 2. don 't include props for a component 3. see the "no components found" box
write code block in notes suchs as: image phofimage
steps to reproduce the behavior: 1.
`ng generate lib awesome-lib` 4.
steps to reproduce the behavior: 1. run storybook.
0. click on 'notes '.
0. get white text on white 'ish background.
steps to reproduce the behavior: 1. navigate to story that is written within `*.stories.ts` file.
1. select "canvas" tab 1. component renders properly 1. select "docs" tab see error select "canvas" tab see error
steps to reproduce the behavior: 1. go to ' phofurl
steps to reproduce the behavior: 1. upgrade to 5.2.0-alpha.39 2. use these configs: config.js phofcode webpack.config.js phofcode 3. structure your stories like so: phofcode
- create vue project with ts support via vue cli 3 - storybook via vue-cli-plugin-storybook (ts conversion and config must be done by hand) - vue jsx/tsx typings -> phofurl - create theme: phofcode `npx tsc`
steps to reproduce the behavior: 1. create a fresh angular project (8.2) 2.
`sb init` alpha.38 3. start storybook
steps to reproduce the behavior: 1. adding storybook to existing react app which uses emotion.
2. set up webpack.config.js in ./storybook folder with code snippet below.
set up tsconfig.json with subsequent code snippet.
steps to reproduce the behavior: 1. create new vue cli3 project && storybook 2. install markdown-loader && html-loader && configure webpack 3. add storybook notes 4. create a markdown with any code block with lang defined 5. start storybook server and it should crash
steps to reproduce the behavior: 1.
`git clone` or `git pull` to the latest `next` branch after #6923 is merged phofhyperlink 2. setting up project and run `yarn lint` 3. see errors phofcode
steps to reproduce the behavior: 1. create a story 2. install and import `rewiremock` 3. create a mock like phofcode 4. build storybook 5. open the static page.
4. see error <img width="706" alt="screenshot at 13 41 52" src=" phofurl
steps to reproduce the behavior: 1. install storybook and get it running (as per phofurl 2. run 'npm install request --save' 3. npm run storybook (start-storybook -s ./public/) will not run
this is most likely caused because i have the following rule defined in my `webpack.config.js`: phofcode note that `node_modules` is excluded.
this is a very common config but unfortunately it means webpack won't be processing anything inside of shipped `npm` modules.
steps to reproduce the behavior: 1. click in search input in storybook sidebar 2. type letters in the search input 3. hit the enter/return key 4. notice that your app did a hard refresh
steps to reproduce the behavior: 1. configure a story using the code snippet below 1. change a property using the knob add-on (change the first label to "error") 1. click second tab in preview pane 1. notice tab content does not change click tab content notice tab switches the example leverages `@angular/material`, but i came across this via proprietary components as well.
steps to reproduce the behavior: 1. git clone phofurl 2. cd react-hot-starter 3. git checkout storyshots-macro 4. npm run storybook * note * react-hot-starter is based on create-react-app@2
steps to reproduce the behavior: 1. create a project with create-react-library or create-react-app 2. init storybook in project 3. create a component for test 4. install packages
steps to reproduce the behavior: 1. apply addon centered 2. click on the docs tab 3. see that the component is in the middle of screen rather than in markdown
1. install react-transition-group in your project 2. create a component inside a csstransition 3. create a stories for this component
steps to reproduce the behavior: 1. enable docs technical preview 2. setup storyshots 3. create an based mdx story 4. run jest
steps to reproduce the behavior: 1. npm i @storybook/react @types/storybook__react @storybook/addon-actions 2. then follow the doc from phofurl phofhyperlink 3. run start-storybook 4. click sidebar more menu icon button 5. see error
steps to reproduce the behavior: 1. i have lerna monorepo setup with storybook/react.
got 4 packages in the repo.
2. a basic setup with storybook 5.1.9 3. build the folder with docker build command 4. when it hits storybook build, it fails with below error.
run the story file code below.
steps to reproduce the behavior: 1. initiate any action on storybook 5. cors error appears in console.
steps to reproduce the behavior: 1. start a new cra app 2. create some containers and import them using aliases.
3. fill jsconfig.json file with paths/alias and make sure it works ok when building using cra 3. try running storybook: it crashes 4. see modules not found error
steps to reproduce the behavior: 1. install `create-react-app` 2. install storybook
import any not-`js` (`tsx` in my case) module into `addons.ts`.
in case i rename imported file to `.js`, it is being loaded, however doesn 't seem to be transpiled and fails to load other dependencies.
with that import commented out everything works fine.
steps to reproduce the behavior: 1. visit storybook homepage on localhost 2. warning appears in console.log
steps to reproduce the behavior: 1. import function that export from commonjs file 2. render component in the story file
steps to reproduce the behavior: 1. install storybook `5.1.8` 2. start storybook
1. using `5.2.0-alpha.29`, add a story as simple as the following: phofcode 2. fire up storybook 3. change the name of the story to anything other than the current name 4. verify in ui that story for `testing` still exists
steps to reproduce the behavior: 1. open a component that uses addon centered 2. use the + or - magnifying glass in storybook 3. component will disappear
steps to reproduce the behavior: 1. install packages (see below on versions): `npm install --save-dev @storybook/react-native 2. add `import to `<project 3. add the code shown above to `<project 4. try to run the app 5. see error
install storybook using the automatic install into an existing angular 8 project.
steps to reproduce the behavior: 1. create an angular component 2. create an angular module which declares and exports the component and additionally imports other required modules from angular 3. create a story with a decorator to provide the module 4. start storybook and select the story, error is shown on screen and in console.
steps to reproduce the behavior: 1. upgrade to `5.2.0-alpha.27` 2. view a component 's "info" 3. scroll down to the bottom fo the "info" pane and see that the proptypes table is cut off (you may need to reduce size of your browser window get a scrollbar)
steps to reproduce the behavior: 1. create new angular repo 2. initialize storybook 3. follow install and configuration instructions for addon-docs ( phofurl 4. run storybook and go to docs tab i created a simple app with with mdx configured per the instructions and seeing same error: phofurl
i used this knob directly on my component: phofcode the knob did not render in the addon panel, and the story display threw this error: phofcode since it also mentions the 'readme ' addon, it might be a problem with the combination of both, which is weird, because all other knobs work perfectly.
steps to reproduce the behavior: 1. followed instructions on medium post on updating to 4 phofhyperlink and to 5 phofhyperlink 2. installed updated versions 3. run storybook 4. see error phofcode
we have a somewhat big typescript app, tons of packages and configurations.
repo: phofurl branch: `feature/v8` problematic line: phofurl steps to reproduce the behavior: 1. clone repo at branch `feature/v8` 2. start storybook with `yarn run build && yarn run storybook` 3. see error in almost every story
steps to reproduce the behavior: 1. upgrade from 5.0.6 to 5.1.3 2. npm run storybook 3. click on a story with notes 4. click notes tab 5. blank screen appears with errors in console
launch storybook 5 in ie 11.
steps to reproduce the behavior: 1. follow the above mentioned steps 2.run the storybook project - npm run storybook 3. see error (open the console se below error) warning: received `true` for a non-boolean attribute `loading`.
if you want to write it to dom, pass a string instead: loading="true" or in div (created by context.consumer) in styled(div) (created by sidebaritem) in sidebaritem in div (created by context.consumer) styled(div) unknown unknown (created by context.consumer) styled(component) sidebar) div simplebar) div simplebar) simplebar) simplebar) simplebar unknown context.consumer) styled(component) scrollarea) scrollarea styled(scrollarea) sidebar) nav styled(nav) sidebar) sidebar managerconsumer _default) _default layout) styled(div) nav) nav layout) layout withtheme(layout) unknown resizedetector) childwrapper resizedetector) resizedetector styled(div) manager) themeprovider manager) manager location querylocation) querylocation root) locationprovider root) helmetprovider root) root
steps to reproduce the behavior: 1. update to 5.14 2. run `start-storybook -s .` 3. see error
steps to reproduce the behavior: 1. install storybook versions like 5.1.4 2. see error in console: phofcode
here is my config: phofcode here is my webpack.config: phofcode
steps to reproduce the behavior: 1. create a typescript project 2.
`yarn add which will transitively give you `@storybook/api` 3.
1) install `addon-notes` to my project 2) include `import on `addons.js` 3) add `notes` property to my story
1. have storyshots-puppeteer setup to work with a running storybook server (not static files) 2. make a test case fail on purpose 3. check your storybook server console
steps to reproduce the behavior: 1. vue create my-project 2. npx -p @storybook/cli sb init --type vue 3. then follow the doc from phofurl phofhyperlink repo: phofurl
steps to reproduce the behavior: 1. update the following packages phofcode
steps to reproduce the behavior: 1. create readme and add <modal show={show} animation='centerout' /> 2. click reload page 3. open notes panel/tab 4. js snippet code will be hidden
steps to reproduce the behavior: 1. install and enable the notes addon following the default readme instructions phofhyperlink 2. run storybook 3. open the console 4. see error
steps to reproduce the behavior: 1. update @angular to version 8.0.0 using cli tool 2. update storybook and all related addons to 5.1.3 3. the addon-a11y should be imported in the addons.js 4. run storybook 5. none of components are displayed on canvas 6. in the console an unhandled error is displayed related to zone.js
steps to reproduce the behavior: 1. fresh install of angular 8 2. fresh install of @storybook/angular following the guide at phofurl phofhyperlink 3. create config.js file (see below) 4. npm run storybook 5. errors.
i prepared a repo containing a story wich works with storybook 5.0.11 but doesn't with 5.1.3 phofurl phofurl - checkout repository - run npm ci - run npm run storybook - uncheck isactive knob observe isactive is not changing in mocked service checkout `storybook-5.0` branch run npm ci npm storybook uncheck isactive knob isactive is changing in booth service and prop
run the angular demo in this repo and check the console.
steps to reproduce the behavior: 1. add multiple addons 2. shrink the window until the addons panel is narrower than the addons list 3. see error
steps to reproduce the behavior: 1. install a basic storybook example on a windows machine.
2. run the command phofcode to try and debug your storybook application.
steps to reproduce the behavior: 1. go to the notes tab.
2. click on "document components in markdown".
steps to reproduce the behavior: 1. sample repo used to produce this can be cloned here: phofurl
steps to reproduce the behavior: 1. add a story as described above
steps to reproduce the behavior: 1. create new angular 8 app 2. initialise storybook inside the app 3. run storybook 4. see error
steps to reproduce the behavior: create a story within the preview panel, and add a link like about add a target for that link further down the page<a id="about"></a> expected behavior when clicking the "about" link it would take you to target (i.e.
scroll down to appropriate spot).
1. make component using hooks and forwardref 2. create story for this component
steps to reproduce the behavior for second error log (i have no idea how to reproduce it for 1st one, because project where it happens is pretty complex, but you may contact me in person and we could figure out how to reproduce it): 1.
`ng new test8 --routing true --style scss` fresh angular 8 project 2. add storybook v5.1.0-rc.3 3. run `npm run storybook` 4. see error
steps to reproduce the behavior: 1. take a valid storybook project 2. enable yarn pnp on the project by adding this to `package.json`: phofcode 3. run `yarn add @storybook/channels @emotion/core @emotion/styled emotion-theming` to kind of fix this first bug phofurl 4.
steps to reproduce the behavior: 1. setup react native story book and test 2. add 3. setup `storyshots.test.ts` as per readme 4. run `yarn test`
1. take a valid storybook project 2. enable yarn pnp on the project by adding this to `package.json`: phofcode 3.
steps to reproduce the behavior: 1.
`npx -p @storybook/cli sb init` 3.
`react-native start --projectroot storybook` 4.
`react-native run-ios --simulator 'iphone 8'`
steps to reproduce the behavior: 1. setup background addon 2. past example code with addonapi import into `./storybook/config.js`
steps to reproduce the behavior: 1. create a story 2. use addon notes 3. create a markdown file with this table: phofcode which should render this: | attribute | type | | ------------ --------------------- `position` `"left" | "right"` but it actually renders like this: attribute type ------------ ---------| ---------- `position` `"left"` `"right"`
theme with crash: phofcode --- theme without crash: phofcode
2. register add-on `import 3. add a `notes` key to story options.
steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
steps to reproduce the behavior: 1. go to phofurl 2. see error in console: `uncaught (in promise) typeerror: cannot read property 'tolowercase' of undefined` 3. link's href points to root instead of the linked story probably broken by phofurl before the change, the missing `kind` and `story` parameters were handled by `api.geturlstate
create a new angular application using angular-cli and try to install `@storybook/angular`: phofcode
1. install addon-docs alpha 8 1. show case a component with a ul list in the docs tab 1. it's padding-left will be too big
steps to reproduce the behavior: 1.
`npm install -g create-react-library` 2.
`create-react-library -s -t default test` 3.
`npx -p @storybook/cli@next sb init`
steps to reproduce the behavior: 1. go to a story in storybook 2. change properties using knobs 3. click on `open canvas in new tab` image phofimage 4. component loads in a new tab with default values
steps to reproduce the behavior: 1.
`yarn build-storybook` ko 2. see error ko 4. cry 5. check on webpack bundle the output
steps to reproduce the behavior: 1) clone the storybook design system phofhyperlink project.
2) go to sb config.js and `import { themes } from 2) set `options: { theme: themes.dark }` to show the dark theme 3) comment out above and refresh.
it shows dark theme (but should go back to light).
and when i set it manually `themes.light` it does not refresh either.
steps to reproduce the behavior: 1. set webpack 's config phofcode 2. run script "start-storybook"
steps to reproduce the behavior: 0. setup expo/storybook project with the following deps: <img width="952" alt="screen shot at 10 52 57 am" src=" phofurl 1. go to 'about your storybook ' and you should see: <img width="952" alt="screen shot at 10 54 07 am" src=" phofurl
steps to reproduce the behavior: 1. install `@storybook/react` and `@storybook/addon-docs` to version * 5.2.0-alpha.4 * .
2. add the following configuration: .storybook/config.js phofcode .storybook/preset.js phofcode phofcode .storybook/addons.js phofcode .storybook/.babelrc 3. add a stories.mdx file, let 's say with the following content: 4. run storybook and navigate to that documentation
steps to reproduce the behavior: 1. go to phofurl 2. click on "story 2" in the sidebar 3. iframe content blinks from the full page load.
can also check network logs to verify resources within the iframe being reloaded.
steps to reproduce the behavior: 1. import `debug` into one of your stories 2. navigate to that story within storybook 3. see error in the browser console
i don't know how to reproduce
steps to reproduce the behavior: 1. go to storybook `next` branch.
view the default story phofhyperlink or the about page phofhyperlink 2. see that scroll bars render strangely on in the default storybook ui.
and notice you cannot scroll on about page.
steps to reproduce the behavior: 1. create a component that requires props 2. add the 'centered' docrator 3. specify your component using the `component` property.
4. notice that defined props are not observed by the rendered component.
internally, component believes they areall `undefined`.
steps to reproduce the behavior: project setup: |src |---|components |---|---|component1 |---|sass |---|---|utils |---|---|---|utils1.scss |---|---|---|utils2.scss |---|---|helpers.scss my components are vue single file components.
i have also some webpack custom settings like aliases and the global loader of the helpers.scss, so i don 't have to include it in every component.
2. run `$ npm run storybook` 3. see the error: phofcode
steps to reproduce the behavior: 1. open storybook in firefox.
steps to reproduce the behavior: 1. go to the about page and try scrolling or selecting text.
steps to reproduce the behavior: 1. install and run version 5.1.0-alpha.39.
2. notice that the sidebar menu and about page suggest upgrading to 5.1.0-alpha.37, an older version.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. try to use `store: window.store` when creating a story.
3. see context is wrong.
steps to reproduce the behavior: 1. create storybook 2. install addon-docs by using the manual configuration described here: phofurl 3. create mdx story with <story> tag phofcode
steps to reproduce the behavior: 1. go to phofurl 2. click on the * notes * card
steps to reproduce the behavior: 1. npx -p @storybook/cli sb init --type react -f error in ./.storybook/config.js module build failed (from error: cannot find module 'babel-core ' at (module.js:547:15) at function.module._load (module.js:474:25) at module.require (module.js:596:17) at require
steps to reproduce the behavior: same steps as seen in previous ticket: * phofurl
steps to reproduce the behavior: 1. apply a custom theme, with a `dark` base 2. run `build-storybook` 3. open in the browser 4. see that the theme is not applied
steps to reproduce the behavior: 1. setup a storybook with at least one story and no additional panels.
2. using the same screen, open the dev tools.
to reproduce the behavior: create a story using knobs, adding a period and/or square bracket(s) to the label of the first knob -> phofcode
steps to reproduce the behavior: 1. install cra `npx create-react-app --typescript` and `cd 2. install storybook `npx -p @storybook/cli sb init` 3. verity it works `npm run storybook` 4. eject `npm run eject` press `y` to confirm.
replace loadstories with: phofcode 6. rename story file to 7. verify that it doesn 't recognize jsx-tag.
you can use my repo as an example: phofurl try to deploy it to heroku using the next `heroku-postbuild` script: phofcode
this minimal story code should repro: phofcode when you click the "focus input" button knob, the input doesn 't actually get focus.
on closer inspection, you can see that this is because the story re-renders and the input that gets focus is destroyed.
steps to reproduce the behavior: 1. create a babel config with `corejs: { version: 3, proposals: true }` 2. use latest @babel/preset-env v7.4.4 3. build and start storybook 4. see errors like `module not found: error: can't resolve in ...` `module not found: error: can't resolve in ...`
steps to reproduce the behavior: as been described.
use `sb init` to setup a new storybook in an existing project with dependencies.
1. run `build-storybook -c .storybook -o build/storybook`, 2. try to open the generated static site in the browser using a `file://` path, e.g.
3. in `iframe.html` there is `<script which will fail because that translates to which is obviously wrong.
index.html has the right path.
4. also in main.hash.js there are paths like which cause load to
steps to reproduce the behavior: 1. install phofcode 2. go into `node_modules/.bin/` 3. notice that the storybook script is missing.
steps to reproduce the behavior: inside of a mounted function in vue, try changing a value based on a prop/knob and nothing happens.
if you save the code/file it will refresh properly, this seems to be part of the hot-swapping in webpack tho.
1. start storybook 2. open chrome devtool 3. prop type errors displayed on chrome devtool
steps to reproduce the behavior: 1. set up the project to have notes addon 2. create a md file which contains `'` 3. use that md file for a story 4. see the result note panel show `&#39;` instead of `'`
install rn storybook example, try adding `linkto` to button onpress to navigate to sub-stories.
steps to reproduce the behavior: 1. go to storybook cra 2. shrink the bottom panel as small as it will go 3. open chrome dev tools 4. close chrome dev tools 5. panel top remains where it moved to after chrome dev tools opened 1. go to storybook cra 2. shrink the bottom panel as small as it will go 3. shrink entire web browser height 4. expand entire web browser height 5. panel top remains where it was, in relation the top of window, immediately after shrinking
steps to reproduce the behavior: 1. clone the repository: phofurl 2. do `yarn && yarn start` on the cloned repo 3. click on the `changelog` story of `welcome` and observe that browser gets hung for sometime and slows down storybooks `changelog` story has changelog of across 1500 lines.
and it is happening due to inclusion of `witha11y` decorator in `config.js`.
on removing below 2 lines from `config.js` fixes issue: import { witha11y } from '@storybook/addon-a11y'; adddecorator(witha11y); this issue was not happening in sb 4.0, it started happening in sb 5.0
steps to reproduce the behavior: 1. in a story, create a color knob with no default value: phofcode 2. navigate to this story
1. create a react/angular component with default value and write a story for it.
2. when you delete all context from the knobs input in storybook the value in the component will be null instead of the default value.
(and this is because default values only works with undefined and not null)
steps to reproduce the behavior: 1. setup a storybook with a custom `brandimage` and run it locally.
2. setup another storybook with default config.
3. kill the first storybook, run the second on the same port.
4. the custom logo from first appears on this completely unrelated storybook.
1. clone repo 2. npm install 3. npm run storybook
i 'm building my project on a paas, where there is necessary to provide a script to build the project, in my case it 's like this.
phofcode my project structure is: phofcode i 'm using a custom configuration folder, so my `build-storybook` script executes this command: `build-storybook -c config/storybook -o storybook` (i 've also used `./config/storybook`) but it returns the described error.
the thing is that when using the default `.storybook` on the root folder, and setting script to `build-storybook -o storybook` it builds without problems.
i 'm thinking that there is a problem with resolution of given custom folder path.
steps to reproduce the behavior: 1. go to 'about your storybook ' after upgrading to 5.0.10 and you might get the above message.
it 's very possible that after 5.0.11 is released that this won 't be visible any longer.
steps to reproduce the behavior: 1. install lolex ( phofurl 2. in storybook config.js create "frozen time" e.g.
phofcode 3. try to load some stories 4. nothing happens
steps to reproduce the behavior: 1. go to phofurl 2. go to phofurl image phofimage
steps to reproduce the behavior: 1. install v5.1.0-alpha.29 2. create multiple stories using '@storybook/polymer ' 3. run storybook 4. load storybook in browser - first shown story is fine 5. switch to another story in the side bar menu 6. second story displays, but so does "no preview" alert.
in a react native project set ondeviceui:false in call to getstorybookui
steps to reproduce the behavior: 1. see official storybook demo 2. phofurl 4. see escape character (shows as a box)
steps to reproduce the behavior: 1. configure the viewport addon with a viewport with either width or height set to 100% 2. choose that viewport 3. observe that the viewport is slightly bigger than the available space.
stept to reproduce: 1. add the following fake story: phofcode 2. see no `meta.pristine`, `meta.error` appears; however no errors get printed.
note: `<comething>` is potentially be magical, and in some setup it won 't be magical (i.e.
set any combinations of `brandtitle, brandurl, brandimage` of `defined, undefined, null` on theme object.
sadly i don 't have a reproducible project so far (can 't share our internal storybook and i need to get the same result for a smaller example).
so far every version of `4.x.y.` seemed to run fine and so far every version of `5.x.y` seemed to have this problem.
`v4.1.16` worked while `v5.0.0-alpha.0`, `v5.0.7` or `v5.1.0-alpha.27` suffer from the problems mentioned above.
interestingly the problem doesn 't seem to be storyshot itself or puppeteer.
i created a custom puppeteer test runner with the same results and also upgraded and downgraded puppteteer locally.
(by default we currently use puppeteer `1.7.0` as a fixed version.)
`v4.1.16` is latest 4th version right?
and `v5.0.0-alpha.0` was newest 5th version?
my gut feeling currently is, that this bug occurs because of changes in underlying webpack config.
this happens for production _and_ development builds.
import { withknobs } from import { adddecorator } from adddecorator(withknobs);
steps to reproduce the behavior: run cra-kitchen-sink resize browser window to less 600px see error
steps to reproduce the behavior: 1. delete node_modules and package-lock.json 2. run npm install 3. run storybook 4. storybook starts, but then immediately becomes a blank page, console shows errors with treebeard.
steps to reproduce the behavior: 1. phofcode 2. phofcode 3. phofcode 4. install phofcode addon 5. import flow typed button 6. add story as shown above 7.
steps to reproduce the behavior: 1. clone repository at phofurl 2. apply the patch from attached file (remove .txt in the extension) 3. run "npm i" 4. run "npm run jest" 5. see error i personally use intellij idea built-in jest runner which is more visual (screenshot come from it) migrate_to_v5.patch.txt phofhyperlink
steps to reproduce the behavior: 1. clone this repo phofhyperlink 2. run `yarn storybook`, everything works fine 3. run `yarn build-storybook` 4. serve phofcode 5. open localhost:5000 in the browser image phofimage
1. create a temporary folder and navigate to it.
`npx create-react-app my-react-app`, `cd my-react-app`, `npx -p @storybook/cli sb init` 3.
`yarn storybook` 4. press `a`; the addon panel toggles.
5. press `s`; the sidebar toggles.
6. press `f` to enter full-screen mode.
7. press `a`; the sidebar toggles.
`a` again; the addon panel toggles.
`f` to reset into full-screen mode again.
steps to reproduce the behavior: npx -p @storybook/cli sb init --type react_native
phofcode then the demo button in the "button" "with text" story is clicked.
google chrome gives a deprecation warning: phofcode the output in the storybook actions addon panel doesn 't match the output shown in docs, reading as `clicked: [class]` instead of `clicked: ["[syntheticevent]", null, "[syntheticevent]"]` shown on phofurl phofcode additionally, if `react` and `react-dom` is downgraded to `16.3.2` (the version i was using when i encountered issue), there is also another console error: phofcode
steps to reproduce the behavior: 1. upgrade to latest react-native version 2. run storybook start -p 7007 | react-native start --projectroot storybook
steps to reproduce the behavior: 1. create new project with `expo init projectname` 2. cd into the directory 3. run `getstorybook` 4. see error
steps to reproduce the behavior: 1. run storybook 1. edit a story 1. watch that story drop to the bottom of the tree
steps to reproduce the behavior: 1. create a new story 2. create a markdown file with some content 3. import markdown file in your story 4. see error
steps to reproduce the behavior: 1. go to phofurl 2. click on `show toolbox` 3. see error
steps to reproduce the behavior: 1. edit cra-kitchensink button story to use `action('click', {depth: 1})` 1. go to cra-kitchensink button story 1. open chrome profiler and begin recording 1. click on the button in the story stop recording narrow down window to the click event handling see that at bottomish of call stack, stringify is taking ~200ms also note that entire event object has been logged action addon
steps to reproduce the behavior: run `yarn build-storybook`
set `node_path` to a location _not_ near the current working directory (e.g., three directories _above_ `package.json` and attempt to start storybook using `npm run storybook`.
steps to reproduce the behavior: 1. go to the link below (offical storybook site with old structured url) phofurl 2. see that the story is selected and also the url have changed to new url structure but story view shows "no preview" error.
3. refresh page and it 'll load page with new url (because it was replaced) and story view will load.
steps to reproduce the behavior: 1. install the addon `yarn add -d 2. register it in `addons.js` phofcode 3. create a story: phofcode 4. run storybook
here are my npm scripts phofcode when i run `storybook:react`, in termial, i get this: phofcode `
steps to reproduce the behavior: (see above)
i am looking to create a minimal repo demonstrating this issue but first wanted to clarify whether or not this is in the scope of what storybook would consider _theirs_ to fix?
run the code snippet below.
- import the global styles within each component.
- results: styles are applied, but, multiple global.scss styles is repeated {story#} x times.
- followed directions here for custom webpack config: phofurl - results: it appears this only tells storybook to read the scss, doesn 't actually set up a global file that is applied to all stories 3. one place recommend creating a decorator for storybook and apply the "global" css that way.
result: would not work for what i 'm trying to do (multiple styles, mixins, variables, etc) this only works for small css changes 4. in config under .storybook within the loadstories function result: nothing 5. tried importing global styles within storybook index.ts result: nothing 6. tried adding global styles via angular.json file result: nothing
steps to reproduce the behavior: 1. find any story for a class-specified component that uses knobs ( here 's one in the examples in this repo phofhyperlink ) 2. goto its component definition ( here 's the one referred to in the above example phofhyperlink ) 3. in its @component decorator, add following component metadata object: `changedetection: 4. run or refresh storybook 5. try to manipulate input for above story, and notice that component is unresponsive.
steps to reproduce the behavior: 1. clone scaffold repo - phofurl 2.
`yarn` to install deps 3.
`yarn storybook` to spin up storybook 4. visit url in browser and note the runtime error
steps to reproduce the behavior: 1. create a react component that takes a string prop.
2. use `prop-types` to ensure a string type 3. use `date` knob like this: phofcode
steps to reproduce the behavior: 1. go to phofurl 2. resize your browser until the addons-area moves behind your preview-area 3. see the result
steps to reproduce the behavior: 1.
`import { table } from '@storybook/components'
install storybook 5 in a project that uses emotion 9.
steps to reproduce the behavior: 1. update all of the values for colors in a theme to black.
2. the selected text remains #ffffff no matter what
steps to reproduce the behavior: 1. create a service 2. create an alias for that service 3. use that service in your component importing via the alias 4. apply the component in storybook
the knobs are working, but when i change some value in storybook, the component doesn 't chage at all, i am usign v5.0.5 and this is my config: phofcode my story: phofcode and my component: phofcode video: screen recording at phofhyperlink
create a story with a textinput with the prop autofocus={true}, navigate to story in the react native ui, see keyboard continually open and close until preview mode is selected.
steps to reproduce the behavior: 1. run `yarn storybook` where storybook is defined as `"storybook start -p 7007 | yarn start --projectroot storybook"` 2. run `react-native run-ios`
steps to reproduce the behavior: 1. wrap your functional component with `react.memo` 2. click on 'showinfo ' 3. we can see that the jsx is wrong and has no prop types
on the screen you can see exact story code.
i think additional description isn't necessary.
storybook version: 5.0.3 vue version: 2.5.13 also using the styled components
steps to reproduce the behavior: 1. create a story with the code snippets 2. run it
steps to reproduce the behavior: 1. go to phofurl 3. scroll down to prop types 4. see error
`module.exports = function({ config }) { test: loaders: enforce: 'pre ', }); return defaultconfig; };` addons.js `import import import import import folder structure src /components /stories index.js `
run react-native init test cd test npx -p @storybook/cli sb init npm run storybook
steps to reproduce the behavior: 1. create a new repo using cra 2. init storybook and backgrounds addons 3. import css file with phofcode 4. backgrounds doesn't work anymore.
steps to reproduce the behavior: 1. use the following package.json with a default storybook configuration (same as created in the cli tool): phofcode 2. run `npm run storybook` 3. open the browser
steps to reproduce the behavior: 1. clone the repo to the local machine 2. run `official-storybook` 3. visit story 4. change the name knob as 5. see transformation and errors in action
steps to reproduce the behavior: 1. pull down a brand new copy of the project 2. run yarn install 3. run yarn bootstrap --reset --core 4. run yarn dev 5. see errors
1. start a brand new `create-react-app` 2. initialize storybook and add as per readme 3. run normal build, see that backgrounds work 4. run static build, see that the page crashes.
the ui flashes for a second before going all white.
5. run static build without `import in `addons.js`, see that it now works (but without backgrounds).
steps to reproduce the behavior: 1. start storybook 2. wait for it to open 3. blank screen with error `typeerror: iframe.contentdocument is null`
steps to reproduce the behavior: 1. npx create-react-app storybook-bug 2. cd storybook-bug 3. npx -p @storybook/cli sb init 4. change one of the default story names to "map" 5. yarn run storybook 6. wait for it to load and check the console.
steps to reproduce the behavior: 1. install `core-js` version 3.0 or higher 2. have `corejs: { version: 3 },` in `@babel/env` options 3. try running storybook server 4. observe error phofcode
steps to reproduce the behavior: 1. go to ' phofurl just thought you should know that this information is public at the moment.
steps to reproduce the behavior: adding multiple colour selection knobs to a story in such a way that they appear close enough to each other in the controls tab is enough.
steps to reproduce the behavior: 1. create file named `build-stories.js` in <project>/stories 2. add `import fs from 'fs'` in it 3.
steps to reproduce the behavior: 1. build the storybook app statically, using `npx serve .
${build}` script to sever static file locally 2. see the first story 3. refresh or share the link to others 4. see
steps to reproduce the behavior: 1. try to log an action with a cycled argument (with circular references).
steps to reproduce the behavior: 1. have a story used with styled-component.
inject global css using `createglobalstyle` decoratively in a component.
1. create a storybook with more options than the the height of the screen can fit 2. open storybook and see the error.
some of them will be hidden hence not selectable
steps to reproduce the behavior: 1. load storybook 1. inspect the search box 1. no `<label>` or `aria-label` attribute is set alternatively, run an automated accessibility checker (such as lighthouse in the chrome developer tools) to see it picked up.
steps to reproduce the behavior: 1. run cra example (note: `panelposition: 'right'` is set in the options) 2. open 3. switch addons panel to the `bottom` mode 4. open 5. addons panel position is reset to the `right` mode
for example: phofcode for the above story, in sb4 i have a custom decorator `withstatictemplate` in which i was accessing my story template(not rendered one).
phofcode the same above custom decorator started failing in sb5.
when debugged i see in template is being returned if the story is only `string` type: phofcode could someone please help me how can i get the story template any custom decorator.
steps to reproduce the behavior: 1.
steps to reproduce the behavior: 1. set up project 2. create a component with passing and failing and/or inconsistent rules - one rule must be common among at least 2 of the 3 tabs 3. open the common rule 4. switch between tabs and notice that the rule remains open
steps to reproduce the behavior: 1. go to any page with ie11.
2. you 'll see the issue right away.
3. even more present on pages with custom themes.
steps to reproduce the behavior: just go to this example storybook built in react, go to the knobs tab, and edit the "optional" text: phofurl when you start doing a mix of typing and erasing text, some of your text disappears or previously written text is suddenly added.
this storybook was the first example given for storybook 5.0 found on main storybook website: phofurl
steps to reproduce the behavior: 1. be on rn 0.59 2. use storybook 4.x 2. see warning
steps to reproduce the behavior: 1. have actions, a11y and knobs installed and configured 2. click on a story 3. select the a11y tab 3. select another story 4. see that the selected tab is now actions
steps to reproduce the behavior: 1. create a story with the following code: phofcode 2. run storybook
go to phofurl and you will see that the page is not loaded correctly now refresh the page, you will see the correct result.
steps to reproduce the behavior: 1. create empty vue project `vue create project-name` 2. add storybooks plugin `vue add vue-cli-plugin-storybook ` 3. run `npm run storybook:serve` 4. see error phofcode
bug reproduction : phofurl temporary fix : phofurl
steps to reproduce the behavior: 1. create a new empty directory 2. create the html kitchensink with `npx -p @storybook/cli sb init --type html` 3. add addon-backgrounds with `npm i -d 4. add import to config.js phofhyperlink : `import 5. add backgrounds to phofcode 6. start the storybook 7. untick the "show addons" in "..." dropdown or press hotkey `a`
steps to reproduce the behavior: 1. npm run build-storybook 2. start a web server in the output directory eg.
3. open the storybook in a web browser so that the first story opens 4. duplicate tab 5. in new tab story will not load and instead say "no preview"
steps to reproduce the behavior: 1. install `@storybook/addon-knobs` 2. create a component phofcode 3. create a story phofcode 4. run on development and you see the panel.
run on production and the panel is gone
i have this react hook: phofcode and i'm using a component that use this hook to close a modal: phofcode
steps to reproduce the behavior: 1. add addon-google-analytics 1. select another story after page loaded
steps to reproduce the behavior: 1. open any component with a text knob 2. change the text knob to a string that is more than a couple characters long (maybe write your name)
phofcode make a component that uses the new apis: /
steps to reproduce the behavior: 1. set up project 2. add a11y and backgrounds 3. render component and switch background color to a color that would fail a11y 4. re-run accessibility tests 5. notice that tests results do not change
steps to reproduce the behavior: 1. this is the default url: phofurl 2. change the knob values (e.g.
`knob-styles ~> borderradius: 100` and `knob-color ~> phofurl 2. remove the last part of url `&knob-styles=.
steps to reproduce the behavior: 1. go to _ 'storybook website '_ phofurl 2a.
click on _ 'made for html '_ link on the right side of the page (on larger screens) 2b.
click on _ 'made for svelte '_ link on the right side of page (on larger screens) 3a.
link points to url: phofurl 3b.
link points to url: phofurl 4. see error: _`404 - yikes, this is embarassing - try double-checking link or going back.`_
steps to reproduce the behavior: 1. set up project 2. add knobs addon 3. set up configuration with knob categories
steps to reproduce the behavior: 1. create a `babel.config.js` file in the root directory 2. create a `.babelrc` file with overriding behavior in `.storybook` 3. start storybook 4. see at the configuration specified in the root `babel.config.js` is used.
steps to reproduce the behavior: 1. go to terminal 2. run `npm install babel-cli babel-core --save-dev` 3. choose * yes * to _do you want to manually choose a storybook project type install?_ 4. select * angular * 5. does not install storybook starter project
steps to reproduce the behavior: 1. go to phofurl 2. click on "stories" in description welcome component 3. app will be redirect to phofurl and you see broken markup
steps to reproduce the behavior: 1. start with the following dependencies: phofcode 2. upgrade to storybook 5: phofcode 3. attempt to start storybook phofcode
1. go to phofurl 2. click on 'search input' 3. type `trump` or any unrelated string 4. stories whose titles don't match the string are showing up.
5. also text highlight from sb4 and less for matching text is missing.
1. create a react@15 app 2.
`import { create } from '@storybook/theming'` in `.storybook/config.js`
steps to reproduce the behavior: 1. go to a story that dispatches actions 2. cause the action to be dispatched (the action shows up in the actions panel) 3. go to another story and view the action panel 4. the previous story's dispatched actions are still listed.
use the following theme: phofcode changing between `base` of `light` or `dark` doesn 't make any difference either.
steps to reproduce the behavior: 1. go to a static storybook here phofhyperlink or the official sb phofhyperlink 2. click on the search input 3. start typing 4. see that it doesn't instantly filter
steps to reproduce the behavior: 1. install sb5 and put a base style in angular.json 2. run storybook 3. remove styles in angular.json.
steps to reproduce the behavior: 1. go to any story, put any string with aforementioned ~~~js ~~~ markdown notation 2. view it on the storybook 3. see that the supposed code snippet does not show at all.
steps to reproduce the behavior: 1. create a static build: `storybook_on=true build-storybook -c .storybook -o .storybook-dist` 2. host the build `http-server .storybook-dist` 3. search anything 4. open console and see error with no search on components
steps to reproduce the behavior: checkout phofurl yarn storybook open in ie11
steps to reproduce the behavior: 1. add number knov 2. remove the value 3. see error in the console
steps to reproduce the behavior: 1. resize the window to be less than 600px 2. see the console 3. when refreshing page in a small window, error appears again
steps to reproduce the behavior: 1. create a custom webpack config, and force the `config.mode = "production"` 2. start up storybook locally 3. type in two or more characters you expect to match 4. see error tracing through, i found that the `parameters.filename` is a `number` when `config.mode = "production"` and a `string` in dev (the actual real file name) i 've also seen this behavior in a storybook from other person 's issue: phofurl (from #5772)
steps to reproduce the behavior: 1. import the svg as a react component phofcode 2. run "start-storybook -p 6006 -c .storybook" 3. storybook ui is loaded with the preview of components.
error is shown on the preview of container component.
failed to execute 'createelement ' on 'document ': the tag name provided is not a valid name.
error: failed to execute 'createelement ' on 'document ': the tag name provided is not a valid name.
steps to reproduce the behavior: 1. get setup: phofcode 2. in chrome and ie11, visit phofurl 3. edit and change the overridden story from phofcode to phofcode 4. in chrome, the background changs from blue to pink.
steps to reproduce the behavior: 1. open "webpack config simplification" phofhyperlink 2. see the code example
steps to reproduce the behavior: 1. upgrade to sb5 2. run `yarn storybook` 3. wait for build to finish
steps to reproduce the behavior: add an component with styled-components run storybook - version:5.0.0
here is one typescript module: phofcode
steps to reproduce the behavior: 1. navigate to angular project and install sb5 `npx -p @storybook/cli sb init` 2. create global styles in `/stories/` like
steps to reproduce the behavior: phofcode
steps to reproduce the behavior: 1. go to phofurl 2. click on button -> dynamic 4. see error
set up react-native project using pnpm rather than yarn/npm.
when bundling, @storybook/react-native and many other @storybook packages are unable to resolve require imports to core-js/
steps to reproduce the behavior: 1. go to phofurl 2. click on `yarn && yarn storybook` 3. backgrounds and viewport do not display
1. yarn 2. yarn storybook
navigate to any component in storybook 5.0.0-rc.7, and zoom in drastically until the component overflows and scrollbars appear.
i can reproduce locally: phofcode
steps to reproduce the behavior: 1. copy snippet below and paste into 'config.js '
steps to reproduce the behavior: 1. set up a project for angular app with storybook 2. click on panel toggle and watch the addon panel widen far passed the component in view
steps to reproduce the behavior: 1. create a umd bundle with webpack 4 2. in stories file, import something from that bundle.
steps to reproduce the behavior: 1. visit storybook official netlify link phofhyperlink 2. note how there are
it seems that all that you need is to specify a `defaultviewport`: image phofimage when it is converted by `tolist`, it splits the string: image phofimage when the list is eventually processed, `list.map` tries to access named properties but the only one that exists is `id`: image phofimage which eventually crashes inside `createitem`: image phofimage
steps to reproduce the behavior: 1. set up project 2. run storybook and look to top right corner
steps to reproduce the behavior: 1. spin up storybook 2. visit phofurl 3. observe that there are no violations or passes 4. press
steps to reproduce the behavior: 1.
$ npm install -d @storybook/addon-a11y 2. import 3. scroll down to '.... ' 4. imported
steps to reproduce the behavior: 1. use `5.0.0-rc.5`
steps to reproduce the behavior: use this custom babelrc phofcode and this is the file struct - project root - .storybook - .babelrc - tools babel-preset.js then add the cmd to the package.json `start-storybook -p 6006` and execute it.
then console will show compile infomations and stop at `webpack built xxxxxx in xxxxms`.
and no browser will show.
steps to reproduce the behavior: 1. run `start-storybook -p 6006` and wait for the browser to open.
2. observe that the correct theme is not applied.
3. navigate to another story.
4. observe that the theme is now applied.
use a markdown note like this phofurl with notes addon
1. add addon-centered 2. add addon-info 3. create a story with a static fixed width element, and an absolute-positioned element 4. notice how the absolute-positioned element will be positioned relatively to the static fixed width element, and not the window
1. add `cssresources` options as documented: phofcode 2. click on 'cssresources ' addon panel.
3. see no name/id label and react `key` usage warning (see screenshot below).
steps to reproduce the behavior: 1. create `component` with an empty div, apply `display: grid`, and create a few rows/columns 2. create `component/subcomponent` and a story for it 3. open `subcomponent` 's story.
steps to reproduce the behavior: 1. install `@storybook/vue` 2. run `start-storybook` 3. see huge message telling me to update
steps to reproduce the behavior: 1. create a new storybook project on version 5.0.0-rc3 2. add a new story using the code below 3. navigate to the story and click the button 4. see button remain in active state after mouse button was released and action only log after button returns to it's normal state, a second or two later.
configure storybook almost exactly step by step (use angular 7): phofurl
steps to reproduce the behavior: 1. create cra2 app 2. install dev dependencies as posted above 3. launch storybook 4. observe
steps to reproduce the behavior: 1. start-storybook 2. set some breakpoints 3. change the code and save more times, just as naturally dev some function 4. breakpoints works fail.
steps to reproduce the behavior: 1. ln -s full_path_to full_path_to 2. start storybook
steps to reproduce the behavior: this seems to happen a lot with `react-bootstrap` components.
for example: phofcode results in the source phofcode along with the error message phofcode additionally, if you try to pass this component to `proptablesexclude` phofcode then there is the error
steps to reproduce the behavior: 1. build a project with react native storybook 2. open the project in ios simulator
steps to reproduce the behavior: 1. refresh storybook 2. see the "no stories" message 3. see that the stories populate the sidebar sometime after
steps to reproduce the behavior: 1. use code above in the `beforescreenshot` function
steps to reproduce the behavior: 1. create a select knob for a prop like so phofcode
steps to reproduce the behavior: 1. update to beta .4, 2. run npm install 3. start storybook
steps to reproduce the behavior: 1. go to the aboutscreen:new version required phofhyperlink in the official storybook.
2. adjust the addon pane position so a scroll bar appears 3. scroll down to bottom of iframe 4. switch to aboutscreen:up date phofhyperlink .
5. notice that scroll position does not reset
steps to reproduce the behavior: 1. go to storybook that has toolbar addons 2. see that each icon that corresponds to addons has a toolbar between it
steps to reproduce the behavior: 1. change the background or viewport by clicking on one of these buttons phofhyperlink 2. see that they are not highlighted despite the user having activated them
steps to reproduce the behavior: 1. go to a11y addon 2. see that the violations content is shown 3. but the violations tab is not highlighted (in blue)
steps to reproduce the behavior: 1. click on a folder to reveal stories 2. click on a story 3. try to collapse the folder 4. see that it wont collapse
steps to reproduce the behavior: 1. click on the menu tooltip to open it 2. then click on the preview iframe 3. see error
steps to reproduce the behavior: 1. go to `withtooltip` phofhyperlink 2. click on the stories in the sidebar 3. observe that the code highlighted in storysource does not change
steps to reproduce the behavior: 1. go to tooltiplinklist phofhyperlink , tooltipmessage phofhyperlink , and tooltipnote phofhyperlink 2. these should appear open by default because of the `startopen` prop.
steps to reproduce the behavior: a. create some file e.g.
`foo.unknown` and try to import it in your code b. try to import `child_process`
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. in an empty directory, run `yarn init`, with default options.
2. run `npx -p @storybook/cli sb init`.
3. say that you want to manually choose a storybook project type, and select react.
4. enter `yarn run storybook` or `npm run storybook`.
either should be successful, and open the demo storybook page in a browser.
5. run `npm i -d 6. run `npm i jest` 7. add `jest` to scripts section in `package.json` (see 'code snippets ' section for full `package.json` contents).
8. create a file called 'storyshots.test.js ' in the root directory.
9. make its contents match the provided test code from url above (see code snippets section for exact code block).
10. run `yarn test` or `npm run test`.
steps to reproduce the behavior: 1. follow the directions to add notes to the storybook project 2. add a markdown file or include markdown in your ts file (this markdown should include code snippets using tacs 3 tacs( `) code and then another 3 tacs(`) 3. in the configuration, add - notes: somemarkdownhere 4. run storybook and look to notes section
steps to reproduce the behavior: 1. given any dummy button component.
2. hook onclick action with `action` addon function.
3. wait >4 sec to get response, the ui is totally blocked and unresponsive an example from `official-storybook`: phofurl
steps to reproduce the behavior: 1. attempt using addon-knobs with react native >= 0.56. follow instructions at: 1. phofurl 2. phofurl
steps to reproduce the behavior: phofurl this repository contains a component that should fail on colour contrast and a component that contains a button with no type or text.
steps to reproduce the behavior: create new project with `vue-cli`.
use `vue-cli` plugin phofhyperlink to add storybook to a fresh vue project.
follow instructions in the 'getting started ' phofhyperlink guide on setting up 'snapshot testing ' (with storyshots plugin).
run: phofcode ` get: phofcode
steps to reproduce the behavior: 1. have a project running on react 16.7 or lower 2. launch storybook v5.0.0.beta.2
steps to reproduce the behavior: add `webpack.config.js` to your `.storybook` folder with the following options: phofcode
steps to reproduce the behavior: - create a story within the preview panel, and add a link like <a href="#about">about</a> - add a target for that link further down the page`<a id="about"></a>`
steps to reproduce the behavior: 1. go to a story 2. click on the little eject icon top right 3. wait for the page to load 4. see the url has updated to /
steps to reproduce the behavior: 1. go to any component and put a console.warn() on it 's render; 2. click on it 's preview on navigator; 3. see error
1. follow the installation steps exactly as described here: phofurl _note: be sure to select css as your preferred stylesheet format during the angular cli app installation process_ 2. run storybook and view the `my button` story.
steps to reproduce the behavior: i have installed storybook and the knobs addon.
add the decorator in the global config.
import addon in addons.js add knobs within story run `yarn run storybook` view storybook page
steps to reproduce the behavior: created a storybook app, added one highcharts bar chart.
opened the application in safari ios.
in desktop, resizing the webpage, resizes the components inside, but safari-ios (iphone) did not resize contents.
please see screenshot below to find out how it page on my iphone, did i miss to add anything?
1. generate angular projekt: phofurl 2. add .browserslistrc to root (see code snippet for example) 3. create component + story with css property that should be autoprefixed (e.g.
apperance: none, display: flex, ) 4. start storybook
steps to reproduce the behavior: 1. build the storybook android application with embedded js.
2. install the application on the emulator ( avd ) 3. launch storybook websocket server 4. launch android application 5. open websocket server web page (by default localhost:7007) 6. storybook is empty
any storybook in v5 produces this for me
steps to reproduce the behavior: 1. press [s] to hide the addons 2. press [s] to reveal the addons 3. see the jerky transition on reveal screen recording at 11 38 am phofimage
steps to reproduce the behavior: 1. create a storybook that has a story that utilizes the `addon-notes` 2. make sure the story with notes is the default story that loads on startup 3. run `start-storybook` 4. open storybook uri in your browser and click on 'notes' tab
steps to reproduce the behavior: 1. go to keyboard shortcuts or about screen 2. try to exit back to your previous route (via esc or close) 3. there's no way do this except navigate a new story - which is not intuitive
steps to reproduce the behavior: 1. run `start-storybook -c .storybook` 2. storybook does not successfully compile (sorry, these are not very useful repro steps, i can try and make a separate repo to demo the issue if necessary.)
try to change color with corresponding control in firefox.
steps to reproduce the behavior: set up a new storybook project in a brand new react native project `npx -p @storybook/cli@next sb init`
steps to reproduce the behavior: follow the instructions to install storybook on a newly created react native project `react-native init newproject` `cd newproject` `npx -p @storybook/cli sb init `
1. follow the guide phofhyperlink to add storybook to your react native project 2. start the android emulator 3. run `react-native run-android` to build and deploy app to the emulator 4. open storybook (depends on how you implemented the storybook loading from your app - button press, gesture, option in developer menu, ...)
steps to reproduce the behavior: 1. start in javascript folder: `cd app/javascript/` 2. run `npx -p @storybook/cli sb init` 3. select "webpack_react" 4. see error `typeerror: cannot create property 'dependencies ' on boolean 'false '` 5. run `yarn run start-storybook -c .storybook -p 9009` 6. see error: `error: => create a storybook config file in ".storybook/config.js".`
steps to reproduce the behavior (storybook version 4.1.7): 1. run` build-storybook -o '/absolute/path'` 2. the output will be relative to the working directory with a concatenation of the absolute path `<command dir>/absolute/path`.
steps to reproduce the behavior: 1. create vue project with storybook phofcode 2. open storybook ui with chrome 3. edit 4. hmr not working.
steps to reproduce the behavior: 1. in a react application, have `react` and `react-dom` in your package.json 2. have a in your package.json too.
`npm ls react` or `npm ls react-dom`, see that those packages are installed multiple times
steps to reproduce the behavior: 1. create a new react native project 2. cd to the project 3. run npx -p @storybook/cli sb init 4. replace the content of app.js with export default from './storybook'; 5. execute npm run storybook ( i could not pass this step without installing core-js ).
6. run the application on an android device: execute react-native run-android
steps to reproduce the behavior: add the following custom viewports: phofcode
steps to reproduce the behavior: phofcode where `createquery.js` is: phofcode
use the following storybook component, and blur or change the input value phofcode
steps to reproduce the behavior: create a new react project with rn 0.57 follow the storybook setup guide try to run the project
steps to reproduce the behavior: 1. view default proptables on a local repo hard pinned to addon-info@4.0.12 2. upgrade to addon-info@4.1.6 and restart local storybook 3. compare prop tables
1. import object from 2. create a new object 3. run storybook 4. see the error in the console
steps to reproduce the behavior: - run cra - add storybook - run `build-storybook` - serve the results
steps to reproduce the behavior: 1. clone phofurl 2. install deps with `yarn` 3. run `yarn storybook` and watch as the output hangs forever 4. run `yarn storybook:build` and see the error (along with some unhandled rejection warnings from node)
install npm module "4.2.0-alpha.6", and compare ondevice ui components to the main repository.
changes have not been included.
steps to reproduce the behavior: 1. go to the official storybook 2. click on the `share` icon in the upper right corner the story content should show up in a new browser window.
however, it currently shows a "now preview" window.
steps to reproduce the behavior: 1. add two or more knobs to a story 2. verify that they render when the story is loaded 3. add a groupid to at least one of the knobs 4. verify that only the knob(s) with groupids render
steps to reproduce the behavior: 1. yarn storybook
steps to reproduce the behavior: npm run start-storybook -p 9001 -c .storybook
install `@storybook/react` (tested with `4.1.6`) storybook config: phofcode start storybook.
steps to reproduce the behavior: - create cra app - setup storybook and jest addon as described in respective projects - setup command in `package.json` phofcode - create test `yarn storybook:dev`
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
the issues can be seen at phofurl the code repo that has the stories and configuration are at - phofurl (under the stories folder)
steps to reproduce the behavior: 1. open the viewport tab at the bottom 2. select iphone 6 plus 3. notice that the rotation option exists 4. select iphone 6 5. notice that rotation option disappears
steps to reproduce the behavior: 1. with cra 2, create a new react app 2. with sb-cli, add a new storybook 3. start the cra react app 4. see error
steps to reproduce the behavior: 1. import the test.jsx component into a story and render 2. run storybook 3. load created story
steps to reproduce the behavior: 1. install latest `yarn add -d @storybook/react@4.1.6`.
2. create a component in 3. import this component from a story.
4. launch storybook `start-storybook -p 9001 -c .storybook`.
5. error in console `module not found: error: can't resolve in xxx`.
steps to reproduce the behavior: 1. run up kitchen sink vue, note all knobs working (first image) 2. change first knob to the following and note only 'name' knob shows (second image) phofcode note: stories which only have text, array, object and boolean appear not to be affected by this issue.
steps to reproduce the behavior: 1. use a custom webpack config with full control mode that adds a `defineplugin` to set `{ 'process.env.foo ': 'blah ' }` and in your story console log the value of `process.env.foo`.
2. browse to your story and `process.env.foo` will be undefined.
3. in the code you should see a
steps to reproduce the behavior: create a story with a template that has a method in the props that expects more than one param
steps to reproduce the behavior: 1. run the command shown above.
2. the details panel is still shown.
steps to reproduce the behavior: 1. clone the repository where i simulated the problem: phofurl 1. run `npm install` 2. run `npm start` and see it working.
dep1" 3. run `npm run storybook` and see the bug with message `cannot assign to read only property 'exports ' of object '#<object> '`
steps to reproduce the behavior: 1. create react app with latest cra with react-scripts@2.1.2 2. add storybook@4.1.2 3. run npm run storybook 4. you will see an error `cannot find module: webpack.config.dev`
this is my visual regression test setup phofcode
1. spin up a simple react project with just babel and rollup 2. follow this guide phofhyperlink 3.
`yarn run storybook` or just run this demo repo phofhyperlink
steps to reproduce the behavior: 1.
`sb init` 3. start storybook throws phofcode
steps to reproduce the behavior: 1. run `npx -p @storybook/cli sb init` 2. choose `vue` 3. see error phofcode
use the following js for a story: phofcode
steps to reproduce the behavior: 1. check out phofurl 2. run the storybook.
observe error not this is a modified version of cra that depends on `react-dom@16.5`.
if you allow the app to use `react-dom@16.6` (and thus share it with sb), the problem does not occur.
### webpack.config.js phofcode ### config.js phofcode
attempt to use a feature in your `.storybook/addon.js` that your `webpack.config.js` enables.
steps to reproduce the behavior: 1. create a storybook project 2. add custom files for head tags 3. see how both titles are set on html, and just the first one is getting applied.
steps to reproduce the behavior: 1. open the terminal 2. type: `react-native init testapp` 3. wait few years 4.
`npx -p @storybook/cli sb init` 5. wait again 6. type in your terminal: `yarn run storybook` 7. wait until it fails compiling.
steps to reproduce the behavior: 1. create `test.vue` in 2. install storybook 3. run `yarn run storybook` 4. see error
try writing phofcode phofcode none is working
steps to reproduce the behavior: 1. have a storybook with a color knob 2. open it with firefox 3. click on the color value to change it 4. click anywhere within the modal window that pops up
steps to reproduce the behavior: 1. make a story that adddecorator() that requires() a sass/css file 2. make a separate story that does not 3. view the first story 4. view the second story 5. the second has the first story's css applied to it
when i use the sample story (with two buttons), it works fine.
however, when i try mounting one of our existing components in the story, i get the following compile error: phofcode
steps to reproduce the behavior: 1. initialize new cra project 2. initialize storybook 3. rename app.css to app.scss 3. create a story for app.js 4. run storybook 5. you see an error `you may need an appropriate loader to handle this file type.` about scss files and svg import
steps to reproduce the behavior: 1. configure storybook and storyshots like demonstrated below.
1. run storyshots through jest.
1. create a project using storybook 2. require a `*.stories.js` file located in a directory that is not a subdirectory to the directory containing the storybook config directory.
_steps to reproduce the behavior:_ 1. cra and eject or use react-rewired 2. insure you have the newest versions of react/mobx/mobx-react dependencies 3. create some variables under mobx @observable, ensure that babel plugins in `package.json` has 4. run `npm run start` to see the variables working as defined pre installation of storybook 5. install storybook using cli and see that variables are undefined and the app fails to compile.
6. while storybook and addon dependencies installed, run `npm run storybook` script to see that storybook works fine, it 's standard app that fails compile.
7. run `npm uninstall --save-dev @storybook/react @storybook/addon-notes @storybook/addon-links @storybook/addon-actions @storybook/addon-knobs` see `npm start` application works again.
steps to reproduce the behavior: 1. open a long (taller than screen height) stories list in mobile view 2. the bottommost stories are obscured by the bottom ui bar
it 's a fresh installation of `storybook`.
just head over to your `.storybook` folder and add a `webpack.config.js` file.
i 've tried : phofcode and this one: phofcode with no luck.
everything else works just fine.
this is driving me crazy!
here is the error it gives me: phofcode any help is much appreciated!
thanks in advance and keep up the good work!
1. checkout `next` branch 2. start the `official-storybook` kitchen sink app or install/register add-on to any other app.
2. open any of the `a11y` stories with decorator set.
3. go to `accessibility` panel.
4. see 0 results on both passes/violations.
steps to reproduce the behavior: 1. clone storybook repo and checkout to v4.0.9 2. add this diff phofhyperlink to the angular 's example 3. run storybook and open "dependencies" component stories
steps to reproduce the behavior: 1. install yarn v1.2.1 2. open mac terminal 3. run `yarn add -d 4. see error
reproduction url for the same is: phofurl
steps to reproduce the behavior: i have created a cra with storybook demo exhibiting this behavior.
1. go to phofurl 2. clone, install and run as described in readme.
3. see error in storybook, and not in app.
steps to reproduce the behavior: 1. go to root of statically exported in ie11 2. observe no sidebar items or 1. go to directly at any component path 2. observe no sidebar items or 1. search in component input 2. observe no sidebar items 3. error in console <img width="1280" alt="screen shot at 14 01 38" src=" phofurl
steps to reproduce the behavior: 1. do clean installation of storybook with rn57 2. add some addons here 's my `addons.js` for example: phofcode 3. start webview with `storybook start` 4. observe error in cli: phofcode also exception in js console in webview: phofcode
}, "files": [ "dist", "lib", "src" ] } ``
steps to reproduce the behavior: followed instructions for setting up storybook from scratch and not seeing any stories.
1. see code snippets below and run `react-native run-ios` in storybook mode.
(this is an ejected app, not expo)
steps to reproduce the behavior: 1.
`npm start` 4. change a knob
steps to reproduce the behavior: 1. followed storybook starting guide 2. npm run storyboard 3. see error
steps to reproduce the behavior: 1. add story with two knobs (`text` for example) 2. set group to one of them 3. open storybook 4. knob without group is not in knob panel
1. create a component, for example, button, which will contain <ng-content> 2. go to your stories and use `template` and `props` click.
1. have a project with some dependencies 2. have a `.yarnrc` file with true` 3. run `yarn sb init`
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to phofurl 2. update `@storybook/react` version in to `4.0.7` 3. run `npm install` on the root folder of the repo 4. run `npm run storybook` in `packages/react
steps to reproduce the behavior: 1. git clone phofurl 2. git checkout 2. npm install && npm run storybook 4. see error
steps to reproduce the behavior: 1. create a simple jest test 2. implement jest-addon 3. create a script like this: `"test:output:watch": "jest --json --watch"` 4. see infinite loop on console when running `nom test:output:watch`
i am using storybook v3.4.11.
i can provide an example repo on request.
i have a monorepo setup: - node_modules (root of symlink) - - packagea - node_modules (symlink) packageb node_modules (symlink)
steps to reproduce the behavior: 1. cra setup 2. add storybook 3. run the snapshots for a component 4. crashes...
steps to reproduce the behavior: 1. open discord 2. click "join a server" 3. enter phofurl 4. see error
steps to reproduce the behavior: 1. reposition addons panel (`cmd`+`shift`+`g` or `ctrl`+`shift`+`g`) 2. click on a different story or modify a story knob the panel will then reset its position
not able to reproduce atm
1. npm i -d @storybook/addon-info 2. add phofcode and phofcode 3. start storybook 4. go to story and see red error screen
steps to reproduce the behavior: 1. open storybook using storybook react 2. install and open react devtools 3. note that story scope is properly displayed 4. click inspect button, then a component inside the story pane 5. note that nothing inside the pane can be selected
steps to reproduce the behavior: 1. add addon-options to existing project which uses addon-knobs already, according to instructions.
2. setup withoptions with an empty object phofcode .
3. view a story with knobs and edit text.
phofcode rename react files from .js to .ts/.tsx phofcode results in following depedencies: phofcode copy `tsconfig.json` + from phofurl add simple button component: phofcode add storybook config add story
steps to reproduce the behavior: 1. create app using create react app 2. install storybook 3. create functional component and stories for it 4. run`npm run build-storybook` (without having custom webpack configuration) 5. serve static storybook and see results.
steps to reproduce the behavior: 1. start storybook server.
steps to reproduce the behavior: 1. create a project with cra (--typescript in my case) 2. npx -p @storybook/cli sb init 3.
`import styled from > 4. true, > config.js 4. see: > warning in critical dependency: require function is used in a way in which dependencies cannot be statically extracted 5. add "plugins": ["require-context-hook"] > .babelrc 6. no stories are loaded.
steps to reproduce the behavior: 1. add a11y 2. add to just 1 story 3. every story has accessibility panel
steps to reproduce the behavior: 1. create two knowbs, "text" and "select" 2. enter a json object with many properties.
3. parse the json object from "text input" and generate options per attribute 4. pass the new options into "select" input
steps to reproduce the behavior: 1. import a html file in a story.
2. see error in console.
steps to reproduce the behavior: 1. add import { withknobs, color } from 2. add color={color('colour', '#9b9b9b', 'colour')} to a component story.
steps to reproduce the behavior: 1. create a react component that uses hooks 2. import & render the component in storybook
webpack.config.js phofcode config.js phofcode dependencies: phofcode
steps to reproduce the behavior: 1. run storybook
switch to full screen mode, see screenshot.
go in full screen mode and you will see the normal ui semi transparent in the background.
steps to reproduce the behavior: 1. git clone ( phofurl 2. git checkout 2. npm run setup 3. npm run test
1. create a model 2. add some entries 3. remove all permissions for public role 4. perform a graphql connection query ie.
1. connect strapi to mongo 2. create a new entity 3. fetch the entity via api
just try to build the project.
1. go to edit a given content type which has 7 files attached 2. you see 1/7 but cant identify their names (for example, to delete some of them)
just google "welcome to your strapi app" and you will find a lot of strapi api main pages being indexed
1. create a repeatable field and add it to a content type 2. in the content type controller add code to insert the new entries to the group
1. create a working strapi app (or starter app + postgres) 2. create a model (if no starter app) 3. stop the app 4. stop the postgres server 5. try to start the app with "yarn strapi dev"
- `npm i -g strapi` - `strapi new project --dev`
1. go to phofurl 2. click on the "website" link 3. see error message
1. create a fresh installation with mongodb as database 2. create some content type 3. add some data to the content type 4. try using the filter on the dashboard, or give `find` permission to the public user and try api filter
1. default user content add type "avatar" field, type is media, 2. request /upload api
1. go to phofurl 2. search any word (ex: filter) 3. click the first result (filters) 4. see error 404
1. register as user@email.com 2. send forgot password for user@email.com 3. get an error
1. create a group field and add it to a content type 2. relate the content type with a group field in it to another content type 3. try to query the group field through the content type relationship 4. see the group fielod in query return `null`
1. create any content type 2. add a date type field 3. save the content type 4. add a new date entry into the content type 5) got mongodb and check the data and see the date is stored as one day behind
1. create a new installation (i 'm using postgresql, but i 'm not sure if this is relevant to the issue).
2. create your admin account 3. create a new content type called "number" 4. save it
1. go to a model with relationships.
2. click on the relationship to edit.
1. create an application with a mysql db 2. install 3. create a content type named "function" 4. application restart/build will fail.
`npm install -g strapi` 2.
`strapi new cms --quickstart` 3. kill th server 4.
`strapi develop --watch-admin` 8. using vscode open `cms` folder 9. edit 10. save file
1. create a default installation of strapi.
also install the graphql plugin.
2. through the admin app, add a few entries for `model` with a `name` property 2. create a file under `/config/policies` called `testpolicy.js` 3. inside that file, add: phofcode 4. go to and add `"policies": ["global.testpolicy"]` under the `get` method for `/models` 5. next create file called `schema.graphql` under `/api/model/config` with the following code: phofcode 6. run development environment with `npm run develop` 7. in browser, access `/models` endpoint.
a log with stating `test policy` should show up in console of where you 're running strapi.
this is correct and expected.
8. next try equivalent in graphql by going to `/graphql` endpoint and running query like this: phofcode 9. with graphql query, log does not appear in console (where strapi is running, not web console) and instead of query returning data, it returns: phofcode
1. go to phofurl 2. send an empty post request
1. setup server config for production environment using proxy 2. specify `proxy.host = 3. leave `admin.path = '/admin '` 4. build admin dashboard with production settings 5. start application
1. create an app with 20 api/content types and 8 roles 2. start the app with `strapi dev`
deploy your app from local machine to a production using this guide: phofurl
1. create a new api controller, with a custom function.
sample(){}) 2. create a custom local policy under config/isowner.js 3. create a config/schem.graphql.js file, create new query that uses the sample function above as well as the local isowner policy.
the following error comes up: `ignored attempt to bind to graphql query "sample" with unknown policy "isowner"`
1. create strapi app of version 3.0 beta.
2. create path and add the `index.js` to the folder.
3. write code in `index.js` followed the initiate function of guide.
add some loggers for test.
4. create `middleware.json` in and add `middleware_name` to `config/middleware.json` to enable my middleware.
5. start strapi and try some edit to contents.
middleware didn't work, no errors and logs.
(ps: i tried requests like can trigger the middleware.)
1. created file in and then added below content phofcode 2.then phofurl clicked regenerate button 3. clicked open button
have a clean `npm install`.
1. create dev and prod environments.
2. make an exact copy of dev environment, and copy dev db to a prod db.
3. try to create a new model entry on a production env.
4. admin ui does this xhr request: ` phofurl with an error 400, bad request: `undefined binding(s) detected when compiling select.
undefined column(s): [categories.id] query: select `categories`.
* from `categories` where `categories`.`id` = ?
1. npx create-strapi-app my-app 2. follow the steps and choose mongo as database 3. set your local db params and choose ssl=true 4. it will fail and prompt params again 5. re enter the same settings but using ssl=false instead 6. wait generation to finish 7. open > you will notice that ssl is set to true
1. create an "faq" group, with a string "question" and text "answer".
create a content-type "course" with "faq" as a field.
2. in the content-type creator, add a "course".
1. copy any image on you computer (ctrl + c).
1. go to a markdown editor.
2. paste the image (ctrl + v).
1. create a model with "sku" as name 2. create a group and add it to the model 3. try to create a new entry on the model 4. the page should not load and you should have an error in the logs
1. create content type with some fields 2. create some content for that type 3. go to `content type manager` 4. change some fields name 5. go to that content type and you can see the we field with empty value 6. go to your database 7. check if the old field is there
1. create a contenttype category 2. create a contenttype recipe 3. add a string field and mark required true 4. add another field of type "relation" (recipe has one category) (how to set required true )
1. create a content type, category 2. create a field, category_name, with a type of string 3. create two categories based on the category content type, one called 'appliances ' and one called 'electric ' 4. in the search bar on the top of the strapi admin interface, type 'electric ' - you could put anything and it still doesn 't filter 5. notice that both 'appliances ' and 'electric ' are shown still
we don't know the exact reason and steps to reproduce this error.
i think this happens once in a while but can be very problematic to fix.
1. install a clean install of strapi 2. create content type and name it `map`.
create a string field and name it `title`.
3. install official strapi graphql plugin.
4. run any graphql query to replicate error in the graphql playground.
1. set up a base strapi project 2. create a production and dev environment with settings in database.json 3. set up postgres settings with = `false` 4. run `npm start` 5. server will start normally 6. set env to production - `export node_env="production"` 7. run `npm start`
1. go to api documentation 2. select /auth/local/register 3. click "try it out" 4. click "execute"
1. install strapi with `npx create-strapi-app my-project --quickstart` 2. run `npm install && npm audit` in the my-project folder
do the quickstart command to create a strapi project instantly: 1. go to 'do the command npm develop ' and the log is " > strapi develop building your admin ui with development configuration ... webpack compiled with some errors in 12.95s error: module build failed (from error at afterwritedispatched at writegeneric at socket._writegeneric (net.js:770:11) at socket._write (net.js:782:8) dowrite writeorbuffer socket.writable.write socket.writable.end socket.end (net.js:574:31) handleinput module.exports finalcallback asyncserieshook.eval [as callasync] (eval create <anonymous>:24:1) oncompiled asyncserieshook.eval [as callasync] (eval create <anonymous>:6:1) asyncserieshook.eval [as callasync] (eval create <anonymous>:9:1) asyncserieshook.eval [as callasync] (eval <anonymous>:9:1) npm err!
my-project@0.1.0 develop: `strapi develop` err!
exit status 1 failed the my-project@0.1.0 develop script.
this is probably not a problem with npm.
there is likely additional logging output above.
a complete log of this run can be found in: : 1 " 2. click on '.... ' 3. scroll down to '.... ' 4. see error
follow the aws deployment guide to step 6 and start pm2 with `pm2 start ecosystem.config.js`
1. go to 'content type builder' 2. rename a content type with media 3. view the content entries
1. upload image from mobile device or postman 2. go on user detail in admin panel 3. remove profile just uploaded 4. reload page 5. see old profile image is there
1. go to admin area to menu 'content type builder' and add a random content type with a number field named 'length'.
movie with string field 'name' and number field 'length.
also add a relation field with a random other content type, e.g.
make sure you pick 'has and belongs to many' relation.
2. go to content type 'movies' and add data entries, make sure that length contains data.
3. go content type 'users' add or edit an entry some movie items from movies dropdown on the right side save.
4. reopen currenty added/edited entry.
no relations with movies are shown.
try query the relation data through rest or graphql, also no results, even though database contains data correctly.
1. go to admin section 2. click on any link and open it in a new tab 3. automatically you redirect to login
1. start the server with port 1337 2. upload a file in sample2.html 3. see in node log that the path is temp and not dest
1. query items with nested objects data that is returned from the service `find` function: phofcode data returned by graphql: phofcode
1. run this graphql query: phofcode 2. see the error: `"message": "the model user can 't be found.
1. go to 'files upload' 2. click on the record to copy the link 3. the recorded link will be phofurl ... problem here is there is extra https:// at the front and also additional `:port` 1. go to 'files upload' 2. click on eye icon record to open file in new tab 3. new tab will be https//<host>:<port> ... problem here is there is missing `:` between `https` and `//` and also additional `:port`
1. npx create-strapi my-project --quickstart
1. install local dependency `npm install 2. install all dependencies `npm install ` 3. startup `npm run develop` 4. see error
1. npx create-strapi-app my-project 2. see error: warn tarball tarball data for @buffetjs/sty;es@1.0.0 (...) seems to b corrupted.
the installer cannot move past that point
1. send a query to a model with both a deep filter and a timestamp param, like 2. result will be an empty array.
1. create a content type called group with just a title 2. add 2 groups add the titles "one" and "two" 3 use query: `query { groups (where: { or[{title: "one"}, {title: "two"}] }) {title} } `
i have deeply nested objects.
building -> apartments (has many relationship) apartment -> rooms (has many relationship) the models are described in another bug (with the node that rooms are many-to-many relationship) here: phofurl
1. create a new strapi project 2. start the git tracking (`git init`, `git remote add origin`...) 3. create a new content type with some string field and save it.
4. go to the content type you created and click to add one entry 5. click on "configure the layout" 6. click on the field created before.
7. change default values of label, description and placeholders.
8. get back to "add one entry" screen and check effect.
8. logout from strapi stop server.
9. commit changes on git push them.
10. on a new directory, clone repo choosing other name.
`yarn instal`or just `yarn` to install dependencies.
`yarn develop` run strapi server 13. create new admin log in.
14. go content type created before click add one entry.
15. note that setting (label, description placeholder) is no longer there, just string field.
- create a a new model with timestamps for example.
- try to add it manually to the attributes in the model's json.
- the api response will still contain the timestamps.
(also valid with id, _id, and __v)
1. create a content type 2. name a string field "id" 3. create a couple other fields (say description etc) 4. create a couple instances of the above type (including typing in ids) 5. view the new record and notice the id field is an auto-generated guid and not the id you entered into step 4
1. get my repo phofhyperlink 2. create new sql database and link it through (sorry i can 't share the oc) 3. first create a new action 4. then create a new contentaction 5. the action is in your database but it 's not appearing in the action dropdown of the "new contentaction" interface; also you get an error 500 can 't find fulltext index matching the column list` for each stroke in search bar.
1. create a content type with a media field.
2. try adding an entry in the content type.
3. in the media field, there is no option to select from the already uploaded files
1. create a contenttype groups 2. create a contenttype question with a title field called title 3. add relation so: a group can have many questions, a question can only have one group.
3. add relation to user so: user can have many groups, group can have many users.
4. try to query for the user with his id, get his groups and find what question titles he has.
1. install graphql plugin 2. start strapi with 'yarn strapi start ' 3. use playground 4. go to localhost:1337/admin 5. a blank page shows up with a little pop up stating "an error occurred during models config fetch" (in spanish, which is my local language)
1. create a content type with a rich text editor 2. create a new piece of content 3. copy above lines of text into the editor 4. place the cursor after the word "incredulity" 5. hit enter 6. click "select them" to insert an image.
7. if all goes well, an extra carriage return is added 8. if upload is slow, such as on aws, uploading my-image.jpg phofimage disappears
example of graphql: phofcode actual result: phofcode json models: phofcode phofcode
1. open a text field which is setup using wysiwyg editor 2. input some non-latin characters without inputting any space or tab.
(here are some for your test purpose: ) 3. click "save" 4. revisit this text filed.
1. deploy a new strapi project to aws fargate with a mysql database in aurora 2. go to `/admin` 3. see a spinner that doesn 't go away 4. open the console and see a `403` on request to
1. go to phofurl 2. run the following query: phofcode 3. see results.
it should be: phofcode 4. now run the same query using query variables.
the query looks like this: phofcode and the query variables: phofcode 5. the output will now include all users as if the `where` clause didn 't exist:
1. create new content type (e.g.
2. create file 3. insert the following to created file phofcode 4. call the following query (in phofurl phofcode 5. see error
1. make a query with multiple models.
1. create a new strapi project (mysql) 2. add `"pool": { "min": 0, "max": 10, "idletimeoutmillis": 3000, "createtimeoutmillis": 3000, "acquiretimeoutmillis": 3000 }` in the database.json in options.
3. npm run build 4. npm start
navigate to roles & permission click add new role cancel button top right does not work
1. npx create-strapi-app my-project 2. choose mysql as database 3. insert credentials 4. choose "no" for ssl 5. run "strapi start" or "npm run start"
step 1 `strapi new test-project --quickstart` step 2 navigate to localhost:1337/admin see console error with 403 forbidden
1. goto: phofurl 2. edit reset password 3. change any content such as shipper email or mail content or subject or response email 4. click save 5. logout 6. forgot password 7. enter email and click send email 8. check your changes which you have done in step 3 are not reflected in mail
1. create new record in model 'post ' 2. fill only 'title ' field 3. save record 4. open record for update 5. fill group 'meta ' and leave group 'description ' empty 6. save record 7. open this but 'meta ' is empty
1. create an entity 'steve '});` 2. update entity from frontend via graphql with filter `input: { where: { id: $id }, data: $pet}` 3. graphql-error: `your filters contain a field 'id ' that doesn 't appear on your model definition nor it 's relations"
1. go to 'content type builder ' 2. click on 'a content type ' 3. click on 'add another field ' 4. click 'enumeration ' 5. add a value with a hypen ( '- ') to the values with field, e.g.
"kebab-case" 6. click done 7. see error
2. change the language.json defaultlocale with 'fr ' 3. call the api with a post request on url with identifier and password in body.
4. get the error message in english
1. go to admin panel.
2. click language menu in the upper-right 3. change language 4. ui does not update
1: spin up a new strapi project `strapi new strapi-test` 2: install graphql plugin `strapi install graphql` 3: create a custom plugin `strapi generate:plugin awsome-plugin` 4: create a custom model for that plugin `strapi generate:model awsomething --plugin=awesome-plugin` 5: go to the and move your models up a level to because it creates duplicate folder on generate (another bug i think ????)
6: try and run it develop` 7: see error phofcode
1. setup str.api with sqlite db (ok) 2. change database connection to mongodb 3. execute strapi start 4. command exit with code 1 and follow stack corp-cms | error something went wrong in the model `file` with the attribute `related` corp-cms | error typeerror: cannot convert undefined or null to object corp-cms | at function.keys (<anonymous>) corp-cms | at at buildrelation at array.foreach (<anonymous>) object.keys.map.model array.map (<anonymous>) module.exports array.map (<anonymous>) mountplugins object.keys.filter.map process._tickcallback
1. in the file change `parser.enabled` to `false` 2. try to log in as admin
1. go to 'admin panel' 2. click on 'add new commic' 3. scroll down to 'select category -> find 4. see error status code 500 error error: er_parse_error: you have an error in your sql syntax; check the manual that corresponds to your mariadb server version for the right syntax to use near 'desc,slug) against(' * we * ' in boolean mode) limit 20 offset 2' at line 1
1. create a _group_ 2. add an _image field_ and check "allow multiple files" 3. use the group inside a _content type_ and make it repeatable 4. add multiple files to the media field 5. save 6. go back to see only one image inside the group (or query the images to see only one response)
when invoked via graphql query name description}})
1. activate s3 as your file upload source 2. upload a file 3. check the details of the file via api, ie.
`/upload/files/2` 4. see the `url` key.
1. install latest beta version 2. add plugins, email, and file upload 3. modify config production for server and database 4. deploy to heroku 5 application builds 6. starting server fails with error > cannot find module './build/toposort.js see error -log below
1. create a ct as "category" 2. create a ct as article and create a field as one to many categories 3. create a article 4. phofurl - check the response.
1. query with variables and where clause 2. query without variables and where clause
1. create a content type with a group field.
2. add aftercreate in the 3. console.log the result parameter.
1. create a content type with a text-type field 2. create an associated content, populate the editor with some styled text (ex.
bold, italic, etc) and save it.
3. try to run the related front-end page 4. see error
1. install latest beta version 2. create a new content type and add an image field via the ui 3. lock the field/ set configurable to false 4. refresh the content manager and check the filed.
the edit button is still visible.
1. go to plugins 2. go to the configuration for files upload 3. set the max file size to and save 4. attempt to upload a file that is larger than mb.
1. create many to many relationship with 2 models 2. edit model setting to disable autopopulate by adding `"autopopulate": false` 3. add some field in one of model using content type builder.
4. see the different using `git diff` phofcode
1. upload some images to any model that has field "media" (multiple files) 2. try to call rest endpoint delete /upload/file with id of one of uploaded media 3. open related model and look to field media or call get /model/id 4. see the same amount of media in that field, but deleted is just empty and there is no way to delete that
1. setup a polymorphic relationship phofcode 2. go to ' phofurl 3. run... phofcode 4. see error
1. create a new project with mongodb.
just follow this guide phofurl
1. add a content type "page" 2. create a enumeration "category" & and add "news" & "movies" 3. add a data on article under category news 4. go to article - listing screen and and category is listed as id instead of news
0. create new strapi project 1. create new model `strapi generate:model instructions title:string body:string` 2. go to admin ui and create new content type with a relationship to the model created 3. save changes 4. can't no longer start server
1. go to content manager and create a group with some number fields 2. give a default value for those number fields and save the group 3. edit that same group and remove the default value of one of the number fields and save the group 4. see error (xxxxdefault must be a `number` type, but final value was: `""`)
1. successfully registered to the user using 2. email is received on given email address but not confirmed the email address 3. when tried to log in with the correct identifier with an incorrect password using <instance>/auth/local api 4. received response is: { "statuscode": 400, "error": "bad request", t"message": [{ t t"messages": [{ t t t t t"id": "your account email is not confirmed" t t t t t} t t t t ] t t t t} t t t] t t}
i was trying to get some objects from my database, that belong to the user logged in.
i 'm getting user information from `ctx.state.user`.
when i request my api via `strapi.request("post", "/page", { data: {/* */}})` from my nuxt frontend using ajax-request everything is ok. but when "server-side request" come into play, `ctx.state.user` becomes `undefined`.
(i ' m using somethig like described in this tutorial cooking a deliveroo clone with nuxt phofhyperlink )
(in beta 8 - behavior we are used to and want to preserve) 1. go to any content type instance that uses relations 2. look at the relations lists 3. see that the displayed value is their -name- (human friendly) image phofimage (in beta 16 - what seems invalid & not desired) 1. go to any content type instance that uses relations 2. look at the relations lists 3. see that the displayed value is their id image phofimage
1. create a one-to-one relation between a user and another content type (profile for example), in the content type builder.
2. create a user entry.
3. create a profile entry linked to the user.
4. open the user entry 5. refresh the page (make sure profile isn 't cached) 6. click on detail for profile link within user entry view.
8. page will show not found error with 404 network response: phofcode
1. go to content type builder 2. click on enum field 3. add a new value in the text area - ex: general 4. hit save 5. error: "values should not start with a number or a special character."
1. am created model file under 2. aftercreate method not firing when i create new role
1. create a group with a relation to a model with more relationships 2. add the group to a model
1. create a `manytomany` or `manyway` relation field 2. set that field to null 3.
`cannot read property 'map' of null`
1. go to content type builder 2. create a group with relation element to other content type.
3. add the group to other content type 4. see error
1. go to 'marketplace ' 2. click on 'settings ' on the content manager plugincard.
3. see the "something went wrong" error.
1. add a contenttype - channel with one required field (name) 2. add a content type - category with channel as releated field 3. on creating datas for category , channel is listed in dropdown as mongoid instead on name
1 create a content type.
2 create a field as an enum.
3 add as values: "test" "test2" "test3" this is including the " characters.
the same is with ' characters.
or if i use values like: te-st it also gives me the error
1. in mymodel.settings.json, set `"idattributetype": "uuid"` 2. in mymodels.js, replace the id with the desired id type.
phofcode 3. set the model to contain an image property--e.g.
: phofcode 4. attempt to save an image.
(i don 't have the error message text handy anymore unfortunately.
but it relates to type integer cannot accept given value.)
1. go to terminal and run the following command _npx create-strapi-app my-project --quickstart_ 2. wait for it to complete execution and open a webpage 3. observe the error
1. create a database with table that has pk with different name rather than 'id ' 2. create a model for this table 3. you cannot use your custom id to perform crud requests in admin panel
1. import a lot of items (in my case 5407 items) 2. query one of that item with graphql
1. go to your panel admin and then to 'content manager' 2. got to the tab groups 3. click on 'any group you just created' 4. rearrange the fields at your will.
5. click on 'save' 6. it prompts a dialog box saying: an error has occurred.
1. go to " phofurl 2. create 5 content types (example: content_a, content_b, content_c, content_d,content_e) for the fields: give them a relation to the parent a-b b-c c-d d-e 3. create at least one content.
4. get the content by the auto generated api. "
1. update to version or higher.
2. take a look at the side-nav.
1. create content type with boolean field, set required to true, and default value is false 2. create new content then save 3. see error: "field is required".
4. you can click false/off -- which is already default -- to save it properly
1. run "yarn create strapi-app api".
2. enter settings for database or go with quickstart, the result is consistent.
3. wait for dependencies to install, the installer will stay a long time at "installing dependencies: [5/5] building fresh packages..." 4. the installer crashes with error code related to mozjpeg module, see below for complete output.
5. cd into api and run yarn build or develop, the app will build and start.
6. run "yarn strapi install graphql".
7. the installer will chew for quite som time and finally fail with error message related to mozjpeg.
"yarn develop/build/start" fails with error message related to module lodash.
9. only way get up and running again is delete the node_modules folder run "yarn build" again.
this brings you back start without graphql capability.
1. go to 2. find `remove-markdown0.2.2` 3. find vulnerability here: phofurl
1. bootstrap strapi 2. install graphql plugin 3. create a user in backend 4. go to apollo client and run phofcode
1. go to the content type builder and create a group 2. add a relation with any model 3. save 4. the server crashes
1. create a group with a relation with
1. have working strapi.beta11 install.
2. follow migration guide for beta15 to beta16 phofhyperlink but substitute: phofcode with phofcode 3. startup strapi, hit api from axios phofhyperlink 4. kaboom.
1. create model venue with field `name` 2. set `maintitle`, and entry title to `name` 3. create model edition with 'has a' relation to model venue 4. create records for models venue and edition, where model edition is related to venue 5. model is still referred to by its id, instead of `name` `metadatas` fetched in edition does not seem reflect the updated `mainfield` for venue.
1. have a stable beta11 install running 2. follow beta15 -> beta16 update guide phofhyperlink after altering bookshelf/knex dependency info to use mongoose.
1. go to content type builder and create 2 content types `test` and `anothertest` 2. create a new group that has a relation with `anothertest` 3. add a repeatable group to `test` 4. add some entries to `anothertest` content type using the content manager 5. add some entries to `anothertest` and especially link some relations in the group section.
6. try navigating back and forth using the link from the group relation field 7. see app crashes
1. create two new content types (contenta & contentb) with one or more text fields.
2. create a new group (groupa) with a text field and a related field linked to contentb.
3. update contenta by adding a new group which refers to groupa.
4. add content, groups, etc.
5. edit any contenta content, scroll to the group (groupa) 6. the groupa entries will have an
1. use mongodb 1. create content type using content type builder 2. create property
1. set db to mongodb 2. run any authenticated graphql query with `bearer ` 3. error: phofcode
1. go to configurations > environments > database > edit a database 2. hold/drag mouse from inside modal dialog 3. move the mouse to outside modal and release modal dialog closes.
1. create a date field and do not specify a default: <img width="649" alt="ctb" src=" phofurl details: <img width="902" alt="ctb settings" src=" phofurl foo.settings.json: <img width="174" alt="model json" src=" phofurl 2. create an entry for the content type via the strapi admin and do not specify a value for this property.
3. view the database (postgres) to see its value: <img width="225" alt="db data" src=" phofurl 4. we can confirm that the table was set up with a default value tables ddl (in postico): width="497" alt="ddl"
1. go to model file 2. create a aftercreate hook 3. try a find with this param : `.find({created_at_gt: 4. check result
2. add a date field.
set default value to 1970, 1 januari, 3. try to create a model of that content type you created.
1. click the `add new user` button in the user content type 2. fill the fields (keep the `birthdate` empty) 3. click `save` button 4. see screenshot error
1. in content type builder, create a string field <img width="704" alt="string field" src=" phofurl 2. in strapi, create a new entry, enter data for this field including leading and trailing spaces, & save it.
<img width="366" alt="data entry" src=" phofurl 3. check the db to see actual string stored.
<img width="121" alt="data in db" src=" phofurl
1. run `npx create-strapi-app my-project --quickstart`
1. upgrade to 2. click on content type builder 3. you might find the message
1. go to content types 2. fill in the search input field by % symbol 3. see error
install strapi with below config phofcode
1. installed latest strapi with 'npm install strapi@beta -g' 2. ran 'strapi new _test_ --quickstart' 3. command line returned this error: _'-bash: strapi: command not found'_ 4. ran all other strapi commands specified in phofurl command line returned this error for all commands, _'-bash: strapi: command not found'_ 5. ran 'npx strapi _test_ (--quickstart
1. update to beta 16 2. run `strapi develop` on existing application 3. see terminal output for error 4. see error 5. downgrade to 15 and it works again
1. make put request to /users/:id 2. update any field in the user model
1. set default database to something like (strapi_data) 2. set users-permissions_roles connection to an alternative database (strapi_users) 3. attempt to start server 4. see that strapi is not using the model connection setting properly
1. build a new project no changes to any setting 2. create a new user via postman - > works perfect 3. try to login via api / curl / swagger / postman-> every time gets 404 error 4. see error { "statuscode": 400, "error": "bad request", "message": "please provide your username or your e-mail."
1. go to 'configuration ' > 'database ' 2. modify or add a new database connection 3. check out the client connectivity options 4.
1. go to plugins 2. click on the gear icon next to content-manager.
1. go to your strapi app directory 2. run `node_env=production is_admin=true npm run setup --debug` 3. see error phofcode
phofurl when i outputed the `permission` information these are the broken part.
1. in content type builder, create a number type and set as either float or decimal.
2. add a new entry using either ff or safari.
enter a value with a decimal like `92.4` and hit submit.
1. install strapi and quickstart 2. install graphql 3. use mutation as stated in strapi documentation (see code snippets) 4. look into
`strapi new strapi` (this will install strapi beta-15) 2. select mysql (i have amazon rds free tier) 3.
`npm install` 5. do the migration from 15 to 16 following the official guide phofhyperlink , in particular update from 15 to 16 these packages: phofcode 6. modify phofcode 7.
1. create a content type names `restaurant` 2. go to roles & permissions 3. check application permissions in any role (you will see `restaurant` permissions) 4. go in the content type builder and delete the `restaurant` content type.
5. recreate a content type with the same name.
5. recheck the role, `restaurant` permissions don't exist.
1) new strapi cms 2) install graphql 3) graphql query (see code snippets) 4) see response
1. create 'term ' content type 2. create 'link ' content type, add two relation columns: 1) 'subj ' relate to term via 'terms ' in many-to-one 2) 'obj ' relate to term via 'terms ' in many-to-one 3. add two term records, it 's ok 4. add a link record for above-mentioned term records, i cannot save, error message is "links is not defined on the model."
send a request with the python code below.
here is the code that i have been using: phofcode for body, i have tried: phofcode for this one, i 've tried the above without content_type field, without the `@` symbol, with just 'files ' and filepath `body = json.loads({ 'files ': filepath})` `body = { 'files ': filepath}` and a whole bunch of others.
whenever i manage to actually get a request through and get the 400 error, error is always same: > error error: invalid json, only supports object and array > at parse > at > at process._tickcallback
1. create content type on development.
2. deploy it to staging and then production.
1.- open an account on heroku.
2.- create an app (following the strapi-heroku deployment guide phofhyperlink ) 3.- install the cleardb mysql plugin.
1. create strapi project locallly with
1. create new a entry via content manager or api 2. update the entry via api 3. see unmodified entry in response 4. go to content manager 5. update same entry via content manager 6. update same via api 7. see updated in api response
1. go to 2. write a custom controller that returns the code found above 3. trigger the controller 4. see error
1. create a model with a text field 2. create an object of that model which has some cyrillic/unicode text in the field example: `{ "title": "" }`) 3. run a rest request on /<model-name>?_q=""
1. following readme's install and new project guide phofcode 2. create the admin user and log in.
3. click on `users` under content types.
5. fill out all fields with valid input 6. save user.
7 edit newly created user.
8. look at the password.
1. create a policy with `ctx.query.owner = "anything";` 2. assign it to any api 3. access the api
1. create a new content-type 2. create some records 3. delete content-type 4. check the database and see that the created records are remaining
1. add content data 2. delete content data with "recycle" button.
3. lifecycle hooks `afterdestory` executed.
4. in `model.attributes` was an empty object.
1. go to 'admin panel content builder' 2. add new content type `categories` 3. go to `user` collections and add relational field name `categoryid` to categories 4. go in advanced settings tab and check the `unique field` 5. create new user from front end using strapi sdk or axios with any valid mongodb 24 digit id and it will created without any error
1. create a new content type "book".
2. add new policies `isexecuted.js` to path phofcode 3. update phofcode 2. add new "book" in admin panel.
3. policies `isexecuted` not executed.
i 'm simply sending a post request to the strapi server (able to authenticate and get jwt token on /auth/local route).
the body is raw json (application/json): "score":5.8, "predictionmodel": so i 'm clearly sending "computedmodel" as a parameter, but strapi doesn 't acknowledge it?
i update each plugins except strapi-plugin-graphql in package.json and run yarn in the console.
all seams to work perfectly but when i try to update strapi-plugin-graphql the console exit with code 1.
save the same data with a json field from the admin vs strapi.request sdk.
1. created new project using: npx create-strapi-app <name-your-project> 2. i updated to use `postgres` and ran `npm install --save pg` phofcode and specified these production env vars in my web host (render.com, like heroku; values ommitted): phofcode 3. i set render.com to use these commands, which seem to work as expected: build command: `npm install && npm run build` run command: `npm run start` 4. during build, i get the two errors described earlier.
the end result is build fails (error code > 0) and strapi starts itself (but sqlite is used and postgres isn 't altered by strapi in any way).
i say sqlite is used b/c redeploying wiped out any data, such as new users, entered in the admin then the start new screen is shown after every deploy.
1. go to content type builder 2. click on an existing content type with at least one number type field 3. click the edit icon on a number field 4. go to advanced 5. check minimum value 6. try to enter a minimum value of 0 (steps 2 and 3 can be replaced with adding a new number field to an existing content type, or by creating a new content type and creating new number field).
1. strapi new heroku-dashboard phofcode
1. change the favicon path settings at like suggested here phofurl 2. watch nothing change or 1. replace the favicon.ico in any folder 2. watch nothing change
1. query the user model with the below graphql query 2. you should get an empty result
1. create a new mongo cluster 2. install a new strapi application with a mongodb database.
3. start strapi for the first time.
1) create a file type field with a multiple mark 2) add multiple files to it 3) save item image phofimage if the content editor wants to delete the file 1 out of 10 he will have to look for it for a long time by touch.
you also have icons for certain types of files(pdf, zip, jpg), i think its worth adding a default icon to other files
1) create date type field 2) display field in list 3) add an item without filling the date field 4) open item list date phofimage
1. create a strapi project using mongodb 2. create a content type that has a many-to-many relationship to another content type 3. create a new instance of the new content type and add relationship to another content type 4. in lifecycle callback, observe that the model's array for the many-to-many relationship is empty.
0. have the strapi graphql plugin installed 1. create a new content type post with 2 fields: `name` (required) and `comments` (not required) 3. create a post entry 2. allow the public user all permissions for post 3. go to the graphql interface and test the deletion query: phofcode 4. see error
1. create 2 content types.
one parent, and one child (in my case it was one-to-many relation) 2. create many child models (1k +) 3. make sure child is displayed for parent's edit page 4. try to edit parent entry 5. see how it stuck
1. install and init a strapi project locally 2. configure an admin user and api permissions 3. create a content type, add some posts 4. configure api permissions 5. deploy on heroku with heroku cli or with github 6. wait 24h 7. after 24h admin users and api permissions are reset and need to be reconfigure
1. go to admin 2. change to random language 3. see that link to
1. npm install 2. view version of in package.json
1. create model with json fields 2. create entry with some json data 3. update created entry (important: do this through generated api, not through admin panel) 3. look at the response
1. create a project 2. npm run develop
1. create new content type 2. name the content type row
1. open console 2. run phofcode 3. choose custom installation 4. provide configuration 5. see this error
post /auth/local/register http/1.1 host: localhost:1337 content-type: application/json { "email": "foo@bar", "password": "blablalbal231sad" }
1. create new content type "news" 2. add "date" field, don 't make it required by default 3. create a new "news" page without filling "date" field and save it.
in database (mysql in my case) this field would be empty.
4. try to add code from
1. install strapi using --quickstart defaults 2. create a new content type with a string field that has the "unique" config setting set 3. create an item with "test" in the unique field from 2 4. repeat step 2 with "test" in the unqiue form field 4. both items are added
3. create 2-3 entries for type.
4. get request for blogs?_q=query 5. all entries is returned, no matter what the query matches.
1. add new user, name it "server" 2. add new role, name it also "server" 3. server role disappears.
1. go to ' phofurl 2. click on '+ add new user' 3. create the user by adding username and password and checking confirmed '....' 4. add the role authenticated 5. wait for server to restart 6. then logout of the admin panel and try to log in with the credentials you created 7. receive an error screenshot from phofimage
add a new content type.
add a new field to it.
use "id" as a field name.
1. create question type in ui with string field "name" 2. generate questiontype api `strapi generate:api questiontype` or create it in ui with lowercase and then rename it to questiontype (because of the bug 4.)
3. in ui create relation field questiontype.questions (many : 1 ) question.questiontype.
(see screenshot 4. in ui try to add new quest
1. make new project with strapi beta 14 2. create user in admin ui 3. try to update user in admin ui 4. see error
1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
1. create a new project 2.
`yarn build` (if not quickstart) 3. enter phofurl 4. see login screen instead of register
1. go to strapi cli 2. run strapi generate:model category --api product to generate new model inside existing product api
1. run command line `npm install -g strapi@beta` 2. after install i cannot make strapi run, all commands are not found and when i add the env variable on windows 10, it says error.
1. create a json field 2. add json schema 3. save 4. get error
1. create a model (a) with string field called "value" 2. add an entry in this model 2. create another model (b) which has a one-way relation with the previous one 3. and an entry in this model and set a value for the related a 4. try to save 5. an error should appear on top of the page and a `error error: invalid input syntax for integer` should appear in the logs
console strapi new my_api custom (manual setting) ?
choose your default database client ?
choose your default database client mongo ?
database name: my_api_db host: host: +srv connection: (false) false +srv connection: false port (it will be ignored if you enable +srv): (27017) port (it will be ignored if you enable +srv): 27017 username: ' ' username: ' ' password:
open strapi and you can see all content types
1. configure a custom admin path in i.e., "/panel" 2. rebuild strapi admin 3. go to ' phofurl 2. click on 'forgot your password?.... '
3. enter your user 's email address and click on 'send mail ' 4. check the link in the reset password email sent to your email address.
it uses the default "/admin/..." path when it should be "/panel/..."
(updated) 1. create a strapi project according to the quickstart 2.
`npm i 3. configure to use nodemailer in plugins > email > provider 4. create under extensions an email folder with controller (extensions > email > controllers email.js) last time i did this - last week - it seemed that the email folder was created for me.
now only user-permissions folder was created.
5. copy and paste the 'send' method from the 6. modify subject on options object
1. go to create entry with date field 2. do not fill date field 3. save 4. check created entry
npm install strapi@beta -g strapi new my-project --quickstart
1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
1. download and run the login-react phofhyperlink example 2. download strapi.
3. create a facebook login app 3. add the facebook redirect_uri configuration to environments > development > server.json 4. create a tunnel to localhost:1337 5.
`strapi build` then `strapi start` 6. in the strapi dashboard roles & permissions > facebook enter the client id, secret and redirect url to front-end app, in this case with create react app is ` phofurl 7. configure facebook app so that ` phofurl is specified as a valid oauth redirect url.
8. click button to connect facebook, you should be redirect facebook, but on inspection of url, uri is still ` phofurl
1. environment is `development`, database is `sqlite 3` 2. enable email confirmation 3. register and open confirmation url in email 4. call login api 5. got `your account email is not confirmed`
1. change amountlimit to 10 2. go to graphql phofurl 3. make a query without limit 4. it returned me 100 records,
following this step phofurl i installed strapi using:strapi new my-project selecting custom (manual settings) connected to mongodb atlas i am able to create content type builder but not able to add new content.
1. create one-to-many relation 2. console.log lifecycle methods
1. install strapi 2. create model 3. build admin using node_env=production npm run build 3. start in production mode using command node_env=production npm run start 4. you should get error saying error typeerror: cannot read property 'replace' of undefined
1. phofimage 2. phofimage 3. phofimage 4. phofimage
create new content type and put console log to it's rendering three times every page loading.
1. create a model with a boolean value 2. attempt to create an entry 3. see error in strapi terminal console * note * : it appears this does not affect data sent over rest or graphql as you can see in the example provided from postman
1. install latest strapi 'npm install strapi@beta -g ' 2. create new project 'strapi new test ' 2.1. choose manual method 2.2. use mysql server 3. go to the test directory and run server 'strapi develop ' 4. everything works 5. stop server 6. add graphql plugin 'npm install starpi-plugin-graphql --save ' 7. try to run strapi again 'strapi develop ' 8. get error "typeerror: cannot read property 'routes ' of undefined"
1. create a content type with a boolean field for example `enabled`.
2. make the content type public.
3. make a request to the api with this param.
4. you should get an empty response.
1. image phofimage 2. image phofimage 3. image phofimage
1. install strapi like normally 2. run it 3. go to phofurl 4. press "start the quick start tutorial" 5. see "500 internal server error" error on the page.
install and configure the create a new content-type with a `media field` for images.
save an image to the content type check db and see complete url.
i have an online staging site.
feel free to: 1. go to phofurl 2. run the query: phofcode the speed is normal.
3. now run this query to also contain image ids: phofcode the query takes forever and thats just with 10 books.
it is unusable when images are requested.
4. now try to request directly with rest: phofurl it is lighting fast while returning everything.
1. create a model `customer` with a relation to `users-permissions` : phofcode 2. use `curl` and replace `xxx.xxx.xxx-xxx` by your own bearer token (in admin mode) and try to create a new customer : phofcode 3. check your database and see if the user is set correctly image phofimage 4. retry many times... 5. in my case, i need to retry 4 times before the last is set successfully image phofimage
follow the document to activate provider for google social sign in, then go to phofurl phofhyperlink
1 installed using `npm i -g strapi@beta` 2 tried to create a new project using `strapi new cms --quickstart`
1. query a content types relationship with variable in a nested filter 2. compare the results to the same query entering the string directly in the filter
1. build a multipart form manually with some binary file, without the `content-type` part header 2. post to /upload
1. create new content type (let's call it `page`) 2. add new field, for example a string type with the following name - `title_en` 3. go to: 4. open filters panel, choose `title_en` is `123`, press enter 5. you will see the following filter text: image phofimage so it cannot search because of this.
1. upgrade to beta.6 from alpha.26.1 2. click on content manager and attempt to edit (certain) component
1. go to phofurl phofhyperlink 2. type the following graphql query 3. click "play" 4. see error the query is: phofcode returns phofcode
1. go to graphql playground 2. execute simple query 3. the error will come
1. update to strapi beta.7 2. try to connect with facebook 3. an error 500 occurs phofcode _i 've overload the auth.js but with the "original" version, the bug still happen._
1. mongo dump a strapi database after set permissions on public 2. mongo restore on another database 3. create new strapi on this new database 4. look permissions on new strapi, they are empty, but in database the entries are in the right document
1. go to phofurl phofhyperlink 2. click on `add new administrator` 3. fill in the fields as normal and click `save` 4. view the `strapi_administrator` table in the postgres db (you should see the new admin created and a hashed password) 5. now click pencil icon to edit admin you just created.
update password and click `save` 6. view `strapi_administrator` table in postgres db (you should see admin password now set as plaintext in db, and now you cannot log back using new password set)
- i work on vue.js project - i have form with input file.
phofcode - function phofcode : phofcode function phofcode : - error of response display on network: i try to send directly the image buffer, but this error was displayed: i try to send directly the image binary string, but this error was displayed:
1. go to strapi admin panel 2. click on users 3. debug network you will see count api error
1. clone strapi 2. run yarn setup
1. override your `user.settings.json` & `role.settings.json` to another database 2. install the documentation plugin 3. try to start your application in `production` or `staging` 4. see error
1. create a model in content type builder 2. make every action public on this model 3. launch a "find" query on this model, adding an authorization header with random content (using postman, curl...) 4. see result: phofcode
1. go to strapi admin 2. go to files upload 3. drag and drop or browse and select file greater than 2mb 4. wait for upload to fail and see error
1. the content must have json fields.
2. now using nodejs or any other language, get the authentication token 3. now, send a post to the content that was created.
1. upload many files to server for an entity 2. refresh and check all files are ok 3. upload new files to server for the same entity 4. refresh and check all older files and new are ok 4. see than all previous are unlink from _upload_file_morph_ relations table
1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
1. go to phofurl 2. click on connection name and write something with spaces 3. click on save button 4. see error in a console
1. create a new strapi 3.0.0-beta.5 project with mongoose 2. add a user document 3. create an api for the post collection with the following fields: title (string), author ("has" relation towards user) 4. uncomment `afterfetchall` of post and put a `console.log(results)` inside 5. add a post document 6. perform get request on `/posts` or `/posts?title=something` 7. perform get request on
1. in the "configurations" -> "request" page.
2. in the "roles & permissions" page.
`strapi -- generate:api stuff cms_name:string 2.
`strapi develop` or `strapi start` get this error: phofcode probable reason: strapi generate:api replaces "_" with " ", which messes up graphql syntax.
use that pr and regenerate the documentation you will see them being populated at the top of the file.
1. install the documentation plugin 2. create the extensions path file 3. copy over the node_modules version of the file 4. modify extensions version with some change 5. start/restart server and regenerate documentation 6. restart server if needed 7. load documentation
1. make a copy and rename it to qa.
2. run `node_env=qa strapi start`.
3. you should see the following error.
1. go to 'marketplace ' 2. click on 'download ' of roles and permissions 3. admin panel goes to infinite loading after server restart.
4. see error "unhandled promise rejection in browser console"
1. turn on `enable email confirmation` 2. register via `/auth/local/register` 3. click on link inside incoming email
1. go to content type builder 2. click on any already existing content type 3. click on add new field 4. select data type, insert name and default value 5. save
1. go to aws light sail console and create ubuntu 18.04 (os-only) free instance.
2. install nvm phofcode 3.` npm install -g strapi@beta` 4. the installing process is killed phofcode
1. add the settings.json file at 2. make a change in the settings.json file 3. restart the server 4. regenerate documentation 5. check for changes
1. create a new `text` field on a content type.
2. turn on the wysiwyg editor for that new `text` field.
4. change that `text` field to a `string` field.
5. add a new entry to your content type that contains said field.
6. see that the wysiwyg editor remains, when it should just be an input
`strapi new api.domain.com` 3. choose your installation type quickstart (recommended) 4. quickstart 4. see error
1. add a new custom route 2.
3. click on `public` 4. check the box next to the newly created route 5. try to access the route in the browser.
1. run `docker build -t app .
` 2. build fails with following error:
- create a data type - add more than 100 records - install graphql plugin - query it using limit set to -1 and >amountlimit
1. write some custom graphql schema 2. start the project 3. use the custom query/mutation 4. see error
1. create many-to-many relation between two entities (relation table is created as expected) 2. shut down strapi 3. start up strapi again __error message from above__ if i remove the relation table,ii am able to start up strapi again.
the relations is then (of course) lost between the entities.
1. according to the documentation phofcode 2. run failed and shows cannot find module 'lodash'
1. go to admin panel 2. click on roles & permissions 3. select a particular role to assign permission 4. you will get unexpected error happened i.e 500
follow the steps of the contributing guide: phofurl 1. git clone phofurl 2. cd strapi 3. yarn setup 4. strapi -v
1. create a user model with overlapping properties with users-permission-user 2. install graphql plugin 3. start server 4. see error
just follow the exact command in your document on a fresh ubuntu 18.04 (follow exactly from installing npm,....)
`npm i strapi@beta -g` 2.
1. go to ' phofurl and follow the steps.
i am using phofurl i have configured strapi, created articles (3), can verify the roles and permissions to "public" user.
i can access the articles unauthenticated (using incognito browser) at phofurl 2. scroll down to the section in tutorial to update index.js articles list first, we want display list of articles.
to do so, add following content in existing home page file: path: src/pages/index.js 3. run `gatsby develop` 4. see error warn the gatsby-source-strapi plugin has generated no gatsby nodes.
success source and transform nodes - 0.223 s success building schema - 0.196 s success createpages - 0.004 s success createpagesstatefully - 0.044 s onpreextractqueries 0.004 update schema 0.023 error graphql error encountered 1 error(s):
add database connections to one database per environment.
all postgres (can be on same db-instance).
open admin interface and see how they appear differently.
1. setup fresh strapi instance 2. create a new data type with a text field 3. create some entries 4. switch to the list view and search for some entries 5. try to select one ore more entries using the checkbox
strapi welcome page opens without any issues.
however, when i try to go to admin page i see a blank page.
setup ec2 t2.micro, setup a new strapi project, try to build.
once at 91% the machine eats up all the memory (from approx 30% of 1gb before 90%).
machine crashes after 20 min.
1. have installed, configured 2. set up content type with multi media 3. go to content type containing multi media 4. attempt to upload multiple images 5. view results
1. create an embedsmany relation where the embedded model has a composite id as described by: phofurl 2. add an array of embedded objects where one (e.g.
the first) of the id properties is a duplicate, but other id properties is not a duplicate.
i was following this tutorial: introduction to loopback - using it with sqlite3 phofhyperlink these are the steps in short: phofcode now when i start lb with: `$ npm start` lb is showing an error.
this was not the case with the in-memory database.
create a hasmany relation like this: "type": "hasmany", ... "properties": { "type": "type" }, "options": { "invertproperties": true }
insert anything from any model.
then console.log the ctx parameter from after save hook.
to help us help you, if you 've found a bug please consider the following: * phofurl when you type a value in the input, it should change the "enter your pin".
it is actually good when you remove the reactive declaration.
simple use the svelte repl and paste the following into app.svelte phofcode * if you can demonstrate the bug using phofurl please do.
repo url: phofurl * if that 's not possible, we recommend creating a small repo that illustrates the problem.
* reproductions should be small, self-contained, correct examples c phofurl occasionally, this won 't be possible, and that 's fine c we still appreciate you raising issue.
but please understand that svelte is run by unpaid volunteers in their free time, and issues that follow these instructions will get fixed faster.
phofurl the first line `a a` shows that the initial value of the array is `['a']`.
the second line `b` shows that the value of the array inside slot is `['b']`.
the last line `a b` is unexpected.
it shows that value of array is still `['a']` yet each block referencing array from slot, `['b']`.
i created a live demo here: phofurl the source is here: phofurl phofurl the issue i see is rooted here on the generated code: phofurl phofcode
see example here phofhyperlink in the above link, it works as expected.
phofurl click the button expected: the number of "val" \'s on the screen increases, actual: no change
_this throws a compilation error but should output the `item.label`._ phofcode _this compiles but renders poorly._ phofcode _this renders correctly but you need to maintain some sort of label -> item lookup if that 's even possible._ phofcode
open repl phofhyperlink i created the simplest custom element that do `console.log` of attribute `prefix` when connected.
but svelte can't create such attribute because there is a read-only property `prefix` on htmlelement prototype.
actually svelte won't define any attribute if there is a property with the exact name.
instead it will try to assign the value directly to the property.
<my-app foo-bar="baz"></my-app> and the svelte file: <svelte:options tag="my-app"/> i get undefined on the other hand, this, for example, would work: <my-app foo="bar"></my-app> and the svelte file: <svelte:options tag="my-app"/> <script>export let foo = 0;</script>
first repl where you see the expected behavior: phofurl load the page, hit the button, see the error message second repl that shows how i actually want my code to be: phofurl load page, hit button, no error message.
type in input, error message shows up
- repl showing the issue phofhyperlink against `3.13.0.-alpha.2` - same repl working phofhyperlink against `3.13.0.aplha.1` - same repl working phofhyperlink against `3.12.1`.
1. go to phofurl 2. add a line like `import 'leftpad ';` to the default `<script>` tag 3. click the icon for "download zip file"
repl 1 with bug: phofurl repl 2 working without slot default: phofurl
with local variables, it works as expected: phofurl phofcode with a component prop, it does not: phofurl phofcode if `<h1>outer $s = {$s}</h1>` is commented out, no subscribe/unsubscribe occurs when the button is clicked.
extra unsubscribe statements appear in the console when editing the code when the old component is unmounted.
phofcode and try to load it with brave browser.
phofurl 1. create a store 2. subscribe to it in component a 3. create an element with ``out:fade`` in component a 4. destroy component a and trigger a store update before the animation has completed result: component a never got destroyed.
phofurl a green "tap here!"
visit this repl, wait three seconds and click the number: phofurl
navigate to phofurl ...and click on the + / - / reset buttons.
create a `subcom.svelte` and add this code: phofcode now in `app.svelte` add this code: phofcode you should see the error.
to fix the error just change `subcom.svelte` to: phofcode
check link in example phofurl
- build a simple svelte application (doesn't matter if it uses ssr or not) - load a standalone component built from another project (using a `<script>` tag or something) - render the component inside a component from the main application using `<svelte:component />` - see `getcontext` in the standalone component return `undefined` because it (i think) doesn't have the same context
just run something written with svelte on a ios 9 device.
if you can 't find one, you can try it out on xcode iphone simulator just as i did.
i 've had it happen twice since yesterday, but unfortunately, i can 't reproduce it yet.
it either just happens after a long enough period of time, or if an error is produced and left for a long enough period of time.
i 'll let you know if some pattern emerges, but though it 'd throw it up here in case people are having similar issues or have come across it before.
compile the above, and look at the invalid code that's generated.
phofurl - remove debug, it compiles properly - remove the inner loop, and it compiles properly.
- debug is not at fault here, because in my project, the `index` is no longer passed onto nested loops which breaks my code.
there are comments in the example ( repl phofhyperlink ).
phofurl (see ssr js output)
the repl: phofurl the local version: phofurl app.svelte phofcode componenta.svelte phofcode componentb.svelte phofcode componentc.svelte (just for a sanity check) phofcode when running the app in a repl, the output is: when running the app locally, the output is:
bundle any svelte app with rollup 1.21+.
try creating a component lib (one output contains "generate": "ssr", while client output "hydratable": true) and import the lib into your sapper project.
component lib 's package.json "main" points to the ssr lib while "browser" points to client output.
phofurl or try `{1 === 1}` in your code.
uncommented the line aboveand comment the one above it 1) run npm run lint from the command line 2) edit the app.svelte and save file
phofurl in the repl, 1. is an example of this bug, 2. is an example showing how if the component is transitioned out completely then the slot is updated properly.
here's a couple of examples the issue: phofurl phofurl
phofurl there is a comment in the fieldset.svelte component indicating how to remove the {...props} from being adding props to the component.
removing that will make reactivity work again.
to see it work properly, you can set this to version 3.6.7
codesandbox example: phofurl (specifically the todos.svelte file)
<script> let toggle = false; function _toggleme() { if (toggle = !toggle) { console.log(toggle); } else { console.log(toggle); } } </script> <button <span class="text {toggle ?
"red" : "blue"}"> text </span>
i've setup a couple repls to help reproduce and hopefully help come up with a solution.
- here's the original version.
test on mobile safari and you should see a black rectangle instead of the gradient: phofurl - here's a trimmed down one without the svg animation just in case it get's distracting and to show that it's not part of the issue: phofurl - here's another that i tried to create svg outside of svelte's element creation as test: phofurl - last, here's it working (just using vanilla js and svg el, same link in expected behavior) phofurl
check out this minimal repl - phofurl in safari (12.1.2), select the input control in the middle and make any sort of edit.
notice how the cursor jumps to the end of input control.
i was unable to reproduce this in the repl (i assume it doesn't support dynamic imports), so here is a repro repository: phofurl just run `yarn build && yarn start` and then open up the webpage and attempt to click the button.
it will switch the to-be-imported component from `child1` to `child2` (both of which dynamically import `subchild`)
reproducible in repl: phofcode this error can be worked around by passing arguments into the iffe: phofcode
click update a couple times in this repl phofhyperlink
repl phofhyperlink on removing the curly braces, svelte will correctly invalidate the array.
1. go to < phofurl 2. click the three things it tells you to click 3. see that the blue and purple (if and else parts of the if/else in app.svelte) are both showing if you remove `transition:slide` from `scaffold.svelte` the problem is no longer there.
1. create new node project: `npm init -y` at empty folder 2. install svelte and tyepscript: `npm i -d svelte typescript` 3. configure typescript: phofcode 4. create `test.ts` with the following import: `import * as svelte from 'svelte/compiler '` 5. run `npx tsc`
- with meteor: phofurl - with rollup: phofurl
can be reproduced in repl: phofcode you get the `todo this should not happen` message at repl bottom.
i was actually using rollup and preprocessed svelte files with babel to get `optional chaining` syntax support.
i got this "todo" error when i wrote something like `export let x = a?.b`.
i eventually discovered that the optional chaining will transpile into code with in expression assignments.
the assignment is what actually killed svelte compiler.
repl phofhyperlink clicking the `refactoredbutton` causes the internal state of `refactoredbutton` and `value` to go out of sync.
repl repro phofhyperlink open that repl link, switch to the "js output" tab, and switch from dom to ssr mode to see the issue.
was on my latest xiaomi trying to edit phofurl as soon as i type a character the editor deletes it.
svelte phofcode vue (for comparison) phofcode
simple reflection of props fails in 3.7.1 phofurl
repl: phofurl (obviously there are more suitable/effective patterns that could be used to implement this trivial example, but it's intent is only to distill what i encountered in a more complicated scenario.)
i created a small repo to test, as the repl site doesn 't allow compiling to web components.
phofurl please see the readme
have a component with the the html for a paypal donate button.
it will always generate the error when you compile.
but, since it 's a warning, i still get the processed files okay.
* if you can demonstrate bug using phofurl please do.
* if that 's not possible, we recommend creating a small repo that illustrates problem.
* reproductions should be small, self-contained, correct examples c phofurl occasionally, this won 't be possible, and that 's fine c we still appreciate you raising issue.
but please understand that svelte is run by unpaid volunteers in their free time, and issues that follow these instructions will get fixed faster.
phofurl download, build and start to see the text
this repl demo phofhyperlink contains the bug, though it 's not directly visible since it 's ssr-only.
the offending code is this: phofcode `$$slots.default` corresponds to this: phofcode this fails with > typeerror: cannot destructure property `id` of 'undefined ' or 'null '.
here's the repl phofhyperlink .
i've tried to boil it down as much as i could and cover any edge cases i could imagine.
i could not find a smaller way to replicate this.
if you click on the component a/b/c tabs, you'll see that when navigating from comonent c to components a or b, the tab selection does not always update, even though the tab content does.
v3.6.3, it's smooth: phofurl v3.6.4, it's glitchy: phofurl note that it doesn't matter which child has the transition on it.
it's always going to be the last child glitching out.
... steps to reproduce the behavior: 1. scroll down to 'schemas ' 2. click on 'person ' to expand it 3. scroll up to the top of the page 4. see error
... steps to reproduce the behavior: 1. launch swagger ui 2. perform an api invocation 3. scroll down to api response 4. notice that the first line of the response is having the line "can \'t parse json.
... `docker run --publish --rm --read-only
... steps to reproduce the behavior: 1. go to phofurl 2. input ` phofurl into the textfield at the top.
3. press "explore" 4. it gives the following error: > # failed to load api definition.
> > ## errors > **fetch error** networkerror when attempting to fetch resource.
phofurl **fetch error** possible cross-origin (cors) issue?
the url origin ( phofurl does not match page ( check server returns correct headers.
5. retry with ` 6. it works.
... 1. wrap the `markdown` component: phofcode 2. render an openapi spec, e.g.
phofurl 3. expand an operation
... steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
... steps to reproduce the behavior: use definitions added tho this issue
... steps to reproduce the behavior: 1. update file swagger-config.yaml to add "displayrequestduration: true" 2. run "npm run build" 3. copy files under list/ directory to your website location 4. open your oas and use try it out feature then check in the response and you would see that there is no "request duration" box.
... steps to reproduce the behavior: 1. open swaggerui 2. extend address with "?urls=[]" or change inital swaggerui configuration inside index.html to something like: phofcode
... steps to reproduce the behavior: add a summary and description under a path
... steps to reproduce the behavior: 1. statically serve the `swagger.json` shown above 2. type some invalid json (e.g., foobar) in the only field 3. click execute 4. see error
... 1. open swagger ui with the json definition i shared 2. open /system/info 3. click try it out 4. enter a value (e.g.
`bearer x`) in the header box 5. click execute
... steps to reproduce the behavior: add a description to a openapi 3.0.0 response object try to view it in swagger-ui v3.23.4 or greater
... 1. open phofurl 2. click "try it out" 3. click "excute"
... steps to reproduce the behavior: 1. go to phofurl 1. authorize via `api_key` with some gibberish 1. close autorization window 1. open url in topbar of the same petstore browser window: phofcode (this is just a minimal spec to reproduce this issue i created on gist: phofurl on the test spec open the authorization window again you will now see that you are still logged in with `api_key` but for wrong api
... try the below snippet on phofurl phofcode i took this example from the swagger documentation: describing request body form data phofhyperlink .
... steps to reproduce the behavior: 1. go to phofurl and paste the example above.
3. from the "examples" list, select the example `1`.
(note example is not updated to xml - this is issue #5460).
... unfortunately i 'm unable to provide a quick test for this as i 'm only involved in the ui portion.
if required, i can spend time setting up a concrete sample.
... steps to reproduce the behavior: 1. run docker container with `docker run -d -p -e url= phofurl -e validator_url=null swaggerapi/swagger-ui` 1. browse to the local swagger ui using something other than `localhost` (e.g.
` phofurl 1. the validator badge displays as a broken image with a broken link
... steps to reproduce the behavior: in swagger-ui 1. navigate to the specific path 2. click on 'try it out ' 3.
'execute ' 4. inspect response body
... steps to reproduce the behavior: 1. go to api 2. choose any method 3. click try it out 4. click execute 5. error: image phofimage
... this is on a local development environment so i cannot share a link right now, but any suggestions of things to try, parameters to add, etc - would be appreciated.
if someone knows how also, when i do the markup for a link on one of my other pages, it always adds target=_blank which i do not want because i am linking around the same site, how can get rid of that?
is it possible that having the urls.primaryname in my url is causing a problem?
all the working examples do not have that.
... steps to reproduce the behavior: 1. go to phofurl 2. click on `/api/bar` 3. see ui jump to a new category
... steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error
... steps to reproduce the behavior: 1. go to the swagger editor 2. copy/paste the yaml definition 3. select the `--` choice in dropdown for `type` parameter.
4. see following error: phofcode
... steps to reproduce the behavior: 1. open swagger ui using provided yaml file in eclipse 's internal browser.
2. click `expand operations` button.
3. in the parameters section, click `add item` button 5 times.
expect the `add item` button to disappear as the array is full, it does.
4. click `delete item` button.
5. expect `add item` button to re-appear as array is no longer full, but it does not.
similarly, using an external browser such as firefox 68.0 (64-bit), results in a similar behavior in that `delete does cause `add button to be displayed, but `delete last does not.
... ust send request with matrix parameters
... steps to reproduce the behavior: 1. load to example yaml 2. see error
... steps to reproduce the behavior: 1. open the operation.
2. click "try it out".
3. observe that "first" is the active example.
4. modify the request body value.
5. observe that `[modified value]` is now displayed in examples dropdown.
* note that you have just "derived" your new modified value from "first".
6. select "second" in examples dropdown.
* observe that "second" is now displayed in dropdown and example detail section.
8. select "[modified value]" in examples dropdown.
observe you 're back to modified value you derived from first, but second is now displayed alongside your modified value.
... steps to reproduce the behavior: 1. point swagger-ui at an api spec that uses a path-relative url for the server, not a host-relative one 2. try to use swagger-ui 3. observe it sends requests to incorrect urls
... steps to reproduce the behavior: 1. go to phofurl .
1. paste the openapi config from above.
1. start capturing the request via wireshark (loopback, port 4444 - as defined in the config).
1. open post test tab.
add a few files to array.
see in wireshark that request looks like example above.
... 1. go to phofurl .
1. paste the openapi config from above.
1. open the `post test` tab.
1. click the "try it out" button.
see that there is no prompt for additional properties (only for `foo`)
... steps to reproduce the behavior: 1. fill the blanks for the /api/v1/profile request 2. make the request 3. the requests sends following payload: phofcode
... steps to reproduce the behavior: 1. configure swagger ui as specified above.
2. open swagger ui with the browser console open.
3. observe the debug output.
... steps to reproduce the behavior: 1. go to ` phofurl 2. add a required header to the post /pets endpoint.
to do this, in the parameters for the endpoint add this yaml: phofcode 3. after ui updates, go to post /pets endpoint and click 'try it out ' then `execute` without filling any value for required header.
4. the ui will hang on 'loading... ' image.
... - npm install -g http-server - cd - http-server -p 3333 -c-1 --cors - open swagger ui (i.e.
dist/index.html) updated `index.html` with url ` phofurl open the `index.html`
... steps to reproduce the behavior: 1. open swagger-editor site 2. paste in provided openapi spec from this ticket 3. click to unfold the `get /pet` endpoint in live preview 4. see error in editor and `wrong` example in live preview.
... api is not publicly available at the moment.
you can import yaml part in a working openapi 3.0 and try to execute a test call.
... steps to reproduce the behavior: 1. go to editor.swagger.io 2. add a dictionary with examples to a component schema 3. look at render 4. see no examples in the schemas section.
... steps to reproduce the behavior: 1. navigate to phofurl -> tab key over to "try it out" button -> enter key -> tab key down to execute -> enter key tab over clear enter 2. navigate phofurl tab through the entire page 3. navigate phofurl "try it out" button 4. navigate phofurl lock icon enter 5. schemes combo box authorize button 6. pet link 7. over "try it out" button 8. down "parameter content type" combo box 9.
... implement a `parametermacro` when using an openapi 3.0 spec.
notice the function fires, but it does nothing.
... steps to reproduce the behavior: 1. go to phofurl 2. click on 'execute. '
3. scroll down to 'results. '
4. see how 'results ' is written in small font just after the executed result.
->navigate parameters table use caps+arrow keys read table values 9. expand and collapse put/pet operation 10. models inspect element: group "" 11. navigate responses table use caps+arrow keys read row2,column2 12. pet expand operation 13.
14. inspect expand/collapse button 15. authorize enter value api_key authorize 16.
17. available authorizations value edit box 18.
'x ' button close 19. available authorizations value edit box 20. inspect "parameters" & "responses" tables 21. try it execute curl 22. models order expand/collapse carrot 23.
'x ' button close 24. try it edit 25. apikey description cell
... steps to reproduce the behavior: run chrome accessibility assessment or siteimprove extension.
see below screenshots for details.
... 1. create a path with a parameter in it, such as `/api/collection/{id}`.
2. put a `parameters` object directly under that path 3. place the path parameter in the parameters object.
4. do * not * place a path parameter in the operation.
... steps to reproduce the behavior: 1. add an oauth definition to your swagger.yml file with a relative url as the autorizationurl value 2. try to authenticate with oauth 3. observes that you are redirected to the relative url you specified but on the swagger ui host, instead of api server.
... steps to reproduce the behavior: 1. go to phofurl 2. paste in the config above 3. notice the incorrectly rendered code blocks
... steps to reproduce the behavior: 1. set a securityscheme like in the standard example 2. click on authorize 3. the description is not visible and this text is always displayed: scopes are used to grant an application different levels of access to data on behalf of the end user.
each api may declare one or more scopes.
api requires the following scopes.
select which ones you want to grant swagger ui.
same behavior if you don't set any scopes.
... steps to reproduce the behavior: 1. in your swagger ui configuration, import `swagger-ui` as `swaggerui`.
2. add to your plugin configuration.
3. use a layout that includes topbar.
4. load your swagger ui website.
... steps to reproduce the behavior: 1. fire up ui with it pointing at the petstore api.
2. point ui to a http url with no `schemes` value defined.
... steps to reproduce the behavior: 1. render yaml with type: string and format: date 2. open an example value in the browser
... 1. render yaml with type: string and format: date 2. open an example value in the browser
... steps to reproduce the behavior: 1. create an openapi spec with some errors in it.
2. load that spec using the swagger-ui 3. observe error messages flash at the top of the page and disappear
... steps to reproduce the behavior: 1. try to expand
... steps to reproduce the behavior: 1. go to editor.swagger.io 2. paste yaml
... steps to reproduce the behavior: 1. go to 'generate client ' > 'java ' 2. go to 'generate server ' > 'spring ' 3. check that java client generates `petapi.java` and `storeapi.java` (separated by tag) and spring server generates only one `v1apicontroller.java` containing all endpoints.
if endpoints didn 't have the same prefix (`/v1/`), spring server exportation would generate two controllers.
... steps to reproduce the behavior: 1. click on try-it-out 2. click on execute ( leaving the form empty )
... 1. authorize with oauth2 authorization code flow 2. press log out 3. try to authorize again
... steps to reproduce the behavior: 1. view a document with an operation that (a) has a very long path and (b) has a non-empty summary or a summary with single very long word (like namespace) 2. note the 'squished' appearance of the operation summary or the path.
it looks worse longer operation summary is.
... steps to reproduce the behavior: 1. click get /hhutvnqgqcun or get /kayqpvejwlyy to expand the operation 2. wait
... steps to reproduce the behavior: 1. change anything in `swagger-config.yaml` and check
... steps to reproduce the behavior: 1. go to main page 2. click on any service 3. click on 'try it out ' and complete a query parameter or path variable 4. click on execute 5. see query parameter or path variable is not in generated curl and not used to call service and input field is empty.
... steps to reproduce the behavior: 1. go to any post operation 2. click on try it out 3. type in the request body field 4. the ui will hang for a while for each keystroke, the more keystrokes the longer
... steps to reproduce the behavior: 1. open the above yml file in swagger ui 2. open the '/parameter ' request no example 3. click 'try it out ' no example
... steps to reproduce the behavior: 1. have the server return a 200 with an empty response body to have the spinners spin forever.
2. have the server return a 404 with an empty response body to have an empty schema appear with no errors.
... steps to reproduce the behavior: 1. import the doc into the online swagger editor 2. click on the path of first item - 3. observe that top 2 items have both expanded together
... see the screenshots below for examples.
repo: phofurl steps to reproduce the behavior with redux dev tools: 1. clone the linked repo and run the app 2. have redux dev tools installed and look at swagger ui state.
3. click 'toggle swagger ui' button a couple of times 4. look at swagger ui state in redux dev tools.
note that there are now phofcode instances of swagger ui redux state, where phofcode is number of times 'toggle ui' button was clicked.
steps to reproduce behavior with chrome dev tools: 1. clone linked repo and run app 2. take a memory snapshot before clicking anything on app page 3. click 'toggle ui' button a couple of times 4. take another memory snapshot 5. note increase in memory use
... steps to reproduce the behavior: 1. acquire a huge model - can be provided by mail if necessary 2. click on some operation 3. browser will hang / get stuck huge model causes browser to crash / hang for a long time , while this model is also circular it is not the issue ( as for one instance when opened the specific operation it did not crash but took a long time - if it was a circular handing issue i would expect it to hang forever).
as you can see in the attached screen shots , while model section is confined to depth limit (1) example value is unlimited causing entire appear in example section.
... steps to reproduce the behavior: 1. building project with ` ng build --prod --aot` 2. deploy project on nginx
... steps to reproduce the behavior: 1. i pasted the yaml to phofurl 2. see the example value section 3. date example is displayed incorrectly as empty js object
... steps to reproduce the behavior: 1. save the above yaml to a file (i used unix line endings) 2. serve up the file with something like python 's simplehttpserver 3. use firefox to open the online swagger ui ( phofurl or a local copy of it, adding url query param 4. see error
... visit phofurl and execute a request after having selected a file with either an invalid extension (e.g., foo.abc) or potentially a good extension that is unrecognized (such as nuget 's 'foo.nupkg ').
the generated curl command includes a blank type (-f "file=...;type=") which causes the curl to be invalid.
the first model in the swagger 3.20 ui and try get /products (clocks).
... steps to reproduce the behavior: 1. go to method with user-agent parameter 2. click on execute
... steps to reproduce the behavior: 1. use 'content' as stated in phofurl phofcode (complete yaml above) 2. see error when rendering in swagger ui: could not render parameterrow, see the console.
3. console output: root-injects.js:95 typeerror: cannot read property 'get' of undefined at t.value (parameter-row.jsx:145) at t.render (root-injects.js:93) at at s.performinitialmount s.mountcomponent object.mountcomponent (reactreconciler.js:43) x.mountchildren (reactmultichild.js:234) x._createinitialchildren x.mountcomponent
... steps to reproduce the behavior: 1. open the swagger-ui in a browser with the `configurl` query parameter 2. refresh the page to verify swagger-ui will load either pet store example or `urls` openapi definition.
... steps to reproduce the behavior: 1. go to phofurl 2. use example definition above 3. click "try it out" 4. put 10000 for `test` 5. click execute
... create a new angular project then do `npm install swagger-ui` and add code to the app.component.ts: phofcode then run `npm start` and you will get an error
... steps to reproduce the behavior: 1. write a request interceptor that modifies the url of loadspec requests 2. load the page 3. wait for spec to load 4. see that the spec selector box has old url
... steps to reproduce the behavior: 1. go to phofurl 2. copy paste the provided spec 3. click on post /test endpoint 4. under responses, change the response content type/accept to "application/xml"
... you can use this docker-compose file to launch the service with the same options i 'm using: phofcode steps to reproduce the behavior: once swagger ui is launched you will see a blank page is loaded.
you can manually explore an api doc by putting in the url and it will use settings from config.json file as defined.
you can alternate back and forth removing one or other and see that settings are working independently, just not together.
... steps to reproduce the behavior: 1. go to phofurl 2. paste the example 3. see error
... steps to reproduce the behavior: run in swagger ui provided example.
... this is not necessarily a bug, but maybe a react best practice.
when executing a sample rest endpoint, i am noticing a warning on the console.
the issue originates from ___please note the `readonly` attribute___ phofcode
... steps to reproduce the behavior: 1. go to phofurl 2. see?
... steps to reproduce the behavior: 1. create request body where schema is in separate file 2. make sure that one of the property of that object is required 3. launch swagger ui
... steps to reproduce the behavior: 1. start the dev server with the config from above 2. go to ` phofurl 3. observe that the pet operation is not unfolded
... steps to reproduce the behavior: 1. go to url 2. click on users 3. see error
... 1. open phofurl 2. hit the "initialize" button 3. observe oas3 badge disappearing
... steps to reproduce the behavior: 1. load any oas3 definition with a severs object.
... you can use the second example to see this behavior.
... steps to reproduce the behavior: 1. click on 'authorize ' 2. enter value 3. press 'authorize ' 4. refresh the page 5. click 'authorize ' again
... steps to reproduce the behavior: 1. go to endpoints with a required header.
2. click on _try it out_ 3. provide values for the params.
4. click on _execute_ 4. see the state reset and no request executed.
... describe a path as written above
... steps to reproduce the behavior: 1. copy-paste schema into empty editor 2. see error message
... steps to reproduce the behavior: 1. npm install --save swagger-ui-dist 2. attempt to import `swaggeruibundle` from `swagger-ui-dist` 3. start express server 4. see error stating `swaggeruibundle` is undefined
... steps to reproduce the behavior: 1. use content type application/octet-stream for a response 2. open swagger-ui page and look at response example value
... steps to reproduce the behavior: 1. go to phofurl 2. enter the swagger above 3. expand anything you will until you reach the definition of a under the models.
check that you see no error (in your console or top of document.
3. now expand `a` in models list 4. scroll top and you'll see 4 time error: `resolver error - cannot read property '0' of undefined`.
... steps to reproduce the behavior: 1. see this jsfiddle: phofurl 2. press play 3. try it out on get /pets 4. execute 5. observe generated curl request 6. now comment requestinterceptor return statement and uncomment the `return req;` line 7. repeat step 2 through 5 (this is expected behavior)
... steps to reproduce the behavior: 1. go to phofurl 2. click on 'load swagger' 3. click on it again 4. see error
... steps to reproduce the behavior: 1. go to 'foo/ try it out' 2. click on 'wrongoption' 3. select 'correctoption' 4. click on 'execute' 4. see request url
... steps to reproduce the behavior: 1. start internet explorer 11 2. go to phofurl 3. example value is ` [ null ] ` 4. click on model 5. model is ` [ { } ]`
... steps to reproduce the behavior: 1. click on any route with required parameter.
/pet/{petid} 2. click "try it out" button 3. specify pet id 4. click on "execute" button 4. see error - pet id was removed, petid field is red.
ui doesn 't send any http request
... steps to reproduce the behavior: 1. phofurl 2. click on the "pet" resource 3. click on the "/pet" operation 4. the operation is opened, the browser url changes to phofurl 5. open this url in a new brower tab 6. the deep link works: operation post "/pet" is opened 7. go back to 2, get url of "/pet" operation 8. the (incorrect) url is phofurl 9. open this url in a new brower tab 10. the deep does not work: post "/pet" won 't be opened
... 1. open phofurl phofhyperlink 2. edit the get path /pet/{petid} to allow enums instead of input (full file here swagger-bug.txt phofhyperlink ) 3. try out by selecting id 1 and executing ==> correct result 4. change enum value to id 2 and execute ==> still trying to get id 1
... steps to reproduce the behavior: 1. load above yaml 2. indent `inventoryitem` so it is inline with `type: object` 4. models component crashes with error
... steps to reproduce the behavior: 1. go to phofurl and use the schema above.
2. click on get /user 3. scroll down to response 200 example text box 4. example is not rendered
... steps to reproduce the behavior: 1) clone the project 2) npm install 3) npm start (or npm serve-static) http-server is required but is not defined in package.json.
if a global installation of http-server is required, it should probably be documented.
should we add http-server as a dev dependency (solves the issue and allows to serve content without any outside install prerequisite) or document the need of having http-server globally installed ?
... try to use oauth2 with internet explorer 11
... 1. use my yaml 2. go to /meta 3. check "example value / model" tabs
... steps to reproduce the behavior: 1. try to execute `get /user` 1. edit `id` to any value 1. it always get reset back to `1`
... steps to reproduce the behavior: 1. go to '/imagesvalid ' resource 2. click on 'try it out ' 3. make sure that 'select file ' button is presented 4. go to '/imagesinvalid ' resource 5. click on 'try it out ' 6. make sure that 'select file ' button isn 't presented
... steps to reproduce the behavior: 1. create an asp.net core web api or web application project (with at least one described endpoint) 2. install swashbuckle.aspnetcore via the normal nuget.org instructions 3. navigate to the swagger ui endpoint 4. click on the endpoint ui element
... steps to reproduce the behavior: 1. create an asp.net core web api or web application project 2. install swashbuckle.aspnetcore via the normal nuget.org instructions 3. configure a custom route prefix (changing the options per the linked documentation) 4. navigate to swagger ui endpoint _without_ final slash (so you hit built-in redirect)
... steps to reproduce the behavior: 1. enter a description with a linebreak.
... steps to reproduce the behavior: 1. go to phofurl 2. expand /pet/findbystatus 3. make sure response content type is application/xml 4. example value for status code 200 has "xml example cannot be generated"
... steps to reproduce the behavior: 1. go to phofurl 2. paste in the swagger/openapi definition yaml above.
3. look a the rendered swagger-ui on the right.
4. the json has a bug.
it has excess output that looks like it 's coming from immutablejs.
... steps to reproduce the behavior: 1. go to phofurl phofhyperlink 2. click on the authorize popup 3. scroll down to the api key section 4. type a text in the textbox 5. click on authorize 6. without closing popup, click on logout and again authorize.
7. the apikey is authorized even though there is nothing in textbox
... lnowak (#1238) noted an issue where a file download triggered via the content-disposition header will result in a link to download the file, but the file will be corrupt.
i am also seeing this issue in my environment.
the response headers: { "cache-control": "no-cache, no-store", "content-disposition": "attachment; filename="example.zip"", "transfer-encoding": "chunked", "content-type": } this is the download url that it displays in ui.
if i download via this link, i get a corrupt file.
if i use link directly from browser, get a valid download.
you can try this here: phofurl
... steps to reproduce the behavior: 1. add the security scheme to the phofcode 2. open the documentation and see console.
... steps to reproduce the behavior: 1. go to ` phofurl 2. paste in the above yaml file.
pasted yaml data should still be present.
5. click "authorize" and enter dummy data in dialog.
6. click "authorize" in dialog and note the url used in attempting to fetch a token.
7. close the "authorize" dialog.
8. change to server url (to, say, ' phofurl note that it changes appropriately `server` dropdown.
9. repeat steps 5 and 6 and note that url is not new one.
note that it works correctly after doing a browser refresh after server url has been changed.
... steps to reproduce the behavior: 1. go to '... ' 2. click on '.... ' 3. scroll down to '.... ' 4. see error 1. start the swagger petstore demo ** locally ** 2. navigate to phofurl 3. scroll down the modal-section 4. click on a modal-element (e.g.
order) 5. open your browsers dev-console
... steps to reproduce the behavior: 1. go to `sql` get and execute query without header `x-irest-conn` (`x-irest-conn` is an optional header).
2. try a get with a header value for `x-irest-conn` 3. remove the value for `x-irest-conn` the request now is executed with empty `x-irest-conn` 4.
`-h "x-irest-conn: "` this is seen in the curl command.
5. initial request works fine.
problem arises once header field is reset to empty.
... 1. run this endpoint with the provided sample data: phofurl and notice your response will include headers.
likely something like this - <img width="774" alt="screen shot at 1 47 28 pm" src=" phofurl 2. download and setup swagger-ui locally following readme instructions for development.
this should be hosted at phofurl making the same call i see something like this - <img width="383" alt="screen shot at 1 48 06 pm" src=" phofurl
... steps to reproduce the behavior: 1. go to '...' create a swagger and have the two fields i provide as examples 4. when teh ui vaildation triggers yo'll see the error message for 2) above
... steps to reproduce the behavior: 1. open public/bad.html 2. click to expand get request 3. click "try it out" 4. enter a value in the "limit" field of the form and submit 5. see that the "limit" field has been cleared
... 1. open the swagger-ui page.
2. click [get] /test bar.
3. click the "try it out" button.
4. testheader input field doesn 't show the default value "test-value".
... steps to reproduce the behavior: 1. go to ` phofurl 2. open your developer tools 3. select the first operation of the 'pet store ' section with the element inspector 4. take a look at html markup of this element: phofcode
... steps to reproduce the behavior: 1. go to editor.swagger.io and upload the swagger above 2. in the gui pane notice that description, content type data is rendered outside the table.
... steps to reproduce the behavior: 1. go to the rest api page 2. click on book tag 4. see error image phofimage
provide a reproducible test case that is the bare minimum necessary to generate the problem.
if including tracebacks, please include the full traceback.
large logs and files should be attached.
try to provide a reproducible test case that is the bare minimum necessary to generate problem.
attaching perfmon screenshot: image phofimage image phofimage
phofcode the github gist to reproduce the problem is: phofurl
start container: `docker run --rm -it bash` start python3 in the container without site initialization: `python3 -s` add package locations to the sys.path and import tensorflow: phofcode
there is a workaround for rtx gpus at the top per the comment in #24828 phofcode
please find gist here phofhyperlink
i have a time-series dataset.
it is very small so i am able to load it into memory, so i do not need the dataset api.
i am windowing the time-series to produce two arrays, x and y, and it looks something like this, phofcode (yes, realize that could just as easily only include one of the features.
`x=[[[1,2,3]], [[4,5,6]], [[7,8,9]], ...], and it still doesn't work) then, build my model: phofcode and then train it: phofcode it correctly reports the number of train validation samples, then progress bar pops up... but that's where success stops.
the val_loss val_mean_squared_error is always 0, for every epoch, it appears to never train more than a fraction (~1/1000) of my dataset, although that fraction varies slightly between epochs.
this is print out: phofcode when call in tf 1.15, behavior is same as tf 2.0.
here is a minimal example, also runable in colab phofhyperlink : phofcode
this is the model in question: import tensorflow as tf import tensorflow.keras.layers as layers from tensorflow.keras import model class mrf_block(model): def __init__(self, out_channels, num_inputs, use_deconv=true, kernel_size=(3,3), strides=(1,1), padding='same'): super(mrf_block, self).__init__() # add the conv/deconv layers.
for i in range(num_inputs): # convolve input tensors to output tensors of same channel depth (# of channels) conv_layer = kernel_size, strides=strides, padding=padding) setattr(self, f'conv_{i}', conv_layer) # deconv input tensors.
input tensor at index i will be upsampled by factor 2(n_inputs - (i+1)) # eg: if input tensors are [t1, t2, t3], t1 will be upsampled x 4, t2 upsampled x 2, t3 not upsampled.
if use_deconv: deconv_layer = kernel_size, padding='same', strides=(2
phofcode and the resulting error: phofcode
here i provide a reproducible test case.
the problem is in the function: assign_dyn_vals() once i instantiate a variable and i try to assign to this variable some computations.
the following code snippet reproduces this behavior.
i execute the code twice to account for `tf.function`s tracing which has to be one once for `_df`.
phofcode output: forwardpass took before outer start inner end inner; took: after outer; took: backwardpass took forwardpass took before outer start inner end inner; took: after outer; took: backwardpass took ``
case 1: phofcode error: phofcode case 2: phofcode error: phofcode
images0, images1 = self.load_batches() self.images0 = shape=(self.batch_size, self.c_dim, self.output_size, self.output_size)) self.images1 = shape=(self.batch_size, self.c_dim, self.output_size, self.output_size)) for i in with if i == 0: self.set_tower_loss('', self.images0, generator, discriminator) else: self.set_tower_loss('', self.images1, generator, discriminator) _, g_grads= , feed_dict={self.images0: images0, self.images1: images1} )
provide a reproducible test case that is the bare minimum necessary to generate the problem.
call tape.jacobian on a conv2d network of a moderate size with
phofcode and observe that the loss and metric values are different: phofcode
minimal example: python class mymodel(tf.keras.model): def __init__(self,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is an excerpt of my code, hopefully it is sufficient to demonstrate what i am doing.
i didn't manage to get a minimal example using `fit_generator` (basically it relies too much on me using my model which is complex).
however, i have a minimal example which reproduces the bug when i mimic the `model_iteration` phofhyperlink function.
you need to install the following to make it work: `pip install tensorflow-gpu==2.0.0b1 numpy tqdm` python # imports import time import numpy as np import tensorflow as tf from tensorflow.python.keras import callbacks as cbks from callback from model from training_utils imagedatagenerator data_utils generic_utils tqdm tqdm_notebook # helper function (taken phofurl def workers=1, max_queue_size=10, shuffle=false): enqueuer = generator, shuffle=shuffle) output_generator = enqueuer.get() return output_generator, enqueuer # my silly callback class noise(callback): def on_batch_end(self, batch, logs={}): image_shape = [1, 2
- colab notebook phofhyperlink for where one-hot encoding wasn't done.
- colab notebook phofhyperlink with one-hot encoding.
mixed precision training in tf.keras 2.0.zip phofhyperlink
as stated above, the code is directly accessible through the url.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the model is the exact implementation of the cvae tutorial from tensorflow website: phofcode because layer size is increased, i suspect it has something to do with memory, because earlier issues refer 'dst tensor ' issue to a memory problem with gpu.
however this is not possible because only 58% utilised and training runs fine, therefore it seems there an issue with saving checkpoint.
in order to reproduce the behavior i prepared a google bucket with the following structure.
the bucket is public accessible, please feel free to use it to reproduce the behavior on your end: level0 phofimage level1 phofimage level2 phofimage level3 phofimage in summary we have 4 jpg images nested in different folder levels.
tensorflow 2 code to reproduce files =
phofcode provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here the link to the colab code : phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf from import autocast_variable var = tf.variable(0., dtype=tf.float32) var = with assert var.dtype == tf.float16 # assign should return an autocastvariable but returns tf.variable var_assign = var.assign(5.)
assert not isinstance(var_assign, assert var_assign.dtype == tf.float32 ``
from tensorflow.keras.models import sequential from tensorflow.keras import layers import numpy as np y_train = np.random.rand(1) epochs = 1 x_train = np.random.rand(1,20,16) model = sequential() 3,batch_input_shape (1,20,16))) activation='softmax')) optimizer='adam', metrics=['accuracy']) model.summary() history model.fit(x_train, y_train, batch_size=1, epochs=epochs) this reproduces the error in my usecase edit: using the solution proposed in phofurl did not work for me ( requirement already satisfied: gast==0.2.2 )
here 's how i set up input/output tensors: // setup output tensors int outputtensorindex = 0; int[] outputlocationshape = datatype outputlocationtype = outputtensorindex++; int[] outputclassshape = datatype outputclasstype outputtensorindex++; int[] outputscoreshape datatype outputscoretype outputtensorindex++; int[] numdetectionshape datatype numdetectiontype= // setup input tensor int imagetensorindex 0; imageshape // {1, height, width, 3} imagesizey imageshape[1]; imagesizex imageshape[2]; imagedatatype // creates the input tensor.
inputimagebuffer new creates the output tensors and its processors.
outputlocationbuffer outputlocationtype); outputclassbuffer outputclasstype); outputscorebuffer outputscoretype); numdetectionbuffer numdetectiontype); creates the post processor for the output probability.
outputlocationprocessor new outputclassprocessor new outputscoreprocessor new numdetectionprocessor logger.d("created a tensorflow lite classifier.
"); } and here 's how i 'm loading images and attempting to get a labeled probability map long starttimeforloadimage inputimagebuffer loadimage(bitmap, sensororientation); long endtimeforloadimage trace.endsection(); logger.v("timecost to load image: " + (endtimeforloadimage - starttimeforloadimage)); runs inference call.
long starttimeforreference object[] inputarray map<integer, object> outputmap hashmap<>(); outputmap.put(0, outputmap.put(1, outputmap.put(2, outputmap.put(3, outputmap); long endtimeforreference trace.endsection(); logger.v("timecost to run model inference: " + (endtimeforreference - starttimeforreference)); map<string, float> labeledprobability tensorlabel(labels, .getmapwithfloatvalue(); trace.endsection(); gets top-k results.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i made a dummy network to try and isolate the issue.
i built the network using the following: phofcode i then load and run the model on android using bytebuffers to hold input/outputs.
i can provide this code if requested, but don 't suspect it to be problem as use it for other working projects.
i 'm confident that this is a conv3d issue, because have also built a
see jupyter notebook: phofurl the link to the dataset is within the notebook.
colab notebook that reproduce problem phofhyperlink phofcode
first run this script to define and save the sequential model: phofcode then run the following script to restore the model and train it on the imdb dataset: phofcode
tfrecords_path is the path to mnist dataset as tfrecords files with the features described bellow: phofcode
phofurl phofcode the output from the above code is: features 0: f: (8, 8, 11) <dtype: 'float32 '> labels 0: a: (8,) <dtype: 'int32 '> labels 1: b: (8,) <dtype: 'int32 '> prediction: <class 'list '> pred out 0: (8, 8, 3) float32 pred out 1: (8, 8, 4) float32 valueerror traceback (most recent call last) in <module>() 49 50 loss={"a": ---> 51 "b": 52 53 model.fit(ds.batch(8)) 3 frames in input_dict, expected_values) 589 raise valueerror( 'unknown entries in {} dictionary: {}.
only expected ' 590 'following keys: {} '.format(name, list(unknown), --> 591 expected_values)) 592 593 valueerror: unknown entries in loss dictionary: [ 'a ', 'b '].
only expected following keys: [ 'output_1 ', 'output_2 '] ``
setup according to phofurl phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
see attached pipeline.config (would need to specify some training/testing tfrecord)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
borrow the benchmark code from here phofhyperlink .
python import os import sys import tensorflow as tf import time n = 8192 dtype = tf.float32 matrix1 = tf.variable(tf.ones((n, n), dtype=dtype)) matrix2 = tf.variable(tf.ones((n, n), dtype=dtype)) product tf.matmul(matrix1, matrix2) # avoid optimizing away redundant nodes config sess os sys tensorflow as tf time n 8192 dtype tf.float32 matrix1 tf.variable(tf.ones((n, n), dtype=dtype)) matrix2 tf.variable(tf.ones((n, n), dtype=dtype)) product tf.matmul(matrix1, matrix2) # avoid optimizing away redundant nodes config sess iters 10 # pre-warming sess.run(product.op) start time.time() for i in range(iters): sess.run(product.op) end time.time() ops n
i don't have full code and data to share since my model and data are proprietary.
this issue can be easily reproduced using the code of this official tutorial phofhyperlink , by feeding the validation dataset `eval_dataset` to `model.fit()`.
see this colab notebook phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
because i have no understanding of the origin of this internal error, i am not sure how to create such a minimal case.
only way i was able to test was by also creating the python bindings for the op
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please goto training_loops.ipynb and open google colab from there.
import tensorflow as tf print( 'using tensorflow version {} (git version tf.version.git_version)) from import meanmetricwrapper from import accuracy def custom_accuracy(y_true, y_pred): return accuracy(y_true, y_pred) class def __init__(self,
phofcode where phofcode the above case works fine with the output: phofcode however, adding just one `embedding` layer so that now is: phofcode leads to the error: i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2 fma i cpu frequency: hz i xla service executing computations on platform host.
devices: i streamexecutor device (0): host, default version initialize grpcchannelcache for job worker -> {0 -> localhost:65535, 1 -> localhost:65532} started server with target: grpc://localhost:65535 is not passed in.
the `worker_fn` will be used if an "evaluator" task exists in the cluster.
no distribution strategy will be used for evaluation.
workers will need to restart training if any fails.
w cannot find shardable dataset, adding a shard node at the end of dataset instead.
this may have performance implications.
train for 281 steps, validate for 31 steps epoch 1/5 w cannot find shardable dataset, adding a shard node at end of dataset instead.
this may have performance implications.
1/281 - eta: 9:05 - loss: e aborting ringgather with internal: [_derived_]inconsistent output shapes, got [16], but expected is [64].
t [[{{node additional grpc error information: received from output shapes, got [16], but expected [64].
t [[{{node w internal: [_derived_]inconsistent output shapes, got [16], but expected [64].
t [[{{node additional grpc error information: received from output shapes, got [16], but expected [64].
t [[{{node e aborting ringreduce with internal: [_derived_]inconsistent [64].
t additional grpc error information: received from [64].
t w internal: [_derived_]inconsistent [64].
t additional grpc error information: received from [64].
t e aborting ringgather e aborting ringreduce ringreduce cancelled: [_derived_]cancelled cancelled: [_derived_]cancelled op_requires failed at collective_ops.cc:125 : op_requires failed at collective_ops.cc:234 : op_requires failed collective_ops.cc:125 : op_requires failed collective_ops.cc:234 : cancelled: [_derived_]cancelled collective_ops.cc:234 traceback (most recent call last): file line 71, in <module> file line 728, in fit file line 789, in fit *args,
please find the colab gist to reproduce the issue " phofurl phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`base_data_path = ` `model_file = 'my_model.h5 ')` `model = `model.summary()` `print( ' # generate predictions ')` `predictions = verbose=1 )` `print( 'predictions shape: ', predictions.shape)` `print(predictions)` `saved_model_dir `!mkdir -#p saved_model_dir` ` pythonlstmcode.txt phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode fwiw, i get the expected result if i remove `.shuffle(...)`.
`# save the entire model as a savedmodel.
base_data_path = #load the previously saved h5 model # try to reload the saved h5 file # recreate the exact same model, including its weights and optimizer model_file = 'my_model.h5 ') model = # show model architecture model.summary() #create directory to save savedmodel saved_model_dir = !mkdir -#p saved_model_dir ` provide a reproducible test case that is bare minimum necessary to generate problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import numpy as np class def __init__(self, *args,
` for j, (train_indices, val_indices) in train = val = datos.iloc[val_indices] metrics = [ 'accuracy '] model = build_model(dropout, fc_layers, num_classes=num_classes, opt=opt, metrics=metrics) train_datagen horizontal_flip=true, vertical_flip=true, # rotation_range=25, fill_mode= 'constant ' ) test_datagen ) train_generator train, none, x_col= 'file ', target_size=(width, height), batch_size=batch_size, seed=seed, test_generator none, x_col= 'file ', target_size=(width, height), batch_size=batch_size, seed=seed, has_ext=true, shuffle=true) class_list checkpoint monitor="val_accuracy", verbose=1, mode= 'max ', save_best_only=true) callbacks_list [ checkpoint, 'log.csv ')) ] print( 'iniciando entrenamiento ') history epochs=epochs, workers=16, shuffle=true, verbose=1, / batch_size), / batch_size) ) acc val_accuracy loss val_loss 'model.h5 ')) ` `
see this colab notebook phofhyperlink
import tensorflow as tf python import tensorflow as tf class def __init__(self, name="normalize",
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is google colab code phofhyperlink with mnist example.
the two issues can be reproduced using this colab notebook phofhyperlink .
the above dockerfile, plus: phofcode `
provide a reproducible test case that is the bare minimum necessary to generate the problem.
code to reproduce this issue can be found on the related stackoverflow page: phofurl another good reproduction of this since i'm using `attention()` layers is found here: phofurl
phofcode this produces this output, after going through the training fine, it crashes on the validation set phofcode
python import math import numpy as np import tensorflow as tf error = true n_features = 100 batch = 2 """ model """ x = dtype=tf.float32) w tf.variable([1.0] * n_features) b tf.variable(1.0) z tf.reduce_sum(w * x, axis=1, keepdims=true) + b """ loss is incorrect if error is true """ if error: y_ tf.sigmoid(z) else: y_ 1.0 / (1.0 + math.e
provide a reproducible test case that is the bare minimum necessary to generate the problem.
class def self.batch_size=8 self.num_outputs=256 self.alpha=alpha # (batch_size, def call(self,inputs): print("inputs shape:",inputs.shape) output_up=self.up(temp) return here is my selfdefine layer ,it can run,but i found change to my selflayer my eval loss and acc don 't change anymore
here is a notebook to reproduce the problem.
on google colab, use gpu runtime and run this code phofcode other info / logs phofcode
` # multi worker strategy strategy = with strategy.scope(): train_dataset, validation_dataset, test_dataset = load_data() multi_worker_model = alexnet() # fit epochs=epochs, validation_steps=6, callbacks=callbacks, verbose=2) # eval # save model 'model ')) 'model ')) `
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode produces: phofcode i didn't see this behavior in colab so not sure whats causing this.
our gpu docker image imports successfully but downstream addons gpu tests are breaking on this nightly so it would be helpful to identify the commit that is causing these issues.
training in c++: phofcode prediction in c#: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
export python classify.py --image_file someimage.jpg phofcode
phofcode model + loss python from __future__ import absolute_import from __future__ import division from __future__ import print_function import numpy as np tensorflow as tf from tensorflow.keras model tensorflow.keras.layers conv2d, conv2dtranspose, dense tensorflow.keras.layers flatten, reshape, input adam def conv(n_filters, filter_width, strides=2, activation="relu", name=none): return conv2d(n_filters, filter_width, strides=strides, padding="same", activation=activation, name=name) def deconv(n_filters, filter_width, strides=2, activation="relu", name=none): return filter_width, strides=strides, padding="same", activation=activation, name=name) class """ custom layer.
try 'bce ' or \'mse \'") kl_divergence(x, x_pred): self.c += (1/1440) # todo use correct scalar self.c min(self.c, 35) todo make variable kl -0.5 tf.reduce_mean(1 + z_logvar - z_mu
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf tf.random.set_seed(0) inputs = dtype= 'int32 ') x = output_dim=3, mask_zero=true)(inputs) outputs = tf.keras.layers.lstm(2, model = tf.keras.model(inputs, outputs) padded_inputs tf.constant([[1,3,0,0]]) it prints the following: tf.tensor( [0.
instead of tf.tensor( (which is what it is supposed to print).
note that when only using a cpu, it gives the correct result.
the complete code with data is available in a git repo if required.
- model: class def __init__(self, conv_filters, pool_size,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import numpy as np import gzip import json from sklearn.model_selection shufflesplit with "r") as fin: housing = json.load(fin) for train, test in shufflesplit(1, 0.2, 'data ']): x_train = y_train = x_test = y_test x_mean x_train.mean(axis=0) x_std x_train.std(axis=0) xs_train (x_train - x_mean) / x_std xs_test (x_test - x_mean) / x_std class linearregressiontf(): def __init__(self, eta=.1): self.w tf.variable(0.)
self.opt def loss(self, x, y, return_func=false): def loss_(): return * self.w + self.b - y)) if not return_func: return loss_() return loss_ @tf.function def fit(self, x, y, steps=1): for _ in range(steps): y, return_func=true), [self.w, self.b]) tf_model linearregressiontf() tf_model.fit(xs_train[:, 0:1], y_train.reshape(-1, 1)); [cal_house.json.gz phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
### not a contribution phofcode
just set the explicit flag to false to get the error.
phofcode can you confirm the strange behavior and whether tf.random.normal is implemented or not
import tensorflow as tf img = dtype=tf.float32, shape=(1, 64, 64, 3)) var = dtype=tf.float32, shape=(1, 64, 64, 3)) val = img + var out = tf.identity(val, name="out") with tf.session() as sess: converter [img], [out]) tflite_model converter.convert()
phofcode and here is my vgg_pr model: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`#print out model summary so can see it for bug report model.summary() #from tensorflow import lite tflite_file = print(" want to save tflite_file" + tflite_file) # convert the model.
converter = print("converter = " + str(converter)) tflite_model = converter.convert() print(tflite_model) #now save the tflite model to file
inference running without any issue.
the issue does not occur when it starts running on the main thread instead: phofcode
when runnig codes below it show errors phofcode
phofcode the minimal `iterable` class can be replaced by `tqdm` (`from tqdm import tqdm`), and this should yield the same results.
`max_len_text=275` `max_len_summary=28` `from keras import backend as k ` `k.clear_session() ` `latent_dim = 500 ` `encoder_inputs = ` `enc_emb = embedding(x_voc_size, `encoder_lstm1 = `encoder_output1, state_h1, state_c1 encoder_lstm1(enc_emb) `encoder_lstm2 `encoder_output2, state_h2, state_c2 return_state=true, return_sequences=true)` `encoder_outputs, state_h, state_c= `decoder_inputs input(shape=(none,)) `dec_emb_layer embedding(y_voc_size, `dec_emb `decoder_lstm lstm(latent_dim, return_sequences=true, return_state=true)` decoder_back_state state_c]) `attn_layer `attn_out, attn_states decoder_outputs])` `decoder_concat_input concatenate(axis=-1, attn_out])` `decoder_dense `decoder_outputs `model model([encoder_inputs, decoder_inputs], decoder_outputs) `es mode= 'min ', verbose=1)` 1)[:,1:] 1)[:,1:]))` provide a reproducible test case that is the bare minimum necessary to generate the problem.
> ds_train = tfds.load(..) > ds_val = tfds.load(..) > > strategy = num_gpu = ds_train ds_train.batch(32 * num_gpu) ds_val ds_val.batch(32 * num_gpu) with strategy.scope(): input_image input(...) .... output .... model outputs=[output]) model.compile(...) model.fit(ds_train, validation_data ds_val) model.predict(ds_val, use_multiprocessing true)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`tflite_file = print(" want to save tflite_file" + tflite_file) # convert the model.
converter = print("converter = " + str(converter)) tflite_model = converter.convert() #no save the tflight model to file
edit - _refer to latest gist below_
(will try to do this later)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf a = batch_size=2) batch_size = tf.shape(a)[0] cell = b = dtype=tf.float32)
i used the example code given here phofhyperlink .
when trying to use regular tensorflow (rather than just the tflite_runtime package), i changed line 33 from `from import interpreter` to `from import interpreter`.
i called the script using: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python from tensorflow.data import dataset ``
`output_names` is not restored and outputs are given new auto-generated names: phofcode model fails to load when using dictionaries for losses: py import tensorflow as tf i = x = tf.keras.layers.dense(1, name='my-output')(i) m = tf.keras.model(i, x) 'mse'}) assert m.output_names[0] == 'my-output' m.save('my-saved-model') m2 = # valueerror: unknown entries in loss dictionary: ['my-output'].
only expected following keys: ['output_1'] ``
phofcode provide a reproducible test case that is the bare minimum necessary to generate the problem.
i used this simple cnn to detect the eye region: phofurl thanks.
for example, the script below: phofcode produces errors as follows: phofcode both ktfliteuint8 and ktfliteint8 version of the pack operator is already implemented in tflite (see pack.cc phofhyperlink ), so it should be straightforward to support pack as well in the tflite converter
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the `keras_to_tensorflow.py` file is from here phofhyperlink , the `vgg_blstm_ctc.py` file is from here phofhyperlink , the input model is from here phofhyperlink .i has changed the `keras_to_tensorflow.py` file like this: phofcode
python #!/usr/bin/env python3 import sys import tensorflow as tf # otherwise nothing works, and it really sucks, but is declared in the docs multi_worker_strategy = def main(): batch_size = 12 features_shape = 372, 558, 3 labels = 10 sample def with_shape(t, shape): t tf.squeeze(t) t.set_shape(shape) return t ds_train s: (s, tf.ones((labels,)))) s, l: (with_shape(s, (batch_size,) + features_shape), with_shape(l, (batch_size, labels)))) ds_val s: (s, tf.ones((labels,)))) lambda s, l: (with_shape(s, (batch_size,) + features_shape), with_shape(l, (batch_size, labels)))) with model weights=none, classes=labels) + features_shape) model.summary() optimizer cross_entropy loss=cross_entropy, metrics=["accuracy"]) model.fit(ds_train, validation_data=ds_val, epochs=1, steps_per_epoch=100) if __name__ == "__main__": sys.exit(main()) ``
the following is a stripped-down implementation of an rnn for text data loosely resembling the one in the effective tensorflow 2.0 tutorial phofhyperlink phofcode to rule out one culprit, the `tensorarray`s have been removed.
clearly, an efficient model would not perform embedding and loss computation in every step but that 's not relevant here.
to perform training i use a standard tensorflow 2.0 loop (with dummy input for simplicity) phofcode the crucial part here is the `something` object which is passed to model.
note that object is never used inside model, hence we can also pass `none` instead.
my point that training performance on gpu and cpu significantly degraded when relatively memory costly `something` object passed instead of `none`.
precisely, i get a slowdown from 0.13s/it to 7.7s/it on gpu and 2s/it to 9s/it on cpu.
utilization drops from ~65% to %5 on gpu and from 800% 300% (24 cores available) cpu.
the above makes me suspicious that model being copied in * every * training step.
i found this behavior nowhere documented.
also note that such an `something` dictionary entirely realistic if what you do nlp you need carry your vocabulary around.
if object being used internally, a more efficient alternative might be pass it as function argument, instead of storing it internally
provide a reproducible test case that is the bare minimum necessary to generate the problem.
method 1: plain python + tf 2.0 phofcode _throws_
provide a reproducible test case that is the bare minimum necessary to generate the problem.
code to report the mean absolute discrepancy between the empirical and theoretical means: phofcode code to visualise distribution: phofcode
from import resnet50 #from keras.applications import resnet50 image_size = 224 model = image_size, 3), include_top=true, weights='imagenet') weights = print(weights) weights = print(weights)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i am using python 3.6.6 with ipython 7.8.0. if you do: phofcode and press `tab` after the `.`, you get dozens of warnings like: phofcode you can actually reproduce this with the docker images, although that produces fewer deprecation warnings than the released package does: phofcode (unfortunately, i wasn't able to find a more up-to-date official docker image)
phofcode similar code in the official examples of google colab also not working phofurl
the code is here: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode in my code, the _input_min_range_ param is redundant.
import tensorflow as tf class def __init__(self, num_units,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode this outputs: phofcode so `importer2` is only freed after the python application finishes.
neither `gc.collect` nor deleting the object causes it to be released in python.
this is not an issue in this toy example, but `importer2` could have a reference to a large number of other objects that take considerable space in memory in reality.
also, this only happens for the first `import`.
`importer3` can be freed without issues.
python class decoder(model): def __init__(self, dim): super(decodercell, self).__init__() self.input = sequential([ input(batch_shape=(32, 1, num_mels)), dense(128, activation='relu') ]) self.rnn = lstm(256, stateful=true) def call(self, x): x = self.input(x) x = self.rnn(x) return x ``
lightly edited example using canned estimators: phofurl
our `tf.data` pipeline looks roughly like: phofcode tuning parameters after upgrading doesn't recover any performance, nor does using
import numpy import tensorflow as tf input = z = z = model = outputs=z) x fill_value=2.34, dtype=numpy.float32) y numpy.full((100,1), fill_value=1.23, dtype=numpy.float32) while true: model.fit(x=x, y=y)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`import tensorflow as tf ` `image = 'r ')` `image.read()` my tf2.0 version below has the same problem with the beyond.
`image_data = 'rb ').read()` my tf1.x version below run well `image_data = 'rb ').read()`
phofcode the output value is: phofcode notice that we get the same sequence of random numbers every time, ignoring the value of the global random seed.
the only value that matters is the first one (when function gets traced).
more code and examples of surprising behavior in this colab phofhyperlink .
provide a reproducible test case that is the bare minimum necessary to generate the problem.
any network, just feed dynamic batch sizes.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1) #from conda cli base create new environment conda create --name tensorflow2_test 2) #activate environment conda activate tensorflow2_test 3) #install pip conda install pip 4) #install environment tensorflow 2.0 pip install tensorflow 5) #verify install: python -c "import tensorflow as tf"
1. wrapping a 1-layer convolutional nn with phofcode error: phofcode 2. wrapping a pre-trained `tf.keras.applications` model (closer to my actual use case): phofcode error: phofcode 3. saving as an hdf5 file instead: this works without errors.
4. saving to the savedmodel format works with just dense layers: this works without errors.
code and log: phofurl i tested with this machine on gce: * n1-standard-4 * 1 x nvidia tesla v100 * image: (google deep learning vm, common-dl-gpu) * installed anaconda3, cudnn 7.6.4.38 (got some errors with the original 7.4 cudnn in the image), tensorflow-gpu 2.0
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode note that this code is inspired by phofurl p.s.
i corrected the post since i made a mistake.
the problem is not about converting, but about the interpreter, especially in the allocation.
i created a small colab notebook to demonstrate the issue: phofurl i recommend downloading the .py file and running it in command line (so colab logging doesn't interfere), because after the epoch is done, the correct batch number is found.
the problem is during epoch.
phofcode attributeerror: module 'tensorflow' has no attribute '__version__' the following works: import tensorflow as tf from import model print(tf.__version__) ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode also see colab notebook here: phofurl
i could not find reproducing code.
phofcode any help will be appreciated!
it is not possible to provide code for every issue.
better logging is a much more efficient way to root cause and resolve issues.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
(train_images, train_labels, test_images, test_labels) = datagen = width_shift_range=0.125, cval=0.)
datagenflow = train_labels, batch_size=batch_size) epochs=epoch_num, callbacks=[change_lr], test_labels))
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import pandas as pd import tensorflow as tf import numpy as np from sklearn.preprocessing import multilabelbinarizer class def __init__(self, *args,
sessionoptions session_options; configproto& cp = session_options.config;
model is built using import tensorflow as tf class def __init__(self, *args,
import tensorflow as tf from tensorflow.keras.models import sequential from tensorflow.keras.layers import lstm, dense, timedistributed, dropout import numpy as np num_features = 205 time_lenth = 12 num_of_instances = 5000 trip_sets = time_lenth, num_features) print('num features: ', num_features) data_len len(trip_sets) test_split np.arange(data_len) new_dataset np.array(trip_sets) targets time_lenth, 1) test_data y_test_data train_data y_train_data model sequential() model.add(lstm(75, return_sequences=true, input_shape=(none, num_features))) model.add(dropout(0.3)) model.add(lstm(75, return_sequences=true)) model.add(dropout(0.3)) # memory leak also occurs if i use a model.add(dense(1)) below instead of time distributed # adam optimizer=adam) history model.fit(x=train_data, y=y_train_data, epochs=100, ``
import tensorflow.keras as keras from tensorflow.lite.python import lite, interpreter #define model that uses upsampling 2d and depends on it 's output changing with the input size def demomodel(): inputs = 3], name="input_1") a = b = c = inputs]) return outputs=[a, c]) #convert to tflite model demomodel() converter #run the tflite model inter inter.allocate_tensors() ``
compile the current r1.15 release candidate and use the train.py script from the od api to train a model.
import tensorflow as tf x = tf.constant(3.0) a = tf.constant(5.0) b = tf.constant(7.0) c = tf.constant(9.0) with tf.gradienttape() as tape: ttape.watch([x, a, b, c]) ty a
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please see the short example test case here: phofurl in particular, see: cell 4 (random noise image, 4800 unique values) vs. cell 6 (image after conversion to pil and back, 256 unique values)
please see the short example test case here: phofurl (alternatively, please see the same notebook rendered on a different site here: phofurl in particular, see: cell 6 (expected output plotted by hand) vs. cell 7 (model behavior right after being created, matches expected) vs. cell 10 (model behavior after being saved and re-loaded, does not match expected) cell 4 (model definition, in particular, see first few lines with lambda layer parameters defined in a loop)
note: with the code below, there is no error message.
however, uncomment the line and you will get a `valueerror`.
#!/usr/bin/env python3 import numpy as np import tensorflow as tf from tensorflow.keras import layers # uncomment this line and you will get an error # def tf_dataset(): def data_gen(): while true: yield np.random.rand(72, 96, 1), np.random.rand(18) types = (tf.float64, tf.float64) shapes = (tf.tensorshape([none, none, none]), tf.tensorshape([none])) dataset = types, output_shapes=shapes) dataset = dataset.batch(16) return dataset dataset tf_dataset() model tf.keras.sequential() # notice how the input dimensions are mismatched 72, 1))) kernel_size=4, strides=4, activation='relu')) kernel_size=4, strides=4, activation='relu')) activation='softmax')) print(model.summary()) model.fit(dataset, steps_per_epoch=1, epochs=1) ``
import argparse import numpy as np import tensorflow as tf from import signature_constants from tag_constants from convert_to_constants def get_dataset(batch_size, input_size): features = np.random.normal( loc=112, scale=70, size=(batch_size, input_size, input_size, 3)).astype(np.float32) features = np.clip(features, 0.0, 255.0) features = "features", dtype=tf.float32, dataset = dataset dataset.repeat() return dataset def def load_model(): saved_model_loaded tf.saved_model.load( saved_model_dir, graph_func return graph_func graph_func load_model() # replace load_model function and its call with the following to make it work # saved_model_loaded tf.saved_model.load( # saved_model_dir, # graph_func frozen_func def wrap_func(*args,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import numpy as np import matplotlib.pyplot as plt from google.colab import drive #get a image as input data for model : tensorflow logo !curl phofurl --output tensor_logo.png def train_input_fn(): def raw_image = tf.read_file(img_path) image_decoded = channels=3) image_decoded = tf.cast(image_decoded, tf.float32)/255.
dummy_labels = tf.round(image_decoded) return image_decoded, dummy_labels list_files files files files.repeat(100) files files.batch(1, drop_remainder=true) return files #basic check to compare #can 't be run after tpu initialisation with tf.session() sess: batch item sess.run(batch) print( 'shape of first item : ', item[0].shape, item[1].shape) plt.imshow(item[0][0]) plt.show() plt.imshow(item[1][0]) def unet_encoder(inp, layer_nb, activation 'relu ', padding 'same ', batchnorm true, is_pool true): inp tf.keras.layers.conv2d(8 * 2
provide a reproducible test case that is the bare minimum necessary to generate the problem.
install the latest tensorflow with `pip install tensorflow` into a conda environment running python 3.7 with cuda 10.1 installed.
then run the following command: phofcode
see this (gpu) colab notebook example with mnist data: phofurl see this (gpu) colab notebook example with numpy random for data: phofurl see this (gpu) colab notebook example using standard conv2d (not depthwiseconv2d): phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
below is the model definition: phofcode
just the tensorflow tutorial code directly from the tensorflow website.
~]$ cat test_tf.py #!/usr/bin/env python3 import tensorflow as tf mnist = tf.keras.datasets.mnist (x_train, y_train),(x_test, y_test) = mnist.load_data() x_train, x_test = x_train / 255.0, x_test / 255.0 model = 28)), activation=tf.nn.relu), ]) metrics=['accuracy']) model.fit(x_train, y_train, epochs=5) model.evaluate(x_test, y_test)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
download the data as follows: cd ~ mkdir datasets cd ~/datasets mkdir jena_climate cd jena_climate wget phofurl unzip run jupyter notebook and load the notebook that is attached to this issue in a python 3.7 environment with tensorflow 2.0.0. in notebook replace /home/daniel with /home/(your username).
run each cell from beginning of notebook so you load data and create generators before you get to example under heading 1.6. then try to run example.
you will find that loss and val_loss are terribly wrong.
edit: since writing this, i have tried run more code in notebook.
the code under heading "1.7 stacking recurrent layers" also runs incorrectly in tensorflow 2.0.0 using tensorflow.keras.
the loss produced is "nan" (it should be around 0.3).
i think it is same problem with layers.gru the problem does
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import zipfile import filecmp normal_fd = open("normal.zip", "wb") normal2_fd = open("normal2.zip", "wb") open("gfile.zip", "w").close() # "touch" file so that it exists, issue #32090 gfile_fd = "w+b") # need +, issue #32122 for fd in (normal_fd, normal2_fd, gfile_fd): with zipfile.zipfile(file=fd, "w") as zipfd: with zipfd.open("test.txt", "w") as fid: fid.write("hello, world!
".encode()) fd.close() print("normal zips equal?
", "normal2.zip")) print("gfile zip equal normal?
import tensorflow as tf test_path = "test" # create a file at <test_path> with open(test_path, "w") as f: f.write("hello, world!")
# no error when creating dir with + "/test_file.txt", "w") as f: # .write throws exception since the <test_path> directory does not exist f.write("hello") ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is how batch normalization is implemented (within a convolution block): phofcode below is the code to train and save the model.
phofcode below is the code to load, update inputs, perform inference, and freeze the model.
phofcode below code to convert to coreml.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode also see colab notebook here: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
install tensorflow and tfx in python 3.7 import tensorflow as tf import tensorflow_transform as tft import as tfma
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is the code i set the tflite interpreter options: phofcode and here is code i used to inference(where input is a four dim array, and output a two dim array, corresponding to model input and output dimentions): `tflite.run(audiodata, output);`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
a sample class like here phofhyperlink , which was instantiated globally.
when called by the java program, the code will crash at this line phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the tensorflow phofimage commands as below: for quantized models: echo "inception_v4" --input_layer=input --input_layer_type=float --show_run_order=false --num_threads=1 --show_flops echo --show_flops --input_layer=input --input_layer_type=float --show_run_order=false --num_threads=1 echo --output_layer=output --show_run_order=false --num_threads=1 --show_flops for float point models: echo "inception_v4" --show_flops --input_layer=input --input_layer_type=float --show_run_order=false --num_threads=1 --input_layer=input --input_layer_type=float
provide a reproducible test case that is the bare minimum necessary to generate the problem.
just launch tensorflow initialization to show the info of the devices.
import tensorflow as tf x = softmax_keras = softmax_tf = tf.nn.softmax(x) y_true = loss_keras softmax_keras) loss_tf softmax_tf) def return set([tensor.op.type] + [inp for tensor in tensor.op.inputs for inp in print( 'softmax ' in # prints "true" print( 'softmax ' in # prints "false" ``
put it on colab and replace google_bucket_to_define by a real bucket (2 occurrences) phofcode
full code at phofurl and phofurl .
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode given that interpreter_ contains resizeops with -1 specified.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
official benchmark tool test and android integration test (benchmark version- 1.14, and android(tflite gpu delegate-nightly)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`import tensorflow as tf ` 'label.pbtxt ', overwrite=true)`
code for chief: phofcode code for worker: phofcode ip_address1 is always the address of the chief system and ip_address2 is the adddress of worker, and it is swapped when swapping windows and unix systems rules.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
then on that run train_model.py.
it fails to run its own model, generated on rpi.
or run gen_test_train_data.py on windows, run train_model.py on windows, transfer the model the rpi, then model_visual_test.py it.
it will fail to load.
i will leave this branch untouched so you can test the bug report.
code that reproduces the problem.
a very basic implementation (without support for rank > 2 or multiple summation axes) is as follows.
phofcode extending this to support full functionality should not be difficult.
basic testing/benchmarking script: python from __future__ import absolute_import from __future__ import division from __future__ import print_function import numpy as np tensorflow as tf def get_data(dense_shape, mean_edges=100, seed=123): """generate random sparse matrix data."""
n, m = dense_shape r = num_edges = int(mean_edges * n) flat_index = * n * m).astype(np.int64) # flat_index np.arange(0, n * m, m)], axis=0) flat_index dtype=np.int64) i, j (n, m)) # pylint: sparse_indices np.stack((i, j), axis=-1) weights return sparse_indices, weights def sparse_sum(sp, axis=1): """sparse.reduce_sum."""
return tf.sparse.reduce_sum(sp, axis=axis) def sparse_sum2(sp, axis=1): -> to_dense."""
return axis=axis)) def seg_sum(sp, axis=1, ordered=false): """ args: sp: rank 2 sparse tensor axis: int, axis along which to sum ordered: if true, other axis indices are assumed to be ascending.
returns: rank 1 dense tensor equivalent to tf.sparse.reduce_sum(sp, axis=axis) """ if sp.shape.ndims != 2: raise notimplementederror other_axis 0 if axis in (1, -1) else 1 if ordered: return sp.indices[:, other_axis]) else: sp.indices[:, other_axis], compare(dense_shape, axis=1, ordered=false,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the assertions below all pass.
the second and third assertion (the `not` assertions) would be expected to fail.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
code generated the tflite file phofcode code to test in python(from doc) phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
alternatively, it can be found in this txt file: run_dummy.txt phofhyperlink phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode this snippet of code is a simplified version of this colab notebook phofhyperlink .
the original works fine but fails.
at the same time, i provide a colab notebook phofhyperlink for reproducing this issue.
i have created a minimum example out of my model in google colab: phofurl
phofcode this results in the error phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf converter = tflite_model = converter.convert()
this encountered when passing in a function that `autograph` fails on.
for example, a python function that is actually a wrapper around an r function.
please report this to the autgograph team.
when filing the bug, set the verbosity to 10 (on linux, `export autograph_verbosity=10`) and attach the full output.
cause: converting <function initialize_variables at attributeerror: 'module ' object has no attribute 'num ' ``
python code (model creation): phofcode jvm / scala code (inference code): phofcode i am getting the following error: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
a = input(shape=(none, 10)) attn = attention()([a,a]) model = model(a, attn) model(np.zeros((50,10), dtype=np.float32))
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please, run phofurl > > try: > # %tensorflow_version only exists in colab.
phofcode here is the colab link phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
see colab link in description.
this is the offending code.
it only appears to happen on windows.
i am unsure in colab how to select a windows based environment.
edit 1: added windows caveat
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i am using the standard structure for `model_fn` in `tf.estimator`.
here 's the main part of the code: python def model_fn(features, labels, mode, params): # model layers # ... rmse = predictions) if mode == predictions = { 'new_states ': predictions } return predictions=predictions) loss = predictions) metrics = { 'rmse ': rmse} if mode == return loss=loss, eval_metric_ops=metrics) optimizer train_op optimizer.minimize(loss, return loss=loss, train_op=train_op) ``
the code below should not raise the `assertionerror`: python import tensorflow as tf class def __init__(self, cell): super(cellwrapper, self).__init__() self.cell = cell @property def state_size(self): return self.cell.state_size @property def output_size(self): return self.cell.output_size def get_initial_state(self, inputs=none, batch_size=none, dtype=none): return inputs=inputs, batch_size=batch_size, dtype=dtype) call(self, inputs, states, training=none,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
a minimal reproducible example is below.
with access to at least 2 gpus, begin training the model with `initial_run=true`.
interrupt training after a few epochs have completed, then re-run the script with `initial_run=false`.
the model will attempt to load the previously trained weights and resume training from the last completed epoch, leading to error.
there are several steps that i will describe to accurately reproduce my problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
> import numpy as np > import pandas as pd > import tensorflow as tf > import ssl dftrain = pd.read_csv( ' phofurl dfeval = pd.read_csv( ' phofurl y_train = y_eval = try: %tensorflow_version 2.x except exception: pass tensorflow as tf tf.random.set_seed(123) print( "tensorflow version {}".format(tf.version)) platform vocabulary fc tf.feature_column categorical_columns [ 'sex ', 'parch ', 'class ', 'deck ', 'embark_town ', 'alone '] numeric_columns [ 'age ', 'fare '] def vocab): return vocab)) feature_columns [] for feature_name in categorical_columns: # need to one-hot encode categorical features.
# he finds the unique values in each column and uses that # array a vocabulary vocabulary vocabulary)) for feature_name in numeric_columns: example dict(dftrain.head(1)) class_fc ( 'first ', 'second ', 'third '))) print( 'feature value: print( 'one-hot encoded: ', # use entire batch since this is such a small dataset.
num_examples len(y_train) def make_input_fn(x, y, n_epochs=none, shuffle=true): def input_fn(): dataset y)) if shuffle: dataset for training, cycle thru dataset many times need (n_epochs=none).
dataset dataset.repeat(n_epochs) in memory training doesn 't use batching.
return return input_fn training and evaluation input functions.
train_input_fn make_input_fn(dftrain, y_train) eval_input_fn make_input_fn(dfeval, y_eval, shuffle=false, n_epochs=1) linear_est train model.
result since data fits into memory, use entire per layer.
above one batch is defined the entire dataset.
n_batches 1 est the model will stop training once specified number of trees is built, not based on number of steps.
max_steps=100) ##### <<<<<---- this kills notebook kernel
provide a reproducible test case that is the bare minimum necessary to generate the problem.
can use the google research bert and profile for memory using profilerhooks.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
note: i put the code into colab and was able to verify the bug.
phofcode i get the following output: phofcode when i run on the cpu, problem goes away.
when i run on my own data, i get following code / output which shows problem more severely: phofcode gives output... phofcode
partially copied from phofurl phofcode output: warning:tensorflow:from check_dropout.py:5: the name is deprecated.
1.15.0-rc0 0.0, # different dropout mask was used for each call # same dropout mask was used for each call ``
the maven setting: phofcode phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
` import tensorflow as tf from tensorflow import keras fashion_mnist = (train_images, test_labels) = model = keras.layers.conv2d(64, (3,3), activation=tf.nn.relu, input_shape=(28,28,1)), keras.layers.flatten(), keras.layers.dense(128, activation=tf.nn.relu), keras.layers.dense(10, ]) model.fit(train_images, train_labels, epochs=5) '
throw an `indexerror` in this call phofhyperlink and make sure the if statement phofhyperlink is not entered.
i wish i had a portable example for you but i 'm not quite sure why my code triggering this path and i don 't have much time to investigate the root cause, but i can confirm that is an error that have encountered naturally.
it isn 't just hypothetical.
note, this code is copied from phofurl with the exception that i changed the line phofcode to phofcode python import collections import tensorflow as tf nestedinput = ["feature1", "feature2"]) nestedstate = ["state1", "state2"]) class def __init__(self, unit_1, unit_2, unit_3,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode the aforementioned code runs in an image generated by the following dockerfile dockerfile from centos:7 env source_directory /tmp/tf-connect4 env python_version 3.7.4 run yum -y groupinstall -y "development tools" && yum -y update && yum -y install openssl-devel zlib-devel libffi libffi-devel wget && wget phofurl && tar -xjf cd python-$python_version ./configure make make install pip3 install --upgrade pip pip3 install tensorflow==2.0.0-rc1 numpy falcon jsonschema ``
phofcode the following setup works in comparison: phofcode
i 'm converting the original ckpt model to pb using frozen graph phofcode then i convert the .pb to tflite using : phofcode any help would be appreciated.
import tensorflow as tf import numpy as np class def __init__(self,
import tensorflow as tf import numpy as np from import resnext101 from import preprocess_input, decode_predictions from keras_preprocessing image model = layers=tf.keras.layers, models=tf.keras.models, utils=tf.keras.utils) img_path = 'image.jpg ' img = image.load_img(img_path, target_size=(224, 224)) x = image.img_to_array(img) x = np.expand_dims(x, axis=0) x preprocess_input(x, utils=tf.keras.utils) preds model.predict(x) print( 'predicted: ', top=3)[0])
python !pip install import math import numpy as np import tensorflow as tf from tensorflow.keras import backend as k class def __init__(self, optimizer, cool_period = 10,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofurl requirements: visual studio 2017+ happens both in debug or release builds.
the tensorflow.dll we use is not built on debug, in order to use a custom tensorflow.dll with a .pdb, replace the one in et461 or netcoreapp2.2 ` and then run `calceventstfs.exe` simply build the solution and run the only project there is.
i recommend to restart the program if it did not occur within 1 minute.
if you are getting `unable to load dll 'tensorflow': the specified module could not be found.`, copy your own tensorflow.dll of version 1.40 cpu for windows to output directory: > et461 or netcoreapp2.2
python import tensorflow as tf w = tf.random.normal((6,1), dtype=tf.float32) with tf.gradienttape() as tape: y = tf.reduce_sum(w
python import numpy as np import tensorflow as tf import os print(tf.__version__) class def __init__(self, c_out, kernel_size=3): super().__init__() self.conv = kernel_size=kernel_size, strides=1, padding="same", use_bias=false) self.bn = epsilon=1e-7) def call(self, inputs): res = return res class fnet(tf.keras.model): def __init__(self, start_kernels=64, weight=0.125,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
session; options; tensorflow::configproto & config = options.config; int corestouse = 1; if (corestouse > 0) { } status = session); tensorflow::metagraphdef graph_def; metamodel_path, &graph_def); run_model();
phofcode the same issue happens when i add or multiply (but not divide!).
when dividing with this mapper: phofcode i get `typeerror: x and y must have the same dtype, got tf.int64 != tf.int32`.
then i 've tried casting `window_size` to `tf.int64`: `window_size = tf.constant(3, dtype=tf.int64)` and that fixed the issue in all cases.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is an example phofurl there are 2 cases shown.
first i show that keras model with sequence features is working.
and then i show that conversion to estimator fails.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
for experimentation, i use colab, so here 's the colab notebook phofhyperlink .
1. put downloaded cifar-10-batches-py to ~/.keras/datasets/ 2. code: import tensorflow as tf (_, _) =
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
with eager enabled: phofcode results in: phofcode without eager: phofcode which results in a model with no output when saved to pb.
i tried to create a minimal example, so i 'm not even training the model here before evaluating some data.
but note this is also a problem when training, so i don 't think using an untrained model here is related to the issue.
in the same way, i 'm using randomly generated data, but this happened to me when training with real images and masks, and also with higher batch size (i was using the recommended 1024, but i used 128 here so example executes quicker) phofcode output: phofcode
phofcode the issue occurs the second time around in the loop when the `exp_buff` variable is rewritten with `iter(dataset)`.
i 've tried explicitly freeing the object with 'del exp_buff ' within and outside of scope():, but same error occurs regardless.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the following snippet: phofcode causes the exception: phofcode for comparison, the equivalent operation with `tf.gather` phofhyperlink works correctly: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
indices1 = tf.constant([[4], [3], [1], [7]]) updates1 = tf.constant([9, 10, 11, 12]) indices2 = tf.constant([[4], [3], [1], [7], [7]]) updates2 = tf.constant([9, 10, 11, 12, 12]) indices3 tf.constant([[4], [3], [1], [7], [7], [7]]) updates3 tf.constant([9, 10, 11, 12, 12, 12]) shape tf.constant([8]) scatter1 tf.scatter_nd(indices1, updates1, shape) scatter2 tf.scatter_nd(indices2, updates2, shape) scatter3 tf.scatter_nd(indices3, updates3, shape) print(scatter1) print(scatter2) print(scatter3)
original official colab: phofurl issue first reported based on this colab: phofurl simplified colab reproducing the error with a simple model: phofurl
>>> s = "hello world" >>> r" ", r" t") invalid rewrite pattern: t <tf.tensor: id=4, shape=(), dtype=string, numpy=b 'helloworld '> ``
the code for the two versions only differs in enabling eager execution and the loss function.
phofurl ng: phofurl head ok: phofurl head > $ git checkout -f bug > $ make input_data.h > $ make > $ ./hello_world # ng git checkout head make ./hello_world # ok
provide a reproducible test case that is the bare minimum necessary to generate the problem.
link to tensorflow model: phofurl link to the generated tflite model: phofurl code used to generate tflite file from tensorflow model: phofcode i used netron visualise the .pb and .tflite graph, link: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
using the dcgan tutorial ( phofurl and modifying it to include a summary_writer : phofcode and adding scalar logging to the training step function: phofcode the average time per epoch [running on google colab, and on a windows 10 pc with 1080 ti] is a lot longer when logging: original configuration:
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
you can get the model from phofurl after untar, you 'll see phofcode then you can review it in phofurl
python #!/usr/bin/env python import numpy as np import tensorflow as tf from tensorflow.python.keras import model from import layer class mylayer(layer): def __init__(self,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
note: you might have to run the code multiple times.
the error appeared in 3 out of 5 runs.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the python script for conversion is here: phofcode and in android code, i called
see phofurl and change the sample function as described.
python import tensorflow as tf mirrored_strategy = def get_net(): net = tf.keras.sequential() kernel_size=(3, 3))) return net data = 112, 112, 3)) label = )) multi_db label)).batch(80) dist_dataset with net get_net() @tf.function def replica_fn(input): d, l input return net(d) @tf.function def total_result 0 for x in dataset: per_replica_result args=(x,)) total_result per_replica_result, axis=none) return total_result for _ in range(100): f ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
running this works as expected.
prints out the result of sess.run and exports the 'model ' phofcode this is the complete output: phofcode the model is then served using docker via the command: phofcode this is output of running docker command: phofcode however when this is run: this error thrown:
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please find the source code @ phofurl [update] my latest test case @ phofurl stackoverflow rereference : phofurl
python import tensorflow as tf tf.zeros([10], dtype=tf.bool) ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
sample tf_config of parameter server: index and type varies for chief, worker and evaluator on other tf_configs.
tf_config={ "task": { "type": "ps", "index": 0 }, "cluster": { "chief": ["machine2:2222"], "worker": "evaluator": ["machine5:2225"], "ps": ["machine1:2218"] } }
provide a reproducible test case that is the bare minimum necessary to generate the problem.
tflite_convert --graph_def_file --inference_type quantized_uint8 --input_arrays truediv --input_shapes --output_arrays softmax_tensor --std_dev_values 1 --mean_values 0 --default_ranges_min 0 --default_ranges_max 6 --output_file mobilenetv3.tflite
provide a reproducible test case that is the bare minimum necessary to generate the problem.
minimal.cc phofcode compiling commands: phofcode python script: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
sess_; sess_options_; tensorflow::graphdef graph_def; auto default_env = model_path, &graph_def); run_model();
import numpy as np import tensorflow as tf x = 100), tf.float32) y = 100, 100), tf.float32) z = 100), tf.float32) class model(tf.keras.model): def __init__(self): super(model, self).__init__() self.layer = tf.keras.layers.gru(100) @tf.function # remove this and it works fine def call(self, x, y): z self.layer(y, initial_state=x) return z model model() with as tape: # if persistent=false it works fine loss tf.norm(model(x, y) - z) grads tape.gradient(loss, ``
phofcode the error that i get from running the above code is as follows: traceback (most recent call last): file "example_error_file.py", line 44, in <module> kmeans_out = n_init=5)(conv_1) file line 634, in __call__ outputs = call_fn(inputs, *args,
this code is active for all calls to predict().
this is for a commercial project we are trying to migrate from community keras to tensorflow keras.
it is a speed critical real-time robotics application where the 30ms is enough to miss our hard deadlines.
if predict() intended for production inference, we feel this should be resolved in tensorflow keras.
if it only intended for use during training, this should be noted in the mainline documentation, along with a suggestion what ~is intended production inference.
as a temporary workaround, we disabled some of these function calls in local tensorflow fork, and the performance regression went away as expected.
we took care make sure this not profiling glitch.
we excluded warmup time from the profile, and average over number of samples.
phofcode the result in this case is: phofcode
python import numpy as np import tensorflow from import input, dense from import sequential from tensorflow.python.keras backend as k from tensorflow.python.keras optimizers original_dim = 160 intermediate_dim = 32 # load data train_features = test_features = np.random.rand(10000, ############# build model ############# autoencoder sequential() autoencoder.add( ) autoencoder.add( dense(intermediate_dim) ) autoencoder.add( dense(original_dim) ) autoencoder.build() autoencoder.summary() # crashes: #works: optimizer= 'adam ') # train model train_features, verbose=1, shuffle=true) ``
i changed the current demo app to gpu experimental and i had to do some minor changes in the code to get the app running successfully on gpu.
(to know which changes to make, i looked into the demo app version r1.13.)
for object detection app i added gpu delegates, changed ismodelquantized false (and don't use isquantized anymore), and use a self-converted ssd mobilenet model (because is currently written for quantized models using cpu and doesnt have gpu delegates in original code).
wrote delegates as described in phofurl and converted model this way: #31015 (comment).
then, applied same changes object detection as did current demo before (by using knowledge of demo version r1.13).
- current app: phofurl - demo version r1.13: phofurl - object detection app: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i use sample code in tensorflow 2.0.0 rc: classify images
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode output tf 2.0: phofcode output tf 1.14 phofcode
the minimal failing example with the code and data is here phofhyperlink .
use mnist.py phofhyperlink and replace keras with tf.keras
(this is example is nonsensical, but shows the problem.
i 've boiled down the problem to a mwe.)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import time import math import tensorflow as tf import numpy as np tensorflow as keras from tensorflow.keras layers from tensorflow keras tensorflow.keras.backend as k from tensorflow.keras.utils plot_model from scipy .
stats multivariate_normal normal def test_tf (x): z = x[:,0]
phofcode you can see many [i] log using but with no logs
base code defining the function i want to implement and two minimalist tests (in practice my symbolic tensors are not mere inputs, but the issue is strictly similar): phofcode `test_random_tensors()` works both with and without having executed first.
fails when eager is left enabled, with the following error messages depending on the tensorflow 2.0 installation used: 2.0b1: phofcode 2.0 nightly: phofcode note that decoration with `@tf.function` does not solve issue, as functions wrapped this way do not accept keras symbolic tensors as inputs
just enable and --use_nnapi=true flags when running the benchmark on any model.
is it not implemented yet?
provide a reproducible test case that is the bare minimum necessary to generate the problem.
bazel build --config monolithic --cxxopt=-std=c++11 --cpu=armeabi-v7a --verbose_failures
provide a reproducible test case that is the bare minimum necessary to generate the problem.
conversion was attempted with: phofcode
import tensorflow as tf hello = tf.constant('hello, tensorflow!')
sess = tf.session() print(sess.run(hello)) hello_gpu = tf.constant('hello, tensorflow-gpu!')
gpudelegate = new gpudelegate(); tflite = new
provide a reproducible test case that is the bare minimum necessary to generate the problem.
following example from the docs can be used to reproduce the problem.
check definition of main function.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
running the following at the end of the notebook will reproduce the error.
python class def __init__(self, feature_columns,
python script phofcode java code ( android environment ) phofcode
google colab link: phofurl phofhyperlink interesting code: phofcode
already provided in the description of the current behavior
run this python script, then type in:` run -t 10` will get an error message... phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this works: phofcode this fails due to failed assert: phofcode
i cannot provide the data as it is proprietary.
import tensorflow as tf from tensorflow.keras.layers import (dense, input, lambda) from tensorflow.keras.models import model, sequential from scipy import sparse numpy as np def layer_lambda(input_x): sparse = input_x[0] dense = input_x[1] dense = tf.transpose(dense) y = dense) return tf.transpose(y) dense_mat np.eye(30, 30, dtype=np.float32) sparse_mat sparse_indices np.mat([sparse_mat.row, sparse_tensor sparse_mat.data, sparse_mat.shape) model sequential() model_input input(shape=(20,)) x dense(20)(model_input) x dense(30)(x) x lambda(layer_lambda, output_shape=(none, 30, 30))([sparse_tensor, x]) model model(model_input, x) model.save("model.h5") ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i wrote a toy example to reproduce the issue, it might be clearer than the description above.
import numpy as np import tensorflow as tf print(tf.__version__) class def __init__(self, vocab_size, hidden_size): super(embedding, self).__init__() self.vocab_size = vocab_size self.hidden_size = hidden_size def build(self, input_shape): self.shared_weights = self.add_weight( "weights", shape=(self.vocab_size, self.hidden_size), dtype=tf.float32, mean=0.0, stddev=self.hidden_size
import tensorflow as tf input = tf.keras.input([none]) spec = tf.signal.stft(input, 400, 160) ``
<details> <summary>example code snippet</summary> phofcode </details>
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
code to save the hub module to a savedmodel: phofcode bash command to convert tensorrt model: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the estimator definition starts here phofhyperlink .
if i run: python from tensorflow.python.client import device_lib i get an output with tf2.0: [name: "/device:cpu:0" device_type: "cpu" memory_limit: locality { } incarnation: name: "/device:xla_cpu:0" device_type: "xla_cpu" memory_limit: locality { } incarnation: physical_device_desc: "device: xla_cpu device", name: "/device:xla_gpu:0" device_type: "xla_gpu" memory_limit: locality { } incarnation: physical_device_desc: "device: xla_gpu device"] and import tensorflow as tf gives false.
same code in tf1.14 gives the following: [name: "/device:cpu:0" device_type: "cpu" memory_limit: locality { } incarnation: name: "/device:xla_cpu:0" "xla_cpu" physical_device_desc: "device: xla_cpu device", name: "/device:gpu:0" "gpu" bus_id: 1 links physical_device_desc: "device: 0, geforce mx250, pci bus id: compute capability: 6.1", "/device:xla_gpu:0" "xla_gpu" xla_gpu device"] and: import tensorflow as tf gives true ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i can reproduce what i think is the same error using: phofcode
phofcode this outputs: phofcode whereas this: phofcode outputs: shape=(?, ?
void model_path, unsigned inter, unsigned intra){ sess_; sess_options_; tensorflow::graphdef graph_def; auto default_env = model_path.string(), &graph_def); sess_->close(); } // this situation the inference time is 90ms.
i loaded the model as below: model = 299, 3), include_top=true, weights=none, classes=category_size) optimizer = model.summary() print( '###trainin begin...### ') # !!!
i loaded the model as below: model = 299, 3), include_top=true, weights=none, classes=category_size) optimizer = model.summary() epochs=200, callbacks=[], shuffle=true, validation_data test_generator) # !!!
i intentionally use the training data to evaluate the model, # !!!
expect that loss and val should be almost equal to value in fit() progess?
print( '###evaluate with training data### ') print( '###evaluate with testing data### ') use an array instead of a generator and print prediction array see what happens all prediction arrays gets similar value from different inputs.
print( '###predict images### ') i 0 test_images np.empty((0, 299, 299, 3)) test_labels np.empty(0) for x, y in test_generator: i i + 1 if i > len(test_generator): break test_images x), axis=0) test_labels y), axis=0) error_count 0 predictions for in predicted_label if not predicted_label == test_labels[i]: error_count error_count + 1 print("label for image %d: %d" % (i, test_labels[i])) print("predict label for image %d: %d" % (i, predicted_label)) decimals=3)) print("total error count is %d, total predict count is %d" % (error_count, test_images.shape[0]))
provide a reproducible test case that is the bare minimum necessary to generate the problem.
model-broken.tflite.zip phofhyperlink this basic model fails to run on gpu (with the error specified above), but will run fine on cpu.
similar to this tutorial phofhyperlink , but with inside the `train_step()` to print the prediction.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i have a dataset in csv `/tmp/foo.csv`: phofcode i can run something like with `header=true` phofcode which gives: phofcode when c should not be in the dataset.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
inputs = np.array([[[x + y * 10 for x in [1,2]] for y in range(5)]]) inputs = print("inputs:", inputs) import tensorflow as tf tf.reset_default_graph() with tf.graph().as_default() as g: x = tf.placeholder("float", [1, 1, none, 2]) y = ksizes=[1, 1, 3, 1], strides=[1, 1, 1, 1], rates=[1, 1], padding= 'valid ') gradient tf.gradients(y, x) init with tf.session(graph=g) as sess: sess.run(init) print(sess.run([y], feed_dict {x:inputs}))
in bash: phofcode then in python: phofcode
standalone script required to reproduce.
i define the custom ops like below: phofcode it seems like the custom ops not work ok in eager mode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i implemented a custom op with zero_out_op_kernel_1.cc phofhyperlink in tensorflow repository.
i called the operator from the following python code.
replace the content of by this code phofhyperlink and run nas_network.py directly.
the only modification i brought to this file, besides the new __main__ part at the bottom to run a simple fail case, can be found in the _nas_stem function.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf tf.version.version) import sys print(sys.version_info) tf_a = tf.variable(1.0) print( 'variable tf_a initialized to tf_lr = tf.variable(0.1, trainable=false) tf_opt = @tf.function def train_step(): with tf.gradienttape() as tf_tape: tf_loss = tf_a
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf tf.version.version) import sys print(sys.version_info) tf_a = tf.variable(1.0) print( 'variable tf_a initialized to lr = 0.1 def get_lr(): global lr return lr tf_opt = @tf.function def train_step(): with tf.gradienttape() as tf_tape: tf_loss = tf_a
heres a minimal example: phofcode
not possible, as autodesk flame framework is required
], use_resource=true) c = tf.constant(0.)
print(tf.gradients(c, [a, b], # => [<tf.tensor 'zeros_like:0 ' shape=(2,) dtype=float32>, # <tf.tensor 'zeros_like_1:0 ' shape=() dtype=float32>] ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`adam = `adam.learning_rate = # this does not update learning_rate, but changes python-typed ` `hyperparameters in "_hyper" dictionary to tf.variables` `adam.learning_rate = # this finally updates the tf.variable ` calling adam._hyper before update yields: `{ 'learning_rate ': 0.001, 'decay ': 0.0, 'beta_1 ': 0.9, 'beta_2 ': 0.999}` calling adam._hyper after first update yields: `{ 'learning_rate ': <tf.variable 'learning_rate:0 ' shape=() dtype=float32, numpy=0.001>, 'decay ': <tf.variable 'decay:0 ' shape=() dtype=float32, numpy=0.0>, 'beta_1 ': <tf.variable 'beta_1:0 ' shape=() dtype=float32, numpy=0.9>, 'beta_2 ': <tf.variable 'beta_2:0 ' shape=() dtype=float32, numpy=0.999>}`
should not be difficult to create a sample code.
will try to get one soon.
from __future__ import absolute_import, division, print_function, unicode_literals import tensorflow as tf import os import time numpy as np glob matplotlib as mpl mpl.use( 'agg ') matplotlib.pyplot as plt pil imageio # from ipython display (train_images, _), (test_images, _) = train_images = 28, 28, 1).astype( 'float32 ') test_images = 28, 28, 1).astype( 'float32 ') # normalizing the images to the range of [0., 1.]
train_images /= 255. test_images /= 255.
# binarization >= .5] = 1.
phofcode if i change the `dataset_evens = tf.int64)` to the place after `dataset_range = tf.int64)`, it also will be ok.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i have add a new issue on firebase ml kit , you can find the code and logs here phofhyperlink update: this is the difference showing between tflite model prediction and frozen inference model prediction: + tflite model prediction: phofimage + frozen inference graph model prediction: image phofimage how can i solve this?
i really need help to fix this problem.
python import tensorflow as tf import numpy as np tensor_1 = 20))) print() # set breakpoint here ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
def tgt_h, tgt_w): # get the image name list input_dir = # a path to some image dataset if (input_dir == 'none'): raise valueerror('input directory is not provided') if not raise valueerror('input directory not found') image_list_lr_temp = os.listdir(input_dir) image_list_lr = [os.path.join(input_dir, _) for _ in image_list_lr_temp if _.split('.
')[-1] == 'png' or _.split('.
')[-1] == '.jpeg' or _.split('.
')[-1] == 'jpg'] image_list_ds = image_list_ds image_list_ds image_list_ds.repeat() # read in and preprocess the images def preprocess_image(image): image channels=3) image tf.float32) [tgt_h, tgt_w, 3]) return def tf.read_file(path) return preprocess_image(image) image_ds image_ds image_ds.batch(1) # push path and into a list data 'paths_lr, inputs') return data( paths_lr=image_list_ds, inputs=image_ds ) def memory(): from somewhere online import os import psutil pid os.getpid() py psutil.process(pid) memoryuse py.memory_info()[0]/2.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is a small code snippet for reproduction.
please set the breakpoint at the last `print(...)` and evaluate the shapes-dictionary.
you will see that `conv2d` layer 'conv1 ' has the kernel shape `(3, 3, 1, 32)`, indicating that 1 is depth/number of channels for input.
32 is number of filters/outputs/feature maps.
if you look at `conv2d_transposed` layer 'up1 ' number of outputs is set to 16 but kernel shape indicating that input dimensions are 16 even though they are 32 from `conv2d` layer 'conv3 ' preceding it.
here is the error i get: `>>> from import input_data` futurewarning: conversion of the second argument of issubdtype from float to np.floating is deprecated.
in future, it will be treated as np.float64 == np.dtype(float).type.
from ._conv import register_converters as _register_converters` `>>> mnist = one_hot=true)` `warning: logging before flag parsing goes to stderr.
w0731 11136 deprecation.py:323] from <stdin>:1: read_data_sets (from is deprecated and will be removed in a future version.` `instructions for updating: please use alternatives such as from tensorflow/models.
w0731 11136 deprecation.py:323] from maybe_download (from is deprecated and will be removed in a future version.` `instructions for updating: please write your own downloading logic.` `w0731 11136 deprecation.py:323] from (from deprecated and will be removed in a future version.` `instructions for updating: please use urllib or similar directly.
traceback (most recent call last):` `file equest.py", line 1318, in do_open file line 1239, request url, body, headers, encode_chunked) file line 1285, _send_request self.endheaders(body, file line 1234, endheaders file 1026, _send_output self.send(msg) 964, send self.connect() 1400, connect 407, wrap_socket _context=self, _session=session) 814, __init__ self.do_handshake() 1068, do_handshake 689, do_handshake ssl.sslerror: [ssl: certificate verify failed (_ssl.c:833)` `during handling of the above exception, another exception occurred:` `traceback (most recent call last): "<stdin>", 1, <module> 324, new_func return func(*args,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf import tensorflow.keras.layers as layers class variable(layers.layer): def __init__(self, initial_value,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
reproducible in colaboratory with tf 1.14.0 phofurl phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf from tensorflow import keras from tensorflow.keras import backend as k # import keras # from keras backend as k numpy as np class crf(keras.layers.layer): def __init__(self, num_tags,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
w_embedding_vocab = dtype=tf.string, w_embedding_vocab_table = default_value=0, name="word_embidx_tbl") w_embeddings = embdic.dim], dtype=tf.float32, trainable=false)
- install phofurl - execute the example about web camera: `python .
un_webcam.py --camera 0` thx :-)
i'm using tf_agents library phofcode
phofcode provide a reproducible test case that is the bare minimum necessary to generate the problem.
i am using this phofhyperlink script and a few helper functions from here phofhyperlink .
the two exact scripts that i use are do.py phofhyperlink and utilities.py phofhyperlink .
here are the tiny model and the big model .
my command for running the experiments: phofcode ##
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is a reprex written in r. i 'd be happy to port to other languages if that 's preferable.
r options(digits=8) fake <- function(shape_) { # arbitrary but reproducible %% 2.71 - 1.04, shape_) } library(keras) shape <- c(30,5) model <- keras_model_sequential() %>% layer_lstm(units=2, input_shape=shape) %>% 8)), fake(c(2, 8)), fake(8))) n <- 11 # not a multiple of 4 x array(rep(fake(shape), each=n), c(n, shape)) # n copies of identical input p model %>% predict(x) # all predictions should match p but last n%%4 rows differ #> [,1] [,2] #> [1,] #> [2,] #> [3,] [4,] [5,] [6,] [7,] [8,] [9,] [10,] [11,] (t(p)-p[1,]) * 2
command executed: phofcode you can find the `do.py` script and the `utilities.py` script referenced from it attached, and the `tiny-yolov3_frozen.pb` frozen model here phofhyperlink .
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is an example which reproduces this error: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
code: phofcode printed outputs: phofcode
should be simple to reproduce.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode please copy to a script and run as: without distributed scope: python3 script.py with distributed scope : python3 script.py distributed
run the following code: phofcode here the `rhs` argument to `cholesky_solve` ends up as an empty tensor (it has a shape of (0, 1)), which appears to cause the segfault.
make a file called `zero_out.cc` with the following contents (as per the example from phofurl phofcode make another file called `test_zero_out.py` with the following contents: phofcode ensure that gcc 5 is installed, along with python 3.6 (on ubuntu 18.04), and execute the following: phofcode this compiles and runs custom op.
this should cause a segfault.
ensure that python 3.7 is installed and try same thing: phofcode this should run successfully and print "success".
now create an equivalent test file for gcc 4.8 called `test_zero_out-4.8.py` ensure gcc 4.8 is installed run: this will compile run same code with gcc 4.8. should succeed print "success"
try it directly in google colab.
setting 'use_eager_mode' to true/false switches between the two cases.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode this code works completely fine if the first line is replaced with `import keras`.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode now loading the model: phofcode this raises the following error: `valueerror: '_restoredoptimizer ' is not a valid scope name`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is an example of a simple model where this error would occur.
this will train without problem in eager mode, but the addition of the `@tf.function` decorator causes error.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
yes, cleanly install windows 10, update to the latest 19.03 release with windows updates, install the latest anaconda, install the tensorflow 2 beta 1 binary, and run this notebook locally.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofurl provide a reproducible test case that is the bare minimum necessary to generate the problem.
`python min.py bad` for expected behavior: `python min.py good` note: your running the bad code may or may not crash depending on your gpu memory.
to force crashing, you can increase the array size: `np.random.rand(xx, yy)` phofcode edit: in the same directory is `hooks.py` containing the following: python class def __init__(self, op, feed_dict): self.op = op self.feed_dict = feed_dict def session, coord): # pylint: disable=unused-argument session.run(self.op, ``
first example: phofcode second example, with a rank even larger than 3: phofcode which outputs is: phofcode we see, in this example, that `dense` and `timedistributed(dense)` behave the same in that they only touch to the last dimension of the input.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
server python part, used to convert the exported graph into .tflite file phofcode here is the principal change in script for inference run (java code part): phofhyperlink
here is the model link phofhyperlink .
run phofurl problems using transformer model on tpus.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofurl the notebook linked above is nearly identical to phofurl i 've just added the following line to the training data code cell: idx = tf.py_function(lambda x: x, [idx], tf.int32)``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
so far i could not come up with a small testcase to reproduce the issue.
i will continue to try, but until then i only have the backtrace and the problematic commit
the code snippet below will hang after the last function call.
i 'm not printing anything because calling `tf.print` results in a syntax error on colab and i know that these snippets are being run on colab by you.
when printing the variable `i`, it 's clear that the loop just never stops, i.e.
our data generator looks as follows: phofcode but it is quite problem specific and we use it with a large data set o(100k) samples.
you can reproduce a similar memory growing behavior with the flower example phofurl when i run it on gcp ai platform notebook with tf 1.14 and nvidia tesla k80, with multiprocessing on, i.e.
(train the model section): phofcode i get the below memory plot in stackdriver: ai_job_mem_sample phofimage it is not as profound but the same trace remains quite flat when train i guess in our case number of iteration within one epoch, combined linear memory growth kills machine.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
try any off the shelf fasterrcnn network
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode there is also a colab notebook where you can execute the code directly: phofurl phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
use the tf_gpu_allocator environment variable to select the cuda malloc allocator: `$ export then, in a python shell, try to use the gpu: $ python >>> import tensorflow as tf >>> ``
i used this phofhyperlink nvidia-docker image.
this phofhyperlink script with a small preprocessing change: phofcode i also removed the printing of predictions, as the script is built for a classifier rather than a detector.
consider the dummy training code below.
it generates examples with random shapes and apply a stack of `lstmcell` on batches of sequences on 3 gpus.
if you replace the rnn layer by e.g.
a stack of dense layers, the parallelism is visibly improved.
` code import numpy as np import tensorflow as tf class def __init__(self, dense,
note that the bug does not reproduce if the unknown-shape tensor is passed directly to `reduce_mean`, which would suggest some interaction between the two.
@tf.function def compute(): arr = 1, dynamic_size=true) def body(i, arr): real_logits = tf.random.normal([5, 1]) arr = arr.write(tf.cast(i, tf.int32), real_logits) i += 1 return i, arr def cond(i, arr): return i < 10 _, arr = tf.while_loop(cond, body, (0, arr)) c arr.concat() shape:', c.shape, 'rank:', c.shape.rank) return c @tf.function def compute_ds(): 1, dynamic_size=true) body(state, _): i, state real_logits tf.random.normal([5, 1]) arr.write(tf.cast(i, tf.int32), real_logits) i += 1 return i, en_ds _, en_ds.reduce((0, arr), body) c arr.concat() shape:', c.shape, 'rank:', c.shape.rank) c print('
provide a reproducible test case that is the bare minimum necessary to generate the problem.
graph = tf.graph() with with graph.as_default(): sign_in = name='signal_in') conv = tf.keras.layers.conv2d( 10, (10,2), padding='valid', name='conv_linear', use_bias=true, )(sign_in) data_tensor = feed_dict { } op_value feed_dict=feed_dict)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
(functionality used from example here phofhyperlink ) phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is my minimum snippet of code to reproduce this error.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i can create a repro if needed.
reproduce with `python3 issue.py` issue.py.zip phofhyperlink issue.py is the following (also zipped above): import sys import tensorflow as tf import numpy as np from import compile hidden_size = 2048 filter_size = 8196 num_heads = 32 d_k = hidden_size // num_heads d_k_root d_k
provide a reproducible test case that is the bare minimum necessary to generate the problem.
on a mac, create a file called zero_out.cc with the following code (copied from phofurl phofcode then run: phofcode you should see an error like this: ld: library not found for clang: error: linker command failed with exit code 1 (use -v to see invocation) ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
follow the example walkthrough, you 'll get invalid newstest2014.de (as of 7/8/19)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
any code that attempts to compile a keras model produces this error.
epochs epochs 50 define class mode class_mode "categorical" create generator for training data train_generator train_dir, datagen, target_size c(img_height, img_width), batch_size batch_size, classes classes, class_mode class_mode ) validation_generator validation_dir, validation_datagen, target_size c(img_height, img_width), batch_size (batch_size/9), # validation data is 1/9th of training so reduce the batch size classes classes, class_mode define no.
training samples train_samples train_generator$n # 7000 training no.
validation samples valid_samples validation_generator$n # 800 validation fit to history fit_generator( train_generator, steps_per_epoch as.integer(train_samples / batch_size), epochs epochs, validation_data validation_generator, validation_steps as.integer(valid_samples / (batch_size/9)) )` nb.
this code (as a file `zero_out.cc`) is taken directly from ` phofurl phofcode compile the op with the commands: phofcode run the op: phofcode this prints the following: phofcode
i use the below code to generate .pb file, the key is that padding parameter is same, and dilation_rate is 2. phofcode i use the following code to load and check the .pb file, but padding parameter is not same, but valid.
import tensorflow as tf import numpy as np with open('same.pb', 'rb') as f: graph_def = tf.graphdef() nodes = graph_def.node for node in nodes: if node.op == 'conv2d': ``
import tensorflow as tf from absl import flags './log', 'log directory')
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i 've created repo phofhyperlink where you can find * pipeline.config - one step training, the same tfrecord for training and evaluation * classes.pbtxt - two sample classes * t.tfrecord - containg two white images: one with 100 bounding boxes and second with 200 bounding boxes * notebook-images-view.png - view from notebook when i 've tried visualise bboxes tensorboard images view
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import numpy as np import tensorflow as tf import os import matplotlib.pyplot as plt psutil def memory(): pid = os.getpid() py = psutil.process(pid) memory_use = py.memory_info()[0] / 2.
1. generate the test data phofcode 2. run the test code.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
it should be directly copy-paste-able phofcode if you flip the `custom_training` variable between `true` and `false` (line 72) you 'll see what i mean.
this code reproduces the issue and is copy/paste runnable, performance will degrade significantly within ~30 seconds running this example.
phofcode this example demonstrates passing a numpy array does not have the same issue.
phofcode this issue started at so at: phofurl i decided to post it here when i realized that `predict` is creating a new iterator each predict loop iteration, and works when the get_next tensor is passed in directly
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1. open this google colab phofhyperlink 2. run the code with alpha0 choose version phofimage 3. make note of the training history plot.
5. run the code with beta0 or beta1 choose version phofimage 6. make note of training history plot.
7. observe that with no change to code but using beta0 instead of alpha0 validation accuracy goes down from > 95% to < 90%, with beta1 even to < 80%
provide a reproducible test case that is the bare minimum necessary to generate the problem.
num_tpus = 4 tpu_cluster_resolver = tpu_strategy = run_config = model_dir=output_dir, num_shards=8 * num_tpus, keep_checkpoint_max=5, ) xlnet_config xlnet_model estimator use_tpu=true, model_fn=xlnet_model, config=run_config, params=none, train_input_fn is_training=true, drop_remainder=true)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf 3)(tf.ones((1, 5, 5, 3))) how should resolve it?
provide a reproducible test case that is the bare minimum necessary to generate the problem.
pip install intel-tensorflow tar xvzf testcase_2367.tar.gz # attached cd testcase_2367 python testcase_2367.py
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1. convert tf inceptionv3 to tflite (with optimization for size) 2. load model to android device - fails sometimes not finding a matching model or the error above.
code is in description above.
while my issue arises with custom code using model.fit_generator, i was able to replicate the issue using model.fit with documentation code provided at phofurl phofcode
because is not implemented, i implemented this: phofcode this works: phofcode but this does not: (the difference is dilations or specifically dilations + nchw data format) phofcode is gives following error on the batch_norm which follows the depthwise_conv2d x = self.caxis, training=self.training) file line 324, in new_func return func(*args,
attached nhw3 model (and script to generate pb and tflite with optimization options, which do not have any effect), this is basically nhw3 input, single tf.layers.conv2d() constant-initialized layer and reduce_sum() for output.
any hint on debugging this issue?
i tested both jcenter downloaded (0.0.0-nightly branches) and manually built from r1.14 branch tensorflow-lite and tensorflow-lite-gpu.
i used 1.12.0, 1.13.1, 1.14.0, r1.14 source build tensorflow/tflite with different optimization options with no success.
could you please show how * exactly * you generated mobilenet_v1 tflite model found in your tutorials, since it works like a charm with gpudelegate: ~80ms per single-image inference on gpu several hundreds seconds on cpu on sufficiently recent android.
or any hints how to debug this gpudelegate issue.
attached archive with broken model generated with tflite converted with default options (no properties changed) and script to create model and tflite file itself.
here's my code that lists all the classes in `tf.keras.metrics` that have different names when instanciated twice: python import tensorflow as tf import inspect for name, metric in if inspect.isclass(metric): # it's a metric keras layer args = () if name == 'meaniou': args = (2,) elif name == 'meanrelativeerror': args = ([1],) elif name == 'metric': continue elif name == args = (0.5,) elif (0.5,) layer_name_0 metric(*args).name layer_name_1 metric(*args).name if layer_name_0 != layer_name_1: # two same metrics don't have the same print('-', name) ``
phofcode fails with log: phofcode
my custom app is based on the tensorflow lite android image classification example.
the model loads and runs fine on cpu.
the only difference in the code is the following lines: phofcode
phofcode it seems that many other users are experiencing similar issues on tf2.0-bet
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf @tf.function def filename): out = tf.cast(img_decoded, tf.uint8) out = quality=100) out) def filename): out = tf.cast(img_decoded, tf.uint8) out = quality=100) out) img 127) # example gray image writejpeg_graph(img, "./tfwrite_graph.jpg") # "tfwrite_graph.jpg" not created writejpeg_eager(img, "./tfwrite_eager.jpg") # "tfwrite_eager.jpg" created ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofhyperlink this zip file contains debug.pb (tf freeze graph model) and debug.tflite (tflite converted model from frozen model).
the conversion code is taken straight from the document: phofcode the model has extra operators in the beginning (sub, div, gather) just because i did not have time to rebuild the bare minimal test case but i think it is already simple enough
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode running this code gives the result: uint32 uint32 [0 0 0 0 0 0] [0 0] 1.14.0-rc1 ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import numpy as np import time x = tf.random.normal((1024, 1024)) for i in range(int(1e7)): y = np.array(x) time.sleep(0.01) ``
resolver = strategy = with strategy.scope(): model = ..... ## your tf.keras model model.compile(loss = custom_loss,optimizer = 'custom_optimizer) for i in range(num_its): data,labels next(generator_fn()) model.fit(data,labels)
here is a minimal working example reproducing the issue.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the following code shows the issue.
run it a few times and watch the validation accuracy/loss.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python3 # works fine import tensorflow as tf # none of the following work; they all produce variants of the aforementioned error from tensorflow.keras import layers from tensorflow import keras from tensorflow.python.keras import layers from dense tensorflow.python keras ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
num_filters1 16 there are 16 of these filters.
stride1 1 the stride of the sliding window with num_in_channel w tf.get_variable( 'w ', dtype=tfgraphnumbertype, shape=[filter_size1, filter_size1, num_in_channel, num_filters1], w) b tf.get_variable( 'b ', dtype=tfgraphnumbertype, shape=[num_filters1], b) layer tf.nn.conv2d(padding0, w, strides=[1, stride1, stride1, 1], padding="same") layer += b conv1 tf.nn.relu(layer) shape padding1 padding(conv1, 'pad1 ') pool1 tf.nn.max_pool(padding1, ksize=[1, 2, 2, 1], strides=[1, 2, 1], padding="same", name= 'pool1 ') 2nd convolutional layer filter_size2 5 convolution filters are x pixels.
num_filters2 32 there 32 these filters.
stride2 1 the stride sliding window with num_in_channel w tf.get_variable( 'w ', dtype=tfgraphnumbertype, shape=[filter_size2, filter_size2, num_in_channel, num_filters2], seed=rngseed)) w) b tf.get_variable( 'b ', dtype=tfgraphnumbertype, shape=[num_filters2], b) layer tf.nn.conv2d(pool1, w, strides=[1, stride2, stride2, 1], padding="same") layer += b conv2 tf.nn.relu(layer) padding2 padding(conv2, 'pad2 ') pool2 tf.nn.max_pool(padding2, ksize=[1, strides=[1, padding="same", name= 'pool2 ') with layer_shape pool2.get_shape() num_features layer_flat tf.reshape(pool2, [-1, num_features]) fully-connected layer.
h1 128 number neurons in fully-connected layer.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
bazel run -c opt -- --mean_values=128 --std_values=128 --default_ranges_min=0 --default_ranges_max=6 --allow_custom_ops
### run the code below in a local machine: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python from __future__ import absolute_import from __future__ import division from __future__ import print_function import tensorflow as tf x0 = tf.get_variable('x0', shape=(), dtype=tf.float32) x1 = tf.constant(3.)
x = x0 + x1 # x = tf.constant(3.0) y tf.constant(4.0) with tf.gradienttape() as tape: z x + y tape_grad tape.gradient(z, x) print(tape_grad) # none tf_grad, tf.gradients(z, x) with tf.session() as sess: print(sess.run(tf_grad)) # 1 ``
python import tensorflow as tf inputs = tf.keras.input((10, 10)) assert inputs.shape.as_list() == [none, 10, 10] # this works assert == [none, 10, 5] # raises valueerror ``
run this code, ``a_s`` and ``b_s`` are set to always multiply to 1000. i see performance going from 0.9 seconds up to 45 seconds on this test, even for the same values.
!pip install -q tensorflow==2.0.0-beta1 from google.colab import auth auth.authenticate_user()
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the easiest way to reproduce the problem is using the official notebook : phofurl and re-compiling and fitting a second time phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode this will immediately output phofcode and then output every 10 seconds `tf.tensor(2, shape=(), dtype=int64)`
phofcode produces the following three warnings: warning: logging before flag parsing goes to stderr.
w0617 deprecation.py:323] from (from is deprecated and will be removed in a future version.
instructions for updating: the old _featurecolumn apis are being deprecated.
please use the new featurecolumn apis instead.
w0617 deprecation.py:323] from (from is deprecated and will be removed in a future version.
instructions for updating: use tf.where in 2.0, which has the same broadcast rule as np.where w0617 deprecation.py:323] from (from is deprecated and will be removed in a future version.
instructions for updating: the old _featurecolumn apis are being deprecated.
please use the new featurecolumn apis instead.
phofcode this produces the following error log: typeerror traceback (most recent call last) in <module> 1 dict_data = { 'feature1 ': data} ----> 2 seq_layer(dict_data) in __call__(self, inputs, *args,
using the file tmp.py with the following content: import numpy as np def mul(a, b): z = a @ b then run: .
small example to reproduce the issue: import numpy as np import tensorflow as tf from tensorflow.python.keras import layers from import model_to_estimator_v2 x_shape = (3,) n_class = 5 batch_size = 10 x = name="x", dtype=tf.int64) class def build(self, input_shape): self.y tf.random.poisson( lam=10, shape=(batch_size,) + x_shape, dtype=tf.int64 ) def call(self, inputs,
here is a colab notebook that demonstrates the issue: phofurl
phofcode this yields the following output: phofcode notice that `test write` appears twice in the output.
and log.txt is not created.
when run with tf 1.12 this code snippets behaves as expected
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i am trying to use the pre-made estimator to use on the mnist dataset.
i load dataset from `tensorflow_dataset`.
i pursue following four steps: first building dataset pipeline and defining input function: phofcode then, in step 2, i define feature column with a single key, and shape 784: phofcode step 3, instantiated estimator as follows: phofcode and finally, step 4 using estimator by calling `.train()` method: phofcode
`import tensorflow as tf class qpwcx(layer): def __init__(self, sharp=100,
`from import input, lambda, conv2d, reshape, timedistributed` `from import *` `import tensorflow.keras as keras` `a = input(shape=(12,), dtype = 'int32')` `# a.shape == (none, 12)` `d = reshape((-1, 2, 2))(a)` `# actual result d.shape == (none, none, 2, 2)` `# expected result d.shape == (none, 3, 2, 2)`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode it seems that two odd newline character was mixed into rng.h phofhyperlink as follows.
phofcode this issue is critical for us.
would you like to modify the code
here 's the full code (i tried to add as little as i could): phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode this issue is critical for us.
would you like to modify the code
provide a reproducible test case that is the bare minimum necessary to generate the problem.
class def __init__(self): def begin(self): self.mask_var = [] ### collect the masked variables for v in tf.global_variables(): if v.name.find("mask:0") != -1: self.mask_var.append(v) self.check_mask = def end(self, session): # assign 0 to the variable # get [0, ..., 0] ### however, if restoring checkpoint, self.mask_var[0] is not [0, ..., 0]
1. the script attached is used to train a model using multiple gpus.
* the code is modified from the stock example for quick experiment.
* phofurl * traing using two virtualdevices after 10 epoches * when only one gpu is detected, two virtual devices will be created.
(init_gpu()) use the following command to run the script phofcode results after 10 epoches phofcode traing using two gpus (non virtual) after 10 epoches if more than one gpu is visiable, no virtual device will be created.
(init_gpu()) use the following command to run script phofcode results after 10 epoches phofcode
here is my failing part: phofcode
get the faster rcnn + resnet50 pretrained model from ` phofurl and run with the above config.
i will come up later with the code.
python import tensorflow as tf def gen(): yield 0 def model_fn(features, labels, mode): shape = [1, 100, 10] x = tf.random_normal(shape) y = tf.zeros(shape) cell = shape[-1]) prediction, _ cell(x) loss y)) train_op return prediction, loss, train_op) config tf.estimator.runconfig() # training begins successfully with the following line commented out.
config estimator '/tmp/tf-bug', config=config) tf.int32)) ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
uncommenting the commented parts reproduce the problem.
this is just a sample.
with any model with the loggingtensorhook provided as the hooks parameter, it throws an exception when trained with tpus.
the plot of derivatives are provided in the image .
full code to reproduce is in the .ipynb file.
see your tutorial on audio recognition.
it doesn't work with phofurl repro attached phofhyperlink , just call `run.sh`.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i think it is reproducable with any python code that load and serve a neural network.
i unfortunately only have custom code for now.
if you don't manage to reproduce, i will give a sample code.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the code is massive and i cannot tell where the error is.
any way, it works well in gpu version of tf.
ps: when in cpu version, i 'm not even using tf.function decorator.
but it seems from the error that it is related to graphs.
save this script as and run on each node with fully qualified domain names `master` and `slave1`: phofcode or set different index of worker in tf_config in on different nodes.
python import tensorflow as tf import tensorflow.keras as keras import types import numpy as np json os sys hostname_idx = { "master": 0, "slave1": 1 } worker_index = = = json.dumps({ 'cluster ': { 'worker ': ["master:1531", "slave1:1531" ] }, 'task ': { 'type ': 'worker ', 'index ': worker_index} }) mirrored_strategy options_distribute tf.data.options() true def sliding_window(values, window_size=2, stride=1, start=0): i start r none if i+window_size <= len(values): yield values[i:i+window_size] while true: i i+stride if (i+window_size-1) < len(values): yield values[i:i+window_size] else: break num_timesteps 100 num_timesteps_to_predict 1000 num_signals 2 num_inputs batch_size 2
i create a simple generator by subclassing from tf.keras.utils.sequence: phofcode i then create a simple model phofcode i set up my training and validation generators and run fit_generator phofcode i get the following output: phofcode if change workers from 0 to 1, then `on_epoch_end` is triggered (i.e.
`'on epoch end: {}'` print statements) appear
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the scripts used for conversion: conversion_scripts.zip phofhyperlink for inference i have used tflite 1.10 and tflite 2.0. i have used the profiling functionality of tflite and observed that: - in tf 1.10 there are 49 dequantize nodes vs 15 dequantize nodes for tf - conv_2d is ~3x slower for the converted model in tf (when running a float model conv_2d seems similar in both tf versions) - by looking at the run order of the nodes it seems that only depthwise nodes are quantized in but 1.10 expand, project and depthwise are quantized.
here is summary by node type for 1.10: phofcode and summary by node type phofcode
colab notebook available here phofhyperlink .
running with gpu makes eager mode significantly faster and the time difference more noticeable.
calling keras layers on some input results in different variable names compared to calling layer.build: phofcode in the first case, variable names are: phofcode while in the second case, they are: phofcode i expect the variables in the first layer to be prefixed with `dense_1/`.
python import tensorflow as tf from tensorflow import keras import numpy as np x = 1) y = x
build a small lstm with keras for sequence prediction.
loss: 'mae' metrics: ['mse','acc'] optimizer: kr.optimizers.adam
import tensorflow as tf from tensorflow import keras class def __init__(self, n_layers, n_neurons,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
you can try any model under deeplab model zoo for example phofurl phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode specifically with the first approach i have phofcode however for the second, i have following; phofcode the first call to self.bottleneck worked but not second one suggesting that we need to instantiate a new custom bottleneck layer and cannot reuse self.bottleneck.
python import tensorflow as tf model = tf.keras.sequential( [ ] ) strategy = with strategy.scope(): out = model(tf.zeros((1, 10)), training=true) ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode the complete code can be found at: phofurl
python import tensorflow as tf from tensorflow.keras.layers import input, conv2d, depthwiseconv2d, timedistributed test_td_input = input(shape=(none, 1, 128, 8)) kernel_size=(1, 4), strides=(1, 1)))(test_td_input)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i just modify some codes in lingvo to use tf-debug.
attached is a test case that reproduces the problem.
it is required that the penn treebank dataset is downloaded/available (directions in source).
code was modified from: phofurl run option 1 to use keras with no errors and use option 2 to run with tf.keras and see all the errors.
<pre> # -*- coding: utf-8 -*- # @author : lin lan (ryan.linlan@gmail.com) from __future__ import absolute_import from __future__ import division from __future__ import print_function import tensorflow as tf class foo(tf.keras.model): def __init__(self): super(foo, self).__init__() self.dense = self.embeddings = 5)), dtype=tf.float32) @tf.function def call(self, inputs): embeddings = tf.nn.embedding_lookup( self.embeddings, inputs) return self._inner(embeddings) # @tf.function def _inner(self, embeddings): batch = tf.shape(embeddings)[0] ta size=batch) for i in tf.range(batch): this :]) ta ta.write(i, this) return ta.stack() foo foo() res foo([0, 2, 4, 6, 8]) </pre>
the following code produces the correct behavior in tensorflow 1.13.1: phofcode output phofcode but in tensorflow 2.0 it doesn't phofcode output phofcode a quick fix is to call `reset_dropout_mask()` and between calls however this looks like a breaking change.
phofcode note that this code fails in any case, however, only with the tf.keras import this is because of invalid parameters
provide a reproducible test case that is the bare minimum necessary to generate the problem.
from python3 train.py --logtostderr --train_dir=training/
phofcode if you remove any of the tf ops above, error doesn 't reproduce
running phofurl with the following options: phofcode or (the error message is all the same) phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode after this a variables folder with files saved_model.pb and assests folder created in newdir.
i am trying to use saved_model.pb and files to get single .pb frozen_graph
unfortunately i cannot give a concrete code example to reproduce this issue since memory leaks appear anytime in between 10min to 12h of training.
though i am happy to provide more information and would be eager to get suggestions on how properly debug this problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode this fails with the following error: phofcode not exactly sure if this is a bug or a feature.
should the built-in data structures that are tracked be serializable
i''ve changed the official cnn estimator ( phofurl phofhyperlink ) to work with _one_hot_ encoding on labels (only changing the _loss_ function) phofcode i've aslo create dummy labels to test it: train_labels = eval_labels =
we have tried appending some nodes on top of deeplab gpu converted model.
all appended nodes are still supported ops by gpu delegate.
we have attached with this issue, the graph and the error log while trying to benchmark the tflite model.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode output log tensorflow 2.0.0-alpha0 model: "res_net34" layer (type) output shape param # conv2d (conv2d) multiple 9472 batch_normalization_v2 (batc multiple 256 re_lu (relu) multiple 0 max_pooling2d (maxpooling2d) multiple 0 sequential (sequential) global_average_pooling2d (gl 0 dense (dense) total params: trainable params: non-trainable params: 17,024 ``
from tensorflow.train import adamoptimizer from import lossscaleoptimizer, ... optimizer = adamoptimizer() loss_scale_manager =
this is an issue difficult to reproduce.
phofcode can run here: seed in dataset#map.ipynb phofhyperlink
[+] conda create -n kerasenv python=3.5.0 [+] conda activate kerasenv [+] pip install tensorflow [+] git clone phofurl cd keras sudo python setup.py install
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
while this issue is very visible on large graphs, i tried to compile a small example to consistently show the effect: phofcode
scalar example: phofcode vector example phofcode executes sucessfully, but the arithmeticoptimizer fails with a warning: -2 w failed to run optimizer arithmeticoptimizer, stage node strided_slice.
error: pack node (stack) axis attribute is out of bounds: -2 w failed to run optimizer arithmeticoptimizer, stage node strided_slice.
error: pack node (stack) axis attribute is out of bounds: -2 -1 0 1 w failed to run optimizer arithmeticoptimizer, stage strided_slice_3.
error: pack (stack_3) axis attribute is out of bounds: 1 w failed to run optimizer arithmeticoptimizer, stage strided_slice_3.
error: pack (stack_3) axis attribute is out of bounds: 1 ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
a part of my code, since the whole source code is huge... and the `dataset_train` in the following code is a `tf.data.dataset` object.
here 's a minimal example: phofcode
the following code raises an assertion error: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please see this gist: phofurl
here is the snapshot of the models which produced the aforementioned errors.
1. model 1:- 2 phofimage 2. model 2:- 3 phofimage models: models.zip phofhyperlink both run in cpu mode; but fails in gpu !!
the model is quite complex.
but the issue seem to come from one of the custom layer which has a kernel defined like so: phofcode and a call function defined as so: python def call(self, x,
this code is taken straight from the tutorial phofhyperlink phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please refer to this gist phofhyperlink .
phofcode with this setup, i observe phofcode phofcode but on the other hand, if i pass the input as a dictionary i observe phofcode strangely, if i then run the first `.fit` command again, it also performs a full pass over the data, rather than doing specified number of steps as originally.
in tensorflow 1, with same code as above, but a tensorflow 1 friendly model compilation step do not see same issue, number of steps is as specified, whether data is passed in a dictionary or not.
this test case is modified from #23702 to include multiple model inputs.
the issue described there seems to be related, but not identical to this one.
in particular, the fixes introduced in that were mentioned, do not resolve the issue for this test case.
i just modify the downloaded tensorflow lite android image classification example phofhyperlink , and add one more class extended from class classifier to load my own trained model which is based on mobilenetv2.
the model loads and runs fine if with cpu, i.e.
i do not attempt to apply the gpu delegate before the attempting to load it.
the only difference in the code is following lines: `tfliteoptions = new interpreter.options();` `gpudelegate = new gpudelegate();`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
it is enough to execute the code snippets included in the issue.
in order to generate the memory occupancy, the `memory_profiler` package can be used.
assuming code snippet is pasted in a file called `test.py`, run: phofcode
just run label_image tf example and with this: `valgrind --tool=massif --pages-as-heap=yes -m mobilenet_v2 _1.0_224.tflite -i grace_hopper.bmp; grep mem_heap_b massif.out | sed -e | sort -g | tail -n 1`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the following steps will show the issue with the converted graph: phofcode
phofcode out: phofcode this has the same issue whether the code is run on gpu or cpu.
this issue does not appear on tf 1.12.
a mere inspection of the model.cc source code (in directory tensorflow/lite) will show that the function assigns a flatbuffers buffer pointer directly to the tf lite tensor's object data field.
this will cause any multi-byte element of a tensor to be incorrectly interpreted since flatbuffers use strictly little-endian for all numeric values.
`import tensorflow as tf` `import numpy as np` `import os` `import sys` `input_layer = batch_size=1)` `layer1 = `layer2 = `layer3 = `model `alpha `# model.fit() is skipped just to get straight to error.` just execute this code as it is, it will throw same error!
provide a reproducible test case that is the bare minimum necessary to generate the problem.
in an untouched tensorflow repo with r1.12 checkout and bazel 0.18.1 installed, run `bazel build
unit tests in fail when these dtypes are added
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode output: > 10/10 - 0s 6ms/sample - loss: omitting `validation_data` stops the output from appearing link to an example notebook: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode the snippet is taken from here: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
here is the saved_model: ver1.zip phofhyperlink
phofcode python # eager mode import tensorflow as tf x = tf.random.normal([5], seed=1) for i in range(3): print(x.numpy()) # output # ] # ] ] ``
you can reproduce the problem using the following code: phofcode
unfortunately i cannot provide my .tflite file, but it obviously contains a 'mean' operation.
is there a script anywhere in the tflite repo that prints out all the operations contained in a .tflite file?
i looked briefly but was unable to find one.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofurl ( !pip install tensorflow==2.0.0-alpha0 ) import tensorflow as tf import numpy as np from tensorflow import keras tf.version model = input_shape=[1])]) xs = np.array([-1.0, 0.0, 1.0, 2.0, 3.0, 4.0], dtype=float) ys = np.array([-3.0, -1.0, 1.0, 3.0, 5.0, 7.0], dtype=float) model.fit(xs, ys, epochs=500)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i convert my model like this: freeze_graph --input_graph=eval.pb tflite_convert --inference_type=float --output_arrays=oup
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import numpy as np import tensorflow as tf def input_fn(): x = np.random.random((1024, 10)) y = np.random.randint(2, size=(1024, 1)) x = tf.cast(x, tf.float32) dataset = y)) dataset dataset.shuffle(100) dataset dataset.batch(32) dataset dataset.repeat(10) def _extract_features(_x, _y): features { 'x': _x, 'z': tf.zeros_like(_x) } return features, _y return class def __init__(self): super(mymodel, self).__init__() self.features shape=(10,)) ]) self.dense1 activation='relu') self.dense2 tf.keras.layers.dense(1, activation='sigmoid') def call(self, inputs, training=none, mask=none): outputs self.features(inputs) outputs self.dense1(outputs) outputs self.dense2(outputs) return outputs model mymodel() # works model.run_eagerly true model.fit(input_fn()) # works model.run_eagerly false model.fit(input_fn()) # works model.run_eagerly true # fails model.run_eagerly false ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
cells = x = none, 5)) layer = stateful=true) y = layer(x) ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
attached with this, is the models and error logs of the models.
the model is a modified version of the deeplab gpu delegate model provided by google.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
an mscoco-trained floating-point (32bit) model that i am attempting to calibrate-and-quantize is available at phofurl phofhyperlink is an example script that runs tf lite 's tool.
it can be executed as such: phofcode
phofcode tested with `pip3 install tensorflow==1.13.1`, python 3.5.2 `b.txt` should have `aaa` as the content, not `aaa bb`.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
string graph_name = argv[1];// name.pb tsession *session; tstatus status = &session); tif (!status.ok()) t{ t tcout << "create session wrong: "<< status.tostring() << endl; t treturn -1; t} tgraphdef graph_def; t//read model: tif graph_name, &graph_def).ok()) t{ t tcout << "read model(pb) failed!"
<< endl; t treturn -1; t} tf_status* status_1 = tf_newstatus(); status_1); tif (tf_getcode(status_1) != tf_ok) { t tcout "load lib wrong" endl; t} tstatus = tif (!status.ok()) t{ t tcout "create graph wrong: " status.tostring() endl; t treturn -1; t}
sample code: main.cc phofcode compilation script: phofcode $$$ valgrind ./bin/main.out phofcode $$$ valgrind --leak-check=full ./bin/main.out phofcode
run this in google colab : phofurl for the code to execute without error (until the save), you 'll need to replace phofcode with phofcode
i cannot reveal the code for proprietary reasons but i could furnish a similar version if need be.
any help in this regard would be much appreciated.
i realized that removing the `to_categorical` transformation resolves the shape errors but the model does not learn properly anymore.
image_placeholder = shape=[1, none, none, 1]) src_pts = tf.constant([10, 10]) dest_pts = tf.constant([100, 100]) = src_pts, dest_pts, interpolation_order 2, regularization_weight 0, num_boundary_points 1 )
provide a reproducible test case that is the bare minimum necessary to generate the problem.
correct behavior with a dilation_rate=1: phofcode shape inference fails with a dilation_rate=2 (or >1): the second dimension of the output shape 's is lost, phofcode please note that the behavior in was correct independently of the dilation_rate.
phofcode when using a lower level implementation it works correctly: phofcode
`import tensorflow as tf import pdb import cv2 import base64 with tf.session() as sess: img_path = with open(img_path, 'r') as the_file: image_string_base64 = the_file.read() image_string = image = image 108, 56) print(image) img_array sess.run(image) print(img_array.shape) cv2.imwrite('test.png', cv2.cvtcolor(img_array, cv2.color_bgr2rgb))`
import tensorflow as tf if not tf.executing_eagerly():
take any saved_model that contains a function returning a dict.
then run this: phofcode use saved_model_cli to inspect the saved_model
the following code is adapted from the guide writing layers and models with tensorflow keras phofhyperlink .
i simply customized the formatting and added a metric to track the mean squared error in addition to the total loss.
on a side note, code in guide phofhyperlink seems to forget to use `reset_states` on metric at beginning of each epoch.
import tensorflow as tf from tensorflow.keras import layers from time import time class sampling(layers.layer): # uses (z_mean, z_log_var) sample z, vector encoding a digit.
def call(self, inputs, training=none): z_mean, z_log_var = inputs batch = tf.shape(z_mean)[0] dim = tf.shape(z_mean)[1] epsilon = dim)) return z_mean + tf.exp(0.5 * z_log_var) * epsilon # z_mean + tf.sqrt(z_var) * epsilon class encoder(layers.layer): # maps mnist digits a triplet (z_mean, z_log_var, z).
def __init__(self, latent_dim=32, intermediate_dim=64, name='encoder',
simply run python interepreter with attached `.tfite` file.
given two files, save_rng.py and restore_rng.py as below: save_rng.py phofcode restore_rng.py phofcode save_rng.py is executed first, and then restore_rng.py.
1. if the state of the random number generator is saved and restored, then out[1] in save_rng.py should have the same value as out in restore_rng.py.
but they don't contain the same values.
2. is definitely changing state of random number generator because out[0] in is not even equal to out in restore_rng.py, which should be equal otherwise because i'm setting global level seed to 0.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
basically we are executing this code on each worker: phofcode full code example is here: phofurl
steps to reproduce: - `git clone phofurl - `git checkout tensorflow_2.0` - (if needed) `pip3 install -r requirements.txt` - `export flask_app=flaskapp.py` start the app with `flask run` using postman or curl send any image of a dog or cat to the app screenshot at 16 10 57 phofimage or phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode train_data would be a tf.dataset produced using padded_batch that produces (word_ids, ner_tags) as inputs, labels.
here i created a toy example: phofcode which will create 2 batches of size 1, first batch has length 3, second batch has length 4. when embedding layer trainable set to false, model.fit runs successfully.
when trainable set to true, it gets following error: invalidargumenterror: operation expected a list with 3 elements but got list with 4 elements
import tensorflow as tf def transform_tag_python(x): return 1.0 dataset = dataset = dataset.map(lambda x: tf.py_function( transform_tag_python, (x,), (tf.float32,))) for sample in dataset: print(sample) ``
you can see that this code works correctly.
phofcode but this code will be failed.
phofcode changing tf.io.decode_image() to tf.io.decode_png() or tf.io.decode_jpeg() can be temporary solution
import tensorflow as tf def load_image(x): image = tf.io.read_file(x) image = tf.io.decode_png(image) image = tf.image.resize(image, size=( 128, 128), return image with tf.device('/cpu:0'): image_2 = load_image('test.jpg') ``
run this script phofhyperlink passing as an argument this file phofhyperlink to create an h5 keras model.
then `load_model` the resulting h5 file and call
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode for me, the output is: python version 3.6.8 tensorflow version 1.13.1 numpy version 1.16.2 i your cpu supports instructions that this tensorflow binary was not compiled to use: avx2
use attached `.tflite` file to reproduce the issue.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode output when is set to 20 (so `iterations` starts at `0`): phofcode output when is set to 1 (so `iterations` starts at `1`): phofcode
phofcode provide a reproducible test case that is the bare minimum necessary to generate the problem.
import os = '0' import numpy as np import scipy as sp import scipy.fftpack tensorflow as tf matplotlib.pyplot as plt # generate data slc = slc = (slc + 1j*slc)[0:256, 0:256] tilesize = slc.shape[0] freqimg np.fft.fft2(slc) # now do this in keras/tf input1 tilesize, 1), dtype='complex128') out model out) freqimg_tf plt.figure(); plt.title('sp') plt.figure(); plt.title('keras'); plt.show() # plots print('done') ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
all code required to reproduce this but can be found on google colab: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode the above code does not fail and produces empty output mask.
if the `lambda` layer is replaced by `globalmaxpool1d` (which does not support masking), the model fails during construction.
almost same as example below: phofurl we 'd happy to attach our tflite model but github says it 's too large the beginning of our model is like this: <img width="1136" alt="` 16 43 52" src=" phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the issue is traced to this phofhyperlink line, where the function is used to generate a cache key.
this function just generates a unique identifier for a tuple by taking the object ids of all the components, converting them to strings and concatenating.
firstly, this will not generate cache hits if the function is called twice with same parameter values, because object ids will not be same even though their values are.
far more seriously though, it is possible for function to sporadically generate false hits, since object ids are only guaranteed be unique for objects existing at same time.
the bug hidden when all dimensions are 256 or lower, because of special way phofhyperlink that python treats integer objects between -5 and 256. the code below causes this happen reliably on my machine.
if maintainers agree with my diagnosis, i'll happily provide a pull request fix it.
personally i think cache should just be removed as it won't save significant amount of computation in any sane code and has unbounded memory requirements in broken code, but if there are good reasons retain it we can just key on values of tuple components, rather than their object ids.
import tensorflow as tf input = = [none,none,3]) output = model = # the model consists single 1x1 convolution.
therefore spatial extent output always trivially equal # spatial extent input.
# we must start from 257 because, when creating ints between -5 and 256 python returns references singletons.
# therefore there one-to-one mapping between int value object-id in this range cache works as intended.
outside range, no such guarantee possible fails.
for x in assert (shape[1]==x) ``
on intel: phofcode on s390x: phofcode
for tf 2.0 or 1.x phofcode for tf 1.x or cntk with keras phofcode with 8gb vram gpu, tf 1.x and cntk works successfully, and tf 2.0 code are failed due to resource exhausted exception
the code that is running can be found here: phofurl the commands that run this code are listed above
provide a reproducible test case that is the bare minimum necessary to generate the problem.
from tensorflow.keras.models import sequential from import modelcheckpoint, reducelronplateau, earlystopping model= sequential() ... earlystopping = monitor= 'val_loss ', verbose=1, checkpoint = {epoch:02d} {val_loss:.3f} {val_acc:.3f} {loss:.3f} {acc:.3f}.h5 ', monitor= 'val_loss ', verbose=1, save_best_only=true) reduce_lr_loss = monitor= 'val_loss ', verbose=1) callbacks = [earlystopping, checkpoint, reduce_lr_loss] tmodel.fit(x_train, y_train, batch_size=32, epochs=1000, validation_data=(x_test, y_test), callbacks=callbacks, verbose=1)
base_model = include_top=false) x = base_model.output y = z = activation='relu')(y) predictions tf.keras.layers.dense(4, activation='softmax')(z) model outputs=predictions) for layer in base_model.layers: layer.trainable false model.fit(traindata, shuffle=true) model.save(mypath) outvalues model.predict(testdata) model #error here
tflite_convert --output_file=test.lite --inference_type=float --mean_values=128 --std_dev_values=128
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import numpy as np x = = 0.0, name = "x", dtype = tf.float32) y 0.0, name "y", dtype tf.float32) zero tf.constant(value 0.0, dtype np.float32, name "zero") op1 tf.assign(x, zero) with op2 tf.assign(y, x) with tf.assign_add(y, 1, name "assign_add") sess tf.session() sess.run("assign_add") print("y", sess.run("y:0"))
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please refer to my project at phofurl after train with train_mnist.py, executing start_serving.sh will reproduce the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is not a runnable code, but introducing the modification below to some estimator examples might work as a reproducer.
phofcode may be same other asser functions: raise exception with assert_greater phofcode
phofcode if you changed from activation() to relu, it failed to serialize
provide a reproducible test case that is the bare minimum necessary to generate the problem.
instructions are here: phofurl i used the gpu version.
i just ran the colab transformer notebook: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf import numpy as np from tensorflow import keras # try-except eager trigger to prevent trouble from ipynb try: except: pass def model = keras.sequential([ input_shape=(10, 10)), keras.layers.dense(64, activation=tf.nn.relu), keras.layers.dense(1, activation=tf.nn.tanh) ]) optimizer = optimizer=optimizer, return model some_model = def build_model(): def custom_loss(y_true, y_pred): # simply tile y_pred as an example y_cred = axis=2), (1, 1, 10)) print(y_cred.shape) return
: 1. generate a .tflite file after model training on desktop 2. download .aar file from phofurl 3. build android binary using downloaded .aar file and .tflite file along with android application trying to load .tflite 4. run time error while app is trying to load the .tflite provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode traceback warning:tensorflow:from test.py:33: dynamic_rnn (from is deprecated and will be removed in a future version.
instructions for updating: please use which is equivalent to this api warning:tensorflow:from colocate_with (from is deprecated and will be removed in a future version.
instructions for updating: colocations handled automatically by placer.
warning:tensorflow:from test.py:24: dense (from deprecated and will be removed in a future version.
instructions for updating: use keras.layers.dense instead.
traceback (most recent call last): file "test.py", line 33, in <module> outputs, state = inputs, dtype=tf.float32) file line 324, new_func return func(*args,
i install tensorflow as i tell and i try : import tensorflow
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i can if deemed necessary.
run the following code multiple times and have a look at the tensorboard results by running `tensorboard --logdir=test_outputs`.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
first run the docker image then run the code in python: docker run -it --runtime=nvidia --rm -e -v python 1. import tensorflow as tf print(tf.matmul([[1., 2.
nvidia-smi 2. import tensorflow as tf image_model = weights= 'imagenet ') new_input = image_model.input hidden_layer = = hidden_layer) x tf.zeros([1, 299, 299, 3]) # just use a zero tensor instead of dataset tensor # this will raise error: "internalerror: blas sgemm launch failed : m=5329, n=80, k=64 [op:conv2d]"
provide a reproducible test case that is the bare minimum necessary to generate the problem.
assert tf.executing_eagerly can trigger an assertion failure.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofurl python mnasnet_main.py --model_name=mnasnet-a1 --use_bfloat16=true --use_keras=false --mode=train --train_batch_size=96 --num_gpus=1 --steps_per_eval=33363 (temporary version.the code does not really use bfloat16, use float16 instead.)
i have my .pb file attached below: my_frozen_graph.zip phofhyperlink my toco code below to regenerate the error: `graph_def_file = "my_frozen_graph.pb" # this is the .pb file.
input_arrays = ["reshape_1"] # this is the name of the input node output_arrays = ["labels_softmax"] # this is name of ouput node converter = input_arrays, output_arrays) converter.inference_type input_arrays {input_arrays[0] : (227., 0.92)} # mean, std_dev tflite_model converter.convert() the resulting .tflite file.`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
work in progress notebook can be found here: phofurl i am using a very basic keras model with phofcode
you could reproduce the error on the following tf-hub colab page: phofurl adding a cell with the `modelcheckpoint` code phofcode and then adding the callback to `fit_generator` function of model: phofcode
phofcode provide a reproducible test case that is the bare minimum necessary to generate the problem.
i've created a github gist file that can be run on randomly generated data and prints reports about the ops: phofurl usage: python train_tensorflow.py --random_data=true alternatively the preprocessed data can be downloaded from: phofurl you can also easily use it in combination with tensorboard, just ask the command argument parser for some --help.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofurl the problem can be reproduced without the two lines workaround.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
to reproduce, in this pull request: phofurl go to decoder.py and change the signature of class in line 132 the warning disappear for pylint2 in current pull request, as currently it imports layers from tensorflow.python.keras and then extends layers.layers
try the code yourself here: phofurl
all the code and llogs are here: phofurl
phofcode attached file is zipped logs directory to be viewed with tensorboard.
~~sorry, i do not have a simple snippet to reproduce this issue.
but could you find something in the traceback?~~ see below please.
phofcode run with the path to the attached file as a command line argument.
phofcode run with the path to the attached file as a command line argument.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
will update when i have written a minimal example.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
a minimal code is like: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode batch_size = 750 history = y_train,batch_size), y_test, batch_size), # validation_data=none, verbose=1, epochs=100, ) warning:tensorflow:using a generator with and multiple workers may duplicate your data.
please consider using the `keras.utils.sequence` class.
attributeerror traceback (most recent call last) in <module> 8 epochs=100, 9 ---> 10 11 ) in fit_generator(self, generator, steps_per_epoch, epochs, verbose, callbacks, validation_data, validation_steps, class_weight, max_queue_size, workers, use_multiprocessing, shuffle, initial_epoch) 1424 1425 shuffle=shuffle, -> 1426 1427 1428 def evaluate_generator(self, in model_iteration(model, data, steps_per_epoch, epochs, verbose, callbacks, validation_data, validation_steps, class_weight, max_queue_size, workers, use_multiprocessing, shuffle, initial_epoch, mode, batch_size,
phofcode outputs: phofcode (ideally it should always say `number of uncollected graphs: 0`)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
if the import torch line below is commented out, this code works.
if tensorflow is imported before torch, it will work as well.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf import numpy as np use_eager = true use_tfdataset = true if not use_eager: # build dataset n_data = 10
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode and it cost 200s for every 100 steps ,the same time as adamoptimizer
`tf.nn.relu` + `tf.keras.model` + `@tf.function` (this is the only case that produce `none` gradient) python import tensorflow as tf z = tf.keras.input(()) h = tf.nn.relu(z) m = tf.keras.model(z, h) @tf.function def f(x): # with @tf.function with tf.gradienttape() as t: t.watch(x) z = m(x
the following code fails because the internal `simplernncell` is not built before it is used.
if you uncomment the two lines that define the `build()` method, then everything works fine.
but this should not be required (just like it is not required for custom layers): python import numpy as np from tensorflow import keras class def __init__(self, units,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
just add some jni code to the official demo would got the same issue.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf a = b = minval=-1, maxval=1, dtype=tf.dtypes.int32)) value = print(a.numpy) print(b.numpy) @tf.function def run(): for j in tf.range(10): var = tf.gather(a, j) tf.print(var) var_int tf.gather(b, j) tf.print(var_int) run()
here 's the code to reproduce the error: phofcode
for a reproducible test, i also tried this, to see if the memory leakage is due to something else: phofcode i can still see a huge memory usage when executing this.
python import time import numpy as np import tensorflow as tf tf.enable_v2_behavior() d = 2 n = 22 # note: tf starts getting a lot slower than numpy at n=9, it seems.
# try d=5, n=9 vs d=7, n=8.
# create a n-dimensional ndarray psi = np.random.randn(*[d for n in psi_np = psi.copy() for _ in range(5): # numpy's transpose is a metadata operation.
copy() actually carries out the reordering of the data in memory.
t0 time.time() psi_np np.transpose(psi_np, (*list(range(2,n)), 0, 1)).copy() print(time.time() - t0) around 0.07s on my system psi_tf @tf.contrib.eager.defun make this a graph, just in case def f(p): return tf.transpose(p, (*list(range(2,n)), 0, 1)) for _ range(5): t0 time.time() psi_tf f(psi_tf) print(time.time() - t0) around 0.5s on my system (almost 10 times slower!)
check results are the same - psi_np.ravel())) should print 0.0 note that the speed depends on shape!
we now do an equivalent tranpose, but sandwiched by reshapes to reduce number of dims.
psi_tf @tf.contrib.eager.defun def f2(p): rephrase high-dimensional transpose as matrix transpose.
#include #include #include <iostream> int main(int argc, char
tensorflow preprocessing function to convert sparse to dense tensor.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i find this when doing a coursera online course.
the notebook i used can be found at link phofhyperlink
`git clone --recurse-submodules phofurl 2. phofcode 3. phofcode 4. phofcode
define basic stuffs phofcode this works as expected phofcode this also works phofcode but this is not working phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
it reproduces at an epoch numeber bigger than 150( sometimes is around 200, sometimes 500)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import numpy as np import tensorflow as tf information = { "a": 1, "b": 2 }
phofcode the output is: phofcode
from abc import abstractmethod import tensorflow as tf import logging class function(object): def __init__(self, name=none): self._name = name def call(self, params, inputs,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import h5py import threading import numpy as np import tensorflow as tf # make some random img data for i in range(100): with 'w ') as f: shape=(1000, 100, 100), dtype= 'float32 ', data=np.random.rand(10
see repository phofurl (the tflite part is in when running the app, it prints the ratio of zero values in each output to the android log.
this value is != 1.0 for all outputs without gpu delegate, but == 1.0 with gpu delegate.
compile the without bitcode support: bazel build -c opt then for comparison compile it with bitcode support: bazel build -c fastbuild --apple_bitcode=embedded --copt=-fembed-bitcode use these with the experimental tensorflowliteswift cocoapod (not yet publicly available, see #25800 for reference) to perform a model inference on a real device or a simulator.
regardless of debug/release build, if you use the framework with bitcode support in it then performance suffers greatly.
python code: phofcode tf_config environment variable: phofcode
tflite phofcode label_image needs input image and labels file.
i use input_image: grace_hoper.bmp phofhyperlink labels.txt: from phofhyperlink
n/a, this is a failure of libtensorflow to return an error for system configuration issue.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is the example given in the docs with error message returned when ran: phofcode python attributeerror traceback (most recent call last) in <module> 1 m = ----> 2 m.update_state([0, 0, 1, 1], [0, 1, 0, 1]) 3 # cm = [[1, 1], 4 # [1, 1]] 5 # sum_row = [2, 2], sum_col = [2, 2], true_positives [1, 1] in decorated(metric_obj, *args,
my custom layer: class def __init__(self, out_size): super().__init__() self.rnn_layer = return_sequences=true, return_state=true, def call(self, x,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python3 import tensorflow as tf import numpy as np fast_optimizer = learning_rate=1e-3) slow_optimizer = learning_rate=1e-3 * 1e-9) @tf.function def grads, vars): grads = [grads] vars)) def apply_grads(use_fast, grads_per_model, vars): for i in range(2): if use_fast[i]: grads_per_model[i], vars[i]) else: grads_per_model[i], vars[i]) def compute_loss(w, x, y): r = (w * x - y)
#simple window batch test import tensorflow as tf data = data = data.map(lambda *x: (x[0],x[0]+1)) #each entry is now a tuple of (n,n+1) #without the mapping to tuple, window+flat_map works.
data = data.window(3) #each entry is now a window dataset #map fails, because the dataset is nested #data.map(lambda x: print(x)) #flat_map fails because x is a tuple, not a dataset data = data.flat_map(lambda x: x.batch(3))
`with tf.graph().as_default() as tf_graph: with as tf_sess: frozen_graph = outputs=output_names, is_dynamic_op=true, so the segmentation fault occurs in trt
phofcode phofcode ### tried solution 1. i 've specified the multiprocessing start method.
force=true)` ### tried solution 2. passing graph object in worker phofcode in worker: phofcode ### tried solution 3.
(currently only one which works) use theano :(
this came from a tf2.0 port of the pytorch dynamic graph example here phofhyperlink .
phofcode (this particular example can be fixed by manually defining a `@property` variables which combines the variables members from each of the dense layers into one list, but i think this partially defeats the point of using `tf.module`).
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
my code: phofurl master branch is the naive implementation of dilated conv1d model samples are also in the repo.
decorate `def call` with `@tf.function` in the second cell of the notebook: phofcode
class simple(layer): def __init__(self, output_dim,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this is my cli command that works: phofcode and this is my attempted python file.
phofcode if i don 't include the arg at the end, then i get this error: `typeerror: freeze_graph() missing 1 required positional argument: if i do include it, then i get past that weird error and encounter this one instead: no such file or directory`.
not sure what to make of either of these errors.
why is it using `output_node_names` to find a file?
also, why it truncating string?
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this does not work: phofcode snippet of the error: phofcode this works: phofcode
bugreport.zip phofhyperlink model: lite_model_v2.zip java: liteevaluator.java dependency: equal behavior exists for both implementation and implementation
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode i think this is a bug.
if you consider this improper use instead, please let me know.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this should be able to reproduce my issue: phofcode
python import tensorflow as tf from tensorflow.keras.layers import input print(tf.__version__) input_ = input((128, 128, 1), dtype='float32') print(input_) output = tf.stack(input_, axis=1) ``
phofcode to run this code in current nightly, remove `callback1` and focus on output of first epoch.
notice `at step = 6` in first epoch: phofcode
phofcode i think this is essentially the same as #8905, except that here i am using single precision.
the ability of the svd to handle ill-conditioned matrices is important for our application.
import tensorflow as tf phofcode
python import numpy as np import tensorflow as tf layers = tf.keras.layers keras = tf.keras # from documentation until the next comment class linear(layers.layer): def __init__(self, units=32,
this code calculates a matrix exponential using a taylor series.
i will provide a small snippet of code to reproduce the error, if it is not well known
this is the code for exporting savedmodel: phofcode the conversion command: phofcode
import tensorflow as tf import tensorflow.keras.backend as k from tensorflow.keras import model from tensorflow.keras.layers import input, lambda inputs = input(shape=(1,)) y = k.variable([0.0], dtype=tf.float32, name= 'x ') add_y = lambda(lambda x: tf.math.add(x,y)) outputs = add_y(inputs) model model(inputs=inputs, outputs=outputs) model.summary() model.summary() shows no trainable variables
provide a reproducible test case that is the bare minimum necessary to generate the problem.
you 'd need the whole neural network code plus the datasets and the rest...
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`docker run -it --rm tensorflow/tensorflow pip list 2>&1 | grep tensorflow` `docker run -it --rm pip list 2>&1 | grep tensorflow` (the issue persists in docker versions as well)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python with tf.graph().as_default() as graph: precision = tf.metrics.precision() 0, 1], [1, 0, 1]) is graph) # true f1 = f1() f1.update_state([0, 0, 1], [1, 0, 1]) is graph) # false ``
please find all the code i used in the notebooks that i have put in this dedicated repository phofhyperlink .
import logging import tensorflow as tf formatter = %(asctime)s >> %(message)s ') stream_logger = # set handler streamhandler = logging.streamhandler() world") stream_logger.info("this is message 1") ``
a code that loops using tensorflow primitives (like `for i in tf.range(10)`) can be converted into its graph representation without any problem, while a code that creates a python iterator from a dataset object (using `iter(dataset)`) can't.
moreover, maybe because we are in the early stage of the development, i'm unable to convert a loop that loops over dataset to its graph representation.
phofcode the `itertest()` call fails because `runtimeerror: dataset.__iter__() is only supported when eager execution is enabled.` while the `loopiter()` call fails because function is not defined.
phofcode since i can iterate on the dataset using a for loop phofcode i do expect i can treat the dataset as an iterator, thus extracting the next element by calling `next(dataset)`.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
see this is broken c syntax when tfl_capi_export is `__declspec(dllimport)` this is small step to way to reproduce on windows.
tflite archive for mobilenet v1 has been downloaded from link from article, mentioned above phofhyperlink code: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
there was too much code so i used pastebin.
python import tensorflow as tf class def __init__(self): super(debugmodel, self).__init__() self.dense = activation= 'relu ', input_shape=(5,)) def __call__(self, input, *args,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
# pb file in the below link phofurl graph_def_file = input_arrays = ["input_to_model"] output_arrays = ["concat_1"] converter = graph_def_file, input_arrays, output_arrays) tflite_model converter.convert()
provide a reproducible test case that is the bare minimum necessary to generate the problem.
* install cuda 10, cudnn 7.4.2 * install tensorflow-gpu 1.13.1 (or and keras-retinanet 0.5.0 into a virtualenv from pypi * download pre-trained coco model from here phofhyperlink * load the model using `model = (will generate first blob of output above) predict bounding boxes on an image via axis=0))` (will generate second blob of output above)
phofcode all images in test_image_paths are
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the code below is from the colab tutorials for tf2.0 in boosted tree models.
from __future__ import absolute_import, division, print_function import numpy as np import pandas as pd from ipython.display import clear_output !pip install tensorflow==2.0.0-alpha0 tensorflow as tf tf.random.set_seed(123)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode phofcode phofcode phofcode the ragged tensor documentation hints that this might be intended or necessary, is it?
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this issue first appeared when i switched to tf commit toco worked fine when i was on tf commit
file `foo.py`: phofcode command that produces the error: `tf_upgrade_v2 --infile foo.py --outfile foo_tf20.py`
benchmark commands:- phofcode benchmark results:- _official model:-_ phofcode _replicated model:-_ phofcode
see the attached gist phofhyperlink
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the first code block on: phofurl gives an error when it tries to execute: phofcode `syntaxerror: invalid syntax`
too much code to extract to make a barebones example, but i could do it if absolutely necessary.
tutorial code for rnnlm using ptb_data_set can be found here phofhyperlink modified tutorial code with timline logging added for training loop can be found here phofhyperlink execute the following commands to get the list of operations which have kernel queue times in timeline and execution times are not logged.
a file named `new_unexecute_ops.txt` will be created and each line contains name of one of these operations.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf @tf.function def f(x): print(" tracing with shape", x.shape) return x
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`def lstm_model(embed, lstm_sizes, keep_prob_, batch_size): lstms = for size in lstm_sizes] drops = for lstm in lstms] cell = initial_state = tf.float64) lstm_outputs, final_state tf.nn.dynamic_rnn(cell, embed, return lstm_outputs, final_state`
phofcode if i define `i` outside of the function, then autograph uses that: phofcode the correct behavior should be the same as without decorating with @tf.function: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import numpy as np import tensorflow as tf from tensorflow import keras x_train = np.random.randn(1000, 8) y_train = np.random.rand(1000, 1) class def __init__(self, output_dim,
phofcode typeerror traceback (most recent call last) in <module> ----> 1 m.fit(tf.constant(0), tf.constant(1)) in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing,
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode now when i do prediction using: phofcode i get following error: > invalidargumenterror: in[0] is not a matrix.
instead it has shape [2] > [[{{node matmul_3}}]] when i use directly feed the tensor: phofcode i get the expected behavior: > ]], shape=(1, 3), dtype=float32) @aamini also had same behavior.
is this expected in tensorflow 2.0 or a bug?.
if it is expected, please update documentation
python import tensorflow as tf from tensorflow import keras import numpy as np training_set_size = 32 * 10 # <= works only if self.add_metric() is added and this is a multiple of 32 x = 8) y = 1) class def __init__(self, output_dim,
phofcode the above code produces on my machine: phofcode
import numpy as np import tensorflow as tf keras = tf.keras kl = keras.layers k = keras.backend bgr_shape = (128, 128, 3) #batch_size 132 #max -tf.1.11.0-cuda 9 batch_size 86 #max -tf.1.13.1-cuda 10 class def __init__(self, size=(2, 2), data_format=none,
parser.add_argument( '--job-dir ', type=str, help= 'gcs location to write checkpoints and export models ' parser.add_argument( '--train_file ', type=str, help= 'gcs location of train data .tfrecord file location. '
parser.add_argument( '--vali_file ', type=str, help= 'gcs location validation data .tfrecord file location. '
parser.add_argument( '--n_cpu ', type=int, help= 'number of processes used for reading parsing data for model input. '
'--n_gpu ', type=int, help= 'number gpus used for training model. '
args parser.parse_args() arguments n_gpus args.n_gpu num_parallel_processes args.n_cpu train_file args.train_file vali_file args.vali_file parameters dropout 0.5 num_classes 3 -1, 0, 1 image_size 40 num_channel 1 learning_rate 0.0001 epochs 3 shuffle_buffer 50000 number samples from which it will sample batch_size 100 input_size (image_size, image_size, num_channel) checkpoint_steps 2000 rseed int( random.random() * (2
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode running this twice produces: first run: phofcode second run: phofcode so even though the same random seed is used in both runs, the order of elements differs between them.
and additionally, the order is the same between epochs, which you wouldn 't necessarily want in your training loop.
i get neumf model source code from official models repo, and original code only support local training with estimator, and i add below code to support distributed training: phofcode the `cross device ops` implement of `mirrorstrategy` is `multiworkerallreduce` which is defined in i change value of `all_reduce_alg` parameter of `__init__` of class `multiworkerallreduce` from `pscpu/pscpu` to `nccl/xring`.
phofurl download files and edit model location in run.py
provide a reproducible test case that is the bare minimum necessary to generate the problem.
note that the csv file 'immunotherapy - immunodataset.csv ' can be obtained from the uc irvine machine learning repository at this url: phofurl # sample code for `tensorforestestimator` with `pandas_input_fn` ## python standard library imports phofcode ## non tensorflow imports phofcode ## tensorflow library imports phofcode ## aliased tensorflow library imports phofcode metadata for csv columns ordering of csv columns generate lists of features and labels from metadata helper function for shuffling and exporting subsets this function is used to export training, evaluation, and test data sets as csvs, shuffling the rows.
split datasets for traning, evaluation, and testing set up `tensorforest` hyperparameters pluck feature columns from metadata dictionary instatntiate `tensorforestestimator` object define a wrapper training evaluation using `pandas_input_fn` train on data evaluate the model define a wrapper prediction make predictions on test data
the following model uses a custom initializer, and a custom regularizer, and a custom constraint, it works fine, saves fine, but cannot be loaded.
you can try using only one at a time, they all fail.
run cifar10_main.py on a macbook without an nvidia gpu, i imagine this would also happen on linux if no gpu was detected.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
wget phofurl unzip less less
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import numpy as np np_arr = np.array([[1.,2.,3.
myvar = tf.get_variable('myvar', initializer=np_arr) ragged = with tf.name_scope('gather'): ragged_gather = tf.gather(myvar, ragged) with product ragged_gather, name='prod') with tf.name_scope('output'): output tf.reduce_sum(product
colab link to produce an error.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
` protected void runinference() { log.d(tag, "inference starts "); object[] inputarray = {imgdata}; map<integer, object> outputmap = new hashmap<>(); outputmap.put(0, outp1); outputmap.put(1, outp2); outputmap); log.d(tag, "inference ends "); }`
1. run mobilenet model classification in golang env 2. input tensor shape tried other batch sizes as well 1 and 3 but no luck.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
input_tensor_pairs, {output_tensor_name}, {}, &output, nullptr);`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode the code causing this is located at: phofurl
this code is taken from the cnn tutorial phofhyperlink with the exception of a line added to try limiting the gpu memory usage.
the crash happens with or without this line.
for this particular example, a batch size of 50 was enough to consistently reproduce the error.
the crash happens earlier with larger batch sizes however.
phofcode the model i used phofurl
phofcode the code above leaks cpu memory quite rapidly ~3 mb/s.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
this example can reproduce this bug using a single conv2d layer.
note that for the sake of keeping the example simple, i simulate loading the weights and the values of min/max nodes (learned during training) by simply running phofcode gives following error: phofcode when i look at content of tf.global_variables(), i see nothing related to bias_quant: phofcode same thing when i look as graph in tensorboard: phofcode picture-of-tensorboard phofimage
attached is a python notebook that reproduces the issue.
i: ...; k.set_learning_phase(0); model.compile(...); model.fit(...)") k.set_learning_phase(0) optimizer="sgd") history model.fit(x, x, epochs=2) print("this test does not make much sense, why would you call fit with learning phase 0?
); sess = tf.session(); sess.run( tf.pow(z, 0) )`
my `script.py`, reproduce with `python3 script.py` phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
for img, path in tqdm(image_dataset): batch_features = batch_features = -1, for bf, p in zip(batch_features, path): path_of_feature = np.save(path_of_feature, bf.numpy())
phofcode output: > 0.0 > 1e-08 expected output: > 1e-08 > 1e-08
from keras.callbacks import modelcheckpoint, earlystopping from model import load_model import numpy as np import argparse args=parser.parse_args() frames=x_train.shape[2] #need to make number of frames divisible by 10 frames=frames-frames%10 y_train=x_train.copy() epochs=args.n_epochs batch_size=1 if __name__=="__main__": t model=load_model() t callback_save = save_best_only=true) t callback_early_stopping = patience=3) t print( 'model has been loaded ') t t t batch_size=batch_size, t t t epochs=epochs, t t t callbacks = t t t )
provide a reproducible test case that is the bare minimum necessary to generate the problem.
as described above, the normal code with a attentioncellwrapper, and the function that triggered error is as follows.
the complete code also covers other files in repo phofhyperlink .
changed few lines in phofhyperlink : ` try { d.tflite = new modelfilename), d.tfliteoptions); } catch (exception e) { throw new runtimeexception(e); } `
the full code can be found here: phofurl currently, the code in repository works fine because the new interpreter() and interpreter.run() are called in the same thread.
the deeplablite class has two important functions:
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import numpy as np import tensorflow as tf from tensorflow.keras.layers import batchnormalization x = * 255 x = tf.convert_to_tensor(x) bn = batchnormalization() x = bn(x)
on a 10 core machine $ bazel test --config=opt --cache_test_results=no -- $ cat
provide a reproducible test case that is the bare minimum necessary to generate the problem.
please use this code for your testing: phofurl it contains code that you can use for testing - the conversion works for tf 1.11.0 and tf.12.0 but not for tf 2.0
here is an example created to reproduce this behavior (with the workaround) - phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import numpy as np import matplotlib.pyplot as plt import tensorflow as tf fan_in = 100 fan_out = 100 w = tf.get_variable("w", shape=(fan_in, fan_out), sigma = np.sqrt(2 / (fan_in + fan_out)) with tf.session() as sess: w_now sess.run(w) bins=100) plt.show() print(2*sigma)
1. generate libtensorflow.so and artifact for raspberry pi.
2. load tensorflow model into golang env.
3. while model is running and after 15-20 min this happens.
to evaluate the compiled and the non-compiled graph prediction of a single image duration, add these two lines to the end of notebook: `%timeit -n 20 predict(x)` `%timeit -n 20 model.predict(x)`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode exception is: > typeerror: input 'y' of 'sub' op has type float32 that does not match type float64 of argument 'x'.
when i tested the same code on the terminal, it works.
i can say my tf.gather is in tower/cond/while i think tower is the problem, since i used tf.gather in cond/while.
phofcode where `meta_path` is a path to a meta file saved with `tpuestimator`.
#!/usr/bin/env python # coding: utf-8 # in[1]: import tensorflow as tf import numpy as np from pprint import pprint import time network_architecture = { "channels" : 10, # size of z variables.
"num_layers" : 6, # number of resnet blocks for each downsampling layer. }
def kernel_shape, output_channels, stride, padding, init_scale=1.0, mask=none): input_shape = x.get_shape() filter_shape = [kernel_shape[0], kernel_shape[1], int(input_shape[-1]), output_channels] stride_shape = [1, stride[0], stride[1], 1] v_inizializer 0.05) v tf.get_variable("v", filter_shape, tf.float32, v_inizializer) see phofurl v_aux v.initialized_value() if mask is not none: used for auto-regressive convolutions.
v_aux mask * v_masked v_norm [0, 1, 2]) x_init tf.nn.conv2d(x, v_norm, strides=stride_shape, padding=padding)
import tensorflow as tf scale=1.)
input_details output_details # test model on the same input data.
input_data) interpreter.invoke() output_data_tflite output_data_tflite)) </pre>
this shows the exponential time difference when x is a list containing a single tensor.
import numpy as np import tensorflow as tf parsed_fields = record_defaults)
from collections import namedtuple import tensorflow as tf import numpy as np convargs = 'layerinput, numfilters, filtersize, stride, init, nameprefix ') = (none,) * len(convargs._fields) # set to false to see shape output of the final, flattened layer.
discriminator model code: phofcode generator & dircriminator body phofcode
in run: ckpt_dir="ckpt" python train.py --logtostderr --data_dir=$data_dir --architecture=resnet --imagenet_norm=true --joint_encoder=false
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i think this is one of the most simplest example to reproduce error.
since it 's stochastic, it might be run without error in single run.
however, you can get `cancellederror` in few trials phofcode
with eager execution (wrong output with only gradient for last variable - x2 calculated): x1 = tf.constant(3.0) x2 = x1 * x1 with tf.gradienttape() as g: g.watch([x1, x2]) y = x2 + 1 g.gradient([x1, x2]).numpy() [output] 1.0 without eager execution (the expected output): x1 = tf.constant(3.0) x2 * y + 1 op tf.gradient(y, [x1, x2]) with tf.session() as sess: print(sess.run(op)) [output] [6.0, 1.0]
minimal model: phofcode * steps when `save_model()` is used: phofcode * or steps when is used: phofcode
copied from my repository phofurl phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import as optimizers import tensorflow.keras.losses as losses from import mnist (train_x, train_y), _ = mnist.load_data() model = sequential() model.add(conv2d(32, kernel_size=(3, 3), activation= 'relu ', input_shape=(28,28,1), model.add(conv2d(64, (3, 3), activation= 'relu ', 2))) model.add(flatten()) model.add(dense(128, activation= 'relu ', model.add(dense(10, model.fit(train_x, train_y, batch_size=64, epochs=2, verbose=1)
see code checked here for a benchmark: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
the code can be find in the following notebook: phofurl phofcode `model = baseline_model()` phofcode `estimator_train_model = phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode you can try removing the `call()` method, it will fail.
you can also try removing the `signatures` argument in the `tf.saved_model.save()` call, it will fail.
phofcode next inspect the saved model: phofcode notice that the `method_name` is empty.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
compile tensorflow v1.11.0 from source for raspberry-pi target architecture with gcc 6.3.0. then simply try to declare a tensorshape.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1) download the tensorflow mobile demo app from the link from above 2) compile the tensorflow 1.12 version from source using the mentioned cuda settings 3) download model from model zoo 4) execute bazel commands phofurl and phofurl # download and extract ssd mobilenet model wget phofurl tar -xvf # strip out problematic nodes before even letting toco see graphdef bazel run -c opt -- --input=$detect_pb --output=$stripped_pb --frozen_graph=true --alsologtostderr # run toco conversion.
bazel run -- --output_file=$detect_fb --output_format=tflite --inference_type=float --logtostderr # build and install demo bazel build -c opt adb install -r -f 5) then you have to copy .tflite model to you apps app/assert directory and refer to it in you code like mentioned above 6) after gradle build running app on you phone might probably get runtime error i did.
install last released version of tensorflow, `pip3 install tensorflow=1.13.0rc0`.
then run to start server.
then run `python3 and get an exception.
i 've been able to distill the issue into ~150 lines of code and package it in a colab.
i 'd rather not post this code publicly, any way for me to share it with the dev 's without pasting it here?
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1. clone the mlperf reference from phofurl 2. pass config object to estimator.train that turns global jit compilation on.
this is how i did it: insert following at line 345 in config = tf.configproto() = tf.optimizeroptions.on_1 run_config = tf.estimator.runconfig( session_config=config) after inserting the above, change line 350 to include run_config: estimator = tf.estimator.estimator( model_fn=model_fn, config=run_config, params=params) 3. change path /research/transformer to wherever you cloned transformer.
this needs be done in scripts run_preprocessing.sh and run_training.sh 4. start ./run_and_time.sh.
this will download and prepare training data, which takes a long time.
the second time, you can launch ./run_training.sh 1 25 directly in order avoid downloading training data
phofcode there is no problem when the `my_softplus` layer is used as a separate layer, but the keras api specifies that layers can be used like any function, so i expect to be able to use them as activation functions (and it was possible before).
provide a reproducible test case that is the bare minimum necessary to generate the problem.
#install python3.6.8 #install vc_redist.x64 pip install -u pip virtualenv virtualenv --system-site-packages -p python ./keras keras (keras) pip install --upgrade pip (keras) list (keras) install --upgrade tensorflow (keras) python import tensorflow as tf
i use tensorflow tutorial 's code and just restore weight on different session.
` import tensorflow as tf from tensorflow.keras.models import sequential from tensorflow.keras.layers import dense, activation, flatten import numpy as np input1 = np.array([[0, 1, 1, 1, 0, 0, 0, 1, 1]]) doutput1 = np.array([[1, 0, 0]]) model = sequential() initializer = stddev=0.05, seed=1) model.add(dense(25, input_dim=10, initializer stddev=0.05, seed=2) model.add(dense(25, initializer stddev=0.05, seed=3) model.add(dense(10, sgd momentum=0.0, decay=0.0, nesterov=false) optimizer=sgd, metrics=['accuracy']) for i in range(100): sgd momentum=0.0, decay=0.0, nesterov=false) optimizer=sgd, metrics=['accuracy']) model.fit(input1, doutput1, epochs=1, batch_size=1) output1 model.predict(input1) output1 `
a colab notebook that reproduces the issue is here: phofurl specifically, a dummy dataset with 256 samples with validation_split = 1/8 should result in 224 training samples and 32 validation samples, but currently shows 256 training samples and 32 validation samples.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
`>>> import tensorflow as tf`
self-attention gan is one example that i cannot run successfully.
this link is the source code.
phofurl maybe this code is a little bit complex, but it can show you where the problem is.
follow this link and run the scripts as mentioned: phofurl
* bash phofcode removing -lprotobuf from the above command will get rid of the segfault.
* main.cc int main(int argc, char
*this generates and saves an 84mb file* running the following opens a tensorflow debug session.
import tensorflow as tf import numpy as np import string import random from index_table_from_file from tensorflow.python debug as tf_debug lookup_table_filename = "./lookup_table.csv" data_filename = def generate_data(): """creates the required datafiles""" letters = [i for i in string.ascii_letters] vocab = set([ i + i + j + j + k k l l for i in letters for j in letters for k in letters l ]) positive_vocab set(random.sample(vocab, with 'w ') as f: f.write( ' f.write( ' ') f.write( ' '.join(map(str, range(10
the model cann 't be provided.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
def body(loopvar): y = x * w loss = tf.reduce_mean((y - y_)
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode output i your cpu supports instructions that this tensorflow bi nary was not compiled to use: avx512f 32bit -- 0 16bit -- 1 32bit -- 2 16bit -- 3 32bit 4 16bit 5 32bit 6 16bit 7 8 9 10 11 12 ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
i am not quite sure which parts lead to the hanging.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
` code that errors: aasset *asset = aassetmanager_open(mgr, tflite_path.c_str(), o_rdonly); off_t start = 0; off_t length = aasset_getlength(asset); int mmap_fd_ = &start, &length); if (mmap_fd_ < 0) { loge("failed to open file: %s", tflite_path.c_str()); aasset_close(asset); return false; } // mmap tflite binary struct stat sb; fstat(mmap_fd_, &sb); char *mmapped_buffer_ (char *) mmap(nullptr, sb.st_size, prot_read, map_shared, mmap_fd_, 0); if (mmapped_buffer_ == map_failed) { loge("mmap failed on file: %s", tflite_path.c_str()); aasset_close(asset); return false; } // build the model using namespace tflite; model if (!model) { loge("failed to create flatbuffermodel with file: %s", tflite_path.c_str()); // my code errors here.
aasset_close(asset); return false; }` ` code that runs successfully: const char *external_path jni_false); const char *relative_path char + strlen(relative_path)]; strcpy(tflite_path, external_path); strcat (tflite_path, relative_path); model( if(!model){ printf("failed to mmap model "); exit(0); } resolver; interpreter; if resolver)(&interpreter) == ktfliteok) { interpreter->invoke(); logd("tfliteok!
"); } else logd("tflite -- not -- ok!
link phofhyperlink to my python3 colab noteboo
below is a minimum working example to reproduce the problem: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
tensorflow lite convertion tutorial phofhyperlink and used android source code from phofhyperlink , changed classifier to phofcode for quantized model and phofcode for float model.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1. implementation of the spectral normalization function to be passed to kernel_regularizer argument of the tf.layers module (e.g.
tf.layers.conv2d) phofcode 2. function is passed to a layer in [tf.layers] module `conv_layer = filters=128, ` 3. run regularizer after each update phofcode
1. train a toy estimator using have its input function return a dataset.
1. write a script similar to the one written above, which basically creates an estimator warm-started from the latest checkpoint in your training job, calls the input function to get the actual labels, then tries to compare that to prediction output from an estimator.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode if you do not set the `kernel_initializer`, or if you set it to `"zeros"`, everything works fine.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
internalerror: cudnn launch failure : input shape provide a reproducible test case that is the bare minimum necessary to generate the problem.
my network is shown below def model(x, y, is_training, is_quantize): with slim.fully_connected], biases_initializer = is_training, 'epsilon ':1e-5, 'scale ': true, data_slice = tf.slice(x, [ 0, 0, 0, 0], [ train_batch, 64, 60, 3]) conv1 = slim.conv2d(data_slice, 16, [3, 3], scope= 'conv1 ')
1. this code below compiles but errors during the run with the error below.
phofcode phofcode 2. on the other hand the below code does not compile: phofcode phofcode
any code that passes feeds totaling > 2gib to tf_sessionrun connected over a grpc connection.
in this particular example, i was trying to use the `infeedenqueuetuple` op (with the inputs being placeholders that i'm feeding).
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
in this sample code, i have one dataset (range between 0 and 7, batch of 1, 1 epoch), i train the model for 4 steps, stop it, restart for 4 steps the training by restoring checkpoints (model and input).
expected: train first run: 4 steps -> features 0 to 3 save checkpoint model-ckpt and input-ckpt 4 restore model-ckpt and input-ckpt train second run: steps -> features to 7 save checkpoint 8 phofcode
complete code snippet, you can run it directely without any modification.
space cost comparison tensorforest: import time import tensorflow as tf (x_train, y_train), _ = x_train = x_train.reshape((-1, # produce more examples y_train = y_train.repeat(3, x_train = x_train.repeat(10, axis=0) # repeat 10 times to produce more examples y_train y_train.repeat(10, axis=0).reshape(-1) print(x_train.shape, y_train.shape) # totally examples # 1024) start_time time.time() est_args { 'num_classes ': 10, 'num_features ': 1024, 'regression ': false, 'num_trees ': 500, 'max_nodes ': 10000, 'base_random_seed ': 0} params
converted the model via: `bazel run -c opt -- ` ` ` ` `--mean_values=128 `--std_values=128 `--allow_custom_ops` changes in
t# simplified example timport tensorflow as tf tmnist = tf.keras.datasets.mnist t(x_train, y_train),(x_test, y_test) = mnist.load_data() tx_train, x_test = x_train / 255.0, x_test / 255.0 tw, h = 28, 28 t# reshape input data from (28, 28) to (28, 28, 1) tx_train w, h, 1) tx_test w, h, 1) t# buggy example -> what is going on with conv2d?
tmodel t kernel_size=2, padding='same', activation='relu', input_shape=(28,28,1)), # error t t activation=tf.nn.relu), t t]) t t t t metrics=['accuracy']) tmodel.fit(x_train, y_train, epochs=5) y_test)
dataset[ 'usa '] = (origin == 1)*1.0 dataset[ 'europe '] = (origin == 2)*1.0 dataset[ 'japan '] = (origin == 3)*1.0 train_dataset = train_stats train_dataset.describe() train_stats.pop("mpg") train_stats train_stats.transpose() def norm(x): return (x - train_stats[ 'mean ']) / train_stats[ 'std '] normed_train_data norm(train_dataset)
create a string tensor using `public static <t> tensor<t> create(class<t> type, long[] shape, bytebuffer data) ` in org.tensorflow.tensor.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
reproducing this exactly may require running through sagemaker.
the example i modified is this: phofurl specifically, i changed all of the keras imports in this file: phofurl to be tensorflow.keras imports.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1. download ` phofurl 2. edit to use `tensorflow==1.10`, install dependencies with your favorite tool (i use pipenv) 3. edit `sample.sh`, comment out the `rm ...` lines 4. run `./sample.sh` 5. edit to use `tensorflow==1.11`, install dependencies with your favorite tool (i use pipenv) 6. run `./sample.sh`
ctc has only a cpu implementation, and the gpu backed offloads it to cpu, why isn 't this also case for tpus ?
phofcode s3_image_url is a valid url for s3 object which i confirmed by downloading it with awscli
phofcode to figure out why i get `memoryerror`s, i have used the python interactive mode, and called `.evaluate(...)` and `.train(...)` while observing ram usage, after each call, another 200mb ram got occupied on the cpu ram, eventually depleting all available ram
comment out line 503 in env.cc: << 20, 512ll << 20); rebuild and everything works as expected.
if the following does not immediately produces the bug, then try increasing the batch size from 100 to something greater.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
1. install tensorflow using anaconda and run ipython: phofcode 2. run the following code in ipython: phofcode 3. check cpus allowed list for main thread(in another bash): phofcode output (may vary): phofcode 4. perform matrix multiplication in ipython: 5. check again cpus allowed list for main thread: output (may vary): it become single core!
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode calling `run()` after setting `num_layers` to 1 or 2 works, but fails if `num_layers >= 3`.
this is the tf code that i modified for gpu tracing in a distributed mode.
here is my code: phofurl phofhyperlink run on colab: 1. tpu: phofurl phofhyperlink 2. gpu phofurl phofhyperlink
memory-leak-example.zip phofhyperlink the above code is a modified version of the `iris premade estimator` phofhyperlink example to loop over `train()` multiple times.
it requires the `objgraph` phofhyperlink to show the peak memory growth every iteration and generate an visualization of in-memory `tf.graph` instances.
here is an example log provided of an example invocation: `python premade_estimator.py --optimizer=rmsprop` rmsprop.log phofhyperlink note the object growth result after 5th iteration.
as can be seen, 5 `tf.graph` instances remain in memory, along with all `tensor`, `tensorshape`, `dimension`, and other objects that go along with it.
phofcode the base random seed is non-zero, it's supposed to produce the same result.
thus, i wonder where else does the code have randomness?
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
build looks like this: phofcode looks like: phofcode then in our binary cpp the code is called like this (simplified, parts removed for clarity): phofcode the object works if compiled like: `bazel build -c opt --compilation_mode=dbg` but fails if compiled like: `bazel build -c opt
python import tensorflow as tf import numpy as np def get_dense(input, widths, activations): assert len(widths) == len(activations) output = input for i, (w, a) in enumerate(zip(widths, activations)): output = tf.layers.dense(output, units=w, activation=a) return output nn = lambda input, depth, width: get_dense( input, [width for _ in range(depth - 1)] + [3 ], [tf.nn.relu for _ in range(depth - 1)] + [none] ) tf.reset_default_graph() # works fine when n = 8192, # but breaks with n 8193: n 8193 n 100 x scale=1., size=(n, 1)).astype(np.float32) nx x.shape[1] y x
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
bazel run -c opt -- --inference_type=float --max_detections=500 --allow_custom_ops
import numpy as np import librosa import tensorflow as tf wave, sr = mono=true, sr=none) sr = 44032 / 4 def generator(batch_size): while true: # start_positions = np.random.randint(0, len(wave) - sr, size=batch_size) # batch = [] batch [] for start_position in range(0, len(wave) - sr, 100): + sr], axis=-1), axis=-1)) # batch1 # batch2 np.expand_dims(batch1, axis=-1) if start_position % batch_size == 0: yield np.array(batch), np.array(batch) def get_model(input_n): input1 1, 1)) x_a input1 for i in x_a tf.keras.layers.conv2d(8 * (2
below is edited/commented version of an experiment i ran showcasing this bug.
i have removed most of the verbose logging for brevity but the original can be found here phofhyperlink .
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import tensorflow.contrib.lite as lite scalar_input = tf.placeholder(shape=(), name= 'input ', dtype=tf.float32) b = tf.constant(1.0) val = scalar_input + b out = tf.identity(val, name="out") with tf.session() as sess: converter [scalar_input], [out]) tflite_model converter.convert()
provide a reproducible test case that is the bare minimum necessary to generate the problem.
below is python code to export the graph: phofcode below is go code to access flatten operation: phofcode executing above produces following output: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
python import tensorflow as tf import numpy as np import os import psutil n_samples = dim = 100 batch_size = 50 raw_data = np.zeros((n_samples, dim)).astype(np.float32) dataset iterator [none, dim]) process def mem(): return / 1024
taking only the data pipeline part and skipping all shuffling, preprocessing, etcetera i am left with this as a minimal working example.
(note that i use multiple prefetch statements; this significantly improves performance on both systems for me, but removing them does not change their relative performance.
similarly, using 128 parallel calls in the mapping function gives better results than 32 or 64, but changing that or making it dependent on the actual number of vcpus doesn't solve the observed behavior.)
the code below reproduces the error: phofcode the code below doesn't: phofcode note the change in dtype.
`z = tf.stack([x, y], axis=3), where x and y both are 4d tensor.` what can i do to get the interpreter run?
any help will be appreciated.
it seems that the issue, although not in the bug tracker, should be already known to the authors: phofurl however, i can make a minimal example to reproduce the problem on demand.
' ' ' (base) futurewarning: conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated.
i n future, it will be treated as `np.float64 == np.dtype(float).type`.
from ._conv import register_converters as _register_converters traceback (most recent call last): file line 463, in <module> tf.app.run(main=main, argv=[sys.argv[0]] + unparsed) file line 1 25, in run _sys.exit(main(argv)) file line 107, in main model_settings, flags.summaries_dir) typeerror: __init__() missing 1 required positional argument: 'summaries_dir ' ' ' ' where i was wrong and what i needs to do
to generates the log in r1.11, try phofurl .
note that, i have already used
provide a reproducible test case that is the bare minimum necessary to generate the problem.
using the command in the end of phofurl posted yesterday by @tfboyd .
import numpy as np import tensorflow as tf weight_variable = 1 no_of_features = 10 timesteps = 3 batch_size = 32 def data_gen(): while true: numerical np.random.randint(5, size=(batch_size, timesteps, no_of_features)) y np.random.randint(2, size=batch_size) w np.ones(batch_size) * weight_variable # or np.where() for imbalanced datasets yield {'numeric_input': numerical}, y, w def build_model(): numerical_input no_of_features), name='numeric_input') rnn_out tf.keras.layers.gru(32, dense tf.keras.layers.dense(1, activation='sigmoid', model dense) params { 'loss': 'binary_crossentropy', 'optimizer': 'metrics': } model.compile(
the code for running inference on the phone for the tflite models is the following: import import import android.graphics.bitmap; import android.os.trace; java.io.fileinputstream; java.io.ioexception; java.nio.bytebuffer; java.nio.byteorder; one.realnote.app.util; public class { private static final string tag = "tfliteapialex"; // only return this many results.
private boolean ismodelquantized; // float model // number of threads in the java app private static final int num_threads = 4; // config values.
private int inputsize; pre-allocated buffers.
float[][] outputvector; int[] intvalues; static ppmitem ppm_tfrun = "runalex", string.class); bytebuffer imgdata; interpreter tflite; /
phofurl this code is similar to my implementation
provide a reproducible test case that is the bare minimum necessary to generate the problem.
see the code in my snippet above.
get davis dataset and put it in respective folders
phofcode this example works with tensorflow 1.11 but fails with 1.12. it does not matter whether the shapes of `idx` and `update` are set explicitly or `none`.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf testing_tensor = testing_output = testing_tensor - what_grad_auto = image phofimage
all code results in the issue.
the code below phofcode produces a unmatched dataset in order.
tf.tensor(1, shape=(), dtype=int64) tf.tensor(8, shape=(), dtype=int64) tf.tensor(8, shape=(), dtype=int64) tf.tensor(14, shape=(), dtype=int64) tf.tensor(3, tf.tensor(12, tf.tensor(6, tf.tensor(16, tf.tensor(0, tf.tensor(18, tf.tensor(2, tf.tensor(2, tf.tensor(4, tf.tensor(10, tf.tensor(7, tf.tensor(4, tf.tensor(9, tf.tensor(0, tf.tensor(5, tf.tensor(6, ``
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
any distributed training program should be okay.
just add some sleep in the python code or the rdma.cc file
1. download the android ndk.
call --arch arm --api 21 --stl=libc++ --install-dir android-toolchain` 2. build `libtensorflowlite.so`, i added this to the build file: phofcode and then called phofcode 3. clone and compile the flatbuffer repo.
4. then call the problematic command phofcode and you should get error: phofcode
see above (should be reproducible with any frontend that uses xrt to talk to cloud tpus though)
resnet50 local with output phofhyperlink : phofcode vgg16 local with output phofhyperlink : phofcode distributed using the same ps command with output phofhyperlink : phofcode resnet50 distributed with output phofhyperlink : phofcode vgg16 distributed
` std::vector<int> sizes = {1, 240, 240, 3}; sizes); if != ktfliteok) { log(info) << "failed to allocate tensors!"
<< " "; return false; }`
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode the same error occurs when eager execution is disabled.
after training and freezing, in toco, i have following code: `graph_def_file = "my_frozen.pb" //this is the .pb file.
input_arrays = "reshape_1"] //this is the name of the input node output_arrays = ["labels_softmax"] //this is the name of ouput node //this is main code to call toco converter = input_arrays, output_arrays) //since fake quantization during training, we quantize graph during converting converter.inference_type input_arrays {input_arrays[0] : (0., 2.)}
//mean, std_dev [from this tensorflow tutorial phofhyperlink tflite_model converter.convert() open("tiny_conv.tflite", //the resulting .tflite file.`
please see this gist with the bare minimum python script to reproduce this issue: phofurl
provide a reproducible test case that is the bare minimum necessary to generate the problem.
my input function,keras are as follows: phofcode
provide a reproducible test case that is the bare minimum necessary to generate the problem.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
phofcode cmd to exec phofcode or phofcode
phofcode the code is similar to the following official examples: linear_regression.py phofhyperlink and linear_regression.py (eager) phofhyperlink .
this is borrowed from the stackoverflow link above: phofcode
unfortunately, i can 't share the data i 'm using.
i 'm using a cnn built with `tf.keras.layers` layers (called `model`) and my compile step, callbacks definitions, and fit step look like this: model.compile( optimizer= 'adam ', ) callbacks = [ monitor= 'val_acc ', verbose=1, save_best_only=true, mode= 'max '), tensorboard(), patience=5, min_delta=0, mode= 'max ') ] model.fit(dataset, steps_per_epoch=1000, epochs=1000, validation_steps=3, callbacks=callbacks)
its a little complicated to share ready to run code due to privacy.
but here is crux of it, phofcode and fit a `tf.keras.model` like so, phofcode
to reproduce, run the following on a multi-gpu system and check nvidia-smi during the 20 second sleep.
i 've attached a small example.
phofcode and adding: phofcode error looks like: phofcode changing to: phofcode also does not work an end up with:
### model description (same for both eager and static) phofcode also, the following variable definitions are shared in both the eager and static implementations phofcode ### eager training i show just a single training update, that 's run in a training loop phofcode ### static graph training first i show the graph definition,then how is used in the loop #### graph def phofcode and this is what 's inside loop (executed in a monitoredsession): ` the model definition is same, loss definition is same, steps and same, only difference eager mode enabled or disabled.
the results with eager on are: d loss: collapses to zero, that 's wrong since its aim to stay around 0.5 bad d phofimage generated images: wrong, bad reconstructions since d collapsed bad_gen phofimage while when off, discriminator loss looks correct and generated output are one expected: d loss: good d phofimage generated output: good_gen phofimage
export tf_need_cuda=1 "" | ./configure bazel build --config=opt --config=cuda
reduced to the minimum: phofcode
run command: python --data_dir=/data --model_dir=/data --resnet_version=2 --clean --save_summary_steps=10 --train_epochs=1820 --batch_size=512 --num_gpus=2 ``
running the sparse_matmul_op_test.py script on an arm architecture device can reproduce the failure.
this python script is a reduced reproduction: phofcode
running on an arm architecture machine should reproduce the issue.
in addition, this small python script shows the same results: phofcode
phofcode there are no errors reported.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
import tensorflow as tf import os def cond(size, i): t return tf.less(i,size) def body(size, i): t b=2*7.5+c t with tf.variable_scope("a", reuse=tf.auto_reuse): t t a = t a = tf.scatter_update(a,i,b) with t t return (size, i+1) with tf.session() as sess: c=tf.constant(4.0) i = tf.constant(0) size = tf.constant(6) _,i tf.while_loop(cond, body, [size, i]) a init sess.run(init) print(sess.run([a,i]))
the code below phofcode produces a non-zero result like phofcode
here is a minimal example to reproduce the issue (the case of `indirect = true` can be used as a workaround and shows the expected output in contrast of `indirect = false`): phofcode example output: phofcode
here is the colab gist to reproduce the result phofurl
cannot install, every time same error.
this is tricky as i 'm using c#, and the code is large.
seeing as tensorflowsharp is a pretty thin wrapper class, this seemed to be more related to the internals/usage of tensorflow itself.
the following code will be able to reprorduce this problem: phofcode however, if we comment out the then it will work as expected:
i use the code below to generate graph.pb and ckpy file `g = tf.get_default_graph() graph_def = g.as_graph_def() "./model", 'graph.pb ', as_text=false) saver = tf.train.saver() saver.save(sess, and then i freezed the graph.pb successfullly python freeze_graph.py --input_binary=true
code for deep and wide linear model.
or logistic regression example code from tensorflow example
following is the code change i made to phofurl phofcode
need substantial infrastructure (roce) and code to reproduce.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
see a full script which reproduces this issue along two different code paths here: phofurl the segfault occurs when reading the dataset a second time.
the first read works as expected.
for reference the two code samples which produce datasets which cause a segfault on second read are: phofcode i've also dug into and minified down to this repro: phofcode ------ please let me know if there's anything else i can provide or help with!
this is blocking us from upgrading to the latest tensorflow version in phofhyperlink
phofcode output: phofcode exact command to reproduce: phofcode (to please tensorflowbuttler
test.py: python import tensorflow as tf do_eval_dist = true def model_fn(features, labels, mode): layer = tf.layers.dense(2) logits = layer(features) if mode == predictions = {"logits": logits} return predictions=predictions) loss labels=labels, [-1])) if mode == class_targets axis=-1, [-1]) preds axis=-1, name= 'preds '), [-1]) return loss=loss, eval_metric_ops={ 'cohen_k ': preds, 2), }) if mode == train_op return loss=loss, train_op=train_op) def input_fn(): features labels 0.
]).repeat() return labels)) # configured the estimator for either distributed or non-distributed evaluation # training is always distributed if do_eval_dist: distribution ) config else: distribution config classifier config=config, print( '
provide a reproducible test case that is the bare minimum necessary to generate the problem.
tflite_convert (i can upload the model somewhere, if needed!)
i have test code here: phofurl `python benchmark_model.py --dim_length 128 --bz 8` will work `python benchmark_model.py --dim_length 128 --bz 16` will give error
import tensorflow as tf import numpy as np from scipy import misc import glob os #command to extract all file names num_parallel_calls=4 def parse_fn(filename): """decode the jpeg image from the filename and convert to 0, 1]."""
image_string = tf.read_file(filename) image_decoded = # this will convert to float values in [0, 1] image = tf.float32) return image # create a dataset dataset = .map(parse_fn, .prefetch(1)) iterator patches iterator.get_next() sess tf.session() res sess.run(patches) print(res.shape) misc.imshow(res) provide a reproducible test case that is the bare minimum necessary to generate the problem.
2. change location in below command where image file which i have attached 3.run script and if it runs without error.
run predrnn.py in phofurl modify the "model_creation_device" to reproduce issues.
provide a reproducible test case that is the bare minimum necessary to generate the problem.
steps to reproduce the behavior: 1. i followed the steps in the readme for setting up an aws account, to a t.. 2. installed home-brew 3. ran "brew install python3" 4. ran "python3 -m pip install --upgrade virtualenv" 5. ran "python3 -m virtualenv --python="$(command -v python3)" .env && source .env/bin/activate && python3 -m pip install -u pip virtualenv && python3 -m pip install -r requirements.txt" 6. created two users in the config.cfg file, one each for my phone and laptop.
7. ran "./algo" 8. i get following error message: "[warning]: could not match supplied host pattern, ignoring: vpn-host" "error!
unexpected exception, this is probably a bug: cannot pickle '_io.textiowrapper ' object" 9. i then "./algo -vvv", and get output i put in full log section of this issue.
attempt to install algo on macos 10.15.1
steps to reproduce the behavior: 1. create 18.04 ubuntu server vm 2.
`sudo apt install -y python3-virtualenv` 4.
`python3 -m virtualenv --python="$(command -v python3)" .env && source .env/bin/activate && python3 -m pip install -u pip virtualenv && python3 -m pip install -r requirements.txt` 5. add a few users to `config.cfg` 6. run `./algo`
steps to reproduce the behavior: 1. list ten users in config.cfg 2. deploy algo 3. add one user to config.cfg & run algo update-users with success 4. add another user to config.cfg & run algo update-users with error
steps to reproduce the behavior: 1. open ios settings -> vpn 2. tap on right side of algovpn algo ikev2 string 3. behold there is no delete(remove) button
steps to reproduce the behavior: 1.
`docker run --cap-drop=all -it -v /users/sam/vpns:/data trailofbits/algo:latest`
steps to reproduce the behavior: 1. run ./algo
steps to reproduce the behavior: 1. follow steps on github page for setting up ec2 instance with algo 2. follow steps installed algo on localhost 3. execute algo
steps to reproduce the behavior: 1. download algo.
2. deploy 3. stops at strongswan register p12 step due to error about mismatched cpus.
1. register account at bithost or bitlaunch 2. setup algo on digital ocean or vultr server 3. do localhost provision 4. use
steps to reproduce the behavior: 1. download algo 2. do not change anything in config.cfg 3. deploy as usual
1. run algo with aws variables: phofcode 2. pick amazon ec2 as the cloud provider 3. watch it fail at `task [wireguard : generate public keys]`
steps to reproduce the behavior: 1. enable 2. deploy algo on ec2 with default ubuntu image (ubuntu-disco-19.04) 3. change image to "ubuntu-bionic-18.04" 4. deploy algo on ec2 again
steps to reproduce the behavior: 1. add more users in config.cfg and enable auto reboot 2. disable ipsec in config.cfg 3. run ./algo 4. choose digitalocean as the cloud provider 5. enable ad blocking and disable ssh tunneling 6. choose sfo2 as the region 7. import the generated configuration file to iphone xr 8. turn on on-demand for both wi-fi and cellular 9. switch from extender network with same ssid and channel as main router
steps to reproduce the behavior: 1. connect to algo vpn server 2. go to phofurl
steps to reproduce the behavior: 1. installed profile onto a relevant device (windows 10 or ios 12 with on demand) 2. activated vpn profile 3. began browsing and observed response + user experience
* get a clean installation of ubuntu 18.04 with all updates * follow the instructions at phofurl to install algo and its dependencies * at step 4. install algo's remaining dependencies, you'll get deprecation: python 2.7 will reach the end of its life on january 1st, 2020. please upgrade your python as python 2.7 won't be maintained after that date.
a future version of pip will drop support for python 2.7.
followed all the steps in the guide, haven 't previously created a vpn, after choosing 1 (digital ocean), it skipped crucial next steps
`docker run --cap-drop=all -it -v -v ~/path/to/config:/data trailofbits/algo:latest`
steps to reproduce the behavior: 1. run ./algo update-users behind strict firewall
steps to reproduce the behavior: 1.
`./algo` 2. pick scaleway as the provider
steps to reproduce the behavior: 1. git clone phofurl 2. cd algo 3. sudo apt-get update && sudo apt-get install build-essential libssl-dev libffi-dev python-dev python-pip python-setuptools python-virtualenv -y 4. vim config.cfg 5.
steps to reproduce the behavior: 1.
./algo 2. install .ps1 file for windows vpn 3. connect using settings
host: fedora 30 aws ubuntu 18.04 and 19.04 option 9 all default ipsec disabled on config
steps to reproduce the behavior: 1. set use_existing_eip to "true" 2. deploy to aws ec2 3. run through all prompts as normal.
blank array should show for list of eips
steps to reproduce the behavior: 1. download master.zip per readme on 2. edit config.cfg to taste.
set up to install to local 18.04 vm.
steps to reproduce the behavior: 1. roll out a vpn service to any provider (i used azure), default settings plus dns ad blocker.
2. configure an ubuntu 19.04 client with an ip address of and a gateway/dns of 3. install and configure wireguard as specified in 4. start wireguard service via systemd.
5. check phofurl to view which dns is detected.
do the same thing again, happens the same way
steps to reproduce the behavior: 1. be on wifi 2. turn off wifi 3. no traffic is passed
steps to reproduce the behavior: 1. follow the steps in the documentation for ubuntu based installation on google compute engine 2. download the cacert and user.p12 files and follow manual windows client setup 3. click connect from windows 10 (64 bit) settings-> network&internet -> vpn.
steps to reproduce the behavior: 1. install dependencies phofcode 2. activate virtual environment phofcode 3. invoke algo (./algo)
steps to reproduce the behavior: 1. install a ct with ubuntu 18.04 on proxmox 2. add proxmox ve test repository 3. follow the steps to install algo vpn
steps to reproduce the behavior: 1. run algo installation script 2. dnscrypt-proxy works as expected.
3. if server needs to restart (unattended-reboot) or is rebooted, dnscrypt-proxy fails to resolve.
steps to reproduce the behavior: 1.
'./algo ' 2. picking option 9 2. following instructions, including public ip, etc.
steps to reproduce the behavior: 1. fresh install algo (ad blocking and ssh users enabled) 2. download mac wireguard client phofurl 3. connect to the server using the user.conf import 4.
`ping www.google.com` <img width="1045" alt="screen shot at 4 18 17 pm" src=" phofurl
steps to reproduce the behavior: 1. clone current repo.
2. run ./algo 3. follow prompts.
4. wait until it fails.
steps to reproduce the behavior: 1. setup an aws iam using with mfa activated as instructed 2. run algo and choose
steps to reproduce the behavior: 1. manually set your /etc/sysctl.conf to have = 1 = 1 = 1 2. algo will work to be setup once just fine 3. running algo again to update-users will fail with a failed wg-quick service start.
steps to reproduce the behavior: 1. setup algo and add a wifi with emoji to the on demand-exclusion list 2. try to update users afterwards 3. experience error
steps to reproduce the behavior: see log below.
steps to reproduce the behavior: 1. prepare the virtual environment 2. prepare the gce iam project 3. start the algo installation
steps to reproduce the behavior: 1. choose to deploy a server on vultr 2. prompt says:` enter the local path to your configuration ini file ( phofurl ` 3. that url give a 404 not_found error
steps to reproduce the behavior: 1. install algo in freebsd 2. reboot
steps to reproduce the behavior: 1. start fresh ubuntu 18.04 x64 instance on ec2 (t3.small) 2. installed docker - `sudo snap install docker` 3.
`sudo docker run --cap-drop all -it -v where `/home/ubuntu/algovpn` is a folder that includes the `config.cfg` file.
got error right after the success message: task [debug]
steps to reproduce the behavior: 1. disable ipv6 through grub 2. attempt algo install on local ubuntu 18.04 server
steps to reproduce the behavior: 1. use image freebsd-11-2-x64-zfs for digitalocean provider in config.cfg 2. try deploying to do.
steps to reproduce the behavior: 1. do this.. 2. do that.. 3.
steps to reproduce the behavior: 1. execute command `./algo ' 2. choices are sequentially: `9` `y` `y` `` `y` `` `y` `` `localhost` `my public ip`
install algo on win10 as a non-admin user providing admin credentials.
"required by {ip address} ikev2 profile."
i connect to the vpn.
i can rdp, i can ping, etc.
to everything i need to but am unable to visit phofurl it simply states it either took long respond and a couple times go that it refused the connection.
steps to reproduce the behavior: 1. install wireguard (unreleased) app 2. scan the qr code 3. tab connect
`(env) ./algo play [ask user for the input]
i am not sure will it work further, however at the moment i've the following error on cli just after running the `pip -q install -r requirements.txt` command: phofcode
steps to reproduce the behavior: 1. install algo with wireguard clients on android phones 2. run ./algo update-users (i'd assume with `keys_clean_all` flag in `config.cfg` set to false) 3. existing wireguard clients won't work - have to download new config files
steps to reproduce the behavior: 1. install ubuntu core on raspberry pi 2. install classic mode 3. follow instructions in readme.
i guess without my database entries, it is impossible to reproduce and due to sensitivity of the data stored, its not possible to share the models return by the query.
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. install version 2. connect to my redis server without any credential and succeded.
i can see the keys.
3. then try to view the value of random key, and application exited without any hanging nor warning.
4. then go to windows event logs, saw crash log.
steps to reproduce the behavior: 1. add & save connection with ssh key 2. reopen rdm 3. try to connect 4. see error
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
try to change score of zset menber: 1. open a zset 2. select a member of zset 3. change score 4. commit 5. got error try to open a zset twice at the same time: 1. open a 2. open it again 3. got two blank windows
steps to reproduce the behavior: start the application
execute the application under proxy
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. attempt to connect to the redis server
steps to reproduce the behavior: 1. select key that you want to populate 1. click "add row" and enter value and score 3. click "ok" to add and then application crash
steps to reproduce the behavior: 1. go to '...' 2. click on '....' 3. scroll down to '....' 4. see error
steps to reproduce the behavior: 1. go to redis desktop manager 2. click on connect to connect to the redis server 3. expand the nodes and notice the child nodes 4. the keys are duplicated.
each key is shown twice.
1. select your database 2. try to expand a large group of keys.
steps to reproduce the behavior: 1. choose one data with json-format 2. change "view as" from "json" to "hex table" 3. change "view as" to "json" 4. see error
steps to reproduce the behavior: 1. create two clusters which you will access via nat (which means you must untick the 'change host on cluster redirect' setting) 2. ensure you are connecting to one cluster via port 6379, and one via 6380 or any non-6379 port (incoming to nat only.
after nat routing inside vpc, both clusters use port 6379) 3. connect to cluster with non-6379 port via nat, note the keys shown in rdm 4. refresh data for the cluster, and note keys are now shown for 6379 cluster.
steps to reproduce the behavior: 1. go to ' 2. scroll down to 'custom value view formatters'
steps to reproduce the behavior: 1. go to console window 2. subscribe channel 3. receive very long message (6,000~) 4. can't drag text or scroll horizontal
detailed steps to reproduce the behavior: 1. run `vim --clean` 3. edit `~/vimtest.vim` and type phofcode 4. run `:so %` 5. popup window has no sign placed
detailed steps to reproduce the behavior: 1. run `gvim --clean` on pc with touch screen 2. split window ctrl-w v 2. type long text with many rows 3. activate left window touch it 4. try scroll left window touch the window with your finger and slide it up 5. right is scrolled.
detailed steps to reproduce the behavior: with `test.vim`: phofcode 1. run `vim --clean test.vim` 2. run `:so %`
write this in `/tmp/vimrc`: set ls=2 hi!
link statusline errormsg ino <expr> <c-b> func() fu func() let g:on = !get(g:, 'on', 0) redraws return '' endfu fu status() return get(g:, 'on', 0) ?
'[on]' : '' endfu set stl=%{status()} then, start vim like this: vim -nu none -s /tmp/vimrc finally, press `i` to enter insert mode and `c-b` to invoke the mapping.
`[on]` is displayed in the status line, and the cursor is drawn right afterward.
detailed steps to reproduce the behavior: 1. have wsl set up.
i expect other sources of network disks may demonstrate this issue also (more extremely if latency is high enough, in fact), but have not confirmed it properly.
i did try using but its a bit wonky in a few ways (and didnt demonstrate the issue).
2. run `vim.exe --clean` (or `gvim.exe --clean`, etc.)
on windows, either from a wsl directory, or `:cd wsl$ ` or equivalent manually.
3. edit a file, any file.
(for this and the previous step, i use `:set autochdir` and edit file on the linux side.)
observe that it probably doesnt feel instant.
5. run it thousand times (`let starttime = localtime() | for i in range(1000) | call expand("%:p") | endfor | echo localtime() - starttime`).
the following are my figures for running it this thousand times.
(aside: im surprised not to be able to find time function that yields millisecond or microsecond precision.)
ive used ` 'autochdir '`, so that working directory matches files directory.
(and i confess that even * * is quite bit slower than expected.)
- with `a:` being mapped to ` wsl$ arch` via `subst`: 20c23 seconds.
(from other testing, confirm key here is not `a:` bit, but either path string length or path component length, and havent checked which.)
these figures are * best * case, because them caches be nice and toasty.
from profiling, find in practice, best-case 20ms call often expands several hundred milliseconds first time its called very short whileso practice its even less smooth than you might expect.
write this code in `/tmp/vim.vim`: syn enable set cole=3 cocu=n lines=24 columns=80 nno cd :call func()<cr> fu func() call search( '| ', 's ') echom col( '.
'), 0), 'name ') endfu h items() exe "norm!
/->items/e " now start vim like this: vim -nu none -s /tmp/vim.vim press `cd` to invoke `func()` which searches the next bar and echo the name of the syntax item under the cursor.
the output is `helpbar`, which is correct.
finally, press `kk` to move 2 lines upward, and press `cd` again; cursor jumps to same bar again, but this time, output is `helpexample`, which is wrong.
detailed steps to reproduce the behavior: $ vim --clean -c "set buftype=nofile selection=exclusive" -c "call setline(1, " \'here \' ")" -c "normal!
wvi \'y" -c "execute (@@ == 'here ' ? '
' : 'c ') .
\'quit \'" or, using the example from #5183: vim --clean :set selection=exclusive<cr> i foo 'bar ' baz<esc> 0wvi '
phofcode this causes the start up to hang for 25 seconds.
commenting out `set guioptions-=t` results in a near instant start up.
1. set terminal column size to 160 or more.
2. type `make test` or `make test_quickfix`
run this shell command: vim -nu none --cmd 'au bufwinenter,winenter * setl stl=active ' --cmd 'au bufwinleave,winleave * setl stl=not active ' -o /tmp/file{1..2} the status line in the right window displays `active`.
detailed steps to reproduce the behavior: 1. run `gvim --clean` 2. enter some text.
3. using the mouse select the text to the end of line.
if line starts with a tab, selection stops before it hits end of line.
if line numbers are on, selection stops earlier still.
detailed steps to reproduce the behavior: 1. run `vim` 2. open netrw for directory with c files 3. type `:mf *.c` 4. nothing is selected
detailed steps to reproduce the behavior: 1. open nautilus, hit ctrl+l to get the url bar, and type in "ssh://your.server", and hit enter.
2. navigate to a directory.
3. create a file through nautilus (right-click -> new document -> new text document).
(you may need to `touch ~/templates/new text document.txt` if you don 't have one.
4. open the document with gvim.
1. add `set lispwords=hello` to `~/.vimrc` or 2. run `vim /tmp/hello.scm`.
3. check out the value of the variable `lispwords` in the `vim` instance.
1. set `.vimrc` with the following contents: phofcode 2. leave `~/.vim/` folder empty; 3. edit any file long enough to allow for multiple full screen scrolls;
phofcode 1. so % 2. the
1. run `vim --clean popup.vim -c "source %"` phofcode 2. result: `e475: invalid argument: testprop` 3. when `"bufnr"` isn 't specified, everything works fine: phofcode
test.vim phofcode 1. so % 2. press `<esc>` 3. the two popup windows don 't close at once, expected behavior is both are closed at once.
4. if remove the `redraw`, the two popup windows are both closed.
run this shell command: vim -nu none +"call matchadd( 'conceal ', '(.
*) ')|set cole=3 cocu=n nowrap" +"pu=repeat( \'x \', &columns/2).. \')z \'" then press `$` to move the cursor on the last character of the line, which here is `z`.
the cursor jumps to some location way beyond `z`.
`echo &signcolumn` outputs 'auto ', no signcolumn 2. :so % 2. signcolumn show up
endofbuffer test.vim phofcode 1. so % ps.
i am using colorscheme phofurl
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
on windows 10 2. edit any existing file from a remote machine, with command such as phofcode 3. the underlining scp command that netrw is using appears to be something like: phofcode
1. start vanilla vim: `vim -u none -c 'set ft=java | syntax on'` 2. paste the above example java code.
3. use `]m` and `[m` motions to move the cursor across the file.
1. create `bug.vim` with the content `autocmd bufunload * redraws`.
`vim -u bug.vim -p a b c` 3.
`:q` to close the tab for a
detailed steps to reproduce the behavior: 1. create the file "syntax_prop.vim" containing the following: phofcode 2. run `vim --clean -s prop.txt prop.txt` 2. edit `filename` 3. the 2nd word of line 1 has had italics applied, but the colour of existing text property has been cleared.
1. run `vim --clean` (or `gvim --clean`, etc.)
2. type or paste "lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
3. do `:set formatoptions+=al` 4. enter insert mode anywhere on the line entered in step 2 and type anything.
5. bug: the line is reformatted.
phofcode `:source` this script and `:call
1. run `gvim --u none` 2. do: phofcode
1. run `vim -u none` 2. do: phofcode
1. run `gvim --u none` 2. copy the text in the paste to the system clipboard phofurl 3. run the following ex commands: phofcode the last ex command will cause a crash
`vim --clean -c 'set noesckeys'` 2. enter insert mode and type <kbd>c</kbd>
detailed steps to reproduce the behavior: assume three files: `a`, `b`, and `c` you open a (`vim a`), split vertically (`:vex`), then open b, split horizontally (`:sex`), and open c. you then edit the three files, and save by `zz` the three files, in any order.
then, file `b` doesn 't save its changes.
i have tried this a few times, and it seems to always happen.
it also happens if you split horizontally then vertically.
it is always the second file you open.
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. open up any text or type multiple words of gibberish 3. in between words, use `yw` to see the cursor no move, then `yb` to see the cursor move backwards.
1. run `vim --clean popup.vim -c "source %"` phofcode 2. the popup window can be scrolled with `j/k`, `d/u`, `f/b` and `g/g`.
as long as it doesn 't display any wrapped lines, the popup-filter works great (apart from being very long).
3. when wrapped lines appear in the popup window, the key mappings that scroll more than one line won 't work properly.
and it is impossible to achieve this using `firstline` only.
example: phofcode 4. now press `g` to jump to the bottom of displayed buffer.
instead of jumping to last line, this will jump `45`.
similar behavior can be observed with `d/u` and `f/b` keys.
5. there is a workaround, but it requires using `win_execute()` and then setting `firstline`: phofcode but for some reasons `win_execute(a:winid, "normal!
<c-u>")` won 't do anything.
this has also been addressed in #4882 very briefly.
1. run `vim --clean popup.vim -c "source %"` phofcode 2. scroll the popup window with `j/k`, close with `q`.
3. notice how the width changes during scrolling, right before wrapped lines appear/disappear.
test.vim phofcode 1. so %, text properties is displayed.
`call prop_clear(1)`, text properties is
test.vim phofcode 1. so %
detailed steps to reproduce the behavior: 1. build vim without x11 headers available (or use the 'vim' package from nixos) 2. open a file in vim in an xterm 3. there now is now way to copy-paste text from vim to an x11 application
mailed with @cecamp , just raised up a new ticket to record this.
phofcode in windows (gvim/default terminal) `exitval` is 0, in linux (but also in windows git bash mintty terminal) it's -1. if i run `cmd.exe /c grep foo` as command, i get the same.
save the following lines as `my_module.f90` and open it.
the empty string assigned to `b` is wrongly recognized (see the screenshot below).
detailed steps to reproduce the behavior: 1. run `vim --clean filename.rst` 2. set configuration: phofcode 3. write the above shown comment (longer than ``textwidth``)
detailed steps to reproduce the behavior: use a vimrc with only the following lines: set completeopt= set nocompatible set tags={path to my tags files} edit a file with a lot of keywords starting with the same prefix, for example "modulea" go into insert mode and type modulea and hit ctrl-p a bunch of times
test.vim phofcode 1. so % 2. scroll the mouse wheel
test.vim phofcode 1. so % 2. the printed message is 1 but not 2
detailed steps to reproduce the behavior: 1. use `set shell=c:/program 2. test that `:terminal` works.
3. now try to run `:!xxd`.
4. observe that the command fails with: phofcode
manually: * `vim -nu none --clean --no-plugin` * `set columns=73` * `set number` * `66ix<esc>` `:echo screenpos( win_getid(), 1, 66 )` expect: screen position ( line 1, col 71 or so) actual: col: 0 see this test: phofcode fails with: phofcode
run this shell command: vim -nu none + 'set wmh=0|sp|call "resize 0") \' the bottom window is `1` line high.
1. run this shell command: vim -nu none + 'au winenter * wincmd _ ' + 'bo sp ' + 'set lines=10 ' 2. press `q:` to open the command-line window.
3. run `:set lines=30` to increase the height of the terminal from 10 lines to 30 lines.
4. run `:q` to close the command-line window.
the window is `6` lines high.
open a file with the following or paste it in vim.
run `vim --clean foo.vim -c "source %"` with phofcode output: phofcode
test.vim phofcode 1. :so % 2. cursorline also is displayed in the main window
test.vim phofcode 1. locate the cursor at the first line 2. :so % 3. popup window has one line gap between the cursor position and the topleft corner of popup.
4. :call popup_clear() 5. move cursor to line 2 6. :so % 7. right, expected position
detailed steps to reproduce the behavior: run `vim --clean test.py` then phofcode the first 'added ' parameter is zero, despite lines being added.
[[1, 2, 3, 0, [{ 'lnum ': 2, 'col ': 1, 'added ': 1, 'end ': 2}, { 'lnum ': 2, 'col ': 1, 'added ': 0, 'end ': 3}]], [1, 2, 3, 0, [{ 'lnum ': 'col ': 3, 'added ': 0, 'end ': 3}, { 'lnum ': 'col ': 'added ': 'end ': 3}, { 'lnum ': 1, 3}, { 'lnum ': 3}]]]
detailed steps to reproduce the behavior: 1. run `gvim (or open gvim to edit any plain file) 2. type `:!dir ` will list lost of file in 3. type ':terminal' will open a cmd shell with pwd is 4. i've install gtags plugin, `:!global -pq' cannot find the gtags of my project, also output
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
cwtest` `:messages` to see far more than just one error; if you check `:cc`, you 'll see we are not stuck on the first location, but have traversed the entire list.
1. compile vim (current git master): `./configure --without-x --enable-gui=no` 2. create `~/.vim/vimrc.segfault` (or some such) with contents: phofcode 3. run `src/vim --clean -u ~/.vim/vimrc.segfault` 4. focus should be on the terminal window of the second tab page.
use `ctrl-w n` to get into normal mode, then quit with `:qa` 5. if vim quits with no error, then repeat; i get about 70% failure rate.
the observed problem at this point is: phofcode 6. hit enter.
the parent terminal will show: phofcode the segfault seems the most common, but there are some variations.
variation 1: vim gets stuck upon hitting enter: phofcode variation 2: abrt instead of segv:
detailed steps to reproduce the behavior: 1. put this in (create the file) phofcode 2. to debug the highlight groups add this in your `.vimrc`: phofcode you can replace `<f9>` by any other key you want.
3. open a new c file eg: `vim test.c` and paste the following code: phofcode 4. observe: here `test`, `linux_yield_hack` and `is_control` are highlighted with group `cmacroname` as expected.
but problem is that `argc` and `argv` as well and this is not normal!
detailed steps to reproduce the behavior: 1. ensure the terminal displays some 24-bit color, e.g.
run this powershell script phofhyperlink 2. run vim.exe 3. exit
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.
),` vim >= 2. edit `filename` which has supported syntax highlighting 3. select some colorful theme (visual should only define `bg`) 4. select any portion of highlighted text 5. selected text becomes gray and normal sample highlighting: phofcode
test.vim phofcode 1. vim test.vim 2. :so % 3. errors occur
1. run this shell command: vim -nu none + 'setl cul ' + 'set ft=vim|syn enable|/readline#yank ' + 'setl <(curl -s phofurl 2. press `c-n` to complete the text `th`, and maintain the key pressed for a few seconds.
vim keeps scrolling the pum for several seconds.
run this shell command: vim -nu none +'syn on|h :au' the text `note:` is correctly highligted by the syntax group `helpnote`.
the preceding tab character is also c wrongly c highlighted.
note: a quote character is seen as argument to the
for example, 1. build version (just `make`) and run `src/vim` 2. insert 3. search `1` 4. enter visual mode and highlight `567` from right to left.
run this shell command: $ vim -es -nu none + 'cno <c-a> xxx ' + '%p|qa! '
it outputs: c <c-a> * xxx c <c-a> * xxx
1. write this in `/tmp/vimrc`: if 1 let list = ['not from heredoc'] else let list =<< trim end from heredoc end endif echom list 2. start vim like this: $ vim -nu none -s /tmp/vimrc vim outputs `['from heredoc']`.
detailed steps to reproduce the behavior: 1. create the file "syntax_prop.vim" containing the following: phofcode 2. run `vim --clean -s syntax_prop.vim syntax_prop.vim` 3. note that in the last line, `(abc)` is incorrectly highlighted: the initial matchparen highlighting includes `a`.
1, open a term buf 2, set cursorlineopt=number 3, set cursorline 4, hi cursorline ...sth...
1. write this in `/tmp/vimrc`: let a =<< trim end x end echo a 2. start vim like this: $ vim -nu /tmp/vimrc the command raises the error `e990`, because ` x` has been joined with `end` (the backslash is removed in the process): e990: missing end marker 'endx' --- here is a different issue which also involves a line beginning with backslash.
1. write this in `/tmp/vimrc`: fu func() let [a, b, c] =<< trim end xx x xx end echo [a, b, c] endfu call func() 2. start vim like this: $ vim -nu /tmp/vimrc the command raises the error `e688`: e688: more targets than list items the first `xx` has been joined with ` x` (the backslash is removed in the process).
as result, there are only 2 items (`xxx` and `xx`) for 3 targets (`a`, `b`, `c`).
on arch linux run (assuming git is installed): phofcode
1. run open -a macvim a-folder 2. see the list order 3. press i in normal mode to see file details 4. see how the list is now re-sorted 5. cry, baby, cry 6. find your file again in the list (no, it isn 't under the cursor, why would it) 7. get used to list being re-sorted (this is hard) 8. accept is re-sorted (this is harder) 9. be frustrated 10. stop using vim altogether, because, omg.
11. go back to vim, cause you need it 12. file this bug report.
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
`let nr = bufadd('')` 3.
`call setbufline(nr, 1, 'sss')` 4.
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
1.1. make sure `vim` was compiled with either python2 support, python3 support or both.
2. type `:pyx import vim` 3. type `:pyx 4. instead of the expected output of `{0: 0}`, the result was `{ '0 ': '0 '}`.
4.1. the same happens with nested dictionaries.
printing also has this problem as does the reverse returns a python dictionary with ` '1 '` instead of `0`.
detailed steps to reproduce the behavior: case 1: 1. run `vim --clean -c 'set number ' tmp.vim` 2.
`:call appendbufline( ' ', '$ ', [1, 2])` <img width="1680" alt=" 58 30" src=" phofurl line 1 is the unwanted blank line.
case 2: 1. run `vim --clean -c 'set number ' tmp.vim` 2.
`:call appendbufline( ' ', 0, [1, 2])` <img width="1680" alt=" 59 38" src=" phofurl line 3 is the unwanted blank lines.
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`) 2.
`:help expr-!~?` 3. observe: no help window opened, error e149 issued.
`:help expr-!~?` 6. observe: help window shown, no error issued.
`vim --clean` (or `gvim --clean`) 2.
`/expr-!=#` 5. observe: a match is found but the cursor position is wrong: it 's not at the beginning of the match (the 'e ' char) but 3 chars further (on the 'r of matched string).
6. press ctrl-l 7. observe: the cursor jumps to correct position - to 'e ' char.
run these shell commands: $ cat <<'eof' >/tmp/a.txt fold one title {{{1 some text fold two title {{{1 some other text eof $ vim -nu none +'e /tmp/a.txt|setl fdm=marker|sp b.txt|mksession!
$ vim -nu none -s /tmp/s.vim +'b a.txt' the file `a.txt` is not folded in the top window.
the following leaves the command line window open.
run this shell command: $ vim -nu none + 'sil ", 3)|setl list|wincmd w|b x ' -o x y in the right window: - the ` 'list '` option is not set (`:echo &l:list` is 0) - the end of lines are not displayed with a dollar character - the tab characters are not displayed with `i`
run this shell command: $ vim -nu none --cmd 'au bufread,bufnewfile *.xx setf xx' --cmd 'filetype on | au filetype xx setl cul' +'wincmd w' -o xx.xx y in the left window, `'cursorline'` is set (as confirmed by the output of `:echo getwinvar(1, '&cul')` which is 1), but the text line of the cursor is not highlighted by `cursorline`.
if i focus left window, then it gets highlighted.
and if i then focus back right window, text line of cursor in left window remains highlighted.
1 is detailed in that issue 2 is with autoindent or from line start or select something(w/o mouse) then backspace then c-s 3 always there
1. run this shell command: $ vim -nu none +"set co=80|setl fml=0 fdm=marker" {{{1 ', 'x {{{1 \']" + 'norm!
gzv ' 2. press `gk`, `j` and `gk` again.
the last `gk` moves the cursor at the start of the current line.
this is the behavior in a popup (broken): phofcode in comparison this is the behavior in a normal window (correct): phofcode
detailed steps to reproduce the behavior: 1. copy text in the notepad or somewhere.
2. mv .vim abc 3.
'vim --clean' and 'i' and try to paste it.
the vim - try to paste it at bash/cli -> paste ok. 5.
'vim' and 'i' and try to paste it.
the vim - try it at bash/cli -> nothing paste.
1. open a scheme file using vim (e.g.
`vim myprog.scm`) 2. set the omnifunc to `:set 2. type a single quote character (`'`) 3. omni complete: 4. resulting error: phofcode
1. run `vim -u .vimrc` where .vimrc contains the single `set shell` line of configuration.
2. execute for example `:!ls` 3. receive the error message as shown in the screenshot
`set nocursorline` in vimrc 1. vim a.txt 2.
`:setlocal cursorline` , cursorline is displayed.
`:e b.txt`, no cursorline 4.
`:bp`, switched to a.txt, cursorline is displayed.
`:bn`, switched to b.txt, no cursorline
phofcode notice that the status line shows "/tmp/
run this shell command: $ printf 'a b c' >/tmp/file && vim -nu none --cmd 'syntax on' +'sil vim /./ % | copen' /tmp/file the `quickfixline` highlighting starts after the text `a`.
detailed steps to reproduce the behavior: 1. create demo script: phofcode 2. open the script with `vim --clean -s complete_showbreak.vim complete_showbreak.vim` 3. invoke dummycomplete using `i<c-x><c-u>` 4. the `info` popup is displayed with wrapped lines.
the 'showbreak ' character `>` is displayed at the start of each except the first line of wrapped text, but it does not have background colour of popup window, it has terminal background colour.
detailed steps to reproduce the behavior: 1. open a file with url in it.
2. press `gx` on url to open it.
3. vimrun.exe window keeps open and the url doesn 't open until press any key to close the vimrun.exe window.
1. run vim with vim-airline plugin and edit a help filetype.
2. edit a few lines and save it 4-5 times.
3. vim output some error (above) and then crash with "vim: caught deadly signal segv"
compare `let s = localtime() | echo expand("a") | echo localtime() - s` to `let s = localtime() | echo expand("a \'") | echo localtime() - s`
detailed steps to reproduce the behavior: 1. create a minimal .vimrc: phofcode 2. using this .vimrc, edit a file containing a bom.
3. navigate around in the file for a few seconds.
detailed steps to reproduce the behavior: 1.
`gvim -n -u .vimrc -u none -i none` where `.vimrc` contains a single line `set 2. execute `:term`
1. save the above script into a file 2. run `vim --clean` (or `gvim --clean`, etc.)
3. open and source the saved script 4. :call startupcurrentlinebug() 5. a popup window with items a, b, c is displayed; item a is highlighted (_wrong_) 6. press 'j ' to select the next line 7. item c is highligted (_correct_)
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. paste: phofcode 3. paste: phofcode ` 4. select the 2 lines and press `gq` 5. the word `in` will be moved to the
create `repro.vim`: phofcode then: * open vim: `vi -u repro.vim` * create a number of lines of content * move the cursor to the first line * `cg` `<esc>u` to undo the change
create `repro.vim`: phofcode then open vim via: phofcode then attempt completion on: phofcode then use `<c-n>` to select an item in the list of completion candidates.
detailed steps to reproduce the behavior: 1. run `gvim` with no custom vimrc or vimfiles.
don't use `--clean` so that netrw is loaded.
2. run command `let g:netrw_sizestyle = 'h'` 3. open a directory with a few files.
4. hit `i` once to change to long listing style.
notice the human readable file sizes.
5. hit the `s` key a few times to cycle the sorting order (current sorting order can be seen in banner).
after hitting `s` for 2-3 times, file listing gets corrupted and it's no longer usable.
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. execute `:echo 'map(v:val, "2") \')` 3. vim dies with sigabrt
detailed steps to reproduce the behavior: phofcode
detailed steps to reproduce the behavior: 1. run `vim --clean popup.vim -c "source %"` phofcode 2. try any of the filtered commands: `g`, `g`, `<c-e>`, `<c-y>` - vim segfaults with a long, repeated error message: phofcode
1. download the attached example file (`base64.txt`: 128k), and rename it to `base64.json`) 2. run `vim --clean base64.json`) 3. the error occurs (see below for complete error) the error message: phofcode
1. run `vim --clean popup.vim -c "source %"` phofcode 2. press `<c-j>` or `<c-k>` repeatedly to scroll the popup 3. the popup repeatedly jumps back to its original position - `<c-u>` and `<c-d>` do nothing 3. remove the `sign place...` line and run `vim --clean popup.vim -c "source %"` again 4. the buffer in the popup can now be scrolled as expected.
1. run this shell command: `$ printf "foobar foo" >/tmp/html.html && vim -nu none --cmd 'filetype indent on ' + 'set showcmd showmatch matchtime=100 ' /tmp/html.html` 2. enter insert mode at the end of the second line, after `foo`, by pressing `ja` 3. press `{` and `}` to insert `{}` 4. press `x` to insert `x` the `x` character is not inserted in the buffer.
1. run this shell command: $ echo test | vim -nu none +'set cursorline' - 2. press `yy` to yank the current line, then `p` to paste it above.
both lines are highlighted with cursorline.
detailed steps to reproduce the behavior: 1. save the below script as `test_preview_popup.vim` 1. run `tvim -nu none --clean --noplugin 2. run `source %` 3. type `ga<c-x><c-u>` to invoke user defined completion at the point after "invoke" in the right-hand vertical split 4. use `<c-n>` to move to 2nd completion.
observe that a single line of border of _first_ items preview popup is still visible in when second item is selected.
1. run `vim --clean popup.vim -c "source popup.vim"` phofcode 2. close the popup window with the mouse by clicking on `x`.
no errors will appear because the script was sourced from the command line.
3. run `:3,6source`, and then close popup window with mouse.
phofcode 4. redo step 3, but before closing popup window, first make a mouse selection inside popup window.
no error message will appear now.
1. run `vim --clean -c "source popup.vim"` phofcode 2. try to close the popup window by clicking with the mouse on the `x`.
1. run `vim --clean popup.vim -c "source popup.vim"` phofcode 2. run `vim --clean popup.vim -c "source popup.vim"` phofcode
detailed steps to reproduce the behavior: 1. open any file using vim 2.
"+yy one line 3. ctrl+z (or quit vim) 4. try to paste it in any application (gedit, terminal, ...) 5. oberve that it does not paste anything if you skip step 3, you will see the pasted text in step 5 as expected.
the directory tree: phofcode `test.sh` has one function, `tags` is generated with `ctags`.
1. run `vim --clean` 2. type `:set tags+=tagsdir/tags` 3. type `:set wildignore=
1. open an xterm window.
2. run this shell command: $ vim -nu <(cat << 'eof ' cno <plug>(up) <up> nmap <expr> * func() fu!
func() return "*/ <plug>(up) " endfu eof ) +"put = 'test test \'" 3. press `*`.
the error `e486: pattern not found: <plug>(up)` is raised, the cursor has jumped over the second occurrence of `test`, and the search register has been populated with `<plug>(up)`.
instead of pressing the up key while on command-line, vim simply wrote `<plug>(up)`.
it 's as if `cno <plug>(up) <up>` mapping had been ignored.
here 's a single shell command reproducing the error: $ vim -nu none --cmd 'set fdm=marker ' +"put!
func() {{{1 ', \'endfu \']" + 'sil %y ' + 'wincmd w ' + 'exe "norm!
ix evpzd" \' -o /tmp/.a.vim /tmp/.b.vim
detailed steps to reproduce the behavior: 1. enter a tty with gpm phofhyperlink running which gives you a mouse cursor in console.
(for me, i'm running in a qemu virtual machine, and i see this 100% usage both inside the vm from `vim`, and on the host from `qemu`.)
2. have no `/etc/vimrc` and in `~/.vimrc` only have `syntax on` and `set mouse=a`.
3. run vim, see cpu usage is normal 4. click somewhere, see cpu usage go to 100% until you quit vim.
open any .vim file and enable syntax highlighting.
function a() let a = [ [ 's ', 'r '], [ 'a ', 'bar '], [] ] endfunction observe that the ` 's` is highlighted as a "vimsubst", the following single quote is a "vimsubstdelim", and then "vimsubstpat" matches until the fourth single quote, then there is an error flagged at first closing bracket.
changing ` 'a '` to ` 's '` repeats problem in second sub-array.
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. set langmap `:set langmap=jkljkl;hjklhjkl` 3. start terminal `:terminal` 4. from the bottom window you can use `<c-w>l` to switch to the terminal 5. if you now try to use `<c-w>k` move down it will actually try move up instead of down only if you press `<c-w>j` will you move down.
1. run `echo 'a' > a ; echo 'b' > b ; vim --clean a b` 2.
`:call 4. highlight buffer 1: `:call prop_add(1, 1, 5.
`a` is no longer highlighted 9. highlight buffer 2: `:call prop_add(1, 1, 10.
`:next` 11. the buffer is empty 12.
`:e` 13. the buffer is now populated with `b` again
- in normal mode, type `:terminal python` to open `python` in `terminal` provided by vim.
- type `1 `(four space) to input `1 ` to terminal - type `<c-w><c-n>` to get into normal mode and run command: phofcode and the windows vim will echo `0` and the macos vim will echo `4`
open a large file with vim81.
then jump a couple thousand lines down.
phofcode quickly opens with syntax as expected.
phofcode so slow it results in 'redrawtime ' exceeded, syntax highlighting disabled
detailed steps to reproduce the behavior: 1. run `mkdir /tmp/toto@tata` 2. run `touch 3. run `vim --clean` 4. type `:set 5. vim doesn 't change spellfile option
1. download `zalgo.txt` phofhyperlink 2. run `vim --clean --cmd "set spell" zalgo.txt` 3. vim crashes with:
1. run `vim --clean -c "set 2.
1. run `vim --clean` 2. set option `:set virtualedit=all` 3. type phofcode 4. now the cursor is at the column 3, while it should be at the column 2.
run `vim --clean`, and create a popup window with `normal`: phofcode vim opens a popup window and uses the highlight group `pmenu` instead of `normal`.
currently, one has to define a new highlight group with a different name and the exact same attributes as `normal` in order to use `normal` highlighting for popup windows.
passing highlight group that is linked to `normal` doesn't work either.
1. create a simple tags file by running `ctags foo.vim` with the following content: phofcode 2. edit the file `foo.vim` in a separate terminal window to make sure a swap file exists.
2. run in another terminal window: `vim --clean -c "set 3. type `foo` and press `<c-w>}` with the cursor on `foo`.
vim will echo the `e325` message.
either (q)uitting or (a)borting will open an empty popup window with cursor positioned inside window (see first screenshot below).
4. close preview popup window with mouse.
this will crash following message: phofcode
1. run `vim --clean` and set a fixed width for the preview popup window: phofcode 2. edit a file with a prepared `tags` file and press `<c-w>}` on a tag with long file name.
3. result: title of the popup window will be longer than the popup window width.
the file may need to truncate at some specific place.
detailed steps to reproduce the behavior: 1. create a new vimscript with following content: phofcode 2. save and source the vimscript with `:w test.vim | source %` 3. as indicated by the output is the return value of filereadable _true_ for first and _false_ for second given path.
but only difference between both paths being that first is an absolute path to sourced script while second is relative to users home directory.
detailed steps to reproduce the behavior: 1. run `vim --clean` in cmd 2.
`python -c "while true: pass"` 5. press `ctrl + c`
1. run `vim --clean popup.vim -c "source popup.vim"` phofcode 2. mover cursor to the right side of the window and press `<space>ep`.
3. the right border (or padding, see screenshot below) are always cut off.
1. go into vim's `src/` directory and run `vim --clean`.
2. open a new window with buffer `foo`, and run a job that will scroll the window displaying the buffer `foo`: phofcode 3. delete all lines in the buffer `foo`: phofcode * notice, there's no topline in buffer `foo`.
4. run a job that outputs one line: phofcode 5. result: the first line of `foo` remains invisible, unless focus is moved to window displaying `foo`.
when job outputs 2 lines, second line will be visible immediately.
`:sp` to create another window, and the cursor is in the upper window now.
3. press `<c-w>_` to maximize the upper window.
`:tabedit test.txt` to created another tab 5.
`:q` to quit the just now created tab
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. enter insert mode and type " phofurl 3. go to normal mode and type `gx`.
4. observe that vim doesn 't open the url in a web browser.
2. type `hello vim world` into the buffer.
3. then run: phofcode the word `world` is still highlighted even though the match `mid` has been removed.
pressing `<c-l>` clears the highlighting.
run `vim --clean tmp.vim -c "source tmp.vim"` phofcode
1. run `vim --clean tmp.vim -c "source tmp.vim"` phofcode 2. the more characters are added to `showbreak`, the wider the popup dialog window gets, and eventually exceed the window width.
only by passing the popup window option `{ 'wrap ': v:false}` to `popup_dialog()` will draw dialog correctly.
1. run `vim --clean <file>` 2. type ':set number ' 3. type ':set relativenumber ' screen flashes 4. type ':set norelativenumber ' screen flashes
1. run `vim --clean -c "source run.vim"` (see below).
2. open a large file, like vim 's `evalfunc.c` file.
3. type `:run<cr>` with focus on `evalfunc.c`.
4. vim reports the following error: phofcode note: the output of the job contains the output of `cat --help` as one would have expected.
detailed steps to reproduce the behavior: 1. install vim-fugitive (this commit phofurl (meanwhile there was workaround introduced which fails on paths with spaces) 2. install vim-dispatch plugin ( phofurl 3. run `vim --clean` 4. add vim-fugitive and vim-dispatch `:set packpath=~/vimfiles`, `:packadd vim-fugitive`, `:packadd vim-dispatch` 5. open directory with pushable git repo make changes and open `:gstatus` window 6. stage and commit changes 7. run `gpush`
1. put `set formatoptions=rql` your vimrc file.
3. edit any `.vim` file.
4. type ":verbose set formatoptions?"
5. observe output (should be `formatoptions=croql last set from .../ftplugin/vim.vim`)
1. setup directory with `foo.c` and `.gitignore` files: 1.1 `touch foo.c` 1.2 `echo '.
* ' > .gitignore` 2. run `vim --clean` 3.
`:let g:netrw_list_hide = netrw_gitignore#hide()` 5.
`:e` 6. both files are hidden
search for either '' or '' in a file containing both of these characters, for example : `.
detailed steps to reproduce the behavior: 1. edit `filename.xml` 2.
<esc>set ts=2 5. insert '<tag> ' 6. insert a newline 7. observe: indent for the line is 4, it must be 2 8. insert a "<" 9: observe: indent for the line is 4, correct 4. describe the error
phofcode gunzip the following file in that same directory as `input`: input.gz phofhyperlink phofcode then issue the following commands: phofcode at this point you will have to press enter a few times to allow the output to continue, but then look at `/tmp/listener.log`: phofcode notice the third change as part of first callback: this does _not_ have leading `//`.
but if you look at vim window, you will see following:
detailed steps to reproduce the behavior: 1. change to a directory with subdirectories that have files with content to search through, but not too big because you don 't want to wait forever.
2. run `vim --clean` (or `gvim --clean`, happens in both) 3. execute `:autocmd bufread * silent!
lcd %:p:h` 4. execute `:vim /whatever/
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
`call popup_create("hello", {"borderchars": [ ' ', ' ', ' ', ' ', ' ', ' '], "border": [1,1,1,1])`
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. issue `:set 3. type: phofcode 4. describe the error both `test-word` and `word-test` will be completed, while only the latter should
detailed steps to reproduce the behavior: 1. run `vim --clean` 2. type `:vsplit` 3. make the current window big with ctrl-w and then `|` (pipe) 4. type `:windo ''` (to do nothing in every window) 5. the tiny window gets expanded
unfortunately, i 'm not able to consistently reproduce it, but it has happened many times, and on two different machines.
this is what i did to trigger it: 1. install coc.nvim phofhyperlink 2. install coc extensions by running: `:cocinstall coc-tsserver coc-tabnine` 3. open the extensions list by running `:coclist extensions` 4. toggle an extension by pressting `tab` and then `t`.
1 edit `vimrc` and add `set wildignore=*.pyc` 2. create a file `file.pyc`.
3. run `gvim --remote-tab-silent file.pyc`.
4. the error message "e479: no match" appears.
detailed steps to reproduce the behavior: 1. set terminal width to 17 (`:echo &columns` should be 17).
1. run `vim -nu none` 1.
`:hi statuslinetermnc` or `:call setline(1, join(split(execute( 'hi statuslinetermnc '))))` 1. it looks like "statuslinetermncxxx term=reverse ctermfg=0 ctermbg=2 guifg=bg guibg=lightgreen".
didn 't i describe that above?
i 've also been able to get this to work (so to speak) in other terminal emulators: 1. if your terminal emulator 's $term contains xterm (like gnome-terminal and konsole for some reason do), change $term to something not containing xterm (e.g.
`export 2. start vim `vim --clean`.
5. watch it become unresponsive.
1. type `alt + f11` to set mintty screen size to full 1. run `vim -nu none` 1. type `:call popup_create( 'foo ', { 'line ': &lines-5, 'col ': &columns-5, 'pos ': 'botright '})` 1. type `alt + f10` to set mintty screen size to default type `alt + f11` set mintty screen size full sigabrt occurs.
1. run `vim --clean` (or `gvim --clean`, etc.)
2. edit `filename` 3. add the following autocmd: phofcode 3. edit another file: `:e <another_file>` 4. switch to the other buffer: `:bprevious` 5. observe the output.
detailed steps to reproduce the behavior: 1. use the popup menu(open with vim tab or edit with vimvim) for the right mouse button to open 2. :set tags 3. ctrl + ] in function start_armboot to jump to definition in line 333 4. after 3s it would jump definitionit takes too long if run gvim.exe with left mouse button then drag the start.s gvimthen do process 2 it would jump definition very fast whats difference between right mouse button and left mouse button
detailed steps to reproduce the behavior: 1. create a file `t.php`: phofcode 2. run `vim --clean t.php` 3. place a cursor at the `,`.
start with `gvim --clean bug.vim` phofcode the first character is tab.
so error highlight must be painted from "f".
detailed steps to reproduce the behavior: 1. run `vim --clean` 2. type `:copen<cr>` 3. type `:copen<cr>`
detailed steps to reproduce the behavior: 1. create a temporary directory and `cd` into it: `cd $(mktemp -d)`.
1. copy this snippet into `./test.c`: phofcode 1. create a tags file with ctags: `ctags -r .`.
1. run `vim --clean -t main`.
the buffer of `./tags` is not focused.
the buffer of `./tags` is listed.
the buffer of `./tags` is focused.
* download the vim source code for at least version 8.1 patch 1502 (i 'm using 1524) * go to the `vim/src` directory * run `make distclean` * run `cflags= '-o2 -pipe ' ./configure --with-features=tiny` run `make -j` run `./vim --version` (or open vim and type :ver), and notice that at the bottom it shows `linking:` and `-lcanberra` appears.
first run in command line: mkdir foo; cd foo; touch a; chmod u-w a;vim --clean phofcode
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. edit `filename` 3. type '....' 4. describe the error
detailed steps to reproduce the behavior: i used this (with `--cmd 'let g:nothrow = 1 '` to control that it succeeds without throwing) to refine my code: function!
foo() let l:var = 0 try if !exists( 'g:nothrow ') throw 'something ' endif let x = wincol() || l:var catch /something/ endtry endfunction try call foo() quit!
i can reproduce this using `govim`; i haven 't managed to find a smaller repro.
minimal vimrc: phofcode phofcode phofcode
detailed steps to reproduce the behavior: * `vim -nu none --clean --noplugin` * `:call popup_create( 'test ', { 'minwidth ': 100 } )` * resize the windows to a very small width crash seems to be reallocating the screen buffers:
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. edit any file 3. type phofcode then motion `$` on a line with text.
phofcode this takes about 6 seconds in my environment.
when i increase the repeat count from to it takes about 24 seconds.
(this is not a real world use case, though.)
0. load this file long.txt phofhyperlink 0.
`:set lines=25` `:set columns=69` scroll to bottom, move cursor to last character.
using `v`, enter visual mode and select from the bottom of the file to the top.
scroll to top, select first character.
last line should extend beyond the length of screen.
unselect using `<esc>` observe artifact (done) `<c-l>` clear
detailed steps to reproduce the behavior: 1. run `gvim --clean` 2. create a second line with the text `ab*cd` 3. position the cursor on the first text 4. set `nomagic` via command `:set nomagic` 5. set `@/` register to search text `ab*cd` via command `let @/="ab*cd"` 6. press `n`
detailed steps to reproduce the behavior: 1.
`vi test.py` phofcode 3. move cusor to last line 4. press `<f5>` 5. you will find cusor move to first line automatically
i have a repro of this and can either provide the precise steps for the repro or happily provide more logging/debug info as required.
what follows is a description of the sequence of events.
all calls from vim to `govim` (whether autocmd handlers, commands or functions) use `ch_evalexpr`, i.e.
the read loop within `govim` is separate from the processing of events.
* format-on-save triggered by `:w` command * fires `bufwritepre` autocmd * this is handled synchronously within `govim` which makes a call to `gopls` for any edits that need to be applied * still within autocmd handler, changes are applied, one by one first change in our repro happens to be a call `append()` this results, as expected, in callback our `listener_add` function with single change `govim` is in process handling this change when we see _another_ identical callback; i.e.
our `listener_add` callback function, with note at stage we have _not_ returned from original callback (the logs show be case) we see same callback 5 times in total.
these multiple callbacks also appear be concurrent, i.e.
function has not returned from first call before second call made by vim.
things fall apart after we get second because we are, at that point, process trying apply second change `gopls`... which fails because vim thinks should handling `listener_add` created (and hence text locked) and so get error message: phofcode but i think error probably red herring; wouldn 't run into if didn 't get multiple callbacks.
change the two instances of `let t_f2` to `let &t_f2`.
then run `make test_eval.out` in the testdir.
1. run `vim --clean` 2. type `:terminal` 3. type `printf " 033]52;;$(printf "%s" "blabla" | base64) a"` 4. observe that the text "blabla" is _not_ in the system clipboard.
5. exit vim 6. type `printf " 033]52;;$(printf "%s" "blabla" | base64) a"` into your terminal window.
7. observe that the text "blabla" _is_ in the system clipboard.
1. run `vim --clean -s reproduce.vim` phofcode
detailed steps to reproduce the behavior: 1. run vim in putty terminal 2. use :term to open a terminal 3. int t mode , input up or down key 4. can 't get last of next shell cmd in shell use message cmd in vim cmd line and get the following log e21: cannot make changes, 'modifiable ' is off
detailed steps to reproduce the behavior: 1. run `gvim --clean` 2. put the following content in `t.vim`: phofcode 3. run `:so t.vim` 4. it shows `:so t.vim` and after one second `done`.
1. run `gvim -u none -u none` 2. set the following options.
probably easiest to load the following text into a buffer... set shell=bash -c set shellcmdflag= set shellxquote=' set shellquote= shellredir=> noshelltemp shell?
...and then executing that text, via buffer `a`: :%y a|@a now run a shell command :r !echo hello
detailed steps to reproduce the behavior: 0. make sure window is small enough and search stats is shown: set columns=80 shortmess-=s 1. copy&paste this text to a file.
2. move cursor over 3. type * 4. observe the "press enter to continue" prompt.
0, vim vimrc 1, type '#whatever#' 2, the 'cursor' on the letter 'w' 3, issue 'de' 4, it would cut 'whatever#' - including the end '#'
vim --clean -s <(cat << 'eof ' func!
foo() return submatch(0) endfunc call setline(1, [ '1 aaa ', '2 aaa ', '3 aaa ']) %s/aaa/ =foo()/gn if &modifiable | quit!
1. run `vim --clean -s reproduce.vim` phofcode
detailed steps to reproduce the behavior: 1. open an empty buffer.
1. :set fileencoding=latin1 1. write an emoji into the buffer.
1. try to save as described above.
file is saved, with "?"
1. run `vim --clean -s reproduce.vim` phofcode
1. run `vim --clean -s reproduce.vim` phofcode
1. create a file `text.txt` which is not encoded in utf-8 format.
test.txt phofhyperlink 2. open vim `vim -u init.vim test.txt` with the following setting: phofcode
detailed steps to reproduce the behavior: 1. run `cmd.exe` and input `gvim --clean --cmd ":set dir=$temp//" 2. modify some lines and use windows task manager to kill gvim.exe 3. then back to step 1, and choose `recover` to restore last modified state.
4. gvim will produce `e305: no swap file found for _vimrc`
`xrdb -merge <<< 'urxvt*background: 2.
`urxvt -e sh -i` 3. in the new terminal, `vim --clean '+set t_rc='` 4. type `:q<return>asdf<return>` rather quickly 5. observe your prompt/shell; you might get a disk space usage report!
6. re-run with an alpha of `ffff` and observe that it resolves the issue 7. now try `vim --clean` (without clearing `t_rc`), it's back :(
1. write these lines in `/tmp/vimrc`: let &t_ti = " e[?1004h" let &t_te = " e[?1004l" exe "set <s-f18>= e[o" exe "set <s-f19>= e[i" fu!
s:do(event) abort if exists( '# '.a:event) exe 'do '.a:event. '
<nomodeline> % ' endif endfu nno <silent> <s-f18> :<c-u>call nno <silent> <s-f19> :<c-u>call augroup restore_focus_events au!
au focusgained * echom 'focusgained was fired ' au focuslost * echom 'focuslost was fired ' augroup end 2. from xterm, start vim with this minimal vimrc: $ vim -nu /tmp/vimrc 3. run an ex command whose output contains multiple lines: :echo "foo bar" 4. focus a different program window (web browser, email client, ...).
5. focus back the xterm window.
6. the output of `:echo "foo bar"` has been cleared.
" below, {} are used to indicate a variable gvim.exe -i none -n -u none --noplugin -u none {file} # longer than two pages / or ? "
multiple, until the above condition is satisfied 4. describe the error see 1
detailed steps to reproduce the behavior: 1. run `:set spelllang=sr@latin spell` 2. vim returns: `e474: invalid argument: spelllang=sr@latin`
1. run `vim -nu none` 2.
`:set ttymouse=sgr` 4. click the test winbar menu
1. run `vim --clean` 2. run `kill -sigtstp pid-of-vim` 3. vim did't quit alternate screen,there 's a mess
cd into the source repo.
do `./configure [your flags] && make && make test`.
then do `git clean -ndfx`.
observe the aforementioned files hanging around.
if you do that same sequence of steps but without the `make clean`, you will see all of the other tons of test files that `make clean` does wipe out.
i don 't have a minimal reproduction for this unfortunately.
i haven 't managed a minimal repro of this yet.
so the best i can do is to suggest running a minimal version of phofurl * install phofurl * run vim/gvim with `-u` which sources phofurl
i can 't reproduce this locally, but can probably add some diagnostic lines for the travis ci run if someone could suggest the best way forward.
1. run `vim --clean` 2.
`:inoremap <esc> <esc>jk` 3. enter insert mode (say, `i`) 4. leave insert mode by pressing `<esc>`
detailed steps to reproduce the behavior: 1. run `vim --clean` (or `gvim --clean`, etc.)
2. edit `filename` 3. type '.... ' 4. describe the error
1. build vim with `+autoservername` feature.
`test_term_gettitle` fails with following messages.
phofcode succeeds, but: phofcode fails with: make[2]: entering directory cd ..; old_po_file_input=yes old_po_file_output=yes xgettext --default-domain=vim --add-comments --keyword=_ --keyword=n_ --keyword=ngettext:1,2 *.c if_perl.xs gvimext/gvimext.cpp globals.h if_py_both.h vim.h po/gvim.desktop.in po/vim.desktop.in gcc -std=gnu99 -c -i.
-iproto -dhave_config_h -dfeat_gui_gtk -pthread -i/usr/include/gtk-2.0 -i/usr/include/atk-1.0 -i/usr/include/cairo -i/usr/include/pango-1.0 -i/usr/include/glib-2.0 -i/usr/include/pixman-1 -i/usr/include/freetype2 -i/usr/include/libpng12 -g -o2 -u_fortify_source -d_fortify_source=1 -o objects/pathdef.o auto/pathdef.c gcc -std=gnu99 -c -i.
-iproto -dhave_config_h -dfeat_gui_gtk -pthread -i/usr/include/gtk-2.0 -i/usr/include/atk-1.0 -i/usr/include/cairo -i/usr/include/pango-1.0 -i/usr/include/glib-2.0 -i/usr/include/pixman-1 -i/usr/include/freetype2 -i/usr/include/libpng12 -g -o2 -u_fortify_source -d_fortify_source=1 version.c -o objects/version.o xgettext: warning: file `if_perl.xs' extension `xs' is unknown; will try c xgettext: warning: file `po/gvim.desktop.in' extension `desktop' is unknown; will try c xgettext: warning: file `po/vim.desktop.in' extension `desktop' is unknown; will try c mv -f ../vim.po vim.pot msgfmt --desktop -d .
--template gvim.desktop.in -o gvim.desktop msgfmt --desktop -d .
--template vim.desktop.in -o vim.desktop msgfmt: unrecognized option '--desktop' try `msgfmt --help' for more information.
phofcode if i check the output i see: phofcode
1) use a large terminal with >= 203 columns.
you may need to reduce font size to be able to have a terminal with enough columns.
i can reproduce the ticket with for example with terminal that has 58 lines & 203 columns.
the bug does not happen a terminal size of 58 lines & 202 columns.
i think that bug happens when number of columns is >= 203.
requires go 1.12.2 phofhyperlink .
phofcode notice that `gvim` does not fork/detach from the terminal.
phofcode then: `vi -u repro.vim + 'execute "normal gives the output: phofcode
'vim' or 'vim --clean' in linux console shows a 'c' in first position (1st char of 1st line).
using the following `dockerfile`: phofcode then follow these steps: phofcode then within the container: phofcode which will fail with: phofcode you will notice that in this setup it is possible to run `xterm`: and just to demonstrate that `vim` itself works:
detailed steps to reproduce the behavior: 1. set up gvim to use any nerd font ( phofurl 2. set listchars=tab:
detailed steps to reproduce the behavior: 1. have vim with the `"*` register enabled (+clipboard, +x11) 2. run `valgrind --tool=memcheck --leak-check=full --show-leak-kinds=all vim --clean + 'au textyankpost * let x=10 ' prime.c`.
note: valgrind is not actually necessary, but it occurs more frequently with valgrind, possibly due to the slowdown it causes.
the file prime.c below (but any c file will work): 3. begin visually selecting wildly 4. you should see colors occasionally jumping with wrong syntax highlighting.
often red highlights will appear.
// cindent // indentexpr= // cinoptions=#1,j1,#0 testing done with this report text (paste markdown and then comment with: `%s, s,//&`) with: gvim -nu none +"set cindent cinoptions=#1,j1,#0" +"syntax on" file.cs indenting with `gg=g`.
the string array initializer doesn 't indent correctly if the array is the first argument.
it indents like this: string[] defs = finddefs( new string[] { "postprocessing.editor", unwanted indentation "recorder", }); the current indentation is controlled by the cino-jn (anonymous java functions) option.
without it, the elements are aligned but they 're not indented relative to their scope: (`setlocal cinoptions=#1,#0 | normal vip5<=ip>ip`) :verbose setlocal cindent?
cindent indentexpr= cinoptions=#1,#0 string[] defs = finddefs( new string[] { "postprocessing.editor", "recorder", }); c# also has anonymous functions, so jn option is indispensable.
place the cursor at the asterisk in the following code sample: namespace foo { class bar { void qux() { // press [m here -> * } } }
place the cursor at the asterisk in the following code sample: namespace foo { class bar { void qux() { // press [m here -> * } } }
